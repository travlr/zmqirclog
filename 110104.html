<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"></meta>
    <title>ZeroMq IRC Log</title>
    <base href="http://travlr.github.com/zmqirclog/index.html" target="_self"/>
    <link rel="stylesheet" href="css/base.css"></link>
    <link rel="shortcut icon" href="images/favicon.gif">

</head>

<body>
    <a name="pagetop" id="pagetop"></a>
    <div id="header-container">
    <div id="header-left" style="float: left;">
        <div id="header-left-top">
            <a href="index.html" target="_blank">
            <img src="images/zeromq1-300x115.png" alt="ZeroMq Logo" border="0"/>
            </a>
        </div>
        <div id="header-left-bottom" style="padding-left:200px;">
            IRC Log
        </div>
    </div>
    <div id="header-right">
        <div id="header-right-top" style="float:right; vertical-align:text-top; padding-top:5px">
            <div id="cse-search-form" style="width: 250px;">Loading</div>
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script type="text/javascript">
  google.load('search', '1');
  google.setOnLoadCallback(function() {
    var customSearchControl = new google.search.CustomSearchControl('017268610037587914919:goqutszmb5o');
    customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
    var options = new google.search.DrawOptions();
    options.setSearchFormRoot('cse-search-form');
    customSearchControl.draw('cse', options);
  }, true);
</script>
<link rel="stylesheet" href="http://www.google.com/cse/style/look/default.css" type="text/css" />
<style type="text/css">
  .gsc-control-cse {
    font-family: Arial, sans-serif;
    border-color: #FFFFFF;
    background-color: #FFFFFF;
  }
  input.gsc-input {
    border-color: #BCCDF0;
  }
  input.gsc-search-button {
    border-color: #ff0000;
    background-color: #CECECE;
  }
  .gsc-tabHeader.gsc-tabhInactive {
    border-color: #E9E9E9;
    background-color: #E9E9E9;
  }
  .gsc-tabHeader.gsc-tabhActive {
    border-top-color: #ff0000;
    border-left-color: #E9E9E9;
    border-right-color: #E9E9E9;
    background-color: #FFFFFF;
  }
  .gsc-tabsArea {
    border-color: #E9E9E9;
  }
  .gsc-webResult.gsc-result {
    border-color: #FFFFFF;
    background-color: #FFFFFF;
  }
  .gsc-webResult.gsc-result:hover {
    border-color: #FFFFFF;
    background-color: #FFFFFF;
  }
  .gs-webResult.gs-result a.gs-title:link,
  .gs-webResult.gs-result a.gs-title:link b {
    color: #0000CC;
  }
  .gs-webResult.gs-result a.gs-title:visited,
  .gs-webResult.gs-result a.gs-title:visited b {
    color: #0000CC;
  }
  .gs-webResult.gs-result a.gs-title:hover,
  .gs-webResult.gs-result a.gs-title:hover b {
    color: #0000CC;
  }
  .gs-webResult.gs-result a.gs-title:active,
  .gs-webResult.gs-result a.gs-title:active b {
    color: #0000CC;
  }
  .gsc-cursor-page {
    color: #0000CC;
  }
  a.gsc-trailing-more-results:link {
    color: #0000CC;
  }
  .gs-webResult .gs-snippet {
    color: #000000;
  }
  .gs-webResult div.gs-visibleUrl {
    color: #008000;
  }
  .gs-webResult div.gs-visibleUrl-short {
    color: #008000;
  }
  .gs-webResult div.gs-visibleUrl-short {
    display: none;
  }
  .gs-webResult div.gs-visibleUrl-long {
    display: block;
  }
  .gsc-cursor-box {
    border-color: #FFFFFF;
  }
  .gsc-results .gsc-cursor-page {
    border-color: #E9E9E9;
    background-color: #FFFFFF;
  }
  .gsc-results .gsc-cursor-page.gsc-cursor-current-page {
    border-color: #ff0000;
    background-color: #FFFFFF;
  }
  .gs-promotion {
    border-color: #336699;
    background-color: #FFFFFF;
  }
  .gs-promotion a.gs-title:link,
  .gs-promotion a.gs-title:link *,
  .gs-promotion .gs-snippet a:link {
    color: #0000CC;
  }
  .gs-promotion a.gs-title:visited,
  .gs-promotion a.gs-title:visited *,
  .gs-promotion .gs-snippet a:visited {
    color: #0000CC;
  }
  .gs-promotion a.gs-title:hover,
  .gs-promotion a.gs-title:hover *,
  .gs-promotion .gs-snippet a:hover {
    color: #0000CC;
  }
  .gs-promotion a.gs-title:active,
  .gs-promotion a.gs-title:active *,
  .gs-promotion .gs-snippet a:active {
    color: #0000CC;
  }
  .gs-promotion .gs-snippet,
  .gs-promotion .gs-title .gs-promotion-title-right,
  .gs-promotion .gs-title .gs-promotion-title-right *  {
    color: #000000;
  }
  .gs-promotion .gs-visibleUrl,
  .gs-promotion .gs-visibleUrl-short {
    color: #008000;
  }
</style>

        </div>
        <div style="clear:right;"></div>
        <div id="header-right-bottom" style="text-align:right; vertical-align:text-bottom; padding-right:30px; padding-top:75px;">
            <a href="http://www.zeromq.org/" target="_blank">ZeroMq Home</a>
        </div>
    </div>
    <div style="clear: both;"></div>
    <hr/>
</div>

    <div class="content">
        <h2>Tuesday January 4, 2011</h2>
        <table class="message-table">
            <th>[Time]&nbsp;Name</th><th>Message</th>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-1" class="rowLink" href="#msg-1">
                    [05:42]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    I&#39;ve done some work updating the zmq erlang bindings, for the most part things are working well now, but I&#39;m running into issues with events on the socket FD (that was retrieved using ZMQ_FD getsockopt).  question: Can the FD be used in poll/select in one thread while the Socket is being used in other thread?  eg. the erlang vm sits on the FD in the poll/select call while waiting for an event and in the mean time other socket operations may be performe
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-2" class="rowLink" href="#msg-2">
                    [06:45]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    jugg: no
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-3" class="rowLink" href="#msg-3">
                    [06:45]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    sockets are not thread safe
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-4" class="rowLink" href="#msg-4">
                    [06:46]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    you can access a socket from at most one thread at a time
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-5" class="rowLink" href="#msg-5">
                    [06:48]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    Is this zmq specific, or (I&#39;ve not yet been able to find an answer) is it the case that a normal file descriptor would have problems if one thread used it in a poll() call, while another thread tried to read/write to it?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-6" class="rowLink" href="#msg-6">
                    [06:49]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    normal FDs are thread safe
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-7" class="rowLink" href="#msg-7">
                    [06:50]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    0mq is special as it uses lock-free algorithms
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-8" class="rowLink" href="#msg-8">
                    [06:50]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    thus, it cannot synchronise the access using mutex or somesuch
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-9" class="rowLink" href="#msg-9">
                    [06:51]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    you can apply a mutex on top of it yourself, if that&#39;s what you need
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-10" class="rowLink" href="#msg-10">
                    [06:51]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    but be aware of the performance impact
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-11" class="rowLink" href="#msg-11">
                    [06:51]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    What makes the socket FD different than a normal FD in this regards?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-12" class="rowLink" href="#msg-12">
                    [06:51]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    No, that isn&#39;t an option for the erlang bindings...
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-13" class="rowLink" href="#msg-13">
                    [06:59]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    jugg: the 0mq FD is just a socketpair to sent notices that there are messages/commands to read from the socket&#39;s queue.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-14" class="rowLink" href="#msg-14">
                    [07:00]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    the message data you get from recv() is transferred in-memory from a lock-free queue, not over the socketpair.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-15" class="rowLink" href="#msg-15">
                    [07:02]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    jugg: are you making a erlang port or a linked-in driver?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-16" class="rowLink" href="#msg-16">
                    [07:03]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    linked-in driver - its based off of the broken erlzmq bindings.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-17" class="rowLink" href="#msg-17">
                    [07:10]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    So if the socket FD is a socketpair, what makes it not usable in a poll call from one thread while another thread uses the socket?  Does zmq listen for events on the socket internally (outside of zmq_poll itself)?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-18" class="rowLink" href="#msg-18">
                    [07:11]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    jugg: yes, it does so in zmq_send, zmq_recv and alike
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-19" class="rowLink" href="#msg-19">
                    [07:12]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    ok... well, time to approach the erlang binding architecture differently then... :/
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-20" class="rowLink" href="#msg-20">
                    [07:14]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    sustrik: if the polling thread just calls poll() and not any zmq_* functions like zmq_poll(), would it still cause an issue?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-21" class="rowLink" href="#msg-21">
                    [07:14]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    if other parts of zmq consume the socketpair events, then yes...
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-22" class="rowLink" href="#msg-22">
                    [07:14]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    jugg: what is your polling thread doing with the events it gets back from the 0mq FD?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-23" class="rowLink" href="#msg-23">
                    [07:15]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    Notifies the socket owner thread and event occurred.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-24" class="rowLink" href="#msg-24">
                    [07:16]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    and =&gt; an
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-25" class="rowLink" href="#msg-25">
                    [07:16]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    ok, even if the owner thread gets a old POLLIN or POLLOUT event it can still try to call zmq_send/zmq_recv() with the NOBLOCK flag.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-26" class="rowLink" href="#msg-26">
                    [07:16]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    it will just get an EAGAIN if it had already comsumed the event.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-27" class="rowLink" href="#msg-27">
                    [07:17]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    the problem is that it does not get a POLLIN/OUT event - as it appears the zmq internals are consuming those events...
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-28" class="rowLink" href="#msg-28">
                    [07:17]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    which from sustrik&#39;s statement confirms this.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-29" class="rowLink" href="#msg-29">
                    [07:17]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    do you use the NOBLOCK flag?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-30" class="rowLink" href="#msg-30">
                    [07:18]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    I don&#39;t see the relevance... the problem is the erlang poll is not being signaled an event occurred...
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-31" class="rowLink" href="#msg-31">
                    [07:18]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    your owner thread should be calling zmq_send()/zmq_recv() with the NOBLOCK flag, and only if it get EAGAIN, do it wait for an event notice from the polling thread.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-32" class="rowLink" href="#msg-32">
                    [07:18]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    neopallium: getsockopt(ZMQ_EVENTS) consumes events from the socket pair
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-33" class="rowLink" href="#msg-33">
                    [07:19]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    sustrik: yes, and he should only call that from the owner thread not the poller thread.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-34" class="rowLink" href="#msg-34">
                    [07:20]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    jugg: why do you need to combine recv and poll from different threads
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-35" class="rowLink" href="#msg-35">
                    [07:20]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    (i know, erlang is tricky)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-36" class="rowLink" href="#msg-36">
                    [07:21]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    neopallium: i assume the problem is how erlang VM works
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-37" class="rowLink" href="#msg-37">
                    [07:21]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    it&#39;s kind of thread-agnostic
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-38" class="rowLink" href="#msg-38">
                    [07:22]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    jugg: have you tried an external C port?  it would make this must similar.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-39" class="rowLink" href="#msg-39">
                    [07:23]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    sustrik: yeah, the book I have on erlang doesn&#39;t have much details about how the linked-in driver interface is effected by any internal threads that the erlang VM might have.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-40" class="rowLink" href="#msg-40">
                    [07:25]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    the erlang binding is a troublesome one
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-41" class="rowLink" href="#msg-41">
                    [07:25]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    originally it was written by shammika pathirana
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-42" class="rowLink" href="#msg-42">
                    [07:25]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    the only way to wait on an event in erlang is to provide the fd to the erlang vm.  The erlang vm, then calls the driver callback routine input/output_ready depending on the event type.  The callback is an arbitrary thread.   That callback checks the fd if an even actually occurred on the socket using getsockopt(ZMQ_EVENTS), and if so, then sends a notification back into the erlang world notifying an erlang process which owns the socket.  That erlang pr
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-43" class="rowLink" href="#msg-43">
                    [07:25]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    who had no erlang experience at the time afaik
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-44" class="rowLink" href="#msg-44">
                    [07:26]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    then it was fixed by serge aleynikov
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-45" class="rowLink" href="#msg-45">
                    [07:26]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    later on we&#39;ve created some fixes when working on RabbitMQ/0MQ bridge with VMWare
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-46" class="rowLink" href="#msg-46">
                    [07:26]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    jugg: are you sure the vm is using a different polling thread from the callbacks?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-47" class="rowLink" href="#msg-47">
                    [07:26]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    this are not yet in
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-48" class="rowLink" href="#msg-48">
                    [07:26]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    etc.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-49" class="rowLink" href="#msg-49">
                    [07:27]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    neopallium, the callback gets called from arbitrary threads... I don&#39;t know for sure if the poll is happening in the same thread or not.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-50" class="rowLink" href="#msg-50">
                    [07:28]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    what about an alternative architecture: poll on FD, when signaled remove it from the pollset then read, when read is done, return it to the pollset
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-51" class="rowLink" href="#msg-51">
                    [07:29]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    jugg: why not do the zmq_recv() in the output_ready() callback instead of sending a notice to the erlang process (which is not a real thread/process).
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-52" class="rowLink" href="#msg-52">
                    [07:30]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    sustrik, I&#39;m already half way down that path...
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-53" class="rowLink" href="#msg-53">
                    [07:30]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    even if you are sending a notice back to the erlang process (saying hay you can read now), that erlang process will just send a port command which will be delivered to the port
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-54" class="rowLink" href="#msg-54">
                    [07:30]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    neopallium, that has issues with multi-part messages...
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-55" class="rowLink" href="#msg-55">
                    [07:31]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    the ports callbacks should be restricted to one thread.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-56" class="rowLink" href="#msg-56">
                    [07:31]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    I don&#39;t see any warnings that linked-in drivers need to be thread-safe.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-57" class="rowLink" href="#msg-57">
                    [07:32]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    jugg: do you deliver each part of the message in a different message back to the controlling process?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-58" class="rowLink" href="#msg-58">
                    [07:33]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    each erlzmq recv call acts just like zmq_recv.  It&#39;ll return each part separately.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-59" class="rowLink" href="#msg-59">
                    [07:34]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    jugg: btw, there&#39;s a problem with erlzmq project now; as i&#39;ve mentioned dhammika is not really an erlang guy and serge has unrelated problems now that prevent him from doing stuff
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-60" class="rowLink" href="#msg-60">
                    [07:35]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    in case you are interested i can give you commit access...
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-61" class="rowLink" href="#msg-61">
                    [07:36]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    sustrik, let me get this working successfully, and I&#39;ll ping you then for access.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-62" class="rowLink" href="#msg-62">
                    [07:37]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    jugg: ok, good
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-63" class="rowLink" href="#msg-63">
                    [07:38]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    there&#39;s also VMware patch that solves the sender-side backpressure IIRC
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-64" class="rowLink" href="#msg-64">
                    [07:38]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    sustrik, just to clarify something.. you said getsockopt(ZMQ_EVENTS) consumes the socketpair events... do you mean payload or events that would trigger a waiting poll call?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-65" class="rowLink" href="#msg-65">
                    [07:39]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    it consumes internal 0mq events from the socket pair
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-66" class="rowLink" href="#msg-66">
                    [07:39]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    jugg: it reads from the socketpair which will consume the POLLIN event from the FD
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-67" class="rowLink" href="#msg-67">
                    [07:40]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    let me give an overvirew of the achitecture
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-68" class="rowLink" href="#msg-68">
                    [07:40]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    the actual TCP sockets are handled by background threads
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-69" class="rowLink" href="#msg-69">
                    [07:40]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    making sending/receiving messages asynchronous
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-70" class="rowLink" href="#msg-70">
                    [07:41]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    the user&#39;s thread communicates with background (I/O) threads using so called &#39;commands&#39;
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-71" class="rowLink" href="#msg-71">
                    [07:41]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    these are sent via a socketpair connecting the user thread and the I/O thread
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-72" class="rowLink" href="#msg-72">
                    [07:42]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    example of a command sent from I/O thread to user&#39;s thread would be "there are messages available for reading"
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-73" class="rowLink" href="#msg-73">
                    [07:43]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    when user&#39;s thread get that command it knows it can unblock (in case it&#39;s blocked in recv) and read new messages from the lock-free queue
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-74" class="rowLink" href="#msg-74">
                    [07:43]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    that&#39;s more or less it
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-75" class="rowLink" href="#msg-75">
                    [07:45]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    are socketpairs ever shared with multiple zmq sockets?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-76" class="rowLink" href="#msg-76">
                    [07:46]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    or does every zmq socket have its own socketpair?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-77" class="rowLink" href="#msg-77">
                    [07:46]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    every socket has it&#39;s own socketpair
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-78" class="rowLink" href="#msg-78">
                    [07:47]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    this is needed to be able to migrate sockets between threads
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-79" class="rowLink" href="#msg-79">
                    [07:47]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    so, to be precise, in 2.0.x multiple sockets share single socketpair
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-80" class="rowLink" href="#msg-80">
                    [07:47]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    in 2.1 there&#39;s one socketpair per 0mq socket
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-81" class="rowLink" href="#msg-81">
                    [07:50]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    ok.  Thanks, this helps my mental picture.  I have a couple of approaches to test out now.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-82" class="rowLink" href="#msg-82">
                    [07:51]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    good luck :)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-83" class="rowLink" href="#msg-83">
                    [07:52]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    ah, btw, erlang binding works with 2.1 only anyway
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-84" class="rowLink" href="#msg-84">
                    [07:52]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    so you don&#39;t have to take the case where the socketpair is shared between sockets into account
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-85" class="rowLink" href="#msg-85">
                    [07:54]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    yes
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-86" class="rowLink" href="#msg-86">
                    [07:59]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    jugg: I think you should only register events with driver_select() when the 0mq socket is blocked as reported by ZMQ_EVENTS.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-87" class="rowLink" href="#msg-87">
                    [07:59]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    and when you are waiting for an event back from the vm don&#39;t call zmq_recv() or ZMQ_EVENTS until the event comes back.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-88" class="rowLink" href="#msg-88">
                    [08:00]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    that is interesting
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-89" class="rowLink" href="#msg-89">
                    [08:00]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    that way the owner thread can&#39;t consume events from the socketpair.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-90" class="rowLink" href="#msg-90">
                    [08:01]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    I found the details about driver&#39;s and erlang threads.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-91" class="rowLink" href="#msg-91">
                    [08:01]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    and by default the driver will only have one thread access it at a time.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-92" class="rowLink" href="#msg-92">
                    [08:02]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    you can do locking at driver or port level, the default is locking at the driver level.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-93" class="rowLink" href="#msg-93">
                    [08:03]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    if you don&#39;t share 0mq sockets between ports it should be possible to use port-level locking.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-94" class="rowLink" href="#msg-94">
                    [08:04]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    also remember to remove the event notice from the socket after receiving the event and mark the socket as readable/writable.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-95" class="rowLink" href="#msg-95">
                    [08:05]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    sustrik basically said the same thing earlier about removing the socket from the pollset (i.e. from driver_select()) when it is readable.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-96" class="rowLink" href="#msg-96">
                    [08:06]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    I&#39;m not sure what you meant by "remove the event notice"... are you talking an implementation concept, or an erlang requirement?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-97" class="rowLink" href="#msg-97">
                    [08:07]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    jugg: driver_select(port, event, mode, /* put 0 here. */)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-98" class="rowLink" href="#msg-98">
                    [08:08]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    that last arg. is for clearing the event (i.e. removing it from the pollset)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-99" class="rowLink" href="#msg-99">
                    [08:09]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    yes.  But my understanding is (although it has been hard to find supporting evidence) that it isn&#39;t a requirement normally to do that in order for the erlang vm to report subsequent events on a fd.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-100" class="rowLink" href="#msg-100">
                    [08:10]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    jugg: is your current problem that you are not receiving an event from the vm?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-101" class="rowLink" href="#msg-101">
                    [08:11]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    yes, but I think between sustrik&#39;s comment on getsockopt(ZMQ_EVENTS) consuming events, and his description on how things work, I can see why that is the case...
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-102" class="rowLink" href="#msg-102">
                    [08:11]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    0mq sockets are edge-triggered, that means you need to read from them until they will block (i.e. you get EAGAIN)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-103" class="rowLink" href="#msg-103">
                    [08:11]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    yes
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-104" class="rowLink" href="#msg-104">
                    [08:12]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    when your driver call getsockopt(ZMQ_EVENTS) and it says there is a message to read, then you need to mark the socket as readable, until you read a full message.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-105" class="rowLink" href="#msg-105">
                    [08:13]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    once you read a full message call ZMQ_EVENTS again to check if there is another message to read, if it reports "no messages", then you wait for a read event from the vm.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-106" class="rowLink" href="#msg-106">
                    [08:14]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    I think there was an example in the guide that use ZMQ_EVENTS like that.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-107" class="rowLink" href="#msg-107">
                    [08:14]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    yes, more or less
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-108" class="rowLink" href="#msg-108">
                    [08:15]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    but you don&#39;t have to store the "readable" flag yourself
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-109" class="rowLink" href="#msg-109">
                    [08:15]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    you can retrieve it from 0mq by calling getsockop(ZMQ_EVENTS) actually
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-110" class="rowLink" href="#msg-110">
                    [08:15]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    yes, I think the key is to implement a poll method which checks ZMQ_EVENTS prior to passing the fd to the erlang vm, and only do so if nothing is pending.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-111" class="rowLink" href="#msg-111">
                    [08:15]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    yes
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-112" class="rowLink" href="#msg-112">
                    [08:17]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    jugg: is this driver pushing messages out to the controlling erlang process?  or does the erlang process block in a recv() type function for each message?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-113" class="rowLink" href="#msg-113">
                    [08:22]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    the driver returns messages only if the erlang process requests it via recv().   Of course, driver does not block in the recv() call, as that&#39;d freeze the vm.  It later pushes the incoming message when it comes available - thus the driver must use the fd to be notified of such an event.  A gen_server is used to ensure further requests to the driver is not made, and the calling erlang process is blocked in the gen_server call until the driver eventually
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-114" class="rowLink" href="#msg-114">
                    [08:22]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    of course the erlang process can call a non blocking recv as well.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-115" class="rowLink" href="#msg-115">
                    [08:23]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    (the old erlzmq did not support that last)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-116" class="rowLink" href="#msg-116">
                    [08:27]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    sustrik, does one only use the socketpair fd with POLLIN?  even if waiting for the zmq socket to become writeable?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-117" class="rowLink" href="#msg-117">
                    [08:28]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    jugg: so the erlang sends the port a {call, recv} type message telling it to call zmq_recv() and send back a part of the message.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-118" class="rowLink" href="#msg-118">
                    [08:28]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    jugg: yes
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-119" class="rowLink" href="#msg-119">
                    [08:28]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    POLLOUT makes no sense
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-120" class="rowLink" href="#msg-120">
                    [08:28]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    sustrik, ok
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-121" class="rowLink" href="#msg-121">
                    [08:29]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    neopallium, the driver will always call zmq_recv with NOBLOCK.  But if the erlang requests did not specify NOBLOCK, and zmq_recv returns EAGAIN, then the driver calls driver_select on the socket fd, and waits for an event, at which point it reads from the socket and returns the received message part to the erlang process.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-122" class="rowLink" href="#msg-122">
                    [08:29]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    sustrik: so if the 0mq socket blocks on zmq_send(), do you have to wait for a POLLIN from the socketpair and the check with ZMQ_EVENTS if the socket is writable?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-123" class="rowLink" href="#msg-123">
                    [08:30]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    yes
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-124" class="rowLink" href="#msg-124">
                    [08:30]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    the underlying socketpair is actually used for uni-directional transfer of commands
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-125" class="rowLink" href="#msg-125">
                    [08:30]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    ok, I need to fix my Lua async handler for 0mq sockets.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-126" class="rowLink" href="#msg-126">
                    [08:30]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    so POLLOUT is always signaled
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-127" class="rowLink" href="#msg-127">
                    [08:31]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    i think it&#39;s mentioned in the reference
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-128" class="rowLink" href="#msg-128">
                    [08:31]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    let me check
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-129" class="rowLink" href="#msg-129">
                    [08:31]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    sustrik, the docs could be clarified on that regards... It kind of says so, but it was unclear.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-130" class="rowLink" href="#msg-130">
                    [08:31]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    yeah, I am basically doing a POLLOUT on the socketpair when zmq_send() returns EAGAIN.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-131" class="rowLink" href="#msg-131">
                    [08:32]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    it is hard to test blocking on zmq_send()
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-132" class="rowLink" href="#msg-132">
                    [08:32]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    indeed :/
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-133" class="rowLink" href="#msg-133">
                    [08:32]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    "0MQ library shall signal any pending events on the socket in an edge-triggered fashion by making the file descriptor become ready for reading"
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-134" class="rowLink" href="#msg-134">
                    [08:33]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    how would you reprharse that?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-135" class="rowLink" href="#msg-135">
                    [08:33]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    .... signal any pending events from getsockopt(ZMQ_EVENTS...) when the FD is readable?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-136" class="rowLink" href="#msg-136">
                    [08:34]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    i don&#39;t understand that :)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-137" class="rowLink" href="#msg-137">
                    [08:34]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    maybe 2 sentences?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-138" class="rowLink" href="#msg-138">
                    [08:34]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    it needs to say something about calling getsockopt(ZMQ_EVENTS...) for the ready events.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-139" class="rowLink" href="#msg-139">
                    [08:35]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    "The ability to read from the returned file descriptor does not necessarily indicate that messages are available to be read from, or can be written to, the underlying socket; applications
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-140" class="rowLink" href="#msg-140">
                    [08:35]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    must retrieve the actual event state with a subsequent retrieval of the ZMQ_EVENTS option."
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-141" class="rowLink" href="#msg-141">
                    [08:35]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    see zmq_getsockopt(3)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-142" class="rowLink" href="#msg-142">
                    [08:36]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    how about something like: "0MQ library shall signal any pending events by making the FD readable, getsockopt(ZMQ_EVENTS...) returns which events are pending."
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-143" class="rowLink" href="#msg-143">
                    [08:37]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    that&#39;s better
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-144" class="rowLink" href="#msg-144">
                    [08:37]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    yeah, but not perfect
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-145" class="rowLink" href="#msg-145">
                    [08:37]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    but kind of duplicates what the note above says
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-146" class="rowLink" href="#msg-146">
                    [08:38]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    have a look at whole ZMQ_FD section and feel free to propose a better wording
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-147" class="rowLink" href="#msg-147">
                    [08:40]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    hmm, yeah I guess the original dues say that in the Note
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-148" class="rowLink" href="#msg-148">
                    [08:41]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    maybe just add a note that checking for POLLOUT on the FD is use-less for finding out if it is writable?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-149" class="rowLink" href="#msg-149">
                    [08:42]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    is it the case to mark the socketpair FD read, one must call getsockopt(ZMQ_EVENTS), else subsequent calls to poll will always return immediately?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-150" class="rowLink" href="#msg-150">
                    [08:44]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    jugg: if you get a POLLIN event from poll() you will need to call getsockopt(ZMQ_EVENTS) to clear that event, or you will just keep getting the POLLIN.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-151" class="rowLink" href="#msg-151">
                    [08:46]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    I think from a simple event loop it would be best to call getsockopt(ZMQ_EVENTS) on each POLLIN event and then dispatch the real POLLIN/POLLOUT events as returned from getsockopt(ZMQ_EVENTS).
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-152" class="rowLink" href="#msg-152">
                    [08:47]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    that is what I am going to try with my async. handlers.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-153" class="rowLink" href="#msg-153">
                    [08:49]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    jugg: the event is cleared also when you call non-blocking recv() which returns with EAGAIN
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-154" class="rowLink" href="#msg-154">
                    [09:26]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    good morning
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-155" class="rowLink" href="#msg-155">
                    [09:53]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    morning
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-156" class="rowLink" href="#msg-156">
                    [09:57]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    hmm, [zeromq-dev] Segfault
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-157" class="rowLink" href="#msg-157">
                    [09:57]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    looks like to be related to the HWM bug we discussed ages ago
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-158" class="rowLink" href="#msg-158">
                    [09:58]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    mikko: the one you&#39;ve gave me the test case for?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-159" class="rowLink" href="#msg-159">
                    [09:58]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    sustrik: i think so
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-160" class="rowLink" href="#msg-160">
                    [09:58]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    i&#39;ve looked into that but the problem was not obvious
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-161" class="rowLink" href="#msg-161">
                    [09:58]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    i&#39;ll have to look at it further
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-162" class="rowLink" href="#msg-162">
                    [09:58]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    man, year after year it&#39;s harder to come back to work after holidays
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-163" class="rowLink" href="#msg-163">
                    [09:59]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    same here :)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-164" class="rowLink" href="#msg-164">
                    [10:15]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    I hit this assertion in zeromq: Assertion failed: msg_-&gt;flags &amp; ZMQ_MSG_MORE (rep.cpp:80)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-165" class="rowLink" href="#msg-165">
                    [10:15]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    that is from a REP socket with a XREQ client.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-166" class="rowLink" href="#msg-166">
                    [10:16]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    is it bad to connect a XREQ socket to a REP socket?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-167" class="rowLink" href="#msg-167">
                    [10:18]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    hmm, looks like XREQ -&gt; REP is a supported setup.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-168" class="rowLink" href="#msg-168">
                    [10:23]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    I believe REP socket expects at least two message parts, but three is needed.  &lt;msg id&gt; &lt;empty msg&gt; &lt;msg body&gt;.  Both &lt;msg id&gt; and &lt;empty msg&gt; should be sent with SNDMORE flag set.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-169" class="rowLink" href="#msg-169">
                    [10:26]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    basically, your application code on the xreq side passes in &lt;msg body&gt; (in one or more parts).  The xreq wrapper layer must then provide an identifier for that &lt;msg body&gt; and send that along to the rep socket, along with an empty message so that the rep socket and delineate between id parts and body parts.  When the rep socket responds, your xrep wrapper layer pulls off the msg id part and looks up who to route the body part to.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-170" class="rowLink" href="#msg-170">
                    [10:28]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    "...so that the rep socket can delineate.."
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-171" class="rowLink" href="#msg-171">
                    [10:29]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    jugg: yup, REQ/REP sockets hid the "address" part of the message, XREQ/XREP expose the "address" part.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-172" class="rowLink" href="#msg-172">
                    [10:30]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    I am trying a manual example with the plain lua-zmq bindings to make sure it is not just my use of zmq that is cause it.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-173" class="rowLink" href="#msg-173">
                    [10:30]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    so, you were already sending along the message id and blank msg?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-174" class="rowLink" href="#msg-174">
                    [10:30]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    with SNDMORE set?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-175" class="rowLink" href="#msg-175">
                    [10:31]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    testing that right now, making a minimal example.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-176" class="rowLink" href="#msg-176">
                    [10:41]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    jugg: https://gist.github.com/764629
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-177" class="rowLink" href="#msg-177">
                    [10:42]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    also sometime I got a crash on the XREQ side.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-178" class="rowLink" href="#msg-178">
                    [10:42]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    but not an assertion, just a core dump.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-179" class="rowLink" href="#msg-179">
                    [10:43]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    I believe the delim needs to be empty, zero bytes.  You are sending a single byte.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-180" class="rowLink" href="#msg-180">
                    [10:43]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    try: s:send("", zmq.SNDMORE)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-181" class="rowLink" href="#msg-181">
                    [10:44]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    ah, yeah, I just tried that and it worked
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-182" class="rowLink" href="#msg-182">
                    [10:44]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    cool
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-183" class="rowLink" href="#msg-183">
                    [10:44]  neopallium
                    </a>
                </td>
                <td class="message-cell">
                    I don&#39;t know where I read to send "\0" as the delim. part
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-184" class="rowLink" href="#msg-184">
                    [11:05]  orestis
                    </a>
                </td>
                <td class="message-cell">
                    Hello, I&#39;m wondering how 0mq fits in with a GUI event loop - is it safe to make 0mq requests from the GUI thread?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-185" class="rowLink" href="#msg-185">
                    [11:05]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    orestis: you mean whether it would block?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-186" class="rowLink" href="#msg-186">
                    [11:06]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    orestis: can you integrate external filehandle polling to your gui event loop?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-187" class="rowLink" href="#msg-187">
                    [11:06]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    you can get ZMQ_FD from the socket and use that event loop
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-188" class="rowLink" href="#msg-188">
                    [11:07]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    then in the callback check for ZMQ_EVENTS
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-189" class="rowLink" href="#msg-189">
                    [11:29]  orestis
                    </a>
                </td>
                <td class="message-cell">
                    Thanks. That looks a bit too cutting-edge for my taste. I guess my original question was, are the 0mq send/receive calls async? I&#39;m a bit confused because there are mentions of background threads.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-190" class="rowLink" href="#msg-190">
                    [11:33]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    orestis: send/recv is async yes but there is a possiblity that the calls block
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-191" class="rowLink" href="#msg-191">
                    [11:33]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    unless ZMQ_NOBLOCK is used
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-192" class="rowLink" href="#msg-192">
                    [11:37]  orestis
                    </a>
                </td>
                <td class="message-cell">
                    Thanks. In general, is 0mq a bit more low-level for doing async I/O from something like Twisted (that gives you Deferreds, Callbacks etc)?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-193" class="rowLink" href="#msg-193">
                    [11:38]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    orestis: i guess that is true. then again as far as i understand twisted is more general purpose ae framework where as 0mq is messaging stack
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-194" class="rowLink" href="#msg-194">
                    [11:41]  orestis
                    </a>
                </td>
                <td class="message-cell">
                    yes, apparently. I mainly wanted to use 0mq to split a monolithic gui app that does heavy I/O into separate processes. I definitely want to use Twisted for Deferreds and Callbacks (and Twisted plays well with GUIs) so I was wondering how to bring everything together.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-195" class="rowLink" href="#msg-195">
                    [11:42]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    orestis: you should be able to integrate 0mq into twisted
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-196" class="rowLink" href="#msg-196">
                    [11:42]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    using the methods i mentioned earlier
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-197" class="rowLink" href="#msg-197">
                    [11:44]  orestis
                    </a>
                </td>
                <td class="message-cell">
                    mikko: they&#39;re not in the stable version though, are they?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-198" class="rowLink" href="#msg-198">
                    [11:45]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    orestis: if you mean 2.0.x then no
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-199" class="rowLink" href="#msg-199">
                    [11:45]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    but 2.1.x seems fairly stable
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-200" class="rowLink" href="#msg-200">
                    [11:45]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    i use github trunk in all my developments
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-201" class="rowLink" href="#msg-201">
                    [12:14]  orestis
                    </a>
                </td>
                <td class="message-cell">
                    mikko: thanks for your input. I&#39;ll see what I can come up with.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-202" class="rowLink" href="#msg-202">
                    [12:21]  jugg
                    </a>
                </td>
                <td class="message-cell">
                    The documentation for ZMQ_IDENTITY is not clear to me.  I assume that the zmq context has to be maintained in order for a socket&#39;s identity to be re-usable?  But terminating the zmq context will lose the identity persistence?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-203" class="rowLink" href="#msg-203">
                    [15:55]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    how do I build 0MQ with MinGW?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-204" class="rowLink" href="#msg-204">
                    [15:55]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    Seta00: configure &amp;&amp; make &amp;&amp; make install i guess
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-205" class="rowLink" href="#msg-205">
                    [15:55]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    Seta00: i got mingw build running on linux machine
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-206" class="rowLink" href="#msg-206">
                    [15:55]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    :P
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-207" class="rowLink" href="#msg-207">
                    [15:56]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    haven&#39;t tried on windows in a while
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-208" class="rowLink" href="#msg-208">
                    [15:56]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    i got mingw32 on linux and VS2008 on windows in daily builds
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-209" class="rowLink" href="#msg-209">
                    [15:56]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    maybe mingw32 on windows would be a good addition
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-210" class="rowLink" href="#msg-210">
                    [15:57]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    definitely :)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-211" class="rowLink" href="#msg-211">
                    [16:00]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    working with various libraries can get messed up really fast
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-212" class="rowLink" href="#msg-212">
                    [16:12]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    msg_store.cpp:279: error: ISO C++ does not support `long long&#39;
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-213" class="rowLink" href="#msg-213">
                    [16:12]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    why aren&#39;t things easier? hehe
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-214" class="rowLink" href="#msg-214">
                    [16:13]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    Set00: is that 2.0.10?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-215" class="rowLink" href="#msg-215">
                    [16:13]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    sustrik, yes
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-216" class="rowLink" href="#msg-216">
                    [16:13]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    i recall the long long issue was being solved
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-217" class="rowLink" href="#msg-217">
                    [16:13]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    maybe it&#39;s fixed in 2.1
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-218" class="rowLink" href="#msg-218">
                    [16:14]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    mikko: don&#39;t you remember by chance?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-219" class="rowLink" href="#msg-219">
                    [16:14]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    I&#39;ll try
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-220" class="rowLink" href="#msg-220">
                    [16:26]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    2.1.0 gives me ".../mingw/lib/dllcrt2.o: No such file or directory" when linking
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-221" class="rowLink" href="#msg-221">
                    [16:27]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    :|
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-222" class="rowLink" href="#msg-222">
                    [16:28]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    no idea what that is
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-223" class="rowLink" href="#msg-223">
                    [16:28]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    as for the long long problem
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-224" class="rowLink" href="#msg-224">
                    [16:29]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    iirc the problem is that long long is not part of C++ standard, yet it it used in Win32 signatures
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-225" class="rowLink" href="#msg-225">
                    [16:29]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    Win32 API
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-226" class="rowLink" href="#msg-226">
                    [16:30]  Skaag
                    </a>
                </td>
                <td class="message-cell">
                    I wonder if anyone else is using google protocol buffers to send messages over zmq
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-227" class="rowLink" href="#msg-227">
                    [16:31]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    I&#39;m trying with uint64_t
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-228" class="rowLink" href="#msg-228">
                    [16:33]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    doesn&#39;t work
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-229" class="rowLink" href="#msg-229">
                    [16:34]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    how can I remove -Werror?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-230" class="rowLink" href="#msg-230">
                    [16:34]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    other than manually editing the makefile?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-231" class="rowLink" href="#msg-231">
                    [16:35]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    long works fine, but msys doesn`t find that DLL
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-232" class="rowLink" href="#msg-232">
                    [16:40]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    no idea, try checking configure.in
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-233" class="rowLink" href="#msg-233">
                    [16:41]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    forgot to configure fstab
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-234" class="rowLink" href="#msg-234">
                    [16:42]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    sustrik: yes
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-235" class="rowLink" href="#msg-235">
                    [16:42]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    ah, it was answered
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-236" class="rowLink" href="#msg-236">
                    [16:42]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    long long problem is with 2.0.x
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-237" class="rowLink" href="#msg-237">
                    [16:43]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    it&#39;s fixed in 2.1.0
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-238" class="rowLink" href="#msg-238">
                    [16:43]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    thx
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-239" class="rowLink" href="#msg-239">
                    [16:46]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    Skaag: there has been a couple of mentions about that
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-240" class="rowLink" href="#msg-240">
                    [16:46]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    Seta00: i can test mingw32 build when i get home
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-241" class="rowLink" href="#msg-241">
                    [16:47]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    mikko, it worked after I configured my fstab on MSYS
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-242" class="rowLink" href="#msg-242">
                    [16:47]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    thanks sustrik and mikko
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-243" class="rowLink" href="#msg-243">
                    [16:47]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    you are welcome
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-244" class="rowLink" href="#msg-244">
                    [16:47]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    now I need qmake to link to it :P
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-245" class="rowLink" href="#msg-245">
                    [16:48]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    which shall be solved in #qt
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-246" class="rowLink" href="#msg-246">
                    [16:48]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    :)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-247" class="rowLink" href="#msg-247">
                    [16:48]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    i remember someone doing this before
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-248" class="rowLink" href="#msg-248">
                    [16:48]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    with qt toolchain
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-249" class="rowLink" href="#msg-249">
                    [16:48]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    that sparked the whole fixing of mingw32 builds
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-250" class="rowLink" href="#msg-250">
                    [17:28]  s0undt3ch
                    </a>
                </td>
                <td class="message-cell">
                    with pyzmq, on a publisher subscriber model, I&#39;m setting the publisher&#39;s identity, how can a subscriber retrieve that identity
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-251" class="rowLink" href="#msg-251">
                    [17:28]  s0undt3ch
                    </a>
                </td>
                <td class="message-cell">
                    ?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-252" class="rowLink" href="#msg-252">
                    [17:31]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    it can&#39;t
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-253" class="rowLink" href="#msg-253">
                    [17:33]  s0undt3ch
                    </a>
                </td>
                <td class="message-cell">
                    hmmm
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-254" class="rowLink" href="#msg-254">
                    [17:33]  s0undt3ch
                    </a>
                </td>
                <td class="message-cell">
                    I need to pass that on the message then
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-255" class="rowLink" href="#msg-255">
                    [17:34]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    yes, the identity is only internel per-hop mechanism
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-256" class="rowLink" href="#msg-256">
                    [17:34]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    it&#39;s not passed all the way down from publisher to subscriber
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-257" class="rowLink" href="#msg-257">
                    [17:39]  s0undt3ch
                    </a>
                </td>
                <td class="message-cell">
                    sustrik: same for req/rep right?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-258" class="rowLink" href="#msg-258">
                    [17:41]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    s0undt3ch, are you on windows?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-259" class="rowLink" href="#msg-259">
                    [17:44]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    same for all patterns
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-260" class="rowLink" href="#msg-260">
                    [17:45]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    req/rep is special in that identities are stuck to the request as it passes individual nodes
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-261" class="rowLink" href="#msg-261">
                    [17:46]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    but there&#39;s still no special mechanism to inspect peers&#39; identities
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-262" class="rowLink" href="#msg-262">
                    [17:48]  s0undt3ch
                    </a>
                </td>
                <td class="message-cell">
                    Seta00: nope
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-263" class="rowLink" href="#msg-263">
                    [17:49]  Seta00
                    </a>
                </td>
                <td class="message-cell">
                    just checking if someone has a pyzmq build for Windows
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-264" class="rowLink" href="#msg-264">
                    [18:54]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    Hello. It is very tempting for me to use ZeroMQ, but I&#39;m trying to figure out how architecture would look like. So, we have chat server (a-la IRC) with chat rooms.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-265" class="rowLink" href="#msg-265">
                    [18:54]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    Users can join multiple rooms and I need to route messages between users in same room.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-266" class="rowLink" href="#msg-266">
                    [18:54]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    As far as I understood tutorials, I need 2 connections
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-267" class="rowLink" href="#msg-267">
                    [18:55]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    one pubsub to send room events back to users
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-268" class="rowLink" href="#msg-268">
                    [18:55]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    and one pubsub to send events from users to rooms?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-269" class="rowLink" href="#msg-269">
                    [18:55]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    can it be done with only one connection?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-270" class="rowLink" href="#msg-270">
                    [18:55]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    (or socket)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-271" class="rowLink" href="#msg-271">
                    [19:16]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    Joes_: you would need two
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-272" class="rowLink" href="#msg-272">
                    [19:17]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    in terms of low level communication with tcp transport - two tcp ports on the server will be used
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-273" class="rowLink" href="#msg-273">
                    [19:17]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    correct?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-274" class="rowLink" href="#msg-274">
                    [19:17]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    (firewall setup, etc)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-275" class="rowLink" href="#msg-275">
                    [19:18]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    Joes_: assuming you bind the two sockets then yet
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-276" class="rowLink" href="#msg-276">
                    [19:18]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    yes*
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-277" class="rowLink" href="#msg-277">
                    [19:18]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    ok
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-278" class="rowLink" href="#msg-278">
                    [19:18]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    and second question - any bindings for Javascript?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-279" class="rowLink" href="#msg-279">
                    [19:18]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    i think someone was working for node.js bindings
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-280" class="rowLink" href="#msg-280">
                    [19:18]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    using WebSockets/socketjs/etc
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-281" class="rowLink" href="#msg-281">
                    [19:18]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    saw them
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-282" class="rowLink" href="#msg-282">
                    [19:18]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    includes native C code
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-283" class="rowLink" href="#msg-283">
                    [19:19]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    is wire protocol documented?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-284" class="rowLink" href="#msg-284">
                    [19:19]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    yes, i think it is
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-285" class="rowLink" href="#msg-285">
                    [19:19]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    gimme a sec
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-286" class="rowLink" href="#msg-286">
                    [19:20]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    here is the message format http://rfc.zeromq.org/spec:2
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-287" class="rowLink" href="#msg-287">
                    [19:20]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    thanks
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-288" class="rowLink" href="#msg-288">
                    [19:20]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    let me see if the rest is documented
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-289" class="rowLink" href="#msg-289">
                    [19:21]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    going to see how long it will take to write dumb client in JS
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-290" class="rowLink" href="#msg-290">
                    [19:21]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    there&#39;s one for AMQP, but nothing for ZeroMQ
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-291" class="rowLink" href="#msg-291">
                    [19:21]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    and I don&#39;t need 95% of AMQP features...
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-292" class="rowLink" href="#msg-292">
                    [19:22]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    are you going to do communications from browser straight to 0mq?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-293" class="rowLink" href="#msg-293">
                    [19:22]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    well, that would be ideal
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-294" class="rowLink" href="#msg-294">
                    [19:22]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    i don&#39;t think that&#39;s going to work
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-295" class="rowLink" href="#msg-295">
                    [19:23]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    at least with websockets
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-296" class="rowLink" href="#msg-296">
                    [19:23]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    as websockets have their own framing as well
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-297" class="rowLink" href="#msg-297">
                    [19:23]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    instead of making own wire protocol
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-298" class="rowLink" href="#msg-298">
                    [19:23]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    hm
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-299" class="rowLink" href="#msg-299">
                    [19:23]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    have you looked into mongrel2?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-300" class="rowLink" href="#msg-300">
                    [19:24]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    I did
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-301" class="rowLink" href="#msg-301">
                    [19:24]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    however, I can&#39;t find any benchmarks
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-302" class="rowLink" href="#msg-302">
                    [19:24]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    or who&#39;s using it in production
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-303" class="rowLink" href="#msg-303">
                    [19:24]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    it&#39;s very new tech, i would be surprised if there are large installations yet
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-304" class="rowLink" href="#msg-304">
                    [19:25]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    and i tend to find benchmarks mainly useless as there are a lot of people who don&#39;t know how to benchmark the software
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-305" class="rowLink" href="#msg-305">
                    [19:25]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    or optimize it for benchmarking
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-306" class="rowLink" href="#msg-306">
                    [19:25]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    well, at least some rough numbers would help
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-307" class="rowLink" href="#msg-307">
                    [19:25]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    like faster than X Y times
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-308" class="rowLink" href="#msg-308">
                    [19:27]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    but very often i find they are comparing apples to oranges
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-309" class="rowLink" href="#msg-309">
                    [19:27]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    one tool with highly optimized config against incorrect config of other
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-310" class="rowLink" href="#msg-310">
                    [19:27]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    I see.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-311" class="rowLink" href="#msg-311">
                    [19:28]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    it&#39;s very hard to create good benchmarks
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-312" class="rowLink" href="#msg-312">
                    [19:32]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    but communicating from browser you most likely need some sort of middle piece
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-313" class="rowLink" href="#msg-313">
                    [19:32]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    probably doesn&#39;t need to be complicated but something that converts websocket messages to 0mq messages
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-314" class="rowLink" href="#msg-314">
                    [19:32]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    Let&#39;s assume I have middlepiece - some kind of broker between browser and 0MQ
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-315" class="rowLink" href="#msg-315">
                    [19:32]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    (thought about it)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-316" class="rowLink" href="#msg-316">
                    [19:32]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    with some simple wire protocol
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-317" class="rowLink" href="#msg-317">
                    [19:32]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    i think that&#39;s mostly what mongrel2 does
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-318" class="rowLink" href="#msg-318">
                    [19:33]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    but I have following issues:
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-319" class="rowLink" href="#msg-319">
                    [19:33]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    1. Who will guarantee delivery, if client drops connection
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-320" class="rowLink" href="#msg-320">
                    [19:33]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    (I will need to queue up messages for this client till his next connection)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-321" class="rowLink" href="#msg-321">
                    [19:33]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    well, there some other issues, but I don&#39;t remember them all :-)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-322" class="rowLink" href="#msg-322">
                    [19:33]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    if client drops connection do you want to queue messages?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-323" class="rowLink" href="#msg-323">
                    [19:34]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    for how long time after client leaves?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-324" class="rowLink" href="#msg-324">
                    [19:34]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    I don&#39;t know if client dropped or temporary lost connection to the server and will reconnect shortly
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-325" class="rowLink" href="#msg-325">
                    [19:34]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    can be done using ZMQ_IDENTITY
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-326" class="rowLink" href="#msg-326">
                    [19:34]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    em
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-327" class="rowLink" href="#msg-327">
                    [19:34]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    let&#39;s say I&#39;m am the server which handles requests from browsers.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-328" class="rowLink" href="#msg-328">
                    [19:34]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    I accepted raw TCP connection (or websocket connection)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-329" class="rowLink" href="#msg-329">
                    [19:35]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    so, for this connection, I will create 0MQ socket (or two, but it does not matter now)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-330" class="rowLink" href="#msg-330">
                    [19:35]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    and will connect to the chat server
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-331" class="rowLink" href="#msg-331">
                    [19:35]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    right
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-332" class="rowLink" href="#msg-332">
                    [19:35]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    if incoming (browser) connection will drop
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-333" class="rowLink" href="#msg-333">
                    [19:35]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    I should close socket?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-334" class="rowLink" href="#msg-334">
                    [19:35]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    (0MQ socket)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-335" class="rowLink" href="#msg-335">
                    [19:36]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    no, 0MQ socket represents all the connections
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-336" class="rowLink" href="#msg-336">
                    [19:36]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    so closing it means closing all the connections
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-337" class="rowLink" href="#msg-337">
                    [19:36]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    hm
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-338" class="rowLink" href="#msg-338">
                    [19:36]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    1 socket for all incoming clients?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-339" class="rowLink" href="#msg-339">
                    [19:36]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    yes
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-340" class="rowLink" href="#msg-340">
                    [19:37]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    who will be doing queuing of the messages for temporary disconnected clients?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-341" class="rowLink" href="#msg-341">
                    [19:37]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    the server
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-342" class="rowLink" href="#msg-342">
                    [19:37]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    I see
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-343" class="rowLink" href="#msg-343">
                    [19:37]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    to be precise, the 0MQ socket in the server
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-344" class="rowLink" href="#msg-344">
                    [19:37]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    hm
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-345" class="rowLink" href="#msg-345">
                    [19:38]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    all you need to do is set the ZMQ_IDENTITY socket option on the client
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-346" class="rowLink" href="#msg-346">
                    [19:38]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    that way the server socket would know that is should not deallocate the connection when it accidentally breaks
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-347" class="rowLink" href="#msg-347">
                    [19:38]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    the messages will be stored
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-348" class="rowLink" href="#msg-348">
                    [19:38]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    and once the same client re-connects they will be sent
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-349" class="rowLink" href="#msg-349">
                    [19:39]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    that&#39;s the problem - I will have to write proxy between browser and 0MQ server
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-350" class="rowLink" href="#msg-350">
                    [19:39]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    i think you are talking about separate issue
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-351" class="rowLink" href="#msg-351">
                    [19:39]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    in this case:
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-352" class="rowLink" href="#msg-352">
                    [19:39]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    chat server &lt;-- 0mq --&gt; broker &lt;-- raw tcp --&gt; client
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-353" class="rowLink" href="#msg-353">
                    [19:39]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    yep
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-354" class="rowLink" href="#msg-354">
                    [19:40]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    so, my question is - I&#39;m adding extra logic on broker side to handle another wire protocol, message queuing (connection persistence logic like in 0MQ)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-355" class="rowLink" href="#msg-355">
                    [19:40]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    is it worth of the trouble?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-356" class="rowLink" href="#msg-356">
                    [19:41]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    broker can be "end point"
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-357" class="rowLink" href="#msg-357">
                    [19:41]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    not scalable solution, though
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-358" class="rowLink" href="#msg-358">
                    [19:41]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    the only thing you have described about the application this far that it&#39;s a chat like irc
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-359" class="rowLink" href="#msg-359">
                    [19:41]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    yep, pretty much
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-360" class="rowLink" href="#msg-360">
                    [19:42]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    is this from scratch or do you have something running already?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-361" class="rowLink" href="#msg-361">
                    [19:42]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    scratch
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-362" class="rowLink" href="#msg-362">
                    [19:42]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    prototyping
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-363" class="rowLink" href="#msg-363">
                    [19:43]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    well, in terms of possible load - ~12k users average online
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-364" class="rowLink" href="#msg-364">
                    [19:43]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    each making ~1 message in 5 seconds (worst case)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-365" class="rowLink" href="#msg-365">
                    [19:43]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    ajax with long polling does not suit very well
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-366" class="rowLink" href="#msg-366">
                    [19:44]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    why do you need to queue the messages if the client drops?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-367" class="rowLink" href="#msg-367">
                    [19:44]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    so, trying to find other possibilities apart of writing custom protocol on top of raw sockets
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-368" class="rowLink" href="#msg-368">
                    [19:44]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    to keep state of the room and its recent history
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-369" class="rowLink" href="#msg-369">
                    [19:45]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    it is doable by resending last N items on reconnect
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-370" class="rowLink" href="#msg-370">
                    [19:45]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    which solves the problem, but.. if 0MQ provides it for free..
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-371" class="rowLink" href="#msg-371">
                    [19:49]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    let me think for a sec
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-372" class="rowLink" href="#msg-372">
                    [19:49]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    the biggest problem is the last part to the browser
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-373" class="rowLink" href="#msg-373">
                    [19:49]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    yep
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-374" class="rowLink" href="#msg-374">
                    [19:49]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    I want to get rid of it by having simple, yet functional, 0mq client
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-375" class="rowLink" href="#msg-375">
                    [19:50]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    let&#39;s assume there&#39;s no WebSocket wrapping for now.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-376" class="rowLink" href="#msg-376">
                    [19:50]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    plain tcp sockets
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-377" class="rowLink" href="#msg-377">
                    [19:50]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    you are not in control of the client side i assume?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-378" class="rowLink" href="#msg-378">
                    [19:51]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    as in installing 0mq on client :)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-379" class="rowLink" href="#msg-379">
                    [19:51]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    nope.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-380" class="rowLink" href="#msg-380">
                    [19:51]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    plain HTML+JS
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-381" class="rowLink" href="#msg-381">
                    [19:51]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    and, maybe, some Flash.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-382" class="rowLink" href="#msg-382">
                    [19:51]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    (I already checked almost all language integrations - all of them are dependent on the native C library)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-383" class="rowLink" href="#msg-383">
                    [19:54]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    yes, i think you would need to implement some logic in your broker
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-384" class="rowLink" href="#msg-384">
                    [19:55]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    in terms of code, for 1 incoming browser it will create 0mq socket or it will handle all incoming browser connections through 1 0mq socket?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-385" class="rowLink" href="#msg-385">
                    [19:55]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    what is better approach?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-386" class="rowLink" href="#msg-386">
                    [19:56]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    multiple sockets - free message queuing
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-387" class="rowLink" href="#msg-387">
                    [19:56]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    one socket - easier overall architecture (and speed?), but manual queuing on the broker
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-388" class="rowLink" href="#msg-388">
                    [19:57]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    plus, custom wire protocol from broker to browser
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-389" class="rowLink" href="#msg-389">
                    [19:57]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    etc.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-390" class="rowLink" href="#msg-390">
                    [19:57]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    one socket also requires custom filtering i guess
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-391" class="rowLink" href="#msg-391">
                    [19:57]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    you got messages coming in 1 socket destined to ~12k clients
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-392" class="rowLink" href="#msg-392">
                    [19:57]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    well, I can read address from the message
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-393" class="rowLink" href="#msg-393">
                    [19:58]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    so you need to write them to correct handles on other side
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-394" class="rowLink" href="#msg-394">
                    [19:58]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    and then pick proper browser socket and send it there
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-395" class="rowLink" href="#msg-395">
                    [19:58]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    yep
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-396" class="rowLink" href="#msg-396">
                    [19:58]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    it = message
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-397" class="rowLink" href="#msg-397">
                    [19:59]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    one socket might be easier to handle for events as well
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-398" class="rowLink" href="#msg-398">
                    [19:59]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    otherwise you got a pollset of 12k items
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-399" class="rowLink" href="#msg-399">
                    [19:59]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    that you need to maintain
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-400" class="rowLink" href="#msg-400">
                    [19:59]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    yeah
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-401" class="rowLink" href="#msg-401">
                    [19:59]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    bad idea.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-402" class="rowLink" href="#msg-402">
                    [19:59]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    ok, another idea.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-403" class="rowLink" href="#msg-403">
                    [19:59]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    I write pure JS implementation of the wire protocol
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-404" class="rowLink" href="#msg-404">
                    [19:59]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    it&#39;s pretty simple
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-405" class="rowLink" href="#msg-405">
                    [19:59]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    and broker will be dump WebSocket negotiator and TCP proxy
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-406" class="rowLink" href="#msg-406">
                    [20:00]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    (forwards tcp connection to the real 0MQ server port)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-407" class="rowLink" href="#msg-407">
                    [20:00]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    I assume it might work.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-408" class="rowLink" href="#msg-408">
                    [20:00]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    each message sent will have address as a first chunk
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-409" class="rowLink" href="#msg-409">
                    [20:00]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    so chat server knows who sent it
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-410" class="rowLink" href="#msg-410">
                    [20:00]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    and, maybe, where
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-411" class="rowLink" href="#msg-411">
                    [20:01]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    dump = dumb
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-412" class="rowLink" href="#msg-412">
                    [20:01]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    i think i wrote websocket daemon ages ago using libev
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-413" class="rowLink" href="#msg-413">
                    [20:01]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    it wasn&#39;t complicated
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-414" class="rowLink" href="#msg-414">
                    [20:03]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    hm, someone already did it for Ruby
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-415" class="rowLink" href="#msg-415">
                    [20:04]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    https://github.com/andrewvc/dripdrop
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-416" class="rowLink" href="#msg-416">
                    [20:04]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    custom wire format from client
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-417" class="rowLink" href="#msg-417">
                    [20:04]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    hey, that&#39;s me
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-418" class="rowLink" href="#msg-418">
                    [20:04]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    browser that is
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-419" class="rowLink" href="#msg-419">
                    [20:04]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    :-)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-420" class="rowLink" href="#msg-420">
                    [20:04]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    wonderful
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-421" class="rowLink" href="#msg-421">
                    [20:04]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    there was pretty long discussion
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-422" class="rowLink" href="#msg-422">
                    [20:05]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    oh?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-423" class="rowLink" href="#msg-423">
                    [20:05]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    but, to sum it up - any plans for pure JS 0mq client instead of custom protocol?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-424" class="rowLink" href="#msg-424">
                    [20:05]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    (or message format)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-425" class="rowLink" href="#msg-425">
                    [20:05]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    so, you can get rid of Ruby server and just relay messages to 0mq
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-426" class="rowLink" href="#msg-426">
                    [20:05]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    straight
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-427" class="rowLink" href="#msg-427">
                    [20:05]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    oh
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-428" class="rowLink" href="#msg-428">
                    [20:05]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    well, there&#39;s a node JS project
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-429" class="rowLink" href="#msg-429">
                    [20:06]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    and I was going to implement zmq_devices as part of ffi-rzmq as well
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-430" class="rowLink" href="#msg-430">
                    [20:06]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    or do those options not cover it?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-431" class="rowLink" href="#msg-431">
                    [20:06]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    node JS is using native C library
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-432" class="rowLink" href="#msg-432">
                    [20:06]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    I want something like DripDrop
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-433" class="rowLink" href="#msg-433">
                    [20:06]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    oh
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-434" class="rowLink" href="#msg-434">
                    [20:06]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    interesting
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-435" class="rowLink" href="#msg-435">
                    [20:06]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    browser &lt;-&gt; 0mq
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-436" class="rowLink" href="#msg-436">
                    [20:06]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    and simple TCP proxy
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-437" class="rowLink" href="#msg-437">
                    [20:06]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    in between
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-438" class="rowLink" href="#msg-438">
                    [20:06]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    well, dripdrop doesn&#39;t really require zeromq
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-439" class="rowLink" href="#msg-439">
                    [20:06]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    which knows how to handle WebSocket handshake
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-440" class="rowLink" href="#msg-440">
                    [20:06]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    it works well with websockets
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-441" class="rowLink" href="#msg-441">
                    [20:06]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    and http
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-442" class="rowLink" href="#msg-442">
                    [20:06]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    all evented
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-443" class="rowLink" href="#msg-443">
                    [20:07]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    I&#39;m a bit confused as to the actual question still I guess
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-444" class="rowLink" href="#msg-444">
                    [20:07]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    andrewvc: but he wants to run this in browser
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-445" class="rowLink" href="#msg-445">
                    [20:07]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    andrewvc: hence the pure js implementation i guess
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-446" class="rowLink" href="#msg-446">
                    [20:07]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    yes
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-447" class="rowLink" href="#msg-447">
                    [20:07]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    ohhh, well who would the browser talk to. Itself?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-448" class="rowLink" href="#msg-448">
                    [20:07]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    0mq server, preferably.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-449" class="rowLink" href="#msg-449">
                    [20:08]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    here&#39;s another example: online real-time game.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-450" class="rowLink" href="#msg-450">
                    [20:08]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    oh, well, as far as I know you can&#39;t open a raw TCP conn from any browser still
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-451" class="rowLink" href="#msg-451">
                    [20:08]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    so you&#39;re using websockets in the yes?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-452" class="rowLink" href="#msg-452">
                    [20:08]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    socketjs also works
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-453" class="rowLink" href="#msg-453">
                    [20:09]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    (embeds small Flash object to proxy sockets)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-454" class="rowLink" href="#msg-454">
                    [20:09]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    gives plain sockets in JS
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-455" class="rowLink" href="#msg-455">
                    [20:09]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    yeah, so, that&#39;s an interesting idea
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-456" class="rowLink" href="#msg-456">
                    [20:09]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    I mean - sure, I can create custom protocol
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-457" class="rowLink" href="#msg-457">
                    [20:10]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    write custom server software
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-458" class="rowLink" href="#msg-458">
                    [20:10]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    what kinds of implementation were you guys thinking?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-459" class="rowLink" href="#msg-459">
                    [20:10]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    which will parse messages, etc
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-460" class="rowLink" href="#msg-460">
                    [20:10]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    but I dont see a point
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-461" class="rowLink" href="#msg-461">
                    [20:10]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    what would the api look like, in JS?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-462" class="rowLink" href="#msg-462">
                    [20:11]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    so, DripDrop already doing it - checked JS files, it is encapsulating messages into DD.Message
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-463" class="rowLink" href="#msg-463">
                    [20:11]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    I think that&#39;s probably a good place to start, if you can throw up a gist for a simple case
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-464" class="rowLink" href="#msg-464">
                    [20:11]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    yep
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-465" class="rowLink" href="#msg-465">
                    [20:11]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    the JS prolly needs a little love at this point
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-466" class="rowLink" href="#msg-466">
                    [20:12]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    so, imagine that there&#39;s no need to have custom wire protocol (json serialized) and JS would just talk to 0mq server using 0mq wire protocol
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-467" class="rowLink" href="#msg-467">
                    [20:12]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    that&#39;s the simpliest case
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-468" class="rowLink" href="#msg-468">
                    [20:13]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    hmmm, the 0mq wire protocol doesn&#39;t handle that much really
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-469" class="rowLink" href="#msg-469">
                    [20:13]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    I mean, you could express multipart stuff, like socket identities for stuff like xreq/xrep
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-470" class="rowLink" href="#msg-470">
                    [20:13]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    browser won&#39;t be server either
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-471" class="rowLink" href="#msg-471">
                    [20:13]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    but I&#39;m not sure how useful that is
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-472" class="rowLink" href="#msg-472">
                    [20:13]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    sub or pub, mostly
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-473" class="rowLink" href="#msg-473">
                    [20:13]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    maybe req
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-474" class="rowLink" href="#msg-474">
                    [20:14]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    I&#39;m off to grab some lunch, but it&#39;s an interesting idea
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-475" class="rowLink" href="#msg-475">
                    [20:14]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    I&#39;d love to see a gist of a proposed API
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-476" class="rowLink" href="#msg-476">
                    [20:14]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    actually, from wire perspective it can be req
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-477" class="rowLink" href="#msg-477">
                    [20:14]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    always
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-478" class="rowLink" href="#msg-478">
                    [20:14]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    em, no.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-479" class="rowLink" href="#msg-479">
                    [20:14]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    I need to get updates from server.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-480" class="rowLink" href="#msg-480">
                    [20:14]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    anyway, I&#39;ll think about it.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-481" class="rowLink" href="#msg-481">
                    [20:14]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    yeah, I&#39;d like to hear more
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-482" class="rowLink" href="#msg-482">
                    [20:15]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    it won&#39;t be full-scale 0mq implementation anyway
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-483" class="rowLink" href="#msg-483">
                    [20:15]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    If you could ping me at @andrewvc on twitter when you have something I&#39;d be interested
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-484" class="rowLink" href="#msg-484">
                    [20:15]  andrewvc
                    </a>
                </td>
                <td class="message-cell">
                    anyway, off to lunch
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-485" class="rowLink" href="#msg-485">
                    [20:15]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    k
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-486" class="rowLink" href="#msg-486">
                    [20:15]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    bon appetit
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-487" class="rowLink" href="#msg-487">
                    [20:17]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    Disconnected question - how do you handle security? If you don&#39;t want particular client to be connected, what you can do?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-488" class="rowLink" href="#msg-488">
                    [20:17]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    so, I don&#39;t want malicious client to DOS my message queue
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-489" class="rowLink" href="#msg-489">
                    [20:17]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    can I forcibly disconnect him?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-490" class="rowLink" href="#msg-490">
                    [20:17]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    (in my application)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-491" class="rowLink" href="#msg-491">
                    [20:20]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    hmm
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-492" class="rowLink" href="#msg-492">
                    [20:20]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    was searching for 0mq on twitter and most of the results are people using "0mq" instead of "omg"
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-493" class="rowLink" href="#msg-493">
                    [20:20]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    :-)
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-494" class="rowLink" href="#msg-494">
                    [20:24]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    mikko: any hints on how to forcibly drop connections on server side?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-495" class="rowLink" href="#msg-495">
                    [20:25]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    or 0mq not really suited for client-facing functionality?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-496" class="rowLink" href="#msg-496">
                    [20:26]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    there is really no way to forcibly drop a connection
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-497" class="rowLink" href="#msg-497">
                    [20:27]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    ouch.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-498" class="rowLink" href="#msg-498">
                    [20:27]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    apart from closing the socket
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-499" class="rowLink" href="#msg-499">
                    [20:27]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    on client side, I assume
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-500" class="rowLink" href="#msg-500">
                    [20:27]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    ?
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-501" class="rowLink" href="#msg-501">
                    [20:27]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    on the server-side but that closes all connections
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-502" class="rowLink" href="#msg-502">
                    [20:27]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    oops.
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-503" class="rowLink" href="#msg-503">
                    [20:28]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    means, 0mq not really suitable for client-facing stuff, as clients might misbehave
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-504" class="rowLink" href="#msg-504">
                    [20:28]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    plus, if there&#39;s some sort of authentication
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-505" class="rowLink" href="#msg-505">
                    [20:28]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    it&#39;s easier to disconnect client
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-506" class="rowLink" href="#msg-506">
                    [20:29]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    than to ignore all his sent messages
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-507" class="rowLink" href="#msg-507">
                    [20:43]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    what&#39;s the difference? a malevolent client can reconnect immediately and sent another malformed message
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-508" class="rowLink" href="#msg-508">
                    [20:43]  sustrik
                    </a>
                </td>
                <td class="message-cell">
                    the only consequence is that the server would use much more CPU to handle the reconnecting instead of simply dropping the messages
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-509" class="rowLink" href="#msg-509">
                    [20:47]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    yep
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-510" class="rowLink" href="#msg-510">
                    [20:47]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    but
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-511" class="rowLink" href="#msg-511">
                    [20:47]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    let&#39;s assume that it is pub/sub
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-512" class="rowLink" href="#msg-512">
                    [20:47]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    with, let&#39;s say 10 subscribers
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-513" class="rowLink" href="#msg-513">
                    [20:48]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    so, bad clients sends 1 message
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-514" class="rowLink" href="#msg-514">
                    [20:48]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    and 10 messages total are sent to subscribers
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-515" class="rowLink" href="#msg-515">
                    [20:49]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    effectively, network topology creates nice DOS environment
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-516" class="rowLink" href="#msg-516">
                    [20:49]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    bad client sends*
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-517" class="rowLink" href="#msg-517">
                    [20:49]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    I mean - there&#39;s no built-in security, so there&#39;s no way to filter these messages before they get into "internal" network
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-518" class="rowLink" href="#msg-518">
                    [20:50]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    where workers sit
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-519" class="rowLink" href="#msg-519">
                    [20:56]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    however, I think broker which will relay messages to internal network will work
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-520" class="rowLink" href="#msg-520">
                    [20:56]  Joes
                    </a>
                </td>
                <td class="message-cell">
                    and he&#39;ll do the authentication stuff too
                </td>
            </tr>
            
            <tr>
                <td class="name-cell" nowrap="nowrap">
                    <a name="msg-521" class="rowLink" href="#msg-521">
                    [21:13]  mikko
                    </a>
                </td>
                <td class="message-cell">
                    Joes_: it sounds like a sensible approach
                </td>
            </tr>
            
        </table>
    </div>
</body>
</html>
