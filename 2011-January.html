

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2011-January &mdash; ZeroMq IRC Log v0.1 documentation</title>
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="ZeroMq IRC Log v0.1 documentation" href="index.html" />
    <link rel="prev" title="2011-December" href="2011-December.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="2011-December.html" title="2011-December"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">ZeroMq IRC Log v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="january">
<h1>2011-January<a class="headerlink" href="#january" title="Permalink to this headline">Â¶</a></h1>
<div class="line-block">
<div class="line">[Saturday 01 January 2011] [10:10:37] &lt;dos000&gt;        and happy new year</div>
<div class="line">[Saturday 01 January 2011] [10:10:51] &lt;dos000&gt;        is sustrik here ?</div>
<div class="line">[Saturday 01 January 2011] [10:12:02] &lt;mikko&gt; he was in yesterday</div>
<div class="line">[Saturday 01 January 2011] [10:12:28] &lt;mikko&gt; havent seen him talking today</div>
<div class="line">[Saturday 01 January 2011] [10:15:01] &lt;dos000&gt;        ah!</div>
<div class="line">[Saturday 01 January 2011] [12:34:22] &lt;sustrik&gt;       dos000: hi</div>
<div class="line">[Saturday 01 January 2011] [12:36:15] &lt;sustrik&gt;       happy new year everyone!</div>
<div class="line">[Saturday 01 January 2011] [13:16:07] &lt;pythonirc1011&gt; how much work is it to get a installer ready for windows7 for zeromq+python bindings. Where can one get started on that?</div>
<div class="line">[Saturday 01 January 2011] [13:33:07] &lt;mikko&gt; pythonirc1011: probably it&#8217;s just building the installer</div>
<div class="line">[Saturday 01 January 2011] [13:33:38] &lt;mikko&gt; pythonirc1011: not sure how python extensions are installed on windows or any platform really</div>
<div class="line">[Saturday 01 January 2011] [13:41:38] &lt;dos000&gt;        sustrik, howdy !</div>
<div class="line">[Saturday 01 January 2011] [13:42:03] &lt;dos000&gt;        sustrik, happy new year to you too</div>
<div class="line">[Saturday 01 January 2011] [13:47:30] &lt;sustrik&gt;       pythonirc1011: building a win installer would be very helpful</div>
<div class="line">[Saturday 01 January 2011] [13:47:42] &lt;sustrik&gt;       i would start with the core part</div>
<div class="line">[Saturday 01 January 2011] [13:47:43] &lt;pythonirc1011&gt; mikko: so i need a installation script language + compilation of a zeromq on my win box i guess...</div>
<div class="line">[Saturday 01 January 2011] [13:47:57] &lt;sustrik&gt;       it&#8217;s just a lib and a header file so it should be easy</div>
<div class="line">[Saturday 01 January 2011] [13:48:20] &lt;pythonirc1011&gt; i&#8217;m more after building the python bindings. I need to use it from python</div>
<div class="line">[Saturday 01 January 2011] [13:48:35] &lt;sustrik&gt;       sure, but those are dependent on the lib</div>
<div class="line">[Saturday 01 January 2011] [13:48:44] &lt;pythonirc1011&gt; true</div>
<div class="line">[Saturday 01 January 2011] [13:48:53] &lt;pythonirc1011&gt; perhaps ship the library pre-compiler on windows</div>
<div class="line">[Saturday 01 January 2011] [13:48:58] &lt;pythonirc1011&gt; compiler</div>
<div class="line">[Saturday 01 January 2011] [13:49:01] &lt;pythonirc1011&gt; compiled i meant</div>
<div class="line">[Saturday 01 January 2011] [13:49:04] &lt;sustrik&gt;       exactly</div>
<div class="line">[Saturday 01 January 2011] [13:49:10] &lt;sustrik&gt;       what you need is 2 libraties</div>
<div class="line">[Saturday 01 January 2011] [13:49:12] &lt;sustrik&gt;       libzmq</div>
<div class="line">[Saturday 01 January 2011] [13:49:18] &lt;sustrik&gt;       and libpyzmq</div>
<div class="line">[Saturday 01 January 2011] [13:49:24] &lt;sustrik&gt;       you need to compile them</div>
<div class="line">[Saturday 01 January 2011] [13:49:35] &lt;sustrik&gt;       and build an installer</div>
<div class="line">[Saturday 01 January 2011] [13:49:42] &lt;pythonirc1011&gt; k, that should be doable...are they dlls?</div>
<div class="line">[Saturday 01 January 2011] [13:49:59] &lt;sustrik&gt;       i am not sure whether python needs anythig else aside of those libs</div>
<div class="line">[Saturday 01 January 2011] [13:50:15] &lt;sustrik&gt;       yes, i think so</div>
<div class="line">[Saturday 01 January 2011] [13:50:48] &lt;pythonirc1011&gt; I&#8217;ll look into it soon. Thanks.</div>
<div class="line">[Saturday 01 January 2011] [13:55:38] &lt;dos000&gt;        sustrik, does zma uses lock free ring buffers  ? sometalk i listened mentioned it being musch faster than using queues becose of contention</div>
<div class="line">[Saturday 01 January 2011] [13:55:51] &lt;dos000&gt;        s/zma/0mq</div>
<div class="line">[Saturday 01 January 2011] [13:56:04] &lt;sustrik&gt;       yes, the queues are lock-free</div>
<div class="line">[Saturday 01 January 2011] [13:56:46] &lt;dos000&gt;        sustrik, is it ringbuffer based ?</div>
<div class="line">[Saturday 01 January 2011] [13:57:06] &lt;sustrik&gt;       messages are allocated in blocks</div>
<div class="line">[Saturday 01 January 2011] [13:57:10] &lt;sustrik&gt;       (256 per block)</div>
<div class="line">[Saturday 01 January 2011] [13:57:40] &lt;dos000&gt;        sustrik, here is the talk <a class="reference external" href="http://www.infoq.com/presentations/LMAX">http://www.infoq.com/presentations/LMAX</a> jump to 36:00 for the real meat.</div>
<div class="line">[Saturday 01 January 2011] [13:57:54] &lt;sustrik&gt;       one block is recycled to eliminate excessive allocation/deallocation</div>
<div class="line">[Saturday 01 January 2011] [13:58:17] &lt;dos000&gt;        its kinda java oriented but i think the same issues apply in c++</div>
<div class="line">[Saturday 01 January 2011] [13:58:28] &lt;sustrik&gt;       however, if the number of messages in the queue drops, only 1 block is recycled, any subsequent blocvks are dealloc&#8217;d</div>
<div class="line">[Saturday 01 January 2011] [13:58:41] &lt;dos000&gt;        ah!</div>
<div class="line">[Saturday 01 January 2011] [13:59:02] &lt;dos000&gt;        thats seems smarter .. they allocate 2min off hand to counter java gc</div>
<div class="line">[Saturday 01 January 2011] [13:59:09] &lt;dos000&gt;        2 millions</div>
<div class="line">[Saturday 01 January 2011] [13:59:31] &lt;sustrik&gt;       well, depends on the use case</div>
<div class="line">[Saturday 01 January 2011] [13:59:50] &lt;sustrik&gt;       it&#8217;s something that&#8217;s not good to do on a sensor or an embedded system</div>
<div class="line">[Saturday 01 January 2011] [14:00:11] &lt;sustrik&gt;       0mq tries to be generic</div>
<div class="line">[Saturday 01 January 2011] [14:00:12] &lt;dos000&gt;        indeed .. for a server its much different</div>
<div class="line">[Saturday 01 January 2011] [14:00:26] &lt;sustrik&gt;       you can of course tune it by hand if you want to</div>
<div class="line">[Saturday 01 January 2011] [14:00:48] &lt;sustrik&gt;       see src/config.hpp</div>
<div class="line">[Saturday 01 January 2011] [14:01:51] &lt;dos000&gt;        sustrik, so its configurable by source changes only then</div>
<div class="line">[Saturday 01 January 2011] [14:02:16] &lt;sustrik&gt;       there are 2 mechanisms there</div>
<div class="line">[Saturday 01 January 2011] [14:02:26] &lt;sustrik&gt;       config.hpp are compile-time options</div>
<div class="line">[Saturday 01 January 2011] [14:02:28] &lt;dos000&gt;        sustrik, it will apply to all queues then</div>
<div class="line">[Saturday 01 January 2011] [14:02:40] &lt;sustrik&gt;       socket options can be used in run-time</div>
<div class="line">[Saturday 01 January 2011] [14:02:49] &lt;dos000&gt;        ah!</div>
<div class="line">[Saturday 01 January 2011] [14:03:08] &lt;sustrik&gt;       it&#8217;s a matter to consider whether specific tuning parameter</div>
<div class="line">[Saturday 01 January 2011] [14:03:09] &lt;dos000&gt;        socket options allow to you bigger/smaller buffers ?</div>
<div class="line">[Saturday 01 January 2011] [14:03:18] &lt;sustrik&gt;       should be a socket option or a compile-time param</div>
<div class="line">[Saturday 01 January 2011] [14:03:36] &lt;sustrik&gt;       socket option allow to set the maximal buffer size</div>
<div class="line">[Saturday 01 January 2011] [14:03:49] &lt;dos000&gt;        i cant use compile time options</div>
<div class="line">[Saturday 01 January 2011] [14:03:58] &lt;sustrik&gt;       what are you trying to do?</div>
<div class="line">[Saturday 01 January 2011] [14:05:13] &lt;dos000&gt;        i am writing queues with different bechmarking options</div>
<div class="line">[Saturday 01 January 2011] [14:05:24] &lt;dos000&gt;        so i want to see effect of the changes</div>
<div class="line">[Saturday 01 January 2011] [14:06:26] &lt;sustrik&gt;       writing queues?</div>
<div class="line">[Saturday 01 January 2011] [14:06:36] &lt;sustrik&gt;       you mean you are implementing the queues yourself?</div>
<div class="line">[Saturday 01 January 2011] [14:06:41] &lt;dos000&gt;        so far i have 0mq and fastflow ( <a class="reference external" href="http://calvados.di.unipi.it/dokuwiki/doku.php?id=ffnamespace:about">http://calvados.di.unipi.it/dokuwiki/doku.php?id=ffnamespace:about</a> ) on my list</div>
<div class="line">[Saturday 01 January 2011] [14:06:59] &lt;sustrik&gt;       ok, i see</div>
<div class="line">[Saturday 01 January 2011] [14:07:05] &lt;sustrik&gt;       and what exactly are you missing?</div>
<div class="line">[Saturday 01 January 2011] [14:08:39] &lt;dos000&gt;        sustrik, i only have one issue so far ...</div>
<div class="line">[Saturday 01 January 2011] [14:09:17] &lt;dos000&gt;        i have to receive the events and process them in  java ...</div>
<div class="line">[Saturday 01 January 2011] [14:10:07] &lt;dos000&gt;        i either reimplement the lockfree ring buffers in java .. or use jzmq</div>
<div class="line">[Saturday 01 January 2011] [14:10:39] &lt;dos000&gt;        it looks deceptively easy to write it in java !</div>
<div class="line">[Saturday 01 January 2011] [14:11:27] &lt;sustrik&gt;       i still don&#8217;t see what you are missing :)</div>
<div class="line">[Saturday 01 January 2011] [14:11:39] &lt;sustrik&gt;       0mq is lock-free</div>
<div class="line">[Saturday 01 January 2011] [14:11:43] &lt;dos000&gt;        yes ... i am not missing anything ...</div>
<div class="line">[Saturday 01 January 2011] [14:11:48] &lt;dos000&gt;        i just have options !</div>
<div class="line">[Saturday 01 January 2011] [14:12:04] &lt;sustrik&gt;       implementing the lock-free queeu is not hard</div>
<div class="line">[Saturday 01 January 2011] [14:12:20] &lt;sustrik&gt;       it may become a problem as you want to add more features</div>
<div class="line">[Saturday 01 January 2011] [14:12:23] &lt;dos000&gt;        sustrik, there is locking when you call c++ functions from java</div>
<div class="line">[Saturday 01 January 2011] [14:12:28] &lt;sustrik&gt;       like limiting the number of messages in queue</div>
<div class="line">[Saturday 01 January 2011] [14:12:31] &lt;sustrik&gt;       or somesuch</div>
<div class="line">[Saturday 01 January 2011] [14:13:00] &lt;sustrik&gt;       is there, i am not familiar with how jzmq works atm</div>
<div class="line">[Saturday 01 January 2011] [14:13:09] &lt;dos000&gt;        its inherent in jni</div>
<div class="line">[Saturday 01 January 2011] [14:13:15] &lt;sustrik&gt;       i see</div>
<div class="line">[Saturday 01 January 2011] [14:13:28] &lt;sustrik&gt;       then you have to reimplement it yourself</div>
<div class="line">[Saturday 01 January 2011] [14:13:35] &lt;dos000&gt;        another option would be to receive the events via sockets in java</div>
<div class="line">[Saturday 01 January 2011] [14:13:53] &lt;sustrik&gt;       what sockets?</div>
<div class="line">[Saturday 01 January 2011] [14:14:40] &lt;dos000&gt;        instead of passing the messages via jni pass it via a the (local) netwrk interface</div>
<div class="line">[Saturday 01 January 2011] [14:15:00] &lt;dos000&gt;        of course that would be slower i imagine</div>
<div class="line">[Saturday 01 January 2011] [14:15:33] &lt;dos000&gt;        1) evtsource -&gt; zmq &#8211;&gt; jzmq &#8211;&gt; java app</div>
<div class="line">[Saturday 01 January 2011] [14:16:08] &lt;dos000&gt;        eventsource -&gt; zmq &#8211;&gt; javanio &#8211;&gt; javaapp</div>
<div class="line">[Saturday 01 January 2011] [14:17:19] &lt;dos000&gt;        anyway ...</div>
<div class="line">[Saturday 01 January 2011] [14:17:25] &lt;dos000&gt;        i will keep you updated !</div>
<div class="line">[Saturday 01 January 2011] [14:17:28] &lt;dos000&gt;        thanks a lot</div>
<div class="line">[Saturday 01 January 2011] [14:20:46] &lt;sustrik&gt;       you are welcome</div>
<div class="line">[Saturday 01 January 2011] [14:36:27] &lt;mikko&gt; happy new year all</div>
<div class="line">[Saturday 01 January 2011] [15:12:01] &lt;andrewvc&gt;      cremes: If you&#8217;re around I have a question about error_check_nonblock if you have a chance</div>
<div class="line">[Saturday 01 January 2011] [15:33:17] &lt;andrewvc&gt;      So, here&#8217;s a nonblocking question</div>
<div class="line">[Saturday 01 January 2011] [15:36:31] &lt;andrewvc&gt;      so, if I get an errno 95 doing a recv NOBLOCK</div>
<div class="line">[Saturday 01 January 2011] [15:37:18] &lt;andrewvc&gt;      what is the usual cause for that</div>
<div class="line">[Saturday 01 January 2011] [15:37:28] &lt;andrewvc&gt;      I was expecting an EAGAIN</div>
<div class="line">[Saturday 01 January 2011] [15:37:36] &lt;andrewvc&gt;      and retrying later my recv did work</div>
<div class="line">[Saturday 01 January 2011] [16:27:29] &lt;sustrik&gt;       what&#8217;s errno 95?</div>
<div class="line">[Saturday 01 January 2011] [16:59:13] &lt;andrewvc&gt;      sustrik,  #define EOPNOTSUPP  95  /* Operation not supported on transport endpoint <a href="#id1"><span class="problematic" id="id2">*</span></a>/</div>
<div class="line">[Saturday 01 January 2011] [16:59:53] &lt;andrewvc&gt;      basically, I get a notification of activity via select for a FD</div>
<div class="line">[Saturday 01 January 2011] [17:00:06] &lt;andrewvc&gt;      so I&#8217;m calling a recv ZMQ::NOBLOCK on it to see if I can read off a message</div>
<div class="line">[Saturday 01 January 2011] [17:00:08] &lt;andrewvc&gt;      and I get that</div>
<div class="line">[Saturday 01 January 2011] [17:00:29] &lt;andrewvc&gt;      i mean if I just pretend that&#8217;s an EAGAIN it works alright</div>
<div class="line">[Saturday 01 January 2011] [17:00:37] &lt;andrewvc&gt;      but just not what I expected</div>
<div class="line">[Saturday 01 January 2011] [18:23:03] &lt;neopallium&gt;    andrewvc: if you are calling recv() on a REQ/REP socket during the wrong state, you will get that error.</div>
<div class="line">[Saturday 01 January 2011] [18:24:36] &lt;neopallium&gt;    REQ/REP sockets switch back and forth from send-only to recv-only states.</div>
<div class="line">[Saturday 01 January 2011] [19:03:57] &lt;andrewvc&gt;      neopallium: it&#8217;s actually a push socket</div>
<div class="line">[Saturday 01 January 2011] [19:04:03] &lt;andrewvc&gt;      errr a pull socket I mena</div>
<div class="line">[Saturday 01 January 2011] [19:04:20] &lt;andrewvc&gt;      maybe it didn&#8217;t finish binding yet or something?</div>
<div class="line">[Saturday 01 January 2011] [19:04:28] &lt;andrewvc&gt;      though the FD did trigger</div>
<div class="line">[Saturday 01 January 2011] [19:19:37] &lt;mikko&gt; andrewvc: are you sure it&#8217;s a pull and not push socket?</div>
<div class="line">[Saturday 01 January 2011] [19:28:59] &lt;andrewvc&gt;      yeah I&#8217;m certain</div>
<div class="line">[Saturday 01 January 2011] [19:29:10] &lt;andrewvc&gt;      mikko: I&#8217;m certain because the messages eventually do start coming off</div>
<div class="line">[Saturday 01 January 2011] [19:29:19] &lt;andrewvc&gt;      I should double check though</div>
<div class="line">[Saturday 01 January 2011] [19:50:12] &lt;andrewvc&gt;      mikko: Oh how about that, I didn&#8217;t realize that was being called on both send AND recv.... Thanks for the pointer</div>
<div class="line">[Saturday 01 January 2011] [19:50:35] &lt;andrewvc&gt;      it was a PUSH after all. Thanks for recognizing that!</div>
<div class="line">[Saturday 01 January 2011] [19:51:13] &lt;mikko&gt; no prob, i think i&#8217;ve done that before as well</div>
<div class="line">[Saturday 01 January 2011] [19:51:21] &lt;andrewvc&gt;      but recv isn&#8217;t being called on it</div>
<div class="line">[Saturday 01 January 2011] [19:51:23] &lt;andrewvc&gt;      send is</div>
<div class="line">[Saturday 01 January 2011] [19:51:40] &lt;andrewvc&gt;      so, does that mean the socket isn&#8217;t in a state where it&#8217;s ready for sending I suppose</div>
<div class="line">[Saturday 01 January 2011] [19:54:57] &lt;andrewvc&gt;      mikko: Well, re-checking it I&#8217;m getting all proper codes, and EAGAIN where I expect it. I guess cleaning up my testing code must have fixed whatever the err was</div>
<div class="line">[Saturday 01 January 2011] [19:55:11] &lt;andrewvc&gt;      thanks for the help though, still good to know for later</div>
<div class="line">[Sunday 02 January 2011] [05:08:53] &lt;sustrik&gt; andrewvc: you&#8217;ve got ENOTSUPP from zmq_recv?</div>
<div class="line">[Sunday 02 January 2011] [05:11:38] &lt;sustrik&gt; looking at the code...</div>
<div class="line">[Sunday 02 January 2011] [05:12:00] &lt;sustrik&gt; hm, it can possibly happen when the socket is not yet fully initialised</div>
<div class="line">[Sunday 02 January 2011] [05:31:08] &lt;sustrik&gt; do you have a test program to reproduce it?</div>
<div class="line">[Sunday 02 January 2011] [17:20:36] &lt;<a href="#id17"><span class="problematic" id="id18">shykes_</span></a>&gt; Hello</div>
<div class="line">[Sunday 02 January 2011] [17:29:28] &lt;mikko&gt;   hi</div>
<div class="line">[Sunday 02 January 2011] [17:31:06] &lt;<a href="#id19"><span class="problematic" id="id20">shykes_</span></a>&gt; I&#8217;m weighing my options for a &#8220;smarter&#8221; req/rep device. Are you aware of any projects going in that direction?</div>
<div class="line">[Sunday 02 January 2011] [17:31:25] &lt;mikko&gt;   what do you mean by smarter?</div>
<div class="line">[Sunday 02 January 2011] [17:31:27] &lt;mikko&gt;   brb</div>
<div class="line">[Sunday 02 January 2011] [17:32:19] &lt;<a href="#id21"><span class="problematic" id="id22">shykes_</span></a>&gt; Currently we have a forwarder with bind on both sides</div>
<div class="line">[Sunday 02 January 2011] [17:32:26] &lt;<a href="#id23"><span class="problematic" id="id24">shykes_</span></a>&gt; ie dynamic workers, dynamic clients</div>
<div class="line">[Sunday 02 January 2011] [17:32:57] &lt;<a href="#id25"><span class="problematic" id="id26">shykes_</span></a>&gt; we use that to load-balance synchronous rpc. I&#8217;m guessing this is a classic use case</div>
<div class="line">[Sunday 02 January 2011] [17:34:02] &lt;<a href="#id27"><span class="problematic" id="id28">shykes_</span></a>&gt; I&#8217;d like my device to stop forwarding requests to a worker which doesn&#8217;t behave properly</div>
<div class="line">[Sunday 02 January 2011] [17:34:29] &lt;<a href="#id29"><span class="problematic" id="id30">shykes_</span></a>&gt; eg. a pre-configured timeout</div>
<div class="line">[Sunday 02 January 2011] [17:37:18] &lt;<a href="#id31"><span class="problematic" id="id32">shykes_</span></a>&gt; Maybe I could implement this as a &#8216;proxy device&#8217; in front of each worker</div>
<div class="line">[Sunday 02 January 2011] [17:38:00] &lt;<a href="#id33"><span class="problematic" id="id34">shykes_</span></a>&gt; each proxy has only one message to worry about at a time, which makes it simpler to write</div>
<div class="line">[Sunday 02 January 2011] [17:38:06] &lt;<a href="#id35"><span class="problematic" id="id36">shykes_</span></a>&gt; Any insight would be much appreciated :)</div>
<div class="line">[Sunday 02 January 2011] [19:47:25] &lt;Skaag&gt;   <a href="#id37"><span class="problematic" id="id38">shykes_</span></a>: sounds like an important and also &#8220;classical&#8221; use case to me, sounds like you need a sort of a &#8220;broker&#8221;? :-)</div>
<div class="line">[Sunday 02 January 2011] [19:48:57] &lt;<a href="#id39"><span class="problematic" id="id40">shykes_</span></a>&gt; Correct. Although I already use zmq_forwarder as a broker</div>
<div class="line">[Sunday 02 January 2011] [19:50:09] &lt;<a href="#id41"><span class="problematic" id="id42">shykes_</span></a>&gt; But before I reinvent the wheel, I&#8217;m trying to find out how much of it already exists</div>
<div class="line">[Sunday 02 January 2011] [19:50:51] &lt;<a href="#id43"><span class="problematic" id="id44">shykes_</span></a>&gt; I&#8217;m guessing a lot of people use zeromq for the same purpose as me. How did all these people implement this?</div>
<div class="line">[Sunday 02 January 2011] [19:55:14] &lt;<a href="#id45"><span class="problematic" id="id46">shykes_</span></a>&gt; Hum, I just found rabbitmq&#8217;s rmq-0mq plugin. Maybe that can help</div>
<div class="line">[Sunday 02 January 2011] [20:00:11] &lt;Skaag&gt;   we are porting our system from rabbitmq to 0mq</div>
<div class="line">[Sunday 02 January 2011] [20:00:26] &lt;Skaag&gt;   because of scaling issues</div>
<div class="line">[Sunday 02 January 2011] [20:00:43] &lt;<a href="#id47"><span class="problematic" id="id48">shykes_</span></a>&gt; Yeah, we were using rabbitmq too</div>
<div class="line">[Sunday 02 January 2011] [20:00:46] &lt;Skaag&gt;   I think the case of a &#8220;dead&#8221; machine is handled well, but a misbehaving machine, that&#8217;s another story</div>
<div class="line">[Sunday 02 January 2011] [20:01:23] &lt;Skaag&gt;   you&#8217;ll simply need to implement this yourself, or on the machine itself, decouple the process that receives the messages from the processes that do the actual work</div>
<div class="line">[Sunday 02 January 2011] [20:01:31] &lt;<a href="#id49"><span class="problematic" id="id50">shykes_</span></a>&gt; yeah</div>
<div class="line">[Sunday 02 January 2011] [20:01:39] &lt;<a href="#id51"><span class="problematic" id="id52">shykes_</span></a>&gt; sounds like less work than putting rabbitmq back into the mix :)</div>
<div class="line">[Sunday 02 January 2011] [20:01:44] &lt;Skaag&gt;   why are you using 0mq instead of the wicked rabbit if I may ask?</div>
<div class="line">[Sunday 02 January 2011] [20:02:09] &lt;Skaag&gt;   yes, also in my opinion, it is less work.</div>
<div class="line">[Sunday 02 January 2011] [20:02:16] &lt;<a href="#id53"><span class="problematic" id="id54">shykes_</span></a>&gt; A few reasons</div>
<div class="line">[Sunday 02 January 2011] [20:02:29] &lt;<a href="#id55"><span class="problematic" id="id56">shykes_</span></a>&gt; 1. We encountered problems with our Celery+RabbitMQ setup</div>
<div class="line">[Sunday 02 January 2011] [20:02:30] &lt;Skaag&gt;   I wish I knew about the shortcomings before I started implementing with rabbit...</div>
<div class="line">[Sunday 02 January 2011] [20:02:56] &lt;<a href="#id57"><span class="problematic" id="id58">shykes_</span></a>&gt; 2. We hit a major bug in the persister, which made it crash and not come back. Had to recover by hand...</div>
<div class="line">[Sunday 02 January 2011] [20:03:09] &lt;Skaag&gt;   crap</div>
<div class="line">[Sunday 02 January 2011] [20:03:15] &lt;Skaag&gt;   (and now i&#8217;m told that our 16 node cluster is considered &#8220;very large&#8221; in rabbitmq terms...)</div>
<div class="line">[Sunday 02 January 2011] [20:03:19] &lt;<a href="#id59"><span class="problematic" id="id60">shykes_</span></a>&gt; 3. I hate amqp. It&#8217;s too complicated</div>
<div class="line">[Sunday 02 January 2011] [20:03:55] &lt;Skaag&gt;   well then we agree at least on 2 and 3, and about 1 is irrelevant to our own system</div>
<div class="line">[Sunday 02 January 2011] [20:03:58] &lt;<a href="#id61"><span class="problematic" id="id62">shykes_</span></a>&gt; 4. more freedom in the topology</div>
<div class="line">[Sunday 02 January 2011] [20:04:04] &lt;Skaag&gt;   right</div>
<div class="line">[Sunday 02 January 2011] [20:04:13] &lt;<a href="#id63"><span class="problematic" id="id64">shykes_</span></a>&gt; for example, switch to multicast down the road</div>
<div class="line">[Sunday 02 January 2011] [20:04:16] &lt;Skaag&gt;   ok this gives me validation in my own path</div>
<div class="line">[Sunday 02 January 2011] [20:04:20] &lt;Skaag&gt;   yep</div>
<div class="line">[Sunday 02 January 2011] [20:04:28] &lt;Skaag&gt;   at least within a single DC</div>
<div class="line">[Sunday 02 January 2011] [20:04:37] &lt;Skaag&gt;   I believe multicast over WAN is not feasible and may never be</div>
<div class="line">[Sunday 02 January 2011] [20:04:51] &lt;<a href="#id65"><span class="problematic" id="id66">shykes_</span></a>&gt; yeah, we&#8217;re primarily on EC2 for now, so not relevant for us either</div>
<div class="line">[Sunday 02 January 2011] [20:21:22] &lt;Skaag&gt;   I constantly fail to see how EC2 helps with anything other than temporarily huge computations</div>
<div class="line">[Sunday 02 January 2011] [20:21:38] &lt;Skaag&gt;   it&#8217;s more expensive than standard hosting</div>
<div class="line">[Sunday 02 January 2011] [20:21:46] &lt;Skaag&gt;   by any calculation I made</div>
<div class="line">[Sunday 02 January 2011] [22:01:38] &lt;viraptor&gt;        hi all</div>
<div class="line">[Sunday 02 January 2011] [22:02:29] &lt;viraptor&gt;        could someone tell me where to look for information on zeromq + forking? the docs describe multithreading, but not how I should handle a fork (inherit the context or not)</div>
<div class="line">[Sunday 02 January 2011] [22:46:42] &lt;viraptor&gt;        ehh... found the answer after all... it&#8217;s &#8220;don&#8217;t share the context with fork&#8221;</div>
<div class="line">[Monday 03 January 2011] [00:46:14] &lt;jugg&gt;    with zmq 2.1.x, sockets can be shared between threads.  However, zmq_poll documentation still state that the sockets must belong to the same thread calling zmq_poll.   Is that still the case?</div>
<div class="line">[Monday 03 January 2011] [01:09:59] &lt;neopallium&gt;      jugg: with zmq 2.1 sockets can be moved between threads, but you still can&#8217;t send/recv from different threads on the same socket.</div>
<div class="line">[Monday 03 January 2011] [01:57:01] &lt;PeterTork&gt;       Question regarding the Ruby bindings. I am creating a socket, and then trying to extend it with a module. This causes it to fail in ZM.select(arrayOfSockets, nil, nil, 30) with the error <a href="#id3"><span class="problematic" id="id4">`</span></a>select&#8217;: uninitialized stream (IOError)</div>
<div class="line">[Monday 03 January 2011] [01:57:20] &lt;PeterTork&gt;       Removing the s.extend(EmptyModule) fixes this.</div>
<div class="line">[Monday 03 January 2011] [12:55:38] &lt;Seta00&gt;  I&#8217;m having lots of problems building pyzmq :(</div>
<div class="line">[Monday 03 January 2011] [12:55:57] &lt;Seta00&gt;  well, only one problem, but I can&#8217;t fix it :P</div>
<div class="line">[Monday 03 January 2011] [12:58:15] &lt;mikko&gt;   what problem are you having?</div>
<div class="line">[Monday 03 January 2011] [13:02:15] &lt;Seta00&gt;  mikko, distutils couldn&#8217;t find my vcvarsall, but I&#8217;ve just fixed it by manually returning the absolute path to it</div>
<div class="line">[Monday 03 January 2011] [13:02:42] &lt;Seta00&gt;  now I just need to put the include files on the right dirs</div>
<div class="line">[Monday 03 January 2011] [13:02:49] &lt;Seta00&gt;  and everything is good to go (I think)</div>
<div class="line">[Monday 03 January 2011] [13:06:27] &lt;Seta00&gt;  now I need a constants.pyd.manifest file</div>
<div class="line">[Monday 03 January 2011] [13:15:44] &lt;Seta00&gt;  lol I had to manually create a bunch of manifest files</div>
<div class="line">[Monday 03 January 2011] [13:18:10] &lt;Seta00&gt;  hehe finally working</div>
<div class="line">[Monday 03 January 2011] [13:25:58] &lt;Seta00&gt;  aaaand they don&#8217;t work :)</div>
<div class="line">[Monday 03 January 2011] [13:26:13] &lt;Seta00&gt;  DLL load failed: The application has failed to start because its side-by-side configuration is incorrect.</div>
<div class="line">[Monday 03 January 2011] [13:50:22] &lt;Seta00&gt;  this thing is driving me nuts, I think I&#8217;ll just use the C++ library</div>
<div class="line">[Monday 03 January 2011] [13:56:17] &lt;sustrik&gt; Seta00: try asking on the mailing list, the pyzmq guys can possibly help you</div>
<div class="line">[Monday 03 January 2011] [14:29:29] &lt;mikko&gt;   sustrik: build currently fails on sunos using gcc3</div>
<div class="line">[Monday 03 January 2011] [14:29:33] &lt;mikko&gt;   not sure if that is big deal</div>
<div class="line">[Monday 03 January 2011] [14:38:11] &lt;sustrik&gt; mikko: there&#8217;s lot of failures there...</div>
<div class="line">[Monday 03 January 2011] [14:38:38] &lt;mikko&gt;   what do you mean?</div>
<div class="line">[Monday 03 January 2011] [14:38:59] &lt;mikko&gt;   you mean sunos and gcc3 to begin with</div>
<div class="line">[Monday 03 January 2011] [14:39:00] &lt;mikko&gt;   :)</div>
<div class="line">[Monday 03 January 2011] [14:39:13] &lt;sustrik&gt; i see 8 red point on valokuva.org</div>
<div class="line">[Monday 03 January 2011] [14:39:20] &lt;sustrik&gt; points</div>
<div class="line">[Monday 03 January 2011] [14:39:45] &lt;mikko&gt;   have i broken something?</div>
<div class="line">[Monday 03 January 2011] [14:39:50] &lt;mikko&gt;   i&#8217;ll check</div>
<div class="line">[Monday 03 January 2011] [14:40:09] &lt;mikko&gt;   github was unavailable it seems</div>
<div class="line">[Monday 03 January 2011] [14:40:17] &lt;sustrik&gt; ah, yes</div>
<div class="line">[Monday 03 January 2011] [14:40:25] &lt;sustrik&gt; i&#8217;ve noticed that myself</div>
<div class="line">[Monday 03 January 2011] [14:40:41] &lt;sustrik&gt; so where should i look for console output?</div>
<div class="line">[Monday 03 January 2011] [14:41:23] &lt;mikko&gt;   <a class="reference external" href="http://build.valokuva.org/job/ZeroMQ2-core-master-SunGCC-solaris10/4/console">http://build.valokuva.org/job/ZeroMQ2-core-master-SunGCC-solaris10/4/console</a></div>
<div class="line">[Monday 03 January 2011] [14:41:27] &lt;mikko&gt;   there at the end</div>
<div class="line">[Monday 03 January 2011] [14:42:02] &lt;mikko&gt;   i looked at it last night, looks like compiler error to me</div>
<div class="line">[Monday 03 January 2011] [14:44:05] &lt;sustrik&gt; yep</div>
<div class="line">[Monday 03 January 2011] [14:44:08] &lt;sustrik&gt; let me fix it</div>
<div class="line">[Monday 03 January 2011] [14:49:56] &lt;CIA-21&gt;  zeromq2: 03Martin Sustrik 07master * r95eebbf 10/ src/sub.cpp :</div>
<div class="line">[Monday 03 January 2011] [14:49:56] &lt;CIA-21&gt;  zeromq2: sunos/gcc3 compilation issue fixed</div>
<div class="line">[Monday 03 January 2011] [14:49:56] &lt;CIA-21&gt;  zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/ezkv67">http://bit.ly/ezkv67</a></div>
<div class="line">[Monday 03 January 2011] [14:50:02] &lt;sustrik&gt; mikko: try now</div>
<div class="line">[Monday 03 January 2011] [16:07:50] &lt;mikko&gt;   sustrik: i&#8217;ll kick a build</div>
<div class="line">[Monday 03 January 2011] [16:08:16] &lt;mikko&gt;   building</div>
<div class="line">[Monday 03 January 2011] [16:16:11] &lt;mikko&gt;   passes</div>
<div class="line">[Monday 03 January 2011] [16:18:26] &lt;sustrik&gt; great</div>
<div class="line">[Monday 03 January 2011] [16:26:09] &lt;Thomas_aboutus&gt;  I have what I&#8217;m sure is a super-noob question, but I&#8217;ve been over the docs a hundred times and can&#8217;t figure out what I&#8217;m doing wrong. If someone can help me that would rock!</div>
<div class="line">[Monday 03 January 2011] [16:26:48] &lt;Thomas_aboutus&gt;  I am trying to make a simple pub/sub setup. I have the code here: <a class="reference external" href="https://gist.github.com/763990">https://gist.github.com/763990</a>   For some reason, the subscriber never receives messages from the publisher. The code in the gist is as simple as I could make it for clarities sake.</div>
<div class="line">[Monday 03 January 2011] [16:36:08] &lt;mikko&gt;   Thomas_aboutus: both sockets connect</div>
<div class="line">[Monday 03 January 2011] [16:37:39] &lt;mikko&gt;   change the pub to bind and it should work</div>
<div class="line">[Monday 03 January 2011] [16:40:05] &lt;Thomas_aboutus&gt;  Wow... Thank you.</div>
<div class="line">[Monday 03 January 2011] [16:40:07] &lt;Thomas_aboutus&gt;  :)</div>
<div class="line">[Tuesday 04 January 2011] [00:42:35] &lt;jugg&gt;   I&#8217;ve done some work updating the zmq erlang bindings, for the most part things are working well now, but I&#8217;m running into issues with events on the socket FD (that was retrieved using ZMQ_FD getsockopt).  question: Can the FD be used in poll/select in one thread while the Socket is being used in other thread?  eg. the erlang vm sits on the FD in the poll/select call while waiting for an event and in the mean time other socket operations may be performe</div>
<div class="line">[Tuesday 04 January 2011] [01:45:35] &lt;sustrik&gt;        jugg: no</div>
<div class="line">[Tuesday 04 January 2011] [01:45:41] &lt;sustrik&gt;        sockets are not thread safe</div>
<div class="line">[Tuesday 04 January 2011] [01:46:02] &lt;sustrik&gt;        you can access a socket from at most one thread at a time</div>
<div class="line">[Tuesday 04 January 2011] [01:48:40] &lt;jugg&gt;   Is this zmq specific, or (I&#8217;ve not yet been able to find an answer) is it the case that a normal file descriptor would have problems if one thread used it in a poll() call, while another thread tried to read/write to it?</div>
<div class="line">[Tuesday 04 January 2011] [01:49:31] &lt;sustrik&gt;        normal FDs are thread safe</div>
<div class="line">[Tuesday 04 January 2011] [01:50:16] &lt;sustrik&gt;        0mq is special as it uses lock-free algorithms</div>
<div class="line">[Tuesday 04 January 2011] [01:50:32] &lt;sustrik&gt;        thus, it cannot synchronise the access using mutex or somesuch</div>
<div class="line">[Tuesday 04 January 2011] [01:51:32] &lt;sustrik&gt;        you can apply a mutex on top of it yourself, if that&#8217;s what you need</div>
<div class="line">[Tuesday 04 January 2011] [01:51:40] &lt;sustrik&gt;        but be aware of the performance impact</div>
<div class="line">[Tuesday 04 January 2011] [01:51:42] &lt;jugg&gt;   What makes the socket FD different than a normal FD in this regards?</div>
<div class="line">[Tuesday 04 January 2011] [01:51:51] &lt;jugg&gt;   No, that isn&#8217;t an option for the erlang bindings...</div>
<div class="line">[Tuesday 04 January 2011] [01:59:51] &lt;neopallium&gt;     jugg: the 0mq FD is just a socketpair to sent notices that there are messages/commands to read from the socket&#8217;s queue.</div>
<div class="line">[Tuesday 04 January 2011] [02:00:47] &lt;neopallium&gt;     the message data you get from recv() is transferred in-memory from a lock-free queue, not over the socketpair.</div>
<div class="line">[Tuesday 04 January 2011] [02:02:58] &lt;neopallium&gt;     jugg: are you making a erlang port or a linked-in driver?</div>
<div class="line">[Tuesday 04 January 2011] [02:03:30] &lt;jugg&gt;   linked-in driver - its based off of the broken erlzmq bindings.</div>
<div class="line">[Tuesday 04 January 2011] [02:10:39] &lt;jugg&gt;   So if the socket FD is a socketpair, what makes it not usable in a poll call from one thread while another thread uses the socket?  Does zmq listen for events on the socket internally (outside of zmq_poll itself)?</div>
<div class="line">[Tuesday 04 January 2011] [02:11:45] &lt;sustrik&gt;        jugg: yes, it does so in zmq_send, zmq_recv and alike</div>
<div class="line">[Tuesday 04 January 2011] [02:12:50] &lt;jugg&gt;   ok... well, time to approach the erlang binding architecture differently then... :/</div>
<div class="line">[Tuesday 04 January 2011] [02:14:09] &lt;neopallium&gt;     sustrik: if the polling thread just calls poll() and not any zmq_* functions like zmq_poll(), would it still cause an issue?</div>
<div class="line">[Tuesday 04 January 2011] [02:14:33] &lt;jugg&gt;   if other parts of zmq consume the socketpair events, then yes...</div>
<div class="line">[Tuesday 04 January 2011] [02:14:35] &lt;neopallium&gt;     jugg: what is your polling thread doing with the events it gets back from the 0mq FD?</div>
<div class="line">[Tuesday 04 January 2011] [02:15:04] &lt;jugg&gt;   Notifies the socket owner thread and event occurred.</div>
<div class="line">[Tuesday 04 January 2011] [02:16:12] &lt;jugg&gt;   and =&gt; an</div>
<div class="line">[Tuesday 04 January 2011] [02:16:38] &lt;neopallium&gt;     ok, even if the owner thread gets a old POLLIN or POLLOUT event it can still try to call zmq_send/zmq_recv() with the NOBLOCK flag.</div>
<div class="line">[Tuesday 04 January 2011] [02:16:59] &lt;neopallium&gt;     it will just get an EAGAIN if it had already comsumed the event.</div>
<div class="line">[Tuesday 04 January 2011] [02:17:10] &lt;jugg&gt;   the problem is that it does not get a POLLIN/OUT event - as it appears the zmq internals are consuming those events...</div>
<div class="line">[Tuesday 04 January 2011] [02:17:23] &lt;jugg&gt;   which from sustrik&#8217;s statement confirms this.</div>
<div class="line">[Tuesday 04 January 2011] [02:17:32] &lt;neopallium&gt;     do you use the NOBLOCK flag?</div>
<div class="line">[Tuesday 04 January 2011] [02:18:09] &lt;jugg&gt;   I don&#8217;t see the relevance... the problem is the erlang poll is not being signaled an event occurred...</div>
<div class="line">[Tuesday 04 January 2011] [02:18:56] &lt;neopallium&gt;     your owner thread should be calling zmq_send()/zmq_recv() with the NOBLOCK flag, and only if it get EAGAIN, do it wait for an event notice from the polling thread.</div>
<div class="line">[Tuesday 04 January 2011] [02:18:57] &lt;sustrik&gt;        neopallium: getsockopt(ZMQ_EVENTS) consumes events from the socket pair</div>
<div class="line">[Tuesday 04 January 2011] [02:19:27] &lt;neopallium&gt;     sustrik: yes, and he should only call that from the owner thread not the poller thread.</div>
<div class="line">[Tuesday 04 January 2011] [02:20:39] &lt;sustrik&gt;        jugg: why do you need to combine recv and poll from different threads</div>
<div class="line">[Tuesday 04 January 2011] [02:20:52] &lt;sustrik&gt;        (i know, erlang is tricky)</div>
<div class="line">[Tuesday 04 January 2011] [02:21:46] &lt;sustrik&gt;        neopallium: i assume the problem is how erlang VM works</div>
<div class="line">[Tuesday 04 January 2011] [02:21:55] &lt;sustrik&gt;        it&#8217;s kind of thread-agnostic</div>
<div class="line">[Tuesday 04 January 2011] [02:22:27] &lt;neopallium&gt;     jugg: have you tried an external C port?  it would make this must similar.</div>
<div class="line">[Tuesday 04 January 2011] [02:23:47] &lt;neopallium&gt;     sustrik: yeah, the book I have on erlang doesn&#8217;t have much details about how the linked-in driver interface is effected by any internal threads that the erlang VM might have.</div>
<div class="line">[Tuesday 04 January 2011] [02:25:29] &lt;sustrik&gt;        the erlang binding is a troublesome one</div>
<div class="line">[Tuesday 04 January 2011] [02:25:39] &lt;sustrik&gt;        originally it was written by shammika pathirana</div>
<div class="line">[Tuesday 04 January 2011] [02:25:44] &lt;jugg&gt;   the only way to wait on an event in erlang is to provide the fd to the erlang vm.  The erlang vm, then calls the driver callback routine input/output_ready depending on the event type.  The callback is an arbitrary thread.   That callback checks the fd if an even actually occurred on the socket using getsockopt(ZMQ_EVENTS), and if so, then sends a notification back into the erlang world notifying an erlang process which owns the socket.  That erlang pr</div>
<div class="line">[Tuesday 04 January 2011] [02:25:51] &lt;sustrik&gt;        who had no erlang experience at the time afaik</div>
<div class="line">[Tuesday 04 January 2011] [02:26:06] &lt;sustrik&gt;        then it was fixed by serge aleynikov</div>
<div class="line">[Tuesday 04 January 2011] [02:26:26] &lt;sustrik&gt;        later on we&#8217;ve created some fixes when working on RabbitMQ/0MQ bridge with VMWare</div>
<div class="line">[Tuesday 04 January 2011] [02:26:29] &lt;neopallium&gt;     jugg: are you sure the vm is using a different polling thread from the callbacks?</div>
<div class="line">[Tuesday 04 January 2011] [02:26:32] &lt;sustrik&gt;        this are not yet in</div>
<div class="line">[Tuesday 04 January 2011] [02:26:34] &lt;sustrik&gt;        etc.</div>
<div class="line">[Tuesday 04 January 2011] [02:27:21] &lt;jugg&gt;   neopallium, the callback gets called from arbitrary threads... I don&#8217;t know for sure if the poll is happening in the same thread or not.</div>
<div class="line">[Tuesday 04 January 2011] [02:28:54] &lt;sustrik&gt;        what about an alternative architecture: poll on FD, when signaled remove it from the pollset then read, when read is done, return it to the pollset</div>
<div class="line">[Tuesday 04 January 2011] [02:29:09] &lt;neopallium&gt;     jugg: why not do the zmq_recv() in the output_ready() callback instead of sending a notice to the erlang process (which is not a real thread/process).</div>
<div class="line">[Tuesday 04 January 2011] [02:30:17] &lt;jugg&gt;   sustrik, I&#8217;m already half way down that path...</div>
<div class="line">[Tuesday 04 January 2011] [02:30:58] &lt;neopallium&gt;     even if you are sending a notice back to the erlang process (saying hay you can read now), that erlang process will just send a port command which will be delivered to the port</div>
<div class="line">[Tuesday 04 January 2011] [02:30:59] &lt;jugg&gt;   neopallium, that has issues with multi-part messages...</div>
<div class="line">[Tuesday 04 January 2011] [02:31:19] &lt;neopallium&gt;     the ports callbacks should be restricted to one thread.</div>
<div class="line">[Tuesday 04 January 2011] [02:31:36] &lt;neopallium&gt;     I don&#8217;t see any warnings that linked-in drivers need to be thread-safe.</div>
<div class="line">[Tuesday 04 January 2011] [02:32:45] &lt;neopallium&gt;     jugg: do you deliver each part of the message in a different message back to the controlling process?</div>
<div class="line">[Tuesday 04 January 2011] [02:33:47] &lt;jugg&gt;   each erlzmq recv call acts just like zmq_recv.  It&#8217;ll return each part separately.</div>
<div class="line">[Tuesday 04 January 2011] [02:34:58] &lt;sustrik&gt;        jugg: btw, there&#8217;s a problem with erlzmq project now; as i&#8217;ve mentioned dhammika is not really an erlang guy and serge has unrelated problems now that prevent him from doing stuff</div>
<div class="line">[Tuesday 04 January 2011] [02:35:18] &lt;sustrik&gt;        in case you are interested i can give you commit access...</div>
<div class="line">[Tuesday 04 January 2011] [02:36:32] &lt;jugg&gt;   sustrik, let me get this working successfully, and I&#8217;ll ping you then for access.</div>
<div class="line">[Tuesday 04 January 2011] [02:37:07] &lt;sustrik&gt;        jugg: ok, good</div>
<div class="line">[Tuesday 04 January 2011] [02:38:31] &lt;sustrik&gt;        there&#8217;s also VMware patch that solves the sender-side backpressure IIRC</div>
<div class="line">[Tuesday 04 January 2011] [02:38:40] &lt;jugg&gt;   sustrik, just to clarify something.. you said getsockopt(ZMQ_EVENTS) consumes the socketpair events... do you mean payload or events that would trigger a waiting poll call?</div>
<div class="line">[Tuesday 04 January 2011] [02:38:40]   * sustrik makes a mental note that it has to be applied</div>
<div class="line">[Tuesday 04 January 2011] [02:39:30] &lt;sustrik&gt;        it consumes internal 0mq events from the socket pair</div>
<div class="line">[Tuesday 04 January 2011] [02:39:49] &lt;neopallium&gt;     jugg: it reads from the socketpair which will consume the POLLIN event from the FD</div>
<div class="line">[Tuesday 04 January 2011] [02:40:26] &lt;sustrik&gt;        let me give an overvirew of the achitecture</div>
<div class="line">[Tuesday 04 January 2011] [02:40:39] &lt;sustrik&gt;        the actual TCP sockets are handled by background threads</div>
<div class="line">[Tuesday 04 January 2011] [02:40:49] &lt;sustrik&gt;        making sending/receiving messages asynchronous</div>
<div class="line">[Tuesday 04 January 2011] [02:41:20] &lt;sustrik&gt;        the user&#8217;s thread communicates with background (I/O) threads using so called &#8216;commands&#8217;</div>
<div class="line">[Tuesday 04 January 2011] [02:41:41] &lt;sustrik&gt;        these are sent via a socketpair connecting the user thread and the I/O thread</div>
<div class="line">[Tuesday 04 January 2011] [02:42:14] &lt;sustrik&gt;        example of a command sent from I/O thread to user&#8217;s thread would be &#8220;there are messages available for reading&#8221;</div>
<div class="line">[Tuesday 04 January 2011] [02:43:02] &lt;sustrik&gt;        when user&#8217;s thread get that command it knows it can unblock (in case it&#8217;s blocked in recv) and read new messages from the lock-free queue</div>
<div class="line">[Tuesday 04 January 2011] [02:43:16] &lt;sustrik&gt;        that&#8217;s more or less it</div>
<div class="line">[Tuesday 04 January 2011] [02:45:48] &lt;jugg&gt;   are socketpairs ever shared with multiple zmq sockets?</div>
<div class="line">[Tuesday 04 January 2011] [02:46:18] &lt;jugg&gt;   or does every zmq socket have its own socketpair?</div>
<div class="line">[Tuesday 04 January 2011] [02:46:57] &lt;sustrik&gt;        every socket has it&#8217;s own socketpair</div>
<div class="line">[Tuesday 04 January 2011] [02:47:11] &lt;sustrik&gt;        this is needed to be able to migrate sockets between threads</div>
<div class="line">[Tuesday 04 January 2011] [02:47:33] &lt;sustrik&gt;        so, to be precise, in 2.0.x multiple sockets share single socketpair</div>
<div class="line">[Tuesday 04 January 2011] [02:47:53] &lt;sustrik&gt;        in 2.1 there&#8217;s one socketpair per 0mq socket</div>
<div class="line">[Tuesday 04 January 2011] [02:50:46] &lt;jugg&gt;   ok.  Thanks, this helps my mental picture.  I have a couple of approaches to test out now.</div>
<div class="line">[Tuesday 04 January 2011] [02:51:43] &lt;sustrik&gt;        good luck :)</div>
<div class="line">[Tuesday 04 January 2011] [02:52:30] &lt;sustrik&gt;        ah, btw, erlang binding works with 2.1 only anyway</div>
<div class="line">[Tuesday 04 January 2011] [02:52:53] &lt;sustrik&gt;        so you don&#8217;t have to take the case where the socketpair is shared between sockets into account</div>
<div class="line">[Tuesday 04 January 2011] [02:54:24] &lt;jugg&gt;   yes</div>
<div class="line">[Tuesday 04 January 2011] [02:59:03] &lt;neopallium&gt;     jugg: I think you should only register events with driver_select() when the 0mq socket is blocked as reported by ZMQ_EVENTS.</div>
<div class="line">[Tuesday 04 January 2011] [02:59:47] &lt;neopallium&gt;     and when you are waiting for an event back from the vm don&#8217;t call zmq_recv() or ZMQ_EVENTS until the event comes back.</div>
<div class="line">[Tuesday 04 January 2011] [03:00:15] &lt;jugg&gt;   that is interesting</div>
<div class="line">[Tuesday 04 January 2011] [03:00:20] &lt;neopallium&gt;     that way the owner thread can&#8217;t consume events from the socketpair.</div>
<div class="line">[Tuesday 04 January 2011] [03:01:32] &lt;neopallium&gt;     I found the details about driver&#8217;s and erlang threads.</div>
<div class="line">[Tuesday 04 January 2011] [03:01:54] &lt;neopallium&gt;     and by default the driver will only have one thread access it at a time.</div>
<div class="line">[Tuesday 04 January 2011] [03:02:19] &lt;neopallium&gt;     you can do locking at driver or port level, the default is locking at the driver level.</div>
<div class="line">[Tuesday 04 January 2011] [03:03:19] &lt;neopallium&gt;     if you don&#8217;t share 0mq sockets between ports it should be possible to use port-level locking.</div>
<div class="line">[Tuesday 04 January 2011] [03:04:26] &lt;neopallium&gt;     also remember to remove the event notice from the socket after receiving the event and mark the socket as readable/writable.</div>
<div class="line">[Tuesday 04 January 2011] [03:05:38] &lt;neopallium&gt;     sustrik basically said the same thing earlier about removing the socket from the pollset (i.e. from driver_select()) when it is readable.</div>
<div class="line">[Tuesday 04 January 2011] [03:06:50] &lt;jugg&gt;   I&#8217;m not sure what you meant by &#8220;remove the event notice&#8221;... are you talking an implementation concept, or an erlang requirement?</div>
<div class="line">[Tuesday 04 January 2011] [03:07:44] &lt;neopallium&gt;     jugg: driver_select(port, event, mode, /* put 0 here. <a href="#id5"><span class="problematic" id="id6">*</span></a>/)</div>
<div class="line">[Tuesday 04 January 2011] [03:08:14] &lt;neopallium&gt;     that last arg. is for clearing the event (i.e. removing it from the pollset)</div>
<div class="line">[Tuesday 04 January 2011] [03:09:27] &lt;jugg&gt;   yes.  But my understanding is (although it has been hard to find supporting evidence) that it isn&#8217;t a requirement normally to do that in order for the erlang vm to report subsequent events on a fd.</div>
<div class="line">[Tuesday 04 January 2011] [03:10:17] &lt;neopallium&gt;     jugg: is your current problem that you are not receiving an event from the vm?</div>
<div class="line">[Tuesday 04 January 2011] [03:11:22] &lt;jugg&gt;   yes, but I think between sustrik&#8217;s comment on getsockopt(ZMQ_EVENTS) consuming events, and his description on how things work, I can see why that is the case...</div>
<div class="line">[Tuesday 04 January 2011] [03:11:25] &lt;neopallium&gt;     0mq sockets are edge-triggered, that means you need to read from them until they will block (i.e. you get EAGAIN)</div>
<div class="line">[Tuesday 04 January 2011] [03:11:33] &lt;jugg&gt;   yes</div>
<div class="line">[Tuesday 04 January 2011] [03:12:57] &lt;neopallium&gt;     when your driver call getsockopt(ZMQ_EVENTS) and it says there is a message to read, then you need to mark the socket as readable, until you read a full message.</div>
<div class="line">[Tuesday 04 January 2011] [03:13:48] &lt;neopallium&gt;     once you read a full message call ZMQ_EVENTS again to check if there is another message to read, if it reports &#8220;no messages&#8221;, then you wait for a read event from the vm.</div>
<div class="line">[Tuesday 04 January 2011] [03:14:32] &lt;neopallium&gt;     I think there was an example in the guide that use ZMQ_EVENTS like that.</div>
<div class="line">[Tuesday 04 January 2011] [03:14:54] &lt;sustrik&gt;        yes, more or less</div>
<div class="line">[Tuesday 04 January 2011] [03:15:06] &lt;sustrik&gt;        but you don&#8217;t have to store the &#8220;readable&#8221; flag yourself</div>
<div class="line">[Tuesday 04 January 2011] [03:15:30] &lt;sustrik&gt;        you can retrieve it from 0mq by calling getsockop(ZMQ_EVENTS) actually</div>
<div class="line">[Tuesday 04 January 2011] [03:15:33] &lt;jugg&gt;   yes, I think the key is to implement a poll method which checks ZMQ_EVENTS prior to passing the fd to the erlang vm, and only do so if nothing is pending.</div>
<div class="line">[Tuesday 04 January 2011] [03:15:52] &lt;sustrik&gt;        yes</div>
<div class="line">[Tuesday 04 January 2011] [03:17:53] &lt;neopallium&gt;     jugg: is this driver pushing messages out to the controlling erlang process?  or does the erlang process block in a recv() type function for each message?</div>
<div class="line">[Tuesday 04 January 2011] [03:22:17] &lt;jugg&gt;   the driver returns messages only if the erlang process requests it via recv().   Of course, driver does not block in the recv() call, as that&#8217;d freeze the vm.  It later pushes the incoming message when it comes available - thus the driver must use the fd to be notified of such an event.  A gen_server is used to ensure further requests to the driver is not made, and the calling erlang process is blocked in the gen_server call until the driver eventually</div>
<div class="line">[Tuesday 04 January 2011] [03:22:56] &lt;jugg&gt;   of course the erlang process can call a non blocking recv as well.</div>
<div class="line">[Tuesday 04 January 2011] [03:23:25] &lt;jugg&gt;   (the old erlzmq did not support that last)</div>
<div class="line">[Tuesday 04 January 2011] [03:27:15] &lt;jugg&gt;   sustrik, does one only use the socketpair fd with POLLIN?  even if waiting for the zmq socket to become writeable?</div>
<div class="line">[Tuesday 04 January 2011] [03:28:10] &lt;neopallium&gt;     jugg: so the erlang sends the port a {call, recv} type message telling it to call zmq_recv() and send back a part of the message.</div>
<div class="line">[Tuesday 04 January 2011] [03:28:18] &lt;sustrik&gt;        jugg: yes</div>
<div class="line">[Tuesday 04 January 2011] [03:28:25] &lt;sustrik&gt;        POLLOUT makes no sense</div>
<div class="line">[Tuesday 04 January 2011] [03:28:31] &lt;jugg&gt;   sustrik, ok</div>
<div class="line">[Tuesday 04 January 2011] [03:29:55] &lt;jugg&gt;   neopallium, the driver will always call zmq_recv with NOBLOCK.  But if the erlang requests did not specify NOBLOCK, and zmq_recv returns EAGAIN, then the driver calls driver_select on the socket fd, and waits for an event, at which point it reads from the socket and returns the received message part to the erlang process.</div>
<div class="line">[Tuesday 04 January 2011] [03:29:56] &lt;neopallium&gt;     sustrik: so if the 0mq socket blocks on zmq_send(), do you have to wait for a POLLIN from the socketpair and the check with ZMQ_EVENTS if the socket is writable?</div>
<div class="line">[Tuesday 04 January 2011] [03:30:14] &lt;sustrik&gt;        yes</div>
<div class="line">[Tuesday 04 January 2011] [03:30:35] &lt;sustrik&gt;        the underlying socketpair is actually used for uni-directional transfer of commands</div>
<div class="line">[Tuesday 04 January 2011] [03:30:42] &lt;neopallium&gt;     ok, I need to fix my Lua async handler for 0mq sockets.</div>
<div class="line">[Tuesday 04 January 2011] [03:30:43] &lt;sustrik&gt;        so POLLOUT is always signaled</div>
<div class="line">[Tuesday 04 January 2011] [03:31:18] &lt;sustrik&gt;        i think it&#8217;s mentioned in the reference</div>
<div class="line">[Tuesday 04 January 2011] [03:31:20] &lt;sustrik&gt;        let me check</div>
<div class="line">[Tuesday 04 January 2011] [03:31:24] &lt;jugg&gt;   sustrik, the docs could be clarified on that regards... It kind of says so, but it was unclear.</div>
<div class="line">[Tuesday 04 January 2011] [03:31:28] &lt;neopallium&gt;     yeah, I am basically doing a POLLOUT on the socketpair when zmq_send() returns EAGAIN.</div>
<div class="line">[Tuesday 04 January 2011] [03:32:07] &lt;neopallium&gt;     it is hard to test blocking on zmq_send()</div>
<div class="line">[Tuesday 04 January 2011] [03:32:17] &lt;jugg&gt;   indeed :/</div>
<div class="line">[Tuesday 04 January 2011] [03:32:42] &lt;sustrik&gt;        &#8220;0MQ library shall signal any pending events on the socket in an edge-triggered fashion by making the file descriptor become ready for reading&#8221;</div>
<div class="line">[Tuesday 04 January 2011] [03:33:00] &lt;sustrik&gt;        how would you reprharse that?</div>
<div class="line">[Tuesday 04 January 2011] [03:33:47] &lt;neopallium&gt;     .... signal any pending events from getsockopt(ZMQ_EVENTS...) when the FD is readable?</div>
<div class="line">[Tuesday 04 January 2011] [03:34:13] &lt;sustrik&gt;        i don&#8217;t understand that :)</div>
<div class="line">[Tuesday 04 January 2011] [03:34:17] &lt;sustrik&gt;        maybe 2 sentences?</div>
<div class="line">[Tuesday 04 January 2011] [03:34:51] &lt;neopallium&gt;     it needs to say something about calling getsockopt(ZMQ_EVENTS...) for the ready events.</div>
<div class="line">[Tuesday 04 January 2011] [03:35:28] &lt;sustrik&gt;        &#8220;The ability to read from the returned file descriptor does not necessarily indicate that messages are available to be read from, or can be written to, the underlying socket; applications</div>
<div class="line">[Tuesday 04 January 2011] [03:35:29] &lt;sustrik&gt;                   must retrieve the actual event state with a subsequent retrieval of the ZMQ_EVENTS option.&#8221;</div>
<div class="line">[Tuesday 04 January 2011] [03:35:43] &lt;sustrik&gt;        see zmq_getsockopt(3)</div>
<div class="line">[Tuesday 04 January 2011] [03:36:42] &lt;neopallium&gt;     how about something like: &#8220;0MQ library shall signal any pending events by making the FD readable, getsockopt(ZMQ_EVENTS...) returns which events are pending.&#8221;</div>
<div class="line">[Tuesday 04 January 2011] [03:37:09] &lt;sustrik&gt;        that&#8217;s better</div>
<div class="line">[Tuesday 04 January 2011] [03:37:26] &lt;neopallium&gt;     yeah, but not perfect</div>
<div class="line">[Tuesday 04 January 2011] [03:37:28] &lt;sustrik&gt;        but kind of duplicates what the note above says</div>
<div class="line">[Tuesday 04 January 2011] [03:38:42] &lt;sustrik&gt;        have a look at whole ZMQ_FD section and feel free to propose a better wording</div>
<div class="line">[Tuesday 04 January 2011] [03:40:28] &lt;neopallium&gt;     hmm, yeah I guess the original dues say that in the Note</div>
<div class="line">[Tuesday 04 January 2011] [03:41:49] &lt;neopallium&gt;     maybe just add a note that checking for POLLOUT on the FD is use-less for finding out if it is writable?</div>
<div class="line">[Tuesday 04 January 2011] [03:42:27] &lt;jugg&gt;   is it the case to mark the socketpair FD read, one must call getsockopt(ZMQ_EVENTS), else subsequent calls to poll will always return immediately?</div>
<div class="line">[Tuesday 04 January 2011] [03:44:51] &lt;neopallium&gt;     jugg: if you get a POLLIN event from poll() you will need to call getsockopt(ZMQ_EVENTS) to clear that event, or you will just keep getting the POLLIN.</div>
<div class="line">[Tuesday 04 January 2011] [03:46:38] &lt;neopallium&gt;     I think from a simple event loop it would be best to call getsockopt(ZMQ_EVENTS) on each POLLIN event and then dispatch the real POLLIN/POLLOUT events as returned from getsockopt(ZMQ_EVENTS).</div>
<div class="line">[Tuesday 04 January 2011] [03:47:10] &lt;neopallium&gt;     that is what I am going to try with my async. handlers.</div>
<div class="line">[Tuesday 04 January 2011] [03:49:50] &lt;sustrik&gt;        jugg: the event is cleared also when you call non-blocking recv() which returns with EAGAIN</div>
<div class="line">[Tuesday 04 January 2011] [04:26:50] &lt;mikko&gt;  good morning</div>
<div class="line">[Tuesday 04 January 2011] [04:53:03] &lt;sustrik&gt;        morning</div>
<div class="line">[Tuesday 04 January 2011] [04:57:17] &lt;mikko&gt;  hmm, [zeromq-dev] Segfault</div>
<div class="line">[Tuesday 04 January 2011] [04:57:26] &lt;mikko&gt;  looks like to be related to the HWM bug we discussed ages ago</div>
<div class="line">[Tuesday 04 January 2011] [04:58:05] &lt;sustrik&gt;        mikko: the one you&#8217;ve gave me the test case for?</div>
<div class="line">[Tuesday 04 January 2011] [04:58:24] &lt;mikko&gt;  sustrik: i think so</div>
<div class="line">[Tuesday 04 January 2011] [04:58:30] &lt;sustrik&gt;        i&#8217;ve looked into that but the problem was not obvious</div>
<div class="line">[Tuesday 04 January 2011] [04:58:47] &lt;sustrik&gt;        i&#8217;ll have to look at it further</div>
<div class="line">[Tuesday 04 January 2011] [04:58:59] &lt;mikko&gt;  man, year after year it&#8217;s harder to come back to work after holidays</div>
<div class="line">[Tuesday 04 January 2011] [04:59:27] &lt;sustrik&gt;        same here :)</div>
<div class="line">[Tuesday 04 January 2011] [05:15:22] &lt;neopallium&gt;     I hit this assertion in zeromq: Assertion failed: <a href="#id67"><span class="problematic" id="id68">msg_</span></a>-&gt;flags &amp; ZMQ_MSG_MORE (rep.cpp:80)</div>
<div class="line">[Tuesday 04 January 2011] [05:15:53] &lt;neopallium&gt;     that is from a REP socket with a XREQ client.</div>
<div class="line">[Tuesday 04 January 2011] [05:16:27] &lt;neopallium&gt;     is it bad to connect a XREQ socket to a REP socket?</div>
<div class="line">[Tuesday 04 January 2011] [05:18:37] &lt;neopallium&gt;     hmm, looks like XREQ -&gt; REP is a supported setup.</div>
<div class="line">[Tuesday 04 January 2011] [05:23:25] &lt;jugg&gt;   I believe REP socket expects at least two message parts, but three is needed.  &lt;msg id&gt; &lt;empty msg&gt; &lt;msg body&gt;.  Both &lt;msg id&gt; and &lt;empty msg&gt; should be sent with SNDMORE flag set.</div>
<div class="line">[Tuesday 04 January 2011] [05:26:55] &lt;jugg&gt;   basically, your application code on the xreq side passes in &lt;msg body&gt; (in one or more parts).  The xreq wrapper layer must then provide an identifier for that &lt;msg body&gt; and send that along to the rep socket, along with an empty message so that the rep socket and delineate between id parts and body parts.  When the rep socket responds, your xrep wrapper layer pulls off the msg id part and looks up who to route the body part to.</div>
<div class="line">[Tuesday 04 January 2011] [05:28:28] &lt;jugg&gt;   &#8221;...so that the rep socket can delineate..&#8221;</div>
<div class="line">[Tuesday 04 January 2011] [05:29:20] &lt;neopallium&gt;     jugg: yup, REQ/REP sockets hid the &#8220;address&#8221; part of the message, XREQ/XREP expose the &#8220;address&#8221; part.</div>
<div class="line">[Tuesday 04 January 2011] [05:30:00] &lt;neopallium&gt;     I am trying a manual example with the plain lua-zmq bindings to make sure it is not just my use of zmq that is cause it.</div>
<div class="line">[Tuesday 04 January 2011] [05:30:15] &lt;jugg&gt;   so, you were already sending along the message id and blank msg?</div>
<div class="line">[Tuesday 04 January 2011] [05:30:37] &lt;jugg&gt;   with SNDMORE set?</div>
<div class="line">[Tuesday 04 January 2011] [05:31:39] &lt;neopallium&gt;     testing that right now, making a minimal example.</div>
<div class="line">[Tuesday 04 January 2011] [05:41:29] &lt;neopallium&gt;     jugg: <a class="reference external" href="https://gist.github.com/764629">https://gist.github.com/764629</a></div>
<div class="line">[Tuesday 04 January 2011] [05:42:33] &lt;neopallium&gt;     also sometime I got a crash on the XREQ side.</div>
<div class="line">[Tuesday 04 January 2011] [05:42:49] &lt;neopallium&gt;     but not an assertion, just a core dump.</div>
<div class="line">[Tuesday 04 January 2011] [05:43:23] &lt;jugg&gt;   I believe the delim needs to be empty, zero bytes.  You are sending a single byte.</div>
<div class="line">[Tuesday 04 January 2011] [05:43:46] &lt;jugg&gt;   try: s:send(&#8220;&#8221;, zmq.SNDMORE)</div>
<div class="line">[Tuesday 04 January 2011] [05:44:13] &lt;neopallium&gt;     ah, yeah, I just tried that and it worked</div>
<div class="line">[Tuesday 04 January 2011] [05:44:18] &lt;jugg&gt;   cool</div>
<div class="line">[Tuesday 04 January 2011] [05:44:41] &lt;neopallium&gt;     I don&#8217;t know where I read to send &#8220;0&#8221; as the delim. part</div>
<div class="line">[Tuesday 04 January 2011] [06:05:25] &lt;orestis&gt;        Hello, I&#8217;m wondering how 0mq fits in with a GUI event loop - is it safe to make 0mq requests from the GUI thread?</div>
<div class="line">[Tuesday 04 January 2011] [06:05:48] &lt;mikko&gt;  orestis: you mean whether it would block?</div>
<div class="line">[Tuesday 04 January 2011] [06:06:39] &lt;mikko&gt;  orestis: can you integrate external filehandle polling to your gui event loop?</div>
<div class="line">[Tuesday 04 January 2011] [06:06:59] &lt;mikko&gt;  you can get ZMQ_FD from the socket and use that event loop</div>
<div class="line">[Tuesday 04 January 2011] [06:07:08] &lt;mikko&gt;  then in the callback check for ZMQ_EVENTS</div>
<div class="line">[Tuesday 04 January 2011] [06:29:35] &lt;orestis&gt;        Thanks. That looks a bit too cutting-edge for my taste. I guess my original question was, are the 0mq send/receive calls async? I&#8217;m a bit confused because there are mentions of background threads.</div>
<div class="line">[Tuesday 04 January 2011] [06:33:19] &lt;mikko&gt;  orestis: send/recv is async yes but there is a possiblity that the calls block</div>
<div class="line">[Tuesday 04 January 2011] [06:33:27] &lt;mikko&gt;  unless ZMQ_NOBLOCK is used</div>
<div class="line">[Tuesday 04 January 2011] [06:37:16] &lt;orestis&gt;        Thanks. In general, is 0mq a bit more low-level for doing async I/O from something like Twisted (that gives you Deferreds, Callbacks etc)?</div>
<div class="line">[Tuesday 04 January 2011] [06:38:16] &lt;mikko&gt;  orestis: i guess that is true. then again as far as i understand twisted is more general purpose ae framework where as 0mq is messaging stack</div>
<div class="line">[Tuesday 04 January 2011] [06:41:02] &lt;orestis&gt;        yes, apparently. I mainly wanted to use 0mq to split a monolithic gui app that does heavy I/O into separate processes. I definitely want to use Twisted for Deferreds and Callbacks (and Twisted plays well with GUIs) so I was wondering how to bring everything together.</div>
<div class="line">[Tuesday 04 January 2011] [06:42:25] &lt;mikko&gt;  orestis: you should be able to integrate 0mq into twisted</div>
<div class="line">[Tuesday 04 January 2011] [06:42:33] &lt;mikko&gt;  using the methods i mentioned earlier</div>
<div class="line">[Tuesday 04 January 2011] [06:44:05] &lt;orestis&gt;        mikko: they&#8217;re not in the stable version though, are they?</div>
<div class="line">[Tuesday 04 January 2011] [06:45:05] &lt;mikko&gt;  orestis: if you mean 2.0.x then no</div>
<div class="line">[Tuesday 04 January 2011] [06:45:11] &lt;mikko&gt;  but 2.1.x seems fairly stable</div>
<div class="line">[Tuesday 04 January 2011] [06:45:19] &lt;mikko&gt;  i use github trunk in all my developments</div>
<div class="line">[Tuesday 04 January 2011] [07:14:53] &lt;orestis&gt;        mikko: thanks for your input. I&#8217;ll see what I can come up with.</div>
<div class="line">[Tuesday 04 January 2011] [07:21:39] &lt;jugg&gt;   The documentation for ZMQ_IDENTITY is not clear to me.  I assume that the zmq context has to be maintained in order for a socket&#8217;s identity to be re-usable?  But terminating the zmq context will lose the identity persistence?</div>
<div class="line">[Tuesday 04 January 2011] [10:55:17] &lt;Seta00&gt; how do I build 0MQ with MinGW?</div>
<div class="line">[Tuesday 04 January 2011] [10:55:36] &lt;mikko&gt;  Seta00: configure &amp;&amp; make &amp;&amp; make install i guess</div>
<div class="line">[Tuesday 04 January 2011] [10:55:51] &lt;mikko&gt;  Seta00: i got mingw build running on linux machine</div>
<div class="line">[Tuesday 04 January 2011] [10:55:52]   * Seta00 installs MSYS</div>
<div class="line">[Tuesday 04 January 2011] [10:55:54] &lt;Seta00&gt; :P</div>
<div class="line">[Tuesday 04 January 2011] [10:56:05] &lt;mikko&gt;  haven&#8217;t tried on windows in a while</div>
<div class="line">[Tuesday 04 January 2011] [10:56:32] &lt;mikko&gt;  i got mingw32 on linux and VS2008 on windows in daily builds</div>
<div class="line">[Tuesday 04 January 2011] [10:56:43] &lt;mikko&gt;  maybe mingw32 on windows would be a good addition</div>
<div class="line">[Tuesday 04 January 2011] [10:57:26] &lt;Seta00&gt; definitely :)</div>
<div class="line">[Tuesday 04 January 2011] [11:00:21] &lt;Seta00&gt; working with various libraries can get messed up really fast</div>
<div class="line">[Tuesday 04 January 2011] [11:12:05] &lt;Seta00&gt; msg_store.cpp:279: error: ISO C++ does not support <a href="#id7"><span class="problematic" id="id8">`</span></a>long long&#8217;</div>
<div class="line">[Tuesday 04 January 2011] [11:12:10] &lt;Seta00&gt; why aren&#8217;t things easier? hehe</div>
<div class="line">[Tuesday 04 January 2011] [11:13:17] &lt;sustrik&gt;        Set00: is that 2.0.10?</div>
<div class="line">[Tuesday 04 January 2011] [11:13:39] &lt;Seta00&gt; sustrik, yes</div>
<div class="line">[Tuesday 04 January 2011] [11:13:52] &lt;sustrik&gt;        i recall the long long issue was being solved</div>
<div class="line">[Tuesday 04 January 2011] [11:13:59] &lt;sustrik&gt;        maybe it&#8217;s fixed in 2.1</div>
<div class="line">[Tuesday 04 January 2011] [11:14:08] &lt;sustrik&gt;        mikko: don&#8217;t you remember by chance?</div>
<div class="line">[Tuesday 04 January 2011] [11:14:46] &lt;Seta00&gt; I&#8217;ll try</div>
<div class="line">[Tuesday 04 January 2011] [11:26:16] &lt;Seta00&gt; 2.1.0 gives me &#8221;.../mingw/lib/dllcrt2.o: No such file or directory&#8221; when linking</div>
<div class="line">[Tuesday 04 January 2011] [11:27:32] &lt;sustrik&gt;        :|</div>
<div class="line">[Tuesday 04 January 2011] [11:28:53] &lt;sustrik&gt;        no idea what that is</div>
<div class="line">[Tuesday 04 January 2011] [11:28:57] &lt;sustrik&gt;        as for the long long problem</div>
<div class="line">[Tuesday 04 January 2011] [11:29:31] &lt;sustrik&gt;        iirc the problem is that long long is not part of C++ standard, yet it it used in Win32 signatures</div>
<div class="line">[Tuesday 04 January 2011] [11:29:37] &lt;sustrik&gt;        Win32 API</div>
<div class="line">[Tuesday 04 January 2011] [11:30:09] &lt;Skaag&gt;  I wonder if anyone else is using google protocol buffers to send messages over zmq</div>
<div class="line">[Tuesday 04 January 2011] [11:31:14] &lt;Seta00&gt; I&#8217;m trying with uint64_t</div>
<div class="line">[Tuesday 04 January 2011] [11:33:42] &lt;Seta00&gt; doesn&#8217;t work</div>
<div class="line">[Tuesday 04 January 2011] [11:34:03] &lt;Seta00&gt; how can I remove -Werror?</div>
<div class="line">[Tuesday 04 January 2011] [11:34:16] &lt;Seta00&gt; other than manually editing the makefile?</div>
<div class="line">[Tuesday 04 January 2011] [11:35:32] &lt;Seta00&gt; long works fine, but msys doesn`t find that DLL</div>
<div class="line">[Tuesday 04 January 2011] [11:40:26] &lt;sustrik&gt;        no idea, try checking configure.in</div>
<div class="line">[Tuesday 04 January 2011] [11:41:28] &lt;Seta00&gt; forgot to configure fstab</div>
<div class="line">[Tuesday 04 January 2011] [11:42:39] &lt;mikko&gt;  sustrik: yes</div>
<div class="line">[Tuesday 04 January 2011] [11:42:48] &lt;mikko&gt;  ah, it was answered</div>
<div class="line">[Tuesday 04 January 2011] [11:42:58] &lt;mikko&gt;  long long problem is with 2.0.x</div>
<div class="line">[Tuesday 04 January 2011] [11:43:02] &lt;mikko&gt;  it&#8217;s fixed in 2.1.0</div>
<div class="line">[Tuesday 04 January 2011] [11:43:48] &lt;sustrik&gt;        thx</div>
<div class="line">[Tuesday 04 January 2011] [11:46:20] &lt;mikko&gt;  Skaag: there has been a couple of mentions about that</div>
<div class="line">[Tuesday 04 January 2011] [11:46:31] &lt;mikko&gt;  Seta00: i can test mingw32 build when i get home</div>
<div class="line">[Tuesday 04 January 2011] [11:47:00] &lt;Seta00&gt; mikko, it worked after I configured my fstab on MSYS</div>
<div class="line">[Tuesday 04 January 2011] [11:47:15] &lt;Seta00&gt; thanks sustrik and mikko</div>
<div class="line">[Tuesday 04 January 2011] [11:47:37] &lt;sustrik&gt;        you are welcome</div>
<div class="line">[Tuesday 04 January 2011] [11:47:49] &lt;Seta00&gt; now I need qmake to link to it :P</div>
<div class="line">[Tuesday 04 January 2011] [11:48:04] &lt;Seta00&gt; which shall be solved in #qt</div>
<div class="line">[Tuesday 04 January 2011] [11:48:05] &lt;Seta00&gt; :)</div>
<div class="line">[Tuesday 04 January 2011] [11:48:28] &lt;mikko&gt;  i remember someone doing this before</div>
<div class="line">[Tuesday 04 January 2011] [11:48:31] &lt;mikko&gt;  with qt toolchain</div>
<div class="line">[Tuesday 04 January 2011] [11:48:39] &lt;mikko&gt;  that sparked the whole fixing of mingw32 builds</div>
<div class="line">[Tuesday 04 January 2011] [12:28:58] &lt;s0undt3ch&gt;      with pyzmq, on a publisher subscriber model, I&#8217;m setting the publisher&#8217;s identity, how can a subscriber retrieve that identity</div>
<div class="line">[Tuesday 04 January 2011] [12:28:59] &lt;s0undt3ch&gt;      ?</div>
<div class="line">[Tuesday 04 January 2011] [12:31:53] &lt;sustrik&gt;        it can&#8217;t</div>
<div class="line">[Tuesday 04 January 2011] [12:33:16] &lt;s0undt3ch&gt;      hmmm</div>
<div class="line">[Tuesday 04 January 2011] [12:33:25] &lt;s0undt3ch&gt;      I need to pass that on the message then</div>
<div class="line">[Tuesday 04 January 2011] [12:34:26] &lt;sustrik&gt;        yes, the identity is only internel per-hop mechanism</div>
<div class="line">[Tuesday 04 January 2011] [12:34:42] &lt;sustrik&gt;        it&#8217;s not passed all the way down from publisher to subscriber</div>
<div class="line">[Tuesday 04 January 2011] [12:39:56] &lt;s0undt3ch&gt;      sustrik: same for req/rep right?</div>
<div class="line">[Tuesday 04 January 2011] [12:41:11] &lt;Seta00&gt; s0undt3ch, are you on windows?</div>
<div class="line">[Tuesday 04 January 2011] [12:44:59] &lt;sustrik&gt;        same for all patterns</div>
<div class="line">[Tuesday 04 January 2011] [12:45:31] &lt;sustrik&gt;        req/rep is special in that identities are stuck to the request as it passes individual nodes</div>
<div class="line">[Tuesday 04 January 2011] [12:46:03] &lt;sustrik&gt;        but there&#8217;s still no special mechanism to inspect peers&#8217; identities</div>
<div class="line">[Tuesday 04 January 2011] [12:48:35] &lt;s0undt3ch&gt;      Seta00: nope</div>
<div class="line">[Tuesday 04 January 2011] [12:49:01] &lt;Seta00&gt; just checking if someone has a pyzmq build for Windows</div>
<div class="line">[Tuesday 04 January 2011] [13:54:20] &lt;<a href="#id69"><span class="problematic" id="id70">Joes_</span></a>&gt;  Hello. It is very tempting for me to use ZeroMQ, but I&#8217;m trying to figure out how architecture would look like. So, we have chat server (a-la IRC) with chat rooms.</div>
<div class="line">[Tuesday 04 January 2011] [13:54:40] &lt;<a href="#id71"><span class="problematic" id="id72">Joes_</span></a>&gt;  Users can join multiple rooms and I need to route messages between users in same room.</div>
<div class="line">[Tuesday 04 January 2011] [13:54:53] &lt;<a href="#id73"><span class="problematic" id="id74">Joes_</span></a>&gt;  As far as I understood tutorials, I need 2 connections</div>
<div class="line">[Tuesday 04 January 2011] [13:55:06] &lt;<a href="#id75"><span class="problematic" id="id76">Joes_</span></a>&gt;  one pubsub to send room events back to users</div>
<div class="line">[Tuesday 04 January 2011] [13:55:16] &lt;<a href="#id77"><span class="problematic" id="id78">Joes_</span></a>&gt;  and one pubsub to send events from users to rooms?</div>
<div class="line">[Tuesday 04 January 2011] [13:55:30] &lt;<a href="#id79"><span class="problematic" id="id80">Joes_</span></a>&gt;  can it be done with only one connection?</div>
<div class="line">[Tuesday 04 January 2011] [13:55:38] &lt;<a href="#id81"><span class="problematic" id="id82">Joes_</span></a>&gt;  (or socket)</div>
<div class="line">[Tuesday 04 January 2011] [14:16:49] &lt;mikko&gt;  <a href="#id83"><span class="problematic" id="id84">Joes_</span></a>: you would need two</div>
<div class="line">[Tuesday 04 January 2011] [14:17:34] &lt;<a href="#id85"><span class="problematic" id="id86">Joes_</span></a>&gt;  in terms of low level communication with tcp transport - two tcp ports on the server will be used</div>
<div class="line">[Tuesday 04 January 2011] [14:17:36] &lt;<a href="#id87"><span class="problematic" id="id88">Joes_</span></a>&gt;  correct?</div>
<div class="line">[Tuesday 04 January 2011] [14:17:44] &lt;<a href="#id89"><span class="problematic" id="id90">Joes_</span></a>&gt;  (firewall setup, etc)</div>
<div class="line">[Tuesday 04 January 2011] [14:18:04] &lt;mikko&gt;  <a href="#id91"><span class="problematic" id="id92">Joes_</span></a>: assuming you bind the two sockets then yet</div>
<div class="line">[Tuesday 04 January 2011] [14:18:07] &lt;mikko&gt;  yes*</div>
<div class="line">[Tuesday 04 January 2011] [14:18:10] &lt;<a href="#id93"><span class="problematic" id="id94">Joes_</span></a>&gt;  ok</div>
<div class="line">[Tuesday 04 January 2011] [14:18:19] &lt;<a href="#id95"><span class="problematic" id="id96">Joes_</span></a>&gt;  and second question - any bindings for Javascript?</div>
<div class="line">[Tuesday 04 January 2011] [14:18:31] &lt;mikko&gt;  i think someone was working for node.js bindings</div>
<div class="line">[Tuesday 04 January 2011] [14:18:34] &lt;<a href="#id97"><span class="problematic" id="id98">Joes_</span></a>&gt;  using WebSockets/socketjs/etc</div>
<div class="line">[Tuesday 04 January 2011] [14:18:42] &lt;<a href="#id99"><span class="problematic" id="id100">Joes_</span></a>&gt;  saw them</div>
<div class="line">[Tuesday 04 January 2011] [14:18:52] &lt;<a href="#id101"><span class="problematic" id="id102">Joes_</span></a>&gt;  includes native C code</div>
<div class="line">[Tuesday 04 January 2011] [14:19:02] &lt;<a href="#id103"><span class="problematic" id="id104">Joes_</span></a>&gt;  is wire protocol documented?</div>
<div class="line">[Tuesday 04 January 2011] [14:19:08] &lt;mikko&gt;  yes, i think it is</div>
<div class="line">[Tuesday 04 January 2011] [14:19:19] &lt;mikko&gt;  gimme a sec</div>
<div class="line">[Tuesday 04 January 2011] [14:20:39] &lt;mikko&gt;  here is the message format <a class="reference external" href="http://rfc.zeromq.org/spec:2">http://rfc.zeromq.org/spec:2</a></div>
<div class="line">[Tuesday 04 January 2011] [14:20:54] &lt;<a href="#id105"><span class="problematic" id="id106">Joes_</span></a>&gt;  thanks</div>
<div class="line">[Tuesday 04 January 2011] [14:20:57] &lt;mikko&gt;  let me see if the rest is documented</div>
<div class="line">[Tuesday 04 January 2011] [14:21:02] &lt;<a href="#id107"><span class="problematic" id="id108">Joes_</span></a>&gt;  going to see how long it will take to write dumb client in JS</div>
<div class="line">[Tuesday 04 January 2011] [14:21:25] &lt;<a href="#id109"><span class="problematic" id="id110">Joes_</span></a>&gt;  there&#8217;s one for AMQP, but nothing for ZeroMQ</div>
<div class="line">[Tuesday 04 January 2011] [14:21:33] &lt;<a href="#id111"><span class="problematic" id="id112">Joes_</span></a>&gt;  and I don&#8217;t need 95% of AMQP features...</div>
<div class="line">[Tuesday 04 January 2011] [14:22:38] &lt;mikko&gt;  are you going to do communications from browser straight to 0mq?</div>
<div class="line">[Tuesday 04 January 2011] [14:22:46] &lt;<a href="#id113"><span class="problematic" id="id114">Joes_</span></a>&gt;  well, that would be ideal</div>
<div class="line">[Tuesday 04 January 2011] [14:22:55] &lt;mikko&gt;  i don&#8217;t think that&#8217;s going to work</div>
<div class="line">[Tuesday 04 January 2011] [14:23:00] &lt;mikko&gt;  at least with websockets</div>
<div class="line">[Tuesday 04 January 2011] [14:23:12] &lt;mikko&gt;  as websockets have their own framing as well</div>
<div class="line">[Tuesday 04 January 2011] [14:23:25] &lt;<a href="#id115"><span class="problematic" id="id116">Joes_</span></a>&gt;  instead of making own wire protocol</div>
<div class="line">[Tuesday 04 January 2011] [14:23:40] &lt;<a href="#id117"><span class="problematic" id="id118">Joes_</span></a>&gt;  hm</div>
<div class="line">[Tuesday 04 January 2011] [14:23:43] &lt;mikko&gt;  have you looked into mongrel2?</div>
<div class="line">[Tuesday 04 January 2011] [14:24:04] &lt;<a href="#id119"><span class="problematic" id="id120">Joes_</span></a>&gt;  I did</div>
<div class="line">[Tuesday 04 January 2011] [14:24:14] &lt;<a href="#id121"><span class="problematic" id="id122">Joes_</span></a>&gt;  however, I can&#8217;t find any benchmarks</div>
<div class="line">[Tuesday 04 January 2011] [14:24:20] &lt;<a href="#id123"><span class="problematic" id="id124">Joes_</span></a>&gt;  or who&#8217;s using it in production</div>
<div class="line">[Tuesday 04 January 2011] [14:24:38] &lt;mikko&gt;  it&#8217;s very new tech, i would be surprised if there are large installations yet</div>
<div class="line">[Tuesday 04 January 2011] [14:25:03] &lt;mikko&gt;  and i tend to find benchmarks mainly useless as there are a lot of people who don&#8217;t know how to benchmark the software</div>
<div class="line">[Tuesday 04 January 2011] [14:25:08] &lt;mikko&gt;  or optimize it for benchmarking</div>
<div class="line">[Tuesday 04 January 2011] [14:25:27] &lt;<a href="#id125"><span class="problematic" id="id126">Joes_</span></a>&gt;  well, at least some rough numbers would help</div>
<div class="line">[Tuesday 04 January 2011] [14:25:34] &lt;<a href="#id127"><span class="problematic" id="id128">Joes_</span></a>&gt;  like faster than X Y times</div>
<div class="line">[Tuesday 04 January 2011] [14:27:12] &lt;mikko&gt;  but very often i find they are comparing apples to oranges</div>
<div class="line">[Tuesday 04 January 2011] [14:27:35] &lt;mikko&gt;  one tool with highly optimized config against incorrect config of other</div>
<div class="line">[Tuesday 04 January 2011] [14:27:49] &lt;<a href="#id129"><span class="problematic" id="id130">Joes_</span></a>&gt;  I see.</div>
<div class="line">[Tuesday 04 January 2011] [14:28:17] &lt;mikko&gt;  it&#8217;s very hard to create good benchmarks</div>
<div class="line">[Tuesday 04 January 2011] [14:32:13] &lt;mikko&gt;  but communicating from browser you most likely need some sort of middle piece</div>
<div class="line">[Tuesday 04 January 2011] [14:32:36] &lt;mikko&gt;  probably doesn&#8217;t need to be complicated but something that converts websocket messages to 0mq messages</div>
<div class="line">[Tuesday 04 January 2011] [14:32:40] &lt;<a href="#id131"><span class="problematic" id="id132">Joes_</span></a>&gt;  Let&#8217;s assume I have middlepiece - some kind of broker between browser and 0MQ</div>
<div class="line">[Tuesday 04 January 2011] [14:32:45] &lt;<a href="#id133"><span class="problematic" id="id134">Joes_</span></a>&gt;  (thought about it)</div>
<div class="line">[Tuesday 04 January 2011] [14:32:49] &lt;<a href="#id135"><span class="problematic" id="id136">Joes_</span></a>&gt;  with some simple wire protocol</div>
<div class="line">[Tuesday 04 January 2011] [14:32:56] &lt;sustrik&gt;        i think that&#8217;s mostly what mongrel2 does</div>
<div class="line">[Tuesday 04 January 2011] [14:33:01] &lt;<a href="#id137"><span class="problematic" id="id138">Joes_</span></a>&gt;  but I have following issues:</div>
<div class="line">[Tuesday 04 January 2011] [14:33:12] &lt;<a href="#id139"><span class="problematic" id="id140">Joes_</span></a>&gt;  1. Who will guarantee delivery, if client drops connection</div>
<div class="line">[Tuesday 04 January 2011] [14:33:26] &lt;<a href="#id141"><span class="problematic" id="id142">Joes_</span></a>&gt;  (I will need to queue up messages for this client till his next connection)</div>
<div class="line">[Tuesday 04 January 2011] [14:33:53] &lt;<a href="#id143"><span class="problematic" id="id144">Joes_</span></a>&gt;  well, there some other issues, but I don&#8217;t remember them all :-)</div>
<div class="line">[Tuesday 04 January 2011] [14:33:57] &lt;mikko&gt;  if client drops connection do you want to queue messages?</div>
<div class="line">[Tuesday 04 January 2011] [14:34:08] &lt;mikko&gt;  for how long time after client leaves?</div>
<div class="line">[Tuesday 04 January 2011] [14:34:19] &lt;<a href="#id145"><span class="problematic" id="id146">Joes_</span></a>&gt;  I don&#8217;t know if client dropped or temporary lost connection to the server and will reconnect shortly</div>
<div class="line">[Tuesday 04 January 2011] [14:34:30] &lt;sustrik&gt;        can be done using ZMQ_IDENTITY</div>
<div class="line">[Tuesday 04 January 2011] [14:34:39] &lt;<a href="#id147"><span class="problematic" id="id148">Joes_</span></a>&gt;  em</div>
<div class="line">[Tuesday 04 January 2011] [14:34:51] &lt;<a href="#id149"><span class="problematic" id="id150">Joes_</span></a>&gt;  let&#8217;s say I&#8217;m am the server which handles requests from browsers.</div>
<div class="line">[Tuesday 04 January 2011] [14:34:59] &lt;<a href="#id151"><span class="problematic" id="id152">Joes_</span></a>&gt;  I accepted raw TCP connection (or websocket connection)</div>
<div class="line">[Tuesday 04 January 2011] [14:35:16] &lt;<a href="#id153"><span class="problematic" id="id154">Joes_</span></a>&gt;  so, for this connection, I will create 0MQ socket (or two, but it does not matter now)</div>
<div class="line">[Tuesday 04 January 2011] [14:35:24] &lt;<a href="#id155"><span class="problematic" id="id156">Joes_</span></a>&gt;  and will connect to the chat server</div>
<div class="line">[Tuesday 04 January 2011] [14:35:31] &lt;sustrik&gt;        right</div>
<div class="line">[Tuesday 04 January 2011] [14:35:41] &lt;<a href="#id157"><span class="problematic" id="id158">Joes_</span></a>&gt;  if incoming (browser) connection will drop</div>
<div class="line">[Tuesday 04 January 2011] [14:35:48] &lt;<a href="#id159"><span class="problematic" id="id160">Joes_</span></a>&gt;  I should close socket?</div>
<div class="line">[Tuesday 04 January 2011] [14:35:54] &lt;<a href="#id161"><span class="problematic" id="id162">Joes_</span></a>&gt;  (0MQ socket)</div>
<div class="line">[Tuesday 04 January 2011] [14:36:08] &lt;sustrik&gt;        no, 0MQ socket represents all the connections</div>
<div class="line">[Tuesday 04 January 2011] [14:36:17] &lt;sustrik&gt;        so closing it means closing all the connections</div>
<div class="line">[Tuesday 04 January 2011] [14:36:20] &lt;<a href="#id163"><span class="problematic" id="id164">Joes_</span></a>&gt;  hm</div>
<div class="line">[Tuesday 04 January 2011] [14:36:27] &lt;<a href="#id165"><span class="problematic" id="id166">Joes_</span></a>&gt;  1 socket for all incoming clients?</div>
<div class="line">[Tuesday 04 January 2011] [14:36:31] &lt;sustrik&gt;        yes</div>
<div class="line">[Tuesday 04 January 2011] [14:37:03] &lt;<a href="#id167"><span class="problematic" id="id168">Joes_</span></a>&gt;  who will be doing queuing of the messages for temporary disconnected clients?</div>
<div class="line">[Tuesday 04 January 2011] [14:37:14] &lt;sustrik&gt;        the server</div>
<div class="line">[Tuesday 04 January 2011] [14:37:39] &lt;<a href="#id169"><span class="problematic" id="id170">Joes_</span></a>&gt;  I see</div>
<div class="line">[Tuesday 04 January 2011] [14:37:41] &lt;sustrik&gt;        to be precise, the 0MQ socket in the server</div>
<div class="line">[Tuesday 04 January 2011] [14:37:45] &lt;<a href="#id171"><span class="problematic" id="id172">Joes_</span></a>&gt;  hm</div>
<div class="line">[Tuesday 04 January 2011] [14:38:03] &lt;sustrik&gt;        all you need to do is set the ZMQ_IDENTITY socket option on the client</div>
<div class="line">[Tuesday 04 January 2011] [14:38:37] &lt;sustrik&gt;        that way the server socket would know that is should not deallocate the connection when it accidentally breaks</div>
<div class="line">[Tuesday 04 January 2011] [14:38:46] &lt;sustrik&gt;        the messages will be stored</div>
<div class="line">[Tuesday 04 January 2011] [14:38:58] &lt;sustrik&gt;        and once the same client re-connects they will be sent</div>
<div class="line">[Tuesday 04 January 2011] [14:39:03] &lt;<a href="#id173"><span class="problematic" id="id174">Joes_</span></a>&gt;  that&#8217;s the problem - I will have to write proxy between browser and 0MQ server</div>
<div class="line">[Tuesday 04 January 2011] [14:39:05] &lt;mikko&gt;  i think you are talking about separate issue</div>
<div class="line">[Tuesday 04 January 2011] [14:39:10] &lt;mikko&gt;  in this case:</div>
<div class="line">[Tuesday 04 January 2011] [14:39:33] &lt;mikko&gt;  chat server &lt;&#8211; 0mq &#8211;&gt; broker &lt;&#8211; raw tcp &#8211;&gt; client</div>
<div class="line">[Tuesday 04 January 2011] [14:39:38] &lt;<a href="#id175"><span class="problematic" id="id176">Joes_</span></a>&gt;  yep</div>
<div class="line">[Tuesday 04 January 2011] [14:40:33] &lt;<a href="#id177"><span class="problematic" id="id178">Joes_</span></a>&gt;  so, my question is - I&#8217;m adding extra logic on broker side to handle another wire protocol, message queuing (connection persistence logic like in 0MQ)</div>
<div class="line">[Tuesday 04 January 2011] [14:40:42] &lt;<a href="#id179"><span class="problematic" id="id180">Joes_</span></a>&gt;  is it worth of the trouble?</div>
<div class="line">[Tuesday 04 January 2011] [14:41:01] &lt;<a href="#id181"><span class="problematic" id="id182">Joes_</span></a>&gt;  broker can be &#8220;end point&#8221;</div>
<div class="line">[Tuesday 04 January 2011] [14:41:34] &lt;<a href="#id183"><span class="problematic" id="id184">Joes_</span></a>&gt;  not scalable solution, though</div>
<div class="line">[Tuesday 04 January 2011] [14:41:35] &lt;mikko&gt;  the only thing you have described about the application this far that it&#8217;s a chat like irc</div>
<div class="line">[Tuesday 04 January 2011] [14:41:56] &lt;<a href="#id185"><span class="problematic" id="id186">Joes_</span></a>&gt;  yep, pretty much</div>
<div class="line">[Tuesday 04 January 2011] [14:42:03] &lt;mikko&gt;  is this from scratch or do you have something running already?</div>
<div class="line">[Tuesday 04 January 2011] [14:42:07] &lt;<a href="#id187"><span class="problematic" id="id188">Joes_</span></a>&gt;  scratch</div>
<div class="line">[Tuesday 04 January 2011] [14:42:12] &lt;<a href="#id189"><span class="problematic" id="id190">Joes_</span></a>&gt;  prototyping</div>
<div class="line">[Tuesday 04 January 2011] [14:43:04] &lt;<a href="#id191"><span class="problematic" id="id192">Joes_</span></a>&gt;  well, in terms of possible load - ~12k users average online</div>
<div class="line">[Tuesday 04 January 2011] [14:43:30] &lt;<a href="#id193"><span class="problematic" id="id194">Joes_</span></a>&gt;  each making ~1 message in 5 seconds (worst case)</div>
<div class="line">[Tuesday 04 January 2011] [14:43:49] &lt;<a href="#id195"><span class="problematic" id="id196">Joes_</span></a>&gt;  ajax with long polling does not suit very well</div>
<div class="line">[Tuesday 04 January 2011] [14:44:17] &lt;mikko&gt;  why do you need to queue the messages if the client drops?</div>
<div class="line">[Tuesday 04 January 2011] [14:44:20] &lt;<a href="#id197"><span class="problematic" id="id198">Joes_</span></a>&gt;  so, trying to find other possibilities apart of writing custom protocol on top of raw sockets</div>
<div class="line">[Tuesday 04 January 2011] [14:44:36] &lt;<a href="#id199"><span class="problematic" id="id200">Joes_</span></a>&gt;  to keep state of the room and its recent history</div>
<div class="line">[Tuesday 04 January 2011] [14:45:03] &lt;<a href="#id201"><span class="problematic" id="id202">Joes_</span></a>&gt;  it is doable by resending last N items on reconnect</div>
<div class="line">[Tuesday 04 January 2011] [14:45:19] &lt;<a href="#id203"><span class="problematic" id="id204">Joes_</span></a>&gt;  which solves the problem, but.. if 0MQ provides it for free..</div>
<div class="line">[Tuesday 04 January 2011] [14:49:14] &lt;mikko&gt;  let me think for a sec</div>
<div class="line">[Tuesday 04 January 2011] [14:49:28] &lt;mikko&gt;  the biggest problem is the last part to the browser</div>
<div class="line">[Tuesday 04 January 2011] [14:49:32] &lt;<a href="#id205"><span class="problematic" id="id206">Joes_</span></a>&gt;  yep</div>
<div class="line">[Tuesday 04 January 2011] [14:49:45] &lt;<a href="#id207"><span class="problematic" id="id208">Joes_</span></a>&gt;  I want to get rid of it by having simple, yet functional, 0mq client</div>
<div class="line">[Tuesday 04 January 2011] [14:50:01] &lt;<a href="#id209"><span class="problematic" id="id210">Joes_</span></a>&gt;  let&#8217;s assume there&#8217;s no WebSocket wrapping for now.</div>
<div class="line">[Tuesday 04 January 2011] [14:50:05] &lt;<a href="#id211"><span class="problematic" id="id212">Joes_</span></a>&gt;  plain tcp sockets</div>
<div class="line">[Tuesday 04 January 2011] [14:50:54] &lt;mikko&gt;  you are not in control of the client side i assume?</div>
<div class="line">[Tuesday 04 January 2011] [14:51:04] &lt;mikko&gt;  as in installing 0mq on client :)</div>
<div class="line">[Tuesday 04 January 2011] [14:51:16] &lt;<a href="#id213"><span class="problematic" id="id214">Joes_</span></a>&gt;  nope.</div>
<div class="line">[Tuesday 04 January 2011] [14:51:19] &lt;<a href="#id215"><span class="problematic" id="id216">Joes_</span></a>&gt;  plain HTML+JS</div>
<div class="line">[Tuesday 04 January 2011] [14:51:28] &lt;<a href="#id217"><span class="problematic" id="id218">Joes_</span></a>&gt;  and, maybe, some Flash.</div>
<div class="line">[Tuesday 04 January 2011] [14:51:50] &lt;<a href="#id219"><span class="problematic" id="id220">Joes_</span></a>&gt;  (I already checked almost all language integrations - all of them are dependent on the native C library)</div>
<div class="line">[Tuesday 04 January 2011] [14:54:36] &lt;mikko&gt;  yes, i think you would need to implement some logic in your broker</div>
<div class="line">[Tuesday 04 January 2011] [14:55:52] &lt;<a href="#id221"><span class="problematic" id="id222">Joes_</span></a>&gt;  in terms of code, for 1 incoming browser it will create 0mq socket or it will handle all incoming browser connections through 1 0mq socket?</div>
<div class="line">[Tuesday 04 January 2011] [14:55:55] &lt;<a href="#id223"><span class="problematic" id="id224">Joes_</span></a>&gt;  what is better approach?</div>
<div class="line">[Tuesday 04 January 2011] [14:56:37] &lt;<a href="#id225"><span class="problematic" id="id226">Joes_</span></a>&gt;  multiple sockets - free message queuing</div>
<div class="line">[Tuesday 04 January 2011] [14:56:57] &lt;<a href="#id227"><span class="problematic" id="id228">Joes_</span></a>&gt;  one socket - easier overall architecture (and speed?), but manual queuing on the broker</div>
<div class="line">[Tuesday 04 January 2011] [14:57:17] &lt;<a href="#id229"><span class="problematic" id="id230">Joes_</span></a>&gt;  plus, custom wire protocol from broker to browser</div>
<div class="line">[Tuesday 04 January 2011] [14:57:20] &lt;<a href="#id231"><span class="problematic" id="id232">Joes_</span></a>&gt;  etc.</div>
<div class="line">[Tuesday 04 January 2011] [14:57:31] &lt;mikko&gt;  one socket also requires custom filtering i guess</div>
<div class="line">[Tuesday 04 January 2011] [14:57:49] &lt;mikko&gt;  you got messages coming in 1 socket destined to ~12k clients</div>
<div class="line">[Tuesday 04 January 2011] [14:57:51] &lt;<a href="#id233"><span class="problematic" id="id234">Joes_</span></a>&gt;  well, I can read address from the message</div>
<div class="line">[Tuesday 04 January 2011] [14:58:00] &lt;mikko&gt;  so you need to write them to correct handles on other side</div>
<div class="line">[Tuesday 04 January 2011] [14:58:12] &lt;<a href="#id235"><span class="problematic" id="id236">Joes_</span></a>&gt;  and then pick proper browser socket and send it there</div>
<div class="line">[Tuesday 04 January 2011] [14:58:12] &lt;<a href="#id237"><span class="problematic" id="id238">Joes_</span></a>&gt;  yep</div>
<div class="line">[Tuesday 04 January 2011] [14:58:20] &lt;<a href="#id239"><span class="problematic" id="id240">Joes_</span></a>&gt;  it = message</div>
<div class="line">[Tuesday 04 January 2011] [14:59:02] &lt;mikko&gt;  one socket might be easier to handle for events as well</div>
<div class="line">[Tuesday 04 January 2011] [14:59:09] &lt;mikko&gt;  otherwise you got a pollset of 12k items</div>
<div class="line">[Tuesday 04 January 2011] [14:59:13] &lt;mikko&gt;  that you need to maintain</div>
<div class="line">[Tuesday 04 January 2011] [14:59:15] &lt;<a href="#id241"><span class="problematic" id="id242">Joes_</span></a>&gt;  yeah</div>
<div class="line">[Tuesday 04 January 2011] [14:59:19] &lt;<a href="#id243"><span class="problematic" id="id244">Joes_</span></a>&gt;  bad idea.</div>
<div class="line">[Tuesday 04 January 2011] [14:59:27] &lt;<a href="#id245"><span class="problematic" id="id246">Joes_</span></a>&gt;  ok, another idea.</div>
<div class="line">[Tuesday 04 January 2011] [14:59:39] &lt;<a href="#id247"><span class="problematic" id="id248">Joes_</span></a>&gt;  I write pure JS implementation of the wire protocol</div>
<div class="line">[Tuesday 04 January 2011] [14:59:43] &lt;<a href="#id249"><span class="problematic" id="id250">Joes_</span></a>&gt;  it&#8217;s pretty simple</div>
<div class="line">[Tuesday 04 January 2011] [14:59:57] &lt;<a href="#id251"><span class="problematic" id="id252">Joes_</span></a>&gt;  and broker will be dump WebSocket negotiator and TCP proxy</div>
<div class="line">[Tuesday 04 January 2011] [15:00:07] &lt;<a href="#id253"><span class="problematic" id="id254">Joes_</span></a>&gt;  (forwards tcp connection to the real 0MQ server port)</div>
<div class="line">[Tuesday 04 January 2011] [15:00:14] &lt;<a href="#id255"><span class="problematic" id="id256">Joes_</span></a>&gt;  I assume it might work.</div>
<div class="line">[Tuesday 04 January 2011] [15:00:33] &lt;<a href="#id257"><span class="problematic" id="id258">Joes_</span></a>&gt;  each message sent will have address as a first chunk</div>
<div class="line">[Tuesday 04 January 2011] [15:00:46] &lt;<a href="#id259"><span class="problematic" id="id260">Joes_</span></a>&gt;  so chat server knows who sent it</div>
<div class="line">[Tuesday 04 January 2011] [15:00:54] &lt;<a href="#id261"><span class="problematic" id="id262">Joes_</span></a>&gt;  and, maybe, where</div>
<div class="line">[Tuesday 04 January 2011] [15:01:07] &lt;<a href="#id263"><span class="problematic" id="id264">Joes_</span></a>&gt;  dump = dumb</div>
<div class="line">[Tuesday 04 January 2011] [15:01:18] &lt;mikko&gt;  i think i wrote websocket daemon ages ago using libev</div>
<div class="line">[Tuesday 04 January 2011] [15:01:29] &lt;mikko&gt;  it wasn&#8217;t complicated</div>
<div class="line">[Tuesday 04 January 2011] [15:03:57] &lt;<a href="#id265"><span class="problematic" id="id266">Joes_</span></a>&gt;  hm, someone already did it for Ruby</div>
<div class="line">[Tuesday 04 January 2011] [15:04:10] &lt;<a href="#id267"><span class="problematic" id="id268">Joes_</span></a>&gt;  <a class="reference external" href="https://github.com/andrewvc/dripdrop">https://github.com/andrewvc/dripdrop</a></div>
<div class="line">[Tuesday 04 January 2011] [15:04:28] &lt;<a href="#id269"><span class="problematic" id="id270">Joes_</span></a>&gt;  custom wire format from client</div>
<div class="line">[Tuesday 04 January 2011] [15:04:32] &lt;andrewvc&gt;       hey, that&#8217;s me</div>
<div class="line">[Tuesday 04 January 2011] [15:04:35] &lt;<a href="#id271"><span class="problematic" id="id272">Joes_</span></a>&gt;  browser that is</div>
<div class="line">[Tuesday 04 January 2011] [15:04:36] &lt;<a href="#id273"><span class="problematic" id="id274">Joes_</span></a>&gt;  :-)</div>
<div class="line">[Tuesday 04 January 2011] [15:04:39] &lt;<a href="#id275"><span class="problematic" id="id276">Joes_</span></a>&gt;  wonderful</div>
<div class="line">[Tuesday 04 January 2011] [15:04:54] &lt;<a href="#id277"><span class="problematic" id="id278">Joes_</span></a>&gt;  there was pretty long discussion</div>
<div class="line">[Tuesday 04 January 2011] [15:05:04] &lt;andrewvc&gt;       oh?</div>
<div class="line">[Tuesday 04 January 2011] [15:05:16] &lt;<a href="#id279"><span class="problematic" id="id280">Joes_</span></a>&gt;  but, to sum it up - any plans for pure JS 0mq client instead of custom protocol?</div>
<div class="line">[Tuesday 04 January 2011] [15:05:18] &lt;<a href="#id281"><span class="problematic" id="id282">Joes_</span></a>&gt;  (or message format)</div>
<div class="line">[Tuesday 04 January 2011] [15:05:39] &lt;<a href="#id283"><span class="problematic" id="id284">Joes_</span></a>&gt;  so, you can get rid of Ruby server and just relay messages to 0mq</div>
<div class="line">[Tuesday 04 January 2011] [15:05:42] &lt;<a href="#id285"><span class="problematic" id="id286">Joes_</span></a>&gt;  straight</div>
<div class="line">[Tuesday 04 January 2011] [15:05:46] &lt;andrewvc&gt;       oh</div>
<div class="line">[Tuesday 04 January 2011] [15:05:54] &lt;andrewvc&gt;       well, there&#8217;s a node JS project</div>
<div class="line">[Tuesday 04 January 2011] [15:06:05] &lt;andrewvc&gt;       and I was going to implement zmq_devices as part of ffi-rzmq as well</div>
<div class="line">[Tuesday 04 January 2011] [15:06:14] &lt;andrewvc&gt;       or do those options not cover it?</div>
<div class="line">[Tuesday 04 January 2011] [15:06:19] &lt;<a href="#id287"><span class="problematic" id="id288">Joes_</span></a>&gt;  node JS is using native C library</div>
<div class="line">[Tuesday 04 January 2011] [15:06:28] &lt;<a href="#id289"><span class="problematic" id="id290">Joes_</span></a>&gt;  I want something like DripDrop</div>
<div class="line">[Tuesday 04 January 2011] [15:06:31] &lt;andrewvc&gt;       oh</div>
<div class="line">[Tuesday 04 January 2011] [15:06:33] &lt;andrewvc&gt;       interesting</div>
<div class="line">[Tuesday 04 January 2011] [15:06:33] &lt;<a href="#id291"><span class="problematic" id="id292">Joes_</span></a>&gt;  browser &lt;-&gt; 0mq</div>
<div class="line">[Tuesday 04 January 2011] [15:06:40] &lt;<a href="#id293"><span class="problematic" id="id294">Joes_</span></a>&gt;  and simple TCP proxy</div>
<div class="line">[Tuesday 04 January 2011] [15:06:42] &lt;<a href="#id295"><span class="problematic" id="id296">Joes_</span></a>&gt;  in between</div>
<div class="line">[Tuesday 04 January 2011] [15:06:49] &lt;andrewvc&gt;       well, dripdrop doesn&#8217;t really require zeromq</div>
<div class="line">[Tuesday 04 January 2011] [15:06:50] &lt;<a href="#id297"><span class="problematic" id="id298">Joes_</span></a>&gt;  which knows how to handle WebSocket handshake</div>
<div class="line">[Tuesday 04 January 2011] [15:06:53] &lt;andrewvc&gt;       it works well with websockets</div>
<div class="line">[Tuesday 04 January 2011] [15:06:56] &lt;andrewvc&gt;       and http</div>
<div class="line">[Tuesday 04 January 2011] [15:06:57] &lt;andrewvc&gt;       all evented</div>
<div class="line">[Tuesday 04 January 2011] [15:07:18] &lt;andrewvc&gt;       I&#8217;m a bit confused as to the actual question still I guess</div>
<div class="line">[Tuesday 04 January 2011] [15:07:21] &lt;mikko&gt;  andrewvc: but he wants to run this in browser</div>
<div class="line">[Tuesday 04 January 2011] [15:07:28] &lt;mikko&gt;  andrewvc: hence the pure js implementation i guess</div>
<div class="line">[Tuesday 04 January 2011] [15:07:34] &lt;<a href="#id299"><span class="problematic" id="id300">Joes_</span></a>&gt;  yes</div>
<div class="line">[Tuesday 04 January 2011] [15:07:43] &lt;andrewvc&gt;       ohhh, well who would the browser talk to. Itself?</div>
<div class="line">[Tuesday 04 January 2011] [15:07:51] &lt;<a href="#id301"><span class="problematic" id="id302">Joes_</span></a>&gt;  0mq server, preferably.</div>
<div class="line">[Tuesday 04 January 2011] [15:08:09] &lt;<a href="#id303"><span class="problematic" id="id304">Joes_</span></a>&gt;  here&#8217;s another example: online real-time game.</div>
<div class="line">[Tuesday 04 January 2011] [15:08:11] &lt;andrewvc&gt;       oh, well, as far as I know you can&#8217;t open a raw TCP conn from any browser still</div>
<div class="line">[Tuesday 04 January 2011] [15:08:17] &lt;andrewvc&gt;       so you&#8217;re using websockets in the yes?</div>
<div class="line">[Tuesday 04 January 2011] [15:08:29] &lt;<a href="#id305"><span class="problematic" id="id306">Joes_</span></a>&gt;  socketjs also works</div>
<div class="line">[Tuesday 04 January 2011] [15:09:01] &lt;<a href="#id307"><span class="problematic" id="id308">Joes_</span></a>&gt;  (embeds small Flash object to proxy sockets)</div>
<div class="line">[Tuesday 04 January 2011] [15:09:09] &lt;<a href="#id309"><span class="problematic" id="id310">Joes_</span></a>&gt;  gives plain sockets in JS</div>
<div class="line">[Tuesday 04 January 2011] [15:09:41] &lt;andrewvc&gt;       yeah, so, that&#8217;s an interesting idea</div>
<div class="line">[Tuesday 04 January 2011] [15:09:56] &lt;<a href="#id311"><span class="problematic" id="id312">Joes_</span></a>&gt;  I mean - sure, I can create custom protocol</div>
<div class="line">[Tuesday 04 January 2011] [15:10:00] &lt;<a href="#id313"><span class="problematic" id="id314">Joes_</span></a>&gt;  write custom server software</div>
<div class="line">[Tuesday 04 January 2011] [15:10:00] &lt;andrewvc&gt;       what kinds of implementation were you guys thinking?</div>
<div class="line">[Tuesday 04 January 2011] [15:10:06] &lt;<a href="#id315"><span class="problematic" id="id316">Joes_</span></a>&gt;  which will parse messages, etc</div>
<div class="line">[Tuesday 04 January 2011] [15:10:11] &lt;<a href="#id317"><span class="problematic" id="id318">Joes_</span></a>&gt;  but I dont see a point</div>
<div class="line">[Tuesday 04 January 2011] [15:10:52] &lt;andrewvc&gt;       what would the api look like, in JS?</div>
<div class="line">[Tuesday 04 January 2011] [15:11:04] &lt;<a href="#id319"><span class="problematic" id="id320">Joes_</span></a>&gt;  so, DripDrop already doing it - checked JS files, it is encapsulating messages into DD.Message</div>
<div class="line">[Tuesday 04 January 2011] [15:11:05] &lt;andrewvc&gt;       I think that&#8217;s probably a good place to start, if you can throw up a gist for a simple case</div>
<div class="line">[Tuesday 04 January 2011] [15:11:09] &lt;andrewvc&gt;       yep</div>
<div class="line">[Tuesday 04 January 2011] [15:11:37] &lt;andrewvc&gt;       the JS prolly needs a little love at this point</div>
<div class="line">[Tuesday 04 January 2011] [15:12:15] &lt;<a href="#id321"><span class="problematic" id="id322">Joes_</span></a>&gt;  so, imagine that there&#8217;s no need to have custom wire protocol (json serialized) and JS would just talk to 0mq server using 0mq wire protocol</div>
<div class="line">[Tuesday 04 January 2011] [15:12:48] &lt;<a href="#id323"><span class="problematic" id="id324">Joes_</span></a>&gt;  that&#8217;s the simpliest case</div>
<div class="line">[Tuesday 04 January 2011] [15:13:18] &lt;andrewvc&gt;       hmmm, the 0mq wire protocol doesn&#8217;t handle that much really</div>
<div class="line">[Tuesday 04 January 2011] [15:13:43] &lt;andrewvc&gt;       I mean, you could express multipart stuff, like socket identities for stuff like xreq/xrep</div>
<div class="line">[Tuesday 04 January 2011] [15:13:45] &lt;<a href="#id325"><span class="problematic" id="id326">Joes_</span></a>&gt;  browser won&#8217;t be server either</div>
<div class="line">[Tuesday 04 January 2011] [15:13:49] &lt;andrewvc&gt;       but I&#8217;m not sure how useful that is</div>
<div class="line">[Tuesday 04 January 2011] [15:13:50] &lt;<a href="#id327"><span class="problematic" id="id328">Joes_</span></a>&gt;  sub or pub, mostly</div>
<div class="line">[Tuesday 04 January 2011] [15:13:59] &lt;<a href="#id329"><span class="problematic" id="id330">Joes_</span></a>&gt;  maybe req</div>
<div class="line">[Tuesday 04 January 2011] [15:14:13] &lt;andrewvc&gt;       I&#8217;m off to grab some lunch, but it&#8217;s an interesting idea</div>
<div class="line">[Tuesday 04 January 2011] [15:14:20] &lt;andrewvc&gt;       I&#8217;d love to see a gist of a proposed API</div>
<div class="line">[Tuesday 04 January 2011] [15:14:26] &lt;<a href="#id331"><span class="problematic" id="id332">Joes_</span></a>&gt;  actually, from wire perspective it can be req</div>
<div class="line">[Tuesday 04 January 2011] [15:14:28] &lt;<a href="#id333"><span class="problematic" id="id334">Joes_</span></a>&gt;  always</div>
<div class="line">[Tuesday 04 January 2011] [15:14:37] &lt;<a href="#id335"><span class="problematic" id="id336">Joes_</span></a>&gt;  em, no.</div>
<div class="line">[Tuesday 04 January 2011] [15:14:40] &lt;<a href="#id337"><span class="problematic" id="id338">Joes_</span></a>&gt;  I need to get updates from server.</div>
<div class="line">[Tuesday 04 January 2011] [15:14:44] &lt;<a href="#id339"><span class="problematic" id="id340">Joes_</span></a>&gt;  anyway, I&#8217;ll think about it.</div>
<div class="line">[Tuesday 04 January 2011] [15:14:53] &lt;andrewvc&gt;       yeah, I&#8217;d like to hear more</div>
<div class="line">[Tuesday 04 January 2011] [15:15:00] &lt;<a href="#id341"><span class="problematic" id="id342">Joes_</span></a>&gt;  it won&#8217;t be full-scale 0mq implementation anyway</div>
<div class="line">[Tuesday 04 January 2011] [15:15:04] &lt;andrewvc&gt;       If you could ping me at &#64;andrewvc on twitter when you have something I&#8217;d be interested</div>
<div class="line">[Tuesday 04 January 2011] [15:15:09] &lt;andrewvc&gt;       anyway, off to lunch</div>
<div class="line">[Tuesday 04 January 2011] [15:15:12] &lt;<a href="#id343"><span class="problematic" id="id344">Joes_</span></a>&gt;  k</div>
<div class="line">[Tuesday 04 January 2011] [15:15:24] &lt;<a href="#id345"><span class="problematic" id="id346">Joes_</span></a>&gt;  bon appetit</div>
<div class="line">[Tuesday 04 January 2011] [15:17:32] &lt;<a href="#id347"><span class="problematic" id="id348">Joes_</span></a>&gt;  Disconnected question - how do you handle security? If you don&#8217;t want particular client to be connected, what you can do?</div>
<div class="line">[Tuesday 04 January 2011] [15:17:48] &lt;<a href="#id349"><span class="problematic" id="id350">Joes_</span></a>&gt;  so, I don&#8217;t want malicious client to DOS my message queue</div>
<div class="line">[Tuesday 04 January 2011] [15:17:52] &lt;<a href="#id351"><span class="problematic" id="id352">Joes_</span></a>&gt;  can I forcibly disconnect him?</div>
<div class="line">[Tuesday 04 January 2011] [15:17:58] &lt;<a href="#id353"><span class="problematic" id="id354">Joes_</span></a>&gt;  (in my application)</div>
<div class="line">[Tuesday 04 January 2011] [15:20:29] &lt;mikko&gt;  hmm</div>
<div class="line">[Tuesday 04 January 2011] [15:20:47] &lt;mikko&gt;  was searching for 0mq on twitter and most of the results are people using &#8220;0mq&#8221; instead of &#8220;omg&#8221;</div>
<div class="line">[Tuesday 04 January 2011] [15:20:53] &lt;<a href="#id355"><span class="problematic" id="id356">Joes_</span></a>&gt;  :-)</div>
<div class="line">[Tuesday 04 January 2011] [15:24:09] &lt;<a href="#id357"><span class="problematic" id="id358">Joes_</span></a>&gt;  mikko: any hints on how to forcibly drop connections on server side?</div>
<div class="line">[Tuesday 04 January 2011] [15:25:44] &lt;<a href="#id359"><span class="problematic" id="id360">Joes_</span></a>&gt;  or 0mq not really suited for client-facing functionality?</div>
<div class="line">[Tuesday 04 January 2011] [15:26:51] &lt;mikko&gt;  there is really no way to forcibly drop a connection</div>
<div class="line">[Tuesday 04 January 2011] [15:27:02] &lt;<a href="#id361"><span class="problematic" id="id362">Joes_</span></a>&gt;  ouch.</div>
<div class="line">[Tuesday 04 January 2011] [15:27:12] &lt;mikko&gt;  apart from closing the socket</div>
<div class="line">[Tuesday 04 January 2011] [15:27:20] &lt;<a href="#id363"><span class="problematic" id="id364">Joes_</span></a>&gt;  on client side, I assume</div>
<div class="line">[Tuesday 04 January 2011] [15:27:21] &lt;<a href="#id365"><span class="problematic" id="id366">Joes_</span></a>&gt;  ?</div>
<div class="line">[Tuesday 04 January 2011] [15:27:31] &lt;mikko&gt;  on the server-side but that closes all connections</div>
<div class="line">[Tuesday 04 January 2011] [15:27:39] &lt;<a href="#id367"><span class="problematic" id="id368">Joes_</span></a>&gt;  oops.</div>
<div class="line">[Tuesday 04 January 2011] [15:28:40] &lt;<a href="#id369"><span class="problematic" id="id370">Joes_</span></a>&gt;  means, 0mq not really suitable for client-facing stuff, as clients might misbehave</div>
<div class="line">[Tuesday 04 January 2011] [15:28:47] &lt;<a href="#id371"><span class="problematic" id="id372">Joes_</span></a>&gt;  plus, if there&#8217;s some sort of authentication</div>
<div class="line">[Tuesday 04 January 2011] [15:28:56] &lt;<a href="#id373"><span class="problematic" id="id374">Joes_</span></a>&gt;  it&#8217;s easier to disconnect client</div>
<div class="line">[Tuesday 04 January 2011] [15:29:01] &lt;<a href="#id375"><span class="problematic" id="id376">Joes_</span></a>&gt;  than to ignore all his sent messages</div>
<div class="line">[Tuesday 04 January 2011] [15:43:17] &lt;sustrik&gt;        what&#8217;s the difference? a malevolent client can reconnect immediately and sent another malformed message</div>
<div class="line">[Tuesday 04 January 2011] [15:43:59] &lt;sustrik&gt;        the only consequence is that the server would use much more CPU to handle the reconnecting instead of simply dropping the messages</div>
<div class="line">[Tuesday 04 January 2011] [15:47:25] &lt;<a href="#id377"><span class="problematic" id="id378">Joes_</span></a>&gt;  yep</div>
<div class="line">[Tuesday 04 January 2011] [15:47:28] &lt;<a href="#id379"><span class="problematic" id="id380">Joes_</span></a>&gt;  but</div>
<div class="line">[Tuesday 04 January 2011] [15:47:35] &lt;<a href="#id381"><span class="problematic" id="id382">Joes_</span></a>&gt;  let&#8217;s assume that it is pub/sub</div>
<div class="line">[Tuesday 04 January 2011] [15:47:41] &lt;<a href="#id383"><span class="problematic" id="id384">Joes_</span></a>&gt;  with, let&#8217;s say 10 subscribers</div>
<div class="line">[Tuesday 04 January 2011] [15:48:15] &lt;<a href="#id385"><span class="problematic" id="id386">Joes_</span></a>&gt;  so, bad clients sends 1 message</div>
<div class="line">[Tuesday 04 January 2011] [15:48:47] &lt;<a href="#id387"><span class="problematic" id="id388">Joes_</span></a>&gt;  and 10 messages total are sent to subscribers</div>
<div class="line">[Tuesday 04 January 2011] [15:49:01] &lt;<a href="#id389"><span class="problematic" id="id390">Joes_</span></a>&gt;  effectively, network topology creates nice DOS environment</div>
<div class="line">[Tuesday 04 January 2011] [15:49:31] &lt;<a href="#id391"><span class="problematic" id="id392">Joes_</span></a>&gt;  bad client sends*</div>
<div class="line">[Tuesday 04 January 2011] [15:49:55] &lt;<a href="#id393"><span class="problematic" id="id394">Joes_</span></a>&gt;  I mean - there&#8217;s no built-in security, so there&#8217;s no way to filter these messages before they get into &#8220;internal&#8221; network</div>
<div class="line">[Tuesday 04 January 2011] [15:50:08] &lt;<a href="#id395"><span class="problematic" id="id396">Joes_</span></a>&gt;  where workers sit</div>
<div class="line">[Tuesday 04 January 2011] [15:56:16] &lt;<a href="#id397"><span class="problematic" id="id398">Joes_</span></a>&gt;  however, I think broker which will relay messages to internal network will work</div>
<div class="line">[Tuesday 04 January 2011] [15:56:26] &lt;<a href="#id399"><span class="problematic" id="id400">Joes_</span></a>&gt;  and he&#8217;ll do the authentication stuff too</div>
<div class="line">[Tuesday 04 January 2011] [16:13:42] &lt;mikko&gt;  <a href="#id401"><span class="problematic" id="id402">Joes_</span></a>: it sounds like a sensible approach</div>
<div class="line">[Tuesday 04 January 2011] [20:47:48] &lt;jugg&gt;   sustrik, it would appear that 2.1.x C zmq_poll function needs to check ZMQ_EVENTS prior to polling the FD... yes?</div>
<div class="line">[Tuesday 04 January 2011] [20:49:53] &lt;jugg&gt;   btw, erlang bindings are functioning again... still some clean up work and consideration on how to expose certain aspects, but it is fairly usable now.</div>
<div class="line">[Tuesday 04 January 2011] [21:30:33] &lt;jugg&gt;   documentation bug: <a class="reference external" href="http://api.zeromq.org/zmq_send.html">http://api.zeromq.org/zmq_send.html</a> -&gt; EFAULT incorrectly references &#8216;context&#8217; rather than &#8216;socket&#8217;.</div>
<div class="line">[Tuesday 04 January 2011] [23:56:48] &lt;munin&gt;  i have a python / zeromq question if anyone is active..?</div>
<div class="line">[Tuesday 04 January 2011] [23:57:04] &lt;munin&gt;  i&#8217;m trying to get python 3.2 and zeromq to work and am having a problem importing zmq:</div>
<div class="line">[Tuesday 04 January 2011] [23:57:14] &lt;munin&gt;  ImportError: /home/munin/dbz-class/python/lib/python3.2/site-packages/zmq/core/poll.cpython-32m.so: undefined symbol: PyCObject_FromVoidPtr</div>
<div class="line">[Wednesday 05 January 2011] [01:31:27] &lt;the_hulk&gt;     hi, if i allocate a memory to zmq_msg_t pointer using malloc, then does zmq_msg_close frees the memory, or i would have to free it?</div>
<div class="line">[Wednesday 05 January 2011] [01:35:49] &lt;jsimmons&gt;     if you allocate it, you have to free it.</div>
<div class="line">[Wednesday 05 January 2011] [01:36:36] &lt;the_hulk&gt;     jsimmons, after zmq_msg_close, ok, thanks</div>
<div class="line">[Wednesday 05 January 2011] [04:03:53] &lt;mikko&gt;        the_hulk: you can use zmq_msg_init_data if you want the data to be freed when the message is freed</div>
<div class="line">[Wednesday 05 January 2011] [04:07:55] &lt;the_hulk&gt;     mikko, data, no, i was talking about zmq_msg_t struct</div>
<div class="line">[Wednesday 05 January 2011] [04:08:46] &lt;mikko&gt;        ah, ok</div>
<div class="line">[Wednesday 05 January 2011] [04:22:15] &lt;mikko&gt;        <a class="reference external" href="http://twitter.com/alexdong/statuses/22478134221733888">http://twitter.com/alexdong/statuses/22478134221733888</a></div>
<div class="line">[Wednesday 05 January 2011] [04:22:18] &lt;mikko&gt;        i don&#8217;t get this</div>
<div class="line">[Wednesday 05 January 2011] [04:46:26] &lt;the_hulk&gt;     mikko, me too</div>
<div class="line">[Wednesday 05 January 2011] [05:35:25] &lt;sustrik&gt;      redis is a database, isn&#8217;t it?</div>
<div class="line">[Wednesday 05 January 2011] [05:35:31] &lt;sustrik&gt;      some people have no clue</div>
<div class="line">[Wednesday 05 January 2011] [05:44:05] &lt;mikko&gt;        yes, it&#8217;s a key-value store</div>
<div class="line">[Wednesday 05 January 2011] [05:51:31] &lt;mikko&gt;        <a class="reference external" href="https://github.com/mkoppanen/httpush">https://github.com/mkoppanen/httpush</a></div>
<div class="line">[Wednesday 05 January 2011] [05:51:37] &lt;mikko&gt;        if anyone is interested in such a thing</div>
<div class="line">[Wednesday 05 January 2011] [05:54:55] &lt;sustrik&gt;      mikko: i am not a web developer so i cannot judge</div>
<div class="line">[Wednesday 05 January 2011] [05:55:20] &lt;sustrik&gt;      but i would definitely announce it on mailing list and add a link to zeromq.org labs page</div>
<div class="line">[Wednesday 05 January 2011] [05:55:26] &lt;sustrik&gt;      to make it more accessible</div>
<div class="line">[Wednesday 05 January 2011] [06:01:30] &lt;neopallium&gt;   mikko: that is similar to Mongrel2</div>
<div class="line">[Wednesday 05 January 2011] [06:01:36] &lt;the_hulk&gt;     mikko, mongrel?</div>
<div class="line">[Wednesday 05 January 2011] [06:02:22] &lt;mikko&gt;        neopallium: it doesn&#8217;t really act as request reply web-server</div>
<div class="line">[Wednesday 05 January 2011] [06:02:35] &lt;mikko&gt;        i just needed a simple http-&gt;zeromq bridge for statistics collection</div>
<div class="line">[Wednesday 05 January 2011] [06:03:38] &lt;neopallium&gt;   so you can only push data to a 0mq socket? no responses back to the http client?</div>
<div class="line">[Wednesday 05 January 2011] [06:03:47] &lt;mikko&gt;        neopallium: yep</div>
<div class="line">[Wednesday 05 January 2011] [06:05:42] &lt;the_hulk&gt;     mikko, how does that help? i am quite new to this stuff..</div>
<div class="line">[Wednesday 05 January 2011] [06:06:02] &lt;mikko&gt;        the use-case for this was fairly simple</div>
<div class="line">[Wednesday 05 January 2011] [06:06:26] &lt;mikko&gt;        the initial use-case was just collecting web-statistics/analytics</div>
<div class="line">[Wednesday 05 January 2011] [06:07:27] &lt;mikko&gt;        so take a request from client, push to 0mq and analyse later in the background</div>
<div class="line">[Wednesday 05 January 2011] [06:08:09] &lt;the_hulk&gt;     and response?</div>
<div class="line">[Wednesday 05 January 2011] [06:08:16] &lt;mikko&gt;        static 200 OK</div>
<div class="line">[Wednesday 05 January 2011] [06:08:47] &lt;mikko&gt;        if you want to send proper responses to client you probably want something like mongrel2</div>
<div class="line">[Wednesday 05 January 2011] [06:19:49] &lt;the_hulk&gt;     yeah, i am trying mongrel2, but i am still not clear about httppush.. is it like backend for page tagging?</div>
<div class="line">[Wednesday 05 January 2011] [06:20:52] &lt;mikko&gt;        it just pushes http requests to 0mq</div>
<div class="line">[Wednesday 05 January 2011] [06:20:54] &lt;mikko&gt;        nothing more</div>
<div class="line">[Wednesday 05 January 2011] [06:21:06] &lt;mikko&gt;        not a bidirectional communication</div>
<div class="line">[Wednesday 05 January 2011] [06:21:54] &lt;the_hulk&gt;     hmm, looks good</div>
<div class="line">[Wednesday 05 January 2011] [06:22:42] &lt;mikko&gt;        it&#8217;s for far simpler and specifc use-case than mongrel2</div>
<div class="line">[Wednesday 05 January 2011] [10:07:30] &lt;jugg&gt; sustrik, in 2.1.x zmq_term is a blocking call, is there a way to check if it will block, or make it not block?   In the erlang bindings, this causes a problem, because it hard locks the erlang vm, not allowing the sockets to be cleaned up and closed (which would unblock the zmq_term call).  As such it turns into a dead lock.   Of course I can put smarts into the erlang driver to deal with this issue, but...</div>
<div class="line">[Wednesday 05 January 2011] [10:08:48] &lt;mikko&gt;        jugg: it blocks if there are sockets open</div>
<div class="line">[Wednesday 05 January 2011] [10:08:56] &lt;mikko&gt;        jugg: if you close all sockets first then it will not block</div>
<div class="line">[Wednesday 05 January 2011] [10:09:10] &lt;jugg&gt; yes</div>
<div class="line">[Wednesday 05 January 2011] [10:09:12] &lt;mikko&gt;        jugg: currently there is no non-blocking version but there has been some discussion around it</div>
<div class="line">[Wednesday 05 January 2011] [10:10:36] &lt;sustrik&gt;      there are 2 distinct problems there</div>
<div class="line">[Wednesday 05 January 2011] [10:11:10] &lt;sustrik&gt;      1. the sockets have to be closed before zmq_term succeeds</div>
<div class="line">[Wednesday 05 January 2011] [10:11:39] &lt;sustrik&gt;      the reason is that otherwise you would destroy the sockets underneath running threads</div>
<div class="line">[Wednesday 05 January 2011] [10:11:52] &lt;sustrik&gt;      and end up with access violations etc.</div>
<div class="line">[Wednesday 05 January 2011] [10:12:20] &lt;mikko&gt;        there was the idea having a non-blocking call that just checks if sockets have been closed</div>
<div class="line">[Wednesday 05 January 2011] [10:12:30] &lt;sustrik&gt;      yes</div>
<div class="line">[Wednesday 05 January 2011] [10:12:46] &lt;mikko&gt;        does the following sound absurd:</div>
<div class="line">[Wednesday 05 January 2011] [10:12:55] &lt;sustrik&gt;      2. zmq_term() waits while the pending message are send to the wite</div>
<div class="line">[Wednesday 05 January 2011] [10:13:03] &lt;mikko&gt;        1. call zmq_term_nb(ctx);</div>
<div class="line">[Wednesday 05 January 2011] [10:13:11] &lt;sustrik&gt;      that one can be worked aeound by setting ZMQ_LINGER to 0</div>
<div class="line">[Wednesday 05 January 2011] [10:13:11] &lt;jugg&gt; it&#8217;d be nice if it just returned with EAGAIN if there were open sockets, and have any blocking calls on the open sockets return with ETERM</div>
<div class="line">[Wednesday 05 January 2011] [10:13:20] &lt;mikko&gt;        2. context is marked &#8220;awaiting termination&#8221; and doesnt allow new sockets to be allocated</div>
<div class="line">[Wednesday 05 January 2011] [10:13:41] &lt;mikko&gt;        3. context automatically terminates after alst socket is done</div>
<div class="line">[Wednesday 05 January 2011] [10:13:45] &lt;mikko&gt;        is this even possible?</div>
<div class="line">[Wednesday 05 January 2011] [10:14:17] &lt;mikko&gt;        jugg: i guess that would be ideal</div>
<div class="line">[Wednesday 05 January 2011] [10:14:31] &lt;sustrik&gt;      1 and 2 is ok</div>
<div class="line">[Wednesday 05 January 2011] [10:14:32] &lt;mikko&gt;        but not sure if possible</div>
<div class="line">[Wednesday 05 January 2011] [10:14:37] &lt;sustrik&gt;      3 won&#8217;t fly</div>
<div class="line">[Wednesday 05 January 2011] [10:15:01] &lt;sustrik&gt;      the problem is that what you noramally do is:</div>
<div class="line">[Wednesday 05 January 2011] [10:15:05] &lt;sustrik&gt;      zmq_term()</div>
<div class="line">[Wednesday 05 January 2011] [10:15:07] &lt;sustrik&gt;      exit()</div>
<div class="line">[Wednesday 05 January 2011] [10:15:17] &lt;jugg&gt; zmq_term would have to be called again if it returned with eagain previously...</div>
<div class="line">[Wednesday 05 January 2011] [10:15:33] &lt;sustrik&gt;      thus the application exits even though there are pending messages there</div>
<div class="line">[Wednesday 05 January 2011] [10:15:48] &lt;sustrik&gt;      jugg: yes</div>
<div class="line">[Wednesday 05 January 2011] [10:16:33] &lt;mikko&gt;        sustrik: i see two problems here</div>
<div class="line">[Wednesday 05 January 2011] [10:16:40] &lt;sustrik&gt;      in short you need a point where the application can sleep waiting for 0mq to finish any work underway</div>
<div class="line">[Wednesday 05 January 2011] [10:16:43] &lt;mikko&gt;        well, one problem</div>
<div class="line">[Wednesday 05 January 2011] [10:16:49]         * sustrik listens</div>
<div class="line">[Wednesday 05 January 2011] [10:16:57] &lt;mikko&gt;        the problem being that zmq_term doesn&#8217;t indicate to sockets that they should exit</div>
<div class="line">[Wednesday 05 January 2011] [10:17:12] &lt;sustrik&gt;      ?</div>
<div class="line">[Wednesday 05 January 2011] [10:17:17] &lt;sustrik&gt;      what about ETERM?</div>
<div class="line">[Wednesday 05 January 2011] [10:17:30] &lt;mikko&gt;        does it currently send eterm to sockets?</div>
<div class="line">[Wednesday 05 January 2011] [10:17:41] &lt;mikko&gt;        maybe im not handling that in my code properly</div>
<div class="line">[Wednesday 05 January 2011] [10:17:45] &lt;sustrik&gt;      after zmq_term() is called</div>
<div class="line">[Wednesday 05 January 2011] [10:17:54] &lt;sustrik&gt;      all the functions except amq_close() return ETERM</div>
<div class="line">[Wednesday 05 January 2011] [10:18:18] &lt;mikko&gt;        does that signal event in ZMQ_FD as well?</div>
<div class="line">[Wednesday 05 January 2011] [10:18:28] &lt;sustrik&gt;      good question</div>
<div class="line">[Wednesday 05 January 2011] [10:18:37] &lt;sustrik&gt;      probably yes</div>
<div class="line">[Wednesday 05 January 2011] [10:18:43] &lt;sustrik&gt;      not sure</div>
<div class="line">[Wednesday 05 January 2011] [10:18:43] &lt;mikko&gt;        maybe that was my problem as i am using libevent loop</div>
<div class="line">[Wednesday 05 January 2011] [10:19:14] &lt;sustrik&gt;      i would say</div>
<div class="line">[Wednesday 05 January 2011] [10:19:19] &lt;sustrik&gt;      fd should be signaled</div>
<div class="line">[Wednesday 05 January 2011] [10:19:35] &lt;sustrik&gt;      and getsockopt(zmq_events) should return ETERM</div>
<div class="line">[Wednesday 05 January 2011] [10:19:40] &lt;mikko&gt;        let me test</div>
<div class="line">[Wednesday 05 January 2011] [10:19:41] &lt;sustrik&gt;      but i never tried that</div>
<div class="line">[Wednesday 05 January 2011] [10:21:09] &lt;jugg&gt; what happens of zmq_send is blocking, or if the last message was sent with SNDMORE?  Do only full message sets get sent?  Or does zmq_send not return with eterm?</div>
<div class="line">[Wednesday 05 January 2011] [10:22:10] &lt;sustrik&gt;      messages are atomic</div>
<div class="line">[Wednesday 05 January 2011] [10:22:15] &lt;sustrik&gt;      so, in this case</div>
<div class="line">[Wednesday 05 January 2011] [10:22:19] &lt;jugg&gt; I assume, the linger option only deals with a fully atomic message set?</div>
<div class="line">[Wednesday 05 January 2011] [10:22:24] &lt;sustrik&gt;      zmq_send return ETERM</div>
<div class="line">[Wednesday 05 January 2011] [10:22:32] &lt;sustrik&gt;      but the message is not sent at all</div>
<div class="line">[Wednesday 05 January 2011] [10:22:40] &lt;mikko&gt;        <a class="reference external" href="https://gist.github.com/79d15fa01f0c7288f129">https://gist.github.com/79d15fa01f0c7288f129</a></div>
<div class="line">[Wednesday 05 January 2011] [10:22:41] &lt;mikko&gt;        strange</div>
<div class="line">[Wednesday 05 January 2011] [10:22:56] &lt;sustrik&gt;      jugg: yes, half-sent messages are never delivered</div>
<div class="line">[Wednesday 05 January 2011] [10:24:28] &lt;sustrik&gt;      mikko: that&#8217;s ETERM</div>
<div class="line">[Wednesday 05 January 2011] [10:24:42] &lt;mikko&gt;        yeah</div>
<div class="line">[Wednesday 05 January 2011] [10:24:50] &lt;mikko&gt;        so it does signal the ZMQ_FD</div>
<div class="line">[Wednesday 05 January 2011] [10:25:37] &lt;sustrik&gt;      ok, easy to fix</div>
<div class="line">[Wednesday 05 January 2011] [10:25:53] &lt;sustrik&gt;      just change line 270 to</div>
<div class="line">[Wednesday 05 January 2011] [10:26:03] &lt;sustrik&gt;      if (rc != 0 &amp;&amp; (errno == EINTR || errno == ETERM))</div>
<div class="line">[Wednesday 05 January 2011] [10:27:21] &lt;mikko&gt;        sustrik: socket_base.cpp:272</div>
<div class="line">[Wednesday 05 January 2011] [10:27:24] &lt;mikko&gt;        yeah</div>
<div class="line">[Wednesday 05 January 2011] [10:57:35] &lt;CIA-21&gt;       zeromq2: 03Martin Sustrik 07master * r472bdcd 10/ src/socket_base.cpp :</div>
<div class="line">[Wednesday 05 January 2011] [10:57:35] &lt;CIA-21&gt;       zeromq2: Return ETERM from getsockopt(ZMQ_EVETS) if zmq_term() was called</div>
<div class="line">[Wednesday 05 January 2011] [10:57:35] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/hXhab5">http://bit.ly/hXhab5</a></div>
<div class="line">[Wednesday 05 January 2011] [12:29:53] &lt;s0undt3ch&gt;    hello ppl</div>
<div class="line">[Wednesday 05 January 2011] [12:30:42] &lt;s0undt3ch&gt;    I&#8217;m trying to use pyzmq withing a gobject mainloop, ie, I can&#8217;t simple do while True: sock.recv()</div>
<div class="line">[Wednesday 05 January 2011] [12:30:47] &lt;s0undt3ch&gt;    so what are my options?</div>
<div class="line">[Wednesday 05 January 2011] [12:31:06] &lt;s0undt3ch&gt;    using the gobject mainlopp I can make a function run at a specific interval</div>
<div class="line">[Wednesday 05 January 2011] [12:31:25] &lt;sustrik&gt;      you can do non-blocking recv</div>
<div class="line">[Wednesday 05 January 2011] [12:31:34] &lt;sustrik&gt;      use ZMQ_NOBLOCK flag</div>
<div class="line">[Wednesday 05 January 2011] [12:32:50] &lt;s0undt3ch&gt;    sustrik: so, keep calling recv(zmq.NOBLOCK) untill I get an empty message meaning a message was completely sent?</div>
<div class="line">[Wednesday 05 January 2011] [12:33:26] &lt;sustrik&gt;      EAGAIN error ensues if there&#8217;s nothing to receive</div>
<div class="line">[Wednesday 05 January 2011] [12:35:59] &lt;s0undt3ch&gt;    sustrik: k, Thanks</div>
<div class="line">[Wednesday 05 January 2011] [12:36:07] &lt;sustrik&gt;      np</div>
<div class="line">[Wednesday 05 January 2011] [12:36:10] &lt;s0undt3ch&gt;    sustrik: in which cases should we use poller?</div>
<div class="line">[Wednesday 05 January 2011] [12:36:26] &lt;s0undt3ch&gt;    might be unrelated</div>
<div class="line">[Wednesday 05 January 2011] [12:36:28] &lt;sustrik&gt;      if you need to use several sockets in parallel</div>
<div class="line">[Wednesday 05 January 2011] [12:36:55] &lt;s0undt3ch&gt;    sustrik: well, a daemonized process will need a req and a rep socket</div>
<div class="line">[Wednesday 05 January 2011] [12:37:00] &lt;s0undt3ch&gt;    is this such a case?</div>
<div class="line">[Wednesday 05 January 2011] [12:37:14] &lt;sustrik&gt;      if you need to use them from the same thread</div>
<div class="line">[Wednesday 05 January 2011] [12:37:20] &lt;mikko&gt;        s0undt3ch: ideal for you would be to use ZMQ_FD to get the filehandle</div>
<div class="line">[Wednesday 05 January 2011] [12:37:30] &lt;mikko&gt;        and gobject.add_watch to watch for activity on the handle</div>
<div class="line">[Wednesday 05 January 2011] [12:37:43] &lt;mikko&gt;        then in the callback check ZMQ_EVENTS and recv if there are events</div>
<div class="line">[Wednesday 05 January 2011] [12:37:50] &lt;mikko&gt;        i think</div>
<div class="line">[Wednesday 05 January 2011] [12:37:55] &lt;mikko&gt;        home -&gt;</div>
<div class="line">[Wednesday 05 January 2011] [12:38:00] &lt;s0undt3ch&gt;    mikko: wow! Thanks! Have you done something like this?</div>
<div class="line">[Wednesday 05 January 2011] [12:38:06] &lt;s0undt3ch&gt;    mikko: any public code?</div>
<div class="line">[Wednesday 05 January 2011] [12:38:11] &lt;mikko&gt;        s0undt3ch: i&#8217;ve done something like this with libevent</div>
<div class="line">[Wednesday 05 January 2011] [12:38:17] &lt;mikko&gt;        i&#8217;ll be back in an hour</div>
<div class="line">[Wednesday 05 January 2011] [12:38:19] &lt;mikko&gt;        -&gt;</div>
<div class="line">[Wednesday 05 January 2011] [12:38:28] &lt;s0undt3ch&gt;    mikko: please ping me when back</div>
<div class="line">[Wednesday 05 January 2011] [12:39:32] &lt;s0undt3ch&gt;    mikko: ah, zmq 2.1.0 right?</div>
<div class="line">[Wednesday 05 January 2011] [12:41:14] &lt;sustrik&gt;      yes, 2.1</div>
<div class="line">[Wednesday 05 January 2011] [12:43:05] &lt;s0undt3ch&gt;    hmm, guess I need to build both packages in order to support that</div>
<div class="line">[Wednesday 05 January 2011] [13:00:15] &lt;s0undt3ch&gt;    while trying to build pyzmq 2.1.0(git master) I&#8217;m getting <a class="reference external" href="http://paste.pocoo.org/show/315418/">http://paste.pocoo.org/show/315418/</a></div>
<div class="line">[Wednesday 05 January 2011] [13:04:03] &lt;sustrik&gt;      looks like mismatch btween 2.0 and 2.1</div>
<div class="line">[Wednesday 05 January 2011] [13:04:14] &lt;sustrik&gt;      aren&#8217;t there old headers lingering somewhere?</div>
<div class="line">[Wednesday 05 January 2011] [13:05:31] &lt;s0undt3ch&gt;    sustrik: yes, the distro ones</div>
<div class="line">[Wednesday 05 January 2011] [13:05:35] &lt;s0undt3ch&gt;    ie, probably</div>
<div class="line">[Wednesday 05 January 2011] [13:07:00] &lt;s0undt3ch&gt;    sustrik: I need to remove all distro headers?</div>
<div class="line">[Wednesday 05 January 2011] [13:07:13] &lt;s0undt3ch&gt;    sustrik: I&#8217;ve specified the path to the new ones though</div>
<div class="line">[Wednesday 05 January 2011] [13:08:04] &lt;sustrik&gt;      there&#8217;s some mismatch obviously</div>
<div class="line">[Wednesday 05 January 2011] [13:08:13] &lt;s0undt3ch&gt;    anyway I&#8217;ve downloaded the latest dev tar from the git downloads</div>
<div class="line">[Wednesday 05 January 2011] [13:08:14] &lt;sustrik&gt;      mikko should be able to help you with that</div>
<div class="line">[Wednesday 05 January 2011] [13:08:15] &lt;s0undt3ch&gt;    it now builds</div>
<div class="line">[Wednesday 05 January 2011] [13:08:17] &lt;s0undt3ch&gt;    though</div>
<div class="line">[Wednesday 05 January 2011] [13:08:43] &lt;s0undt3ch&gt;    <a class="reference external" href="http://paste.pocoo.org/show/315424/">http://paste.pocoo.org/show/315424/</a></div>
<div class="line">[Wednesday 05 January 2011] [13:15:37] &lt;s0undt3ch&gt;    it now does not finding the compiled lib</div>
<div class="line">[Wednesday 05 January 2011] [13:18:58] &lt;s0undt3ch&gt;    ok, tests work now</div>
<div class="line">[Wednesday 05 January 2011] [13:26:04] &lt;s0undt3ch&gt;    sustrik: there&#8217;s no ZMQ_FD example in pyzmq&#8217;s git is there?</div>
<div class="line">[Wednesday 05 January 2011] [13:26:28] &lt;sustrik&gt;      don&#8217;t know</div>
<div class="line">[Wednesday 05 January 2011] [13:26:38] &lt;sustrik&gt;      you shoud ask brian or minrk</div>
<div class="line">[Wednesday 05 January 2011] [13:26:46] &lt;sustrik&gt;      those are pyzmq authors</div>
<div class="line">[Wednesday 05 January 2011] [13:26:56] &lt;sustrik&gt;      you can talk to them via mailing list</div>
<div class="line">[Wednesday 05 January 2011] [13:27:37] &lt;sustrik&gt;      ale uz si podpisla zmluvu na preklad :}</div>
<div class="line">[Wednesday 05 January 2011] [13:28:22] &lt;sustrik&gt;      oops, sorry</div>
<div class="line">[Wednesday 05 January 2011] [13:33:16] &lt;mikko&gt;        back</div>
<div class="line">[Wednesday 05 January 2011] [13:33:39] &lt;s0undt3ch&gt;    mikko: hello there again!</div>
<div class="line">[Wednesday 05 January 2011] [13:33:58] &lt;s0undt3ch&gt;    mikko: I&#8217;ve sucessfully built zmq and pyzmq 2.1.0 on my machine</div>
<div class="line">[Wednesday 05 January 2011] [13:34:16] &lt;s0undt3ch&gt;    mikko: your work with the ZMQ_FD is it public?</div>
<div class="line">[Wednesday 05 January 2011] [13:34:47] &lt;s0undt3ch&gt;    ie, just to get me some pointers on where to go next</div>
<div class="line">[Wednesday 05 January 2011] [13:34:58] &lt;mikko&gt;        yes</div>
<div class="line">[Wednesday 05 January 2011] [13:35:23] &lt;mikko&gt;        this is the callback <a class="reference external" href="https://github.com/mkoppanen/httpush/blob/master/src/httpd.c#L170">https://github.com/mkoppanen/httpush/blob/master/src/httpd.c#L170</a></div>
<div class="line">[Wednesday 05 January 2011] [13:35:40] &lt;s0undt3ch&gt;    I can&#8217;t seem to find any examples in pyzmq</div>
<div class="line">[Wednesday 05 January 2011] [13:35:43] &lt;s0undt3ch&gt;    ah, C ;)</div>
<div class="line">[Wednesday 05 January 2011] [13:35:55] &lt;s0undt3ch&gt;    I&#8217;ll see if I can translate that to python....</div>
<div class="line">[Wednesday 05 January 2011] [13:35:59]         * s0undt3ch does not know C</div>
<div class="line">[Wednesday 05 January 2011] [13:36:25] &lt;mikko&gt;        initialized here <a class="reference external" href="https://github.com/mkoppanen/httpush/blob/master/src/server.c#L41">https://github.com/mkoppanen/httpush/blob/master/src/server.c#L41</a></div>
<div class="line">[Wednesday 05 January 2011] [13:36:28] &lt;mikko&gt;        yes, C</div>
<div class="line">[Wednesday 05 January 2011] [13:36:47] &lt;mikko&gt;        is zmq_getsockopt ZMQ_FD available in python?</div>
<div class="line">[Wednesday 05 January 2011] [13:40:13] &lt;s0undt3ch&gt;    mikko: in 2.1.0 yes</div>
<div class="line">[Wednesday 05 January 2011] [13:40:17] &lt;s0undt3ch&gt;    I was able to get the FD</div>
<div class="line">[Wednesday 05 January 2011] [13:40:35] &lt;mikko&gt;        now you probably want to look into gobject.add_watch</div>
<div class="line">[Wednesday 05 January 2011] [13:41:58] &lt;mikko&gt;        i think</div>
<div class="line">[Wednesday 05 January 2011] [13:42:29] &lt;mikko&gt;        <a class="reference external" href="http://www.pygtk.org/pygtk2reference/gobject-functions.html#function-gobject--io-add-watch">http://www.pygtk.org/pygtk2reference/gobject-functions.html#function-gobject&#8211;io-add-watch</a></div>
<div class="line">[Wednesday 05 January 2011] [13:42:32] &lt;mikko&gt;        this</div>
<div class="line">[Wednesday 05 January 2011] [13:43:01] &lt;mikko&gt;        pass the fd, gobject.IO_IN, and a callback</div>
<div class="line">[Wednesday 05 January 2011] [13:43:17] &lt;mikko&gt;        then in the callback you: zmq_getsockopt(ZMQ_EVENTS</div>
<div class="line">[Wednesday 05 January 2011] [13:43:24] &lt;mikko&gt;        and see if there are events available</div>
<div class="line">[Wednesday 05 January 2011] [13:43:28] &lt;mikko&gt;        and do a read</div>
<div class="line">[Wednesday 05 January 2011] [13:43:41] &lt;mikko&gt;        and remember that zeromq is edge-triggered rather than level-triggered</div>
<div class="line">[Wednesday 05 January 2011] [13:45:53] &lt;s0undt3ch&gt;    mikko: hmm, that means?</div>
<div class="line">[Wednesday 05 January 2011] [13:46:07] &lt;mikko&gt;        let&#8217;s say you got 3 messages waiting in the socket</div>
<div class="line">[Wednesday 05 January 2011] [13:46:13] &lt;mikko&gt;        your callback gets triggered</div>
<div class="line">[Wednesday 05 January 2011] [13:46:23] &lt;mikko&gt;        you need to read all events in one go in the callback</div>
<div class="line">[Wednesday 05 January 2011] [13:46:51] &lt;mikko&gt;        the fd only triggers event when the state changes rather than &#8220;until there are messages&#8221;</div>
<div class="line">[Wednesday 05 January 2011] [13:48:06] &lt;mikko&gt;        if you look at this callback <a class="reference external" href="https://github.com/mkoppanen/httpush/blob/master/src/httpd.c#L170">https://github.com/mkoppanen/httpush/blob/master/src/httpd.c#L170</a> you should understand the semantics even without understanding c</div>
<div class="line">[Wednesday 05 January 2011] [14:03:26] &lt;s0undt3ch&gt;    mikko: sorry, had to work a bit?</div>
<div class="line">[Wednesday 05 January 2011] [14:03:32] &lt;s0undt3ch&gt;    oops</div>
<div class="line">[Wednesday 05 January 2011] [14:03:43] &lt;s0undt3ch&gt;    forget the ?</div>
<div class="line">[Wednesday 05 January 2011] [14:03:51] &lt;s0undt3ch&gt;    mikko: I&#8217;ll have a look a that code</div>
<div class="line">[Wednesday 05 January 2011] [14:03:54] &lt;s0undt3ch&gt;    mikko: Thanks!</div>
<div class="line">[Wednesday 05 January 2011] [14:04:12] &lt;mikko&gt;        no problem</div>
<div class="line">[Wednesday 05 January 2011] [14:28:13] &lt;s0undt3ch&gt;    mikko: working python example -&gt; <a class="reference external" href="http://paste.pocoo.org/show/315462/">http://paste.pocoo.org/show/315462/</a></div>
<div class="line">[Wednesday 05 January 2011] [14:28:53] &lt;s0undt3ch&gt;    mikko: although I&#8217;m sending alot of messages, I aparently only handle one at a time, ie, events = subscriber.getsockopt(zmq.EVENTS) either returns 0 or 1</div>
<div class="line">[Wednesday 05 January 2011] [14:30:56] &lt;s0undt3ch&gt;    mikko: is there a way to test in order to get more than a single zmq message?</div>
<div class="line">[Wednesday 05 January 2011] [14:31:32] &lt;s0undt3ch&gt;    mikko: or socket.getsockopt(zmq.EVENTS) returns 0 or 1 in order to tell if there are events pending or not?</div>
<div class="line">[Wednesday 05 January 2011] [14:35:30] &lt;s0undt3ch&gt;    mikko: the same can be done for outgoing events?</div>
<div class="line">[Wednesday 05 January 2011] [14:35:30] &lt;mikko&gt;        if events == 0:</div>
<div class="line">[Wednesday 05 January 2011] [14:35:43] &lt;mikko&gt;        check if (events &amp; ZMQ_POLLIN)</div>
<div class="line">[Wednesday 05 January 2011] [14:36:23] &lt;mikko&gt;        s0undt3ch: you could start your socket</div>
<div class="line">[Wednesday 05 January 2011] [14:36:31] &lt;mikko&gt;        sleep 5 seconds while sending messages at other end</div>
<div class="line">[Wednesday 05 January 2011] [14:36:37] &lt;mikko&gt;        and see how many you get in the callback</div>
<div class="line">[Wednesday 05 January 2011] [14:36:50] &lt;mikko&gt;        hmm that might not work well</div>
<div class="line">[Wednesday 05 January 2011] [14:36:55] &lt;mikko&gt;        or you could sleep in the callback</div>
<div class="line">[Wednesday 05 January 2011] [14:37:11] &lt;mikko&gt;        ah now i see</div>
<div class="line">[Wednesday 05 January 2011] [14:37:13] &lt;mikko&gt;        print &#8216;GOT&#8217;, events, &#8216;EVENTS&#8217;</div>
<div class="line">[Wednesday 05 January 2011] [14:37:22] &lt;s0undt3ch&gt;    mikko: I tried sleeping in the callback, 1 message every time</div>
<div class="line">[Wednesday 05 January 2011] [14:37:25] &lt;mikko&gt;        events is a bitmask rather than number of events</div>
<div class="line">[Wednesday 05 January 2011] [14:37:29] &lt;s0undt3ch&gt;    ah</div>
<div class="line">[Wednesday 05 January 2011] [14:38:13] &lt;s0undt3ch&gt;    mikko: so &#8220;if events and zmq.POLLIN: break&#8221; right?</div>
<div class="line">[Wednesday 05 January 2011] [14:38:40] &lt;mikko&gt;        if (events &amp; zmq.POLLIN)</div>
<div class="line">[Wednesday 05 January 2011] [14:38:48] &lt;mikko&gt;        you can also check for if (events &amp; zmq.POLLERR</div>
<div class="line">[Wednesday 05 January 2011] [14:39:36] &lt;s0undt3ch&gt;    thats in case of errors right?</div>
<div class="line">[Wednesday 05 January 2011] [14:40:15] &lt;s0undt3ch&gt;    recv() reads every message? or single message everytime?</div>
<div class="line">[Wednesday 05 January 2011] [14:41:11] &lt;mikko&gt;        single message at a time</div>
<div class="line">[Wednesday 05 January 2011] [14:41:14] &lt;mikko&gt;        thats why you loop</div>
<div class="line">[Wednesday 05 January 2011] [14:41:47] &lt;s0undt3ch&gt;    ok</div>
<div class="line">[Wednesday 05 January 2011] [14:42:08] &lt;s0undt3ch&gt;    so, it&#8217;s working correctly, ie, with the changes you&#8217;ve said</div>
<div class="line">[Wednesday 05 January 2011] [14:45:12] &lt;mikko&gt;        it sounds like so</div>
<div class="line">[Wednesday 05 January 2011] [14:52:15] &lt;s0undt3ch&gt;    mikko: in case of (events &amp; zmq.POLLERR) can we get the error?</div>
<div class="line">[Wednesday 05 January 2011] [14:53:16] &lt;mikko&gt;        im not sure</div>
<div class="line">[Wednesday 05 January 2011] [14:53:39] &lt;mikko&gt;        errno might or might not contain it</div>
<div class="line">[Wednesday 05 January 2011] [14:55:29] &lt;s0undt3ch&gt;    k</div>
<div class="line">[Wednesday 05 January 2011] [15:36:19] &lt;s0undt3ch&gt;    mikko: can it also be done for zmq.POLLOUT? or this does not make that much sense?</div>
<div class="line">[Wednesday 05 January 2011] [15:36:47] &lt;s0undt3ch&gt;    since in order to send a message we have to call .send()</div>
<div class="line">[Wednesday 05 January 2011] [15:36:57] &lt;s0undt3ch&gt;    which would send</div>
<div class="line">[Wednesday 05 January 2011] [15:37:03] &lt;mikko&gt;        yes, it ca be done with pollout as well</div>
<div class="line">[Wednesday 05 January 2011] [15:37:05] &lt;s0undt3ch&gt;    hmm, doesn&#8217;t make that much sense</div>
<div class="line">[Wednesday 05 January 2011] [15:37:12] &lt;mikko&gt;        send could block</div>
<div class="line">[Wednesday 05 January 2011] [15:37:45] &lt;mikko&gt;        so you could either do a non-blocking send and check for the return code (EAGAIN) or poll</div>
<div class="line">[Wednesday 05 January 2011] [15:38:30] &lt;mikko&gt;        it might be easier just to send with ZMQ_NOBLOCK</div>
<div class="line">[Wednesday 05 January 2011] [15:38:34] &lt;mikko&gt;        and check for EINVAL</div>
<div class="line">[Wednesday 05 January 2011] [15:38:42] &lt;mikko&gt;        depending on socket type it might not even block</div>
<div class="line">[Wednesday 05 January 2011] [15:41:25] &lt;s0undt3ch&gt;    so, socket.send(msg, zmq.NOBLOCK) and have gobject listening on the fd for gobject.IO_OUT, then on the callback check for zmq.EINVAL meaning message was completely sent?</div>
<div class="line">[Wednesday 05 January 2011] [15:44:27] &lt;s0undt3ch&gt;    mikko: makes sense?</div>
<div class="line">[Wednesday 05 January 2011] [15:44:41] &lt;mikko&gt;        no</div>
<div class="line">[Wednesday 05 January 2011] [15:44:56] &lt;mikko&gt;        socket.send(msg, zmq.NOBLOCK)</div>
<div class="line">[Wednesday 05 January 2011] [15:45:00] &lt;mikko&gt;        then check errno</div>
<div class="line">[Wednesday 05 January 2011] [15:45:17] &lt;mikko&gt;        if errno == einval, schedule gobject io_out</div>
<div class="line">[Wednesday 05 January 2011] [15:45:26] &lt;mikko&gt;        and send message when it&#8217;s signaled ready</div>
<div class="line">[Wednesday 05 January 2011] [15:45:27] &lt;mikko&gt;        maybe</div>
<div class="line">[Wednesday 05 January 2011] [15:57:56] &lt;s0undt3ch&gt;    mikko: my example -&gt; <a class="reference external" href="http://paste.pocoo.org/show/315517/">http://paste.pocoo.org/show/315517/</a> &lt;- though I don&#8217;t think it makes that much sense</div>
<div class="line">[Wednesday 05 January 2011] [15:58:31] &lt;s0undt3ch&gt;    and I don&#8217;t know how to schedule a gobject io_out</div>
<div class="line">[Wednesday 05 January 2011] [16:01:33] &lt;s0undt3ch&gt;    messages get through, but I don&#8217;t think this is what you were saying</div>
<div class="line">[Wednesday 05 January 2011] [16:05:31] &lt;mikko&gt;        ZMQ_PUB socket wont block</div>
<div class="line">[Wednesday 05 January 2011] [16:05:43] &lt;mikko&gt;        so you dont need to worry about that really</div>
<div class="line">[Wednesday 05 January 2011] [16:06:46] &lt;s0undt3ch&gt;    mikko: REQ/REP will?</div>
<div class="line">[Wednesday 05 January 2011] [16:07:05] &lt;s0undt3ch&gt;    the purpose of this was actually for REQ/REP</div>
<div class="line">[Wednesday 05 January 2011] [16:07:18] &lt;mikko&gt;        some sockets block depending on situation</div>
<div class="line">[Wednesday 05 January 2011] [16:07:20] &lt;s0undt3ch&gt;    PUB/SUB was some existing code I had lying arround</div>
<div class="line">[Wednesday 05 January 2011] [16:07:59] &lt;mikko&gt;        let me see if i can write understandable python</div>
<div class="line">[Wednesday 05 January 2011] [16:08:43] &lt;s0undt3ch&gt;    ah</div>
<div class="line">[Wednesday 05 January 2011] [16:08:54] &lt;s0undt3ch&gt;    making those REQ/REP I&#8217;m getting Operation cannot be accomplished in current state</div>
<div class="line">[Wednesday 05 January 2011] [16:09:22] &lt;s0undt3ch&gt;    mikko: that would be wonderful!</div>
<div class="line">[Wednesday 05 January 2011] [16:09:25] &lt;mikko&gt;        where you have if e.errno == zmq.EINVAL:</div>
<div class="line">[Wednesday 05 January 2011] [16:09:44] &lt;mikko&gt;        if you check for zmq.EAGAIN</div>
<div class="line">[Wednesday 05 January 2011] [16:09:53] &lt;mikko&gt;        EAGAIN means that the operation would have blocked</div>
<div class="line">[Wednesday 05 January 2011] [16:10:01] &lt;mikko&gt;        so if e.errno == zmq.EAGAIN</div>
<div class="line">[Wednesday 05 January 2011] [16:10:10] &lt;mikko&gt;        schedule io watcher there for IO_OUT</div>
<div class="line">[Wednesday 05 January 2011] [16:10:21] &lt;mikko&gt;        it should be called when the socket becomes writable</div>
<div class="line">[Wednesday 05 January 2011] [16:10:33] &lt;mikko&gt;        and in the callback:</div>
<div class="line">[Wednesday 05 January 2011] [16:10:41] &lt;mikko&gt;        if you have sent everything, do not reschedule event</div>
<div class="line">[Wednesday 05 January 2011] [16:10:57] &lt;mikko&gt;        if you get EAGAIN in the callback before sending all messages, reschedule event</div>
<div class="line">[Wednesday 05 January 2011] [16:11:03] &lt;mikko&gt;        do you follow?</div>
<div class="line">[Wednesday 05 January 2011] [16:11:07] &lt;s0undt3ch&gt;    mikko: I think so</div>
<div class="line">[Wednesday 05 January 2011] [16:11:21] &lt;mikko&gt;        let&#8217;s say you need to send out 100 messages</div>
<div class="line">[Wednesday 05 January 2011] [16:11:33] &lt;mikko&gt;        you are happily sending messages but on message 59 you get EAGAIN</div>
<div class="line">[Wednesday 05 January 2011] [16:11:57] &lt;mikko&gt;        which means that the operation would block. so you schedule io_watcher for the outgoing socket</div>
<div class="line">[Wednesday 05 January 2011] [16:12:12] &lt;mikko&gt;        the callback gets called when the socket is ready to receive more message</div>
<div class="line">[Wednesday 05 January 2011] [16:12:13] &lt;mikko&gt;        s</div>
<div class="line">[Wednesday 05 January 2011] [16:12:24] &lt;mikko&gt;        so then you keep on sending where you left</div>
<div class="line">[Wednesday 05 January 2011] [16:12:55] &lt;mikko&gt;        if you hit EAGAIN then return true (that seems to be the way gobject reschedules the event)</div>
<div class="line">[Wednesday 05 January 2011] [16:13:03] &lt;mikko&gt;        if you have sent everything return false</div>
<div class="line">[Wednesday 05 January 2011] [16:18:30] Notice -NickServ- This nickname is registered. Please choose a different nickname, or identify via /msg NickServ identify &lt;password&gt;.</div>
<div class="line">[Wednesday 05 January 2011] [16:18:30] Notice -NickServ- You are now identified for travlr.</div>
<div class="line">[Wednesday 05 January 2011] [16:24:41] &lt;s0undt3ch&gt;    mikko: as it is now -&gt; <a class="reference external" href="http://paste.pocoo.org/show/315529/">http://paste.pocoo.org/show/315529/</a> &lt;- I&#8217;m getting &#8220;Operation cannot be accomplished in current state&#8221;, errno is 156384763</div>
<div class="line">[Wednesday 05 January 2011] [16:24:55] &lt;s0undt3ch&gt;    ie, no messages are beeing sent as it is</div>
<div class="line">[Wednesday 05 January 2011] [16:31:10] &lt;mikko&gt;        request-reply is strict on the pattern</div>
<div class="line">[Wednesday 05 January 2011] [16:31:26] &lt;mikko&gt;        recv -&gt; send -&gt; recv -&gt; send etc</div>
<div class="line">[Wednesday 05 January 2011] [16:31:48] &lt;s0undt3ch&gt;    ah, the socket hasn&#8217;t received anyting so it can&#8217;t send</div>
<div class="line">[Wednesday 05 January 2011] [16:32:27] &lt;s0undt3ch&gt;    I think for now I won&#8217;t worry about this, right now I&#8217;m worried about async handling on incoming messages</div>
<div class="line">[Wednesday 05 January 2011] [16:51:14] &lt;mikko&gt;        s0undt3ch: you might want to look into XREP/XREQ as well</div>
<div class="line">[Wednesday 05 January 2011] [16:51:31] &lt;s0undt3ch&gt;    mikko: big diferences?</div>
<div class="line">[Wednesday 05 January 2011] [16:51:53] &lt;s0undt3ch&gt;    mikko: I&#8217;m looking at REQ/REP to create a kind of rpc through zmq messaging</div>
<div class="line">[Wednesday 05 January 2011] [16:52:05] &lt;s0undt3ch&gt;    <a href="#id9"><span class="problematic" id="id10">*</span></a>rpc client/server</div>
<div class="line">[Wednesday 05 January 2011] [16:59:56] &lt;mikko&gt;        then maybe rep/req might be in place</div>
<div class="line">[Wednesday 05 January 2011] [17:00:03] &lt;mikko&gt;        are you going to have multiple worker processes?</div>
<div class="line">[Wednesday 05 January 2011] [17:01:20] &lt;s0undt3ch&gt;    mikko: yes, different ones, ie, each worker, the replier, will handle a specific job, the rpc is for them</div>
<div class="line">[Wednesday 05 January 2011] [17:01:32] &lt;s0undt3ch&gt;    mikko: my &#8220;problem&#8221; at hands is</div>
<div class="line">[Wednesday 05 January 2011] [17:02:52] &lt;s0undt3ch&gt;    I&#8217;ll have several processes analysing diferent audio sources through gstreamer. when a problem on that audio source is found, a pub message is sent. However then need to be controllable, hence the rpc(REQ) need for them</div>
<div class="line">[Wednesday 05 January 2011] [17:03:08] &lt;s0undt3ch&gt;    s/then need/they need/</div>
<div class="line">[Wednesday 05 January 2011] [17:03:43] &lt;s0undt3ch&gt;    a client should be able to control a single or all of those gstreamer processes</div>
<div class="line">[Wednesday 05 January 2011] [17:24:47] &lt;s0undt3ch&gt;    mikko: does my needs apply for XREQ/XREP?</div>
<div class="line">[Wednesday 05 January 2011] [17:25:09] &lt;mikko&gt;        probably not</div>
<div class="line">[Wednesday 05 January 2011] [17:25:17] &lt;mikko&gt;        xreq/xrep doesn&#8217;t enforce the pattern</div>
<div class="line">[Wednesday 05 January 2011] [17:25:22] &lt;mikko&gt;        recv/send/recv/send</div>
<div class="line">[Wednesday 05 January 2011] [17:27:30] &lt;s0undt3ch&gt;    ah ok</div>
<div class="line">[Wednesday 05 January 2011] [17:27:54] &lt;s0undt3ch&gt;    mikko: those would be good for my testing needs, but not for the actual project</div>
<div class="line">[Wednesday 05 January 2011] [17:27:56] &lt;s0undt3ch&gt;    Thanks!</div>
<div class="line">[Wednesday 05 January 2011] [18:26:58] &lt;s0undt3ch&gt;    on a rep socket, can we know &#8220;who&#8221; is making the request?</div>
<div class="line">[Thursday 06 January 2011] [01:52:43] &lt;Malinga&gt;       hi all i have a question to be asked</div>
<div class="line">[Thursday 06 January 2011] [01:53:35] &lt;Malinga&gt;       about how to use OpenAMQ or ZeroMQ to deliver market data (quote server)</div>
<div class="line">[Thursday 06 January 2011] [01:53:44] &lt;Malinga&gt;       <a href="#id11"><span class="problematic" id="id12">*</span></a>effectively</div>
<div class="line">[Thursday 06 January 2011] [01:56:00] &lt;Malinga&gt;       hi any one there to help my technical question</div>
<div class="line">[Thursday 06 January 2011] [02:00:54] &lt;sustrik&gt;       what&#8217;s the problem?</div>
<div class="line">[Thursday 06 January 2011] [02:02:48] &lt;Malinga&gt;       We are developing a Quote Server which will be handel the market data and deliver it to the end client</div>
<div class="line">[Thursday 06 January 2011] [02:02:59] &lt;Malinga&gt;       we are think of using a SOA architecture for this</div>
<div class="line">[Thursday 06 January 2011] [02:03:46] &lt;Malinga&gt;       So can u tell me some information how to use OpenAMQ to make this happen</div>
<div class="line">[Thursday 06 January 2011] [02:04:06] &lt;guido_g&gt;       hrhrhr</div>
<div class="line">[Thursday 06 January 2011] [02:04:10] &lt;Malinga&gt;       i used openamq 3 years back in my previous company as a middleware</div>
<div class="line">[Thursday 06 January 2011] [02:04:12] &lt;guido_g&gt;       sorry</div>
<div class="line">[Thursday 06 January 2011] [02:04:37] &lt;sustrik&gt;       openamq or 0mq?</div>
<div class="line">[Thursday 06 January 2011] [02:04:42] &lt;Malinga&gt;       but now i want to use it to deliver market data effectlvely and use this openAMQ as a quote server</div>
<div class="line">[Thursday 06 January 2011] [02:04:52] &lt;Malinga&gt;       any idas ?</div>
<div class="line">[Thursday 06 January 2011] [02:04:52] &lt;guido_g&gt;       you did realize that zeromq is not related to openamq?</div>
<div class="line">[Thursday 06 January 2011] [02:05:09] &lt;Malinga&gt;       if zeroMQ is better approach i can use ithat even</div>
<div class="line">[Thursday 06 January 2011] [02:06:03] &lt;guido_g&gt;       no its not better</div>
<div class="line">[Thursday 06 January 2011] [02:06:10] &lt;guido_g&gt;       its different</div>
<div class="line">[Thursday 06 January 2011] [02:06:20] &lt;Malinga&gt;       any architecture gudes that u can give sustrik ...</div>
<div class="line">[Thursday 06 January 2011] [02:08:21] &lt;Malinga&gt;       so can i use zero MQ for my senario</div>
<div class="line">[Thursday 06 January 2011] [02:08:26] &lt;sustrik&gt;       Malinga: on the quote publisher open a PUB socket</div>
<div class="line">[Thursday 06 January 2011] [02:08:32] &lt;sustrik&gt;       send the quotes to the socket</div>
<div class="line">[Thursday 06 January 2011] [02:08:42] &lt;sustrik&gt;       on clients, open a SUB socket</div>
<div class="line">[Thursday 06 January 2011] [02:08:54] &lt;sustrik&gt;       do your subscriptions</div>
<div class="line">[Thursday 06 January 2011] [02:09:00] &lt;sustrik&gt;       and recv() the messages</div>
<div class="line">[Thursday 06 January 2011] [02:09:02] &lt;sustrik&gt;       that&#8217;s all</div>
<div class="line">[Thursday 06 January 2011] [02:09:04] &lt;Malinga&gt;       listning</div>
<div class="line">[Thursday 06 January 2011] [02:09:39] &lt;Malinga&gt;       this is via openAMQ right ?</div>
<div class="line">[Thursday 06 January 2011] [02:09:48] &lt;sustrik&gt;       no, it&#8217;s 0mq</div>
<div class="line">[Thursday 06 January 2011] [02:09:53] &lt;Malinga&gt;       sorry</div>
<div class="line">[Thursday 06 January 2011] [02:09:54] &lt;Malinga&gt;       ok</div>
<div class="line">[Thursday 06 January 2011] [02:10:16] &lt;Malinga&gt;       so u think we can use the 0MQ to our market data quote server ?</div>
<div class="line">[Thursday 06 January 2011] [02:10:23] &lt;sustrik&gt;       yes</div>
<div class="line">[Thursday 06 January 2011] [02:10:27] &lt;Malinga&gt;       cool</div>
<div class="line">[Thursday 06 January 2011] [02:10:39] &lt;sustrik&gt;       have a look at 0mq guide</div>
<div class="line">[Thursday 06 January 2011] [02:10:45] &lt;Malinga&gt;       do u have some high level architecture on this is possible</div>
<div class="line">[Thursday 06 January 2011] [02:10:58] &lt;sustrik&gt;       there&#8217;s an example of &#8211; i think &#8211; distributing weather forecase</div>
<div class="line">[Thursday 06 January 2011] [02:11:03] &lt;sustrik&gt;       forecast</div>
<div class="line">[Thursday 06 January 2011] [02:11:12] &lt;Malinga&gt;       hmmm</div>
<div class="line">[Thursday 06 January 2011] [02:11:21] &lt;sustrik&gt;       it&#8217;s basically the same as you need for stock quotes</div>
<div class="line">[Thursday 06 January 2011] [02:11:52] &lt;Malinga&gt;       so like in openAMQ do we have to have per symbol queues sorry i dont have much ida about 0MQ</div>
<div class="line">[Thursday 06 January 2011] [02:12:39] &lt;sustrik&gt;       what do you need it for?</div>
<div class="line">[Thursday 06 January 2011] [02:12:55] &lt;sustrik&gt;       fair balancing between individual symbols?</div>
<div class="line">[Thursday 06 January 2011] [02:14:16] &lt;Malinga&gt;       u mean per symbol queues ?</div>
<div class="line">[Thursday 06 January 2011] [02:16:33] &lt;Malinga&gt;       what is the better open 0MQ or OpenAMQ for my quote server</div>
<div class="line">[Thursday 06 January 2011] [02:17:07] &lt;sustrik&gt;       openamq is a legacy technology</div>
<div class="line">[Thursday 06 January 2011] [02:17:15] &lt;sustrik&gt;       so i would recommend 0mq</div>
<div class="line">[Thursday 06 January 2011] [02:17:22] &lt;sustrik&gt;       it&#8217;s also much easier to use</div>
<div class="line">[Thursday 06 January 2011] [02:17:31] &lt;sustrik&gt;       and you don&#8217;t need the broker</div>
<div class="line">[Thursday 06 January 2011] [02:17:39] &lt;sustrik&gt;       which makes administration easier</div>
<div class="line">[Thursday 06 January 2011] [02:17:47] &lt;Malinga&gt;       cool</div>
<div class="line">[Thursday 06 January 2011] [02:18:14] &lt;Malinga&gt;       but our entire application (end clients) is in Java and hope to write back end also in java</div>
<div class="line">[Thursday 06 January 2011] [02:18:21] &lt;sustrik&gt;       sure</div>
<div class="line">[Thursday 06 January 2011] [02:18:29] &lt;sustrik&gt;       check java 0mq bindings</div>
<div class="line">[Thursday 06 January 2011] [02:18:35] &lt;Malinga&gt;       u have java wrappers right ?</div>
<div class="line">[Thursday 06 January 2011] [02:18:38] &lt;sustrik&gt;       yes</div>
<div class="line">[Thursday 06 January 2011] [02:19:06] &lt;Malinga&gt;       realiable as C++ ? i mean java wrappers ?</div>
<div class="line">[Thursday 06 January 2011] [02:19:19] &lt;sustrik&gt;       it&#8217;s wrapper on top of C</div>
<div class="line">[Thursday 06 January 2011] [02:19:27] &lt;sustrik&gt;       so it&#8217;s the same thing</div>
<div class="line">[Thursday 06 January 2011] [02:19:31] &lt;Malinga&gt;       JNI /</div>
<div class="line">[Thursday 06 January 2011] [02:19:34] &lt;Malinga&gt;       JNI ?</div>
<div class="line">[Thursday 06 January 2011] [02:19:34] &lt;sustrik&gt;       yes</div>
<div class="line">[Thursday 06 January 2011] [02:19:37] &lt;Malinga&gt;       hmmm</div>
<div class="line">[Thursday 06 January 2011] [02:19:39] &lt;Malinga&gt;       ok</div>
<div class="line">[Thursday 06 January 2011] [02:19:44] &lt;Malinga&gt;       let me read 0MQ</div>
<div class="line">[Thursday 06 January 2011] [02:19:53] &lt;Malinga&gt;       and come back to u in a few days</div>
<div class="line">[Thursday 06 January 2011] [02:20:12] &lt;sustrik&gt;       you are welcome</div>
<div class="line">[Thursday 06 January 2011] [02:20:52] &lt;Malinga&gt;       anyway thanks so much for all those informatin, i still can remember u helped me allot (u may not rememebr now) few years back also</div>
<div class="line">[Thursday 06 January 2011] [02:21:06] &lt;Malinga&gt;       when im doing another system with openAMQ</div>
<div class="line">[Thursday 06 January 2011] [02:21:11] &lt;Malinga&gt;       it was a gr8 sucess</div>
<div class="line">[Thursday 06 January 2011] [02:21:14] &lt;Malinga&gt;       thanks</div>
<div class="line">[Thursday 06 January 2011] [02:21:18] &lt;Malinga&gt;       and bye for now</div>
<div class="line">[Thursday 06 January 2011] [02:21:40] &lt;sustrik&gt;       i remember your nick :)</div>
<div class="line">[Thursday 06 January 2011] [02:21:42] &lt;sustrik&gt;       see you</div>
<div class="line">[Thursday 06 January 2011] [02:42:31] &lt;CIA-21&gt;        zeromq2: 03Min Ragan-Kelley 07master * r08cd2ce 10/ (AUTHORS include/zmq.h include/zmq_utils.h):</div>
<div class="line">[Thursday 06 January 2011] [02:42:31] &lt;CIA-21&gt;        zeromq2: resolve &#8220;function declaration isn&#8217;t a prototype&#8221;</div>
<div class="line">[Thursday 06 January 2011] [02:42:31] &lt;CIA-21&gt;        zeromq2: change two declarations in headers to form f(void); instead of f();</div>
<div class="line">[Thursday 06 January 2011] [02:42:31] &lt;CIA-21&gt;        zeromq2: which eliminates the warnings when compiling against zeromq</div>
<div class="line">[Thursday 06 January 2011] [02:42:31] &lt;CIA-21&gt;        zeromq2: Signed-off-by: MinRK &lt;<a class="reference external" href="mailto:benjaminrk&#37;&#52;&#48;gmail&#46;com">benjaminrk<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/fIJTkE">http://bit.ly/fIJTkE</a></div>
<div class="line">[Thursday 06 January 2011] [04:14:13] &lt;mikko&gt; good morning</div>
<div class="line">[Thursday 06 January 2011] [04:29:44] &lt;sustrik&gt;       morning</div>
<div class="line">[Thursday 06 January 2011] [05:13:38] &lt;jugg&gt;  After calling zmq_send(..., ZMQ_SNDMORE), is there a way to abort the transfer without sending the final message part?  eg. If an application error occurs disallowing sending the final part(s), is closing the socket the only way to recover?</div>
<div class="line">[Thursday 06 January 2011] [05:16:03] &lt;jugg&gt;  A reset socket option would be nice...</div>
<div class="line">[Thursday 06 January 2011] [05:18:24] &lt;mikko&gt; you mean reset as in send empty message part or a part flagged as &#8220;reset&#8221; ?</div>
<div class="line">[Thursday 06 January 2011] [05:32:55] &lt;jugg&gt;  I mean, abort the sending of the message parts (don&#8217;t send them over the wire).  Which they aren&#8217;t at this point.   However, currently either you have to send another message without sndmore set, thus the entire bad message is put on the wire, or you have to close the socket.</div>
<div class="line">[Thursday 06 January 2011] [05:35:38] &lt;sustrik&gt;       jugg: what are you trying to achieve?</div>
<div class="line">[Thursday 06 January 2011] [05:35:56] &lt;sustrik&gt;       how come the message is &#8220;bad&#8221;?</div>
<div class="line">[Thursday 06 January 2011] [05:36:26] &lt;jugg&gt;  the message is incomplete... the application code generating the message parts can not finish.</div>
<div class="line">[Thursday 06 January 2011] [05:37:23] &lt;jugg&gt;  Of course, the application code could wait until the entire message is built, but that isn&#8217;t always interesting.</div>
<div class="line">[Thursday 06 January 2011] [05:38:12] &lt;sustrik&gt;       so what happens?</div>
<div class="line">[Thursday 06 January 2011] [05:38:17] &lt;sustrik&gt;       something like timeout?</div>
<div class="line">[Thursday 06 January 2011] [05:38:50] &lt;jugg&gt;  the application would like to go on to start building another message, but it can not send a new message until the old one completes.  So it either has to allow a bad message to be sent, or close the socket.</div>
<div class="line">[Thursday 06 January 2011] [05:39:20] &lt;sustrik&gt;       i mean, how come the message is bad?</div>
<div class="line">[Thursday 06 January 2011] [05:39:26] &lt;jugg&gt;  it is incomplete</div>
<div class="line">[Thursday 06 January 2011] [05:39:37] &lt;sustrik&gt;       why are you sending it then?</div>
<div class="line">[Thursday 06 January 2011] [05:40:02] &lt;jugg&gt;  because it is sent as it is built.</div>
<div class="line">[Thursday 06 January 2011] [05:40:09] &lt;sustrik&gt;       hm</div>
<div class="line">[Thursday 06 January 2011] [05:40:35] &lt;sustrik&gt;       that&#8217;s not what multi-part messages are for</div>
<div class="line">[Thursday 06 January 2011] [05:40:36] &lt;jugg&gt;  obviously a solution is to wait to send until it is fully built, but...</div>
<div class="line">[Thursday 06 January 2011] [05:40:56] &lt;sustrik&gt;       the goal is not to hold the list of message parts on behalf of the user</div>
<div class="line">[Thursday 06 January 2011] [05:41:05] &lt;sustrik&gt;       it&#8217;s more like gather/scatter array</div>
<div class="line">[Thursday 06 January 2011] [05:41:23] &lt;sustrik&gt;       allowing for zero-copy of data that is not placed in contiguous memory</div>
<div class="line">[Thursday 06 January 2011] [05:41:58] &lt;sustrik&gt;       i would suggest holding the message parts in your app</div>
<div class="line">[Thursday 06 January 2011] [05:41:59] &lt;jugg&gt;  yes, I&#8217;m aware of what it is designed for... But that doesn&#8217;t mean I won&#8217;t try to extend its use case...</div>
<div class="line">[Thursday 06 January 2011] [05:42:06] &lt;sustrik&gt;       and sending only when the message is complete</div>
<div class="line">[Thursday 06 January 2011] [05:42:17] &lt;sustrik&gt;       sure, go on :)</div>
<div class="line">[Thursday 06 January 2011] [05:43:16] &lt;jugg&gt;  a socket reset option would help.  - for other reasons as well, but I know I&#8217;ll get more flac for those.. :)</div>
<div class="line">[Thursday 06 January 2011] [05:43:52] &lt;jugg&gt;  btw, I&#8217;ll probably hit you up for erlzmq access tomorrow... it seems to be working well.</div>
<div class="line">[Thursday 06 January 2011] [05:44:08] &lt;jugg&gt;  Still a few more test cases to check.</div>
<div class="line">[Thursday 06 January 2011] [05:44:24] &lt;sustrik&gt;       well, my concert is that the option would bind the API to particular implementation</div>
<div class="line">[Thursday 06 January 2011] [05:44:28] &lt;sustrik&gt;       ie.</div>
<div class="line">[Thursday 06 January 2011] [05:45:03] &lt;sustrik&gt;       currently the code can be rewritten/optimised in such a way that message parts are sent over the wire</div>
<div class="line">[Thursday 06 January 2011] [05:45:11] &lt;sustrik&gt;       even if the message is not fully sent</div>
<div class="line">[Thursday 06 January 2011] [05:45:18] &lt;sustrik&gt;       and cached on the receiver side</div>
<div class="line">[Thursday 06 January 2011] [05:45:46] &lt;sustrik&gt;       if the connection breaks, the cached message parts would be discarded</div>
<div class="line">[Thursday 06 January 2011] [05:46:07] &lt;jugg&gt;  you&#8217;d have to send an abort message then, so the receiver could discard the incomplete parts.</div>
<div class="line">[Thursday 06 January 2011] [05:46:11] &lt;sustrik&gt;       the rollback option would then require to extent the wire protocol</div>
<div class="line">[Thursday 06 January 2011] [05:46:21] &lt;sustrik&gt;       exactly</div>
<div class="line">[Thursday 06 January 2011] [05:46:31] &lt;jugg&gt;  I see</div>
<div class="line">[Thursday 06 January 2011] [05:46:43] &lt;sustrik&gt;       the interactions are quite complex</div>
<div class="line">[Thursday 06 January 2011] [05:47:11] &lt;sustrik&gt;       now, doing that just to not force user to keep a simple list of message parts seems an overkill</div>
<div class="line">[Thursday 06 January 2011] [05:48:04] &lt;sustrik&gt;       in more generic terms, 0mq was designed to implement the minimal possible subset of features</div>
<div class="line">[Thursday 06 January 2011] [05:48:20] &lt;sustrik&gt;       everytihng that can be build on top was deliberately eliminated</div>
<div class="line">[Thursday 06 January 2011] [05:48:47] &lt;sustrik&gt;       so, if you want this kind of thing, just go on, implement a wrapper on top on 0mq</div>
<div class="line">[Thursday 06 January 2011] [05:49:22] &lt;sustrik&gt;       or maybe a whole stack layer that would provide all kind of additional functionality</div>
<div class="line">[Thursday 06 January 2011] [05:49:24] &lt;jugg&gt;  Well, that view point simplifies a problem I was having with the erlang bindings... :)</div>
<div class="line">[Thursday 06 January 2011] [05:53:38] &lt;jugg&gt;  I have to run.  Thanks for the explanation.  Combined with the discussion we had some time ago where I wanted zmq to send each part over the wire as it was received, I might be starting to &#8216;get&#8217; it :)</div>
<div class="line">[Thursday 06 January 2011] [05:54:14] &lt;sustrik&gt;       it&#8217;s simply avoinding the feature creep</div>
<div class="line">[Thursday 06 January 2011] [05:54:26] &lt;sustrik&gt;       see you later</div>
<div class="line">[Thursday 06 January 2011] [06:38:52] &lt;parik&gt; Hi</div>
<div class="line">[Thursday 06 January 2011] [06:40:03] &lt;sustrik&gt;       hi</div>
<div class="line">[Thursday 06 January 2011] [06:40:37] &lt;parik&gt; I was going through 0MQ src and found that it is based on PGM protocol.So i studied first PGM protocol and it was intersting need to know about multicasting</div>
<div class="line">[Thursday 06 January 2011] [06:41:43] &lt;parik&gt; Like how no acknowledgment for successful delievery and negative acks for data loss and duplication of packet by the router</div>
<div class="line">[Thursday 06 January 2011] [06:42:43] &lt;parik&gt; and hence reduce Server Load  and Network Load</div>
<div class="line">[Thursday 06 January 2011] [06:43:17] &lt;parik&gt; Do i need to download open PGM to make 0MQ work</div>
<div class="line">[Thursday 06 January 2011] [06:44:26] &lt;parik&gt; I am not getting the defintion for pgm_init..I looked around in PGM also</div>
<div class="line">[Thursday 06 January 2011] [06:44:50] &lt;parik&gt; Hi Sustrik are you there</div>
<div class="line">[Thursday 06 January 2011] [06:44:58] &lt;sustrik&gt;       parik: 0mq is multi-protocol</div>
<div class="line">[Thursday 06 January 2011] [06:45:17] &lt;sustrik&gt;       so you have tcp as well as pgm</div>
<div class="line">[Thursday 06 January 2011] [06:45:31] &lt;sustrik&gt;       if you don&#8217;t need mutlicast you can just ignore pgm</div>
<div class="line">[Thursday 06 January 2011] [06:45:56] &lt;sustrik&gt;       if you need it, openpgm is packaged with 0mq (see foreign/openpgm subdir)</div>
<div class="line">[Thursday 06 January 2011] [06:46:21] &lt;sustrik&gt;       to build 0mq <em>with</em> pgm you need to add an option to confiuger:</div>
<div class="line">[Thursday 06 January 2011] [06:46:23] &lt;parik&gt; Thanks Sustrik.</div>
<div class="line">[Thursday 06 January 2011] [06:46:26] &lt;sustrik&gt;       ./configure &#8211;with-pgm</div>
<div class="line">[Thursday 06 January 2011] [06:46:44] &lt;mikko&gt; does openpgm maintain ABI?</div>
<div class="line">[Thursday 06 January 2011] [06:46:49] &lt;parik&gt; ok.Thanks alot.</div>
<div class="line">[Thursday 06 January 2011] [06:46:57] &lt;parik&gt; What is ABI</div>
<div class="line">[Thursday 06 January 2011] [06:46:58] &lt;mikko&gt; i&#8217;m wondering if packaging openpgm with 0mq makes sense in long-term</div>
<div class="line">[Thursday 06 January 2011] [06:47:14] &lt;mikko&gt; application binary interface</div>
<div class="line">[Thursday 06 January 2011] [06:47:17] &lt;sustrik&gt;       it would be better to have an separate openpgm package</div>
<div class="line">[Thursday 06 January 2011] [06:47:30] &lt;sustrik&gt;       but so far it doesn&#8217;t look like that</div>
<div class="line">[Thursday 06 January 2011] [06:47:45] &lt;parik&gt; Thanks Mikko</div>
<div class="line">[Thursday 06 January 2011] [06:47:55] &lt;mikko&gt; the main problem with current implementation being hard to upgrade and added maintenance for 0mq project</div>
<div class="line">[Thursday 06 January 2011] [06:48:00] &lt;sustrik&gt;       the actual fact, afaiu, is that most people are using openpg via 0mq</div>
<div class="line">[Thursday 06 January 2011] [06:48:29] &lt;sustrik&gt;       mikko: right</div>
<div class="line">[Thursday 06 January 2011] [06:48:37] &lt;sustrik&gt;       it&#8217;s not obvious how to solve it though</div>
<div class="line">[Thursday 06 January 2011] [06:48:48] &lt;mikko&gt; so there are situations where openpgm is supported on certain platform + compiler combination but cant be compiled with &#8211;with-pgm</div>
<div class="line">[Thursday 06 January 2011] [06:49:01] &lt;parik&gt; You mean to say it&#8217;s better to use open pgm pakage then that comes with OMQ</div>
<div class="line">[Thursday 06 January 2011] [06:49:39] &lt;sustrik&gt;       i am aware of that</div>
<div class="line">[Thursday 06 January 2011] [06:50:03] &lt;sustrik&gt;       but on the other hand requiring users to install scons and build openpgm by hand</div>
<div class="line">[Thursday 06 January 2011] [06:50:06] &lt;mikko&gt; there are two ways to change it: a) decouple pgm completely from 0mq and have users install it separately b) build openpgm using their scons builds and just link against artifacts</div>
<div class="line">[Thursday 06 January 2011] [06:50:11] &lt;sustrik&gt;       manage the dependencies</div>
<div class="line">[Thursday 06 January 2011] [06:50:12] &lt;sustrik&gt;       etc.</div>
<div class="line">[Thursday 06 January 2011] [06:50:13] &lt;mikko&gt; the latter adds dependency to scons</div>
<div class="line">[Thursday 06 January 2011] [06:50:21] &lt;sustrik&gt;       could be actually a barrier to adoption</div>
<div class="line">[Thursday 06 January 2011] [06:50:23] &lt;mikko&gt; as does the former</div>
<div class="line">[Thursday 06 January 2011] [06:50:25] &lt;parik&gt; So pgm that is bundled with 0MQ will be potable to all OS and architectures</div>
<div class="line">[Thursday 06 January 2011] [06:50:43] &lt;mikko&gt; sustrik: in the long run 99% of the users will get 0mq via their distro</div>
<div class="line">[Thursday 06 January 2011] [06:50:52] &lt;mikko&gt; well, maybe not that large amount but high percentage</div>
<div class="line">[Thursday 06 January 2011] [06:50:56] &lt;sustrik&gt;       yes</div>
<div class="line">[Thursday 06 January 2011] [06:51:13] &lt;sustrik&gt;       so the goal is to have openpgm packages for all distros and 0mq packages for all distros</div>
<div class="line">[Thursday 06 January 2011] [06:51:24] &lt;sustrik&gt;       we are quite far away from that afaics</div>
<div class="line">[Thursday 06 January 2011] [06:51:52] &lt;sustrik&gt;       the current system is the next best thing imo</div>
<div class="line">[Thursday 06 January 2011] [06:52:09] &lt;mikko&gt; im not sure if dependency to scons is a large issue</div>
<div class="line">[Thursday 06 January 2011] [06:52:17] &lt;mikko&gt; i see python as larger issue but that is already a dependency</div>
<div class="line">[Thursday 06 January 2011] [06:52:28] &lt;sustrik&gt;       huh</div>
<div class="line">[Thursday 06 January 2011] [06:52:29] &lt;sustrik&gt;       is it?</div>
<div class="line">[Thursday 06 January 2011] [06:52:31] &lt;mikko&gt; yes</div>
<div class="line">[Thursday 06 January 2011] [06:52:35] &lt;sustrik&gt;       where?</div>
<div class="line">[Thursday 06 January 2011] [06:52:49] &lt;sustrik&gt;       openpgm?</div>
<div class="line">[Thursday 06 January 2011] [06:52:53] &lt;mikko&gt; yes</div>
<div class="line">[Thursday 06 January 2011] [06:52:59] &lt;sustrik&gt;       oh my</div>
<div class="line">[Thursday 06 January 2011] [06:53:04] &lt;mikko&gt; <a class="reference external" href="https://github.com/zeromq/zeromq2/blob/master/configure.in#L318">https://github.com/zeromq/zeromq2/blob/master/configure.in#L318</a></div>
<div class="line">[Thursday 06 January 2011] [06:53:07] &lt;sustrik&gt;       any idea of what is it used for?</div>
<div class="line">[Thursday 06 January 2011] [06:53:32] &lt;mikko&gt; i don&#8217;t but i can easily check</div>
<div class="line">[Thursday 06 January 2011] [06:53:56] &lt;mikko&gt; foreign/openpgm/&#64;pgm_basename&#64;/openpgm/pgm/version.c: ../foreign/openpgm/&#64;pgm_basename&#64;/openpgm/pgm/version_generator.py</div>
<div class="line">[Thursday 06 January 2011] [06:53:59] &lt;mikko&gt; python ../foreign/openpgm/&#64;pgm_basename&#64;/openpgm/pgm/version_generator.py &gt; $&#64;</div>
<div class="line">[Thursday 06 January 2011] [06:54:10] &lt;sustrik&gt;       hm</div>
<div class="line">[Thursday 06 January 2011] [06:54:12] &lt;sustrik&gt;       let me see</div>
<div class="line">[Thursday 06 January 2011] [06:54:12] &lt;mikko&gt; <a class="reference external" href="https://github.com/zeromq/zeromq2/blob/master/src/Makefile.am">https://github.com/zeromq/zeromq2/blob/master/src/Makefile.am</a></div>
<div class="line">[Thursday 06 January 2011] [06:54:25] &lt;mikko&gt; github doesn&#8217;t show lines so i can&#8217;t link you directly</div>
<div class="line">[Thursday 06 January 2011] [06:54:29] &lt;mikko&gt; but should be easy to find</div>
<div class="line">[Thursday 06 January 2011] [06:56:10] &lt;sustrik&gt;       the script generates the version name</div>
<div class="line">[Thursday 06 January 2011] [06:56:47] &lt;sustrik&gt;       possibly we can replace it by a hardcoded one</div>
<div class="line">[Thursday 06 January 2011] [06:56:57] &lt;sustrik&gt;       and thus drop the python dependency</div>
<div class="line">[Thursday 06 January 2011] [06:57:59] &lt;mikko&gt; but then again, there hasn&#8217;t been complaints about python dependency</div>
<div class="line">[Thursday 06 January 2011] [06:58:37] &lt;sustrik&gt;       the problem imo is that the build comes very early on in adoption process</div>
<div class="line">[Thursday 06 January 2011] [06:59:06] &lt;sustrik&gt;       so, say if you find a bug in 0mq, you are already using it</div>
<div class="line">[Thursday 06 January 2011] [06:59:12] &lt;sustrik&gt;       so it make sense to report the bug</div>
<div class="line">[Thursday 06 January 2011] [06:59:15] &lt;sustrik&gt;       or even fix it</div>
<div class="line">[Thursday 06 January 2011] [06:59:31] &lt;sustrik&gt;       however, if you are building it</div>
<div class="line">[Thursday 06 January 2011] [06:59:45] &lt;sustrik&gt;       it means you are using 0mq for 5 mins at the moment</div>
<div class="line">[Thursday 06 January 2011] [07:00:11] &lt;sustrik&gt;       if there&#8217;s a problem, the simple solution is to just let it be</div>
<div class="line">[Thursday 06 January 2011] [07:00:16] &lt;sustrik&gt;       and use something else</div>
<div class="line">[Thursday 06 January 2011] [07:00:48] &lt;mikko&gt; hmm</div>
<div class="line">[Thursday 06 January 2011] [07:00:53] &lt;mikko&gt; i agree and disagree</div>
<div class="line">[Thursday 06 January 2011] [07:00:59]          * sustrik listens</div>
<div class="line">[Thursday 06 January 2011] [07:01:09] &lt;mikko&gt; i agree that build issues will throw off people</div>
<div class="line">[Thursday 06 January 2011] [07:01:30] &lt;mikko&gt; i disagree that clear dependency will throw off people, especially when it&#8217;s build-time only</div>
<div class="line">[Thursday 06 January 2011] [07:01:45] &lt;mikko&gt; we require autoconf 2.61 as well which is not available everywhere</div>
<div class="line">[Thursday 06 January 2011] [07:02:09] &lt;sustrik&gt;       ack</div>
<div class="line">[Thursday 06 January 2011] [07:02:11] &lt;mikko&gt; brb, fetching lunch</div>
<div class="line">[Thursday 06 January 2011] [07:02:21] &lt;sustrik&gt;       otoh, autoconf is a standard package</div>
<div class="line">[Thursday 06 January 2011] [07:02:40] &lt;sustrik&gt;       openpgm is not yet a package</div>
<div class="line">[Thursday 06 January 2011] [07:02:46] &lt;sustrik&gt;       you have to build it by hand</div>
<div class="line">[Thursday 06 January 2011] [07:02:47] &lt;sustrik&gt;       etc.</div>
<div class="line">[Thursday 06 January 2011] [07:02:58] &lt;sustrik&gt;       bon appettit</div>
<div class="line">[Thursday 06 January 2011] [07:13:47] &lt;parik&gt; Sustrik.Thanks alot.Yes I got pgm package inside foreign subdir.I am going to do code walkthrough before i take up and understands 0MQ</div>
<div class="line">[Thursday 06 January 2011] [07:13:55] &lt;parik&gt; Thanks alot Sustrik once again</div>
<div class="line">[Thursday 06 January 2011] [07:14:01] &lt;parik&gt; Thanks mikko</div>
<div class="line">[Thursday 06 January 2011] [07:14:45] &lt;sustrik&gt;       :)</div>
<div class="line">[Thursday 06 January 2011] [07:15:48] &lt;parik&gt; Do I am going in right direction.I always wnat to know as much as possible so as this learning will help me somewhere</div>
<div class="line">[Thursday 06 January 2011] [07:18:16] &lt;sustrik&gt;       parik: have you seen the 0mq guide?</div>
<div class="line">[Thursday 06 January 2011] [07:18:26] &lt;sustrik&gt;       it&#8217;s worth of reading for the starters</div>
<div class="line">[Thursday 06 January 2011] [07:18:26] &lt;parik&gt; Yes ..</div>
<div class="line">[Thursday 06 January 2011] [07:19:27] &lt;parik&gt; Thanks Sustrik.Actually I have not yet gone through it completely</div>
<div class="line">[Thursday 06 January 2011] [07:20:12] &lt;sustrik&gt;       ch1 &amp; ch2 are the most important</div>
<div class="line">[Thursday 06 January 2011] [07:20:17] &lt;sustrik&gt;       to grasp the concept</div>
<div class="line">[Thursday 06 January 2011] [07:20:29] &lt;parik&gt; When I come across 0MQ is based on PGM My entire focus goes to understand PGM first as I was not aware fo it earlier</div>
<div class="line">[Thursday 06 January 2011] [07:21:04] &lt;parik&gt; I will definitly go through ch1 and ch2</div>
<div class="line">[Thursday 06 January 2011] [07:21:37] &lt;sustrik&gt;       parik: be careful with pgm</div>
<div class="line">[Thursday 06 January 2011] [07:21:42] &lt;parik&gt; Now i understands PGM to certain extent to start with</div>
<div class="line">[Thursday 06 January 2011] [07:22:03] &lt;sustrik&gt;       mutlicast is only useful in special circumstances</div>
<div class="line">[Thursday 06 January 2011] [07:22:05] &lt;parik&gt; You mean to say shall i not concentrate much on this</div>
<div class="line">[Thursday 06 January 2011] [07:22:14] &lt;parik&gt; ok...</div>
<div class="line">[Thursday 06 January 2011] [07:22:15] &lt;sustrik&gt;       in most cases tcp makes more sense</div>
<div class="line">[Thursday 06 January 2011] [07:22:35] &lt;sustrik&gt;       pgm =very high volume pub/sub on LANs</div>
<div class="line">[Thursday 06 January 2011] [07:22:49] &lt;sustrik&gt;       it needs quite a lot of administration</div>
<div class="line">[Thursday 06 January 2011] [07:22:50] &lt;parik&gt; But does not three way shaking makes it more congested in TCP</div>
<div class="line">[Thursday 06 January 2011] [07:22:59] &lt;parik&gt; ok..</div>
<div class="line">[Thursday 06 January 2011] [07:23:04] &lt;sustrik&gt;       it requires good hardware etc.</div>
<div class="line">[Thursday 06 January 2011] [07:23:18] &lt;parik&gt; You mean to say pgm compatible routers</div>
<div class="line">[Thursday 06 January 2011] [07:23:40] &lt;parik&gt; upgraded hardware for performance</div>
<div class="line">[Thursday 06 January 2011] [07:23:48] &lt;sustrik&gt;       in most cases you don&#8217;t event want multicast traffic pass the router</div>
<div class="line">[Thursday 06 January 2011] [07:23:58] &lt;parik&gt; ok</div>
<div class="line">[Thursday 06 January 2011] [07:23:58] &lt;sustrik&gt;       rather i meant switches with IGMP snooping</div>
<div class="line">[Thursday 06 January 2011] [07:24:11] &lt;Steve-o&gt;       pgm routers are v. expensive</div>
<div class="line">[Thursday 06 January 2011] [07:24:26] &lt;Steve-o&gt;       switches are pretty easy, standard procurves work well</div>
<div class="line">[Thursday 06 January 2011] [07:24:33] &lt;parik&gt; ok..So that&#8217;s an expensive one</div>
<div class="line">[Thursday 06 January 2011] [07:25:33] &lt;Steve-o&gt;       well, v.expensive for gigabit capacity, cisco support it on almost their entire product range, expensive = US$10,000</div>
<div class="line">[Thursday 06 January 2011] [07:26:01] &lt;parik&gt; oh...That&#8217;s really expensive...</div>
<div class="line">[Thursday 06 January 2011] [07:27:09] &lt;parik&gt; So then i will start with TCP.But no ways going through PGM gives me some insight of what is it and how does it work</div>
<div class="line">[Thursday 06 January 2011] [07:27:29] &lt;parik&gt; I will start with TCP</div>
<div class="line">[Thursday 06 January 2011] [07:27:37] &lt;Steve-o&gt;       100mb is around $5,000 the closest I saw last check, slower speeds all the way down to $250 for DSL routers, etc.</div>
<div class="line">[Thursday 06 January 2011] [07:28:01] &lt;Steve-o&gt;       consider PGM an administrative option rather than anything particular technical for development</div>
<div class="line">[Thursday 06 January 2011] [07:28:46] &lt;Steve-o&gt;       that&#8217;s how zeromq has been developed, choose a ZMQ_PUB socket and run it to the ground with TCP until you really need scaling</div>
<div class="line">[Thursday 06 January 2011] [07:28:51] &lt;sustrik&gt;       right, you can start with tcp and switch to pgm when needed</div>
<div class="line">[Thursday 06 January 2011] [07:29:22] &lt;Steve-o&gt;       consider TCP sockets are pretty much accelerated everywhere and PGM isn&#8217;t anywhere</div>
<div class="line">[Thursday 06 January 2011] [07:29:29] &lt;parik&gt; Thanks for guidance and making me to go in right direction</div>
<div class="line">[Thursday 06 January 2011] [07:29:40] &lt;parik&gt; Yes I do agree</div>
<div class="line">[Thursday 06 January 2011] [07:30:04] &lt;Steve-o&gt;       but when you need it, it&#8217;s awesome :D</div>
<div class="line">[Thursday 06 January 2011] [07:30:25] &lt;parik&gt; I am a novice but got some useful tips from Sustrik and Steve</div>
<div class="line">[Thursday 06 January 2011] [07:30:33] &lt;parik&gt; :-)</div>
<div class="line">[Thursday 06 January 2011] [07:33:44] &lt;parik&gt; Just one thing I always want to work and write some protcols, creating some utility but i always wonder how can I start with</div>
<div class="line">[Thursday 06 January 2011] [07:35:45] &lt;Steve-o&gt;       implementing your own network protcol or are we talking above zeromq?</div>
<div class="line">[Thursday 06 January 2011] [07:40:04] &lt;parik&gt; I mean to say something I can contribute to and involved myself as one of the developer</div>
<div class="line">[Thursday 06 January 2011] [07:41:00] &lt;Steve-o&gt;       well there is plenty of scope with zeromq</div>
<div class="line">[Thursday 06 January 2011] [07:41:58] &lt;Steve-o&gt;       a lot can be made on top, e.g. last value cache, certified delivery, transactional delivery, virtual circuits, http tunneling, encryption, authentication, proxying, etc</div>
<div class="line">[Thursday 06 January 2011] [07:43:09] &lt;parik&gt; Great..Since I am novice and don&#8217;t know How I can also be felt great of doing/contributing something..Just I want to know How can I contribute...Need some guidance on this front</div>
<div class="line">[Thursday 06 January 2011] [07:44:53] &lt;Steve-o&gt;       well it&#8217;s usually easiest if you have a target architecture to develop for,</div>
<div class="line">[Thursday 06 January 2011] [07:45:22] &lt;Steve-o&gt;       for example a last value cache could be simply integrating memcached from TCP/UDP to zeromq sockets</div>
<div class="line">[Thursday 06 January 2011] [07:45:22] &lt;keffo&gt; What&#8217;s wrong with abstract logic? =)</div>
<div class="line">[Thursday 06 January 2011] [07:47:16] &lt;parik&gt; Steve I am really sorry ..I didnot get it</div>
<div class="line">[Thursday 06 January 2011] [07:49:16] &lt;Steve-o&gt;       if you have a scenario to deploy something its easier than randomly creating something</div>
<div class="line">[Thursday 06 January 2011] [07:49:31] &lt;Steve-o&gt;       unless you are into computer science theory I guess</div>
<div class="line">[Thursday 06 January 2011] [07:49:39] &lt;parik&gt; oh..</div>
<div class="line">[Thursday 06 January 2011] [07:50:13] &lt;parik&gt; Yeah I am in Comuter Science</div>
<div class="line">[Thursday 06 January 2011] [07:50:59] &lt;Steve-o&gt;       there is one developer integrating zeromq with websockets for their app, that&#8217;s pretty neat</div>
<div class="line">[Thursday 06 January 2011] [07:51:44] &lt;parik&gt; ok..</div>
<div class="line">[Thursday 06 January 2011] [07:52:36] &lt;Steve-o&gt;       you can also pickup ideas from here:  <a class="reference external" href="http://www.zeromq.org/docs:labs">http://www.zeromq.org/docs:labs</a></div>
<div class="line">[Thursday 06 January 2011] [07:53:56] &lt;parik&gt; Thanks alot Steve..I think this will really help.</div>
<div class="line">[Thursday 06 January 2011] [07:55:12] &lt;parik&gt; Thanks Steve You have given me a starting point to start with..I</div>
<div class="line">[Thursday 06 January 2011] [07:55:23] &lt;parik&gt; am really grateful to you</div>
<div class="line">[Thursday 06 January 2011] [07:57:04] &lt;parik&gt; Thanks alot once again to Steve to Sustrik for guiding me and answering my doubts and given your precious time.</div>
<div class="line">[Thursday 06 January 2011] [07:57:34] &lt;Steve-o&gt;       good luck, post something on a blog and let us read about it</div>
<div class="line">[Thursday 06 January 2011] [07:58:01] &lt;sustrik&gt;       feel free to discuss your ideas on the mailing list</div>
<div class="line">[Thursday 06 January 2011] [07:58:16] &lt;parik&gt; Thanks alot Steve.I will make it sure...</div>
<div class="line">[Thursday 06 January 2011] [07:58:17] &lt;sustrik&gt;       there&#8217;s much more people there to comment then on irc</div>
<div class="line">[Thursday 06 January 2011] [07:58:32] &lt;parik&gt; oh...ok</div>
<div class="line">[Thursday 06 January 2011] [07:59:34] &lt;sustrik&gt;       Steve-o: btw, your Tibco migration docs are really useful</div>
<div class="line">[Thursday 06 January 2011] [07:59:40] &lt;sustrik&gt;       especially the code examples</div>
<div class="line">[Thursday 06 January 2011] [07:59:55] &lt;parik&gt; Thanks once again to Steve and Sustrik...I donot want to leave the discussion but i have to as I have to go but i will cherish the discussion with you people.You people are alot supported</div>
<div class="line">[Thursday 06 January 2011] [07:59:56] &lt;sustrik&gt;       it would be great if these were widely accessible</div>
<div class="line">[Thursday 06 January 2011] [08:00:25] &lt;sustrik&gt;       even if they are not perfect, it at least allows rv users to start somewhere</div>
<div class="line">[Thursday 06 January 2011] [08:00:43] &lt;Steve-o&gt;       ideally dumping in github or somewhere</div>
<div class="line">[Thursday 06 January 2011] [08:00:58] &lt;Steve-o&gt;       as I mentioned I already have C++ &amp; Java examples but didn&#8217;t include them</div>
<div class="line">[Thursday 06 January 2011] [08:01:27] &lt;Steve-o&gt;       but honestly I have no idea how you want rv users to migrate no-single-point-of-failure architectures</div>
<div class="line">[Thursday 06 January 2011] [08:01:30] &lt;sustrik&gt;       i would say the text can be dumped on a wiki page, while code examples can reside on github</div>
<div class="line">[Thursday 06 January 2011] [08:02:12] &lt;sustrik&gt;       well, we can address that later on</div>
<div class="line">[Thursday 06 January 2011] [08:02:39] &lt;sustrik&gt;       the important thing is make the initial docs accessible</div>
<div class="line">[Thursday 06 January 2011] [08:02:51] &lt;Steve-o&gt;       that will make all the order routing developers happy</div>
<div class="line">[Thursday 06 January 2011] [08:03:50] &lt;keffo&gt; routing developer, now that&#8217;s a career! :)</div>
<div class="line">[Thursday 06 January 2011] [08:03:56] &lt;sustrik&gt;       it&#8217;s matter of time imo, you can&#8217;t do everything straight away</div>
<div class="line">[Thursday 06 January 2011] [08:04:12] &lt;sustrik&gt;       so let them try 0mq, experiment with it, complain about it</div>
<div class="line">[Thursday 06 January 2011] [08:04:28] &lt;sustrik&gt;       and hopefully solution would emerge</div>
<div class="line">[Thursday 06 January 2011] [08:04:33] &lt;keffo&gt; sustrik: Do you know if anyone has tried to bridge zmq with wcf?</div>
<div class="line">[Thursday 06 January 2011] [08:04:59] &lt;sustrik&gt;       i think i dimly remember something like that</div>
<div class="line">[Thursday 06 January 2011] [08:05:03] &lt;sustrik&gt;       but i may be wrong</div>
<div class="line">[Thursday 06 January 2011] [08:05:36] &lt;Steve-o&gt;       keffo: order routing is rather dull, especially FX</div>
<div class="line">[Thursday 06 January 2011] [08:05:49] &lt;keffo&gt; Steve-o: my point yeah :)</div>
<div class="line">[Thursday 06 January 2011] [08:06:17] &lt;Steve-o&gt;       1,000 trades a day max, woohoo</div>
<div class="line">[Thursday 06 January 2011] [08:06:35] &lt;keffo&gt; sustrik: It&#8217;s easy enough to just call a zmq api inside a wcf service, but a somewhat more native method would be very useful</div>
<div class="line">[Thursday 06 January 2011] [08:08:33] &lt;sustrik&gt;       hm, tried googling?</div>
<div class="line">[Thursday 06 January 2011] [08:08:43] &lt;keffo&gt; yeah</div>
<div class="line">[Thursday 06 January 2011] [08:09:32] &lt;sustrik&gt;       doesn&#8217;t look like anything is available</div>
<div class="line">[Thursday 06 January 2011] [08:10:02] &lt;sustrik&gt;       small project for someone to spend weekend hacking :)</div>
<div class="line">[Thursday 06 January 2011] [08:10:21] &lt;keffo&gt; hmm, rabbitmq seems to support it, and also federation services, that&#8217;s totally awesome if they support full saml &amp; adfs</div>
<div class="line">[Thursday 06 January 2011] [08:10:45] &lt;keffo&gt; not that it helps in any way I guess, exept perusal of their code maybe</div>
<div class="line">[Thursday 06 January 2011] [08:10:50] &lt;Steve-o&gt;       presumably wcf 4 looks most interesting?</div>
<div class="line">[Thursday 06 January 2011] [08:11:03] &lt;keffo&gt; how do you mean?</div>
<div class="line">[Thursday 06 January 2011] [08:11:14] &lt;keffo&gt; if I did decide to try I would target the latest version obviously?</div>
<div class="line">[Thursday 06 January 2011] [08:11:46] &lt;Steve-o&gt;       the original cl wrapper was designed around .net 2 for greater compatibility</div>
<div class="line">[Thursday 06 January 2011] [08:12:29] &lt;keffo&gt; I already have my loadbalancer ui in wpf, but there&#8217;s something oddly appealing about hosting the loadbalancer directly in IIS, with the ui as a silverlight app</div>
<div class="line">[Thursday 06 January 2011] [08:13:03] &lt;keffo&gt; Steve-o: this would be a lib, using the zmq api, and nothing more</div>
<div class="line">[Thursday 06 January 2011] [08:31:01] &lt;keffo&gt; &#8220;The RabbitMQ .NET client is an implementation of an AMQP client library for C# (and, implicitly, other .NET languages), and a binding exposing AMQP services via Microsoft&#8217;s Windows Communication Foundation (WCF).&#8221;</div>
<div class="line">[Thursday 06 January 2011] [08:31:08] &lt;keffo&gt; So, doable</div>
<div class="line">[Thursday 06 January 2011] [08:35:45] &lt;mikko&gt; <a class="reference external" href="http://msdn.microsoft.com/en-us/magazine/cc163394.aspx">http://msdn.microsoft.com/en-us/magazine/cc163394.aspx</a></div>
<div class="line">[Thursday 06 January 2011] [08:35:55] &lt;mikko&gt; doesn&#8217;t seem to be overly complicated to create custom bindings</div>
<div class="line">[Thursday 06 January 2011] [08:36:07] &lt;mikko&gt; then again, i really dont know anything about windows</div>
<div class="line">[Thursday 06 January 2011] [10:14:10] &lt;mikko&gt; sustrik: there?</div>
<div class="line">[Thursday 06 January 2011] [10:14:25] &lt;sustrik&gt;       mikko: yes</div>
<div class="line">[Thursday 06 January 2011] [10:14:54] &lt;mikko&gt; where is api.zeromq.org hosted at?</div>
<div class="line">[Thursday 06 January 2011] [10:16:39] &lt;sustrik&gt;       here in bratislava</div>
<div class="line">[Thursday 06 January 2011] [10:17:19] &lt;sustrik&gt;       it&#8217;s a box at the local ISP&#8217;s datacenter afaik</div>
<div class="line">[Thursday 06 January 2011] [10:17:48] &lt;mikko&gt; cool, i noticed that the 404 handler is not very user-friendly:</div>
<div class="line">[Thursday 06 January 2011] [10:17:53] &lt;mikko&gt; <a class="reference external" href="http://api.zeromq.org/zmq_msg_close">http://api.zeromq.org/zmq_msg_close</a> for example</div>
<div class="line">[Thursday 06 January 2011] [10:18:32] &lt;mikko&gt; i can do a small page that shows &#8220;Did you mean: x&#8221;</div>
<div class="line">[Thursday 06 January 2011] [10:18:41] &lt;mikko&gt; not sure if that is a high priority though</div>
<div class="line">[Thursday 06 January 2011] [10:19:03] &lt;sustrik&gt;       you have to speak to mato</div>
<div class="line">[Thursday 06 January 2011] [10:19:08] &lt;sustrik&gt;       he&#8217;s managing the box</div>
<div class="line">[Thursday 06 January 2011] [10:19:13] &lt;mikko&gt; where is mato nowadays btw?</div>
<div class="line">[Thursday 06 January 2011] [10:19:18] &lt;sustrik&gt;       new zealand</div>
<div class="line">[Thursday 06 January 2011] [10:19:25] &lt;mikko&gt; contract work?</div>
<div class="line">[Thursday 06 January 2011] [10:19:42] &lt;sustrik&gt;       he&#8217;s half slovak, half new zealander</div>
<div class="line">[Thursday 06 January 2011] [10:19:48] &lt;sustrik&gt;       on his holiday atm</div>
<div class="line">[Thursday 06 January 2011] [10:20:10] &lt;sustrik&gt;       i think he should be available shortly</div>
<div class="line">[Thursday 06 January 2011] [16:46:39] &lt;Namei&gt; Hello</div>
<div class="line">[Thursday 06 January 2011] [16:54:51] &lt;sustrik&gt;       hi</div>
<div class="line">[Thursday 06 January 2011] [17:01:20] &lt;mikko&gt; hi</div>
<div class="line">[Thursday 06 January 2011] [17:01:30] &lt;Namei&gt; how are u ?</div>
<div class="line">[Thursday 06 January 2011] [17:02:33] &lt;mikko&gt; im fine thank you</div>
<div class="line">[Thursday 06 January 2011] [17:02:36] &lt;mikko&gt; yourself?</div>
<div class="line">[Thursday 06 January 2011] [17:04:44] &lt;Namei&gt; the same :)</div>
<div class="line">[Thursday 06 January 2011] [17:06:50] &lt;Namei&gt; i came in a english server to perfect my english, but it&#8217;s hard lol</div>
<div class="line">[Thursday 06 January 2011] [17:20:30] &lt;Namei&gt; good night</div>
<div class="line">[Thursday 06 January 2011] [20:19:54] &lt;codebeaker&gt;    Good evening all, quick question for an inexperienced C-developer, I&#8217;m following the Introduction, and I&#8217;m getting an odd error - <a class="reference external" href="https://gist.github.com/4f82911f324c8fae8f9e">https://gist.github.com/4f82911f324c8fae8f9e</a> - trying to compile one of the exampels. What have I missed, zmq installed (maint branch) from Git, built and make-installed to the standard places, and I&#8217;m compiling my sample project with a vanilla cmake project</div>
<div class="line">[Thursday 06 January 2011] [20:20:06] &lt;codebeaker&gt;    is there a CMake find_zmq I&#8217;m missing?</div>
<div class="line">[Thursday 06 January 2011] [20:32:01] &lt;codebeaker&gt;    I found this <a class="reference external" href="https://github.com/PatrickCheng/zeromq2/blob/master/FindZMQ.cmake">https://github.com/PatrickCheng/zeromq2/blob/master/FindZMQ.cmake</a> - P.Chen - thanks if you&#8217;re idling here somewhere!</div>
<div class="line">[Thursday 06 January 2011] [22:55:21] &lt;jugg&gt;  Can zmq ever error with EAGAIN if ZMQ_SNDMORE is set?</div>
<div class="line">[Thursday 06 January 2011] [22:57:33] &lt;jugg&gt;  (of course ZMQ_NOBLOCK is also set)</div>
<div class="line">[Thursday 06 January 2011] [23:26:24] &lt;rqmedes&gt;       anyone use zeromq with c#?</div>
<div class="line">[Friday 07 January 2011] [02:36:38] &lt;sustrik&gt; jugg: yes it can</div>
<div class="line">[Friday 07 January 2011] [02:36:47] &lt;sustrik&gt; for the first message part</div>
<div class="line">[Friday 07 January 2011] [03:01:04] &lt;parik&gt;   Hi Sustrik and Steve</div>
<div class="line">[Friday 07 January 2011] [03:02:40] &lt;parik&gt;   I am trying to build zeromq src but running ./configure script before that to check the dependencies and I am getting error &#8220;configure: error: cannot link with -luuid, install uuid-dev.&#8221;</div>
<div class="line">[Friday 07 January 2011] [03:03:12] &lt;parik&gt;   I tried looking on web-also for downloading uuid-dev but not of much success.I didn&#8217;t get the package</div>
<div class="line">[Friday 07 January 2011] [03:04:20] &lt;parik&gt;   Does anybody help me out</div>
<div class="line">[Friday 07 January 2011] [03:04:27] &lt;parik&gt;   in this regard</div>
<div class="line">[Friday 07 January 2011] [04:00:56] &lt;mikko&gt;   rqmedes: there are a couple of people who do use it in C#</div>
<div class="line">[Friday 07 January 2011] [04:16:55] &lt;jugg&gt;    sustrik, So, after send(...,SNDMORE|NOBLOCK) the first message part successfully, I could subsequently tight loop send(..., SNDMORE|NOBLOCK) an arbitrarily large amount of messages and never get EAGAIN?  If so, could you explain what causes EAGAIN to be generated?</div>
<div class="line">[Friday 07 January 2011] [04:39:04] &lt;sustrik&gt; jugg: EAGAIN means there are already HWM messages in 0mq&#8217;s buffer</div>
<div class="line">[Friday 07 January 2011] [04:39:17] &lt;sustrik&gt; so you get EAGAIN when you try to insert new message</div>
<div class="line">[Friday 07 January 2011] [04:39:25] &lt;sustrik&gt; which happens with the first message parts</div>
<div class="line">[Friday 07 January 2011] [04:39:43] &lt;sustrik&gt; subsequent message parts belong to the same message that was already validated</div>
<div class="line">[Friday 07 January 2011] [04:39:51] &lt;sustrik&gt; so you never get EAGAIN there</div>
<div class="line">[Friday 07 January 2011] [04:41:31] &lt;jugg&gt;    so nothing to do whether data can be put on the wire?</div>
<div class="line">[Friday 07 January 2011] [04:44:43] &lt;parik&gt;   Hi</div>
<div class="line">[Friday 07 January 2011] [04:46:23] &lt;jugg&gt;    anyway, what seems to me a bug - zmq::xsub_t::xhas_out () is implemented returning true.  Thus getsockopt(events) shows the a sub socket can be written to.</div>
<div class="line">[Friday 07 January 2011] [04:46:33] &lt;parik&gt;   Where I can find the definiton for zmq_init()</div>
<div class="line">[Friday 07 January 2011] [04:47:18] &lt;jugg&gt;    <a class="reference external" href="http://api.zeromq.org/">http://api.zeromq.org/</a></div>
<div class="line">[Friday 07 January 2011] [04:48:36] &lt;parik&gt;   That&#8217;s the manual page.I have referred it but I want to know What inside zmq_init is happening.How its initalizing and returning context and creating a thread poool</div>
<div class="line">[Friday 07 January 2011] [04:48:47] &lt;parik&gt;   I am interesting in code</div>
<div class="line">[Friday 07 January 2011] [04:49:06] &lt;jugg&gt;    <a class="reference external" href="http://github.com/zeromq/zeromq2">http://github.com/zeromq/zeromq2</a></div>
<div class="line">[Friday 07 January 2011] [04:52:35] &lt;parik&gt;   Thanks jugg But I want to have C source</div>
<div class="line">[Friday 07 January 2011] [04:55:50] &lt;guido_g&gt; funny</div>
<div class="line">[Friday 07 January 2011] [04:56:03] &lt;guido_g&gt; mq is written in c++</div>
<div class="line">[Friday 07 January 2011] [04:58:15] &lt;parik&gt;   But In 0MQ Guide its showing C example using zeroMQ facililites</div>
<div class="line">[Friday 07 January 2011] [04:58:36] &lt;parik&gt;   Also other Languages</div>
<div class="line">[Friday 07 January 2011] [04:58:49] &lt;guido_g&gt; sure</div>
<div class="line">[Friday 07 January 2011] [04:59:09] &lt;guido_g&gt; the mq core is still written in c++</div>
<div class="line">[Friday 07 January 2011] [04:59:49] &lt;guido_g&gt; &#8220;&lt;parik&gt; That&#8217;s the manual page.I have referred it but I want to know What inside zmq_init is happening.How its initalizing and returning context and creating a thread poool&#8221; &lt;- this part is in the core</div>
<div class="line">[Friday 07 January 2011] [05:01:23] &lt;parik&gt;   ok.</div>
<div class="line">[Friday 07 January 2011] [05:02:03] &lt;yrashk&gt;  I am new to zeromq2, and have a simple question  for inproc, should endpoint be unique per process if each thread has its own pair of push/pull sockets?</div>
<div class="line">[Friday 07 January 2011] [05:02:23] &lt;yrashk&gt;  s/unique per process/unique process-wide/</div>
<div class="line">[Friday 07 January 2011] [05:03:23] &lt;mikko&gt;   yrashk: it should be unique to context</div>
<div class="line">[Friday 07 January 2011] [05:03:47] &lt;yrashk&gt;  mikko: alright, make sense, thanks :) is it okay to have a context per thread?</div>
<div class="line">[Friday 07 January 2011] [05:03:59] &lt;mikko&gt;   yrashk: no</div>
<div class="line">[Friday 07 January 2011] [05:04:12] &lt;yrashk&gt;  ok, I&#8217;ll generate unique endpoints then :)</div>
<div class="line">[Friday 07 January 2011] [05:04:15] &lt;mikko&gt;   yrashk: you can only have inproc communications between sockets allocated from same context</div>
<div class="line">[Friday 07 January 2011] [05:04:42] &lt;mikko&gt;   yrashk: i usually use something like &#8220;inproc://thread-%d&#8221; where %d is thread id or similar</div>
<div class="line">[Friday 07 January 2011] [05:04:51] &lt;yrashk&gt;  yeah this is exactly what I am going to do</div>
<div class="line">[Friday 07 January 2011] [05:04:54] &lt;yrashk&gt;  sprintf thread id</div>
<div class="line">[Friday 07 January 2011] [05:05:53] &lt;parik&gt;   I guesss Context is represeneting application.I mean to say Context shall be think w.r.t. application</div>
<div class="line">[Friday 07 January 2011] [05:06:03] &lt;parik&gt;   In application context</div>
<div class="line">[Friday 07 January 2011] [05:09:09] &lt;yrashk&gt;  fine, done :) another question is when exactly msg&#8217;s ffn will be called? I didn&#8217;t really get this from the man (3)</div>
<div class="line">[Friday 07 January 2011] [05:09:16] &lt;yrashk&gt;  should I look deeper into the manual?</div>
<div class="line">[Friday 07 January 2011] [05:09:25] &lt;mikko&gt;   parik: not quite i would say</div>
<div class="line">[Friday 07 January 2011] [05:09:43] &lt;mikko&gt;   parik: context is more of a &#8220;operating context&#8221; for 0mq</div>
<div class="line">[Friday 07 January 2011] [05:10:07] &lt;mikko&gt;   let&#8217;s say you have two libraries, libxy and libzz and both of them use 0mq internally</div>
<div class="line">[Friday 07 January 2011] [05:10:18] &lt;mikko&gt;   most likely each one of these libraries would have their own context</div>
<div class="line">[Friday 07 January 2011] [05:10:40] &lt;mikko&gt;   and you could happily use both libraries in a project without having to worry about collisions in inproc names etc</div>
<div class="line">[Friday 07 January 2011] [05:10:56] &lt;mikko&gt;   that&#8217;s at least how i see it</div>
<div class="line">[Friday 07 January 2011] [05:11:14] &lt;yrashk&gt;  I suspect I have occasional test failures because I don&#8217;t quite understand when msg data is deallocated :S</div>
<div class="line">[Friday 07 January 2011] [05:12:14] &lt;mikko&gt;   yrashk: does this lead to a specific question?</div>
<div class="line">[Friday 07 January 2011] [05:12:23] &lt;yrashk&gt;  yep, the one above :)</div>
<div class="line">[Friday 07 January 2011] [05:12:31] &lt;yrashk&gt;  &#8220;another question is when exactly msg&#8217;s ffn will be called? I didn&#8217;t really get this from the man (3)&#8221;</div>
<div class="line">[Friday 07 January 2011] [05:12:38] &lt;yrashk&gt;  &#8220;should I look deeper into the manual?&#8221;</div>
<div class="line">[Friday 07 January 2011] [05:14:55] &lt;mikko&gt;   yrashk: the ffn is called when the message refcount is 0 and the message is not shared</div>
<div class="line">[Friday 07 January 2011] [05:15:05] &lt;mikko&gt;   yrashk: <a class="reference external" href="https://github.com/zeromq/zeromq2/blob/master/src/zmq.cpp#L126">https://github.com/zeromq/zeromq2/blob/master/src/zmq.cpp#L126</a></div>
<div class="line">[Friday 07 January 2011] [05:15:38] &lt;yrashk&gt;  thanks</div>
<div class="line">[Friday 07 January 2011] [05:15:47] &lt;yrashk&gt;  mm I think I know what causes those occasional failures</div>
<div class="line">[Friday 07 January 2011] [05:23:10] &lt;yrashk&gt;  yup, nothing to do with zeromq (almost, rather with its awesomeness :)</div>
<div class="line">[Friday 07 January 2011] [05:32:25] &lt;yrashk&gt;  although I am surprised it didn&#8217;t gain me any extra performance comparing to pthread_cond message delivery method. Well, may be I am doing something wrong</div>
<div class="line">[Friday 07 January 2011] [05:32:39] &lt;parik&gt;   Hi Mikko, I agree with you.Thanks for expalining thorugh the scenarios.Sorry for replying late as I was off from the discussion for sometime</div>
<div class="line">[Friday 07 January 2011] [05:48:54] &lt;yrashk&gt;  mikko: if I am using ZMQ_NOBLOCK in zmq_send, should I initialize context with at least one thread? or I am misunderstanding how NOBLOCK works for inproc?</div>
<div class="line">[Friday 07 January 2011] [05:48:59] &lt;yrashk&gt;  <a href="#id13"><span class="problematic" id="id14">*</span></a>am *</div>
<div class="line">[Friday 07 January 2011] [05:49:04] &lt;yrashk&gt;  <a href="#id15"><span class="problematic" id="id16">*</span></a>am I</div>
<div class="line">[Friday 07 January 2011] [05:57:24] &lt;jsimmons&gt;        with inproc, it should be non-blocking anyway yrashk, as far as I can tell</div>
<div class="line">[Friday 07 January 2011] [05:57:55] &lt;mikko&gt;   yrashk: sorry, i dont understand the question</div>
<div class="line">[Friday 07 January 2011] [05:58:50] &lt;mikko&gt;   jsimmons: zero lock yes but not necessarily non-blocking</div>
<div class="line">[Friday 07 January 2011] [05:59:45] &lt;jsimmons&gt;        oh noblock returns failure when it&#8217;s going to block I see</div>
<div class="line">[Friday 07 January 2011] [06:01:30] &lt;rqmedes&gt; sorry miko was away from keyboard</div>
<div class="line">[Friday 07 January 2011] [06:03:04] &lt;rqmedes&gt; have installed and am playing through c# examples, any pointers on how  you run your seperate programs, wcf, services?</div>
<div class="line">[Friday 07 January 2011] [06:18:16] &lt;mikko&gt;   rqmedes: i guess you could do a custom wcf binding</div>
<div class="line">[Friday 07 January 2011] [06:18:20] &lt;mikko&gt;   as far as i understand</div>
<div class="line">[Friday 07 January 2011] [06:18:29] &lt;mikko&gt;   rqmedes: i don&#8217;t really know anything about windows world</div>
<div class="line">[Friday 07 January 2011] [06:19:36] &lt;mikko&gt;   rqmedes: i think you should mail to mailing-list. there are several windows people there</div>
<div class="line">[Friday 07 January 2011] [06:19:42] &lt;mikko&gt;   i gotta hop into a meeting -&gt;</div>
<div class="line">[Friday 07 January 2011] [06:23:07] &lt;parik&gt;   Thanks alot mikko and guido_g</div>
<div class="line">[Friday 07 January 2011] [06:46:50] &lt;sustrik&gt; jugg: good point</div>
<div class="line">[Friday 07 January 2011] [06:46:53] &lt;sustrik&gt; let me fix it</div>
<div class="line">[Friday 07 January 2011] [06:50:18] &lt;jugg&gt;    sustrik, is the idea for subscriptions to be sent to the publisher eventually?  Or why is zmq::sub_t::xsetsockopt sending subscriptions as a payload?</div>
<div class="line">[Friday 07 January 2011] [06:51:21] &lt;sustrik&gt; jugg: yes, it&#8217;s the first step towards subscription forwarding</div>
<div class="line">[Friday 07 January 2011] [06:51:31] &lt;jugg&gt;    cool</div>
<div class="line">[Friday 07 January 2011] [06:59:55] &lt;CIA-21&gt;  zeromq2: 03Martin Sustrik 07master * r8e0049e 10/ (src/sub.cpp src/sub.hpp):</div>
<div class="line">[Friday 07 January 2011] [06:59:55] &lt;CIA-21&gt;  zeromq2: Disable sending messages on SUB socket</div>
<div class="line">[Friday 07 January 2011] [06:59:55] &lt;CIA-21&gt;  zeromq2: The ability was inherited from XSUB socket.</div>
<div class="line">[Friday 07 January 2011] [06:59:55] &lt;CIA-21&gt;  zeromq2: Now it&#8217;s properly disabled.</div>
<div class="line">[Friday 07 January 2011] [06:59:55] &lt;CIA-21&gt;  zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/ih6erI">http://bit.ly/ih6erI</a></div>
<div class="line">[Friday 07 January 2011] [06:59:58] &lt;sustrik&gt; jugg: done</div>
<div class="line">[Friday 07 January 2011] [07:01:17] &lt;rqmedes&gt; thanks mikko</div>
<div class="line">[Friday 07 January 2011] [07:01:20] &lt;jugg&gt;    thanks</div>
<div class="line">[Friday 07 January 2011] [07:10:19] &lt;yrashk&gt;  hmm, caught a rare segfault in recv, <a class="reference external" href="https://gist.github.com/c985ee3760af3aadaf96">https://gist.github.com/c985ee3760af3aadaf96</a></div>
<div class="line">[Friday 07 January 2011] [07:10:38] &lt;yrashk&gt;  (2.1.0)</div>
<div class="line">[Friday 07 January 2011] [07:20:41] &lt;sustrik&gt; yrashk: is it reproducible</div>
<div class="line">[Friday 07 January 2011] [07:20:44] &lt;sustrik&gt; ?</div>
<div class="line">[Friday 07 January 2011] [07:20:57] &lt;yrashk&gt;  sustrik: rarely  running some indirect stress tests</div>
<div class="line">[Friday 07 January 2011] [07:21:23] &lt;sustrik&gt; can you possible compile 0mq with debug enabled?</div>
<div class="line">[Friday 07 January 2011] [07:21:32] &lt;sustrik&gt; so that backtrace is more useful?</div>
<div class="line">[Friday 07 January 2011] [07:21:43] &lt;sustrik&gt; ./configure &#8211;enable-debug</div>
<div class="line">[Friday 07 January 2011] [07:21:44] &lt;yrashk&gt;  sure, may be not tonight, but will do</div>
<div class="line">[Friday 07 January 2011] [07:21:53] &lt;sustrik&gt; sure, take your time</div>
<div class="line">[Friday 07 January 2011] [07:22:15] &lt;yrashk&gt;  hopefully its nothing serious</div>
<div class="line">[Friday 07 January 2011] [07:22:20] &lt;yrashk&gt;  or should I switch to master?</div>
<div class="line">[Friday 07 January 2011] [07:26:45] &lt;sustrik&gt; wait a sec, i&#8217;m going to apply one pending patch</div>
<div class="line">[Friday 07 January 2011] [07:29:45] &lt;CIA-21&gt;  zeromq2: 03Dhammika Pathirana 07master * rbabdf48 10/ src/pipe.cpp :</div>
<div class="line">[Friday 07 January 2011] [07:29:45] &lt;CIA-21&gt;  zeromq2: Fix pipe writer termination</div>
<div class="line">[Friday 07 January 2011] [07:29:45] &lt;CIA-21&gt;  zeromq2: Signed-off-by: Dhammika Pathirana &lt;<a class="reference external" href="mailto:dhammika&#37;&#52;&#48;gmail&#46;com">dhammika<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/gNG05Z">http://bit.ly/gNG05Z</a></div>
<div class="line">[Friday 07 January 2011] [07:29:58] &lt;sustrik&gt; yrashk: ok, done</div>
<div class="line">[Friday 07 January 2011] [07:30:21] &lt;sustrik&gt; you can use the trunk, there are couple of patches there</div>
<div class="line">[Friday 07 January 2011] [07:30:33] &lt;sustrik&gt; that may (or may not) fix your problem</div>
<div class="line">[Friday 07 January 2011] [07:30:36] &lt;yrashk&gt;  hmmm this patchh is for PUSH/PULL sockets, am I right?</div>
<div class="line">[Friday 07 January 2011] [07:30:46] &lt;sustrik&gt; it&#8217;s generic</div>
<div class="line">[Friday 07 January 2011] [07:30:49] &lt;sustrik&gt; all socket types</div>
<div class="line">[Friday 07 January 2011] [07:30:50] &lt;yrashk&gt;  oh ok</div>
<div class="line">[Friday 07 January 2011] [07:31:24] &lt;yrashk&gt;  I am new to actual zeromq usage (knew about it for quite some time, though) just trying to switch my event loop from pthread_cond kind of loop</div>
<div class="line">[Friday 07 January 2011] [07:31:50] &lt;yrashk&gt;  (although I naively expected to get some performance gains from this transition, but it didn&#8217;t happen :)</div>
<div class="line">[Friday 07 January 2011] [07:32:26] &lt;sustrik&gt; you should get the performance gain once the batching kicks in</div>
<div class="line">[Friday 07 January 2011] [07:32:38] &lt;yrashk&gt;  at least it simplified my code</div>
<div class="line">[Friday 07 January 2011] [07:32:43] &lt;sustrik&gt; i.e. sending many messages using a single operation</div>
<div class="line">[Friday 07 January 2011] [07:32:53] &lt;yrashk&gt;  when it is going to kick in?</div>
<div class="line">[Friday 07 January 2011] [07:32:58] &lt;yrashk&gt;  to be kicked in*</div>
<div class="line">[Friday 07 January 2011] [07:33:13] &lt;sustrik&gt; with high message load</div>
<div class="line">[Friday 07 January 2011] [07:33:42] &lt;yrashk&gt;  hmm I do have a high message load in my stress test</div>
<div class="line">[Friday 07 January 2011] [07:33:57] &lt;yrashk&gt;  I guess it depends on what we understand by high essage load</div>
<div class="line">[Friday 07 January 2011] [07:34:13] &lt;sustrik&gt; dunno, million a second or somesuch</div>
<div class="line">[Friday 07 January 2011] [07:34:22] &lt;yrashk&gt;  mm I have less, I guess</div>
<div class="line">[Friday 07 January 2011] [07:35:02] &lt;yrashk&gt;  most likely my performance issues aren&#8217;t in event loop algorithm (so either cond or zeromq get the same bottleneck down the road)</div>
<div class="line">[Friday 07 January 2011] [07:35:18] &lt;sustrik&gt; that&#8217;s quite likely</div>
<div class="line">[Friday 07 January 2011] [07:35:26] &lt;sustrik&gt; as both of them are pretty much optimised</div>
<div class="line">[Friday 07 January 2011] [07:35:38] &lt;yrashk&gt;  I would assume so</div>
<div class="line">[Friday 07 January 2011] [07:35:48] &lt;yrashk&gt;  still with zeromq my code is much cleaner</div>
<div class="line">[Friday 07 January 2011] [07:36:27] &lt;yrashk&gt;  helped me to drop message queueing/pooling thing of my own</div>
<div class="line">[Friday 07 January 2011] [07:38:18] &lt;yrashk&gt;  and hopefully will help more down the road</div>
<div class="line">[Friday 07 January 2011] [07:38:20] &lt;codebeaker&gt;      what&#8217;s the practical difference on Github between the &#64;zeqomq user, and the repository of &#64;PatrickCheng? They both seem pretty much the same, on the surface - but Cheng&#8217;s includes useful snips for using MQ in a CMake project</div>
<div class="line">[Friday 07 January 2011] [07:40:03] &lt;sustrik&gt; i think he just made the cmake build</div>
<div class="line">[Friday 07 January 2011] [07:40:08] &lt;sustrik&gt; not 100% sure though</div>
<div class="line">[Friday 07 January 2011] [07:40:13] &lt;sustrik&gt; check the project history</div>
<div class="line">[Friday 07 January 2011] [07:44:28] &lt;codebeaker&gt;      thanks sustrik - maynbe I&#8217;ll fork both (running) and diff the whole trees, but his cmake work looks good</div>
<div class="line">[Friday 07 January 2011] [07:45:16] &lt;codebeaker&gt;      appreciate teh answer to a dumb question!</div>
<div class="line">[Friday 07 January 2011] [07:45:54] &lt;sustrik&gt; :)</div>
<div class="line">[Friday 07 January 2011] [09:17:14] &lt;codebeaker&gt;      hey everyone</div>
<div class="line">[Friday 07 January 2011] [09:26:06] &lt;keffo&gt;   hey ho</div>
<div class="line">[Friday 07 January 2011] [09:44:48] &lt;codebeaker&gt;      was wondering if anyone could lend me a hand, I&#8217;m trying to include mq in my project - I build it with CMake, and I would like a portable &#8220;FindMQ.cmake&#8221;  I found it in Patrick Chen&#8217;s github repo, but ZMQ_DIR is always unset I wondered if I&#8217;m barking up the wrong tree - and should simply hard-code the paths?</div>
<div class="line">[Friday 07 January 2011] [09:45:55] &lt;codebeaker&gt;      right now, I have the maint branch from the &#64;zeromq repository built and installed the defailt location, and a as a submodule in my project</div>
<div class="line">[Friday 07 January 2011] [09:49:08] &lt;zchrish&gt; Hi.</div>
<div class="line">[Friday 07 January 2011] [09:49:18] &lt;codebeaker&gt;       easy problem really, the linker isn&#8217;t finding the library - not all together surprising, but I&#8217;d like a portable solution</div>
<div class="line">[Friday 07 January 2011] [09:51:26] &lt;zchrish&gt; I have downloaded zeromq to my OpenSuse box and compiled the examples. I modified the mtserver and hwclient to suppress the printf and increased the message length to 80 bytes. When I run the program and pass 1000000 messages into it, it seems like the software works at around 7,500 messages per second. This seems low; any pointers?</div>
<div class="line">[Friday 07 January 2011] [09:55:00] &lt;zchrish&gt; AAA</div>
<div class="line">[Friday 07 January 2011] [09:55:27] &lt;keffo&gt;   ?</div>
<div class="line">[Friday 07 January 2011] [09:55:43] &lt;zchrish&gt; I have downloaded zeromq to my OpenSuse box and compiled the examples. I modified the mtserver and hwclient to suppress the printf and increased the message length to 80 bytes. When I run the program and pass 1000000 messages into it, it seems like the software works at around 7,500 messages per second. This seems low; any pointers?</div>
<div class="line">[Friday 07 January 2011] [10:13:41] &lt;sustrik&gt; zchrish: are you using local_thr &amp; remote_thr to measure the throughput?</div>
<div class="line">[Friday 07 January 2011] [11:43:41] &lt;zchrish&gt; I am just using the code out-of-the-box. Not sure how to answer the question; I am new to zeromq</div>
<div class="line">[Friday 07 January 2011] [11:47:29] &lt;zchrish&gt; sustrik: I am measuring on the same machine.</div>
<div class="line">[Friday 07 January 2011] [12:04:37] &lt;sustrik&gt; zchrish: how have you get the number?</div>
<div class="line">[Friday 07 January 2011] [12:04:39] &lt;sustrik&gt; 7500?</div>
<div class="line">[Friday 07 January 2011] [12:13:06] &lt;zchrish&gt; sustrik: (1) started mtserver, (2) time hwclient</div>
<div class="line">[Friday 07 January 2011] [12:14:07] &lt;zchrish&gt; sustrik: both mtserver and hwclient were stripped of printf statements and the sleep(1) was removed from mtserver and the number of iterations was increased to 1 million</div>
<div class="line">[Friday 07 January 2011] [12:14:50] &lt;zchrish&gt; runtime / # iterations was about 7,500.</div>
<div class="line">[Friday 07 January 2011] [12:15:23] &lt;zchrish&gt; sorry; other way around.</div>
<div class="line">[Friday 07 January 2011] [12:15:37] &lt;sustrik&gt; that&#8217;s something from the guide?</div>
<div class="line">[Friday 07 January 2011] [12:15:45] &lt;sustrik&gt; anyway, try the offical perf tests:</div>
<div class="line">[Friday 07 January 2011] [12:15:46] &lt;sustrik&gt; <a class="reference external" href="http://www.zeromq.org/results:perf-howto">http://www.zeromq.org/results:perf-howto</a></div>
<div class="line">[Friday 07 January 2011] [12:16:06] &lt;zchrish&gt; yes, in the c++ section. I will look at perf-howto; thank you.</div>
<div class="line">[Friday 07 January 2011] [13:27:09] &lt;zchrish&gt; sustrik: OK, I ran these programs and the throughput is much higher. I will look more closely into how mtserver and hwclient are constructed to see how I can modify them to improve the throughput of these programs.</div>
<div class="line">[Friday 07 January 2011] [19:14:38] &lt;codebeaker&gt;      does anyone have a few mins, to help me get my project (CMake build) to work with Patrick Chen&#8217;s CMake form of mq ?</div>
<div class="line">[Friday 07 January 2011] [19:17:10] &lt;codebeaker&gt;      Right now I can&#8217;t get it to recognise ZMQ_DIR</div>
<div class="line">[Friday 07 January 2011] [20:11:28] &lt;Seta00&gt;  anyone experienced with pyzmq here?</div>
<div class="line">[Friday 07 January 2011] [20:11:32] &lt;Seta00&gt;  (on Windows)</div>
<div class="line">[Saturday 08 January 2011] [08:07:02] &lt;s0undt3ch&gt;     hello ppl</div>
<div class="line">[Saturday 08 January 2011] [08:07:45] &lt;s0undt3ch&gt;     while trying to send on a zmq.REQ socket, if the socket is not correctly connected, how can I catch the error?</div>
<div class="line">[Saturday 08 January 2011] [08:14:07] &lt;sustrik&gt;       you can&#8217;t the messages are queued and will be send once to connecting succeeds</div>
<div class="line">[Saturday 08 January 2011] [08:40:50] &lt;s0undt3ch&gt;     sustrik: hmm, not the intended behaviour, what do you suggest?</div>
<div class="line">[Saturday 08 January 2011] [08:41:01] &lt;s0undt3ch&gt;     s/intended/desired</div>
<div class="line">[Saturday 08 January 2011] [08:43:16] &lt;sustrik&gt;       you mean when you misconfigure your component, right?</div>
<div class="line">[Saturday 08 January 2011] [08:43:50] &lt;sustrik&gt;       using an un-existent hostname or somesuch</div>
<div class="line">[Saturday 08 January 2011] [08:44:55] &lt;s0undt3ch&gt;     sustrik: yeah</div>
<div class="line">[Saturday 08 January 2011] [08:45:18] &lt;s0undt3ch&gt;     sustrik: right now I&#8217;m trying to build some king of ping/pong for my app&#8217;s components</div>
<div class="line">[Saturday 08 January 2011] [08:45:54] &lt;sustrik&gt;       well, the requirement for 0mq is to withstand network failures</div>
<div class="line">[Saturday 08 January 2011] [08:45:55] &lt;s0undt3ch&gt;     but I&#8217;d like to know who&#8217;s responding and calculate lag&#8217;s</div>
<div class="line">[Saturday 08 January 2011] [08:46:07] &lt;sustrik&gt;       so when it cannot connect</div>
<div class="line">[Saturday 08 January 2011] [08:46:16] &lt;sustrik&gt;       it tries a bit later on</div>
<div class="line">[Saturday 08 January 2011] [08:46:25] &lt;s0undt3ch&gt;     hmm</div>
<div class="line">[Saturday 08 January 2011] [08:47:05] &lt;s0undt3ch&gt;     sustrik: use pub/sub instead? those replying should then include their name etc...?</div>
<div class="line">[Saturday 08 January 2011] [08:47:34] &lt;s0undt3ch&gt;     instead of req/rep?</div>
<div class="line">[Saturday 08 January 2011] [08:52:19] &lt;s0undt3ch&gt;     hmm, I think I should look closely to the heartbeat example</div>
<div class="line">[Saturday 08 January 2011] [11:01:58] &lt;mikko&gt; afternoon</div>
<div class="line">[Saturday 08 January 2011] [12:21:13] &lt;<a href="#id403"><span class="problematic" id="id404">andrewvc_</span></a>&gt;     cremes: Around?</div>
<div class="line">[Saturday 08 January 2011] [12:21:56] Notice  -ChanServ- [#gentoo] Welcome to #gentoo || Acceptable Usage Policy &#64; <a class="reference external" href="http://www.gentoo.org/main/en/irc.xml">http://www.gentoo.org/main/en/irc.xml</a> || Keep the language clean || Google is your friend || No bots or scripts that talk || Turn off public away messages || More than three lines to #flood or a pastebin service, no spam!</div>
<div class="line">[Saturday 08 January 2011] [12:26:37] &lt;mikko&gt; sustrik: shutdown stress failing on freebsd 8.1</div>
<div class="line">[Saturday 08 January 2011] [12:27:13] Error   You are not on #gentoo.</div>
<div class="line">[Saturday 08 January 2011] [12:29:14] &lt;sustrik&gt;       let me see</div>
<div class="line">[Saturday 08 January 2011] [12:30:56] &lt;sustrik&gt;       that&#8217;s the same problem with insufficient buffer space in socketpair as was seen several time before</div>
<div class="line">[Saturday 08 January 2011] [12:31:01] &lt;sustrik&gt;       there&#8217;s no easy solution</div>
<div class="line">[Saturday 08 January 2011] [12:31:18] &lt;sustrik&gt;       presumably, we can make the stress test less stresfull :)</div>
<div class="line">[Saturday 08 January 2011] [19:27:56] &lt;andrewvc&gt;      cremes: ping</div>
<div class="line">[Sunday 09 January 2011] [02:05:27] &lt;maxpn&gt;   how can I handle timeouts in pyzmq ?</div>
<div class="line">[Sunday 09 January 2011] [02:05:48] &lt;maxpn&gt;   for PUSH socket</div>
<div class="line">[Sunday 09 January 2011] [02:24:55] &lt;maxpn&gt;   hmm... looks like I should use NOBLOCK in a loop</div>
<div class="line">[Sunday 09 January 2011] [05:26:56] &lt;s0undt3ch&gt;       hello ppl</div>
<div class="line">[Sunday 09 January 2011] [05:27:36] &lt;s0undt3ch&gt;       xreq_socket.recv(zmq.NOBLOCK) should never, ever block right? seems it&#8217;s blocking for at least 1.5 secs for me :</div>
<div class="line">[Sunday 09 January 2011] [05:32:32] &lt;mikko&gt;   maxpn: you can use poll</div>
<div class="line">[Sunday 09 January 2011] [05:32:43] &lt;mikko&gt;   s0undt3ch: it shouldn&#8217;t block</div>
<div class="line">[Sunday 09 January 2011] [05:33:23] &lt;s0undt3ch&gt;       mikko: I&#8217;m using evenlet with zmq, it has block detector, I&#8217;m setting it to 1.5 secs, and it&#8217;s triggering :|</div>
<div class="line">[Sunday 09 January 2011] [05:34:12] &lt;mikko&gt;   are you doing more than &#8220;xreq_socket.recv(zmq.NOBLOCK)&#8221; in that block of code?</div>
<div class="line">[Sunday 09 January 2011] [05:35:32] &lt;s0undt3ch&gt;       mikko: involved blocks of code -&gt; <a class="reference external" href="http://paste.pocoo.org/show/317519/">http://paste.pocoo.org/show/317519/</a></div>
<div class="line">[Sunday 09 January 2011] [05:35:38] &lt;maxpn&gt;   is there an option like recv(NOBLOCK, timeout= ... )</div>
<div class="line">[Sunday 09 January 2011] [05:37:22] &lt;maxpn&gt;   would be very usable</div>
<div class="line">[Sunday 09 January 2011] [05:38:21] &lt;mikko&gt;   maxpn: noblock returns immediately</div>
<div class="line">[Sunday 09 January 2011] [05:39:01] &lt;mikko&gt;   maxpn: it&#8217;s very simple to do with poll</div>
<div class="line">[Sunday 09 January 2011] [05:39:04] &lt;maxpn&gt;   mikko: yes, but in that case I have to sleep</div>
<div class="line">[Sunday 09 January 2011] [05:39:11] &lt;maxpn&gt;   for some amount of time</div>
<div class="line">[Sunday 09 January 2011] [05:40:54] &lt;mikko&gt;   maxpn: <a class="reference external" href="https://github.com/mkoppanen/httpush/blob/master/src/helpers.c#L110">https://github.com/mkoppanen/httpush/blob/master/src/helpers.c#L110</a></div>
<div class="line">[Sunday 09 January 2011] [05:41:00] &lt;mikko&gt;   there is similar thing in C</div>
<div class="line">[Sunday 09 January 2011] [05:41:22] &lt;mikko&gt;   it uses poll to handle the timeout</div>
<div class="line">[Sunday 09 January 2011] [05:42:28] &lt;mikko&gt;   s0undt3ch: are you getting eagain?</div>
<div class="line">[Sunday 09 January 2011] [05:42:38] &lt;s0undt3ch&gt;       mikko: nope</div>
<div class="line">[Sunday 09 January 2011] [05:42:57] &lt;mikko&gt;   s0undt3ch: you are sure that it actually blocks inside recv call?</div>
<div class="line">[Sunday 09 January 2011] [05:43:01] &lt;maxpn&gt;   ok I see, is such an option for Python?</div>
<div class="line">[Sunday 09 January 2011] [05:43:23] &lt;mikko&gt;   maxpn: yes, poll</div>
<div class="line">[Sunday 09 January 2011] [05:43:27] &lt;s0undt3ch&gt;       mikko: aparently is, I&#8217;m trying to refactor it a bit to try and confirm it</div>
<div class="line">[Sunday 09 January 2011] [05:43:48] &lt;mikko&gt;   maxpn: <a class="reference external" href="https://github.com/zeromq/pyzmq/blob/master/examples/poll/pair.py">https://github.com/zeromq/pyzmq/blob/master/examples/poll/pair.py</a></div>
<div class="line">[Sunday 09 January 2011] [05:48:31] &lt;maxpn&gt;   as I understand poller.poll() returns a list of paris (socket,state) , right?</div>
<div class="line">[Sunday 09 January 2011] [05:53:35] &lt;mikko&gt;   maxpn: i don&#8217;t really know how it&#8217;s implemented in python</div>
<div class="line">[Sunday 09 January 2011] [05:55:03] &lt;maxpn&gt;   poller.poll() will return data when complete ZMQ message received in POLLIN socket?</div>
<div class="line">[Sunday 09 January 2011] [05:55:47] &lt;mikko&gt;   it will retur when there is a state change in one or more of the sockets in the poll set</div>
<div class="line">[Sunday 09 January 2011] [05:57:22] &lt;s0undt3ch&gt;       mikko: how can I know if a message is complete?</div>
<div class="line">[Sunday 09 January 2011] [05:57:39] &lt;mikko&gt;   s0undt3ch: you mean with x(rep|req) sockets?</div>
<div class="line">[Sunday 09 January 2011] [05:57:45] &lt;s0undt3ch&gt;       mikko: yes</div>
<div class="line">[Sunday 09 January 2011] [05:58:20] &lt;mikko&gt;   the first parts will contain RCVMORE flag</div>
<div class="line">[Sunday 09 January 2011] [05:58:35] &lt;mikko&gt;   the part that doesn&#8217;t contain it terminates the message</div>
<div class="line">[Sunday 09 January 2011] [05:59:31] &lt;s0undt3ch&gt;       mikko: so I can append to a buffer untill I get RCVMORE at wich time I can process the message right?</div>
<div class="line">[Sunday 09 January 2011] [06:00:10] &lt;mikko&gt;   the other way around</div>
<div class="line">[Sunday 09 January 2011] [06:00:26] &lt;s0undt3ch&gt;       ah yes</div>
<div class="line">[Sunday 09 January 2011] [06:01:04] &lt;mikko&gt;   RCVMORE indicates that there is at least one more part coming</div>
<div class="line">[Sunday 09 January 2011] [06:01:37] &lt;maxpn&gt;   is recv_json() handles that situation correctly?</div>
<div class="line">[Sunday 09 January 2011] [06:01:42] &lt;s0undt3ch&gt;       mikko: xrep.getsockopt(zmq.RCVMORE) right?</div>
<div class="line">[Sunday 09 January 2011] [06:01:54] &lt;mikko&gt;   s0undt3ch: yes</div>
<div class="line">[Sunday 09 January 2011] [06:02:09] &lt;mikko&gt;   maxpn: i don&#8217;t really know, that sounds like a python specific method</div>
<div class="line">[Sunday 09 January 2011] [06:02:36] &lt;s0undt3ch&gt;       mikko: RCVMORE is socket option right?</div>
<div class="line">[Sunday 09 January 2011] [06:02:53] &lt;s0undt3ch&gt;       ie, I test it in getsockopt</div>
<div class="line">[Sunday 09 January 2011] [06:03:28] &lt;mikko&gt;   yes</div>
<div class="line">[Sunday 09 January 2011] [06:03:47] &lt;s0undt3ch&gt;       mikko: Hurray! Thanks! Now working as suposed</div>
<div class="line">[Sunday 09 January 2011] [06:04:36] &lt;s0undt3ch&gt;       was implementing a heartbeater and each of the hearts, if more than one, would fail in turns, which let me to think that my could must have been wrong</div>
<div class="line">[Sunday 09 January 2011] [06:06:42] &lt;s0undt3ch&gt;       but now one of the processors is at 100% :)</div>
<div class="line">[Sunday 09 January 2011] [06:06:50] &lt;s0undt3ch&gt;       need to refactor again</div>
<div class="line">[Sunday 09 January 2011] [06:12:32] &lt;mikko&gt;   s0undt3ch: spinning on something?</div>
<div class="line">[Sunday 09 January 2011] [06:13:12] &lt;s0undt3ch&gt;       mikko: I think I&#8217;m checking socket state too often, unfotunately, eventlet does not allow listening to fd changes</div>
<div class="line">[Sunday 09 January 2011] [06:13:42] &lt;s0undt3ch&gt;       ok, now dropped to 8-10%</div>
<div class="line">[Sunday 09 January 2011] [06:13:46] &lt;s0undt3ch&gt;       :)</div>
<div class="line">[Sunday 09 January 2011] [06:23:55] &lt;s0undt3ch&gt;       handling 50 heartbeats at 7-9% ;)</div>
<div class="line">[Sunday 09 January 2011] [07:05:22] &lt;s0undt3ch&gt;       a REQ socket can be connected to multiple &#8220;endpoints&#8221; right? can it send a message to a specific endpoint?</div>
<div class="line">[Sunday 09 January 2011] [07:06:34] &lt;s0undt3ch&gt;       or sending will send to all and the receiving endpoint cannot know for who the message is?</div>
<div class="line">[Sunday 09 January 2011] [07:56:02] &lt;zchrish&gt; That&#8217;s my question. I am reading 3.0 roadmap and it appears that TCP and PUB/SUB are distributed across all receivers.</div>
<div class="line">[Sunday 09 January 2011] [07:57:05] &lt;zchrish&gt; I think in this reference TCP=REQ.</div>
<div class="line">[Sunday 09 January 2011] [11:31:45] Notice    -NickServ- This nickname is registered. Please choose a different nickname, or identify via /msg NickServ identify &lt;password&gt;.</div>
<div class="line">[Sunday 09 January 2011] [11:31:45] Notice    -NickServ- You are now identified for travlr.</div>
<div class="line">[Sunday 09 January 2011] [12:01:55] &lt;sustrik&gt; s0undt3ch: you send a request to a &#8220;cloud&#8221;</div>
<div class="line">[Sunday 09 January 2011] [12:02:06] &lt;sustrik&gt; so it eventually gets to someone</div>
<div class="line">[Sunday 09 January 2011] [12:16:46] Notice    -NickServ- This nickname is registered. Please choose a different nickname, or identify via /msg NickServ identify &lt;password&gt;.</div>
<div class="line">[Sunday 09 January 2011] [12:16:46] Notice    -NickServ- You are now identified for travlr.</div>
<div class="line">[Sunday 09 January 2011] [13:02:48] &lt;s0undt3ch&gt;       sustrik: I&#8217;m trying to do some aync message handling. I have gobject listening for the socket&#8217;s FD and when there&#8217;s a change on it, a function is called. For REQ/REP, this is ok, I handle incoming message aync, and outgoing messages sync, however,  for XREP, I seem to be unable to  do async out messages</div>
<div class="line">[Sunday 09 January 2011] [13:03:07] &lt;s0undt3ch&gt;       especially since I&#8217;m calling socket.send_pyobj(data)</div>
<div class="line">[Sunday 09 January 2011] [13:03:26] &lt;s0undt3ch&gt;       I think that makes the socket go into zmq.POLLOUT</div>
<div class="line">[Sunday 09 January 2011] [13:03:38] &lt;s0undt3ch&gt;       but how do I handle zmq.POLLOUT?</div>
<div class="line">[Sunday 09 January 2011] [13:06:16] &lt;s0undt3ch&gt;       intead of directly calling send() should I put messages in a queue and then handle them in the queue?</div>
<div class="line">[Sunday 09 January 2011] [13:07:21] &lt;s0undt3ch&gt;       am I making any sense?</div>
<div class="line">[Sunday 09 January 2011] [13:15:07] &lt;sustrik&gt; have a look at zmq_getsockopt(3), the ZMQ_FD and ZMQ_EVENTS section</div>
<div class="line">[Sunday 09 January 2011] [13:15:36] &lt;sustrik&gt; ZMQ_FD signals that &#8220;something happened&#8221;</div>
<div class="line">[Sunday 09 January 2011] [13:15:48] &lt;sustrik&gt; you have to get ZMQ_EVENTS to find out what actually happened</div>
<div class="line">[Sunday 09 January 2011] [13:17:53] &lt;s0undt3ch&gt;       sustrik: that part I know, that&#8217;s how I&#8217;m handling incoming messges, I&#8217;m just failing to get own to handle outgoing messages with the same resources, ie, EVENTS and FD</div>
<div class="line">[Sunday 09 January 2011] [13:19:39] &lt;s0undt3ch&gt;       I already catched the (events &amp; POOLOUT), just don&#8217;t know what and from where to actualy send, since I&#8217;ve already done .send()</div>
<div class="line">[Sunday 09 January 2011] [13:23:31] &lt;s0undt3ch&gt;       s/own/how/</div>
<div class="line">[Sunday 09 January 2011] [13:24:48] &lt;s0undt3ch&gt;       is there a way to get the contents of the outgoing XREP buffer?</div>
<div class="line">[Sunday 09 January 2011] [13:25:37] &lt;s0undt3ch&gt;       perhaps better</div>
<div class="line">[Sunday 09 January 2011] [13:25:48] &lt;s0undt3ch&gt;       if I try to send NOBLOCK, how do I handle it?</div>
<div class="line">[Sunday 09 January 2011] [13:28:24] &lt;sustrik&gt; send with a non-block</div>
<div class="line">[Sunday 09 January 2011] [13:28:40] &lt;sustrik&gt; if it cannot be sent it returns EAGAIN</div>
<div class="line">[Sunday 09 January 2011] [13:28:48] &lt;sustrik&gt; then you can poll on ZMQ_FD</div>
<div class="line">[Sunday 09 January 2011] [13:28:58] &lt;sustrik&gt; once it signals POLLIN</div>
<div class="line">[Sunday 09 January 2011] [13:29:04] &lt;sustrik&gt; you getsockopt(ZMQ_EVENTS)</div>
<div class="line">[Sunday 09 January 2011] [13:29:19] &lt;sustrik&gt; if ZMQ_POLLOUT is set, you can send the message</div>
<div class="line">[Sunday 09 January 2011] [14:33:55] &lt;zchrish&gt; Is using a vector a supported method to implement socket_t? I want to service 10,000 different subscription channels so that each channel has independent information. According to the roadmap, all data goes to all subscribers even if a subscriber is only interested in certain data.</div>
<div class="line">[Sunday 09 January 2011] [14:42:06] &lt;mikko&gt;   zchrish: currently the filtering is done at subscriber side, correct</div>
<div class="line">[Sunday 09 January 2011] [14:42:52] &lt;zchrish&gt; mikko: Yes, that is what I have learned. I don&#8217;t want to do that; too much information flying across the publisher.</div>
<div class="line">[Sunday 09 January 2011] [14:54:22] &lt;sustrik&gt; zchrish: why not use a single pub socket with subscriptions instead of handling 10,000 sockets</div>
<div class="line">[Sunday 09 January 2011] [14:55:49] &lt;sustrik&gt; and rather focus on implementing subscription forwarding inside 0mq</div>
<div class="line">[Sunday 09 January 2011] [14:56:09] &lt;zchrish&gt; sustrik: I&#8217;d like to but as far as I can tell, if my subscriber only wants data to travel across the wire for only 1 of the 10,000 channels, that isn&#8217;t currently supported. The roadmap says that is a 3.0 feature possibly.</div>
<div class="line">[Sunday 09 January 2011] [14:57:05] &lt;sustrik&gt; it can go even to 2.x if someone actually implements it</div>
<div class="line">[Sunday 09 January 2011] [14:57:17] &lt;sustrik&gt; there are several people trying at the moment</div>
<div class="line">[Sunday 09 January 2011] [14:57:34] &lt;zchrish&gt; So what to do now?</div>
<div class="line">[Sunday 09 January 2011] [14:58:02] &lt;sustrik&gt; it&#8217;s up to you</div>
<div class="line">[Sunday 09 January 2011] [14:58:22] &lt;sustrik&gt; you can either write your code to use 10,000 sockets</div>
<div class="line">[Sunday 09 January 2011] [14:58:41] &lt;sustrik&gt; or instead try to implement the subscription forwarding inside 0mq</div>
<div class="line">[Sunday 09 January 2011] [14:58:44] &lt;zchrish&gt; So my idea was to create a vector of publishers and bind them to different ports. Sort of crude but was wondering if it was even supported.</div>
<div class="line">[Sunday 09 January 2011] [14:59:03] &lt;sustrik&gt; yes, you can do that</div>
<div class="line">[Sunday 09 January 2011] [14:59:40] &lt;zchrish&gt; can you estimate the work difference?</div>
<div class="line">[Sunday 09 January 2011] [14:59:52] &lt;zchrish&gt; between the 2 methods?</div>
<div class="line">[Sunday 09 January 2011] [15:00:31] &lt;sustrik&gt; well, the developer has to estimate the work</div>
<div class="line">[Sunday 09 January 2011] [15:00:40] &lt;sustrik&gt; have a look at the mailing list</div>
<div class="line">[Sunday 09 January 2011] [15:00:53] &lt;zchrish&gt; understood; thank you.</div>
<div class="line">[Sunday 09 January 2011] [15:00:58] &lt;sustrik&gt; the subscription forwarding was discussed several times there</div>
<div class="line">[Sunday 09 January 2011] [15:01:03] &lt;sustrik&gt; you&#8217;ll get some idea</div>
<div class="line">[Sunday 09 January 2011] [15:02:07] &lt;zchrish&gt; At this point, I&#8217;d like to remain a user of zeromq in my application and focus on that. Seems like great software but this feature seems really important as I guess people already know.</div>
<div class="line">[Sunday 09 January 2011] [15:03:03] &lt;sustrik&gt; sure, it&#8217;s up to you</div>
<div class="line">[Sunday 09 January 2011] [15:03:42] &lt;zchrish&gt; But maybe I could be beta people&#8217;s work if that&#8217;d help. I agree subscription forwarding is the way to go.</div>
<div class="line">[Sunday 09 January 2011] [15:11:02] &lt;sustrik&gt; well, as i said, there are people trying, let&#8217;s see what emerges</div>
<div class="line">[Sunday 09 January 2011] [20:17:53] &lt;rbraley&gt; is there a good way to write to a file asynchronously in zeromq?</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="2011-December.html"
                        title="previous chapter">2011-December</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/2011-January.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="2011-December.html" title="2011-December"
             >previous</a> |</li>
        <li><a href="index.html">ZeroMq IRC Log v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Peter Alexander.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.5.
    </div>
  </body>
</html>