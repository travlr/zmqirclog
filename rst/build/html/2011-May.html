

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2011-May &mdash; ZeroMq IRC Log v0.1 documentation</title>
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="ZeroMq IRC Log v0.1 documentation" href="index.html" />
    <link rel="prev" title="2011-April" href="2011-April.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="2011-April.html" title="2011-April"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">ZeroMq IRC Log v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="may">
<h1>2011-May<a class="headerlink" href="#may" title="Permalink to this headline">Â¶</a></h1>
<div class="line-block">
<div class="line">[Sunday 01 May 2011] [02:59:12] &lt;ASY&gt; wondering what can be the cause of this...</div>
<div class="line">[Sunday 01 May 2011] [03:01:09] &lt;ASY&gt; I am sending messages from different threads as follows:</div>
<div class="line">[Sunday 01 May 2011] [03:01:17] &lt;ASY&gt; zmq::message_t request(e,e-&gt;size(),&amp;event_queue::free_callback);</div>
<div class="line">[Sunday 01 May 2011] [03:01:17] &lt;ASY&gt; <a href="#id22"><span class="problematic" id="id23">socket_req_</span></a>.send(request,ZMQ_NOBLOCK);</div>
<div class="line">[Sunday 01 May 2011] [03:02:07] &lt;ASY&gt; in the main thread I do:  id = zmq_poll (&amp;poll_items[0], (int)poll_items.size(), 1000 * 1000);</div>
<div class="line">[Sunday 01 May 2011] [03:03:03] &lt;ASY&gt; wondering if this is thread related.</div>
<div class="line">[Sunday 01 May 2011] [03:03:24] &lt;ASY&gt; if anyone has any thoughts, please let me know.  thanks.</div>
<div class="line">[Sunday 01 May 2011] [03:16:37] &lt;ASY&gt; hm... upgraded to 2.1.6, can&#8217;t seem to reproduce yet...</div>
<div class="line">[Sunday 01 May 2011] [03:56:36] &lt;pieterh&gt;     ASY: what version were you using before you upgraded?</div>
<div class="line">[Sunday 01 May 2011] [03:59:34] &lt;ASY&gt; 2.1.3</div>
<div class="line">[Sunday 01 May 2011] [04:59:40] &lt;pieterh&gt;     ASY: are you using the same sockets from multiple threads?</div>
<div class="line">[Sunday 01 May 2011] [05:00:09] &lt;pieterh&gt;     if you poll in one thread and send/recv in another, it&#8217;ll crash under load</div>
<div class="line">[Sunday 01 May 2011] [05:00:52] &lt;pieterh&gt;     (if you&#8217;re working with the same sockets in multiple threads, that is)</div>
<div class="line">[Sunday 01 May 2011] [05:11:59] &lt;ASY&gt; hm... you know what... I think this is it!</div>
<div class="line">[Sunday 01 May 2011] [05:12:15] &lt;ASY&gt; i use two sockets, however the sending socket is not protected</div>
<div class="line">[Sunday 01 May 2011] [05:13:14] &lt;ASY&gt; yup.  that gotta be it.  gotta place a mutex on the sending function</div>
<div class="line">[Sunday 01 May 2011] [05:17:02] &lt;ASY&gt; i was perfectly aware of this problem.  it is in the docs, but somehow i didn&#8217;t see it in the code until you said it.</div>
<div class="line">[Sunday 01 May 2011] [05:17:04] &lt;ASY&gt; thanks.</div>
<div class="line">[Sunday 01 May 2011] [06:06:43] &lt;pieterh&gt;     ASY: if you&#8217;re using the same socket from two threads, your design is wrong, usually</div>
<div class="line">[Sunday 01 May 2011] [06:11:46] &lt;ASY&gt; correct, but not in this case I don&#8217;t think.  i have a central function that gets invoked from different async callbacks of different 3rd party libraries. i don&#8217;t even know which threads this function gets invoked from.  this is special circumstances.  if these are my threads, however, they will establish a dedicated socket.</div>
<div class="line">[Sunday 01 May 2011] [06:19:16] &lt;pieterh&gt;     what language are you working in?</div>
<div class="line">[Sunday 01 May 2011] [06:19:56] &lt;ASY&gt; C++</div>
<div class="line">[Sunday 01 May 2011] [06:20:45] &lt;pieterh&gt;     well, I&#8217;m no expert in weird async callbacks but IMO if you end up using mutexes to share 0MQ sockets, your design is probably not ideal</div>
<div class="line">[Sunday 01 May 2011] [06:21:00] &lt;pieterh&gt;     I&#8217;d try to get all callbacks to a single thread and then use 0MQ inproc sockets between that and other threads</div>
<div class="line">[Sunday 01 May 2011] [06:21:23] &lt;pieterh&gt;     sorry to just offer generalities... anyhow, glad we found the cause of the crashes</div>
<div class="line">[Sunday 01 May 2011] [06:23:47] &lt;ASY&gt; the reason I have a central (now mutexed) function is that it relays events to a central event queue using one inproc socket.  this is my way of getting all callbacks to a single thread... :)</div>
<div class="line">[Sunday 01 May 2011] [06:25:33] &lt;guido_g&gt;     pieterh: this kind of _design_ is tought all over the place, will be hard to negate the included brainwashing</div>
<div class="line">[Sunday 01 May 2011] [06:26:18] &lt;pieterh&gt;     ASY: have you studied the asyncsrv example in the Guide?</div>
<div class="line">[Sunday 01 May 2011] [06:26:23] &lt;pieterh&gt;     guido_g: seems so...</div>
<div class="line">[Sunday 01 May 2011] [06:26:30] &lt;guido_g&gt;     but hey, that&#8217;s the price to pay to be in an elitist community  ]:-&gt;</div>
<div class="line">[Sunday 01 May 2011] [06:26:54] &lt;pieterh&gt;     guido_g: we&#8217;</div>
<div class="line">[Sunday 01 May 2011] [06:26:58] &lt;pieterh&gt;     we&#8217;re elitist?</div>
<div class="line">[Sunday 01 May 2011] [06:27:06] &lt;pieterh&gt;     I thought we were cryptoanarchists</div>
<div class="line">[Sunday 01 May 2011] [06:27:46] &lt;guido_g&gt;     sure, we&#8217;re everything we want to be</div>
<div class="line">[Sunday 01 May 2011] [06:27:56] &lt;guido_g&gt;     oh, shit, this would be punk...  ,)</div>
<div class="line">[Sunday 01 May 2011] [06:28:44] &lt;pieterh&gt;     :)</div>
<div class="line">[Sunday 01 May 2011] [06:29:23] &lt;ASY&gt; async callbacks come from multiple unrelated existing subsystems, so there is really nothing I can do other then making my own custom event queue, which is pointless since I have zmq.  the advantage of using zmq with this is that I do also have multiple processes and multiple threads that push data through individually established sockets to the same queue.  so really it is only a segment of</div>
<div class="line">[Sunday 01 May 2011] [06:29:23] &lt;ASY&gt; the application that suffers from this due to 3rd party callbacks.</div>
<div class="line">[Sunday 01 May 2011] [06:30:34] &lt;pieterh&gt;     ASY: I&#8217;m sure you&#8217;re right, it&#8217;s hard to tell from where I&#8217;m sitting</div>
<div class="line">[Sunday 01 May 2011] [06:35:03] &lt;ASY&gt; i have another question if you don&#8217;t mind.  I have an application that does broadcast UDP discovery of it&#8217;s siblings on the network...  every system broadcasts on a known port and learns about the presense of the others.  I am wondering if there is anything in zmq that can be used to acheive something like that.</div>
<div class="line">[Sunday 01 May 2011] [06:36:00] &lt;guido_g&gt;     pub/sub using a common channel for discovery</div>
<div class="line">[Sunday 01 May 2011] [06:36:10] &lt;guido_g&gt;     you might want to use (e)pgm for that</div>
<div class="line">[Sunday 01 May 2011] [06:37:33] &lt;ASY&gt; ok, i will read up on that and try to figure it out.</div>
<div class="line">[Sunday 01 May 2011] [06:38:17] &lt;guido_g&gt;     basically you use a well known multicast group instead of the subnets broadcast address</div>
<div class="line">[Sunday 01 May 2011] [06:40:35] &lt;ASY&gt; ok, i will start working on that in about a week probably, will probably be back with questions :)</div>
<div class="line">[Sunday 01 May 2011] [06:40:59] &lt;guido_g&gt;     np</div>
<div class="line">[Sunday 01 May 2011] [06:41:12] &lt;ASY&gt; 6:40am :/  gotta crash</div>
<div class="line">[Sunday 01 May 2011] [06:41:30] &lt;guido_g&gt;     :)</div>
<div class="line">[Sunday 01 May 2011] [06:41:36] &lt;ASY&gt; where are you guys located?</div>
<div class="line">[Sunday 01 May 2011] [06:41:50] &lt;guido_g&gt;     europe</div>
<div class="line">[Sunday 01 May 2011] [06:41:59] &lt;guido_g&gt;     so it&#8217;s time for lunch</div>
<div class="line">[Sunday 01 May 2011] [06:42:17] &lt;ASY&gt; :)</div>
<div class="line">[Sunday 01 May 2011] [06:42:37] &lt;ASY&gt; ok, thanks for everyones help.  bbl. cheers.</div>
<div class="line">[Sunday 01 May 2011] [06:42:45] &lt;guido_g&gt;     good night!</div>
<div class="line">[Sunday 01 May 2011] [07:02:32] &lt;Guthur&gt;      did someone finally get 0MQ on android</div>
<div class="line">[Sunday 01 May 2011] [07:03:17] &lt;pieterh&gt;     Guthur: well, I&#8217;ve written up the protocol so it&#8217;s possible to make it in Javascript now, I guess</div>
<div class="line">[Sunday 01 May 2011] [07:03:25] &lt;pieterh&gt;     I&#8217;m doing some Android development but not in C</div>
<div class="line">[Sunday 01 May 2011] [07:03:37] &lt;pieterh&gt;     Also, I&#8217;d probably not use 0MQ across an open internet in any case</div>
<div class="line">[Sunday 01 May 2011] [07:04:00] &lt;Guthur&gt;      I just got an android phone yesterday and development some development for it is on my todo list</div>
<div class="line">[Sunday 01 May 2011] [07:04:32] &lt;pieterh&gt;     tbh I&#8217;d make a http bridge that maps req/rep and pub/sub to simple HTTP methods</div>
<div class="line">[Sunday 01 May 2011] [07:04:33] &lt;Guthur&gt;      ah yes, internet...</div>
<div class="line">[Sunday 01 May 2011] [07:04:46]        * pieterh is going to have to spend a couple of hours making this one day</div>
<div class="line">[Sunday 01 May 2011] [07:05:02] &lt;pieterh&gt;     get URI -&gt; long poll to receive next sub message</div>
<div class="line">[Sunday 01 May 2011] [07:05:08] &lt;pieterh&gt;     post URI -&gt; publish</div>
<div class="line">[Sunday 01 May 2011] [07:05:12] &lt;pieterh&gt;     etc.</div>
<div class="line">[Sunday 01 May 2011] [07:05:23] &lt;Guthur&gt;      have you looked at websockets</div>
<div class="line">[Sunday 01 May 2011] [07:05:45] &lt;pieterh&gt;     yes yes but it&#8217;s not stable</div>
<div class="line">[Sunday 01 May 2011] [07:06:01] &lt;pieterh&gt;     there are several versions and its still in evolution</div>
<div class="line">[Sunday 01 May 2011] [07:06:25] &lt;pieterh&gt;     it would be the right solution if/when it emerges from its IEFT party</div>
<div class="line">[Sunday 01 May 2011] [07:06:54] &lt;Guthur&gt;      yeah, I actually mistakenly assumed it had become stable by now</div>
<div class="line">[Sunday 01 May 2011] [07:08:02] &lt;pieterh&gt;     subscribe to the IEFT HyBi list for great merriment</div>
<div class="line">[Sunday 01 May 2011] [07:11:48] &lt;Guthur&gt;      pieterh, do you know if android allows raw TCP connections, so that 0MQ could work over the internet if a secure connection wasn&#8217;t a requirement</div>
<div class="line">[Sunday 01 May 2011] [07:12:05] &lt;pieterh&gt;     Guthur: afaik yes, it does</div>
<div class="line">[Sunday 01 May 2011] [07:12:25] &lt;pieterh&gt;     in fact it&#8217;s 100% certain that it does</div>
<div class="line">[Sunday 01 May 2011] [07:13:18] &lt;djc&gt; longpolling is kind of an ugly hack</div>
<div class="line">[Sunday 01 May 2011] [07:13:28] &lt;djc&gt; but mapping req/rep to HTTP does make sense</div>
<div class="line">[Sunday 01 May 2011] [07:13:34] &lt;djc&gt; do the pyzmq guys hang out here?</div>
<div class="line">[Sunday 01 May 2011] [07:13:50] &lt;pieterh&gt;     longpolling is a hack but not any different than waiting on a TCP socket, really</div>
<div class="line">[Sunday 01 May 2011] [07:14:05] &lt;pieterh&gt;     especially if you return a stream rather than just one message</div>
<div class="line">[Sunday 01 May 2011] [07:34:32] &lt;guido_g&gt;     djc: the wrapper devs are here often, if you need them better use the mailinglist</div>
<div class="line">[Sunday 01 May 2011] [07:34:36] &lt;guido_g&gt;     <a href="#id1"><span class="problematic" id="id2">*</span></a>are not</div>
<div class="line">[Sunday 01 May 2011] [07:34:46] &lt;djc&gt; I filed an issue</div>
<div class="line">[Sunday 01 May 2011] [07:35:49] &lt;guido_g&gt;     nothing serious</div>
<div class="line">[Sunday 01 May 2011] [07:38:39] &lt;guido_g&gt;     here it works</div>
<div class="line">[Sunday 01 May 2011] [07:38:53] &lt;guido_g&gt;     did you try a specific version?</div>
<div class="line">[Sunday 01 May 2011] [07:39:07] &lt;guido_g&gt;     or just the head of master?</div>
<div class="line">[Sunday 01 May 2011] [07:39:32] &lt;djc&gt; 2.1.4</div>
<div class="line">[Sunday 01 May 2011] [07:39:58] &lt;guido_g&gt;     ah ok</div>
<div class="line">[Sunday 01 May 2011] [07:40:08] &lt;guido_g&gt;     2.1dev works</div>
<div class="line">[Sunday 01 May 2011] [07:41:20] &lt;guido_g&gt;     aka latest master</div>
<div class="line">[Sunday 01 May 2011] [07:44:06] &lt;djc&gt; did you reproduce my issue with 2.1.4?</div>
<div class="line">[Sunday 01 May 2011] [07:44:25] &lt;guido_g&gt;     not yet</div>
<div class="line">[Sunday 01 May 2011] [07:47:11] &lt;guido_g&gt;     nope, works fine here</div>
<div class="line">[Sunday 01 May 2011] [07:47:29] &lt;guido_g&gt;     -&gt; Ran 73 tests in 8.164s</div>
<div class="line">[Sunday 01 May 2011] [07:48:07] &lt;guido_g&gt;     so it might be something blocking the network address and/or port</div>
<div class="line">[Sunday 01 May 2011] [07:48:13] &lt;guido_g&gt;     did you check that?</div>
<div class="line">[Sunday 01 May 2011] [21:00:35] &lt;neopallium&gt;  iFire: I am here.</div>
<div class="line">[Sunday 01 May 2011] [21:01:58] &lt;neopallium&gt;  iFire: yes, build it like any C Lua module.  Make sure to link it against libzmq (-lzmq).</div>
<div class="line">[Sunday 01 May 2011] [21:10:43] &lt;iFire&gt;       neopallium</div>
<div class="line">[Sunday 01 May 2011] [21:10:44] &lt;iFire&gt;       &gt; require &#8220;lua-zmq&#8221;</div>
<div class="line">[Sunday 01 May 2011] [21:10:44] &lt;iFire&gt;       error loading module &#8216;lua-zmq&#8217; from file &#8216;.lua-zmq.dll&#8217;:</div>
<div class="line">[Sunday 01 May 2011] [21:10:44] &lt;iFire&gt;               The specified procedure could not be found.</div>
<div class="line">[Sunday 01 May 2011] [21:10:46] &lt;iFire&gt;       I get that</div>
<div class="line">[Sunday 01 May 2011] [21:10:59] &lt;iFire&gt;       where  pre_generated-zmq.nobj.c is compiled into lua-zmq.dll</div>
<div class="line">[Sunday 01 May 2011] [21:11:44] &lt;iFire&gt;       on windows</div>
<div class="line">[Sunday 01 May 2011] [21:11:48] &lt;iFire&gt;       using lua-jit</div>
<div class="line">[Sunday 01 May 2011] [22:12:56] &lt;iFire&gt;       neopallium how was dinner :P</div>
<div class="line">[Sunday 01 May 2011] [22:58:08] &lt;iFire&gt;       neopallium I can&#8217;t seem to load the library from a lua interpreter</div>
<div class="line">[Sunday 01 May 2011] [22:58:21] &lt;iFire&gt;       what&#8217;s a short lua thing to test if it works</div>
<div class="line">[Sunday 01 May 2011] [23:02:30] &lt;private_meta&gt;         AH GODDAMMIT!</div>
<div class="line">[Sunday 01 May 2011] [23:06:28]        * iFire calls first aid to private_meta</div>
<div class="line">[Sunday 01 May 2011] [23:07:07] &lt;private_meta&gt;        I spent so much time to implement our communications library with ZeroMQ and now it seems like it&#8217;s got the same problem as ASIO</div>
<div class="line">[Sunday 01 May 2011] [23:07:19] &lt;private_meta&gt;        OMG this pisses me off so much</div>
<div class="line">[Sunday 01 May 2011] [23:07:29]        * iFire listens</div>
<div class="line">[Sunday 01 May 2011] [23:08:09] &lt;iFire&gt;       private_meta same problem?</div>
<div class="line">[Sunday 01 May 2011] [23:08:18] &lt;private_meta&gt;        Messages are lost/garbled</div>
<div class="line">[Sunday 01 May 2011] [23:08:30] &lt;private_meta&gt;        when I compile it with OpenMPI</div>
<div class="line">[Sunday 01 May 2011] [23:10:01] &lt;iFire&gt;       I thought you weren&#8217;t supposed to use zeromq with locks and stuff</div>
<div class="line">[Sunday 01 May 2011] [23:10:12] &lt;iFire&gt;       each thread is supposed to be its own unit</div>
<div class="line">[Sunday 01 May 2011] [23:10:27] &lt;iFire&gt;       and you communicate through inproc/ipc/tcp/etc.</div>
<div class="line">[Sunday 01 May 2011] [23:11:14] &lt;private_meta&gt;        I don&#8217;t know what you get at with that</div>
<div class="line">[Sunday 01 May 2011] [23:13:09] &lt;private_meta&gt;        iFire: not sure what that has to do with my problem</div>
<div class="line">[Sunday 01 May 2011] [23:13:40] &lt;iFire&gt;       hmm</div>
<div class="line">[Sunday 01 May 2011] [23:13:43] &lt;iFire&gt;       sorry</div>
<div class="line">[Sunday 01 May 2011] [23:13:55] &lt;iFire&gt;       well mpi and zeromq do the same things</div>
<div class="line">[Sunday 01 May 2011] [23:14:09] &lt;iFire&gt;       unless you&#8217;re using it to connect two systems</div>
<div class="line">[Sunday 01 May 2011] [23:14:42] &lt;iFire&gt;       <a class="reference external" href="http://zguide.zeromq.org/page:all#Multithreading-with-MQ">http://zguide.zeromq.org/page:all#Multithreading-with-MQ</a></div>
<div class="line">[Sunday 01 May 2011] [23:16:13] &lt;private_meta&gt;        I&#8217;m using MPI to create parallel processes and to control them, I wanted to use zeromq for backend communication</div>
<div class="line">[Sunday 01 May 2011] [23:16:29] &lt;private_meta&gt;        each process being a client</div>
<div class="line">[Sunday 01 May 2011] [23:16:34] &lt;private_meta&gt;        these two are independent</div>
<div class="line">[Sunday 01 May 2011] [23:16:55] &lt;jer&gt; why use MPI for that and not zeromq for both?</div>
<div class="line">[Sunday 01 May 2011] [23:18:00] &lt;private_meta&gt;        Because zmq doesn&#8217;t supply most of the mpi functions like scattering, gathering, ... out of the box like mpi</div>
<div class="line">[Sunday 01 May 2011] [23:29:08] &lt;neopallium&gt;  iFire: back, you need to use: require&#8221;zmq&#8221;</div>
<div class="line">[Sunday 01 May 2011] [23:30:00] &lt;iFire&gt;       hmm</div>
<div class="line">[Sunday 01 May 2011] [23:30:06] &lt;iFire&gt;       what about the dll</div>
<div class="line">[Sunday 01 May 2011] [23:30:26] &lt;iFire&gt;       I&#8217;m doing a custom packaging</div>
<div class="line">[Sunday 01 May 2011] [23:30:33] &lt;iFire&gt;       so everything is in the wrong place</div>
<div class="line">[Sunday 01 May 2011] [23:30:44] &lt;neopallium&gt;  the dll, I think you will need to call: zmq.dll</div>
<div class="line">[Sunday 01 May 2011] [23:31:07] &lt;iFire&gt;       &gt; require &#8220;zmq&#8221;</div>
<div class="line">[Sunday 01 May 2011] [23:31:07] &lt;iFire&gt;       error loading module &#8216;zmq&#8217; from file &#8216;.zmq.dll&#8217;:</div>
<div class="line">[Sunday 01 May 2011] [23:31:07] &lt;iFire&gt;               The specified procedure could not be found.</div>
<div class="line">[Sunday 01 May 2011] [23:31:15] &lt;iFire&gt;       I renamed lua-zmq.dll to zmq.dll</div>
<div class="line">[Sunday 01 May 2011] [23:31:20] &lt;iFire&gt;       hmm</div>
<div class="line">[Sunday 01 May 2011] [23:31:42] &lt;iFire&gt;       I don&#8217;t actually NEED poller.lua [for testing if the dll loads right?]</div>
<div class="line">[Sunday 01 May 2011] [23:31:50] &lt;neopallium&gt;  can you check that luaopen_zmq() is a public/exported symbol in the .dll?</div>
<div class="line">[Sunday 01 May 2011] [23:32:08] &lt;neopallium&gt;  for testing, no, you don&#8217;t need poller.lua or threads.lua</div>
<div class="line">[Sunday 01 May 2011] [23:32:59] &lt;neopallium&gt;  this page has instructions on compiling a Lua module on Windows: <a class="reference external" href="http://lua-users.org/wiki/BuildingModules">http://lua-users.org/wiki/BuildingModules</a></div>
<div class="line">[Sunday 01 May 2011] [23:33:36] &lt;iFire&gt;       neopallium will depdency walk in windows show me it</div>
<div class="line">[Sunday 01 May 2011] [23:33:43] &lt;iFire&gt;       dependency walker</div>
<div class="line">[Sunday 01 May 2011] [23:34:03] &lt;neopallium&gt;  I am not a windows dev., so I am not sure.</div>
<div class="line">[Sunday 01 May 2011] [23:35:03] &lt;iFire&gt;       int __declspec(dllexport) MyModuleName (lua_State* L) { ... } ?</div>
<div class="line">[Sunday 01 May 2011] [23:35:08] &lt;iFire&gt;       note : make sure your main init function is exported with __declspec(dllexport) like this :</div>
<div class="line">[Sunday 01 May 2011] [23:35:09] &lt;iFire&gt;       int __declspec(dllexport) MyModuleName (lua_State* L) { ... }</div>
<div class="line">[Sunday 01 May 2011] [23:35:53] &lt;iFire&gt;       neopallium is that needeD?</div>
<div class="line">[Sunday 01 May 2011] [23:36:24] &lt;neopallium&gt;  no, the symbol that needs to be exported for this module is: int luaopen_zmq(lua_State <a href="#id3"><span class="problematic" id="id4">*</span></a>L);</div>
<div class="line">[Sunday 01 May 2011] [23:37:51] &lt;neopallium&gt;  in the pre_generated-zmq.nobj.c file you will see it as: LUALIB_API int luaopen_zmq(lua_State <a href="#id5"><span class="problematic" id="id6">*</span></a>L) {</div>
<div class="line">[Sunday 01 May 2011] [23:38:07] &lt;neopallium&gt;  very close to the end of the .c file</div>
<div class="line">[Sunday 01 May 2011] [23:38:12] &lt;iFire&gt;       yes</div>
<div class="line">[Sunday 01 May 2011] [23:38:33] &lt;iFire&gt;       hmm</div>
<div class="line">[Sunday 01 May 2011] [23:38:39] &lt;iFire&gt;       somehow add int __declspec(dllexport) &lt;-?</div>
<div class="line">[Sunday 01 May 2011] [23:39:10] &lt;neopallium&gt;  LUALIB_API will do that on windows.</div>
<div class="line">[Sunday 01 May 2011] [23:39:46] &lt;iFire&gt;       it doesn&#8217;t :/</div>
<div class="line">[Sunday 01 May 2011] [23:40:55] &lt;iFire&gt;       neopallium ok I did  __declspec(dllexport) LUALIB_API int luaopen_zmq(lua_State <a href="#id7"><span class="problematic" id="id8">*</span></a>L) {</div>
<div class="line">[Sunday 01 May 2011] [23:40:58] &lt;iFire&gt;       and it seems to work</div>
<div class="line">[Sunday 01 May 2011] [23:41:11] &lt;iFire&gt;       what&#8217;s a way of printing the zmq table</div>
<div class="line">[Sunday 01 May 2011] [23:41:19] &lt;neopallium&gt;  look in your luaconf.h file, that is where LUALIB_API &amp; LUA_API are defined.</div>
<div class="line">[Sunday 01 May 2011] [23:41:26] &lt;iFire&gt;       using luajit</div>
<div class="line">[Sunday 01 May 2011] [23:41:56] &lt;neopallium&gt;  for k,v in pairs(zmq) do print(k,v) end</div>
<div class="line">[Sunday 01 May 2011] [23:43:06] &lt;neopallium&gt;  ah, you need to define LUA_BUILD_AS_DLL on windows when compiling a Lua C module.</div>
<div class="line">[Sunday 01 May 2011] [23:43:35] &lt;iFire&gt;       <a class="reference external" href="http://pastebin.ca/2052715">http://pastebin.ca/2052715</a> &lt;- this is a working table print right?</div>
<div class="line">[Sunday 01 May 2011] [23:43:56] &lt;neopallium&gt;  yup, that looks right.</div>
<div class="line">[Sunday 01 May 2011] [23:45:46] &lt;iFire&gt;       ha</div>
<div class="line">[Sunday 01 May 2011] [23:45:52] &lt;iFire&gt;       well using that define makes the build fail</div>
<div class="line">[Sunday 01 May 2011] [23:46:08] &lt;iFire&gt;       &gt;......depslua-zmqsrcpre_generated-zmq.nobj.c(3121): error C2491: &#8216;luaopen_zmq&#8217; : definition of dllimport function not allowed</div>
<div class="line">[Sunday 01 May 2011] [23:46:45] &lt;iFire&gt;       neopallium you probably mean LUA_LIB</div>
<div class="line">[Sunday 01 May 2011] [23:47:20] &lt;iFire&gt;       #if defined(LUA_CORE) || defined(LUA_LIB)</div>
<div class="line">[Sunday 01 May 2011] [23:47:20] &lt;iFire&gt;       #define LUA_API         __declspec(dllexport)</div>
<div class="line">[Sunday 01 May 2011] [23:47:20] &lt;iFire&gt;       #else</div>
<div class="line">[Sunday 01 May 2011] [23:47:20] &lt;iFire&gt;       #define LUA_API         __declspec(dllimport)</div>
<div class="line">[Sunday 01 May 2011] [23:47:20] &lt;iFire&gt;       #endif</div>
<div class="line">[Sunday 01 May 2011] [23:47:30] &lt;iFire&gt;       actually both</div>
<div class="line">[Sunday 01 May 2011] [23:47:35] &lt;neopallium&gt;  hmm, maybe I shouldn&#8217;t be using LUALIB_API or LUA_API for exporting the module&#8217;s luaopen_*() function.</div>
<div class="line">[Sunday 01 May 2011] [23:47:59] &lt;iFire&gt;       <a class="reference external" href="http://www.lua.org/source/5.1/luaconf.h.html">http://www.lua.org/source/5.1/luaconf.h.html</a> [search for LUA_LIB]</div>
<div class="line">[Sunday 01 May 2011] [23:48:10] &lt;neopallium&gt;  I will look for a better solution, but for now just replace LUALIB_API with __declspec(dllexport)</div>
<div class="line">[Sunday 01 May 2011] [23:48:37] &lt;neopallium&gt;  yeah, I think those defines are more for the Lua core not modules.</div>
<div class="line">[Sunday 01 May 2011] [23:49:20] &lt;neopallium&gt;  ok, I need to go now, I will be back in about an hour or two.</div>
<div class="line">[Sunday 01 May 2011] [23:49:51] &lt;neopallium&gt;  but, I will take a closer look at the problem later tonight.</div>
<div class="line">[Sunday 01 May 2011] [23:50:00] &lt;iFire&gt;       neopallium pm</div>
<div class="line">[Sunday 01 May 2011] [23:55:21] &lt;iFire&gt;       I added  two defines and it worked &#8220;LUA_BUILD_AS_DLL&#8221;, &#8220;LUA_LIB&#8221;</div>
<div class="line">[Monday 02 May 2011] [02:03:59] &lt;neopallium&gt;  iFire: I committed a fix to lua-zmq that should make it easier to compile on windows.  You don&#8217;t need to define LUA_BUILD_AS_DLL, LUA_LIB, or LUALIB_API.</div>
<div class="line">[Monday 02 May 2011] [02:48:31] &lt;staylor&gt;     is there a way to get the connection status of a socket to a given endpoint?</div>
<div class="line">[Monday 02 May 2011] [02:49:21] &lt;guido_g&gt;     no</div>
<div class="line">[Monday 02 May 2011] [03:06:58] &lt;jer&gt; i&#8217;ve got a couple of workers creating push sockets sending some results out to a single node binding a pull socket. communication works fine, as i&#8217;d expect. however, after i send a first message off, my workers cpu usage goes up over 30% and none of the workers are processing any jobs, sockets are idle. not sure wtf is going on. anyone have any suggestions on what i might look for first?</div>
<div class="line">[Monday 02 May 2011] [03:09:03] &lt;staylor&gt;     guido_g so would the best way to know if a connection can be made to open a separate standard connection to the host, but not exchange any data?</div>
<div class="line">[Monday 02 May 2011] [03:09:43] &lt;guido_g&gt;     you still don&#8217;t know if the mq endpoint is connected and alive</div>
<div class="line">[Monday 02 May 2011] [03:09:54] &lt;guido_g&gt;     only mq could tell you that</div>
<div class="line">[Monday 02 May 2011] [03:10:02] &lt;guido_g&gt;     and it doesn&#8217;t</div>
<div class="line">[Monday 02 May 2011] [03:11:16] &lt;staylor&gt;     well ideally it would, but I guess at least a standard socket would tell me that at least that much works.  I&#8217;d like to know if a connection is refused basically, as it tells me most likely the other end failed to map a upnp port or the service isn&#8217;t running.</div>
<div class="line">[Monday 02 May 2011] [05:43:09] &lt;edwin&gt;       hi, the helloworld zeromq example is not working properly for me with 0MQ 2.1.6 on Debian x86-64, and here&#8217;s a testcase: <a class="reference external" href="https://gist.github.com/951368">https://gist.github.com/951368</a></div>
<div class="line">[Monday 02 May 2011] [05:43:09] &lt;edwin&gt;       output from testcase( zmq_send fails with Bad address): <a class="reference external" href="https://gist.github.com/951369">https://gist.github.com/951369</a></div>
<div class="line">[Monday 02 May 2011] [05:43:43] &lt;edwin&gt;       the server keeps giving those errors, and the client hangs</div>
<div class="line">[Monday 02 May 2011] [05:43:49] &lt;edwin&gt;       same with hwserver/hwclient</div>
<div class="line">[Monday 02 May 2011] [05:46:15] &lt;pieterh&gt;     edwin: could you run hwserver &amp; hwclient (not your test case, which is rather more code) and post the messages that gives? thanks</div>
<div class="line">[Monday 02 May 2011] [05:47:48] &lt;edwin&gt;       <a class="reference external" href="https://gist.github.com/951374">https://gist.github.com/951374</a></div>
<div class="line">[Monday 02 May 2011] [05:47:55] &lt;edwin&gt;       pieterh: the client hangs after the first send</div>
<div class="line">[Monday 02 May 2011] [05:48:04] &lt;edwin&gt;       sometimes it receives too, but doesn&#8217;t do a 2nd send</div>
<div class="line">[Monday 02 May 2011] [05:48:29] &lt;pieterh&gt;     so it hangs, presumably the server isn&#8217;t sending a reply?</div>
<div class="line">[Monday 02 May 2011] [05:48:38] &lt;edwin&gt;       interesting thing is that it worked better yesterday</div>
<div class="line">[Monday 02 May 2011] [05:48:49] &lt;edwin&gt;       yes the server gives an error on zmq_send</div>
<div class="line">[Monday 02 May 2011] [05:48:59] &lt;edwin&gt;       see output from my code: <a class="reference external" href="https://gist.github.com/951369">https://gist.github.com/951369</a></div>
<div class="line">[Monday 02 May 2011] [05:49:04] &lt;edwin&gt;       ZMQ error: Bad address</div>
<div class="line">[Monday 02 May 2011] [05:49:10] &lt;pieterh&gt;     what does the server say on zmq_send (the hwserver, not yours)</div>
<div class="line">[Monday 02 May 2011] [05:49:19] &lt;edwin&gt;       let me add a printf hold on</div>
<div class="line">[Monday 02 May 2011] [05:50:15] &lt;edwin&gt;       hwserver zmq_send failed: Bad address</div>
<div class="line">[Monday 02 May 2011] [05:50:41] &lt;edwin&gt;       <a class="reference external" href="https://gist.github.com/951380">https://gist.github.com/951380</a></div>
<div class="line">[Monday 02 May 2011] [05:50:44] &lt;edwin&gt;       that is the change I made</div>
<div class="line">[Monday 02 May 2011] [05:50:50] &lt;edwin&gt;       to print the error</div>
<div class="line">[Monday 02 May 2011] [05:51:21] &lt;pieterh&gt;     ok, let me just retest that</div>
<div class="line">[Monday 02 May 2011] [05:52:36] &lt;pieterh&gt;     it works for me, but that&#8217;s not helpful...</div>
<div class="line">[Monday 02 May 2011] [05:52:47] &lt;pieterh&gt;     I&#8217;m not sure what &#8216;bad address&#8217; means for 0MQ, let me dig a little</div>
<div class="line">[Monday 02 May 2011] [05:53:54] &lt;pieterh&gt;     EFAULT = invalid memory access, I&#8217;d assume</div>
<div class="line">[Monday 02 May 2011] [05:54:45] &lt;pieterh&gt;     ah, edwin....</div>
<div class="line">[Monday 02 May 2011] [05:54:46] &lt;edwin&gt;       ah yes version 2.0.x crashes with SIGSEGV with invalid access</div>
<div class="line">[Monday 02 May 2011] [05:54:55] &lt;pieterh&gt;     can you please take the actual current version of hwserver</div>
<div class="line">[Monday 02 May 2011] [05:55:05] &lt;pieterh&gt;     I&#8217;d posted a version with a bug in it, that&#8217;s what&#8217;s hitting you</div>
<div class="line">[Monday 02 May 2011] [05:55:35] &lt;pieterh&gt;     you can see it&#8217;s putting &#8220;World&#8221; into the request, not the reply... :-/</div>
<div class="line">[Monday 02 May 2011] [05:55:38] &lt;edwin&gt;       yeah that works</div>
<div class="line">[Monday 02 May 2011] [05:56:13] &lt;edwin&gt;       ok let me fix my latency measurement tool then :)</div>
<div class="line">[Monday 02 May 2011] [05:56:44] &lt;pieterh&gt;     sorry about that, someone caught it but it was there for a day or two</div>
<div class="line">[Monday 02 May 2011] [05:57:39] &lt;edwin&gt;       Time: 1.521894s, 6570.759856 Req/s, Latency: 152.189400 us</div>
<div class="line">[Monday 02 May 2011] [05:57:40] &lt;edwin&gt;       yep works now</div>
<div class="line">[Monday 02 May 2011] [05:57:42] &lt;edwin&gt;       thanks :)</div>
<div class="line">[Monday 02 May 2011] [05:58:13] &lt;edwin&gt;       I was going to try and improve the latency by using a pipe instead of socketpair for the mailbox</div>
<div class="line">[Monday 02 May 2011] [05:58:22] &lt;edwin&gt;       but then the helloworld started failing...</div>
<div class="line">[Monday 02 May 2011] [06:00:50] &lt;edwin&gt;       (unix socket latency is ~28us, and pipe is 3-4x faster than the socket according to hackbench)</div>
<div class="line">[Monday 02 May 2011] [06:03:40] &lt;mikko&gt;       good morning</div>
<div class="line">[Monday 02 May 2011] [06:04:05] &lt;pieterh&gt;     mikko: hi, how&#8217;re you doing?</div>
<div class="line">[Monday 02 May 2011] [06:04:19] &lt;mikko&gt;       i am excellent</div>
<div class="line">[Monday 02 May 2011] [06:04:24] &lt;mikko&gt;       extra bank holiday today</div>
<div class="line">[Monday 02 May 2011] [06:04:31] &lt;pieterh&gt;     :) yeah</div>
<div class="line">[Monday 02 May 2011] [06:04:49] &lt;mikko&gt;       very bad time for freelancers</div>
<div class="line">[Monday 02 May 2011] [06:04:58] &lt;mikko&gt;       :)</div>
<div class="line">[Monday 02 May 2011] [06:05:00] &lt;mikko&gt;       you?</div>
<div class="line">[Monday 02 May 2011] [06:06:00] &lt;pieterh&gt;     working on a new android app</div>
<div class="line">[Monday 02 May 2011] [06:06:02] &lt;pieterh&gt;     quite fun</div>
<div class="line">[Monday 02 May 2011] [06:07:09] &lt;mikko&gt;       are you using zeromq?</div>
<div class="line">[Monday 02 May 2011] [06:07:11] &lt;pieterh&gt;     it&#8217;s fun to see that stuff I was designing in 1999 is still better than web frameworks today</div>
<div class="line">[Monday 02 May 2011] [06:07:19] &lt;pieterh&gt;     nope, this is a different project</div>
<div class="line">[Monday 02 May 2011] [06:07:41] &lt;pieterh&gt;     well, the web frameworks are pretty, and easy to use</div>
<div class="line">[Monday 02 May 2011] [06:08:23] &lt;pieterh&gt;     I&#8217;d not use 0MQ across the Internet anyhow</div>
<div class="line">[Monday 02 May 2011] [06:08:41] &lt;pieterh&gt;     we&#8217;re making connectivity for this app across RestTL, and we&#8217;ll use 0MQ in the backend</div>
<div class="line">[Monday 02 May 2011] [06:15:33] &lt;edwin&gt;       hmm, latency with pipes for mailbox is 43 - 44us (vs 49-50 us with unix socket for mailbox). If I turn on CPU freq scaling then latency is 135 - 150 us</div>
<div class="line">[Monday 02 May 2011] [06:16:08] &lt;edwin&gt;       however using just a unix socketpair (without zeromq) latency is 10us</div>
<div class="line">[Monday 02 May 2011] [06:18:05] &lt;edwin&gt;       why is a socket used for zeromq&#8217;s mailbox, instead of lets say a ypipe and a pthread condition?</div>
<div class="line">[Monday 02 May 2011] [06:27:14] &lt;sustrik&gt;     edwin: even with ypipe you have to synchronise the two sides of the pipe somehow</div>
<div class="line">[Monday 02 May 2011] [06:27:37] &lt;sustrik&gt;     but yes, ypipe + using socketpair just for signaling would be superior solution</div>
<div class="line">[Monday 02 May 2011] [06:27:54] &lt;mikko&gt;       sustrik: did you notice that several compilers fail now with master?</div>
<div class="line">[Monday 02 May 2011] [06:27:54] &lt;edwin&gt;       not sure if socketpair is faster than a pthread condition for signaling</div>
<div class="line">[Monday 02 May 2011] [06:28:06] &lt;edwin&gt;       will have to test</div>
<div class="line">[Monday 02 May 2011] [06:28:18] &lt;mikko&gt;       well, ICC and sun studio</div>
<div class="line">[Monday 02 May 2011] [06:28:28] &lt;sustrik&gt;     the problem is that the signal has to interrupt a polling loop</div>
<div class="line">[Monday 02 May 2011] [06:28:39] &lt;sustrik&gt;     you can&#8217;t do that with condition variable afaik</div>
<div class="line">[Monday 02 May 2011] [06:29:06] &lt;edwin&gt;       ah because you also use it to poll network sockets</div>
<div class="line">[Monday 02 May 2011] [06:29:14] &lt;sustrik&gt;     exactly</div>
<div class="line">[Monday 02 May 2011] [06:29:38] &lt;edwin&gt;       won&#8217;t a signal() interrupt poll with EINTR?</div>
<div class="line">[Monday 02 May 2011] [06:30:15] &lt;sustrik&gt;     it&#8217;s a nightmare to combine signals with threads</div>
<div class="line">[Monday 02 May 2011] [06:30:50] &lt;edwin&gt;       the signal handler doesn&#8217;t have to actually do anything, just wake the poller</div>
<div class="line">[Monday 02 May 2011] [06:31:05] &lt;edwin&gt;       of course there is a problem which signal to use</div>
<div class="line">[Monday 02 May 2011] [06:31:11] &lt;edwin&gt;       since libzmq is a library..</div>
<div class="line">[Monday 02 May 2011] [06:31:31] &lt;sustrik&gt;     there&#8217;s a problem which thread the signal will be delivered to</div>
<div class="line">[Monday 02 May 2011] [06:32:23] &lt;edwin&gt;       yeah that too, ok bad idea. using pipe to wake poll() sounds fine, we can avoid a recv() on the mailbox</div>
<div class="line">[Monday 02 May 2011] [06:32:46] &lt;sustrik&gt;     you&#8217;ve just said it&#8217;s slower</div>
<div class="line">[Monday 02 May 2011] [06:32:57] &lt;edwin&gt;       its slower than pthread, but pipe is faster than unix sockets</div>
<div class="line">[Monday 02 May 2011] [06:33:00] &lt;edwin&gt;       (which is used now)</div>
<div class="line">[Monday 02 May 2011] [06:33:08] &lt;sustrik&gt;     ok, we can do that</div>
<div class="line">[Monday 02 May 2011] [06:33:21] &lt;sustrik&gt;     if you have a patch, send it to the mailing list</div>
<div class="line">[Monday 02 May 2011] [06:33:34] &lt;edwin&gt;       sure, I&#8217;ll be testing some variants</div>
<div class="line">[Monday 02 May 2011] [06:33:38] &lt;sustrik&gt;     ok</div>
<div class="line">[Monday 02 May 2011] [06:33:46] &lt;edwin&gt;       patch aganist 2.1.6 is fine?</div>
<div class="line">[Monday 02 May 2011] [06:33:51] &lt;edwin&gt;       or the 3.0 master?</div>
<div class="line">[Monday 02 May 2011] [06:33:58] &lt;sustrik&gt;     master is better</div>
<div class="line">[Monday 02 May 2011] [06:34:10] &lt;sustrik&gt;     but the mailbox code haven&#8217;t changed iirc</div>
<div class="line">[Monday 02 May 2011] [06:34:16] &lt;sustrik&gt;     so, it&#8217;ll be the same anyway</div>
<div class="line">[Monday 02 May 2011] [06:34:20] &lt;edwin&gt;       ok</div>
<div class="line">[Monday 02 May 2011] [06:34:41] &lt;sustrik&gt;     btw, if you want to implement ypipe+pipe thing</div>
<div class="line">[Monday 02 May 2011] [06:34:54] &lt;sustrik&gt;     that would solve one serious problem 0mq is experiencing</div>
<div class="line">[Monday 02 May 2011] [06:35:13] &lt;sustrik&gt;     namely that the mailbox can overflow in some special cases</div>
<div class="line">[Monday 02 May 2011] [06:35:39] &lt;sustrik&gt;     ypipe+pipe would solve that as there&#8217;s no limit on number of items in yqueue</div>
<div class="line">[Monday 02 May 2011] [06:36:04] &lt;edwin&gt;       won&#8217;t send() block if mailbox is full?</div>
<div class="line">[Monday 02 May 2011] [06:36:21] &lt;edwin&gt;       or zeromq spins on send with errno=EAGAIN?</div>
<div class="line">[Monday 02 May 2011] [06:37:04] &lt;sustrik&gt;     it have blocked originally, but that leads to deadlocks</div>
<div class="line">[Monday 02 May 2011] [06:37:26] &lt;sustrik&gt;     so now it tries to increase the mailbox size</div>
<div class="line">[Monday 02 May 2011] [06:37:36] &lt;sustrik&gt;     which doesn&#8217;t work well on different OSes</div>
<div class="line">[Monday 02 May 2011] [06:38:14] &lt;sustrik&gt;     btw, note that if pipe is used only for signaling</div>
<div class="line">[Monday 02 May 2011] [06:38:22] &lt;sustrik&gt;     it can be optimised on some OSes</div>
<div class="line">[Monday 02 May 2011] [06:38:49] &lt;sustrik&gt;     eg. on Linux we can use eventfd which is much faster than socketpair or pipe</div>
<div class="line">[Monday 02 May 2011] [06:42:01] &lt;edwin&gt;       eventfd looks cool, I should use that in clamd as well (I use a pipe with 1 byte write for signaling)</div>
<div class="line">[Monday 02 May 2011] [07:20:51] &lt;th&gt;  sustrik: did you have a look at #199 yet? thats a 3-0 master issue..</div>
<div class="line">[Monday 02 May 2011] [07:22:34] &lt;sustrik&gt;     th: yes, i&#8217;ve reproduced it this morning</div>
<div class="line">[Monday 02 May 2011] [07:22:51] &lt;th&gt;  sustrik: thats a great start :)</div>
<div class="line">[Monday 02 May 2011] [08:22:35] &lt;djc&gt; guido_g: turned out my test box had something else listening on a port pyzmq was using for testing...</div>
<div class="line">[Monday 02 May 2011] [09:05:02] &lt;private_meta&gt;        pieterh: eh... remember that I went to zeromq to fix a problem I had with asio? got the same problem now with zeromq</div>
<div class="line">[Monday 02 May 2011] [09:05:17] &lt;pieterh&gt;     private_meta: lol...</div>
<div class="line">[Monday 02 May 2011] [09:05:23] &lt;pieterh&gt;     what is happening?</div>
<div class="line">[Monday 02 May 2011] [09:06:19] &lt;private_meta&gt;        I send normal strings with the messaging library, all is ok, I send (boost)serialized classes, all is ok. Once I send boost serialized classes when the stuff is compiled and used with MPI, some of these messages are garbled beyond recognicion</div>
<div class="line">[Monday 02 May 2011] [09:06:31] &lt;private_meta&gt;        <a href="#id9"><span class="problematic" id="id10">*</span></a>recognition</div>
<div class="line">[Monday 02 May 2011] [09:07:26] &lt;pieterh&gt;     hmm, so it&#8217;s a problem in your app, not in the transport</div>
<div class="line">[Monday 02 May 2011] [09:07:29] &lt;private_meta&gt;        Figured that out last night, but not sure if it&#8217;s really the fault of boost serialization in combination with mpi</div>
<div class="line">[Monday 02 May 2011] [09:07:36] &lt;private_meta&gt;        well, yes and no</div>
<div class="line">[Monday 02 May 2011] [09:07:43] &lt;pieterh&gt;     sounds like a memory management issue</div>
<div class="line">[Monday 02 May 2011] [09:07:44] &lt;private_meta&gt;        the message i send, and the serialize looks ok</div>
<div class="line">[Monday 02 May 2011] [09:07:52] &lt;private_meta&gt;        but it&#8217;s broken when it arriveso n the other side</div>
<div class="line">[Monday 02 May 2011] [09:08:05] &lt;pieterh&gt;     you sure you&#8217;re not deallocating the memory before the message is really sent?</div>
<div class="line">[Monday 02 May 2011] [09:08:05] &lt;private_meta&gt;        but only when i compile it with mpi</div>
<div class="line">[Monday 02 May 2011] [09:08:14] &lt;private_meta&gt;        pretty sure</div>
<div class="line">[Monday 02 May 2011] [09:08:50] &lt;pieterh&gt;     and of course a minimal test case requires MPI... so I can&#8217;t really help much... :/</div>
<div class="line">[Monday 02 May 2011] [09:09:19] &lt;private_meta&gt;        That was one of the problems. It seems the minimal test case is quite complex</div>
<div class="line">[Monday 02 May 2011] [09:09:43] &lt;private_meta&gt;        Well, I need to write a paper now, but as soon as I&#8217;m finished, I&#8217;m going back to the matter, in a couple of days I hope</div>
<div class="line">[Monday 02 May 2011] [09:09:46] &lt;pieterh&gt;     well, try sending the data via a device, log it there and see if it&#8217;s ok or corrupt</div>
<div class="line">[Monday 02 May 2011] [09:09:57] &lt;private_meta&gt;        I DID log it</div>
<div class="line">[Monday 02 May 2011] [09:10:02] &lt;pieterh&gt;     and it was corrupt?</div>
<div class="line">[Monday 02 May 2011] [09:10:09] &lt;private_meta&gt;        Yes</div>
<div class="line">[Monday 02 May 2011] [09:10:11] &lt;pieterh&gt;     so the sender is getting it wrong...</div>
<div class="line">[Monday 02 May 2011] [09:10:23] &lt;pieterh&gt;     and you&#8217;re logging at the zmq_send() call?</div>
<div class="line">[Monday 02 May 2011] [09:10:33] &lt;private_meta&gt;        in one case, out of a 300-symbol long string I got a 4-digit number, in another case I got a 2-byte-garbled string</div>
<div class="line">[Monday 02 May 2011] [09:10:56] &lt;pieterh&gt;     did you log at the zmq_send() call?</div>
<div class="line">[Monday 02 May 2011] [09:12:09] &lt;private_meta&gt;        I logged at the zmq method I think. I wanted to pry into it deeper, but I&#8217;m out of time right now, I&#8217;ll get to the deepest send part and log there once I&#8217;m finished with the matter at hand</div>
<div class="line">[Monday 02 May 2011] [09:12:21] &lt;pieterh&gt;     ack</div>
<div class="line">[Monday 02 May 2011] [09:12:38] &lt;pieterh&gt;     I&#8217;m not always on IRC so if you get useful output, send to zeromq-dev...</div>
<div class="line">[Monday 02 May 2011] [09:50:35] &lt;martin_____&gt; Trying to build 0MQ with python bindings on OS X 10.6 - 0MQ installed into /usr/local/ no problems, building python extension gives me an exception at zmq/core/constants.c:2574: fatal error: error writing to -: Broken pipe</div>
<div class="line">[Monday 02 May 2011] [09:50:56] &lt;martin_____&gt; Any ideas?</div>
<div class="line">[Monday 02 May 2011] [10:00:48] &lt;pieterh&gt;     martin_____: I&#8217;d check disk full, permissions on directory you&#8217;re writing to</div>
<div class="line">[Monday 02 May 2011] [10:02:44] &lt;martin_____&gt; pieterh: Definitely not disk full, and I&#8217;m running the install as root (it&#8217;s my own laptop)</div>
<div class="line">[Monday 02 May 2011] [10:06:20] &lt;martin_____&gt; here&#8217;s the compilation command: gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch ppc -arch x86_64 -pipe -I/usr/local/include -Izmq/utils -Izmq/core -Izmq/devices -I/System/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6 -c zmq/core/constants.c -o build/temp.macosx-10.6-universal-2.6/zmq/core/constants.o -Wno-unused-function -Wn</div>
<div class="line">[Monday 02 May 2011] [11:37:16] &lt;jhawk28&gt;     pieterh: was looking at the specs, does the GPL license for the spec means that any impl of the specs need to be GPL?</div>
<div class="line">[Monday 02 May 2011] [11:37:32] &lt;pieterh&gt;     jhawk28: nope</div>
<div class="line">[Monday 02 May 2011] [11:37:40] &lt;pieterh&gt;     since you ask, I&#8217;ll clarify this in the text</div>
<div class="line">[Monday 02 May 2011] [11:37:53] &lt;jhawk28&gt;     it just means the spec itself</div>
<div class="line">[Monday 02 May 2011] [11:38:38] &lt;pieterh&gt;     indeed</div>
<div class="line">[Monday 02 May 2011] [11:38:59] &lt;jhawk28&gt;     good, I was hoping to use them to create a native Java impl</div>
<div class="line">[Monday 02 May 2011] [11:39:17] &lt;jhawk28&gt;     in the future</div>
<div class="line">[Monday 02 May 2011] [11:39:47] &lt;jhawk28&gt;     and I prefer BSD/MIT/Apache 2.0</div>
<div class="line">[Monday 02 May 2011] [11:41:08] &lt;pieterh&gt;     jhawk28: can you check <a class="reference external" href="http://rfc.zeromq.org/spec:13">http://rfc.zeromq.org/spec:13</a> and tell me if it&#8217;s clear?</div>
<div class="line">[Monday 02 May 2011] [11:41:13] &lt;pieterh&gt;     see right hand panel...</div>
<div class="line">[Monday 02 May 2011] [11:43:05] &lt;jhawk28&gt;     yes, that is clear. wasn&#8217;t expecting it to be on the right hand panel, but ok</div>
<div class="line">[Monday 02 May 2011] [11:44:02] &lt;pieterh&gt;     well, that makes it easier to apply to all specs, otherwise I have to edit each one individually</div>
<div class="line">[Monday 02 May 2011] [11:44:15] &lt;pieterh&gt;     also, it&#8217;s not really part of the spec but an explanatory note</div>
<div class="line">[Monday 02 May 2011] [11:46:33] &lt;jhawk28&gt;     yes, thank you for the clarification</div>
<div class="line">[Monday 02 May 2011] [11:51:06] &lt;pieterh&gt;     jhawk28: I&#8217;d be really interested in your experiences making a native implementation</div>
<div class="line">[Monday 02 May 2011] [11:55:17] &lt;sustrik&gt;     th, pieterh: patch for issue 199 is at the ML</div>
<div class="line">[Monday 02 May 2011] [11:55:37] &lt;pieterh&gt;     sustrik: great! I&#8217;ll test that immediately</div>
<div class="line">[Monday 02 May 2011] [11:58:03] &lt;pieterh&gt;     sustrik: it works, confirmed on 3.0</div>
<div class="line">[Monday 02 May 2011] [11:58:20]        * pieterh loves having test cases in a separate repo...</div>
<div class="line">[Monday 02 May 2011] [11:58:56] &lt;sustrik&gt;     :)</div>
<div class="line">[Monday 02 May 2011] [12:30:42] &lt;th&gt;  sustrik: oh really? fantastic!</div>
<div class="line">[Monday 02 May 2011] [12:36:00] &lt;pieterh&gt;     sustrik: should I try to backport this to 2.1?</div>
<div class="line">[Monday 02 May 2011] [12:36:34] &lt;sustrik&gt;     pieterh: yes</div>
<div class="line">[Monday 02 May 2011] [12:36:41] &lt;pieterh&gt;     ok</div>
<div class="line">[Monday 02 May 2011] [12:38:26] &lt;NikolaVeber&gt; does anyone else have problems by copy/paste from the guide?</div>
<div class="line">[Monday 02 May 2011] [12:38:47] &lt;__alex&gt;      erm, yes with the python-snippets</div>
<div class="line">[Monday 02 May 2011] [12:39:01] &lt;NikolaVeber&gt; I had the same with php and c...</div>
<div class="line">[Monday 02 May 2011] [12:39:44] &lt;__alex&gt;      chars like &#8221;...&#8221; where one thing, but there&#8217;s more which i couldn&#8217;t figure out</div>
<div class="line">[Monday 02 May 2011] [12:39:55] &lt;NikolaVeber&gt; I guess it&#8217;s the sodify&#8217;s fault, or whatever this code formatting thing is calles</div>
<div class="line">[Monday 02 May 2011] [12:40:07] &lt;NikolaVeber&gt; codify*</div>
<div class="line">[Monday 02 May 2011] [12:40:30] &lt;NikolaVeber&gt; seen it in gedit and eclipse...</div>
<div class="line">[Monday 02 May 2011] [12:41:46] &lt;__alex&gt;      was strange, took it to vim with utf8 encoding(also the file) and a valid python-encoding header</div>
<div class="line">[Monday 02 May 2011] [12:41:52] &lt;__alex&gt;      it did boom</div>
<div class="line">[Monday 02 May 2011] [12:44:52] &lt;th&gt;  sustrik: yea - confirmed again for 3-0</div>
<div class="line">[Monday 02 May 2011] [12:44:53] &lt;pieterh&gt;     NikolaVeber: copy/paste from the Guide may do strange things...</div>
<div class="line">[Monday 02 May 2011] [12:45:56] &lt;NikolaVeber&gt; could be the formatting library for the code...</div>
<div class="line">[Monday 02 May 2011] [12:46:05] &lt;pieterh&gt;     it should work but a &#8216;smart&#8217; editor may trip over the formatting</div>
<div class="line">[Monday 02 May 2011] [12:46:16] &lt;pieterh&gt;     I&#8217;m using Kate and can copy/paste without trouble</div>
<div class="line">[Monday 02 May 2011] [12:46:23] &lt;pieterh&gt;     do you have a specific example that&#8217;s failing?</div>
<div class="line">[Monday 02 May 2011] [12:46:45] &lt;NikolaVeber&gt; hm, my colleague just went home</div>
<div class="line">[Monday 02 May 2011] [12:46:56] &lt;NikolaVeber&gt; it was the php binding code</div>
<div class="line">[Monday 02 May 2011] [12:47:00] &lt;pieterh&gt;     ok, raise an issue on the guide tracker</div>
<div class="line">[Monday 02 May 2011] [12:47:02] &lt;NikolaVeber&gt; req resp example</div>
<div class="line">[Monday 02 May 2011] [12:47:21] &lt;pieterh&gt;     there are some characters that might need escaping</div>
<div class="line">[Monday 02 May 2011] [12:47:43] &lt;NikolaVeber&gt; I&#8217;ll look at it tomorrow, with exact problem</div>
<div class="line">[Monday 02 May 2011] [12:47:51] &lt;NikolaVeber&gt; I had the same in c++</div>
<div class="line">[Monday 02 May 2011] [12:48:08] &lt;pieterh&gt;     ack</div>
<div class="line">[Monday 02 May 2011] [12:48:37] &lt;NikolaVeber&gt; not a big deal, but spoils the fun sometimes :)</div>
<div class="line">[Monday 02 May 2011] [12:48:57] &lt;pieterh&gt;     well, let me know the specific problem and we&#8217;ll fix it... &#8220;it doesn&#8217;t work&#8221; isn&#8217;t useful data :)</div>
<div class="line">[Monday 02 May 2011] [12:49:30] &lt;NikolaVeber&gt; I know :)</div>
<div class="line">[Monday 02 May 2011] [12:50:08] &lt;NikolaVeber&gt; I tracked it last time it failed with c++ examples to stack overflow describing the bug in some code-colouring plugin</div>
<div class="line">[Monday 02 May 2011] [12:51:20] &lt;NikolaVeber&gt; ok, I have it</div>
<div class="line">[Monday 02 May 2011] [12:51:21] &lt;NikolaVeber&gt; :)</div>
<div class="line">[Monday 02 May 2011] [12:52:23] &lt;NikolaVeber&gt; I have copied the first c++ example in gedit</div>
<div class="line">[Monday 02 May 2011] [12:52:25] &lt;NikolaVeber&gt; <a class="reference external" href="http://pastebin.com/zKhHBnr3">http://pastebin.com/zKhHBnr3</a></div>
<div class="line">[Monday 02 May 2011] [12:52:39] &lt;pieterh&gt;     ok, let me try that</div>
<div class="line">[Monday 02 May 2011] [12:52:49] &lt;pieterh&gt;     which is the &#8216;first c++ example&#8217;?</div>
<div class="line">[Monday 02 May 2011] [12:52:55] &lt;pieterh&gt;     hwserver?</div>
<div class="line">[Monday 02 May 2011] [12:53:08] &lt;NikolaVeber&gt; /HelloWorldserverinC++</div>
<div class="line">[Monday 02 May 2011] [12:53:14] &lt;NikolaVeber&gt;   //HelloWorldserverinC++</div>
<div class="line">[Monday 02 May 2011] [12:53:29] &lt;NikolaVeber&gt; right beneath figure one</div>
<div class="line">[Monday 02 May 2011] [12:53:35] &lt;pieterh&gt;     I copied/pasted into gedit, it works fine</div>
<div class="line">[Monday 02 May 2011] [12:54:14] &lt;NikolaVeber&gt; gives a bunch of crap in my case...</div>
<div class="line">[Monday 02 May 2011] [12:54:17] &lt;pieterh&gt;     works fine in Kate too</div>
<div class="line">[Monday 02 May 2011] [12:54:28] &lt;pieterh&gt;     vim shows nothing, I think because of pasteboard confusion</div>
<div class="line">[Monday 02 May 2011] [12:54:31] &lt;NikolaVeber&gt; could be the firefox&#8217; fault</div>
<div class="line">[Monday 02 May 2011] [12:54:43] &lt;pieterh&gt;     did you enable the &#8220;Paste as crap&#8221; option in gedit?</div>
<div class="line">[Monday 02 May 2011] [12:54:54] &lt;NikolaVeber&gt; hm, not that I know</div>
<div class="line">[Monday 02 May 2011] [12:54:58] &lt;pieterh&gt;     it needs to paste as plain text, not HTML</div>
<div class="line">[Monday 02 May 2011] [12:56:01] &lt;pieterh&gt;     NikolaVeber: perhaps your default language setting affects it</div>
<div class="line">[Monday 02 May 2011] [12:56:06] &lt;pieterh&gt;     I&#8217;m using US English</div>
<div class="line">[Monday 02 May 2011] [12:56:32] &lt;NikolaVeber&gt; hm, my UI language is english</div>
<div class="line">[Monday 02 May 2011] [12:56:49] &lt;pieterh&gt;     hmm, so the error isn&#8217;t in gedit</div>
<div class="line">[Monday 02 May 2011] [12:56:54] &lt;pieterh&gt;     it&#8217;s in gcc when you save the file</div>
<div class="line">[Monday 02 May 2011] [12:57:17] &lt;NikolaVeber&gt; whell, if I &#8220;clean up&#8221; the code</div>
<div class="line">[Monday 02 May 2011] [12:57:30] &lt;NikolaVeber&gt; that is, do a bunch of backspace/enter moves</div>
<div class="line">[Monday 02 May 2011] [12:57:33] &lt;NikolaVeber&gt; it works</div>
<div class="line">[Monday 02 May 2011] [12:57:47] &lt;NikolaVeber&gt; so it has to be some invisible characters</div>
<div class="line">[Monday 02 May 2011] [12:58:02] &lt;pieterh&gt;     can you save, put the source into a zip, send me that?</div>
<div class="line">[Monday 02 May 2011] [12:58:21] &lt;NikolaVeber&gt; shure</div>
<div class="line">[Monday 02 May 2011] [12:58:42] &lt;pieterh&gt;     ah, I know...</div>
<div class="line">[Monday 02 May 2011] [12:58:46] &lt;pieterh&gt;     hehe :)</div>
<div class="line">[Monday 02 May 2011] [12:59:16] &lt;NikolaVeber&gt; ?</div>
<div class="line">[Monday 02 May 2011] [12:59:26] &lt;NikolaVeber&gt; are you getting the file?</div>
<div class="line">[Monday 02 May 2011] [12:59:34] &lt;pieterh&gt;     yeah, but it&#8217;s not necessary any more</div>
<div class="line">[Monday 02 May 2011] [12:59:38] &lt;NikolaVeber&gt; ok :)</div>
<div class="line">[Monday 02 May 2011] [12:59:52] &lt;pieterh&gt;     I use unicode whitespace characters to force the layout to work</div>
<div class="line">[Monday 02 May 2011] [13:00:00] &lt;th&gt;  Assertion failed: new_sndbuf &gt; old_sndbuf (mailbox.cpp:183)</div>
<div class="line">[Monday 02 May 2011] [13:00:05] &lt;th&gt;  whats that?</div>
<div class="line">[Monday 02 May 2011] [13:00:12] &lt;pieterh&gt;     it was... difficult to get the coloring to work otherwise</div>
<div class="line">[Monday 02 May 2011] [13:00:18] &lt;NikolaVeber&gt; hehe, that could be it :)</div>
<div class="line">[Monday 02 May 2011] [13:00:22] &lt;pieterh&gt;     th: looks like a resource issue</div>
<div class="line">[Monday 02 May 2011] [13:00:45] &lt;th&gt;  pieterh: after running 199 testcase with 3-0 for a while</div>
<div class="line">[Monday 02 May 2011] [13:00:47] &lt;pieterh&gt;     th: read <a class="reference external" href="http://zero.mq/tips">http://zero.mq/tips</a></div>
<div class="line">[Monday 02 May 2011] [13:00:58] &lt;CIA-75&gt;      libzmq: 03Pieter Hintjens 07master * re78cc47 10/ (3 files): Moved tests off 5555 (conflict with Eclipse) ...</div>
<div class="line">[Monday 02 May 2011] [13:01:06] &lt;pieterh&gt;     NikolaVeber: there is no way to fix this afaik, but I could be wrong</div>
<div class="line">[Monday 02 May 2011] [13:01:25] &lt;NikolaVeber&gt; do you have the sources for all examples somewhere?</div>
<div class="line">[Monday 02 May 2011] [13:01:30] &lt;pieterh&gt;     NikolaVeber: please log an issue in the tracker, I&#8217;ll think about it and find a solution</div>
<div class="line">[Monday 02 May 2011] [13:01:48] &lt;NikolaVeber&gt; it might be a good idea to have plain-text files linked</div>
<div class="line">[Monday 02 May 2011] [13:01:57] &lt;pieterh&gt;     if you click on the &#8220;GET THE EXAMPLES&#8221; button on the main guide page ...</div>
<div class="line">[Monday 02 May 2011] [13:02:12] &lt;sustrik&gt;     th: it&#8217;s socketpair buffers filled up</div>
<div class="line">[Monday 02 May 2011] [13:02:30] &lt;pieterh&gt;     NikolaVeber: there is also a section at <a class="reference external" href="http://zguide.zeromq.org/page:all#Getting-the-Examples">http://zguide.zeromq.org/page:all#Getting-the-Examples</a></div>
<div class="line">[Monday 02 May 2011] [13:02:55] &lt;NikolaVeber&gt; lets see</div>
<div class="line">[Monday 02 May 2011] [13:02:56] &lt;NikolaVeber&gt; :)</div>
<div class="line">[Monday 02 May 2011] [13:03:49] &lt;th&gt;  sustrik: what resource would that be? vmsize?</div>
<div class="line">[Monday 02 May 2011] [13:04:14] &lt;th&gt;  sustrik: ahh data segment probably.</div>
<div class="line">[Monday 02 May 2011] [13:04:36] &lt;th&gt;  ah HWM would probably help</div>
<div class="line">[Monday 02 May 2011] [13:04:37] &lt;NikolaVeber&gt; pieterh, maybe linking to sources in the guide? I don&#8217;t mind getting them all personally, just speculating on the general user experience :)</div>
<div class="line">[Monday 02 May 2011] [13:05:05] &lt;sustrik&gt;     th: no, it&#8217;s socketpair buffer size limit</div>
<div class="line">[Monday 02 May 2011] [13:05:16] &lt;pieterh&gt;     NikolaVeber: the Guide already links to the sources, I&#8217;m not sure what you mean</div>
<div class="line">[Monday 02 May 2011] [13:05:27] &lt;pieterh&gt;     you mean a link in each example to the source code?</div>
<div class="line">[Monday 02 May 2011] [13:05:28] &lt;sustrik&gt;     th: what OS are you on?</div>
<div class="line">[Monday 02 May 2011] [13:05:53] &lt;NikolaVeber&gt; pieterh, I mean links to the plaintext-source</div>
<div class="line">[Monday 02 May 2011] [13:06:21] &lt;pieterh&gt;     yes, that part I understood but since there are already two such links I am asking what more links you want, and where exactly</div>
<div class="line">[Monday 02 May 2011] [13:06:25] &lt;NikolaVeber&gt; but if they are &#8220;pimped&#8221; with utf8 whitespaces, it&#8217;s not much of a help</div>
<div class="line">[Monday 02 May 2011] [13:06:49] &lt;NikolaVeber&gt; under each example, a link to the appropriate plain-text version</div>
<div class="line">[Monday 02 May 2011] [13:07:07] &lt;pieterh&gt;     it&#8217;s better just to make copy/paste work, no?</div>
<div class="line">[Monday 02 May 2011] [13:07:15] &lt;NikolaVeber&gt; that would be optimal :)</div>
<div class="line">[Monday 02 May 2011] [13:07:22] &lt;pieterh&gt;     please enter an issue in the tracker, I&#8217;ll get to it later</div>
<div class="line">[Monday 02 May 2011] [13:07:23] &lt;pieterh&gt;     thanks</div>
<div class="line">[Monday 02 May 2011] [13:07:37] &lt;NikolaVeber&gt; np, thank you :)</div>
<div class="line">[Monday 02 May 2011] [13:09:06] &lt;NikolaVeber&gt; done</div>
<div class="line">[Monday 02 May 2011] [13:09:32] &lt;th&gt;  sustrik: ubuntu10.04 64bit</div>
<div class="line">[Monday 02 May 2011] [13:26:21] &lt;CIA-75&gt;      libzmq: 03Martin Sustrik 07master * re5d4cd3 10/ src/dist.cpp : Yet one more fix related to PUB socket and multipart messages ...</div>
<div class="line">[Monday 02 May 2011] [13:28:50] &lt;CIA-75&gt;      libzmq: 03Martin Sustrik 07master * r6ecec9b 10/ src/xrep.cpp : Current inpipe remains unchaged in XREP when other pipe terminates ...</div>
<div class="line">[Monday 02 May 2011] [13:38:47] &lt;iFire&gt;       neopallium hmm lthreads uses pthreads which is unix only [windows is lgpl] :/</div>
<div class="line">[Monday 02 May 2011] [13:39:05] &lt;iFire&gt;       I wonder if it&#8217;s possible to rewrite it using tbb or boost threads</div>
<div class="line">[Monday 02 May 2011] [13:41:39] &lt;pieterh&gt;     iFire: what&#8217;s lthreads?</div>
<div class="line">[Monday 02 May 2011] [13:42:10] &lt;iFire&gt;       <a class="reference external" href="https://github.com/Neopallium/lua-llthreads">https://github.com/Neopallium/lua-llthreads</a></div>
<div class="line">[Monday 02 May 2011] [13:42:18] &lt;iFire&gt;       apparently it&#8217;s a lua pthreads wrapper</div>
<div class="line">[Monday 02 May 2011] [13:42:45] &lt;pieterh&gt;     I wrote a similar class for czmq, zthreads, which has the win32 code</div>
<div class="line">[Monday 02 May 2011] [13:42:53] &lt;pieterh&gt;     doesn&#8217;t wrap all pthreads, just thread creation</div>
<div class="line">[Monday 02 May 2011] [13:43:03] &lt;iFire&gt;       well I&#8217;m seeing how far I can go doing it in lua</div>
<div class="line">[Monday 02 May 2011] [13:43:34] &lt;iFire&gt;       Using send_msg/recv_msg functions running under LuaJIT2 (git HEAD):</div>
<div class="line">[Monday 02 May 2011] [13:43:35] &lt;iFire&gt;       mean throughput: 6160911 [msg/s]</div>
<div class="line">[Monday 02 May 2011] [13:43:35] &lt;iFire&gt;       mean throughput: 1478.619 [Mb/s]</div>
<div class="line">[Monday 02 May 2011] [13:43:35] &lt;iFire&gt;       C++ code:</div>
<div class="line">[Monday 02 May 2011] [13:43:35] &lt;iFire&gt;       mean throughput: 6241452 [msg/s]</div>
<div class="line">[Monday 02 May 2011] [13:43:36] &lt;iFire&gt;       mean throughput: 1497.948 [Mb/s]</div>
<div class="line">[Monday 02 May 2011] [13:43:47] &lt;iFire&gt;       from the lua-zmq repo</div>
<div class="line">[Monday 02 May 2011] [13:43:58] &lt;pieterh&gt;     that&#8217;s pretty nice</div>
<div class="line">[Monday 02 May 2011] [13:44:39] &lt;iFire&gt;       apparently I have to compile lua sockets if I want to run those benchmarks though</div>
<div class="line">[Monday 02 May 2011] [13:45:00] &lt;iFire&gt;       that&#8217;s what I&#8217;ve been trying to do</div>
<div class="line">[Monday 02 May 2011] [14:02:48] &lt;th&gt;  pieterh: patch works for 2.1 as well. it even applies with a small offset</div>
<div class="line">[Monday 02 May 2011] [14:03:04] &lt;pieterh&gt;     th: great! I&#8217;ve not had time to test it yet</div>
<div class="line">[Monday 02 May 2011] [14:03:32] &lt;pieterh&gt;     I&#8217;ll do this right now</div>
<div class="line">[Monday 02 May 2011] [14:10:19] &lt;pieterh&gt;     th: ack, confirmed on 2.1</div>
<div class="line">[Monday 02 May 2011] [14:10:26] &lt;pieterh&gt;     it&#8217;ll go into 2.1.7</div>
<div class="line">[Monday 02 May 2011] [14:12:26] &lt;pieterh&gt;     th: if you want to get the 2.1 master, it&#8217;s at git://github.com/zeromq/zeromq2-1</div>
<div class="line">[Monday 02 May 2011] [14:41:16] &lt;iFire&gt;       pieterh ok that was weird</div>
<div class="line">[Monday 02 May 2011] [14:41:26] &lt;iFire&gt;       first windows sucks</div>
<div class="line">[Monday 02 May 2011] [14:41:34] &lt;iFire&gt;       and luajit has a higher performance than c O.o</div>
<div class="line">[Monday 02 May 2011] [14:42:00] &lt;pieterh&gt;     performance figures are quite variable, +- 10% afaik</div>
<div class="line">[Monday 02 May 2011] [14:42:12] &lt;pieterh&gt;     more, depending on your configuration</div>
<div class="line">[Monday 02 May 2011] [14:42:42] &lt;iFire&gt;       pieterh what throughput do you usually get for windowS?</div>
<div class="line">[Monday 02 May 2011] [14:42:53] &lt;pieterh&gt;     I don&#8217;t use Windows, personally</div>
<div class="line">[Monday 02 May 2011] [14:43:03] &lt;pieterh&gt;     but reports are 50-20% of Linux</div>
<div class="line">[Monday 02 May 2011] [14:43:18] &lt;iFire&gt;       <a class="reference external" href="http://pastebin.ca/2052970">http://pastebin.ca/2052970</a></div>
<div class="line">[Monday 02 May 2011] [14:43:21] &lt;iFire&gt;       this is what I got</div>
<div class="line">[Monday 02 May 2011] [14:43:34] &lt;iFire&gt;       for some reason c++ is slower than luajit</div>
<div class="line">[Monday 02 May 2011] [14:44:05] &lt;pieterh&gt;     iFire: without specifying what setup you&#8217;re on, the figures are pretty meaningless, sorry</div>
<div class="line">[Monday 02 May 2011] [14:44:12] &lt;iFire&gt;       ok</div>
<div class="line">[Monday 02 May 2011] [14:44:32] &lt;iFire&gt;       well I&#8217;m trying to figure out what&#8217;s the difference between windows c++ and lua</div>
<div class="line">[Monday 02 May 2011] [14:44:33] &lt;pieterh&gt;     also, you need to run the tests quite a few times</div>
<div class="line">[Monday 02 May 2011] [14:44:36] &lt;iFire&gt;       hmm</div>
<div class="line">[Monday 02 May 2011] [14:44:44] &lt;pieterh&gt;     and take the average of the N fastest runs</div>
<div class="line">[Monday 02 May 2011] [14:44:46] &lt;iFire&gt;       it&#8217;s quite variable?</div>
<div class="line">[Monday 02 May 2011] [14:44:51] &lt;pieterh&gt;     one run proves very little</div>
<div class="line">[Monday 02 May 2011] [14:45:12] &lt;pieterh&gt;     well, we <em>know</em> that lua can&#8217;t be faster than the C api it&#8217;s <em>calling</em> :)</div>
<div class="line">[Monday 02 May 2011] [14:45:18] &lt;pieterh&gt;     so you have at least the variance shown here</div>
<div class="line">[Monday 02 May 2011] [14:48:57] &lt;sustrik&gt;     throughput is silly metric, it&#8217;s inherently unstable</div>
<div class="line">[Monday 02 May 2011] [14:49:58] &lt;iFire&gt;       the question I want to answer is how much of a difference is between lua and c++</div>
<div class="line">[Monday 02 May 2011] [14:50:25] &lt;sustrik&gt;     check latencies</div>
<div class="line">[Monday 02 May 2011] [14:50:37] &lt;sustrik&gt;     latency is much better metric</div>
<div class="line">[Monday 02 May 2011] [14:51:14] &lt;sustrik&gt;     it should be fairly stable and give you an sane idea what the difference between the two is</div>
<div class="line">[Monday 02 May 2011] [14:59:03] &lt;iFire&gt;       something is wrong on my system</div>
<div class="line">[Monday 02 May 2011] [15:00:35] &lt;iFire&gt;       <a class="reference external" href="http://pastebin.ca/2052978">http://pastebin.ca/2052978</a></div>
<div class="line">[Monday 02 May 2011] [15:01:19] &lt;iFire&gt;       also missed a zero on the inproc. but I&#8217;m not comparing that</div>
<div class="line">[Monday 02 May 2011] [15:03:20] &lt;iFire&gt;       bah</div>
<div class="line">[Monday 02 May 2011] [15:03:26] &lt;iFire&gt;       I should do this correctly</div>
<div class="line">[Monday 02 May 2011] [15:03:32] &lt;iFire&gt;       and have multiple tests</div>
<div class="line">[Monday 02 May 2011] [15:13:28] &lt;sustrik&gt;     latency tests are stable, you&#8217;ll see similar figures all the time</div>
<div class="line">[Monday 02 May 2011] [15:13:53] &lt;iFire&gt;       I wonder where the extra 10 us comes from</div>
<div class="line">[Monday 02 May 2011] [15:14:11] &lt;iFire&gt;       sustrik actually it fluctuates too</div>
<div class="line">[Monday 02 May 2011] [15:14:18] &lt;iFire&gt;       on a desktop</div>
<div class="line">[Monday 02 May 2011] [15:14:18] &lt;sustrik&gt;     more than 2-3 us?</div>
<div class="line">[Monday 02 May 2011] [15:14:59] &lt;sustrik&gt;     well, if there&#8217;s lot of stuff running on the box, it can blur the results</div>
<div class="line">[Monday 02 May 2011] [15:16:41] &lt;pieterh&gt;     iFire: if you don&#8217;t have 4 cores, and a quiet box, any test will be quite flaky</div>
<div class="line">[Monday 02 May 2011] [15:16:44] &lt;pieterh&gt;     flakey</div>
<div class="line">[Monday 02 May 2011] [15:16:49] &lt;iFire&gt;       hmm</div>
<div class="line">[Monday 02 May 2011] [15:17:05] &lt;iFire&gt;       I guess I can try doing the tests on a vps where it&#8217;s not a desktop</div>
<div class="line">[Monday 02 May 2011] [15:17:13] &lt;pieterh&gt;     ideal is two boxes connected over a private network</div>
<div class="line">[Monday 02 May 2011] [15:17:25] &lt;pieterh&gt;     how many cores on your desktop?</div>
<div class="line">[Monday 02 May 2011] [15:17:30] &lt;iFire&gt;       4</div>
<div class="line">[Monday 02 May 2011] [15:17:46] &lt;pieterh&gt;     and you&#8217;re running other software?</div>
<div class="line">[Monday 02 May 2011] [15:17:51] &lt;iFire&gt;       yes</div>
<div class="line">[Monday 02 May 2011] [15:18:06] &lt;iFire&gt;       windows says 3-5% CPU use though</div>
<div class="line">[Monday 02 May 2011] [15:18:12] &lt;pieterh&gt;     you&#8217;re on Windows?</div>
<div class="line">[Monday 02 May 2011] [15:18:31] &lt;iFire&gt;       windows is probably a terrible platform</div>
<div class="line">[Monday 02 May 2011] [15:18:34] &lt;pieterh&gt;     forget it, you&#8217;re not going to get serious metrics</div>
<div class="line">[Monday 02 May 2011] [15:19:00] &lt;pieterh&gt;     but if you really must use that, then kill anything you don&#8217;t absolutely need</div>
<div class="line">[Monday 02 May 2011] [15:19:19] &lt;pieterh&gt;     and run the tests multiple times, taking average of the 3 lowest runs (run each 10-20 times)</div>
<div class="line">[Monday 02 May 2011] [15:20:13] &lt;iFire&gt;       well it&#8217;s not serious but it&#8217;s just nagging me to see c++  how slower than lua on thr and lat</div>
<div class="line">[Monday 02 May 2011] [15:20:13] &lt;pieterh&gt;     also, make sure you send/recv enough messages, e.g. 10M or 20M</div>
<div class="line">[Monday 02 May 2011] [15:20:17] &lt;iFire&gt;       hmm</div>
<div class="line">[Monday 02 May 2011] [15:20:38] &lt;iFire&gt;       ok I&#8217;ll try 10 million</div>
<div class="line">[Monday 02 May 2011] [15:20:54] &lt;sustrik&gt;     don&#8217;t do that with latency tests, it&#8217;ll take forever</div>
<div class="line">[Monday 02 May 2011] [15:21:01] &lt;sustrik&gt;     10 million for throughput</div>
<div class="line">[Monday 02 May 2011] [15:21:07] &lt;sustrik&gt;     100,000 for latency</div>
<div class="line">[Monday 02 May 2011] [15:23:37] &lt;sustrik&gt;     the lua being faster is kind of strange</div>
<div class="line">[Monday 02 May 2011] [15:23:56] &lt;sustrik&gt;     how does it compute the result?</div>
<div class="line">[Monday 02 May 2011] [15:24:21] &lt;iFire&gt;       <a class="reference external" href="https://github.com/Neopallium/lua-zmq/tree/master/perf">https://github.com/Neopallium/lua-zmq/tree/master/perf</a></div>
<div class="line">[Monday 02 May 2011] [15:24:35] &lt;iFire&gt;       not sure how faithful are the ports</div>
<div class="line">[Monday 02 May 2011] [15:25:20] &lt;iFire&gt;       bah</div>
<div class="line">[Monday 02 May 2011] [15:25:24] &lt;iFire&gt;       that might be why</div>
<div class="line">[Monday 02 May 2011] [15:26:29] &lt;sustrik&gt;     ah, it uses lua&#8217;s time function</div>
<div class="line">[Monday 02 May 2011] [15:26:45] &lt;sustrik&gt;     if you want to have it consistent with C tests</div>
<div class="line">[Monday 02 May 2011] [15:27:11] &lt;sustrik&gt;     you should use &#8220;stopwatch&#8221; provided with libzmq (see <a href="#id24"><span class="problematic" id="id25">zmq_utils.h_</span></a></div>
<div class="line">[Monday 02 May 2011] [15:35:45] &lt;iFire&gt;       I guess it doesn&#8217;t really matter :) it&#8217;s fast enough. especially if I&#8217;m using inproc</div>
<div class="line">[Monday 02 May 2011] [16:04:11] &lt;zerosanity&gt;  Is it possible to use epgm or pgm on EC2?</div>
<div class="line">[Monday 02 May 2011] [16:29:11] &lt;jhawk28&gt;     zerosanity: it doesnt look like EC2 supports multicast</div>
<div class="line">[Monday 02 May 2011] [17:44:35] &lt;<a href="#id15"><span class="problematic" id="id16">dan__</span></a>&gt;       I have a really basic forwarder question...  I&#8217;m using pubsub and when I connect directly, it seems to work just fine.  When I put a forwarder in the middle, I don&#8217;t get any messages.  I suspect I&#8217;m doing something wrong, but can&#8217;t figure it out.</div>
<div class="line">[Monday 02 May 2011] [17:46:20] &lt;<a href="#id15"><span class="problematic" id="id17">dan__</span></a>&gt;       My minimal code looks like: publishers = context.socket(zmq.SUB) publishers.bind(&#8220;<a class="reference external" href="tcp://127.0.0.1:5555">tcp://127.0.0.1:5555</a>&#8221;); subscribers = context.socket(zmq.PUB) subscribers.bind(&#8216;<a class="reference external" href="tcp://127.0.0.1:5556')zmq.device(zmq.FORWARDER">tcp://127.0.0.1:5556&#8217;)zmq.device(zmq.FORWARDER</a>, publishers, subscribers)</div>
<div class="line">[Monday 02 May 2011] [18:12:53] &lt;jhawk28&gt;     <a href="#id15"><span class="problematic" id="id18">dan__</span></a>: are you subscribing to all?</div>
<div class="line">[Monday 02 May 2011] [18:16:54] &lt;jhawk28&gt;     <a href="#id15"><span class="problematic" id="id19">dan__</span></a>: you need to call publishers.subscribe(&#8220;&#8221;.getBytes, 0);</div>
<div class="line">[Monday 02 May 2011] [18:19:32] &lt;neopallium&gt;  what version of zeromq was the zmq_stopwatch_*() functions introduced?</div>
<div class="line">[Monday 02 May 2011] [18:25:06] &lt;jhawk28&gt;     neopallium: <a class="reference external" href="https://github.com/zeromq/libzmq/commit/3b636d7d185cd1a1fa300b4d9ca78d2587cb4bf5#diff-1">https://github.com/zeromq/libzmq/commit/3b636d7d185cd1a1fa300b4d9ca78d2587cb4bf5#diff-1</a></div>
<div class="line">[Monday 02 May 2011] [18:25:14] &lt;jhawk28&gt;     thats when it was moved to zmq_utils.cpp</div>
<div class="line">[Monday 02 May 2011] [18:27:10] &lt;neopallium&gt;  jhawk28: thanks, I am going to add support for those functions to my lua bindings and wanted to make sure it wasn&#8217;t a new feature.</div>
<div class="line">[Monday 02 May 2011] [18:28:34] &lt;jhawk28&gt;     I&#8217;m seeing them at least back to Aug 7</div>
<div class="line">[Monday 02 May 2011] [18:28:37] &lt;jhawk28&gt;     2010</div>
<div class="line">[Monday 02 May 2011] [18:30:36] &lt;jhawk28&gt;     ah, found when it was added: 7f01e9970d211235fc8057de6dc41ba8ceafe795</div>
<div class="line">[Monday 02 May 2011] [18:30:50] &lt;jhawk28&gt;     Jun 17, 2010</div>
<div class="line">[Monday 02 May 2011] [18:32:40] &lt;neopallium&gt;  looks like that is zeromq 2.0.7</div>
<div class="line">[Monday 02 May 2011] [18:33:59] &lt;jhawk28&gt;     based on the comment, it looks like it was removed then added</div>
<div class="line">[Monday 02 May 2011] [18:34:14] &lt;neopallium&gt;  that is old enough, also those functions are not documented.</div>
<div class="line">[Monday 02 May 2011] [18:34:14] &lt;jhawk28&gt;     and then moved on Apr 11, 2011</div>
<div class="line">[Monday 02 May 2011] [18:35:01] &lt;neopallium&gt;  only the source was moved not the header prototypes.</div>
<div class="line">[Monday 02 May 2011] [18:35:12] &lt;neopallium&gt;  so that is not a problem for bindings.</div>
<div class="line">[Monday 02 May 2011] [18:36:34] &lt;neopallium&gt;  jhawk28: thanks for helping me track that down.  I didn&#8217;t think to use git blame to find out the answer.</div>
<div class="line">[Monday 02 May 2011] [18:38:02] &lt;jhawk28&gt;     np</div>
<div class="line">[Monday 02 May 2011] [20:06:24] &lt;neopallium&gt;  iFire: lua-zmq now has support for zmq_stopwatch_*() functions and the perf/<a href="#id11"><span class="problematic" id="id12">*</span></a>.lua benchmarks have been updated to use that instead of socket.gettime().</div>
<div class="line">[Tuesday 03 May 2011] [01:21:02] &lt;Steve____&gt;  newbie question here - I just downloaded the windows version of zeromq, and opened up the project in visual studio 2008</div>
<div class="line">[Tuesday 03 May 2011] [01:22:00] &lt;Steve____&gt;  two projects - inproc_lat, and inproc_thr show as unavailable.  were they removed?  or what do i do to get them in place?</div>
<div class="line">[Tuesday 03 May 2011] [01:22:19] &lt;Steve____&gt;  (so far all I&#8217;ve done is downloaded the zip file from the &#8220;Grab the Software&#8221; page)</div>
<div class="line">[Tuesday 03 May 2011] [01:53:44] &lt;iFire&gt;      bah</div>
<div class="line">[Tuesday 03 May 2011] [02:52:29] Notice       -ChanServ- [#qt-labs] Welcome to the Qt developers public hideout. Qt Development Frameworks personnel will have Voice status, so they should be easy to pinpoint in the crowd. Please do not paste large blocks of code in the channel, but rather use a pastebin site.</div>
<div class="line">[Tuesday 03 May 2011] [03:59:56] &lt;kryptom&gt;    hi there, i&#8217;m using zeromq 2.1.6 and trying out the ruby samples (hwclient and hwserver). In the zguide it says you can start the client (REQ), then start the server or restart the server (REP) with a running client. But when I try the samples &#8220;hang&#8221;, is this normal behaviour?</div>
<div class="line">[Tuesday 03 May 2011] [04:06:56] &lt;pieterh&gt;    kryptom: it should work</div>
<div class="line">[Tuesday 03 May 2011] [04:25:44] &lt;kryptom&gt;    sorry, got distracted</div>
<div class="line">[Tuesday 03 May 2011] [04:26:05] &lt;kryptom&gt;    i would agree it should work ...</div>
<div class="line">[Tuesday 03 May 2011] [04:28:15] &lt;kryptom&gt;    so, I start the client, start the server, then quit the server and start the server again - then the client hangs</div>
<div class="line">[Tuesday 03 May 2011] [04:32:58] &lt;sustrik&gt;    the request may be lost</div>
<div class="line">[Tuesday 03 May 2011] [04:33:10] &lt;sustrik&gt;    if it was processed by the server when it was shut down</div>
<div class="line">[Tuesday 03 May 2011] [04:35:05] &lt;kryptom&gt;    checking the examples again ...</div>
<div class="line">[Tuesday 03 May 2011] [05:19:33] &lt;steve_k&gt;    I&#8217;m having a problem.  I&#8217;m trying to test HelloWorld cross/platform cross/language.  I have the HelloWorldServer built in Java on Fedora 14, and two clients on Windows XP - One Java and One Python.</div>
<div class="line">[Tuesday 03 May 2011] [05:20:08] &lt;steve_k&gt;    The Java client talks to the Java server just fine, but if I run the Python Client, the Java Server crashes with: Assertion failed: (<a href="#id26"><span class="problematic" id="id27">msg_</span></a>-&gt;flags | ZMQ_MSG_MASK) == 0xff (zmq.cpp:223)</div>
<div class="line">[Tuesday 03 May 2011] [05:20:57] &lt;Guthur&gt;     steve_k: are you setting idenitities</div>
<div class="line">[Tuesday 03 May 2011] [05:21:12] &lt;Guthur&gt;     identities*</div>
<div class="line">[Tuesday 03 May 2011] [05:32:42] &lt;sustrik&gt;    steve_k: looks like you (or java binding) are using invalid zmq_msg_t</div>
<div class="line">[Tuesday 03 May 2011] [05:33:21] &lt;sustrik&gt;    can you produce a minimal test case and fill a bug for jzmq project</div>
<div class="line">[Tuesday 03 May 2011] [05:33:24] &lt;sustrik&gt;    ?</div>
<div class="line">[Tuesday 03 May 2011] [05:39:16] &lt;steve_k&gt;    sorry - got disconnected.</div>
<div class="line">[Tuesday 03 May 2011] [05:39:54] &lt;steve_k&gt;    where should I submit the bug?</div>
<div class="line">[Tuesday 03 May 2011] [05:40:07] &lt;steve_k&gt;    the jzmq git repository?</div>
<div class="line">[Tuesday 03 May 2011] [05:48:07] &lt;djc&gt;        2.0 and 2.1 should be over-the-network compatible, right?</div>
<div class="line">[Tuesday 03 May 2011] [05:48:51] &lt;guido_g&gt;    yes</div>
<div class="line">[Tuesday 03 May 2011] [05:52:03] &lt;djc&gt;        k, thanks</div>
<div class="line">[Tuesday 03 May 2011] [05:52:24] &lt;djc&gt;        are there any good docs on the compatibility of major, minor and micro releases?</div>
<div class="line">[Tuesday 03 May 2011] [05:52:42] &lt;djc&gt;        in terms of API, ABI and network framing</div>
<div class="line">[Tuesday 03 May 2011] [06:00:47] &lt;pieterh&gt;    djc: <a class="reference external" href="http://www.zeromq.org/docs:policies">http://www.zeromq.org/docs:policies</a></div>
<div class="line">[Tuesday 03 May 2011] [06:01:12] &lt;steve_k2&gt;   hmph... I went about building a test case and I ran the same script from linux instead of windows and it worked fine.</div>
<div class="line">[Tuesday 03 May 2011] [06:01:32] &lt;pieterh&gt;    but it&#8217;s not complete, e.g. I&#8217;d like a policy on backwards compatibility of wire level protocols</div>
<div class="line">[Tuesday 03 May 2011] [06:02:05] &lt;steve_k2&gt;   I&#8217;m going to try it from an external machine to see if that makes a difference. Otherwise, it must be a problem with my windows install of the python module.</div>
<div class="line">[Tuesday 03 May 2011] [06:04:01] &lt;steve_k2&gt;   still - it&#8217;s a bit scary that a client can crash the server so easily.</div>
<div class="line">[Tuesday 03 May 2011] [06:06:01] &lt;guido_g&gt;    trade-off between speed and angst</div>
<div class="line">[Tuesday 03 May 2011] [06:11:14] &lt;Soleo&gt;      Hi, does anyone know about something about Queue Device? Should I add lock for each thread queued ?</div>
<div class="line">[Tuesday 03 May 2011] [06:11:56] &lt;sustrik&gt;    steve_k2: <a class="reference external" href="https://github.com/zeromq/jzmq/issues">https://github.com/zeromq/jzmq/issues</a></div>
<div class="line">[Tuesday 03 May 2011] [06:12:26] &lt;sustrik&gt;    Soleo: no</div>
<div class="line">[Tuesday 03 May 2011] [06:14:29] &lt;Soleo&gt;      what if I am writing the same file in each thread?</div>
<div class="line">[Tuesday 03 May 2011] [06:21:54] &lt;Guthur&gt;     that issue is really orthogonal to the queue device</div>
<div class="line">[Tuesday 03 May 2011] [06:24:04] &lt;Guthur&gt;     possibly you want something like this: &lt;fan out&gt; Process stuff &lt;fan in&gt; write file</div>
<div class="line">[Tuesday 03 May 2011] [06:38:08] &lt;djc&gt;        pieterh: can you add something there about network protocol/framing compat?</div>
<div class="line">[Tuesday 03 May 2011] [06:39:15] &lt;pieterh&gt;    djc: what would you like me to add?</div>
<div class="line">[Tuesday 03 May 2011] [06:39:36] &lt;djc&gt;        ah, nm, read your statement about protocol</div>
<div class="line">[Tuesday 03 May 2011] [06:39:48] &lt;djc&gt;        if there is no policy, would be hard to describe it</div>
<div class="line">[Tuesday 03 May 2011] [06:40:33] &lt;djc&gt;        if the network protocol doesn&#8217;t change that often, perhaps it would suffice to have an exhaustive list of actual versions that changed it</div>
<div class="line">[Tuesday 03 May 2011] [06:40:55] &lt;pieterh&gt;    you mean for the future?</div>
<div class="line">[Tuesday 03 May 2011] [06:41:03] &lt;pieterh&gt;    the protocol will definitely change for 3.x</div>
<div class="line">[Tuesday 03 May 2011] [06:41:07] &lt;djc&gt;        yeah, or even for the current versions</div>
<div class="line">[Tuesday 03 May 2011] [06:41:17] &lt;pieterh&gt;    there&#8217;s only one current stable version, 2.1.x</div>
<div class="line">[Tuesday 03 May 2011] [06:41:21] &lt;djc&gt;        i.e. 2.0 and 2.1, which I bet a lot of people with production stuff will be upgrading soon</div>
<div class="line">[Tuesday 03 May 2011] [06:41:46] &lt;pieterh&gt;    all 2.x versions use the same protocol</div>
<div class="line">[Tuesday 03 May 2011] [06:41:49] &lt;djc&gt;        and I&#8217;ve also noticed a 2.2 repo, not sure what that&#8217;s about? all the talk seems to be about 3.x</div>
<div class="line">[Tuesday 03 May 2011] [06:42:01] &lt;djc&gt;        okay, well, that would be useful info for that wiki page</div>
<div class="line">[Tuesday 03 May 2011] [06:42:16] &lt;pieterh&gt;    well, 2.2 is for ongoing evolution of the 2.1 packaging</div>
<div class="line">[Tuesday 03 May 2011] [06:42:33] &lt;djc&gt;        what do you mean by &#8220;packaging&#8221; exactly?</div>
<div class="line">[Tuesday 03 May 2011] [06:42:47] &lt;pieterh&gt;    well, 2.2 is for two things</div>
<div class="line">[Tuesday 03 May 2011] [06:43:02] &lt;pieterh&gt;    a. new functionality that can&#8217;t go into 2.1 because that&#8217;s for bug fixes only</div>
<div class="line">[Tuesday 03 May 2011] [06:43:14] &lt;pieterh&gt;    b. new functionality packaged with libzmq, e.g. czmq</div>
<div class="line">[Tuesday 03 May 2011] [06:43:35] &lt;djc&gt;        so what&#8217;s the difference between 2.2 and 3.x?</div>
<div class="line">[Tuesday 03 May 2011] [06:43:49] &lt;pieterh&gt;    3.x breaks the API and wire protocol totally...</div>
<div class="line">[Tuesday 03 May 2011] [06:44:06] &lt;pieterh&gt;    whereas 2.2 is ... hey, this is explained by the wiki page :)</div>
<div class="line">[Tuesday 03 May 2011] [06:44:29] &lt;pieterh&gt;    2.2 is meant to be a <em>compatible</em> evolution of 2.1</div>
<div class="line">[Tuesday 03 May 2011] [06:44:38] &lt;pieterh&gt;    whereas 3.0 is incompatible in several major ways</div>
<div class="line">[Tuesday 03 May 2011] [06:45:10] &lt;pieterh&gt;    I&#8217;m not 100% sure we&#8217;ll need the 2.2 branch but it&#8217;s there and I maintain it</div>
<div class="line">[Tuesday 03 May 2011] [06:45:18] &lt;djc&gt;        okay, sounds good</div>
<div class="line">[Tuesday 03 May 2011] [06:45:30] &lt;djc&gt;        yeah, I guess the wiki page is actually quite comprehensive</div>
<div class="line">[Tuesday 03 May 2011] [06:46:02] &lt;pieterh&gt;    there needs to be a page describing present/future versions, maybe I&#8217;ll add that as a section to this page...</div>
<div class="line">[Tuesday 03 May 2011] [06:53:57] &lt;pieterh&gt;    djc: OK, I&#8217;ve summarized the current release situation on that wiki page</div>
<div class="line">[Tuesday 03 May 2011] [06:54:06] &lt;pieterh&gt;    will you review that and let me know if it&#8217;s ok?</div>
<div class="line">[Tuesday 03 May 2011] [06:55:16] &lt;djc&gt;        it seems mostly fine</div>
<div class="line">[Tuesday 03 May 2011] [06:56:04] &lt;djc&gt;        it might be useful to bring up ZMTP sooner</div>
<div class="line">[Tuesday 03 May 2011] [06:56:18] &lt;djc&gt;        since it seems to provide useful vocabulary</div>
<div class="line">[Tuesday 03 May 2011] [06:56:20] &lt;pieterh&gt;    Indeed... hang on...</div>
<div class="line">[Tuesday 03 May 2011] [06:58:02] &lt;pieterh&gt;    done</div>
<div class="line">[Tuesday 03 May 2011] [07:00:02] &lt;djc&gt;        better, thanks</div>
<div class="line">[Tuesday 03 May 2011] [07:04:19] &lt;pieterh&gt;    thanks to you... this is good stuff</div>
<div class="line">[Tuesday 03 May 2011] [07:47:19] &lt;pieterh&gt;    <a class="reference external" href="https://github.com/zeromq/libzmq/issues/209">https://github.com/zeromq/libzmq/issues/209</a></div>
<div class="line">[Tuesday 03 May 2011] [08:32:50] &lt;sustrik&gt;    pieterh: fix to blast:</div>
<div class="line">[Tuesday 03 May 2011] [08:33:01] &lt;pieterh&gt;    ja?</div>
<div class="line">[Tuesday 03 May 2011] [08:33:03] &lt;sustrik&gt;    line 56 should be: int rc = connect (handle, (struct sockaddr*) &amp;sin, sizeof (sin));</div>
<div class="line">[Tuesday 03 May 2011] [08:33:52] &lt;pieterh&gt;    ok, done and pushed</div>
<div class="line">[Tuesday 03 May 2011] [08:47:19] &lt;sustrik&gt;    pieterh: the problem doesn&#8217;t seem to happen with 3.0</div>
<div class="line">[Tuesday 03 May 2011] [08:47:53] &lt;pieterh&gt;    sustrik: interesting, does it run for 1M iterations?</div>
<div class="line">[Tuesday 03 May 2011] [08:48:10] &lt;sustrik&gt;    dunno</div>
<div class="line">[Tuesday 03 May 2011] [08:48:18] &lt;sustrik&gt;    the server just keeps printing</div>
<div class="line">[Tuesday 03 May 2011] [08:48:30] &lt;sustrik&gt;    &#8220;Received Hello&#8221;</div>
<div class="line">[Tuesday 03 May 2011] [08:48:39] &lt;pieterh&gt;    lol</div>
<div class="line">[Tuesday 03 May 2011] [08:48:47] &lt;pieterh&gt;    well, that&#8217;s a good sign</div>
<div class="line">[Tuesday 03 May 2011] [08:48:59] &lt;pieterh&gt;    the blast program sends 1GB of random data</div>
<div class="line">[Tuesday 03 May 2011] [08:49:05] &lt;sustrik&gt;    heh</div>
<div class="line">[Tuesday 03 May 2011] [08:49:12] &lt;sustrik&gt;    the blast seems to fail:</div>
<div class="line">[Tuesday 03 May 2011] [08:49:13] &lt;sustrik&gt;    <a class="reference external" href="mailto:sustrik&#37;&#52;&#48;istvan">sustrik<span>&#64;</span>istvan</a>:~/libzmq/src$ ./blast</div>
<div class="line">[Tuesday 03 May 2011] [08:49:13] &lt;sustrik&gt;    Test failed at count 47</div>
<div class="line">[Tuesday 03 May 2011] [08:54:15] &lt;djc&gt;        I just upgraded a C++ server thingy from 2.0 to 2.1</div>
<div class="line">[Tuesday 03 May 2011] [08:54:18] &lt;djc&gt;        and now it keeps asserting</div>
<div class="line">[Tuesday 03 May 2011] [08:54:42] &lt;sustrik&gt;    pieterh: ok, the blast failure is expected</div>
<div class="line">[Tuesday 03 May 2011] [08:54:42] &lt;djc&gt;        from zmq.cpp:223</div>
<div class="line">[Tuesday 03 May 2011] [08:54:53] &lt;sustrik&gt;    it&#8217;s &#8220;connection refused by peer&#8221;</div>
<div class="line">[Tuesday 03 May 2011] [08:55:11] &lt;sustrik&gt;    djc: yes, that&#8217;s what we are talking about now</div>
<div class="line">[Tuesday 03 May 2011] [08:55:38] &lt;sustrik&gt;    djc: any chance to get a minimal test case?</div>
<div class="line">[Tuesday 03 May 2011] [08:56:16] &lt;djc&gt;        doesn&#8217;t seem to be a whole lot I need to do</div>
<div class="line">[Tuesday 03 May 2011] [08:57:05] &lt;sustrik&gt;    what do you do?</div>
<div class="line">[Tuesday 03 May 2011] [08:57:33] &lt;djc&gt;        hmm, there might be threads involved</div>
<div class="line">[Tuesday 03 May 2011] [08:58:06] &lt;sustrik&gt;    ok, forget about it them</div>
<div class="line">[Tuesday 03 May 2011] [08:58:08] &lt;sustrik&gt;    then</div>
<div class="line">[Tuesday 03 May 2011] [08:58:26] &lt;djc&gt;        well, not sure, this should all happen on the main thread</div>
<div class="line">[Tuesday 03 May 2011] [08:58:29] &lt;djc&gt;        but the output is weird</div>
<div class="line">[Tuesday 03 May 2011] [08:58:30] &lt;sustrik&gt;    the blast client pieter wrote just now is allegedly reporting the same error</div>
<div class="line">[Tuesday 03 May 2011] [08:58:32] &lt;djc&gt;        <a class="reference external" href="http://paste.pocoo.org/show/382144/">http://paste.pocoo.org/show/382144/</a></div>
<div class="line">[Tuesday 03 May 2011] [08:59:50] &lt;sustrik&gt;    djc: does that happen when the peer starts sending messages?</div>
<div class="line">[Tuesday 03 May 2011] [08:59:54] &lt;sustrik&gt;    or even before that?</div>
<div class="line">[Tuesday 03 May 2011] [09:00:14] &lt;djc&gt;        the req/rep doesn&#8217;t have a peer at this point</div>
<div class="line">[Tuesday 03 May 2011] [09:00:21] &lt;djc&gt;        I&#8217;m testing with the PUB now</div>
<div class="line">[Tuesday 03 May 2011] [09:00:42] &lt;sustrik&gt;    so the PUB fails even before there&#8217;s a SUB connected?</div>
<div class="line">[Tuesday 03 May 2011] [09:01:04] &lt;djc&gt;        oh yeah, there&#8217;s no SUB or REQ involved here</div>
<div class="line">[Tuesday 03 May 2011] [09:01:20] &lt;sustrik&gt;    ok</div>
<div class="line">[Tuesday 03 May 2011] [09:03:52] &lt;djc&gt;        sustrik: here&#8217;s something more elaborate:</div>
<div class="line">[Tuesday 03 May 2011] [09:03:53] &lt;djc&gt;        <a class="reference external" href="http://paste.pocoo.org/show/382147/">http://paste.pocoo.org/show/382147/</a></div>
<div class="line">[Tuesday 03 May 2011] [09:04:25] &lt;djc&gt;        where nothing should be coming in on this-&gt;side, and nothing&#8217;s listening on this-&gt;pub</div>
<div class="line">[Tuesday 03 May 2011] [09:04:32] &lt;djc&gt;        (no one is connected to this-&gt;side, even)</div>
<div class="line">[Tuesday 03 May 2011] [09:04:55] &lt;djc&gt;        mmm</div>
<div class="line">[Tuesday 03 May 2011] [09:05:23] &lt;sustrik&gt;    djc: let it be for now</div>
<div class="line">[Tuesday 03 May 2011] [09:05:30] &lt;sustrik&gt;    we have to sort this out with pieterh</div>
<div class="line">[Tuesday 03 May 2011] [09:05:30] &lt;djc&gt;        that&#8217;s wrong, it only fails if something is connected to this-&gt;side, but not sending requests</div>
<div class="line">[Tuesday 03 May 2011] [09:05:43] &lt;sustrik&gt;    probably a problem with backporting</div>
<div class="line">[Tuesday 03 May 2011] [09:06:47] &lt;djc&gt;        it looks like it somehow tries to process a connection event on the REP socket as a message</div>
<div class="line">[Tuesday 03 May 2011] [09:12:42] &lt;djc&gt;        ah, more info: it triggers when I try to connect using 2.0.9, but works correctly when trying to connect using 2.1.6</div>
<div class="line">[Tuesday 03 May 2011] [09:15:27] &lt;sustrik&gt;    yeah, the relevant code was added to 2.0.6</div>
<div class="line">[Tuesday 03 May 2011] [09:15:39] &lt;sustrik&gt;    2.1.6 i mean</div>
<div class="line">[Tuesday 03 May 2011] [09:16:05] &lt;djc&gt;        you mean, the assert?</div>
<div class="line">[Tuesday 03 May 2011] [09:16:39] &lt;sustrik&gt;    yes</div>
<div class="line">[Tuesday 03 May 2011] [09:16:47] &lt;sustrik&gt;    checking for validity of zmq_msg_t objects</div>
<div class="line">[Tuesday 03 May 2011] [09:19:25] &lt;djc&gt;        so is the check too tight or should that function not be getting that message?</div>
<div class="line">[Tuesday 03 May 2011] [09:21:34] &lt;sustrik&gt;    several possibilities</div>
<div class="line">[Tuesday 03 May 2011] [09:21:57]       * sustrik is investigating</div>
<div class="line">[Tuesday 03 May 2011] [09:34:00] &lt;sustrik&gt;    djc: still there?</div>
<div class="line">[Tuesday 03 May 2011] [09:34:07] &lt;djc&gt;        yup</div>
<div class="line">[Tuesday 03 May 2011] [09:34:21] &lt;sustrik&gt;    can you try a patch for me?</div>
<div class="line">[Tuesday 03 May 2011] [09:34:29] &lt;djc&gt;        sure</div>
<div class="line">[Tuesday 03 May 2011] [09:34:38] &lt;sustrik&gt;    open src/decoder.cpp</div>
<div class="line">[Tuesday 03 May 2011] [09:34:47] &lt;sustrik&gt;    line 112</div>
<div class="line">[Tuesday 03 May 2011] [09:34:54] &lt;sustrik&gt;    replace it by this:</div>
<div class="line">[Tuesday 03 May 2011] [09:34:55] &lt;sustrik&gt;    in_progress.flags = tmpbuf [0] | ~ZMQ_MSG_MASK;</div>
<div class="line">[Tuesday 03 May 2011] [09:35:04] &lt;sustrik&gt;    and try whether it helps</div>
<div class="line">[Tuesday 03 May 2011] [09:36:03] &lt;djc&gt;        okay, give me a moment</div>
<div class="line">[Tuesday 03 May 2011] [09:38:03] &lt;pieterh&gt;    sustrik: re, was out</div>
<div class="line">[Tuesday 03 May 2011] [09:38:35] &lt;sustrik&gt;    see the above fix</div>
<div class="line">[Tuesday 03 May 2011] [09:38:38] &lt;sustrik&gt;    it should help</div>
<div class="line">[Tuesday 03 May 2011] [09:38:44] &lt;sustrik&gt;    doesn&#8217;t apply to 3.0 though</div>
<div class="line">[Tuesday 03 May 2011] [09:39:00] &lt;sustrik&gt;    the code there have already changed</div>
<div class="line">[Tuesday 03 May 2011] [09:39:00] &lt;djc&gt;        sustrik: seems to work just fine</div>
<div class="line">[Tuesday 03 May 2011] [09:39:04] &lt;sustrik&gt;    ok</div>
<div class="line">[Tuesday 03 May 2011] [09:39:12] &lt;djc&gt;        at least I can&#8217;t reproduce as before</div>
<div class="line">[Tuesday 03 May 2011] [09:39:20] &lt;sustrik&gt;    pieterh: can you apply the fix?</div>
<div class="line">[Tuesday 03 May 2011] [09:39:21] &lt;pieterh&gt;    sustrik: should I try that patch wrt blast too?</div>
<div class="line">[Tuesday 03 May 2011] [09:39:26] &lt;pieterh&gt;    :) ok</div>
<div class="line">[Tuesday 03 May 2011] [09:39:44] &lt;sustrik&gt;    blast is ok</div>
<div class="line">[Tuesday 03 May 2011] [09:39:54] &lt;sustrik&gt;    ah</div>
<div class="line">[Tuesday 03 May 2011] [09:39:57] &lt;sustrik&gt;    i did</div>
<div class="line">[Tuesday 03 May 2011] [09:40:01] &lt;sustrik&gt;    it fails elsewhere</div>
<div class="line">[Tuesday 03 May 2011] [09:41:35] &lt;pieterh&gt;    sustrik: it&#8217;s going to fail in lots of places before it&#8217;s fully robust :)</div>
<div class="line">[Tuesday 03 May 2011] [09:41:36] &lt;pieterh&gt;    Assertion failed: <a href="#id28"><span class="problematic" id="id29">msg_</span></a>-&gt;flags &amp; ZMQ_MSG_MORE (rep.cpp:81)</div>
<div class="line">[Tuesday 03 May 2011] [09:41:56] &lt;pieterh&gt;    I&#8217;ve created a branch, we can fix these one by one</div>
<div class="line">[Tuesday 03 May 2011] [09:48:28] &lt;sustrik&gt;    yup, same in 3.0</div>
<div class="line">[Tuesday 03 May 2011] [09:48:37] &lt;sustrik&gt;    not that easy to fix though</div>
<div class="line">[Tuesday 03 May 2011] [09:53:42] &lt;pieterh&gt;    do you think we can fix these in 2.1?</div>
<div class="line">[Tuesday 03 May 2011] [09:54:06] &lt;pieterh&gt;    it&#8217;s mostly to be on malformed messages, of course</div>
<div class="line">[Tuesday 03 May 2011] [09:54:55] &lt;pieterh&gt;    actually I need to make a test case with all socket types</div>
<div class="line">[Tuesday 03 May 2011] [10:00:14] &lt;sustrik&gt;    malformed frames can be solved easily</div>
<div class="line">[Tuesday 03 May 2011] [10:00:39] &lt;sustrik&gt;    malformed messages as such is a problem</div>
<div class="line">[Tuesday 03 May 2011] [10:01:06] &lt;sustrik&gt;    as the I/O thread currently has no idea of what socket type it is handling</div>
<div class="line">[Tuesday 03 May 2011] [10:01:22] &lt;sustrik&gt;    and thus can&#8217;t check the validity of socket-type-specific protocol</div>
<div class="line">[Tuesday 03 May 2011] [10:03:08] &lt;pieterh&gt;    indeed</div>
<div class="line">[Tuesday 03 May 2011] [10:03:18] &lt;pieterh&gt;    however it shouldn&#8217;t assert when it gets confused...</div>
<div class="line">[Tuesday 03 May 2011] [10:04:24] &lt;pieterh&gt;    So I&#8217;ve replaced line 81 in rep.cpp:             zmq_assert (<a href="#id30"><span class="problematic" id="id31">msg_</span></a>-&gt;flags &amp; ZMQ_MSG_MORE);</div>
<div class="line">[Tuesday 03 May 2011] [10:04:30] &lt;pieterh&gt;    with</div>
<div class="line">[Tuesday 03 May 2011] [10:04:30] &lt;pieterh&gt;                if (!msg_-&gt;flags &amp; ZMQ_MSG_MORE) {</div>
<div class="line">[Tuesday 03 May 2011] [10:04:30] &lt;pieterh&gt;                    errno = EFAULT;</div>
<div class="line">[Tuesday 03 May 2011] [10:04:31] &lt;pieterh&gt;                    return -1;</div>
<div class="line">[Tuesday 03 May 2011] [10:04:31] &lt;pieterh&gt;                }</div>
<div class="line">[Tuesday 03 May 2011] [10:04:35] &lt;pieterh&gt;    and it no longer asserts</div>
<div class="line">[Tuesday 03 May 2011] [10:04:44] &lt;pieterh&gt;    at least on a rep socket test</div>
<div class="line">[Tuesday 03 May 2011] [10:05:20] &lt;pieterh&gt;    eventually runs out of resources: Assertion failed: new_sndbuf &gt; old_sndbuf (mailbox.cpp:183)</div>
<div class="line">[Tuesday 03 May 2011] [10:21:00] &lt;sustrik&gt;    hm, that&#8217;s hiding on a problem</div>
<div class="line">[Tuesday 03 May 2011] [10:21:03] &lt;sustrik&gt;    of*</div>
<div class="line">[Tuesday 03 May 2011] [10:21:17] &lt;pieterh&gt;    you mean returning -1?</div>
<div class="line">[Tuesday 03 May 2011] [10:21:21] &lt;sustrik&gt;    yes</div>
<div class="line">[Tuesday 03 May 2011] [10:21:34] &lt;sustrik&gt;    it won&#8217;t assert but it&#8217;ll leave state machine in an inconsistent state</div>
<div class="line">[Tuesday 03 May 2011] [10:22:35] &lt;pieterh&gt;    hmm, let me check if that&#8217;s the case...</div>
<div class="line">[Tuesday 03 May 2011] [10:24:13] &lt;pieterh&gt;    it appears the FSM remains in a consistent state</div>
<div class="line">[Tuesday 03 May 2011] [10:25:39] &lt;sustrik&gt;    there&#8217;s a lot of state there</div>
<div class="line">[Tuesday 03 May 2011] [10:25:52] &lt;sustrik&gt;    the current pipe</div>
<div class="line">[Tuesday 03 May 2011] [10:26:05] &lt;sustrik&gt;    the &#8220;more&#8221; flag</div>
<div class="line">[Tuesday 03 May 2011] [10:26:08] &lt;pieterh&gt;    what is weird is that it no longer asserts but I don&#8217;t get an error rc either</div>
<div class="line">[Tuesday 03 May 2011] [10:26:09] &lt;sustrik&gt;    and so on</div>
<div class="line">[Tuesday 03 May 2011] [10:26:21] &lt;sustrik&gt;    strange</div>
<div class="line">[Tuesday 03 May 2011] [10:26:59] &lt;pieterh&gt;    could be my test is wrong, let me add some brackets</div>
<div class="line">[Tuesday 03 May 2011] [10:27:15] &lt;pieterh&gt;    ah, better</div>
<div class="line">[Tuesday 03 May 2011] [10:29:10] &lt;pieterh&gt;    Ok, so I&#8217;m getting the error return properly</div>
<div class="line">[Tuesday 03 May 2011] [10:29:18] &lt;pieterh&gt;    it does not get into FSM confusion</div>
<div class="line">[Tuesday 03 May 2011] [10:29:47] &lt;pieterh&gt;    but I&#8217;d need a more sophisticated test case to know if it recovers properly</div>
<div class="line">[Tuesday 03 May 2011] [10:30:05] &lt;pieterh&gt;    also what it should do is close the socket when it gets garbage, not continue reading off it</div>
<div class="line">[Tuesday 03 May 2011] [10:30:17] &lt;sustrik&gt;    that&#8217;s the point</div>
<div class="line">[Tuesday 03 May 2011] [10:35:58] &lt;Guthur&gt;     &lt;pieterh&gt; could be my test is wrong, let me add some brackets ... Does this work for all testing</div>
<div class="line">[Tuesday 03 May 2011] [10:36:38] &lt;pieterh&gt;    Guthur: the code had to be &#8220;if (!(<a href="#id32"><span class="problematic" id="id33">msg_</span></a>-&gt;flags &amp; ZMQ_MSG_MORE)) {&#8220;</div>
<div class="line">[Tuesday 03 May 2011] [10:36:40] &lt;Guthur&gt;     though as a lisper I would always say there is never enough parenthesis</div>
<div class="line">[Tuesday 03 May 2011] [10:37:21] &lt;Guthur&gt;     ...and that&#8217;s not even Lisp, hehe</div>
<div class="line">[Tuesday 03 May 2011] [10:44:38] &lt;djc&gt;        so, if I have a connected REQ socket, and the REP server restarts</div>
<div class="line">[Tuesday 03 May 2011] [10:44:51] &lt;djc&gt;        it looks like the REQ will reconnect and send new messages fine</div>
<div class="line">[Tuesday 03 May 2011] [10:45:04] &lt;djc&gt;        but the response from the REP doesn&#8217;t make it to the client</div>
<div class="line">[Tuesday 03 May 2011] [10:45:09] &lt;djc&gt;        does that make sense?</div>
<div class="line">[Tuesday 03 May 2011] [10:50:49] &lt;sustrik&gt;    not really</div>
<div class="line">[Tuesday 03 May 2011] [10:50:59] &lt;sustrik&gt;    do you have a test case?</div>
<div class="line">[Tuesday 03 May 2011] [10:51:24] &lt;djc&gt;        I saw it a few times, doesn&#8217;t seem to be very reproducible</div>
<div class="line">[Tuesday 03 May 2011] [10:51:57] &lt;sustrik&gt;    what can happen is that the server is killed while it processes the request</div>
<div class="line">[Tuesday 03 May 2011] [10:52:02] &lt;sustrik&gt;    in such case the request is lost</div>
<div class="line">[Tuesday 03 May 2011] [10:52:38] &lt;djc&gt;        no, that&#8217;s not the case here</div>
<div class="line">[Tuesday 03 May 2011] [10:54:14] &lt;sustrik&gt;    the strange thing about it is that from server&#8217;s PoV, the reconnect is simply a new client</div>
<div class="line">[Tuesday 03 May 2011] [10:54:21] &lt;sustrik&gt;    so it should behave in standard way</div>
<div class="line">[Tuesday 03 May 2011] [10:54:34] &lt;djc&gt;        yeah</div>
<div class="line">[Tuesday 03 May 2011] [10:58:15] &lt;pieterh&gt;    djc: are you using explicit identities?</div>
<div class="line">[Tuesday 03 May 2011] [10:58:28] &lt;djc&gt;        pieterh: nope</div>
<div class="line">[Tuesday 03 May 2011] [10:58:35] &lt;pieterh&gt;    ok</div>
<div class="line">[Tuesday 03 May 2011] [10:59:23] &lt;pieterh&gt;    djc: is it possible you&#8217;re not checking the return code from zmq_recv or zmq_send?</div>
<div class="line">[Tuesday 03 May 2011] [10:59:52] &lt;djc&gt;        I was checking it</div>
<div class="line">[Tuesday 03 May 2011] [11:00:05] &lt;djc&gt;        but actually it seemed like the zmq_send() on the server was blocking</div>
<div class="line">[Tuesday 03 May 2011] [11:01:56] &lt;pieterh&gt;    djc: I guess the point is without a concrete test case it&#8217;s practically impossible to investigate</div>
<div class="line">[Tuesday 03 May 2011] [11:02:03] &lt;djc&gt;        yeah</div>
<div class="line">[Tuesday 03 May 2011] [11:22:43] &lt;djc&gt;        will that assert fix (with the msg decoder) appear in a release soon?</div>
<div class="line">[Tuesday 03 May 2011] [11:22:54] &lt;djc&gt;        or would it be valuable to put the patch in our distribution</div>
<div class="line">[Tuesday 03 May 2011] [11:23:43] &lt;sustrik&gt;    that&#8217;s up to pieterh</div>
<div class="line">[Tuesday 03 May 2011] [11:24:02] &lt;pieterh&gt;    djc: that fix will go into 2.1.7, yes</div>
<div class="line">[Tuesday 03 May 2011] [11:24:43] &lt;pieterh&gt;    sustrik: do we have an issue number for that decoder fix?</div>
<div class="line">[Tuesday 03 May 2011] [11:24:55] &lt;djc&gt;        pieterh: do you have an intended ETA for that? sorry to be nagging all the time, I&#8217;m trying to use zmq-2.1 in our production setup but if there&#8217;s issues it&#8217;s kind of scary</div>
<div class="line">[Tuesday 03 May 2011] [11:25:04] &lt;sustrik&gt;    nope</div>
<div class="line">[Tuesday 03 May 2011] [11:25:14] &lt;sustrik&gt;    it&#8217;s bug on 2-1</div>
<div class="line">[Tuesday 03 May 2011] [11:25:23] &lt;pieterh&gt;    sustrik:  no open issues for it?</div>
<div class="line">[Tuesday 03 May 2011] [11:25:28] &lt;djc&gt;        btw, I just tried to start working with ZMQ_FD, which is what I was actually upgrading for, but so far I haven&#8217;t gotten it to work</div>
<div class="line">[Tuesday 03 May 2011] [11:25:38] &lt;sustrik&gt;    it doesn&#8217;t exist in libzmq</div>
<div class="line">[Tuesday 03 May 2011] [11:25:56] &lt;sustrik&gt;    so, i guess, the issue should be in zeromq2-1 repo</div>
<div class="line">[Tuesday 03 May 2011] [11:26:16] &lt;sustrik&gt;    djc: what&#8217;s the problem?</div>
<div class="line">[Tuesday 03 May 2011] [11:26:31] &lt;djc&gt;        poll doesn&#8217;t seem to fire</div>
<div class="line">[Tuesday 03 May 2011] [11:26:31] &lt;pieterh&gt;    sustrik: well, the libzmq repo has all the issues ever reported...</div>
<div class="line">[Tuesday 03 May 2011] [11:27:09] &lt;sustrik&gt;    djc: ibeware! it&#8217;s edge-triggered</div>
<div class="line">[Tuesday 03 May 2011] [11:27:22] &lt;sustrik&gt;    pieterh: well, why not use issue 209 then?</div>
<div class="line">[Tuesday 03 May 2011] [11:27:23] &lt;pieterh&gt;    I see issue 206</div>
<div class="line">[Tuesday 03 May 2011] [11:28:07] &lt;djc&gt;        sustrik: right, I read that in the docs</div>
<div class="line">[Tuesday 03 May 2011] [11:28:14] &lt;djc&gt;        does that mean it will only work with epoll, or something?</div>
<div class="line">[Tuesday 03 May 2011] [11:28:20] &lt;sustrik&gt;    yes, 206 seems to be the same thing</div>
<div class="line">[Tuesday 03 May 2011] [11:28:25] &lt;pieterh&gt;    sustrik: can you verify whether that 1-line fix actually solves 206?</div>
<div class="line">[Tuesday 03 May 2011] [11:28:37] &lt;pieterh&gt;    that does not look like futzing, but a real bug in zmq</div>
<div class="line">[Tuesday 03 May 2011] [11:28:54] &lt;pieterh&gt;    no test case, so I mean &#8220;verify&#8221; as in &#8220;give an opinion&#8221;</div>
<div class="line">[Tuesday 03 May 2011] [11:29:03] &lt;sustrik&gt;    nope, there&#8217;s no test case in 206</div>
<div class="line">[Tuesday 03 May 2011] [11:29:10] &lt;sustrik&gt;    ah</div>
<div class="line">[Tuesday 03 May 2011] [11:29:18] &lt;sustrik&gt;    i gues it&#8217;s related</div>
<div class="line">[Tuesday 03 May 2011] [11:29:22] &lt;pieterh&gt;    OK, I&#8217;ll push the fix to 2.1 master and people can test it from github</div>
<div class="line">[Tuesday 03 May 2011] [11:29:39] &lt;sustrik&gt;    djc: it means it fires only on state change</div>
<div class="line">[Tuesday 03 May 2011] [11:30:08] &lt;sustrik&gt;    have a look at epoll docs for explanation of edge-triggering</div>
<div class="line">[Tuesday 03 May 2011] [11:31:41] &lt;djc&gt;        sustrik: well, for me it doesn&#8217;t even trigger the first time I send something to it</div>
<div class="line">[Tuesday 03 May 2011] [11:32:16] &lt;sustrik&gt;    presumably there was no state change</div>
<div class="line">[Tuesday 03 May 2011] [11:32:33] &lt;joelr&gt;      folks, what os specifies pathnames like this?</div>
<div class="line">[Tuesday 03 May 2011] [11:32:34] &lt;sustrik&gt;    what you should do is:</div>
<div class="line">[Tuesday 03 May 2011] [11:32:34] &lt;joelr&gt;      rc = zmq_bind(socket, &#8220;ipc:/&#64;&#64;//&#64;&#64;tmp/feeds/0&#8221;); assert (rc == 0);</div>
<div class="line">[Tuesday 03 May 2011] [11:32:40] &lt;djc&gt;        pieterh: I had a real issue with 2.0.9 client (REQ) connecting to 2.1.6 server (REP), which was fixed by sustrik&#8217;s patch</div>
<div class="line">[Tuesday 03 May 2011] [11:32:49] &lt;pieterh&gt;    djc: you can help push the 2.1.7 release by testing the fix for 206, see my last comment on <a class="reference external" href="https://github.com/zeromq/libzmq/issues/206">https://github.com/zeromq/libzmq/issues/206</a></div>
<div class="line">[Tuesday 03 May 2011] [11:33:01] &lt;joelr&gt;      this is for /* Assign the pathname &#8220;/tmp/feeds/0&#8221; <a href="#id13"><span class="problematic" id="id14">*</span></a>/</div>
<div class="line">[Tuesday 03 May 2011] [11:33:08] &lt;sustrik&gt;    1. check ZMQ_EVENTS</div>
<div class="line">[Tuesday 03 May 2011] [11:33:10] &lt;pieterh&gt;    djc: ... hmm, can you confirm that&#8217;s the same as 206 (we assume it is)</div>
<div class="line">[Tuesday 03 May 2011] [11:33:20] &lt;sustrik&gt;    2. if POLLIN is set read the message</div>
<div class="line">[Tuesday 03 May 2011] [11:33:35] &lt;sustrik&gt;    3. if it&#8217;s not, poll on ZMQ_FD</div>
<div class="line">[Tuesday 03 May 2011] [11:33:44] &lt;pieterh&gt;    joelr: don&#8217;t copy/paste code from the Guide</div>
<div class="line">[Tuesday 03 May 2011] [11:33:47] &lt;pieterh&gt;    it&#8217;ll come out weird</div>
<div class="line">[Tuesday 03 May 2011] [11:33:48] &lt;sustrik&gt;    4. when ZMQ_FD triggers goto 1</div>
<div class="line">[Tuesday 03 May 2011] [11:33:55] &lt;pieterh&gt;    please grab the github sources and use that</div>
<div class="line">[Tuesday 03 May 2011] [11:34:11] &lt;joelr&gt;      pieterh: that&#8217;s what&#8217;s in the guide, take a look <a class="reference external" href="http://api.zeromq.org/2-1:zmq-ipc">http://api.zeromq.org/2-1:zmq-ipc</a></div>
<div class="line">[Tuesday 03 May 2011] [11:34:31] &lt;djc&gt;        sustrik: can I start at 3 if I assure no one is connected to it at start time?</div>
<div class="line">[Tuesday 03 May 2011] [11:34:32] &lt;pieterh&gt;    joelr: this is a bug in the formatting</div>
<div class="line">[Tuesday 03 May 2011] [11:34:56] &lt;joelr&gt;      pieterh: what&#8217;s the correct format then?</div>
<div class="line">[Tuesday 03 May 2011] [11:35:15] &lt;sustrik&gt;    joelr: a valid path + filename</div>
<div class="line">[Tuesday 03 May 2011] [11:35:30] &lt;sustrik&gt;    djc: no</div>
<div class="line">[Tuesday 03 May 2011] [11:35:36] &lt;pieterh&gt;    I&#8217;ve patched it manually now</div>
<div class="line">[Tuesday 03 May 2011] [11:35:45] &lt;pieterh&gt;    ipc:// followed by path name, so ipc:///tmp/etc</div>
<div class="line">[Tuesday 03 May 2011] [11:35:58] &lt;joelr&gt;      pieterh: thanks</div>
<div class="line">[Tuesday 03 May 2011] [11:36:21] &lt;pieterh&gt;    joelr: I&#8217;ll fix the API doc generation tool, this is a bug... sorry about that</div>
<div class="line">[Tuesday 03 May 2011] [11:36:31] &lt;joelr&gt;      np</div>
<div class="line">[Tuesday 03 May 2011] [11:41:03] &lt;djc&gt;        sustrik: still doesn&#8217;t work</div>
<div class="line">[Tuesday 03 May 2011] [11:41:29] &lt;sustrik&gt;    what happens?</div>
<div class="line">[Tuesday 03 May 2011] [11:41:52] &lt;djc&gt;        there&#8217;s no POLLIN on the ZMQ_EVENTS before the poll()</div>
<div class="line">[Tuesday 03 May 2011] [11:42:03] &lt;djc&gt;        and poll() doesn&#8217;t fire on the ZMQ_FD after</div>
<div class="line">[Tuesday 03 May 2011] [11:42:22] &lt;sustrik&gt;    even though there&#8217;s a message, right?</div>
<div class="line">[Tuesday 03 May 2011] [11:42:28] &lt;djc&gt;        yeah</div>
<div class="line">[Tuesday 03 May 2011] [11:42:33] &lt;sustrik&gt;    then it&#8217;s a bug</div>
<div class="line">[Tuesday 03 May 2011] [11:42:46] &lt;sustrik&gt;    do you have a test case?</div>
<div class="line">[Tuesday 03 May 2011] [11:43:07] &lt;djc&gt;        I can reproduce this, it&#8217;s not exactly minimal</div>
<div class="line">[Tuesday 03 May 2011] [11:43:15] &lt;sustrik&gt;    goodo</div>
<div class="line">[Tuesday 03 May 2011] [11:43:21] &lt;sustrik&gt;    open an issue for it then</div>
<div class="line">[Tuesday 03 May 2011] [11:43:29] &lt;djc&gt;        let me try something first</div>
<div class="line">[Tuesday 03 May 2011] [11:44:34] &lt;djc&gt;        nope, doesn&#8217;t work, I&#8217;ll file an issue</div>
<div class="line">[Tuesday 03 May 2011] [11:57:56] &lt;djc&gt;        sustrik: okay, I was being stupid, sorry about that</div>
<div class="line">[Tuesday 03 May 2011] [11:58:03] &lt;djc&gt;        ZMQ_FD works just fine</div>
<div class="line">[Tuesday 03 May 2011] [11:58:50] &lt;sustrik&gt;    great :)</div>
<div class="line">[Tuesday 03 May 2011] [12:25:26] &lt;djc&gt;        if you want to reuse a zmq_msg_t, do you have to init AND close every time?</div>
<div class="line">[Tuesday 03 May 2011] [12:41:31] &lt;pieterh&gt;    djc: yes</div>
<div class="line">[Tuesday 03 May 2011] [13:58:29] &lt;CindyLinz&gt;  hi ^^</div>
<div class="line">[Tuesday 03 May 2011] [13:59:15] &lt;CindyLinz&gt;  I can use libev with ZMQ_FD for PULL / SUB / DEALER / ROUTER correctly</div>
<div class="line">[Tuesday 03 May 2011] [13:59:29] &lt;CindyLinz&gt;  But it seems not work with REQ?</div>
<div class="line">[Tuesday 03 May 2011] [13:59:49] &lt;CindyLinz&gt;  the ZMQ version is 2.1.6</div>
<div class="line">[Tuesday 03 May 2011] [14:14:12] &lt;sustrik&gt;    are you using some kind of 0mq-libev glue project or are you doing it by hand?</div>
<div class="line">[Tuesday 03 May 2011] [14:17:12] &lt;CindyLinz&gt;  sustrik: I think.. it&#8217;s by hand... Here is my code <a class="reference external" href="http://paste.ideaslabs.com/show/Qz59tAylKZ">http://paste.ideaslabs.com/show/Qz59tAylKZ</a></div>
<div class="line">[Tuesday 03 May 2011] [14:18:02] &lt;sustrik&gt;    ok</div>
<div class="line">[Tuesday 03 May 2011] [14:18:11] &lt;sustrik&gt;    what&#8217;s the problem you are seeing?</div>
<div class="line">[Tuesday 03 May 2011] [14:18:49] &lt;CindyLinz&gt;  the &#8221;!!&#8221; has never showed up</div>
<div class="line">[Tuesday 03 May 2011] [14:20:24] &lt;sustrik&gt;    what happened instead?</div>
<div class="line">[Tuesday 03 May 2011] [14:20:33] &lt;CindyLinz&gt;  the code of the other side: <a class="reference external" href="http://paste.ideaslabs.com/show/04PNUPdV">http://paste.ideaslabs.com/show/04PNUPdV</a></div>
<div class="line">[Tuesday 03 May 2011] [14:21:12] &lt;CindyLinz&gt;  The other side will printed the request message from the REP</div>
<div class="line">[Tuesday 03 May 2011] [14:21:20] &lt;CindyLinz&gt;  and response some messages</div>
<div class="line">[Tuesday 03 May 2011] [14:21:34] &lt;CindyLinz&gt;  but the REP seems not notified</div>
<div class="line">[Tuesday 03 May 2011] [14:21:44] &lt;pblasucci&gt;  Hello</div>
<div class="line">[Tuesday 03 May 2011] [14:21:51] &lt;sustrik&gt;    sleeping in poll?</div>
<div class="line">[Tuesday 03 May 2011] [14:22:01] &lt;sustrik&gt;    hi</div>
<div class="line">[Tuesday 03 May 2011] [14:22:17] &lt;CindyLinz&gt;  But if i uncomment the code from 112 to 121, it will get the response</div>
<div class="line">[Tuesday 03 May 2011] [14:22:35] &lt;pblasucci&gt;  I&#8217;m not sure if this is the right place to mention this, but I&#8217;ve just put an F# binding to 0MQ up on GitHub</div>
<div class="line">[Tuesday 03 May 2011] [14:22:39] &lt;CindyLinz&gt;  no~ I can continue to send other requests.</div>
<div class="line">[Tuesday 03 May 2011] [14:22:44] &lt;CindyLinz&gt;  But nothing back</div>
<div class="line">[Tuesday 03 May 2011] [14:23:17] &lt;sustrik&gt;    pblasucci: great</div>
<div class="line">[Tuesday 03 May 2011] [14:23:29] &lt;sustrik&gt;    have you linked it from zeromq.org?</div>
<div class="line">[Tuesday 03 May 2011] [14:23:36] &lt;pblasucci&gt;  I tried</div>
<div class="line">[Tuesday 03 May 2011] [14:23:54] &lt;pblasucci&gt;  but after logging in, it says I don&#8217;t have permission</div>
<div class="line">[Tuesday 03 May 2011] [14:24:02] &lt;sustrik&gt;    CindyLinz: hard to say, try to create a minimal test case</div>
<div class="line">[Tuesday 03 May 2011] [14:24:05] &lt;pblasucci&gt;  perhaps I was on the wrong page</div>
<div class="line">[Tuesday 03 May 2011] [14:24:26] &lt;sustrik&gt;    have you joined the wiki?</div>
<div class="line">[Tuesday 03 May 2011] [14:24:30] &lt;CindyLinz&gt;  sustrik: wait~~</div>
<div class="line">[Tuesday 03 May 2011] [14:24:58] &lt;sustrik&gt;    you have to be a member to have edit rights</div>
<div class="line">[Tuesday 03 May 2011] [14:25:13] &lt;pblasucci&gt;  Ah, I think I must not be a member</div>
<div class="line">[Tuesday 03 May 2011] [14:25:28] &lt;pblasucci&gt;  I thought having a Wiki account was enough</div>
<div class="line">[Tuesday 03 May 2011] [14:25:35] &lt;pblasucci&gt;  I&#8217;ll go join now</div>
<div class="line">[Tuesday 03 May 2011] [14:31:32] &lt;pblasucci&gt;  Apologies but I can&#8217;t figure out how to become a member</div>
<div class="line">[Tuesday 03 May 2011] [14:31:39] &lt;CindyLinz&gt;  sustrik: This is the test case, thank you ^^ <a class="reference external" href="http://paste.ideaslabs.com/show/hf0HoBspWR">http://paste.ideaslabs.com/show/hf0HoBspWR</a></div>
<div class="line">[Tuesday 03 May 2011] [14:36:59] &lt;sustrik&gt;    pblasucci: there used to be a &#8220;join wiki&#8221; button at zero.mq</div>
<div class="line">[Tuesday 03 May 2011] [14:37:46] &lt;sustrik&gt;    CindyLinz: i meant a minimal C program I can check</div>
<div class="line">[Tuesday 03 May 2011] [14:38:01] &lt;sustrik&gt;    presumably without libev as i have no idea of how that works</div>
<div class="line">[Tuesday 03 May 2011] [14:40:04] &lt;pblasucci&gt;  sustrik: hmmm... I don&#8217;t see anything like that</div>
<div class="line">[Tuesday 03 May 2011] [14:40:32] &lt;sustrik&gt;    it must have changed</div>
<div class="line">[Tuesday 03 May 2011] [14:40:35] &lt;sustrik&gt;    let me invite you</div>
<div class="line">[Tuesday 03 May 2011] [14:40:46] &lt;sustrik&gt;    what&#8217;s your name at wikidot?</div>
<div class="line">[Tuesday 03 May 2011] [14:40:47] &lt;pblasucci&gt;  Great! Thanks.</div>
<div class="line">[Tuesday 03 May 2011] [14:40:53] &lt;pblasucci&gt;  pblasucci</div>
<div class="line">[Tuesday 03 May 2011] [14:41:03] &lt;sustrik&gt;    ok, wait a sec</div>
<div class="line">[Tuesday 03 May 2011] [14:41:12] &lt;CindyLinz&gt;  sustrik: hmm.. how can i just remove the libev part, while the problem is not-notified libev?</div>
<div class="line">[Tuesday 03 May 2011] [14:41:49] &lt;sustrik&gt;    dunno, the problem is either in 0mq or in libev</div>
<div class="line">[Tuesday 03 May 2011] [14:41:59] &lt;sustrik&gt;    you should find out which one is it</div>
<div class="line">[Tuesday 03 May 2011] [14:42:09] &lt;sustrik&gt;    if it&#8217;s 0mq we&#8217;ll fix it</div>
<div class="line">[Tuesday 03 May 2011] [14:42:22] &lt;sustrik&gt;    if it&#8217;s libev you should speak to libev devs</div>
<div class="line">[Tuesday 03 May 2011] [14:42:54] &lt;CindyLinz&gt;  Is it help, if I also give a working dealer version?</div>
<div class="line">[Tuesday 03 May 2011] [14:43:35] &lt;CindyLinz&gt;  (help or helpful.. my English is bad :( )</div>
<div class="line">[Tuesday 03 May 2011] [14:43:39] &lt;sustrik&gt;    np</div>
<div class="line">[Tuesday 03 May 2011] [14:43:45] &lt;CindyLinz&gt;  hmm..</div>
<div class="line">[Tuesday 03 May 2011] [14:45:17] &lt;sustrik&gt;    pblasucci: you are invited</div>
<div class="line">[Tuesday 03 May 2011] [14:45:46] &lt;pblasucci&gt;  Thanks!</div>
<div class="line">[Tuesday 03 May 2011] [14:46:13] &lt;pblasucci&gt;  Yup... looks like I&#8217;m all set.</div>
<div class="line">[Tuesday 03 May 2011] [14:46:24] &lt;sustrik&gt;    goodo</div>
<div class="line">[Tuesday 03 May 2011] [14:46:47] &lt;sustrik&gt;    CindyLinz: you can remove libev from the test case by doing what libev does by hand</div>
<div class="line">[Tuesday 03 May 2011] [14:46:55] &lt;sustrik&gt;    i assume its polling on the fd</div>
<div class="line">[Tuesday 03 May 2011] [14:47:58] &lt;CindyLinz&gt;  sustrik: i&#8217;ll try.. can i use select(2) ?</div>
<div class="line">[Tuesday 03 May 2011] [14:48:35] &lt;sustrik&gt;    well, you should have a look what libev does</div>
<div class="line">[Tuesday 03 May 2011] [14:49:11] &lt;sustrik&gt;    if you do something else the problem may not show up</div>
<div class="line">[Tuesday 03 May 2011] [14:50:12] &lt;CindyLinz&gt;  Then i try first if the select(2) version work?</div>
<div class="line">[Tuesday 03 May 2011] [14:50:57] &lt;sustrik&gt;    it&#8217;s up to you</div>
<div class="line">[Tuesday 03 May 2011] [14:51:24] &lt;sustrik&gt;    what i need is simplest possible program that shows the problem</div>
<div class="line">[Tuesday 03 May 2011] [15:24:35] &lt;jond&gt;       sustrik: the subports idea as originally suggested can still work over multicast....</div>
<div class="line">[Tuesday 03 May 2011] [15:31:15] &lt;sustrik&gt;    jond: how so</div>
<div class="line">[Tuesday 03 May 2011] [15:31:38] &lt;sustrik&gt;    ?</div>
<div class="line">[Tuesday 03 May 2011] [15:32:32] &lt;sustrik&gt;    jond: btw, have you done any perf tests with the alignment patch?</div>
<div class="line">[Tuesday 03 May 2011] [15:33:38] &lt;jond&gt;       well in some other software I&#8217;m aware of we express multicast addresses like x.x.x.x:5555&#64;1,2,3</div>
<div class="line">[Tuesday 03 May 2011] [15:34:25] &lt;jond&gt;       and 1,2,3 are the subports.</div>
<div class="line">[Tuesday 03 May 2011] [15:35:12] &lt;jond&gt;       re: alignment, been busy</div>
<div class="line">[Tuesday 03 May 2011] [15:36:08] &lt;jond&gt;       what did you suggest as the test case throughput/latency?</div>
<div class="line">[Tuesday 03 May 2011] [15:36:08] &lt;sustrik&gt;    ah, i see, presumably filtering on the receiver</div>
<div class="line">[Tuesday 03 May 2011] [15:36:22] &lt;sustrik&gt;    latency is more relevant</div>
<div class="line">[Tuesday 03 May 2011] [15:36:29] &lt;sustrik&gt;    the point is that i&#8217;ve tried it at home</div>
<div class="line">[Tuesday 03 May 2011] [15:36:45] &lt;sustrik&gt;    and got no different between patched/unpatched versions</div>
<div class="line">[Tuesday 03 May 2011] [15:36:57] &lt;jond&gt;       re: multicast, yes the subport goes in a header, and 0 is reserved for control</div>
<div class="line">[Tuesday 03 May 2011] [15:37:02] &lt;sustrik&gt;    ack</div>
<div class="line">[Tuesday 03 May 2011] [15:38:31] &lt;jond&gt;       did you try both mpales and my patches?? I have vtune &#64; work which might shed some light, if I knew exactly how to interpret the results</div>
<div class="line">[Tuesday 03 May 2011] [15:39:51] &lt;jond&gt;       are you surprised or can explain why it makes no difference; it looks like it should?</div>
<div class="line">[Tuesday 03 May 2011] [15:40:26] &lt;sustrik&gt;    i&#8217;ve tried just your patch</div>
<div class="line">[Tuesday 03 May 2011] [15:40:37] &lt;sustrik&gt;    it&#8217;s better, so i&#8217;ve tested just that one</div>
<div class="line">[Tuesday 03 May 2011] [15:40:48] &lt;sustrik&gt;    and yes, i am surprised</div>
<div class="line">[Tuesday 03 May 2011] [15:41:11] &lt;sustrik&gt;    but maybe the problem is that both threads were scheduled on the same CPU core</div>
<div class="line">[Tuesday 03 May 2011] [15:41:25] &lt;sustrik&gt;    so that cacheline polution became irrelevant</div>
<div class="line">[Tuesday 03 May 2011] [15:44:00] &lt;jond&gt;       well I did notice that the mpales patch didnt put an alignment on the struct because it used padding rather than gcc attributes. The sutter article on false sharing suggests we should be able to see something but I do not know what tools he was using</div>
<div class="line">[Tuesday 03 May 2011] [15:44:54] &lt;jond&gt;       I didnt alter the yqueue so maybe that needs doing as well</div>
<div class="line">[Tuesday 03 May 2011] [15:52:07] &lt;sustrik&gt;    yeah, yqueue may benefit from that kind of thing as well</div>
<div class="line">[Tuesday 03 May 2011] [15:52:23] &lt;sustrik&gt;    we probably need a more controled test</div>
<div class="line">[Tuesday 03 May 2011] [15:52:53] &lt;sustrik&gt;    using ypipe to pass data between two threads bound to different CPU cores (or even CPUs)</div>
<div class="line">[Tuesday 03 May 2011] [15:56:27] &lt;jond&gt;       yes. I also noticed someone suggessting replacing socketpair with ypipe+pipe.</div>
<div class="line">[Tuesday 03 May 2011] [17:22:47] &lt;CIA-75&gt;     libzmq: 03Martin Sustrik 07master * r5e329ba 10/ src/msg.cpp : Minor patch to keep ICC compiler happy ...</div>
<div class="line">[Tuesday 03 May 2011] [17:22:49] &lt;CIA-75&gt;     libzmq: 03Martin Sustrik 07master * rceb5e1a 10/ (src/msg.cpp src/msg.hpp): Deallocation functions in zmq.h and msg_t class are consistent. ...</div>
<div class="line">[Wednesday 04 May 2011] [06:38:13] &lt;Bartzy|work&gt;      Hi, anyone here ?</div>
<div class="line">[Wednesday 04 May 2011] [06:38:46] &lt;pieterh&gt;  Bartzy|work: depends...</div>
<div class="line">[Wednesday 04 May 2011] [06:38:54] &lt;pieterh&gt;  what&#8217;s up?</div>
<div class="line">[Wednesday 04 May 2011] [06:38:56] &lt;Bartzy|work&gt;      I have a brief question</div>
<div class="line">[Wednesday 04 May 2011] [06:39:05] &lt;Bartzy|work&gt;      a design question</div>
<div class="line">[Wednesday 04 May 2011] [06:39:17] &lt;pieterh&gt;  go for it</div>
<div class="line">[Wednesday 04 May 2011] [06:39:37] &lt;Bartzy|work&gt;      I have 4 processes in a server , that do image processing</div>
<div class="line">[Wednesday 04 May 2011] [06:39:54] &lt;Bartzy|work&gt;      they are GIMPs actually, but nevermind.. they do image processing, one image at a time</div>
<div class="line">[Wednesday 04 May 2011] [06:40:03] &lt;pieterh&gt;  ok</div>
<div class="line">[Wednesday 04 May 2011] [06:41:05] &lt;Bartzy|work&gt;      currently, my web app and those 4 GIMP processes are using the same server, so it&#8217;s easy. I want to scale out, putting the GIMP processes on different, multiple servers</div>
<div class="line">[Wednesday 04 May 2011] [06:41:15] &lt;pieterh&gt;  have you read the Guide?</div>
<div class="line">[Wednesday 04 May 2011] [06:41:20] &lt;Bartzy|work&gt;      yes.</div>
<div class="line">[Wednesday 04 May 2011] [06:41:28] &lt;CIA-75&gt;   libzmq: 03Tore Halvorsen 07master * r1012021 10/ src/xrep.cpp : Accessing an iterator after it is accessed is not valid. ...</div>
<div class="line">[Wednesday 04 May 2011] [06:41:31] &lt;Bartzy|work&gt;      briefly :p</div>
<div class="line">[Wednesday 04 May 2011] [06:41:35] &lt;Bartzy|work&gt;      But my question is:</div>
<div class="line">[Wednesday 04 May 2011] [06:42:39] &lt;Bartzy|work&gt;      The code that I&#8217;ll write with zeromq, let&#8217;s say in PHP, should it be 1 process for each &#8220;image processing&#8221; server (which has 4 GIMP processes in it), or 4 PHP processes that each one control a different server?</div>
<div class="line">[Wednesday 04 May 2011] [06:43:04] &lt;pieterh&gt;  it doesn&#8217;t really matter</div>
<div class="line">[Wednesday 04 May 2011] [06:43:18] &lt;Bartzy|work&gt;      Cause I need a response, so the PHP process controlling everything on the image processing server will be busy with only one request at a time ?</div>
<div class="line">[Wednesday 04 May 2011] [06:43:29] &lt;CIA-75&gt;   libzmq: 03Martin Sustrik 07master * r3ef7c74 10/ AUTHORS : Tore Halvorsen added to the AUTHORS file ...</div>
<div class="line">[Wednesday 04 May 2011] [06:43:29] &lt;pieterh&gt;  whatever is easier for you</div>
<div class="line">[Wednesday 04 May 2011] [06:43:31] &lt;Bartzy|work&gt;      I want all 4 GIMPs in each server to work in parallel</div>
<div class="line">[Wednesday 04 May 2011] [06:43:43] &lt;pieterh&gt;  obviously, yes</div>
<div class="line">[Wednesday 04 May 2011] [06:43:55] &lt;pieterh&gt;  there are a number of patterns you can use for this</div>
<div class="line">[Wednesday 04 May 2011] [06:44:00] &lt;Bartzy|work&gt;      that means I need 4 processes that uses zeromq to &#8216;listen&#8217; for work from the web app ?</div>
<div class="line">[Wednesday 04 May 2011] [06:44:02] &lt;pieterh&gt;  check the LRU queue patterns, for a start</div>
<div class="line">[Wednesday 04 May 2011] [06:44:15] &lt;pieterh&gt;  you can make the workers each a single process that is single threaded</div>
<div class="line">[Wednesday 04 May 2011] [06:44:28] &lt;pieterh&gt;  you can make the workers threads in a single multithreaded process</div>
<div class="line">[Wednesday 04 May 2011] [06:44:36] &lt;Bartzy|work&gt;      workers = the PHP code right ? not the GIMP processes ?</div>
<div class="line">[Wednesday 04 May 2011] [06:45:02] &lt;pieterh&gt;  read the LRU queue pattern &amp; description, plz</div>
<div class="line">[Wednesday 04 May 2011] [06:45:07] &lt;Bartzy|work&gt;      PHP/python/C/whatever I chose to use with zeromq</div>
<div class="line">[Wednesday 04 May 2011] [06:45:12] &lt;pieterh&gt;  search for lruqueue if in doubt</div>
<div class="line">[Wednesday 04 May 2011] [06:45:21] &lt;Bartzy|work&gt;      ok, thanks</div>
<div class="line">[Wednesday 04 May 2011] [06:45:21] &lt;mikko&gt;    Bartzy|work: why do you use gimp?</div>
<div class="line">[Wednesday 04 May 2011] [06:45:26] &lt;mikko&gt;    just out of curiosity</div>
<div class="line">[Wednesday 04 May 2011] [06:45:28] &lt;Bartzy|work&gt;      mikko: Why not ?</div>
<div class="line">[Wednesday 04 May 2011] [06:45:35] &lt;Bartzy|work&gt;      mikko: It&#8217;s like using photoshop in a script</div>
<div class="line">[Wednesday 04 May 2011] [06:45:42] &lt;mikko&gt;    Bartzy|work: imagemagick tends to be more geared towards headless processing</div>
<div class="line">[Wednesday 04 May 2011] [06:45:52] &lt;pieterh&gt;  Bartzy|work: most people would probably use imagemagick except it&#8217;s harder to spell</div>
<div class="line">[Wednesday 04 May 2011] [06:45:53] &lt;Bartzy|work&gt;      mikko: ImageMagick is very nice, but limited</div>
<div class="line">[Wednesday 04 May 2011] [06:46:02] &lt;mikko&gt;    Bartzy|work: limited how?</div>
<div class="line">[Wednesday 04 May 2011] [06:46:03] &lt;mato&gt;     ImageMagick is also sloooow</div>
<div class="line">[Wednesday 04 May 2011] [06:46:19] &lt;mikko&gt;    mato: graphicsmagick then</div>
<div class="line">[Wednesday 04 May 2011] [06:46:37] &lt;Bartzy|work&gt;      mikko: you can do anything you do in Photoshop in ImageMagick ?</div>
<div class="line">[Wednesday 04 May 2011] [06:46:54] &lt;mikko&gt;    Bartzy|work: pretty much</div>
<div class="line">[Wednesday 04 May 2011] [06:47:12] &lt;Bartzy|work&gt;      well then it&#8217;s much harder</div>
<div class="line">[Wednesday 04 May 2011] [06:47:22] &lt;mikko&gt;    and probably more than in gimp</div>
<div class="line">[Wednesday 04 May 2011] [06:47:39] &lt;mikko&gt;    last time my trial with gimp ended to not having proper CMYK support</div>
<div class="line">[Wednesday 04 May 2011] [06:47:57] &lt;mikko&gt;    Bartzy|work: what do you do in the gimp scripts?</div>
<div class="line">[Wednesday 04 May 2011] [06:48:09] &lt;Bartzy|work&gt;      mikko: Photo effects</div>
<div class="line">[Wednesday 04 May 2011] [06:48:26] &lt;mikko&gt;    what kind of effects?</div>
<div class="line">[Wednesday 04 May 2011] [06:48:38] &lt;Bartzy|work&gt;      sketching, painting etc</div>
<div class="line">[Wednesday 04 May 2011] [06:48:52] &lt;mikko&gt;    programmatically?</div>
<div class="line">[Wednesday 04 May 2011] [06:48:58] &lt;pieterh&gt;  Bartzy|work: I&#8217;d suggest initially making one process per gimp server, single threaded, and use an lruqueue device to connect workers to clients</div>
<div class="line">[Wednesday 04 May 2011] [06:49:10] &lt;Bartzy|work&gt;      mikko: Yes</div>
<div class="line">[Wednesday 04 May 2011] [06:49:17] &lt;mikko&gt;    cool</div>
<div class="line">[Wednesday 04 May 2011] [06:50:09] &lt;sustrik&gt;  hi mikko</div>
<div class="line">[Wednesday 04 May 2011] [06:50:13] &lt;mikko&gt;    hi</div>
<div class="line">[Wednesday 04 May 2011] [06:50:28] &lt;Bartzy|work&gt;      pieterh: Do you think gearman is more suitable for this job than zeromq ?</div>
<div class="line">[Wednesday 04 May 2011] [06:50:31] &lt;sustrik&gt;  any chance to check patches at the build system?</div>
<div class="line">[Wednesday 04 May 2011] [06:50:34] &lt;Bartzy|work&gt;      pieterh: I know they&#8217;re different.</div>
<div class="line">[Wednesday 04 May 2011] [06:50:41] &lt;mikko&gt;    sustrik: sure</div>
<div class="line">[Wednesday 04 May 2011] [06:50:44] &lt;mikko&gt;    sustrik: which ones?</div>
<div class="line">[Wednesday 04 May 2011] [06:50:45] &lt;pieterh&gt;  Bartzy|work: nope, all messaging is just 0MQ done poorly</div>
<div class="line">[Wednesday 04 May 2011] [06:50:45] &lt;sustrik&gt;  i&#8217;ve tried to fix the issues by giess</div>
<div class="line">[Wednesday 04 May 2011] [06:50:48] &lt;sustrik&gt;  guess</div>
<div class="line">[Wednesday 04 May 2011] [06:50:56] &lt;Bartzy|work&gt;      pieterh: What do you mean ?</div>
<div class="line">[Wednesday 04 May 2011] [06:51:00] &lt;sustrik&gt;  but obviously that does not work :)</div>
<div class="line">[Wednesday 04 May 2011] [06:51:06] &lt;pieterh&gt;  Bartzy|work: well, I&#8217;m assuming you haven&#8217;t actually tried 0MQ</div>
<div class="line">[Wednesday 04 May 2011] [06:51:09] &lt;sustrik&gt;  mikko: well, the sun studio and icc</div>
<div class="line">[Wednesday 04 May 2011] [06:51:35] &lt;Bartzy|work&gt;      pieterh: I read the guide a bit and saw the vidoes</div>
<div class="line">[Wednesday 04 May 2011] [06:51:37] &lt;Bartzy|work&gt;      videos...</div>
<div class="line">[Wednesday 04 May 2011] [06:51:57] &lt;Bartzy|work&gt;      pieterh: It&#8217;s indeed VERY cool, but I wonder if for that specific job, gearman is more suitable and less complex.</div>
<div class="line">[Wednesday 04 May 2011] [06:53:00] &lt;pieterh&gt;  Bartzy|work: it&#8217;s not about coolness, if you haven&#8217;t actually written a couple of 0MQ apps, you can&#8217;t understand it</div>
<div class="line">[Wednesday 04 May 2011] [06:53:22] &lt;pieterh&gt;  so my advice is to go off, make a simple workload distribution architecture, in PHP</div>
<div class="line">[Wednesday 04 May 2011] [06:53:28] &lt;pieterh&gt;  it&#8217;ll take you a day, maybe</div>
<div class="line">[Wednesday 04 May 2011] [06:53:35] &lt;pieterh&gt;  if you have questions, of course ask for help</div>
<div class="line">[Wednesday 04 May 2011] [06:53:43] &lt;pieterh&gt;  but there are full, complete PHP examples for this</div>
<div class="line">[Wednesday 04 May 2011] [06:54:05] &lt;Bartzy|work&gt;      pieterh: PHP is even suited for that stuff ? I mean it&#8217;s processes that need to run forever.. it won&#8217;t leak or anything ?</div>
<div class="line">[Wednesday 04 May 2011] [06:54:17] &lt;pieterh&gt;  sigh</div>
<div class="line">[Wednesday 04 May 2011] [06:54:27] &lt;pieterh&gt;  :)</div>
<div class="line">[Wednesday 04 May 2011] [06:54:28] &lt;Bartzy|work&gt;      :</div>
<div class="line">[Wednesday 04 May 2011] [06:54:39] &lt;Bartzy|work&gt;      explain yourself :p</div>
<div class="line">[Wednesday 04 May 2011] [06:54:51] &lt;pieterh&gt;  start by learning 0MQ, then when you know what you want to make, and how, decide how to really make it</div>
<div class="line">[Wednesday 04 May 2011] [06:55:02] &lt;pieterh&gt;  it&#8217;s pointless to debate &#8220;what language&#8221; when you don&#8217;t even know what architecture</div>
<div class="line">[Wednesday 04 May 2011] [06:55:19] &lt;pieterh&gt;  &#8220;ah, but do you think I should use vim or emacs?&#8221;</div>
<div class="line">[Wednesday 04 May 2011] [06:55:23] &lt;pieterh&gt;  not relevant</div>
<div class="line">[Wednesday 04 May 2011] [06:55:45] &lt;pieterh&gt;  first learn some basic messaging patterns, then decide how to make them work for you</div>
<div class="line">[Wednesday 04 May 2011] [06:56:03] &lt;pieterh&gt;  it&#8217;s wise to make a proof of concept <em>as rapidly as possible</em> and then throw it away and start again</div>
<div class="line">[Wednesday 04 May 2011] [06:56:15] &lt;pieterh&gt;  does this help?</div>
<div class="line">[Wednesday 04 May 2011] [06:56:43] &lt;Bartzy|work&gt;      yeah, I just don&#8217;t want to waste a week in learning something I won&#8217;t eventually use....</div>
<div class="line">[Wednesday 04 May 2011] [06:56:47] &lt;Bartzy|work&gt;      so I want to research a bit</div>
<div class="line">[Wednesday 04 May 2011] [06:57:07] &lt;djc&gt;      Bartzy|work: the point is that ZMQ is very good at having something built in a day</div>
<div class="line">[Wednesday 04 May 2011] [06:57:10] &lt;djc&gt;      instead of in a week</div>
<div class="line">[Wednesday 04 May 2011] [06:57:32] &lt;djc&gt;      so researching it is less valuable than for some other technologies</div>
<div class="line">[Wednesday 04 May 2011] [06:57:32] &lt;Bartzy|work&gt;      Just to make this clear in my head - The process per gimp server - it/they should be monitored by god/monit/init ?</div>
<div class="line">[Wednesday 04 May 2011] [06:59:01] &lt;djc&gt;      the same as what you do now</div>
<div class="line">[Wednesday 04 May 2011] [06:59:06] &lt;pieterh&gt;  Bartzy|work: the only research that counts is actually programming</div>
<div class="line">[Wednesday 04 May 2011] [06:59:23] &lt;pieterh&gt;  asking others to make your technical choices for you isn&#8217;t profitable</div>
<div class="line">[Wednesday 04 May 2011] [06:59:40] &lt;pieterh&gt;  0MQ makes it <em>really easy</em> to go off and learn by doing, so please do so...</div>
<div class="line">[Wednesday 04 May 2011] [06:59:49] &lt;Bartzy|work&gt;      OK, thanks!</div>
<div class="line">[Wednesday 04 May 2011] [07:00:04] &lt;Bartzy|work&gt;      pieterh: <a class="reference external" href="http://zguide.zeromq.org/php:lruqueue">http://zguide.zeromq.org/php:lruqueue</a> this is what you meant , I presume ?</div>
<div class="line">[Wednesday 04 May 2011] [07:00:13] &lt;mikko&gt;    Bartzy|work: i&#8217;ve been talking with ian barber about php job distribution system before</div>
<div class="line">[Wednesday 04 May 2011] [07:00:23] &lt;mikko&gt;    making use of php-fpm for process management</div>
<div class="line">[Wednesday 04 May 2011] [07:00:50] &lt;Bartzy|work&gt;      mikko: That&#8217;s nice, any conclusions ?</div>
<div class="line">[Wednesday 04 May 2011] [07:01:57] &lt;mikko&gt;    Bartzy|work: would not be very hard</div>
<div class="line">[Wednesday 04 May 2011] [07:02:02] &lt;mikko&gt;    but lack of time</div>
<div class="line">[Wednesday 04 May 2011] [07:02:38] &lt;ianbarber&gt;        it&#8217;s a decent model, works fine. The tricky thing with whatever you use is maintaining the worker processes existence, the basic messaging is straightforward, and FPM simplifies that.</div>
<div class="line">[Wednesday 04 May 2011] [07:03:15] &lt;ianbarber&gt;        otherwise that kind of work distribution is just basic push messaging</div>
<div class="line">[Wednesday 04 May 2011] [07:04:16] &lt;Bartzy|work&gt;      FPM should also be monitored...</div>
<div class="line">[Wednesday 04 May 2011] [07:05:24] &lt;djc&gt;      Bartzy|work: read more of the guide, then just spend a day writing a proof of concept</div>
<div class="line">[Wednesday 04 May 2011] [07:06:04] &lt;sustrik&gt;  mikko: i mean, can i log on the build box</div>
<div class="line">[Wednesday 04 May 2011] [07:06:14] &lt;sustrik&gt;  and try to fix the sun studio and icc problems there?</div>
<div class="line">[Wednesday 04 May 2011] [07:06:21] &lt;Bartzy|work&gt;      djc: OK..</div>
<div class="line">[Wednesday 04 May 2011] [07:06:49] &lt;Bartzy|work&gt;      thanks all</div>
<div class="line">[Wednesday 04 May 2011] [07:08:01] &lt;mikko&gt;    sustrik: it&#8217;s behind a nat at the moment without public ip address</div>
<div class="line">[Wednesday 04 May 2011] [07:08:09] &lt;mikko&gt;    sustrik: i can add you user to a jump host</div>
<div class="line">[Wednesday 04 May 2011] [07:08:25] &lt;sustrik&gt;  hm, alternatively, can i send you patches to test?</div>
<div class="line">[Wednesday 04 May 2011] [07:08:31] &lt;mikko&gt;    i think i got a box connected to the internet with sun studio</div>
<div class="line">[Wednesday 04 May 2011] [07:08:46] &lt;mikko&gt;    if you want i can take a look in a minute</div>
<div class="line">[Wednesday 04 May 2011] [07:08:56] &lt;sustrik&gt;  great, thanks</div>
<div class="line">[Wednesday 04 May 2011] [07:10:44] &lt;mikko&gt;    <a class="reference external" href="https://build.zero.mq/view/libzmq/">https://build.zero.mq/view/libzmq/</a></div>
<div class="line">[Wednesday 04 May 2011] [07:10:52] &lt;mikko&gt;    the builds succeed at the moment</div>
<div class="line">[Wednesday 04 May 2011] [07:11:08] &lt;mikko&gt;    apart from clang which seems to be a compiler thing on amd64 box</div>
<div class="line">[Wednesday 04 May 2011] [07:11:08] &lt;sustrik&gt;  hm, strange</div>
<div class="line">[Wednesday 04 May 2011] [07:11:25] &lt;sustrik&gt;  yesterday evening there were errors</div>
<div class="line">[Wednesday 04 May 2011] [07:11:50] &lt;sustrik&gt;  anyway, if everything works no, no need to panic</div>
<div class="line">[Wednesday 04 May 2011] [07:11:58] &lt;sustrik&gt;  now*</div>
<div class="line">[Wednesday 04 May 2011] [07:13:02] &lt;mikko&gt;    Minor patch to keep ICC compiler happy (commit: 5e329ba7cac8a52fbbd2c347064c2d9355009022) (detail)</div>
<div class="line">[Wednesday 04 May 2011] [07:13:06] &lt;mikko&gt;    Deallocation functions in zmq.h and msg_t class are consistent. (commit: ceb5e1a0734b0c73bd7f74ec5094ae6ad4f9dfc4) (detail)</div>
<div class="line">[Wednesday 04 May 2011] [07:13:11] &lt;mikko&gt;    these are the changes in latest build</div>
<div class="line">[Wednesday 04 May 2011] [07:15:03] &lt;sustrik&gt;  yep, those are my guess patches</div>
<div class="line">[Wednesday 04 May 2011] [07:15:17] &lt;sustrik&gt;  i thought they were already used in the previous build</div>
<div class="line">[Wednesday 04 May 2011] [07:15:31] &lt;sustrik&gt;  it seems they weren&#8217;t</div>
<div class="line">[Wednesday 04 May 2011] [07:15:36] &lt;sustrik&gt;  so everyting is ok now</div>
<div class="line">[Wednesday 04 May 2011] [07:20:52] &lt;mikko&gt;    cool</div>
<div class="line">[Wednesday 04 May 2011] [09:58:17] &lt;Bartzy|work&gt;      pieterh: still here ?</div>
<div class="line">[Wednesday 04 May 2011] [09:58:24] &lt;pieterh&gt;  Bartzy|work: yup</div>
<div class="line">[Wednesday 04 May 2011] [09:58:32] &lt;pieterh&gt;  so you finished your prototype?</div>
<div class="line">[Wednesday 04 May 2011] [09:58:44] &lt;Bartzy|work&gt;      pieterh: No, I&#8217;m still at my (other) work :)</div>
<div class="line">[Wednesday 04 May 2011] [09:58:47] &lt;pieterh&gt;  :)</div>
<div class="line">[Wednesday 04 May 2011] [09:59:03] &lt;Bartzy|work&gt;      pieterh: You said earlier that you&#8217;d start with a single threaded worker for each GIMP</div>
<div class="line">[Wednesday 04 May 2011] [09:59:08] &lt;Bartzy|work&gt;      4 total</div>
<div class="line">[Wednesday 04 May 2011] [09:59:20] &lt;pieterh&gt;  I&#8217;d start with the very simplest architecture that I could make to test my concept</div>
<div class="line">[Wednesday 04 May 2011] [09:59:28] &lt;Bartzy|work&gt;      there&#8217;s nothing to test</div>
<div class="line">[Wednesday 04 May 2011] [09:59:51] &lt;pieterh&gt;  in that case it should take you only an hour or two</div>
<div class="line">[Wednesday 04 May 2011] [10:00:16] &lt;pieterh&gt;  if you are asking my advice on how to make something, don&#8217;t argue with the advice I give you :)</div>
<div class="line">[Wednesday 04 May 2011] [10:00:34] &lt;pieterh&gt;  make a minimal working model</div>
<div class="line">[Wednesday 04 May 2011] [10:00:44] &lt;pieterh&gt;  then improve it to solve specific problems you see with it</div>
<div class="line">[Wednesday 04 May 2011] [10:00:58] &lt;pieterh&gt;  otherwise, you will spend time solving problems that may be irrelevant</div>
<div class="line">[Wednesday 04 May 2011] [10:01:04] &lt;pieterh&gt;  such as... 1 process vs. N processes</div>
<div class="line">[Wednesday 04 May 2011] [10:01:10] &lt;Bartzy|work&gt;      pieterh: Since I need to get a response, what if I&#8217;ll have a single process, each time it gets a command to run in GIMPs (&#8220;work&#8221;) it will fork and continue listening for jobs.... and then execute the command on the forked process ?</div>
<div class="line">[Wednesday 04 May 2011] [10:01:30] &lt;pieterh&gt;  ok, so this is what you want to build...</div>
<div class="line">[Wednesday 04 May 2011] [10:01:38] &lt;Bartzy|work&gt;      In my opinion, it&#8217;s stupid to start programming without thinking through what you&#8217;re trying to accomplish.</div>
<div class="line">[Wednesday 04 May 2011] [10:01:43] &lt;pieterh&gt;  well...</div>
<div class="line">[Wednesday 04 May 2011] [10:01:57] &lt;Bartzy|work&gt;      no, it&#8217;s not what I want to build. It&#8217;s a solution to a problem I have</div>
<div class="line">[Wednesday 04 May 2011] [10:02:03] &lt;Bartzy|work&gt;      one of probably many</div>
<div class="line">[Wednesday 04 May 2011] [10:02:11] &lt;Bartzy|work&gt;      I want the best solution I can create :)</div>
<div class="line">[Wednesday 04 May 2011] [10:02:31] &lt;pieterh&gt;  sigh... if you ask and try to answer too many questions at once, you won&#8217;t get anywhere quickly</div>
<div class="line">[Wednesday 04 May 2011] [10:02:56] &lt;pieterh&gt;  please do the following:</div>
<div class="line">[Wednesday 04 May 2011] [10:03:06] &lt;pieterh&gt;  - take the lruqueue example</div>
<div class="line">[Wednesday 04 May 2011] [10:03:20] &lt;pieterh&gt;  - make a PHP worker that executes request by request, starting GIMP in a shell each time</div>
<div class="line">[Wednesday 04 May 2011] [10:03:28] &lt;pieterh&gt;  - make a test client, in PHP that can drive this worker</div>
<div class="line">[Wednesday 04 May 2011] [10:03:36] &lt;pieterh&gt;  - start multiple workers in parallel</div>
<div class="line">[Wednesday 04 May 2011] [10:03:39] &lt;pieterh&gt;  - see how it works</div>
<div class="line">[Wednesday 04 May 2011] [10:03:42] &lt;pieterh&gt;  ... OK?</div>
<div class="line">[Wednesday 04 May 2011] [10:03:54] &lt;pieterh&gt;  when you have that working, let&#8217;s continue the discussion</div>
<div class="line">[Wednesday 04 May 2011] [10:03:54] &lt;Bartzy|work&gt;      no, because this is really not what I&#8217;m trying to accomplish</div>
<div class="line">[Wednesday 04 May 2011] [10:03:58] &lt;Bartzy|work&gt;      I don&#8217;t want to start GIMP each time</div>
<div class="line">[Wednesday 04 May 2011] [10:04:22] &lt;pieterh&gt;  it is not relevant, to this discussion, how you talk to GIMOP</div>
<div class="line">[Wednesday 04 May 2011] [10:04:24] &lt;pieterh&gt;  GIMP</div>
<div class="line">[Wednesday 04 May 2011] [10:04:25] &lt;Bartzy|work&gt;      I want to start it once when I start the entire machine. GIMP is like MySQL to me - I ask it something and in responds.</div>
<div class="line">[Wednesday 04 May 2011] [10:04:36] &lt;pieterh&gt;  not at least until GIMP has 0MQ built into it</div>
<div class="line">[Wednesday 04 May 2011] [10:04:46] &lt;Bartzy|work&gt;      OK. So you just want me to experiment a bit with ZeroMQ?</div>
<div class="line">[Wednesday 04 May 2011] [10:04:50] &lt;pieterh&gt;  yes</div>
<div class="line">[Wednesday 04 May 2011] [10:04:57] &lt;Bartzy|work&gt;      OK</div>
<div class="line">[Wednesday 04 May 2011] [10:05:03] &lt;pieterh&gt;  it&#8217;s pointless to ask me questions about how to use ZeroMQ when you have no experience actually using it</div>
<div class="line">[Wednesday 04 May 2011] [10:05:14] &lt;pieterh&gt;  and when there  is a 150-page explanation with full examples...</div>
<div class="line">[Wednesday 04 May 2011] [10:05:23] &lt;Bartzy|work&gt;      And I&#8217;m asking - So I&#8217;ll make some nice program that does nothing I need. Then I&#8217;ll come back and ask the exact same questions.</div>
<div class="line">[Wednesday 04 May 2011] [10:05:34] &lt;pieterh&gt;  :) guaranteed you will ask different questions</div>
<div class="line">[Wednesday 04 May 2011] [10:05:36] &lt;guido_g&gt;  omg</div>
<div class="line">[Wednesday 04 May 2011] [10:05:42] &lt;pieterh&gt;  guido_g: help please</div>
<div class="line">[Wednesday 04 May 2011] [10:05:46] &lt;Bartzy|work&gt;      pieterh: OK, I&#8217;ll try</div>
<div class="line">[Wednesday 04 May 2011] [10:05:58] &lt;pieterh&gt;  it&#8217;s like asking about sex when you&#8217;ve never tried it</div>
<div class="line">[Wednesday 04 May 2011] [10:05:59] &lt;guido_g&gt;  pieterh: there is nothing one can do</div>
<div class="line">[Wednesday 04 May 2011] [10:06:14] &lt;pieterh&gt;  &#8220;is it true I need to get really drunk before hand?&#8221;</div>
<div class="line">[Wednesday 04 May 2011] [10:06:23] &lt;pieterh&gt;  &#8220;or would it be better to have a long sauna?&#8221;</div>
<div class="line">[Wednesday 04 May 2011] [10:07:00] &lt;guido_g&gt;  pieterh: people come here (or to other channels) and demand answers</div>
<div class="line">[Wednesday 04 May 2011] [10:07:22] &lt;pieterh&gt;  Bartzy|work: I don&#8217;t want to be critical, it&#8217;s good that you think ahead, but don&#8217;t over-think it</div>
<div class="line">[Wednesday 04 May 2011] [10:07:32] &lt;guido_g&gt;  of course w/o even the smalles achievements on their side</div>
<div class="line">[Wednesday 04 May 2011] [10:07:52] &lt;pieterh&gt;  guido_g: luckily we&#8217;re a caring and helpful community</div>
<div class="line">[Wednesday 04 May 2011] [10:08:25] &lt;pieterh&gt;  but indeed it could be worth raising the barrier a little...</div>
<div class="line">[Wednesday 04 May 2011] [10:08:40] &lt;guido_g&gt;  yes, this does help</div>
<div class="line">[Wednesday 04 May 2011] [10:09:06] &lt;Bartzy|work&gt;      pieterh: I like &#8220;best practices&#8221;</div>
<div class="line">[Wednesday 04 May 2011] [10:09:16] &lt;guido_g&gt;  it helped back in use-net times and it did the last years in an irc channel</div>
<div class="line">[Wednesday 04 May 2011] [10:09:36] &lt;pieterh&gt;  Bartzy|work: the best practice is, and I quote Zed Shaw on this, &#8220;programming, motherf***r&#8221;</div>
<div class="line">[Wednesday 04 May 2011] [10:09:48] &lt;Bartzy|work&gt;      now I know there isn&#8217;t one true best practice for everything... but there are do and don&#8217;t do&#8217;s...</div>
<div class="line">[Wednesday 04 May 2011] [10:09:58] &lt;Bartzy|work&gt;      haha</div>
<div class="line">[Wednesday 04 May 2011] [10:10:08] &lt;pieterh&gt;  if you come here with questions that actually refer to the context we all share, it&#8217;s much easier</div>
<div class="line">[Wednesday 04 May 2011] [10:10:21] &lt;guido_g&gt;  Bartzy|work: if you can&#8217;t walk, don&#8217;t even try to run</div>
<div class="line">[Wednesday 04 May 2011] [10:11:48] &lt;Bartzy|work&gt;      pieterh, guido_g : I&#8217;ll build the worker like we first said - one process for each GIMP. I&#8217;ll come to complain in a few hours</div>
<div class="line">[Wednesday 04 May 2011] [10:11:50] &lt;Bartzy|work&gt;      :)</div>
<div class="line">[Wednesday 04 May 2011] [10:11:56] &lt;pieterh&gt;  good deal</div>
<div class="line">[Wednesday 04 May 2011] [10:12:26] &lt;pieterh&gt;  If you still see the problem the same way after using 0MQ, you get your money back</div>
<div class="line">[Wednesday 04 May 2011] [10:12:27] &lt;guido_g&gt;  oh pieterh while this case is close, there is another question wrt the brussels</div>
<div class="line">[Wednesday 04 May 2011] [10:12:33] &lt;pieterh&gt;  tell me</div>
<div class="line">[Wednesday 04 May 2011] [10:13:13] &lt;guido_g&gt;  did you made a decision on weather? going to select the clothes...</div>
<div class="line">[Wednesday 04 May 2011] [10:13:28] &lt;pieterh&gt;  I&#8217;ve asked for excellent weather</div>
<div class="line">[Wednesday 04 May 2011] [10:13:35] &lt;guido_g&gt;  great</div>
<div class="line">[Wednesday 04 May 2011] [10:13:43] &lt;pieterh&gt;  but there&#8217;s a long queue so my request might not get processed in time</div>
<div class="line">[Wednesday 04 May 2011] [10:13:54] &lt;pieterh&gt;  it will be warm and sunny</div>
<div class="line">[Wednesday 04 May 2011] [10:13:58] &lt;pieterh&gt;  but perhaps only in August or so...</div>
<div class="line">[Wednesday 04 May 2011] [10:14:04] &lt;guido_g&gt;  hehe</div>
<div class="line">[Wednesday 04 May 2011] [10:14:13] &lt;pieterh&gt;  they&#8217;re not using 0MQ, obviously...</div>
<div class="line">[Wednesday 04 May 2011] [10:14:21] &lt;guido_g&gt;  luckly it&#8217;s a very short walk from and to the hotel</div>
<div class="line">[Wednesday 04 May 2011] [10:14:49] &lt;guido_g&gt;  mq might have been made in heaven, but it&#8217;s not used there</div>
<div class="line">[Wednesday 04 May 2011] [10:14:54] &lt;pieterh&gt;  lol :)</div>
<div class="line">[Wednesday 04 May 2011] [10:15:55] &lt;guido_g&gt;  is there an idea where the warm-up meeting on monday will be?</div>
<div class="line">[Wednesday 04 May 2011] [10:16:15] &lt;djc&gt;      what kind of event is there?</div>
<div class="line">[Wednesday 04 May 2011] [10:16:51] &lt;guido_g&gt;  <a class="reference external" href="http://www.zeromq.org/event:brussels-2011-05-10">http://www.zeromq.org/event:brussels-2011-05-10</a></div>
<div class="line">[Wednesday 04 May 2011] [10:20:24] &lt;djc&gt;      nice</div>
<div class="line">[Wednesday 04 May 2011] [10:20:42] &lt;djc&gt;      hmm, too bad, I probably won&#8217;t be able to make it this time</div>
<div class="line">[Wednesday 04 May 2011] [10:21:04] &lt;mato&gt;     pieterh: can you make a short url for the brussels conf page?</div>
<div class="line">[Wednesday 04 May 2011] [10:21:18] &lt;pieterh&gt;  mato: it&#8217;s been there for ages: <a class="reference external" href="http://zero.mq/bxl">http://zero.mq/bxl</a></div>
<div class="line">[Wednesday 04 May 2011] [10:21:21] &lt;mato&gt;     ah</div>
<div class="line">[Wednesday 04 May 2011] [10:21:23] &lt;pieterh&gt;  I put that in every email</div>
<div class="line">[Wednesday 04 May 2011] [10:21:25] &lt;pieterh&gt;  :-(</div>
<div class="line">[Wednesday 04 May 2011] [10:21:37] &lt;pieterh&gt;  let me put that on the page as well</div>
<div class="line">[Wednesday 04 May 2011] [10:21:48] &lt;guido_g&gt;  it&#8217;s too short :)</div>
<div class="line">[Wednesday 04 May 2011] [10:21:49] &lt;pieterh&gt;  BTW anyone can make a short URL at zero.mq/go</div>
<div class="line">[Wednesday 04 May 2011] [10:22:26] &lt;pieterh&gt;  djc: thanks :)</div>
<div class="line">[Wednesday 04 May 2011] [10:22:49] &lt;mato&gt;     ok, that&#8217;s better</div>
<div class="line">[Wednesday 04 May 2011] [10:23:47] &lt;mato&gt;     pieterh: happy with that topic?</div>
<div class="line">[Wednesday 04 May 2011] [10:24:00] &lt;pieterh&gt;  mato: you&#8217;re the channel admin?</div>
<div class="line">[Wednesday 04 May 2011] [10:24:05] &lt;mato&gt;     pieterh: one of them, yes</div>
<div class="line">[Wednesday 04 May 2011] [10:24:10] &lt;pieterh&gt;  yes, very happy with this, was going to ask for it before but forgot</div>
<div class="line">[Wednesday 04 May 2011] [10:24:11] &lt;pieterh&gt;  thanks!</div>
<div class="line">[Wednesday 04 May 2011] [10:24:36] &lt;mato&gt;     np</div>
<div class="line">[Wednesday 04 May 2011] [11:04:46] &lt;cremes&gt;   mikko: ping; question on compiling under mingw</div>
<div class="line">[Wednesday 04 May 2011] [11:05:10] &lt;cremes&gt;   mikko: i run ./configure; make; make install and let it figure out the defaults</div>
<div class="line">[Wednesday 04 May 2011] [11:05:30] &lt;cremes&gt;   mikko: the makefile produces libzmq.dll.a and libzmq.la but i do not see any libzmq.dll</div>
<div class="line">[Wednesday 04 May 2011] [11:05:44] &lt;cremes&gt;   am i doing something wrong? do i need to pass another switch to configure?</div>
<div class="line">[Wednesday 04 May 2011] [11:06:42] &lt;mato&gt;     cremes: look in src/.libs</div>
<div class="line">[Wednesday 04 May 2011] [11:06:49] &lt;mato&gt;     libtool will hide the dll there</div>
<div class="line">[Wednesday 04 May 2011] [11:07:23] &lt;cremes&gt;   ah ha!</div>
<div class="line">[Wednesday 04 May 2011] [11:08:14] &lt;cremes&gt;   any particular reason &#8216;make install&#8217; doesn&#8217;t do the right thing here?</div>
<div class="line">[Wednesday 04 May 2011] [11:08:30] &lt;mato&gt;     yes, what would you have it do on windows? :-)</div>
<div class="line">[Wednesday 04 May 2011] [11:10:02] &lt;cremes&gt;   copy libzmq.dll to the same place it copies libzmq.dll.a and libzmq.la</div>
<div class="line">[Wednesday 04 May 2011] [11:10:12] &lt;mato&gt;     there is no such place on win32</div>
<div class="line">[Wednesday 04 May 2011] [11:11:26] &lt;cremes&gt;   well, under mingw it&#8217;s pretty standard to install to /c/user/local/lib</div>
<div class="line">[Wednesday 04 May 2011] [11:11:36] &lt;cremes&gt;   that&#8217;s at least a good &#8220;known&#8221; place to copy it from to other locations</div>
<div class="line">[Wednesday 04 May 2011] [11:11:43] &lt;cremes&gt;   as required by your windows apps</div>
<div class="line">[Wednesday 04 May 2011] [11:11:57] &lt;Seta00&gt;   windows for /usr/lib is C:/Windows/System32 :P</div>
<div class="line">[Wednesday 04 May 2011] [11:12:02] &lt;cremes&gt;   instead of hiding it in src/.libs (i swear i never would have found it there)</div>
<div class="line">[Wednesday 04 May 2011] [11:12:23] &lt;mato&gt;     I guess it could create a &#8216;bin&#8217; directory on mingw and stick things there</div>
<div class="line">[Wednesday 04 May 2011] [11:12:33] &lt;mato&gt;     but AFAIK there is no real standard install path</div>
<div class="line">[Wednesday 04 May 2011] [11:12:35] &lt;cremes&gt;   (i should have run &#8216;find /c -name libzmq.dll&#8221;</div>
<div class="line">[Wednesday 04 May 2011] [11:12:44] &lt;mato&gt;     other than %WINDIR%system32 and you don&#8217;t want that :-)</div>
<div class="line">[Wednesday 04 May 2011] [11:14:02] &lt;cremes&gt;   got my first 0mq program running on windows! thanks for your help!</div>
<div class="line">[Wednesday 04 May 2011] [11:36:01] &lt;djc&gt;      so, is there much of a difference between (a) using poll with a ZMQ_FD and a normal fd, or (b) zmq_poll with a zmq socket and a normal fd?</div>
<div class="line">[Wednesday 04 May 2011] [11:39:06] &lt;sustrik&gt;  djc: no</div>
<div class="line">[Wednesday 04 May 2011] [11:39:24] &lt;djc&gt;      basically equivalent?</div>
<div class="line">[Wednesday 04 May 2011] [11:39:28] &lt;sustrik&gt;  just keep in mind that ZMQ_FD is edge triggered</div>
<div class="line">[Wednesday 04 May 2011] [11:39:34] &lt;djc&gt;      yeah :)</div>
<div class="line">[Wednesday 04 May 2011] [11:39:53] &lt;djc&gt;      and that&#8217;s not an issue with zmq_poll because it does the extra ZMQ_EVENTS check, presumably?</div>
<div class="line">[Wednesday 04 May 2011] [11:40:08] &lt;djc&gt;      or s/check/loop/</div>
<div class="line">[Wednesday 04 May 2011] [11:42:09] &lt;sustrik&gt;  yes</div>
<div class="line">[Wednesday 04 May 2011] [11:42:20] &lt;sustrik&gt;  see zmq_poll implementation in src/zmq.cpp</div>
<div class="line">[Wednesday 04 May 2011] [11:42:28] &lt;sustrik&gt;  it uses ZMQ_EVENTS and ZMQ_FD</div>
<div class="line">[Wednesday 04 May 2011] [11:42:28] &lt;djc&gt;      okay, so it&#8217;s basically the same as what I&#8217;m doing</div>
<div class="line">[Wednesday 04 May 2011] [11:42:35] &lt;djc&gt;      okay, nice to know :)</div>
<div class="line">[Wednesday 04 May 2011] [11:42:56] &lt;djc&gt;      btw, zeromq 2.1 is a very nice improvement over 2.0</div>
<div class="line">[Wednesday 04 May 2011] [11:43:34] &lt;cremes&gt;   what&#8217;s the reasoning for ZMQ_RATE, ZMQ_HWM, etc using int64_t or uint64_t but ZMQ_LINGER (and 2 others) use int?</div>
<div class="line">[Wednesday 04 May 2011] [11:44:17] &lt;djc&gt;      (oh yeah, and I&#8217;m also looking forward a lot to all the sockopts being int, so that the API can be simpler than the current thing)</div>
<div class="line">[Wednesday 04 May 2011] [11:47:24] &lt;pieterh&gt;  cremes: zero-mq, zero-reasoning!</div>
<div class="line">[Wednesday 04 May 2011] [11:48:06] &lt;pieterh&gt;  these were added ad-hoc</div>
<div class="line">[Wednesday 04 May 2011] [11:48:16] &lt;pieterh&gt;  in 3.0 they&#8217;re all int where they can be</div>
<div class="line">[Wednesday 04 May 2011] [11:48:19] &lt;cremes&gt;   pieterh: i had opened a bug on that some time ago... i just remembered</div>
<div class="line">[Wednesday 04 May 2011] [11:48:37] &lt;pieterh&gt;  anyhow, every language binding should wrap these IMO</div>
<div class="line">[Wednesday 04 May 2011] [11:48:45] &lt;cremes&gt;   sustrik closed it because he wanted to go from int64 -&gt; int and not int -&gt; int64</div>
<div class="line">[Wednesday 04 May 2011] [11:48:55] &lt;pieterh&gt;  so e.g. in czmq you have wrappers for all these</div>
<div class="line">[Wednesday 04 May 2011] [11:49:17] &lt;cremes&gt;   right, i was trying to make them consistent for the ruby binding</div>
<div class="line">[Wednesday 04 May 2011] [11:49:27] &lt;cremes&gt;   so that other folks wouldn&#8217;t need to worry about it</div>
<div class="line">[Wednesday 04 May 2011] [11:49:34] &lt;pieterh&gt;  yeah, in the czmq code I have two ifdef blocks</div>
<div class="line">[Wednesday 04 May 2011] [11:49:42] &lt;pieterh&gt;  you&#8217;re free to reuse that code if it helps</div>
<div class="line">[Wednesday 04 May 2011] [11:50:08] &lt;cremes&gt;   nope, got my issue fixed already... i exposed a problem with the ruby binding on 32-bit windows</div>
<div class="line">[Wednesday 04 May 2011] [11:50:17] &lt;pieterh&gt;  aight</div>
<div class="line">[Wednesday 04 May 2011] [11:50:18] &lt;cremes&gt;   and it was related to this</div>
<div class="line">[Wednesday 04 May 2011] [11:51:58] &lt;pieterh&gt;  sustrik: hey, I was kidding about the zero-reasoning bit... come back!</div>
<div class="line">[Wednesday 04 May 2011] [11:52:18] &lt;pieterh&gt;  mato: you there?</div>
<div class="line">[Wednesday 04 May 2011] [11:57:10] &lt;mato&gt;     pieterh: yes, but i need to go in like 5mins</div>
<div class="line">[Wednesday 04 May 2011] [11:57:27] &lt;pieterh&gt;  I think ephemeral ports is a great idea</div>
<div class="line">[Wednesday 04 May 2011] [11:57:35] &lt;pieterh&gt;  it should be easy to make, too</div>
<div class="line">[Wednesday 04 May 2011] [11:58:01] &lt;pieterh&gt;  I assume Sustrik will accept a patch but won&#8217;t make this himself</div>
<div class="line">[Wednesday 04 May 2011] [11:58:23] &lt;mato&gt;     i can make a patch when i have time, it&#8217;s not too hard</div>
<div class="line">[Wednesday 04 May 2011] [11:58:43] &lt;mato&gt;     the tricky bit is actually the getsockname()/other API</div>
<div class="line">[Wednesday 04 May 2011] [11:58:50] &lt;mato&gt;     since a socket can have many endpoints</div>
<div class="line">[Wednesday 04 May 2011] [11:59:04] &lt;pieterh&gt;  right, it can be the last one or somesuch</div>
<div class="line">[Wednesday 04 May 2011] [11:59:15] &lt;pieterh&gt;  it&#8217;s just an int value, right?</div>
<div class="line">[Wednesday 04 May 2011] [11:59:28] &lt;mato&gt;     pieterh: no it can&#8217;t</div>
<div class="line">[Wednesday 04 May 2011] [11:59:36] &lt;mato&gt;     if we make an API, we do it properly</div>
<div class="line">[Wednesday 04 May 2011] [12:00:00] &lt;pieterh&gt;  indeed</div>
<div class="line">[Wednesday 04 May 2011] [12:00:11] &lt;pieterh&gt;  so maybe it&#8217;s worth just jotting down how the API should work first</div>
<div class="line">[Wednesday 04 May 2011] [12:00:23] &lt;Seta00&gt;   looking forward to subports. my users already complain about copying libzmq.dll/so to a folder, I don&#8217;t want to see their reactions when I tell them to open two ports</div>
<div class="line">[Wednesday 04 May 2011] [12:00:30] &lt;pieterh&gt;  yeah</div>
<div class="line">[Wednesday 04 May 2011] [12:00:39] &lt;pieterh&gt;  but that thread on subports was so <em>confused</em></div>
<div class="line">[Wednesday 04 May 2011] [12:01:12] &lt;mato&gt;     i gotta go, cyl</div>
<div class="line">[Wednesday 04 May 2011] [12:01:24] &lt;pieterh&gt;  cyl mato</div>
<div class="line">[Wednesday 04 May 2011] [12:01:27] &lt;pieterh&gt;  zmq_push() { m=$(cat) &amp;&amp; echo -e $(printf &#8216;\x01\x00\x%02x\x00%s&#8217; $((1 + ${#m})) &#8220;$m&#8221;) | nc -q1 $&#64;; }</div>
<div class="line">[Wednesday 04 May 2011] [12:01:47] &lt;pieterh&gt;  bash 1-liner from Daniel Lundin</div>
<div class="line">[Wednesday 04 May 2011] [12:18:49] &lt;<a href="#id15"><span class="problematic" id="id20">Bar__</span></a>&gt;    &#8220;We&#8217;ll generate random values, just like the real weather stations do.&#8221;</div>
<div class="line">[Wednesday 04 May 2011] [12:18:52] &lt;<a href="#id15"><span class="problematic" id="id21">Bar__</span></a>&gt;    lol</div>
<div class="line">[Wednesday 04 May 2011] [12:23:42] &lt;mikko&gt;    aha!</div>
<div class="line">[Wednesday 04 May 2011] [12:23:49] &lt;mikko&gt;    it got me again, setting HWM before connect</div>
<div class="line">[Wednesday 04 May 2011] [12:27:49] &lt;djc&gt;      mikko: what does that do?</div>
<div class="line">[Wednesday 04 May 2011] [12:28:03] &lt;mikko&gt;    the hwm has no effect unless you set it before connect/bind</div>
<div class="line">[Wednesday 04 May 2011] [12:28:08] &lt;mikko&gt;    i keep tripping on that</div>
<div class="line">[Wednesday 04 May 2011] [12:43:37] &lt;pieterh&gt;  mikko: if you keep tripping over it, it&#8217;s bad design</div>
<div class="line">[Wednesday 04 May 2011] [12:44:06] &lt;pieterh&gt;  raise an issue, the setsockopt should return -1 if you call it after connect/bind</div>
<div class="line">[Wednesday 04 May 2011] [12:44:27] &lt;pieterh&gt;  (unless it does weird stuff like applying to some but not all connections... agh... )</div>
<div class="line">[Wednesday 04 May 2011] [12:44:36] &lt;sustrik&gt;  exactly</div>
<div class="line">[Wednesday 04 May 2011] [12:44:52] &lt;pieterh&gt;  bad design, if people keep getting it wrong</div>
<div class="line">[Wednesday 04 May 2011] [12:45:10] &lt;pieterh&gt;  this is like a basic rule of design, it should not be surprising</div>
<div class="line">[Wednesday 04 May 2011] [12:46:37] &lt;sustrik&gt;  what&#8217;s the alternative?</div>
<div class="line">[Wednesday 04 May 2011] [12:49:26] &lt;mikko&gt;    sustrik: have a method for setting the sockopt for specific connection</div>
<div class="line">[Wednesday 04 May 2011] [12:49:31] &lt;mikko&gt;    not sure if that is too far from posix</div>
<div class="line">[Wednesday 04 May 2011] [12:49:42] &lt;sustrik&gt;  quite far imo</div>
<div class="line">[Wednesday 04 May 2011] [12:49:51] &lt;sustrik&gt;  it woudl require &#8220;connect IDs&#8221;</div>
<div class="line">[Wednesday 04 May 2011] [12:49:56] &lt;sustrik&gt;  and &#8220;bind IDs&#8221;</div>
<div class="line">[Wednesday 04 May 2011] [12:50:19] &lt;mikko&gt;    that is not all bad</div>
<div class="line">[Wednesday 04 May 2011] [12:50:24] &lt;mikko&gt;    would allow removing connection as well</div>
<div class="line">[Wednesday 04 May 2011] [12:50:35] &lt;mikko&gt;    currently you have to close socket and rebuild without one connection</div>
<div class="line">[Wednesday 04 May 2011] [12:51:44] &lt;pieterh&gt;  sustrik: what would you expect to happen, as a user, if you set HWM on a socket that&#8217;s already connected...?</div>
<div class="line">[Wednesday 04 May 2011] [12:51:56] &lt;sustrik&gt;  no change</div>
<div class="line">[Wednesday 04 May 2011] [12:52:14] &lt;pieterh&gt;  nope, that&#8217;s as an implementor</div>
<div class="line">[Wednesday 04 May 2011] [12:52:32] &lt;pieterh&gt;  since Mikko, a classic user, keeps tripping up on this, &#8216;no change&#8217; is clearly not what he intends</div>
<div class="line">[Wednesday 04 May 2011] [12:52:45] &lt;sustrik&gt;  change to running sockets don&#8217;t work well</div>
<div class="line">[Wednesday 04 May 2011] [12:52:53] &lt;sustrik&gt;  mailbox_t is nice example</div>
<div class="line">[Wednesday 04 May 2011] [12:53:10] &lt;pieterh&gt;  you&#8217;re telling me, as often, about implementation details</div>
<div class="line">[Wednesday 04 May 2011] [12:53:17] &lt;pieterh&gt;  I&#8217;m talking about API design</div>
<div class="line">[Wednesday 04 May 2011] [12:53:19] &lt;sustrik&gt;  (the probleb with resizing buffers on the run)</div>
<div class="line">[Wednesday 04 May 2011] [12:53:41] &lt;sustrik&gt;  i am talking about how existing implementations work</div>
<div class="line">[Wednesday 04 May 2011] [12:53:57] &lt;pieterh&gt;  we have this kind of discussion often</div>
<div class="line">[Wednesday 04 May 2011] [12:53:59] &lt;sustrik&gt;  the rule of the thumb is &#8220;don&#8217;t do that or you get burned&#8221;</div>
<div class="line">[Wednesday 04 May 2011] [12:54:15]     * pieterh will go off and do this properly in czmq...</div>
<div class="line">[Wednesday 04 May 2011] [12:55:29] &lt;pieterh&gt;  allow me to suggest that APIs should not burn their users</div>
<div class="line">[Wednesday 04 May 2011] [12:55:47] &lt;pieterh&gt;  and should properly report errors when users make mistakes</div>
<div class="line">[Wednesday 04 May 2011] [12:56:10] &lt;sustrik&gt;  sure, but keep inside POSIX</div>
<div class="line">[Wednesday 04 May 2011] [12:56:19] &lt;pieterh&gt;  what does that mean?</div>
<div class="line">[Wednesday 04 May 2011] [12:56:30] &lt;pieterh&gt;  please send me the URL for the &#8220;POSIX API&#8221;</div>
<div class="line">[Wednesday 04 May 2011] [12:56:32] &lt;pieterh&gt;  it is massive</div>
<div class="line">[Wednesday 04 May 2011] [12:56:40] &lt;sustrik&gt;  use interfaces as defined at opengroup.org</div>
<div class="line">[Wednesday 04 May 2011] [12:57:37] &lt;pieterh&gt;  I&#8217;d point out that the Open Group <em>develop</em> standards, meaning it&#8217;s a process</div>
<div class="line">[Wednesday 04 May 2011] [12:58:11] &lt;pieterh&gt;  however I&#8217;m interested in what specific API standards you&#8217;re following in this case</div>
<div class="line">[Wednesday 04 May 2011] [12:58:31] &lt;pieterh&gt;  since you often claim &#8220;POSIX&#8221; (which is a good goal IMO) it would be useful to be precise about what that means</div>
<div class="line">[Wednesday 04 May 2011] [12:58:46] &lt;pieterh&gt;  &#8220;silent burning of users who get it wrong&#8221; isn&#8217;t in there IMO</div>
<div class="line">[Wednesday 04 May 2011] [12:59:08] &lt;sustrik&gt;  that&#8217;s what happens in reality though</div>
<div class="line">[Wednesday 04 May 2011] [12:59:18] &lt;pieterh&gt;  and you accept this as inevitable?</div>
<div class="line">[Wednesday 04 May 2011] [12:59:39] &lt;sustrik&gt;  changing options on run-time is hard or maybe impossible to implement consistently</div>
<div class="line">[Wednesday 04 May 2011] [12:59:43] &lt;sustrik&gt;  depends on the option</div>
<div class="line">[Wednesday 04 May 2011] [13:00:32] &lt;pieterh&gt;  so with HWMs you can maintain different-sized queues for each active connection in a socket?</div>
<div class="line">[Wednesday 04 May 2011] [13:00:42] &lt;pieterh&gt;  but you cannot resize a queue nor copy one queue to another</div>
<div class="line">[Wednesday 04 May 2011] [13:01:56] &lt;pieterh&gt;  surely the HWM is just a number</div>
<div class="line">[Wednesday 04 May 2011] [13:02:06] &lt;sustrik&gt;  yes, that&#8217;s the case</div>
<div class="line">[Wednesday 04 May 2011] [13:02:09] &lt;pieterh&gt;  if your queue is already larger than the HWM, setting it lower won&#8217;t have immediate impact</div>
<div class="line">[Wednesday 04 May 2011] [13:02:14] &lt;pieterh&gt;  only when the queue grows again</div>
<div class="line">[Wednesday 04 May 2011] [13:02:25] &lt;pieterh&gt;  thus, setting the HWM on an empty queue can work trivially</div>
<div class="line">[Wednesday 04 May 2011] [13:02:54] &lt;sustrik&gt;  there are synchronisation problems</div>
<div class="line">[Wednesday 04 May 2011] [13:03:07] &lt;sustrik&gt;  you can never be sure that the queue is empty at the moment</div>
<div class="line">[Wednesday 04 May 2011] [13:03:12] &lt;pieterh&gt;  does that matter?</div>
<div class="line">[Wednesday 04 May 2011] [13:03:41] &lt;pieterh&gt;  further, it would be simpler than today</div>
<div class="line">[Wednesday 04 May 2011] [13:03:42] &lt;sustrik&gt;  dunno, maybe it&#8217;s possible to do it</div>
<div class="line">[Wednesday 04 May 2011] [13:03:46] &lt;sustrik&gt;  but very complex</div>
<div class="line">[Wednesday 04 May 2011] [13:03:49] &lt;sustrik&gt;  you can try</div>
<div class="line">[Wednesday 04 May 2011] [13:03:49] &lt;pieterh&gt;  now you have to manage a separate HWM per queue</div>
<div class="line">[Wednesday 04 May 2011] [13:04:03] &lt;pieterh&gt;  well, &#8220;send me a patch&#8221; is a good joke but it doesn&#8217;t work on me</div>
<div class="line">[Wednesday 04 May 2011] [13:04:28] &lt;pieterh&gt;  my role is limited here to challenging your (fairly frequent) assertions that painful APIs are inevitable due to implementation details :)</div>
<div class="line">[Wednesday 04 May 2011] [13:05:16] &lt;pieterh&gt;  ok, I owe you a beer next week for being rather unkind</div>
<div class="line">[Wednesday 04 May 2011] [13:06:06] &lt;pieterh&gt;  however it is always profitable to improve an area where people systematically make mistakes</div>
<div class="line">[Wednesday 04 May 2011] [13:10:06] &lt;sustrik&gt;  well, it&#8217;s</div>
<div class="line">[Wednesday 04 May 2011] [13:10:09] &lt;sustrik&gt;  1. hard to do</div>
<div class="line">[Wednesday 04 May 2011] [13:10:36] &lt;sustrik&gt;  OSes often get it wrong, which is a sign of a possible problem there</div>
<div class="line">[Wednesday 04 May 2011] [13:10:53] &lt;sustrik&gt;  2. it&#8217;s not clear how to expose it via POSIX api</div>
<div class="line">[Wednesday 04 May 2011] [13:11:48] &lt;sustrik&gt;  3. the development of new features is severely hindered by the hacks in the codebase that cannot be removed because people are using them</div>
<div class="line">[Wednesday 04 May 2011] [13:12:15] &lt;sustrik&gt;  thus, adding any more hacks can easily kill the project</div>
<div class="line">[Wednesday 04 May 2011] [13:12:46] &lt;sustrik&gt;  what we need to do before doing this kind of thing is to grow the developer base</div>
<div class="line">[Wednesday 04 May 2011] [13:13:36] &lt;sustrik&gt;  once there are 10-20 people hacking on the core</div>
<div class="line">[Wednesday 04 May 2011] [13:14:03] &lt;sustrik&gt;  we can allow some more complexity in the codebase</div>
<div class="line">[Wednesday 04 May 2011] [14:06:06] &lt;CIA-75&gt;   pyzmq: 03hugo shi 07master * ra8e6532 10/ examples/eventloop/web.py : added simple example that runs a tornado web server which can send zmq messages to echostream.py ...</div>
<div class="line">[Wednesday 04 May 2011] [14:34:49] &lt;CIA-75&gt;   pyzmq: 03Min RK 07master * r3556e77 10/ (zmq/core/socket.pyx zmq/tests/test_device.py): Merge pull request #108 from minrk/testsockets. ...</div>
<div class="line">[Wednesday 04 May 2011] [14:56:51] &lt;Bartzy&gt;   I was just told at ##php that PHP is totally unsuitable for daemons and servers and stuff</div>
<div class="line">[Wednesday 04 May 2011] [14:56:52] &lt;Bartzy&gt;   ;(</div>
<div class="line">[Wednesday 04 May 2011] [14:58:55] &lt;Bartzy&gt;   Anyone here is using PHP as a &#8216;server&#8217; ?</div>
<div class="line">[Wednesday 04 May 2011] [14:59:08] &lt;Bartzy&gt;   with 0MQ, of course...</div>
<div class="line">[Wednesday 04 May 2011] [17:02:48] &lt;aspidites&gt;        any best practices when trying to design a network architecture? or is it more of a trial and error thing?</div>
<div class="line">[Wednesday 04 May 2011] [17:03:49] &lt;mikko&gt;    aspidites: same best practices apply as outside zeromq</div>
<div class="line">[Wednesday 04 May 2011] [17:04:07] &lt;mikko&gt;    there are some zeromq specific established things as well</div>
<div class="line">[Wednesday 04 May 2011] [17:04:16] &lt;mikko&gt;    but if you explain your situation a bit people can advise better</div>
<div class="line">[Wednesday 04 May 2011] [17:06:16] &lt;aspidites&gt;        well i&#8217;m trying to write a server for a trading card game. i&#8217;m thinking about having deck objects created on the server and allowing those objects to be modified using a req/rep socket pair, simultaneously using pub/sub sockets to deliver/receive updates</div>
<div class="line">[Wednesday 04 May 2011] [17:06:53] &lt;aspidites&gt;        eg, player client can request to draw cards and receive a reply with the cards that were drawn, but other players or spectators could subscribe to deck events such as &#8216;player 1 drew a card&#8217;</div>
<div class="line">[Wednesday 04 May 2011] [17:08:38] &lt;mikko&gt;    ok, is this over the internet?</div>
<div class="line">[Wednesday 04 May 2011] [17:09:10] &lt;aspidites&gt;        desktop</div>
<div class="line">[Wednesday 04 May 2011] [17:09:58] &lt;aspidites&gt;        server would be run as a daemon either on a remote machine, or on a &#8216;host&#8217; machine, clients would be desktop applications that connected to said remote machines, more than likely locating them through a simple name server</div>
<div class="line">[Wednesday 04 May 2011] [17:10:38] &lt;aspidites&gt;        initially i&#8217;ll just key in the server address as a command line option, so i&#8217;m not so worried about the name server right now</div>
<div class="line">[Wednesday 04 May 2011] [17:11:23] &lt;mikko&gt;    what i meant by over the internet is that are you exposing zeromq to internet?</div>
<div class="line">[Wednesday 04 May 2011] [17:11:37] &lt;mikko&gt;    there are still occasional asserts on invalid messages</div>
<div class="line">[Wednesday 04 May 2011] [17:11:50] &lt;mikko&gt;    but those usually get fixed pretty quickly as they are found</div>
<div class="line">[Wednesday 04 May 2011] [17:12:20] &lt;aspidites&gt;        i guess i still don&#8217;t follow.</div>
<div class="line">[Wednesday 04 May 2011] [17:13:13] &lt;aspidites&gt;        there won&#8217;t be (initially) any web based clients if that&#8217;s what you mean</div>
<div class="line">[Wednesday 04 May 2011] [17:13:22] &lt;mikko&gt;    i mean public access</div>
<div class="line">[Wednesday 04 May 2011] [17:13:26] &lt;mikko&gt;    over the internet</div>
<div class="line">[Wednesday 04 May 2011] [17:13:45] &lt;mikko&gt;    are you exposing zeromq to public internet or is this lan application?</div>
<div class="line">[Wednesday 04 May 2011] [17:14:22] &lt;aspidites&gt;        mostly lan</div>
<div class="line">[Wednesday 04 May 2011] [17:14:48] &lt;aspidites&gt;        actually no. it would be public internet</div>
<div class="line">[Wednesday 04 May 2011] [17:15:20] &lt;aspidites&gt;        sorry i&#8217;m being confusing. users will most likely be spread accross domains, in separate cities, states, and more likely countries, not on the same router</div>
<div class="line">[Wednesday 04 May 2011] [17:17:06] &lt;mikko&gt;    yes</div>
<div class="line">[Wednesday 04 May 2011] [17:17:09] &lt;mikko&gt;    thats what i meant</div>
<div class="line">[Wednesday 04 May 2011] [17:18:07] &lt;aspidites&gt;        yeah. public internet. might need to slow down on drinking those energy drinks</div>
<div class="line">[Wednesday 04 May 2011] [17:19:13] &lt;aspidites&gt;        perhaps i can ask a simpler question: should i prefer the req/rep pattern when i need to guarantee delivery of messages, and the pub/sub pattern when clients may come and go without carrying about what messages are received?</div>
<div class="line">[Wednesday 04 May 2011] [17:19:46] &lt;mikko&gt;    yes, but most likely you want XREP/XREQ</div>
<div class="line">[Wednesday 04 May 2011] [17:22:59] &lt;aspidites&gt;        which is now router/dealer, right?</div>
<div class="line">[Wednesday 04 May 2011] [17:23:07] &lt;mikko&gt;    yes</div>
<div class="line">[Wednesday 04 May 2011] [17:23:25] &lt;aspidites&gt;        ok. so when would i use push/pull?</div>
<div class="line">[Wednesday 04 May 2011] [17:23:51] &lt;mikko&gt;    fire and forget</div>
<div class="line">[Wednesday 04 May 2011] [17:25:07] &lt;aspidites&gt;        ah ok</div>
<div class="line">[Wednesday 04 May 2011] [17:26:05] &lt;aspidites&gt;        i see the multithreading example, is there a similar multiprocessing example?</div>
<div class="line">[Wednesday 04 May 2011] [17:30:56] &lt;aspidites&gt;        nvm thanks though</div>
<div class="line">[Wednesday 04 May 2011] [19:24:41] &lt;Bartzy&gt;   Can I use fork with zeromq ?</div>
<div class="line">[Wednesday 04 May 2011] [19:24:56] &lt;Bartzy&gt;   It won&#8217;t crash or something cause file descriptors get shared between processes ?</div>
<div class="line">[Thursday 05 May 2011] [02:53:04] &lt;djc&gt;       Bartzy: IIRC you shouldn&#8217;t share sockets across threads</div>
<div class="line">[Thursday 05 May 2011] [02:53:13] &lt;djc&gt;       (zmq sockets)</div>
<div class="line">[Thursday 05 May 2011] [02:54:19] &lt;guido_g&gt;   fork &lt;- processes</div>
<div class="line">[Thursday 05 May 2011] [02:54:31] &lt;guido_g&gt;   but the statement holds</div>
<div class="line">[Thursday 05 May 2011] [02:54:34] &lt;djc&gt;       yeah</div>
<div class="line">[Thursday 05 May 2011] [02:54:54] &lt;djc&gt;       hmmm, I&#8217;m using a device to forward a tcp publisher over inproc</div>
<div class="line">[Thursday 05 May 2011] [02:55:05] &lt;djc&gt;       but it seems to leak like hell</div>
<div class="line">[Thursday 05 May 2011] [02:55:13] &lt;djc&gt;       even though I set HWM on the inproc subs</div>
<div class="line">[Thursday 05 May 2011] [02:55:31] &lt;djc&gt;       presumably if there are no inproc subs the device will just lose the messages, right?</div>
<div class="line">[Thursday 05 May 2011] [02:57:50] &lt;djc&gt;       also is it possible somehow to inspect the size of the queue for a subscriber?</div>
<div class="line">[Thursday 05 May 2011] [02:58:07] &lt;djc&gt;       I don&#8217;t see anything in the getsockopt docs, so probably not...</div>
<div class="line">[Thursday 05 May 2011] [02:58:35] &lt;guido_g&gt;   hwm should be set on both sides for inproc</div>
<div class="line">[Thursday 05 May 2011] [02:58:57] &lt;guido_g&gt;   its then the sum of both sides, i&#8217;ve heard here</div>
<div class="line">[Thursday 05 May 2011] [02:59:00] &lt;djc&gt;       why&#8217;s that?</div>
<div class="line">[Thursday 05 May 2011] [02:59:10] &lt;guido_g&gt;   i didn&#8217;t implement it</div>
<div class="line">[Thursday 05 May 2011] [02:59:28] &lt;sustrik&gt;   the reason is to make it work same for tcp and inproc</div>
<div class="line">[Thursday 05 May 2011] [02:59:44] &lt;sustrik&gt;   so, in tcp you have a buffer on send side and buffer on recv side</div>
<div class="line">[Thursday 05 May 2011] [02:59:55] &lt;djc&gt;       ah, ok</div>
<div class="line">[Thursday 05 May 2011] [02:59:57] &lt;djc&gt;       that makes sense</div>
<div class="line">[Thursday 05 May 2011] [03:00:15] &lt;djc&gt;       so for a forwarder device, if I only have HWM on the pub side, should that suffice?</div>
<div class="line">[Thursday 05 May 2011] [03:00:23] &lt;djc&gt;       or does that just make it clog up on the sub side?</div>
<div class="line">[Thursday 05 May 2011] [03:00:34] &lt;sustrik&gt;   the latter</div>
<div class="line">[Thursday 05 May 2011] [03:00:57] &lt;sustrik&gt;   if you wan&#8217;t to bound memory usage</div>
<div class="line">[Thursday 05 May 2011] [03:01:07] &lt;sustrik&gt;   set hwm on every socket you are using</div>
<div class="line">[Thursday 05 May 2011] [03:01:36] &lt;djc&gt;       I had a server completely fail last night because the OOM killer for some reason killed everything except the pyzmq-using process :(</div>
<div class="line">[Thursday 05 May 2011] [03:02:13] &lt;sustrik&gt;   yes, you should use HWM consistently</div>
<div class="line">[Thursday 05 May 2011] [03:02:24] &lt;sustrik&gt;   you can also have a look at MAXMSGSIZE option</div>
<div class="line">[Thursday 05 May 2011] [03:02:28] &lt;djc&gt;       sustrik: if the forwarder device doesn&#8217;t have any clients on the pub side, it will still throw messages away, right?</div>
<div class="line">[Thursday 05 May 2011] [03:02:33] &lt;djc&gt;       like a normal publisher?</div>
<div class="line">[Thursday 05 May 2011] [03:02:48] &lt;sustrik&gt;   yes, the same</div>
<div class="line">[Thursday 05 May 2011] [03:03:10] &lt;djc&gt;       and would it be hard to add a sock opt to get the queue size?</div>
<div class="line">[Thursday 05 May 2011] [03:03:40] &lt;sustrik&gt;   which queue?</div>
<div class="line">[Thursday 05 May 2011] [03:03:47] &lt;sustrik&gt;   there are many queues beneath each socket</div>
<div class="line">[Thursday 05 May 2011] [03:03:56] &lt;sustrik&gt;   one per connection basically</div>
<div class="line">[Thursday 05 May 2011] [03:04:08] &lt;djc&gt;       yeah</div>
<div class="line">[Thursday 05 May 2011] [03:04:21] &lt;djc&gt;       I suppose, on a sub socket, the total of all messages queued from each publisher</div>
<div class="line">[Thursday 05 May 2011] [03:04:27] &lt;sustrik&gt;   also, you can&#8217;t account for data stored in TCP buffers, in the NIC etc.</div>
<div class="line">[Thursday 05 May 2011] [03:04:49] &lt;sustrik&gt;   what would you use that for?</div>
<div class="line">[Thursday 05 May 2011] [03:05:02] &lt;sustrik&gt;   memory usage management?</div>
<div class="line">[Thursday 05 May 2011] [03:25:17] &lt;guido_g&gt;   some information would be better than no information</div>
<div class="line">[Thursday 05 May 2011] [03:25:48] &lt;guido_g&gt;   one could use the information to see trends and steer the components</div>
<div class="line">[Thursday 05 May 2011] [03:26:27] &lt;sustrik&gt;   you mean in terms of memory management, right?</div>
<div class="line">[Thursday 05 May 2011] [03:26:53] &lt;sustrik&gt;   like &#8220;this component is using too much memory so let&#8217;s ask it to pause for a while&#8221;</div>
<div class="line">[Thursday 05 May 2011] [03:26:54] &lt;guido_g&gt;   no, I mean in terms of overall management during system runtime</div>
<div class="line">[Thursday 05 May 2011] [03:27:25] &lt;sustrik&gt;   management of what then, network bandwidth?</div>
<div class="line">[Thursday 05 May 2011] [03:27:35] &lt;guido_g&gt;   the whole system</div>
<div class="line">[Thursday 05 May 2011] [03:27:41] &lt;sustrik&gt;   CPU usage?</div>
<div class="line">[Thursday 05 May 2011] [03:27:45] &lt;guido_g&gt;   the whole system</div>
<div class="line">[Thursday 05 May 2011] [03:27:50] &lt;sustrik&gt;   what&#8217;s that? :)</div>
<div class="line">[Thursday 05 May 2011] [03:27:54] &lt;guido_g&gt;   omfg</div>
<div class="line">[Thursday 05 May 2011] [03:28:07] &lt;guido_g&gt;   sometimes it&#8217;s really hard</div>
<div class="line">[Thursday 05 May 2011] [03:28:30] &lt;sustrik&gt;   well, you want to manage something, but you don&#8217;t say what you want to manage</div>
<div class="line">[Thursday 05 May 2011] [03:28:34] &lt;sustrik&gt;   hard to help you then</div>
<div class="line">[Thursday 05 May 2011] [03:28:37] &lt;guido_g&gt;   the application</div>
<div class="line">[Thursday 05 May 2011] [03:28:46] &lt;sustrik&gt;   can you give an example?</div>
<div class="line">[Thursday 05 May 2011] [03:28:53] &lt;guido_g&gt;   i build an application and need to keep track what it does</div>
<div class="line">[Thursday 05 May 2011] [03:29:01] &lt;guido_g&gt;   messaging is part of this</div>
<div class="line">[Thursday 05 May 2011] [03:29:10] &lt;guido_g&gt;   i don&#8217;t need exact numbers</div>
<div class="line">[Thursday 05 May 2011] [03:29:34] &lt;guido_g&gt;   it&#8217;s more important to have measurement-pointsd all over the app</div>
<div class="line">[Thursday 05 May 2011] [03:29:48] &lt;guido_g&gt;   so there is evidence if something goes wrong</div>
<div class="line">[Thursday 05 May 2011] [03:30:10] &lt;mikko&gt;     deja vu</div>
<div class="line">[Thursday 05 May 2011] [03:30:14] &lt;mikko&gt;     good morning</div>
<div class="line">[Thursday 05 May 2011] [03:30:15] &lt;guido_g&gt;   it modernd times, this information might even be used to allert ops if something looks fishy</div>
<div class="line">[Thursday 05 May 2011] [03:30:20] &lt;sustrik&gt;   morning</div>
<div class="line">[Thursday 05 May 2011] [03:30:25] &lt;sustrik&gt;   right</div>
<div class="line">[Thursday 05 May 2011] [03:30:25] &lt;guido_g&gt;   hi mikko</div>
<div class="line">[Thursday 05 May 2011] [03:30:30] &lt;sustrik&gt;   do you monitor tcp buffers?</div>
<div class="line">[Thursday 05 May 2011] [03:30:39] &lt;guido_g&gt;   i knew that would come</div>
<div class="line">[Thursday 05 May 2011] [03:30:48] &lt;guido_g&gt;   if i have to, i&#8217;d do it</div>
<div class="line">[Thursday 05 May 2011] [03:30:49] &lt;sustrik&gt;   there&#8217;s actually a way to do that as i found out yesterday</div>
<div class="line">[Thursday 05 May 2011] [03:31:08] &lt;guido_g&gt;   but messages are a way better overall indicator</div>
<div class="line">[Thursday 05 May 2011] [03:31:21] &lt;guido_g&gt;   because these link directly to the applications actions</div>
<div class="line">[Thursday 05 May 2011] [03:31:27] &lt;mikko&gt;     i think metric of how many messages in zeromq buffers is a useful metric</div>
<div class="line">[Thursday 05 May 2011] [03:31:35] &lt;guido_g&gt;   and therefore produce a &#8220;value&#8221; for logging/monitoring</div>
<div class="line">[Thursday 05 May 2011] [03:32:01] &lt;guido_g&gt;   mikko: thanks, i owe you a beer</div>
<div class="line">[Thursday 05 May 2011] [03:32:14] &lt;mikko&gt;     guido_g: we&#8217;ve had this discussion before</div>
<div class="line">[Thursday 05 May 2011] [03:32:25] &lt;guido_g&gt;   mikko: you too?  ,)</div>
<div class="line">[Thursday 05 May 2011] [03:32:30] &lt;sustrik&gt;   let&#8217;s maybe discuss it in bxl?</div>
<div class="line">[Thursday 05 May 2011] [03:32:36] &lt;guido_g&gt;   YES!</div>
<div class="line">[Thursday 05 May 2011] [03:32:37] &lt;mikko&gt;     i think the best you can do is to give real-world example how you use this metric</div>
<div class="line">[Thursday 05 May 2011] [03:32:45] &lt;sustrik&gt;   yes, please</div>
<div class="line">[Thursday 05 May 2011] [03:32:50] &lt;mikko&gt;     what do you gain out of this metric, not just &#8220;logging&#8221; as whole</div>
<div class="line">[Thursday 05 May 2011] [03:32:59] &lt;sustrik&gt;   without the use cases the discussion is kind of pointless</div>
<div class="line">[Thursday 05 May 2011] [03:33:04] &lt;guido_g&gt;   no</div>
<div class="line">[Thursday 05 May 2011] [03:33:11] &lt;mikko&gt;     once there is a real-world example sustrik can relate to it</div>
<div class="line">[Thursday 05 May 2011] [03:33:13] &lt;guido_g&gt;   it&#8217;S a service the library should provide</div>
<div class="line">[Thursday 05 May 2011] [03:33:24] &lt;djc&gt;       mikko: for example, you might have found out sooner you erroneously set your HWM after the connect</div>
<div class="line">[Thursday 05 May 2011] [03:33:27] &lt;guido_g&gt;   going to read the internets then...</div>
<div class="line">[Thursday 05 May 2011] [03:33:46] &lt;djc&gt;       I would definitely have found out my single HWM was not enough</div>
<div class="line">[Thursday 05 May 2011] [03:33:51] &lt;mikko&gt;     djc: i wouldn&#8217;t, because it was the receiver side hwm</div>
<div class="line">[Thursday 05 May 2011] [03:33:55] &lt;djc&gt;       even though I still don&#8217;t fully understand why that is</div>
<div class="line">[Thursday 05 May 2011] [03:33:59] &lt;mikko&gt;     i wouldve looked at sender side</div>
<div class="line">[Thursday 05 May 2011] [03:34:09] &lt;mikko&gt;     djc: inproc?</div>
<div class="line">[Thursday 05 May 2011] [03:34:16] &lt;djc&gt;       yeah, inproc</div>
<div class="line">[Thursday 05 May 2011] [03:34:24] &lt;mikko&gt;     set sender and receiver hwm</div>
<div class="line">[Thursday 05 May 2011] [03:34:33] &lt;djc&gt;       yeah, sure, WHY, though?</div>
<div class="line">[Thursday 05 May 2011] [03:34:40] &lt;mikko&gt;     because the messages get queued</div>
<div class="line">[Thursday 05 May 2011] [03:34:51] &lt;djc&gt;       the docs say for PUB and SUB sockets, both have action = Drop for HWM</div>
<div class="line">[Thursday 05 May 2011] [03:34:54] &lt;mikko&gt;     in my case i publish frames from kinect</div>
<div class="line">[Thursday 05 May 2011] [03:35:01] &lt;mikko&gt;     sensor gives 30fps</div>
<div class="line">[Thursday 05 May 2011] [03:35:09] &lt;mikko&gt;     and my gui occasionally lags behind a bit</div>
<div class="line">[Thursday 05 May 2011] [03:35:18] &lt;djc&gt;       so it seems like, if I set HWM on the sub, the sub should drop if it gets more stuff from the PUB</div>
<div class="line">[Thursday 05 May 2011] [03:35:24] &lt;mikko&gt;     and then the memory usage starts to sky rocket as the frames get buffered</div>
<div class="line">[Thursday 05 May 2011] [03:35:37] &lt;mikko&gt;     djc: yes</div>
<div class="line">[Thursday 05 May 2011] [03:35:41] &lt;mikko&gt;     that&#8217;s what i wanted in my case</div>
<div class="line">[Thursday 05 May 2011] [03:35:50] &lt;djc&gt;       that&#8217;s similar to what I have, I&#8217;m pushing JSON messages over a WebSocket and the browser has to update a web page</div>
<div class="line">[Thursday 05 May 2011] [03:35:50] &lt;mikko&gt;     as the sensor feed is real-time</div>
<div class="line">[Thursday 05 May 2011] [03:36:18] &lt;mikko&gt;     this is only problem if you publish faster than you consume</div>
<div class="line">[Thursday 05 May 2011] [03:36:39] &lt;mikko&gt;     guido_g: there is no question in my mind that zeromq should provide this metric</div>
<div class="line">[Thursday 05 May 2011] [03:36:51] &lt;mikko&gt;     sustrik: if you can monitor the size of tcp buffers why not zeromq as well?</div>
<div class="line">[Thursday 05 May 2011] [03:37:12] &lt;djc&gt;       also, does someone here have experience tuning the Linux OOM killer? ;)</div>
<div class="line">[Thursday 05 May 2011] [03:38:22] &lt;djc&gt;       mikko: but the thing is, I&#8217;m forwarding from tcp to inproc, and I think the inproc side of the forwarder had no clients at all</div>
<div class="line">[Thursday 05 May 2011] [03:38:36] &lt;djc&gt;       so in that case I don&#8217;t understand why I need a HWM set</div>
<div class="line">[Thursday 05 May 2011] [03:38:47] &lt;djc&gt;       because the pub side of the forwarder should just drop everything</div>
<div class="line">[Thursday 05 May 2011] [03:38:53] &lt;mikko&gt;     you don&#8217;t necessarily</div>
<div class="line">[Thursday 05 May 2011] [03:38:57] &lt;mikko&gt;     are you having issues?</div>
<div class="line">[Thursday 05 May 2011] [03:39:26] &lt;djc&gt;       the OOM killer killed one of my servers last night</div>
<div class="line">[Thursday 05 May 2011] [03:39:36] &lt;djc&gt;       because it didn&#8217;t understand what process it had to kill</div>
<div class="line">[Thursday 05 May 2011] [03:40:05] &lt;sustrik&gt;   mikko: my fear is that people would abuse it to drive application logic</div>
<div class="line">[Thursday 05 May 2011] [03:40:18] &lt;guido_g&gt;   mikko: <a class="reference external" href="http://highscalability.com/log-everything-all-time">http://highscalability.com/log-everything-all-time</a>  &lt;- my statement in form of an article (note the date!)</div>
<div class="line">[Thursday 05 May 2011] [03:40:20] &lt;mikko&gt;     terminate called after throwing an instance of &#8216;zmq::error_t&#8217;</div>
<div class="line">[Thursday 05 May 2011] [03:40:23] &lt;sustrik&gt;   i&#8217;ve had that discussion serveral times</div>
<div class="line">[Thursday 05 May 2011] [03:40:26] &lt;mikko&gt;     shouldn&#8217;t this be catchable?</div>
<div class="line">[Thursday 05 May 2011] [03:40:35] &lt;sustrik&gt;   guy asks for monitoring the queue size</div>
<div class="line">[Thursday 05 May 2011] [03:40:45] &lt;sustrik&gt;   says it&#8217;s for &#8220;monitoring&#8221; purposes</div>
<div class="line">[Thursday 05 May 2011] [03:40:55] &lt;guido_g&gt;   you can&#8217;T protect the world</div>
<div class="line">[Thursday 05 May 2011] [03:41:09] &lt;djc&gt;       sustrik: the solution for that would be good docs</div>
<div class="line">[Thursday 05 May 2011] [03:41:16] &lt;sustrik&gt;   further questioning reveals that he actually want&#8217;s it to dirve the business logic</div>
<div class="line">[Thursday 05 May 2011] [03:41:19] &lt;djc&gt;       which say DON&#8217;T USE THIS FOR APP LOGIC</div>
<div class="line">[Thursday 05 May 2011] [03:41:31] &lt;djc&gt;       and then when they complain you can just point to the docs</div>
<div class="line">[Thursday 05 May 2011] [03:41:38] &lt;guido_g&gt;   if mq should be used for real 24/7 distributed applications, it has to have a way to montior it&#8217;s behaviour</div>
<div class="line">[Thursday 05 May 2011] [03:41:44] &lt;sustrik&gt;   well, the REQ/REP is meant to do REQ/REP</div>
<div class="line">[Thursday 05 May 2011] [03:41:49] &lt;guido_g&gt;   directly and related to the messages it processes</div>
<div class="line">[Thursday 05 May 2011] [03:41:59] &lt;sustrik&gt;   what you see now is everyone using it to do custom routing</div>
<div class="line">[Thursday 05 May 2011] [03:42:04] &lt;guido_g&gt;   for now it&#8217;s a black box</div>
<div class="line">[Thursday 05 May 2011] [03:42:10] &lt;pieterh&gt;   sustrik: you&#8217;re not being fair here</div>
<div class="line">[Thursday 05 May 2011] [03:42:16] &lt;pieterh&gt;   0MQ lacks any other way to do routing</div>
<div class="line">[Thursday 05 May 2011] [03:42:19] &lt;guido_g&gt;   and ask ops guys what they think of those things</div>
<div class="line">[Thursday 05 May 2011] [03:42:26] &lt;guido_g&gt;   hi pieterh</div>
<div class="line">[Thursday 05 May 2011] [03:42:29] &lt;sustrik&gt;   morning</div>
<div class="line">[Thursday 05 May 2011] [03:42:33] &lt;pieterh&gt;   guido_g: hi</div>
<div class="line">[Thursday 05 May 2011] [03:42:55] &lt;pieterh&gt;   sustrik: if you keep complaining that people &#8216;misuse&#8217; your lovely designs</div>
<div class="line">[Thursday 05 May 2011] [03:42:56] &lt;guido_g&gt;   welcome to the pre-warmup for brussels :)</div>
<div class="line">[Thursday 05 May 2011] [03:43:04] &lt;pieterh&gt;   you really start to sound silly</div>
<div class="line">[Thursday 05 May 2011] [03:43:14] &lt;pieterh&gt;   since you don&#8217;t provide alternatives</div>
<div class="line">[Thursday 05 May 2011] [03:43:21] &lt;pieterh&gt;   and you try to claim that the use cases are invalid</div>
<div class="line">[Thursday 05 May 2011] [03:43:25] &lt;pieterh&gt;   or people are just too stupid</div>
<div class="line">[Thursday 05 May 2011] [03:43:27] &lt;pieterh&gt;   or something</div>
<div class="line">[Thursday 05 May 2011] [03:43:28] &lt;sustrik&gt;   well, if i added every possible feature to 0mq, we&#8217;ll be back to AMQP style design by now</div>
<div class="line">[Thursday 05 May 2011] [03:43:33] &lt;pieterh&gt;   it&#8217;s really annoying to have this discussion</div>
<div class="line">[Thursday 05 May 2011] [03:43:45] &lt;pieterh&gt;   no-one is asking for &#8220;every possible feature&#8221;</div>
<div class="line">[Thursday 05 May 2011] [03:43:49] &lt;pieterh&gt;   that is a straw man</div>
<div class="line">[Thursday 05 May 2011] [03:43:53] &lt;guido_g&gt;   sustrik: resistance is good, up to a certain amount</div>
<div class="line">[Thursday 05 May 2011] [03:43:53] &lt;djc&gt;       sustrik: it&#8217;s not even a feature, just exposing some more data you already have somehwere</div>
<div class="line">[Thursday 05 May 2011] [03:43:55] &lt;sustrik&gt;   one at a time :)</div>
<div class="line">[Thursday 05 May 2011] [03:44:06] &lt;guido_g&gt;   sustrik: if you refuse too much features, you fail to attract users</div>
<div class="line">[Thursday 05 May 2011] [03:44:08] &lt;pieterh&gt;   stop telling your users they are stupid, it&#8217;s really bad politics</div>
<div class="line">[Thursday 05 May 2011] [03:44:17] &lt;pieterh&gt;   you don&#8217;t actually use 0MQ</div>
<div class="line">[Thursday 05 May 2011] [03:44:17] &lt;sustrik&gt;   ok</div>
<div class="line">[Thursday 05 May 2011] [03:44:25] &lt;pieterh&gt;   you are actually incompetent when it comes to knowing about use cases</div>
<div class="line">[Thursday 05 May 2011] [03:44:34] &lt;pieterh&gt;   if you don&#8217;t trust your users, what do you have?</div>
<div class="line">[Thursday 05 May 2011] [03:44:37] &lt;guido_g&gt;   ahhh</div>
<div class="line">[Thursday 05 May 2011] [03:44:39] &lt;djc&gt;       pieterh: harsh words, man</div>
<div class="line">[Thursday 05 May 2011] [03:44:44] &lt;pieterh&gt;   true words</div>
<div class="line">[Thursday 05 May 2011] [03:44:56] &lt;guido_g&gt;   one-gear down would help more, i think</div>
<div class="line">[Thursday 05 May 2011] [03:45:09] &lt;sustrik&gt;   i would love to hear the use case</div>
<div class="line">[Thursday 05 May 2011] [03:45:13] &lt;pieterh&gt;   either we design 0MQ collectively, or it fails to work</div>
<div class="line">[Thursday 05 May 2011] [03:45:24] &lt;djc&gt;       sustrik: the use case is actual monitoring</div>
<div class="line">[Thursday 05 May 2011] [03:45:32] &lt;sustrik&gt;   what&#8217;s that?</div>
<div class="line">[Thursday 05 May 2011] [03:45:38] &lt;sustrik&gt;   what it is used for?</div>
<div class="line">[Thursday 05 May 2011] [03:45:40] &lt;sustrik&gt;   etc.</div>
<div class="line">[Thursday 05 May 2011] [03:45:42] &lt;djc&gt;       making sure the message queues don&#8217;t balloon out because of my failing to set enough HWMs</div>
<div class="line">[Thursday 05 May 2011] [03:45:54] &lt;djc&gt;       and displaying some values about this on a status page</div>
<div class="line">[Thursday 05 May 2011] [03:46:03] &lt;djc&gt;       so I can correct my code by setting more HWMs</div>
<div class="line">[Thursday 05 May 2011] [03:46:08] &lt;sustrik&gt;   ah, so it&#8217;s for debugging, right?</div>
<div class="line">[Thursday 05 May 2011] [03:46:15] &lt;guido_g&gt;   pieterh: is it ok to have a page on the wiki for such things? and if so, where?</div>
<div class="line">[Thursday 05 May 2011] [03:46:24] &lt;djc&gt;       sustrik: debugging and monitoring go together</div>
<div class="line">[Thursday 05 May 2011] [03:46:29] &lt;pieterh&gt;   guido_g: what such things?</div>
<div class="line">[Thursday 05 May 2011] [03:46:38] &lt;djc&gt;       some code that worked fine may not work once I start to move more messages through the socket</div>
<div class="line">[Thursday 05 May 2011] [03:46:39] &lt;sustrik&gt;   so what&#8217;s the monitoring part about?</div>
<div class="line">[Thursday 05 May 2011] [03:46:51] &lt;guido_g&gt;   pieterh: features to be beaten^W discussed over</div>
<div class="line">[Thursday 05 May 2011] [03:47:10] &lt;pieterh&gt;   guido_g: for sure, yes... I sometimes make &#8216;topic&#8217; pages for that stuff</div>
<div class="line">[Thursday 05 May 2011] [03:47:27] &lt;sustrik&gt;   that would be goog</div>
<div class="line">[Thursday 05 May 2011] [03:47:30] &lt;sustrik&gt;   good</div>
<div class="line">[Thursday 05 May 2011] [03:47:41] &lt;sustrik&gt;   especially if people post use cases there</div>
<div class="line">[Thursday 05 May 2011] [03:47:49] &lt;djc&gt;       sustrik: the monitoring part is just being able to ascertain that something is not going wrong... it&#8217;s not just debugging</div>
<div class="line">[Thursday 05 May 2011] [03:48:23] &lt;guido_g&gt;   pieterh: i want to present the monitoring use-case, lots of links and some meagre words from me</div>
<div class="line">[Thursday 05 May 2011] [03:48:42] &lt;djc&gt;       for example I&#8217;d put it into SNMP and integrate it with my other diagnostics</div>
<div class="line">[Thursday 05 May 2011] [03:48:45] &lt;guido_g&gt;   monitoring is much more, yes</div>
<div class="line">[Thursday 05 May 2011] [03:48:56] &lt;pieterh&gt;   start a topic: page, write what you like, then post link to email list and discuss there</div>
<div class="line">[Thursday 05 May 2011] [03:48:58] &lt;djc&gt;       (for example couchdb replication state, redis uptime, whatever)</div>
<div class="line">[Thursday 05 May 2011] [03:49:06] &lt;guido_g&gt;   pieterh: ah ok</div>
<div class="line">[Thursday 05 May 2011] [03:49:28]      * guido_g goes of to find out what a topic-page is</div>
<div class="line">[Thursday 05 May 2011] [03:50:17] &lt;pieterh&gt;   guido_g: it&#8217;s a wiki, you enter &#8216;<a class="reference external" href="http://www.zeromq.org/topic:monitoring-something">http://www.zeromq.org/topic:monitoring-something</a>&#8216; in the URL, then click to create the page</div>
<div class="line">[Thursday 05 May 2011] [03:50:35] &lt;guido_g&gt;   pieterh: thanks</div>
<div class="line">[Thursday 05 May 2011] [03:50:38] &lt;pieterh&gt;   you can edit the community page to add to the list of topics already shown</div>
<div class="line">[Thursday 05 May 2011] [03:51:29] &lt;guido_g&gt;   i&#8217;m not allowed to do that</div>
<div class="line">[Thursday 05 May 2011] [03:51:57] &lt;guido_g&gt;   the story of my life</div>
<div class="line">[Thursday 05 May 2011] [03:52:29] &lt;djc&gt;       sustrik: so in my pub-sub-forwarded-over-inproc scenario, how many HWMs do I need to set to be safe? in my mental model, if I set the HWM on the inproc subscriber (at the end of the chain), I&#8217;d be safe</div>
<div class="line">[Thursday 05 May 2011] [03:52:38] &lt;pieterh&gt;   guido_g: join the wiki, there should be a button somewhere</div>
<div class="line">[Thursday 05 May 2011] [03:52:41] &lt;djc&gt;       but obviously that&#8217;s not the case, and I don&#8217;t understand why, from the docs</div>
<div class="line">[Thursday 05 May 2011] [03:52:43]      * pieterh will check the wiki permissions</div>
<div class="line">[Thursday 05 May 2011] [03:52:48] &lt;guido_g&gt;   pieterh: i&#8217;m logged in</div>
<div class="line">[Thursday 05 May 2011] [03:53:12] &lt;sustrik&gt;   djc: on every socket</div>
<div class="line">[Thursday 05 May 2011] [03:53:31] &lt;djc&gt;       yeah, I really don&#8217;t understand why that is</div>
<div class="line">[Thursday 05 May 2011] [03:53:49] &lt;pieterh&gt;   guido_g: did you join the site? You have to be a member to edit pages on it</div>
<div class="line">[Thursday 05 May 2011] [03:53:58] &lt;sustrik&gt;   actually, my feeling is that the whole monitoring discussion would be solved by setting the default HWM to 1000 or somesuch :)</div>
<div class="line">[Thursday 05 May 2011] [03:54:11] &lt;pieterh&gt;   sustrik: yeah, or default in context</div>
<div class="line">[Thursday 05 May 2011] [03:54:27] &lt;djc&gt;       ugh, that would be really bad</div>
<div class="line">[Thursday 05 May 2011] [03:54:35] &lt;guido_g&gt;   pieterh: i could edit the brussels page, but i&#8217;m not allowed to create a page (url close the one you gave)</div>
<div class="line">[Thursday 05 May 2011] [03:54:47] &lt;sustrik&gt;   djc: why so?</div>
<div class="line">[Thursday 05 May 2011] [03:54:55] &lt;sustrik&gt;   infinity is a prety lousy default</div>
<div class="line">[Thursday 05 May 2011] [03:55:02] &lt;djc&gt;       sustrik: because I don&#8217;t want it to lose messages by default</div>
<div class="line">[Thursday 05 May 2011] [03:55:05] &lt;guido_g&gt;   pieterh: i requested <a class="reference external" href="http://www.zeromq.org/topic:monitoring-support">http://www.zeromq.org/topic:monitoring-support</a> and clicked on create page</div>
<div class="line">[Thursday 05 May 2011] [03:55:24] &lt;pieterh&gt;   guido_g: sorry, it&#8217;s &#8216;topics&#8217; not &#8216;topic&#8217;...</div>
<div class="line">[Thursday 05 May 2011] [03:55:45] &lt;pieterh&gt;   I can make a better interface for creating topics but you&#8217;re pretty much user number 1 here</div>
<div class="line">[Thursday 05 May 2011] [03:55:47] &lt;guido_g&gt;   pieterh: see, and it works :)</div>
<div class="line">[Thursday 05 May 2011] [03:55:51] &lt;guido_g&gt;   pieterh: thanks again</div>
<div class="line">[Thursday 05 May 2011] [03:55:53] &lt;sustrik&gt;   djc: you mean in pub/sub?</div>
<div class="line">[Thursday 05 May 2011] [03:56:12] &lt;djc&gt;       sustrik: but explain this to me some more... in my mind, a message incoming over tcp gets to the forwarder sub, is then copied onto the inproc pub, then it immediately gets reference-copied to each inproc sub incoming queue, right?</div>
<div class="line">[Thursday 05 May 2011] [03:56:22] &lt;djc&gt;       sustrik: yeah, pub/sub</div>
<div class="line">[Thursday 05 May 2011] [03:56:58] &lt;sustrik&gt;   yes</div>
<div class="line">[Thursday 05 May 2011] [03:57:26] &lt;djc&gt;       sustrik: so if I set HWM on the inproc sub, it should drop things that come in when it&#8217;s full, so how is that not a good enough solution?</div>
<div class="line">[Thursday 05 May 2011] [03:57:47] &lt;djc&gt;       there doesn&#8217;t seem to be any opportunity for the other buffers to get clogged up</div>
<div class="line">[Thursday 05 May 2011] [03:58:04] &lt;sustrik&gt;   but it&#8217;s either/or problem; either you loose messages or run out of memory</div>
<div class="line">[Thursday 05 May 2011] [03:58:16] &lt;sustrik&gt;   there&#8217;s no way out of that</div>
<div class="line">[Thursday 05 May 2011] [03:58:22] &lt;djc&gt;       sustrik: yes, and that&#8217;s exactly the choice zeromq shouldn&#8217;t make for me</div>
<div class="line">[Thursday 05 May 2011] [03:58:32] &lt;sustrik&gt;   ah</div>
<div class="line">[Thursday 05 May 2011] [03:58:50] &lt;sustrik&gt;   i was speaking about default behaviour</div>
<div class="line">[Thursday 05 May 2011] [03:58:57] &lt;sustrik&gt;   not mandatory behaviour</div>
<div class="line">[Thursday 05 May 2011] [03:59:43] &lt;sustrik&gt;   the point was that loosing messages is probably more acceptable than process being killed by OOM killer</div>
<div class="line">[Thursday 05 May 2011] [04:00:07] &lt;djc&gt;       well, I prefer fail fast, and I&#8217;ll notice the OOM killer sooner than I&#8217;ll notice messages being dropped</div>
<div class="line">[Thursday 05 May 2011] [04:00:39] &lt;djc&gt;       (actually before the OOM killer I noticed the memory use before it became really problematic and killed the right process myself, and then set the HWM)</div>
<div class="line">[Thursday 05 May 2011] [04:00:44] &lt;pieterh&gt;   djc: if 0MQ told you when it was dropping messages, would that help?</div>
<div class="line">[Thursday 05 May 2011] [04:00:55] &lt;djc&gt;       but you still haven&#8217;t explained why my single HWM won&#8217;t work</div>
<div class="line">[Thursday 05 May 2011] [04:01:17] &lt;djc&gt;       pieterh: that might help some, but I&#8217;m not sure what the appropriate channel for that would be</div>
<div class="line">[Thursday 05 May 2011] [04:01:33] &lt;pieterh&gt;   well, there&#8217;s already sys://log for such things</div>
<div class="line">[Thursday 05 May 2011] [04:01:52] &lt;pieterh&gt;   it can be extraordinarily annoying to e.g. have messages dropped silently when they can&#8217;t be routed</div>
<div class="line">[Thursday 05 May 2011] [04:02:11] &lt;pieterh&gt;   sustrik: you realize that the only way to debug this is to add printfs to libzmq?</div>
<div class="line">[Thursday 05 May 2011] [04:02:24] &lt;sustrik&gt;   yes</div>
<div class="line">[Thursday 05 May 2011] [04:02:32] &lt;pieterh&gt;   i vaguely recall submitting a patch for this, which got rejected</div>
<div class="line">[Thursday 05 May 2011] [04:02:45] &lt;sustrik&gt;   two problems</div>
<div class="line">[Thursday 05 May 2011] [04:03:06] &lt;sustrik&gt;   1. if there are several publishers it&#8217;s not clear which message sequence is broken</div>
<div class="line">[Thursday 05 May 2011] [04:03:42] &lt;sustrik&gt;   2. there should be a way to propagate the &#8220;breaking points&#8221; down the pub/sub tree</div>
<div class="line">[Thursday 05 May 2011] [04:04:07] &lt;sustrik&gt;   djc: if there&#8217;s unbounded queue anywhere in the system it&#8217;ll become the narrow point where the messages get accumulated</div>
<div class="line">[Thursday 05 May 2011] [04:04:34] &lt;djc&gt;       sustrik: that doesn&#8217;t make sense if the HWM behavior is to drop</div>
<div class="line">[Thursday 05 May 2011] [04:04:37] &lt;sustrik&gt;   so, in congestion situation, that queue will grow and ultimately run out of memory</div>
<div class="line">[Thursday 05 May 2011] [04:04:55] &lt;sustrik&gt;   what should it be instead?</div>
<div class="line">[Thursday 05 May 2011] [04:04:59] &lt;djc&gt;       the docs say the subscriber drops messages, it doesn&#8217;t say the subscriber blocks messages</div>
<div class="line">[Thursday 05 May 2011] [04:05:12] &lt;sustrik&gt;   yes, for pub/sub it drops</div>
<div class="line">[Thursday 05 May 2011] [04:05:21] &lt;sustrik&gt;   you would prefer blocking?</div>
<div class="line">[Thursday 05 May 2011] [04:05:35] &lt;djc&gt;       no, I prefer dropping, but you&#8217;r saying that it actually blocks</div>
<div class="line">[Thursday 05 May 2011] [04:05:58] &lt;djc&gt;       the unbounded queues can only grow if the the downstream queues block instead of drop</div>
<div class="line">[Thursday 05 May 2011] [04:05:59] &lt;sustrik&gt;   did i said that?</div>
<div class="line">[Thursday 05 May 2011] [04:06:10] &lt;sustrik&gt;   ah</div>
<div class="line">[Thursday 05 May 2011] [04:06:21] &lt;djc&gt;       if the downstream queues dropped instead of blocked, the upstream queues wouldn&#8217;t accumulate</div>
<div class="line">[Thursday 05 May 2011] [04:06:25] &lt;sustrik&gt;   there are more queues there than you are seeing</div>
<div class="line">[Thursday 05 May 2011] [04:06:38] &lt;sustrik&gt;   there&#8217;s TCP involved which has a blocking behaviour</div>
<div class="line">[Thursday 05 May 2011] [04:07:02] &lt;sustrik&gt;   so, if the network is not keeping up with the feed, it causes TCP to block</div>
<div class="line">[Thursday 05 May 2011] [04:07:25] &lt;djc&gt;       but that would only be if the subscriber side doesn&#8217;t get a chance to recv its messages and then drop them, right?</div>
<div class="line">[Thursday 05 May 2011] [04:07:55] &lt;sustrik&gt;   if it doesn&#8217;t catch up</div>
<div class="line">[Thursday 05 May 2011] [04:08:07] &lt;sustrik&gt;   slow hardware, limited bandwidth or whatever</div>
<div class="line">[Thursday 05 May 2011] [04:08:22] &lt;djc&gt;       yeah, we don&#8217;t have slow hardware or limited bandwidth</div>
<div class="line">[Thursday 05 May 2011] [04:09:10] &lt;sustrik&gt;   ok, so what&#8217;s the problem once again?</div>
<div class="line">[Thursday 05 May 2011] [04:09:25] &lt;sustrik&gt;   i understand the topology you have</div>
<div class="line">[Thursday 05 May 2011] [04:09:42] &lt;sustrik&gt;   what&#8217;s the thing you believe is broken?</div>
<div class="line">[Thursday 05 May 2011] [04:10:25] &lt;djc&gt;       okay, the problem is, I set the HWM on the downstream inproc subscribers yesterday afternoon, and yesterday evening the process completely blew up, invoking the OOM killer until the server had to be restarted</div>
<div class="line">[Thursday 05 May 2011] [04:10:55] &lt;sustrik&gt;   there&#8217;s hwm missing somewhere i would guess</div>
<div class="line">[Thursday 05 May 2011] [04:11:28] &lt;djc&gt;       yes, that&#8217;s what you&#8217;ve been saying, but it still seems weird to me</div>
<div class="line">[Thursday 05 May 2011] [04:11:46] &lt;djc&gt;       particularly because I <em>suspect</em> (but can&#8217;t be sure at this point) that there were no inproc subscribers at all</div>
<div class="line">[Thursday 05 May 2011] [04:11:59] &lt;sustrik&gt;   aha</div>
<div class="line">[Thursday 05 May 2011] [04:12:12] &lt;sustrik&gt;   maybe there&#8217;s a bug</div>
<div class="line">[Thursday 05 May 2011] [04:12:15] &lt;sustrik&gt;   hard to say</div>
<div class="line">[Thursday 05 May 2011] [04:12:31] &lt;sustrik&gt;   what was the message load?</div>
<div class="line">[Thursday 05 May 2011] [04:12:34] &lt;djc&gt;       yeah, so for debugging it would help if I could inspect the queue size ;)</div>
<div class="line">[Thursday 05 May 2011] [04:12:35] &lt;sustrik&gt;   very high?</div>
<div class="line">[Thursday 05 May 2011] [04:13:04] &lt;djc&gt;       I don&#8217;t have hard numbers about the message load yet, I&#8217;ll make some today</div>
<div class="line">[Thursday 05 May 2011] [04:13:23] &lt;sustrik&gt;   i mean, was it &#8220;publish as fast as possible&#8221; scenario?</div>
<div class="line">[Thursday 05 May 2011] [04:13:47] &lt;sustrik&gt;   or rather something like &#8220;send a message each millisecond&#8221;</div>
<div class="line">[Thursday 05 May 2011] [04:13:53] &lt;djc&gt;       the former</div>
<div class="line">[Thursday 05 May 2011] [04:13:59] &lt;sustrik&gt;   ok</div>
<div class="line">[Thursday 05 May 2011] [04:14:13] &lt;djc&gt;       it&#8217;s tick data from stock exchanges all over the world</div>
<div class="line">[Thursday 05 May 2011] [04:14:23] &lt;djc&gt;       for some 500 different markets</div>
<div class="line">[Thursday 05 May 2011] [04:14:29] &lt;sustrik&gt;   in such cases you are basically testing congestion behaviour of the system</div>
<div class="line">[Thursday 05 May 2011] [04:15:07] &lt;sustrik&gt;   the congestion happens at points where two &#8220;pipes&#8221; get connected</div>
<div class="line">[Thursday 05 May 2011] [04:15:20] &lt;sustrik&gt;   and the downstream one is slower than upstream one</div>
<div class="line">[Thursday 05 May 2011] [04:15:30] &lt;sustrik&gt;   for example a TCP and 0mq</div>
<div class="line">[Thursday 05 May 2011] [04:15:55] &lt;sustrik&gt;   the only real solution is to set HWM everywhere</div>
<div class="line">[Thursday 05 May 2011] [04:16:27] &lt;sustrik&gt;   that would guarantee that if the congestion happens at any point of the patch</div>
<div class="line">[Thursday 05 May 2011] [04:16:28] &lt;sustrik&gt;   path</div>
<div class="line">[Thursday 05 May 2011] [04:16:36] &lt;djc&gt;       yeah, I just think the docs don&#8217;t make clear enough why in this kind of scenario dropping messages might not actually drop, but rather block</div>
<div class="line">[Thursday 05 May 2011] [04:16:37] &lt;sustrik&gt;   it won&#8217;t run out of memory</div>
<div class="line">[Thursday 05 May 2011] [04:17:08] &lt;sustrik&gt;   hm, well, it&#8217;s not really visible to the user</div>
<div class="line">[Thursday 05 May 2011] [04:17:29] &lt;djc&gt;       it&#8217;s visible because the server runs out of memory :P</div>
<div class="line">[Thursday 05 May 2011] [04:17:40] &lt;sustrik&gt;   right</div>
<div class="line">[Thursday 05 May 2011] [04:18:00] &lt;sustrik&gt;   feel free to submit a documentation patch</div>
<div class="line">[Thursday 05 May 2011] [04:18:30] &lt;sustrik&gt;   hm</div>
<div class="line">[Thursday 05 May 2011] [04:19:22] &lt;sustrik&gt;   &#8220;if the downstream is not able to keep with the message feed, you should expect the memory usage to grow&#8221;</div>
<div class="line">[Thursday 05 May 2011] [04:19:50] &lt;sustrik&gt;   &#8220;if the HWMs are not set, this can eventually lead to memory exhaustion&#8221;</div>
<div class="line">[Thursday 05 May 2011] [04:19:54] &lt;sustrik&gt;   would that do?</div>
<div class="line">[Thursday 05 May 2011] [04:20:30] &lt;djc&gt;       you should emphasize that a single HWM at the downstream end might not suffice</div>
<div class="line">[Thursday 05 May 2011] [04:21:56] &lt;sustrik&gt;   would you mind to word it yourself?</div>
<div class="line">[Thursday 05 May 2011] [04:22:14] &lt;sustrik&gt;   for me it&#8217;s kind of obvious so i am probably not a right person to write it down</div>
<div class="line">[Thursday 05 May 2011] [04:24:18] &lt;skm&gt;       i have a question on using epgm</div>
<div class="line">[Thursday 05 May 2011] [04:24:27] &lt;skm&gt;       i have two servers connected to 10.80.11.X</div>
<div class="line">[Thursday 05 May 2011] [04:24:38] &lt;skm&gt;       and one broadcasts via epgm://eth0;239.192.1.1:8000</div>
<div class="line">[Thursday 05 May 2011] [04:24:43] &lt;skm&gt;       the other receives on the same</div>
<div class="line">[Thursday 05 May 2011] [04:24:52] &lt;skm&gt;       the messages arent getting through</div>
<div class="line">[Thursday 05 May 2011] [04:25:05] &lt;skm&gt;       is it because of that address? is there another address i should be using?</div>
<div class="line">[Thursday 05 May 2011] [04:26:05] &lt;sustrik&gt;   the address looks ok</div>
<div class="line">[Thursday 05 May 2011] [04:26:19] &lt;guido_g&gt;   a) try the ip instead of the interface</div>
<div class="line">[Thursday 05 May 2011] [04:26:30] &lt;sustrik&gt;   and do you have multicast traffic enabled on your network?</div>
<div class="line">[Thursday 05 May 2011] [04:26:32] &lt;guido_g&gt;   b) check if multicast routes are working</div>
<div class="line">[Thursday 05 May 2011] [04:27:21] &lt;Bartzy|work&gt;       Hey</div>
<div class="line">[Thursday 05 May 2011] [04:27:33] &lt;Bartzy|work&gt;       Anyone here is using 0MQ with PHP ?</div>
<div class="line">[Thursday 05 May 2011] [04:27:59] &lt;skm&gt;       multicast routes - how do i check that/what do i do? <em>goes to google</em></div>
<div class="line">[Thursday 05 May 2011] [04:31:30] &lt;skm&gt;       iptables</div>
<div class="line">[Thursday 05 May 2011] [04:31:31] &lt;skm&gt;       sign</div>
<div class="line">[Thursday 05 May 2011] [04:31:34] &lt;skm&gt;       sgh*</div>
<div class="line">[Thursday 05 May 2011] [04:31:40] &lt;skm&gt;       sigh*</div>
<div class="line">[Thursday 05 May 2011] [04:47:00] &lt;mikko&gt;     Bartzy|work: yes</div>
<div class="line">[Thursday 05 May 2011] [04:47:50] &lt;Bartzy|work&gt;       mikko: I was chatting &#64; ##php, and asked about daemons and &#8216;servers&#8217; written in PHP, and most of the people there told me PHP is just not built for that. That it leaks memory, and it&#8217;s generally bad for your health to do stuff that are not web-based in PHP</div>
<div class="line">[Thursday 05 May 2011] [04:48:25] &lt;guido_g&gt;   good advice :)</div>
<div class="line">[Thursday 05 May 2011] [04:48:26] &lt;Bartzy|work&gt;       mikko: Is that your experience too (since using ZeroMQ with PHP probably means not using it from a web server exclusively) ?</div>
<div class="line">[Thursday 05 May 2011] [04:49:11] &lt;Bartzy|work&gt;       I was thinking about learning python, but I need a solution now, and I know PHP fine...</div>
<div class="line">[Thursday 05 May 2011] [04:50:25] &lt;Bartzy|work&gt;       guido_g: What&#8217;s your language of choice ? :)</div>
<div class="line">[Thursday 05 May 2011] [04:50:31] &lt;guido_g&gt;   python is fine for these things</div>
<div class="line">[Thursday 05 May 2011] [04:50:31] &lt;mikko&gt;     PHP should be good enough for that if you respawn the workers within certain intervals</div>
<div class="line">[Thursday 05 May 2011] [04:50:40] &lt;guido_g&gt;   right</div>
<div class="line">[Thursday 05 May 2011] [04:50:59] &lt;guido_g&gt;   Bartzy|work: i&#8217;m mostly a python guy (for ~10 years)</div>
<div class="line">[Thursday 05 May 2011] [04:51:14] &lt;guido_g&gt;   but if you need something fast, use the things you know best</div>
<div class="line">[Thursday 05 May 2011] [04:53:17] &lt;Bartzy|work&gt;       mikko: How do I do that ?</div>
<div class="line">[Thursday 05 May 2011] [04:54:30] &lt;guido_g&gt;   Bartzy|work: just exit the process after a certain amount of requests</div>
<div class="line">[Thursday 05 May 2011] [04:54:37] &lt;Bartzy|work&gt;       mikko: I want to do this: 1 PHP process listening for jobs on a 0MQ TCP socket. when it gets something, it forks itself, running the job at the forked child (because it&#8217;s blocking), and the master process (parent) doesn&#8217;t stop listening to other jobs...</div>
<div class="line">[Thursday 05 May 2011] [04:54:48] &lt;Bartzy|work&gt;       guido_g: But what will start it back ?</div>
<div class="line">[Thursday 05 May 2011] [04:54:59] &lt;guido_g&gt;   a so called watchdog</div>
<div class="line">[Thursday 05 May 2011] [04:55:04] &lt;Bartzy|work&gt;       Monit ?</div>
<div class="line">[Thursday 05 May 2011] [04:55:21] &lt;Bartzy|work&gt;       mikko: Is that reasonable in your experience ? Forking in PHP won&#8217;t mess up 0MQ extension ?</div>
<div class="line">[Thursday 05 May 2011] [04:59:10] &lt;mikko&gt;     no</div>
<div class="line">[Thursday 05 May 2011] [04:59:15] &lt;mikko&gt;     just create the socket in the fork</div>
<div class="line">[Thursday 05 May 2011] [04:59:32] &lt;Bartzy|work&gt;       in the fork ? But I fork only when I get a request</div>
<div class="line">[Thursday 05 May 2011] [05:00:01] &lt;Bartzy|work&gt;       and then I thought about contacting the parent with IPC (when the forked process ends the job)</div>
<div class="line">[Thursday 05 May 2011] [05:08:32] &lt;mikko&gt;     you have a process running somwhere in the background</div>
<div class="line">[Thursday 05 May 2011] [05:08:38] &lt;mikko&gt;     and you just send from your web script</div>
<div class="line">[Thursday 05 May 2011] [05:09:47] &lt;Bartzy|work&gt;       mikko? what ?</div>
<div class="line">[Thursday 05 May 2011] [05:10:20] &lt;Bartzy|work&gt;       I have a web script. It uses 0MQ to push out a job to a PHP script that runs constantly in the background</div>
<div class="line">[Thursday 05 May 2011] [05:10:49] &lt;Bartzy|work&gt;       that PHP script needs to continue listening for jobs, so it can&#8217;t process the job itself</div>
<div class="line">[Thursday 05 May 2011] [05:11:13] &lt;Bartzy|work&gt;       so it forks itself, running the job in the forked child, and continuing listening to jobs coming in, forking as needed</div>
<div class="line">[Thursday 05 May 2011] [05:11:25] &lt;Bartzy|work&gt;       mikko: That&#8217;s what I want to do ^</div>
<div class="line">[Thursday 05 May 2011] [05:11:34] &lt;mikko&gt;     yes</div>
<div class="line">[Thursday 05 May 2011] [05:11:39] &lt;Bartzy|work&gt;       I just don&#8217;t know if 0MQ will confuse when I fork</div>
<div class="line">[Thursday 05 May 2011] [05:11:52] &lt;Bartzy|work&gt;       cause I fork AFTER I use 0MQ context and sockets (to get the jobs)</div>
<div class="line">[Thursday 05 May 2011] [05:12:30] &lt;Bartzy|work&gt;       and I want to use 0MQ in the child processes to communicate with the parent process (child process saying it has completed the job).</div>
<div class="line">[Thursday 05 May 2011] [05:39:48] &lt;mikko&gt;     create them after fork</div>
<div class="line">[Thursday 05 May 2011] [05:40:00] &lt;mikko&gt;     i dont think they survive fork</div>
<div class="line">[Thursday 05 May 2011] [06:09:56] &lt;guido_g&gt;   mikko: please see <a class="reference external" href="http://www.zeromq.org/topics:monitoring-support">http://www.zeromq.org/topics:monitoring-support</a> and contribute, if you like</div>
<div class="line">[Thursday 05 May 2011] [06:19:05] &lt;Bartzy|work&gt;       mikko: I can&#8217;t start it after the fork. I have to listen for incoming jobs before I fork.</div>
<div class="line">[Thursday 05 May 2011] [06:19:24] &lt;Bartzy|work&gt;       sorry for the huge delay. went to eat :|</div>
<div class="line">[Thursday 05 May 2011] [06:21:30] &lt;mikko&gt;     Bartzy|work: have you considered running a device?</div>
<div class="line">[Thursday 05 May 2011] [06:21:37] &lt;mikko&gt;     run a device that listens for incoming jobs</div>
<div class="line">[Thursday 05 May 2011] [06:21:44] &lt;mikko&gt;     and the php scripts connect to the device locally</div>
<div class="line">[Thursday 05 May 2011] [06:22:07] &lt;Bartzy|work&gt;       how would that help with the blocking issue ?</div>
<div class="line">[Thursday 05 May 2011] [06:22:30] &lt;mikko&gt;     your php scripts can be single threaded</div>
<div class="line">[Thursday 05 May 2011] [06:22:34] &lt;mikko&gt;     no need to fork anything</div>
<div class="line">[Thursday 05 May 2011] [06:22:46] &lt;mikko&gt;     if the script dies the device won&#8217;t send anything to it anymore</div>
<div class="line">[Thursday 05 May 2011] [06:24:15] &lt;Bartzy|work&gt;       but I want only 1 php script</div>
<div class="line">[Thursday 05 May 2011] [06:24:22] &lt;Bartzy|work&gt;       Can you explain your suggestion further ?</div>
<div class="line">[Thursday 05 May 2011] [06:24:46] &lt;Bartzy|work&gt;       device = a dummy php script that only forwards requests ?</div>
<div class="line">[Thursday 05 May 2011] [06:26:38] &lt;mikko&gt;     have you read the zguide at all?</div>
<div class="line">[Thursday 05 May 2011] [06:26:56] &lt;mikko&gt;     devices are small daemons that forward requests</div>
<div class="line">[Thursday 05 May 2011] [06:27:20] &lt;mikko&gt;     the workers connect to the device</div>
<div class="line">[Thursday 05 May 2011] [06:27:26] &lt;mikko&gt;     and clients connect to the device as well</div>
<div class="line">[Thursday 05 May 2011] [06:27:37] &lt;Bartzy|work&gt;       Yes, but that will defeat the purpose of having only 1 worker than spawns sub-worker to do that actual jobs</div>
<div class="line">[Thursday 05 May 2011] [06:27:40] &lt;mikko&gt;     the client doesnt know about individual workers, how many or so</div>
<div class="line">[Thursday 05 May 2011] [06:27:54] &lt;mikko&gt;     Bartzy|work: why would you need only one worker?</div>
<div class="line">[Thursday 05 May 2011] [06:28:00] &lt;mikko&gt;     isn&#8217;t that exactly what you don&#8217;t want?</div>
<div class="line">[Thursday 05 May 2011] [06:28:20] &lt;mikko&gt;     if you have the workers as simple individual scripts you can respawn them periodically</div>
<div class="line">[Thursday 05 May 2011] [06:28:27] &lt;Bartzy|work&gt;       mikko: Cause I don&#8217;t want to keep many workers alive... Is that a stupid thing to be worried of ?</div>
<div class="line">[Thursday 05 May 2011] [06:28:32] &lt;Bartzy|work&gt;       OK...</div>
<div class="line">[Thursday 05 May 2011] [06:28:36] &lt;Bartzy|work&gt;       Maybe I&#8217;m afraid of a non-issue</div>
<div class="line">[Thursday 05 May 2011] [06:28:45] &lt;mikko&gt;     what is the issue with multiple workers?</div>
<div class="line">[Thursday 05 May 2011] [06:28:54] &lt;mikko&gt;     it simplifies your code hugely</div>
<div class="line">[Thursday 05 May 2011] [06:29:02] &lt;Bartzy|work&gt;       I don&#8217;t know.. I thought it would be a problem to respawn them</div>
<div class="line">[Thursday 05 May 2011] [06:29:53] &lt;mikko&gt;     it would be without the device</div>
<div class="line">[Thursday 05 May 2011] [06:30:05] &lt;mikko&gt;     but the device maintains the connections with your clients</div>
<div class="line">[Thursday 05 May 2011] [06:30:10] &lt;mikko&gt;     workers can come and go in the background</div>
<div class="line">[Thursday 05 May 2011] [06:30:37] &lt;Bartzy|work&gt;       But I guess if I kill them after a random number of requests (between the min and max request I want them to serve, so they won&#8217;t all die together), and then monit/supervisord would respawn a worker after X seconds when it&#8217;s dead... I assume it&#8217;s fine?</div>
<div class="line">[Thursday 05 May 2011] [06:30:51] &lt;Bartzy|work&gt;       Yeah, that&#8217;s smart... Like a job server</div>
<div class="line">[Thursday 05 May 2011] [06:31:42] &lt;Bartzy|work&gt;       and if I have 4 workers per machine. I have 2 machines. I want 1 request to go to 1 machine and the next to the 2nd machine.. I don&#8217;t want 4 subsequent request to go to the same machine, and only after that going to the 2nd one...</div>
<div class="line">[Thursday 05 May 2011] [06:32:18] &lt;Bartzy|work&gt;       How the device is dispatching work ? At the order that the workers connected to it, or in some random fashion ?</div>
<div class="line">[Thursday 05 May 2011] [06:33:13] &lt;sustrik&gt;   round-robin</div>
<div class="line">[Thursday 05 May 2011] [06:34:36] &lt;Bartzy|work&gt;       round-robin is a list (1st worker, 2nd worker, 3rd worker) and the counter just increments (1st job to 1st worker, 2nd to 2nd... etc)</div>
<div class="line">[Thursday 05 May 2011] [06:34:39] &lt;Bartzy|work&gt;       But how the list is built ?</div>
<div class="line">[Thursday 05 May 2011] [06:34:50] &lt;Bartzy|work&gt;       According to the time the &#8216;workers&#8217; connected to the device ?</div>
<div class="line">[Thursday 05 May 2011] [06:36:04] &lt;sustrik&gt;   it&#8217;s unspecified</div>
<div class="line">[Thursday 05 May 2011] [06:36:19] &lt;sustrik&gt;   in reality the order is established as peers connect</div>
<div class="line">[Thursday 05 May 2011] [06:36:35] &lt;sustrik&gt;   however it changes as they disconnect or reach HWMs</div>
<div class="line">[Thursday 05 May 2011] [06:38:07] &lt;Bartzy|work&gt;       so I shouldn&#8217;t worry about it ?</div>
<div class="line">[Thursday 05 May 2011] [06:38:37] &lt;mikko&gt;     the guide has examples for custom routing as well</div>
<div class="line">[Thursday 05 May 2011] [06:38:47] &lt;Bartzy|work&gt;       Cause if I have 2 actual machines, each running 4 workers, I don&#8217;t want 1 machine to fill up with 4 jobs and the other machine not doing anything. I would rather have it more load balanced... 1 job to the first machine, 2nd job to the 2nd machine...</div>
<div class="line">[Thursday 05 May 2011] [06:38:51] &lt;Bartzy|work&gt;       mikko: thanks.</div>
<div class="line">[Thursday 05 May 2011] [06:41:15] &lt;sustrik&gt;   so you have 8 connections to load-balance among</div>
<div class="line">[Thursday 05 May 2011] [06:41:37] &lt;sustrik&gt;   what happens is that messages are sent in this way: 1,2,3,4,5,6,7,8,1,2,3...</div>
<div class="line">[Thursday 05 May 2011] [06:42:02] &lt;sustrik&gt;   so you&#8217;ll have the tasks fairly balanced between the two machines</div>
<div class="line">[Thursday 05 May 2011] [06:42:15] &lt;Bartzy|work&gt;       yeah, but what if 1 2 3 4 connections are all in the same server ? That&#8217;s not good. it&#8217;s still load balancing but only if I have 8 jobs concurrently</div>
<div class="line">[Thursday 05 May 2011] [06:42:25] &lt;mikko&gt;     between machines it&#8217;s 1,2,1,2,1,2,1,2,</div>
<div class="line">[Thursday 05 May 2011] [06:42:38] &lt;mikko&gt;     and between workers in a machine its 1,2,3,4,1,2,3,4</div>
<div class="line">[Thursday 05 May 2011] [06:42:40] &lt;Bartzy|work&gt;       if I have only 4 jobs, and 1-4 connections are on the same machine, only 1 is loaded</div>
<div class="line">[Thursday 05 May 2011] [06:43:03] &lt;Bartzy|work&gt;       so I should have 2 devices ? one for the machines only, and one for the workers &#64; each machine ?</div>
<div class="line">[Thursday 05 May 2011] [06:43:04] &lt;sustrik&gt;   mikko: ah, there&#8217;s a device on each box?</div>
<div class="line">[Thursday 05 May 2011] [06:43:07] &lt;mikko&gt;     sustrik: yes</div>
<div class="line">[Thursday 05 May 2011] [06:43:14] &lt;sustrik&gt;   then yes</div>
<div class="line">[Thursday 05 May 2011] [06:43:19] &lt;mikko&gt;     Bartzy|work: each machine has a device</div>
<div class="line">[Thursday 05 May 2011] [06:43:29] &lt;mikko&gt;     you web scripts balance between 1,2,1,2,1,2</div>
<div class="line">[Thursday 05 May 2011] [06:43:45] &lt;mikko&gt;     and the devices round-robin between workers</div>
<div class="line">[Thursday 05 May 2011] [06:44:21] &lt;Bartzy|work&gt;       so I need a device to handle the 2 devices ?</div>
<div class="line">[Thursday 05 May 2011] [06:44:33] &lt;Bartzy|work&gt;       the web scripts need to connect to one device</div>
<div class="line">[Thursday 05 May 2011] [06:45:12] &lt;Bartzy|work&gt;       right ?</div>
<div class="line">[Thursday 05 May 2011] [06:46:33] &lt;mikko&gt;     sorry?</div>
<div class="line">[Thursday 05 May 2011] [06:46:41] &lt;mikko&gt;     &#8220;so I need a device to handle the 2 devices ?&#8221;</div>
<div class="line">[Thursday 05 May 2011] [06:46:50] &lt;mikko&gt;     you can start a device from php script</div>
<div class="line">[Thursday 05 May 2011] [06:47:10] &lt;mikko&gt;     the php script is just used to start the device, all the processing happens inside C code</div>
<div class="line">[Thursday 05 May 2011] [06:47:39] &lt;mikko&gt;     <a class="reference external" href="https://github.com/mkoppanen/php-zmq/blob/master/examples/forwarder-device.php">https://github.com/mkoppanen/php-zmq/blob/master/examples/forwarder-device.php</a></div>
<div class="line">[Thursday 05 May 2011] [06:47:45] &lt;mikko&gt;     there is an example of running a device</div>
<div class="line">[Thursday 05 May 2011] [06:52:57] &lt;Bartzy|work&gt;       mikko: OK. I understand that. My web scripts - They&#8217;re connecting to who ?</div>
<div class="line">[Thursday 05 May 2011] [06:54:57] &lt;mikko&gt;     Bartzy|work: to the device</div>
<div class="line">[Thursday 05 May 2011] [06:55:11] &lt;Bartzy|work&gt;       mikko: But I have 1 at each machine.</div>
<div class="line">[Thursday 05 May 2011] [06:58:19] &lt;Bartzy|work&gt;       To which of them my web scripts connect to ?</div>
<div class="line">[Thursday 05 May 2011] [07:05:33] &lt;mikko&gt;     both</div>
<div class="line">[Thursday 05 May 2011] [07:05:50] &lt;mikko&gt;     you can connect zeromq socket to multiple endpoints</div>
<div class="line">[Thursday 05 May 2011] [07:11:32] &lt;Bartzy|work&gt;       oh, that&#8217;s nice. So if I add more machines, I must add them in my web code too . correct ?</div>
<div class="line">[Thursday 05 May 2011] [07:15:19] &lt;sustrik&gt;   the web code is transient, right?</div>
<div class="line">[Thursday 05 May 2011] [07:15:31] &lt;sustrik&gt;   it opens a socket, sends a message and closes the socket?</div>
<div class="line">[Thursday 05 May 2011] [07:16:27] &lt;Bartzy|work&gt;       no, it needs to get a response back that the job has ended</div>
<div class="line">[Thursday 05 May 2011] [07:16:42] &lt;sustrik&gt;   but then it exits, right?</div>
<div class="line">[Thursday 05 May 2011] [07:16:47] &lt;Bartzy|work&gt;       yes</div>
<div class="line">[Thursday 05 May 2011] [07:16:57] &lt;sustrik&gt;   ok, so, you can run one device on the same box as webserver and make all the webscripts connect to that device</div>
<div class="line">[Thursday 05 May 2011] [07:17:10] &lt;Bartzy|work&gt;       but anyway , if it needs to connect to first_machine_ip:port and to second_machine_ip:port , if I add a 3rd and 4th and 20th machine, the web code needs to know about that...</div>
<div class="line">[Thursday 05 May 2011] [07:17:26] &lt;sustrik&gt;   that device in turn would connect to all devices on the worker boxes</div>
<div class="line">[Thursday 05 May 2011] [07:17:42] &lt;Bartzy|work&gt;       OK, and then when I add a machine, the script that opens the device on each web server needs to know about the IPs of each machine ?</div>
<div class="line">[Thursday 05 May 2011] [07:17:55] &lt;sustrik&gt;   yes</div>
<div class="line">[Thursday 05 May 2011] [07:18:04] &lt;sustrik&gt;   or, alternatively</div>
<div class="line">[Thursday 05 May 2011] [07:18:10] &lt;Bartzy|work&gt;       No way around it with some other pattern ?</div>
<div class="line">[Thursday 05 May 2011] [07:18:10] &lt;sustrik&gt;   you can do it other way round</div>
<div class="line">[Thursday 05 May 2011] [07:18:22] &lt;sustrik&gt;   the devices on the worker boxes can connect to the central device</div>
<div class="line">[Thursday 05 May 2011] [07:38:29] &lt;Bartzy|work&gt;       so I need a central device to sit somewhere</div>
<div class="line">[Thursday 05 May 2011] [07:38:51] &lt;Bartzy|work&gt;       sustrik: I can&#8217;t just send out to 1 of many, who ever is listening ?</div>
<div class="line">[Thursday 05 May 2011] [09:26:08] &lt;Guthur&gt;    I&#8217;m planning to use a queue device to develop a &#8216;test farm&#8217; where the workers are making a number of potential long running http requests, best case maybe ~7secs, I&#8217;m wondering is it reasonable to have a client socket per test case</div>
<div class="line">[Thursday 05 May 2011] [09:26:13] &lt;Guthur&gt;    or is there a better approach</div>
<div class="line">[Thursday 05 May 2011] [09:43:14] &lt;djc&gt;       pyzmq is segfaulting on me :(</div>
<div class="line">[Thursday 05 May 2011] [09:51:06] &lt;djc&gt;       okay, I think this is a buglet: in 2.1, I can&#8217;t connect a SUB to an inproc publisher before the publisher has bound to it</div>
<div class="line">[Thursday 05 May 2011] [09:51:09] &lt;djc&gt;       this worked in 2.0</div>
<div class="line">[Thursday 05 May 2011] [10:05:19] &lt;pieterh&gt;   djc: that didn&#8217;t work in 2.0, pretty sure of it</div>
<div class="line">[Thursday 05 May 2011] [10:05:39] &lt;pieterh&gt;   it&#8217;s a known issue with inproc sockets, in all versions of zmq</div>
<div class="line">[Thursday 05 May 2011] [10:07:12] &lt;djc&gt;       hmmm, it worked for me, although I guess some part of the timing setup could have changed between versions</div>
<div class="line">[Thursday 05 May 2011] [10:08:15] &lt;pieterh&gt;   yes, it&#8217;ll be timing related</div>
<div class="line">[Thursday 05 May 2011] [10:17:38] &lt;travlr&gt;    it just happened again.. doesn&#8217;t everbody already know that 0mq will make there  lives so much easier ;-}</div>
<div class="line">[Thursday 05 May 2011] [10:18:21] &lt;travlr&gt;    i&#8217;m watching FLOSS Weekly (<a class="reference external" href="http://twit.tv/floss164">http://twit.tv/floss164</a>) and he  should be usinig 0mq forsure!</div>
<div class="line">[Thursday 05 May 2011] [10:25:35] &lt;travlr&gt;    ha! he just mention 0mq, go figure.</div>
<div class="line">[Thursday 05 May 2011] [10:33:34] &lt;guido_g&gt;   <a class="reference external" href="http://www.infoq.com/presentations/Large-Scale-Integration-in-Financial-Services">http://www.infoq.com/presentations/Large-Scale-Integration-in-Financial-Services</a> &lt;- nice definition of guaranteed messaging and mentions a well known low-level open-source messaging product</div>
<div class="line">[Thursday 05 May 2011] [10:36:56] &lt;djc&gt;       btw, I got some numbers from what we have running here</div>
<div class="line">[Thursday 05 May 2011] [10:37:24] &lt;djc&gt;       apparently we push up to 8000 msg/s, with a msg on average being 150b</div>
<div class="line">[Thursday 05 May 2011] [10:37:31] &lt;djc&gt;       so it&#8217;s probably not that impressive</div>
<div class="line">[Thursday 05 May 2011] [10:44:01] &lt;Guthur&gt;    guido, that MPI thing?</div>
<div class="line">[Thursday 05 May 2011] [10:44:13] &lt;Guthur&gt;    AMQP</div>
<div class="line">[Thursday 05 May 2011] [10:44:21] &lt;guido_g&gt;   below amqp</div>
<div class="line">[Thursday 05 May 2011] [10:44:27] &lt;guido_g&gt;   on the chart</div>
<div class="line">[Thursday 05 May 2011] [10:44:37] &lt;guido_g&gt;   at minute 9 something</div>
<div class="line">[Thursday 05 May 2011] [10:46:19] &lt;Guthur&gt;    guido_g: hehe, I was trying to be facetious</div>
<div class="line">[Thursday 05 May 2011] [10:46:34] &lt;Guthur&gt;    it does have a question mark after it though, 0MQ?</div>
<div class="line">[Thursday 05 May 2011] [10:47:41] &lt;mile&gt;      is it legal to bind to a SUB socket?</div>
<div class="line">[Thursday 05 May 2011] [10:48:05] &lt;mile&gt;      I need a server listening on 2 sockets, one for each communication direction</div>
<div class="line">[Thursday 05 May 2011] [10:48:10] &lt;guido_g&gt;   Guthur: at least it&#8217;s mentioned</div>
<div class="line">[Thursday 05 May 2011] [10:48:29] &lt;mile&gt;      but I get assertion failed</div>
<div class="line">[Thursday 05 May 2011] [10:49:06] &lt;djc&gt;       mile: that sounds confused</div>
<div class="line">[Thursday 05 May 2011] [10:49:17] &lt;djc&gt;       listening on two sockets, for each direction?</div>
<div class="line">[Thursday 05 May 2011] [10:49:35] &lt;mile&gt;      I am forwarding messages from a web socket to the backend</div>
<div class="line">[Thursday 05 May 2011] [10:49:47] &lt;djc&gt;       generally in at least one of the possible directions you wouldn&#8217;t bind, you&#8217;d connect</div>
<div class="line">[Thursday 05 May 2011] [10:49:58] &lt;mile&gt;      so I need backend to connect to the gateway</div>
<div class="line">[Thursday 05 May 2011] [10:50:20] &lt;Guthur&gt;    guido_g: I just got and email there 20 mins ago from a colleague wanting to investigate using 0MQ for real-time flow in FX processing</div>
<div class="line">[Thursday 05 May 2011] [10:50:25] &lt;Guthur&gt;    Forex*</div>
<div class="line">[Thursday 05 May 2011] [10:50:26] &lt;mile&gt;      so gateway is binding on a PUB and on a SUB sockets</div>
<div class="line">[Thursday 05 May 2011] [10:50:37] &lt;mile&gt;      instead of SUB may be PULL</div>
<div class="line">[Thursday 05 May 2011] [10:50:43] &lt;mile&gt;      there I&#8217;m confused</div>
<div class="line">[Thursday 05 May 2011] [10:50:50] &lt;Guthur&gt;    I had placed on company wide cool tech page a couple of months ago</div>
<div class="line">[Thursday 05 May 2011] [10:51:18] &lt;djc&gt;       mile: you don&#8217;t &#8220;bind&#8221; on a SUB</div>
<div class="line">[Thursday 05 May 2011] [10:51:22] &lt;djc&gt;       you &#8220;connect&#8221; on a SUB</div>
<div class="line">[Thursday 05 May 2011] [10:51:27] &lt;djc&gt;       you &#8220;bind&#8221; on a PUB</div>
<div class="line">[Thursday 05 May 2011] [10:51:41] &lt;djc&gt;       if it&#8217;s the inverse thing of what you want to do, don&#8217;t use PUB/SUB</div>
<div class="line">[Thursday 05 May 2011] [10:51:46] &lt;guido_g&gt;   Guthur: would be nice to see something like that</div>
<div class="line">[Thursday 05 May 2011] [10:51:57] &lt;mile&gt;      djc, I need exatly the inverse :)</div>
<div class="line">[Thursday 05 May 2011] [10:52:11] &lt;djc&gt;       mile: so use PUSH/PULL</div>
<div class="line">[Thursday 05 May 2011] [10:52:22] &lt;mile&gt;      ah, thanks! :)</div>
<div class="line">[Thursday 05 May 2011] [10:57:42] &lt;pieterh&gt;   mile: you can bind a SUB and connect a PUB, it&#8217;s useful in some cases</div>
<div class="line">[Thursday 05 May 2011] [10:58:10] &lt;pieterh&gt;   imagine you have one stable subscriber and publishers that come and go</div>
<div class="line">[Thursday 05 May 2011] [10:58:22] &lt;pieterh&gt;   djc: sorry to correct you here</div>
<div class="line">[Thursday 05 May 2011] [10:58:24] &lt;mile&gt;      that is my scenario</div>
<div class="line">[Thursday 05 May 2011] [10:58:45] &lt;pieterh&gt;   push-pull and pub-sub do have different semantics</div>
<div class="line">[Thursday 05 May 2011] [10:58:58] &lt;djc&gt;       pieterh: that&#8217;s fine, that way I get to learn something</div>
<div class="line">[Thursday 05 May 2011] [10:58:58] &lt;mile&gt;      they do the load balancing?</div>
<div class="line">[Thursday 05 May 2011] [10:59:01] &lt;pieterh&gt;   the main difference is if you (accidentally or on purpose) plug in a second subscriber</div>
<div class="line">[Thursday 05 May 2011] [10:59:13] &lt;pieterh&gt;   with pubsub, each sub will still get each message</div>
<div class="line">[Thursday 05 May 2011] [10:59:22] &lt;pieterh&gt;   with pushpull, messages will be load balanced</div>
<div class="line">[Thursday 05 May 2011] [10:59:52] &lt;mile&gt;      so that is semantically the main difference between those two?</div>
<div class="line">[Thursday 05 May 2011] [10:59:55] &lt;pieterh&gt;   the bind/connect direction is independent from the data flow and the pattern</div>
<div class="line">[Thursday 05 May 2011] [11:00:01] &lt;pieterh&gt;   yes</div>
<div class="line">[Thursday 05 May 2011] [11:00:14] &lt;pieterh&gt;   the semantic difference is loadbalancing with pushpull, fanout with pubsub</div>
<div class="line">[Thursday 05 May 2011] [11:00:27] &lt;pieterh&gt;   there are <em>some</em> edge cases where the bind/connect direction makes a difference</div>
<div class="line">[Thursday 05 May 2011] [11:00:29] &lt;djc&gt;       pieterh: so could I also bind REQ and connect REP, for example?</div>
<div class="line">[Thursday 05 May 2011] [11:00:33] &lt;pieterh&gt;   djc: yes</div>
<div class="line">[Thursday 05 May 2011] [11:00:38] &lt;djc&gt;       ah, edge cases</div>
<div class="line">[Thursday 05 May 2011] [11:00:43] &lt;mile&gt;      :)</div>
<div class="line">[Thursday 05 May 2011] [11:00:46] &lt;pieterh&gt;   the reason we generally don&#8217;t do this is that it is confusing</div>
<div class="line">[Thursday 05 May 2011] [11:00:46] &lt;djc&gt;       tell me more about the edge cases ;)</div>
<div class="line">[Thursday 05 May 2011] [11:01:21] &lt;pieterh&gt;   djc: there was one issue reported on the list a while back, but I don&#8217;t recall the details</div>
<div class="line">[Thursday 05 May 2011] [11:01:28] &lt;pieterh&gt;   could have been HWM processing</div>
<div class="line">[Thursday 05 May 2011] [11:01:46] &lt;pieterh&gt;   it worked differently depending on which sides did the bind &amp; connect</div>
<div class="line">[Thursday 05 May 2011] [11:02:07] &lt;pieterh&gt;   that seems to be a bug, IMO, since formally the bind/connect direction should be irrelevant to message flow</div>
<div class="line">[Thursday 05 May 2011] [11:02:19] &lt;Guthur&gt;    guido_g: I&#8217;ll certainly try to help this guy realise his proof of concept</div>
<div class="line">[Thursday 05 May 2011] [11:04:54] &lt;guido_g&gt;   Guthur: good luck, i would be happy to have such a project :)</div>
<div class="line">[Thursday 05 May 2011] [13:15:24] &lt;cremes&gt;    i have a non-0mq question for the channel</div>
<div class="line">[Thursday 05 May 2011] [13:15:40] &lt;cremes&gt;    it seems like a lot of folks are using 0mq for market data dissemination for trading systems</div>
<div class="line">[Thursday 05 May 2011] [13:16:13] &lt;cremes&gt;    how do you solve the issue of delivering market data (tick level details) to a web-browser client?</div>
<div class="line">[Thursday 05 May 2011] [13:16:34] &lt;cremes&gt;    are you bridging 0mq to websockets, using flash, or something proprietary?</div>
<div class="line">[Thursday 05 May 2011] [13:20:03] &lt;guido_g&gt;   seems noone delivers the accumulated data :)</div>
<div class="line">[Thursday 05 May 2011] [13:22:30] &lt;pieterh&gt;   anyone want a PATCH socket? :-)</div>
<div class="line">[Thursday 05 May 2011] [13:22:38] &lt;pieterh&gt;   Like a PUB and PULL combined. Grab it athttp://zero.mq/patch.</div>
<div class="line">[Thursday 05 May 2011] [13:23:18] &lt;pieterh&gt;   cremes: the only sane way I know of (but no-one is contributing) is an HTTP bridge that turns 0MQ patterns into HTTP ones</div>
<div class="line">[Thursday 05 May 2011] [13:23:26] &lt;pieterh&gt;   at some point I&#8217;ll make the thing myself</div>
<div class="line">[Thursday 05 May 2011] [13:23:40] &lt;cremes&gt;    pieterh: interesting...</div>
<div class="line">[Thursday 05 May 2011] [13:23:40] &lt;pieterh&gt;   if you have a paying client who needs this, that&#8217;d be excellent of course</div>
<div class="line">[Thursday 05 May 2011] [13:23:58] &lt;cremes&gt;    of course! if there were such a client, it would be me</div>
<div class="line">[Thursday 05 May 2011] [13:24:10] &lt;pieterh&gt;   you can make HTTP patterns from the simple to the insanely complex</div>
<div class="line">[Thursday 05 May 2011] [13:24:15] &lt;cremes&gt;    i&#8217;m just doing some research in advance... i&#8217;m not going to get to it for several months at least</div>
<div class="line">[Thursday 05 May 2011] [13:24:23] &lt;pieterh&gt;   I&#8217;d do something RESTful with long polling, nothing more weird</div>
<div class="line">[Thursday 05 May 2011] [13:24:29] &lt;pieterh&gt;   doesn&#8217;t need websockets</div>
<div class="line">[Thursday 05 May 2011] [13:24:45] &lt;pieterh&gt;   does need a reasonably well built web server</div>
<div class="line">[Thursday 05 May 2011] [13:25:17] &lt;cremes&gt;    pieterh: updating FAQ now with steps for building 0mq on windows mingw</div>
<div class="line">[Thursday 05 May 2011] [13:25:23] &lt;cremes&gt;    how do i make the 0 with a slash in it?</div>
<div class="line">[Thursday 05 May 2011] [13:25:34] &lt;cremes&gt;    what&#8217;s the key combo?</div>
<div class="line">[Thursday 05 May 2011] [13:25:35] &lt;pieterh&gt;   cremes: you copy paste from somewhere else on the wiki :-)</div>
<div class="line">[Thursday 05 May 2011] [13:25:43] &lt;cremes&gt;    cheater</div>
<div class="line">[Thursday 05 May 2011] [13:25:56] &lt;pieterh&gt;   you can reprogram your keyboard if you&#8217;re smart</div>
<div class="line">[Thursday 05 May 2011] [13:26:22] &lt;cremes&gt;    clearly, i cannot do that ;)</div>
<div class="line">[Thursday 05 May 2011] [13:28:49] &lt;pieterh&gt;   me neither, I just copy/paste all the time...</div>
<div class="line">[Thursday 05 May 2011] [13:31:08] &lt;cremes&gt;    okay, FAQ updated with mingw instructions</div>
<div class="line">[Thursday 05 May 2011] [13:32:29] &lt;pieterh&gt;   nice</div>
<div class="line">[Thursday 05 May 2011] [13:32:44] &lt;pieterh&gt;   there&#8217;re also pages per platform afair</div>
<div class="line">[Thursday 05 May 2011] [13:36:51] &lt;cremes&gt;    pieterh: aren&#8217;t those pages for &#8220;tuning&#8221;?</div>
<div class="line">[Thursday 05 May 2011] [13:37:06]      * pieterh can&#8217;t find the platform pages any more...</div>
<div class="line">[Thursday 05 May 2011] [13:37:17] &lt;pieterh&gt;   there should be a page for Windows</div>
<div class="line">[Thursday 05 May 2011] [13:37:54] &lt;pieterh&gt;   I guess it&#8217;s this one: <a class="reference external" href="http://www.zeromq.org/docs:windows-installations">http://www.zeromq.org/docs:windows-installations</a></div>
<div class="line">[Thursday 05 May 2011] [13:38:42] &lt;pieterh&gt;   anyhow, the Search function immediately returns the FAQ page, so it&#8217;s all good...</div>
<div class="line">[Thursday 05 May 2011] [13:38:50]      * pieterh needs lunch, bbl</div>
<div class="line">[Thursday 05 May 2011] [15:27:52] &lt;Guthur&gt;    pieterh, the use of CLisp as the Common Lisp code link in the guide can cause a little confusion</div>
<div class="line">[Thursday 05 May 2011] [15:28:34] &lt;Guthur&gt;    CLisp is an implementation of Common Lisp and so can sometimes seem like it might use specific features of that implementation</div>
<div class="line">[Thursday 05 May 2011] [15:29:00] &lt;Guthur&gt;    it&#8217;s only a minor point, but a CL user today was making that assumption</div>
<div class="line">[Thursday 05 May 2011] [15:34:24] &lt;pieterh&gt;   Guthur: I didn&#8217;t know that</div>
<div class="line">[Thursday 05 May 2011] [15:35:02] &lt;pieterh&gt;   I shortened Common Lisp to CLisp for pragmatic reasons, didn&#8217;t realize it was a specific implementation</div>
<div class="line">[Thursday 05 May 2011] [15:35:48] &lt;pieterh&gt;   I&#8217;ll abbreviate it to CL then</div>
<div class="line">[Thursday 05 May 2011] [15:36:02] &lt;Guthur&gt;    pieterh, understandable</div>
<div class="line">[Thursday 05 May 2011] [15:36:04] &lt;Guthur&gt;    CL would be fine</div>
<div class="line">[Thursday 05 May 2011] [15:36:17] &lt;Guthur&gt;    clisp is the GNU implementation actually</div>
<div class="line">[Thursday 05 May 2011] [15:36:22] &lt;pieterh&gt;   ok</div>
<div class="line">[Thursday 05 May 2011] [15:38:24] &lt;pieterh&gt;   Guthur: ok, fixed, and new version published</div>
<div class="line">[Thursday 05 May 2011] [15:38:31] &lt;pieterh&gt;   sorry for the delay... :)</div>
<div class="line">[Thursday 05 May 2011] [15:43:37] &lt;Guthur&gt;    hehe, super service as usual</div>
<div class="line">[Thursday 05 May 2011] [16:38:50] &lt;QQ_Nick&gt;   Hi, I&#8217;m fairly new to 0mq but I&#8217;ve encountered a problem when using a PUSH/PULL pattern when using pyzmq.</div>
<div class="line">[Thursday 05 May 2011] [16:40:53] &lt;QQ_Nick&gt;   I&#8217;ve set a HWM on the Push side, and when no client is running this seems to work OK.</div>
<div class="line">[Thursday 05 May 2011] [16:42:14] &lt;QQ_Nick&gt;   But if I start a Pull client with a HWM (say set to 10), all messages from the server are immediately sent to the client</div>
<div class="line">[Thursday 05 May 2011] [16:47:23] &lt;djc&gt;       yes, so?</div>
<div class="line">[Thursday 05 May 2011] [16:54:00] &lt;QQ_Nick&gt;   The server sends 1000 messages to my client which has a HWM of 10 messages set.</div>
<div class="line">[Thursday 05 May 2011] [17:01:14] &lt;djc&gt;       yeah</div>
<div class="line">[Thursday 05 May 2011] [17:01:29] &lt;djc&gt;       this is how it works, the client will try to receive messages as fast as possible</div>
<div class="line">[Thursday 05 May 2011] [17:06:58] &lt;QQ_Nick&gt;   Does the HWM not limit the number of messages that the client queues? My client takes 1/20th second to process each message but still the server sends all 1000 messages to it immediately.</div>
<div class="line">[Thursday 05 May 2011] [17:27:55] &lt;mikko&gt;     sustrik: there?</div>
<div class="line">[Thursday 05 May 2011] [21:03:59] &lt;eyecue&gt;    hai</div>
<div class="line">[Thursday 05 May 2011] [21:12:54] &lt;mikko&gt;     hello</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="2011-April.html"
                        title="previous chapter">2011-April</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/2011-May.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="2011-April.html" title="2011-April"
             >previous</a> |</li>
        <li><a href="index.html">ZeroMq IRC Log v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Peter Alexander.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>