

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2011-March &mdash; ZeroMq IRC Log v0.1 documentation</title>
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="ZeroMq IRC Log v0.1 documentation" href="index.html" />
    <link rel="prev" title="2011-December" href="2011-December.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="2011-December.html" title="2011-December"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">ZeroMq IRC Log v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="march">
<h1>2011-March<a class="headerlink" href="#march" title="Permalink to this headline">Â¶</a></h1>
<div class="line-block">
<div class="line">[Friday 18 March 2011] [06:51:12] &lt;sustrik&gt;   oh well</div>
<div class="line">[Friday 18 March 2011] [06:51:41] &lt;sustrik&gt;   so it&#8217;s up to the rest of erlzmq community to drive the project forward</div>
<div class="line">[Friday 18 March 2011] [06:51:51] &lt;yrashk&gt;    yup</div>
<div class="line">[Friday 18 March 2011] [06:52:01] &lt;yrashk&gt;    but again</div>
<div class="line">[Friday 18 March 2011] [06:52:10] &lt;yrashk&gt;    erlzmq and erlzq2 can&#8217;t be merged by any means</div>
<div class="line">[Friday 18 March 2011] [06:52:15] &lt;yrashk&gt;    they are way too different</div>
<div class="line">[Friday 18 March 2011] [06:52:17] &lt;sustrik&gt;   yes, the codebase itself cannot be merged</div>
<div class="line">[Friday 18 March 2011] [06:52:25] &lt;yrashk&gt;    erlzmq2 won&#8217;t work with older Erlang VMs</div>
<div class="line">[Friday 18 March 2011] [06:52:30] &lt;yrashk&gt;    as it uses a new binding technique</div>
<div class="line">[Friday 18 March 2011] [06:52:30] &lt;sustrik&gt;   what could be merged is functionality</div>
<div class="line">[Friday 18 March 2011] [06:52:39] &lt;yrashk&gt;    I thiknk they are very close functionally</div>
<div class="line">[Friday 18 March 2011] [06:53:00] &lt;sustrik&gt;   close = equivalent?</div>
<div class="line">[Friday 18 March 2011] [06:53:00] &lt;yrashk&gt;    we don&#8217;t have an active mode (like saleyn had for the main erlzmq)</div>
<div class="line">[Friday 18 March 2011] [06:53:11] &lt;yrashk&gt;    APIs is not absolutely equivalent, no</div>
<div class="line">[Friday 18 March 2011] [06:53:22] &lt;yrashk&gt;    module names are different, app name is different</div>
<div class="line">[Friday 18 March 2011] [06:53:24] &lt;sustrik&gt;   the problem is that as long as there&#8217;s functionality missing, those using one binding</div>
<div class="line">[Friday 18 March 2011] [06:53:28] &lt;yrashk&gt;    some calls might look a little bit different</div>
<div class="line">[Friday 18 March 2011] [06:53:29] &lt;sustrik&gt;   cannot switch to anotherone</div>
<div class="line">[Friday 18 March 2011] [06:53:39] &lt;yrashk&gt;    I don&#8217;t think we have any functionality missing, really</div>
<div class="line">[Friday 18 March 2011] [06:53:52] &lt;yrashk&gt;    active mode was controversial anyway</div>
<div class="line">[Friday 18 March 2011] [06:54:01] &lt;yrashk&gt;    I think jugg opposed it a lot</div>
<div class="line">[Friday 18 March 2011] [06:54:14] &lt;sustrik&gt;   doesn&#8217;t it have to do with pushback?</div>
<div class="line">[Friday 18 March 2011] [06:54:27] &lt;sustrik&gt;   won&#8217;t passive mode just exhaust all the memory</div>
<div class="line">[Friday 18 March 2011] [06:54:34] &lt;sustrik&gt;   if sender is faster than receiver?</div>
<div class="line">[Friday 18 March 2011] [06:54:50] &lt;yrashk&gt;    well</div>
<div class="line">[Friday 18 March 2011] [06:55:00] &lt;yrashk&gt;    passive mode is pretty much reliant on the way 0mq works</div>
<div class="line">[Friday 18 March 2011] [06:55:34] &lt;yrashk&gt;    recv/poll</div>
<div class="line">[Friday 18 March 2011] [06:55:50] &lt;yrashk&gt;    there are certain issues why we haven&#8217;t implemented active mode yet</div>
<div class="line">[Friday 18 March 2011] [06:56:07] &lt;yrashk&gt;    we could have done a workaround.. but still not sure if it is worth it</div>
<div class="line">[Friday 18 March 2011] [06:56:22] &lt;yrashk&gt;    it probably is worth a try</div>
<div class="line">[Friday 18 March 2011] [06:56:23] &lt;sustrik&gt;   is there any other way to implement pushback?</div>
<div class="line">[Friday 18 March 2011] [06:56:34] &lt;yrashk&gt;    what od you mean by a pushback?</div>
<div class="line">[Friday 18 March 2011] [06:56:59] &lt;sustrik&gt;   meaning that when the receiving end is not able to keep up with the sender</div>
<div class="line">[Friday 18 March 2011] [06:57:05] &lt;sustrik&gt;   the sender gets blocked</div>
<div class="line">[Friday 18 March 2011] [06:57:19] &lt;sustrik&gt;   until the receiver catches up</div>
<div class="line">[Friday 18 March 2011] [06:57:23] &lt;yrashk&gt;    not sure how to do anything about this</div>
<div class="line">[Friday 18 March 2011] [06:57:36] &lt;sustrik&gt;   i think that was what active mode was for</div>
<div class="line">[Friday 18 March 2011] [06:57:37] &lt;yrashk&gt;    basically what we do is we just pass messages back to erlang</div>
<div class="line">[Friday 18 March 2011] [06:57:42] &lt;yrashk&gt;    either directly or as actual essages</div>
<div class="line">[Friday 18 March 2011] [06:58:03] &lt;yrashk&gt;    active mode is just something that does recv for you, basically</div>
<div class="line">[Friday 18 March 2011] [06:58:25] &lt;yrashk&gt;    so I am not sure</div>
<div class="line">[Friday 18 March 2011] [06:58:45] &lt;sustrik&gt;   the problem is that erlang stores the messages in erlang mailbox</div>
<div class="line">[Friday 18 March 2011] [06:58:50] &lt;yrashk&gt;    yep</div>
<div class="line">[Friday 18 March 2011] [06:58:51] &lt;sustrik&gt;   which grows indefinitely</div>
<div class="line">[Friday 18 March 2011] [06:58:57] &lt;yrashk&gt;    but we don&#8217;t send them unless you request</div>
<div class="line">[Friday 18 March 2011] [06:59:10] &lt;yrashk&gt;    active is what sends them regardless of whether you can keep up</div>
<div class="line">[Friday 18 March 2011] [06:59:16] &lt;yrashk&gt;    our recv() algo is simple</div>
<div class="line">[Friday 18 March 2011] [06:59:27] &lt;yrashk&gt;    1. recv noblock</div>
<div class="line">[Friday 18 March 2011] [06:59:31] &lt;yrashk&gt;    2. if there was something, return</div>
<div class="line">[Friday 18 March 2011] [06:59:40] &lt;yrashk&gt;    3. if not, let the reader thread poll it</div>
<div class="line">[Friday 18 March 2011] [06:59:51] &lt;sustrik&gt;   yes, that&#8217;s ok</div>
<div class="line">[Friday 18 March 2011] [06:59:52] &lt;yrashk&gt;    4. when something appears there, send a message to the original requesting process</div>
<div class="line">[Friday 18 March 2011] [06:59:58] &lt;sustrik&gt;   what about the sender side?</div>
<div class="line">[Friday 18 March 2011] [07:00:16] &lt;yrashk&gt;    sender just does send() and that&#8217;s it</div>
<div class="line">[Friday 18 March 2011] [07:00:27] &lt;sustrik&gt;   it blocks the thread?</div>
<div class="line">[Friday 18 March 2011] [07:00:38] &lt;yrashk&gt;    you mean the scheduler?</div>
<div class="line">[Friday 18 March 2011] [07:00:42] &lt;sustrik&gt;   then you can end up with deadlocked erlang VM</div>
<div class="line">[Friday 18 March 2011] [07:00:51] &lt;sustrik&gt;   i mean physicall thread</div>
<div class="line">[Friday 18 March 2011] [07:00:57] &lt;sustrik&gt;   from erlang&#8217;s thread pool</div>
<div class="line">[Friday 18 March 2011] [07:01:02] &lt;yrashk&gt;    if you don&#8217;t pass noblock, yes it will block the scheduler</div>
<div class="line">[Friday 18 March 2011] [07:01:08] &lt;yrashk&gt;    we don&#8217;t use erlang&#8217;s thead pool</div>
<div class="line">[Friday 18 March 2011] [07:01:20] &lt;yrashk&gt;    NIF calls block the scheduler</div>
<div class="line">[Friday 18 March 2011] [07:01:35] &lt;sustrik&gt;   i mean, erlang VM has to execute in an OS thread(s)</div>
<div class="line">[Friday 18 March 2011] [07:01:46] &lt;yrashk&gt;    so if zmq_send blocks, the VM is blocked (well, one cpu core is blocked, to be precise)</div>
<div class="line">[Friday 18 March 2011] [07:01:59] &lt;sustrik&gt;   exactly</div>
<div class="line">[Friday 18 March 2011] [07:02:00] &lt;yrashk&gt;    yes, erlang vm usually has # of schedulers equal to number of cores</div>
<div class="line">[Friday 18 March 2011] [07:02:08] &lt;sustrik&gt;   so, if there&#8217;s 1 CPU</div>
<div class="line">[Friday 18 March 2011] [07:02:20] &lt;yrashk&gt;    and 1 core?</div>
<div class="line">[Friday 18 March 2011] [07:02:27] &lt;sustrik&gt;   and you call invoke 0mq in a blocking way</div>
<div class="line">[Friday 18 March 2011] [07:02:41] &lt;sustrik&gt;   the whole OS process gets bloecked</div>
<div class="line">[Friday 18 March 2011] [07:02:43] &lt;yrashk&gt;    it will fuck up, yes</div>
<div class="line">[Friday 18 March 2011] [07:02:52] &lt;yrashk&gt;    we were thinking about non-blocking send()</div>
<div class="line">[Friday 18 March 2011] [07:02:58] &lt;yrashk&gt;    just haven&#8217;t done it yet</div>
<div class="line">[Friday 18 March 2011] [07:03:08] &lt;yrashk&gt;    there&#8217;s nothing that prevents us from doing it</div>
<div class="line">[Friday 18 March 2011] [07:03:30] &lt;sustrik&gt;   that would mean busy-looping and 100% CPU usage, no?</div>
<div class="line">[Friday 18 March 2011] [07:03:54] &lt;yrashk&gt;    nah</div>
<div class="line">[Friday 18 March 2011] [07:04:02] &lt;yrashk&gt;    we poll on internal inproc sockets</div>
<div class="line">[Friday 18 March 2011] [07:04:06] &lt;yrashk&gt;    for commands</div>
<div class="line">[Friday 18 March 2011] [07:04:13] &lt;yrashk&gt;    in the receiver thread</div>
<div class="line">[Friday 18 March 2011] [07:04:17] &lt;yrashk&gt;    which does async recv</div>
<div class="line">[Friday 18 March 2011] [07:04:37] &lt;yrashk&gt;    so we can do the same thing for send, pretty much</div>
<div class="line">[Friday 18 March 2011] [07:04:41] &lt;yrashk&gt;    may be even in the same thread</div>
<div class="line">[Friday 18 March 2011] [07:04:43] &lt;sustrik&gt;   aha</div>
<div class="line">[Friday 18 March 2011] [07:04:55] &lt;yrashk&gt;    no biggie</div>
<div class="line">[Friday 18 March 2011] [07:05:00] &lt;sustrik&gt;   that way the polling doesn&#8217;t block the erlang scheduler, right?</div>
<div class="line">[Friday 18 March 2011] [07:05:02] &lt;yrashk&gt;    will take probabyl an hour or two to implement</div>
<div class="line">[Friday 18 March 2011] [07:05:07] &lt;yrashk&gt;    it does not</div>
<div class="line">[Friday 18 March 2011] [07:05:10] &lt;yrashk&gt;    it never does</div>
<div class="line">[Friday 18 March 2011] [07:05:14] &lt;sustrik&gt;   nice</div>
<div class="line">[Friday 18 March 2011] [07:05:21] &lt;yrashk&gt;    it&#8217;s always in that second thread</div>
<div class="line">[Friday 18 March 2011] [07:05:27] &lt;yrashk&gt;    we have one thread per context</div>
<div class="line">[Friday 18 March 2011] [07:05:38] &lt;yrashk&gt;    which I guess is good enough</div>
<div class="line">[Friday 18 March 2011] [07:05:43] &lt;yrashk&gt;    originally I had a thread per socket</div>
<div class="line">[Friday 18 March 2011] [07:05:47] &lt;yrashk&gt;    and that was a tad nasty</div>
<div class="line">[Friday 18 March 2011] [07:05:56] &lt;yrashk&gt;    but evax refactored this nicely</div>
<div class="line">[Friday 18 March 2011] [07:06:05] &lt;sustrik&gt;   so erlang allows you to say &#8220;please invoke this code when this file descriptor becomes active&#8221;?</div>
<div class="line">[Friday 18 March 2011] [07:06:23] &lt;sustrik&gt;   and erlang scheduler will do that for you</div>
<div class="line">[Friday 18 March 2011] [07:06:28] &lt;yrashk&gt;    no, it&#8217;s all manual</div>
<div class="line">[Friday 18 March 2011] [07:06:41] &lt;yrashk&gt;    there&#8217;s some FD stuff in there, but not for NIFs afaik</div>
<div class="line">[Friday 18 March 2011] [07:06:59] &lt;yrashk&gt;    basically, when we poll in that thread</div>
<div class="line">[Friday 18 March 2011] [07:07:01] &lt;sustrik&gt;   the question is whether waiting for FD blocks the OS thread or not</div>
<div class="line">[Friday 18 March 2011] [07:07:16] &lt;yrashk&gt;    you mean zmq_poll?</div>
<div class="line">[Friday 18 March 2011] [07:07:22] &lt;sustrik&gt;   are you using zmq_poll?</div>
<div class="line">[Friday 18 March 2011] [07:07:24] &lt;yrashk&gt;    yes</div>
<div class="line">[Friday 18 March 2011] [07:07:33] &lt;sustrik&gt;   zmq_poll is blocking</div>
<div class="line">[Friday 18 March 2011] [07:07:38] &lt;yrashk&gt;    yes, and that&#8217;s fine</div>
<div class="line">[Friday 18 March 2011] [07:07:43] &lt;yrashk&gt;    because we&#8217;re in a separate thread</div>
<div class="line">[Friday 18 March 2011] [07:07:54] &lt;yrashk&gt;    which erlang has no idea about</div>
<div class="line">[Friday 18 March 2011] [07:07:55] &lt;sustrik&gt;   outside of erlang VM?</div>
<div class="line">[Friday 18 March 2011] [07:07:59] &lt;sustrik&gt;   i see</div>
<div class="line">[Friday 18 March 2011] [07:08:01] &lt;yrashk&gt;    well, it&#8217;s in the same process</div>
<div class="line">[Friday 18 March 2011] [07:08:11] &lt;yrashk&gt;    but it&#8217;s separate from the scheduler</div>
<div class="line">[Friday 18 March 2011] [07:08:24] &lt;yrashk&gt;    so all NIF calls are generally very short</div>
<div class="line">[Friday 18 March 2011] [07:08:35] &lt;sustrik&gt;   yep, that could work</div>
<div class="line">[Friday 18 March 2011] [07:08:35] &lt;yrashk&gt;    except for send() which might theoretically block</div>
<div class="line">[Friday 18 March 2011] [07:08:43] &lt;yrashk&gt;    but that&#8217;s something we can definitely fix</div>
<div class="line">[Friday 18 March 2011] [07:08:51] &lt;yrashk&gt;    I just never saw zmq_send() blocking</div>
<div class="line">[Friday 18 March 2011] [07:08:51] &lt;sustrik&gt;   but can be done in same way as recv()</div>
<div class="line">[Friday 18 March 2011] [07:08:54] &lt;yrashk&gt;    yes</div>
<div class="line">[Friday 18 March 2011] [07:08:55] &lt;yrashk&gt;    absolutely</div>
<div class="line">[Friday 18 March 2011] [07:09:01] &lt;sustrik&gt;   you get that for high loads</div>
<div class="line">[Friday 18 March 2011] [07:09:06] &lt;yrashk&gt;    like I said, it&#8217;s an easy change</div>
<div class="line">[Friday 18 March 2011] [07:09:13] &lt;yrashk&gt;    since we have worked out the approach</div>
<div class="line">[Friday 18 March 2011] [07:09:20] &lt;sustrik&gt;   would be good to get that in</div>
<div class="line">[Friday 18 March 2011] [07:09:27] &lt;sustrik&gt;   it&#8217;s essential for some applications</div>
<div class="line">[Friday 18 March 2011] [07:09:31] &lt;yrashk&gt;    I see</div>
<div class="line">[Friday 18 March 2011] [07:09:35] &lt;sustrik&gt;   such as rabbitmq/0mq bridge</div>
<div class="line">[Friday 18 March 2011] [07:09:37] &lt;yrashk&gt;    I am adding a github issue right now</div>
<div class="line">[Friday 18 March 2011] [07:10:17] &lt;yrashk&gt;    <a class="reference external" href="https://github.com/zeromq/erlzmq2/issues/1">https://github.com/zeromq/erlzmq2/issues/1</a></div>
<div class="line">[Friday 18 March 2011] [07:10:21] &lt;sustrik&gt;   :)</div>
<div class="line">[Friday 18 March 2011] [07:10:41] &lt;sustrik&gt;   what about the third erlzmq binding?</div>
<div class="line">[Friday 18 March 2011] [07:10:48] &lt;sustrik&gt;   any additional functionality there?</div>
<div class="line">[Friday 18 March 2011] [07:11:16] &lt;yrashk&gt;    cstar/jugg&#8217;s?</div>
<div class="line">[Friday 18 March 2011] [07:11:21] &lt;sustrik&gt;   i guess</div>
<div class="line">[Friday 18 March 2011] [07:11:30] &lt;yrashk&gt;    I don&#8217;t remember any special functionality there</div>
<div class="line">[Friday 18 March 2011] [07:11:37] &lt;yrashk&gt;    it looked more polished than the official one</div>
<div class="line">[Friday 18 March 2011] [07:11:41] &lt;yrashk&gt;    to my eye</div>
<div class="line">[Friday 18 March 2011] [07:11:55] &lt;yrashk&gt;    so I guess it&#8217;s good for older erlangs</div>
<div class="line">[Friday 18 March 2011] [07:12:11] &lt;sustrik&gt;   aha, that&#8217;s the catch, right?</div>
<div class="line">[Friday 18 March 2011] [07:12:11] &lt;yrashk&gt;    or if you have any reasons to use port driver instead of NIF</div>
<div class="line">[Friday 18 March 2011] [07:12:16] &lt;sustrik&gt;   old arlangs don&#8217;t have NIF</div>
<div class="line">[Friday 18 March 2011] [07:12:19] &lt;yrashk&gt;    yeah they don&#8217;t</div>
<div class="line">[Friday 18 March 2011] [07:12:42] &lt;sustrik&gt;   well, if you believe there&#8217;s all the functionality in erlzmq2</div>
<div class="line">[Friday 18 March 2011] [07:12:44] &lt;yrashk&gt;    and some of those have (like last R13Bs and early R14As) but the API was changing a lot</div>
<div class="line">[Friday 18 March 2011] [07:12:58] &lt;yrashk&gt;    so we&#8217;re pretty much &gt;=R14B01 or so</div>
<div class="line">[Friday 18 March 2011] [07:13:12] &lt;sustrik&gt;   let&#8217;s discuss making it a primary erlang binding on the mailing list</div>
<div class="line">[Friday 18 March 2011] [07:13:22] &lt;yrashk&gt;    also, jugg was never able to clock performance comparable to erlzmq2</div>
<div class="line">[Friday 18 March 2011] [07:13:29] &lt;sustrik&gt;   yes, i recall that</div>
<div class="line">[Friday 18 March 2011] [07:13:30] &lt;yrashk&gt;    lets do that</div>
<div class="line">[Friday 18 March 2011] [07:13:37] &lt;yrashk&gt;    we have like 1.3mln/sec for 1bytes</div>
<div class="line">[Friday 18 March 2011] [07:13:41] &lt;yrashk&gt;    which is not bad</div>
<div class="line">[Friday 18 March 2011] [07:13:46] &lt;yrashk&gt;    not great, but decent</div>
<div class="line">[Friday 18 March 2011] [07:13:51] &lt;sustrik&gt;   it&#8217;s very nice</div>
<div class="line">[Friday 18 March 2011] [07:13:55] &lt;yrashk&gt;    (on my mac pro)</div>
<div class="line">[Friday 18 March 2011] [07:13:58] &lt;sustrik&gt;   comparable to other non-C languages</div>
<div class="line">[Friday 18 March 2011] [07:14:02] &lt;yrashk&gt;    c-to-c on my mac pro is like twice as fast</div>
<div class="line">[Friday 18 March 2011] [07:14:23] &lt;yrashk&gt;    2.5+mln/sec</div>
<div class="line">[Friday 18 March 2011] [07:14:31] &lt;yrashk&gt;    but we weren&#8217;t able to squeeze out more yet</div>
<div class="line">[Friday 18 March 2011] [07:14:36] &lt;yrashk&gt;    and I am not sure we can</div>
<div class="line">[Friday 18 March 2011] [07:14:56] &lt;sustrik&gt;   you have to keep in mind that erlang runtime does a lot of stuff</div>
<div class="line">[Friday 18 March 2011] [07:15:00] &lt;sustrik&gt;   scheduling etc.</div>
<div class="line">[Friday 18 March 2011] [07:15:08] &lt;sustrik&gt;   which takes some time itself</div>
<div class="line">[Friday 18 March 2011] [07:15:17] &lt;yrashk&gt;    of course</div>
<div class="line">[Friday 18 March 2011] [07:15:28] &lt;yrashk&gt;    I know erlang fairly well</div>
<div class="line">[Friday 18 March 2011] [07:15:31] &lt;yrashk&gt;    or so I think</div>
<div class="line">[Friday 18 March 2011] [07:15:37] &lt;sustrik&gt;   with throughput over 1M/sec</div>
<div class="line">[Friday 18 March 2011] [07:15:46] &lt;sustrik&gt;   you are getting to nanosecond ranges</div>
<div class="line">[Friday 18 March 2011] [07:15:53] &lt;yrashk&gt;    well that&#8217;s for 1bytes</div>
<div class="line">[Friday 18 March 2011] [07:15:59] &lt;yrashk&gt;    1Kb is like 300K/sec</div>
<div class="line">[Friday 18 March 2011] [07:16:13] &lt;yrashk&gt;    which is still okay I guess</div>
<div class="line">[Friday 18 March 2011] [07:16:22] &lt;sustrik&gt;   100% bandwidth utilisation i would guess</div>
<div class="line">[Friday 18 March 2011] [07:16:28] &lt;sustrik&gt;   1GbE?</div>
<div class="line">[Friday 18 March 2011] [07:16:36] &lt;yrashk&gt;    it&#8217;s all localhost tests :)</div>
<div class="line">[Friday 18 March 2011] [07:16:57] &lt;yrashk&gt;    both for c-to-c and erlang-to-erlang</div>
<div class="line">[Friday 18 March 2011] [07:17:04] &lt;sustrik&gt;   ack</div>
<div class="line">[Friday 18 March 2011] [07:17:07] &lt;yrashk&gt;    for comparison</div>
<div class="line">[Friday 18 March 2011] [07:17:11] &lt;yrashk&gt;    tcp transport</div>
<div class="line">[Friday 18 March 2011] [07:17:14] &lt;sustrik&gt;   the larger the message, the less the erlang overhead</div>
<div class="line">[Friday 18 March 2011] [07:17:16] &lt;yrashk&gt;    ipc was about the same</div>
<div class="line">[Friday 18 March 2011] [07:17:41] &lt;sustrik&gt;   anyway, 1.3M is great</div>
<div class="line">[Friday 18 March 2011] [07:18:30]      * yrashk performs a happy dance</div>
<div class="line">[Friday 18 March 2011] [07:19:11] &lt;yrashk&gt;    anyway</div>
<div class="line">[Friday 18 March 2011] [07:19:18] &lt;yrashk&gt;    lets discuss binding issue on the mailing list?</div>
<div class="line">[Friday 18 March 2011] [07:19:28] &lt;yrashk&gt;    I am subscribed (digest mode)</div>
<div class="line">[Friday 18 March 2011] [07:19:59] &lt;yrashk&gt;    will be back in about 30 mins</div>
<div class="line">[Friday 18 March 2011] [07:21:22] &lt;sustrik&gt;   yrashk: yes, send the proposal to the mailing listr</div>
<div class="line">[Friday 18 March 2011] [07:27:32] &lt;Guthur&gt;    talking of bindings, sustrik do you think it would be wise to discuss marking clrzmq as deprecated and that users should consider either the interop binding or clrzmq2</div>
<div class="line">[Friday 18 March 2011] [07:27:52] &lt;Guthur&gt;    the rational being that the original binding isn&#8217;t really actively developed</div>
<div class="line">[Friday 18 March 2011] [07:28:10] &lt;sustrik&gt;   it&#8217;s a community project, discuss it on the mailing list</div>
<div class="line">[Friday 18 March 2011] [07:28:14] &lt;Guthur&gt;    sure</div>
<div class="line">[Friday 18 March 2011] [07:28:19] &lt;sustrik&gt;   and if there&#8217;s no opposition, let&#8217;s do it</div>
<div class="line">[Friday 18 March 2011] [07:28:22] &lt;Guthur&gt;    just interested in what you think</div>
<div class="line">[Friday 18 March 2011] [07:28:45] &lt;sustrik&gt;   i would rather have actively maintained bindings as &#8220;official&#8221; :)</div>
<div class="line">[Friday 18 March 2011] [07:28:49] &lt;Guthur&gt;    ok, I&#8217;m raise it on the list later today</div>
<div class="line">[Friday 18 March 2011] [07:48:26] &lt;<a href="#id70"><span class="problematic" id="id71">pieterh_</span></a>&gt;  sustrik: ping</div>
<div class="line">[Friday 18 March 2011] [07:48:32] &lt;sustrik&gt;   pong</div>
<div class="line">[Friday 18 March 2011] [07:48:41] &lt;<a href="#id72"><span class="problematic" id="id73">pieterh_</span></a>&gt;  random question about pub/sub...</div>
<div class="line">[Friday 18 March 2011] [07:48:54] &lt;<a href="#id74"><span class="problematic" id="id75">pieterh_</span></a>&gt;  if I send a two-frame message, first key then value, I expect to receive two frames, right?</div>
<div class="line">[Friday 18 March 2011] [07:49:09] &lt;sustrik&gt;   yes</div>
<div class="line">[Friday 18 March 2011] [07:49:26] &lt;<a href="#id76"><span class="problematic" id="id77">pieterh_</span></a>&gt;  ok, I have a test case where it appears to sometimes fail at connection startup</div>
<div class="line">[Friday 18 March 2011] [07:49:39] &lt;<a href="#id78"><span class="problematic" id="id79">pieterh_</span></a>&gt;  loses first frame, sometimes</div>
<div class="line">[Friday 18 March 2011] [07:49:40] &lt;<a href="#id80"><span class="problematic" id="id81">pieterh_</span></a>&gt;  i</div>
<div class="line">[Friday 18 March 2011] [07:49:43] &lt;sustrik&gt;   ok</div>
<div class="line">[Friday 18 March 2011] [07:49:50] &lt;<a href="#id82"><span class="problematic" id="id83">pieterh_</span></a>&gt;  I&#8217;ll post the server and client, hang on...</div>
<div class="line">[Friday 18 March 2011] [07:50:45] &lt;Guthur&gt;    <a href="#id84"><span class="problematic" id="id85">pieterh_</span></a>: with your lazy pirate patterns did you notice that reconnecting after CPU overload rarely happened?</div>
<div class="line">[Friday 18 March 2011] [07:51:20] &lt;Guthur&gt;    I&#8217;ve noticed this behaviour, even with the C examples</div>
<div class="line">[Friday 18 March 2011] [07:51:24] &lt;<a href="#id86"><span class="problematic" id="id87">pieterh_</span></a>&gt;  Guthur: what do you mean?</div>
<div class="line">[Friday 18 March 2011] [07:51:29] &lt;<a href="#id88"><span class="problematic" id="id89">pieterh_</span></a>&gt;  the client doesn&#8217;t reconnect?</div>
<div class="line">[Friday 18 March 2011] [07:51:46] &lt;Guthur&gt;    yeah, it tries and thinks the server is not there</div>
<div class="line">[Friday 18 March 2011] [07:51:50] &lt;<a href="#id90"><span class="problematic" id="id91">pieterh_</span></a>&gt;  normal, because its timeouts are quite aggressive, and simulation of CPU overload is quite a long pause afair</div>
<div class="line">[Friday 18 March 2011] [07:51:54] &lt;Guthur&gt;    if I remove the 1sec sleep it connects</div>
<div class="line">[Friday 18 March 2011] [07:52:05] &lt;<a href="#id92"><span class="problematic" id="id93">pieterh_</span></a>&gt;  try making the client more patient...</div>
<div class="line">[Friday 18 March 2011] [07:52:11] &lt;Guthur&gt;    1sec (heavy work)</div>
<div class="line">[Friday 18 March 2011] [07:52:15] &lt;<a href="#id94"><span class="problematic" id="id95">pieterh_</span></a>&gt;  i&#8217;ll retest, hang on a sec...</div>
<div class="line">[Friday 18 March 2011] [07:53:10] &lt;<a href="#id96"><span class="problematic" id="id97">pieterh_</span></a>&gt;  sustrik: so, <a class="reference external" href="https://gist.github.com/875932">https://gist.github.com/875932</a></div>
<div class="line">[Friday 18 March 2011] [07:53:16] &lt;<a href="#id98"><span class="problematic" id="id99">pieterh_</span></a>&gt;  start the server, then the client</div>
<div class="line">[Friday 18 March 2011] [07:53:25] &lt;sustrik&gt;   ok, will give it a look</div>
<div class="line">[Friday 18 March 2011] [07:53:44] &lt;<a href="#id100"><span class="problematic" id="id101">pieterh_</span></a>&gt;  thanks, this is hitting one of my examples and I can&#8217;t see my fault</div>
<div class="line">[Friday 18 March 2011] [07:53:53] &lt;<a href="#id102"><span class="problematic" id="id103">pieterh_</span></a>&gt;  so made a simplistic case, it still hits...</div>
<div class="line">[Friday 18 March 2011] [07:58:07] &lt;<a href="#id104"><span class="problematic" id="id105">pieterh_</span></a>&gt;  Guthur: it&#8217;s just because the client is too impatient</div>
<div class="line">[Friday 18 March 2011] [07:59:03] &lt;Guthur&gt;    <a href="#id106"><span class="problematic" id="id107">pieterh_</span></a>: ok, cheers for testing</div>
<div class="line">[Friday 18 March 2011] [07:59:50] &lt;<a href="#id108"><span class="problematic" id="id109">pieterh_</span></a>&gt;  Guthur: I&#8217;ll change the &#8216;CPU overload&#8217; delay to 2 seconds instead of 5</div>
<div class="line">[Friday 18 March 2011] [07:59:57] &lt;<a href="#id110"><span class="problematic" id="id111">pieterh_</span></a>&gt;  this lets the client recover</div>
<div class="line">[Friday 18 March 2011] [08:00:09] &lt;Guthur&gt;    sounds good</div>
<div class="line">[Friday 18 March 2011] [08:01:02] &lt;yrashk&gt;    sustrik: what exactly should be in that proposal?</div>
<div class="line">[Friday 18 March 2011] [08:01:08] &lt;Guthur&gt;    it had me scratching my head for a while yesterday, for a moment I thought the Mono runtime was just insanely slow</div>
<div class="line">[Friday 18 March 2011] [08:01:18] &lt;Guthur&gt;    but then seen the same in C</div>
<div class="line">[Friday 18 March 2011] [08:02:18] &lt;<a href="#id112"><span class="problematic" id="id113">pieterh_</span></a>&gt;  yeah, it&#8217;s good to be able to compare the different languages</div>
<div class="line">[Friday 18 March 2011] [08:02:19] &lt;sustrik&gt;   yrashk: &#8220;i propose making erlzmq2 an official erlang binding while keeping erlzmq as a binding for old versions of erlang&#8221;</div>
<div class="line">[Friday 18 March 2011] [08:02:25] &lt;sustrik&gt;   then list your arguments</div>
<div class="line">[Friday 18 March 2011] [08:02:28] &lt;yrashk&gt;    ok</div>
<div class="line">[Friday 18 March 2011] [08:02:29] &lt;sustrik&gt;   and ask people to comment</div>
<div class="line">[Friday 18 March 2011] [08:02:36] &lt;<a href="#id114"><span class="problematic" id="id115">pieterh_</span></a>&gt;  sustrik: I think that was already agreed...</div>
<div class="line">[Friday 18 March 2011] [08:02:46] &lt;yrashk&gt;    can I refer to you as it was your idea?</div>
<div class="line">[Friday 18 March 2011] [08:02:51] &lt;<a href="#id116"><span class="problematic" id="id117">pieterh_</span></a>&gt;  so erlzmq kind of became v1</div>
<div class="line">[Friday 18 March 2011] [08:03:01] &lt;sustrik&gt;   did it?</div>
<div class="line">[Friday 18 March 2011] [08:03:04] &lt;yrashk&gt;    wel</div>
<div class="line">[Friday 18 March 2011] [08:03:05] &lt;yrashk&gt;    well</div>
<div class="line">[Friday 18 March 2011] [08:03:05] &lt;<a href="#id118"><span class="problematic" id="id119">pieterh_</span></a>&gt;  yrashk: I missed something, why are you asking for people to comment on this?</div>
<div class="line">[Friday 18 March 2011] [08:03:09] &lt;yrashk&gt;    ont the wiki, eys</div>
<div class="line">[Friday 18 March 2011] [08:03:16] &lt;yrashk&gt;    <a href="#id120"><span class="problematic" id="id121">pieterh_</span></a>: I am not, sustrik does</div>
<div class="line">[Friday 18 March 2011] [08:03:41] &lt;<a href="#id122"><span class="problematic" id="id123">pieterh_</span></a>&gt;  sustrik: we already afaik got agreement from the erlzmq authors to make v2</div>
<div class="line">[Friday 18 March 2011] [08:03:52] &lt;yrashk&gt;    <a href="#id124"><span class="problematic" id="id125">pieterh_</span></a>: just one of them</div>
<div class="line">[Friday 18 March 2011] [08:04:01] &lt;<a href="#id126"><span class="problematic" id="id127">pieterh_</span></a>&gt;  yrashk: ah... did you ask the others?</div>
<div class="line">[Friday 18 March 2011] [08:04:03] &lt;yrashk&gt;    <a href="#id128"><span class="problematic" id="id129">pieterh_</span></a>: saleyn is unable to answer for some sad reasons</div>
<div class="line">[Friday 18 March 2011] [08:04:10] &lt;<a href="#id130"><span class="problematic" id="id131">pieterh_</span></a>&gt;  ok</div>
<div class="line">[Friday 18 March 2011] [08:04:26] &lt;sustrik&gt;   if it was discussed already, then there&#8217;s no point in discussing it anew</div>
<div class="line">[Friday 18 March 2011] [08:04:31] &lt;<a href="#id132"><span class="problematic" id="id133">pieterh_</span></a>&gt;  indeed</div>
<div class="line">[Friday 18 March 2011] [08:04:34] &lt;yrashk&gt;    ok</div>
<div class="line">[Friday 18 March 2011] [08:04:35] &lt;sustrik&gt;   i just missed the original discussion</div>
<div class="line">[Friday 18 March 2011] [08:04:39] &lt;yrashk&gt;    ya it was discussed here</div>
<div class="line">[Friday 18 March 2011] [08:04:51] &lt;<a href="#id134"><span class="problematic" id="id135">pieterh_</span></a>&gt;  it&#8217;s already an official repository, and the name was made coherent, the wiki correct, etc.</div>
<div class="line">[Friday 18 March 2011] [08:05:08] &lt;sustrik&gt;   then there&#8217;s no problem</div>
<div class="line">[Friday 18 March 2011] [08:05:14] &lt;yrashk&gt;    sweet</div>
<div class="line">[Friday 18 March 2011] [08:05:17] &lt;yrashk&gt;    less work for me then</div>
<div class="line">[Friday 18 March 2011] [08:05:23] &lt;yrashk&gt;    we&#8217;ll then improve send() some time later</div>
<div class="line">[Friday 18 March 2011] [08:05:26] &lt;<a href="#id136"><span class="problematic" id="id137">pieterh_</span></a>&gt;  given that it&#8217;s much faster and sticks to the same API, there was no real argument...</div>
<div class="line">[Friday 18 March 2011] [08:05:35] &lt;sustrik&gt;   i see</div>
<div class="line">[Friday 18 March 2011] [08:05:38] &lt;yrashk&gt;    to make it behave better on blocking sends</div>
<div class="line">[Friday 18 March 2011] [08:05:38] &lt;evax&gt;      yrashk, sustrik: doing it now</div>
<div class="line">[Friday 18 March 2011] [08:05:45] &lt;yrashk&gt;    evax: oh the issue #1?</div>
<div class="line">[Friday 18 March 2011] [08:05:50] &lt;evax&gt;      yes</div>
<div class="line">[Friday 18 March 2011] [08:06:01] &lt;yrashk&gt;    evax: I bet it should be easy to replicate the same method as we do with recv</div>
<div class="line">[Friday 18 March 2011] [08:06:05] &lt;yrashk&gt;    may be even the same thread</div>
<div class="line">[Friday 18 March 2011] [08:06:28] &lt;evax&gt;      same thread, yes</div>
<div class="line">[Friday 18 March 2011] [08:06:32] &lt;yrashk&gt;    sweet</div>
<div class="line">[Friday 18 March 2011] [08:06:47] &lt;yrashk&gt;    should be fairly trivial then</div>
<div class="line">[Friday 18 March 2011] [08:06:56] &lt;yrashk&gt;    just adding an enum flag to recv structure</div>
<div class="line">[Friday 18 March 2011] [08:07:07] &lt;yrashk&gt;    and renaming recv structure to something like command or someting</div>
<div class="line">[Friday 18 March 2011] [08:07:16] &lt;yrashk&gt;    also, evax</div>
<div class="line">[Friday 18 March 2011] [08:07:22] &lt;evax&gt;      yes, along those lines</div>
<div class="line">[Friday 18 March 2011] [08:07:24] &lt;yrashk&gt;    do you plan to do exactly the same scheme?</div>
<div class="line">[Friday 18 March 2011] [08:07:26] &lt;yrashk&gt;    i.e.</div>
<div class="line">[Friday 18 March 2011] [08:07:30] &lt;yrashk&gt;    recv noblock first</div>
<div class="line">[Friday 18 March 2011] [08:07:33] &lt;evax&gt;      sure</div>
<div class="line">[Friday 18 March 2011] [08:07:35] &lt;yrashk&gt;    err</div>
<div class="line">[Friday 18 March 2011] [08:07:37] &lt;yrashk&gt;    send*</div>
<div class="line">[Friday 18 March 2011] [08:07:41] &lt;yrashk&gt;    if it says EAGAIN</div>
<div class="line">[Friday 18 March 2011] [08:07:43] &lt;yrashk&gt;    then pool it</div>
<div class="line">[Friday 18 March 2011] [08:07:56] &lt;evax&gt;      shouldn&#8217;t I ?</div>
<div class="line">[Friday 18 March 2011] [08:08:04] &lt;yrashk&gt;    so that we don&#8217;t pool when it is unnecessary</div>
<div class="line">[Friday 18 March 2011] [08:08:10] &lt;yrashk&gt;    I think it&#8217;s a good approach</div>
<div class="line">[Friday 18 March 2011] [08:08:22] &lt;yrashk&gt;    zmq_send(.., ZMQ_NOBLOCK) -&gt; if EGAGAIN, pool</div>
<div class="line">[Friday 18 March 2011] [08:08:27] &lt;yrashk&gt;    otherwise, be done with it</div>
<div class="line">[Friday 18 March 2011] [08:08:30] &lt;yrashk&gt;    EAGAIN*</div>
<div class="line">[Friday 18 March 2011] [08:08:49] &lt;yrashk&gt;    that looks really very much the same way recv does</div>
<div class="line">[Friday 18 March 2011] [08:11:21] &lt;evax&gt;      except we have to store the msg somewhere</div>
<div class="line">[Friday 18 March 2011] [08:12:17] &lt;yrashk&gt;    in the same struct</div>
<div class="line">[Friday 18 March 2011] [08:12:25] &lt;yrashk&gt;    recv, but renamed</div>
<div class="line">[Friday 18 March 2011] [08:12:35] &lt;yrashk&gt;    and extended accordingly</div>
<div class="line">[Friday 18 March 2011] [08:12:57] &lt;evax&gt;      this goes over the ipc socket, so for big messages its ugly</div>
<div class="line">[Friday 18 March 2011] [08:13:01] &lt;yrashk&gt;    just copy the zms_msg</div>
<div class="line">[Friday 18 March 2011] [08:13:07] &lt;yrashk&gt;    it is</div>
<div class="line">[Friday 18 March 2011] [08:13:13] &lt;yrashk&gt;    but its not ipc</div>
<div class="line">[Friday 18 March 2011] [08:13:16] &lt;yrashk&gt;    inproc</div>
<div class="line">[Friday 18 March 2011] [08:13:21] &lt;evax&gt;      yeah</div>
<div class="line">[Friday 18 March 2011] [08:13:24] &lt;yrashk&gt;    we just pass a pointer</div>
<div class="line">[Friday 18 March 2011] [08:13:31] &lt;yrashk&gt;    how about that?</div>
<div class="line">[Friday 18 March 2011] [08:13:59] &lt;yrashk&gt;    and then zmq_msg_close it when done sending it in a loop</div>
<div class="line">[Friday 18 March 2011] [08:14:23] &lt;yrashk&gt;    theres more important problem</div>
<div class="line">[Friday 18 March 2011] [08:14:33] &lt;yrashk&gt;    in that thread we poll</div>
<div class="line">[Friday 18 March 2011] [08:14:47] &lt;yrashk&gt;    but if we do the blocking send there</div>
<div class="line">[Friday 18 March 2011] [08:15:09] &lt;yrashk&gt;    then receivers will get blocked untill the send is over</div>
<div class="line">[Friday 18 March 2011] [08:15:12] &lt;yrashk&gt;    mhm</div>
<div class="line">[Friday 18 March 2011] [08:15:18] &lt;evax&gt;      reading zmq.h shouldn&#8217;t be a problem to pass the msg in, ideed</div>
<div class="line">[Friday 18 March 2011] [08:15:39] &lt;yrashk&gt;    yeah, so pointer in that struct for msg is cool</div>
<div class="line">[Friday 18 March 2011] [08:15:50] &lt;yrashk&gt;    but this problem above bothers me</div>
<div class="line">[Friday 18 March 2011] [08:15:53] &lt;yrashk&gt;    not nice</div>
<div class="line">[Friday 18 March 2011] [08:16:50] &lt;yrashk&gt;    also separate sending thread isnt solving this completely</div>
<div class="line">[Friday 18 March 2011] [08:17:02] &lt;yrashk&gt;    it will help us from blocking poller</div>
<div class="line">[Friday 18 March 2011] [08:17:23] &lt;yrashk&gt;    but it will not b able to send more than one thing at a time</div>
<div class="line">[Friday 18 March 2011] [08:17:33] &lt;yrashk&gt;    since sending is blocked</div>
<div class="line">[Friday 18 March 2011] [08:17:44] &lt;yrashk&gt;    if only we had a reverse poll</div>
<div class="line">[Friday 18 March 2011] [08:17:47] &lt;yrashk&gt;    wait</div>
<div class="line">[Friday 18 March 2011] [08:18:00] &lt;yrashk&gt;    dont we have that kind of event in poll?</div>
<div class="line">[Friday 18 March 2011] [08:18:08] &lt;evax&gt;      it has to be in the same thread</div>
<div class="line">[Friday 18 March 2011] [08:18:14] &lt;yrashk&gt;    not sure how it will help tho</div>
<div class="line">[Friday 18 March 2011] [08:18:43] &lt;evax&gt;      and I&#8217;m not sure sending and recving are allowed at the same time</div>
<div class="line">[Friday 18 March 2011] [08:19:05] &lt;evax&gt;      if one must not use a socket in multiple threads</div>
<div class="line">[Friday 18 March 2011] [08:19:37] &lt;yrashk&gt;    hey</div>
<div class="line">[Friday 18 March 2011] [08:19:52] &lt;yrashk&gt;    how about using zmq_pollout event?</div>
<div class="line">[Friday 18 March 2011] [08:20:03] &lt;evax&gt;      sure</div>
<div class="line">[Friday 18 March 2011] [08:20:09] &lt;yrashk&gt;    it guarantees you can send without blocking</div>
<div class="line">[Friday 18 March 2011] [08:20:27] &lt;yrashk&gt;    so we can embed this into our poller</div>
<div class="line">[Friday 18 March 2011] [08:21:03] &lt;yrashk&gt;    this way we wont be blocking the poller ever</div>
<div class="line">[Friday 18 March 2011] [08:21:11] &lt;yrashk&gt;    i think it is a sound idea</div>
<div class="line">[Friday 18 March 2011] [08:21:56] &lt;yrashk&gt;    sustrik, wdyt? will it work fine? any precautions?</div>
<div class="line">[Friday 18 March 2011] [08:23:28] &lt;yrashk&gt;    i really like it</div>
<div class="line">[Friday 18 March 2011] [08:42:40] &lt;sustrik&gt;   yes, that&#8217;s what POLLOUT is for</div>
<div class="line">[Friday 18 March 2011] [08:43:08] &lt;yrashk&gt;    sweet</div>
<div class="line">[Friday 18 March 2011] [08:43:22] &lt;yrashk&gt;    so hopefully we&#8217;ll have this non-blocking very soon then</div>
<div class="line">[Friday 18 March 2011] [08:43:32] &lt;yrashk&gt;    as it will not change our poller much</div>
<div class="line">[Friday 18 March 2011] [08:45:51] &lt;Steve-o&gt;   mikko: looks like all the platforms are good now</div>
<div class="line">[Friday 18 March 2011] [09:06:34] &lt;<a href="#id138"><span class="problematic" id="id139">pieterh_</span></a>&gt;   sustrik: I think your email is inaccurate in some key ways</div>
<div class="line">[Friday 18 March 2011] [09:06:53] &lt;<a href="#id140"><span class="problematic" id="id141">pieterh_</span></a>&gt;  most critically, you are claiming a purpose for XREP that was never documented before</div>
<div class="line">[Friday 18 March 2011] [09:06:56] &lt;sustrik&gt;   feel free to discuss</div>
<div class="line">[Friday 18 March 2011] [09:07:09] &lt;sustrik&gt;   that&#8217;s why i sent the email out</div>
<div class="line">[Friday 18 March 2011] [09:07:11] &lt;<a href="#id142"><span class="problematic" id="id143">pieterh_</span></a>&gt;  as a user, and the developer of many devices, the notion that you would break this, is... shocking</div>
<div class="line">[Friday 18 March 2011] [09:07:40] &lt;sustrik&gt;   that&#8217;s why it has to be solved</div>
<div class="line">[Friday 18 March 2011] [09:07:41] &lt;<a href="#id144"><span class="problematic" id="id145">pieterh_</span></a>&gt;  it suggests (a) you don&#8217;t know wtf you were doing, (b) you don&#8217;t care about your users, (c) you don&#8217;t understand what they are doing</div>
<div class="line">[Friday 18 March 2011] [09:07:48] &lt;<a href="#id146"><span class="problematic" id="id147">pieterh_</span></a>&gt;  none of this is true, but it&#8217;s what your email suggests</div>
<div class="line">[Friday 18 March 2011] [09:07:50] &lt;sustrik&gt;   i would start with ZMQ)ROUTER socket type</div>
<div class="line">[Friday 18 March 2011] [09:08:19] &lt;sustrik&gt;   shrug, it has to be solved somehow</div>
<div class="line">[Friday 18 March 2011] [09:08:20] &lt;<a href="#id148"><span class="problematic" id="id149">pieterh_</span></a>&gt;  it&#8217;s unavoidable that people use this as a ROUTER</div>
<div class="line">[Friday 18 March 2011] [09:08:27] &lt;<a href="#id150"><span class="problematic" id="id151">pieterh_</span></a>&gt;  so, embrace that and make it work nicely</div>
<div class="line">[Friday 18 March 2011] [09:08:28] &lt;sustrik&gt;   feel free to propose a solution</div>
<div class="line">[Friday 18 March 2011] [09:08:32] &lt;<a href="#id152"><span class="problematic" id="id153">pieterh_</span></a>&gt;  I&#8217;ve done that many times</div>
<div class="line">[Friday 18 March 2011] [09:08:39] &lt;sustrik&gt;   ZMQ_ROUTER, right?</div>
<div class="line">[Friday 18 March 2011] [09:08:40] &lt;<a href="#id154"><span class="problematic" id="id155">pieterh_</span></a>&gt;  call it by the right name, make it work a little better</div>
<div class="line">[Friday 18 March 2011] [09:08:42] &lt;<a href="#id156"><span class="problematic" id="id157">pieterh_</span></a>&gt;  yes</div>
<div class="line">[Friday 18 March 2011] [09:08:43] &lt;<a href="#id158"><span class="problematic" id="id159">pieterh_</span></a>&gt;  of course</div>
<div class="line">[Friday 18 March 2011] [09:08:49] &lt;sustrik&gt;   that&#8217;s option 2 i think</div>
<div class="line">[Friday 18 March 2011] [09:08:51] &lt;<a href="#id160"><span class="problematic" id="id161">pieterh_</span></a>&gt;  you will see the overwhelming consensus on the list</div>
<div class="line">[Friday 18 March 2011] [09:09:02] &lt;sustrik&gt;   sure</div>
<div class="line">[Friday 18 March 2011] [09:09:03] &lt;<a href="#id162"><span class="problematic" id="id163">pieterh_</span></a>&gt;  you did read that thread, right?</div>
<div class="line">[Friday 18 March 2011] [09:09:04] &lt;sustrik&gt;   np</div>
<div class="line">[Friday 18 March 2011] [09:09:17] &lt;sustrik&gt;   yes</div>
<div class="line">[Friday 18 March 2011] [09:09:21] &lt;<a href="#id164"><span class="problematic" id="id165">pieterh_</span></a>&gt;  I like your solution of a verbose compile option</div>
<div class="line">[Friday 18 March 2011] [09:09:29] &lt;sustrik&gt;   i am just explaining the internals</div>
<div class="line">[Friday 18 March 2011] [09:09:40] &lt;sustrik&gt;   opt.2 is probably the best</div>
<div class="line">[Friday 18 March 2011] [09:09:53] &lt;<a href="#id166"><span class="problematic" id="id167">pieterh_</span></a>&gt;  well, you&#8217;re saying you might make a different implementation of &#8220;return to sender&#8221;</div>
<div class="line">[Friday 18 March 2011] [09:10:03] &lt;sustrik&gt;   definitely</div>
<div class="line">[Friday 18 March 2011] [09:10:10] &lt;<a href="#id168"><span class="problematic" id="id169">pieterh_</span></a>&gt;  which (and I give you the raw emotion) is ... shokcing</div>
<div class="line">[Friday 18 March 2011] [09:10:11] &lt;<a href="#id170"><span class="problematic" id="id171">pieterh_</span></a>&gt;  shocking</div>
<div class="line">[Friday 18 March 2011] [09:10:14] &lt;sustrik&gt;   that&#8217;s the XREP should be separated from REOUTER</div>
<div class="line">[Friday 18 March 2011] [09:10:17] &lt;sustrik&gt;   ROUTER*</div>
<div class="line">[Friday 18 March 2011] [09:10:29] &lt;sustrik&gt;   they are two distinct things</div>
<div class="line">[Friday 18 March 2011] [09:10:32] &lt;<a href="#id172"><span class="problematic" id="id173">pieterh_</span></a>&gt;  you have a better idea for the REP-REQ chain?</div>
<div class="line">[Friday 18 March 2011] [09:10:40] &lt;sustrik&gt;   not at the moment</div>
<div class="line">[Friday 18 March 2011] [09:10:51] &lt;sustrik&gt;   but it&#8217;s conceptually different from router</div>
<div class="line">[Friday 18 March 2011] [09:10:56] &lt;<a href="#id174"><span class="problematic" id="id175">pieterh_</span></a>&gt;  precisely, and afaics it&#8217;s impossible without creating stateful fabric</div>
<div class="line">[Friday 18 March 2011] [09:11:02] &lt;sustrik&gt;   say the dropping of unroutable messages -&gt;</div>
<div class="line">[Friday 18 March 2011] [09:11:03] &lt;<a href="#id176"><span class="problematic" id="id177">pieterh_</span></a>&gt;  conceptually it&#8217;s the same</div>
<div class="line">[Friday 18 March 2011] [09:11:05] &lt;<a href="#id178"><span class="problematic" id="id179">pieterh_</span></a>&gt;  it&#8217;s a use case</div>
<div class="line">[Friday 18 March 2011] [09:11:08] &lt;sustrik&gt;   ROUTER should not drop</div>
<div class="line">[Friday 18 March 2011] [09:11:10] &lt;sustrik&gt;   XREP should</div>
<div class="line">[Friday 18 March 2011] [09:11:14] &lt;<a href="#id180"><span class="problematic" id="id181">pieterh_</span></a>&gt;  yes it should</div>
<div class="line">[Friday 18 March 2011] [09:11:24] &lt;<a href="#id182"><span class="problematic" id="id183">pieterh_</span></a>&gt;  ROUTER should drop BUT it should be able to warn you</div>
<div class="line">[Friday 18 March 2011] [09:11:45] &lt;<a href="#id184"><span class="problematic" id="id185">pieterh_</span></a>&gt;  there is nothing useful you can do with an unroutable message but since it often suggests a programming error, you need visibility</div>
<div class="line">[Friday 18 March 2011] [09:11:47] &lt;<a href="#id186"><span class="problematic" id="id187">pieterh_</span></a>&gt;  that&#8217;s all</div>
<div class="line">[Friday 18 March 2011] [09:11:52] &lt;sustrik&gt;   sure</div>
<div class="line">[Friday 18 March 2011] [09:12:08] &lt;<a href="#id188"><span class="problematic" id="id189">pieterh_</span></a>&gt;  I literally go into src/xrep.cpp and add a printf</div>
<div class="line">[Friday 18 March 2011] [09:12:15] &lt;<a href="#id190"><span class="problematic" id="id191">pieterh_</span></a>&gt;  so I can debug a complex router</div>
<div class="line">[Friday 18 March 2011] [09:12:41] &lt;<a href="#id192"><span class="problematic" id="id193">pieterh_</span></a>&gt;  doing a req-rep chain is just one use case for routing</div>
<div class="line">[Friday 18 March 2011] [09:12:44] &lt;<a href="#id194"><span class="problematic" id="id195">pieterh_</span></a>&gt;  it&#8217;s not a core pattern</div>
<div class="line">[Friday 18 March 2011] [09:12:50] &lt;sustrik&gt;   it is</div>
<div class="line">[Friday 18 March 2011] [09:13:00] &lt;<a href="#id196"><span class="problematic" id="id197">pieterh_</span></a>&gt;  not a <em>separate</em> core pattern</div>
<div class="line">[Friday 18 March 2011] [09:13:02] &lt;<a href="#id198"><span class="problematic" id="id199">pieterh_</span></a>&gt;  afaics</div>
<div class="line">[Friday 18 March 2011] [09:14:18] &lt;<a href="#id200"><span class="problematic" id="id201">pieterh_</span></a>&gt;  tbh the envelope concept is ugly as heck but I can&#8217;t see anything simpler or better</div>
<div class="line">[Friday 18 March 2011] [09:14:38] &lt;sustrik&gt;   the one described in the email is nice</div>
<div class="line">[Friday 18 March 2011] [09:14:46] &lt;sustrik&gt;   but works on only for req/rep</div>
<div class="line">[Friday 18 March 2011] [09:14:49] &lt;sustrik&gt;   not for router</div>
<div class="line">[Friday 18 March 2011] [09:15:02] &lt;sustrik&gt;   and it has some scaling issues</div>
<div class="line">[Friday 18 March 2011] [09:15:12] &lt;sustrik&gt;   so it&#8217;s not a real alternative, i think</div>
<div class="line">[Friday 18 March 2011] [09:16:29]      * <a href="#id202"><span class="problematic" id="id203">pieterh_</span></a> is re-reading the email</div>
<div class="line">[Friday 18 March 2011] [09:16:36] &lt;<a href="#id204"><span class="problematic" id="id205">pieterh_</span></a>&gt;  XPUB/XSUB are hop-by-hop?</div>
<div class="line">[Friday 18 March 2011] [09:16:53] &lt;sustrik&gt;   yes</div>
<div class="line">[Friday 18 March 2011] [09:16:59] &lt;<a href="#id206"><span class="problematic" id="id207">pieterh_</span></a>&gt;  the fact you implement PUB on XPUB, REQ on XREQ, is irrelevant to the user</div>
<div class="line">[Friday 18 March 2011] [09:17:04] &lt;<a href="#id208"><span class="problematic" id="id209">pieterh_</span></a>&gt;  it&#8217;s vital to you, irrelevant to me</div>
<div class="line">[Friday 18 March 2011] [09:17:15] &lt;<a href="#id210"><span class="problematic" id="id211">pieterh_</span></a>&gt;  in fact, worse than irrelevant, it&#8217;s negative data</div>
<div class="line">[Friday 18 March 2011] [09:17:53] &lt;<a href="#id212"><span class="problematic" id="id213">pieterh_</span></a>&gt;  you basically ask me as user to think about your implementation design, which breaks my brain</div>
<div class="line">[Friday 18 March 2011] [09:18:05] &lt;<a href="#id214"><span class="problematic" id="id215">pieterh_</span></a>&gt;  &#8220;The end-to-end type is always layered on top of the corresponding X socket&#8221;</div>
<div class="line">[Friday 18 March 2011] [09:18:06] &lt;sustrik&gt;   it works like IP and TCP</div>
<div class="line">[Friday 18 March 2011] [09:18:10] &lt;<a href="#id216"><span class="problematic" id="id217">pieterh_</span></a>&gt;  that&#8217;s rubbish, sorry</div>
<div class="line">[Friday 18 March 2011] [09:18:14] &lt;<a href="#id218"><span class="problematic" id="id219">pieterh_</span></a>&gt;  I don&#8217;t know IP</div>
<div class="line">[Friday 18 March 2011] [09:18:16] &lt;sustrik&gt;   a TCP user doesn&#8217;t have to be aware of IP</div>
<div class="line">[Friday 18 March 2011] [09:18:19] &lt;sustrik&gt;   but it&#8217;s there</div>
<div class="line">[Friday 18 March 2011] [09:18:32] &lt;<a href="#id220"><span class="problematic" id="id221">pieterh_</span></a>&gt;  sorry, it does not work for me, not at all</div>
<div class="line">[Friday 18 March 2011] [09:18:42] &lt;<a href="#id222"><span class="problematic" id="id223">pieterh_</span></a>&gt;  what I want are a set of socket types with clear names and clear semantics</div>
<div class="line">[Friday 18 March 2011] [09:18:50] &lt;Steve-o&gt;   +1</div>
<div class="line">[Friday 18 March 2011] [09:18:51] &lt;<a href="#id224"><span class="problematic" id="id225">pieterh_</span></a>&gt;  I don&#8217;t want some layering and abstraction I need to learn first</div>
<div class="line">[Friday 18 March 2011] [09:18:52] &lt;sustrik&gt;   that&#8217;s the option 2</div>
<div class="line">[Friday 18 March 2011] [09:18:59] &lt;sustrik&gt;   ZMQ_ROUTER</div>
<div class="line">[Friday 18 March 2011] [09:19:06] &lt;<a href="#id226"><span class="problematic" id="id227">pieterh_</span></a>&gt;  do not try to sell me your abstractions, it&#8217;s what AMQP does and it&#8217;s bogus</div>
<div class="line">[Friday 18 March 2011] [09:19:22] &lt;sustrik&gt;   what do you want exactly then?</div>
<div class="line">[Friday 18 March 2011] [09:19:25] &lt;sustrik&gt;   i am not following</div>
<div class="line">[Friday 18 March 2011] [09:19:28] &lt;<a href="#id228"><span class="problematic" id="id229">pieterh_</span></a>&gt;  I want clear socket names</div>
<div class="line">[Friday 18 March 2011] [09:19:33] &lt;sustrik&gt;   ZMQ_ROUTER</div>
<div class="line">[Friday 18 March 2011] [09:19:35] &lt;<a href="#id230"><span class="problematic" id="id231">pieterh_</span></a>&gt;  clear semantics that are documented up-front</div>
<div class="line">[Friday 18 March 2011] [09:19:36] &lt;<a href="#id232"><span class="problematic" id="id233">pieterh_</span></a>&gt;  yes</div>
<div class="line">[Friday 18 March 2011] [09:19:46] &lt;<a href="#id234"><span class="problematic" id="id235">pieterh_</span></a>&gt;  this is, sadly, reverse engineering</div>
<div class="line">[Friday 18 March 2011] [09:19:47] &lt;sustrik&gt;   what&#8217;s the problem then?</div>
<div class="line">[Friday 18 March 2011] [09:19:55] &lt;<a href="#id236"><span class="problematic" id="id237">pieterh_</span></a>&gt;  it&#8217;s me trying to make names that fit your semantics</div>
<div class="line">[Friday 18 March 2011] [09:20:12] &lt;<a href="#id238"><span class="problematic" id="id239">pieterh_</span></a>&gt;  there&#8217;s no problem so long as you don&#8217;t come back with abstractions that hurt my brain</div>
<div class="line">[Friday 18 March 2011] [09:20:13] &lt;<a href="#id240"><span class="problematic" id="id241">pieterh_</span></a>&gt;  :-)</div>
<div class="line">[Friday 18 March 2011] [09:20:23] &lt;<a href="#id242"><span class="problematic" id="id243">pieterh_</span></a>&gt;  it is already hard enough</div>
<div class="line">[Friday 18 March 2011] [09:20:35] &lt;sustrik&gt;   that&#8217;s an abstraction on which 0mq is working from very beginning</div>
<div class="line">[Friday 18 March 2011] [09:20:38] &lt;sustrik&gt;   just ignore it</div>
<div class="line">[Friday 18 March 2011] [09:20:55] &lt;sustrik&gt;   as a user you don&#8217;t have to care</div>
<div class="line">[Friday 18 March 2011] [09:20:58] &lt;<a href="#id244"><span class="problematic" id="id245">pieterh_</span></a>&gt;  do you understand that your semantics are counter-productive for mine?</div>
<div class="line">[Friday 18 March 2011] [09:21:08] &lt;<a href="#id246"><span class="problematic" id="id247">pieterh_</span></a>&gt;  we have a conflict, as user vs. designer?</div>
<div class="line">[Friday 18 March 2011] [09:21:27] &lt;sustrik&gt;   i don&#8217;t think so</div>
<div class="line">[Friday 18 March 2011] [09:21:37] &lt;<a href="#id248"><span class="problematic" id="id249">pieterh_</span></a>&gt;  it&#8217;s been that way so far</div>
<div class="line">[Friday 18 March 2011] [09:21:43] &lt;<a href="#id250"><span class="problematic" id="id251">pieterh_</span></a>&gt;  e.g. The end-to-end type is always layered on top of the corresponding X socket</div>
<div class="line">[Friday 18 March 2011] [09:21:49] &lt;sustrik&gt;   yes</div>
<div class="line">[Friday 18 March 2011] [09:22:03] &lt;<a href="#id252"><span class="problematic" id="id253">pieterh_</span></a>&gt;  that is toxic for me as user</div>
<div class="line">[Friday 18 March 2011] [09:22:12] &lt;sustrik&gt;   you don&#8217;t have to care</div>
<div class="line">[Friday 18 March 2011] [09:22:20] &lt;sustrik&gt;   use just the non-X types</div>
<div class="line">[Friday 18 March 2011] [09:22:26] &lt;sustrik&gt;   that&#8217;s what proposition 2 is about</div>
<div class="line">[Friday 18 March 2011] [09:22:34] &lt;sustrik&gt;   people want to use routing</div>
<div class="line">[Friday 18 March 2011] [09:22:43] &lt;sustrik&gt;   so let&#8217;s make routing a first-class non-X socket</div>
<div class="line">[Friday 18 March 2011] [09:22:46] &lt;sustrik&gt;   ZMQ_ROUTER</div>
<div class="line">[Friday 18 March 2011] [09:22:53] &lt;<a href="#id254"><span class="problematic" id="id255">pieterh_</span></a>&gt;  well, you can make internal socket types that are undocumented</div>
<div class="line">[Friday 18 March 2011] [09:23:05] &lt;<a href="#id256"><span class="problematic" id="id257">pieterh_</span></a>&gt;  but ZMQ_ROUTER and ZMQ_DEALER cannot be internal and undocumented</div>
<div class="line">[Friday 18 March 2011] [09:23:15] &lt;<a href="#id258"><span class="problematic" id="id259">pieterh_</span></a>&gt;  since they cover 40%, as I said, of real application use cases</div>
<div class="line">[Friday 18 March 2011] [09:23:24] &lt;sustrik&gt;   X-sockets must be documented because they are used to make devices</div>
<div class="line">[Friday 18 March 2011] [09:23:32] &lt;<a href="#id260"><span class="problematic" id="id261">pieterh_</span></a>&gt;  devices are apps</div>
<div class="line">[Friday 18 March 2011] [09:23:43] &lt;sustrik&gt;   i.e. intermdiate nodes with no end-to-end functionalitty</div>
<div class="line">[Friday 18 March 2011] [09:23:46] &lt;<a href="#id262"><span class="problematic" id="id263">pieterh_</span></a>&gt;  X-sockets are your terminology</div>
<div class="line">[Friday 18 March 2011] [09:23:55] &lt;<a href="#id264"><span class="problematic" id="id265">pieterh_</span></a>&gt;  I&#8217;m against that terminology</div>
<div class="line">[Friday 18 March 2011] [09:24:02] &lt;sustrik&gt;   what would you want instead?</div>
<div class="line">[Friday 18 March 2011] [09:24:09] &lt;<a href="#id266"><span class="problematic" id="id267">pieterh_</span></a>&gt;  especially when you explain it</div>
<div class="line">[Friday 18 March 2011] [09:24:16] &lt;sustrik&gt;   i admitt the X- thing is stupid</div>
<div class="line">[Friday 18 March 2011] [09:24:18] &lt;<a href="#id268"><span class="problematic" id="id269">pieterh_</span></a>&gt;  just a clear set of sockets that are properly documented and match real requirements</div>
<div class="line">[Friday 18 March 2011] [09:24:23] &lt;<a href="#id270"><span class="problematic" id="id271">pieterh_</span></a>&gt;  it&#8217;s not hard</div>
<div class="line">[Friday 18 March 2011] [09:24:24] &lt;<a href="#id272"><span class="problematic" id="id273">pieterh_</span></a>&gt;  design from the use case backwards</div>
<div class="line">[Friday 18 March 2011] [09:24:29] &lt;sustrik&gt;   haven&#8217;t though of anything better though</div>
<div class="line">[Friday 18 March 2011] [09:24:30] &lt;<a href="#id274"><span class="problematic" id="id275">pieterh_</span></a>&gt;  not from the implementation forwards</div>
<div class="line">[Friday 18 March 2011] [09:24:36] &lt;<a href="#id276"><span class="problematic" id="id277">pieterh_</span></a>&gt;  I don&#8217;t <em>care</em> how you implement stuff</div>
<div class="line">[Friday 18 March 2011] [09:24:58] &lt;<a href="#id278"><span class="problematic" id="id279">pieterh_</span></a>&gt;  what I do care about is the clarity of documentation as a contract</div>
<div class="line">[Friday 18 March 2011] [09:25:00] &lt;<a href="#id280"><span class="problematic" id="id281">pieterh_</span></a>&gt;  clear names</div>
<div class="line">[Friday 18 March 2011] [09:25:09] &lt;sustrik&gt;   the problem is that X- sockets have to be exposed because of device implementers</div>
<div class="line">[Friday 18 March 2011] [09:25:12] &lt;<a href="#id282"><span class="problematic" id="id283">pieterh_</span></a>&gt;  clear semantics that directly speak to user requirements</div>
<div class="line">[Friday 18 March 2011] [09:25:16] &lt;<a href="#id284"><span class="problematic" id="id285">pieterh_</span></a>&gt;  ?</div>
<div class="line">[Friday 18 March 2011] [09:25:21] &lt;sustrik&gt;   so they can&#8217;t be hidden</div>
<div class="line">[Friday 18 March 2011] [09:25:22] &lt;<a href="#id286"><span class="problematic" id="id287">pieterh_</span></a>&gt;  ZMQ_ROUTER is not a problem</div>
<div class="line">[Friday 18 March 2011] [09:25:28] &lt;<a href="#id288"><span class="problematic" id="id289">pieterh_</span></a>&gt;  sigh</div>
<div class="line">[Friday 18 March 2011] [09:25:32] &lt;<a href="#id290"><span class="problematic" id="id291">pieterh_</span></a>&gt;  devices are apps</div>
<div class="line">[Friday 18 March 2011] [09:25:34] &lt;sustrik&gt;   no, the problem is layering</div>
<div class="line">[Friday 18 March 2011] [09:25:40] &lt;<a href="#id292"><span class="problematic" id="id293">pieterh_</span></a>&gt;  that&#8217;s your problem, not mine</div>
<div class="line">[Friday 18 March 2011] [09:25:55] &lt;<a href="#id294"><span class="problematic" id="id295">pieterh_</span></a>&gt;  that&#8217;s an implementation detail</div>
<div class="line">[Friday 18 March 2011] [09:25:58] &lt;<a href="#id296"><span class="problematic" id="id297">pieterh_</span></a>&gt;  look... just make small steps here</div>
<div class="line">[Friday 18 March 2011] [09:26:06] &lt;sustrik&gt;   ok, so just ignore the X types</div>
<div class="line">[Friday 18 March 2011] [09:26:09] &lt;<a href="#id298"><span class="problematic" id="id299">pieterh_</span></a>&gt;  rename XREP and XREQ to ROUTER and DEALER</div>
<div class="line">[Friday 18 March 2011] [09:26:17] &lt;<a href="#id300"><span class="problematic" id="id301">pieterh_</span></a>&gt;  and stop using weird names that make no sense</div>
<div class="line">[Friday 18 March 2011] [09:26:17] &lt;sustrik&gt;   it&#8217;s mine problem, not yours</div>
<div class="line">[Friday 18 March 2011] [09:26:33] &lt;<a href="#id302"><span class="problematic" id="id303">pieterh_</span></a>&gt;  if you want to use undocumented internal socket types, fine</div>
<div class="line">[Friday 18 March 2011] [09:26:38] &lt;<a href="#id304"><span class="problematic" id="id305">pieterh_</span></a>&gt;  but they don&#8217;t exist for me</div>
<div class="line">[Friday 18 March 2011] [09:26:45] &lt;sustrik&gt;   they must be documented because of devices</div>
<div class="line">[Friday 18 March 2011] [09:26:57] &lt;sustrik&gt;   there&#8217;s no way to create a device with REQ/REP</div>
<div class="line">[Friday 18 March 2011] [09:27:01] &lt;sustrik&gt;   it would blockl</div>
<div class="line">[Friday 18 March 2011] [09:27:01] &lt;<a href="#id306"><span class="problematic" id="id307">pieterh_</span></a>&gt;  then they are not internal</div>
<div class="line">[Friday 18 March 2011] [09:27:07] &lt;<a href="#id308"><span class="problematic" id="id309">pieterh_</span></a>&gt;  well, I do know that</div>
<div class="line">[Friday 18 March 2011] [09:27:25] &lt;<a href="#id310"><span class="problematic" id="id311">pieterh_</span></a>&gt;  when I say &#8220;undocumented internal socket types&#8221; I do not mean ROUTER/DEALER</div>
<div class="line">[Friday 18 March 2011] [09:27:25] &lt;<a href="#id312"><span class="problematic" id="id313">pieterh_</span></a>&gt;  obviously</div>
<div class="line">[Friday 18 March 2011] [09:27:41] &lt;<a href="#id314"><span class="problematic" id="id315">pieterh_</span></a>&gt;  I mean e.g. XPUB/XSUB</div>
<div class="line">[Friday 18 March 2011] [09:27:51] &lt;sustrik&gt;   so my proposition is let distiquish XREP/XREQ</div>
<div class="line">[Friday 18 March 2011] [09:27:55] &lt;sustrik&gt;   from ROUTER/DEALER</div>
<div class="line">[Friday 18 March 2011] [09:28:03] &lt;sustrik&gt;   you can then use ROUTER/DEALER</div>
<div class="line">[Friday 18 March 2011] [09:28:04] &lt;<a href="#id316"><span class="problematic" id="id317">pieterh_</span></a>&gt;  why?</div>
<div class="line">[Friday 18 March 2011] [09:28:12] &lt;<a href="#id318"><span class="problematic" id="id319">pieterh_</span></a>&gt;  why keep the old names at all?</div>
<div class="line">[Friday 18 March 2011] [09:28:15] &lt;sustrik&gt;   because it&#8217;s a different messaging pattern</div>
<div class="line">[Friday 18 March 2011] [09:28:21] &lt;<a href="#id320"><span class="problematic" id="id321">pieterh_</span></a>&gt;  sigh</div>
<div class="line">[Friday 18 March 2011] [09:28:23] &lt;<a href="#id322"><span class="problematic" id="id323">pieterh_</span></a>&gt;  this is just bogus</div>
<div class="line">[Friday 18 March 2011] [09:28:25] &lt;sustrik&gt;   it SMTP-like messaging</div>
<div class="line">[Friday 18 March 2011] [09:28:27] &lt;<a href="#id324"><span class="problematic" id="id325">pieterh_</span></a>&gt;  it&#8217;s not a different pattern</div>
<div class="line">[Friday 18 March 2011] [09:28:34] &lt;<a href="#id326"><span class="problematic" id="id327">pieterh_</span></a>&gt;  it&#8217;s just one use case</div>
<div class="line">[Friday 18 March 2011] [09:28:38] &lt;sustrik&gt;   specify an address, the message will get there</div>
<div class="line">[Friday 18 March 2011] [09:28:41] &lt;<a href="#id328"><span class="problematic" id="id329">pieterh_</span></a>&gt;  you have said it, there&#8217;s no better way to implement it</div>
<div class="line">[Friday 18 March 2011] [09:28:48] &lt;sustrik&gt;   while req/rep is:</div>
<div class="line">[Friday 18 March 2011] [09:28:52] &lt;<a href="#id330"><span class="problematic" id="id331">pieterh_</span></a>&gt;  &#8220;message will get there&#8221; is not a socket semantic</div>
<div class="line">[Friday 18 March 2011] [09:29:01] &lt;sustrik&gt;   specify the name of the service, you task will be executed</div>
<div class="line">[Friday 18 March 2011] [09:29:18] &lt;<a href="#id332"><span class="problematic" id="id333">pieterh_</span></a>&gt;  that is Majordomo</div>
<div class="line">[Friday 18 March 2011] [09:29:21] &lt;<a href="#id334"><span class="problematic" id="id335">pieterh_</span></a>&gt;  have you actually read the Guide?</div>
<div class="line">[Friday 18 March 2011] [09:29:28] &lt;sustrik&gt;   most of it</div>
<div class="line">[Friday 18 March 2011] [09:29:38] &lt;<a href="#id336"><span class="problematic" id="id337">pieterh_</span></a>&gt;  you should perhaps see what people do with your work</div>
<div class="line">[Friday 18 March 2011] [09:29:39] &lt;sustrik&gt;   anyway, let&#8217;s move this discussion on the mailing list</div>
<div class="line">[Friday 18 March 2011] [09:29:43] &lt;<a href="#id338"><span class="problematic" id="id339">pieterh_</span></a>&gt;  it&#8217;s all based on real questions on the list</div>
<div class="line">[Friday 18 March 2011] [09:29:49] &lt;<a href="#id340"><span class="problematic" id="id341">pieterh_</span></a>&gt;  SOA is not a socket semantic</div>
<div class="line">[Friday 18 March 2011] [09:30:16] &lt;<a href="#id342"><span class="problematic" id="id343">pieterh_</span></a>&gt;  my advice, honestly, is to make small, careful evolutionary steps</div>
<div class="line">[Friday 18 March 2011] [09:30:26] &lt;<a href="#id344"><span class="problematic" id="id345">pieterh_</span></a>&gt;  do not make radical changes to things that took years to learn</div>
<div class="line">[Friday 18 March 2011] [09:30:28] &lt;sustrik&gt;   #define ZMQ_ROUTER ZMQ_XREP</div>
<div class="line">[Friday 18 March 2011] [09:30:31] &lt;<a href="#id346"><span class="problematic" id="id347">pieterh_</span></a>&gt;  people will not like you for it</div>
<div class="line">[Friday 18 March 2011] [09:30:32] &lt;<a href="#id348"><span class="problematic" id="id349">pieterh_</span></a>&gt;  sure</div>
<div class="line">[Friday 18 March 2011] [09:30:33] &lt;sustrik&gt;   that&#8217;s as small as it gets</div>
<div class="line">[Friday 18 March 2011] [09:30:36] &lt;<a href="#id350"><span class="problematic" id="id351">pieterh_</span></a>&gt;  I&#8217;ve done that in 2.1</div>
<div class="line">[Friday 18 March 2011] [09:30:40] &lt;<a href="#id352"><span class="problematic" id="id353">pieterh_</span></a>&gt;  precisely that</div>
<div class="line">[Friday 18 March 2011] [09:30:45] &lt;sustrik&gt;   i&#8217;ll do that in trunk</div>
<div class="line">[Friday 18 March 2011] [09:30:48] &lt;<a href="#id354"><span class="problematic" id="id355">pieterh_</span></a>&gt;  it&#8217;s sufficient for me</div>
<div class="line">[Friday 18 March 2011] [09:30:54] &lt;sustrik&gt;   but i would like it to be discussed first</div>
<div class="line">[Friday 18 March 2011] [09:31:03] &lt;<a href="#id356"><span class="problematic" id="id357">pieterh_</span></a>&gt;  the naming has been discussed several times</div>
<div class="line">[Friday 18 March 2011] [09:31:05] &lt;sustrik&gt;   i assume that would be the preferred option</div>
<div class="line">[Friday 18 March 2011] [09:31:09] &lt;<a href="#id358"><span class="problematic" id="id359">pieterh_</span></a>&gt;  it&#8217;s not the same issue as semantic changes</div>
<div class="line">[Friday 18 March 2011] [09:31:16] &lt;sustrik&gt;   but i don&#8217;t want to do it without discussion on the list</div>
<div class="line">[Friday 18 March 2011] [09:31:21] &lt;<a href="#id360"><span class="problematic" id="id361">pieterh_</span></a>&gt;  you are mixing two issues and making the discussion harder</div>
<div class="line">[Friday 18 March 2011] [09:31:35] &lt;<a href="#id362"><span class="problematic" id="id363">pieterh_</span></a>&gt;  the naming <em>has</em> been discussed several times, with clear consensus</div>
<div class="line">[Friday 18 March 2011] [09:31:40] &lt;<a href="#id364"><span class="problematic" id="id365">pieterh_</span></a>&gt;  shall I point you to the thread?</div>
<div class="line">[Friday 18 March 2011] [09:31:44] &lt;sustrik&gt;   explain your point of view on the list then</div>
<div class="line">[Friday 18 March 2011] [09:31:54] &lt;sustrik&gt;   we are a community</div>
<div class="line">[Friday 18 March 2011] [09:31:56] &lt;<a href="#id366"><span class="problematic" id="id367">pieterh_</span></a>&gt;  I&#8217;ve done that, of course</div>
<div class="line">[Friday 18 March 2011] [09:31:59] &lt;<a href="#id368"><span class="problematic" id="id369">pieterh_</span></a>&gt;  we&#8217;re also on IRC</div>
<div class="line">[Friday 18 March 2011] [09:32:03] &lt;<a href="#id370"><span class="problematic" id="id371">pieterh_</span></a>&gt;  this is logged</div>
<div class="line">[Friday 18 March 2011] [09:32:18] &lt;sustrik&gt;   yep, but lot of people are not here at the moment</div>
<div class="line">[Friday 18 March 2011] [09:32:25] &lt;<a href="#id372"><span class="problematic" id="id373">pieterh_</span></a>&gt;  the list is also fairly passive</div>
<div class="line">[Friday 18 March 2011] [09:32:39] &lt;<a href="#id374"><span class="problematic" id="id375">pieterh_</span></a>&gt;  nonetheless, I have asked about renaming the sockets and there was <em>clear</em> consensus</div>
<div class="line">[Friday 18 March 2011] [09:32:43] &lt;<a href="#id376"><span class="problematic" id="id377">pieterh_</span></a>&gt;  please do respect that</div>
<div class="line">[Friday 18 March 2011] [09:32:47] &lt;<a href="#id378"><span class="problematic" id="id379">pieterh_</span></a>&gt;  we are a community, as you say</div>
<div class="line">[Friday 18 March 2011] [09:32:48] &lt;sustrik&gt;   it&#8217;s polite to allow even those in other timezones to discuss</div>
<div class="line">[Friday 18 March 2011] [09:33:10] &lt;<a href="#id380"><span class="problematic" id="id381">pieterh_</span></a>&gt;  also, reopening a discussion because you weren&#8217;t there, or don&#8217;t like the outcome is unpolite</div>
<div class="line">[Friday 18 March 2011] [09:33:17] &lt;sustrik&gt;   yep, i am for ZMQ_ROUTER options as well</div>
<div class="line">[Friday 18 March 2011] [09:33:22] &lt;<a href="#id382"><span class="problematic" id="id383">pieterh_</span></a>&gt;  so, we make that</div>
<div class="line">[Friday 18 March 2011] [09:33:29] &lt;<a href="#id384"><span class="problematic" id="id385">pieterh_</span></a>&gt;  and we consider the semantics as a separate issue</div>
<div class="line">[Friday 18 March 2011] [09:33:32] &lt;sustrik&gt;   it&#8217;s supplying the missing pieces of information</div>
<div class="line">[Friday 18 March 2011] [09:33:44] &lt;<a href="#id386"><span class="problematic" id="id387">pieterh_</span></a>&gt;  i&#8217;m always in favor of better semantics but they must be carefully worked out of use cases</div>
<div class="line">[Friday 18 March 2011] [09:33:53] &lt;sustrik&gt;   yup</div>
<div class="line">[Friday 18 March 2011] [09:33:55] &lt;<a href="#id388"><span class="problematic" id="id389">pieterh_</span></a>&gt;  abstract &#8220;it&#8217;s like XYZ&#8221; discussions are pointless IMO</div>
<div class="line">[Friday 18 March 2011] [09:33:59] &lt;<a href="#id390"><span class="problematic" id="id391">pieterh_</span></a>&gt;  we are not like XYZ</div>
<div class="line">[Friday 18 March 2011] [09:34:04] &lt;sustrik&gt;   sure, say so</div>
<div class="line">[Friday 18 March 2011] [09:34:07] &lt;<a href="#id392"><span class="problematic" id="id393">pieterh_</span></a>&gt;  XYZ is like us, done badly</div>
<div class="line">[Friday 18 March 2011] [09:34:07] &lt;<a href="#id394"><span class="problematic" id="id395">pieterh_</span></a>&gt;  period</div>
<div class="line">[Friday 18 March 2011] [09:34:18] &lt;<a href="#id396"><span class="problematic" id="id397">pieterh_</span></a>&gt;  what, again?</div>
<div class="line">[Friday 18 March 2011] [09:34:18] &lt;<a href="#id398"><span class="problematic" id="id399">pieterh_</span></a>&gt;  :-)</div>
<div class="line">[Friday 18 March 2011] [09:34:40] &lt;sustrik&gt;   :)</div>
<div class="line">[Friday 18 March 2011] [09:34:55] &lt;<a href="#id400"><span class="problematic" id="id401">pieterh_</span></a>&gt;  btw, for IPC, what do you think about making a shared memory transport?</div>
<div class="line">[Friday 18 March 2011] [09:35:11] &lt;<a href="#id402"><span class="problematic" id="id403">pieterh_</span></a>&gt;  one can make a portable shmem layer, then use that</div>
<div class="line">[Friday 18 March 2011] [09:35:29] &lt;sustrik&gt;   there&#8217;s an API problem with that</div>
<div class="line">[Friday 18 March 2011] [09:35:32] &lt;<a href="#id404"><span class="problematic" id="id405">pieterh_</span></a>&gt;  all we need is a portable shmem api people can implement</div>
<div class="line">[Friday 18 March 2011] [09:35:39] &lt;sustrik&gt;   when you allocate a message</div>
<div class="line">[Friday 18 March 2011] [09:35:48] &lt;sustrik&gt;   (zmq_msg_init_size)</div>
<div class="line">[Friday 18 March 2011] [09:35:54] &lt;sustrik&gt;   it&#8217;s allocated in process heap</div>
<div class="line">[Friday 18 March 2011] [09:36:01] &lt;<a href="#id406"><span class="problematic" id="id407">pieterh_</span></a>&gt;  right, that&#8217;s fine, we copy data</div>
<div class="line">[Friday 18 March 2011] [09:36:20] &lt;sustrik&gt;   if you copy data then there&#8217;s not much point in using shmem</div>
<div class="line">[Friday 18 March 2011] [09:36:32] &lt;<a href="#id408"><span class="problematic" id="id409">pieterh_</span></a>&gt;  much, much faster than IPC</div>
<div class="line">[Friday 18 March 2011] [09:36:45] &lt;<a href="#id410"><span class="problematic" id="id411">pieterh_</span></a>&gt;  also, am I wrong, but with ZMQ you <em>always</em> have to copy data on recv?</div>
<div class="line">[Friday 18 March 2011] [09:36:49] &lt;sustrik&gt;   if that&#8217;s the case, then sure</div>
<div class="line">[Friday 18 March 2011] [09:36:57] &lt;sustrik&gt;   it have been discussed serveral times</div>
<div class="line">[Friday 18 March 2011] [09:37:03] &lt;<a href="#id412"><span class="problematic" id="id413">pieterh_</span></a>&gt;  shmem?</div>
<div class="line">[Friday 18 March 2011] [09:37:07] &lt;sustrik&gt;   yep</div>
<div class="line">[Friday 18 March 2011] [09:37:18] &lt;sustrik&gt;   but nobody really tried to implement it</div>
<div class="line">[Friday 18 March 2011] [09:37:21] &lt;<a href="#id414"><span class="problematic" id="id415">pieterh_</span></a>&gt;  I&#8217;ve not seen any attempt to slice it into two</div>
<div class="line">[Friday 18 March 2011] [09:37:21] &lt;sustrik&gt;   at least afaik</div>
<div class="line">[Friday 18 March 2011] [09:37:37] &lt;sustrik&gt;   two what?</div>
<div class="line">[Friday 18 March 2011] [09:37:40] &lt;<a href="#id416"><span class="problematic" id="id417">pieterh_</span></a>&gt;  two layers</div>
<div class="line">[Friday 18 March 2011] [09:37:57] &lt;<a href="#id418"><span class="problematic" id="id419">pieterh_</span></a>&gt;  so, abstract shmem api, and implementations thereof, and use thereof</div>
<div class="line">[Friday 18 March 2011] [09:38:12] &lt;<a href="#id420"><span class="problematic" id="id421">pieterh_</span></a>&gt;  the problem is today, you&#8217;d have to know both sides of the cake to make it</div>
<div class="line">[Friday 18 March 2011] [09:38:21] &lt;<a href="#id422"><span class="problematic" id="id423">pieterh_</span></a>&gt;  both how to make a transport in 0MQ, and how to do shmem on system X</div>
<div class="line">[Friday 18 March 2011] [09:38:28] &lt;<a href="#id424"><span class="problematic" id="id425">pieterh_</span></a>&gt;  I&#8217;d like to slice this into two problems</div>
<div class="line">[Friday 18 March 2011] [09:38:46] &lt;sustrik&gt;   how would you do that?</div>
<div class="line">[Friday 18 March 2011] [09:38:54] &lt;Steve-o&gt;   re: shmem I got as far as this and haven&#8217;t looked at it again:  <a class="reference external" href="https://gist.github.com/876073">https://gist.github.com/876073</a></div>
<div class="line">[Friday 18 March 2011] [09:38:55] &lt;<a href="#id426"><span class="problematic" id="id427">pieterh_</span></a>&gt;  well, classic portable API solution</div>
<div class="line">[Friday 18 March 2011] [09:39:06] &lt;<a href="#id428"><span class="problematic" id="id429">pieterh_</span></a>&gt;  like how I made portable threading in ZFL</div>
<div class="line">[Friday 18 March 2011] [09:39:42] &lt;sustrik&gt;   currently 0MQ uses <a href="#id430"><span class="problematic" id="id431">ZMQ_HAVE_</span></a>... macros to provide OS-specific functionality</div>
<div class="line">[Friday 18 March 2011] [09:39:45] &lt;<a href="#id432"><span class="problematic" id="id433">pieterh_</span></a>&gt;  first step is to agree on what constitutes the necessary shmem api for a portable shmem transport in 0MQ</div>
<div class="line">[Friday 18 March 2011] [09:39:58] &lt;<a href="#id434"><span class="problematic" id="id435">pieterh_</span></a>&gt;  sure, but that&#8217;s not helpful here, forget it</div>
<div class="line">[Friday 18 March 2011] [09:40:07] &lt;<a href="#id436"><span class="problematic" id="id437">pieterh_</span></a>&gt;  you do that in some module, shmem.cpp or whatever</div>
<div class="line">[Friday 18 March 2011] [09:40:11] &lt;sustrik&gt;   ah, you are speaking of internal apis, right?</div>
<div class="line">[Friday 18 March 2011] [09:40:14] &lt;<a href="#id438"><span class="problematic" id="id439">pieterh_</span></a>&gt;  yes</div>
<div class="line">[Friday 18 March 2011] [09:40:20] &lt;sustrik&gt;   abstraction for transports</div>
<div class="line">[Friday 18 March 2011] [09:40:23] &lt;<a href="#id440"><span class="problematic" id="id441">pieterh_</span></a>&gt;  a portability API for shmem</div>
<div class="line">[Friday 18 March 2011] [09:40:24] &lt;<a href="#id442"><span class="problematic" id="id443">pieterh_</span></a>&gt;  yes</div>
<div class="line">[Friday 18 March 2011] [09:40:30] &lt;sustrik&gt;   that would be great</div>
<div class="line">[Friday 18 March 2011] [09:40:38] &lt;<a href="#id444"><span class="problematic" id="id445">pieterh_</span></a>&gt;  it means one person writes the transport, another group makes it work on random boxes</div>
<div class="line">[Friday 18 March 2011] [09:40:38] &lt;sustrik&gt;   i was thinking about it for a long time</div>
<div class="line">[Friday 18 March 2011] [09:40:43] &lt;sustrik&gt;   but it&#8217;s rather complex</div>
<div class="line">[Friday 18 March 2011] [09:40:48] &lt;<a href="#id446"><span class="problematic" id="id447">pieterh_</span></a>&gt;  all we need is a simple abstract API</div>
<div class="line">[Friday 18 March 2011] [09:40:52] &lt;<a href="#id448"><span class="problematic" id="id449">pieterh_</span></a>&gt;  shmem_get_block ()</div>
<div class="line">[Friday 18 March 2011] [09:40:56] &lt;<a href="#id450"><span class="problematic" id="id451">pieterh_</span></a>&gt;  shmem_write ()</div>
<div class="line">[Friday 18 March 2011] [09:41:00] &lt;<a href="#id452"><span class="problematic" id="id453">pieterh_</span></a>&gt;  etc. I have no idea...</div>
<div class="line">[Friday 18 March 2011] [09:41:05] &lt;sustrik&gt;   ah, at that level</div>
<div class="line">[Friday 18 March 2011] [09:41:21] &lt;sustrik&gt;   so not generic API for transports</div>
<div class="line">[Friday 18 March 2011] [09:41:30] &lt;mato&gt;      guys, re ROUTER, if we are going to formalize this then rather than just renaming XREP shouldn&#8217;t we think about what the real semantics are for people who wish to do routing by design?</div>
<div class="line">[Friday 18 March 2011] [09:41:30] &lt;<a href="#id454"><span class="problematic" id="id455">pieterh_</span></a>&gt;  no, only for shmem</div>
<div class="line">[Friday 18 March 2011] [09:41:31] &lt;sustrik&gt;   rather generic API for shmem</div>
<div class="line">[Friday 18 March 2011] [09:41:44] &lt;mato&gt;      since the current use of router has simply evolved out of what XREP provides.</div>
<div class="line">[Friday 18 March 2011] [09:41:46] &lt;<a href="#id456"><span class="problematic" id="id457">pieterh_</span></a>&gt;  sustrik: yes, just to solve this case</div>
<div class="line">[Friday 18 March 2011] [09:41:48] &lt;sustrik&gt;   spieterh: sure, feel free to implement</div>
<div class="line">[Friday 18 March 2011] [09:41:53] &lt;<a href="#id458"><span class="problematic" id="id459">pieterh_</span></a>&gt;  mato: yes, but it seems there&#8217;s no better way</div>
<div class="line">[Friday 18 March 2011] [09:42:12] &lt;<a href="#id460"><span class="problematic" id="id461">pieterh_</span></a>&gt;  sustrik: my problem is I have zero idea what a transport would need</div>
<div class="line">[Friday 18 March 2011] [09:42:14] &lt;mato&gt;      <a href="#id462"><span class="problematic" id="id463">pieterh_</span></a>: why so? there&#8217;s no hurry, 3.0 is a way away yet</div>
<div class="line">[Friday 18 March 2011] [09:42:17] &lt;sustrik&gt;   mato: ack</div>
<div class="line">[Friday 18 March 2011] [09:42:26] &lt;<a href="#id464"><span class="problematic" id="id465">pieterh_</span></a>&gt;  I&#8217;m happy to make shmem implementations of some defined API</div>
<div class="line">[Friday 18 March 2011] [09:42:37] &lt;mato&gt;      <a href="#id466"><span class="problematic" id="id467">pieterh_</span></a>: aren&#8217;t we supposed to be master programmers doing this well, rather than making rash decisions?</div>
<div class="line">[Friday 18 March 2011] [09:42:39] &lt;sustrik&gt;   pieterh: great</div>
<div class="line">[Friday 18 March 2011] [09:42:42] &lt;<a href="#id468"><span class="problematic" id="id469">pieterh_</span></a>&gt;  mato: there&#8217;s no hurry except the current names are painful</div>
<div class="line">[Friday 18 March 2011] [09:42:42] &lt;sustrik&gt;   mato: my feeling is people want SMTP like-semantivc</div>
<div class="line">[Friday 18 March 2011] [09:42:44] &lt;<a href="#id470"><span class="problematic" id="id471">pieterh_</span></a>&gt;  mato: lol</div>
<div class="line">[Friday 18 March 2011] [09:42:48] &lt;<a href="#id472"><span class="problematic" id="id473">pieterh_</span></a>&gt;  double lol</div>
<div class="line">[Friday 18 March 2011] [09:42:58] &lt;<a href="#id474"><span class="problematic" id="id475">pieterh_</span></a>&gt;  the man pages document code rather than code implementing man pages</div>
<div class="line">[Friday 18 March 2011] [09:43:10] &lt;mato&gt;      huh?</div>
<div class="line">[Friday 18 March 2011] [09:43:18] &lt;<a href="#id476"><span class="problematic" id="id477">pieterh_</span></a>&gt;  shrug</div>
<div class="line">[Friday 18 March 2011] [09:43:23] &lt;<a href="#id478"><span class="problematic" id="id479">pieterh_</span></a>&gt;  if you don&#8217;t know what I mean, forget it</div>
<div class="line">[Friday 18 March 2011] [09:43:42] &lt;<a href="#id480"><span class="problematic" id="id481">pieterh_</span></a>&gt;  anyhow, where is the rash decision?</div>
<div class="line">[Friday 18 March 2011] [09:43:51] &lt;<a href="#id482"><span class="problematic" id="id483">pieterh_</span></a>&gt;  there has been extensive discussion about the names of sockets</div>
<div class="line">[Friday 18 March 2011] [09:43:52] &lt;sustrik&gt;   mato: there&#8217;s one issue in the bugtracker to do with man pages</div>
<div class="line">[Friday 18 March 2011] [09:44:10] &lt;mato&gt;      but the names don&#8217;t fit with the big picture</div>
<div class="line">[Friday 18 March 2011] [09:44:10] &lt;sustrik&gt;   could you have a look at it?</div>
<div class="line">[Friday 18 March 2011] [09:44:12] &lt;<a href="#id484"><span class="problematic" id="id485">pieterh_</span></a>&gt;  and renaming XREP and XREQ has been agreed by the list, with total consensus</div>
<div class="line">[Friday 18 March 2011] [09:44:24] &lt;mato&gt;      i love your dogmatism</div>
<div class="line">[Friday 18 March 2011] [09:44:25] &lt;<a href="#id486"><span class="problematic" id="id487">pieterh_</span></a>&gt;  mato: what big picture? show me the design docs...</div>
<div class="line">[Friday 18 March 2011] [09:44:29] &lt;mato&gt;      4 people replied</div>
<div class="line">[Friday 18 March 2011] [09:44:31] &lt;<a href="#id488"><span class="problematic" id="id489">pieterh_</span></a>&gt;  if it&#8217;s just in someone&#8217;s head, it&#8217;s not on paper</div>
<div class="line">[Friday 18 March 2011] [09:44:34] &lt;mato&gt;      total consensus</div>
<div class="line">[Friday 18 March 2011] [09:44:41] &lt;<a href="#id490"><span class="problematic" id="id491">pieterh_</span></a>&gt;  4 people replied, no-one said no, that&#8217;s total consensus, yes</div>
<div class="line">[Friday 18 March 2011] [09:44:52] &lt;<a href="#id492"><span class="problematic" id="id493">pieterh_</span></a>&gt;  it&#8217;s not exactly a hypertalkative list</div>
<div class="line">[Friday 18 March 2011] [09:44:58] &lt;mato&gt;      right.</div>
<div class="line">[Friday 18 March 2011] [09:45:03] &lt;<a href="#id494"><span class="problematic" id="id495">pieterh_</span></a>&gt;  but if you want to veto it, go for it</div>
<div class="line">[Friday 18 March 2011] [09:45:28] &lt;<a href="#id496"><span class="problematic" id="id497">pieterh_</span></a>&gt;  I&#8217;m going to switch to the new names ASAP in any case</div>
<div class="line">[Friday 18 March 2011] [09:45:37] &lt;mato&gt;      right, so you&#8217;re going to fork the api</div>
<div class="line">[Friday 18 March 2011] [09:45:46] &lt;<a href="#id498"><span class="problematic" id="id499">pieterh_</span></a>&gt;  no, I&#8217;m implementing the consensus</div>
<div class="line">[Friday 18 March 2011] [09:45:47] &lt;mato&gt;      thanks for that.</div>
<div class="line">[Friday 18 March 2011] [09:45:54] &lt;<a href="#id500"><span class="problematic" id="id501">pieterh_</span></a>&gt;  if you don&#8217;t want to follow, fork the API</div>
<div class="line">[Friday 18 March 2011] [09:45:59] &lt;<a href="#id502"><span class="problematic" id="id503">pieterh_</span></a>&gt;  please don&#8217;t be silly, mato</div>
<div class="line">[Friday 18 March 2011] [09:46:05] &lt;<a href="#id504"><span class="problematic" id="id505">pieterh_</span></a>&gt;  this was discussed ad nauseam</div>
<div class="line">[Friday 18 March 2011] [09:46:28] &lt;<a href="#id506"><span class="problematic" id="id507">pieterh_</span></a>&gt;  Just like a 3.0 version will &#8216;fork the api&#8217;?</div>
<div class="line">[Friday 18 March 2011] [09:46:33] &lt;<a href="#id508"><span class="problematic" id="id509">pieterh_</span></a>&gt;  improvements that solve real problems people face</div>
<div class="line">[Friday 18 March 2011] [09:46:49] &lt;<a href="#id510"><span class="problematic" id="id511">pieterh_</span></a>&gt;  if you find this offensive, well... sigh</div>
<div class="line">[Friday 18 March 2011] [09:47:01] &lt;mato&gt;      forget it</div>
<div class="line">[Friday 18 March 2011] [09:47:07] &lt;<a href="#id512"><span class="problematic" id="id513">pieterh_</span></a>&gt;  whatever</div>
<div class="line">[Friday 18 March 2011] [09:47:18] &lt;<a href="#id514"><span class="problematic" id="id515">pieterh_</span></a>&gt;  discuss on that thread, it&#8217;s public</div>
<div class="line">[Friday 18 March 2011] [09:47:21] &lt;<a href="#id516"><span class="problematic" id="id517">pieterh_</span></a>&gt;  give your reasons</div>
<div class="line">[Friday 18 March 2011] [09:47:53] &lt;mato&gt;      sure.</div>
<div class="line">[Friday 18 March 2011] [09:52:53] &lt;drbobbeaty&gt;        Guys, I don&#8217;t mean to poke my ideas in in the middle of a discussion, but would there be a significant issue if the 2.x codebase used BOTH names, and then the 3.x codebase used just the &#8216;new&#8217; one? That way, people that use the names for a significant part of their understanding of their function can have both while not breaking backward compatibility.</div>
<div class="line">[Friday 18 March 2011] [09:53:50] &lt;drbobbeaty&gt;        I can see that names are important to understand, I deal with that from the users of my libraries every day. I sweat the names for a long time to make sure they are concise, descriptive, and clear.</div>
<div class="line">[Friday 18 March 2011] [09:53:54] &lt;ianbarber&gt; upstream downstream were (are?) still valid</div>
<div class="line">[Friday 18 March 2011] [09:54:38] &lt;drbobbeaty&gt;        But I can also see that the original design was based on these names, and they, too, have value to a group of users for just that reason. They understand the library and function in terms of these names.</div>
<div class="line">[Friday 18 March 2011] [09:54:48] &lt;drbobbeaty&gt;        Just my USD $0.02</div>
<div class="line">[Friday 18 March 2011] [09:55:59] &lt;sustrik&gt;   drbobbeaty: i think almost everybody agrees that ZMQ_ROUTER being introduced</div>
<div class="line">[Friday 18 March 2011] [09:56:19] &lt;sustrik&gt;   the discussion was about whether original XREP should remain as a different socket type</div>
<div class="line">[Friday 18 March 2011] [09:56:53] &lt;drbobbeaty&gt;        Oh... there... I should have stayed quiet. I thought it was about a name change. Please forgive my ignorance.</div>
<div class="line">[Friday 18 March 2011] [09:57:09] &lt;mato&gt;      sustrik: that is precisely the point.</div>
<div class="line">[Friday 18 March 2011] [10:00:22] &lt;jhawk28&gt;   I suspect that it will become more clear as more &#8220;devices&#8221; are written</div>
<div class="line">[Friday 18 March 2011] [10:04:45] &lt;mato&gt;      sustrik: SMTP, yes, that&#8217;s an interesting insight</div>
<div class="line">[Friday 18 March 2011] [10:04:50] &lt;mato&gt;      sustrik: I think you&#8217;re right</div>
<div class="line">[Friday 18 March 2011] [10:05:14] &lt;mato&gt;      sustrik: what is the manpage issue? i can&#8217;t find it...</div>
<div class="line">[Friday 18 March 2011] [10:05:20] &lt;sustrik&gt;   jhaw28: i would say so</div>
<div class="line">[Friday 18 March 2011] [10:05:38] &lt;sustrik&gt;   mato: let me see</div>
<div class="line">[Friday 18 March 2011] [10:08:49] &lt;sustrik&gt;   mato: issue 130</div>
<div class="line">[Friday 18 March 2011] [10:10:11] &lt;mile&gt;      hi</div>
<div class="line">[Friday 18 March 2011] [10:10:17] &lt;jhawk28&gt;   b.....tlllrrrrr</div>
<div class="line">[Friday 18 March 2011] [10:10:19] &lt;jhawk28&gt;   ]</div>
<div class="line">[Friday 18 March 2011] [10:10:27] &lt;mile&gt;      does anyone have hands-on experience with erlang bindings?</div>
<div class="line">[Friday 18 March 2011] [10:11:33] &lt;mato&gt;      sustrik: hmm, i can see how that might a bug in the manpage, but isn&#8217;t it just exposing an inconsistency in the internal implementation?</div>
<div class="line">[Friday 18 March 2011] [10:11:52] &lt;sustrik&gt;   mile: ask yrashk</div>
<div class="line">[Friday 18 March 2011] [10:12:02] &lt;sustrik&gt;   he should be here i think</div>
<div class="line">[Friday 18 March 2011] [10:12:02] &lt;mato&gt;      sustrik: shouldn&#8217;t the blocking behaviour be identical irrespective of the use of bind/connect?</div>
<div class="line">[Friday 18 March 2011] [10:12:16] &lt;sustrik&gt;   the problem is that on bind side</div>
<div class="line">[Friday 18 March 2011] [10:12:22] &lt;sustrik&gt;   when there&#8217;s no connection</div>
<div class="line">[Friday 18 March 2011] [10:12:25] &lt;sustrik&gt;   there&#8217;s no queue</div>
<div class="line">[Friday 18 March 2011] [10:12:27] &lt;mile&gt;      sustrik, tx, will do</div>
<div class="line">[Friday 18 March 2011] [10:12:39] &lt;mato&gt;      sustrik: yes, you&#8217;re describing the implementation</div>
<div class="line">[Friday 18 March 2011] [10:12:41] &lt;sustrik&gt;   and thus nowhere to store the message in</div>
<div class="line">[Friday 18 March 2011] [10:13:33] &lt;sustrik&gt;   the alternative would be to have one pipe pre-prepared even on bind side</div>
<div class="line">[Friday 18 March 2011] [10:13:41] &lt;sustrik&gt;   and assign it to first connected peer</div>
<div class="line">[Friday 18 March 2011] [10:13:55] &lt;mato&gt;      that would seem to result in more consistent behaviour on the user side</div>
<div class="line">[Friday 18 March 2011] [10:14:09] &lt;sustrik&gt;   ok, then create an issue for that</div>
<div class="line">[Friday 18 March 2011] [10:14:17] &lt;yrashk&gt;    sustrik: mile I am here</div>
<div class="line">[Friday 18 March 2011] [10:14:17] &lt;sustrik&gt;   so that we don&#8217;t forget</div>
<div class="line">[Friday 18 March 2011] [10:14:27] &lt;mato&gt;      alright.</div>
<div class="line">[Friday 18 March 2011] [10:14:32] &lt;mile&gt;      yrashk, hi, great :)</div>
<div class="line">[Friday 18 March 2011] [10:14:46] &lt;mile&gt;      i&#8217;m looking into connecting yaws to 0mq</div>
<div class="line">[Friday 18 March 2011] [10:14:56] &lt;mile&gt;      as a http front-end</div>
<div class="line">[Friday 18 March 2011] [10:15:16] &lt;mile&gt;      but I&#8217;m not sure about the state of the erlang bindings</div>
<div class="line">[Friday 18 March 2011] [10:15:45] &lt;yrashk&gt;    mile: what do you mean?</div>
<div class="line">[Friday 18 March 2011] [10:15:46] &lt;mile&gt;      since the alternative is hacking nginx, which I would very much like to avoid :)</div>
<div class="line">[Friday 18 March 2011] [10:16:08] &lt;yrashk&gt;    mile: what exactly are you worried about re: state?</div>
<div class="line">[Friday 18 March 2011] [10:16:31] &lt;mile&gt;      the bindings page states the both versions are not API compatible</div>
<div class="line">[Friday 18 March 2011] [10:16:54] &lt;mile&gt;      and I couldn&#8217;t find much of the benchmarks regarding the performance</div>
<div class="line">[Friday 18 March 2011] [10:17:38] &lt;yrashk&gt;    mile: short version: erlzmq is slow, erlzmq2 is fast</div>
<div class="line">[Friday 18 March 2011] [10:17:57] &lt;yrashk&gt;    on 1byte messages erlzmq2 does 1.3mln/sec (localhost) [on my mac pro]</div>
<div class="line">[Friday 18 March 2011] [10:18:03] &lt;yrashk&gt;    on 1Kbyte messages &#8211; about 300K/sec</div>
<div class="line">[Friday 18 March 2011] [10:18:37] &lt;mile&gt;      that should saturate a gbit ethernet, right?</div>
<div class="line">[Friday 18 March 2011] [10:18:41] &lt;yrashk&gt;    their API are close to each other, though &#8211; but not exactly the same, but fairly close</div>
<div class="line">[Friday 18 March 2011] [10:18:47] &lt;yrashk&gt;    hopefully, I guess</div>
<div class="line">[Friday 18 March 2011] [10:18:48] &lt;yrashk&gt;    never tried yet</div>
<div class="line">[Friday 18 March 2011] [10:19:01] &lt;mile&gt;      ok, thanks!</div>
<div class="line">[Friday 18 March 2011] [10:19:09] &lt;mile&gt;      i will be looking into this</div>
<div class="line">[Friday 18 March 2011] [10:19:25] &lt;mile&gt;      and report if I find something interesing ;)</div>
<div class="line">[Friday 18 March 2011] [10:19:34] &lt;sustrik&gt;   300K/sec = 2.45Gb/sec</div>
<div class="line">[Friday 18 March 2011] [10:20:08] &lt;mile&gt;      yeah :)</div>
<div class="line">[Friday 18 March 2011] [10:21:26] &lt;yrashk&gt;    mile: for erlzmq2, you have to have &gt;=R14B01</div>
<div class="line">[Friday 18 March 2011] [10:21:34] &lt;yrashk&gt;    as it is a NIF-based binding</div>
<div class="line">[Friday 18 March 2011] [10:21:49] &lt;mato&gt;      sustrik: i guess i should close the original issue then?</div>
<div class="line">[Friday 18 March 2011] [10:22:01] &lt;yrashk&gt;    mile: sure, I&#8217;d be pleased to see reports, erlzmq2 is fairly young</div>
<div class="line">[Friday 18 March 2011] [10:22:05] &lt;yrashk&gt;    but seems to work well</div>
<div class="line">[Friday 18 March 2011] [10:22:10] &lt;sustrik&gt;   yes, just mention the number of the new one when closing it</div>
<div class="line">[Friday 18 March 2011] [10:22:14] &lt;yrashk&gt;    if anything evax and I always ready to fix it :)</div>
<div class="line">[Friday 18 March 2011] [10:22:34] &lt;mile&gt;      yrashk, greta :)</div>
<div class="line">[Friday 18 March 2011] [10:22:54] &lt;mile&gt;      I&#8217;ll try to make a good benchmark for aws+0mq</div>
<div class="line">[Friday 18 March 2011] [10:23:01] &lt;mile&gt;      yaws*</div>
<div class="line">[Friday 18 March 2011] [10:23:17] &lt;mile&gt;      kind of like mongrail2</div>
<div class="line">[Friday 18 March 2011] [10:23:37] &lt;mile&gt;      thats what I&#8217;m aiming for</div>
<div class="line">[Friday 18 March 2011] [10:23:48] &lt;mile&gt;      only simpler and hopefully much faster</div>
<div class="line">[Friday 18 March 2011] [10:23:57] &lt;sustrik&gt;   mile: as for intreraction with nginx, meto mentioned he&#8217;s going to have a look at that</div>
<div class="line">[Friday 18 March 2011] [10:24:23] &lt;mato&gt;      i will, if i get the funding :-)</div>
<div class="line">[Friday 18 March 2011] [10:24:49] &lt;yrashk&gt;    mile: just please understand that those beforementioned benchmarks are from localhost</div>
<div class="line">[Friday 18 March 2011] [10:24:51] &lt;mile&gt;      I looked into it a couple of days ago, but it kind of freaked me out</div>
<div class="line">[Friday 18 March 2011] [10:24:57] &lt;yrashk&gt;    I haven&#8217;t tested anything else yet</div>
<div class="line">[Friday 18 March 2011] [10:25:21] &lt;mile&gt;      yrashk, sure, I will be setting up 2 boxes on a gbit switch</div>
<div class="line">[Friday 18 March 2011] [10:25:31] &lt;mile&gt;      and see how they perform</div>
<div class="line">[Friday 18 March 2011] [10:25:34] &lt;yrashk&gt;    sweet</div>
<div class="line">[Friday 18 March 2011] [10:25:49] &lt;yrashk&gt;    mile: please send them over if possible (<a class="reference external" href="mailto:yrashk&#37;&#52;&#48;gmail&#46;com">yrashk<span>&#64;</span>gmail<span>&#46;</span>com</a>)</div>
<div class="line">[Friday 18 March 2011] [10:25:50] &lt;mile&gt;      and try to replicate the ck1mil</div>
<div class="line">[Friday 18 March 2011] [10:26:44] &lt;mile&gt;      I hope I&#8217;ll manage to do it next week</div>
<div class="line">[Friday 18 March 2011] [10:26:53] &lt;mile&gt;      then I&#8217;m gone for like 10 days :)</div>
<div class="line">[Friday 18 March 2011] [10:27:35] &lt;mile&gt;      but both nginx and yaws plugins would be very very cool stuff :)</div>
<div class="line">[Friday 18 March 2011] [10:27:59] &lt;mile&gt;      hopefully I&#8217;ll get something useful to opensource :)</div>
<div class="line">[Friday 18 March 2011] [10:28:15] &lt;mato&gt;      mile: i&#8217;ve been poring over the nginx internals, it looks doable but non-trivial</div>
<div class="line">[Friday 18 March 2011] [10:28:48] &lt;mile&gt;      mato, I was looking into proxy-modules for that, but my C is not good enough...</div>
<div class="line">[Friday 18 March 2011] [10:29:02] &lt;mile&gt;      since it in deed appears to be nontrivial :)</div>
<div class="line">[Friday 18 March 2011] [10:29:14] &lt;mato&gt;      mile: my C is more than good enough, but it&#8217;s still a non-trivial amount of work.</div>
<div class="line">[Friday 18 March 2011] [10:29:31] &lt;mile&gt;      but yaws has a very elegant way of attaching stuff</div>
<div class="line">[Friday 18 March 2011] [10:29:42] &lt;mato&gt;      yaws? /me goes off to google that</div>
<div class="line">[Friday 18 March 2011] [10:29:49] &lt;mile&gt;      erlang yaws</div>
<div class="line">[Friday 18 March 2011] [10:30:12] &lt;mile&gt;      so I&#8217;ll be looking into the performance of that combo</div>
<div class="line">[Friday 18 March 2011] [10:30:25] &lt;mato&gt;      aha, ok</div>
<div class="line">[Friday 18 March 2011] [10:30:29]      * mato has no erlang-fu</div>
<div class="line">[Friday 18 March 2011] [10:31:18] &lt;mile&gt;      my erlang is not that good</div>
<div class="line">[Friday 18 March 2011] [10:31:26] &lt;mile&gt;      but it&#8217;s straitforward as hell</div>
<div class="line">[Friday 18 March 2011] [10:31:41] &lt;mile&gt;      as long as one had something to do with functional programming</div>
<div class="line">[Friday 18 March 2011] [10:31:41] &lt;mile&gt;      :)</div>
<div class="line">[Friday 18 March 2011] [10:32:26] &lt;yrashk&gt;    it is indeed very straightforward</div>
<div class="line">[Friday 18 March 2011] [10:33:20] &lt;mile&gt;      the only problem is that you don&#8217;t get to find many erlang developers</div>
<div class="line">[Friday 18 March 2011] [10:33:31] &lt;mile&gt;      so its hard to sell it</div>
<div class="line">[Friday 18 March 2011] [10:33:42] &lt;mile&gt;      in small companies - hence the 0mq</div>
<div class="line">[Friday 18 March 2011] [10:34:02] &lt;mile&gt;      make the frontend in less then 100lines of erlang</div>
<div class="line">[Friday 18 March 2011] [10:34:26] &lt;yrashk&gt;    mile: my company is about to change it (i.e. make erlang more popular)</div>
<div class="line">[Friday 18 March 2011] [10:34:29] &lt;mile&gt;      and let others use whatever they want on the other side of 0mq</div>
<div class="line">[Friday 18 March 2011] [10:34:30] &lt;yrashk&gt;    :)</div>
<div class="line">[Friday 18 March 2011] [10:35:17] &lt;mile&gt;      thats a good thing! :)</div>
<div class="line">[Friday 18 March 2011] [10:35:45] &lt;mile&gt;      I had contact with haskell some time ago, and I&#8217;m sincerely charmed by erlang :)</div>
<div class="line">[Friday 18 March 2011] [10:35:59] &lt;yrashk&gt;    nice!</div>
<div class="line">[Friday 18 March 2011] [10:36:10] &lt;yrashk&gt;    I&#8217;ve been doing erlang on and off since 2001</div>
<div class="line">[Friday 18 March 2011] [10:37:11] &lt;mile&gt;      that&#8217;s a while :)</div>
<div class="line">[Friday 18 March 2011] [10:37:39] &lt;mile&gt;      I pinged you, hopefully next week I&#8217;ll have some data</div>
<div class="line">[Friday 18 March 2011] [10:38:03] &lt;yrashk&gt;    sweet</div>
<div class="line">[Friday 18 March 2011] [10:38:05] &lt;yrashk&gt;    thanks</div>
<div class="line">[Friday 18 March 2011] [10:39:00] &lt;mile&gt;      I&#8217;m off for a weekend, thanks for the advice!</div>
<div class="line">[Friday 18 March 2011] [11:03:16] &lt;Guthur&gt;    pieterh &amp; sustrik: was that long discussion just about the naming of XREP and XREQ</div>
<div class="line">[Friday 18 March 2011] [11:04:05] &lt;sustrik&gt;   it was not about naming :)</div>
<div class="line">[Friday 18 March 2011] [11:04:40] &lt;sustrik&gt;   ultimately, it was about what should be done by 0mq itself and what should be done by the layers on top of it</div>
<div class="line">[Friday 18 March 2011] [11:05:58] &lt;Guthur&gt;    sustrik: ok, sorry I just came back and it was very long and I found it hard to figure out what was going on</div>
<div class="line">[Friday 18 March 2011] [11:06:17] &lt;sustrik&gt;   there&#8217;s a thread on the ML if you are interested</div>
<div class="line">[Friday 18 March 2011] [11:09:31] &lt;Guthur&gt;    ok, I&#8217;ll check it out</div>
<div class="line">[Friday 18 March 2011] [11:24:46] &lt;sustrik&gt;   pieterh: still here?</div>
<div class="line">[Friday 18 March 2011] [11:25:10] &lt;sustrik&gt;   the use case for the error you&#8217;ve reported have scrolled out of my irc window</div>
<div class="line">[Friday 18 March 2011] [11:25:15] &lt;sustrik&gt;   can you repost it?</div>
<div class="line">[Friday 18 March 2011] [11:29:19] &lt;sustrik&gt;   &lt;sustrik&gt; the use case for the error you&#8217;ve reported have scrolled out of my irc window</div>
<div class="line">[Friday 18 March 2011] [11:29:19] &lt;sustrik&gt;   &lt;sustrik&gt; can you repost it?</div>
<div class="line">[Friday 18 March 2011] [11:29:35] &lt;sustrik&gt;   <a href="#id518"><span class="problematic" id="id519">pieterh_</span></a>: ^^</div>
<div class="line">[Friday 18 March 2011] [11:29:55] &lt;<a href="#id520"><span class="problematic" id="id521">pieterh_</span></a>&gt;  sustrik: sorry, was offline for a while</div>
<div class="line">[Friday 18 March 2011] [11:30:01] &lt;sustrik&gt;   np</div>
<div class="line">[Friday 18 March 2011] [11:30:02] &lt;<a href="#id522"><span class="problematic" id="id523">pieterh_</span></a>&gt;  you lost the URIs?</div>
<div class="line">[Friday 18 March 2011] [11:30:06] &lt;sustrik&gt;   yep</div>
<div class="line">[Friday 18 March 2011] [11:30:10] &lt;<a href="#id524"><span class="problematic" id="id525">pieterh_</span></a>&gt;  <a class="reference external" href="https://gist.github.com/875932">https://gist.github.com/875932</a></div>
<div class="line">[Friday 18 March 2011] [11:30:14] &lt;sustrik&gt;   thanks</div>
<div class="line">[Friday 18 March 2011] [11:30:21] &lt;<a href="#id526"><span class="problematic" id="id527">pieterh_</span></a>&gt;  it looks like the first frame after a handshake gets lost</div>
<div class="line">[Friday 18 March 2011] [11:30:34]      * sustrik is having a look...</div>
<div class="line">[Friday 18 March 2011] [11:30:36] &lt;<a href="#id528"><span class="problematic" id="id529">pieterh_</span></a>&gt;  but randomly...</div>
<div class="line">[Friday 18 March 2011] [11:30:43] &lt;<a href="#id530"><span class="problematic" id="id531">pieterh_</span></a>&gt;  thanks, I appreciate it, it&#8217;s blocking me</div>
<div class="line">[Friday 18 March 2011] [11:40:31] &lt;evax&gt;      working on erlzmq2 some weird behaviour happens at times: after calling zmq_term and our own poller thread has ended, one thread enters a busy loop because SIGFE is trapped but keeps being raised</div>
<div class="line">[Friday 18 March 2011] [11:40:54] &lt;evax&gt;      <a href="#id1"><span class="problematic" id="id2">*</span></a>SIGFPE</div>
<div class="line">[Friday 18 March 2011] [11:43:01] &lt;evax&gt;      when zmq_term returns, all zmq threads have ended ?</div>
<div class="line">[Friday 18 March 2011] [11:46:59] &lt;<a href="#id532"><span class="problematic" id="id533">pieterh_</span></a>&gt;  evax: it should say so in the man page</div>
<div class="line">[Friday 18 March 2011] [11:48:48] &lt;mikko-_&gt;   pieter: all 2-1 builds succeed now</div>
<div class="line">[Friday 18 March 2011] [11:49:27] &lt;<a href="#id534"><span class="problematic" id="id535">pieterh_</span></a>&gt;  mikko: yup</div>
<div class="line">[Friday 18 March 2011] [11:49:37] &lt;evax&gt;      <a href="#id536"><span class="problematic" id="id537">pieterh_</span></a>: thanks, I was reading an outdated man page...</div>
<div class="line">[Friday 18 March 2011] [11:49:40] &lt;<a href="#id538"><span class="problematic" id="id539">pieterh_</span></a>&gt;  there are a couple of issues still to close, then 2-1 is ready to release</div>
<div class="line">[Friday 18 March 2011] [11:50:03] &lt;<a href="#id540"><span class="problematic" id="id541">pieterh_</span></a>&gt;  evax: does it say something useful in the man page?</div>
<div class="line">[Friday 18 March 2011] [11:51:40] &lt;evax&gt;      <a href="#id542"><span class="problematic" id="id543">pieterh_</span></a>: that it can fail with EINTR now</div>
<div class="line">[Friday 18 March 2011] [11:52:21] &lt;<a href="#id544"><span class="problematic" id="id545">pieterh_</span></a>&gt;  ok</div>
<div class="line">[Friday 18 March 2011] [12:26:52] &lt;evax&gt;      <a href="#id546"><span class="problematic" id="id547">pieterh_</span></a>: in the case of inproc sockets, is it possible that a zmq_recv succeeds before the associated send returns ?</div>
<div class="line">[Friday 18 March 2011] [12:28:56] &lt;evax&gt;      this is with a PUSH/PULL pair and the zmq_recv if right after a zmq_poll</div>
<div class="line">[Friday 18 March 2011] [12:30:21] &lt;sustrik&gt;   yes, it&#8217;s possible</div>
<div class="line">[Friday 18 March 2011] [12:30:55] &lt;evax&gt;      sustrik: thanks, then that&#8217;s what&#8217;s biting us</div>
<div class="line">[Friday 18 March 2011] [12:33:07] &lt;Guthur&gt;    evax: out of curiosity what are you working on for erlzmq?</div>
<div class="line">[Friday 18 March 2011] [12:33:28] &lt;Guthur&gt;    it is elrzmq, correct?</div>
<div class="line">[Friday 18 March 2011] [12:34:45] &lt;evax&gt;      we send a message to shut down the system, and sometimes before the zmq_send returns our polling thread recvs the request, closes the sockets and terminates the context, and this fires the SIGFPE busyloop in the original thread</div>
<div class="line">[Friday 18 March 2011] [12:34:57] &lt;evax&gt;      Guthur: erlzmq2, the NIF base version</div>
<div class="line">[Friday 18 March 2011] [12:35:55] &lt;Guthur&gt;    ah ok</div>
<div class="line">[Friday 18 March 2011] [12:36:09] &lt;Guthur&gt;    so you are using zmq to manage the state of your zmq binding</div>
<div class="line">[Friday 18 March 2011] [12:36:14] &lt;Guthur&gt;    many kudos there, hehe</div>
<div class="line">[Friday 18 March 2011] [12:39:11] &lt;evax&gt;      Guthur: I wanted to implementing non blocking send, but I stumbled on this busy loop issue</div>
<div class="line">[Friday 18 March 2011] [12:39:54] &lt;evax&gt;      Guthur: yeah, it felt really natural</div>
<div class="line">[Friday 18 March 2011] [12:40:23] &lt;michelp&gt;   wow you guys overflowed my backscroll :)</div>
<div class="line">[Friday 18 March 2011] [12:40:45] &lt;Guthur&gt;    it has been very busy today</div>
<div class="line">[Friday 18 March 2011] [12:41:37] &lt;Guthur&gt;    I&#8217;m still digesting the XREP vs. ROUTER stuff, the details are on the mailing list though</div>
<div class="line">[Friday 18 March 2011] [12:42:46] &lt;Guthur&gt;    sustrik: if XREP really could suddenly change, it probably should never have been exposed</div>
<div class="line">[Friday 18 March 2011] [12:43:03] &lt;Guthur&gt;    but I suppose that&#8217;s been argued already</div>
<div class="line">[Friday 18 March 2011] [12:43:21] &lt;sustrik&gt;   yup</div>
<div class="line">[Friday 18 March 2011] [12:54:46] &lt;Guthur&gt;    and those cool devices that guide demonstrates are pretty cool</div>
<div class="line">[Friday 18 March 2011] [12:54:51] &lt;Guthur&gt;    would be a shame if they broke</div>
<div class="line">[Friday 18 March 2011] [12:58:18] &lt;sustrik&gt;   i&#8217;m not proposing to break them</div>
<div class="line">[Friday 18 March 2011] [12:58:36] &lt;sustrik&gt;   it was just illustration</div>
<div class="line">[Friday 18 March 2011] [14:09:34] &lt;evax&gt;      sustrik: erlzmq2 can no more block the VM on send</div>
<div class="line">[Friday 18 March 2011] [14:09:55] &lt;sustrik&gt;   nice!</div>
<div class="line">[Friday 18 March 2011] [14:10:16] &lt;sustrik&gt;   thanks for quick fix</div>
<div class="line">[Friday 18 March 2011] [14:11:25] &lt;evax&gt;      np, let me know if there are other features missing</div>
<div class="line">[Friday 18 March 2011] [14:15:54] &lt;sustrik&gt;   sure</div>
<div class="line">[Friday 18 March 2011] [14:49:59] &lt;<a href="#id548"><span class="problematic" id="id549">pieterh_</span></a>&gt;  sustrik: sorry, was away... did you manage to reproduce the pub-sub issue?</div>
<div class="line">[Friday 18 March 2011] [15:16:21] &lt;pieterh&gt;   ok, reproduced on second box</div>
<div class="line">[Friday 18 March 2011] [16:17:05] &lt;Guthur&gt;    pieterh, do you mean to not increment the sequence in that gist?</div>
<div class="line">[Friday 18 March 2011] [18:08:59] &lt;rfw&gt;       hi there, does the pyzmq.eventloop ioloop have epoll support like tornado&#8217;s?</div>
<div class="line">[Friday 18 March 2011] [18:53:33] &lt;yrashk&gt;    so 8 years for saleyn :-(((</div>
<div class="line">[Friday 18 March 2011] [19:43:19] &lt;Guthur&gt;    yrashk, have you seen the first paragraph of the wiki page</div>
<div class="line">[Friday 18 March 2011] [19:44:07] &lt;Guthur&gt;    Goldman Sachs code, which is described as &#8220;there is a danger that somebody who knew how to use this program could use it to manipulate markets in unfair ways.&#8221;</div>
<div class="line">[Friday 18 March 2011] [19:44:23] &lt;Guthur&gt;    but it&#8217;s fine for Goldman to have it</div>
<div class="line">[Saturday 19 March 2011] [08:13:02] &lt;Guthur&gt;  pieterh, some of the code examples in ch4 have lines of code longer than the width of the code box</div>
<div class="line">[Saturday 19 March 2011] [08:13:19] &lt;Guthur&gt;  only a minor issue, but thought it worth raising.</div>
<div class="line">[Saturday 19 March 2011] [08:13:30] &lt;Guthur&gt;  I&#8217;m using chrome, if it matter</div>
<div class="line">[Saturday 19 March 2011] [09:55:56] &lt;FlaPer87&gt;        hi everyone, is it possible to have 2 threads listening to the same zmq socket? is there an example here[0] showing that? <a class="reference external" href="https://github.com/imatix/zguide">https://github.com/imatix/zguide</a></div>
<div class="line">[Saturday 19 March 2011] [09:58:09] &lt;mikko&gt;   FlaPer87: no</div>
<div class="line">[Saturday 19 March 2011] [09:58:28] &lt;FlaPer87&gt;        mikko ok, thnx :)</div>
<div class="line">[Saturday 19 March 2011] [09:58:30] &lt;mikko&gt;   FlaPer87: you can not access the same socket from multiple threads concurrently</div>
<div class="line">[Saturday 19 March 2011] [09:58:34] &lt;mikko&gt;   FlaPer87: what is the use-case?</div>
<div class="line">[Saturday 19 March 2011] [09:59:00] &lt;mikko&gt;   sec, my fish stock is boiling over</div>
<div class="line">[Saturday 19 March 2011] [10:00:27] &lt;FlaPer87&gt;        mikko I was wondering if that was possible in order to process more messages p/second. Now that I think about it that was a stupid question :P</div>
<div class="line">[Saturday 19 March 2011] [10:10:02] &lt;Guthur&gt;  FlaPer87, there is some examples in the guide showing custom routing to N worker threads</div>
<div class="line">[Saturday 19 March 2011] [10:10:30] &lt;Guthur&gt;  lruqueue, shows a device doing this</div>
<div class="line">[Saturday 19 March 2011] [10:13:47] &lt;Guthur&gt;  or the parallel pipeline pattern shown here;  <a class="reference external" href="http://zguide.zeromq.org/page:all#toc8">http://zguide.zeromq.org/page:all#toc8</a></div>
<div class="line">[Saturday 19 March 2011] [10:14:20] &lt;FlaPer87&gt;        Guthur, that&#8217;s useful, let me check</div>
<div class="line">[Saturday 19 March 2011] [10:14:26] &lt;FlaPer87&gt;        Guthur thnx</div>
<div class="line">[Saturday 19 March 2011] [12:13:16] &lt;<a href="#id550"><span class="problematic" id="id551">dermoth_</span></a>&gt;        FlaPer87, you can have two threads connect to the same endpoint... if the connection has to be incoming, you can use a device in the middle</div>
<div class="line">[Saturday 19 March 2011] [12:14:16] &lt;<a href="#id552"><span class="problematic" id="id553">dermoth_</span></a>&gt;        ime. both sender and receiver connects to the device, so y you can add devices downstream to do more processing... I assume PUSH/PULL sockets here...</div>
<div class="line">[Saturday 19 March 2011] [13:27:36] &lt;sustrik&gt; pieterh: are you here?</div>
<div class="line">[Saturday 19 March 2011] [13:27:58] &lt;sustrik&gt; it would be good to link zed shaw&#8217;s and ian barber&#8217;s talk from somewhere</div>
<div class="line">[Saturday 19 March 2011] [13:27:59] &lt;sustrik&gt; <a class="reference external" href="http://vimeo.com/20605470">http://vimeo.com/20605470</a></div>
<div class="line">[Saturday 19 March 2011] [13:28:18]    * sustrik has no idea how to embed video into wikidot</div>
<div class="line">[Saturday 19 March 2011] [13:31:00] &lt;Guthur&gt;  sustrik, It was a shame about the GSoC, did they give any suggestions on how to improve the application for the future?</div>
<div class="line">[Saturday 19 March 2011] [14:07:41] &lt;sustrik&gt; Guthur: nope</div>
<div class="line">[Saturday 19 March 2011] [14:07:57] &lt;sustrik&gt; what i resent is what i got</div>
<div class="line">[Saturday 19 March 2011] [14:08:19] &lt;Guthur&gt;  shame, btw you can embed HTML in wikidot</div>
<div class="line">[Saturday 19 March 2011] [14:08:38] &lt;Guthur&gt;  you should be able to use the embed markup there</div>
<div class="line">[Saturday 19 March 2011] [14:08:54] &lt;Guthur&gt;  for Ian and Zed&#8217;s videos</div>
<div class="line">[Saturday 19 March 2011] [14:13:52] &lt;sustrik&gt; no idea how to do that</div>
<div class="line">[Saturday 19 March 2011] [14:13:58] &lt;sustrik&gt; would you like to give it a try?</div>
<div class="line">[Saturday 19 March 2011] [14:14:23] &lt;sustrik&gt; say here:</div>
<div class="line">[Saturday 19 March 2011] [14:14:24] &lt;sustrik&gt; <a class="reference external" href="http://www.zeromq.org/intro:read-the-manual">http://www.zeromq.org/intro:read-the-manual</a></div>
<div class="line">[Saturday 19 March 2011] [14:49:02] &lt;Guthur&gt;  sustrik, sure</div>
<div class="line">[Saturday 19 March 2011] [14:50:16] &lt;Guthur&gt;  sustrik, there is already videos on that page, should just take a small amount of &#8216;reverse engineering&#8217;, hehe</div>
<div class="line">[Saturday 19 March 2011] [15:08:38] &lt;Guthur&gt;  sustrik, ok done</div>
<div class="line">[Saturday 19 March 2011] [15:09:09] &lt;Guthur&gt;  I tried to maintain the aspect ratio so they are a little taller than the other videos</div>
<div class="line">[Saturday 19 March 2011] [15:11:48] &lt;guido_g&gt; i&#8217;ll never understand why a link is not enough... must be this web 2.0 thing...</div>
<div class="line">[Saturday 19 March 2011] [15:13:08] &lt;Guthur&gt;  certainly takes up less room</div>
<div class="line">[Saturday 19 March 2011] [15:13:41] &lt;guido_g&gt; and i&#8217;m free to decide if want to see it or not</div>
<div class="line">[Saturday 19 March 2011] [15:23:32] &lt;Guthur&gt;  that would never do</div>
<div class="line">[Saturday 19 March 2011] [15:24:08] &lt;Guthur&gt;  think, i&#8217;ve people went round choosing what they did and did not watch, the marketing guys would be out of a job</div>
<div class="line">[Saturday 19 March 2011] [15:24:16] &lt;Guthur&gt;  i&#8217;ve/if</div>
<div class="line">[Saturday 19 March 2011] [15:25:46] &lt;guido_g&gt; k</div>
<div class="line">[Saturday 19 March 2011] [15:25:57] &lt;guido_g&gt; and where is the bad part?</div>
<div class="line">[Saturday 19 March 2011] [23:30:22] &lt;jsimmons&gt;        is there any way to mitigate the performance loss of (i&#8217;m presuming to blame zeromq here) adding more endpoints to a zmq socket?</div>
<div class="line">[Saturday 19 March 2011] [23:31:06] &lt;jsimmons&gt;        I presume it&#8217;s the push/pull pair rather than the pub/sub pair</div>
<div class="line">[Saturday 19 March 2011] [23:35:23] &lt;jsimmons&gt;        that&#8217;s actually a bad way to put it, rephrasing. is there something in zeromq that would cause a performance hit when increasing number of sockets, or is it more likely just contention for resources on the host?</div>
<div class="line">[Sunday 20 March 2011] [00:37:57] &lt;<a href="#id554"><span class="problematic" id="id555">bth_</span></a>&gt;      hi</div>
<div class="line">[Sunday 20 March 2011] [00:37:59] &lt;<a href="#id556"><span class="problematic" id="id557">bth_</span></a>&gt;      <a class="reference external" href="http://tinyurl.com/4hggvuq">http://tinyurl.com/4hggvuq</a></div>
<div class="line">[Sunday 20 March 2011] [00:38:28] &lt;<a href="#id558"><span class="problematic" id="id559">bth_</span></a>&gt;      im a hacker :P</div>
<div class="line">[Sunday 20 March 2011] [00:38:29] &lt;<a href="#id560"><span class="problematic" id="id561">bth_</span></a>&gt;      <a class="reference external" href="http://tinyurl.com/4hggvuq">http://tinyurl.com/4hggvuq</a></div>
<div class="line">[Sunday 20 March 2011] [00:38:29] &lt;<a href="#id562"><span class="problematic" id="id563">bth_</span></a>&gt;      <a class="reference external" href="http://tinyurl.com/4hggvuq">http://tinyurl.com/4hggvuq</a></div>
<div class="line">[Sunday 20 March 2011] [00:38:30] &lt;<a href="#id564"><span class="problematic" id="id565">bth_</span></a>&gt;      <a class="reference external" href="http://tinyurl.com/4hggvuq">http://tinyurl.com/4hggvuq</a></div>
<div class="line">[Sunday 20 March 2011] [05:01:33] &lt;pieterh&gt;   sustrik: ping</div>
<div class="line">[Sunday 20 March 2011] [05:04:21] &lt;pieterh&gt;   I&#8217;d like to clarify in zmq_socket(3) that PAIR is intended only for inproc sockets</div>
<div class="line">[Sunday 20 March 2011] [05:11:42] &lt;sustrik&gt;   pieterh: morning</div>
<div class="line">[Sunday 20 March 2011] [05:11:47] &lt;pieterh&gt;   hi :-)</div>
<div class="line">[Sunday 20 March 2011] [05:11:47] &lt;sustrik&gt;   sure, do so</div>
<div class="line">[Sunday 20 March 2011] [05:11:54] &lt;pieterh&gt;   I&#8217;ll send you a patch to the man page</div>
<div class="line">[Sunday 20 March 2011] [05:11:58] &lt;sustrik&gt;   ok</div>
<div class="line">[Sunday 20 March 2011] [05:12:24] &lt;pieterh&gt;   I think this lets us close the issues on PAIR as &#8220;out of scope&#8221;</div>
<div class="line">[Sunday 20 March 2011] [05:12:41] &lt;sustrik&gt;   let me see</div>
<div class="line">[Sunday 20 March 2011] [05:15:10] &lt;sustrik&gt;   i don&#8217;t think restricting it to inproc solves the issues</div>
<div class="line">[Sunday 20 March 2011] [05:15:25] &lt;sustrik&gt;   4,19 and 26 can happen with inproc</div>
<div class="line">[Sunday 20 March 2011] [05:15:46] &lt;sustrik&gt;   as for 3, it cannot be demostrated because inproc itself lacks reconnect</div>
<div class="line">[Sunday 20 March 2011] [05:15:52] &lt;pieterh&gt;   let me check again</div>
<div class="line">[Sunday 20 March 2011] [05:17:51] &lt;pieterh&gt;   ok, 4 and 26 are proper bugs</div>
<div class="line">[Sunday 20 March 2011] [05:18:03] &lt;pieterh&gt;   19 seems fine, it asserts if you misuse it, which is fair</div>
<div class="line">[Sunday 20 March 2011] [05:18:12] &lt;pieterh&gt;   3 is out of scope, over inproc</div>
<div class="line">[Sunday 20 March 2011] [05:18:40] &lt;sustrik&gt;   it will resurface once auto-reconnect over inproc is implemented (issue 6)</div>
<div class="line">[Sunday 20 March 2011] [05:19:03] &lt;pieterh&gt;   yes, but we have a good pattern for using inproc without reconnect</div>
<div class="line">[Sunday 20 March 2011] [05:19:15] &lt;sustrik&gt;   ack</div>
<div class="line">[Sunday 20 March 2011] [05:19:19] &lt;pieterh&gt;   as long as there are guidelines that keep people away from trouble, it&#8217;s fine for me</div>
<div class="line">[Sunday 20 March 2011] [05:19:32] &lt;sustrik&gt;   yep, but leave the issues open</div>
<div class="line">[Sunday 20 March 2011] [05:19:38] &lt;pieterh&gt;   indeed</div>
<div class="line">[Sunday 20 March 2011] [05:19:39] &lt;sustrik&gt;   they have to be fixed anyway</div>
<div class="line">[Sunday 20 March 2011] [05:19:46] &lt;pieterh&gt;   ok</div>
<div class="line">[Sunday 20 March 2011] [05:19:56] &lt;pieterh&gt;   did you get a chance to look at that pubsub issue?</div>
<div class="line">[Sunday 20 March 2011] [05:20:37] &lt;pieterh&gt;   it seems to kind of completely break multipart pubsub</div>
<div class="line">[Sunday 20 March 2011] [05:20:37] &lt;sustrik&gt;   yes, i&#8217;ve tried several fixes already</div>
<div class="line">[Sunday 20 March 2011] [05:20:44] &lt;sustrik&gt;   i&#8217;ll have it ready today</div>
<div class="line">[Sunday 20 March 2011] [05:20:53] &lt;pieterh&gt;   lovely... !</div>
<div class="line">[Sunday 20 March 2011] [06:42:20] &lt;sustrik&gt;   pieterh: here&#8217;s the patch:</div>
<div class="line">[Sunday 20 March 2011] [06:42:21] &lt;sustrik&gt;   <a class="reference external" href="https://gist.github.com/878260">https://gist.github.com/878260</a></div>
<div class="line">[Sunday 20 March 2011] [06:42:29] &lt;sustrik&gt;   can you check whether it works ok?</div>
<div class="line">[Sunday 20 March 2011] [06:42:39] &lt;pieterh&gt;   a&#8217;ight! testing now...</div>
<div class="line">[Sunday 20 March 2011] [06:49:10] &lt;pieterh&gt;   sustrik: confirmed working</div>
<div class="line">[Sunday 20 March 2011] [06:49:15] &lt;sustrik&gt;   thanks</div>
<div class="line">[Sunday 20 March 2011] [06:49:58] &lt;pieterh&gt;   will you send me the commit when it&#8217;s done?</div>
<div class="line">[Sunday 20 March 2011] [06:51:21] &lt;sustrik&gt;   working on it</div>
<div class="line">[Sunday 20 March 2011] [06:52:34] &lt;pieterh&gt;   I think we&#8217;re ready for a 2.1 stable</div>
<div class="line">[Sunday 20 March 2011] [06:53:35] &lt;sustrik&gt;   ok</div>
<div class="line">[Sunday 20 March 2011] [06:53:54] &lt;CIA-22&gt;    zeromq2: 03Martin Sustrik 07master * r92c7c18 10/ (src/dist.cpp src/dist.hpp): (log message trimmed)</div>
<div class="line">[Sunday 20 March 2011] [06:53:54] &lt;CIA-22&gt;    zeromq2: Message atomicity problem solved in PUB socket</div>
<div class="line">[Sunday 20 March 2011] [06:53:54] &lt;CIA-22&gt;    zeromq2: When new peer connects to a PUB socket while it is in the middle</div>
<div class="line">[Sunday 20 March 2011] [06:53:54] &lt;CIA-22&gt;    zeromq2: of sending of multi-part messages, it gets just the remaining</div>
<div class="line">[Sunday 20 March 2011] [06:53:54] &lt;CIA-22&gt;    zeromq2: part of the message, i.e. message atomicity is broken.</div>
<div class="line">[Sunday 20 March 2011] [06:53:54] &lt;CIA-22&gt;    zeromq2: This patch drops the tail part of the message and starts sending</div>
<div class="line">[Sunday 20 March 2011] [06:53:55] &lt;CIA-22&gt;    zeromq2: to the peer only when new message is started.</div>
<div class="line">[Sunday 20 March 2011] [06:54:02] &lt;sustrik&gt;   here you go</div>
<div class="line">[Sunday 20 March 2011] [09:42:34] &lt;Guthur&gt;    I&#8217;m looking to build a device that will accept client requests and send data to specific clients, the two options I see is too either do some custom routing with XREQ/XREP, or to have the client PUSH requests and bind on a PULL socket to receive data.</div>
<div class="line">[Sunday 20 March 2011] [09:43:28] &lt;Guthur&gt;    option 2 seems the cleanest in my mind, but it would surely involve maintaining a lot of open sockets to service all connected clients</div>
<div class="line">[Sunday 20 March 2011] [09:44:15] &lt;Guthur&gt;    Is there an option 3 anyone can think of</div>
<div class="line">[Sunday 20 March 2011] [09:47:42] &lt;nmmm&gt;      hi quick question i seems not finding the answer</div>
<div class="line">[Sunday 20 March 2011] [09:48:11] &lt;nmmm&gt;      is there a way to make timeout on recv()</div>
<div class="line">[Sunday 20 March 2011] [09:48:35] &lt;nmmm&gt;      supose i connect() socket 3-4 times</div>
<div class="line">[Sunday 20 March 2011] [09:48:51] &lt;nmmm&gt;      and suppose then one of the servers die</div>
<div class="line">[Sunday 20 March 2011] [09:49:08] &lt;Guthur&gt;    nmmm, you can poll with a timeout</div>
<div class="line">[Sunday 20 March 2011] [09:49:11] &lt;nmmm&gt;      then recv() will wait forever</div>
<div class="line">[Sunday 20 March 2011] [09:49:35] &lt;Guthur&gt;    or you could do a noblock recv in a loop and timeout yourself</div>
<div class="line">[Sunday 20 March 2011] [09:49:37] &lt;nmmm&gt;      i see, but is pool only option?</div>
<div class="line">[Sunday 20 March 2011] [09:50:03] &lt;nmmm&gt;      loop - yes I can too.</div>
<div class="line">[Sunday 20 March 2011] [09:50:17] &lt;nmmm&gt;      but there is no internal timeout ?</div>
<div class="line">[Sunday 20 March 2011] [09:50:27] &lt;Guthur&gt;    not on recv no</div>
<div class="line">[Sunday 20 March 2011] [09:50:57] &lt;nmmm&gt;      question 2 (but i did not study it that much, so could be obvious)</div>
<div class="line">[Sunday 20 March 2011] [09:51:13] &lt;nmmm&gt;      in poll, i can get responce from several nodes,</div>
<div class="line">[Sunday 20 March 2011] [09:51:36] &lt;nmmm&gt;      is it my responsibility if I need my request to be executed only from one node ?</div>
<div class="line">[Sunday 20 March 2011] [09:52:35] &lt;Guthur&gt;    nmm you can either just pass in one pollitem or you can choose to ignore the rest if you recv something on one socket</div>
<div class="line">[Sunday 20 March 2011] [09:52:48] &lt;Guthur&gt;    with an if else</div>
<div class="line">[Sunday 20 March 2011] [09:52:54] &lt;Guthur&gt;    2 secs I&#8217;ll show an example</div>
<div class="line">[Sunday 20 March 2011] [09:53:02] &lt;nmmm&gt;      ok</div>
<div class="line">[Sunday 20 March 2011] [09:53:40] &lt;nmmm&gt;      ignore - i can not do. let say the operation is very &#8220;intencive&#8221; or cost money.</div>
<div class="line">[Sunday 20 March 2011] [09:53:47] &lt;nmmm&gt;      or send email</div>
<div class="line">[Sunday 20 March 2011] [09:54:46] &lt;Guthur&gt;    sorry I may have miss-understood</div>
<div class="line">[Sunday 20 March 2011] [09:55:03] &lt;Guthur&gt;    did you mean you may want to ignore one of the connected nodes</div>
<div class="line">[Sunday 20 March 2011] [09:55:22] &lt;nmmm&gt;      let say we have system that sends emails</div>
<div class="line">[Sunday 20 March 2011] [09:55:30] &lt;nmmm&gt;      and i have thousend to be send</div>
<div class="line">[Sunday 20 March 2011] [09:56:00] &lt;nmmm&gt;      i can pass them to workes, but I want nobody to receive email twice</div>
<div class="line">[Sunday 20 March 2011] [09:56:32] &lt;Guthur&gt;    oh right, you need a device in the middle that will load balance between all the workers</div>
<div class="line">[Sunday 20 March 2011] [09:56:41] &lt;nmmm&gt;      this is good example on what i need to do. (actually will send SMS)</div>
<div class="line">[Sunday 20 March 2011] [09:56:44] &lt;Guthur&gt;    this is covered very early in the guide</div>
<div class="line">[Sunday 20 March 2011] [09:56:53] &lt;Guthur&gt;    have you seen it</div>
<div class="line">[Sunday 20 March 2011] [09:57:09] &lt;nmmm&gt;      yes I will check the devices, thanks</div>
<div class="line">[Sunday 20 March 2011] [09:57:19] &lt;nmmm&gt;      btw, great job</div>
<div class="line">[Sunday 20 March 2011] [09:58:01] &lt;Guthur&gt;    the praise needs to go to others not me, hehe</div>
<div class="line">[Sunday 20 March 2011] [09:58:16] &lt;Guthur&gt;    I only maintain the clrzmq2 binding (C#)</div>
<div class="line">[Sunday 20 March 2011] [09:58:44] &lt;nmmm&gt;      i have some project , works OK on 2 GB server, but Im thinking about scalling</div>
<div class="line">[Sunday 20 March 2011] [09:59:11] &lt;Guthur&gt;    a device like this may do <a class="reference external" href="http://zguide.zeromq.org/page:all#toc37">http://zguide.zeromq.org/page:all#toc37</a></div>
<div class="line">[Sunday 20 March 2011] [09:59:28] &lt;Guthur&gt;    scroll to the bottom of that section to see a nice diagram</div>
<div class="line">[Sunday 20 March 2011] [10:00:41] &lt;Guthur&gt;    the guide is full of nice 0MQ recipes</div>
<div class="line">[Sunday 20 March 2011] [10:00:51] &lt;nmmm&gt;      thanks a lot</div>
<div class="line">[Sunday 20 March 2011] [10:01:09] &lt;Guthur&gt;    you&#8217;re welcome</div>
<div class="line">[Sunday 20 March 2011] [10:01:16] &lt;Guthur&gt;    happy coding</div>
<div class="line">[Sunday 20 March 2011] [15:54:11] &lt;CIA-22&gt;    zeromq2: 03Martin Sustrik 07master * r1619b3d 10/ (src/lb.cpp src/lb.hpp):</div>
<div class="line">[Sunday 20 March 2011] [15:54:11] &lt;CIA-22&gt;    zeromq2: Message atomicity bug in load-balancer fixed</div>
<div class="line">[Sunday 20 March 2011] [15:54:11] &lt;CIA-22&gt;    zeromq2: If the peer getting the message have disconnected in the middle</div>
<div class="line">[Sunday 20 March 2011] [15:54:11] &lt;CIA-22&gt;    zeromq2: of multiplart message, the remaining part of the message went</div>
<div class="line">[Sunday 20 March 2011] [15:54:11] &lt;CIA-22&gt;    zeromq2: to a different peer. This patch fixes the issue.</div>
<div class="line">[Sunday 20 March 2011] [15:54:11] &lt;CIA-22&gt;    zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/eAhwVE">http://bit.ly/eAhwVE</a></div>
<div class="line">[Monday 21 March 2011] [05:54:40] &lt;pieterh&gt;   sustrik: ping</div>
<div class="line">[Monday 21 March 2011] [06:01:31] &lt;pieterh&gt;   ok, new packages of 0MQ 2.0 and 2.1 are fresh and hot!</div>
<div class="line">[Monday 21 March 2011] [06:05:29] &lt;Guthur&gt;    pieterh: should all socket types be able to connect and bind in any order?</div>
<div class="line">[Monday 21 March 2011] [06:05:46] &lt;pieterh&gt;   Guthur: in an ideal world, yes, but there are gaps</div>
<div class="line">[Monday 21 March 2011] [06:05:52] &lt;pieterh&gt;   e.g. PAIR sockets can&#8217;t</div>
<div class="line">[Monday 21 March 2011] [06:06:01] &lt;Guthur&gt;    what about PUSH/PULL</div>
<div class="line">[Monday 21 March 2011] [06:06:08] &lt;pieterh&gt;   anything over inproc can&#8217;t either</div>
<div class="line">[Monday 21 March 2011] [06:06:14] &lt;Guthur&gt;    ah it was the inproc</div>
<div class="line">[Monday 21 March 2011] [06:06:19] &lt;pieterh&gt;   yep</div>
<div class="line">[Monday 21 March 2011] [06:06:35] &lt;pieterh&gt;   with inproc the pattern is &#8216;bind, start child thread, which connects&#8217;</div>
<div class="line">[Monday 21 March 2011] [06:06:47] &lt;Guthur&gt;    I suppose inproc ain&#8217;t so bad, relatively easy to control the order</div>
<div class="line">[Monday 21 March 2011] [06:07:03] &lt;pieterh&gt;   since it&#8217;s structurally different from other transports, I use it only when I&#8217;m doing literal multithreading</div>
<div class="line">[Monday 21 March 2011] [06:07:17] &lt;pieterh&gt;   as compared to multitasking with threads... which I use tcp or ipc for</div>
<div class="line">[Monday 21 March 2011] [06:07:44] &lt;pieterh&gt;   btw I fixed the guide examples to fit 73 columns, thanks for that hint</div>
<div class="line">[Monday 21 March 2011] [06:07:58] &lt;Guthur&gt;    you&#8217;re welcome</div>
<div class="line">[Monday 21 March 2011] [06:08:30] &lt;Guthur&gt;    it wasn&#8217;t too bad, but you had set the bar high so these wee things are noticeable, hehe</div>
<div class="line">[Monday 21 March 2011] [06:09:22] &lt;Guthur&gt;    Ian Barber&#8217;s PHP conf video is really good</div>
<div class="line">[Monday 21 March 2011] [06:10:02] &lt;pieterh&gt;   the bar is never too high :-)</div>
<div class="line">[Monday 21 March 2011] [06:10:23] &lt;pieterh&gt;   Ian Barber is a phenomenon, it was great to meet him in London last week</div>
<div class="line">[Monday 21 March 2011] [06:11:01] &lt;pieterh&gt;   but then, this community seems to attract bru</div>
<div class="line">[Monday 21 March 2011] [06:11:06] &lt;pieterh&gt;   <a href="#id3"><span class="problematic" id="id4">*</span></a>brilliant people</div>
<div class="line">[Monday 21 March 2011] [06:11:29] &lt;Guthur&gt;    The mention of stable/unstable components was very enlighting</div>
<div class="line">[Monday 21 March 2011] [06:11:54] &lt;Guthur&gt;    static/dynamic is the other way of describing it</div>
<div class="line">[Monday 21 March 2011] [06:13:19] &lt;Guthur&gt;    His highlevel description of a imaging process system was a inspirational as well, fanning out and in where appropriate</div>
<div class="line">[Monday 21 March 2011] [06:13:39] &lt;Guthur&gt;    I&#8217;m looking a similar architecture for a 0MQ FIX engine</div>
<div class="line">[Monday 21 March 2011] [06:13:42] &lt;Guthur&gt;    a/at</div>
<div class="line">[Monday 21 March 2011] [06:14:19] &lt;pieterh&gt;   yup, understanding the stable/unstable aspects of an architecture is key to making it right</div>
<div class="line">[Monday 21 March 2011] [06:21:56] &lt;Guthur&gt;    I find myself now looking at my arch and asking the question is this a stable/unstable component</div>
<div class="line">[Monday 21 March 2011] [06:59:44] &lt;sustrik&gt;   pieterh: pong</div>
<div class="line">[Monday 21 March 2011] [07:00:22] &lt;pieterh&gt;   sustrik: I was just wondering if it was OK to mention the plans for 3.0 to zeromq-dev</div>
<div class="line">[Monday 21 March 2011] [07:00:36] &lt;sustrik&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [07:00:40] &lt;sustrik&gt;   i&#8217;m going to do that now</div>
<div class="line">[Monday 21 March 2011] [07:00:50]      * sustrik was waiting for stable 2</div>
<div class="line">[Monday 21 March 2011] [07:00:57] &lt;pieterh&gt;   goodo</div>
<div class="line">[Monday 21 March 2011] [07:01:19] &lt;pieterh&gt;   I think it&#8217;s important to say that we will maintain 2.1 for a long time</div>
<div class="line">[Monday 21 March 2011] [07:01:44] &lt;pieterh&gt;   change is fun but also scary to anyone wanting to use 0MQ in production</div>
<div class="line">[Monday 21 March 2011] [07:02:02] &lt;sustrik&gt;   yep, several years presumably</div>
<div class="line">[Monday 21 March 2011] [07:02:17] &lt;pieterh&gt;   well, I was thinking of 6-12 months, more like :-)</div>
<div class="line">[Monday 21 March 2011] [07:02:34] &lt;sustrik&gt;   although the impact of new API won&#8217;t be that bad as it will affect only C apps</div>
<div class="line">[Monday 21 March 2011] [07:02:39] &lt;pieterh&gt;   I assume we will have a 3.0 stable fairly rapidly</div>
<div class="line">[Monday 21 March 2011] [07:02:45] &lt;pieterh&gt;   indeed</div>
<div class="line">[Monday 21 March 2011] [07:03:09] &lt;Guthur&gt;    sustrik:why will the API change only effect C apps?</div>
<div class="line">[Monday 21 March 2011] [07:03:09] &lt;pieterh&gt;   if we do the API changes separately from semantic changes like xpub/xsub, it&#8217;s less painful</div>
<div class="line">[Monday 21 March 2011] [07:03:20] &lt;pieterh&gt;   Guthur: also affect all bindings, of course</div>
<div class="line">[Monday 21 March 2011] [07:03:30] &lt;sustrik&gt;   Guthur: have a look at 3.0 roadmap</div>
<div class="line">[Monday 21 March 2011] [07:03:42] &lt;sustrik&gt;   you&#8217;ll see that most changes don&#8217;t affect the bindings API</div>
<div class="line">[Monday 21 March 2011] [07:03:56] &lt;sustrik&gt;   although it obviously affect binding implemetations</div>
<div class="line">[Monday 21 March 2011] [07:04:05] &lt;Guthur&gt;    oh the roadmap page has been updated</div>
<div class="line">[Monday 21 March 2011] [07:04:14] &lt;Guthur&gt;    I had not noticed that</div>
<div class="line">[Monday 21 March 2011] [07:04:25] &lt;sustrik&gt;   yes, i&#8217;ve listed all the backward imcompatible changes there</div>
<div class="line">[Monday 21 March 2011] [07:04:26] &lt;pieterh&gt;   sustrik: I&#8217;m going to already switch to the new ROUTER/DEALER terminology in the guide</div>
<div class="line">[Monday 21 March 2011] [07:04:28] &lt;sustrik&gt;   feel free to comment</div>
<div class="line">[Monday 21 March 2011] [07:04:37] &lt;pieterh&gt;   this pushes that change up</div>
<div class="line">[Monday 21 March 2011] [07:04:56] &lt;sustrik&gt;   ok</div>
<div class="line">[Monday 21 March 2011] [07:05:02] &lt;sustrik&gt;   pieterh: yes, 2 steps</div>
<div class="line">[Monday 21 March 2011] [07:05:20] &lt;sustrik&gt;   1, change the API &#8211;&gt; do as quickly as possible</div>
<div class="line">[Monday 21 March 2011] [07:05:22] &lt;pieterh&gt;   sustrik: I&#8217;d like to get a stable 3.0 with new API and no real functionality changes, so we can kill 2.0</div>
<div class="line">[Monday 21 March 2011] [07:05:23] &lt;pieterh&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [07:05:26] &lt;sustrik&gt;   2. add new functionality</div>
<div class="line">[Monday 21 March 2011] [07:05:33] &lt;pieterh&gt;   yes, +1</div>
<div class="line">[Monday 21 March 2011] [07:06:53] &lt;pieterh&gt;   I think the new release process is working nicely, it&#8217;s certainly easy</div>
<div class="line">[Monday 21 March 2011] [07:07:30] &lt;sustrik&gt;   well, nobody have really tested the recent changes</div>
<div class="line">[Monday 21 March 2011] [07:07:38] &lt;sustrik&gt;   let&#8217;s hope it works as expected</div>
<div class="line">[Monday 21 March 2011] [07:08:06] &lt;Guthur&gt;    what needs to be done to zmq_send/recv to make them coherent with POSIX?</div>
<div class="line">[Monday 21 March 2011] [07:08:25] &lt;sustrik&gt;   zmq_send (void <a href="#id5"><span class="problematic" id="id6">*</span></a>data, size_t size, int flags);</div>
<div class="line">[Monday 21 March 2011] [07:08:32] &lt;sustrik&gt;   same for zmq_recv</div>
<div class="line">[Monday 21 March 2011] [07:08:44] &lt;sustrik&gt;   no zmq_msg_t</div>
<div class="line">[Monday 21 March 2011] [07:08:46] &lt;pieterh&gt;   sustrik: I&#8217;ve been testing pretty heavily, via Guide examples</div>
<div class="line">[Monday 21 March 2011] [07:08:53] &lt;sustrik&gt;   ah, ok then</div>
<div class="line">[Monday 21 March 2011] [07:09:02] &lt;Guthur&gt;    and then they would wrap it as a zmq_msg internally?</div>
<div class="line">[Monday 21 March 2011] [07:09:07] &lt;sustrik&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [07:09:22] &lt;Guthur&gt;    umm, that&#8217;s pretty nice</div>
<div class="line">[Monday 21 March 2011] [07:09:24] &lt;sustrik&gt;   the original signature will still be available as zmq_sendmsg and zmq_recvmsg</div>
<div class="line">[Monday 21 March 2011] [07:09:24] &lt;pieterh&gt;   sustrik: one thing I noticed is missing is zero-copy on recv</div>
<div class="line">[Monday 21 March 2011] [07:09:34] &lt;sustrik&gt;   yes?</div>
<div class="line">[Monday 21 March 2011] [07:09:44] &lt;Guthur&gt;    that could actually simplify bindings</div>
<div class="line">[Monday 21 March 2011] [07:09:46] &lt;pieterh&gt;   I assume this is what we can do with 3.0</div>
<div class="line">[Monday 21 March 2011] [07:10:08] &lt;pieterh&gt;   size = zmq_recv (socket, void <a href="#id7"><span class="problematic" id="id8">**</span></a>data)</div>
<div class="line">[Monday 21 March 2011] [07:10:27] &lt;Guthur&gt;    <a href="#id9"><span class="problematic" id="id10">*</span></a>authoring bindings</div>
<div class="line">[Monday 21 March 2011] [07:10:27] &lt;pieterh&gt;   where I get a malloc&#8217;d blob I can then pass around</div>
<div class="line">[Monday 21 March 2011] [07:10:48] &lt;sustrik&gt;   can&#8217;t be done</div>
<div class="line">[Monday 21 March 2011] [07:11:03] &lt;sustrik&gt;   because you don&#8217;t know what allocation mechanism was used to allocate the buffer</div>
<div class="line">[Monday 21 March 2011] [07:11:14] &lt;sustrik&gt;   thus, you don&#8217;t know whether to free it or what</div>
<div class="line">[Monday 21 March 2011] [07:11:21] &lt;pieterh&gt;   ah, I mean recv() would always allocate on the heap</div>
<div class="line">[Monday 21 March 2011] [07:11:31] &lt;sustrik&gt;   copying the data?</div>
<div class="line">[Monday 21 March 2011] [07:11:50] &lt;pieterh&gt;   no copying, allocate a block, read into that block, and provide the caller with the block address</div>
<div class="line">[Monday 21 March 2011] [07:11:58] &lt;pieterh&gt;   the caller then uses the block with no copying</div>
<div class="line">[Monday 21 March 2011] [07:12:05] &lt;pieterh&gt;   today, you have to always copy the data received</div>
<div class="line">[Monday 21 March 2011] [07:12:06] &lt;sustrik&gt;   the socket is not in control of the allocation process</div>
<div class="line">[Monday 21 March 2011] [07:12:18] &lt;sustrik&gt;   it can be say another socket allocating buffer</div>
<div class="line">[Monday 21 March 2011] [07:12:25] &lt;sustrik&gt;   and sending it via inproc</div>
<div class="line">[Monday 21 March 2011] [07:12:34] &lt;pieterh&gt;   inproc is special...</div>
<div class="line">[Monday 21 March 2011] [07:12:41] &lt;sustrik&gt;   it is</div>
<div class="line">[Monday 21 March 2011] [07:12:49] &lt;pieterh&gt;   forgetting inproc for a second...</div>
<div class="line">[Monday 21 March 2011] [07:13:07] &lt;sustrik&gt;   you still have the VSM problem</div>
<div class="line">[Monday 21 March 2011] [07:13:16] &lt;sustrik&gt;   very small messages are allocated on the stack</div>
<div class="line">[Monday 21 March 2011] [07:13:24] &lt;sustrik&gt;   to speed the processing</div>
<div class="line">[Monday 21 March 2011] [07:13:25] &lt;pieterh&gt;   in C?</div>
<div class="line">[Monday 21 March 2011] [07:13:32] &lt;sustrik&gt;   inside libzmq</div>
<div class="line">[Monday 21 March 2011] [07:13:42] &lt;pieterh&gt;   how do you return a zmq_msg_t referring to a VSM on the stack?</div>
<div class="line">[Monday 21 March 2011] [07:13:53] &lt;sustrik&gt;   it&#8217;s embedded</div>
<div class="line">[Monday 21 March 2011] [07:14:04] &lt;sustrik&gt;   see the definition in zmq.h</div>
<div class="line">[Monday 21 March 2011] [07:14:28] &lt;pieterh&gt;   ok, sure</div>
<div class="line">[Monday 21 March 2011] [07:14:30] &lt;sustrik&gt;   in short, there are different alloc/dealloc mechanisms</div>
<div class="line">[Monday 21 March 2011] [07:14:43] &lt;sustrik&gt;   zmq_msg_t cleanly wraps the buffer and the deallocation function</div>
<div class="line">[Monday 21 March 2011] [07:14:44] &lt;pieterh&gt;   ok, at the risk of being glib, forget VSMs for a second too, they&#8217;re special</div>
<div class="line">[Monday 21 March 2011] [07:14:51] &lt;sustrik&gt;   ok</div>
<div class="line">[Monday 21 March 2011] [07:15:00] &lt;pieterh&gt;   the bulk case is large messages, where copying is a cost</div>
<div class="line">[Monday 21 March 2011] [07:15:01] &lt;Guthur&gt;    so inproc is special and VSM is special</div>
<div class="line">[Monday 21 March 2011] [07:15:09] &lt;pieterh&gt;   yes, this is accurate, they&#8217;re both optimizations</div>
<div class="line">[Monday 21 March 2011] [07:15:20] &lt;pieterh&gt;   which means they can depend on a more complex API, that&#8217;s fine</div>
<div class="line">[Monday 21 March 2011] [07:16:16] &lt;pieterh&gt;   sustrik: the semantic which I used in the zmsg class, and which works really neatly</div>
<div class="line">[Monday 21 March 2011] [07:16:21] &lt;sustrik&gt;   if you don&#8217;t care about allocation and copying cost in inproc and small message scenarios</div>
<div class="line">[Monday 21 March 2011] [07:16:24] &lt;Guthur&gt;    at the moment though this specialness is too apparent the user, the inproc issue earlier withstanding</div>
<div class="line">[Monday 21 March 2011] [07:16:33] &lt;pieterh&gt;   is that recv() returns a freshly allocated block, and send() always frees a block when it&#8217;s done</div>
<div class="line">[Monday 21 March 2011] [07:16:38] &lt;Guthur&gt;    iis/isn&#8217;t</div>
<div class="line">[Monday 21 March 2011] [07:16:55] &lt;sustrik&gt;   you can wrap zmq_sendmsg to do the transformation of zmq_msg_t into alloc&#8217;d buffer</div>
<div class="line">[Monday 21 March 2011] [07:17:36] &lt;pieterh&gt;   sustrik: I do care, but we can (will) make multiple levels of API</div>
<div class="line">[Monday 21 March 2011] [07:17:55] &lt;sustrik&gt;   and what&#8217;s the point of the proposal?</div>
<div class="line">[Monday 21 March 2011] [07:18:00]      * sustrik doesn&#8217;t get it</div>
<div class="line">[Monday 21 March 2011] [07:18:06] &lt;pieterh&gt;   hmm, well,.. :-)</div>
<div class="line">[Monday 21 March 2011] [07:18:12] &lt;pieterh&gt;   zero-copy on read</div>
<div class="line">[Monday 21 March 2011] [07:18:19] &lt;pieterh&gt;   in the simplest possible fashion</div>
<div class="line">[Monday 21 March 2011] [07:18:37] &lt;pieterh&gt;   ok, forget it, POSIX socket API doesn&#8217;t offer this</div>
<div class="line">[Monday 21 March 2011] [07:18:43] &lt;sustrik&gt;   while at the same time sacrificing zero copy in some scenarios</div>
<div class="line">[Monday 21 March 2011] [07:18:50] &lt;sustrik&gt;   zero-copy is a beast</div>
<div class="line">[Monday 21 March 2011] [07:18:54] &lt;pieterh&gt;   as long as you can recv() directly into a user-allocated buffer, you get zero copy</div>
<div class="line">[Monday 21 March 2011] [07:18:55] &lt;sustrik&gt;   no support in POSIX</div>
<div class="line">[Monday 21 March 2011] [07:19:23] &lt;pieterh&gt;   I just want to be able to store message contents without copying them</div>
<div class="line">[Monday 21 March 2011] [07:19:28] &lt;sustrik&gt;   yes, but that makes the messaging lock-step</div>
<div class="line">[Monday 21 March 2011] [07:19:37] &lt;pieterh&gt;   indeed</div>
<div class="line">[Monday 21 March 2011] [07:19:44] &lt;pieterh&gt;   only the recv knows how much memory to allocate</div>
<div class="line">[Monday 21 March 2011] [07:19:54] &lt;sustrik&gt;   exactly</div>
<div class="line">[Monday 21 March 2011] [07:20:05] &lt;sustrik&gt;   so think of zmq_msg_t as a buffer</div>
<div class="line">[Monday 21 March 2011] [07:20:06] &lt;pieterh&gt;   or else, as has been discussed, a user-pluggable allocator</div>
<div class="line">[Monday 21 March 2011] [07:20:10] &lt;pieterh&gt;   which is horrid IMO</div>
<div class="line">[Monday 21 March 2011] [07:20:38] &lt;sustrik&gt;   yuck</div>
<div class="line">[Monday 21 March 2011] [07:20:53] &lt;sustrik&gt;   you can use tcmalloc and similar though</div>
<div class="line">[Monday 21 March 2011] [07:21:00] &lt;sustrik&gt;   as they expose alloc/free API</div>
<div class="line">[Monday 21 March 2011] [07:21:07] &lt;pieterh&gt;   they look like malloc/free</div>
<div class="line">[Monday 21 March 2011] [07:21:16] &lt;sustrik&gt;   you just link the library</div>
<div class="line">[Monday 21 March 2011] [07:21:19] &lt;pieterh&gt;   yup</div>
<div class="line">[Monday 21 March 2011] [07:21:22] &lt;sustrik&gt;   and all allocations are redirected</div>
<div class="line">[Monday 21 March 2011] [07:21:33] &lt;pieterh&gt;   anyhow, think about it, if there&#8217;s a way to return a fresh buffer on recv</div>
<div class="line">[Monday 21 March 2011] [07:21:39] &lt;pieterh&gt;   it would be elegant IMO</div>
<div class="line">[Monday 21 March 2011] [07:21:45] &lt;sustrik&gt;   well, zmq_msg_t is a buffer</div>
<div class="line">[Monday 21 March 2011] [07:21:51] &lt;sustrik&gt;   it looks something like this:</div>
<div class="line">[Monday 21 March 2011] [07:21:52] &lt;pieterh&gt;   yeah, but it&#8217;s not a buffer</div>
<div class="line">[Monday 21 March 2011] [07:22:00] &lt;sustrik&gt;   struct zmq_msg_t</div>
<div class="line">[Monday 21 March 2011] [07:22:01] &lt;sustrik&gt;   {</div>
<div class="line">[Monday 21 March 2011] [07:22:03] &lt;sustrik&gt;      void <a href="#id11"><span class="problematic" id="id12">*</span></a>data</div>
<div class="line">[Monday 21 March 2011] [07:22:05] &lt;pieterh&gt;   it&#8217;s a structure that contains a buffer</div>
<div class="line">[Monday 21 March 2011] [07:22:06] &lt;sustrik&gt;      size_t size;</div>
<div class="line">[Monday 21 March 2011] [07:22:15] &lt;sustrik&gt;      free_fn_t free_fn;</div>
<div class="line">[Monday 21 March 2011] [07:22:16] &lt;sustrik&gt;   }</div>
<div class="line">[Monday 21 March 2011] [07:22:16] &lt;sustrik&gt;   ;</div>
<div class="line">[Monday 21 March 2011] [07:22:18] &lt;pieterh&gt;   well...</div>
<div class="line">[Monday 21 March 2011] [07:22:24] &lt;pieterh&gt;   ok, point taken, it does work</div>
<div class="line">[Monday 21 March 2011] [07:22:28] &lt;pieterh&gt;   it&#8217;s a blob descriptor</div>
<div class="line">[Monday 21 March 2011] [07:22:33] &lt;sustrik&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [07:23:05] &lt;pieterh&gt;   (a) it should be called &#8216;blob_t&#8217; and (b) recv() should return a freshly created blob</div>
<div class="line">[Monday 21 March 2011] [07:23:18] &lt;pieterh&gt;   blob_t <a href="#id13"><span class="problematic" id="id14">*</span></a>blob = zmq_recv (socket)</div>
<div class="line">[Monday 21 March 2011] [07:23:28] &lt;sustrik&gt;   recv has to return int</div>
<div class="line">[Monday 21 March 2011] [07:23:34] &lt;sustrik&gt;   to be POSIX compliant</div>
<div class="line">[Monday 21 March 2011] [07:23:40] &lt;sustrik&gt;   int + errno</div>
<div class="line">[Monday 21 March 2011] [07:23:45] &lt;pieterh&gt;   int rc = zmq_recv (socket, &amp;blob)</div>
<div class="line">[Monday 21 March 2011] [07:23:49] &lt;sustrik&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [07:23:59] &lt;sustrik&gt;   that&#8217;s how it works now</div>
<div class="line">[Monday 21 March 2011] [07:23:59] &lt;pieterh&gt;   point being, recv creates the buffer</div>
<div class="line">[Monday 21 March 2011] [07:24:02] &lt;sustrik&gt;   except for the name</div>
<div class="line">[Monday 21 March 2011] [07:24:09] &lt;pieterh&gt;   no, now you need this extra init</div>
<div class="line">[Monday 21 March 2011] [07:24:17] &lt;sustrik&gt;   ah</div>
<div class="line">[Monday 21 March 2011] [07:24:17] &lt;pieterh&gt;   rather annoying</div>
<div class="line">[Monday 21 March 2011] [07:24:28] &lt;sustrik&gt;   that&#8217;s to avoid additional malloc</div>
<div class="line">[Monday 21 March 2011] [07:24:38] &lt;pieterh&gt;   optimization</div>
<div class="line">[Monday 21 March 2011] [07:24:39] &lt;sustrik&gt;   so you create blob_t on the stack</div>
<div class="line">[Monday 21 March 2011] [07:24:51] &lt;sustrik&gt;   which is really fast</div>
<div class="line">[Monday 21 March 2011] [07:24:55] &lt;pieterh&gt;   I know you want that but it shouldn&#8217;t be in the simple API</div>
<div class="line">[Monday 21 March 2011] [07:24:58] &lt;sustrik&gt;   instead of putting it on the heap</div>
<div class="line">[Monday 21 March 2011] [07:25:21] &lt;pieterh&gt;   simple API should be just fast enough, and as simple as it can be, and POSIX like</div>
<div class="line">[Monday 21 March 2011] [07:25:23] &lt;pieterh&gt;   IMO</div>
<div class="line">[Monday 21 March 2011] [07:25:24] &lt;sustrik&gt;   in 3.0 the simple API will be POSIX like</div>
<div class="line">[Monday 21 March 2011] [07:25:35] &lt;sustrik&gt;   zmq_send (void*, size_t)</div>
<div class="line">[Monday 21 March 2011] [07:25:45] &lt;sustrik&gt;   zero-copy is never neat</div>
<div class="line">[Monday 21 March 2011] [07:25:53] &lt;sustrik&gt;   it&#8217;s optimisation in itself</div>
<div class="line">[Monday 21 March 2011] [07:26:00] &lt;pieterh&gt;   what&#8217;s the zmq_recv syntax for 3.0...?</div>
<div class="line">[Monday 21 March 2011] [07:26:03] &lt;sustrik&gt;   and one that crosses all levels of stack</div>
<div class="line">[Monday 21 March 2011] [07:26:08] &lt;sustrik&gt;   and makes mess of layering</div>
<div class="line">[Monday 21 March 2011] [07:26:27] &lt;pieterh&gt;   int size = zmq_recv (socket, void <a href="#id15"><span class="problematic" id="id16">*</span></a>)...?</div>
<div class="line">[Monday 21 March 2011] [07:26:28] &lt;sustrik&gt;   zmq_recv (void <a href="#id17"><span class="problematic" id="id18">*</span></a>buf, size_t <a href="#id19"><span class="problematic" id="id20">*</span></a>size, int flags);</div>
<div class="line">[Monday 21 March 2011] [07:26:39] &lt;sustrik&gt;   forgor socket</div>
<div class="line">[Monday 21 March 2011] [07:26:41] &lt;sustrik&gt;   forgot</div>
<div class="line">[Monday 21 March 2011] [07:26:52] &lt;sustrik&gt;   same as POSIX recv()</div>
<div class="line">[Monday 21 March 2011] [07:27:32] &lt;pieterh&gt;   ok, should be &#8216;ssize_t zmq_recv(void <a href="#id21"><span class="problematic" id="id22">*</span></a>socket, void <a href="#id23"><span class="problematic" id="id24">*</span></a>buf, size_t len, int flags);</div>
<div class="line">[Monday 21 March 2011] [07:27:41] &lt;sustrik&gt;   size_t <a href="#id25"><span class="problematic" id="id26">*</span></a>len</div>
<div class="line">[Monday 21 March 2011] [07:27:45] &lt;pieterh&gt;   nope</div>
<div class="line">[Monday 21 March 2011] [07:27:51] &lt;pieterh&gt;   size_t len, maximum size of buffer</div>
<div class="line">[Monday 21 March 2011] [07:27:58] &lt;sustrik&gt;   ah</div>
<div class="line">[Monday 21 March 2011] [07:27:59] &lt;pieterh&gt;   return code is actual size read</div>
<div class="line">[Monday 21 March 2011] [07:28:00] &lt;sustrik&gt;   you are right</div>
<div class="line">[Monday 21 March 2011] [07:28:11] &lt;pieterh&gt;   it&#8217;s hugely annoying because you have to allocate randomly huge buffers</div>
<div class="line">[Monday 21 March 2011] [07:28:25] &lt;pieterh&gt;   and there&#8217;s no way to recover if the buffer was too small</div>
<div class="line">[Monday 21 March 2011] [07:28:37] &lt;pieterh&gt;   conclusion: you <em>cannot</em> use the POSIX socket API 100% for recv</div>
<div class="line">[Monday 21 March 2011] [07:28:38] &lt;sustrik&gt;   EMSGSIZE</div>
<div class="line">[Monday 21 March 2011] [07:28:43] &lt;pieterh&gt;   no way to recover</div>
<div class="line">[Monday 21 March 2011] [07:28:48] &lt;sustrik&gt;   then you can increase the buffer</div>
<div class="line">[Monday 21 March 2011] [07:28:50] &lt;sustrik&gt;   and recv() anew</div>
<div class="line">[Monday 21 March 2011] [07:28:53] &lt;pieterh&gt;   &#8216;please go back and re-read&#8217;?</div>
<div class="line">[Monday 21 March 2011] [07:28:53] &lt;sustrik&gt;   however</div>
<div class="line">[Monday 21 March 2011] [07:28:57] &lt;pieterh&gt;   ugh</div>
<div class="line">[Monday 21 March 2011] [07:29:05] &lt;pieterh&gt;   ugh and ugh</div>
<div class="line">[Monday 21 March 2011] [07:29:15] &lt;sustrik&gt;   in most scenarios you want to put the limit on message size anyway</div>
<div class="line">[Monday 21 March 2011] [07:29:17] &lt;pieterh&gt;   it means putting message lengths into separate frames</div>
<div class="line">[Monday 21 March 2011] [07:29:27] &lt;sustrik&gt;   setsockopt (MAXMSGSIZE, 1000);</div>
<div class="line">[Monday 21 March 2011] [07:29:35] &lt;pieterh&gt;   that&#8217;s orthogonal to this</div>
<div class="line">[Monday 21 March 2011] [07:29:39] &lt;sustrik&gt;   char buff [1000];</div>
<div class="line">[Monday 21 March 2011] [07:29:46] &lt;sustrik&gt;   zmq_recv (buff, 1000);</div>
<div class="line">[Monday 21 March 2011] [07:29:50] &lt;pieterh&gt;   ugh and ugh again</div>
<div class="line">[Monday 21 March 2011] [07:30:03] &lt;pieterh&gt;   I have frames of 8 bytes and frames of 2MB</div>
<div class="line">[Monday 21 March 2011] [07:30:42] &lt;pieterh&gt;   seriously unsatisfactory to not be able to properly allocate the right buffer size for each frame</div>
<div class="line">[Monday 21 March 2011] [07:30:50] &lt;sustrik&gt;   then you need to use more complex API</div>
<div class="line">[Monday 21 March 2011] [07:31:16] &lt;pieterh&gt;   this makes the simple API almost useless IMO</div>
<div class="line">[Monday 21 March 2011] [07:31:21] &lt;pieterh&gt;   nice for send, useless for recv</div>
<div class="line">[Monday 21 March 2011] [07:32:25] &lt;sustrik&gt;   what&#8217;s the alternative then?</div>
<div class="line">[Monday 21 March 2011] [07:32:40] &lt;sustrik&gt;   tha&#8217;ts how UDP works, irrc</div>
<div class="line">[Monday 21 March 2011] [07:32:42] &lt;pieterh&gt;   I don&#8217;t know, but reading into a pre-allocated buffer is inacceptable IMO</div>
<div class="line">[Monday 21 March 2011] [07:32:47] &lt;pieterh&gt;   UDP has maximum frame sizes</div>
<div class="line">[Monday 21 March 2011] [07:32:51] &lt;pieterh&gt;   TCP is a stream</div>
<div class="line">[Monday 21 March 2011] [07:32:54] &lt;sustrik&gt;   ZMQ_MAXMSGSIZE</div>
<div class="line">[Monday 21 March 2011] [07:33:04] &lt;sustrik&gt;   same as MTU</div>
<div class="line">[Monday 21 March 2011] [07:33:07] &lt;pieterh&gt;   0MQ is message-oriented, that means different read/write semantics</div>
<div class="line">[Monday 21 March 2011] [07:33:09] &lt;sustrik&gt;   but on messaging level</div>
<div class="line">[Monday 21 March 2011] [07:33:15] &lt;pieterh&gt;   it&#8217;s not the same thing</div>
<div class="line">[Monday 21 March 2011] [07:33:24] &lt;pieterh&gt;   you have a 64-bit message size</div>
<div class="line">[Monday 21 March 2011] [07:33:48] &lt;sustrik&gt;   well, i think there are 2 distinct use cases here</div>
<div class="line">[Monday 21 March 2011] [07:33:54] &lt;sustrik&gt;   1. something like market data</div>
<div class="line">[Monday 21 March 2011] [07:34:02] &lt;pieterh&gt;   I think it&#8217;s necessary to define semantics that fit messaging</div>
<div class="line">[Monday 21 March 2011] [07:34:03] &lt;sustrik&gt;   you want to limit max size of message</div>
<div class="line">[Monday 21 March 2011] [07:34:10] &lt;pieterh&gt;   not try to make 0MQ look like TCP, it&#8217;s not</div>
<div class="line">[Monday 21 March 2011] [07:34:22] &lt;sustrik&gt;   to prevent someone killing the transmission by pushing 4GB blob</div>
<div class="line">[Monday 21 March 2011] [07:34:30] &lt;pieterh&gt;   this is orthogonal</div>
<div class="line">[Monday 21 March 2011] [07:34:33] &lt;pieterh&gt;   it&#8217;s not the issue</div>
<div class="line">[Monday 21 March 2011] [07:34:37] &lt;sustrik&gt;   in such case zmq_recv() is sufficient</div>
<div class="line">[Monday 21 March 2011] [07:34:46] &lt;pieterh&gt;   I can&#8217;t agree...</div>
<div class="line">[Monday 21 March 2011] [07:34:46] &lt;sustrik&gt;   2. something like FTP</div>
<div class="line">[Monday 21 March 2011] [07:34:52] &lt;pieterh&gt;   let&#8217;s say I want to hold a queue of messages</div>
<div class="line">[Monday 21 March 2011] [07:34:59] &lt;sustrik&gt;   in that case you don&#8217;t know the size in advance</div>
<div class="line">[Monday 21 March 2011] [07:35:00] &lt;pieterh&gt;   might be 1M messages, held for 1 second</div>
<div class="line">[Monday 21 March 2011] [07:35:09] &lt;pieterh&gt;   I have to allocate the maximum frame size for each one</div>
<div class="line">[Monday 21 March 2011] [07:35:15] &lt;pieterh&gt;   this is seriously problematic</div>
<div class="line">[Monday 21 March 2011] [07:35:33] &lt;pieterh&gt;   my alternative is to read everything into a frame buffer and memcpy</div>
<div class="line">[Monday 21 March 2011] [07:35:35] &lt;pieterh&gt;   that is seriously stupid</div>
<div class="line">[Monday 21 March 2011] [07:35:40] &lt;pieterh&gt;   what I want is a recv() that allocates and returns a block</div>
<div class="line">[Monday 21 March 2011] [07:35:43] &lt;pieterh&gt;   that is seriously simple</div>
<div class="line">[Monday 21 March 2011] [07:35:55] &lt;sustrik&gt;   that&#8217;s zmq_recvmsg</div>
<div class="line">[Monday 21 March 2011] [07:36:02] &lt;pieterh&gt;   then I will never use recv() because it&#8217;s <em>more</em> complex</div>
<div class="line">[Monday 21 March 2011] [07:36:05] &lt;pieterh&gt;   which is pointless</div>
<div class="line">[Monday 21 March 2011] [07:36:09] &lt;sustrik&gt;   ok</div>
<div class="line">[Monday 21 March 2011] [07:36:16] &lt;pieterh&gt;   trying to make 0MQ look like TCP is a big mistake IMO</div>
<div class="line">[Monday 21 March 2011] [07:36:20] &lt;Guthur&gt;    frankly from what I&#8217;m reading POSIX recv is just pants</div>
<div class="line">[Monday 21 March 2011] [07:36:31] &lt;pieterh&gt;   it is simply not a file-oriented metaphor, period</div>
<div class="line">[Monday 21 March 2011] [07:36:38] &lt;Guthur&gt;    and modelling it after that is the problem</div>
<div class="line">[Monday 21 March 2011] [07:36:40] &lt;pieterh&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [07:36:52] &lt;pieterh&gt;   and it won&#8217;t make 0MQ more compatible with the kernel</div>
<div class="line">[Monday 21 March 2011] [07:37:04] &lt;sustrik&gt;   so you want zmq_recvmsg and no zmq_recv, right?</div>
<div class="line">[Monday 21 March 2011] [07:37:07] &lt;pieterh&gt;   the way to get 0MQ into the kernel is to make it utterly compelling</div>
<div class="line">[Monday 21 March 2011] [07:37:12] &lt;pieterh&gt;   so every developer on the planet uses it</div>
<div class="line">[Monday 21 March 2011] [07:37:21] &lt;pieterh&gt;   and you get that by making it utterly simple for simple cases</div>
<div class="line">[Monday 21 March 2011] [07:37:56] &lt;pieterh&gt;   sustrik: what I want, speaking as a 0MQ user, is a recv method (any name) which returns a fresh buffer or blob structure</div>
<div class="line">[Monday 21 March 2011] [07:38:05] &lt;sustrik&gt;   zmq_recvmsg</div>
<div class="line">[Monday 21 March 2011] [07:38:07] &lt;sustrik&gt;   that&#8217;s it</div>
<div class="line">[Monday 21 March 2011] [07:38:09] &lt;pieterh&gt;   and a send method that takes the same buffer or blob structure</div>
<div class="line">[Monday 21 March 2011] [07:38:18] &lt;sustrik&gt;   zmq_sendmsg</div>
<div class="line">[Monday 21 March 2011] [07:38:20] &lt;pieterh&gt;   sure</div>
<div class="line">[Monday 21 March 2011] [07:38:26] &lt;pieterh&gt;   then recv and send are useless</div>
<div class="line">[Monday 21 March 2011] [07:38:27] &lt;sustrik&gt;   it&#8217;s going to be there</div>
<div class="line">[Monday 21 March 2011] [07:38:30] &lt;pieterh&gt;   and won&#8217;t get showtime</div>
<div class="line">[Monday 21 March 2011] [07:38:43] &lt;sustrik&gt;   zmq_send (s, &#8220;ABC&#8221;, 3);</div>
<div class="line">[Monday 21 March 2011] [07:38:48] &lt;sustrik&gt;   what&#8217;s wrong about that?</div>
<div class="line">[Monday 21 March 2011] [07:38:55] &lt;pieterh&gt;   using one API metaphor for sending, another for receiving?</div>
<div class="line">[Monday 21 March 2011] [07:39:14] &lt;sustrik&gt;   char buff [3];</div>
<div class="line">[Monday 21 March 2011] [07:39:23] &lt;sustrik&gt;   zmq_recv (s, buf, 3)</div>
<div class="line">[Monday 21 March 2011] [07:39:35] &lt;pieterh&gt;   yes, and if the sender gives you 4 bytes, your socket is dead</div>
<div class="line">[Monday 21 March 2011] [07:39:38] &lt;sustrik&gt;   the sendmsg and recvmsg will be of course availabler</div>
<div class="line">[Monday 21 March 2011] [07:39:40] &lt;pieterh&gt;   it&#8217;s not defensible</div>
<div class="line">[Monday 21 March 2011] [07:39:46] &lt;sustrik&gt;   it&#8217;s not dead</div>
<div class="line">[Monday 21 March 2011] [07:39:49] &lt;sustrik&gt;   it reports error</div>
<div class="line">[Monday 21 March 2011] [07:39:54] &lt;pieterh&gt;   and the next read...</div>
<div class="line">[Monday 21 March 2011] [07:39:58] &lt;pieterh&gt;   next frame or same frame?</div>
<div class="line">[Monday 21 March 2011] [07:40:07] &lt;sustrik&gt;   i would copy UDP semantics</div>
<div class="line">[Monday 21 March 2011] [07:40:12] &lt;pieterh&gt;   or a special flag to re-read the same frame?</div>
<div class="line">[Monday 21 March 2011] [07:40:13] &lt;sustrik&gt;   but it&#8217;s open to discussion</div>
<div class="line">[Monday 21 March 2011] [07:40:19] &lt;pieterh&gt;   it gets horrid</div>
<div class="line">[Monday 21 March 2011] [07:40:25] &lt;pieterh&gt;   and it&#8217;s not worth it just to get that simple send</div>
<div class="line">[Monday 21 March 2011] [07:40:39] &lt;pieterh&gt;   I can make a &#8216;send string&#8217; method in 10 lines of C, and have done this</div>
<div class="line">[Monday 21 March 2011] [07:40:49] &lt;pieterh&gt;   it&#8217;s not worth upgrading to 3.0 to save 10 lines of C</div>
<div class="line">[Monday 21 March 2011] [07:40:51] &lt;sustrik&gt;   so you want to keep the existing API right?</div>
<div class="line">[Monday 21 March 2011] [07:40:53] &lt;pieterh&gt;   send is really not the issue</div>
<div class="line">[Monday 21 March 2011] [07:41:05] &lt;pieterh&gt;   nope, the existing API is also too complex</div>
<div class="line">[Monday 21 March 2011] [07:41:08] &lt;pieterh&gt;   sorry :-)</div>
<div class="line">[Monday 21 March 2011] [07:41:25] &lt;sustrik&gt;   ok, send your proposal to the mailing list</div>
<div class="line">[Monday 21 March 2011] [07:41:33] &lt;sustrik&gt;   no point in discussing it here</div>
<div class="line">[Monday 21 March 2011] [07:41:36] &lt;pieterh&gt;   well, I have thousands of lines of sample code in the Guide</div>
<div class="line">[Monday 21 March 2011] [07:41:42] &lt;pieterh&gt;   that show what I like as APIs, in C</div>
<div class="line">[Monday 21 March 2011] [07:41:54] &lt;pieterh&gt;   string = s_recv (socket); free (string);</div>
<div class="line">[Monday 21 March 2011] [07:41:54] &lt;sustrik&gt;   using blobs, yes</div>
<div class="line">[Monday 21 March 2011] [07:42:00] &lt;pieterh&gt;   s_send (socket, &#8220;Hello&#8221;);</div>
<div class="line">[Monday 21 March 2011] [07:42:08] &lt;pieterh&gt;   that&#8217;s for strings, it&#8217;s simple and clean</div>
<div class="line">[Monday 21 March 2011] [07:42:11] &lt;sustrik&gt;   that&#8217;s a special case of current 0mq api</div>
<div class="line">[Monday 21 March 2011] [07:42:54] &lt;sustrik&gt;   you can propose changing zmq_msg_t into blob_t</div>
<div class="line">[Monday 21 March 2011] [07:42:54] &lt;pieterh&gt;   anyhow, my advice is to not try to imitate neither TCP nor UDP but develop clear and optimal 0MQ semantics in the API</div>
<div class="line">[Monday 21 March 2011] [07:43:03] &lt;pieterh&gt;   you will get more adoption of your API</div>
<div class="line">[Monday 21 March 2011] [07:43:10] &lt;pieterh&gt;   and that&#8217;s the way to get 0MQ into the kernel</div>
<div class="line">[Monday 21 March 2011] [07:43:18] &lt;sustrik&gt;   sure, go on, propose an alternative</div>
<div class="line">[Monday 21 March 2011] [07:43:23] &lt;pieterh&gt;   slavish imitation of old, semi-accurate APIs won&#8217;t work</div>
<div class="line">[Monday 21 March 2011] [07:43:28] &lt;pieterh&gt;   ok, I&#8217;ll propose an alternative</div>
<div class="line">[Monday 21 March 2011] [07:43:33] &lt;sustrik&gt;   ok</div>
<div class="line">[Monday 21 March 2011] [07:44:04] &lt;sustrik&gt;   as for kernel it&#8217;s a very different problem so let&#8217;s forget about it atm</div>
<div class="line">[Monday 21 March 2011] [07:44:23] &lt;pieterh&gt;   well, I think the point is that simple / clean gets you market share</div>
<div class="line">[Monday 21 March 2011] [07:44:31] &lt;sustrik&gt;   sure</div>
<div class="line">[Monday 21 March 2011] [07:44:50] &lt;sustrik&gt;   kernel is different though &#8211; if you propose change to ABI, you&#8217;ll never get in</div>
<div class="line">[Monday 21 March 2011] [07:44:59] &lt;pieterh&gt;   the kernel is just peopl;e</div>
<div class="line">[Monday 21 March 2011] [07:45:02] &lt;pieterh&gt;   <a href="#id27"><span class="problematic" id="id28">*</span></a>people</div>
<div class="line">[Monday 21 March 2011] [07:45:22] &lt;sustrik&gt;   the problem with new ABIs is they have to be maintained indefinitely</div>
<div class="line">[Monday 21 March 2011] [07:45:24] &lt;Guthur&gt;    tis a shame C doesn&#8217;t support method overloading</div>
<div class="line">[Monday 21 March 2011] [07:45:42] &lt;Guthur&gt;    method/function</div>
<div class="line">[Monday 21 March 2011] [07:45:54] &lt;pieterh&gt;   Guthur: well, it&#8217;s nice that you know what a function is, forever</div>
<div class="line">[Monday 21 March 2011] [07:46:08] &lt;pieterh&gt;   sustrik: do you mind if I delete the irrelevant comments on the 3.0 page?</div>
<div class="line">[Monday 21 March 2011] [07:46:21] &lt;sustrik&gt;   which are those?</div>
<div class="line">[Monday 21 March 2011] [07:46:27] &lt;pieterh&gt;   all of them, I guess</div>
<div class="line">[Monday 21 March 2011] [07:46:27] &lt;sustrik&gt;   ah, the comments</div>
<div class="line">[Monday 21 March 2011] [07:46:30] &lt;sustrik&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [07:46:31] &lt;sustrik&gt;   sure</div>
<div class="line">[Monday 21 March 2011] [07:46:39] &lt;sustrik&gt;   i haven&#8217;t known it&#8217;s even possible</div>
<div class="line">[Monday 21 March 2011] [07:46:40] &lt;Guthur&gt;    overloading doesn&#8217;t remove that but you can have Send(blob*, size)  Send(zmq_msg) etc</div>
<div class="line">[Monday 21 March 2011] [07:47:11] &lt;Guthur&gt;    anyway not really benefiting the discussing</div>
<div class="line">[Monday 21 March 2011] [07:47:11] &lt;sustrik&gt;   Guthur: that helps with API, but doesn&#8217;t help with ABI</div>
<div class="line">[Monday 21 March 2011] [07:47:27] &lt;sustrik&gt;   from ABI point of view it&#8217;s still 2 functions</div>
<div class="line">[Monday 21 March 2011] [07:48:57] &lt;Guthur&gt;    but this was a discussion about API,</div>
<div class="line">[Monday 21 March 2011] [07:49:03] &lt;Guthur&gt;    i thought</div>
<div class="line">[Monday 21 March 2011] [07:49:23] &lt;sustrik&gt;   mostly, there are some ABI users though</div>
<div class="line">[Monday 21 March 2011] [07:49:29] &lt;sustrik&gt;   namely, clrzmq :)</div>
<div class="line">[Monday 21 March 2011] [07:49:34] &lt;sustrik&gt;   right?</div>
<div class="line">[Monday 21 March 2011] [07:49:58] &lt;mile&gt;      yrashk,</div>
<div class="line">[Monday 21 March 2011] [07:50:07] &lt;Guthur&gt;    well... yeah</div>
<div class="line">[Monday 21 March 2011] [07:57:51] &lt;yrashk&gt;    mile: ?</div>
<div class="line">[Monday 21 March 2011] [07:58:56] &lt;mile&gt;      yrashk, hi, I was just into connecting yaws to erlzmq2, and I&#8217;d need some advice</div>
<div class="line">[Monday 21 March 2011] [07:59:14] &lt;yrashk&gt;    mile: sure</div>
<div class="line">[Monday 21 March 2011] [07:59:44] &lt;mile&gt;      docs says it creates an OS thread per context</div>
<div class="line">[Monday 21 March 2011] [08:00:16] &lt;yrashk&gt;    that&#8217;s right</div>
<div class="line">[Monday 21 March 2011] [08:00:21] &lt;mile&gt;      that means, if I want to serve a large number of connections (parallel), I should make some kind of a router talking to zmq</div>
<div class="line">[Monday 21 March 2011] [08:00:36] &lt;mile&gt;      which then talks to many erlang processes</div>
<div class="line">[Monday 21 March 2011] [08:00:59] &lt;yrashk&gt;    do you plan to open a large open of contexts?</div>
<div class="line">[Monday 21 March 2011] [08:01:16] &lt;pieterh&gt;   sustrik: ok, I&#8217;ve thrown together a very rough API proposal</div>
<div class="line">[Monday 21 March 2011] [08:01:17] &lt;mile&gt;      yes, a web server in the front</div>
<div class="line">[Monday 21 March 2011] [08:01:24] &lt;sustrik&gt;   ok</div>
<div class="line">[Monday 21 March 2011] [08:01:24] &lt;mile&gt;      so, the more, the better :)</div>
<div class="line">[Monday 21 March 2011] [08:01:44] &lt;pieterh&gt;   sustrik: mostly, there is a really nice class-oriented API style we&#8217;ve developed for ZFL</div>
<div class="line">[Monday 21 March 2011] [08:01:49] &lt;Guthur&gt;    pieterh: you sending to the mailing list, or is it on the wiki</div>
<div class="line">[Monday 21 March 2011] [08:01:55] &lt;yrashk&gt;    is there any good reason to open a large # of contexts?</div>
<div class="line">[Monday 21 March 2011] [08:02:02] &lt;mile&gt;      a good example is comet/ajax clients</div>
<div class="line">[Monday 21 March 2011] [08:02:04] &lt;sustrik&gt;   pieterh: can you send that to the ML</div>
<div class="line">[Monday 21 March 2011] [08:02:05] &lt;pieterh&gt;   Guthur: my pattern is to document on the wiki first, then tell the list or IRC about it</div>
<div class="line">[Monday 21 March 2011] [08:02:14] &lt;pieterh&gt;   sending specs / proposals to the ML is an anti-pattern</div>
<div class="line">[Monday 21 March 2011] [08:02:27] &lt;Guthur&gt;    no probs, just eager to have a look</div>
<div class="line">[Monday 21 March 2011] [08:02:33] &lt;mile&gt;      yrashk, no good reason, one would do good, it it takes care of multiplexing</div>
<div class="line">[Monday 21 March 2011] [08:02:36] &lt;sustrik&gt;   nobody is going to notice it</div>
<div class="line">[Monday 21 March 2011] [08:02:47] &lt;yrashk&gt;    mile: our recv does multiplex</div>
<div class="line">[Monday 21 March 2011] [08:03:31] &lt;mile&gt;      yrashk, so a single recv which then talks to a large number of erlang processes should work fine?</div>
<div class="line">[Monday 21 March 2011] [08:03:45] &lt;pieterh&gt;   sustrik: what are the actual goals with the 3.0 API?</div>
<div class="line">[Monday 21 March 2011] [08:04:12] &lt;sustrik&gt;   move towards POSIX</div>
<div class="line">[Monday 21 March 2011] [08:04:36] &lt;pieterh&gt;   simpler API?</div>
<div class="line">[Monday 21 March 2011] [08:04:41] &lt;pieterh&gt;   less lines of code in apps?</div>
<div class="line">[Monday 21 March 2011] [08:04:46] &lt;sustrik&gt;   nope, POSIX-like api</div>
<div class="line">[Monday 21 March 2011] [08:04:50] &lt;pieterh&gt;   that&#8217;s all?</div>
<div class="line">[Monday 21 March 2011] [08:04:55] &lt;sustrik&gt;   for me, yes</div>
<div class="line">[Monday 21 March 2011] [08:04:56] &lt;yrashk&gt;    mile: well, you can spawn multiple recvs on the erlang side for different sockets (even in a single context, but you can do multiple contextrs too) and every context will multiplex (it uses zmq_poll)</div>
<div class="line">[Monday 21 March 2011] [08:05:10] &lt;pieterh&gt;   ok, I&#8217;ll add my goals too, they&#8217;re not in conflict afaics</div>
<div class="line">[Monday 21 March 2011] [08:05:16] &lt;tjgillies&gt; anyone have a pub/sub example for node? i can&#8217;t find one anywhere</div>
<div class="line">[Monday 21 March 2011] [08:05:18] &lt;sustrik&gt;   + removing some obsolete stuff</div>
<div class="line">[Monday 21 March 2011] [08:05:30] &lt;sustrik&gt;   but please use mailing list</div>
<div class="line">[Monday 21 March 2011] [08:05:46] &lt;sustrik&gt;   nobody will see the discussion on the webpage</div>
<div class="line">[Monday 21 March 2011] [08:06:03] &lt;pieterh&gt;   sustrik: like I said, I document on the wiki first, <em>then</em> discuss on the list</div>
<div class="line">[Monday 21 March 2011] [08:06:03] &lt;mile&gt;      yrashk, thanks! :)   do you know of any code snippets around?</div>
<div class="line">[Monday 21 March 2011] [08:06:13] &lt;sustrik&gt;   ok</div>
<div class="line">[Monday 21 March 2011] [08:06:16] &lt;mile&gt;      I couldn&#8217;t find much on the webpage</div>
<div class="line">[Monday 21 March 2011] [08:06:25] &lt;yrashk&gt;    mile: perf/ and test/</div>
<div class="line">[Monday 21 March 2011] [08:06:30] &lt;yrashk&gt;    mile: in the repo</div>
<div class="line">[Monday 21 March 2011] [08:06:30] &lt;sustrik&gt;   but i makes unclear what&#8217;s your proposal</div>
<div class="line">[Monday 21 March 2011] [08:06:31] &lt;mile&gt;      tx :)</div>
<div class="line">[Monday 21 March 2011] [08:06:37] &lt;sustrik&gt;   at least mark it as such</div>
<div class="line">[Monday 21 March 2011] [08:06:44] &lt;pieterh&gt;   sustrik: have you read the page?</div>
<div class="line">[Monday 21 March 2011] [08:06:56] &lt;sustrik&gt;   yep</div>
<div class="line">[Monday 21 March 2011] [08:07:10] &lt;pieterh&gt;   it&#8217;s literally a brain dump, not organized yet</div>
<div class="line">[Monday 21 March 2011] [08:07:12] &lt;yrashk&gt;    mile: yw</div>
<div class="line">[Monday 21 March 2011] [08:07:22] &lt;sustrik&gt;   whatever</div>
<div class="line">[Monday 21 March 2011] [08:07:30] &lt;sustrik&gt;   just move the discussion the mailing list</div>
<div class="line">[Monday 21 March 2011] [08:07:50] &lt;pieterh&gt;   Yes, I&#8217;m in the process of doing that</div>
<div class="line">[Monday 21 March 2011] [08:07:55] &lt;sustrik&gt;   goodo</div>
<div class="line">[Monday 21 March 2011] [08:08:23] &lt;pieterh&gt;   you&#8217;d prefer that my proposal is marked &#8220;proposed by Pieter&#8221; or somesuch?</div>
<div class="line">[Monday 21 March 2011] [08:08:35] &lt;pieterh&gt;   we don&#8217;t generally do this</div>
<div class="line">[Monday 21 March 2011] [08:08:49] &lt;pieterh&gt;   wiki pages = edit into shape and consensus</div>
<div class="line">[Monday 21 March 2011] [08:09:32] &lt;sustrik&gt;   doesn&#8217;t really matter as long as it&#8217;s discussed on the mailing list</div>
<div class="line">[Monday 21 March 2011] [08:09:40] &lt;sustrik&gt;   then it&#8217;s clear who proposed what</div>
<div class="line">[Monday 21 March 2011] [08:13:12] &lt;pieterh&gt;   ok, done</div>
<div class="line">[Monday 21 March 2011] [08:13:19] &lt;Guthur&gt;    will pushing string handling down into 0MQ have any adverse effect on people sending binary blobs</div>
<div class="line">[Monday 21 March 2011] [08:13:29] &lt;pieterh&gt;   Guthur: it&#8217;s two different use cases</div>
<div class="line">[Monday 21 March 2011] [08:13:38] &lt;pieterh&gt;   sending strings is one very common case</div>
<div class="line">[Monday 21 March 2011] [08:13:54] &lt;Guthur&gt;    sure, but binary serialization is quite popular these days</div>
<div class="line">[Monday 21 March 2011] [08:13:58] &lt;pieterh&gt;   it&#8217;s only in C that a string and a blob are fundamentally different</div>
<div class="line">[Monday 21 March 2011] [08:14:03] &lt;Guthur&gt;    protobuffers etc</div>
<div class="line">[Monday 21 March 2011] [08:14:17] &lt;pieterh&gt;   yeah, but this is not stuff you want to learn as a beginner</div>
<div class="line">[Monday 21 March 2011] [08:15:13] &lt;Guthur&gt;    if you are a beginner you probably shouldn&#8217;t be using C</div>
<div class="line">[Monday 21 March 2011] [08:15:21] &lt;Guthur&gt;    you&#8217;re feet can only take so much</div>
<div class="line">[Monday 21 March 2011] [08:15:28] &lt;pieterh&gt;   perhaps it was an error to use C as the language for the Guide</div>
<div class="line">[Monday 21 March 2011] [08:16:32] &lt;Guthur&gt;    pieterh: you have done a good job there though</div>
<div class="line">[Monday 21 March 2011] [08:16:53] &lt;pieterh&gt;   with a lot of help from contributors...</div>
<div class="line">[Monday 21 March 2011] [08:16:59] &lt;Guthur&gt;    I suppose my comment was more programming general as opposed to 0MQ beginners</div>
<div class="line">[Monday 21 March 2011] [08:17:51] &lt;Guthur&gt;    I&#8217;d imagine most of the bindings provide string handling</div>
<div class="line">[Monday 21 March 2011] [08:18:02] &lt;Guthur&gt;    I know i did with clrzmq</div>
<div class="line">[Monday 21 March 2011] [08:18:04] &lt;pieterh&gt;   perhaps we should make a standard C binding... :-)</div>
<div class="line">[Monday 21 March 2011] [08:18:56] &lt;Guthur&gt;    well you did mention multiple levels of the API</div>
<div class="line">[Monday 21 March 2011] [08:20:01] &lt;pieterh&gt;   hmm</div>
<div class="line">[Monday 21 March 2011] [08:22:47] &lt;pieterh&gt;   sustrik: if we made a separate C binding, most of my concerns could be solved there</div>
<div class="line">[Monday 21 March 2011] [08:23:25] &lt;sustrik&gt;   you mean like C binding on top of POSIX api</div>
<div class="line">[Monday 21 March 2011] [08:23:28] &lt;pieterh&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [08:23:34] &lt;sustrik&gt;   why not</div>
<div class="line">[Monday 21 March 2011] [08:23:37] &lt;sustrik&gt;   it&#8217;s up to you</div>
<div class="line">[Monday 21 March 2011] [08:23:43] &lt;pieterh&gt;   I have a lovely class-oriented model in ZFL...</div>
<div class="line">[Monday 21 March 2011] [08:23:48] &lt;sustrik&gt;   ack</div>
<div class="line">[Monday 21 March 2011] [08:24:13] &lt;pieterh&gt;   this would remove the need for random ad-hoc layers like zmsg and s_recv/s_send</div>
<div class="line">[Monday 21 March 2011] [08:24:22] &lt;pieterh&gt;   ok, I&#8217;ll think it through</div>
<div class="line">[Monday 21 March 2011] [08:24:25] &lt;sustrik&gt;   sure, go for it</div>
<div class="line">[Monday 21 March 2011] [08:24:41] &lt;pieterh&gt;   there&#8217;s stuff like serialization that other bindings offer, right?</div>
<div class="line">[Monday 21 March 2011] [08:24:44] &lt;pieterh&gt;   json, etc.</div>
<div class="line">[Monday 21 March 2011] [08:24:53] &lt;sustrik&gt;   yes, different stuff</div>
<div class="line">[Monday 21 March 2011] [08:24:56] &lt;pieterh&gt;   hmm</div>
<div class="line">[Monday 21 March 2011] [08:25:08] &lt;sustrik&gt;   some bindings don&#8217;t even follow the underlying APIs</div>
<div class="line">[Monday 21 March 2011] [08:25:18] &lt;pieterh&gt;   indeed</div>
<div class="line">[Monday 21 March 2011] [08:25:34] &lt;sustrik&gt;   and adhere more to paradigm of the language in question</div>
<div class="line">[Monday 21 March 2011] [08:25:39] &lt;sustrik&gt;   like C#</div>
<div class="line">[Monday 21 March 2011] [08:25:51] &lt;sustrik&gt;   Guthur may be more specific on that</div>
<div class="line">[Monday 21 March 2011] [08:26:21] &lt;pieterh&gt;   this means the real API can be as complex as you need to make it</div>
<div class="line">[Monday 21 March 2011] [08:26:40] &lt;pieterh&gt;   hmm, ok, this is a good plan</div>
<div class="line">[Monday 21 March 2011] [08:26:46] &lt;sustrik&gt;   nice</div>
<div class="line">[Monday 21 March 2011] [08:40:05] &lt;Guthur&gt;    yeah. I&#8217;m guilty of deviating somewhat from the underlying API</div>
<div class="line">[Monday 21 March 2011] [08:41:01] &lt;Guthur&gt;    my rational is that to get accepted by a language community such as C# you need to provide adequate abstractions</div>
<div class="line">[Monday 21 March 2011] [08:41:33] &lt;Guthur&gt;    string handling being a prime example</div>
<div class="line">[Monday 21 March 2011] [08:42:09] &lt;Guthur&gt;    they get scared if they see too many byte arrays</div>
<div class="line">[Monday 21 March 2011] [08:43:03] &lt;Guthur&gt;    I&#8217;m not joking there either, when I demonstrated something to my boss that is exactly what he picked up on, he was like &#8216;ugh byte arrays&#8217;</div>
<div class="line">[Monday 21 March 2011] [08:43:25] &lt;Guthur&gt;    I should have hid that better for my demo</div>
<div class="line">[Monday 21 March 2011] [08:45:49] &lt;sustrik&gt;   :)</div>
<div class="line">[Monday 21 March 2011] [09:15:12] &lt;mile&gt;      yrashk, got the forst results</div>
<div class="line">[Monday 21 March 2011] [09:15:22] &lt;mile&gt;      erlang talking to c++</div>
<div class="line">[Monday 21 March 2011] [09:15:41] &lt;mile&gt;      but not very impressive, I guess I have done something wrong</div>
<div class="line">[Monday 21 March 2011] [09:16:03] &lt;mile&gt;      got around 2600 msg/sec</div>
<div class="line">[Monday 21 March 2011] [09:16:28] &lt;mile&gt;      that is, the double of that</div>
<div class="line">[Monday 21 March 2011] [09:16:29] &lt;pieterh&gt;   mile: are you doing request-reply?</div>
<div class="line">[Monday 21 March 2011] [09:16:50] &lt;mile&gt;      yes</div>
<div class="line">[Monday 21 March 2011] [09:17:00] &lt;pieterh&gt;   that&#8217;s pretty normal then</div>
<div class="line">[Monday 21 March 2011] [09:17:27] &lt;pieterh&gt;   round-tripping is slow</div>
<div class="line">[Monday 21 March 2011] [09:17:35] &lt;mile&gt;      ok, thats good in terms I didn&#8217;t screw up :)</div>
<div class="line">[Monday 21 March 2011] [09:17:54] &lt;pieterh&gt;   ah, you may also have screwed up, that&#8217;s not excluded :-)</div>
<div class="line">[Monday 21 March 2011] [09:18:07] &lt;mile&gt;      hehe</div>
<div class="line">[Monday 21 March 2011] [09:18:19] &lt;pieterh&gt;   if you want to measure throughput, try a push/pull or pub/sub test</div>
<div class="line">[Monday 21 March 2011] [09:18:30] &lt;mile&gt;      so, if I get it right, single request/reply are bounded by the roundtrip</div>
<div class="line">[Monday 21 March 2011] [09:18:35] &lt;yrashk&gt;    there are pub/sub perf tests in erlzmq2</div>
<div class="line">[Monday 21 March 2011] [09:18:38] &lt;mile&gt;      but if I had parallel clients</div>
<div class="line">[Monday 21 March 2011] [09:18:38] &lt;pieterh&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [09:18:51] &lt;mile&gt;      that would scale</div>
<div class="line">[Monday 21 March 2011] [09:19:00] &lt;pieterh&gt;   mile: how far in the Guide have you read?</div>
<div class="line">[Monday 21 March 2011] [09:19:28] &lt;mile&gt;      pieterh, good point, I started skipping at some point</div>
<div class="line">[Monday 21 March 2011] [09:19:29] &lt;mile&gt;      :)</div>
<div class="line">[Monday 21 March 2011] [09:19:45] &lt;mile&gt;      I&#8217;ll get back to it</div>
<div class="line">[Monday 21 March 2011] [09:20:06] &lt;pieterh&gt;   it doesn&#8217;t talk about round-tripping until chapter 4</div>
<div class="line">[Monday 21 March 2011] [09:20:21] &lt;pieterh&gt;   but at least you need to know how to scale up req/rep</div>
<div class="line">[Monday 21 March 2011] [09:20:35] &lt;pieterh&gt;   using devices, which we cover in ch2</div>
<div class="line">[Monday 21 March 2011] [09:21:04] &lt;yrashk&gt;    btw pieterh I am considering actually using 0mq for some notification bus here :) still not sure whether I can make this simple enough, though..</div>
<div class="line">[Monday 21 March 2011] [09:21:06] &lt;mile&gt;      that I have read, but I definitely need to read it again :)</div>
<div class="line">[Monday 21 March 2011] [09:21:41] &lt;pieterh&gt;   yrashk: well, let us know if you hit any blocks</div>
<div class="line">[Monday 21 March 2011] [09:21:55] &lt;yrashk&gt;    I already hit one, it looks too complicated for me :D</div>
<div class="line">[Monday 21 March 2011] [09:23:06] &lt;pieterh&gt;   you mean the use case?</div>
<div class="line">[Monday 21 March 2011] [09:23:13] &lt;yrashk&gt;    yeah</div>
<div class="line">[Monday 21 March 2011] [09:23:28] &lt;yrashk&gt;    I am still to come to any kind of real model yet</div>
<div class="line">[Monday 21 March 2011] [09:23:44] &lt;pieterh&gt;   it&#8217;s a new system or you want to reimplement an existing one?</div>
<div class="line">[Monday 21 March 2011] [09:23:54] &lt;yrashk&gt;    but I need to build a cluster-wide notification system where everyone can push a mesasge to a &#8220;topic&#8221; and subscribe to any topic</div>
<div class="line">[Monday 21 March 2011] [09:24:14] &lt;yrashk&gt;    but it&#8217;s multihost and host-failure tolerant.. (well, it should be)</div>
<div class="line">[Monday 21 March 2011] [09:24:18] &lt;pieterh&gt;   read the whaleshark whitepaper yet?</div>
<div class="line">[Monday 21 March 2011] [09:24:27] &lt;yrashk&gt;    briefly</div>
<div class="line">[Monday 21 March 2011] [09:24:28] &lt;pieterh&gt;   that&#8217;s more or less the idea</div>
<div class="line">[Monday 21 March 2011] [09:24:52] &lt;pieterh&gt;   more or less, not exactly</div>
<div class="line">[Monday 21 March 2011] [09:24:59] &lt;pieterh&gt;   but there may be ideas there to help you</div>
<div class="line">[Monday 21 March 2011] [09:25:16] &lt;yrashk&gt;    good idea, thanks</div>
<div class="line">[Monday 21 March 2011] [09:25:32] &lt;pieterh&gt;   depending on the scale you can also make a brokered model</div>
<div class="line">[Monday 21 March 2011] [09:25:43] &lt;pieterh&gt;   e.g. something like AMQP&#8217;s topic exchange</div>
<div class="line">[Monday 21 March 2011] [09:25:55] &lt;yrashk&gt;    I&#8217;d rather avoid amqp</div>
<div class="line">[Monday 21 March 2011] [09:26:04] &lt;pieterh&gt;   no, not AMQP, just some of the semantics</div>
<div class="line">[Monday 21 March 2011] [09:26:13] &lt;yrashk&gt;    I mean</div>
<div class="line">[Monday 21 March 2011] [09:26:16] &lt;pieterh&gt;   I can explain briefly if you like, it&#8217;s very elegant</div>
<div class="line">[Monday 21 March 2011] [09:26:21] &lt;yrashk&gt;    I&#8217;d rather avoid single-broker thing</div>
<div class="line">[Monday 21 March 2011] [09:26:26] &lt;pieterh&gt;   ah, ok, why?</div>
<div class="line">[Monday 21 March 2011] [09:26:47] &lt;pieterh&gt;   &#8216;notification&#8217; doesn&#8217;t immediately suggest high volumes</div>
<div class="line">[Monday 21 March 2011] [09:26:48] &lt;yrashk&gt;    I need to be very tolerant to host failures (any host can go down any time)</div>
<div class="line">[Monday 21 March 2011] [09:26:56] &lt;pieterh&gt;   bleh, this is trivial to address</div>
<div class="line">[Monday 21 March 2011] [09:27:07] &lt;pieterh&gt;   you make live-live redundancy, period</div>
<div class="line">[Monday 21 March 2011] [09:27:24] &lt;pieterh&gt;   especially simple for pubsub models</div>
<div class="line">[Monday 21 March 2011] [09:27:40] &lt;pieterh&gt;   so what&#8217;s the volume?</div>
<div class="line">[Monday 21 March 2011] [09:28:12] &lt;yrashk&gt;    and yeah there no high volumes &#8211; I just want this system to work through any # of hosts, don&#8217;t fail when any host is down and make some messages durable</div>
<div class="line">[Monday 21 March 2011] [09:28:32] &lt;yrashk&gt;    a kind of intra-cluster signalling framework, so to say</div>
<div class="line">[Monday 21 March 2011] [09:28:38] &lt;yrashk&gt;    serverless one, if you wish</div>
<div class="line">[Monday 21 March 2011] [09:28:57] &lt;yrashk&gt;    i.e. each host is equal to any other host in the system</div>
<div class="line">[Monday 21 March 2011] [09:28:57] &lt;pieterh&gt;   ... removing stable points from a network doesn&#8217;t always make it simpler</div>
<div class="line">[Monday 21 March 2011] [09:29:03] &lt;pieterh&gt;   atomic multicast?</div>
<div class="line">[Monday 21 March 2011] [09:29:09] &lt;pieterh&gt;   paxos style?</div>
<div class="line">[Monday 21 March 2011] [09:29:27] &lt;pieterh&gt;   actually I have an Erlang implementation in my pocket somewhere</div>
<div class="line">[Monday 21 March 2011] [09:29:43] &lt;pieterh&gt;   but not using 0MQ</div>
<div class="line">[Monday 21 March 2011] [09:29:54] &lt;yrashk&gt;    I probably don&#8217;t even care about atomicity. Just getting messages delivered to those who want to listen to them, if the host was down, deliver all durable messages there, too</div>
<div class="line">[Monday 21 March 2011] [09:30:41] &lt;yrashk&gt;    and yeah, dynamic node additions and removals, obviously</div>
<div class="line">[Monday 21 March 2011] [09:30:44] &lt;pieterh&gt;   well... IMO you&#8217;re setting the bar too high</div>
<div class="line">[Monday 21 March 2011] [09:30:47] &lt;yrashk&gt;    nothing fancy, in fact</div>
<div class="line">[Monday 21 March 2011] [09:30:55] &lt;pieterh&gt;   yet, too complex to implement... :-)</div>
<div class="line">[Monday 21 March 2011] [09:31:03] &lt;pieterh&gt;   make it simpler, implement that, then improve it</div>
<div class="line">[Monday 21 March 2011] [09:31:03] &lt;yrashk&gt;    yep</div>
<div class="line">[Monday 21 March 2011] [09:31:19] &lt;pieterh&gt;   my suggestion would be to use a broker, and if you need it, a broker pair</div>
<div class="line">[Monday 21 March 2011] [09:31:29] &lt;pieterh&gt;   use a simple topic routing engine, I can provide you a design if needed</div>
<div class="line">[Monday 21 March 2011] [09:31:54] &lt;pieterh&gt;   then, when you have that working, figure out what you really want to make</div>
<div class="line">[Monday 21 March 2011] [09:32:40] &lt;yrashk&gt;    I guess I also need to read about pgm</div>
<div class="line">[Monday 21 March 2011] [09:32:44] &lt;pieterh&gt;   you can relatively easily evolve from a broker-based architecture to a distributed one</div>
<div class="line">[Monday 21 March 2011] [09:32:55] &lt;pieterh&gt;   however, jumping straight to a distributed model is rather hard</div>
<div class="line">[Monday 21 March 2011] [09:33:01] &lt;pieterh&gt;   look at the RRR patterns in Ch4</div>
<div class="line">[Monday 21 March 2011] [09:33:01] &lt;yrashk&gt;    ikr :)</div>
<div class="line">[Monday 21 March 2011] [09:33:08] &lt;pieterh&gt;   the distributed pirate is the very last example</div>
<div class="line">[Monday 21 March 2011] [09:33:49] &lt;pieterh&gt;   pgm is a decent option here but will require network support</div>
<div class="line">[Monday 21 March 2011] [09:34:33] &lt;pieterh&gt;   you could even make this work with a forwarder device, in a very short time</div>
<div class="line">[Monday 21 March 2011] [09:34:36] &lt;pieterh&gt;   hah</div>
<div class="line">[Monday 21 March 2011] [09:34:45] &lt;pieterh&gt;   to cheat...</div>
<div class="line">[Monday 21 March 2011] [09:34:59] &lt;pieterh&gt;   every node connects to the forwarder front-end, and to the forwarder back-end</div>
<div class="line">[Monday 21 March 2011] [09:35:09] &lt;pieterh&gt;   use SUB socket filtering</div>
<div class="line">[Monday 21 March 2011] [09:35:15] &lt;pieterh&gt;   problem solved</div>
<div class="line">[Monday 21 March 2011] [09:35:31] &lt;yrashk&gt;    so a single forwarded device, then?</div>
<div class="line">[Monday 21 March 2011] [09:35:35] &lt;pieterh&gt;   yeah</div>
<div class="line">[Monday 21 March 2011] [09:35:36] &lt;yrashk&gt;    for starters</div>
<div class="line">[Monday 21 March 2011] [09:35:46] &lt;pieterh&gt;   all it does is connect a SUB to a PUB socket</div>
<div class="line">[Monday 21 March 2011] [09:36:16] &lt;pieterh&gt;   it acts like a network-global multicast group</div>
<div class="line">[Monday 21 March 2011] [09:36:26] &lt;yrashk&gt;    yeah I get it</div>
<div class="line">[Monday 21 March 2011] [09:36:41] &lt;pieterh&gt;   it&#8217;ll take you about 1 hour to make, maybe less</div>
<div class="line">[Monday 21 March 2011] [09:36:57] &lt;yrashk&gt;    I can already imagine this, I have some good visual thinking</div>
<div class="line">[Monday 21 March 2011] [09:37:08] &lt;pieterh&gt;   when it works, send $1.50 to my paypal account, thanks</div>
<div class="line">[Monday 21 March 2011] [09:37:16] &lt;yrashk&gt;    hahah</div>
<div class="line">[Monday 21 March 2011] [09:37:21] &lt;pieterh&gt;   :-)</div>
<div class="line">[Monday 21 March 2011] [09:37:28] &lt;yrashk&gt;    what&#8217;s the account address? ;))</div>
<div class="line">[Monday 21 March 2011] [09:38:16] &lt;pieterh&gt;   ah, I have it here somewhere...</div>
<div class="line">[Monday 21 March 2011] [09:38:35] &lt;pieterh&gt;   so the downside of this approach is that filtering is subscriber-side</div>
<div class="line">[Monday 21 March 2011] [09:39:04] &lt;pieterh&gt;   and you have a central point, which you can scale to N redundant live-live instances</div>
<div class="line">[Monday 21 March 2011] [09:39:29] &lt;pieterh&gt;   upside is every node except the forwarder is dynamic</div>
<div class="line">[Monday 21 March 2011] [09:40:45] &lt;yrashk&gt;    yeah forwarders are obviously the bottlenecks here</div>
<div class="line">[Monday 21 March 2011] [09:41:12] &lt;pieterh&gt;   it won&#8217;t slow things down unless you&#8217;re doing millions of msg/sec</div>
<div class="line">[Monday 21 March 2011] [09:41:23] &lt;pieterh&gt;   if you need more scale, you switch to a name service approach</div>
<div class="line">[Monday 21 March 2011] [09:41:38] &lt;pieterh&gt;   i.e. every publisher is also a forwarder</div>
<div class="line">[Monday 21 March 2011] [09:41:39] &lt;yrashk&gt;    no I am not expecting huge volumes</div>
<div class="line">[Monday 21 March 2011] [09:41:49] &lt;pieterh&gt;   so, no bottleneck issue</div>
<div class="line">[Monday 21 March 2011] [09:42:01] &lt;pieterh&gt;   simple code doesn&#8217;t crash</div>
<div class="line">[Monday 21 March 2011] [09:42:31] &lt;pieterh&gt;   you probably need to set a HWM properly</div>
<div class="line">[Monday 21 March 2011] [09:43:07] &lt;yrashk&gt;    so what you&#8217;re suggesting is having a forwarder on each and every node, right?</div>
<div class="line">[Monday 21 March 2011] [09:44:00] &lt;pieterh&gt;   no, that&#8217;s only if you need a lot more scale</div>
<div class="line">[Monday 21 March 2011] [09:44:06] &lt;pieterh&gt;   forget that</div>
<div class="line">[Monday 21 March 2011] [09:44:11] &lt;pieterh&gt;   one forwarder in middle of network</div>
<div class="line">[Monday 21 March 2011] [09:44:20] &lt;pieterh&gt;   binds to a SUB frontend, binds to a PUB backend</div>
<div class="line">[Monday 21 March 2011] [09:44:45] &lt;pieterh&gt;   every node connects to those two sockets, one to publish, one to subscribe</div>
<div class="line">[Monday 21 March 2011] [09:44:54] &lt;pieterh&gt;   every node receives every message, and filters using SUB filtering</div>
<div class="line">[Monday 21 March 2011] [09:45:00] &lt;yrashk&gt;    right</div>
<div class="line">[Monday 21 March 2011] [09:45:13] &lt;pieterh&gt;   then, if you need it, you double the forwarders and make live/live redundancy</div>
<div class="line">[Monday 21 March 2011] [09:45:46] &lt;yrashk&gt;    this live-live redundancy, any suggestions on how you would typically do it?</div>
<div class="line">[Monday 21 March 2011] [09:46:00] &lt;yrashk&gt;    is it like doing the same operations on a # of forwarders?</div>
<div class="line">[Monday 21 March 2011] [09:46:05] &lt;pieterh&gt;   you run two forwarders, right?</div>
<div class="line">[Monday 21 March 2011] [09:46:23] &lt;pieterh&gt;   and every node connects its PUB socket to both forwarders, and its SUB socket to both forwarders</div>
<div class="line">[Monday 21 March 2011] [09:46:42] &lt;pieterh&gt;   then you have to identity each message uniquely (sequence number per publisher)</div>
<div class="line">[Monday 21 March 2011] [09:46:42] &lt;yrashk&gt;    yeah then I imagined it right</div>
<div class="line">[Monday 21 March 2011] [09:46:47] &lt;pieterh&gt;   and reject duplicates</div>
<div class="line">[Monday 21 March 2011] [09:46:55] &lt;pieterh&gt;   0MQ handles the fanout and fanin properly</div>
<div class="line">[Monday 21 March 2011] [10:50:45] &lt;mikko-_&gt;   hi</div>
<div class="line">[Monday 21 March 2011] [10:51:05] &lt;mikko-_&gt;   I am not quite clear who should prepare the upstream patch for openpgm changes</div>
<div class="line">[Monday 21 March 2011] [10:57:56] &lt;sustrik&gt;   mikko-_: neither am i</div>
<div class="line">[Monday 21 March 2011] [10:58:12] &lt;sustrik&gt;   presumably, it&#8217;s better to patch the master and downstream it afterwards</div>
<div class="line">[Monday 21 March 2011] [11:12:32] &lt;mikko-_&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [11:41:00] &lt;pieterh&gt;   hi mikko</div>
<div class="line">[Monday 21 March 2011] [11:41:26] &lt;pieterh&gt;   we can&#8217;t do pull requests to multiple gits, which is annoying</div>
<div class="line">[Monday 21 March 2011] [11:42:04] &lt;pieterh&gt;   mikko-_: I&#8217;m happy to send a patch from 2.1 to master</div>
<div class="line">[Monday 21 March 2011] [11:45:13] &lt;sustrik&gt;   pieterh: if you do so, take care to separate the openpgm thing from other functionality</div>
<div class="line">[Monday 21 March 2011] [11:45:32] &lt;pieterh&gt;   sustrik: yes, it&#8217;s a single commit, the only grey part is that I tend to update the NEWS at the same time</div>
<div class="line">[Monday 21 March 2011] [11:45:41] &lt;pieterh&gt;   I&#8217;m going to start doing that in a separate commit</div>
<div class="line">[Monday 21 March 2011] [11:45:46] &lt;sustrik&gt;   ack</div>
<div class="line">[Monday 21 March 2011] [11:46:24] &lt;pieterh&gt;   I&#8217;ll send you the patch for OpenPGM then, offlist since it&#8217;s rather huge</div>
<div class="line">[Monday 21 March 2011] [11:47:01] &lt;sustrik&gt;   ok, also don&#8217;t forget to sign it off</div>
<div class="line">[Monday 21 March 2011] [11:47:07] &lt;pieterh&gt;   right</div>
<div class="line">[Monday 21 March 2011] [11:48:41] &lt;pieterh&gt;   OK, sent...</div>
<div class="line">[Monday 21 March 2011] [11:49:19] &lt;pieterh&gt;   there&#8217;s a better way to do this kind of exchange</div>
<div class="line">[Monday 21 March 2011] [11:49:42] &lt;pieterh&gt;   but I keep forgetting the ins and outs of git... :-)</div>
<div class="line">[Monday 21 March 2011] [12:08:14] &lt;pieterh&gt;   sustrik: I&#8217;m not going to scream on the list, but I&#8217;m using PAIR quite systematically now</div>
<div class="line">[Monday 21 March 2011] [12:23:39] &lt;pieterh&gt;   ok, I screamt</div>
<div class="line">[Monday 21 March 2011] [12:52:02] &lt;<a href="#id33"><span class="problematic" id="id34">Aaron__</span></a>&gt;   So I&#8217;m trying to build zeromq and have it link against a static uuid library. I&#8217;m not very good with configure scripts, and I don&#8217;t see a parameter to tell configure where the static library and headers are. Can anyone help?</div>
<div class="line">[Monday 21 March 2011] [12:53:53] &lt;pieterh&gt;   <a href="#id33"><span class="problematic" id="id35">Aaron__</span></a>: what OS are you on?</div>
<div class="line">[Monday 21 March 2011] [12:54:05] &lt;pieterh&gt;   and what language are you working in?</div>
<div class="line">[Monday 21 March 2011] [12:54:18] &lt;<a href="#id33"><span class="problematic" id="id36">Aaron__</span></a>&gt;   Just Ubuntu.</div>
<div class="line">[Monday 21 March 2011] [12:54:28] &lt;<a href="#id33"><span class="problematic" id="id37">Aaron__</span></a>&gt;   c++</div>
<div class="line">[Monday 21 March 2011] [12:55:03] &lt;pieterh&gt;   hang on, I&#8217;ll get you the gcc syntax...</div>
<div class="line">[Monday 21 March 2011] [12:55:40] &lt;<a href="#id33"><span class="problematic" id="id38">Aaron__</span></a>&gt;   gcc? Don&#8217;t I need to satisfy the configure check?</div>
<div class="line">[Monday 21 March 2011] [12:55:44] &lt;<a href="#id33"><span class="problematic" id="id39">Aaron__</span></a>&gt;   first</div>
<div class="line">[Monday 21 March 2011] [12:56:02] &lt;pieterh&gt;   you are building an application right?</div>
<div class="line">[Monday 21 March 2011] [12:56:09] &lt;pieterh&gt;   or building zmq?</div>
<div class="line">[Monday 21 March 2011] [12:56:26] &lt;pieterh&gt;   ah, it doesn&#8217;t link against anything when you build it</div>
<div class="line">[Monday 21 March 2011] [12:56:31] &lt;<a href="#id33"><span class="problematic" id="id40">Aaron__</span></a>&gt;   Well, it&#8217;s a little complicated, but right now I&#8217;m just trying to build zeromq.</div>
<div class="line">[Monday 21 March 2011] [12:56:41] &lt;pieterh&gt;   please use the 2.1 package released today</div>
<div class="line">[Monday 21 March 2011] [12:56:47] &lt;<a href="#id33"><span class="problematic" id="id41">Aaron__</span></a>&gt;   I am.</div>
<div class="line">[Monday 21 March 2011] [12:56:57] &lt;pieterh&gt;   ok, good</div>
<div class="line">[Monday 21 March 2011] [12:57:10] &lt;<a href="#id33"><span class="problematic" id="id42">Aaron__</span></a>&gt;   It builds fine if I use the uuid-dev package.</div>
<div class="line">[Monday 21 March 2011] [12:57:17] &lt;pieterh&gt;   right, which is what you want</div>
<div class="line">[Monday 21 March 2011] [12:57:35] &lt;<a href="#id33"><span class="problematic" id="id43">Aaron__</span></a>&gt;   But that creates a dependance on libuuid.so.</div>
<div class="line">[Monday 21 March 2011] [12:57:39] &lt;<a href="#id33"><span class="problematic" id="id44">Aaron__</span></a>&gt;   Which I don&#8217;t want.</div>
<div class="line">[Monday 21 March 2011] [12:57:46] &lt;Seta00&gt;    <a href="#id33"><span class="problematic" id="id45">Aaron__</span></a>: should be something like &#8211;with-uuid=/path/to/your/custom/build</div>
<div class="line">[Monday 21 March 2011] [12:57:52] &lt;<a href="#id33"><span class="problematic" id="id46">Aaron__</span></a>&gt;   I have uuid built statically...</div>
<div class="line">[Monday 21 March 2011] [12:58:05] &lt;<a href="#id33"><span class="problematic" id="id47">Aaron__</span></a>&gt;   ah</div>
<div class="line">[Monday 21 March 2011] [12:58:28] &lt;pieterh&gt;   <a href="#id33"><span class="problematic" id="id48">Aaron__</span></a>: when you find out how to do this, add it to the tips page at <a class="reference external" href="http://zero.mq/tips">http://zero.mq/tips</a></div>
<div class="line">[Monday 21 March 2011] [13:00:43] &lt;<a href="#id33"><span class="problematic" id="id49">Aaron__</span></a>&gt;   I tried &#8211;with-uuid=/path/to/uuid/install/folder but got nothing.</div>
<div class="line">[Monday 21 March 2011] [13:01:00] &lt;<a href="#id33"><span class="problematic" id="id50">Aaron__</span></a>&gt;   Just the same &#8220;configure: error: cannot link with -luuid, install uuid-dev.&#8221;</div>
<div class="line">[Monday 21 March 2011] [13:02:12] &lt;<a href="#id33"><span class="problematic" id="id51">Aaron__</span></a>&gt;   I tried a few different directories, /path/to/uuid/install/folder, /path/to/uuid/install/folder/lib, /path/to/uuid/install/folder/include, /path/to/uuid/install/folder/bin, but nothing did anything different.</div>
<div class="line">[Monday 21 March 2011] [13:02:37] &lt;<a href="#id33"><span class="problematic" id="id52">Aaron__</span></a>&gt;   Does the configure script actually support that argument?</div>
<div class="line">[Monday 21 March 2011] [13:02:49] &lt;pieterh&gt;   <a href="#id33"><span class="problematic" id="id53">Aaron__</span></a>: from reading configure, it&#8217;s looking for, and not finding &#8216;uuid_generate&#8217; in -luuid</div>
<div class="line">[Monday 21 March 2011] [13:03:29] &lt;<a href="#id33"><span class="problematic" id="id54">Aaron__</span></a>&gt;   Hmm, I guess I could double check my uuid.</div>
<div class="line">[Monday 21 March 2011] [13:05:32] &lt;pieterh&gt;   The rule in configure.in is pretty clear:</div>
<div class="line">[Monday 21 March 2011] [13:05:33] &lt;pieterh&gt;   AC_CHECK_LIB(uuid, uuid_generate, ,</div>
<div class="line">[Monday 21 March 2011] [13:05:33] &lt;pieterh&gt;               [AC_MSG_ERROR([cannot link with -luuid, install uuid-dev.])])</div>
<div class="line">[Monday 21 March 2011] [13:06:55] &lt;<a href="#id33"><span class="problematic" id="id55">Aaron__</span></a>&gt;   Yeah, my uuid library does have a uuid_generate,</div>
<div class="line">[Monday 21 March 2011] [13:07:00] &lt;<a href="#id33"><span class="problematic" id="id56">Aaron__</span></a>&gt;   Sorry about that.</div>
<div class="line">[Monday 21 March 2011] [13:07:07] &lt;<a href="#id33"><span class="problematic" id="id57">Aaron__</span></a>&gt;   Barking up the wrong tree.</div>
<div class="line">[Monday 21 March 2011] [13:07:40] &lt;<a href="#id33"><span class="problematic" id="id58">Aaron__</span></a>&gt;   Thanks for the &#8211;with-uuid argument though.</div>
<div class="line">[Monday 21 March 2011] [13:08:07] &lt;<a href="#id33"><span class="problematic" id="id59">Aaron__</span></a>&gt;   I meant &#8220;doesn&#8217;t have uuid_generate&#8221;</div>
<div class="line">[Monday 21 March 2011] [13:10:50] &lt;pieterh&gt;   ok, problem solved...</div>
<div class="line">[Monday 21 March 2011] [13:14:58] &lt;Seta00&gt;    :)</div>
<div class="line">[Monday 21 March 2011] [13:16:28] &lt;<a href="#id33"><span class="problematic" id="id60">Aaron__</span></a>&gt;   Apparantly there is more than one uuid library out there, sigh.</div>
<div class="line">[Monday 21 March 2011] [13:17:09] &lt;<a href="#id33"><span class="problematic" id="id61">Aaron__</span></a>&gt;   I thought it was the same one Postgresql was using.</div>
<div class="line">[Monday 21 March 2011] [13:17:31] &lt;mikko-_&gt;   <a href="#id33"><span class="problematic" id="id62">Aaron__</span></a>: are you building zeromq shared or static?</div>
<div class="line">[Monday 21 March 2011] [13:17:45] &lt;<a href="#id33"><span class="problematic" id="id63">Aaron__</span></a>&gt;   I want zeromq to be static too.</div>
<div class="line">[Monday 21 March 2011] [13:17:59] &lt;mikko-_&gt;   ./configure &#8211;disable-shared</div>
<div class="line">[Monday 21 March 2011] [13:18:17] &lt;<a href="#id33"><span class="problematic" id="id64">Aaron__</span></a>&gt;   Yeah, I&#8217;ll pop that on too.</div>
<div class="line">[Monday 21 March 2011] [13:18:26] &lt;mikko-_&gt;   as far as i understand if zeromq is static then libuuid would be as well</div>
<div class="line">[Monday 21 March 2011] [13:18:32] &lt;<a href="#id33"><span class="problematic" id="id65">Aaron__</span></a>&gt;   Ah</div>
<div class="line">[Monday 21 March 2011] [13:18:42] &lt;<a href="#id33"><span class="problematic" id="id66">Aaron__</span></a>&gt;   Well, I need to get the right uuid as the first step.</div>
<div class="line">[Monday 21 March 2011] [13:18:58] &lt;mikko-_&gt;   you should be able to use one provided by your OS</div>
<div class="line">[Monday 21 March 2011] [13:19:02] &lt;mikko-_&gt;   usually they ship .a as well</div>
<div class="line">[Monday 21 March 2011] [13:19:32] &lt;<a href="#id33"><span class="problematic" id="id67">Aaron__</span></a>&gt;   Yeah, I&#8217;m working on it as we speak.</div>
<div class="line">[Monday 21 March 2011] [13:20:32] &lt;mikko-_&gt;   on rhel its usually efsprogs and on ubuntu/debian etc uuid-dev</div>
<div class="line">[Monday 21 March 2011] [13:20:41] &lt;mikko-_&gt;   not sure about others</div>
<div class="line">[Monday 21 March 2011] [13:21:07] &lt;mikko-_&gt;   uuid libs are confusing as there are multiple of them</div>
<div class="line">[Monday 21 March 2011] [13:21:10] &lt;mikko-_&gt;   and they are not compatible</div>
<div class="line">[Monday 21 March 2011] [13:24:22] &lt;<a href="#id33"><span class="problematic" id="id68">Aaron__</span></a>&gt;   Yeah, I was certainly confused.</div>
<div class="line">[Monday 21 March 2011] [13:37:44] &lt;drbobbeaty&gt;        Question about the 2.1.3 packaging... with the change from 2.1.2 to 2.1.3, I now see that I&#8217;m generating a libpgm.so - but I&#8217;m not seeing it as an &#8216;ldd&#8217; dependency of libzmq.so - is this right?</div>
<div class="line">[Monday 21 March 2011] [13:38:23] &lt;drbobbeaty&gt;        I used &#8216;&#8211;with-pgm&#8217; in the build, and I see it unpacking the OpenPGM code, and the libpgm.so is generated, but I&#8217;m having trouble running my code that worked fine with 2.1.2.</div>
<div class="line">[Monday 21 March 2011] [13:38:32] &lt;<a href="#id33"><span class="problematic" id="id69">Aaron__</span></a>&gt;   Well, &#8220;nm &#8211;demangle&#8221; tells me I have uuid_generate (0000000000000ee0 T uuid_generate). I&#8217;m running configure like so, &#8221;../configure &#8211;with-pic &#8211;prefix=/root/zeromq_install/ &#8211;enable-static &#8211;disable-shared &#8211;without-documentation &#8211;with-uuid=/path/to/uuid/install/dir/ &#8221;. And I still get &#8220;configure: error: cannot link with -luuid, install uuid-dev.&#8221;</div>
<div class="line">[Monday 21 March 2011] [13:39:21] &lt;drbobbeaty&gt;        I have tried linking with &#8216;-lzmq -lpgm&#8217; and still it&#8217;s not even starting to execute - it&#8217;s as if I&#8217;m missing a critical step.</div>
<div class="line">[Monday 21 March 2011] [13:39:26] &lt;drbobbeaty&gt;        Anyone run into this?</div>
<div class="line">[Monday 21 March 2011] [13:39:30] &lt;drbobbeaty&gt;        Pieter?</div>
<div class="line">[Monday 21 March 2011] [13:39:35] &lt;pieterh&gt;   drbobbeaty: this is indeed a new part of 2.1.3</div>
<div class="line">[Monday 21 March 2011] [13:40:38] &lt;pieterh&gt;   it&#8217;s quite possible that the OpenPGM integration doesn&#8217;t work properly yet :-/</div>
<div class="line">[Monday 21 March 2011] [13:40:43] &lt;drbobbeaty&gt;        I&#8217;m OK with it being new, but code that ran fine with 2.1.2 is core dumping on main() in 2.1.3 - like I&#8217;m missing a linking step or something. Is there something I&#8217;m missing OTHER than the inclusion of &#8216;-lpgm&#8217; in the linking step?</div>
<div class="line">[Monday 21 March 2011] [13:41:10] &lt;pieterh&gt;   drbobbeaty: mikko is the man to answer this</div>
<div class="line">[Monday 21 March 2011] [13:41:15] &lt;drbobbeaty&gt;        That would be sad for a &#8216;stable&#8217; tag.</div>
<div class="line">[Monday 21 March 2011] [13:41:15] &lt;pieterh&gt;   summon mikko...</div>
<div class="line">[Monday 21 March 2011] [13:41:45] &lt;pieterh&gt;   drbobbeaty: a bit, yes, but if there&#8217;s a problem we&#8217;ll fix it immediately</div>
<div class="line">[Monday 21 March 2011] [13:42:28] &lt;pieterh&gt;   mikko: are you around?</div>
<div class="line">[Monday 21 March 2011] [13:43:21] &lt;pieterh&gt;   drbobbeaty: can you post a minimal test case that causes it to die? I&#8217;ll reproduce it</div>
<div class="line">[Monday 21 March 2011] [13:43:41] &lt;drbobbeaty&gt;        peiterh: Sure, give me a sec.</div>
<div class="line">[Monday 21 March 2011] [13:43:45] &lt;pieterh&gt;   k</div>
<div class="line">[Monday 21 March 2011] [14:01:17] &lt;drbobbeaty&gt;        pieterh: is there a list of what&#8217;s changed from 2.1.2 to 2.1.3 - I&#8217;m having a tough time makeing the &#8220;minimal test&#8221; as my simple tests are OK, but the biggies that fail are awfully complex. Too complex for a test case, really.</div>
<div class="line">[Monday 21 March 2011] [14:01:34] &lt;drbobbeaty&gt;        If I knew what changed, maybe it&#8217;d help me find the issue in my code.</div>
<div class="line">[Monday 21 March 2011] [14:15:17] &lt;cremes&gt;    i&#8217;m starting to see a new assertion that i haven&#8217;t run into before</div>
<div class="line">[Monday 21 March 2011] [14:15:18] &lt;cremes&gt;    Assertion failed: sessions.empty () (socket_base.cpp:127)</div>
<div class="line">[Monday 21 March 2011] [14:15:35] &lt;cremes&gt;    my code hasn&#8217;t changed but i did update to the latest master</div>
<div class="line">[Monday 21 March 2011] [14:15:54] &lt;cremes&gt;    has anyone else seen this?</div>
<div class="line">[Monday 21 March 2011] [14:21:11] &lt;drbobbeaty&gt;        cremes: not me, but I&#8217;m seeing other problems with 2.1.3 that I wasn&#8217;t seeing in 2.1.2</div>
<div class="line">[Monday 21 March 2011] [14:21:27] &lt;cremes&gt;    drbobbeaty: what problems are you seeing?</div>
<div class="line">[Monday 21 March 2011] [14:23:24] &lt;drbobbeaty&gt;        cremes: I&#8217;m tracking down an immediate app core dump when using the new 2.1.3 - It&#8217;s not easily reproducable in a small app, but it&#8217;s 100% reproduceable in my larger app. I&#8217;m trying to trim it down to get a good test case, but it&#8217;s proving to be hard based on the immediate nature of the core dump.</div>
<div class="line">[Monday 21 March 2011] [14:23:44] &lt;drbobbeaty&gt;        The small test case runs fine. But the bigger one is nasty.</div>
<div class="line">[Monday 21 March 2011] [14:24:41] &lt;cremes&gt;    drbobbeaty: if you catch the crash in gdb, where is it crashing inside 0mq?</div>
<div class="line">[Monday 21 March 2011] [14:25:37] &lt;drbobbeaty&gt;        Nope, it&#8217;s crashing on main() - the very first executable line. But if I comment out the calls to 0MQ, it runs just fine.</div>
<div class="line">[Monday 21 March 2011] [14:26:00] &lt;drbobbeaty&gt;        It&#8217;s the invocation of the ZMQ calls in some way that&#8217;s causing it to core dump - I just haven&#8217;t figured out what.</div>
<div class="line">[Monday 21 March 2011] [14:26:19] &lt;cremes&gt;    that is quite... odd :)</div>
<div class="line">[Monday 21 March 2011] [14:26:20] &lt;drbobbeaty&gt;        If I had a nice stack trace, I&#8217;d be able to figure this out easily. But I don&#8217;t.</div>
<div class="line">[Monday 21 March 2011] [14:26:49] &lt;pieterh&gt;   drbobbeaty: are you using pgm in all your cases?</div>
<div class="line">[Monday 21 March 2011] [14:28:08] &lt;pieterh&gt;   cremes: this is from the development master?</div>
<div class="line">[Monday 21 March 2011] [14:28:17] &lt;cremes&gt;    pieterh: correct</div>
<div class="line">[Monday 21 March 2011] [14:28:31] &lt;pieterh&gt;   can you try with the 2.1 release and see if you also get it?</div>
<div class="line">[Monday 21 March 2011] [14:28:32] &lt;cremes&gt;    i am trying to &#8216;bisect&#8217; it now to see if i can narrow down the commit that broke it</div>
<div class="line">[Monday 21 March 2011] [14:28:41] &lt;cremes&gt;    sure, i can do that</div>
<div class="line">[Monday 21 March 2011] [14:29:30] &lt;drbobbeaty&gt;        pieterh: Yup, pgm is what I use - 100% of the time.</div>
<div class="line">[Monday 21 March 2011] [14:29:36] &lt;drbobbeaty&gt;        I&#8217;m getting closer... :)</div>
<div class="line">[Monday 21 March 2011] [14:29:49] &lt;pieterh&gt;   drbobbeaty: ok, so presumably there&#8217;s a load library issue</div>
<div class="line">[Monday 21 March 2011] [14:30:02] &lt;pieterh&gt;   the other changes over 2.1.2 are all quite specific patches for core bugs</div>
<div class="line">[Monday 21 March 2011] [14:32:26] &lt;drbobbeaty&gt;        pieterh: I&#8217;m in the configuration code of my app - setting the <a href="#id566"><span class="problematic" id="id567">ZMQ_</span></a> properties of the socket. It <em>appears</em> I&#8217;m getting close.</div>
<div class="line">[Monday 21 March 2011] [14:33:00] &lt;pieterh&gt;   drbobbeaty: presumably a load error on the openpgm library</div>
<div class="line">[Monday 21 March 2011] [14:33:59] &lt;drbobbeaty&gt;        In my simple test ( <a class="reference external" href="https://gist.github.com/635015">https://gist.github.com/635015</a> ) I&#8217;m now seeing the following error:</div>
<div class="line">[Monday 21 March 2011] [14:34:20] &lt;drbobbeaty&gt;        Assertion failed: rc == 0 (connect_session.cpp:84)</div>
<div class="line">[Monday 21 March 2011] [14:34:44] &lt;drbobbeaty&gt;        Double-checking to see if I messed up the test.</div>
<div class="line">[Monday 21 March 2011] [14:38:47] &lt;drbobbeaty&gt;        pieterh: triple-checked... if I compile this as &#8216;g++ xmit.cpp -o xmit -lzmq&#8217; I get the error.</div>
<div class="line">[Monday 21 March 2011] [14:38:59] &lt;drbobbeaty&gt;        If I add in the &#8216;-lpgm&#8217; at the end I still get the error.</div>
<div class="line">[Monday 21 March 2011] [14:39:09] &lt;pieterh&gt;   ok, let me give it a shot</div>
<div class="line">[Monday 21 March 2011] [14:39:20] &lt;drbobbeaty&gt;        If I switch the order so it reads: &#8216;-lpgm -lzmq&#8217; I still get the error.</div>
<div class="line">[Monday 21 March 2011] [14:42:38] &lt;pieterh&gt;   drbobbeaty: I get a clean error message &#8216;Protocol not supported&#8217; and then a core dump</div>
<div class="line">[Monday 21 March 2011] [14:42:49] &lt;pieterh&gt;   this is 0MQ 2.1.3 built without OpenPGM</div>
<div class="line">[Monday 21 March 2011] [14:43:50] &lt;drbobbeaty&gt;        pieterh: not surprising... I&#8217;m using OpenPGM in the example. You need to build it &#8211;with-pgm and then try it.</div>
<div class="line">[Monday 21 March 2011] [14:44:16] &lt;drbobbeaty&gt;        pieterh: I&#8217;ve tried two boxes - Ubuntu 10.04.1 and CentOS 5 and both have the same error when using 2.1.3 w/OpenPGM</div>
<div class="line">[Monday 21 March 2011] [14:44:31] &lt;pieterh&gt;   drbobbeaty: would you raise an issue at <a class="reference external" href="https://github.com/zeromq/zeromq2-1/issues">https://github.com/zeromq/zeromq2-1/issues</a> and put a link to your example?</div>
<div class="line">[Monday 21 March 2011] [14:44:33] &lt;drbobbeaty&gt;        (same gist used on both machines)</div>
<div class="line">[Monday 21 March 2011] [14:45:01] &lt;drbobbeaty&gt;        I&#8217;ve never done that. I&#8217;ll try. I&#8217;ll be as complete as I can be.</div>
<div class="line">[Monday 21 March 2011] [14:45:26] &lt;pieterh&gt;   interesting... when I build 2.1.3 with pgm, the test program says &#8216;sending...&#8217; in a loop</div>
<div class="line">[Monday 21 March 2011] [14:45:30] &lt;pieterh&gt;   it doesn&#8217;t crash</div>
<div class="line">[Monday 21 March 2011] [14:45:45] &lt;drbobbeaty&gt;        Ha... I saw that once, but then when I tried it again, it failed.</div>
<div class="line">[Monday 21 March 2011] [14:45:59] &lt;pieterh&gt;   ok, will try a few times... this is Ubuntu 10.10 fwiw</div>
<div class="line">[Monday 21 March 2011] [14:46:04] &lt;drbobbeaty&gt;        The correct behavior is to see the &#8220;sending...&#8221; in a loop. (until a Ctrl-C)</div>
<div class="line">[Monday 21 March 2011] [14:46:20] &lt;pieterh&gt;   yes, that&#8217;s what I get</div>
<div class="line">[Monday 21 March 2011] [14:46:25] &lt;pieterh&gt;   doing a naive build</div>
<div class="line">[Monday 21 March 2011] [14:46:46] &lt;pieterh&gt;   so... I&#8217;m suspecting you have a conflict between versions of OpenPGM on your systems</div>
<div class="line">[Monday 21 March 2011] [14:47:10] &lt;pieterh&gt;   or some such mix caused by the upgrade of the OpenPGM version in this package</div>
<div class="line">[Monday 21 March 2011] [14:48:09] &lt;pieterh&gt;   drbobbeaty: have you enabled core dumps (&#8216;ulimit unlimited&#8217;)?</div>
<div class="line">[Monday 21 March 2011] [14:48:09] &lt;drbobbeaty&gt;        Yeah, I&#8217;m going to check on that now. Thanks for showing that it might be me.</div>
<div class="line">[Monday 21 March 2011] [14:48:26] &lt;pieterh&gt;   when you get an assertion failure, you need to get the backtrace</div>
<div class="line">[Monday 21 March 2011] [14:52:19] &lt;drbobbeaty&gt;        pieterh: got the backtrace.</div>
<div class="line">[Monday 21 March 2011] [14:52:45] &lt;drbobbeaty&gt;        I&#8217;ll include it if I can&#8217;t clean up the problem with a drop and load of all the ZMQ libraries on the box.</div>
<div class="line">[Monday 21 March 2011] [14:52:49] &lt;pieterh&gt;   cool... actually, you can log the issue in the development git, <a class="reference external" href="https://github.com/zeromq/zeromq2">https://github.com/zeromq/zeromq2</a>, it&#8217;ll be the same</div>
<div class="line">[Monday 21 March 2011] [14:53:04] &lt;pieterh&gt;   please, do log the assertion and backtrace, it may be useful info</div>
<div class="line">[Monday 21 March 2011] [14:56:51] &lt;sustrik&gt;   yuck, the change should have gone to master first</div>
<div class="line">[Monday 21 March 2011] [15:01:59] &lt;pieterh&gt;   sustrik: no-one would have tested it there, and it&#8217;s not clear that it&#8217;s caused by a code change</div>
<div class="line">[Monday 21 March 2011] [15:03:17] &lt;pieterh&gt;   I&#8217;d rather see valuable code delivered fast, and fixed fast, than held back...</div>
<div class="line">[Monday 21 March 2011] [15:04:52] &lt;cremes&gt;    after using git-bisect, it tells me that this is the first bad commit</div>
<div class="line">[Monday 21 March 2011] [15:04:53] &lt;cremes&gt;    32ded2b457b2102dba4c15e00363f031d212b1c4</div>
<div class="line">[Monday 21 March 2011] [15:05:01] &lt;cremes&gt;    Duplicate identities now checked with zmq_connect</div>
<div class="line">[Monday 21 March 2011] [15:05:19] &lt;cremes&gt;    this commit touched quite a bit of code too</div>
<div class="line">[Monday 21 March 2011] [15:05:42] &lt;cremes&gt;    pieterh: want me to open an issue against master?</div>
<div class="line">[Monday 21 March 2011] [15:05:47] &lt;pieterh&gt;   cremes: yes, please</div>
<div class="line">[Monday 21 March 2011] [15:05:49] &lt;cremes&gt;    i don&#8217;t have a small repro</div>
<div class="line">[Monday 21 March 2011] [15:06:00] &lt;pieterh&gt;   it&#8217;ll be the same issue in master and in 2.1.3</div>
<div class="line">[Monday 21 March 2011] [15:06:10] &lt;sustrik&gt;   how come it is in stable?</div>
<div class="line">[Monday 21 March 2011] [15:06:16] &lt;sustrik&gt;   it&#8217;s an untested patch</div>
<div class="line">[Monday 21 March 2011] [15:06:23] &lt;pieterh&gt;   sustrik: because we apply all patches to stable automatically</div>
<div class="line">[Monday 21 March 2011] [15:06:31] &lt;pieterh&gt;   there is no other process for defining what&#8217;s &#8220;tested&#8221;</div>
<div class="line">[Monday 21 March 2011] [15:06:47] &lt;pieterh&gt;   no other way except real use, since we lack comprehensive test coverage</div>
<div class="line">[Monday 21 March 2011] [15:07:18] &lt;sustrik&gt;   mail from March 16th: &#8220;This patch solves issue 176. However, it was not yet tested thoroughly so it should be applied to stable later on, when it&#8217;s clear it doesn&#8217;t introduce new bugs.&#8221;</div>
<div class="line">[Monday 21 March 2011] [15:07:32] &lt;pieterh&gt;   ah, then that is not in stable</div>
<div class="line">[Monday 21 March 2011] [15:07:42] &lt;pieterh&gt;   cremes is testing against development master</div>
<div class="line">[Monday 21 March 2011] [15:07:59] &lt;sustrik&gt;   ok, good</div>
<div class="line">[Monday 21 March 2011] [15:08:00] &lt;pieterh&gt;   if you tell me to hold back a patch I do so, of course</div>
<div class="line">[Monday 21 March 2011] [15:08:13] &lt;pieterh&gt;   np</div>
<div class="line">[Monday 21 March 2011] [15:08:14] &lt;cremes&gt;    <a class="reference external" href="https://github.com/zeromq/zeromq2/issues/181">https://github.com/zeromq/zeromq2/issues/181</a></div>
<div class="line">[Monday 21 March 2011] [15:08:23] &lt;sustrik&gt;   cremes: thx</div>
<div class="line">[Monday 21 March 2011] [15:08:33] &lt;pieterh&gt;   cremes, just for sanity, can you confirm the problem does _not_ happen on 2.1.3?</div>
<div class="line">[Monday 21 March 2011] [15:08:47] &lt;cremes&gt;    sure; i will download it and confirm</div>
<div class="line">[Monday 21 March 2011] [15:08:50] &lt;pieterh&gt;   much appreciated</div>
<div class="line">[Monday 21 March 2011] [15:10:14] &lt;FlaPer87&gt;  In case anyone is interested and willing to contribute: <a class="reference external" href="https://github.com/FlaPer87/asterisk-zmq-manager">https://github.com/FlaPer87/asterisk-zmq-manager</a></div>
<div class="line">[Monday 21 March 2011] [15:12:08] &lt;mikko&gt;     pieterh: am now</div>
<div class="line">[Monday 21 March 2011] [15:12:44] &lt;pieterh&gt;   mikko: possibly a false alarm, we found what might be a problem with OpenPGM in 2.1.3</div>
<div class="line">[Monday 21 March 2011] [15:13:09] &lt;pieterh&gt;   drbobbeaty is seeing if it&#8217;s caused by library confusion on his systems</div>
<div class="line">[Monday 21 March 2011] [15:13:39] &lt;pieterh&gt;   anyhow, pgm example that worked with 2.1.2 fails with 2.1.3... on my system it works fine</div>
<div class="line">[Monday 21 March 2011] [15:14:39] &lt;mikko&gt;     zfl tests failed as well it seems</div>
<div class="line">[Monday 21 March 2011] [15:14:44] &lt;pieterh&gt;   FlaPer87: line 412 is lacking &#8216;zmq_msg_close (&amp;message);&#8217;</div>
<div class="line">[Monday 21 March 2011] [15:14:56] &lt;mikko&gt;     hmm, is there a way to test OpenPGM functionally easily?</div>
<div class="line">[Monday 21 March 2011] [15:15:10] &lt;pieterh&gt;   mikko: fixed that, was some old 2.0 code that magically continued to work on 2.1...</div>
<div class="line">[Monday 21 March 2011] [15:15:18] &lt;mikko&gt;     i kinda rely on Steven on that as I have no means on testing with any sort of wates</div>
<div class="line">[Monday 21 March 2011] [15:15:22] &lt;pieterh&gt;   yeah</div>
<div class="line">[Monday 21 March 2011] [15:15:28] &lt;mikko&gt;     rates*</div>
<div class="line">[Monday 21 March 2011] [15:15:51] &lt;pieterh&gt;   we have some pgm-capable material at iMatix in Slovakia but it&#8217;s not configured any longer</div>
<div class="line">[Monday 21 March 2011] [15:16:28] &lt;FlaPer87&gt;  pieterh opps, thanks</div>
<div class="line">[Monday 21 March 2011] [15:16:45] &lt;mikko&gt;     so the openpgm is a false alarm?</div>
<div class="line">[Monday 21 March 2011] [15:16:53] &lt;pieterh&gt;   FlaPer87: try running under valgrind, you&#8217;ll catch memory leaks like that</div>
<div class="line">[Monday 21 March 2011] [15:17:10] &lt;pieterh&gt;   mikko: don&#8217;t know yet, could be a build issue we&#8217;ve not hit before</div>
<div class="line">[Monday 21 March 2011] [15:17:22] &lt;mikko&gt;     what OS is drbobbeaty running?</div>
<div class="line">[Monday 21 March 2011] [15:17:26] &lt;FlaPer87&gt;  pieterh indeed, I will</div>
<div class="line">[Monday 21 March 2011] [15:17:29] &lt;FlaPer87&gt;  thanks :)</div>
<div class="line">[Monday 21 March 2011] [15:17:37] &lt;pieterh&gt;   Ubuntu and CentOS</div>
<div class="line">[Monday 21 March 2011] [15:17:42] &lt;drbobbeaty&gt;        mikko: Ubuntu 10.04.1 and CentOS 5</div>
<div class="line">[Monday 21 March 2011] [15:17:50] &lt;mikko&gt;     drbobbeaty: both fail?</div>
<div class="line">[Monday 21 March 2011] [15:18:00] &lt;drbobbeaty&gt;        Yup</div>
<div class="line">[Monday 21 March 2011] [15:19:22] &lt;mikko&gt;     drbobbeaty: it&#8217;s supposed to link against libtool convenience archive</div>
<div class="line">[Monday 21 March 2011] [15:19:30] &lt;mikko&gt;     libpgm_noinst.la</div>
<div class="line">[Monday 21 March 2011] [15:19:40] &lt;mikko&gt;     which just contains a set of object files</div>
<div class="line">[Monday 21 March 2011] [15:20:12] &lt;mikko&gt;     libpgm.so should not be used when building with zeromq</div>
<div class="line">[Monday 21 March 2011] [15:20:57] &lt;drbobbeaty&gt;        OK, that&#8217;s news. In the past (2.1.2), I used the &#8216;-lzmq&#8217; and it worked just fine with the ZMQ shared lib. Is this not supported in 2.1.3?</div>
<div class="line">[Monday 21 March 2011] [15:21:21] &lt;mikko&gt;     that should work fine</div>
<div class="line">[Monday 21 March 2011] [15:22:07] &lt;pieterh&gt;   fwiw I&#8217;ve done &#8216;g++ xmit.cpp -o xmit -lzmq&#8217; and the test case runs fine on my Ubuntu box</div>
<div class="line">[Monday 21 March 2011] [15:22:58] &lt;mikko&gt;     the convenience libtool archive is just a bunch of object files</div>
<div class="line">[Monday 21 March 2011] [15:23:08] &lt;mikko&gt;     and zeromq uses that rather than the .c files directly</div>
<div class="line">[Monday 21 March 2011] [15:23:43] &lt;mikko&gt;     in theory (unless there is some libtool weirdness going on) there should be no change how things work</div>
<div class="line">[Monday 21 March 2011] [15:23:56] &lt;Guest31294&gt;        in theory, everything always works.</div>
<div class="line">[Monday 21 March 2011] [15:24:40] &lt;cremes&gt;    pieterh: no assertion when using the 2.1.3 release, so that&#8217;s a good sign</div>
<div class="line">[Monday 21 March 2011] [15:25:02] &lt;pieterh&gt;   cremes: thanks for testing that, it means our ad-hoc change flow process is working ... :-)</div>
<div class="line">[Monday 21 March 2011] [15:25:02] &lt;drbobbeaty&gt;        mikko: I certainly hope that&#8217;s the case, but up to know I&#8217;ve had a ton of counter-examples staring me in the face. I&#8217;ll try to clean up things here and see if I can get it back to what works.</div>
<div class="line">[Monday 21 March 2011] [15:25:49] &lt;mikko&gt;     is there a test code i can run for this openpgm thing?</div>
<div class="line">[Monday 21 March 2011] [15:26:15] &lt;pieterh&gt;   mikko: <a class="reference external" href="https://gist.github.com/635015">https://gist.github.com/635015</a></div>
<div class="line">[Monday 21 March 2011] [15:28:21] &lt;mikko&gt;     Initialization complete.</div>
<div class="line">[Monday 21 March 2011] [15:28:21] &lt;mikko&gt;     sending...</div>
<div class="line">[Monday 21 March 2011] [15:28:21] &lt;mikko&gt;     sending...</div>
<div class="line">[Monday 21 March 2011] [15:28:21] &lt;mikko&gt;     sending...</div>
<div class="line">[Monday 21 March 2011] [15:28:25] &lt;mikko&gt;     and so o n</div>
<div class="line">[Monday 21 March 2011] [15:28:32] &lt;mikko&gt;     is that the expected result?</div>
<div class="line">[Monday 21 March 2011] [15:29:42] &lt;drbobbeaty&gt;        mikko: yes.</div>
<div class="line">[Monday 21 March 2011] [15:30:09] &lt;drbobbeaty&gt;        What I&#8217;m getting is the &#8220;Assertion failed: rc == 0 (connect_session.cpp:84)&#8221;</div>
<div class="line">[Monday 21 March 2011] [15:30:38] &lt;mikko&gt;     just in case i did rm /path/to/lib/libpgm*</div>
<div class="line">[Monday 21 March 2011] [15:30:43] &lt;mikko&gt;     and the example still runs</div>
<div class="line">[Monday 21 March 2011] [15:30:58] &lt;mikko&gt;     can you put nm /path/to/libzmq.so to gist.github.com?</div>
<div class="line">[Monday 21 March 2011] [15:31:03] &lt;mikko&gt;     and ldd /path/to/libzmq.so</div>
<div class="line">[Monday 21 March 2011] [15:32:26] &lt;pieterh&gt;   mikko: my guess is that drbobbeaty&#8217;s two systems have old versions of OpenPGM which is causing a problem</div>
<div class="line">[Monday 21 March 2011] [15:33:33] &lt;pieterh&gt;   drbobbeaty: any chance you can test on a virgin box? at least one you didn&#8217;t build on before?</div>
<div class="line">[Monday 21 March 2011] [15:33:39] &lt;drbobbeaty&gt;        pieterh: I didn&#8217;t have any old version of OpenPGM as I never had it until ZMQ. In 2.1.2 it was contained within the libzmq.so - with 2.1.3, it appeared that it was external. Now I see it wasn&#8217;t external at all, just optionally external.</div>
<div class="line">[Monday 21 March 2011] [15:34:04] &lt;pieterh&gt;   hmm... indeed</div>
<div class="line">[Monday 21 March 2011] [15:34:13] &lt;drbobbeaty&gt;        pieterh: I&#8217;m certainly working on all these ideas. As fast as I can.</div>
<div class="line">[Monday 21 March 2011] [15:34:25] &lt;drbobbeaty&gt;        I would like to believe it&#8217;s as simple as a bad version.</div>
<div class="line">[Monday 21 March 2011] [15:34:59] &lt;mikko&gt;     i would be keen on getting openpgm into daily builds somehow</div>
<div class="line">[Monday 21 March 2011] [15:35:10] &lt;mikko&gt;     that way we can see if the actual functionality ever breaks</div>
<div class="line">[Monday 21 March 2011] [15:35:58] &lt;pieterh&gt;   hmm, that would be very nice</div>
<div class="line">[Monday 21 March 2011] [15:37:16] &lt;mikko&gt;     drbobbeaty: can you paste nm output of libzmq.so ?</div>
<div class="line">[Monday 21 March 2011] [15:42:47] &lt;drbobbeaty&gt;        Yes, just need a bit. I&#8217;m trying to change the RPM packaging to remove the OpenPGM libraries and headers to make it cleaner as to what&#8217;s really being installed.</div>
<div class="line">[Monday 21 March 2011] [15:46:13] &lt;drbobbeaty&gt;        mikko: when I run: &#8216;nm /usr/lib64/libzmq.so.1&#8217; I get:</div>
<div class="line">[Monday 21 March 2011] [15:46:24] &lt;drbobbeaty&gt;        nm: /usr/lib64/libzmq.so.1: no symbols</div>
<div class="line">[Monday 21 March 2011] [15:47:01] &lt;drbobbeaty&gt;        I have cleaned up my RPMs and they are now built as zeromq, zeromq-devel and zeromq-pgm - where the latter has just the OpenPGM libs and headers.</div>
<div class="line">[Monday 21 March 2011] [15:47:24] &lt;drbobbeaty&gt;        Even after removing everything on my box related to ZMQ, and putting these new RPMs on, I get the assertion.</div>
<div class="line">[Monday 21 March 2011] [15:47:47] &lt;mikko&gt;     let me install a clean ubuntu VM</div>
<div class="line">[Monday 21 March 2011] [15:47:49] &lt;mikko&gt;     sec</div>
<div class="line">[Monday 21 March 2011] [15:55:24] &lt;mikko&gt;     drbobbeaty: i removed my installation of libzmq completely, rebuilt</div>
<div class="line">[Monday 21 March 2011] [15:55:40] &lt;mikko&gt;     rebuilt the xmit.cpp and ran with LD_LIBRARY_PATH</div>
<div class="line">[Monday 21 March 2011] [15:55:45] &lt;mikko&gt;     it seems to work ok</div>
<div class="line">[Monday 21 March 2011] [15:56:12] &lt;mikko&gt;     i&#8217;ll make an install-exec-hook patch later so that people dont get confused with libpgm.so</div>
<div class="line">[Monday 21 March 2011] [15:56:28] &lt;mikko&gt;     i dont think there is a way to force autotools not to install it</div>
<div class="line">[Monday 21 March 2011] [15:56:33] &lt;mikko&gt;     brb</div>
<div class="line">[Monday 21 March 2011] [15:56:37] &lt;drbobbeaty&gt;        mikko: Thanks for the checking... I&#8217;m getting convinced it&#8217;s now I have it built, but it&#8217;s not at all clear why the way I build it from 2.1.2 to 2.1.3 causes these issues. I&#8217;ve had many upgrades in this process.</div>
<div class="line">[Monday 21 March 2011] [15:58:05] &lt;mikko&gt;     drbobbeaty: i will install clean ubuntu vm later and test</div>
<div class="line">[Monday 21 March 2011] [15:58:14] &lt;mikko&gt;     it&#8217;s worrying if this actually fails for anyone</div>
<div class="line">[Monday 21 March 2011] [15:59:16] &lt;pieterh&gt;   drbobbeaty: can you post an issue with the assert and backtrace?</div>
<div class="line">[Monday 21 March 2011] [15:59:30] &lt;drbobbeaty&gt;        mikko: I&#8217;m troubled by what I&#8217;m seeing, and I fear it&#8217;s in the building. I&#8217;m going to see if I can build it without the RPM structure if it works. I&#8217;m guessing that&#8217;s how you guys are all doing it. Just &#8216;configure &#8211;with-pgm&#8217; - right?</div>
<div class="line">[Monday 21 March 2011] [15:59:39] &lt;pieterh&gt;   it may be possible to figure out what&#8217;s happening from that</div>
<div class="line">[Monday 21 March 2011] [15:59:45] &lt;pieterh&gt;   drbobbeaty: yes</div>
<div class="line">[Monday 21 March 2011] [16:00:02] &lt;drbobbeaty&gt;        pieterh: OK, trying that now</div>
<div class="line">[Monday 21 March 2011] [16:00:16] &lt;pieterh&gt;   just as explained in the docs; configure; make; sudo make install; sudo ldconfig</div>
<div class="line">[Monday 21 March 2011] [16:00:24] &lt;pieterh&gt;   &#8211;with-pgm, then</div>
<div class="line">[Monday 21 March 2011] [16:00:38] &lt;mikko&gt;     drbobbeaty: yes</div>
<div class="line">[Monday 21 March 2011] [16:01:24] &lt;mikko&gt;     drbobbeaty: it&#8217;s possible that the build breaks if for example RPM does something very weird</div>
<div class="line">[Monday 21 March 2011] [16:01:41] &lt;mikko&gt;     i think install-exec-hook should allow cleaning the libpgm stuff</div>
<div class="line">[Monday 21 March 2011] [16:01:46] &lt;drbobbeaty&gt;        mikko: it&#8217;s the same spec file that ships with the package.</div>
<div class="line">[Monday 21 March 2011] [16:02:02] &lt;mikko&gt;     drbobbeaty: i know, i don&#8217;t think it&#8217;s very actively checked (it seems)</div>
<div class="line">[Monday 21 March 2011] [16:02:29] &lt;mikko&gt;     i had RPM builds running earlier but it was in a chroot which was really slow</div>
<div class="line">[Monday 21 March 2011] [16:02:43] &lt;mikko&gt;     if there are actually RPM users i could install centos VM for rpm packaging</div>
<div class="line">[Monday 21 March 2011] [16:02:48] &lt;pieterh&gt;   drbobbeaty: I see at least one problem with the spec file in 2.1.3</div>
<div class="line">[Monday 21 March 2011] [16:02:59] &lt;mikko&gt;     so that the packaging gets tested regurly as well</div>
<div class="line">[Monday 21 March 2011] [16:03:10] &lt;pieterh&gt;   it <em>might</em> be causing corrupted RPMs...</div>
<div class="line">[Monday 21 March 2011] [16:03:13] &lt;mikko&gt;     now i need to run for a min -&gt;</div>
<div class="line">[Monday 21 March 2011] [16:03:50]      * pieterh hates hand-generated build files...</div>
<div class="line">[Monday 21 March 2011] [16:06:09] &lt;pieterh&gt;   drbobbeaty: if you want a fixed spec file, <a class="reference external" href="https://gist.github.com/880103">https://gist.github.com/880103</a> should be better</div>
<div class="line">[Monday 21 March 2011] [16:06:23] &lt;pieterh&gt;   I doubt this could cause the test program to crash but you never know</div>
<div class="line">[Monday 21 March 2011] [16:06:37] &lt;<a href="#id568"><span class="problematic" id="id569">flexo_</span></a>&gt;    hey. as i didnt find an answer to my question in either the guide, reference or faq (well, actually the lack of an answer might be an answer...) here it goes: does zmq support unreliable transport? (pure udp unicast/multicast)</div>
<div class="line">[Monday 21 March 2011] [16:06:46] &lt;pieterh&gt;   <a href="#id570"><span class="problematic" id="id571">flexo_</span></a>: nope</div>
<div class="line">[Monday 21 March 2011] [16:07:07] &lt;<a href="#id572"><span class="problematic" id="id573">flexo_</span></a>&gt;    any plans to add support for it?</div>
<div class="line">[Monday 21 March 2011] [16:07:15] &lt;pieterh&gt;   <a href="#id574"><span class="problematic" id="id575">flexo_</span></a>: feel free to send us a patch...</div>
<div class="line">[Monday 21 March 2011] [16:07:24] &lt;<a href="#id576"><span class="problematic" id="id577">flexo_</span></a>&gt;    :)</div>
<div class="line">[Monday 21 March 2011] [16:07:37] &lt;pieterh&gt;   :-)</div>
<div class="line">[Monday 21 March 2011] [16:08:04] &lt;drbobbeaty&gt;        pieterh: what changed? Something small, or a lot of things?</div>
<div class="line">[Monday 21 March 2011] [16:08:17] &lt;pieterh&gt;   drbobbeaty: in the spec file, removal of the stand-alone device programs</div>
<div class="line">[Monday 21 March 2011] [16:08:28] &lt;pieterh&gt;   in the core library, OpenPGM integration and a lot of small patches</div>
<div class="line">[Monday 21 March 2011] [16:08:37] &lt;pieterh&gt;   it&#8217;s in the NEWS and ChangeLog</div>
<div class="line">[Monday 21 March 2011] [16:08:48] &lt;pieterh&gt;   except the spec file, which I forgot to fix until just now</div>
<div class="line">[Monday 21 March 2011] [16:09:22] &lt;<a href="#id578"><span class="problematic" id="id579">flexo_</span></a>&gt;    seriously, would it fit into zmq&#8217;s design.. purpose.. whatever? (looks to me like quite some work was done to _guarantee_ that the messages arrive...)</div>
<div class="line">[Monday 21 March 2011] [16:09:41] &lt;pieterh&gt;   <a href="#id580"><span class="problematic" id="id581">flexo_</span></a>: it could be useful for certain apps, yes</div>
<div class="line">[Monday 21 March 2011] [16:09:59] &lt;<a href="#id582"><span class="problematic" id="id583">flexo_</span></a>&gt;    for example in the app i have in mind :)</div>
<div class="line">[Monday 21 March 2011] [16:10:15] &lt;pieterh&gt;   yeah, when real time performance is more important than reliability</div>
<div class="line">[Monday 21 March 2011] [16:10:21] &lt;<a href="#id584"><span class="problematic" id="id585">flexo_</span></a>&gt;    yep</div>
<div class="line">[Monday 21 March 2011] [16:10:42] &lt;pieterh&gt;   seriously, if you need it, and if you can write C++, it should be doable</div>
<div class="line">[Monday 21 March 2011] [16:10:49] &lt;<a href="#id586"><span class="problematic" id="id587">flexo_</span></a>&gt;    but there are also certain kinds of messages which must arrive intact, hence having something like zmq for that kind of stuff would be nice</div>
<div class="line">[Monday 21 March 2011] [16:10:49] &lt;pieterh&gt;   transports are pluggable in 0MQ</div>
<div class="line">[Monday 21 March 2011] [16:11:02] &lt;pieterh&gt;   you can use different sockets for different QoS</div>
<div class="line">[Monday 21 March 2011] [16:11:22] &lt;<a href="#id588"><span class="problematic" id="id589">flexo_</span></a>&gt;    pieterh: assuming that i am a c++ wizard, how long would think it would take me to do it?</div>
<div class="line">[Monday 21 March 2011] [16:11:39] &lt;<a href="#id590"><span class="problematic" id="id591">flexo_</span></a>&gt;    (i know zmq for 10 minutes :)</div>
<div class="line">[Monday 21 March 2011] [16:11:40] &lt;pieterh&gt;   if you also know UDP, 1 day to get it working, 2-3 more days to get it working real nice</div>
<div class="line">[Monday 21 March 2011] [16:12:02] &lt;<a href="#id592"><span class="problematic" id="id593">flexo_</span></a>&gt;    alright</div>
<div class="line">[Monday 21 March 2011] [16:12:33] &lt;pieterh&gt;   you start by asking the question on the list, &#8220;I intend to add UDP support, please tell me what files to create / modify&#8221;</div>
<div class="line">[Monday 21 March 2011] [16:12:59] &lt;<a href="#id594"><span class="problematic" id="id595">flexo_</span></a>&gt;    im pretty confident i can figure it out by myself...</div>
<div class="line">[Monday 21 March 2011] [16:13:03] &lt;pieterh&gt;   we&#8217;ll help package it all (docs, etc.) afterwards</div>
<div class="line">[Monday 21 March 2011] [16:13:14] &lt;pieterh&gt;   well, take a look at pgm integration as an example</div>
<div class="line">[Monday 21 March 2011] [16:13:20]      * <a href="#id596"><span class="problematic" id="id597">flexo_</span></a> nods</div>
<div class="line">[Monday 21 March 2011] [16:13:37] &lt;pieterh&gt;   actually I should point out that it&#8217;s technically impossible</div>
<div class="line">[Monday 21 March 2011] [16:13:46] &lt;<a href="#id598"><span class="problematic" id="id599">flexo_</span></a>&gt;    uhm?</div>
<div class="line">[Monday 21 March 2011] [16:13:49] &lt;pieterh&gt;   no-one has ever done this before, make 0MQ work with UDP</div>
<div class="line">[Monday 21 March 2011] [16:13:55] &lt;pieterh&gt;   therefore it&#8217;s impossible</div>
<div class="line">[Monday 21 March 2011] [16:13:59] &lt;pieterh&gt;   and perhaps even illegal</div>
<div class="line">[Monday 21 March 2011] [16:14:01] &lt;<a href="#id600"><span class="problematic" id="id601">flexo_</span></a>&gt;    i see :(</div>
<div class="line">[Monday 21 March 2011] [16:14:01] &lt;pieterh&gt;   :-)</div>
<div class="line">[Monday 21 March 2011] [16:14:12] &lt;<a href="#id602"><span class="problematic" id="id603">flexo_</span></a>&gt;    just fyi: the app i have in mind would be a flight simulation visual</div>
<div class="line">[Monday 21 March 2011] [16:14:37] &lt;pieterh&gt;   <a href="#id604"><span class="problematic" id="id605">flexo_</span></a>: I&#8217;m kidding, you&#8217;d be the first person to try it</div>
<div class="line">[Monday 21 March 2011] [16:14:58] &lt;<a href="#id606"><span class="problematic" id="id607">flexo_</span></a>&gt;    i.e. several render boxes which receive telemetry via multicast</div>
<div class="line">[Monday 21 March 2011] [16:15:04] &lt;pieterh&gt;   yes, excellent use case</div>
<div class="line">[Monday 21 March 2011] [16:15:09] &lt;<a href="#id608"><span class="problematic" id="id609">flexo_</span></a>&gt;    (which must get the data really fast. ;)</div>
<div class="line">[Monday 21 March 2011] [16:15:18] &lt;pieterh&gt;   but doesn&#8217;t mind if there&#8217;s some breakage</div>
<div class="line">[Monday 21 March 2011] [16:15:45] &lt;drbobbeaty&gt;        mikko: why are you passing in &#8216;&#8211;prefix=/usr/local&#8217; to the OpenPGM configure script within the main configure script? Isn&#8217;t that assuming that I&#8217;m putting it there? I&#8217;m not.</div>
<div class="line">[Monday 21 March 2011] [16:15:48] &lt;<a href="#id610"><span class="problematic" id="id611">flexo_</span></a>&gt;    (and otoh there is some stuff which must arrive, although it doesnt matter if the latency is somewhat higher, i.e. you change the scenario, daytime, etc.)</div>
<div class="line">[Monday 21 March 2011] [16:16:08] &lt;<a href="#id612"><span class="problematic" id="id613">flexo_</span></a>&gt;    add a new entity into the simulation, that kind of stuff</div>
<div class="line">[Monday 21 March 2011] [16:16:16] &lt;pieterh&gt;   yeah, it&#8217;s like VoIP</div>
<div class="line">[Monday 21 March 2011] [16:16:23] &lt;pieterh&gt;   mix of reliable and unreliable patterns</div>
<div class="line">[Monday 21 March 2011] [16:16:42] &lt;pieterh&gt;   UDP would make a great addition</div>
<div class="line">[Monday 21 March 2011] [16:17:04] &lt;pieterh&gt;   but impossible and perhaps even illegal, so don&#8217;t tell anyone...</div>
<div class="line">[Monday 21 March 2011] [16:17:04] &lt;<a href="#id614"><span class="problematic" id="id615">flexo_</span></a>&gt;    i was about to make up some protocol using a mix of tcp and multicast udp myself.. but i suppose it might be less work to just add unreliable transport support to zmq</div>
<div class="line">[Monday 21 March 2011] [16:17:09] &lt;<a href="#id616"><span class="problematic" id="id617">flexo_</span></a>&gt;    sure</div>
<div class="line">[Monday 21 March 2011] [16:17:39] &lt;pieterh&gt;   well, advantage of layering it under zmq is you get access to nice semantics on top</div>
<div class="line">[Monday 21 March 2011] [16:17:44] &lt;<a href="#id618"><span class="problematic" id="id619">flexo_</span></a>&gt;    its even intended for military usage so its morally nasty too</div>
<div class="line">[Monday 21 March 2011] [16:17:45] &lt;pieterh&gt;   plus APIs in lots of languages</div>
<div class="line">[Monday 21 March 2011] [16:17:51] &lt;pieterh&gt;   morally nasty, I love it</div>
<div class="line">[Monday 21 March 2011] [16:18:03] &lt;pieterh&gt;   I mean, terrible, terrible stuff...</div>
<div class="line">[Monday 21 March 2011] [16:18:16] &lt;<a href="#id620"><span class="problematic" id="id621">flexo_</span></a>&gt;    yes, and the zmq API looks really nice</div>
<div class="line">[Monday 21 March 2011] [16:18:25] &lt;<a href="#id622"><span class="problematic" id="id623">flexo_</span></a>&gt;    and well-looking APIs are rare :)</div>
<div class="line">[Monday 21 March 2011] [16:18:45] &lt;pieterh&gt;   it&#8217;s going to get polished some more for v3.0</div>
<div class="line">[Monday 21 March 2011] [16:19:44] &lt;<a href="#id624"><span class="problematic" id="id625">flexo_</span></a>&gt;    a far-fetching thought here... is there some project providing some highlevel RPC mechanisms on-top of zmq? (think CORBA)</div>
<div class="line">[Monday 21 March 2011] [16:21:45] &lt;pieterh&gt;   <a href="#id626"><span class="problematic" id="id627">flexo_</span></a>: see the Guide, Chapter 4</div>
<div class="line">[Monday 21 March 2011] [16:21:57] &lt;pieterh&gt;   there are a whole set of RPC-like patterns built on top of 0MQ</div>
<div class="line">[Monday 21 March 2011] [16:22:11] &lt;pieterh&gt;   plus sample code and protocol specs</div>
<div class="line">[Monday 21 March 2011] [16:22:21] &lt;pieterh&gt;   not CORBA, though</div>
<div class="line">[Monday 21 March 2011] [16:22:24] &lt;pieterh&gt;   rather more 2011</div>
<div class="line">[Monday 21 March 2011] [16:23:07] &lt;<a href="#id628"><span class="problematic" id="id629">flexo_</span></a>&gt;    chapter 4? reliable request-reply?</div>
<div class="line">[Monday 21 March 2011] [16:23:15] &lt;pieterh&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [16:23:25] &lt;<a href="#id630"><span class="problematic" id="id631">flexo_</span></a>&gt;    i realize that you can do all that stuff on-top of zmq</div>
<div class="line">[Monday 21 March 2011] [16:23:38] &lt;<a href="#id632"><span class="problematic" id="id633">flexo_</span></a>&gt;    but an ORB actually _does_ provide some pretty nice stuff</div>
<div class="line">[Monday 21 March 2011] [16:24:34] &lt;pieterh&gt;   specifically...?</div>
<div class="line">[Monday 21 March 2011] [16:24:50] &lt;pieterh&gt;   not that I&#8217;m disagreeing, just curious to what you mean</div>
<div class="line">[Monday 21 March 2011] [16:25:42] &lt;<a href="#id634"><span class="problematic" id="id635">flexo_</span></a>&gt;    well, the basic thing would be the IDL compiler - more advanced stuff would be object keys, activation / incarnation, etc.</div>
<div class="line">[Monday 21 March 2011] [16:26:03] &lt;<a href="#id636"><span class="problematic" id="id637">flexo_</span></a>&gt;    its pretty easy to do distributed garbage collected servants</div>
<div class="line">[Monday 21 March 2011] [16:26:41] &lt;pieterh&gt;   i prefer garbage collecting servants</div>
<div class="line">[Monday 21 March 2011] [16:26:49] &lt;pieterh&gt;   actually have no idea what those terms mean</div>
<div class="line">[Monday 21 March 2011] [16:26:53] &lt;<a href="#id638"><span class="problematic" id="id639">flexo_</span></a>&gt;    well</div>
<div class="line">[Monday 21 March 2011] [16:27:01] &lt;<a href="#id640"><span class="problematic" id="id641">flexo_</span></a>&gt;    take a virtual filesystem for example</div>
<div class="line">[Monday 21 March 2011] [16:27:16] &lt;pieterh&gt;   ok</div>
<div class="line">[Monday 21 March 2011] [16:27:17] &lt;<a href="#id642"><span class="problematic" id="id643">flexo_</span></a>&gt;    built using interfaces like IStream, IFile, etc.</div>
<div class="line">[Monday 21 March 2011] [16:27:25] &lt;pieterh&gt;   sure</div>
<div class="line">[Monday 21 March 2011] [16:27:38] &lt;<a href="#id644"><span class="problematic" id="id645">flexo_</span></a>&gt;    you can connect to any component in our application, no matter where it runs and ask it to open a file for you</div>
<div class="line">[Monday 21 March 2011] [16:27:49] &lt;pieterh&gt;   sure</div>
<div class="line">[Monday 21 March 2011] [16:28:04] &lt;<a href="#id646"><span class="problematic" id="id647">flexo_</span></a>&gt;    it provides transparent encryption / decryption, there is a key ring manager which asks the user for passwords, etc.</div>
<div class="line">[Monday 21 March 2011] [16:28:36] &lt;pieterh&gt;   this can all be layered on top of 0MQ</div>
<div class="line">[Monday 21 March 2011] [16:28:54] &lt;<a href="#id648"><span class="problematic" id="id649">flexo_</span></a>&gt;    the ORB provides me with the means to implement something like this in a nice object-oriented manner without writing lots of the low-level management code</div>
<div class="line">[Monday 21 March 2011] [16:29:38] &lt;<a href="#id650"><span class="problematic" id="id651">flexo_</span></a>&gt;    so i just say &#8220;give me a POA with this policy&#8221;, i put the filename into the object key, my servant manager gets invoked when someone wants to invoke a ::read() on the the stream</div>
<div class="line">[Monday 21 March 2011] [16:29:40] &lt;mikko&gt;     drbobbeaty: autotools probably pass down prefix automatically</div>
<div class="line">[Monday 21 March 2011] [16:30:05] &lt;pieterh&gt;   POA = piece of action? sorry, the jargon is not familiar to me</div>
<div class="line">[Monday 21 March 2011] [16:30:50] &lt;pieterh&gt;   so why are no companies making money from ORBs any more?</div>
<div class="line">[Monday 21 March 2011] [16:31:06] &lt;<a href="#id652"><span class="problematic" id="id653">flexo_</span></a>&gt;    portable object adapter.. an internal CORBA component which. hm..  is responsible for servants. it knows their servant manager and how to invoke methods on these servants</div>
<div class="line">[Monday 21 March 2011] [16:31:10] &lt;<a href="#id654"><span class="problematic" id="id655">flexo_</span></a>&gt;    heh</div>
<div class="line">[Monday 21 March 2011] [16:31:15] &lt;<a href="#id656"><span class="problematic" id="id657">flexo_</span></a>&gt;    pieterh: dont get me wrong here</div>
<div class="line">[Monday 21 March 2011] [16:31:26] &lt;<a href="#id658"><span class="problematic" id="id659">flexo_</span></a>&gt;    CORBA heavily sucks in a lot of areas</div>
<div class="line">[Monday 21 March 2011] [16:31:36] &lt;pieterh&gt;   nah, I&#8217;m just curious, CORBA has always appeared to me as massively complex</div>
<div class="line">[Monday 21 March 2011] [16:31:48] &lt;pieterh&gt;   complex concepts, complex APIs, complex tools</div>
<div class="line">[Monday 21 March 2011] [16:31:52] &lt;<a href="#id660"><span class="problematic" id="id661">flexo_</span></a>&gt;    but most of its &#8220;complex&#8221; design actually makes sense</div>
<div class="line">[Monday 21 March 2011] [16:32:01] &lt;pieterh&gt;   sure, but that doesn&#8217;t mean much in the end</div>
<div class="line">[Monday 21 March 2011] [16:32:22] &lt;<a href="#id662"><span class="problematic" id="id663">flexo_</span></a>&gt;    actually</div>
<div class="line">[Monday 21 March 2011] [16:32:30] &lt;pieterh&gt;   sadly, a 100% complete solution that is 100x more complex than an 80% complete solution will not win</div>
<div class="line">[Monday 21 March 2011] [16:32:40] &lt;<a href="#id664"><span class="problematic" id="id665">flexo_</span></a>&gt;    well</div>
<div class="line">[Monday 21 March 2011] [16:32:44] &lt;<a href="#id666"><span class="problematic" id="id667">flexo_</span></a>&gt;    you definitly have a point there</div>
<div class="line">[Monday 21 March 2011] [16:32:50] &lt;pieterh&gt;   this is what I mean by 2011</div>
<div class="line">[Monday 21 March 2011] [16:32:53] &lt;<a href="#id668"><span class="problematic" id="id669">flexo_</span></a>&gt;    my company made money with an ORB i wrote couple of months ago</div>
<div class="line">[Monday 21 March 2011] [16:33:09] &lt;<a href="#id670"><span class="problematic" id="id671">flexo_</span></a>&gt;    but this ORB only implemented the features needed, so maybe it was like 70% conformant :)</div>
<div class="line">[Monday 21 March 2011] [16:33:17] &lt;pieterh&gt;   if you have customers for ORBs, you may enjoy using 0MQ as the transport</div>
<div class="line">[Monday 21 March 2011] [16:33:18] &lt;<a href="#id672"><span class="problematic" id="id673">flexo_</span></a>&gt;    (targeting embedded hardware)</div>
<div class="line">[Monday 21 March 2011] [16:33:41] &lt;<a href="#id674"><span class="problematic" id="id675">flexo_</span></a>&gt;    yea, im thinking about that</div>
<div class="line">[Monday 21 March 2011] [16:33:53] &lt;<a href="#id676"><span class="problematic" id="id677">flexo_</span></a>&gt;    im also thinking about replacing CORBA because it annoys me heavily...</div>
<div class="line">[Monday 21 March 2011] [16:33:57] &lt;pieterh&gt;   that&#8217;s how we see 0MQ, as a smart transport layer</div>
<div class="line">[Monday 21 March 2011] [16:34:10] &lt;<a href="#id678"><span class="problematic" id="id679">flexo_</span></a>&gt;    its very cumbersome to use, especially with the c++ mapping</div>
<div class="line">[Monday 21 March 2011] [16:34:11] &lt;pieterh&gt;   it&#8217;s never going to include IDLs and key managers</div>
<div class="line">[Monday 21 March 2011] [16:34:55] &lt;<a href="#id680"><span class="problematic" id="id681">flexo_</span></a>&gt;    do you think IDL compilers are bad in principle?</div>
<div class="line">[Monday 21 March 2011] [16:35:12] &lt;pieterh&gt;   no, just that data representation isn&#8217;t the job of the messaging fabric</div>
<div class="line">[Monday 21 March 2011] [16:35:19] &lt;<a href="#id682"><span class="problematic" id="id683">flexo_</span></a>&gt;    (i.e. the whole RPC idea which makes it look like a function/method call)</div>
<div class="line">[Monday 21 March 2011] [16:35:25] &lt;pieterh&gt;   for most purposes, JSON is fine</div>
<div class="line">[Monday 21 March 2011] [16:35:29] &lt;<a href="#id684"><span class="problematic" id="id685">flexo_</span></a>&gt;    i completely agree</div>
<div class="line">[Monday 21 March 2011] [16:35:34] &lt;pieterh&gt;   JSON is very 2011</div>
<div class="line">[Monday 21 March 2011] [16:35:40] &lt;<a href="#id686"><span class="problematic" id="id687">flexo_</span></a>&gt;    heh</div>
<div class="line">[Monday 21 March 2011] [16:35:46] &lt;pieterh&gt;   totally cheap and nasty serialization that works for 80% of developers</div>
<div class="line">[Monday 21 March 2011] [16:35:54] &lt;<a href="#id688"><span class="problematic" id="id689">flexo_</span></a>&gt;    too nasty for my purposes</div>
<div class="line">[Monday 21 March 2011] [16:36:08] &lt;<a href="#id690"><span class="problematic" id="id691">flexo_</span></a>&gt;    the parsing overhead just...</div>
<div class="line">[Monday 21 March 2011] [16:36:09] &lt;<a href="#id692"><span class="problematic" id="id693">flexo_</span></a>&gt;    no</div>
<div class="line">[Monday 21 March 2011] [16:36:13] &lt;<a href="#id694"><span class="problematic" id="id695">flexo_</span></a>&gt;    it feels wrong.</div>
<div class="line">[Monday 21 March 2011] [16:36:22] &lt;pieterh&gt;   so you ideally want a JSON approach for low-volume cases, and smart binary framing for high-volume cases</div>
<div class="line">[Monday 21 March 2011] [16:36:44] &lt;pieterh&gt;   I&#8217;m also a fan of divide and conquer</div>
<div class="line">[Monday 21 March 2011] [16:36:45] &lt;<a href="#id696"><span class="problematic" id="id697">flexo_</span></a>&gt;    i dont really see the advantage of JSON over CDR</div>
<div class="line">[Monday 21 March 2011] [16:36:50] &lt;<a href="#id698"><span class="problematic" id="id699">flexo_</span></a>&gt;    CDR is very nice IMHO</div>
<div class="line">[Monday 21 March 2011] [16:36:56] &lt;pieterh&gt;   JSON requires no upfront thinking</div>
<div class="line">[Monday 21 March 2011] [16:37:13] &lt;<a href="#id700"><span class="problematic" id="id701">flexo_</span></a>&gt;    neighter does CDR if you are used to think of a struct like a damn struct in memory :)</div>
<div class="line">[Monday 21 March 2011] [16:37:25] &lt;pieterh&gt;   so why is no-one using CDR?</div>
<div class="line">[Monday 21 March 2011] [16:37:29] &lt;pieterh&gt;   I mean, the market decides</div>
<div class="line">[Monday 21 March 2011] [16:37:41] &lt;<a href="#id702"><span class="problematic" id="id703">flexo_</span></a>&gt;    pieterh: because CDR is deep within CORBA</div>
<div class="line">[Monday 21 March 2011] [16:37:44] &lt;<a href="#id704"><span class="problematic" id="id705">flexo_</span></a>&gt;    and CORBA scares people</div>
<div class="line">[Monday 21 March 2011] [16:37:48] &lt;pieterh&gt;   nah, because it&#8217;s a complex toolchain</div>
<div class="line">[Monday 21 March 2011] [16:37:59] &lt;<a href="#id706"><span class="problematic" id="id707">flexo_</span></a>&gt;    no, CDR is complety separete of everything</div>
<div class="line">[Monday 21 March 2011] [16:38:12] &lt;<a href="#id708"><span class="problematic" id="id709">flexo_</span></a>&gt;    its simply a binary data representation</div>
<div class="line">[Monday 21 March 2011] [16:38:28] &lt;<a href="#id710"><span class="problematic" id="id711">flexo_</span></a>&gt;    containing some stupid padding.. but thats far less worse than JSON</div>
<div class="line">[Monday 21 March 2011] [16:38:46] &lt;pieterh&gt;   I can&#8217;t even find a web page describing CDR</div>
<div class="line">[Monday 21 March 2011] [16:38:52] &lt;<a href="#id712"><span class="problematic" id="id713">flexo_</span></a>&gt;    as i said</div>
<div class="line">[Monday 21 March 2011] [16:38:53] &lt;pieterh&gt;   it&#8217;s embedded in some PDF somewhere</div>
<div class="line">[Monday 21 March 2011] [16:38:55] &lt;pieterh&gt;   fail</div>
<div class="line">[Monday 21 March 2011] [16:39:01] &lt;<a href="#id714"><span class="problematic" id="id715">flexo_</span></a>&gt;    thats the point.. its embedded deep inside the CORBA specs</div>
<div class="line">[Monday 21 March 2011] [16:39:06] &lt;<a href="#id716"><span class="problematic" id="id717">flexo_</span></a>&gt;    and thats the reason no-one uses it</div>
<div class="line">[Monday 21 March 2011] [16:39:09] &lt;<a href="#id718"><span class="problematic" id="id719">flexo_</span></a>&gt;    not because its bad</div>
<div class="line">[Monday 21 March 2011] [16:39:11] &lt;pieterh&gt;   yeah, but that&#8217;s not &#8220;very nice&#8221;</div>
<div class="line">[Monday 21 March 2011] [16:39:17] &lt;<a href="#id720"><span class="problematic" id="id721">flexo_</span></a>&gt;    agreed</div>
<div class="line">[Monday 21 March 2011] [16:39:24] &lt;bpl29&gt;     Hello hello.  I am trying to link the zmq library to my project, but think I have built an 1386 library instead of x86_64.</div>
<div class="line">[Monday 21 March 2011] [16:39:34] &lt;<a href="#id722"><span class="problematic" id="id723">flexo_</span></a>&gt;    but &#8220;everyone uses it&#8221; doesnt make it a nice format.. take bittorrent for example</div>
<div class="line">[Monday 21 March 2011] [16:39:52] &lt;bpl29&gt;     <a href="#id29"><span class="problematic" id="id30">*</span></a>i386</div>
<div class="line">[Monday 21 March 2011] [16:39:56] &lt;<a href="#id724"><span class="problematic" id="id725">flexo_</span></a>&gt;    everyone uses bittorrent and bittorrent uses a highly stupid serialization format</div>
<div class="line">[Monday 21 March 2011] [16:40:17] &lt;pieterh&gt;   <a href="#id726"><span class="problematic" id="id727">flexo_</span></a>: well, I&#8217;ve made dozens, hundreds of technically brilliant tools over the years</div>
<div class="line">[Monday 21 March 2011] [16:40:18] &lt;pieterh&gt;   all &#8216;</div>
<div class="line">[Monday 21 March 2011] [16:40:21] &lt;pieterh&gt;   &#8216;perfect&#8217;</div>
<div class="line">[Monday 21 March 2011] [16:40:30] &lt;pieterh&gt;   all dead, because they were inaccessible</div>
<div class="line">[Monday 21 March 2011] [16:40:39] &lt;<a href="#id728"><span class="problematic" id="id729">flexo_</span></a>&gt;    its nice to parse with some regular expressions, but if you try to make a very-high throughput implementation you turn crazy because of that &#8220;human readable&#8221; ascii mess</div>
<div class="line">[Monday 21 March 2011] [16:40:59] &lt;pieterh&gt;   bpl29: have you copied the library from one box to another?</div>
<div class="line">[Monday 21 March 2011] [16:41:24] &lt;<a href="#id730"><span class="problematic" id="id731">flexo_</span></a>&gt;    pieterh: well. i dont disagree with you on any particular point...</div>
<div class="line">[Monday 21 March 2011] [16:41:41] &lt;pieterh&gt;   anyhow, wrt ORB capabilities over 0MQ, go for it, I&#8217;d say</div>
<div class="line">[Monday 21 March 2011] [16:41:54] &lt;bpl29&gt;     pieterh: No.  As well, I just rebuilt from source.  I am linking with -L/usr/local/lib -lzmq</div>
<div class="line">[Monday 21 March 2011] [16:42:02] &lt;<a href="#id732"><span class="problematic" id="id733">flexo_</span></a>&gt;    i just refuse to acknowledge that i spend so much time working with crap</div>
<div class="line">[Monday 21 March 2011] [16:42:14] &lt;pieterh&gt;   <a href="#id734"><span class="problematic" id="id735">flexo_</span></a>: Sturgeon&#8217;s Law</div>
<div class="line">[Monday 21 March 2011] [16:42:34] &lt;<a href="#id736"><span class="problematic" id="id737">flexo_</span></a>&gt;    yea :)</div>
<div class="line">[Monday 21 March 2011] [16:42:39] &lt;bpl29&gt;     pieterh: The error simply states &#8220;warning: in /usr/local/lib/libzmq.dylib, file was built for unsupported file format which is not the architecture being linked (i386)&#8221;</div>
<div class="line">[Monday 21 March 2011] [16:42:40] &lt;pieterh&gt;   bpl29: so why do you think you built it wrong? it should work automatically, your compiler knows it&#8217;s on a 64-bit box</div>
<div class="line">[Monday 21 March 2011] [16:42:44] &lt;pieterh&gt;   hmm</div>
<div class="line">[Monday 21 March 2011] [16:42:55] &lt;pieterh&gt;   what OS are you on?</div>
<div class="line">[Monday 21 March 2011] [16:43:02] &lt;bpl29&gt;     pieterh: OS X</div>
<div class="line">[Monday 21 March 2011] [16:43:28] &lt;pieterh&gt;   bpl29: sorry, I&#8217;m not expert in OS X builds, but maybe someone else here can help.. cremes?</div>
<div class="line">[Monday 21 March 2011] [16:43:45] &lt;cremes&gt;    pieterh: what&#8217;s up?</div>
<div class="line">[Monday 21 March 2011] [16:44:06] &lt;pieterh&gt;   any idea why a build on OS X would say &#8220;file was built for unsupported file format which is not the architecture being linked (i386)&#8221;</div>
<div class="line">[Monday 21 March 2011] [16:45:14] &lt;cremes&gt;    yes...</div>
<div class="line">[Monday 21 March 2011] [16:45:42] &lt;cremes&gt;    the library is being built i386 but it&#8217;s linking against a (probably) x86_64 binary</div>
<div class="line">[Monday 21 March 2011] [16:46:00] &lt;cremes&gt;    bpl29: run &#8220;file &lt;name&gt;&#8221; against the library and tell us the output</div>
<div class="line">[Monday 21 March 2011] [16:46:11] &lt;bpl29&gt;     okay one moment</div>
<div class="line">[Monday 21 March 2011] [16:46:19] &lt;pieterh&gt;   &#8220;If you&#8217;re using Xcode, then by default Debug mode only builds your platforms native arch. So on a new mac, this would be an x86_64 binary.&#8221;</div>
<div class="line">[Monday 21 March 2011] [16:46:19] &lt;yrashk&gt;    it looks like I&#8217;ve got a case of send() lockup with ZMQ_NOBLOCK :-</div>
<div class="line">[Monday 21 March 2011] [16:46:22] &lt;pieterh&gt;   <a class="reference external" href="http://www.qtcentre.org/threads/30670-On-Mac-quot-...file-was-built-for-unsupported-file-format..-quot-SOLVED">http://www.qtcentre.org/threads/30670-On-Mac-quot-...file-was-built-for-unsupported-file-format..-quot-SOLVED</a></div>
<div class="line">[Monday 21 March 2011] [16:46:33] &lt;pieterh&gt;   yrashk: cool!</div>
<div class="line">[Monday 21 March 2011] [16:46:41] &lt;<a href="#id738"><span class="problematic" id="id739">flexo_</span></a>&gt;    pieterh: anyway, just wanted to clarify that it seems to me that you are one of the more.. much more.. competent people i have met. although i disagree with your JSON notion. :)</div>
<div class="line">[Monday 21 March 2011] [16:47:00] &lt;bpl29&gt;     creme: /usr/local/lib/libzmq.dylib: Mach-O 64-bit dynamically linked shared library x86_64</div>
<div class="line">[Monday 21 March 2011] [16:47:05] &lt;pieterh&gt;   <a href="#id740"><span class="problematic" id="id741">flexo_</span></a>: I&#8217;m just old and cynical, not particularly competent, but the compliment feels nice, thanks</div>
<div class="line">[Monday 21 March 2011] [16:47:24] &lt;cremes&gt;    bpl29: and what program is trying to load that library? run &#8220;file&#8221; against it too</div>
<div class="line">[Monday 21 March 2011] [16:47:31] &lt;yrashk&gt;    pieterh: indeed :)</div>
<div class="line">[Monday 21 March 2011] [16:47:39] &lt;<a href="#id742"><span class="problematic" id="id743">flexo_</span></a>&gt;    pieterh: well, i am highly cynical aswell.. maybe thats the reason for the sympathy :)</div>
<div class="line">[Monday 21 March 2011] [16:47:59] &lt;<a href="#id744"><span class="problematic" id="id745">flexo_</span></a>&gt;    (not old though. :D)</div>
<div class="line">[Monday 21 March 2011] [16:48:00] &lt;yrashk&gt;    I think I know why it happens</div>
<div class="line">[Monday 21 March 2011] [16:48:06] &lt;pieterh&gt;   <a href="#id746"><span class="problematic" id="id747">flexo_</span></a>: one thing I&#8217;ve learned is that intelligence is a product of many minds, not a few experts</div>
<div class="line">[Monday 21 March 2011] [16:48:19] &lt;pieterh&gt;   yrashk: 2.1.3 or development master?</div>
<div class="line">[Monday 21 March 2011] [16:48:22] &lt;yrashk&gt;    but no idea how to fix it</div>
<div class="line">[Monday 21 March 2011] [16:48:33] &lt;pieterh&gt;   what do you think happens?</div>
<div class="line">[Monday 21 March 2011] [16:48:37] &lt;yrashk&gt;    184bdb8e2bb6fe252af1bf4dd16d1c9ed8892f7a</div>
<div class="line">[Monday 21 March 2011] [16:49:04] &lt;yrashk&gt;    with this specific command that I am sending to another thread, that thread closes the socket that its being sent through</div>
<div class="line">[Monday 21 March 2011] [16:49:13] &lt;bpl29&gt;     creme: I am using ocamlmklib.</div>
<div class="line">[Monday 21 March 2011] [16:49:21] &lt;yrashk&gt;    so sometimes it gets through fine (it closes the socket <em>after</em> send() is over)</div>
<div class="line">[Monday 21 March 2011] [16:49:25] &lt;bpl29&gt;     owait, sry, misinterpreted</div>
<div class="line">[Monday 21 March 2011] [16:49:35] &lt;jond&gt;      <a href="#id748"><span class="problematic" id="id749">flexo_</span></a> CDR is an ok encoding, though the character set stuff is dreadful. havent used corba for years though</div>
<div class="line">[Monday 21 March 2011] [16:49:37] &lt;yrashk&gt;    but sometimes it closes it while send() is still working</div>
<div class="line">[Monday 21 March 2011] [16:49:41] &lt;yrashk&gt;    and send() locks</div>
<div class="line">[Monday 21 March 2011] [16:49:48] &lt;yrashk&gt;    even though it&#8217;s in NOBLOCK</div>
<div class="line">[Monday 21 March 2011] [16:49:58] &lt;yrashk&gt;    or should I just upgrade to dev master?</div>
<div class="line">[Monday 21 March 2011] [16:50:06] &lt;<a href="#id750"><span class="problematic" id="id751">flexo_</span></a>&gt;    jond: i agree that it could be improved in some areas... i am just saying i prefer it over json :)</div>
<div class="line">[Monday 21 March 2011] [16:50:27] &lt;jond&gt;      flexo have you seen BSON?</div>
<div class="line">[Monday 21 March 2011] [16:50:27] &lt;pieterh&gt;   yrashk: that commit is in development master</div>
<div class="line">[Monday 21 March 2011] [16:50:49] &lt;yrashk&gt;    but are you aware of this issue I described? or whether it is an issue at all?</div>
<div class="line">[Monday 21 March 2011] [16:51:06] &lt;pieterh&gt;   not aware of the issue</div>
<div class="line">[Monday 21 March 2011] [16:51:22] &lt;pieterh&gt;   you distracted me by posting a long UUID</div>
<div class="line">[Monday 21 March 2011] [16:52:04] &lt;pieterh&gt;   yrashk: if you can log an issue, that&#8217;d be good, it sounds like an edge case</div>
<div class="line">[Monday 21 March 2011] [16:52:08] &lt;<a href="#id752"><span class="problematic" id="id753">flexo_</span></a>&gt;    jond: looking at it right now... what immediatly caught my attention... no unsigned integers?</div>
<div class="line">[Monday 21 March 2011] [16:52:22] &lt;yrashk&gt;    I am still experimenting</div>
<div class="line">[Monday 21 March 2011] [16:52:24] &lt;bpl29&gt;     creme: I&#8217;m not quite sure where that binary is.  Do you think it could be i386?  I can search more.</div>
<div class="line">[Monday 21 March 2011] [16:52:32] &lt;jond&gt;      flexo: always thought it would be nice to rip the structs / types part of idl out to use as message format generator, leaving all the interface stuff behind, idl looks so much better than an xml or some schema</div>
<div class="line">[Monday 21 March 2011] [16:52:40] &lt;bpl29&gt;     creme: ocamlmklib, that is</div>
<div class="line">[Monday 21 March 2011] [16:52:55] &lt;<a href="#id754"><span class="problematic" id="id755">flexo_</span></a>&gt;    jond: oh yea.</div>
<div class="line">[Monday 21 March 2011] [16:53:16] &lt;<a href="#id756"><span class="problematic" id="id757">flexo_</span></a>&gt;    especially if the IDL happens to look almost exactly the same in the language you are developing in... :)</div>
<div class="line">[Monday 21 March 2011] [16:54:01] &lt;<a href="#id758"><span class="problematic" id="id759">flexo_</span></a>&gt;    (but even if it doesnt fit... i like our python testcases, using omniorbpy)</div>
<div class="line">[Monday 21 March 2011] [16:54:48] &lt;<a href="#id760"><span class="problematic" id="id761">flexo_</span></a>&gt;    there are some nice really nice things about CORBA, the mean problem is that its one huge &#8220;solution&#8221;, not a set of solutions layered on-top of each other</div>
<div class="line">[Monday 21 March 2011] [16:54:52] &lt;cremes&gt;    bpl29: i&#8217;m not really sure what you are doing</div>
<div class="line">[Monday 21 March 2011] [16:54:53] &lt;jond&gt;      flexo : yep, but remember that python corba binding in omniorb almost makes corba bearable, so much easier than the c++</div>
<div class="line">[Monday 21 March 2011] [16:54:54] &lt;<a href="#id762"><span class="problematic" id="id763">flexo_</span></a>&gt;    <a href="#id31"><span class="problematic" id="id32">*</span></a>main</div>
<div class="line">[Monday 21 March 2011] [16:55:03] &lt;<a href="#id764"><span class="problematic" id="id765">flexo_</span></a>&gt;    jond: true...</div>
<div class="line">[Monday 21 March 2011] [16:55:09] &lt;cremes&gt;    bpl29: are you running the examples using the ocaml bindings?</div>
<div class="line">[Monday 21 March 2011] [16:55:20] &lt;<a href="#id766"><span class="problematic" id="id767">flexo_</span></a>&gt;    (the ICE mappings look like nice by the way)</div>
<div class="line">[Monday 21 March 2011] [16:55:44] &lt;bpl29&gt;     cremes: I am writing new OCaml bindings.</div>
<div class="line">[Monday 21 March 2011] [16:56:12] &lt;cremes&gt;    bpl29: ok; how do you execute your ocaml runtime?</div>
<div class="line">[Monday 21 March 2011] [16:56:36] &lt;<a href="#id768"><span class="problematic" id="id769">flexo_</span></a>&gt;    sigh. but project management will never let me deviate from the &#8220;industry standard&#8221; CORBA.... :)</div>
<div class="line">[Monday 21 March 2011] [16:57:16] &lt;jond&gt;      flexo: well henning was pretty damning in the end and thought he could better, even thought CDR was no better than XDR and the Zero Ice would be the way to go. Last time I looked Vinoski had discovered erlang</div>
<div class="line">[Monday 21 March 2011] [16:57:36] &lt;bpl29&gt;     cremes: the command in question is &#8220;ocamlmklib -o _wrapper_stubs wrapper.o -L/usr/local/lib -lzmq&#8221;</div>
<div class="line">[Monday 21 March 2011] [16:57:47] &lt;<a href="#id770"><span class="problematic" id="id771">flexo_</span></a>&gt;    hehe</div>
<div class="line">[Monday 21 March 2011] [16:58:04] &lt;cremes&gt;    bpl29: ok; type &#8220;which ocamlmklib&#8221; and it will tell you where that program is in your PATH</div>
<div class="line">[Monday 21 March 2011] [16:58:08] &lt;cremes&gt;    then run &#8220;file&#8221; on it</div>
<div class="line">[Monday 21 March 2011] [16:58:25] &lt;bpl29&gt;     cremes: thanks.  I knew it was something so simple.</div>
<div class="line">[Monday 21 March 2011] [16:58:59] &lt;jond&gt;      flexo: where I am we use XDR and our own message defn language generating all the marshall/unmarshall classes. No corba</div>
<div class="line">[Monday 21 March 2011] [16:59:45] &lt;<a href="#id772"><span class="problematic" id="id773">flexo_</span></a>&gt;    jond: yea.. could have been done for our project too... but as i said.. &#8220;industry standard&#8221; :)</div>
<div class="line">[Monday 21 March 2011] [17:00:02] &lt;<a href="#id774"><span class="problematic" id="id775">flexo_</span></a>&gt;    (the department i am working for still has some 200mhz SGI boxes where they actually develop for)</div>
<div class="line">[Monday 21 March 2011] [17:00:16] &lt;bpl29&gt;     cremes: &#8220;/usr/local/bin/ocamlmktop: POSIX shell script text executable&#8221;</div>
<div class="line">[Monday 21 March 2011] [17:00:29] &lt;bpl29&gt;     cremes: I think that&#8217;s not what I&#8217;m looking for</div>
<div class="line">[Monday 21 March 2011] [17:00:33] &lt;cremes&gt;    bpl29: umm... you are going to have to do some digging</div>
<div class="line">[Monday 21 March 2011] [17:00:44] &lt;bpl29&gt;     cremes: the bash script just calls ocamlc, so I&#8217;ll go file that</div>
<div class="line">[Monday 21 March 2011] [17:00:54] &lt;cremes&gt;    that script must be calling some binary that is trying to link a 32-bit binary against the 64-bit 0mq lib</div>
<div class="line">[Monday 21 March 2011] [17:01:17] &lt;jond&gt;      flexo: that&#8217;s corporate life....</div>
<div class="line">[Monday 21 March 2011] [17:01:21] &lt;<a href="#id776"><span class="problematic" id="id777">flexo_</span></a>&gt;    yep</div>
<div class="line">[Monday 21 March 2011] [17:01:28] &lt;<a href="#id778"><span class="problematic" id="id779">flexo_</span></a>&gt;    OTOH this is the reason i know some MIPS assembly :)</div>
<div class="line">[Monday 21 March 2011] [17:01:36] &lt;cremes&gt;    bpl29: you might need to pass some flags when linking your ocaml code so that it makes everything 64-bit</div>
<div class="line">[Monday 21 March 2011] [17:01:41] &lt;bpl29&gt;     cremes:  Okay, thanks Cremes.  I think I can do something with that.  You&#8217;ve been a big help to me, and you also helped me yesterday, so thank you very much.</div>
<div class="line">[Monday 21 March 2011] [17:01:52] &lt;yrashk&gt;    still can reproduce on master</div>
<div class="line">[Monday 21 March 2011] [17:01:54] &lt;<a href="#id780"><span class="problematic" id="id781">flexo_</span></a>&gt;    (i maintain a very small library which runs on said boxes... had to debug it there once :)</div>
<div class="line">[Monday 21 March 2011] [17:01:55] &lt;yrashk&gt;    hmmm</div>
<div class="line">[Monday 21 March 2011] [17:02:03] &lt;cremes&gt;    bpl29: ok; at this point, you&#8217;ll need to jump into the ocaml channel and ask them for some help :)</div>
<div class="line">[Monday 21 March 2011] [17:02:12] &lt;yrashk&gt;    but only on my slower laptop, not mac pro</div>
<div class="line">[Monday 21 March 2011] [17:02:13] &lt;yrashk&gt;    heh</div>
<div class="line">[Monday 21 March 2011] [17:02:21] &lt;bpl29&gt;     cremes: That&#8217;s a good idea.  I&#8217;ll do that then.  Thanks again.</div>
<div class="line">[Monday 21 March 2011] [17:02:30] &lt;<a href="#id782"><span class="problematic" id="id783">flexo_</span></a>&gt;    the dept. is getting into trouble because its getting harder and harder to get replacement parts for these boxes :)</div>
<div class="line">[Monday 21 March 2011] [17:02:57] &lt;<a href="#id784"><span class="problematic" id="id785">flexo_</span></a>&gt;    the funny thing about the harddisks is that if the power goes out and they cool down about 1/3 of them dies</div>
<div class="line">[Monday 21 March 2011] [17:03:05] &lt;<a href="#id786"><span class="problematic" id="id787">flexo_</span></a>&gt;    so the boxes must be online all the time</div>
<div class="line">[Monday 21 March 2011] [17:03:48] &lt;<a href="#id788"><span class="problematic" id="id789">flexo_</span></a>&gt;    and i really enjoy taking interns into that room</div>
<div class="line">[Monday 21 March 2011] [17:05:23] &lt;<a href="#id790"><span class="problematic" id="id791">flexo_</span></a>&gt;    they dont quite believe it otherwise :)</div>
<div class="line">[Monday 21 March 2011] [17:06:04] &lt;<a href="#id792"><span class="problematic" id="id793">flexo_</span></a>&gt;    the number of people who know how to administer them grows shorter every year too</div>
<div class="line">[Monday 21 March 2011] [17:06:06] &lt;cremes&gt;    i just added one of my wish-list items to the 0mq 3.0 roadmap wiki page</div>
<div class="line">[Monday 21 March 2011] [17:06:15] &lt;<a href="#id794"><span class="problematic" id="id795">flexo_</span></a>&gt;    sheesh. where am i working :)</div>
<div class="line">[Monday 21 March 2011] [17:07:52] &lt;pieterh&gt;   cremes: a page is like... 60 lines of 80 chars?</div>
<div class="line">[Monday 21 March 2011] [17:08:21] &lt;cremes&gt;    pieterh: a page is usually some multiple of 512 bytes, like 4k on linux</div>
<div class="line">[Monday 21 March 2011] [17:09:06] &lt;pieterh&gt;   so, almost 60 x 80 like I thought :-)</div>
<div class="line">[Monday 21 March 2011] [17:09:21] &lt;cremes&gt;    almost</div>
<div class="line">[Monday 21 March 2011] [17:09:23] &lt;cremes&gt;    heh</div>
<div class="line">[Monday 21 March 2011] [17:10:03] &lt;pieterh&gt;   nice change request, but you may have to submit the patch yourself</div>
<div class="line">[Monday 21 March 2011] [17:10:13] &lt;cremes&gt;    pieterh: understood</div>
<div class="line">[Monday 21 March 2011] [17:31:49] &lt;Guthur&gt;    hehe, I love how CORBA was defined by OMG</div>
<div class="line">[Monday 21 March 2011] [17:32:06] &lt;Guthur&gt;    I have this strange feeling it is very fitting]</div>
<div class="line">[Monday 21 March 2011] [17:50:57] &lt;mikko&gt;     drbobbeaty: i got a patch that disables shared library building on openpgm side</div>
<div class="line">[Monday 21 March 2011] [17:51:05] &lt;mikko&gt;     i will chat with steven about it and see what he things</div>
<div class="line">[Monday 21 March 2011] [17:51:08] &lt;mikko&gt;     thinks*</div>
<div class="line">[Monday 21 March 2011] [17:52:42] &lt;drbobbeaty&gt;        mikko: thanks, but I found the problem. You didn&#8217;t see it because etho0 is OK for you, but on my Ubuntu box, they bonded the NICs so I could use eth0, I had to use bond0.</div>
<div class="line">[Monday 21 March 2011] [17:52:53] &lt;drbobbeaty&gt;        tricky admins.</div>
<div class="line">[Monday 21 March 2011] [17:53:00] &lt;pieterh&gt;   drbobbeaty: heh, and this worked with 2.1.2?</div>
<div class="line">[Monday 21 March 2011] [17:53:17] &lt;drbobbeaty&gt;        It worked when I HAD 2.1.2 - they did it in the last week.</div>
<div class="line">[Monday 21 March 2011] [17:54:18] &lt;pieterh&gt;   drbobbeaty, ah, just retesting 2.1.2 would have saved us all some time</div>
<div class="line">[Monday 21 March 2011] [17:55:40] &lt;drbobbeaty&gt;        Yeah, that was my fault, and I&#8217;m really sorry about that. It just didn&#8217;t cross my mind because it was working.</div>
<div class="line">[Monday 21 March 2011] [17:56:25] &lt;pieterh&gt;   glad pgm is working, anyhow</div>
<div class="line">[Monday 21 March 2011] [18:00:54] &lt;mikko&gt;     drbobbeaty, pieterh good!</div>
<div class="line">[Monday 21 March 2011] [18:01:12] &lt;mikko&gt;     in any case i worked up solutions on zeromq and libpgm side to prevent the confusing libpgm.so install</div>
<div class="line">[Monday 21 March 2011] [18:01:18] &lt;mikko&gt;     pieterh: you are CCd on mail to steven</div>
<div class="line">[Monday 21 March 2011] [18:01:26] &lt;mikko&gt;     let&#8217;s see what he thinks</div>
<div class="line">[Monday 21 March 2011] [18:01:31] &lt;pieterh&gt;   mikko: reading it now...</div>
<div class="line">[Monday 21 March 2011] [18:01:32] &lt;drbobbeaty&gt;        Thanks, mikko... I think it&#8217;ll be a very good thing to have.</div>
<div class="line">[Monday 21 March 2011] [18:02:37] &lt;pieterh&gt;   mikko: I&#8217;d guess not installing the libpgm.so is best</div>
<div class="line">[Monday 21 March 2011] [18:04:08] &lt;mikko&gt;     yeah</div>
<div class="line">[Monday 21 March 2011] [18:04:16] &lt;mikko&gt;     would be the best if steven agrees with the patch</div>
<div class="line">[Monday 21 March 2011] [18:06:46] &lt;mikko&gt;     productive day</div>
<div class="line">[Monday 21 March 2011] [18:07:05] &lt;pieterh&gt;   yeah, I&#8217;ve almost finished the clone pattern</div>
<div class="line">[Monday 21 March 2011] [18:07:26] &lt;pieterh&gt;   <em>and</em> I took the kids to the park</div>
<div class="line">[Monday 21 March 2011] [18:07:28] &lt;pieterh&gt;   great day</div>
<div class="line">[Monday 21 March 2011] [18:11:10] &lt;Guthur&gt;    would exposing the connected IPs to a 0MQ be possible</div>
<div class="line">[Monday 21 March 2011] [18:11:20] &lt;pieterh&gt;   Guthur: doubt it</div>
<div class="line">[Monday 21 March 2011] [18:13:03] &lt;Guthur&gt;    shame, I was just thinking in terms of a FIX engine, one of the recommend authentication procedures was to match IPs to companies</div>
<div class="line">[Monday 21 March 2011] [18:13:28] &lt;Guthur&gt;    obviously spoofing is possible, which the whitepaper also mentions</div>
<div class="line">[Monday 21 March 2011] [18:13:29] &lt;pieterh&gt;   it&#8217;s been discussed before</div>
<div class="line">[Monday 21 March 2011] [18:13:36] &lt;Guthur&gt;    oh</div>
<div class="line">[Monday 21 March 2011] [18:14:00] &lt;pieterh&gt;   one might have a pluggable authentication layer that sits above the transport</div>
<div class="line">[Monday 21 March 2011] [18:14:24] &lt;pieterh&gt;   this would be necessary for any public-facing 0MQ server IMO</div>
<div class="line">[Monday 21 March 2011] [18:14:47] &lt;pieterh&gt;   though people have argued stuff like banning bogus clients is a firewall issue</div>
<div class="line">[Monday 21 March 2011] [18:15:39] &lt;Guthur&gt;    security is always should a head pickle</div>
<div class="line">[Monday 21 March 2011] [18:16:06] &lt;pieterh&gt;   indeed... :-)</div>
<div class="line">[Monday 21 March 2011] [18:16:57] &lt;Guthur&gt;    Better I at least making a passing effort to understand the options now though</div>
<div class="line">[Monday 21 March 2011] [18:17:21] &lt;pieterh&gt;   if you take 0MQ today, rather than some possible future version</div>
<div class="line">[Monday 21 March 2011] [18:17:35] &lt;pieterh&gt;   then validation must be done explicitly using authentication</div>
<div class="line">[Monday 21 March 2011] [18:18:10] &lt;pieterh&gt;   alternatively you can make a TCP front-end that speaks FIX to the world, and 0MQ to the internal network</div>
<div class="line">[Monday 21 March 2011] [18:18:28] &lt;Guthur&gt;    that was a feature I would like</div>
<div class="line">[Monday 21 March 2011] [18:18:40] &lt;Guthur&gt;    I was going to build the 0MQ version first though</div>
<div class="line">[Monday 21 March 2011] [18:18:40] &lt;pieterh&gt;   it&#8217;s a fairly simple app, if you have FIX libraries</div>
<div class="line">[Monday 21 March 2011] [18:18:55] &lt;Guthur&gt;    then add the bridge to TCP later</div>
<div class="line">[Monday 21 March 2011] [18:19:15] &lt;Guthur&gt;    I was going to take QuickFIXs message parsing for now</div>
<div class="line">[Monday 21 March 2011] [18:19:38] &lt;Guthur&gt;    and replace the engine with 0MQ</div>
<div class="line">[Monday 21 March 2011] [18:19:42] &lt;pieterh&gt;   if you asked me, I&#8217;d make the bridge first</div>
<div class="line">[Monday 21 March 2011] [18:20:03] &lt;pieterh&gt;   use QuickFIX parsing over TCP at one side, 0MQ at the other side</div>
<div class="line">[Monday 21 March 2011] [18:23:10] &lt;Guthur&gt;    probably the more sensible approach</div>
<div class="line">[Monday 21 March 2011] [18:23:45] &lt;Guthur&gt;    I was just really eager to build a big 0MQ system, hehe</div>
<div class="line">[Monday 21 March 2011] [18:28:14] &lt;pieterh&gt;   btw, an open source FIX-to-0MQ bridge would be very useful for Whaleshark</div>
<div class="line">[Monday 21 March 2011] [18:32:59] &lt;Guthur&gt;    the question in my mind is how much functionality to put in the bridge</div>
<div class="line">[Monday 21 March 2011] [18:33:27] &lt;pieterh&gt;   filtering and extraction</div>
<div class="line">[Monday 21 March 2011] [18:33:45] &lt;pieterh&gt;   so that you chop the message flow down as far as possible</div>
<div class="line">[Monday 21 March 2011] [18:33:49] &lt;pieterh&gt;   without doing too much CPU intensive work</div>
<div class="line">[Monday 21 March 2011] [18:34:01] &lt;pieterh&gt;   IMHO</div>
<div class="line">[Monday 21 March 2011] [18:34:29] &lt;Guthur&gt;    well the easy one is splitting the admin and app message</div>
<div class="line">[Monday 21 March 2011] [18:34:37] &lt;Guthur&gt;    messages*#</div>
<div class="line">[Monday 21 March 2011] [18:35:39] &lt;Guthur&gt;    would a bridge offer a place to add encryption/decryption</div>
<div class="line">[Monday 21 March 2011] [18:36:04] &lt;pieterh&gt;   probably not, unless you can offload that work</div>
<div class="line">[Monday 21 March 2011] [18:37:11] &lt;Guthur&gt;    so add the basic level possibly filter admin/app messages, and verify checksums</div>
<div class="line">[Monday 21 March 2011] [18:37:16] &lt;Guthur&gt;    add/at</div>
<div class="line">[Monday 21 March 2011] [18:37:37] &lt;pieterh&gt;   it depends really on the volumes you&#8217;re dealing with and your hardware</div>
<div class="line">[Monday 21 March 2011] [18:37:50] &lt;pieterh&gt;   you want to get the machines working hard enough but not stressed</div>
<div class="line">[Monday 21 March 2011] [18:38:12] &lt;pieterh&gt;   otherwise you&#8217;re going to get latency spikes when there&#8217;s a lot of data</div>
<div class="line">[Monday 21 March 2011] [18:38:26] &lt;Guthur&gt;    FIX engines can be running on some pretty hefty hardware</div>
<div class="line">[Monday 21 March 2011] [18:38:54] &lt;Guthur&gt;    the bank I work for is now serving up all their FX pricing on a FIX engine</div>
<div class="line">[Monday 21 March 2011] [18:39:06] &lt;pieterh&gt;   you work for a bank...</div>
<div class="line">[Monday 21 March 2011] [18:39:13] &lt;Guthur&gt;    and now even clients are asking for it to be exposed them</div>
<div class="line">[Monday 21 March 2011] [18:39:16] &lt;Guthur&gt;    pieterh, yep</div>
<div class="line">[Monday 21 March 2011] [18:39:16]      * pieterh ends the free consulting</div>
<div class="line">[Monday 21 March 2011] [18:39:21] &lt;Guthur&gt;    lol</div>
<div class="line">[Monday 21 March 2011] [18:39:28]      * pieterh doubles his rates</div>
<div class="line">[Monday 21 March 2011] [18:39:47] &lt;Guthur&gt;    if only I was writing the cheques</div>
<div class="line">[Monday 21 March 2011] [18:40:15] &lt;Guthur&gt;    in truth though this is a personal project</div>
<div class="line">[Monday 21 March 2011] [18:40:37] &lt;pieterh&gt;   an open source FIX-to-0MQ bridge would be neat</div>
<div class="line">[Monday 21 March 2011] [18:41:25] &lt;Guthur&gt;    yep, it&#8217;s my goal to have this stuff open source</div>
<div class="line">[Monday 21 March 2011] [18:41:38] &lt;Guthur&gt;    if I can build it properly</div>
<div class="line">[Monday 21 March 2011] [18:41:55] &lt;mikko&gt;     pieterh: sent you some stuff again</div>
<div class="line">[Monday 21 March 2011] [18:41:56] &lt;pieterh&gt;   make it open source first, then you&#8217;ll be sure to build it properly</div>
<div class="line">[Monday 21 March 2011] [18:42:09] &lt;mikko&gt;     don&#8217;t read it before morning, it&#8217;s work related</div>
<div class="line">[Monday 21 March 2011] [18:42:23] &lt;mikko&gt;     build the community first, good products will follow</div>
<div class="line">[Monday 21 March 2011] [18:42:37] &lt;mikko&gt;     said some mozilla guy</div>
<div class="line">[Monday 21 March 2011] [18:42:41] &lt;pieterh&gt;   mikko: I&#8217;m supposed to <em>sleep</em> knowing there&#8217;s an unread mail from you?</div>
<div class="line">[Monday 21 March 2011] [18:42:44] &lt;pieterh&gt;   unpossible</div>
<div class="line">[Monday 21 March 2011] [18:43:17] &lt;mikko&gt;     heh, im gonna sleep now. another long day ahead</div>
<div class="line">[Monday 21 March 2011] [18:43:18] &lt;mikko&gt;     night</div>
<div class="line">[Monday 21 March 2011] [19:00:36] &lt;pieterh&gt;   anyone here using 0MQ from C?</div>
<div class="line">[Monday 21 March 2011] [19:07:13] &lt;Guthur&gt;    when something does not work I now use it for a sanity check</div>
<div class="line">[Monday 21 March 2011] [19:07:19] &lt;Guthur&gt;    but i don&#8217;t think that really counts</div>
<div class="line">[Monday 21 March 2011] [19:18:44] &lt;pieterh&gt;   I&#8217;ve sketched out a proposal for a high-level C binding</div>
<div class="line">[Monday 21 March 2011] [19:18:53] &lt;pieterh&gt;   <a class="reference external" href="http://www.zeromq.org/bindings:c">http://www.zeromq.org/bindings:c</a></div>
<div class="line">[Monday 21 March 2011] [19:21:35] &lt;pieterh&gt;   well, g&#8217;nite everyone...</div>
<div class="line">[Monday 21 March 2011] [19:32:45] &lt;Guthur&gt;    g&#8217;night pieterh</div>
<div class="line">[Monday 21 March 2011] [21:02:11] &lt;reiddraper&gt;        I&#8217;m seeing ~4K requests/second for a REQ-REP socket with two python processes. The are sending &#8220;hello&#8221;. Is this performance expected?</div>
<div class="line">[Monday 21 March 2011] [21:04:28] &lt;jhawk28&gt;   not sure about python, but it usually depends</div>
<div class="line">[Monday 21 March 2011] [21:04:50] &lt;jhawk28&gt;   on the network, the computing platform, and the language bindings</div>
<div class="line">[Monday 21 March 2011] [21:05:22] &lt;reiddraper&gt;        jhawk28: localhost, ubuntu</div>
<div class="line">[Monday 21 March 2011] [21:06:01] &lt;reiddraper&gt;        jhawk28: suppose I was expecting it to be an order of magnitude faster</div>
<div class="line">[Monday 21 March 2011] [21:06:27] &lt;jhawk28&gt;   are you just req: Hello and Rep: hello?</div>
<div class="line">[Monday 21 March 2011] [21:06:40] &lt;reiddraper&gt;        yes</div>
<div class="line">[Monday 21 March 2011] [21:07:25] &lt;reiddraper&gt;        zeromq 2.1.3</div>
<div class="line">[Monday 21 March 2011] [21:07:41] &lt;jhawk28&gt;   let me do a quick one in Java</div>
<div class="line">[Monday 21 March 2011] [21:07:52] &lt;reiddraper&gt;        same performance with ipc and tcp</div>
<div class="line">[Monday 21 March 2011] [21:08:13] &lt;reiddraper&gt;        jhawk28: thanks</div>
<div class="line">[Monday 21 March 2011] [21:21:17] &lt;andrewvc&gt;  cremes: around?</div>
<div class="line">[Monday 21 March 2011] [21:21:29] &lt;andrewvc&gt;  cremes: Wondering if you&#8217;d mind me releasing 0.7.3 w/ zdevice support</div>
<div class="line">[Monday 21 March 2011] [21:23:52] &lt;jhawk28&gt;   reiddraper: I&#8217;m getting about 10k/s</div>
<div class="line">[Monday 21 March 2011] [21:25:30] &lt;reiddraper&gt;        jhawk28: ok, seems reasonable that python would be 4K then</div>
<div class="line">[Monday 21 March 2011] [21:26:51] &lt;jhawk28&gt;   thats Java with 2.1.3 on a 2.4 Core i5 (OSX)</div>
<div class="line">[Monday 21 March 2011] [21:30:01] &lt;jhawk28&gt;   reiddraper: push/pull gets 2mil/s</div>
<div class="line">[Monday 21 March 2011] [21:30:37] &lt;reiddraper&gt;        jhawk28: pretty big difference</div>
<div class="line">[Monday 21 March 2011] [21:31:40] &lt;reiddraper&gt;        only really surprised because I&#8217;ve seen http servers do more req/s than what I&#8217;m seeing</div>
<div class="line">[Monday 21 March 2011] [21:33:10] &lt;jhawk28&gt;   req/rep is synchronous</div>
<div class="line">[Monday 21 March 2011] [21:33:20] &lt;jhawk28&gt;   single threaded both sides</div>
<div class="line">[Monday 21 March 2011] [21:34:44] &lt;reiddraper&gt;        yeah, figured it would have to be, that being said, so is something like Redis, which gets 10&#8217;s of thousands of operations / second, over tcp</div>
<div class="line">[Monday 21 March 2011] [21:34:53] &lt;reiddraper&gt;        req-rep</div>
<div class="line">[Monday 21 March 2011] [21:47:17] &lt;jhawk28&gt;   reiddraper: increase the number of clients</div>
<div class="line">[Monday 21 March 2011] [21:48:30] &lt;jhawk28&gt;   when I bump up the number of clients, I am getting 25k/sec</div>
<div class="line">[Monday 21 March 2011] [21:49:56] &lt;reiddraper&gt;        jhawk28: Cool, and to be honest, for what I have in mind, 4k/sec is plenty fast</div>
<div class="line">[Monday 21 March 2011] [21:51:15] &lt;jhawk28&gt;   I could probably scale it more if I used XREP</div>
<div class="line">[Monday 21 March 2011] [21:52:16] &lt;jhawk28&gt;   and actually split it between machines</div>
<div class="line">[Monday 21 March 2011] [21:55:20] &lt;reiddraper&gt;        jhawk28: can you explain the difference betwen xreq/rep and req/rep?</div>
<div class="line">[Monday 21 March 2011] [21:56:02] &lt;jhawk28&gt;   req/rep is syncronous, xreq/xrep uses identities</div>
<div class="line">[Monday 21 March 2011] [21:56:48] &lt;reiddraper&gt;        ah, OK</div>
<div class="line">[Monday 21 March 2011] [21:56:56] &lt;jhawk28&gt;   the identities are then used by zmq to route the response back to the correct socket</div>
<div class="line">[Monday 21 March 2011] [21:58:07] &lt;jhawk28&gt;   thats as much as I know</div>
<div class="line">[Monday 21 March 2011] [21:58:16] &lt;jhawk28&gt;   I haven&#8217;t used them much</div>
<div class="line">[Monday 21 March 2011] [21:58:27] &lt;jhawk28&gt;   its on my todo list...</div>
<div class="line">[Monday 21 March 2011] [22:00:08] &lt;reiddraper&gt;        jhawk28: ok, so you don&#8217;t get slowed down by slowest client that is load-balanced</div>
<div class="line">[Monday 21 March 2011] [22:01:15] &lt;jhawk28&gt;   or worker</div>
<div class="line">[Monday 21 March 2011] [22:01:40] &lt;jhawk28&gt;   thats what xreq is for (for dealing out work)</div>
<div class="line">[Monday 21 March 2011] [22:04:14] &lt;reiddraper&gt;        ok, so for a queue broker, the clients sending xreq (give me a task), and the broker sending xrep (do this) makes sense?</div>
<div class="line">[Monday 21 March 2011] [22:07:41] &lt;jhawk28&gt;   Chapter 3 does a good job explaining it: <a class="reference external" href="http://zguide.zeromq.org/page:all#toc45">http://zguide.zeromq.org/page:all#toc45</a></div>
<div class="line">[Monday 21 March 2011] [22:08:15] &lt;reiddraper&gt;        jhawk28: awesome. thanks</div>
<div class="line">[Monday 21 March 2011] [22:16:11] &lt;believa&gt;   newb question - are the following statements true? You cannot &#8220;bind&#8221; multiple sockets to the same endpoint. You &#8220;can&#8221; connect multiple sockets to the same endpoint. A socket can &#8220;bind&#8221; and/or &#8220;connect&#8221; to multiple endpoints.</div>
<div class="line">[Monday 21 March 2011] [22:18:58] &lt;jhawk28&gt;   Yes, yes</div>
<div class="line">[Monday 21 March 2011] [22:19:16] &lt;jhawk28&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [22:19:21] &lt;believa&gt;   jhawk28: thanks for the confirmation</div>
<div class="line">[Monday 21 March 2011] [22:20:46] &lt;neopallium&gt;        believa: you can bind one socket to multiple different endpoints, but you can&#8217;t bind multiple sockets to the same endpoint.</div>
<div class="line">[Monday 21 March 2011] [22:21:13] &lt;believa&gt;   neopallium: gotcha</div>
<div class="line">[Monday 21 March 2011] [22:21:15] &lt;neopallium&gt;        just like you can&#8217;t bind multiple tcp sockets to the same port on the same computer.</div>
<div class="line">[Monday 21 March 2011] [22:22:29] &lt;believa&gt;   neopallium: that should result in EADDRINUSE right?</div>
<div class="line">[Monday 21 March 2011] [22:30:20] &lt;neopallium&gt;        believa: yes</div>
<div class="line">[Monday 21 March 2011] [22:30:35] &lt;believa&gt;   neopallium: thanks</div>
<div class="line">[Tuesday 22 March 2011] [03:47:12] &lt;sustrik&gt;  reiddrapper: req/rep is lock-step; the performance is determined by the latency of your network</div>
<div class="line">[Tuesday 22 March 2011] [03:47:32] &lt;sustrik&gt;  the actual messaging fabric is almost irrelevant</div>
<div class="line">[Tuesday 22 March 2011] [04:09:14] &lt;pieterh&gt;  good morning</div>
<div class="line">[Tuesday 22 March 2011] [04:10:23] &lt;pieterh&gt;  sustrik: we had this question twice in a day, perhaps worth some explanation in the guide</div>
<div class="line">[Tuesday 22 March 2011] [04:12:06] &lt;sustrik&gt;  yes, that would be good</div>
<div class="line">[Tuesday 22 March 2011] [04:12:11] &lt;sustrik&gt;  alternatively</div>
<div class="line">[Tuesday 22 March 2011] [04:12:17] &lt;sustrik&gt;  there&#8217;s a page about rinning perf tests</div>
<div class="line">[Tuesday 22 March 2011] [04:12:21] &lt;sustrik&gt;  let me see</div>
<div class="line">[Tuesday 22 March 2011] [04:12:40] &lt;pieterh&gt;  perhaps an explicit page we can refer to upfront, yes</div>
<div class="line">[Tuesday 22 March 2011] [04:12:54] &lt;pieterh&gt;  e.g. expected throughput and latency of each pattern</div>
<div class="line">[Tuesday 22 March 2011] [04:13:05] &lt;pieterh&gt;  very rough, but to set expectations properly</div>
<div class="line">[Tuesday 22 March 2011] [04:14:23] &lt;sustrik&gt;  <a class="reference external" href="http://www.zeromq.org/results:perf-howto">http://www.zeromq.org/results:perf-howto</a></div>
<div class="line">[Tuesday 22 March 2011] [04:20:18] &lt;pieterh&gt;  sustrik: it&#8217;s not very useful to beginners IMO</div>
<div class="line">[Tuesday 22 March 2011] [04:21:25] &lt;pieterh&gt;  I&#8217;ll think about how to explain this, it&#8217;s got to be in terms of limits, capacity, speed of different patterns &amp; transports</div>
<div class="line">[Tuesday 22 March 2011] [04:21:35] &lt;pieterh&gt;  like a spec sheet</div>
<div class="line">[Tuesday 22 March 2011] [04:21:40] &lt;sustrik&gt;  let me send you a diagram</div>
<div class="line">[Tuesday 22 March 2011] [04:22:17] &lt;pieterh&gt;  sure</div>
<div class="line">[Tuesday 22 March 2011] [04:39:19] &lt;pieterh&gt;  sustrik: random idea for cleaner semantics on multipart messages</div>
<div class="line">[Tuesday 22 March 2011] [04:39:36] &lt;pieterh&gt;  make the MORE bit a property of a frame (zmq_msg_t) rather than a socket</div>
<div class="line">[Tuesday 22 March 2011] [04:40:03] &lt;sustrik&gt;  that&#8217;s how it works on wire level</div>
<div class="line">[Tuesday 22 March 2011] [04:40:11] &lt;pieterh&gt;  it would also make more sense at the API level IMO</div>
<div class="line">[Tuesday 22 March 2011] [04:40:12] &lt;sustrik&gt;  with API it&#8217;s a pain to use</div>
<div class="line">[Tuesday 22 March 2011] [04:40:26] &lt;sustrik&gt;  i though of combining the two approaches</div>
<div class="line">[Tuesday 22 March 2011] [04:40:30] &lt;pieterh&gt;  it means I can prepare a frame and write it with a generic method</div>
<div class="line">[Tuesday 22 March 2011] [04:40:41] &lt;sustrik&gt;  yes</div>
<div class="line">[Tuesday 22 March 2011] [04:40:58] &lt;pieterh&gt;  if you consider zmq_msg_t as a &#8216;smart blob&#8217; (and I like this), then it should have a more property</div>
<div class="line">[Tuesday 22 March 2011] [04:41:10] &lt;sustrik&gt;  the problem is this:</div>
<div class="line">[Tuesday 22 March 2011] [04:41:27] &lt;sustrik&gt;  zmq_send (msg, MSG_SNDMORE);</div>
<div class="line">[Tuesday 22 March 2011] [04:41:27] &lt;sustrik&gt;  vs.</div>
<div class="line">[Tuesday 22 March 2011] [04:41:47] &lt;sustrik&gt;  zmq_msg_setflag (msg, ZMQ_MORE, 1);</div>
<div class="line">[Tuesday 22 March 2011] [04:41:51] &lt;pieterh&gt;  you can always do both</div>
<div class="line">[Tuesday 22 March 2011] [04:41:53] &lt;sustrik&gt;  zmq_send (msg, 0);</div>
<div class="line">[Tuesday 22 March 2011] [04:41:58] &lt;sustrik&gt;  yes</div>
<div class="line">[Tuesday 22 March 2011] [04:42:19] &lt;pieterh&gt;  I see the zmq_send (..., MSG_SENDMORE) as either an optimization or an override</div>
<div class="line">[Tuesday 22 March 2011] [04:42:26] &lt;sustrik&gt;  yes</div>
<div class="line">[Tuesday 22 March 2011] [04:42:32] &lt;sustrik&gt;  convenience feature</div>
<div class="line">[Tuesday 22 March 2011] [04:42:45] &lt;pieterh&gt;  e.g. if I have an identity frame, and want to send it, it&#8217;s always going to be MORE</div>
<div class="line">[Tuesday 22 March 2011] [04:43:04] &lt;pieterh&gt;  read / write then become symmetric</div>
<div class="line">[Tuesday 22 March 2011] [04:43:04] &lt;sustrik&gt;  yes, it would simplify devices</div>
<div class="line">[Tuesday 22 March 2011] [04:43:07] &lt;pieterh&gt;  yes</div>
<div class="line">[Tuesday 22 March 2011] [04:43:20] &lt;pieterh&gt;  indeed, any generic handling of multipart messages becomes cleaner</div>
<div class="line">[Tuesday 22 March 2011] [04:43:30] &lt;sustrik&gt;  ack</div>
<div class="line">[Tuesday 22 March 2011] [04:43:38] &lt;pieterh&gt;  another question, is it necessary to destroy a message after sending it?</div>
<div class="line">[Tuesday 22 March 2011] [04:43:50] &lt;pieterh&gt;  sending the same frame N times is rather clumsy today</div>
<div class="line">[Tuesday 22 March 2011] [04:43:53] &lt;sustrik&gt;  it you don&#8217;t nothing happens</div>
<div class="line">[Tuesday 22 March 2011] [04:44:13] &lt;sustrik&gt;  but it&#8217;s safer to do so for forward compatibility</div>
<div class="line">[Tuesday 22 March 2011] [04:44:23] &lt;pieterh&gt;  ah, you mean _close is optional</div>
<div class="line">[Tuesday 22 March 2011] [04:44:29] &lt;sustrik&gt;  nope</div>
<div class="line">[Tuesday 22 March 2011] [04:44:46] &lt;sustrik&gt;  technically, closing empty message translates to noop</div>
<div class="line">[Tuesday 22 March 2011] [04:45:03] &lt;sustrik&gt;  however, that is not guaranteed to hold in future versions of 0mq</div>
<div class="line">[Tuesday 22 March 2011] [04:45:31] &lt;sustrik&gt;  so, preferable, close the messages so that 0mq can hook into message destruction process</div>
<div class="line">[Tuesday 22 March 2011] [04:45:41] &lt;sustrik&gt;  preferably*</div>
<div class="line">[Tuesday 22 March 2011] [04:46:01] &lt;pieterh&gt;  To send a message twice I need to:</div>
<div class="line">[Tuesday 22 March 2011] [04:46:02] &lt;pieterh&gt;  zmq_msg_t copy;</div>
<div class="line">[Tuesday 22 March 2011] [04:46:03] &lt;pieterh&gt;  zmq_msg_init (&amp;copy);</div>
<div class="line">[Tuesday 22 March 2011] [04:46:03] &lt;pieterh&gt;  zmq_msg_copy (&amp;copy, &amp;original);</div>
<div class="line">[Tuesday 22 March 2011] [04:46:03] &lt;pieterh&gt;  zmq_send (socket, &amp;copy, 0);</div>
<div class="line">[Tuesday 22 March 2011] [04:46:03] &lt;pieterh&gt;  zmq_msg_close (&amp;copy);</div>
<div class="line">[Tuesday 22 March 2011] [04:46:13] &lt;sustrik&gt;  yes</div>
<div class="line">[Tuesday 22 March 2011] [04:46:39] &lt;sustrik&gt;  well, you should close the original as well</div>
<div class="line">[Tuesday 22 March 2011] [04:46:39] &lt;pieterh&gt;  so my question is whether it&#8217;s necessary for 0MQ to destroy the message after sending</div>
<div class="line">[Tuesday 22 March 2011] [04:46:43] &lt;sustrik&gt;  unless you are going to use it</div>
<div class="line">[Tuesday 22 March 2011] [04:46:49] &lt;sustrik&gt;  not now</div>
<div class="line">[Tuesday 22 March 2011] [04:46:55] &lt;sustrik&gt;  may be necessary in future</div>
<div class="line">[Tuesday 22 March 2011] [04:47:04] &lt;pieterh&gt;  could I have a flag saying, &#8220;don&#8217;t nullify after sending&#8221;?</div>
<div class="line">[Tuesday 22 March 2011] [04:47:13] &lt;pieterh&gt;  MSG_REUSE</div>
<div class="line">[Tuesday 22 March 2011] [04:47:29] &lt;sustrik&gt;  ah, a convenience feature</div>
<div class="line">[Tuesday 22 March 2011] [04:47:41] &lt;sustrik&gt;  you can have that, but you should be aware it&#8217;s slow</div>
<div class="line">[Tuesday 22 March 2011] [04:47:53] &lt;pieterh&gt;  slower than creating copies each time?</div>
<div class="line">[Tuesday 22 March 2011] [04:47:54] &lt;pieterh&gt;  how so?</div>
<div class="line">[Tuesday 22 March 2011] [04:47:59] &lt;sustrik&gt;  there&#8217;s refernce counting going on there</div>
<div class="line">[Tuesday 22 March 2011] [04:48:05] &lt;sustrik&gt;  which is implemented using atomic ops</div>
<div class="line">[Tuesday 22 March 2011] [04:48:19] &lt;sustrik&gt;  which in turn means the memory bus is locked each time you do so</div>
<div class="line">[Tuesday 22 March 2011] [04:48:37] &lt;pieterh&gt;  yes, but I&#8217;m copying the message each time now</div>
<div class="line">[Tuesday 22 March 2011] [04:48:43] &lt;pieterh&gt;  that also locks the memory bus each time</div>
<div class="line">[Tuesday 22 March 2011] [04:48:48] &lt;sustrik&gt;  yes, we can add the convenience flag</div>
<div class="line">[Tuesday 22 March 2011] [04:49:07] &lt;sustrik&gt;  nope, copying doesn&#8217;t lock the bus</div>
<div class="line">[Tuesday 22 March 2011] [04:49:24] &lt;sustrik&gt;  well, unless there&#8217;s contention between CPU cores on that particular cacheline</div>
<div class="line">[Tuesday 22 March 2011] [04:49:33] &lt;pieterh&gt;  well, copying also uses atomic ops for reference counting</div>
<div class="line">[Tuesday 22 March 2011] [04:49:51] &lt;sustrik&gt;  ah, you mean zmq_msg_copy</div>
<div class="line">[Tuesday 22 March 2011] [04:49:53] &lt;sustrik&gt;  yes</div>
<div class="line">[Tuesday 22 March 2011] [04:49:59] &lt;sustrik&gt;  so yes, we can add the flag</div>
<div class="line">[Tuesday 22 March 2011] [04:50:07] &lt;pieterh&gt;  yes, there&#8217;s no other way to send the same frame twice</div>
<div class="line">[Tuesday 22 March 2011] [04:50:17] &lt;sustrik&gt;  what i&#8217;m saying is that it should not be the default</div>
<div class="line">[Tuesday 22 March 2011] [04:50:17] &lt;pieterh&gt;  aight...</div>
<div class="line">[Tuesday 22 March 2011] [04:50:22] &lt;pieterh&gt;  ah, certainly</div>
<div class="line">[Tuesday 22 March 2011] [04:51:00]     * pieterh peeks at the code...</div>
<div class="line">[Tuesday 22 March 2011] [04:52:18] &lt;pieterh&gt;  well, I&#8217;ll add this to the 3.0 page but I have no idea how to make it :-)</div>
<div class="line">[Tuesday 22 March 2011] [04:52:25] &lt;pieterh&gt;  it would be useful, though IMO</div>
<div class="line">[Tuesday 22 March 2011] [04:53:54] &lt;sustrik&gt;  it&#8217;s backward compatible, so no need to solve it immediately</div>
<div class="line">[Tuesday 22 March 2011] [04:54:12] &lt;sustrik&gt;  the backward incompatible changes are what&#8217;s in focus now</div>
<div class="line">[Tuesday 22 March 2011] [04:54:28] &lt;sustrik&gt;  they have to be done in a single go, if possible</div>
<div class="line">[Tuesday 22 March 2011] [04:54:33] &lt;sustrik&gt;  to minimise the pain</div>
<div class="line">[Tuesday 22 March 2011] [04:54:53] &lt;sustrik&gt;  the remaining functionality can be added gradually afterwards</div>
<div class="line">[Tuesday 22 March 2011] [04:58:29] &lt;pieterh&gt;  I&#8217;m not sure the changes will be as painful as you imagine</div>
<div class="line">[Tuesday 22 March 2011] [04:58:55] &lt;sustrik&gt;  dunno, but minimising the pain is a good thing in itself</div>
<div class="line">[Tuesday 22 March 2011] [04:59:10] &lt;pieterh&gt;  yes, at least doing it all in one go</div>
<div class="line">[Tuesday 22 March 2011] [06:59:40] &lt;pieterh&gt;  sustrik: I&#8217;ve built the basic API for the high-level C binding, at <a class="reference external" href="https://github.com/zeromq/zapi">https://github.com/zeromq/zapi</a></div>
<div class="line">[Tuesday 22 March 2011] [06:59:51] &lt;pieterh&gt;  will fill in the pieces over the next few days</div>
<div class="line">[Tuesday 22 March 2011] [07:01:10] &lt;drbobbeaty&gt;       pieterh: if the C level binding is separate in 3.x, is the C++ binding as well? Are they different bindings? What comes &#8220;standard&#8221; with the ZMQ libraries? Any &#8216;default&#8217; API?</div>
<div class="line">[Tuesday 22 March 2011] [07:01:25] &lt;pieterh&gt;  drbobbeaty: yes, we plan to split off the C++ binding as well</div>
<div class="line">[Tuesday 22 March 2011] [07:01:33] &lt;pieterh&gt;  the default API is the Core C API</div>
<div class="line">[Tuesday 22 March 2011] [07:02:09] &lt;pieterh&gt;  the new C binding will work over 2.x as well as 3.x</div>
<div class="line">[Tuesday 22 March 2011] [07:02:42] &lt;drbobbeaty&gt;       Ah! I see the advantage to having the separate binding now - bridge the versions. Nice plan.</div>
<div class="line">[Tuesday 22 March 2011] [07:03:03] &lt;pieterh&gt;  also it makes it much easier to add useful functionality without breaking other language bindings</div>
<div class="line">[Tuesday 22 March 2011] [07:03:18] &lt;pieterh&gt;  so we can e.g. write a C reactor without affecting the core</div>
<div class="line">[Tuesday 22 March 2011] [07:18:47] &lt;Guthur&gt;   pieterh: I think I&#8217;ll draw some inspiration from the new C binding</div>
<div class="line">[Tuesday 22 March 2011] [07:19:09] &lt;pieterh&gt;  Guthur: could be fun, I&#8217;ve tried to use a class-oriented approach for most of it</div>
<div class="line">[Tuesday 22 March 2011] [07:20:26] &lt;pieterh&gt;  I&#8217;ll be converting the Guide examples to zapi when it&#8217;s ready</div>
<div class="line">[Tuesday 22 March 2011] [07:20:40] &lt;pieterh&gt;  so if the C++ binding is anything like that, it&#8217;ll be a lot easier for those examples too</div>
<div class="line">[Tuesday 22 March 2011] [07:21:14] &lt;pieterh&gt;  Guthur: when you need a repository created in the zeromq organization, give me a shout</div>
<div class="line">[Tuesday 22 March 2011] [07:21:16] &lt;Guthur&gt;   C# you mean, hehe</div>
<div class="line">[Tuesday 22 March 2011] [07:21:21] &lt;pieterh&gt;  oh, sorry</div>
<div class="line">[Tuesday 22 March 2011] [07:21:23] &lt;pieterh&gt;  C#</div>
<div class="line">[Tuesday 22 March 2011] [07:21:29]     * pieterh was getting all confused</div>
<div class="line">[Tuesday 22 March 2011] [07:21:48]     * pieterh searches for the &#8216;edit&#8217; button...</div>
<div class="line">[Tuesday 22 March 2011] [07:24:16] &lt;Guthur&gt;   When 0MQ 3.0 API is finalized I&#8217;m going to develop a new branch for clrzmq2</div>
<div class="line">[Tuesday 22 March 2011] [07:24:46] &lt;Guthur&gt;   I have a far better idea now what works and what doesn&#8217;t</div>
<div class="line">[Tuesday 22 March 2011] [07:25:02] &lt;pieterh&gt;  please don&#8217;t call it clrzmq3 :-)</div>
<div class="line">[Tuesday 22 March 2011] [07:25:23] &lt;Guthur&gt;   yeah I&#8217;ll resist that temptation</div>
<div class="line">[Tuesday 22 March 2011] [07:25:47] &lt;Guthur&gt;   It will just be a branch of clrzmq2</div>
<div class="line">[Tuesday 22 March 2011] [07:26:00] &lt;pieterh&gt;  though ... embracing the chaos... it could be useful</div>
<div class="line">[Tuesday 22 March 2011] [07:26:07] &lt;pieterh&gt;  if binding versions track the development version</div>
<div class="line">[Tuesday 22 March 2011] [07:26:19] &lt;pieterh&gt;  so people know that clrzmq3 supports 3.x and 2.x</div>
<div class="line">[Tuesday 22 March 2011] [07:26:26] &lt;Guthur&gt;   the assembly will be version 3.x</div>
<div class="line">[Tuesday 22 March 2011] [07:26:49] &lt;Guthur&gt;   the assembly is currently 2.1.x</div>
<div class="line">[Tuesday 22 March 2011] [07:26:58] &lt;pieterh&gt;  problem is that the version number is in the github repo name</div>
<div class="line">[Tuesday 22 March 2011] [07:27:05] &lt;Guthur&gt;   true</div>
<div class="line">[Tuesday 22 March 2011] [07:27:11] &lt;pieterh&gt;  we have the same problem with zeromq2</div>
<div class="line">[Tuesday 22 March 2011] [07:28:00] &lt;Guthur&gt;   not an easy decision to be honest</div>
<div class="line">[Tuesday 22 March 2011] [07:28:15] &lt;Guthur&gt;   I really don&#8217;t want to confuse potential/current users</div>
<div class="line">[Tuesday 22 March 2011] [07:30:50] &lt;Guthur&gt;   pieterh: can you briefly explain you reactor pattern thing in the C binding</div>
<div class="line">[Tuesday 22 March 2011] [07:31:16] &lt;pieterh&gt;  Guthur: to be honest I&#8217;ve never used a reactor pattern so this is kind of a guess</div>
<div class="line">[Tuesday 22 March 2011] [07:31:25] &lt;pieterh&gt;  the idea is to register the events you want to handle</div>
<div class="line">[Tuesday 22 March 2011] [07:31:34] &lt;pieterh&gt;  and then a tickless poll loop can handle it</div>
<div class="line">[Tuesday 22 March 2011] [07:31:38] &lt;mikko&gt;    howdy boys</div>
<div class="line">[Tuesday 22 March 2011] [07:31:39] &lt;mikko&gt;    and girls</div>
<div class="line">[Tuesday 22 March 2011] [07:31:42] &lt;pieterh&gt;  hey mikko!</div>
<div class="line">[Tuesday 22 March 2011] [07:31:47] &lt;Guthur&gt;   hi mikko</div>
<div class="line">[Tuesday 22 March 2011] [07:31:55] &lt;Guthur&gt;   pieterh: what is the alarm part</div>
<div class="line">[Tuesday 22 March 2011] [07:32:17] &lt;Guthur&gt;   and clock</div>
<div class="line">[Tuesday 22 March 2011] [07:32:21] &lt;pieterh&gt;  Guthur: if you look at a realistic app like the Majordomo broker</div>
<div class="line">[Tuesday 22 March 2011] [07:32:27] &lt;pieterh&gt;  then it mixes socket events with timer events</div>
<div class="line">[Tuesday 22 March 2011] [07:32:36] &lt;pieterh&gt;  e.g. &#8220;send heartbeats every 3 seconds&#8221;</div>
<div class="line">[Tuesday 22 March 2011] [07:32:46] &lt;pieterh&gt;  &#8220;kill server if no response in 2500 msecs&#8221;</div>
<div class="line">[Tuesday 22 March 2011] [07:33:12] &lt;pieterh&gt;  I made a proper tickless poll loop in the flcliapi (freelance client)</div>
<div class="line">[Tuesday 22 March 2011] [07:33:21] &lt;pieterh&gt;  it calculates the next timer event and polls that long</div>
<div class="line">[Tuesday 22 March 2011] [07:33:23] &lt;Guthur&gt;   ok so that would be too all registered sockets</div>
<div class="line">[Tuesday 22 March 2011] [07:33:28] &lt;pieterh&gt;  rather than polling every second or whatever</div>
<div class="line">[Tuesday 22 March 2011] [07:33:47] &lt;Guthur&gt;   I haven&#8217;t got as far as freelance yet</div>
<div class="line">[Tuesday 22 March 2011] [07:34:17] &lt;pieterh&gt;  take a brief look at the flcliapi poll loop, if you want to understand zloop</div>
<div class="line">[Tuesday 22 March 2011] [07:34:19] &lt;Guthur&gt;   I&#8217;ve just got to majordomo</div>
<div class="line">[Tuesday 22 March 2011] [07:34:22] &lt;pieterh&gt;  :-)</div>
<div class="line">[Tuesday 22 March 2011] [07:35:18] &lt;pieterh&gt;  the reactor won&#8217;t work for all cases, sometimes we poll selectively</div>
<div class="line">[Tuesday 22 March 2011] [07:35:27] &lt;pieterh&gt;  but it should help the more complex designs</div>
<div class="line">[Tuesday 22 March 2011] [07:40:40] &lt;Guthur&gt;   I think I&#8217;ve sort of included a limited reactor pattern in clrzmq2</div>
<div class="line">[Tuesday 22 March 2011] [07:42:19] &lt;Guthur&gt;   but unfortunately the incremental nature of the development of the polling mechanism has left the API in a state that is less clear that I would like</div>
<div class="line">[Tuesday 22 March 2011] [07:42:42] &lt;Guthur&gt;   it&#8217;s one of the main area&#8217;s I would like to refactor</div>
<div class="line">[Tuesday 22 March 2011] [07:44:10] &lt;Guthur&gt;   I&#8217;d also like to simplify the send/recv</div>
<div class="line">[Tuesday 22 March 2011] [07:45:29] &lt;pieterh&gt;  in C# strings are just blobs, right?</div>
<div class="line">[Tuesday 22 March 2011] [07:45:55] &lt;Guthur&gt;   they are objects</div>
<div class="line">[Tuesday 22 March 2011] [07:46:36] &lt;pieterh&gt;  right</div>
<div class="line">[Tuesday 22 March 2011] [07:47:35] &lt;Guthur&gt;   i&#8217;d rather deal with them in an msg object as oppose to at the socket level send/recv</div>
<div class="line">[Tuesday 22 March 2011] [07:48:00] &lt;pieterh&gt;  the breakdown I&#8217;m using in zapi is frame vs. msg</div>
<div class="line">[Tuesday 22 March 2011] [07:48:08] &lt;pieterh&gt;  where frame is one part, msg is a multipart object</div>
<div class="line">[Tuesday 22 March 2011] [07:48:23] &lt;Guthur&gt;   I meant to ask about the framw</div>
<div class="line">[Tuesday 22 March 2011] [07:48:26] &lt;Guthur&gt;   frame*</div>
<div class="line">[Tuesday 22 March 2011] [07:48:44] &lt;pieterh&gt;  0MQ uses &#8216;msg&#8217; to mean &#8216;part&#8217;, which is confusing</div>
<div class="line">[Tuesday 22 March 2011] [07:49:11] &lt;Guthur&gt;   yeah, was taking more about the multipart you describe</div>
<div class="line">[Tuesday 22 March 2011] [07:49:21] &lt;pieterh&gt;  perhaps I should use &#8216;part&#8217; instead of &#8216;frame&#8217;... anyhow</div>
<div class="line">[Tuesday 22 March 2011] [07:49:39] &lt;pieterh&gt;  the frame class lets you do things like &#8216;receive the identity&#8217; and &#8216;send the identity&#8217; with ROUTER sockets</div>
<div class="line">[Tuesday 22 March 2011] [07:50:14] &lt;pieterh&gt;  whereas the msg class is more like &#8216;recv a list of frames&#8217; and &#8216;send a list of frames&#8217;</div>
<div class="line">[Tuesday 22 March 2011] [07:51:46] &lt;Guthur&gt;   I was also then going to take a lazy marshalling approach, only marshalling the zeromq msg (part) to a c# data type when required, should improved performance in situations where you don&#8217;t need to know about the whole message</div>
<div class="line">[Tuesday 22 March 2011] [07:52:24] &lt;pieterh&gt;  that makes sense, it&#8217;s what I&#8217;m doing in other places</div>
<div class="line">[Tuesday 22 March 2011] [07:52:28] &lt;Guthur&gt;   it&#8217;s sort of all in my head at the moment though, I really should try to define the API like you have done</div>
<div class="line">[Tuesday 22 March 2011] [07:52:40] &lt;pieterh&gt;  yeah, start with the API, it makes everything clearer</div>
<div class="line">[Tuesday 22 March 2011] [09:03:12] &lt;drbobbeaty&gt;       I have a core dump with ZeroMQ 2.1.3 this morning... I have detailed it in this gist: <a class="reference external" href="https://gist.github.com/881176">https://gist.github.com/881176</a> . It includes the stack trace and the code from OpenPGM that&#8217;s the last step in the trace.</div>
<div class="line">[Tuesday 22 March 2011] [09:03:49] &lt;drbobbeaty&gt;       It seems impossible to be true &#8211; if the assert is causing the exception, then the value of minor_bucket has to be NULL... but it&#8217;s not, as shown in the stack trace.</div>
<div class="line">[Tuesday 22 March 2011] [09:03:58] &lt;drbobbeaty&gt;       Is this a problem for Steve?</div>
<div class="line">[Tuesday 22 March 2011] [09:04:34] &lt;drbobbeaty&gt;       (I&#8217;ve received this on two different boxes on four separate occasions this morning)</div>
<div class="line">[Tuesday 22 March 2011] [09:06:38] &lt;drbobbeaty&gt;       HA! I think it&#8217;s the data_size being 0!</div>
<div class="line">[Tuesday 22 March 2011] [09:06:47] &lt;drbobbeaty&gt;       Any ideas as to why that would be?</div>
<div class="line">[Tuesday 22 March 2011] [09:07:03] &lt;sustrik&gt;  drbobbeaty: you have to discuss that with steve-o</div>
<div class="line">[Tuesday 22 March 2011] [09:07:14] &lt;sustrik&gt;  seem to be a problem with new version of opnepgm</div>
<div class="line">[Tuesday 22 March 2011] [09:09:58] &lt;drbobbeaty&gt;       Steve-o: can you have a look at <a class="reference external" href="https://gist.github.com/881176">https://gist.github.com/881176</a> and give me an idea of why data_size == 0 on the call? I&#8217;m hitting the assertion and have no idea why.</div>
<div class="line">[Tuesday 22 March 2011] [09:10:20] &lt;drbobbeaty&gt;       pieterh: should I just hit the mailing list for steve-o?</div>
<div class="line">[Tuesday 22 March 2011] [09:10:58] &lt;pieterh&gt;  drbobbeaty: I&#8217;d do that, he&#8217;s in Asia and probably out of the office by now</div>
<div class="line">[Tuesday 22 March 2011] [09:11:21] &lt;pieterh&gt;  the good news is you can get a new OpenPGM and use that with 2.1.3 without further changes</div>
<div class="line">[Tuesday 22 March 2011] [09:16:16] &lt;Guthur&gt;   sustrik: I see in the IPC discussion no one is actually talking about using IOCP and named pipes. I&#8217;ve been meaning to ask you about whether you think an abstraction layer over either Sockets &amp; Named Pipes or IOCP itself could feasibly provide the necessary functionality to mimic what is required from poll, select etc in 0MQ</div>
<div class="line">[Tuesday 22 March 2011] [09:16:50] &lt;Guthur&gt;   this would all be window centric changes of course</div>
<div class="line">[Tuesday 22 March 2011] [09:22:50] &lt;drbobbeaty&gt;       Steve-o: if you get this, please check the mailing list... I&#8217;m getting more than two core dumps an hour with 2.1.3 due to this data_size == 0 issue. Yikes!</div>
<div class="line">[Tuesday 22 March 2011] [09:23:56] &lt;pieterh&gt;  drbobbeaty: sorry about this, we don&#8217;t have the facilities to properly test OpenPGM yet</div>
<div class="line">[Tuesday 22 March 2011] [09:24:29] &lt;pieterh&gt;  I&#8217;d advise you to rollback to 2.1.2 until we get a fix to it</div>
<div class="line">[Tuesday 22 March 2011] [09:24:42] &lt;drbobbeaty&gt;       I understand... If I had to guess it&#8217;s an edge condition where data_size == 0, and I&#8217;m just hitting it more with all the exchange feeds I&#8217;m dealing with.</div>
<div class="line">[Tuesday 22 March 2011] [09:24:51] &lt;sustrik&gt;  Guthur: what&#8217;s being discussed is a workaround</div>
<div class="line">[Tuesday 22 March 2011] [09:25:00] &lt;drbobbeaty&gt;       pieterh: that&#8217;s a good plan.</div>
<div class="line">[Tuesday 22 March 2011] [09:25:06] &lt;sustrik&gt;  something that would look like IPC but would actually be TCP</div>
<div class="line">[Tuesday 22 March 2011] [09:25:17] &lt;pieterh&gt;  drbobbeaty: I expect tomorrow morning Steve will have an updated OpenPGM package</div>
<div class="line">[Tuesday 22 March 2011] [09:25:17] &lt;sustrik&gt;  real solution is IPC &amp; NamedPipes</div>
<div class="line">[Tuesday 22 March 2011] [09:25:46] &lt;pieterh&gt;  you can install it and rebuild 2.1.3, &#8211;with-openpgm=&lt;version&gt; or somesuch, I&#8217;m not 100% sure on that syntax</div>
<div class="line">[Tuesday 22 March 2011] [09:28:10] &lt;Guthur&gt;   sustrik: does the abstraction sound like a feasible objective?</div>
<div class="line">[Tuesday 22 March 2011] [09:29:52] &lt;sustrik&gt;  Guthur: the abstraction exists already</div>
<div class="line">[Tuesday 22 March 2011] [09:30:12] &lt;sustrik&gt;  check how poll_t, select_t, epoll_t etc. interface with the rest of the system</div>
<div class="line">[Tuesday 22 March 2011] [09:30:27] &lt;sustrik&gt;  check whether IOCP can use the same interface</div>
<div class="line">[Tuesday 22 March 2011] [09:30:35] &lt;sustrik&gt;  if not, propose changes</div>
<div class="line">[Tuesday 22 March 2011] [09:31:06] &lt;Guthur&gt;   I thought the problem was that underneath those abstractions they use functionality that IOCP does not provide</div>
<div class="line">[Tuesday 22 March 2011] [09:31:22] &lt;Guthur&gt;   IOCP only providing notification of completion</div>
<div class="line">[Tuesday 22 March 2011] [09:32:10] &lt;sustrik&gt;  right, IOCP has an additional buffer between the user and the network</div>
<div class="line">[Tuesday 22 March 2011] [09:32:14] &lt;sustrik&gt;  something like AIO</div>
<div class="line">[Tuesday 22 March 2011] [09:32:24] &lt;sustrik&gt;  is there a way to limit the size of the buffer?</div>
<div class="line">[Tuesday 22 March 2011] [09:32:40] &lt;Guthur&gt;   I can check that out</div>
<div class="line">[Tuesday 22 March 2011] [09:33:00] &lt;sustrik&gt;  yes, please</div>
<div class="line">[Tuesday 22 March 2011] [09:33:08] &lt;sustrik&gt;  if there&#8217;s no limit to the buffer</div>
<div class="line">[Tuesday 22 March 2011] [09:33:17] &lt;sustrik&gt;  it could easily exhaust all the memory</div>
<div class="line">[Tuesday 22 March 2011] [09:33:47] &lt;sustrik&gt;  in such case the code using IOCP would have to keep track of amount of memory in use</div>
<div class="line">[Tuesday 22 March 2011] [09:35:12] &lt;Guthur&gt;   oh, that does not sound ideal</div>
<div class="line">[Tuesday 22 March 2011] [09:45:48] &lt;sustrik&gt;  cremes: hi</div>
<div class="line">[Tuesday 22 March 2011] [09:46:01] &lt;cremes&gt;   sustrik: good morning</div>
<div class="line">[Tuesday 22 March 2011] [09:46:09] &lt;sustrik&gt;  morning</div>
<div class="line">[Tuesday 22 March 2011] [09:46:23] &lt;sustrik&gt;  as for the assertion, any chance of getting backtrace?</div>
<div class="line">[Tuesday 22 March 2011] [09:47:01] &lt;cremes&gt;   sustrik: i can try to capture it in gdb; give me a few minutes and i&#8217;ll see what i can do</div>
<div class="line">[Tuesday 22 March 2011] [09:47:07] &lt;sustrik&gt;  ok</div>
<div class="line">[Tuesday 22 March 2011] [09:47:28] &lt;sustrik&gt;  another thing: the allocation mechanism you proposed</div>
<div class="line">[Tuesday 22 March 2011] [09:47:44] &lt;sustrik&gt;  have you found out where the memory disappers?</div>
<div class="line">[Tuesday 22 March 2011] [09:48:18] &lt;sustrik&gt;  (issue 174)</div>
<div class="line">[Tuesday 22 March 2011] [09:48:31] &lt;cremes&gt;   sustrik: i need to run your code with the patch you supplied on my linux box</div>
<div class="line">[Tuesday 22 March 2011] [09:48:45] &lt;cremes&gt;   i ran it on my osx box and it was disappearing in the same place as before</div>
<div class="line">[Tuesday 22 March 2011] [09:48:59] &lt;cremes&gt;   (the backtrace in issue 174)</div>
<div class="line">[Tuesday 22 March 2011] [09:52:32] &lt;sustrik&gt;  i though the proposal you made is related to 174</div>
<div class="line">[Tuesday 22 March 2011] [09:54:33] &lt;cremes&gt;   sustrik: it was; based on your feedback i was assuming the memory growth was due to page fragmentation caused</div>
<div class="line">[Tuesday 22 March 2011] [09:54:37] &lt;cremes&gt;   by small memory allocations</div>
<div class="line">[Tuesday 22 March 2011] [09:55:33] &lt;sustrik&gt;  afaik most allocators have per-size caches</div>
<div class="line">[Tuesday 22 March 2011] [09:55:49] &lt;sustrik&gt;  so you have special cache for 16 byte blocks</div>
<div class="line">[Tuesday 22 March 2011] [09:56:04] &lt;sustrik&gt;  another one for 32 byte blocks etc.</div>
<div class="line">[Tuesday 22 March 2011] [09:56:06] &lt;Guthur&gt;   sustrik: you can indeed specify a buffer size</div>
<div class="line">[Tuesday 22 March 2011] [09:56:25] &lt;sustrik&gt;  that in turn leads to optimal heap utilisation</div>
<div class="line">[Tuesday 22 March 2011] [09:56:48] &lt;Guthur&gt;   I need to check some of my resources at home though to remind myself of details of IOCP</div>
<div class="line">[Tuesday 22 March 2011] [09:56:49] &lt;cremes&gt;   sustrik: okay, then i don&#8217;t understand why in the ticket you wrote that it&#8217;s due to a known problem with malloc</div>
<div class="line">[Tuesday 22 March 2011] [09:56:55] &lt;sustrik&gt;  Guthur: how do you do that?</div>
<div class="line">[Tuesday 22 March 2011] [09:57:12] &lt;Guthur&gt;   sustrik: during the read call</div>
<div class="line">[Tuesday 22 March 2011] [09:57:31] &lt;Guthur&gt;   you specify a buffer and bytestoread</div>
<div class="line">[Tuesday 22 March 2011] [09:58:15] &lt;sustrik&gt;  Guthur: i meant limiting the send buffer</div>
<div class="line">[Tuesday 22 March 2011] [09:58:33] &lt;sustrik&gt;  say, totoal amount that can be used is 64kB</div>
<div class="line">[Tuesday 22 March 2011] [09:58:55] &lt;sustrik&gt;  attempt to exceed the buffer would mean the send call would fail</div>
<div class="line">[Tuesday 22 March 2011] [09:59:07] &lt;sustrik&gt;  is there anything like that in IOCP?</div>
<div class="line">[Tuesday 22 March 2011] [09:59:33] &lt;sustrik&gt;  cremes: the problem i referred to is that processes don&#8217;t return allocated memory to the OS</div>
<div class="line">[Tuesday 22 March 2011] [10:00:13] &lt;sustrik&gt;  thus, it&#8217;s not used, but cannot be reused by a different process</div>
<div class="line">[Tuesday 22 March 2011] [10:00:54] &lt;cremes&gt;   sustrik: sure, and from my research that is due to page fragmentation caused by malloc/free called on lots of small blocks (smaller than a page)</div>
<div class="line">[Tuesday 22 March 2011] [10:01:19] &lt;sustrik&gt;  does it return allocated memory at all?</div>
<div class="line">[Tuesday 22 March 2011] [10:01:33] &lt;cremes&gt;   yes, if an entire page can be freed</div>
<div class="line">[Tuesday 22 March 2011] [10:01:42] &lt;sustrik&gt;  that&#8217;s linux?</div>
<div class="line">[Tuesday 22 March 2011] [10:01:45] &lt;cremes&gt;   yes</div>
<div class="line">[Tuesday 22 March 2011] [10:01:54] &lt;sustrik&gt;  nice</div>
<div class="line">[Tuesday 22 March 2011] [10:02:03] &lt;cremes&gt;   i got this from a few different write-ups that i read on stackoverflow and one other site</div>
<div class="line">[Tuesday 22 March 2011] [10:02:03] &lt;sustrik&gt;  iirc it wasn&#8217;t the case in the past</div>
<div class="line">[Tuesday 22 March 2011] [10:02:11] &lt;cremes&gt;   i&#8217;ll try to find them again</div>
<div class="line">[Tuesday 22 March 2011] [10:02:17] &lt;Guthur&gt;   sustrik: do you mean more than <a class="reference external" href="http://msdn.microsoft.com/en-us/library/aa365748(v=VS.85).aspx">http://msdn.microsoft.com/en-us/library/aa365748(v=VS.85).aspx</a></div>
<div class="line">[Tuesday 22 March 2011] [10:02:30] &lt;cremes&gt;   yes, it appears that was an issue with kernel 2.4 and earlier</div>
<div class="line">[Tuesday 22 March 2011] [10:02:39] &lt;cremes&gt;   apparently 2.6 resolves that issue</div>
<div class="line">[Tuesday 22 March 2011] [10:05:19] &lt;Guthur&gt;   you could presumably build some chunking mechanism on top of that with IOCP</div>
<div class="line">[Tuesday 22 March 2011] [10:05:48] &lt;Guthur&gt;   send chunk 1 with Completed send chunk 2....</div>
<div class="line">[Tuesday 22 March 2011] [10:05:53] &lt;Guthur&gt;   with/when</div>
<div class="line">[Tuesday 22 March 2011] [10:09:16] &lt;sustrik&gt;  Guthur: yes, something like that</div>
<div class="line">[Tuesday 22 March 2011] [10:09:41] &lt;sustrik&gt;  cremes: nice</div>
<div class="line">[Tuesday 22 March 2011] [10:10:09] &lt;sustrik&gt;  now, the problem occurs because of 2 specific allocations</div>
<div class="line">[Tuesday 22 March 2011] [10:10:17] &lt;sustrik&gt;  according to the OSX tool</div>
<div class="line">[Tuesday 22 March 2011] [10:10:33] &lt;sustrik&gt;  1. allocating the chunk in yqueue_t</div>
<div class="line">[Tuesday 22 March 2011] [10:10:55] &lt;sustrik&gt;  2. allocating the encoder/decoder buffers in engine</div>
<div class="line">[Tuesday 22 March 2011] [10:11:34] &lt;sustrik&gt;  so, afaiu, if the size of those allocations is a muliply of page size, the problem should go away, right?</div>
<div class="line">[Tuesday 22 March 2011] [10:11:54] &lt;sustrik&gt;  as for 2 the size of those buffers is 8kB</div>
<div class="line">[Tuesday 22 March 2011] [10:12:07] &lt;sustrik&gt;  so there&#8217;s no fragmentation issue</div>
<div class="line">[Tuesday 22 March 2011] [10:12:30] &lt;sustrik&gt;  hm, for 1. the size is 12kB</div>
<div class="line">[Tuesday 22 March 2011] [10:12:45] &lt;sustrik&gt;  so the fragmentation should not happen</div>
<div class="line">[Tuesday 22 March 2011] [10:13:08] &lt;sustrik&gt;  but given that the test is run on OSX, the allocation mechanism may be different</div>
<div class="line">[Tuesday 22 March 2011] [10:13:57] &lt;cremes&gt;   sustrik: true, but the memory growth is also reproducible on linux</div>
<div class="line">[Tuesday 22 March 2011] [10:14:04] &lt;cremes&gt;   i just don&#8217;t have a tool there to show where it&#8217;s happening</div>
<div class="line">[Tuesday 22 March 2011] [10:14:12] &lt;sustrik&gt;  :(</div>
<div class="line">[Tuesday 22 March 2011] [10:14:18] &lt;cremes&gt;   i am <em>assuming</em> it occurs in the same place on both OSes</div>
<div class="line">[Tuesday 22 March 2011] [10:14:36] &lt;sustrik&gt;  you&#8217;ll have to run the test with my patch</div>
<div class="line">[Tuesday 22 March 2011] [10:14:38] &lt;cremes&gt;   sustrik: just to confirm, you were able to reproduce this on your linux system with that example code, right?</div>
<div class="line">[Tuesday 22 March 2011] [10:14:47] &lt;sustrik&gt;  that&#8217;ll at least show whether it&#8217;s the yqueue issue</div>
<div class="line">[Tuesday 22 March 2011] [10:15:15] &lt;sustrik&gt;  yes, i think so</div>
<div class="line">[Tuesday 22 March 2011] [10:15:38] &lt;sustrik&gt;  i assumed it was process not returning memory to the OS</div>
<div class="line">[Tuesday 22 March 2011] [10:15:53] &lt;sustrik&gt;  but given the issue was solved in linux/2.6</div>
<div class="line">[Tuesday 22 March 2011] [10:15:59] &lt;sustrik&gt;  it has to be something different</div>
<div class="line">[Tuesday 22 March 2011] [10:16:43] &lt;cremes&gt;   sustrik: after i try to get this backtrace for the other issue (181) i&#8217;ll apply your patch on linux and run it</div>
<div class="line">[Tuesday 22 March 2011] [10:16:51] &lt;sustrik&gt;  thanks</div>
<div class="line">[Tuesday 22 March 2011] [10:20:46] &lt;Guthur&gt;   pieterh: with MDP do you see anything inherently wrong with having workers being other brokers</div>
<div class="line">[Tuesday 22 March 2011] [10:29:00] &lt;Guthur&gt;   maybe even have service requests routed via a URI</div>
<div class="line">[Tuesday 22 March 2011] [10:52:13] &lt;pieterh&gt;  Guthur: workers can certainly be brokers as well</div>
<div class="line">[Tuesday 22 March 2011] [10:54:25] &lt;cremes&gt;   sustrik: got a core; do you want the output from &#8216;bt&#8217; or from &#8216;thread apply all bt&#8217;?</div>
<div class="line">[Tuesday 22 March 2011] [10:54:53] &lt;sustrik&gt;  presumably the latter</div>
<div class="line">[Tuesday 22 March 2011] [10:55:12] &lt;cremes&gt;   sustrik: ok... i&#8217;ll give you both :)</div>
<div class="line">[Tuesday 22 March 2011] [10:55:27] &lt;sustrik&gt;  thx</div>
<div class="line">[Tuesday 22 March 2011] [10:55:51] &lt;cremes&gt;   sustrik: <a class="reference external" href="https://gist.github.com/881336">https://gist.github.com/881336</a></div>
<div class="line">[Tuesday 22 March 2011] [10:56:51] &lt;cremes&gt;   btw, this is off of commit 1619b3d84a04fe1886347fd83280a607</div>
<div class="line">[Tuesday 22 March 2011] [10:59:51] &lt;sustrik&gt;  cremes: the assertion happens in mutex destructor</div>
<div class="line">[Tuesday 22 March 2011] [10:59:57] &lt;sustrik&gt;  interesting</div>
<div class="line">[Tuesday 22 March 2011] [11:00:04] &lt;sustrik&gt;  do you console output?</div>
<div class="line">[Tuesday 22 March 2011] [11:00:23] &lt;sustrik&gt;  it should print out the actual error code</div>
<div class="line">[Tuesday 22 March 2011] [11:00:28] &lt;cremes&gt;   i don&#8217;t understand the question; i have a core file... is there something else you want me to look at?</div>
<div class="line">[Tuesday 22 March 2011] [11:00:33] &lt;sustrik&gt;  errno</div>
<div class="line">[Tuesday 22 March 2011] [11:00:42] &lt;cremes&gt;   p errno?</div>
<div class="line">[Tuesday 22 March 2011] [11:00:44] &lt;sustrik&gt;  yes</div>
<div class="line">[Tuesday 22 March 2011] [11:00:49] &lt;sustrik&gt;  in the asserted thread</div>
<div class="line">[Tuesday 22 March 2011] [11:01:12] &lt;sustrik&gt;  thread 1</div>
<div class="line">[Tuesday 22 March 2011] [11:01:14] &lt;sustrik&gt;  p errno</div>
<div class="line">[Tuesday 22 March 2011] [11:01:47] &lt;cremes&gt;   Cannot find thread-local variables on this target</div>
<div class="line">[Tuesday 22 March 2011] [11:01:56] &lt;sustrik&gt;  :|</div>
<div class="line">[Tuesday 22 March 2011] [11:02:19] &lt;sustrik&gt;  does the program show the console output</div>
<div class="line">[Tuesday 22 March 2011] [11:02:20] &lt;sustrik&gt;  ?</div>
<div class="line">[Tuesday 22 March 2011] [11:02:23] &lt;sustrik&gt;  stderr</div>
<div class="line">[Tuesday 22 March 2011] [11:02:25] &lt;sustrik&gt;  ?</div>
<div class="line">[Tuesday 22 March 2011] [11:02:59] &lt;sustrik&gt;  if so, the error should be visible there</div>
<div class="line">[Tuesday 22 March 2011] [11:03:30] &lt;cremes&gt;   looking...</div>
<div class="line">[Tuesday 22 March 2011] [11:03:55] &lt;sustrik&gt;  you should see the assert there</div>
<div class="line">[Tuesday 22 March 2011] [11:04:06] &lt;sustrik&gt;  the line above it should be the error</div>
<div class="line">[Tuesday 22 March 2011] [11:04:59] &lt;cremes&gt;   all it printed was the assert from socket_base.cpp</div>
<div class="line">[Tuesday 22 March 2011] [11:05:32] &lt;sustrik&gt;  the stack trace shows a different assert</div>
<div class="line">[Tuesday 22 March 2011] [11:05:42] &lt;sustrik&gt;  is that the same run?</div>
<div class="line">[Tuesday 22 March 2011] [11:05:45] &lt;cremes&gt;   let me run it again and put everything to the console instead of to files (i usually redirect the output)</div>
<div class="line">[Tuesday 22 March 2011] [11:05:54] &lt;cremes&gt;   same run</div>
<div class="line">[Tuesday 22 March 2011] [11:05:58] &lt;sustrik&gt;  strange</div>
<div class="line">[Tuesday 22 March 2011] [11:06:52] &lt;cremes&gt;   running again...</div>
<div class="line">[Tuesday 22 March 2011] [11:12:47] &lt;cremes&gt;   sustrik: all it prints is:</div>
<div class="line">[Tuesday 22 March 2011] [11:12:48] &lt;cremes&gt;   Assertion failed: sessions.empty () (socket_base.cpp:127)</div>
<div class="line">[Tuesday 22 March 2011] [11:12:56] &lt;cremes&gt;   Aborted (core dumped)</div>
<div class="line">[Tuesday 22 March 2011] [11:14:00] &lt;cremes&gt;   the thread backtraces are the same for this core</div>
<div class="line">[Tuesday 22 March 2011] [11:15:43] &lt;sustrik&gt;  that&#8217;s really strange</div>
<div class="line">[Tuesday 22 March 2011] [11:15:56] &lt;sustrik&gt;  thread 1 reports the assertion happened in mutex.hpp</div>
<div class="line">[Tuesday 22 March 2011] [11:16:06] &lt;sustrik&gt;  rather than in socket_base.cpp</div>
<div class="line">[Tuesday 22 March 2011] [11:16:21] &lt;sustrik&gt;  maybe it&#8217;s optimiser&#8217;s fault</div>
<div class="line">[Tuesday 22 March 2011] [11:16:23] &lt;cremes&gt;   i don&#8217;t have an explanation :(</div>
<div class="line">[Tuesday 22 March 2011] [11:16:35] &lt;pieterh&gt;  cremes: are you building a debug version?</div>
<div class="line">[Tuesday 22 March 2011] [11:16:36] &lt;sustrik&gt;  any chance of building 0mq with optimisations disabled?</div>
<div class="line">[Tuesday 22 March 2011] [11:16:45] &lt;cremes&gt;   pieterh: yes, ./configure &#8211;enable-debug</div>
<div class="line">[Tuesday 22 March 2011] [11:16:53] &lt;cremes&gt;   sustrik: yes</div>
<div class="line">[Tuesday 22 March 2011] [11:17:11] &lt;sustrik&gt;  &#8211;enable-debug should turn optimisations off</div>
<div class="line">[Tuesday 22 March 2011] [11:17:16] &lt;sustrik&gt;  (-O0)</div>
<div class="line">[Tuesday 22 March 2011] [11:17:42] &lt;cremes&gt;   let me rebuild</div>
<div class="line">[Tuesday 22 March 2011] [11:17:48] &lt;cremes&gt;   i&#8217;ll make clean first...</div>
<div class="line">[Tuesday 22 March 2011] [11:18:03] &lt;sustrik&gt;  cremes: wait a sec</div>
<div class="line">[Tuesday 22 March 2011] [11:18:16] &lt;sustrik&gt;  maybe it makes more sense to try to figure out what&#8217;s failing</div>
<div class="line">[Tuesday 22 March 2011] [11:18:22] &lt;sustrik&gt;  are you using identities?</div>
<div class="line">[Tuesday 22 March 2011] [11:18:53] &lt;cremes&gt;   oops, too late</div>
<div class="line">[Tuesday 22 March 2011] [11:18:58] &lt;cremes&gt;   yes, i am using identities</div>
<div class="line">[Tuesday 22 March 2011] [11:19:40] &lt;sustrik&gt;  the failing socket seems to be xreq, right?</div>
<div class="line">[Tuesday 22 March 2011] [11:19:54] &lt;cremes&gt;   yes</div>
<div class="line">[Tuesday 22 March 2011] [11:20:19] &lt;sustrik&gt;  any chance it gets connected to two peers that happen to have the same identity</div>
<div class="line">[Tuesday 22 March 2011] [11:20:27] &lt;sustrik&gt;  one of them via connect, other one via bind?</div>
<div class="line">[Tuesday 22 March 2011] [11:20:42] &lt;cremes&gt;   let me take a quick look at the code; i want to say &#8220;no&#8221; but let me verify</div>
<div class="line">[Tuesday 22 March 2011] [11:21:02] &lt;sustrik&gt;  simpler question: do you bind or connect the xreq socket; or both?</div>
<div class="line">[Tuesday 22 March 2011] [11:22:33] &lt;cremes&gt;   hard to say</div>
<div class="line">[Tuesday 22 March 2011] [11:22:41] &lt;cremes&gt;   if the xreq is part of a QUEUE device, then it&#8217;s binding</div>
<div class="line">[Tuesday 22 March 2011] [11:22:46] &lt;cremes&gt;   otherwise all other sockets connect</div>
<div class="line">[Tuesday 22 March 2011] [11:23:02] &lt;sustrik&gt;  never both on the same socket, right?</div>
<div class="line">[Tuesday 22 March 2011] [11:23:08] &lt;cremes&gt;   correct</div>
<div class="line">[Tuesday 22 March 2011] [11:24:49] &lt;sustrik&gt;  hm, maybe the socket_base_t happens to get destructed twice</div>
<div class="line">[Tuesday 22 March 2011] [11:24:59] &lt;sustrik&gt;  is it possible to add printf&#8217;s to your program?</div>
<div class="line">[Tuesday 22 March 2011] [11:25:10] &lt;cremes&gt;   sustrik: yes</div>
<div class="line">[Tuesday 22 March 2011] [11:25:30] &lt;cremes&gt;   you want them added to calls to zmq_close() ?</div>
<div class="line">[Tuesday 22 March 2011] [11:25:34] &lt;sustrik&gt;  something like this:</div>
<div class="line">[Tuesday 22 March 2011] [11:25:55] &lt;sustrik&gt;  printf (&#8220;alloc %pn&#8221;, (void*) this);</div>
<div class="line">[Tuesday 22 March 2011] [11:26:07] &lt;sustrik&gt;  in socket_base_t constructor</div>
<div class="line">[Tuesday 22 March 2011] [11:26:09] &lt;sustrik&gt;  and</div>
<div class="line">[Tuesday 22 March 2011] [11:26:17] &lt;sustrik&gt;  printf (&#8220;dealloc %pn&#8221;, (void*) this);</div>
<div class="line">[Tuesday 22 March 2011] [11:26:21] &lt;sustrik&gt;  in the destructor</div>
<div class="line">[Tuesday 22 March 2011] [11:26:41] &lt;sustrik&gt;  that should show us whether the destructor is called twice for the same object</div>
<div class="line">[Tuesday 22 March 2011] [11:27:17] &lt;cremes&gt;   in the destructor, do you want this printf called first or last?</div>
<div class="line">[Tuesday 22 March 2011] [11:27:25] &lt;cremes&gt;   presumably first</div>
<div class="line">[Tuesday 22 March 2011] [11:27:43] &lt;sustrik&gt;  first</div>
<div class="line">[Tuesday 22 March 2011] [11:28:40] &lt;cremes&gt;   running...</div>
<div class="line">[Tuesday 22 March 2011] [11:28:55] &lt;cremes&gt;   hmmm, i should have separated that stuff out to stderr</div>
<div class="line">[Tuesday 22 March 2011] [11:31:59] &lt;cremes&gt;   how do i redirect stdout and stderr to separate files in bash?</div>
<div class="line">[Tuesday 22 March 2011] [11:33:26] &lt;cremes&gt;   figured it out</div>
<div class="line">[Tuesday 22 March 2011] [11:33:27] &lt;pieterh&gt;  cremes: someproc 2&gt; stderr.log</div>
<div class="line">[Tuesday 22 March 2011] [11:33:30] &lt;cremes&gt;   running...</div>
<div class="line">[Tuesday 22 March 2011] [11:38:31] &lt;mikko&gt;    pieterh: did you merge the pull req?</div>
<div class="line">[Tuesday 22 March 2011] [11:38:36] &lt;mikko&gt;    there is prolly more coming soon</div>
<div class="line">[Tuesday 22 March 2011] [11:38:43] &lt;mikko&gt;    ([zeromq-dev] ZMQ 2.1.3 w/OpenPGM Assertion on pgm_rate_check2())</div>
<div class="line">[Tuesday 22 March 2011] [11:38:51] &lt;pieterh&gt;  mikko: you mean the autoconf fix for OpenPGM in 2.1?</div>
<div class="line">[Tuesday 22 March 2011] [11:38:58] &lt;mikko&gt;    y</div>
<div class="line">[Tuesday 22 March 2011] [11:39:09] &lt;mikko&gt;    im thinking this atm</div>
<div class="line">[Tuesday 22 March 2011] [11:39:10] &lt;pieterh&gt;  hmm, did you see my email about sending patches instead?</div>
<div class="line">[Tuesday 22 March 2011] [11:39:14] &lt;pieterh&gt;  I think it&#8217;s going to be simpler</div>
<div class="line">[Tuesday 22 March 2011] [11:39:37] &lt;pieterh&gt;  pubsub instead of reqrep</div>
<div class="line">[Tuesday 22 March 2011] [11:39:50] &lt;mikko&gt;    &#8220;There is a smarter way to do this, and I think it is:&#8221;</div>
<div class="line">[Tuesday 22 March 2011] [11:39:53] &lt;pieterh&gt;  two subscribers (martin, myself), one publisher (you)</div>
<div class="line">[Tuesday 22 March 2011] [11:40:25] &lt;mikko&gt;    i will update a patch and send to ML</div>
<div class="line">[Tuesday 22 March 2011] [11:40:31] &lt;pieterh&gt;  that&#8217;s best IMO</div>
<div class="line">[Tuesday 22 March 2011] [11:41:11] &lt;pieterh&gt;  somewhere there&#8217;s a magic git incantation to pull a commit from a random git, but I don&#8217;t know it</div>
<div class="line">[Tuesday 22 March 2011] [11:41:34] &lt;mikko&gt;    what do you mean?</div>
<div class="line">[Tuesday 22 March 2011] [11:41:41] &lt;mikko&gt;    git is built on that sort of thing</div>
<div class="line">[Tuesday 22 March 2011] [11:41:49] &lt;sustrik&gt;  cherry-pick?</div>
<div class="line">[Tuesday 22 March 2011] [11:41:52] &lt;mikko&gt;    you could even pull changes from my personal repo</div>
<div class="line">[Tuesday 22 March 2011] [11:42:04] &lt;mikko&gt;    and if i was privileged to i could push to your home machine</div>
<div class="line">[Tuesday 22 March 2011] [11:42:38] &lt;cremes&gt;   sustrik: with a confirmed debug build, the backtraces are different now</div>
<div class="line">[Tuesday 22 March 2011] [11:42:41] &lt;cremes&gt;   sustrik: <a class="reference external" href="https://gist.github.com/881439">https://gist.github.com/881439</a></div>
<div class="line">[Tuesday 22 March 2011] [11:42:46] &lt;cremes&gt;   thread 1 and thread 19 look relevant</div>
<div class="line">[Tuesday 22 March 2011] [11:42:54] &lt;cremes&gt;   i still can&#8217;t print errno</div>
<div class="line">[Tuesday 22 March 2011] [11:44:09] &lt;sustrik&gt;  never mind, this is the assert (empty) thing</div>
<div class="line">[Tuesday 22 March 2011] [11:44:17] &lt;sustrik&gt;  what about the output?</div>
<div class="line">[Tuesday 22 March 2011] [11:44:22] &lt;pieterh&gt;  mikko, ok, so how do we do this without using github&#8217;s pull request?</div>
<div class="line">[Tuesday 22 March 2011] [11:44:27] &lt;cremes&gt;   lots of alloc/dealloc messages</div>
<div class="line">[Tuesday 22 March 2011] [11:44:41] &lt;pieterh&gt;  e.g. create an issue pointing to a remote git/commit</div>
<div class="line">[Tuesday 22 March 2011] [11:45:02] &lt;mikko&gt;    pieterh: or mailing list?</div>
<div class="line">[Tuesday 22 March 2011] [11:45:11] &lt;pieterh&gt;  let&#8217;s work it out here...</div>
<div class="line">[Tuesday 22 March 2011] [11:45:19] &lt;sustrik&gt;  cremes: check for 0x7f1a582a4ea0</div>
<div class="line">[Tuesday 22 March 2011] [11:45:24] &lt;pieterh&gt;  what git commands do I need to use to pull one commit from your git</div>
<div class="line">[Tuesday 22 March 2011] [11:45:47] &lt;cremes&gt;   sustrik: 1 alloc, 1 dealloc</div>
<div class="line">[Tuesday 22 March 2011] [11:46:05] &lt;cremes&gt;   sustrik: however, that is the <em>last</em> dealloc printed</div>
<div class="line">[Tuesday 22 March 2011] [11:46:06] &lt;mikko&gt;    git remote add mikko &lt;url to my repo&gt;</div>
<div class="line">[Tuesday 22 March 2011] [11:46:15] &lt;pieterh&gt;  ok</div>
<div class="line">[Tuesday 22 March 2011] [11:46:16] &lt;sustrik&gt;  and the printf is at the beginning of the destructor, right?</div>
<div class="line">[Tuesday 22 March 2011] [11:46:17] &lt;mikko&gt;    git fetch mikko</div>
<div class="line">[Tuesday 22 March 2011] [11:46:22] &lt;mikko&gt;    then check the hash of the commit</div>
<div class="line">[Tuesday 22 March 2011] [11:46:23] &lt;cremes&gt;   correct</div>
<div class="line">[Tuesday 22 March 2011] [11:46:24] &lt;pieterh&gt;  git fetch &#8211;no-tags, at least</div>
<div class="line">[Tuesday 22 March 2011] [11:46:28] &lt;mikko&gt;    and cherry-pick it</div>
<div class="line">[Tuesday 22 March 2011] [11:46:37] &lt;mikko&gt;    i think that should do it</div>
<div class="line">[Tuesday 22 March 2011] [11:46:50] &lt;sustrik&gt;  then it&#8217;s some other problem...</div>
<div class="line">[Tuesday 22 March 2011] [11:46:50] &lt;cremes&gt;   sustrik: line 792 is the first line of the destructor</div>
<div class="line">[Tuesday 22 March 2011] [11:47:12] &lt;pieterh&gt;  git fetch won&#8217;t make a mess of your target git?</div>
<div class="line">[Tuesday 22 March 2011] [11:47:13] &lt;cremes&gt;   sustrik: i grep&#8217;ed all of the dealloc lines to their own file &#8216;z2&#8217;</div>
<div class="line">[Tuesday 22 March 2011] [11:47:23] &lt;sustrik&gt;  792?</div>
<div class="line">[Tuesday 22 March 2011] [11:47:27] &lt;sustrik&gt;  what file?</div>
<div class="line">[Tuesday 22 March 2011] [11:47:30] &lt;cremes&gt;   sustrik: then ran:  wc -l z2; sort -u z2 | wc -l</div>
<div class="line">[Tuesday 22 March 2011] [11:47:35] &lt;sustrik&gt;  socket_base_t?</div>
<div class="line">[Tuesday 22 March 2011] [11:47:36] &lt;cremes&gt;   socket_base.cpp</div>
<div class="line">[Tuesday 22 March 2011] [11:47:48] &lt;mikko&gt;    pieterh: git-fetch - Download objects and refs from another repository</div>
<div class="line">[Tuesday 22 March 2011] [11:47:54] &lt;mikko&gt;    pieterh: nope</div>
<div class="line">[Tuesday 22 March 2011] [11:47:56] &lt;sustrik&gt;  cremes: what version?</div>
<div class="line">[Tuesday 22 March 2011] [11:48:02] &lt;sustrik&gt;  my socket_base.cpp ends at 790</div>
<div class="line">[Tuesday 22 March 2011] [11:48:22] &lt;pieterh&gt;  mikko: ok, I like cherry-pick, it&#8217;s how I pull patches from sustrik</div>
<div class="line">[Tuesday 22 March 2011] [11:48:33] &lt;cremes&gt;   sustrik: oops, sorry, misread the vi output; line 124 of 792 (i added two printfs)</div>
<div class="line">[Tuesday 22 March 2011] [11:48:40] &lt;pieterh&gt;  but you have to do &#8216;git fetch &#8211;no-tags whatever&#8217; to avoid polluting your home git</div>
<div class="line">[Tuesday 22 March 2011] [11:48:56] &lt;sustrik&gt;  cremes: ok</div>
<div class="line">[Tuesday 22 March 2011] [11:48:58] &lt;pieterh&gt;  sustrik: do you want to try cherry-pick from mikko&#8217;s git?</div>
<div class="line">[Tuesday 22 March 2011] [11:49:19] &lt;sustrik&gt;  i want a patch on the ML</div>
<div class="line">[Tuesday 22 March 2011] [11:49:23] &lt;sustrik&gt;  that&#8217;s the process</div>
<div class="line">[Tuesday 22 March 2011] [11:49:35] &lt;cremes&gt;   sustrik: anyway, by removing duplicate dealloc prints using &#8216;sort -u&#8217; it looks like 180 sockets are dealloc&#8217;ed twice</div>
<div class="line">[Tuesday 22 March 2011] [11:49:36] &lt;pieterh&gt;  sustrik: you don&#8217;t send me patches via the ML</div>
<div class="line">[Tuesday 22 March 2011] [11:49:43] &lt;sustrik&gt;  i should</div>
<div class="line">[Tuesday 22 March 2011] [11:49:43] &lt;pieterh&gt;  so the process isn&#8217;t symmetric now</div>
<div class="line">[Tuesday 22 March 2011] [11:49:51] &lt;pieterh&gt;  perhaps</div>
<div class="line">[Tuesday 22 March 2011] [11:50:04] &lt;pieterh&gt;  sending me a commit tag is much less work for you</div>
<div class="line">[Tuesday 22 March 2011] [11:50:08] &lt;pieterh&gt;  and also easier for me</div>
<div class="line">[Tuesday 22 March 2011] [11:50:31] &lt;pieterh&gt;  if you send the URI to the commit, it&#8217;s as good as a patch</div>
<div class="line">[Tuesday 22 March 2011] [11:50:36] &lt;sustrik&gt;  that&#8217;s good for backporting</div>
<div class="line">[Tuesday 22 March 2011] [11:50:36] &lt;pieterh&gt;  everyone who cares can review it</div>
<div class="line">[Tuesday 22 March 2011] [11:50:47] &lt;pieterh&gt;  here we&#8217;re porting in all directions, no back or fwd</div>
<div class="line">[Tuesday 22 March 2011] [11:50:49] &lt;sustrik&gt;  it&#8217;s only a reference to what has to be backported</div>
<div class="line">[Tuesday 22 March 2011] [11:50:57] &lt;pieterh&gt;  nope, no special cases please</div>
<div class="line">[Tuesday 22 March 2011] [11:50:59] &lt;sustrik&gt;  with new functionality you want a full patch</div>
<div class="line">[Tuesday 22 March 2011] [11:51:26] &lt;pieterh&gt;  it should be a single process between any two gits</div>
<div class="line">[Tuesday 22 March 2011] [11:51:53] &lt;pieterh&gt;  github pull requests are eliminated because they only work between forks</div>
<div class="line">[Tuesday 22 March 2011] [11:52:03] &lt;sustrik&gt;  there has to be an entry point</div>
<div class="line">[Tuesday 22 March 2011] [11:52:08] &lt;pieterh&gt;  entry point?</div>
<div class="line">[Tuesday 22 March 2011] [11:52:18] &lt;sustrik&gt;  the place where patch enters the ecosystem</div>
<div class="line">[Tuesday 22 March 2011] [11:52:23] &lt;pieterh&gt;  one always addresses a patch/commit to the author of the target git</div>
<div class="line">[Tuesday 22 March 2011] [11:52:33] &lt;pieterh&gt;  entry point can be ML, that&#8217;s excellent</div>
<div class="line">[Tuesday 22 March 2011] [11:52:38] &lt;pieterh&gt;  it&#8217;s ideal for this</div>
<div class="line">[Tuesday 22 March 2011] [11:52:41] &lt;sustrik&gt;  yup</div>
<div class="line">[Tuesday 22 March 2011] [11:52:46] &lt;pieterh&gt;  but signed patches are extra effort</div>
<div class="line">[Tuesday 22 March 2011] [11:52:59] &lt;pieterh&gt;  and we can do it better</div>
<div class="line">[Tuesday 22 March 2011] [11:53:19] &lt;pieterh&gt;  i think, anyhow, and I&#8217;m sure it should be orthogonal for any two gits</div>
<div class="line">[Tuesday 22 March 2011] [11:53:35] &lt;pieterh&gt;  i.e. if you want to send a patch to mikko, same process</div>
<div class="line">[Tuesday 22 March 2011] [11:53:53] &lt;sustrik&gt;  mikko doesn&#8217;t care about sign-offs</div>
<div class="line">[Tuesday 22 March 2011] [11:53:59] &lt;sustrik&gt;  as it&#8217;s his private git</div>
<div class="line">[Tuesday 22 March 2011] [11:54:06] &lt;pieterh&gt;  that&#8217;s a separate issue</div>
<div class="line">[Tuesday 22 March 2011] [11:54:14] &lt;pieterh&gt;  signed off or not, that&#8217;s QC on the patch or commit</div>
<div class="line">[Tuesday 22 March 2011] [11:54:52] &lt;pieterh&gt;  I&#8217;d like a single process for all of us, no special cases</div>
<div class="line">[Tuesday 22 March 2011] [11:54:53] &lt;mikko&gt;    what about CLA?</div>
<div class="line">[Tuesday 22 March 2011] [11:54:56] &lt;mikko&gt;    too complicated?</div>
<div class="line">[Tuesday 22 March 2011] [11:54:58] &lt;pieterh&gt;  CLA?</div>
<div class="line">[Tuesday 22 March 2011] [11:55:02] &lt;pieterh&gt;  way too complex</div>
<div class="line">[Tuesday 22 March 2011] [11:55:04] &lt;pieterh&gt;  by 100x</div>
<div class="line">[Tuesday 22 March 2011] [11:55:11] &lt;mikko&gt;    contributor license agreement</div>
<div class="line">[Tuesday 22 March 2011] [11:55:13] &lt;mikko&gt;    like apache etc do</div>
<div class="line">[Tuesday 22 March 2011] [11:55:22] &lt;pieterh&gt;  no way, dead body over, etc.</div>
<div class="line">[Tuesday 22 March 2011] [11:55:27] &lt;sustrik&gt;  sign-off is simpler imo</div>
<div class="line">[Tuesday 22 March 2011] [11:55:39] &lt;pieterh&gt;  it creates <em>huge</em> management issues and individual developers hate it to the point of not contributing</div>
<div class="line">[Tuesday 22 March 2011] [11:56:05] &lt;pieterh&gt;  we switched to co-owned code and signoff last year, it&#8217;s superior in every sense</div>
<div class="line">[Tuesday 22 March 2011] [11:56:21] &lt;pieterh&gt;  this is not relevant to the thread however</div>
<div class="line">[Tuesday 22 March 2011] [11:56:33] &lt;pieterh&gt;  cherry-picking is very simple for both parties</div>
<div class="line">[Tuesday 22 March 2011] [11:56:47] &lt;mikko&gt;    pieterh: we were a bit too drunk to discuss this properly last weds</div>
<div class="line">[Tuesday 22 March 2011] [11:56:59] &lt;pieterh&gt;  mikko: drunk? I&#8217;m Scottish, we don&#8217;t get drunk</div>
<div class="line">[Tuesday 22 March 2011] [11:57:09] &lt;pieterh&gt;  oh, hang on, yes we do... but it was English beer, doesn&#8217;t count</div>
<div class="line">[Tuesday 22 March 2011] [11:57:41] &lt;pieterh&gt;  sustrik: I&#8217;m not sure cherry-picking conforms to signing off, that&#8217;s all</div>
<div class="line">[Tuesday 22 March 2011] [11:58:06] &lt;pieterh&gt;  but it has to, of course</div>
<div class="line">[Tuesday 22 March 2011] [11:58:19] &lt;mikko&gt;    can you not sign a commit?</div>
<div class="line">[Tuesday 22 March 2011] [11:58:19] &lt;pieterh&gt;  pulling code from a public git means it&#8217;s by definition signed off</div>
<div class="line">[Tuesday 22 March 2011] [11:58:23] &lt;pieterh&gt;  you don&#8217;t need to</div>
<div class="line">[Tuesday 22 March 2011] [11:58:38] &lt;pieterh&gt;  once you commit &amp; push to a git, you license the code under whatever, LGPL etc.</div>
<div class="line">[Tuesday 22 March 2011] [11:59:08] &lt;pieterh&gt;  this is why pull requests work</div>
<div class="line">[Tuesday 22 March 2011] [11:59:24] &lt;pieterh&gt;  but they are crippled for general use</div>
<div class="line">[Tuesday 22 March 2011] [11:59:55] &lt;pieterh&gt;  sustrik: allow me to make a short proposal on the list, OK?</div>
<div class="line">[Tuesday 22 March 2011] [12:00:01] &lt;sustrik&gt;  sure</div>
<div class="line">[Tuesday 22 March 2011] [12:00:07] &lt;pieterh&gt;  thanks</div>
<div class="line">[Tuesday 22 March 2011] [12:00:15] &lt;pieterh&gt;  BTW the new C API is almost working</div>
<div class="line">[Tuesday 22 March 2011] [12:00:35] &lt;pieterh&gt;  it does everything I was asking for, e.g. automatic close of sockets, message reuse, etc.</div>
<div class="line">[Tuesday 22 March 2011] [12:00:51] &lt;pieterh&gt;  nicely emulates 2.0 semantics on termination :-)</div>
<div class="line">[Tuesday 22 March 2011] [12:01:23] &lt;sustrik&gt;  goodo</div>
<div class="line">[Tuesday 22 March 2011] [12:01:33] &lt;cremes&gt;   sustrik: i applied your patch for issue 174 and ran your minimal test case (also in that issue)</div>
<div class="line">[Tuesday 22 March 2011] [12:01:41] &lt;cremes&gt;   sustrik: shall i email you the output?</div>
<div class="line">[Tuesday 22 March 2011] [12:01:46] &lt;cremes&gt;   it&#8217;s too big to pastie</div>
<div class="line">[Tuesday 22 March 2011] [12:04:04] &lt;Guthur&gt;   pieterh: you&#8217;re scottish?</div>
<div class="line">[Tuesday 22 March 2011] [12:04:15] &lt;pieterh&gt;  Guthur: half Scottish, half Belgian...</div>
<div class="line">[Tuesday 22 March 2011] [12:04:24] &lt;pieterh&gt;  born somewhere in the middle of the North Sea</div>
<div class="line">[Tuesday 22 March 2011] [12:06:22] &lt;Guthur&gt;   one of those water births then</div>
<div class="line">[Tuesday 22 March 2011] [12:07:23] &lt;pieterh&gt;  lol</div>
<div class="line">[Tuesday 22 March 2011] [12:08:53] &lt;Guthur&gt;   belgians aren&#8217;t renown for their seafaring as well</div>
<div class="line">[Tuesday 22 March 2011] [12:09:01] &lt;Guthur&gt;   I hear they don&#8217;t have much of a navy</div>
<div class="line">[Tuesday 22 March 2011] [12:10:45] &lt;pieterh&gt;  my great-great grandfather was hung for being a pirate</div>
<div class="line">[Tuesday 22 March 2011] [12:11:28] &lt;sustrik&gt;  cremes: did it drop to 0?</div>
<div class="line">[Tuesday 22 March 2011] [12:11:55] &lt;cremes&gt;   sustrik: no, it didn&#8217;t; i just sent you the output in an email with attachment</div>
<div class="line">[Tuesday 22 March 2011] [12:12:03] &lt;sustrik&gt;  ok</div>
<div class="line">[Tuesday 22 March 2011] [12:13:17] &lt;sustrik&gt;  cremes: it&#8217;s looks like it&#8217;s dropping</div>
<div class="line">[Tuesday 22 March 2011] [12:13:24] &lt;sustrik&gt;  see the end of the file</div>
<div class="line">[Tuesday 22 March 2011] [12:13:58] &lt;sustrik&gt;  if you let it run a bit longet it would probably get to 0</div>
<div class="line">[Tuesday 22 March 2011] [12:14:13] &lt;sustrik&gt;  longer*</div>
<div class="line">[Tuesday 22 March 2011] [12:14:57] &lt;cremes&gt;   sustrik: i let it run for 5 minutes... it didn&#8217;t appear to be dropping anymore</div>
<div class="line">[Tuesday 22 March 2011] [12:15:06] &lt;cremes&gt;   sustrik: i&#8217;ll let it go for 20m and see what happens</div>
<div class="line">[Tuesday 22 March 2011] [12:15:30] &lt;sustrik&gt;  it seems like it was terminated in the middle of the process of dropping</div>
<div class="line">[Tuesday 22 March 2011] [12:15:34] &lt;sustrik&gt;  see the last line</div>
<div class="line">[Tuesday 22 March 2011] [12:15:44] &lt;sustrik&gt;  it&#8217;s cut in the middle of output</div>
<div class="line">[Tuesday 22 March 2011] [12:16:04] &lt;sustrik&gt;  356 355 354 35</div>
<div class="line">[Tuesday 22 March 2011] [12:16:06] &lt;cremes&gt;   sustrik: i think that&#8217;s from buffered output</div>
<div class="line">[Tuesday 22 March 2011] [12:16:17] &lt;cremes&gt;   i was tailing the log file and it stopped there</div>
<div class="line">[Tuesday 22 March 2011] [12:16:20] &lt;sustrik&gt;  ah</div>
<div class="line">[Tuesday 22 March 2011] [12:16:28] &lt;sustrik&gt;  anyway, it dropped almost to zero</div>
<div class="line">[Tuesday 22 March 2011] [12:16:39] &lt;sustrik&gt;  up to 30,000</div>
<div class="line">[Tuesday 22 March 2011] [12:16:51] &lt;sustrik&gt;  then back to 353</div>
<div class="line">[Tuesday 22 March 2011] [12:17:18] &lt;sustrik&gt;  the leak is either elsewhere</div>
<div class="line">[Tuesday 22 March 2011] [12:17:28] &lt;sustrik&gt;  or it&#8217;s process not returning memory to the OS</div>
<div class="line">[Tuesday 22 March 2011] [12:18:19] &lt;cremes&gt;   sustrik: i&#8217;ll let it sit for a while... i just saw it go from 1 to 3200 and now it&#8217;s down to 310</div>
<div class="line">[Tuesday 22 March 2011] [12:18:26] &lt;cremes&gt;   but it&#8217;s not printing anything anymore</div>
<div class="line">[Tuesday 22 March 2011] [12:18:40] &lt;sustrik&gt;  hm</div>
<div class="line">[Tuesday 22 March 2011] [12:18:44] &lt;cremes&gt;   if it&#8217;s &#8216;cut off&#8217; due to stdout buffering, hitting ctrl-c ought to flush that buffer</div>
<div class="line">[Tuesday 22 March 2011] [12:19:02] &lt;sustrik&gt;  maybe a problem with the buffering itself?</div>
<div class="line">[Tuesday 22 March 2011] [12:19:27] &lt;sustrik&gt;  anyway, i&#8217;ve used simple non-buffered console</div>
<div class="line">[Tuesday 22 March 2011] [12:19:39] &lt;sustrik&gt;  and i saw the number of chunks dropping to 0</div>
<div class="line">[Tuesday 22 March 2011] [12:19:56] &lt;cremes&gt;   i don&#8217;t know how to get an unbuffered xterm going</div>
<div class="line">[Tuesday 22 March 2011] [12:20:12] &lt;sustrik&gt;  cremes: i don&#8217;t think it matters</div>
<div class="line">[Tuesday 22 March 2011] [12:20:18] &lt;cremes&gt;   i should probably add an explicit flush</div>
<div class="line">[Tuesday 22 March 2011] [12:20:28] &lt;sustrik&gt;  350 chunks won&#8217;t account for all the allocated memory you see</div>
<div class="line">[Tuesday 22 March 2011] [12:20:30] &lt;sustrik&gt;  right?</div>
<div class="line">[Tuesday 22 March 2011] [12:20:34] &lt;sustrik&gt;  1 chunk = 12kb</div>
<div class="line">[Tuesday 22 March 2011] [12:20:34] &lt;mikko&gt;    fflush (stdout);</div>
<div class="line">[Tuesday 22 March 2011] [12:20:48] &lt;sustrik&gt;  x350 = 4.2MB</div>
<div class="line">[Tuesday 22 March 2011] [12:20:58] &lt;cremes&gt;   sustrik: do those chunks contain message data?</div>
<div class="line">[Tuesday 22 March 2011] [12:21:16] &lt;sustrik&gt;  how large is your message?</div>
<div class="line">[Tuesday 22 March 2011] [12:21:19] &lt;sustrik&gt;  8 bytes?</div>
<div class="line">[Tuesday 22 March 2011] [12:21:30] &lt;cremes&gt;   your test case was using a 20byte message</div>
<div class="line">[Tuesday 22 March 2011] [12:21:36] &lt;sustrik&gt;  ok</div>
<div class="line">[Tuesday 22 March 2011] [12:21:43] &lt;sustrik&gt;  then the chunks contain message data</div>
<div class="line">[Tuesday 22 March 2011] [12:23:28] &lt;cremes&gt;   i added fflush() and am rerunning; we&#8217;ll see if that makes a difference</div>
<div class="line">[Tuesday 22 March 2011] [12:23:35] &lt;cremes&gt;   it did; count went to 0</div>
<div class="line">[Tuesday 22 March 2011] [12:23:50] &lt;cremes&gt;   resident memory is still inflated though</div>
<div class="line">[Tuesday 22 March 2011] [12:24:14] &lt;sustrik&gt;  the next step would be to replace all the mallocs and frees and news and deletes</div>
<div class="line">[Tuesday 22 March 2011] [12:24:28] &lt;sustrik&gt;  by something that would track amount of memory allocated</div>
<div class="line">[Tuesday 22 March 2011] [12:24:46] &lt;cremes&gt;   sustrik: i think it&#8217;s easier for me to just restart my applications every 48 hours</div>
<div class="line">[Tuesday 22 March 2011] [12:24:49] &lt;cremes&gt;   to free up swap</div>
<div class="line">[Tuesday 22 March 2011] [12:25:02] &lt;sustrik&gt;  hm</div>
<div class="line">[Tuesday 22 March 2011] [12:25:31] &lt;sustrik&gt;  let&#8217;s keep the issue open then</div>
<div class="line">[Tuesday 22 March 2011] [12:25:37] &lt;sustrik&gt;  when i get some time</div>
<div class="line">[Tuesday 22 March 2011] [12:25:42] &lt;cremes&gt;   ok</div>
<div class="line">[Tuesday 22 March 2011] [12:25:50] &lt;cremes&gt;   i&#8217;ll add an update with my findings</div>
<div class="line">[Tuesday 22 March 2011] [12:25:55] &lt;spht&gt;     Does zmq not exit in its SIGINT handler? Can&#8217;t SIGINT to kill my script using the python binding..</div>
<div class="line">[Tuesday 22 March 2011] [12:26:05] &lt;sustrik&gt;  i&#8217;ll try to check whether the memory is held by 0mq or glibc</div>
<div class="line">[Tuesday 22 March 2011] [12:27:19] &lt;sustrik&gt;  spht: what version of 0mq are you using?</div>
<div class="line">[Tuesday 22 March 2011] [12:27:54] &lt;spht&gt;     sustrik:  Python module version is 2.0.10</div>
<div class="line">[Tuesday 22 March 2011] [12:28:43] &lt;sustrik&gt;  there used to be a problem with SIGINT in old versions, let me check...</div>
<div class="line">[Tuesday 22 March 2011] [12:29:22] &lt;cremes&gt;   spht: this was fixed in the 2.1 branches</div>
<div class="line">[Tuesday 22 March 2011] [12:29:41] &lt;cremes&gt;   spht: time to upgrade</div>
<div class="line">[Tuesday 22 March 2011] [12:29:44] &lt;spht&gt;     cremes: sustrik: Ahht thanks! I&#8217;ll go upgrade ASAP :)</div>
<div class="line">[Tuesday 22 March 2011] [12:29:48] &lt;ianbarber&gt;        mikko: about?</div>
<div class="line">[Tuesday 22 March 2011] [12:29:51] &lt;mikko&gt;    ianbarber: yes</div>
<div class="line">[Tuesday 22 March 2011] [12:29:55] &lt;mikko&gt;    bam!</div>
<div class="line">[Tuesday 22 March 2011] [12:31:02] &lt;ianbarber&gt;        bam!</div>
<div class="line">[Tuesday 22 March 2011] [12:31:10] &lt;ianbarber&gt;        so, I was translating a pieterh example</div>
<div class="line">[Tuesday 22 March 2011] [12:31:16] &lt;ianbarber&gt;        which measures round trip speed</div>
<div class="line">[Tuesday 22 March 2011] [12:31:48] &lt;ianbarber&gt;        it starts a client, worker and broker, and tries doing send() recv() 10000 time and then send() 10000 and recv() 10000</div>
<div class="line">[Tuesday 22 March 2011] [12:32:01] &lt;ianbarber&gt;        to compare the speed of waiting for a response versus async</div>
<div class="line">[Tuesday 22 March 2011] [12:32:24] &lt;ianbarber&gt;        in the c version I get ~6k/s for the first, around 50k/s for the second</div>
<div class="line">[Tuesday 22 March 2011] [12:32:32] &lt;ianbarber&gt;        in the PHP i get ~6k/s for both</div>
<div class="line">[Tuesday 22 March 2011] [12:33:37] &lt;mikko&gt;    that&#8217;s interesting</div>
<div class="line">[Tuesday 22 March 2011] [12:33:40] &lt;ianbarber&gt;        i thought it might be because PHP was doing a msg destroy after each one, but taking that out of the c version didn&#8217;t affect it</div>
<div class="line">[Tuesday 22 March 2011] [12:34:03] &lt;mikko&gt;    probably need to run with a profiler to see</div>
<div class="line">[Tuesday 22 March 2011] [12:35:16] &lt;ianbarber&gt;        yeah, i guess</div>
<div class="line">[Tuesday 22 March 2011] [13:01:46] &lt;pieterh&gt;  ianbarber: destroying messages, allocs, etc. don&#8217;t make that much impact</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="2011-December.html"
                        title="previous chapter">2011-December</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/2011-March.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="2011-December.html" title="2011-December"
             >previous</a> |</li>
        <li><a href="index.html">ZeroMq IRC Log v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Peter Alexander.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>