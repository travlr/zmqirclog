

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2011-February &mdash; ZeroMq IRC Log v0.1 documentation</title>
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="ZeroMq IRC Log v0.1 documentation" href="index.html" />
    <link rel="next" title="2011-March" href="2011-March.html" />
    <link rel="prev" title="2011-January" href="2011-January.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="2011-March.html" title="2011-March"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="2011-January.html" title="2011-January"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">ZeroMq IRC Log v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="february">
<h1>2011-February<a class="headerlink" href="#february" title="Permalink to this headline">Â¶</a></h1>
<div class="line-block">
<div class="line">[Tuesday 01 February 2011] [02:23:00] &lt;stockMQ&gt;       but the i need to copy the protobuf message to a struct and write the struct to a file..</div>
<div class="line">[Tuesday 01 February 2011] [02:23:31] &lt;stockMQ&gt;       I need to do this because there are other applications consuming the file and they expect a struct</div>
<div class="line">[Tuesday 01 February 2011] [02:24:02] &lt;stockMQ&gt;       right now i copy each field of the message to the corresponding field of the buffer</div>
<div class="line">[Tuesday 01 February 2011] [02:24:22] &lt;stockMQ&gt;       Is this the right way or is there any other optimized way to go about with it</div>
<div class="line">[Tuesday 01 February 2011] [03:20:33] &lt;mikko&gt; stockMQ: are the other applications expecting a binary struct?</div>
<div class="line">[Tuesday 01 February 2011] [03:20:36] &lt;mikko&gt; stockMQ: sounds odd</div>
<div class="line">[Tuesday 01 February 2011] [03:25:28] &lt;stockMQ&gt;       yes.. they too are custom applications built in house but to change them is to be avoided</div>
<div class="line">[Tuesday 01 February 2011] [04:24:31] &lt;CIA-21&gt;        zeromq2: 03Martin Sustrik 07sub-forward * raddcc85 10/ devices/zmq_forwarder/zmq_forwarder.cpp :</div>
<div class="line">[Tuesday 01 February 2011] [04:24:32] &lt;CIA-21&gt;        zeromq2: Forwarder device uses XPUB and XSUB sockets.</div>
<div class="line">[Tuesday 01 February 2011] [04:24:32] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/eoHfSJ">http://bit.ly/eoHfSJ</a></div>
<div class="line">[Tuesday 01 February 2011] [04:28:50] &lt;jugg&gt;  having a publisher that connects to an endpoint, how would I prevent messages from being queued if the endpoint has not yet been bound?  Set the publisher HWM to zero, and call zmq_send(noblock)?</div>
<div class="line">[Tuesday 01 February 2011] [04:32:04] &lt;sustrik&gt;       yes, use hwm</div>
<div class="line">[Tuesday 01 February 2011] [04:33:39] &lt;jugg&gt;  hmm, I guess HWM = 1, as 0 is no limit...</div>
<div class="line">[Tuesday 01 February 2011] [04:34:27] &lt;jugg&gt;  but that&#8217;ll queue a single message, no?</div>
<div class="line">[Tuesday 01 February 2011] [04:34:50] &lt;jugg&gt;  So a stale message will be delivered when the listener binds the endpoint.</div>
<div class="line">[Tuesday 01 February 2011] [04:57:40] &lt;sustrik&gt;       it that pub/sub?</div>
<div class="line">[Tuesday 01 February 2011] [05:06:18] &lt;ianbarber&gt;     potentially silly bug: if I destroy then recreate a sub socket with an identity too quickly I get an assert &#8220;Assertion failed: new_sndbuf &gt; old_sndbuf (mailbox.cpp:182)&#8221; from the publisher</div>
<div class="line">[Tuesday 01 February 2011] [05:06:51] &lt;ianbarber&gt;     this may not be something that is sensible to do, but i encountered it in a semi-real world usage (some prototype code)</div>
<div class="line">[Tuesday 01 February 2011] [05:12:40] &lt;CIA-21&gt;        zeromq2: 03Martin Sustrik 07sub-forward * rca34d2a 10/ (5 files):</div>
<div class="line">[Tuesday 01 February 2011] [05:12:40] &lt;CIA-21&gt;        zeromq2: Debug output for subscription forwarding.</div>
<div class="line">[Tuesday 01 February 2011] [05:12:40] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/fdwCNa">http://bit.ly/fdwCNa</a></div>
<div class="line">[Tuesday 01 February 2011] [05:34:29] &lt;ianbarber&gt;     ah, it&#8217;s because the publisher thinks it has two sockets with the same identity connected at the same time. It would be nice to have that cause a problem on the client side, rather than the server side, but I don&#8217;t know if that&#8217;s doable</div>
<div class="line">[Tuesday 01 February 2011] [05:37:20] &lt;mikko&gt; i dont think two identities should assert</div>
<div class="line">[Tuesday 01 February 2011] [05:41:22] &lt;ianbarber&gt;     mikko: i haven&#8217;t made a testcase in C yet, but in PHP</div>
<div class="line">[Tuesday 01 February 2011] [05:42:09] &lt;ianbarber&gt;     <a class="reference external" href="https://gist.github.com/805688">https://gist.github.com/805688</a></div>
<div class="line">[Tuesday 01 February 2011] [05:43:43] &lt;ianbarber&gt;     if anything was going to assert, i&#8217;d much rather it be the client</div>
<div class="line">[Tuesday 01 February 2011] [05:43:58] &lt;ianbarber&gt;     but i think the best behavior would be a failed connect()</div>
<div class="line">[Tuesday 01 February 2011] [05:44:26] &lt;ianbarber&gt;     not sure how easy it is to compare a new identity against connected identities on connect though, from the pub side</div>
<div class="line">[Tuesday 01 February 2011] [05:47:09] &lt;ianbarber&gt;     ooh, if this works in c, this is worth a point in the 0mq game :)</div>
<div class="line">[Tuesday 01 February 2011] [05:53:38] &lt;ianbarber&gt;     same thing in C: <a class="reference external" href="https://gist.github.com/805701">https://gist.github.com/805701</a></div>
<div class="line">[Tuesday 01 February 2011] [05:57:04] &lt;ianbarber&gt;     yep, and if I split that into client server, it still happens</div>
<div class="line">[Tuesday 01 February 2011] [06:02:58] &lt;CIA-21&gt;        zeromq2: 03Martin Sustrik 07sub-forward * rcc7bed5 10/ (src/trie.cpp src/trie.hpp src/xsub.cpp):</div>
<div class="line">[Tuesday 01 February 2011] [06:02:58] &lt;CIA-21&gt;        zeromq2: Duplicate subscriptions are not forwarded by XSUB socket.</div>
<div class="line">[Tuesday 01 February 2011] [06:02:58] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/hGPp1V">http://bit.ly/hGPp1V</a></div>
<div class="line">[Tuesday 01 February 2011] [06:24:54] &lt;suzan_shakya&gt;  Is it possible to have mulitple publisher with PUB/SUB ?</div>
<div class="line">[Tuesday 01 February 2011] [06:39:19] &lt;stockMQ&gt;        Hi..what would be the equivalent of  zmq_close (sender);     zmq_term (context);</div>
<div class="line">[Tuesday 01 February 2011] [06:39:22] &lt;stockMQ&gt;       in C++</div>
<div class="line">[Tuesday 01 February 2011] [06:40:26] &lt;mikko&gt; stockMQ: object going out of scope</div>
<div class="line">[Tuesday 01 February 2011] [06:40:34] &lt;mikko&gt; its called during destruction</div>
<div class="line">[Tuesday 01 February 2011] [06:41:15] &lt;stockMQ&gt;       ok..So in order to say premptively stop the socket for some time can i just pause the thread for the duration</div>
<div class="line">[Tuesday 01 February 2011] [10:40:21] &lt;stockMQ&gt;       Is there a way we can exit out of the blocking zmq_recv</div>
<div class="line">[Tuesday 01 February 2011] [10:42:11] &lt;sustrik&gt;       send it a message</div>
<div class="line">[Tuesday 01 February 2011] [10:44:57] &lt;stockMQ&gt;       The issue is I have a thread with basic while(1){zmq_recv }..Now in the Main UI thread I have a Disconnect button,clicking on which an event message is sent to the socket thread asking it to quit gracefully.But due to the blocking message of the socket thread that message is never read</div>
<div class="line">[Tuesday 01 February 2011] [10:45:43] &lt;sustrik&gt;       you have to poll on both sockets</div>
<div class="line">[Tuesday 01 February 2011] [10:45:50] &lt;sustrik&gt;       instead of recv()ing on one of them</div>
<div class="line">[Tuesday 01 February 2011] [10:46:56] &lt;stockMQ&gt;       Ohk.. you mean i can have one tcp main socket and apart from that inprc sockets for communication between Main UI thread and child UI thread</div>
<div class="line">[Tuesday 01 February 2011] [10:48:56] &lt;stockMQ&gt;       is that right</div>
<div class="line">[Tuesday 01 February 2011] [10:50:26] &lt;sustrik&gt;       yes</div>
<div class="line">[Tuesday 01 February 2011] [10:51:59] &lt;stockMQ&gt;       ok thanx</div>
<div class="line">[Tuesday 01 February 2011] [11:52:33] Notice  -NickServ- This nickname is registered. Please choose a different nickname, or identify via /msg NickServ identify &lt;password&gt;.</div>
<div class="line">[Tuesday 01 February 2011] [11:52:33] Notice  -NickServ- You are now identified for travlr.</div>
<div class="line">[Tuesday 01 February 2011] [12:31:15] Notice  -NickServ- travlr_ is not a registered nickname.</div>
<div class="line">[Tuesday 01 February 2011] [12:46:36] &lt;andrewvc&gt;      any ideas what broken pipe, nbytes != 1 errors are caused by?</div>
<div class="line">[Tuesday 01 February 2011] [12:50:32] &lt;sustrik&gt;       what&#8217;s the assertion?</div>
<div class="line">[Tuesday 01 February 2011] [13:28:17] &lt;CIA-21&gt;        jzmq: 03robin.palotai 07master * r04c2900 10/ src/Poller.cpp : testing patch for jni crashes - <a class="reference external" href="http://bit.ly/hlc8vI">http://bit.ly/hlc8vI</a></div>
<div class="line">[Tuesday 01 February 2011] [14:05:18] &lt;andrewvc&gt;      cremes: around?</div>
<div class="line">[Tuesday 01 February 2011] [14:05:29] &lt;andrewvc&gt;      I was wondering if you noticed issues with pub/sub and ZMQ::NOBLOCK in the past</div>
<div class="line">[Tuesday 01 February 2011] [14:05:35] &lt;cremes&gt;        andrewvc: yep</div>
<div class="line">[Tuesday 01 February 2011] [14:06:06] &lt;cremes&gt;        nope, i have not noticed any specific issues with pub/sub</div>
<div class="line">[Tuesday 01 February 2011] [14:06:06] &lt;andrewvc&gt;      hmmmm</div>
<div class="line">[Tuesday 01 February 2011] [14:06:10] &lt;andrewvc&gt;      so in my work on em-zeromq, push/pull works well, pub/sub however</div>
<div class="line">[Tuesday 01 February 2011] [14:06:23] &lt;cremes&gt;        what&#8217;s it doing?</div>
<div class="line">[Tuesday 01 February 2011] [14:06:23] &lt;andrewvc&gt;      zmq_recv just doesn&#8217;t pick anything up</div>
<div class="line">[Tuesday 01 February 2011] [14:06:23] &lt;cremes&gt;        or not doing?</div>
<div class="line">[Tuesday 01 February 2011] [14:06:32] &lt;andrewvc&gt;      the FD gets triggered as readable</div>
<div class="line">[Tuesday 01 February 2011] [14:06:38] &lt;andrewvc&gt;      on the sub</div>
<div class="line">[Tuesday 01 February 2011] [14:06:38] &lt;cremes&gt;        so pub works but sub is busted?</div>
<div class="line">[Tuesday 01 February 2011] [14:06:38] &lt;andrewvc&gt;      yeah</div>
<div class="line">[Tuesday 01 February 2011] [14:06:38] &lt;andrewvc&gt;      i straced it</div>
<div class="line">[Tuesday 01 February 2011] [14:06:44] &lt;andrewvc&gt;      i see the data getting written and read</div>
<div class="line">[Tuesday 01 February 2011] [14:06:54] &lt;andrewvc&gt;      and ZMQ_EVENTS says POLLOUT is enabled</div>
<div class="line">[Tuesday 01 February 2011] [14:06:58] &lt;andrewvc&gt;      errr triggered</div>
<div class="line">[Tuesday 01 February 2011] [14:07:15] &lt;andrewvc&gt;      but recv doesn&#8217;t work</div>
<div class="line">[Tuesday 01 February 2011] [14:07:21] &lt;cremes&gt;        which socket are you talking about here? sub sockets don&#8217;t care about POLLOUT</div>
<div class="line">[Tuesday 01 February 2011] [14:07:31] &lt;andrewvc&gt;      errrm, I meant pollin</div>
<div class="line">[Tuesday 01 February 2011] [14:07:31] &lt;cremes&gt;        they need POLLIN</div>
<div class="line">[Tuesday 01 February 2011] [14:07:32] &lt;andrewvc&gt;      sorry</div>
<div class="line">[Tuesday 01 February 2011] [14:07:34] &lt;cremes&gt;        ok</div>
<div class="line">[Tuesday 01 February 2011] [14:07:41] &lt;andrewvc&gt;      wait, actually</div>
<div class="line">[Tuesday 01 February 2011] [14:07:44] &lt;cremes&gt;        damn, thought we had the fix right there...</div>
<div class="line">[Tuesday 01 February 2011] [14:08:04] &lt;andrewvc&gt;      i think they were triggering POLLOUT (according to ZMQ::EVENTS) on a ZMQSUB socket</div>
<div class="line">[Tuesday 01 February 2011] [14:08:10] &lt;andrewvc&gt;      lemme double check that</div>
<div class="line">[Tuesday 01 February 2011] [14:12:23] &lt;andrewvc&gt;      hmmm</div>
<div class="line">[Tuesday 01 February 2011] [14:12:32] &lt;andrewvc&gt;      now I see no events on the socket, which is good and bad</div>
<div class="line">[Tuesday 01 February 2011] [14:13:28] &lt;andrewvc&gt;      i mean, the same exact code works with pub/sub</div>
<div class="line">[Tuesday 01 February 2011] [14:13:34] &lt;andrewvc&gt;      errr push/pull</div>
<div class="line">[Tuesday 01 February 2011] [14:14:04] &lt;andrewvc&gt;      [pid 14619] sendto(22, &#8220;100TMsg777&#8221;, 9, 0, NULL, 0 &lt;unfinished ...&gt;</div>
<div class="line">[Tuesday 01 February 2011] [14:14:04] &lt;andrewvc&gt;      [pid 14619] &lt;... recvfrom resumed&gt; &#8220;100TMsg777&#8221;, 8192, 0, NULL, NULL) = 9</div>
<div class="line">[Tuesday 01 February 2011] [14:14:06] &lt;andrewvc&gt;      from the strace</div>
<div class="line">[Tuesday 01 February 2011] [14:14:12] &lt;andrewvc&gt;      so, internally, the message gets sent/received</div>
<div class="line">[Tuesday 01 February 2011] [14:14:17] &lt;andrewvc&gt;      by zeromq it looks</div>
<div class="line">[Tuesday 01 February 2011] [14:15:03] &lt;andrewvc&gt;      cremes: any ideas on that? I can dig into ffi-rzmq tonight I guess</div>
<div class="line">[Tuesday 01 February 2011] [14:15:43] &lt;cremes&gt;        andrewvc: can you gist your test code for me; i&#8217;d like to look at it</div>
<div class="line">[Tuesday 01 February 2011] [14:17:12] &lt;andrewvc&gt;      sure, i mean, I&#8217;m a bit short on time now, about to head into a meeting. I can write a minimal test later</div>
<div class="line">[Tuesday 01 February 2011] [14:17:12] &lt;andrewvc&gt;      however</div>
<div class="line">[Tuesday 01 February 2011] [14:17:12] &lt;andrewvc&gt;      if you want you can look at</div>
<div class="line">[Tuesday 01 February 2011] [14:17:12] &lt;andrewvc&gt;      however</div>
<div class="line">[Tuesday 01 February 2011] [14:17:12] &lt;andrewvc&gt;      <a class="reference external" href="https://github.com/andrewvc/em-zeromq">https://github.com/andrewvc/em-zeromq</a></div>
<div class="line">[Tuesday 01 February 2011] [14:17:27] &lt;andrewvc&gt;      if you run this spec <a class="reference external" href="https://github.com/andrewvc/em-zeromq/blob/master/spec/em-zeromq_spec.rb">https://github.com/andrewvc/em-zeromq/blob/master/spec/em-zeromq_spec.rb</a></div>
<div class="line">[Tuesday 01 February 2011] [14:17:36] &lt;cremes&gt;        i just wonder if i&#8217;ll see something that you don&#8217;t... hopefully it&#8217;s an easy fix</div>
<div class="line">[Tuesday 01 February 2011] [14:17:49] &lt;andrewvc&gt;      and s/ZMQ::PUSH/ZMQ::PUB</div>
<div class="line">[Tuesday 01 February 2011] [14:17:56] &lt;andrewvc&gt;      and s/ZMQ::PULL/ZMQ::PUB</div>
<div class="line">[Tuesday 01 February 2011] [14:17:58] &lt;andrewvc&gt;      you&#8217;ll see it</div>
<div class="line">[Tuesday 01 February 2011] [14:18:09] &lt;cremes&gt;        ok</div>
<div class="line">[Tuesday 01 February 2011] [14:18:19] &lt;andrewvc&gt;      or I can send something later, I&#8217;ll be expanding the test suite tonight</div>
<div class="line">[Tuesday 01 February 2011] [14:52:43] &lt;CIA-21&gt;        zeromq2: 03Martin Sustrik 07sub-forward * ra40436b 10/ (5 files):</div>
<div class="line">[Tuesday 01 February 2011] [14:52:44] &lt;CIA-21&gt;        zeromq2: Couple of bug fixes to subscription forwarding mechanism.</div>
<div class="line">[Tuesday 01 February 2011] [14:52:44] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/eOAJxP">http://bit.ly/eOAJxP</a></div>
<div class="line">[Tuesday 01 February 2011] [15:14:31] &lt;mikko&gt; good evening</div>
<div class="line">[Tuesday 01 February 2011] [15:19:27] &lt;sustrik&gt;       evening</div>
<div class="line">[Wednesday 02 February 2011] [03:54:56] &lt;efhache&gt;     Hi everybody, just one question about zmq vs 2.0.7,   it&#8217;s possible there is a sort of memory leak?  I use a simple &#8220;broker&#8221;  that received message from a zmq socket and redispatch by an other zmq socket the message to the appropriate receiver</div>
<div class="line">[Wednesday 02 February 2011] [03:56:14] &lt;efhache&gt;     there is nothing else in this piece of soft that the zmq library...   but memory consumption do not stop to increase...</div>
<div class="line">[Wednesday 02 February 2011] [03:56:56] &lt;efhache&gt;     I work under a linux with 2.4 kernel</div>
<div class="line">[Wednesday 02 February 2011] [03:59:38] &lt;sustrik&gt;     efhache: it&#8217;s an outdated version, so yes, it&#8217;s possible there&#8217;s a memory leak there that have been fixed in the meantime</div>
<div class="line">[Wednesday 02 February 2011] [03:59:43] &lt;sustrik&gt;     check ChangeLog</div>
<div class="line">[Wednesday 02 February 2011] [04:00:25] &lt;sustrik&gt;     the other possibility is that publisher(s) are simply publishing faster then consumer(s) consume</div>
<div class="line">[Wednesday 02 February 2011] [04:01:17] &lt;efhache&gt;     sustrik :  I see in changelog that there was a memory leak problem with REQ socket, but I don&#8217;t use REQ</div>
<div class="line">[Wednesday 02 February 2011] [04:01:50] &lt;efhache&gt;     sustrik : there is a possibility to &#8220;view&#8221; the total message in queue ?</div>
<div class="line">[Wednesday 02 February 2011] [04:02:15] &lt;efhache&gt;     sustrik :  to be sure that the publisher don&#8217;t publish faster than consumer ?</div>
<div class="line">[Wednesday 02 February 2011] [04:02:26] &lt;sustrik&gt;     nope</div>
<div class="line">[Wednesday 02 February 2011] [04:02:33] &lt;sustrik&gt;     you can limit the queue size</div>
<div class="line">[Wednesday 02 February 2011] [04:02:38] &lt;sustrik&gt;     use ZMQ_HWM option</div>
<div class="line">[Wednesday 02 February 2011] [04:04:40] &lt;efhache&gt;     ok I will see the man page</div>
<div class="line">[Wednesday 02 February 2011] [04:04:44] &lt;efhache&gt;     thanks sustrik</div>
<div class="line">[Wednesday 02 February 2011] [04:08:35] &lt;efhache&gt;     sustrik : have you a example to use ZMQ_HWM with a REP/PUB  socket ?</div>
<div class="line">[Wednesday 02 February 2011] [04:08:59] &lt;sustrik&gt;     man setsockopt</div>
<div class="line">[Wednesday 02 February 2011] [04:28:57] &lt;suzan_shakya&gt;        socket(zmq.PUB) can bind to multiple ipc sockets. Is this a feature or a bug ?</div>
<div class="line">[Wednesday 02 February 2011] [04:30:35] &lt;mikko&gt;       suzan_shakya: feature</div>
<div class="line">[Wednesday 02 February 2011] [04:31:27] &lt;suzan_shakya&gt;        mikko: can multiple publisher and multiple subscriber can be implemented using this feature ?</div>
<div class="line">[Wednesday 02 February 2011] [04:32:13] &lt;mikko&gt;       suzan_shakya: what do you mean? a single publisher that publishes using multiple endpoints?</div>
<div class="line">[Wednesday 02 February 2011] [04:34:27] &lt;suzan_shakya&gt;        mikko: i need to implement multiple publisher and multiple subscriber. Multiple subscriber can simply be implemented. In addition to multi sub, i need multi pub, so that all subscriber gets the message of all the publishers</div>
<div class="line">[Wednesday 02 February 2011] [04:35:30] &lt;sustrik&gt;     you can either connect each sub to each pub, or more sanely, use a forwarder device in the middle</div>
<div class="line">[Wednesday 02 February 2011] [04:35:37] &lt;mikko&gt;       suzan_shakya: you can a) have subscriber connect to all publishers b) have a device that connects to ..</div>
<div class="line">[Wednesday 02 February 2011] [04:35:44] &lt;mikko&gt;       martin answered it already</div>
<div class="line">[Wednesday 02 February 2011] [04:35:58] &lt;sustrik&gt;     :)</div>
<div class="line">[Wednesday 02 February 2011] [04:36:05] &lt;suzan_shakya&gt;        mikko: I want to implement that without any device</div>
<div class="line">[Wednesday 02 February 2011] [04:36:47] &lt;mikko&gt;       suzan_shakya: a device in zeromq is just a lightweight process, not a hardware device</div>
<div class="line">[Wednesday 02 February 2011] [04:36:58] &lt;suzan_shakya&gt;        mikko: ya i know</div>
<div class="line">[Wednesday 02 February 2011] [04:37:24] &lt;mikko&gt;       in that case you can just connect all subscribers to all publishers</div>
<div class="line">[Wednesday 02 February 2011] [04:37:29] &lt;suzan_shakya&gt;        mikko: that device is a separate process, right ?</div>
<div class="line">[Wednesday 02 February 2011] [04:37:52] &lt;mikko&gt;       it can be</div>
<div class="line">[Wednesday 02 February 2011] [04:40:46] &lt;suzan_shakya&gt;        mikko: i got it, thanks :)</div>
<div class="line">[Wednesday 02 February 2011] [04:41:25] &lt;efhache&gt;     In the future, a pdf version or a book version of the 0MQ Guide   will be available  ??</div>
<div class="line">[Wednesday 02 February 2011] [04:42:36] &lt;sustrik&gt;     efhache: try asking on the mailing list</div>
<div class="line">[Wednesday 02 February 2011] [04:42:50] &lt;sustrik&gt;     pieter may know a way to convert it into a pdf</div>
<div class="line">[Wednesday 02 February 2011] [04:45:00] &lt;efhache&gt;     sustrik : ok...  I recome with another question about setsockopt() function...   It&#8217;s possible to assing more than just one option?  may be with two, three or more line with setsockopt()   ???</div>
<div class="line">[Wednesday 02 February 2011] [04:45:24] &lt;sustrik&gt;     sure</div>
<div class="line">[Wednesday 02 February 2011] [04:45:37] &lt;sustrik&gt;     you can set all settable options</div>
<div class="line">[Wednesday 02 February 2011] [04:45:38] &lt;sustrik&gt;     no problem</div>
<div class="line">[Wednesday 02 February 2011] [04:46:22] &lt;efhache&gt;     ok thanks</div>
<div class="line">[Wednesday 02 February 2011] [05:56:20] &lt;CIA-21&gt;      zeromq2: 03Martin Sustrik 07sub-forward * re156f09 10/ src/trie.cpp :</div>
<div class="line">[Wednesday 02 February 2011] [05:56:20] &lt;CIA-21&gt;      zeromq2: trie_t::rm returns true only if it actually removes the subscription</div>
<div class="line">[Wednesday 02 February 2011] [05:56:20] &lt;CIA-21&gt;      zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/fI1gLN">http://bit.ly/fI1gLN</a></div>
<div class="line">[Wednesday 02 February 2011] [08:03:22] &lt;noj&gt; hello. I&#8217;m seeing a crash in ZeroMQ 2.0.10 compiled under Win32 with zmq::poll(). it crashes on  notify_fd = app_thread-&gt;get_signaler ()-&gt;get_fd ();  the signaler seems corrupt. what am I doing wrong?</div>
<div class="line">[Wednesday 02 February 2011] [08:05:45] &lt;noj&gt; nevermind. I supplied the address of the socket in my pollitem_t structure</div>
<div class="line">[Wednesday 02 February 2011] [11:54:10] &lt;mikko&gt;       howdy</div>
<div class="line">[Wednesday 02 February 2011] [12:31:50] &lt;stockMQ&gt;     Hi .. anyone any experience with R6010 - abort() has been called on VC++</div>
<div class="line">[Wednesday 02 February 2011] [12:32:04] &lt;stockMQ&gt;     It is a multi threaded app</div>
<div class="line">[Wednesday 02 February 2011] [12:32:39] &lt;stockMQ&gt;     There are two threads say A and B receiving from two sockets</div>
<div class="line">[Wednesday 02 February 2011] [12:33:13] &lt;stockMQ&gt;     then A and B both has a publisher bound to a TCP end point and a PGM end point</div>
<div class="line">[Wednesday 02 February 2011] [12:33:46] &lt;stockMQ&gt;     I get this only if the combination is a TCP and PGM</div>
<div class="line">[Wednesday 02 February 2011] [12:33:52] &lt;stockMQ&gt;     no problem with two TCPs</div>
<div class="line">[Wednesday 02 February 2011] [12:34:01] &lt;mikko&gt;       sounds like hitting an assertion</div>
<div class="line">[Wednesday 02 February 2011] [12:34:15] &lt;mikko&gt;       i would assume abort() gets invoked after assertion failure</div>
<div class="line">[Wednesday 02 February 2011] [12:34:57] &lt;mikko&gt;       never used PGM with windows</div>
<div class="line">[Wednesday 02 February 2011] [12:35:17] &lt;stockMQ&gt;     yeahh.. seems like something involving openPGM</div>
<div class="line">[Wednesday 02 February 2011] [12:36:13] &lt;stockMQ&gt;     checking now with combination of PGM and PGM</div>
<div class="line">[Wednesday 02 February 2011] [12:36:20] &lt;stockMQ&gt;     i mean epgm and epgm</div>
<div class="line">[Wednesday 02 February 2011] [12:37:02] &lt;stockMQ&gt;     ohk..got the error</div>
<div class="line">[Wednesday 02 February 2011] [12:37:51] &lt;mikko&gt;       -&gt;</div>
<div class="line">[Wednesday 02 February 2011] [12:41:24] &lt;stockMQ&gt;     I meant i got the same abort</div>
<div class="line">[Wednesday 02 February 2011] [12:43:39] &lt;stockMQ&gt;     After much testing the pattern i see is that i get this error if there are more than one epgm within the same process but each in a distinct thread</div>
<div class="line">[Wednesday 02 February 2011] [12:43:55] &lt;stockMQ&gt;     or more than one epgm in the same thread</div>
<div class="line">[Wednesday 02 February 2011] [12:48:42] &lt;stockMQ&gt;     Will it be better if on receiving data in thread A and B ,i send it through a common PUB instead of one PUB for each thread</div>
<div class="line">[Wednesday 02 February 2011] [12:49:16] &lt;cremes&gt;      stockMQ: no, don&#8217;t share the same pub socket between 1+ threads</div>
<div class="line">[Wednesday 02 February 2011] [12:49:26] &lt;cremes&gt;      the rule is 1 socket per thread</div>
<div class="line">[Wednesday 02 February 2011] [12:50:25] &lt;stockMQ&gt;     ok</div>
<div class="line">[Wednesday 02 February 2011] [12:52:45] &lt;stockMQ&gt;     right now the two threads are sharing the same context</div>
<div class="line">[Wednesday 02 February 2011] [12:55:25] &lt;cremes&gt;      that should be okay; 99% of programs will only ever need a single context</div>
<div class="line">[Wednesday 02 February 2011] [18:37:38] &lt;mikko&gt;       Steve-o: hi</div>
<div class="line">[Wednesday 02 February 2011] [18:37:42] &lt;mikko&gt;       got my email?</div>
<div class="line">[Wednesday 02 February 2011] [18:39:19] &lt;mikko&gt;       i see you did</div>
<div class="line">[Wednesday 02 February 2011] [18:39:27] &lt;Steve-o&gt;     :P</div>
<div class="line">[Wednesday 02 February 2011] [18:41:14] &lt;Steve-o&gt;     I think I noticed it was debug build before</div>
<div class="line">[Wednesday 02 February 2011] [18:41:30] &lt;mikko&gt;       i replied to your email</div>
<div class="line">[Wednesday 02 February 2011] [18:41:37] &lt;mikko&gt;       not sure how to check that with .libs</div>
<div class="line">[Wednesday 02 February 2011] [18:41:46] &lt;mikko&gt;       but dependency walker shows it on dlls</div>
<div class="line">[Wednesday 02 February 2011] [18:42:35] &lt;Steve-o&gt;     I guess I should look at DLL again sometime</div>
<div class="line">[Wednesday 02 February 2011] [18:43:11] &lt;Steve-o&gt;     CMake is broken on executables and dlls for some reason</div>
<div class="line">[Wednesday 02 February 2011] [18:43:55] &lt;Steve-o&gt;     as I wanted to include purinrecv.exe and purinsend.exe in the package</div>
<div class="line">[Wednesday 02 February 2011] [18:45:32] &lt;Steve-o&gt;     still working on ticket spinlocks which will help Windows a bit</div>
<div class="line">[Wednesday 02 February 2011] [18:46:06] &lt;Steve-o&gt;     idea being to avoid API calls that include context switches to the kernel</div>
<div class="line">[Wednesday 02 February 2011] [18:46:30] &lt;Steve-o&gt;     critical sections don&#8217;t, but regular Windows mutexes do</div>
<div class="line">[Wednesday 02 February 2011] [18:46:42] &lt;Steve-o&gt;     rw locks are vista+ only</div>
<div class="line">[Wednesday 02 February 2011] [18:47:25] &lt;mikko&gt;       <a class="reference external" href="http://build.valokuva.org/job/ZeroMQ2-core-master_MSVC-win7/148/console">http://build.valokuva.org/job/ZeroMQ2-core-master_MSVC-win7/148/console</a></div>
<div class="line">[Wednesday 02 February 2011] [18:47:28] &lt;mikko&gt;       building now</div>
<div class="line">[Wednesday 02 February 2011] [18:48:30] &lt;mikko&gt;       there is now the WithOpenPGM target in the MSVC build which you can easily use to create &#8220;With OpenPGM release builds&#8221;. It expects to find OpenPGM in ..OpenPGM (one dir up from zeromq dir)</div>
<div class="line">[Wednesday 02 February 2011] [18:49:26] &lt;mikko&gt;       i think i had another question for you as well regarding the openpgm autoconf builds. what was the reason for LT_PREREQ([2.2]) in configure.ac?</div>
<div class="line">[Wednesday 02 February 2011] [18:50:39] &lt;Steve-o&gt;     just to match the versions on ubuntu 10.10</div>
<div class="line">[Wednesday 02 February 2011] [18:50:57] &lt;Steve-o&gt;     then I ran os OSX 10.6.5/6 and lowered the numbers for it working there</div>
<div class="line">[Wednesday 02 February 2011] [18:51:08] &lt;Steve-o&gt;     I had to fix the autoconf 11 parts for silent building</div>
<div class="line">[Wednesday 02 February 2011] [18:51:48] &lt;Steve-o&gt;     are there platforms it fails on?</div>
<div class="line">[Wednesday 02 February 2011] [18:51:53] &lt;mikko&gt;       debian stable</div>
<div class="line">[Wednesday 02 February 2011] [18:51:59] &lt;mikko&gt;       libtool 1.5</div>
<div class="line">[Wednesday 02 February 2011] [18:52:14] &lt;mikko&gt;       probably rhel as well</div>
<div class="line">[Wednesday 02 February 2011] [18:52:33] &lt;Steve-o&gt;     ok</div>
<div class="line">[Wednesday 02 February 2011] [18:52:58] &lt;Steve-o&gt;     if you change the version to 1.5 or remove the line does it build correctly?</div>
<div class="line">[Wednesday 02 February 2011] [18:53:19] &lt;mikko&gt;       i remved the line and added AC_PROG_LIBTOOL invocation</div>
<div class="line">[Wednesday 02 February 2011] [18:53:29] &lt;mikko&gt;       not sure if that is mandatory</div>
<div class="line">[Wednesday 02 February 2011] [18:53:33] &lt;mikko&gt;       but yes, builds properly</div>
<div class="line">[Wednesday 02 February 2011] [18:53:44] &lt;Steve-o&gt;     I need to update CMakeLists.txt and Makefile.am to remove the hard coded version numbers</div>
<div class="line">[Wednesday 02 February 2011] [18:53:45] &lt;mikko&gt;       just reading about how to statically link libtool archive</div>
<div class="line">[Wednesday 02 February 2011] [18:54:02] &lt;mikko&gt;       <a class="reference external" href="http://snapshot.valokuva.org/msvc2008/2011-02-02_23-46-20/">http://snapshot.valokuva.org/msvc2008/2011-02-02_23-46-20/</a></div>
<div class="line">[Wednesday 02 February 2011] [18:54:06] &lt;Steve-o&gt;     I cannot use a version.sh on stock Windows without Cygwin</div>
<div class="line">[Wednesday 02 February 2011] [18:54:12] &lt;mikko&gt;       there we go, seems to be fully functional release dll</div>
<div class="line">[Wednesday 02 February 2011] [18:54:33] &lt;Steve-o&gt;     nice, good job</div>
<div class="line">[Wednesday 02 February 2011] [18:54:35] &lt;mikko&gt;       version.bat ?</div>
<div class="line">[Wednesday 02 February 2011] [18:54:37] &lt;mikko&gt;       :)</div>
<div class="line">[Wednesday 02 February 2011] [18:54:59] &lt;Steve-o&gt;     well I was thinking of using perl or python</div>
<div class="line">[Wednesday 02 February 2011] [18:55:06] &lt;mikko&gt;       ill remove the earlier snapshots as they are varying quality and build configurations</div>
<div class="line">[Wednesday 02 February 2011] [18:55:07] &lt;Steve-o&gt;     after I have detected they exist</div>
<div class="line">[Wednesday 02 February 2011] [18:57:02] &lt;Steve-o&gt;     the libtool/autoconf/automake documentation changes a lot on its recommendations</div>
<div class="line">[Wednesday 02 February 2011] [18:57:34] &lt;Steve-o&gt;     I tried to go with the latest spec</div>
<div class="line">[Wednesday 02 February 2011] [18:57:50] &lt;Steve-o&gt;     I think 0mq is a bit behind</div>
<div class="line">[Wednesday 02 February 2011] [18:58:35] &lt;mikko&gt;       it&#8217;s possible because we target for as wide as possible audience</div>
<div class="line">[Wednesday 02 February 2011] [18:59:17] &lt;mikko&gt;       or at least try to</div>
<div class="line">[Wednesday 02 February 2011] [18:59:45] &lt;Steve-o&gt;     its perverse because you can go with the latest version in repo as long as you ship all the configure scripts in release</div>
<div class="line">[Wednesday 02 February 2011] [19:00:20] &lt;mikko&gt;       yeah, i guess it&#8217;s partially convenience</div>
<div class="line">[Wednesday 02 February 2011] [19:00:39] &lt;mikko&gt;       being able to build with distro-provided tools without having to first update the autoconf toolchain</div>
<div class="line">[Wednesday 02 February 2011] [19:00:58] &lt;Steve-o&gt;     the new silent build is nice though, brings it upto building Linux and how CMake runs</div>
<div class="line">[Wednesday 02 February 2011] [19:01:26] &lt;Steve-o&gt;     s/upto/upto date/</div>
<div class="line">[Wednesday 02 February 2011] [19:01:44] &lt;mikko&gt;       and i would think that at least the parts of the autoconf stuff i&#8217;ve written follow documentation or tutorials found online</div>
<div class="line">[Wednesday 02 February 2011] [19:01:50] &lt;mikko&gt;       not always necessarily up to date</div>
<div class="line">[Wednesday 02 February 2011] [19:01:58] &lt;Steve-o&gt;     that&#8217;s the biggest problem,</div>
<div class="line">[Wednesday 02 February 2011] [19:02:11] &lt;Steve-o&gt;     every blog and walkthough refers to an older upstream version</div>
<div class="line">[Wednesday 02 February 2011] [19:03:10] &lt;mikko&gt;       yeah, i learned to appreciate the autoconf documentation at later stages</div>
<div class="line">[Wednesday 02 February 2011] [19:03:33] &lt;Steve-o&gt;     doesn&#8217;t stop autoheader from being broken</div>
<div class="line">[Wednesday 02 February 2011] [19:03:44] &lt;Steve-o&gt;     gettext doesn&#8217;t work out of the box</div>
<div class="line">[Wednesday 02 February 2011] [19:03:58] &lt;Steve-o&gt;     I didn&#8217;t spend too long looking at it though</div>
<div class="line">[Wednesday 02 February 2011] [19:06:11] &lt;Steve-o&gt;     similarly detecting files is a bit odd</div>
<div class="line">[Wednesday 02 February 2011] [19:06:36] &lt;Steve-o&gt;     AC_CHECK_FILE seems to check for being able to read with the users permissions</div>
<div class="line">[Wednesday 02 February 2011] [19:07:06] &lt;Steve-o&gt;     so /dev/hpet always fails for example</div>
<div class="line">[Wednesday 02 February 2011] [19:08:20] &lt;Steve-o&gt;     oh and it looks like I didn&#8217;t check for Sun Pro&#8217;s hidden attribute</div>
<div class="line">[Wednesday 02 February 2011] [19:08:44] &lt;mikko&gt;       test -r ?</div>
<div class="line">[Wednesday 02 February 2011] [19:08:59] &lt;mikko&gt;       or -x ?</div>
<div class="line">[Wednesday 02 February 2011] [19:09:20] &lt;Steve-o&gt;     not too important, only /dev/rtc and /dev/hpet which have major problems anyway</div>
<div class="line">[Wednesday 02 February 2011] [19:11:27] &lt;Steve-o&gt;     overall not too bad, I&#8217;m certainly not interested in copying the autoconf to SCons or CMake, they look a lot more verbose</div>
<div class="line">[Wednesday 02 February 2011] [19:12:42] &lt;Steve-o&gt;     I should get around to checking cygwin/mingw though, I guess autoconf doesn&#8217;t work with msvc?</div>
<div class="line">[Wednesday 02 February 2011] [19:13:21] &lt;mikko&gt;       no, you would need MSBuild or visual studio templates</div>
<div class="line">[Wednesday 02 February 2011] [19:13:38] &lt;mikko&gt;       autoconf works on cygwin / mingw</div>
<div class="line">[Wednesday 02 February 2011] [19:13:54] &lt;Steve-o&gt;     that&#8217;s why I have CMake :D</div>
<div class="line">[Wednesday 02 February 2011] [19:16:06] &lt;Steve-o&gt;     a bit limiting that you need a ssl certificate to get your name in the publisher field of Windows installers</div>
<div class="line">[Wednesday 02 February 2011] [19:16:59] &lt;mikko&gt;       i guess they have a reason for that</div>
<div class="line">[Wednesday 02 February 2011] [19:17:38] &lt;Steve-o&gt;     still need to look at getting an installer for 0mq though</div>
<div class="line">[Wednesday 02 February 2011] [19:18:21] &lt;mikko&gt;       is it much more than copying the dll in place?</div>
<div class="line">[Wednesday 02 February 2011] [19:19:22] &lt;Steve-o&gt;     I call NSIS through CPack as part of CMake</div>
<div class="line">[Wednesday 02 February 2011] [19:19:57] &lt;Steve-o&gt;     you setup the target directory structure and simply fill in a few fields unless you need something special</div>
<div class="line">[Wednesday 02 February 2011] [19:21:47] &lt;mikko&gt;       hmm</div>
<div class="line">[Wednesday 02 February 2011] [19:21:50] &lt;Steve-o&gt;     the main job of the installer is to prepare the uninstaller</div>
<div class="line">[Wednesday 02 February 2011] [19:22:07] &lt;mikko&gt;       for zeromq it might be possible to add an installer project into the solution</div>
<div class="line">[Wednesday 02 February 2011] [19:22:15] &lt;mikko&gt;       msvc</div>
<div class="line">[Wednesday 02 February 2011] [19:22:22] &lt;Steve-o&gt;     I&#8217;m guessing thats how it was done before</div>
<div class="line">[Wednesday 02 February 2011] [19:24:24] &lt;Steve-o&gt;     possibly pertinent to bundle the msvc 2010 redistributable too</div>
<div class="line">[Wednesday 02 February 2011] [19:24:59] &lt;Steve-o&gt;     Microsoft released an opensource installer thing a while back no, WiX?</div>
<div class="line">[Wednesday 02 February 2011] [19:25:44] &lt;Steve-o&gt;     <a class="reference external" href="http://wix.sourceforge.net/">http://wix.sourceforge.net/</a></div>
<div class="line">[Wednesday 02 February 2011] [19:26:27] &lt;mikko&gt;       cool</div>
<div class="line">[Wednesday 02 February 2011] [19:29:08] &lt;Steve-o&gt;     I don&#8217;t have any templates in visual studio for an installer, maybe I missed something</div>
<div class="line">[Wednesday 02 February 2011] [19:32:08] &lt;mikko&gt;       are you using express edition?</div>
<div class="line">[Wednesday 02 February 2011] [19:32:36] &lt;Steve-o&gt;     yup</div>
<div class="line">[Wednesday 02 February 2011] [19:33:21] &lt;mikko&gt;       i dont think express includes the installer technology</div>
<div class="line">[Wednesday 02 February 2011] [19:33:31] &lt;mikko&gt;       so wix might be a better solution</div>
<div class="line">[Wednesday 02 February 2011] [19:45:11] &lt;mikko&gt;       openpgm autoconf was actually pretty easy to fit into zeromq build</div>
<div class="line">[Wednesday 02 February 2011] [19:45:36] &lt;mikko&gt;       also it&#8217;s using libtool to link so it should continue working if libpgm provides shared libraries later on</div>
<div class="line">[Wednesday 02 February 2011] [19:47:34] &lt;mikko&gt;       hmm</div>
<div class="line">[Wednesday 02 February 2011] [19:47:48] &lt;mikko&gt;       hitting an assertion with epgm transport</div>
<div class="line">[Wednesday 02 February 2011] [19:47:54] &lt;mikko&gt;       i was getting this before as well</div>
<div class="line">[Wednesday 02 February 2011] [19:49:02] &lt;mikko&gt;       Assertion failed: rc == 0 (connect_session.cpp:82)</div>
<div class="line">[Wednesday 02 February 2011] [19:50:09] &lt;Steve-o&gt;     common on connect()</div>
<div class="line">[Wednesday 02 February 2011] [19:50:26] &lt;Steve-o&gt;     usually means resolving the network parameter failed</div>
<div class="line">[Wednesday 02 February 2011] [19:51:14] &lt;Steve-o&gt;     fyi: libpm in autoconf is already set to make static &amp; shared libraries</div>
<div class="line">[Wednesday 02 February 2011] [19:52:03] &lt;Steve-o&gt;     ideally the pgm error object should be routed through the zeromq logging service</div>
<div class="line">[Wednesday 02 February 2011] [19:53:19] &lt;Steve-o&gt;     the zeromq error detail is incredibly brief</div>
<div class="line">[Wednesday 02 February 2011] [19:54:18] &lt;Steve-o&gt;     I&#8217;m currently pondering over chasing the libc defect with /etc/hosts resolution on multiple entries</div>
<div class="line">[Wednesday 02 February 2011] [19:54:34] &lt;Steve-o&gt;     I can&#8217;t help think it&#8217;s just NetworkManager being shit</div>
<div class="line">[Wednesday 02 February 2011] [19:54:40] &lt;mikko&gt;       what is the issue?</div>
<div class="line">[Wednesday 02 February 2011] [19:54:47] &lt;mikko&gt;       order of resolution?</div>
<div class="line">[Wednesday 02 February 2011] [19:54:55] &lt;Steve-o&gt;     two issues</div>
<div class="line">[Wednesday 02 February 2011] [19:55:06] &lt;Steve-o&gt;     one it seems to pickup ::1 as 127.0.0.1</div>
<div class="line">[Wednesday 02 February 2011] [19:55:19] &lt;mikko&gt;       my connection string is epgm://eth0;239.192.0.1:6868</div>
<div class="line">[Wednesday 02 February 2011] [19:55:20] &lt;Steve-o&gt;     and secondly it seems to read bottom to top</div>
<div class="line">[Wednesday 02 February 2011] [19:55:49] &lt;Steve-o&gt;     I&#8217;d try using the IP address but that looks fine</div>
<div class="line">[Wednesday 02 February 2011] [19:56:08] &lt;mikko&gt;       still asserts with ip</div>
<div class="line">[Wednesday 02 February 2011] [19:56:34] &lt;mikko&gt;       hmm</div>
<div class="line">[Wednesday 02 February 2011] [19:56:40] &lt;Steve-o&gt;     anything if you run with PGM_MIN_LOG_LEVEL=TRACE ?</div>
<div class="line">[Wednesday 02 February 2011] [19:57:16] &lt;mikko&gt;       <a class="reference external" href="https://gist.github.com/3f99af511f9059ce4a7c">https://gist.github.com/3f99af511f9059ce4a7c</a></div>
<div class="line">[Wednesday 02 February 2011] [19:57:23] &lt;mikko&gt;       it outputs that</div>
<div class="line">[Wednesday 02 February 2011] [19:59:58] &lt;Steve-o&gt;     odd, I&#8217;m guessing setsockopt on IP_PKTINFO is failing</div>
<div class="line">[Wednesday 02 February 2011] [20:01:48] &lt;Steve-o&gt;     this is with my autoconf?</div>
<div class="line">[Wednesday 02 February 2011] [20:02:11] &lt;Steve-o&gt;     or the stuff in master?</div>
<div class="line">[Wednesday 02 February 2011] [20:02:30] &lt;mikko&gt;       it seems to happen with stuff on master and autoconf</div>
<div class="line">[Wednesday 02 February 2011] [20:03:25] &lt;Steve-o&gt;     but not with openpgm tools?</div>
<div class="line">[Wednesday 02 February 2011] [20:04:15] &lt;mikko&gt;       havent tested</div>
<div class="line">[Wednesday 02 February 2011] [20:04:16] &lt;Steve-o&gt;     have to prod Sustrik when he is online about PGM logging</div>
<div class="line">[Wednesday 02 February 2011] [20:04:52] &lt;mikko&gt;       trying to find the tools among the openpgm source</div>
<div class="line">[Wednesday 02 February 2011] [20:05:40] &lt;mikko&gt;       hmmm.. the autoconf doenst seem to build them</div>
<div class="line">[Wednesday 02 February 2011] [20:05:51] &lt;Steve-o&gt;     nope :P</div>
<div class="line">[Wednesday 02 February 2011] [20:06:02] &lt;mikko&gt;       sconssing now</div>
<div class="line">[Wednesday 02 February 2011] [20:06:57] &lt;Steve-o&gt;     autoconf &amp; cmake only build libraries, easiest method for distribution</div>
<div class="line">[Wednesday 02 February 2011] [20:07:53] &lt;mikko&gt;       what is good test program?</div>
<div class="line">[Wednesday 02 February 2011] [20:08:08] &lt;Steve-o&gt;     purinrecv or purinsend are the easiest to use</div>
<div class="line">[Wednesday 02 February 2011] [20:08:40] &lt;mikko&gt;       hmm</div>
<div class="line">[Wednesday 02 February 2011] [20:08:43] &lt;mikko&gt;       nothing happens</div>
<div class="line">[Wednesday 02 February 2011] [20:08:46] &lt;mikko&gt;       but no errors</div>
<div class="line">[Wednesday 02 February 2011] [20:09:20] &lt;Steve-o&gt;     you can always build them with something like gcc -o purinrecv examples/purinrecv.c <cite>PKG_CONFIG_PATH=. pkg-config &#8211;cflags &#8211;libs</cite></div>
<div class="line">[Wednesday 02 February 2011] [20:09:44] &lt;mikko&gt;       i got purinrecv running</div>
<div class="line">[Wednesday 02 February 2011] [20:09:50] &lt;mikko&gt;       and executing purinsend</div>
<div class="line">[Wednesday 02 February 2011] [20:09:59] &lt;mikko&gt;       should i see something in the receiver?</div>
<div class="line">[Wednesday 02 February 2011] [20:10:10] &lt;Steve-o&gt;     usually if you don&#8217;t see anything it means it&#8217;s picking up the loopback device</div>
<div class="line">[Wednesday 02 February 2011] [20:10:49] &lt;mikko&gt;       Trace: Multicast send interface set to 127.0.1.1 index 0</div>
<div class="line">[Wednesday 02 February 2011] [20:10:51] &lt;mikko&gt;       correct</div>
<div class="line">[Wednesday 02 February 2011] [20:11:14] &lt;Steve-o&gt;     that&#8217;s the /etc/hosts problem correct</div>
<div class="line">[Wednesday 02 February 2011] [20:11:31] &lt;Steve-o&gt;     127.0.1.1 is the default ip for dhcp linux boxes</div>
<div class="line">[Wednesday 02 February 2011] [20:11:45] &lt;Steve-o&gt;     you should have a second entry with the dhcp address</div>
<div class="line">[Wednesday 02 February 2011] [20:12:12] &lt;Steve-o&gt;     but getaddrinfo(&#8216;hostname&#8217;) is returning a different order to what NetworkManager thinks it should</div>
<div class="line">[Wednesday 02 February 2011] [20:12:27] &lt;Steve-o&gt;     so annoying</div>
<div class="line">[Wednesday 02 February 2011] [20:12:38] &lt;mikko&gt;       ok, changed to the eth0 ip but still not seeing anything</div>
<div class="line">[Wednesday 02 February 2011] [20:12:39] &lt;mikko&gt;       odd</div>
<div class="line">[Wednesday 02 February 2011] [20:12:49] &lt;mikko&gt;       Trace: Multicast send interface set to 192.168.192.139 index 0</div>
<div class="line">[Wednesday 02 February 2011] [20:13:30] &lt;Steve-o&gt;     oh, add &#8216;-l&#8217; for loopback</div>
<div class="line">[Wednesday 02 February 2011] [20:13:54] &lt;Steve-o&gt;     it&#8217;s disabled by default</div>
<div class="line">[Wednesday 02 February 2011] [20:14:00] &lt;Steve-o&gt;     doh</div>
<div class="line">[Wednesday 02 February 2011] [20:14:02] &lt;mikko&gt;       ok now seeing something: Trace: Recv again on not-full</div>
<div class="line">[Wednesday 02 February 2011] [20:14:20] &lt;mikko&gt;       in any case, it gets further than with zeromq</div>
<div class="line">[Wednesday 02 February 2011] [20:14:32] &lt;Steve-o&gt;     yup</div>
<div class="line">[Wednesday 02 February 2011] [20:15:55] &lt;mikko&gt;       comparing the results, inside zeromq i dont see this: Trace: Assuming IP header size of 20 bytes</div>
<div class="line">[Wednesday 02 February 2011] [20:16:05] &lt;mikko&gt;       Trace: Request IP headers. is the last line</div>
<div class="line">[Wednesday 02 February 2011] [20:16:10] &lt;Steve-o&gt;     i can try debian in a vm</div>
<div class="line">[Wednesday 02 February 2011] [20:18:50] &lt;mikko&gt;       <a class="reference external" href="https://gist.github.com/dc1855834b6445ef224f">https://gist.github.com/dc1855834b6445ef224f</a></div>
<div class="line">[Wednesday 02 February 2011] [20:18:57] &lt;mikko&gt;       that should be enough to reproduce</div>
<div class="line">[Wednesday 02 February 2011] [20:22:50] &lt;Steve-o&gt;     ok, I&#8217;ll be a bit, I need to reboot into Ubuntu and download &amp; install everything ...</div>
<div class="line">[Wednesday 02 February 2011] [20:22:58] &lt;mikko&gt;       hehe</div>
<div class="line">[Wednesday 02 February 2011] [20:23:03] &lt;mikko&gt;       i think im gonna hit the sack</div>
<div class="line">[Wednesday 02 February 2011] [20:23:07] &lt;mikko&gt;       getting a bit late here</div>
<div class="line">[Wednesday 02 February 2011] [20:23:12] &lt;mikko&gt;       good night</div>
<div class="line">[Wednesday 02 February 2011] [20:23:14] &lt;Steve-o&gt;     I&#8217;ll shoot you a mail</div>
<div class="line">[Wednesday 02 February 2011] [20:23:18] &lt;Steve-o&gt;     night</div>
<div class="line">[Wednesday 02 February 2011] [20:23:19] &lt;mikko&gt;       thanks</div>
<div class="line">[Thursday 03 February 2011] [02:48:17] &lt;CIA-21&gt;       zeromq2: 03Martin Sustrik 07master * rca1acc3 10/ (src/poll.cpp src/poll.hpp):</div>
<div class="line">[Thursday 03 February 2011] [02:48:17] &lt;CIA-21&gt;       zeromq2: RLIMIT_NOFILE not used in poll_t anymore</div>
<div class="line">[Thursday 03 February 2011] [02:48:17] &lt;CIA-21&gt;       zeromq2: The problem was that RLIMIT_NOFILE can be set to RLIM_INIFINITY</div>
<div class="line">[Thursday 03 February 2011] [02:48:17] &lt;CIA-21&gt;       zeromq2: (and that appears to be default on AIX) which caused 0MQ to fail.</div>
<div class="line">[Thursday 03 February 2011] [02:48:17] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/hHEbFN">http://bit.ly/hHEbFN</a></div>
<div class="line">[Thursday 03 February 2011] [02:59:50] &lt;mikko&gt;        good morning</div>
<div class="line">[Thursday 03 February 2011] [03:06:17] &lt;sustrik&gt;      morning</div>
<div class="line">[Thursday 03 February 2011] [03:11:02] &lt;sustrik&gt;      mikko: i&#8217;ve realised you are running solaris builds</div>
<div class="line">[Thursday 03 February 2011] [03:11:17] &lt;sustrik&gt;      is there a chance to test a patch on solaris?</div>
<div class="line">[Thursday 03 February 2011] [03:11:55] &lt;mikko&gt;        sustrik: sure</div>
<div class="line">[Thursday 03 February 2011] [03:12:05] &lt;sustrik&gt;      great</div>
<div class="line">[Thursday 03 February 2011] [03:12:09] &lt;mikko&gt;        i can do it over lunch if its more involved</div>
<div class="line">[Thursday 03 February 2011] [03:12:13] &lt;mikko&gt;        have you got it in github?</div>
<div class="line">[Thursday 03 February 2011] [03:12:22] &lt;sustrik&gt;      nope</div>
<div class="line">[Thursday 03 February 2011] [03:12:32] &lt;sustrik&gt;      the problem is i have no access to solaris box</div>
<div class="line">[Thursday 03 February 2011] [03:12:46] &lt;sustrik&gt;      and i don&#8217;t want to commit something i haven&#8217;t even been able to compile</div>
<div class="line">[Thursday 03 February 2011] [03:13:08] &lt;sustrik&gt;      let me create the patch</div>
<div class="line">[Thursday 03 February 2011] [03:13:17] &lt;sustrik&gt;      we can check whether it builds on solaris</div>
<div class="line">[Thursday 03 February 2011] [03:13:22] &lt;sustrik&gt;      and if so, i&#8217;ll commit it</div>
<div class="line">[Thursday 03 February 2011] [03:13:23] &lt;mikko&gt;        i noticed that default ZMQ_RATE seems to be too small for debian</div>
<div class="line">[Thursday 03 February 2011] [03:13:25] &lt;mikko&gt;        Assertion failed: rc == 0 (connect_session.cpp:82)</div>
<div class="line">[Thursday 03 February 2011] [03:13:51] &lt;mikko&gt;        i can add a separate build on hudson which builds from a specific github branch so you can build when you want</div>
<div class="line">[Thursday 03 February 2011] [03:13:55] &lt;mikko&gt;        would that be useufl?</div>
<div class="line">[Thursday 03 February 2011] [03:14:14] &lt;sustrik&gt;      dunno</div>
<div class="line">[Thursday 03 February 2011] [03:14:23] &lt;sustrik&gt;      in most cases i can build at home</div>
<div class="line">[Thursday 03 February 2011] [03:14:36] &lt;sustrik&gt;      this time the problem is that the code is solaris-specific</div>
<div class="line">[Thursday 03 February 2011] [03:14:43] &lt;mikko&gt;        ok, i can give it a spin</div>
<div class="line">[Thursday 03 February 2011] [03:14:57] &lt;sustrik&gt;      ok, i&#8217;ll send you the patch</div>
<div class="line">[Thursday 03 February 2011] [03:15:01] &lt;sustrik&gt;      no haste though</div>
<div class="line">[Thursday 03 February 2011] [03:17:05] &lt;mikko&gt;        steven suggested adding 1024 to both rxw_sqns and txw_sqns in pgm_socket.cpp</div>
<div class="line">[Thursday 03 February 2011] [03:17:10] &lt;mikko&gt;        but that still seems to be too low</div>
<div class="line">[Thursday 03 February 2011] [03:17:23] &lt;mikko&gt;        sustrik: have you got ubuntu / debian at hand?</div>
<div class="line">[Thursday 03 February 2011] [03:18:05] &lt;mikko&gt;        <a class="reference external" href="https://gist.github.com/b99d73ce2e8759e126fa">https://gist.github.com/b99d73ce2e8759e126fa</a></div>
<div class="line">[Thursday 03 February 2011] [03:18:10] &lt;mikko&gt;        this code should hit assertion</div>
<div class="line">[Thursday 03 February 2011] [03:18:16] &lt;mikko&gt;        it does on debian 5.0</div>
<div class="line">[Thursday 03 February 2011] [03:18:25] &lt;sustrik&gt;      yup, i&#8217;m on ubuntu right now</div>
<div class="line">[Thursday 03 February 2011] [03:19:11] &lt;mikko&gt;        increasing ZMQ_RATE to 100000 solves it for me</div>
<div class="line">[Thursday 03 February 2011] [03:20:31] &lt;sustrik&gt;      let me check the problem</div>
<div class="line">[Thursday 03 February 2011] [03:36:05] &lt;sustrik&gt;      hm</div>
<div class="line">[Thursday 03 February 2011] [03:36:20] &lt;sustrik&gt;      for me it fails here:</div>
<div class="line">[Thursday 03 February 2011] [03:36:22] &lt;sustrik&gt;      153             if (!pgm_setsockopt (sock, IPPROTO_PGM, PGM_UDP_ENCAP_UCAST_PORT,</div>
<div class="line">[Thursday 03 February 2011] [03:36:22] &lt;sustrik&gt;      154                     &amp;encapsulation_port, sizeof (encapsulation_port)) ||</div>
<div class="line">[Thursday 03 February 2011] [03:36:22] &lt;sustrik&gt;      155                 !pgm_setsockopt (sock, IPPROTO_PGM, PGM_UDP_ENCAP_MCAST_PORT,</div>
<div class="line">[Thursday 03 February 2011] [03:36:22] &lt;sustrik&gt;      156                     &amp;encapsulation_port, sizeof (encapsulation_port)))</div>
<div class="line">[Thursday 03 February 2011] [03:36:40] &lt;sustrik&gt;      which has nothing to do with the rate</div>
<div class="line">[Thursday 03 February 2011] [03:37:18] &lt;mikko&gt;        do you run as root?</div>
<div class="line">[Thursday 03 February 2011] [03:37:28] &lt;sustrik&gt;      i&#8217;ve changed the protocol to epgm</div>
<div class="line">[Thursday 03 February 2011] [03:37:40] &lt;sustrik&gt;      no need to be root in such case</div>
<div class="line">[Thursday 03 February 2011] [03:43:51] &lt;sustrik&gt;      mikko: patch sent</div>
<div class="line">[Thursday 03 February 2011] [03:44:05] &lt;sustrik&gt;      when you have few mins free, try it with solaris</div>
<div class="line">[Thursday 03 February 2011] [03:44:06] &lt;sustrik&gt;      thanks</div>
<div class="line">[Thursday 03 February 2011] [03:59:59] &lt;mikko&gt;        sustrik: All 8 tests passed</div>
<div class="line">[Thursday 03 February 2011] [04:00:05] &lt;sustrik&gt;      great</div>
<div class="line">[Thursday 03 February 2011] [04:00:05] &lt;mikko&gt;        solaris studio on solaris</div>
<div class="line">[Thursday 03 February 2011] [04:00:18] &lt;sustrik&gt;      i&#8217;ll apply the patch</div>
<div class="line">[Thursday 03 February 2011] [04:02:10] &lt;CIA-21&gt;       zeromq2: 03Martin Sustrik 07master * r3f758ab 10/ (src/devpoll.cpp src/devpoll.hpp):</div>
<div class="line">[Thursday 03 February 2011] [04:02:10] &lt;CIA-21&gt;       zeromq2: Don&#8217;t use RLIMIT_NOFILES in devpoll_t.</div>
<div class="line">[Thursday 03 February 2011] [04:02:10] &lt;CIA-21&gt;       zeromq2: The patch allows for running 0MQ on Solaris and HP-UX</div>
<div class="line">[Thursday 03 February 2011] [04:02:10] &lt;CIA-21&gt;       zeromq2: even though ulimit for max number of file descriptors</div>
<div class="line">[Thursday 03 February 2011] [04:02:10] &lt;CIA-21&gt;       zeromq2: is set to unlimited.</div>
<div class="line">[Thursday 03 February 2011] [04:02:10] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/hLExdy">http://bit.ly/hLExdy</a></div>
<div class="line">[Thursday 03 February 2011] [05:23:15] &lt;mikko&gt;        hmm</div>
<div class="line">[Thursday 03 February 2011] [05:23:33] &lt;mikko&gt;        on platforms that dont support pic objects is it possible to link static library inside a shared library?</div>
<div class="line">[Thursday 03 February 2011] [05:37:12] &lt;sustrik&gt;      no idea, sorry</div>
<div class="line">[Thursday 03 February 2011] [05:43:19] &lt;[equilibrium]&gt;        ago: l&#8217;ideale  che tu nasconda (per tutti i chan aperti) la fuffa, tipo i parts, quit, nick changes e roba del genere, perch rallentano di brutto il sync</div>
<div class="line">[Thursday 03 February 2011] [05:43:34] &lt;[equilibrium]&gt;        sorry, wrong window, nevermind</div>
<div class="line">[Thursday 03 February 2011] [05:48:13] &lt;mikko&gt;        [equilibrium]: gelato con leche, dos bolas. uno fresa y uno cafe</div>
<div class="line">[Thursday 03 February 2011] [05:48:27] &lt;mikko&gt;        thats what i learned last night</div>
<div class="line">[Thursday 03 February 2011] [05:48:44] &lt;mikko&gt;        hamburguesa con queso y patatas fritas</div>
<div class="line">[Thursday 03 February 2011] [05:50:51] &lt;sustrik&gt;      ha, the original post was in italian :)</div>
<div class="line">[Thursday 03 February 2011] [05:51:18] &lt;sustrik&gt;      how&#8217;s barcelona btw?</div>
<div class="line">[Thursday 03 February 2011] [05:53:39] &lt;sustrik&gt;      or are you in san diego? /me is not quite sure</div>
<div class="line">[Thursday 03 February 2011] [07:08:09] &lt;kabs&gt; Hello, in pub-sub model , if sub starts later and pub started earlier all messages by pub will be dropped. Is there a way to buffer those messages ( with some buffer limit)  so that they can sent to subscriber joining later. Can I get some link to go through it or if it is there in zeroMQ guide can someone point out which section it is ??</div>
<div class="line">[Thursday 03 February 2011] [07:14:05] &lt;sustrik&gt;      how could the PUB socket possibly know that there will be subscriber in the future?</div>
<div class="line">[Thursday 03 February 2011] [07:32:40] &lt;mikko&gt;        sustrik: barcelona at the moment</div>
<div class="line">[Thursday 03 February 2011] [07:32:52] &lt;mikko&gt;        going to san diego end of may</div>
<div class="line">[Thursday 03 February 2011] [09:33:07] Notice -NickServ- travlr__ is not a registered nickname.</div>
<div class="line">[Thursday 03 February 2011] [10:02:45] &lt;udoprog&gt;      Hey, I&#8217;m currently developing a game which will require REQ-REP but also sporadic pushing of information to the client, I&#8217;ve got a picture of how to implement this in twisted, but with additional coding overhead (for framing), I would really like to give zeromq a shot.</div>
<div class="line">[Thursday 03 February 2011] [10:08:57] &lt;mikko&gt;        sure</div>
<div class="line">[Thursday 03 February 2011] [10:09:04] &lt;mikko&gt;        you can even use zeromq with twisted</div>
<div class="line">[Thursday 03 February 2011] [10:17:38] &lt;udoprog&gt;      okey, care to elaborate? do you know of any references I can use?</div>
<div class="line">[Thursday 03 February 2011] [10:42:38] &lt;sustrik&gt;      udoprog: no idea myself, try asking on the mailing list</div>
<div class="line">[Thursday 03 February 2011] [11:26:20] &lt;sustrik&gt;      mikko: what do you think about the system z proposal?</div>
<div class="line">[Thursday 03 February 2011] [13:11:47] &lt;cyball&gt;       hi ... does somebody have some samples of implementing ZMQ_XREP service with ZMQ_REQ clients i could not found any ?</div>
<div class="line">[Thursday 03 February 2011] [13:45:54] &lt;starkdg&gt;      cyball, what doyou mean ?  I think XREP and REQ work fine together.</div>
<div class="line">[Thursday 03 February 2011] [13:46:13] &lt;starkdg&gt;      i mean, ive done it just fine.</div>
<div class="line">[Thursday 03 February 2011] [13:49:37] &lt;cyball&gt;       starkdg: i never said that it does not work i&#8217;m new to ZeroMQ and i&#8217;m a little bit confused because of the description :</div>
<div class="line">[Thursday 03 February 2011] [13:49:38] &lt;cyball&gt;       When a ZMQ_REQ socket is connected to a ZMQ_XREP socket, in addition to the identity of the originating peer each message received shall contain an empty delimiter message part. Hence, the entire structure of each received message as seen by the application becomes: one or more identity parts, delimiter part, one or more body parts. When sending replies to a ZMQ_REQ socket the application must include the delimiter part.</div>
<div class="line">[Thursday 03 February 2011] [13:50:09] &lt;cyball&gt;       what exactly does delimiter part or identity part means ?</div>
<div class="line">[Thursday 03 February 2011] [13:50:34] &lt;starkdg&gt;      i think that&#8217;s just the protocol of the message buffer</div>
<div class="line">[Thursday 03 February 2011] [13:50:39] &lt;cyball&gt;       how should that look like ?</div>
<div class="line">[Thursday 03 February 2011] [13:50:42] &lt;starkdg&gt;      it should work seemlessly for the user</div>
<div class="line">[Thursday 03 February 2011] [13:51:08] &lt;cyball&gt;       ok so i have only to define the constant ZMQ_XREQ in the zqm_socket function ?</div>
<div class="line">[Thursday 03 February 2011] [13:51:08] &lt;starkdg&gt;      i dont know how it actually looks,  maybe you can ask martin or pieter</div>
<div class="line">[Thursday 03 February 2011] [13:51:30] &lt;starkdg&gt;      yeah,  when creating the socket,  just use ZMQ_REQ in the client app</div>
<div class="line">[Thursday 03 February 2011] [13:51:35] &lt;cyball&gt;       ok i should mention that i&#8217;m using the c language</div>
<div class="line">[Thursday 03 February 2011] [13:51:41] &lt;starkdg&gt;      and ZMQ_XREP in the server part</div>
<div class="line">[Thursday 03 February 2011] [13:51:47] &lt;cyball&gt;       ok and that is enough ?</div>
<div class="line">[Thursday 03 February 2011] [13:51:50] &lt;starkdg&gt;      yeah, i use c</div>
<div class="line">[Thursday 03 February 2011] [13:51:58] &lt;starkdg&gt;      yes, that&#8217;s enough</div>
<div class="line">[Thursday 03 February 2011] [13:52:07] &lt;cyball&gt;       starkdg: that&#8217;s great</div>
<div class="line">[Thursday 03 February 2011] [13:52:15] &lt;starkdg&gt;      yeah, it works pretty well</div>
<div class="line">[Thursday 03 February 2011] [13:53:39] &lt;cyball&gt;       ok i will give it a try :) thx a lot you saved my brain from burning :)</div>
<div class="line">[Thursday 03 February 2011] [13:55:25] &lt;cyball&gt;       one more question ... if i understood this stuff well ... the ZMQ_REQ waits until the response from the ZMQ_XREP returnes before sending a new request ? is that right ?</div>
<div class="line">[Thursday 03 February 2011] [14:12:08] &lt;cyball&gt;       starkdg: do you have an hello world sample for that ?</div>
<div class="line">[Thursday 03 February 2011] [14:12:21] &lt;starkdg&gt;      no i dont</div>
<div class="line">[Thursday 03 February 2011] [14:12:32] &lt;starkdg&gt;      let me see if i can find it</div>
<div class="line">[Thursday 03 February 2011] [14:14:16] &lt;starkdg&gt;      wow, they&#8217;ve been busy , its all different now !</div>
<div class="line">[Thursday 03 February 2011] [14:14:55] &lt;starkdg&gt;      I can give you a link to my project which uses zeromq ,   that might takes some sorting through though</div>
<div class="line">[Thursday 03 February 2011] [14:16:07] &lt;cyball&gt;       starkdg: that would be great ... i try to find out how to use it :)</div>
<div class="line">[Thursday 03 February 2011] [14:16:17] &lt;starkdg&gt;      cyball:  you can pick through the source here: <a class="reference external" href="http://code.google.com/p/audioscout/">http://code.google.com/p/audioscout/</a></div>
<div class="line">[Thursday 03 February 2011] [14:16:36] &lt;starkdg&gt;      that&#8217;s my project i&#8217;m working on ,  the source you can browse through, or download the project</div>
<div class="line">[Thursday 03 February 2011] [14:18:03] &lt;cyball&gt;       ok thx a lot i&#8217;ve found already the client code with ZMQ_REQ :-)</div>
<div class="line">[Thursday 03 February 2011] [14:18:35] &lt;starkdg&gt;      yeah, the code with XREP you will see in auscout.c</div>
<div class="line">[Thursday 03 February 2011] [14:18:53] &lt;guido_g&gt;      for examples and explanations always see <a class="reference external" href="http://zguide.zeromq.org/chapter:all">http://zguide.zeromq.org/chapter:all</a></div>
<div class="line">[Thursday 03 February 2011] [14:19:37] &lt;guido_g&gt;      advanced routing stuff is in chapter three</div>
<div class="line">[Thursday 03 February 2011] [14:20:00] &lt;starkdg&gt;      guido_g: he was looking for an example of using REQ socket connecting to XREP ,  i couldnt find that specific example.</div>
<div class="line">[Thursday 03 February 2011] [14:20:04] &lt;guido_g&gt;      it also explains the parts of req/rep messages and shows some tricks</div>
<div class="line">[Thursday 03 February 2011] [14:20:31] &lt;starkdg&gt;      ive noticed things have been busy on the site,  alot more additions.</div>
<div class="line">[Thursday 03 February 2011] [14:24:37] &lt;cyball&gt;       guido_g: thx a lot i&#8217;ve found now the samples for ZMQ_REQ and ZMQ_XREP</div>
<div class="line">[Thursday 03 February 2011] [14:25:04] &lt;cyball&gt;       i think it should be enoug information for now -.... :-) thx for helping</div>
<div class="line">[Thursday 03 February 2011] [14:25:29] &lt;cyball&gt;       by the way ... ZeroMQ is really a great think :)</div>
<div class="line">[Thursday 03 February 2011] [14:31:22] &lt;Slurpy&gt;       hello</div>
<div class="line">[Thursday 03 February 2011] [14:38:02] &lt;Slurpy&gt;       I have a bit of a high-level question regarding the use of 0mq.  Ultimately I think I understand the examples in the documentation.  I have a business need where I can have logical queues that are serviced by more than 1 process (or server).  I&#8217;m wondering if there is a pattern that makes sense with 0mq.  I know a client can connect to multiple sockets, so I can have more than one server serving a logical connection.  Seems a bit mess</div>
<div class="line">[Thursday 03 February 2011] [14:45:35] &lt;sustrik&gt;      Slurpy: what you want afaiu is having a device in the middle</div>
<div class="line">[Thursday 03 February 2011] [14:47:10] &lt;guido_g&gt;      and, of course, reading the guide :)</div>
<div class="line">[Thursday 03 February 2011] [15:12:54] &lt;cremes&gt;       cyball: <a class="reference external" href="http://www.zeromq.org/tutorials:xreq-and-xrep">http://www.zeromq.org/tutorials:xreq-and-xrep</a></div>
<div class="line">[Thursday 03 February 2011] [15:13:10] &lt;cremes&gt;       for some reason that doc doesn&#8217;t show up on any of the community pages</div>
<div class="line">[Thursday 03 February 2011] [15:13:15] &lt;cremes&gt;       you can only find it by searching for it</div>
<div class="line">[Thursday 03 February 2011] [15:21:36] &lt;cyball&gt;       cremes: thx</div>
<div class="line">[Thursday 03 February 2011] [15:22:07] &lt;sustrik&gt;      looks like there are some inaccessible pages on the website</div>
<div class="line">[Thursday 03 February 2011] [15:22:18] &lt;sustrik&gt;      presumably, some reorg is needed</div>
<div class="line">[Thursday 03 February 2011] [15:22:41] &lt;cremes&gt;       yep, all of the tutorials are orphaned</div>
<div class="line">[Thursday 03 February 2011] [15:24:07] &lt;sustrik&gt;      should we introduce a &#8220;tutorial&#8221; section?</div>
<div class="line">[Thursday 03 February 2011] [15:24:20] &lt;sustrik&gt;      or does it fit somewhere else?</div>
<div class="line">[Thursday 03 February 2011] [15:24:30] &lt;sustrik&gt;      whitepapers maybe?</div>
<div class="line">[Thursday 03 February 2011] [15:24:38] &lt;sustrik&gt;      rename whitepaper-&gt;articles</div>
<div class="line">[Thursday 03 February 2011] [15:24:43] &lt;sustrik&gt;      and place tutorials there?</div>
<div class="line">[Thursday 03 February 2011] [15:27:09] &lt;cremes&gt;       i think we should add back a tutorials page</div>
<div class="line">[Thursday 03 February 2011] [15:27:15] &lt;guido_g&gt;      imho articles section would be a good idea</div>
<div class="line">[Thursday 03 February 2011] [15:30:49] &lt;cyball&gt;       i have found this really nice multithreaded hello world server is it possible to get some subscriber do the work of the threads ?</div>
<div class="line">[Thursday 03 February 2011] [15:30:53] &lt;guido_g&gt;      anyhow, a cleanup would be nice, some links lead to non-existing pages</div>
<div class="line">[Thursday 03 February 2011] [15:31:26] &lt;guido_g&gt;      like <a class="reference external" href="http://www.zeromq.org/tutorials:traffic-monitoring">http://www.zeromq.org/tutorials:traffic-monitoring</a></div>
<div class="line">[Thursday 03 February 2011] [15:36:52] &lt;sustrik&gt;      where&#8217;s the link?</div>
<div class="line">[Thursday 03 February 2011] [15:38:38] &lt;guido_g&gt;      <a class="reference external" href="http://www.zeromq.org/area:whitepapers">http://www.zeromq.org/area:whitepapers</a>  &lt;- Traffic monitoring</div>
<div class="line">[Thursday 03 February 2011] [15:40:51] &lt;cyball&gt;       there is also no working link to the zqm_device function</div>
<div class="line">[Thursday 03 February 2011] [15:41:53] &lt;cyball&gt;       <a class="reference external" href="http://api.zeromq.org/zmq_device.html">http://api.zeromq.org/zmq_device.html</a></div>
<div class="line">[Thursday 03 February 2011] [15:42:14] &lt;sustrik&gt;      guido_g: ok, removed</div>
<div class="line">[Thursday 03 February 2011] [15:42:25] &lt;sustrik&gt;      cyball: where&#8217;s the link?</div>
<div class="line">[Thursday 03 February 2011] [15:43:02] &lt;guido_g&gt;      sustrik: great, thanks!</div>
<div class="line">[Thursday 03 February 2011] [15:43:22] &lt;cyball&gt;       <a class="reference external" href="http://zguide.zeromq.org/chapter:all">http://zguide.zeromq.org/chapter:all</a> #Built in Devices under Figure 20</div>
<div class="line">[Thursday 03 February 2011] [15:45:36] &lt;sustrik&gt;      actually, it turns out there&#8217;s in no zmq_device man page</div>
<div class="line">[Thursday 03 February 2011] [15:45:48] &lt;sustrik&gt;      i wonder how that link have got into the guide</div>
<div class="line">[Thursday 03 February 2011] [15:47:08] &lt;cyball&gt;       sustrik: that is act of nature behind control :)</div>
<div class="line">[Thursday 03 February 2011] [15:47:20] &lt;sustrik&gt;      :)</div>
<div class="line">[Thursday 03 February 2011] [15:49:47] &lt;cyball&gt;       is it possible to replace the workers in the multithreaded hello world sample with subscribers ? that was the reason checking out zmq_device there seems to be a FORWARDER flag ... could that be a solution ? :)</div>
<div class="line">[Thursday 03 February 2011] [15:50:28] &lt;sustrik&gt;      you need a PUB/SUB device, right?</div>
<div class="line">[Thursday 03 February 2011] [15:50:39] &lt;sustrik&gt;      if so, yes, use forwarder device</div>
<div class="line">[Thursday 03 February 2011] [15:52:18] &lt;cyball&gt;       sustrik: but which parameter does it need .... for the clients workes it is fine rmq_device(FORWARDER, clients, ????) but i do not have subscribers or somethink similar ...</div>
<div class="line">[Thursday 03 February 2011] [15:52:57] &lt;sustrik&gt;      ?</div>
<div class="line">[Thursday 03 February 2011] [15:53:26] &lt;cyball&gt;       ohhh sorry i got it now</div>
<div class="line">[Thursday 03 February 2011] [15:53:42] &lt;cyball&gt;       it was a little bit misunderstood because of the words clients and workers</div>
<div class="line">[Thursday 03 February 2011] [15:53:47] &lt;guido_g&gt;      btw, it&#8217;s all in the guide</div>
<div class="line">[Thursday 03 February 2011] [15:54:02] &lt;cyball&gt;       yes sorry i realized to late that this are sockets</div>
<div class="line">[Thursday 03 February 2011] [15:54:15] &lt;cyball&gt;       i guess i need a break</div>
<div class="line">[Thursday 03 February 2011] [15:54:16] &lt;cyball&gt;       :)</div>
<div class="line">[Thursday 03 February 2011] [15:58:05] &lt;_jud&gt; hey sustrik: what is the current status of xpub/xsub w/ pub side filtering?</div>
<div class="line">[Thursday 03 February 2011] [16:05:56] &lt;sustrik&gt;      _jud: the ongoing work is on sub-forward branch</div>
<div class="line">[Thursday 03 February 2011] [16:06:33] &lt;sustrik&gt;      it propagates the subscriptions upstream</div>
<div class="line">[Thursday 03 February 2011] [16:06:48] &lt;sustrik&gt;      what&#8217;s missing is actual filtering on pub side</div>
<div class="line">[Thursday 03 February 2011] [16:07:18] &lt;_jud&gt; I have been trying to keep up on the mailing list</div>
<div class="line">[Thursday 03 February 2011] [16:08:54] &lt;jhawk28&gt;      silly question: what will it be called when the xpub gets extended?</div>
<div class="line">[Thursday 03 February 2011] [16:09:01] &lt;jhawk28&gt;      :)</div>
<div class="line">[Thursday 03 February 2011] [16:09:03] &lt;_jud&gt; I&#8217;ve been wanting to use 0mq in a ticker plant</div>
<div class="line">[Thursday 03 February 2011] [16:10:46] &lt;sustrik&gt;      _jud: yeah, subscription forwarding is what&#8217;s missing for 0mq to be a sane option for market data distribution</div>
<div class="line">[Thursday 03 February 2011] [16:11:01] &lt;sustrik&gt;      jhawk28: yes, the names are lame</div>
<div class="line">[Thursday 03 February 2011] [16:11:22] &lt;sustrik&gt;      it&#8217;s actually two layers of the stack</div>
<div class="line">[Thursday 03 February 2011] [16:11:29] &lt;sustrik&gt;      X sockets are like IP</div>
<div class="line">[Thursday 03 February 2011] [16:11:35] &lt;sustrik&gt;      non-X sockets are like TCP</div>
<div class="line">[Thursday 03 February 2011] [16:11:49] &lt;sustrik&gt;      no idea how to formalise that decently</div>
<div class="line">[Thursday 03 February 2011] [16:12:59] &lt;_jud&gt; sustrik: when you say sub forwarding - I assume that encompasses pub filtering also?</div>
<div class="line">[Thursday 03 February 2011] [16:13:09] &lt;sustrik&gt;      yes</div>
<div class="line">[Thursday 03 February 2011] [16:13:34] &lt;sustrik&gt;      the whole thing consist from two parts</div>
<div class="line">[Thursday 03 February 2011] [16:13:43] &lt;sustrik&gt;      1. pass the subsription upstream</div>
<div class="line">[Thursday 03 February 2011] [16:13:52] &lt;sustrik&gt;      2. do the filtering on the most upstream node</div>
<div class="line">[Thursday 03 February 2011] [16:14:52] &lt;_jud&gt; in regular pub/sub, all nodes just rebroadcast, correct?</div>
<div class="line">[Thursday 03 February 2011] [16:15:10] &lt;sustrik&gt;      right</div>
<div class="line">[Thursday 03 February 2011] [16:15:31] &lt;sustrik&gt;      that&#8217;s the way it work now</div>
<div class="line">[Thursday 03 February 2011] [16:15:35] &lt;_jud&gt; just trying to clear up my surface knowledge of the 0mq layout</div>
<div class="line">[Thursday 03 February 2011] [16:16:00] &lt;_jud&gt; I will be monitoring the sub-forward branch</div>
<div class="line">[Thursday 03 February 2011] [16:16:03] &lt;sustrik&gt;      ah, you are asking about distinction beween X and non-X sockets, right?</div>
<div class="line">[Thursday 03 February 2011] [16:16:34] &lt;_jud&gt; well, yes</div>
<div class="line">[Thursday 03 February 2011] [16:17:03] &lt;sustrik&gt;      X sockets are to be used by intermediate nodes</div>
<div class="line">[Thursday 03 February 2011] [16:17:19] &lt;sustrik&gt;      you can recv() a subsctiption on XPUB socket</div>
<div class="line">[Thursday 03 February 2011] [16:17:33] &lt;sustrik&gt;      and send() a subscription to XSUB socket</div>
<div class="line">[Thursday 03 February 2011] [16:17:44] &lt;sustrik&gt;      PUB and SUB are for endpoints</div>
<div class="line">[Thursday 03 February 2011] [16:18:08] &lt;sustrik&gt;      the subsctiption are mananged automatically for you</div>
<div class="line">[Thursday 03 February 2011] [16:18:21] &lt;sustrik&gt;      no need to explicitly send/recv them</div>
<div class="line">[Thursday 03 February 2011] [16:19:20] &lt;_jud&gt; so when pub filtering is implimented</div>
<div class="line">[Thursday 03 February 2011] [16:19:39] &lt;_jud&gt; it won&#8217;t require the use of X sockets unless their are intermediaries?</div>
<div class="line">[Thursday 03 February 2011] [16:20:51] &lt;sustrik&gt;      yes</div>
<div class="line">[Thursday 03 February 2011] [16:20:59] &lt;sustrik&gt;      it will be opaque for you</div>
<div class="line">[Thursday 03 February 2011] [16:21:04] &lt;_jud&gt; ahhh</div>
<div class="line">[Thursday 03 February 2011] [16:21:15] &lt;sustrik&gt;      X sockets are meant only for implemeting devices</div>
<div class="line">[Thursday 03 February 2011] [16:21:42] &lt;sustrik&gt;      it&#8217;s similar to IP</div>
<div class="line">[Thursday 03 February 2011] [16:21:51] &lt;sustrik&gt;      normally, you don&#8217;t use IP directly</div>
<div class="line">[Thursday 03 February 2011] [16:21:57] &lt;_jud&gt; ah, thanks for clearing that up</div>
<div class="line">[Thursday 03 February 2011] [16:22:04] &lt;sustrik&gt;      unless you want to implement a router or somesuch</div>
<div class="line">[Thursday 03 February 2011] [16:22:37] &lt;_jud&gt; thanks for that sustrik</div>
<div class="line">[Thursday 03 February 2011] [19:10:30] &lt;cyball&gt;       hi ... is there a way to read a message and after that to send it to a message queue ?</div>
<div class="line">[Thursday 03 February 2011] [19:11:03] &lt;cyball&gt;       or to switch between message types ?</div>
<div class="line">[Thursday 03 February 2011] [19:58:04] &lt;mikko&gt;        cyball: what do you mean?</div>
<div class="line">[Thursday 03 February 2011] [20:00:23] &lt;hero&gt; hi</div>
<div class="line">[Thursday 03 February 2011] [20:00:28] &lt;mikko&gt;        hello</div>
<div class="line">[Thursday 03 February 2011] [20:01:16] &lt;nathanmarz&gt;   i&#8217;m getting some strange errors from zeromq</div>
<div class="line">[Thursday 03 February 2011] [20:01:33] &lt;stodge&gt;       Is there a performance hit using the Java bindings for zeromq? I assume it uses jini?</div>
<div class="line">[Thursday 03 February 2011] [20:02:04] &lt;mikko&gt;        stodge: yes, it uses jni</div>
<div class="line">[Thursday 03 February 2011] [20:02:20] &lt;stodge&gt;       So I presume there&#8217;s a performance hit?</div>
<div class="line">[Thursday 03 February 2011] [20:02:24] &lt;mikko&gt;        stodge: performance hit compared to what?</div>
<div class="line">[Thursday 03 February 2011] [20:02:44] &lt;stodge&gt;       If it were a native java app with no jini calls</div>
<div class="line">[Thursday 03 February 2011] [20:02:51] &lt;stodge&gt;       Significant</div>
<div class="line">[Thursday 03 February 2011] [20:03:09] &lt;stodge&gt;       Maybe that&#8217;s not a reaonable question</div>
<div class="line">[Thursday 03 February 2011] [20:03:56] &lt;mikko&gt;        i dont really know the amount of overhead jni adds</div>
<div class="line">[Thursday 03 February 2011] [20:04:57] &lt;stodge&gt;       Me either</div>
<div class="line">[Thursday 03 February 2011] [20:04:58] &lt;stodge&gt;       :)</div>
<div class="line">[Thursday 03 February 2011] [20:05:51] &lt;mikko&gt;        but having native java app would mean replicating all zeromq logic in java</div>
<div class="line">[Thursday 03 February 2011] [20:05:56] &lt;mikko&gt;        so that doesnt seem appealing</div>
<div class="line">[Thursday 03 February 2011] [20:06:23] &lt;stodge&gt;       true</div>
<div class="line">[Thursday 03 February 2011] [20:06:57] &lt;stodge&gt;       I don&#8217;t meant this in a negative sense, but I understand that rabbitmq has a native java library?</div>
<div class="line">[Thursday 03 February 2011] [20:07:58] &lt;stodge&gt;       I could be wrong</div>
<div class="line">[Thursday 03 February 2011] [20:08:34] &lt;mikko&gt;        probably almost any amqp client could communicate with it</div>
<div class="line">[Thursday 03 February 2011] [20:08:49] &lt;stodge&gt;       true</div>
<div class="line">[Thursday 03 February 2011] [20:09:04] &lt;stodge&gt;       zeromq has reliable multicast? Still reading through that long doc</div>
<div class="line">[Thursday 03 February 2011] [20:10:26] &lt;stodge&gt;       Ah pgm</div>
<div class="line">[Thursday 03 February 2011] [20:17:40] &lt;stodge&gt;       Hmm anyone know of a python/zeromq example of pgm</div>
<div class="line">[Thursday 03 February 2011] [20:26:04] &lt;mikko&gt;        stodge: its not really much different from using any other transport</div>
<div class="line">[Thursday 03 February 2011] [20:26:07] &lt;mikko&gt;        just different dsn</div>
<div class="line">[Thursday 03 February 2011] [20:26:37] &lt;mikko&gt;        anyways, off to bed</div>
<div class="line">[Thursday 03 February 2011] [20:26:37] &lt;mikko&gt;        nn</div>
<div class="line">[Thursday 03 February 2011] [20:38:52] &lt;stodge&gt;       thanks</div>
<div class="line">[Friday 04 February 2011] [00:31:28] &lt;kabs&gt;   As per my question above &#8220;Hello, in pub-sub model , if sub starts later and pub started earlier all messages by pub will be dropped. Is there a way to buffer those messages ( with some buffer limit) so that they can sent to subscriber joining later. Can I get some link to go through it or if it is there in zeroMQ guide can someone point out which section it is ??&#8221;</div>
<div class="line">[Friday 04 February 2011] [00:32:22] &lt;kabs&gt;   sustrik:Then how can be sync pub-sub there in one way in the zeroMQ guide , in chapter 2 in Node Coordination section, but it expect us pub to know the number of subscriber which is not a real world scenerio , how can be sync up pub-sub</div>
<div class="line">[Friday 04 February 2011] [01:36:44] &lt;cyball&gt; mikko: i mean is there a way to have a look inside the message to define the type of the message an base o that to rout the request to a queue that can handle the message type ?</div>
<div class="line">[Friday 04 February 2011] [01:40:14] &lt;guido_g&gt;        cyball: see the guide, there is a lot about routing</div>
<div class="line">[Friday 04 February 2011] [01:40:14] &lt;guido_g&gt;        and: you&#8217;re defining what&#8217;s in the message, mq doesn&#8217;t do anything w/ the your payload</div>
<div class="line">[Friday 04 February 2011] [01:40:14] &lt;guido_g&gt;        s/your//</div>
<div class="line">[Friday 04 February 2011] [01:40:22] &lt;cyball&gt; guido_g: yes i know ... it is some times much easier to aks first if it is there or not :)</div>
<div class="line">[Friday 04 February 2011] [01:43:11] &lt;guido_g&gt;        cyball: sure, why invest your own time when you can waste the time of others</div>
<div class="line">[Friday 04 February 2011] [01:43:30] &lt;guido_g&gt;        cyball: it&#8217;s a very fast and safe way to be ignored</div>
<div class="line">[Friday 04 February 2011] [01:45:19] &lt;cyball&gt; guido_g: it was not my intention to waste the time of others ... and i do not think that the question was about that but by the way discussions like the one we have now is time wasting :)</div>
<div class="line">[Friday 04 February 2011] [01:46:28] &lt;guido_g&gt;        cyball: sure, from your point of view</div>
<div class="line">[Friday 04 February 2011] [01:48:03] &lt;guido_g&gt;        cyball: but given that you showed nearly no effort in understanding mq since you&#8217;re here, it is not a waste of time &#8211; from my point of view</div>
<div class="line">[Friday 04 February 2011] [01:50:08] &lt;cyball&gt; guido_g: i would not say that ... it is sometimes hard to understand written words ... and in some cases it is more efficient to have an discussion about a think to proof also if the idea of the system you want to write is really good or only bullsh*t :)</div>
<div class="line">[Friday 04 February 2011] [01:51:31] &lt;guido_g&gt;        unfortunately does a &#8220;discussion&#8221; require both sides to something about the topic</div>
<div class="line">[Friday 04 February 2011] [01:51:38] &lt;guido_g&gt;        <a href="#id1"><span class="problematic" id="id2">*</span></a>to know</div>
<div class="line">[Friday 04 February 2011] [01:52:23] &lt;cyball&gt; guido_g: i would say the conversation in alwas the key to success but you&#8217;re right about the fact that i do not read all the documentation but if there are such great people like you it is much easier to get involved that is in my point of view the main fact of a community or not ?</div>
<div class="line">[Friday 04 February 2011] [01:53:14] &lt;guido_g&gt;        no</div>
<div class="line">[Friday 04 February 2011] [01:53:50] &lt;guido_g&gt;        experience shows that less than 10% of people like you ever come back and contribute</div>
<div class="line">[Friday 04 February 2011] [01:56:10] &lt;cyball&gt; you&#8217;re right but i guess that i belong to the 10% ... i&#8217;m not a scripting kiddy who makes a lot of fun trying something out and through it away after playing with it ... there is a lot more behind my intention than only have a look on zeromq :)</div>
<div class="line">[Friday 04 February 2011] [01:56:51] &lt;cyball&gt; but also this information is something you can ask .... as i mentioned i will answer to it and i will contribute if i know enough about it ... this system as i mentioned yesterday is really really great</div>
<div class="line">[Friday 04 February 2011] [01:58:51] &lt;cyball&gt; i was looking forward to write myself such a system for communication for my project i&#8217;m developing at the moment so that was the reason checking out some of them ... and 0mq is the only one fits to my needs :)</div>
<div class="line">[Friday 04 February 2011] [02:06:07] &lt;guido_g&gt;        guess how often i must have read things like these...</div>
<div class="line">[Friday 04 February 2011] [02:07:02] &lt;guido_g&gt;        in short agin: show your effort and you&#8217;ll receive much more answers and insight</div>
<div class="line">[Friday 04 February 2011] [02:07:05] &lt;cyball&gt; probably every time of the 90% from the of the people do not belong to the 10% you mentioned ? :)</div>
<div class="line">[Friday 04 February 2011] [02:07:22] &lt;guido_g&gt;        what?</div>
<div class="line">[Friday 04 February 2011] [02:07:48] &lt;cyball&gt; i guess you read this very often</div>
<div class="line">[Friday 04 February 2011] [02:07:55] &lt;guido_g&gt;        right</div>
<div class="line">[Friday 04 February 2011] [02:08:00] &lt;guido_g&gt;        for decades</div>
<div class="line">[Friday 04 February 2011] [02:13:40] &lt;cyball&gt; ok i will have a look on the manual now ... you have a lot of experinces and you are still patient ... thx for your time i will ask if there is something not clear in the manual :)</div>
<div class="line">[Friday 04 February 2011] [02:13:52] &lt;sustrik&gt;        :)</div>
<div class="line">[Friday 04 February 2011] [03:57:34] &lt;Guthur&gt; is there a limit of how many subscribers can simultaneously connect to tcp publisher?</div>
<div class="line">[Friday 04 February 2011] [03:59:36] &lt;mikko&gt;  Guthur: no, not really</div>
<div class="line">[Friday 04 February 2011] [03:59:46] &lt;mikko&gt;  apart from the obvious limits of hardware / operating system etc</div>
<div class="line">[Friday 04 February 2011] [04:01:23] &lt;Guthur&gt; i seem to be getting an unhandled exception when I try to connect multiple times, if I put in a wait it is ok</div>
<div class="line">[Friday 04 February 2011] [04:01:30] &lt;Guthur&gt; I am using the CLR binding</div>
<div class="line">[Friday 04 February 2011] [04:01:58] &lt;mikko&gt;  Guthur: which exception is it?</div>
<div class="line">[Friday 04 February 2011] [04:02:46] &lt;Guthur&gt; that&#8217;s the horrible thing, it passes through the .NET app unhandled, so it just says unhandle exception in win32 code</div>
<div class="line">[Friday 04 February 2011] [04:03:10] &lt;mikko&gt;  can you attach a debugger and check ?</div>
<div class="line">[Friday 04 February 2011] [04:03:25] &lt;Guthur&gt; I probably have implement a global unhandled exception handler to catch it</div>
<div class="line">[Friday 04 February 2011] [04:03:35] &lt;mikko&gt;  have you tried to reproduce it on other machines?</div>
<div class="line">[Friday 04 February 2011] [04:03:46] &lt;mikko&gt;  if it&#8217;s reproducable you could open an issue with reproduce code</div>
<div class="line">[Friday 04 February 2011] [04:04:09] &lt;sustrik&gt;        Guthur: are you saying that clrzmq throws a generic exception?</div>
<div class="line">[Friday 04 February 2011] [04:04:20] &lt;sustrik&gt;        then it&#8217;s a bug in clrzmq</div>
<div class="line">[Friday 04 February 2011] [04:04:27] &lt;mikko&gt;  sustrik: i think it might be C++ exception from unmanaged code</div>
<div class="line">[Friday 04 February 2011] [04:04:35] &lt;mikko&gt;  which bubbles up and terminates the program</div>
<div class="line">[Friday 04 February 2011] [04:04:39] &lt;mikko&gt;  (i assume)</div>
<div class="line">[Friday 04 February 2011] [04:04:40] &lt;sustrik&gt;        what does that mean?</div>
<div class="line">[Friday 04 February 2011] [04:04:49] &lt;sustrik&gt;        ah</div>
<div class="line">[Friday 04 February 2011] [04:04:51] &lt;sustrik&gt;        got it</div>
<div class="line">[Friday 04 February 2011] [04:05:07] &lt;sustrik&gt;        a C++ exception that gets to C# code</div>
<div class="line">[Friday 04 February 2011] [04:05:19] &lt;mikko&gt;  thats how i understood it</div>
<div class="line">[Friday 04 February 2011] [04:05:19] &lt;Guthur&gt; yeah, clr does provide a mechanism to catch these though, I&#8217;ll try adding it</div>
<div class="line">[Friday 04 February 2011] [04:05:33] &lt;sustrik&gt;        wait a sec</div>
<div class="line">[Friday 04 February 2011] [04:05:39] &lt;sustrik&gt;        clrzmq is using C API</div>
<div class="line">[Friday 04 February 2011] [04:05:44] &lt;sustrik&gt;        not C++ API</div>
<div class="line">[Friday 04 February 2011] [04:05:46] &lt;sustrik&gt;        underneath</div>
<div class="line">[Friday 04 February 2011] [04:05:53] &lt;sustrik&gt;        so there should be no C++ exceptions</div>
<div class="line">[Friday 04 February 2011] [04:06:24] &lt;sustrik&gt;        C API returns errnos...</div>
<div class="line">[Friday 04 February 2011] [04:07:14] &lt;Guthur&gt; I should be catching any exceptions in the clrzmq code</div>
<div class="line">[Friday 04 February 2011] [04:07:18] &lt;Guthur&gt; it is very strange</div>
<div class="line">[Friday 04 February 2011] [04:07:40] &lt;sustrik&gt;        what i&#8217;m saying is that there are no exceptions from 0mq</div>
<div class="line">[Friday 04 February 2011] [04:07:59] &lt;sustrik&gt;        so if there&#8217;s an exception is rather generated by clrzmq</div>
<div class="line">[Friday 04 February 2011] [04:08:41] &lt;sustrik&gt;        what&#8217;s the win32 err code you are getting btw?</div>
<div class="line">[Friday 04 February 2011] [04:09:11] &lt;Guthur&gt; 1 min</div>
<div class="line">[Friday 04 February 2011] [04:09:58] &lt;Guthur&gt; i get the JIT debugger saying unhandled win32 exception</div>
<div class="line">[Friday 04 February 2011] [04:10:23] &lt;sustrik&gt;        no further info?</div>
<div class="line">[Friday 04 February 2011] [04:11:03] &lt;sustrik&gt;        mikko: btw have you seen the email from neale?</div>
<div class="line">[Friday 04 February 2011] [04:11:28] &lt;sustrik&gt;        the one about system z</div>
<div class="line">[Friday 04 February 2011] [04:12:18] &lt;Guthur&gt; sustrik: No, it just asks to connect the debugger, but the problem is a debugger is already attached, I am running the server app in visual studio in debug mode</div>
<div class="line">[Friday 04 February 2011] [04:12:50] &lt;sustrik&gt;        yuck :(</div>
<div class="line">[Friday 04 February 2011] [04:12:57] &lt;Guthur&gt; yeah tell me about it</div>
<div class="line">[Friday 04 February 2011] [04:14:33] &lt;Guthur&gt; I&#8217;ll add the global handler and see if I get anything more meaninful</div>
<div class="line">[Friday 04 February 2011] [04:14:39] &lt;sustrik&gt;        ok</div>
<div class="line">[Friday 04 February 2011] [04:18:08] &lt;mikko&gt;  sustrik: i was just replying it</div>
<div class="line">[Friday 04 February 2011] [04:18:19] &lt;mikko&gt;  replying to it</div>
<div class="line">[Friday 04 February 2011] [04:18:42] &lt;mikko&gt;  oddly enough on windows the openpgm installation just disappears occasionally</div>
<div class="line">[Friday 04 February 2011] [04:18:48] &lt;mikko&gt;  havent really figured out yet what happens</div>
<div class="line">[Friday 04 February 2011] [04:19:02] &lt;mikko&gt;  but in any case we have a release build with ZeroMQ+OpenPGM for windows</div>
<div class="line">[Friday 04 February 2011] [04:19:26] &lt;mikko&gt;  <a class="reference external" href="http://snapshot.valokuva.org/msvc2008/2011-02-04_09-09-05/">http://snapshot.valokuva.org/msvc2008/2011-02-04_09-09-05/</a> is built from WithOpenPGM configuration</div>
<div class="line">[Friday 04 February 2011] [04:31:39] &lt;Guthur&gt; the debugger seems to say libzmq is C++</div>
<div class="line">[Friday 04 February 2011] [04:32:04] &lt;Guthur&gt; I got a debugger attached, all I have is the stack trace though</div>
<div class="line">[Friday 04 February 2011] [04:33:33] &lt;Guthur&gt; <a class="reference external" href="http://paste.lisp.org/display/119368">http://paste.lisp.org/display/119368</a></div>
<div class="line">[Friday 04 February 2011] [04:37:00] &lt;sustrik&gt;        mikko: congrats!</div>
<div class="line">[Friday 04 February 2011] [04:37:36] &lt;sustrik&gt;        Guthur: it&#8217;s in C++</div>
<div class="line">[Friday 04 February 2011] [04:37:41] &lt;sustrik&gt;        but the API is pure C</div>
<div class="line">[Friday 04 February 2011] [04:38:10] &lt;sustrik&gt;        so no exceptions should pass out of libzmq</div>
<div class="line">[Friday 04 February 2011] [04:38:13] &lt;Guthur&gt; sustrik: does the stack trace give an clues?</div>
<div class="line">[Friday 04 February 2011] [04:38:20] &lt;Guthur&gt; an,any</div>
<div class="line">[Friday 04 February 2011] [04:38:33] &lt;sustrik&gt;        sure, let&#8217;s have a look</div>
<div class="line">[Friday 04 February 2011] [04:38:43] &lt;mikko&gt;  abort()</div>
<div class="line">[Friday 04 February 2011] [04:38:48] &lt;mikko&gt;  seems to be an assertion</div>
<div class="line">[Friday 04 February 2011] [04:41:43] &lt;sustrik&gt;        Guthur: what version of 0mq?</div>
<div class="line">[Friday 04 February 2011] [04:42:26] &lt;Guthur&gt; 2.0.10</div>
<div class="line">[Friday 04 February 2011] [04:43:02] &lt;sustrik&gt;        thx</div>
<div class="line">[Friday 04 February 2011] [04:44:39] &lt;sustrik&gt;        Guthur: i think this is the patch fixed by dhammika in 2.1 some time ago</div>
<div class="line">[Friday 04 February 2011] [04:44:47] &lt;sustrik&gt;        can you check with latest master?</div>
<div class="line">[Friday 04 February 2011] [04:45:05] &lt;Guthur&gt; just trying that now, hehe</div>
<div class="line">[Friday 04 February 2011] [04:45:17] &lt;Guthur&gt; sorry it never occurred to me to try before</div>
<div class="line">[Friday 04 February 2011] [05:07:18] &lt;Guthur&gt; I am getting the same with 2.1</div>
<div class="line">[Friday 04 February 2011] [05:07:23] &lt;Guthur&gt; same trace as well</div>
<div class="line">[Friday 04 February 2011] [05:11:35] &lt;Guthur&gt; oh wait I think this is my fault</div>
<div class="line">[Friday 04 February 2011] [05:11:56] &lt;Guthur&gt; what is suppose to happen if two sockets try to connect with the same identity</div>
<div class="line">[Friday 04 February 2011] [05:12:30] &lt;sustrik&gt;        you shouldn&#8217;t do that</div>
<div class="line">[Friday 04 February 2011] [05:12:39] &lt;sustrik&gt;        but in 2.1 it shouldn&#8217;t fail</div>
<div class="line">[Friday 04 February 2011] [05:13:07] &lt;sustrik&gt;        the bind side should silently drop the second connection iirc</div>
<div class="line">[Friday 04 February 2011] [05:13:14] &lt;mikko&gt;  it still asserts</div>
<div class="line">[Friday 04 February 2011] [05:13:21] &lt;Guthur&gt; Yeah, I don&#8217;t really want to be doing that, but this prototype code, and I haven&#8217;t generated very unique uid</div>
<div class="line">[Friday 04 February 2011] [05:13:26] &lt;sustrik&gt;        ah, ok</div>
<div class="line">[Friday 04 February 2011] [05:13:39] &lt;Guthur&gt; will when I remove the set Identity it works</div>
<div class="line">[Friday 04 February 2011] [05:13:43] &lt;Guthur&gt; well*</div>
<div class="line">[Friday 04 February 2011] [05:14:24] &lt;Guthur&gt; ok, so mystery solved then?</div>
<div class="line">[Friday 04 February 2011] [05:14:33] &lt;sustrik&gt;        i think so</div>
<div class="line">[Friday 04 February 2011] [05:15:01] &lt;Guthur&gt; is there any plans to make this scenario a little less fatal</div>
<div class="line">[Friday 04 February 2011] [05:18:51] &lt;sustrik&gt;        that would be nice</div>
<div class="line">[Friday 04 February 2011] [05:18:59] &lt;cyball&gt; is there a way to tell the XREP(router) depending on the MessageBody to which XREQ(dealer) to route the message .... i could not figure that out the only way to work on specific messages i found was to use the PubSub scenario but this is only unidirectional so no response will be routed back</div>
<div class="line">[Friday 04 February 2011] [05:19:02] &lt;sustrik&gt;        nbody volunteered yet though</div>
<div class="line">[Friday 04 February 2011] [05:20:15] &lt;sustrik&gt;        REP socket routes the reply back to original requester automagically</div>
<div class="line">[Friday 04 February 2011] [05:21:21] &lt;Guthur&gt; unfortunately I seem to fighting a losing battle to allow the use of ZeroMQ in our app, the team lead is adamant I should use .Net threads with global state instead</div>
<div class="line">[Friday 04 February 2011] [05:21:30] &lt;Guthur&gt; he is not listening to reason</div>
<div class="line">[Friday 04 February 2011] [05:22:37] &lt;cyball&gt; yes i know but can i tell the REP(papa) to get only specific messages for example if i have some calculation and some data get from DB i want to make 2 different REP(papas) one for calcucation and one for data</div>
<div class="line">[Friday 04 February 2011] [05:22:54] &lt;ianbarber&gt;      sustrik - i filed a bug about the dual identity issue by the way. it certainly looks like it should drop, but doesn&#8217;t</div>
<div class="line">[Friday 04 February 2011] [05:23:37] &lt;ianbarber&gt;      cyball:  the XREP is going to route based on the identity, and based on the first message segment</div>
<div class="line">[Friday 04 February 2011] [05:24:27] &lt;ianbarber&gt;      so if you had a &#8216;calc&#8217; and a &#8216;data&#8217; identity, you&#8217;d just need to prepend the message with that identity and a blank one before sending it to the xrep.</div>
<div class="line">[Friday 04 February 2011] [05:25:02] &lt;ianbarber&gt;      that can be in the message body any way you want, just write a bit of code to pull it out and stick it in as a message segment before sending on to the xrep</div>
<div class="line">[Friday 04 February 2011] [05:27:59] &lt;sustrik&gt;        Guthur: that&#8217;s pretty common occurence</div>
<div class="line">[Friday 04 February 2011] [05:28:54] &lt;sustrik&gt;        cyball: you have to use two different sockets</div>
<div class="line">[Friday 04 February 2011] [05:29:08] &lt;sustrik&gt;        so, say calculations are passed on port 5555</div>
<div class="line">[Friday 04 February 2011] [05:29:15] &lt;sustrik&gt;        and DB data on 5556</div>
<div class="line">[Friday 04 February 2011] [05:31:34] &lt;cyball&gt; sustrik: is that the only way ?</div>
<div class="line">[Friday 04 February 2011] [05:31:50] &lt;sustrik&gt;        it&#8217;s the only sensible way</div>
<div class="line">[Friday 04 February 2011] [05:32:07] &lt;sustrik&gt;        that way your network knows about your feeds</div>
<div class="line">[Friday 04 February 2011] [05:32:26] &lt;sustrik&gt;        and thus, for example, large DB dataset being passed</div>
<div class="line">[Friday 04 February 2011] [05:32:34] &lt;sustrik&gt;        doesn&#8217;t block little calc operations</div>
<div class="line">[Friday 04 February 2011] [05:33:37] &lt;cyball&gt; sustrik: thx</div>
<div class="line">[Friday 04 February 2011] [05:33:44] &lt;sustrik&gt;        np</div>
<div class="line">[Friday 04 February 2011] [08:54:30] &lt;mikko&gt;  sustrik: there?</div>
<div class="line">[Friday 04 February 2011] [08:54:47] &lt;sustrik&gt;        mikko: hi</div>
<div class="line">[Friday 04 February 2011] [08:54:48] &lt;mikko&gt;  i would like to discuss openpgm situation at some point</div>
<div class="line">[Friday 04 February 2011] [08:54:54] &lt;sustrik&gt;        sure</div>
<div class="line">[Friday 04 February 2011] [08:55:02] &lt;mikko&gt;  have you got a long-term vision for it?</div>
<div class="line">[Friday 04 February 2011] [08:55:02] &lt;sustrik&gt;        i have no idea what&#8217;s going on</div>
<div class="line">[Friday 04 February 2011] [08:55:16] &lt;mikko&gt;  i am now looking into using the autoconf steven added to openpgm trunk</div>
<div class="line">[Friday 04 February 2011] [08:55:23] &lt;mikko&gt;  i can get it to build</div>
<div class="line">[Friday 04 February 2011] [08:55:36] &lt;sustrik&gt;        well, from 30,000 feet</div>
<div class="line">[Friday 04 February 2011] [08:55:37] &lt;mikko&gt;  but i&#8217;m afraid the way i am doing it at the moment is not portable</div>
<div class="line">[Friday 04 February 2011] [08:56:00] &lt;sustrik&gt;        the pgm is needed for stock traders, banks etc.</div>
<div class="line">[Friday 04 February 2011] [08:56:00] &lt;mikko&gt;  so im wondering is the longer-term plan to bundle openpgm with zeromq</div>
<div class="line">[Friday 04 February 2011] [08:56:18] &lt;mikko&gt;  or is it feasible to ask users to install openpgm if they want to use it with zeromq</div>
<div class="line">[Friday 04 February 2011] [08:56:39] &lt;mikko&gt;  that would seem like the normal way &#8220;if you compile &#8211;with-pgm make sure you have installed openpgm&#8221;</div>
<div class="line">[Friday 04 February 2011] [08:56:42] &lt;mikko&gt;  brb</div>
<div class="line">[Friday 04 February 2011] [08:57:29] &lt;Silly&gt;  huh</div>
<div class="line">[Friday 04 February 2011] [08:58:17] &lt;sustrik&gt;        well, i am not sure openpgm is moving towards becoming a stand-alone package</div>
<div class="line">[Friday 04 February 2011] [08:58:34] &lt;sustrik&gt;        it would be ideal if it was so</div>
<div class="line">[Friday 04 February 2011] [08:58:58] &lt;sustrik&gt;        but we have to be pragmatic at the moment</div>
<div class="line">[Friday 04 February 2011] [09:03:44] &lt;mikko&gt;  sustrik: i&#8217;m beginning to doubt whether bundling is the pragmatic approach</div>
<div class="line">[Friday 04 February 2011] [09:04:07] &lt;mikko&gt;  as the problem with the autotools build is that some platforms dont support linking static libraries into shared libraries</div>
<div class="line">[Friday 04 February 2011] [09:05:06] &lt;mikko&gt;  at least thats my understand</div>
<div class="line">[Friday 04 February 2011] [09:05:07] &lt;mikko&gt;  ing</div>
<div class="line">[Friday 04 February 2011] [09:05:18] &lt;sustrik&gt;        i see</div>
<div class="line">[Friday 04 February 2011] [09:05:25] &lt;mikko&gt;  then again, i dont see why openpgm couldnt be installed as shared library</div>
<div class="line">[Friday 04 February 2011] [09:05:31] &lt;mikko&gt;  and let libtool worry about the best way</div>
<div class="line">[Friday 04 February 2011] [09:05:40] &lt;mikko&gt;  but that might cause confusion as well</div>
<div class="line">[Friday 04 February 2011] [09:05:54] &lt;mikko&gt;  because some people might have openpgm already installed and 0mq would write over that</div>
<div class="line">[Friday 04 February 2011] [09:05:55] &lt;sustrik&gt;        i have no specific opinion on that</div>
<div class="line">[Friday 04 February 2011] [09:06:46] &lt;sustrik&gt;        the only goal imo is to make it as easy to build/use as possible</div>
<div class="line">[Friday 04 February 2011] [09:12:03] &lt;sustrik&gt;        mikko: what are your thoughts atm?</div>
<div class="line">[Friday 04 February 2011] [09:37:41] &lt;mikko&gt;  sustrik: my current thinking is that those two builds make more sense as separate ones</div>
<div class="line">[Friday 04 February 2011] [09:37:58] &lt;sustrik&gt;        how would people install it then?</div>
<div class="line">[Friday 04 February 2011] [09:38:31] &lt;mikko&gt;  execute their build</div>
<div class="line">[Friday 04 February 2011] [09:38:35] &lt;mikko&gt;  and install shared library</div>
<div class="line">[Friday 04 February 2011] [09:38:49] &lt;sustrik&gt;        which build?</div>
<div class="line">[Friday 04 February 2011] [09:39:02] &lt;sustrik&gt;        openpgm?</div>
<div class="line">[Friday 04 February 2011] [09:39:14] &lt;mikko&gt;  execute openpgm build, install it</div>
<div class="line">[Friday 04 February 2011] [09:39:21] &lt;mikko&gt;  execute zeromq build with &#8211;with-pgm</div>
<div class="line">[Friday 04 February 2011] [09:40:10] &lt;sustrik&gt;        well, it makes the whole process 2x as difficult</div>
<div class="line">[Friday 04 February 2011] [09:40:14] &lt;sustrik&gt;        1. install scons</div>
<div class="line">[Friday 04 February 2011] [09:40:28] &lt;sustrik&gt;        2. download openpgm (the right version!)</div>
<div class="line">[Friday 04 February 2011] [09:40:34] &lt;sustrik&gt;        4. build &amp; install</div>
<div class="line">[Friday 04 February 2011] [09:40:44] &lt;sustrik&gt;        4. install autotools</div>
<div class="line">[Friday 04 February 2011] [09:40:50] &lt;sustrik&gt;        5. download 0mq</div>
<div class="line">[Friday 04 February 2011] [09:40:58] &lt;sustrik&gt;        6. build &amp; install</div>
<div class="line">[Friday 04 February 2011] [09:41:52] &lt;sustrik&gt;        but as i say, i don&#8217;t have a strong opinion</div>
<div class="line">[Friday 04 February 2011] [09:42:26] &lt;sustrik&gt;        pgm is used by stock traders, which have enough money to actually pay someone to that for them</div>
<div class="line">[Friday 04 February 2011] [09:42:43] &lt;mikko&gt;  thats not 100% correct now that openpgm has autotools build</div>
<div class="line">[Friday 04 February 2011] [09:42:45] &lt;sustrik&gt;        or even sponsor binary builds &amp; installers</div>
<div class="line">[Friday 04 February 2011] [09:42:52] &lt;mikko&gt;  execute ./configure on openpgm, make install</div>
<div class="line">[Friday 04 February 2011] [09:43:00] &lt;mikko&gt;  execute ./configure &#8211;with-pgm on zeromq, make install</div>
<div class="line">[Friday 04 February 2011] [09:43:12] &lt;sustrik&gt;        yeah, that&#8217;s better</div>
<div class="line">[Friday 04 February 2011] [09:43:14] &lt;mikko&gt;  if you use release packages. autotools are needed for trunk version</div>
<div class="line">[Friday 04 February 2011] [09:43:25] &lt;mikko&gt;  and even that is mitigated with snapshots which have configure script in them</div>
<div class="line">[Friday 04 February 2011] [09:43:40] &lt;sustrik&gt;        ack</div>
<div class="line">[Friday 04 February 2011] [09:44:11] &lt;sustrik&gt;        the hardest part, i assume, is getting right versions of 0mq and openpgm</div>
<div class="line">[Friday 04 February 2011] [09:44:55] &lt;sustrik&gt;        anyway, you are the build system maintainer, so it&#8217;s up to you</div>
<div class="line">[Friday 04 February 2011] [09:45:50] &lt;sustrik&gt;        i would consult the mailing list first though</div>
<div class="line">[Friday 04 February 2011] [09:47:59] &lt;drbobbeaty&gt;     I know I&#8217;m only a user, and this is your choice, but as for me, ZeroMQ &#8220;contains&#8221; OpenPGM. There&#8217;s no utility of OpenPGM for me outside of ZeroMQ, and a large part of ZeroMQ (for me) is the epgm transport. So if you unbundle these, it&#8217;s going to make maintenance harder for me. I&#8217;ll have to make sure that no machine in the organization has the &#8220;wrong&#8221; OpenPGM for ZeroMQ, etc.</div>
<div class="line">[Friday 04 February 2011] [09:48:52] &lt;drbobbeaty&gt;     I know it seems simple to unbundle them, and I can certainly see the advantages, but just one vote from your user base is that in an organization with many machines, this is something that I&#8217;d rather not have to deal with.</div>
<div class="line">[Friday 04 February 2011] [09:49:54] &lt;sustrik&gt;        that was the point i was trying to make but you are more eloquent than i am :)</div>
<div class="line">[Friday 04 February 2011] [10:18:57] &lt;edw&gt;    The clojure glue has a destory-socket call which calls the destroy method of a socket. There is no destroy method. There is a close method. Did this ever work (ie was destroy renamed to close) or has it been broken forever?</div>
<div class="line">[Friday 04 February 2011] [10:20:56] &lt;sustrik&gt;        there&#8217;s no close method in C API</div>
<div class="line">[Friday 04 February 2011] [10:21:03] &lt;sustrik&gt;        there&#8217;s zmq_close() though</div>
<div class="line">[Friday 04 February 2011] [10:21:13] &lt;sustrik&gt;        what are you referring to?</div>
<div class="line">[Friday 04 February 2011] [10:21:43] &lt;edw&gt;    I&#8217;m looking at he jzmq Java bindings. Those have a Socket::close method.</div>
<div class="line">[Friday 04 February 2011] [10:22:19] &lt;sustrik&gt;        that seems right</div>
<div class="line">[Friday 04 February 2011] [10:22:42] &lt;sustrik&gt;        i am not aware there was a destroy method originally, but maybe</div>
<div class="line">[Friday 04 February 2011] [10:22:51] &lt;sustrik&gt;        why not just use close instad of destroy?</div>
<div class="line">[Friday 04 February 2011] [10:24:39] &lt;edw&gt;    ...which calls the finalizer which calls zmq_close. Mystery solved. I think that the Clojure glue is a piece of fairly shoddy workmanship. Time to fork or re-write it.</div>
<div class="line">[Friday 04 February 2011] [10:25:39] &lt;edw&gt;    It&#8217;s not idiomatic Clojure e.g. constants look like +this+. And it calls methods that don&#8217;t exist.</div>
<div class="line">[Friday 04 February 2011] [10:27:27] &lt;sustrik&gt;        sure, go on</div>
<div class="line">[Friday 04 February 2011] [10:27:32] &lt;edw&gt;    Oh, and it (inaccurately) redefines all the enums in the org.zeromq.ZMQ class. Ugh...</div>
<div class="line">[Friday 04 February 2011] [10:28:21] &lt;sustrik&gt;        well, it&#8217;s up to you to fix it :)</div>
<div class="line">[Friday 04 February 2011] [10:30:16] &lt;edw&gt;    Actually, it should probably just be deprecated, as it&#8217;s a molecule-thick layer of sewing machine oil over the JZMQ classes.</div>
<div class="line">[Friday 04 February 2011] [10:30:44] &lt;edw&gt;    E.g. &#8220;(defn make-context [io-threads] (ZMQ/context io-threads))</div>
<div class="line">[Friday 04 February 2011] [10:33:16] &lt;sustrik&gt;        maybe the intent was to make the API more clojure-like?</div>
<div class="line">[Friday 04 February 2011] [10:33:49] &lt;edw&gt;    For sure, but there&#8217;s a better way to do it... I&#8217;m typing away right now...</div>
<div class="line">[Friday 04 February 2011] [10:45:22] &lt;CIA-21&gt; zeromq2: 03Thijs Terlouw 07master * r042e34a 10/ include/zmq.hpp :</div>
<div class="line">[Friday 04 February 2011] [10:45:22] &lt;CIA-21&gt; zeromq2: operator void* () added to context_t.</div>
<div class="line">[Friday 04 February 2011] [10:45:22] &lt;CIA-21&gt; zeromq2: Makes it possible to share the context from C++ to C.</div>
<div class="line">[Friday 04 February 2011] [10:45:22] &lt;CIA-21&gt; zeromq2: Signed-off-by: Thijs Terlouw &lt;<a class="reference external" href="mailto:thijsterlouw&#37;&#52;&#48;gmail&#46;com">thijsterlouw<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/ew59JP">http://bit.ly/ew59JP</a></div>
<div class="line">[Friday 04 February 2011] [13:04:04] &lt;Esmil&gt;  Hmm.. suppose I have a select()/epoll()/what-have-you mainloop running, is there a way I can get events on a filedescripter whenever a socket has a new message?</div>
<div class="line">[Friday 04 February 2011] [13:05:25] &lt;Esmil&gt;  A zeromq socket that is</div>
<div class="line">[Friday 04 February 2011] [13:12:47] &lt;Steve-o&gt;        try zmq_poll</div>
<div class="line">[Friday 04 February 2011] [13:14:51] &lt;Esmil&gt;  Yeah, but that means I&#8217;d have to rewrite the mainloop to use zmq_poll. I&#8217;m quite happy with libev</div>
<div class="line">[Friday 04 February 2011] [13:18:07] &lt;Steve-o&gt;        check the mailling list archive, it certainly has come up before</div>
<div class="line">[Friday 04 February 2011] [13:27:37] &lt;Esmil&gt;  Damn, once again I&#8217;m ahead of time :P <a class="reference external" href="http://article.gmane.org/gmane.network.zeromq.devel/1628">http://article.gmane.org/gmane.network.zeromq.devel/1628</a></div>
<div class="line">[Friday 04 February 2011] [13:33:34] &lt;mikko&gt;  good evening</div>
<div class="line">[Friday 04 February 2011] [13:34:04] &lt;mikko&gt;  Esmil: yes there is</div>
<div class="line">[Friday 04 February 2011] [13:34:23] &lt;mikko&gt;  Esmil: with 2.1.x you can use zmq_getsockopt( ZMQ_FD</div>
<div class="line">[Friday 04 February 2011] [13:35:19] &lt;Esmil&gt;  mikko: Cool! What version is the reference manual on zeromq.org refering to?</div>
<div class="line">[Friday 04 February 2011] [13:35:34] &lt;mikko&gt;  2.0.x i think</div>
<div class="line">[Friday 04 February 2011] [13:35:41] &lt;Esmil&gt;  Ahh, I see. Thanks</div>
<div class="line">[Friday 04 February 2011] [13:41:26] &lt;Esmil&gt;  2.0.x can speak with 2.1.x right? Or is there a reason my distribution hasn&#8217;t updated to 2.1.x yet?</div>
<div class="line">[Friday 04 February 2011] [13:42:41] &lt;Esmil&gt;  Ohh, it&#8217;s considered beta</div>
<div class="line">[Friday 04 February 2011] [13:42:50]   * Esmil should have read the NEWS file first &gt;.&lt;</div>
<div class="line">[Friday 04 February 2011] [13:43:38] &lt;mikko&gt;  can speak with yes</div>
<div class="line">[Friday 04 February 2011] [13:43:50] &lt;Esmil&gt;  Great</div>
<div class="line">[Friday 04 February 2011] [13:43:58] &lt;mikko&gt;  there are slight changes in the api so code written for 2.0.x might require modifications</div>
<div class="line">[Friday 04 February 2011] [13:44:21] &lt;mikko&gt;  the biggest changes are in zmq_term semantics and that zmq_context takes one param instead of many</div>
<div class="line">[Friday 04 February 2011] [13:45:38] &lt;Esmil&gt;  I see</div>
<div class="line">[Friday 04 February 2011] [13:47:13] &lt;mikko&gt;  drbobbeaty: i am not looking to necessarily uncouple</div>
<div class="line">[Friday 04 February 2011] [13:47:26] &lt;mikko&gt;  but what i am looking at is possible linking shared library rather than static</div>
<div class="line">[Friday 04 February 2011] [13:47:31] &lt;mikko&gt;  Steve-o: there?</div>
<div class="line">[Friday 04 February 2011] [13:48:11] &lt;mikko&gt;  so, i was building OpenPGM autoconf builds and ran into following thing which im not sure how to solve the cleanest way:</div>
<div class="line">[Friday 04 February 2011] [13:48:38] &lt;mikko&gt;  a) running the autoconf build generates static libraries that are non PIC by default</div>
<div class="line">[Friday 04 February 2011] [13:48:56] &lt;mikko&gt;  b) on 64bit linux you need to have pic static libraries to link them into shared libraries</div>
<div class="line">[Friday 04 February 2011] [13:49:01] &lt;mikko&gt;  c) this is probably not portable</div>
<div class="line">[Friday 04 February 2011] [13:49:14] &lt;drbobbeaty&gt;     mikko: I&#8217;m all for linking shared libs - even preferred. But it&#8217;s the ability to have it built all at once, so that I can build RPMs and Ubuntu deb packages and have it be treated as a single, atomic, deliverable.</div>
<div class="line">[Friday 04 February 2011] [13:50:57] &lt;Steve-o&gt;        k</div>
<div class="line">[Friday 04 February 2011] [13:51:13] &lt;Steve-o&gt;        I normally make a -pic lib in scons</div>
<div class="line">[Friday 04 February 2011] [13:51:45] &lt;Steve-o&gt;        is there an easy way to do this with libtool &amp; automake?</div>
<div class="line">[Friday 04 February 2011] [13:52:41] &lt;Steve-o&gt;        I thought the .la lib was supposed to be PIC</div>
<div class="line">[Friday 04 February 2011] [13:53:06] &lt;Steve-o&gt;        otherwise libtool couldn&#8217;t build the shared library?</div>
<div class="line">[Friday 04 February 2011] [14:06:55] &lt;mikko&gt;  .la can contain shared and static</div>
<div class="line">[Friday 04 February 2011] [14:07:02] &lt;mikko&gt;  shared -pic and static non pic</div>
<div class="line">[Friday 04 February 2011] [14:07:15] &lt;mikko&gt;  at least on my system</div>
<div class="line">[Friday 04 February 2011] [14:07:36] &lt;mikko&gt;  i could link against the libtool archive in which case libtool can decide what to link against</div>
<div class="line">[Friday 04 February 2011] [14:24:01] &lt;zchrish&gt;        Question: What happens to the server, in a XREQ/XREP pattern, when a client dies after sending a request but before it receives the response from its query?</div>
<div class="line">[Friday 04 February 2011] [14:25:00] &lt;cremes&gt; zchrish: when the server tries to send the reply, it should note that the peer is gone and drop the packet</div>
<div class="line">[Friday 04 February 2011] [14:26:21] &lt;zchrish&gt;        cremes: I assume this failure mechanism is modeled in zeromq and, therefore, handles the situation ok. Will a reconnect from the same client pose any issue I should be aware of?</div>
<div class="line">[Friday 04 February 2011] [14:27:46] &lt;zchrish&gt;        I.E. the client program dies and it is restarted from the OS.</div>
<div class="line">[Friday 04 February 2011] [14:28:47] &lt;zchrish&gt;        In a different situation, suppose a server dies, what should the client do to restart w/o resorting to a complete program restart?</div>
<div class="line">[Friday 04 February 2011] [14:29:10] &lt;zchrish&gt;        Thank you.</div>
<div class="line">[Friday 04 February 2011] [14:52:56] &lt;Leolo_3&gt;        zchrish : depends on weither you gave the socket an identity</div>
<div class="line">[Friday 04 February 2011] [15:33:58] &lt;zchrish&gt;        Leolo_3: No, I didn&#8217;t explicity give an identity.</div>
<div class="line">[Friday 04 February 2011] [15:35:21] &lt;Leolo_3&gt;        then the messages get dropped</div>
<div class="line">[Friday 04 February 2011] [15:35:48] &lt;Leolo_3&gt;        for your server dies senario : zeromq does automatic reconnect</div>
<div class="line">[Friday 04 February 2011] [15:37:34] &lt;zchrish&gt;        I am not worried about dropped messages. I just I am trying to learn the proper reconnection strategy. For example, do I need to shut down the zmq::context and start another or do I simply close and reopen?</div>
<div class="line">[Friday 04 February 2011] [15:38:50] &lt;zchrish&gt;        My current situation appears that clients hang during a server crash and must be shut down (ctrl+c) and restarted.</div>
<div class="line">[Friday 04 February 2011] [15:39:46] &lt;zchrish&gt;        The docs don&#8217;t discuss this area much. Clients don&#8217;t have an issue if the server shuts down gracefully.</div>
<div class="line">[Friday 04 February 2011] [15:43:43] &lt;Steve-o&gt;        so the clients think the TCP socket is still open</div>
<div class="line">[Friday 04 February 2011] [15:44:05] &lt;Steve-o&gt;        I think this was discovered before as reasons for implementing heartbeats</div>
<div class="line">[Friday 04 February 2011] [15:44:15] &lt;Steve-o&gt;        in the list somewhere</div>
<div class="line">[Friday 04 February 2011] [15:50:01] &lt;Steve-o&gt;        &gt;&gt; <a class="reference external" href="http://lists.zeromq.org/pipermail/zeromq-dev/2010-October/007011.html">http://lists.zeromq.org/pipermail/zeromq-dev/2010-October/007011.html</a></div>
<div class="line">[Friday 04 February 2011] [16:50:38] &lt;sustrik&gt;        zchris: to be resilient in case of server failure</div>
<div class="line">[Friday 04 February 2011] [16:50:47] &lt;sustrik&gt;        you have to timeout waiting for the reply</div>
<div class="line">[Friday 04 February 2011] [16:50:55] &lt;sustrik&gt;        and resend the request</div>
<div class="line">[Friday 04 February 2011] [16:51:12] &lt;sustrik&gt;        in theory, 0mq should do that for you, but it&#8217;s not yet implemented :(</div>
<div class="line">[Friday 04 February 2011] [18:31:44] &lt;zchrish&gt;        Yes, using heartbeats is what I figured I needed to do. Thank you.</div>
<div class="line">[Friday 04 February 2011] [18:33:53] &lt;zchrish&gt;        How best to set a timeout for : string <a href="#id3"><span class="problematic" id="id4">*</span></a>string = s_recv (socket) ?</div>
<div class="line">[Friday 04 February 2011] [18:55:26] &lt;Steve-o&gt;        synchronous or asynchronous?</div>
<div class="line">[Friday 04 February 2011] [18:55:57] &lt;zchrish&gt;        In my case, I am using XREP/XREQ</div>
<div class="line">[Friday 04 February 2011] [19:13:55] &lt;Steve-o&gt;        but how do you want the timeout handled?</div>
<div class="line">[Friday 04 February 2011] [19:16:35] &lt;zchrish&gt;        Well, I will implement a handler of course. I am just trying to figure out how to configure 0mq to implement a timeout.</div>
<div class="line">[Friday 04 February 2011] [20:10:51] &lt;Leolo_3&gt;        zchrish : zmq_poll() with a timeout value</div>
<div class="line">[Friday 04 February 2011] [20:25:46] &lt;zchrish&gt;        I see; thank you.</div>
<div class="line">[Saturday 05 February 2011] [04:52:40] &lt;jugg&gt; running ./autogen.sh using autoconf 2.67 (as installed from debian 6), produces this: configure.in:9: warning: AC_INIT: not a literal: m4_esyscmd([./version.sh | tr -d &#8216;n&#8217;])  And this patch fixes it: http://paste2.org/p/1229684  - Will this cause issues on other systems? If not I&#8217;ll go through the steps of submitting the patch.</div>
<div class="line">[Saturday 05 February 2011] [05:50:08] &lt;Guthur&gt;       Has the reason been identified why when two sockets connect with the same identity it crashes the destination?</div>
<div class="line">[Saturday 05 February 2011] [06:13:01] &lt;sustrik&gt;      jugg: you have to speak to mikko</div>
<div class="line">[Saturday 05 February 2011] [06:13:08] &lt;sustrik&gt;      he&#8217;s in charge of the build system</div>
<div class="line">[Saturday 05 February 2011] [06:13:30] &lt;sustrik&gt;      Guthur: i assume there&#8217;s an assertion there</div>
<div class="line">[Saturday 05 February 2011] [06:13:33] &lt;sustrik&gt;      not sure</div>
<div class="line">[Saturday 05 February 2011] [06:22:24] &lt;Guthur&gt;       right, assert(_engine)</div>
<div class="line">[Saturday 05 February 2011] [06:22:35] &lt;Guthur&gt;       or <a href="#id69"><span class="problematic" id="id70">engine_</span></a> rather, let me find the line</div>
<div class="line">[Saturday 05 February 2011] [06:22:47] &lt;Guthur&gt;       it was on that stack trace I posted yesterday</div>
<div class="line">[Saturday 05 February 2011] [06:25:15] &lt;Guthur&gt;       I personally feel it should be reasonably high priority bug, having clients being able to crash the server so easily is not good</div>
<div class="line">[Saturday 05 February 2011] [06:26:05] &lt;Guthur&gt;       and from what I have experienced the server app will not even receive reasonable feedback on the error</div>
<div class="line">[Saturday 05 February 2011] [06:26:39] &lt;sustrik&gt;      yup, feel free to fix it</div>
<div class="line">[Saturday 05 February 2011] [06:29:56] &lt;Guthur&gt;       the assert in question is zmq_assert (<a href="#id71"><span class="problematic" id="id72">engine_</span></a>) in zmq::session_t::process_attach</div>
<div class="line">[Saturday 05 February 2011] [06:34:19] &lt;Guthur&gt;       <a href="#id73"><span class="problematic" id="id74">peer_identity_</span></a> would be the identity, correct?</div>
<div class="line">[Saturday 05 February 2011] [06:37:43] &lt;sustrik&gt;      <a href="#id75"><span class="problematic" id="id76">peer_identity_</span></a> is the identity of the peer socket</div>
<div class="line">[Saturday 05 February 2011] [06:51:35] &lt;Guthur&gt;       I&#8217;m going to slot this on to my todo list, but lack of inner zeromq knowledge will make it hard to find</div>
<div class="line">[Saturday 05 February 2011] [06:52:00] &lt;Guthur&gt;       I want to add a couple of things to clrzmq2 today</div>
<div class="line">[Saturday 05 February 2011] [06:54:17] &lt;Guthur&gt;       I was actually thinking of adding a clrzmq-extensions project, with a special form of queue device, and generic send/recv with .Net serialization</div>
<div class="line">[Saturday 05 February 2011] [07:05:36] &lt;Guthur&gt;       Umm, pub/sub using inproc, seems to have stop working for me, very odd</div>
<div class="line">[Saturday 05 February 2011] [07:07:21] &lt;Guthur&gt;       actually scratch that, its inproc in general</div>
<div class="line">[Saturday 05 February 2011] [07:11:08] &lt;sustrik&gt;      inproc stopped working?</div>
<div class="line">[Saturday 05 February 2011] [07:13:21] &lt;Guthur&gt;       must be something to do with this computer</div>
<div class="line">[Saturday 05 February 2011] [07:13:25] &lt;Guthur&gt;       it was working fine in work</div>
<div class="line">[Saturday 05 February 2011] [07:13:55] &lt;Guthur&gt;       and it worked fine on this before</div>
<div class="line">[Saturday 05 February 2011] [07:14:11] &lt;Guthur&gt;       the peer has connection refused</div>
<div class="line">[Saturday 05 February 2011] [07:23:01] &lt;Guthur&gt;       ah got it</div>
<div class="line">[Saturday 05 February 2011] [07:23:15] &lt;Guthur&gt;       I did not realize inproc connection had to be the same context</div>
<div class="line">[Saturday 05 February 2011] [07:23:25] &lt;Guthur&gt;       learnt something new</div>
<div class="line">[Saturday 05 February 2011] [07:32:50] &lt;sustrik&gt;      :)</div>
<div class="line">[Saturday 05 February 2011] [07:52:47] &lt;mikko&gt;        good morning</div>
<div class="line">[Saturday 05 February 2011] [08:00:33] &lt;jugg&gt; mikko, I just sent a patch to the mailing list, making a change to configure.in - I don&#8217;t know if it&#8217;ll have any side affects on other systems.</div>
<div class="line">[Saturday 05 February 2011] [08:07:35] &lt;mikko&gt;        let me check, sec</div>
<div class="line">[Saturday 05 February 2011] [08:43:44] &lt;CIA-21&gt;       zeromq2: 03Chris Rempel 07master * r4efead1 10/ (AUTHORS configure.in):</div>
<div class="line">[Saturday 05 February 2011] [08:43:44] &lt;CIA-21&gt;       zeromq2: Fixed autogen.sh warnings on Debian 6 systems.</div>
<div class="line">[Saturday 05 February 2011] [08:43:44] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Chris Rempel &lt;<a class="reference external" href="mailto:csrl&#37;&#52;&#48;gmx&#46;com">csrl<span>&#64;</span>gmx<span>&#46;</span>com</a>&gt;</div>
<div class="line">[Saturday 05 February 2011] [08:43:44] &lt;CIA-21&gt;       zeromq2: Please enter the commit message for your changes. Lines starting - <a class="reference external" href="http://bit.ly/dHdxHE">http://bit.ly/dHdxHE</a></div>
<div class="line">[Saturday 05 February 2011] [08:50:53] &lt;jugg&gt; sustrik, is there any point in opening pull requests on github for zeromq?</div>
<div class="line">[Saturday 05 February 2011] [08:53:35] &lt;sustrik&gt;      jugg: no</div>
<div class="line">[Saturday 05 February 2011] [08:53:41] &lt;jugg&gt; ok</div>
<div class="line">[Saturday 05 February 2011] [08:53:42] &lt;sustrik&gt;      the process works via the mailing list</div>
<div class="line">[Saturday 05 February 2011] [09:02:28] &lt;jugg&gt; tests/test_hwm should be added to .gitignore</div>
<div class="line">[Saturday 05 February 2011] [09:04:01] &lt;sustrik&gt;      jugg: let me see</div>
<div class="line">[Saturday 05 February 2011] [09:05:21] &lt;CIA-21&gt;       zeromq2: 03Martin Sustrik 07master * rc8e5be8 10/ .gitignore :</div>
<div class="line">[Saturday 05 February 2011] [09:05:21] &lt;CIA-21&gt;       zeromq2: test-hwm added to .gitignore</div>
<div class="line">[Saturday 05 February 2011] [09:05:21] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/hLOv45">http://bit.ly/hLOv45</a></div>
<div class="line">[Saturday 05 February 2011] [09:05:30] &lt;sustrik&gt;      done</div>
<div class="line">[Saturday 05 February 2011] [10:14:31] &lt;mikko&gt;        does anyone know if Neale is on IRC?</div>
<div class="line">[Saturday 05 February 2011] [10:17:02] &lt;sustrik&gt;      mikko: he was here few day ago</div>
<div class="line">[Saturday 05 February 2011] [10:17:09] &lt;sustrik&gt;      but i haven&#8217;t seen him since</div>
<div class="line">[Saturday 05 February 2011] [10:24:41] &lt;mikko&gt;        mailed him</div>
<div class="line">[Saturday 05 February 2011] [10:24:47] &lt;mikko&gt;        it would be very nice to get system z</div>
<div class="line">[Saturday 05 February 2011] [10:24:57] &lt;mikko&gt;        and maybe solaris sparc at some point</div>
<div class="line">[Saturday 05 February 2011] [10:31:12] &lt;sustrik&gt;      i think mato has a solaris box in the cellar</div>
<div class="line">[Saturday 05 February 2011] [10:31:31] &lt;sustrik&gt;      you may ask him whether it&#8217;s possible to put it online after&#8217;s he back from NZ</div>
<div class="line">[Saturday 05 February 2011] [10:40:21] &lt;Guthur&gt;       ah the pain of maintaining backwards compatibility</div>
<div class="line">[Saturday 05 February 2011] [10:40:38] &lt;Guthur&gt;       though the problem is my own doing</div>
<div class="line">[Saturday 05 February 2011] [10:41:15] &lt;Guthur&gt;       I should have made the Poll method static in clrzmq2</div>
<div class="line">[Saturday 05 February 2011] [10:48:56] &lt;sustrik&gt;      you mean the original problem you&#8217;ve reported?</div>
<div class="line">[Saturday 05 February 2011] [11:08:34] &lt;Guthur&gt;       oh no sorry, unrelated</div>
<div class="line">[Saturday 05 February 2011] [11:08:39] &lt;Guthur&gt;       just lamenting</div>
<div class="line">[Saturday 05 February 2011] [12:34:35] &lt;traviscline&gt;  Any idea on the expected amount of overhead associated with using an external event loop ala ZMQ_FD?</div>
<div class="line">[Saturday 05 February 2011] [13:05:57] &lt;Guthur&gt;       Would it be ok to put code in the clrzmq2 repo that should be considered beta</div>
<div class="line">[Saturday 05 February 2011] [13:06:31] &lt;Guthur&gt;       It doesn&#8217;t effect the binding, it&#8217;s just extension/helper stuff</div>
<div class="line">[Saturday 05 February 2011] [13:10:39] &lt;Leolo_3&gt;      travis : I suspect very very little.  ZMQ does it&#8217;s stuff in a background thread, and sends messages over the FD.  It does this &#8220;normally&#8221; when you call zmq_recv().</div>
<div class="line">[Saturday 05 February 2011] [13:20:14] &lt;traviscline&gt;  Leolo_3: thanks</div>
<div class="line">[Sunday 06 February 2011] [05:00:30] &lt;mikko&gt;  good morning</div>
<div class="line">[Sunday 06 February 2011] [05:04:18] &lt;sustrik&gt;        morning</div>
<div class="line">[Sunday 06 February 2011] [05:10:54] &lt;mikko&gt;  neale is doing pretty good job</div>
<div class="line">[Sunday 06 February 2011] [05:11:05] &lt;mikko&gt;  we have s390x soon in build cluster</div>
<div class="line">[Sunday 06 February 2011] [05:16:58] &lt;mikko&gt;  im going to visit chinese new year and get back to hacking</div>
<div class="line">[Sunday 06 February 2011] [05:33:41] &lt;sustrik&gt;        great!</div>
<div class="line">[Sunday 06 February 2011] [06:51:20] &lt;Guthur&gt; pieterh, Nice talk, the one you sent on the list</div>
<div class="line">[Sunday 06 February 2011] [06:51:34] &lt;pieterh&gt;        Hi Guthur :-)</div>
<div class="line">[Sunday 06 February 2011] [06:51:49] &lt;pieterh&gt;        It was very short, next time we&#8217;ll try to get a longer slot</div>
<div class="line">[Sunday 06 February 2011] [06:51:57] &lt;Guthur&gt; I&#8217;m going to try and get some of my colleagues to watch that, might help me convince them that OMQ fits our needs</div>
<div class="line">[Sunday 06 February 2011] [06:52:28] &lt;Guthur&gt; a very good introduction though, even with the short time slot</div>
<div class="line">[Sunday 06 February 2011] [06:52:41] &lt;Guthur&gt; I liked the E=mc2, hehe</div>
<div class="line">[Sunday 06 February 2011] [06:52:50] &lt;pieterh&gt;        It&#8217;s a perspective I&#8217;ve used a few times in presentations, multithreading done wrong, and right</div>
<div class="line">[Sunday 06 February 2011] [06:53:31] &lt;Guthur&gt; My team leader is pushing me to take that approach, the wrong way</div>
<div class="line">[Sunday 06 February 2011] [06:53:57] &lt;pieterh&gt;        It can be very hard to fight established ways of working...</div>
<div class="line">[Sunday 06 February 2011] [06:54:12] &lt;Guthur&gt; I&#8217;m trying to convince him that multiple threads and global state without message passing is a problem waiting to happen</div>
<div class="line">[Sunday 06 February 2011] [06:54:27] &lt;pieterh&gt;        Well, it&#8217;s a lot of pain and cost waiting to happen...</div>
<div class="line">[Sunday 06 February 2011] [06:54:39] &lt;pieterh&gt;        if the organization is large, it doesn&#8217;t really care</div>
<div class="line">[Sunday 06 February 2011] [06:55:13] &lt;pieterh&gt;        But perhaps the argument that you can&#8217;t stretch the results across multiple boxes may help</div>
<div class="line">[Sunday 06 February 2011] [06:55:42] &lt;pieterh&gt;        The best argument is usually running code</div>
<div class="line">[Sunday 06 February 2011] [06:56:20] &lt;Guthur&gt; That&#8217;s the thing I have it running with ZMQ, he&#8217;s trying to argue against the dependency now</div>
<div class="line">[Sunday 06 February 2011] [06:56:50] &lt;pieterh&gt;        Hmm, what OS are you on?</div>
<div class="line">[Sunday 06 February 2011] [06:57:09] &lt;Guthur&gt; windows, it&#8217;s a .NET app</div>
<div class="line">[Sunday 06 February 2011] [06:57:23] &lt;Guthur&gt; so he would rather it was nothing but .NET</div>
<div class="line">[Sunday 06 February 2011] [06:57:26] &lt;pieterh&gt;        Oh boy :-)</div>
<div class="line">[Sunday 06 February 2011] [06:57:39] &lt;pieterh&gt;        You can&#8217;t argue logic with people who develop on Windows</div>
<div class="line">[Sunday 06 February 2011] [06:57:48] &lt;Guthur&gt; hehe</div>
<div class="line">[Sunday 06 February 2011] [06:58:21] &lt;pieterh&gt;        I&#8217;m serious, they&#8217;ve swallowed the magic potion and believe in what they learn from MSDN</div>
<div class="line">[Sunday 06 February 2011] [06:58:35] &lt;Guthur&gt; yeah it seems like that sometimes</div>
<div class="line">[Sunday 06 February 2011] [06:58:52] &lt;pieterh&gt;        And your organization has _no_ Linux?</div>
<div class="line">[Sunday 06 February 2011] [06:59:01] &lt;Guthur&gt; oh yeah it has plenty</div>
<div class="line">[Sunday 06 February 2011] [06:59:10] &lt;Guthur&gt; it&#8217;s a very large American Bank</div>
<div class="line">[Sunday 06 February 2011] [06:59:17] &lt;pieterh&gt;        Oh boy</div>
<div class="line">[Sunday 06 February 2011] [06:59:53] &lt;pieterh&gt;        Well, performance maybe</div>
<div class="line">[Sunday 06 February 2011] [06:59:57] &lt;Guthur&gt; Don&#8217;t ask me the rationale for moving this app to windows, I still haven&#8217;t got an answer to that</div>
<div class="line">[Sunday 06 February 2011] [07:00:08] &lt;pieterh&gt;        Banks don&#8217;t use rationales</div>
<div class="line">[Sunday 06 February 2011] [07:00:39] &lt;pieterh&gt;        In my experience, anyhow, they often make IT choices based on egos and opinions</div>
<div class="line">[Sunday 06 February 2011] [07:00:55] &lt;Guthur&gt; We are moving most client apps to windows (.NET), I can kind of see that as windows boxes are prevalent, but this app I am working on has windows through the whole stack</div>
<div class="line">[Sunday 06 February 2011] [07:01:01] &lt;Guthur&gt; server included</div>
<div class="line">[Sunday 06 February 2011] [07:01:56] &lt;pieterh&gt;        So you can&#8217;t use arguments like cost, portability, longeivity</div>
<div class="line">[Sunday 06 February 2011] [07:02:53] &lt;Guthur&gt; no, but we do want scalability in our app, and there is many &#8216;services&#8217; to talk to each other</div>
<div class="line">[Sunday 06 February 2011] [07:03:12] &lt;pieterh&gt;        So performance is one thing big egos are sensitive too</div>
<div class="line">[Sunday 06 February 2011] [07:03:28] &lt;pieterh&gt;        Especially if you can compare a pure .NET solution to other projects in the company</div>
<div class="line">[Sunday 06 February 2011] [07:03:36] &lt;pieterh&gt;        <a href="#id5"><span class="problematic" id="id6">*</span></a>sensitive to</div>
<div class="line">[Sunday 06 February 2011] [07:03:58] &lt;pieterh&gt;        If you can get a visible performance kick by using 0MQ, that&#8217;s an argument that will fly IMO</div>
<div class="line">[Sunday 06 February 2011] [07:04:45] &lt;Guthur&gt; I am hoping I can show that</div>
<div class="line">[Sunday 06 February 2011] [07:04:50] &lt;Guthur&gt; and also with less code</div>
<div class="line">[Sunday 06 February 2011] [07:05:39] &lt;pieterh&gt;        Well, good luck and it&#8217;d be interesting to know how this plays out</div>
<div class="line">[Sunday 06 February 2011] [07:05:54] &lt;Guthur&gt; cheers, yeah I hope I can win through</div>
<div class="line">[Sunday 06 February 2011] [07:06:08] &lt;Guthur&gt; it&#8217;s tiring fighting this mentality though</div>
<div class="line">[Sunday 06 February 2011] [07:06:46] &lt;pieterh&gt;        Personally, I&#8217;d look to change projects :-)</div>
<div class="line">[Sunday 06 February 2011] [07:06:57] &lt;Guthur&gt; for the first time this week I started wanting to get a new job</div>
<div class="line">[Sunday 06 February 2011] [07:07:04] &lt;Guthur&gt; hehe, yeah agree</div>
<div class="line">[Sunday 06 February 2011] [07:07:13] &lt;Guthur&gt; this/last</div>
<div class="line">[Sunday 06 February 2011] [07:07:31] &lt;pieterh&gt;        It&#8217;s not worth working with people who are mediocre, not worth working on projects that are mediocre</div>
<div class="line">[Sunday 06 February 2011] [07:07:44] &lt;pieterh&gt;        A terrible, tragic project... at least you learn a lot</div>
<div class="line">[Sunday 06 February 2011] [07:08:19] &lt;Guthur&gt; maybe I will have more success next week</div>
<div class="line">[Sunday 06 February 2011] [07:08:33] &lt;Guthur&gt; I have still to show the full working app</div>
<div class="line">[Sunday 06 February 2011] [07:08:41] &lt;Guthur&gt; only got it ready on friday</div>
<div class="line">[Sunday 06 February 2011] [07:08:44] &lt;pieterh&gt;        I&#8217;d really focus purely on speed... nothing else</div>
<div class="line">[Sunday 06 February 2011] [07:09:22] &lt;sustrik&gt;        pieterh: the presentation should be definitely linked from zeromq.org</div>
<div class="line">[Sunday 06 February 2011] [07:09:35] &lt;pieterh&gt;        sustrik: the video or the slideshow?</div>
<div class="line">[Sunday 06 February 2011] [07:09:38] &lt;sustrik&gt;        video</div>
<div class="line">[Sunday 06 February 2011] [07:09:46] &lt;Guthur&gt; I&#8217;d second that, its a good video</div>
<div class="line">[Sunday 06 February 2011] [07:10:06] &lt;sustrik&gt;        do they leave it on the site for a long time?</div>
<div class="line">[Sunday 06 February 2011] [07:10:11] &lt;pieterh&gt;        Guthur: especially if you can show an architecture that&#8217;s hard to make with the pure .NET toolkit</div>
<div class="line">[Sunday 06 February 2011] [07:10:16] &lt;pieterh&gt;        sustrik: IMO it&#8217;s there forever</div>
<div class="line">[Sunday 06 February 2011] [07:10:32] &lt;sustrik&gt;        then it should be easy to link...</div>
<div class="line">[Sunday 06 February 2011] [07:10:42] &lt;pieterh&gt;        I think it would be better to convert to youtube but I&#8217;m not sure how, will try on a Linux box</div>
<div class="line">[Sunday 06 February 2011] [07:11:10] &lt;sustrik&gt;        yes, it behaved kind of capricious</div>
<div class="line">[Sunday 06 February 2011] [07:11:19] &lt;sustrik&gt;        i was able to get it running after ~10 atemps</div>
<div class="line">[Sunday 06 February 2011] [07:11:24] &lt;pieterh&gt;        the HTML5/theora format is kind of strange</div>
<div class="line">[Sunday 06 February 2011] [07:12:02] &lt;pieterh&gt;        I&#8217;ll give it a shot</div>
<div class="line">[Sunday 06 February 2011] [07:12:20] &lt;pieterh&gt;        I guess we already have a place on the wiki for this, i.e. the right hand side where we list the events</div>
<div class="line">[Sunday 06 February 2011] [07:12:30] &lt;Guthur&gt; I had trouble accessing it with Chrome</div>
<div class="line">[Sunday 06 February 2011] [07:12:36] &lt;Guthur&gt; worked on firefox though</div>
<div class="line">[Sunday 06 February 2011] [07:12:51] &lt;sustrik&gt;        i would say it will be valueable even after a year or so</div>
<div class="line">[Sunday 06 February 2011] [07:12:55] &lt;pieterh&gt;        Heh, from Slideshare, &#8221; &#8220;FOSDEM 2011 - 0MQ&#8221; is being tweeted more than anything else on SlideShare right now. So we&#8217;ve put it on the homepage of SlideShare.net (in the &#8220;Hot on Twitter&#8221; section).&#8221;</div>
<div class="line">[Sunday 06 February 2011] [07:13:04] &lt;sustrik&gt;        and the events list is going to rollover</div>
<div class="line">[Sunday 06 February 2011] [07:13:32] &lt;sustrik&gt;        something like &#8220;links&#8221; section, or &#8220;articles&#8221; or &#8220;media&#8221;</div>
<div class="line">[Sunday 06 February 2011] [07:13:54] &lt;pieterh&gt;        we can leave the events list to grow</div>
<div class="line">[Sunday 06 February 2011] [07:14:01] &lt;pieterh&gt;        eventually move it to its own page</div>
<div class="line">[Sunday 06 February 2011] [07:14:31] &lt;pieterh&gt;        makes sense that people use that list to find corresponding videos / slideshows</div>
<div class="line">[Sunday 06 February 2011] [07:15:04] &lt;sustrik&gt;        well, the problem is broader that that</div>
<div class="line">[Sunday 06 February 2011] [07:15:15] &lt;sustrik&gt;        for example, there are useful blogs out there</div>
<div class="line">[Sunday 06 February 2011] [07:15:17] &lt;Guthur&gt; actually talking about performance of .NET vs ZMQ, I was testing a REQ/REP vs .NET remoting, both using TCP, and got some interesting results...</div>
<div class="line">[Sunday 06 February 2011] [07:15:23] &lt;sustrik&gt;        it&#8217;s not clear where to link the from</div>
<div class="line">[Sunday 06 February 2011] [07:15:50] &lt;pieterh&gt;        sustrik:... Google kind of solves this problem, eventually</div>
<div class="line">[Sunday 06 February 2011] [07:16:01] &lt;Guthur&gt; Up to about 100 requests ZMQ was faster or at least as performant, after that it started to fall behind remoting</div>
<div class="line">[Sunday 06 February 2011] [07:16:22] &lt;pieterh&gt;        I&#8217;m not sure collecting hundreds of links to articles and blogs makes sense</div>
<div class="line">[Sunday 06 February 2011] [07:16:29] &lt;pieterh&gt;        people want reusable material</div>
<div class="line">[Sunday 06 February 2011] [07:16:51] &lt;Guthur&gt; I haven&#8217;t investigated much further to identify the reasoning though, and my knowledge to inner works of remoting is limited</div>
<div class="line">[Sunday 06 February 2011] [07:16:57] &lt;pieterh&gt;        Guthur: interesting</div>
<div class="line">[Sunday 06 February 2011] [07:17:07] &lt;pieterh&gt;        0MQ on Windows is not optimized in any way</div>
<div class="line">[Sunday 06 February 2011] [07:17:22] &lt;Guthur&gt; though I think remoting is now being replace by MS&#8217;s new &#8216;standard&#8217;, WCF</div>
<div class="line">[Sunday 06 February 2011] [07:17:40] &lt;pieterh&gt;        aka WTF</div>
<div class="line">[Sunday 06 February 2011] [07:17:53] &lt;Guthur&gt; are you familiar with it?</div>
<div class="line">[Sunday 06 February 2011] [07:17:58] &lt;pieterh&gt;        Nope... :-)</div>
<div class="line">[Sunday 06 February 2011] [07:18:01] &lt;Guthur&gt; hehe</div>
<div class="line">[Sunday 06 February 2011] [07:18:19] &lt;pieterh&gt;        I maintain high levels of ignorance concerning anything coming from MSFT</div>
<div class="line">[Sunday 06 February 2011] [07:18:34] &lt;Guthur&gt; nice for some, hehe</div>
<div class="line">[Sunday 06 February 2011] [07:19:27] &lt;pieterh&gt;        You know, what you might just do... is abandon the attempt to convert your team, which is most likely hopeless and will stress you</div>
<div class="line">[Sunday 06 February 2011] [07:19:57] &lt;pieterh&gt;        and instead take the opportunity to learn a lot about how WCF works, and then extend 0MQ to use that</div>
<div class="line">[Sunday 06 February 2011] [07:20:42] &lt;sustrik&gt;        pieterh: yes, i meant reusable links: your and oliver&#8217;s video, nicolases&#8217; and ilya&#8217;s articles etc.</div>
<div class="line">[Sunday 06 February 2011] [07:20:58] &lt;Guthur&gt; unfortunately WCF only solves the interprocess connection</div>
<div class="line">[Sunday 06 February 2011] [07:21:14] &lt;pieterh&gt;        sustrik: we did collect the most valuable ones on the intro doc page, I think</div>
<div class="line">[Sunday 06 February 2011] [07:21:22] &lt;Guthur&gt; there is nothing in .NET to solve inter thread, besides traditional thread mechanisms</div>
<div class="line">[Sunday 06 February 2011] [07:21:49] &lt;pieterh&gt;        well... i&#8217;m not against collecting resources but it does need upkeep</div>
<div class="line">[Sunday 06 February 2011] [07:22:11] &lt;pieterh&gt;        Guthur: right, and this is missing in 0MQ for Windows too</div>
<div class="line">[Sunday 06 February 2011] [07:23:09] &lt;Guthur&gt; I wouldn&#8217;t be surprised if WCF is .NET only, but I&#8217;m not 100% sure on that</div>
<div class="line">[Sunday 06 February 2011] [07:23:34] &lt;Guthur&gt; Remoting was only intended for .NET endpoints</div>
<div class="line">[Sunday 06 February 2011] [07:27:27] &lt;pieterh&gt;        Let us know when you know :-)</div>
<div class="line">[Sunday 06 February 2011] [07:31:42] &lt;sustrik&gt;        why not link your talk from intro page then?</div>
<div class="line">[Sunday 06 February 2011] [07:40:10] &lt;pieterh&gt;        sustrik: could do... for now I&#8217;ve linked to it from the events list</div>
<div class="line">[Sunday 06 February 2011] [07:40:29] &lt;pieterh&gt;        let me try to convert that video first</div>
<div class="line">[Sunday 06 February 2011] [07:42:27] &lt;sustrik&gt;        sure</div>
<div class="line">[Sunday 06 February 2011] [07:42:56] &lt;sustrik&gt;        Guthur: getting slower after 100 messages &#8211; isn&#8217;t is just the queueing effect?</div>
<div class="line">[Sunday 06 February 2011] [07:43:18] &lt;sustrik&gt;        ie. publisher publishes faster than consumer consumes, thus making latencies gwo?</div>
<div class="line">[Sunday 06 February 2011] [07:43:20] &lt;sustrik&gt;        grow</div>
<div class="line">[Sunday 06 February 2011] [08:10:07] &lt;Guthur&gt; sustrik, Possibly</div>
<div class="line">[Sunday 06 February 2011] [08:10:29] &lt;Guthur&gt; if i remember right the majority of the time was in the Recv method</div>
<div class="line">[Sunday 06 February 2011] [08:11:01] &lt;Guthur&gt; I have the code lying around somewhere, let me check</div>
<div class="line">[Sunday 06 February 2011] [08:38:13] &lt;pieterh&gt;        sustrik: I&#8217;ve uploaded to Youtube here: <a class="reference external" href="http://www.youtube.com/watch?v=CCBYzKfmQ4U">http://www.youtube.com/watch?v=CCBYzKfmQ4U</a></div>
<div class="line">[Sunday 06 February 2011] [08:38:17] &lt;pieterh&gt;        can you check if that works better?</div>
<div class="line">[Sunday 06 February 2011] [08:38:41] &lt;sustrik&gt;        yes</div>
<div class="line">[Sunday 06 February 2011] [08:38:48] &lt;sustrik&gt;        works with no problem</div>
<div class="line">[Sunday 06 February 2011] [08:40:24] &lt;Guthur&gt; oh interesting, the tables turn drastically when I reuse the context/connection</div>
<div class="line">[Sunday 06 February 2011] [08:40:44] &lt;Guthur&gt; OMQ starts to win hands down</div>
<div class="line">[Sunday 06 February 2011] [08:40:50] &lt;Guthur&gt; 0MQ</div>
<div class="line">[Sunday 06 February 2011] [08:42:22] &lt;pieterh&gt;        Guthur: you were opening a new connection each time?</div>
<div class="line">[Sunday 06 February 2011] [08:42:34] &lt;Guthur&gt; I though it was fairer to remoting</div>
<div class="line">[Sunday 06 February 2011] [08:42:43] &lt;pieterh&gt;        huh</div>
<div class="line">[Sunday 06 February 2011] [08:42:58] &lt;Guthur&gt; actually, there was another more important reason...</div>
<div class="line">[Sunday 06 February 2011] [08:43:23] &lt;Guthur&gt; I was simulating a web application, which may not be able to reuse the connection</div>
<div class="line">[Sunday 06 February 2011] [08:43:31] &lt;pieterh&gt;        huh</div>
<div class="line">[Sunday 06 February 2011] [08:43:57] &lt;pieterh&gt;        you could add &#8216;sleep(1)&#8217; into the main loop to properly simulate WCF</div>
<div class="line">[Sunday 06 February 2011] [08:44:38] &lt;pieterh&gt;        opening a socket each time is really slow</div>
<div class="line">[Sunday 06 February 2011] [08:45:07] &lt;Guthur&gt; yep, I think remoting was probably keeping it&#8217;s open in the background</div>
<div class="line">[Sunday 06 February 2011] [08:46:33] &lt;Guthur&gt; but the target application was an IIS based web app, which would connect to a non IIS based process, and I was sure how well it would cope with persisting socket connections to external apps</div>
<div class="line">[Sunday 06 February 2011] [08:47:05] &lt;pieterh&gt;        is the target application performance critical?</div>
<div class="line">[Sunday 06 February 2011] [08:47:24] &lt;Guthur&gt; we are hoping to ramp it up</div>
<div class="line">[Sunday 06 February 2011] [08:47:34] &lt;Guthur&gt; its a FX Options trading app</div>
<div class="line">[Sunday 06 February 2011] [08:48:01] &lt;Guthur&gt; so there could be lots of high frequency price movements</div>
<div class="line">[Sunday 06 February 2011] [08:48:04] &lt;pieterh&gt;        sure, so then you IMO want to make your 0MQ app as _fast_ as possible and use that as carrot</div>
<div class="line">[Sunday 06 February 2011] [08:48:24] &lt;pieterh&gt;        the stick would be to find a competing internal project and feed them juicy low latency technology</div>
<div class="line">[Sunday 06 February 2011] [08:48:44] &lt;Guthur&gt; Well, reusing the context/connection, 0MQ is twice as fast</div>
<div class="line">[Sunday 06 February 2011] [08:49:11] &lt;pieterh&gt;        the code is in c#?</div>
<div class="line">[Sunday 06 February 2011] [08:49:16] &lt;Guthur&gt; yeah</div>
<div class="line">[Sunday 06 February 2011] [08:49:46] &lt;pieterh&gt;        i&#8217;d probably make a C/Linux version just for sanity checking</div>
<div class="line">[Sunday 06 February 2011] [08:49:47] &lt;Guthur&gt; though remoting does offer type safety</div>
<div class="line">[Sunday 06 February 2011] [08:50:24] &lt;pieterh&gt;        &#8220;safety&#8221; as in &#8220;ensure your types will never work on anything except our OS&#8221;</div>
<div class="line">[Sunday 06 February 2011] [08:50:33] &lt;pieterh&gt;        sustrik: OK, I&#8217;ve added the video to <a class="reference external" href="http://www.zeromq.org/intro:read-the-manual">http://www.zeromq.org/intro:read-the-manual</a></div>
<div class="line">[Sunday 06 February 2011] [08:52:06] &lt;Guthur&gt; getting them to accept 0MQ as the solution will be tough, getting them to dump .NET would be nigh on impossible</div>
<div class="line">[Sunday 06 February 2011] [08:52:38] &lt;pieterh&gt;        Guthur: oh, you&#8217;d just get blamed for the eventual failure</div>
<div class="line">[Sunday 06 February 2011] [08:52:54] &lt;pieterh&gt;        you have to leave technology evangelism to people outside the team</div>
<div class="line">[Sunday 06 February 2011] [08:54:13] &lt;sustrik&gt;        pieterh: thx</div>
<div class="line">[Sunday 06 February 2011] [08:54:39] &lt;pieterh&gt;        probably the best you can do is insert 0MQ as a &#8220;double the speed of this critical bus&#8221; solution</div>
<div class="line">[Sunday 06 February 2011] [08:54:57] &lt;pieterh&gt;        you would probably want to compare with another option too, to make it look fair</div>
<div class="line">[Sunday 06 February 2011] [08:55:09] &lt;pieterh&gt;        hmm, bank, hmm, for example RabbitMQ</div>
<div class="line">[Sunday 06 February 2011] [08:55:28] &lt;pieterh&gt;        and of course you need to make the architect think it was his idea all along</div>
<div class="line">[Sunday 06 February 2011] [08:55:59] &lt;Guthur&gt; That&#8217;s the thing the Team Lead is not really the architect, he is just too hands on</div>
<div class="line">[Sunday 06 February 2011] [08:56:06] &lt;Guthur&gt; which is ok up to a point</div>
<div class="line">[Sunday 06 February 2011] [08:56:18] &lt;pieterh&gt;        well, s/architect/team lead/, it applies just the same</div>
<div class="line">[Sunday 06 February 2011] [08:56:21] &lt;pieterh&gt;        ego is ego</div>
<div class="line">[Sunday 06 February 2011] [09:49:28] &lt;Guthur&gt; oops, i broke clrzmq2 build</div>
<div class="line">[Sunday 06 February 2011] [09:52:15] &lt;Guthur&gt; I&#8217;ll be pushing a fix promptly</div>
<div class="line">[Sunday 06 February 2011] [09:57:30] &lt;Guthur&gt; is there no notification email when a build goes wrong?</div>
<div class="line">[Sunday 06 February 2011] [10:01:40] &lt;sustrik&gt;        Guthur: it&#8217;s definitely possible</div>
<div class="line">[Sunday 06 February 2011] [10:02:00] &lt;sustrik&gt;        you have to ask mikko to add you to the list</div>
<div class="line">[Sunday 06 February 2011] [10:02:41] &lt;Guthur&gt; I am one of the users registered, should I be receiving emails?</div>
<div class="line">[Sunday 06 February 2011] [10:02:41] &lt;sustrik&gt;        the auto builds are done once each 12hrs rather than immediately after commit btw</div>
<div class="line">[Sunday 06 February 2011] [10:02:57] &lt;sustrik&gt;        sorry, i am not a hudson expert</div>
<div class="line">[Sunday 06 February 2011] [10:03:01] &lt;sustrik&gt;        ask mikko</div>
<div class="line">[Sunday 06 February 2011] [10:03:08] &lt;Guthur&gt; It is possible my over zealous email server is bouncing them</div>
<div class="line">[Sunday 06 February 2011] [10:03:43] &lt;Guthur&gt; sustrik, do you receive mails?</div>
<div class="line">[Sunday 06 February 2011] [10:04:03] &lt;sustrik&gt;        nope, but i am not in the list afaik</div>
<div class="line">[Sunday 06 February 2011] [10:04:27] &lt;Guthur&gt; ok</div>
<div class="line">[Sunday 06 February 2011] [10:04:36] &lt;Guthur&gt; I can just monitor it after making a commit though</div>
<div class="line">[Sunday 06 February 2011] [10:04:55] &lt;sustrik&gt;        definitely</div>
<div class="line">[Sunday 06 February 2011] [10:05:09] &lt;sustrik&gt;        you have to wait till 5am or 5pm GMT though</div>
<div class="line">[Sunday 06 February 2011] [10:05:24] &lt;sustrik&gt;        that&#8217;s when autoguilds are run</div>
<div class="line">[Sunday 06 February 2011] [10:05:34] &lt;sustrik&gt;        autobuilds*</div>
<div class="line">[Sunday 06 February 2011] [10:05:52] &lt;Guthur&gt; ok, cheers</div>
<div class="line">[Sunday 06 February 2011] [10:57:32] &lt;Guthur&gt; is Peter&#8217;s video on the website yet?</div>
<div class="line">[Sunday 06 February 2011] [10:57:53] &lt;Guthur&gt; oh sorry, found it</div>
<div class="line">[Sunday 06 February 2011] [10:58:03] &lt;Guthur&gt; right in front of my eyes</div>
<div class="line">[Sunday 06 February 2011] [10:59:24] &lt;Guthur&gt; would be really nice if it was on youtube or something though</div>
<div class="line">[Sunday 06 February 2011] [11:18:57] &lt;Guthur&gt; I have multiple requests coming in, which will then make a further request to a service, this service will then reply back async on a separate thread, what is the appropriate 0MQ pattern to match the async response to the appropriate request thread?</div>
<div class="line">[Sunday 06 February 2011] [11:23:21] &lt;sustrik&gt;        req/rep</div>
<div class="line">[Sunday 06 February 2011] [11:24:31] &lt;Guthur&gt; and match them using identity?</div>
<div class="line">[Sunday 06 February 2011] [11:25:11] &lt;sustrik&gt;        you don&#8217;t have to care, rep socket does that for you</div>
<div class="line">[Sunday 06 February 2011] [11:28:18] &lt;Guthur&gt; Either my understanding is wrong or it&#8217;s bad problem description, because I can&#8217;t see how that would work</div>
<div class="line">[Sunday 06 February 2011] [11:28:59] &lt;sustrik&gt;        rep sends the reply to the original requester</div>
<div class="line">[Sunday 06 February 2011] [11:29:13] &lt;Guthur&gt; oh that part, yes</div>
<div class="line">[Sunday 06 February 2011] [11:29:31] &lt;Guthur&gt; but its the async request from the service, it&#8217;s not 0MQ</div>
<div class="line">[Sunday 06 February 2011] [11:29:44] &lt;Guthur&gt; it&#8217;s quickFIX to be precise</div>
<div class="line">[Sunday 06 February 2011] [11:29:55] &lt;sustrik&gt;        right</div>
<div class="line">[Sunday 06 February 2011] [11:30:29] &lt;sustrik&gt;        is there a reply-to field in the FIX message</div>
<div class="line">[Sunday 06 February 2011] [11:30:30] &lt;sustrik&gt;        ?</div>
<div class="line">[Sunday 06 February 2011] [11:30:40] &lt;Guthur&gt; and the reply will come back on a completely separate thread</div>
<div class="line">[Sunday 06 February 2011] [11:30:52] &lt;Guthur&gt; there is reqID</div>
<div class="line">[Sunday 06 February 2011] [11:30:54] &lt;Guthur&gt; that&#8217;s it</div>
<div class="line">[Sunday 06 February 2011] [11:31:21] &lt;sustrik&gt;        who&#8217;s behind the fix connection?</div>
<div class="line">[Sunday 06 February 2011] [11:31:24] &lt;sustrik&gt;        requester?</div>
<div class="line">[Sunday 06 February 2011] [11:31:26] &lt;sustrik&gt;        or replier?</div>
<div class="line">[Sunday 06 February 2011] [11:31:35] &lt;Guthur&gt; replier</div>
<div class="line">[Sunday 06 February 2011] [11:31:45] &lt;Guthur&gt; we are making Quote Requests</div>
<div class="line">[Sunday 06 February 2011] [11:31:53] &lt;sustrik&gt;        sure</div>
<div class="line">[Sunday 06 February 2011] [11:32:07] &lt;sustrik&gt;        reqID is an opaque correlation ID?</div>
<div class="line">[Sunday 06 February 2011] [11:32:54] &lt;Guthur&gt; sorry,  opaque correlation?</div>
<div class="line">[Sunday 06 February 2011] [11:33:10] &lt;sustrik&gt;        i.e. is it an ID used to pair the request and the reply?</div>
<div class="line">[Sunday 06 February 2011] [11:33:28] &lt;sustrik&gt;        opaque = can you put anything into ReqID?</div>
<div class="line">[Sunday 06 February 2011] [11:33:41] &lt;sustrik&gt;        or is it restricted to UUIDs or somesuch</div>
<div class="line">[Sunday 06 February 2011] [11:33:55] &lt;Guthur&gt; we can place anything</div>
<div class="line">[Sunday 06 February 2011] [11:34:07] &lt;Guthur&gt; and yes it matches request and reply</div>
<div class="line">[Sunday 06 February 2011] [11:34:35] &lt;sustrik&gt;        then what you have to do at FIX/0MQ boundary</div>
<div class="line">[Sunday 06 February 2011] [11:34:54] &lt;sustrik&gt;        is to get all the address message parts from 0mq request</div>
<div class="line">[Sunday 06 February 2011] [11:35:01] &lt;sustrik&gt;        and put them into FIX ReqID</div>
<div class="line">[Sunday 06 February 2011] [11:35:08] &lt;sustrik&gt;        when the reply arrives</div>
<div class="line">[Sunday 06 February 2011] [11:35:31] &lt;sustrik&gt;        you get all the message parts from thr ReqID</div>
<div class="line">[Sunday 06 February 2011] [11:35:55] &lt;sustrik&gt;        that would guarantee that the reply gets to the original requester</div>
<div class="line">[Sunday 06 February 2011] [11:36:29] &lt;Guthur&gt; yeah that sounds like a nice way</div>
<div class="line">[Sunday 06 February 2011] [11:38:00] &lt;Guthur&gt; cheers, my initial vision had an intermediary hop</div>
<div class="line">[Sunday 06 February 2011] [11:38:13] &lt;mikey_w&gt;        As a newbee is there a document that explains zeromq?</div>
<div class="line">[Sunday 06 February 2011] [11:38:26] &lt;Guthur&gt; I never thought about trying to reply directly to the Req Socket</div>
<div class="line">[Sunday 06 February 2011] [11:38:29] &lt;Guthur&gt; cheers sustrik</div>
<div class="line">[Sunday 06 February 2011] [11:38:45] &lt;Guthur&gt; mikey_w, the guide, <a class="reference external" href="http://zguide.zeromq.org/chapter:all">http://zguide.zeromq.org/chapter:all</a></div>
<div class="line">[Sunday 06 February 2011] [11:38:48] &lt;sustrik&gt;        what it is actually, is a 0mq-FIX bridge</div>
<div class="line">[Sunday 06 February 2011] [11:38:54] &lt;mikey_w&gt;        TU</div>
<div class="line">[Sunday 06 February 2011] [11:39:29] &lt;sustrik&gt;        so it&#8217;s actually pretty generic and useful</div>
<div class="line">[Sunday 06 February 2011] [11:39:38] &lt;sustrik&gt;        think of making it an opensource</div>
<div class="line">[Sunday 06 February 2011] [11:40:52] &lt;Guthur&gt; sustrik, Sure</div>
<div class="line">[Sunday 06 February 2011] [11:41:56] &lt;Guthur&gt; that solution just might make all the complexity completely disappear, awesome</div>
<div class="line">[Sunday 06 February 2011] [12:17:56] &lt;mikko&gt;  good evening</div>
<div class="line">[Sunday 06 February 2011] [12:19:08] &lt;mikko&gt;  pieterh: how was fosdem?</div>
<div class="line">[Sunday 06 February 2011] [12:19:14] &lt;pieterh&gt;        hi mikko</div>
<div class="line">[Sunday 06 February 2011] [12:19:18] &lt;pieterh&gt;        short and sweet</div>
<div class="line">[Sunday 06 February 2011] [12:19:28] &lt;pieterh&gt;        there&#8217;s a thread on hackernews: <a class="reference external" href="http://news.ycombinator.com/item?id=2185418">http://news.ycombinator.com/item?id=2185418</a></div>
<div class="line">[Sunday 06 February 2011] [12:20:22] &lt;pieterh&gt;        There&#8217;s a video here: <a class="reference external" href="http://www.youtube.com/watch?v=CCBYzKfmQ4U">http://www.youtube.com/watch?v=CCBYzKfmQ4U</a></div>
<div class="line">[Sunday 06 February 2011] [12:20:45] &lt;pieterh&gt;        I think I successfully annoyed and intrigued various people :-)</div>
<div class="line">[Sunday 06 February 2011] [12:21:59] &lt;pieterh&gt;        anyone here interested in a command-line API for 0MQ?</div>
<div class="line">[Sunday 06 February 2011] [12:22:52] &lt;mikko&gt;  what do you mean by command line api?</div>
<div class="line">[Sunday 06 February 2011] [12:23:54] &lt;pieterh&gt;        export CONTEXT=`zmq context`</div>
<div class="line">[Sunday 06 February 2011] [12:24:09] &lt;pieterh&gt;        export SUBSOCK=`zmq socket $CONTEXT`</div>
<div class="line">[Sunday 06 February 2011] [12:24:21] &lt;pieterh&gt;        zmq connect $SUBSOCK randomaddress</div>
<div class="line">[Sunday 06 February 2011] [12:24:27] &lt;pieterh&gt;        etc.</div>
<div class="line">[Sunday 06 February 2011] [12:24:42] &lt;pieterh&gt;        I just had a rough idea of how to make it</div>
<div class="line">[Sunday 06 February 2011] [12:24:49] &lt;pieterh&gt;        could be fun for demos, especially</div>
<div class="line">[Sunday 06 February 2011] [12:25:00] &lt;mikko&gt;  i saw one guy making a small utility that reads from stdin and publishes that</div>
<div class="line">[Sunday 06 February 2011] [12:25:13] &lt;mikko&gt;  apart from that haven&#8217;t seen much direct command line interaction</div>
<div class="line">[Sunday 06 February 2011] [12:25:23] &lt;pieterh&gt;        could it be useful?</div>
<div class="line">[Sunday 06 February 2011] [12:25:56] &lt;mikko&gt;  personally i dont see the immediate use-case but might be for some people</div>
<div class="line">[Sunday 06 February 2011] [12:26:27] &lt;pieterh&gt;        hmm, a resounding shrug, then :-)</div>
<div class="line">[Sunday 06 February 2011] [12:26:52] &lt;Guthur&gt; hehe, of course Lisp would make such demos easy</div>
<div class="line">[Sunday 06 February 2011] [12:27:00] &lt;Guthur&gt; the joys of having a REPL</div>
<div class="line">[Sunday 06 February 2011] [12:27:22] &lt;pieterh&gt;        problem with _any_ language is as soon as you go there you&#8217;ve lost 70% of your general audience</div>
<div class="line">[Sunday 06 February 2011] [12:28:00] &lt;Guthur&gt; a REPL is such a cool feature I&#8217;m amazed more languages/environments don&#8217;t offer it</div>
<div class="line">[Sunday 06 February 2011] [12:28:09] &lt;Guthur&gt; i so miss having it</div>
<div class="line">[Sunday 06 February 2011] [12:29:07] &lt;pieterh&gt;        Read-Eval-Print loop, ok, right</div>
<div class="line">[Sunday 06 February 2011] [12:29:20] &lt;pieterh&gt;        Perl has it, and indeed it&#8217;s useful</div>
<div class="line">[Sunday 06 February 2011] [12:29:43] &lt;Guthur&gt; in Perl case the language completely negates any usefulness, hehe</div>
<div class="line">[Sunday 06 February 2011] [12:30:19] &lt;pieterh&gt;        Spoken like a true language bigot :-)</div>
<div class="line">[Sunday 06 February 2011] [12:30:28] &lt;Guthur&gt; indeed, hehe</div>
<div class="line">[Sunday 06 February 2011] [12:33:01] &lt;Guthur&gt; Interesting aside,</div>
<div class="line">[Sunday 06 February 2011] [12:33:03] &lt;Guthur&gt; oops</div>
<div class="line">[Sunday 06 February 2011] [12:33:56] &lt;Guthur&gt; what i meant to say was: an interesting side note is that Unix initially was suppose to come with a Lisp</div>
<div class="line">[Sunday 06 February 2011] [12:34:46] &lt;Guthur&gt; C for the Kernel, Lisp for some sort of shell, I believe</div>
<div class="line">[Sunday 06 February 2011] [12:34:59] &lt;pieterh&gt;        hmm</div>
<div class="line">[Sunday 06 February 2011] [12:35:08] &lt;Guthur&gt; Not Unix actually, GNU OS</div>
<div class="line">[Sunday 06 February 2011] [12:35:30] &lt;pieterh&gt;        ah, for sure, GNU OS had lots of weird and wonderful ideas :-)</div>
<div class="line">[Sunday 06 February 2011] [12:35:49] &lt;Guthur&gt; Stallman like lisp obvious, look at Emacs</div>
<div class="line">[Sunday 06 February 2011] [12:37:25] &lt;pieterh&gt;        Lisp comes from MIT, where Stallman learned to hack</div>
<div class="line">[Sunday 06 February 2011] [17:42:52] &lt;devon_hillard&gt;  Is it correct to describe zeroMQ as a message-passing architecture?</div>
<div class="line">[Sunday 06 February 2011] [18:16:58] &lt;Guthur&gt; I think i would go more with &#8216;allows for a message passing architecture&#8217;</div>
<div class="line">[Sunday 06 February 2011] [19:00:43] &lt;Guthur&gt; what happens if you are polling and then subsequently close the socket?</div>
<div class="line">[Sunday 06 February 2011] [20:27:27] &lt;Guthur&gt; mikko, the build server is dead?</div>
<div class="line">[Sunday 06 February 2011] [23:39:19] &lt;kabs&gt;   Hello, if subscriber in pub-sub model goes down or restart we have the option to queue its data at publisher side by using HWM or SWAP but how can we make sure our system doesn&#8217;t fail if publisher goes down?</div>
<div class="line">[Monday 07 February 2011] [00:03:52] &lt;jhawk28&gt;        kabs, you have to persist the data in your program</div>
<div class="line">[Monday 07 February 2011] [00:04:12] &lt;jhawk28&gt;        and determine what is acceptable for restarts</div>
<div class="line">[Monday 07 February 2011] [00:04:23] &lt;jhawk28&gt;        is it ok to send data to the subscriber again</div>
<div class="line">[Monday 07 February 2011] [00:06:02] &lt;kabs&gt;   Not sure as of now but I am looking for the options</div>
<div class="line">[Monday 07 February 2011] [00:07:24] &lt;jhawk28&gt;        if you need strong durability, and are not concerned so much with performance, AMQP may be a better fit</div>
<div class="line">[Monday 07 February 2011] [00:08:20] &lt;jhawk28&gt;        <a class="reference external" href="https://github.com/rabbitmq/rmq-0mq">https://github.com/rabbitmq/rmq-0mq</a></div>
<div class="line">[Monday 07 February 2011] [00:09:03] &lt;kabs&gt;   jhawk28:Can you elaborate on data persistence here, since if pub is crashed all it&#8217;s buffers( I/O, network buffers ) will be gone, how can we have persistence of those buffers ??</div>
<div class="line">[Monday 07 February 2011] [00:09:55] &lt;jhawk28&gt;        it would be external to the ZMQ library</div>
<div class="line">[Monday 07 February 2011] [00:10:08] &lt;jhawk28&gt;        in the application space</div>
<div class="line">[Monday 07 February 2011] [00:11:54] &lt;jhawk28&gt;        so you could just log data as it was published</div>
<div class="line">[Monday 07 February 2011] [00:12:20] &lt;jhawk28&gt;        then when the publisher was restarted, it would just replay the log</div>
<div class="line">[Monday 07 February 2011] [00:13:23] &lt;jhawk28&gt;        you could sequence it and use a periodic ack using a pull socket to know how far back, but then you need to keep track of acks for all subscribers (which slows performance)</div>
<div class="line">[Monday 07 February 2011] [00:14:23] &lt;jhawk28&gt;        it creates durability, but has a penalty for performance in addition to breaking the desired contract of sending a message once and only once</div>
<div class="line">[Monday 07 February 2011] [00:16:04] &lt;kabs&gt;   jhawk28: it seems there is no ideal system, some system has some penalty , etc ...</div>
<div class="line">[Monday 07 February 2011] [00:16:39] &lt;jhawk28&gt;        correct. durable pub is hard</div>
<div class="line">[Monday 07 February 2011] [00:16:53] &lt;kabs&gt;   jhawk28: so this pull and ack is to maintain identity</div>
<div class="line">[Monday 07 February 2011] [00:17:22] &lt;jhawk28&gt;        <a class="reference external" href="http://sna-projects.com/kafka/">http://sna-projects.com/kafka/</a> is a full blown system just for it</div>
<div class="line">[Monday 07 February 2011] [00:17:35] &lt;jhawk28&gt;        you can get ideas from <a class="reference external" href="http://sna-projects.com/kafka/design.php">http://sna-projects.com/kafka/design.php</a></div>
<div class="line">[Monday 07 February 2011] [00:20:26] &lt;kabs&gt;   jhawk28: thank you for your input, will see it , just gave it a glance and found one beautiful line &#8220;Don&#8217;t fear the filesystem!&#8221;   :)</div>
<div class="line">[Monday 07 February 2011] [04:37:01] &lt;ianbarber&gt;      hi all, anyone got any PGM ideas about this assertion:</div>
<div class="line">[Monday 07 February 2011] [04:37:02] &lt;ianbarber&gt;      Assertion failed: rc == 0 (connect_session.cpp:82)</div>
<div class="line">[Monday 07 February 2011] [04:37:18] &lt;ianbarber&gt;      from a zmq_connect (pub, &#8220;epgm://;239.192.0.1:7601&#8221;);</div>
<div class="line">[Monday 07 February 2011] [04:38:28] &lt;ianbarber&gt;      as far as I can see it&#8217;s being thrown due to a failure in pgm_socket.cpp, possible if (!pgm_setsockopt (sock, IPPROTO_PGM, PGM_SEND_ONLY,</div>
<div class="line">[Monday 07 February 2011] [04:38:28] &lt;ianbarber&gt;                      &amp;send_only, sizeof (send_only))</div>
<div class="line">[Monday 07 February 2011] [04:38:32] &lt;ianbarber&gt;      due to that</div>
<div class="line">[Monday 07 February 2011] [04:40:00] &lt;guido_g&gt;        you dont&#8217;t specify an interface, check that the loopback is <em>not</em> used</div>
<div class="line">[Monday 07 February 2011] [04:40:22] &lt;guido_g&gt;        loopback is nit multicast capable</div>
<div class="line">[Monday 07 February 2011] [04:41:13] &lt;guido_g&gt;        s/nit/not/</div>
<div class="line">[Monday 07 February 2011] [04:43:32] &lt;ianbarber&gt;      ah, good point. just tried with eth0, same result</div>
<div class="line">[Monday 07 February 2011] [04:44:03] &lt;ianbarber&gt;      is there a way of telling whether the interface is capable, or enable/disabling it? i am on a VMWare VM, so it is entirely possible there is something odd about the network interface</div>
<div class="line">[Monday 07 February 2011] [04:44:17] &lt;guido_g&gt;        ifconfig should tell</div>
<div class="line">[Monday 07 February 2011] [04:44:56] &lt;ianbarber&gt;      yeah, MULTICAST is in there</div>
<div class="line">[Monday 07 February 2011] [04:44:57] &lt;ianbarber&gt;      hmm</div>
<div class="line">[Monday 07 February 2011] [04:46:54] &lt;ianbarber&gt;      i get the same thing with PGM as well as epgm (not massively suprisingly I&#8217;m sure)</div>
<div class="line">[Monday 07 February 2011] [04:56:31] &lt;mikko&gt;  ianbarber: increase ZMQ_RATE</div>
<div class="line">[Monday 07 February 2011] [04:56:36] &lt;mikko&gt;  seems to fix the symptoms</div>
<div class="line">[Monday 07 February 2011] [04:56:47] &lt;mikko&gt;  not sure what the actual issue is</div>
<div class="line">[Monday 07 February 2011] [04:58:52] &lt;ianbarber&gt;      ah, right, let me try that</div>
<div class="line">[Monday 07 February 2011] [04:58:57] &lt;ianbarber&gt;      what&#8217;s rate default to then?</div>
<div class="line">[Monday 07 February 2011] [04:59:45] &lt;guido_g&gt;        100kbit i think</div>
<div class="line">[Monday 07 February 2011] [05:01:53] &lt;suzan_shakya&gt;   Hi all, is there any method for listening on 2 sockets other than zmq.Poller()</div>
<div class="line">[Monday 07 February 2011] [05:02:08] &lt;ianbarber&gt;      awesome, that seemed to work (once I remember to define it as an int64_t rather than an int)</div>
<div class="line">[Monday 07 February 2011] [05:02:13] &lt;ianbarber&gt;      thanks mikko!</div>
<div class="line">[Monday 07 February 2011] [05:03:51] &lt;ianbarber&gt;      (and thanks guido for the help as well :))</div>
<div class="line">[Monday 07 February 2011] [05:15:57] &lt;sustrik&gt;        ianbarber: can you report the problem on the mailing list so that steve-o can have a look at it?</div>
<div class="line">[Monday 07 February 2011] [05:16:30] &lt;sustrik&gt;        suzan_shakya: you mean two 0mq sockets or two peers?</div>
<div class="line">[Monday 07 February 2011] [05:17:28] &lt;ianbarber&gt;      sustrik: sure thing</div>
<div class="line">[Monday 07 February 2011] [05:22:45] &lt;mikko&gt;  <a class="reference external" href="http://build.valokuva.org/job/ZeroMQ2-core-master-GCC-linux_s390x/11/console">http://build.valokuva.org/job/ZeroMQ2-core-master-GCC-linux_s390x/11/console</a></div>
<div class="line">[Monday 07 February 2011] [05:22:50] &lt;mikko&gt;  s390x building</div>
<div class="line">[Monday 07 February 2011] [05:23:24] &lt;mikko&gt;  and fails</div>
<div class="line">[Monday 07 February 2011] [05:25:55] &lt;ianbarber&gt;      oh, cool that that&#8217;s on the build system, even if it is failing :)</div>
<div class="line">[Monday 07 February 2011] [05:26:44] &lt;sustrik&gt;        the best thing is that&#8217;s it proves that distributed build system is doable :)</div>
<div class="line">[Monday 07 February 2011] [05:27:07] &lt;sustrik&gt;        configure.in:9: error: possibly undefined macro: m4_esyscmd_s</div>
<div class="line">[Monday 07 February 2011] [05:27:23] &lt;mikko&gt;  yeah, just trying to figure out what system it is</div>
<div class="line">[Monday 07 February 2011] [05:27:28] &lt;mikko&gt;  might very well be a RHEL</div>
<div class="line">[Monday 07 February 2011] [05:27:31] &lt;sustrik&gt;         that&#8217;s the last patch that was made to the build system</div>
<div class="line">[Monday 07 February 2011] [05:27:37] &lt;mikko&gt;  yes</div>
<div class="line">[Monday 07 February 2011] [05:27:54] &lt;mikko&gt;  m4_esyscmd_s is present in autoconf 2.61</div>
<div class="line">[Monday 07 February 2011] [05:28:00] &lt;mikko&gt;  which is the minimum requirement</div>
<div class="line">[Monday 07 February 2011] [05:28:08] &lt;mikko&gt;  not sure what version that system runs</div>
<div class="line">[Monday 07 February 2011] [05:28:38] &lt;sustrik&gt;        aha</div>
<div class="line">[Monday 07 February 2011] [05:28:49] &lt;mikko&gt;  encouraging, no google results for &#8220;possibly undefined macro: m4_esyscmd_s&#8221;</div>
<div class="line">[Monday 07 February 2011] [05:30:23] &lt;mikko&gt;  works in 2.68 autoconf</div>
<div class="line">[Monday 07 February 2011] [05:30:31] &lt;mikko&gt;  that system runs 2.63</div>
<div class="line">[Monday 07 February 2011] [05:30:35] &lt;mikko&gt;  very strange</div>
<div class="line">[Monday 07 February 2011] [05:33:00] &lt;mikko&gt;  hmm, sustrik i think it&#8217;s better to revert the patch</div>
<div class="line">[Monday 07 February 2011] [05:33:24] &lt;jugg&gt;   :(</div>
<div class="line">[Monday 07 February 2011] [05:33:42] &lt;sustrik&gt;        jugg: what was the problem it solved?</div>
<div class="line">[Monday 07 February 2011] [05:33:53] &lt;mikko&gt;  i think the behaviour of m4_esyscmd_s is a lot more inconsistent over different platofrms</div>
<div class="line">[Monday 07 February 2011] [05:34:05] &lt;jugg&gt;   debian 6 systems failing</div>
<div class="line">[Monday 07 February 2011] [05:34:14] &lt;mikko&gt;  jugg: does it fail or warn?</div>
<div class="line">[Monday 07 February 2011] [05:34:47] &lt;mikko&gt;  if it fails then we need to put more attention to this</div>
<div class="line">[Monday 07 February 2011] [05:35:05] &lt;mikko&gt;  (the daily build cluster master is debian 6.0)</div>
<div class="line">[Monday 07 February 2011] [05:35:15] &lt;sustrik&gt;        configure.in:9: warning: AC_INIT: not a literal: m4_esyscmd([./version.sh | tr -</div>
<div class="line">[Monday 07 February 2011] [05:35:15] &lt;sustrik&gt;        d &#8216;n&#8217;])</div>
<div class="line">[Monday 07 February 2011] [05:35:35] &lt;jugg&gt;   looks like a warning, I&#8217;m not sure if ./configure works after, I did not try.</div>
<div class="line">[Monday 07 February 2011] [05:35:42] &lt;jugg&gt;   yes, what sustrik said</div>
<div class="line">[Monday 07 February 2011] [05:36:03] &lt;sustrik&gt;        jugg: can you check whether the package builds ok in spite of the warning?</div>
<div class="line">[Monday 07 February 2011] [05:36:21] &lt;jugg&gt;   one moment...</div>
<div class="line">[Monday 07 February 2011] [05:36:48] &lt;mikko&gt;  m4_esyscmd_s seems to present on all platforms which had daily builds but not on the new s390x</div>
<div class="line">[Monday 07 February 2011] [05:38:01] &lt;mikko&gt;  another option would be to use &#8216;echo -n&#8217; instead of &#8216;echo&#8217; in version.sh and revert to m4_esyscmd</div>
<div class="line">[Monday 07 February 2011] [05:38:28]   * sustrik has no idea what&#8217;s going on there; it&#8217;s up to you</div>
<div class="line">[Monday 07 February 2011] [05:42:33] &lt;jugg&gt;   everything seems to build fine without that fix</div>
<div class="line">[Monday 07 February 2011] [05:43:14] &lt;jugg&gt;   without the fix, ./autogen.sh produces that warning 6 times.</div>
<div class="line">[Monday 07 February 2011] [05:44:35] &lt;mikko&gt;  jugg: what about AC_INIT([zeromq],[m4_esyscmd([./version.sh])],[<a class="reference external" href="mailto:zeromq-dev&#37;&#52;&#48;lists&#46;zeromq&#46;org">zeromq-dev<span>&#64;</span>lists<span>&#46;</span>zeromq<span>&#46;</span>org</a>])</div>
<div class="line">[Monday 07 February 2011] [05:44:45] &lt;mikko&gt;  and change version.sh to use &#8216;echo -n &#8216; at the end</div>
<div class="line">[Monday 07 February 2011] [05:46:06] &lt;mikko&gt;  echo -n is not portable</div>
<div class="line">[Monday 07 February 2011] [05:47:57] &lt;jugg&gt;   it worked however...</div>
<div class="line">[Monday 07 February 2011] [05:50:22] &lt;mikko&gt;  bash shell most probably</div>
<div class="line">[Monday 07 February 2011] [05:50:28] &lt;mikko&gt;  ksh:</div>
<div class="line">[Monday 07 February 2011] [05:50:29] &lt;mikko&gt;  $ echo -n hi</div>
<div class="line">[Monday 07 February 2011] [05:50:29] &lt;mikko&gt;  -n hi</div>
<div class="line">[Monday 07 February 2011] [05:53:59] &lt;mikko&gt;  hmm, what about if we moved the tr -d &#8216;n&#8217; to the version.sh</div>
<div class="line">[Monday 07 February 2011] [05:54:05] &lt;mikko&gt;  that should be as portable as the old way</div>
<div class="line">[Monday 07 February 2011] [05:56:57] &lt;mikko&gt;  jugg: <a class="reference external" href="https://gist.github.com/35b8a685a38c0e4a92c5">https://gist.github.com/35b8a685a38c0e4a92c5</a></div>
<div class="line">[Monday 07 February 2011] [05:56:59] &lt;mikko&gt;  can you test that?</div>
<div class="line">[Monday 07 February 2011] [06:01:33] &lt;jugg&gt;   works</div>
<div class="line">[Monday 07 February 2011] [06:07:53] &lt;mikko&gt;  works on s390 as well</div>
<div class="line">[Monday 07 February 2011] [06:17:28] &lt;mikko&gt;  what on earth</div>
<div class="line">[Monday 07 February 2011] [06:17:29] &lt;mikko&gt;  &#8220;conftest.c:15: error: &#8216;Syntax&#8217; does not name a type</div>
<div class="line">[Monday 07 February 2011] [07:14:22] &lt;sustrik&gt;        mikko: should i apply the patch or not?</div>
<div class="line">[Monday 07 February 2011] [08:01:02] &lt;kristsk&gt;        hello there.</div>
<div class="line">[Monday 07 February 2011] [08:01:46] &lt;kristsk&gt;        is it posssible to send FDs (file descriptors) around with zeromq - if processes reside in same box?</div>
<div class="line">[Monday 07 February 2011] [08:10:52] &lt;sustrik&gt;        FDs are process-specific</div>
<div class="line">[Monday 07 February 2011] [08:11:05] &lt;sustrik&gt;        no way of passing them between processes</div>
<div class="line">[Monday 07 February 2011] [08:33:40] &lt;kristsk&gt;        sustrik - there is a way.</div>
<div class="line">[Monday 07 February 2011] [08:34:15] &lt;sustrik&gt;        ?</div>
<div class="line">[Monday 07 February 2011] [08:35:28] &lt;kristsk&gt;        <a class="reference external" href="https://github.com/pgte/fugue/wiki/How-Fugue-Works">https://github.com/pgte/fugue/wiki/How-Fugue-Works</a></div>
<div class="line">[Monday 07 February 2011] [08:35:47] &lt;kristsk&gt;        2. Master socket - ...</div>
<div class="line">[Monday 07 February 2011] [08:37:08] &lt;sustrik&gt;        right</div>
<div class="line">[Monday 07 February 2011] [08:37:13] &lt;sustrik&gt;        i almost forgot about that</div>
<div class="line">[Monday 07 February 2011] [08:37:34] &lt;kristsk&gt;        i am looking into zeromq as it has some nice features (queues, pairs), but im not sure i want to keep 2 separate subsystems for sharing data among processes</div>
<div class="line">[Monday 07 February 2011] [08:37:35] &lt;sustrik&gt;        anyway, it doesn&#8217;t scale, so no such thing with 0mq</div>
<div class="line">[Monday 07 February 2011] [08:37:47] &lt;kristsk&gt;        even with local transport ?</div>
<div class="line">[Monday 07 February 2011] [08:38:18] &lt;sustrik&gt;        the point is that the code written for multiple threads can be scaled to multiple processes or boxes</div>
<div class="line">[Monday 07 February 2011] [08:38:31] &lt;sustrik&gt;        once you start passing FDs around, you break the scalability</div>
<div class="line">[Monday 07 February 2011] [08:39:25] &lt;kristsk&gt;        too bad :/</div>
<div class="line">[Monday 07 February 2011] [08:39:45] &lt;stockMQ&gt;        Hi .. where can i find documentation for Forwarder and Streamer.. I am working on VC++</div>
<div class="line">[Monday 07 February 2011] [08:49:38] &lt;stockMQ&gt;        All i found was this</div>
<div class="line">[Monday 07 February 2011] [08:49:38] &lt;stockMQ&gt;        <a class="reference external" href="http://api.zeromq.org/zmq_forwarder.html">http://api.zeromq.org/zmq_forwarder.html</a></div>
<div class="line">[Monday 07 February 2011] [09:01:58] &lt;mikko&gt;  sustrik: yes, please</div>
<div class="line">[Monday 07 February 2011] [09:02:45] &lt;mikko&gt;  it should work on all of the daily build platforms after that</div>
<div class="line">[Monday 07 February 2011] [09:03:11] &lt;mikko&gt;  well, all platforms</div>
<div class="line">[Monday 07 February 2011] [09:07:47] &lt;CIA-21&gt; zeromq2: 03Mikko Koppanen 07master * r908b39b 10/ (configure.in version.sh):</div>
<div class="line">[Monday 07 February 2011] [09:07:47] &lt;CIA-21&gt; zeromq2: m4_esyscmd_s doesnt seem to be portable across different systems</div>
<div class="line">[Monday 07 February 2011] [09:07:47] &lt;CIA-21&gt; zeromq2: Signed-off-by: Mikko Koppanen &lt;<a class="reference external" href="mailto:mikko&#46;koppanen&#37;&#52;&#48;gmail&#46;com">mikko<span>&#46;</span>koppanen<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/fCd8BW">http://bit.ly/fCd8BW</a></div>
<div class="line">[Monday 07 February 2011] [09:08:00] &lt;mikko&gt;  thanks</div>
<div class="line">[Monday 07 February 2011] [09:08:24] &lt;mikko&gt;  hmm, so now we have proved that remote build slaves can work</div>
<div class="line">[Monday 07 February 2011] [09:08:43] &lt;sustrik&gt;        yes</div>
<div class="line">[Monday 07 February 2011] [09:09:05] &lt;sustrik&gt;        the question now is whether we can get more people to maintain slaves</div>
<div class="line">[Monday 07 February 2011] [09:09:22] &lt;mikko&gt;  yes, sparc would be nice. possibly hp-ux, aix etc</div>
<div class="line">[Monday 07 February 2011] [09:09:48] &lt;sustrik&gt;        you should maybe write an email about the new feature, so that people know there&#8217;s such an option</div>
<div class="line">[Monday 07 February 2011] [09:14:04] &lt;zchrish&gt;        Has anyone tried to compile zeromq on mingw; I want to use zeromq with Qt.</div>
<div class="line">[Monday 07 February 2011] [09:15:09] &lt;sustrik&gt;        i recall there&#8217;s a 0mq/qt project on labs page</div>
<div class="line">[Monday 07 February 2011] [09:16:15] &lt;sustrik&gt;        <a class="reference external" href="http://labs.wordtothewise.com/zeromqt/">http://labs.wordtothewise.com/zeromqt/</a></div>
<div class="line">[Monday 07 February 2011] [09:17:02] &lt;zchrish&gt;        Oh, sorry. I meant compiling zeromq on Windows using mingw.</div>
<div class="line">[Monday 07 February 2011] [09:18:33] &lt;mikko&gt;  zchrish: yes</div>
<div class="line">[Monday 07 February 2011] [09:18:50] &lt;mikko&gt;  <a class="reference external" href="http://build.valokuva.org/job/ZeroMQ2-core-master_mingw32-win7/">http://build.valokuva.org/job/ZeroMQ2-core-master_mingw32-win7/</a></div>
<div class="line">[Monday 07 February 2011] [09:18:58] &lt;zchrish&gt;        Oh, great. Thanks.</div>
<div class="line">[Monday 07 February 2011] [09:19:08] &lt;mikko&gt;  <a class="reference external" href="http://snapshot.valokuva.org/">http://snapshot.valokuva.org/</a></div>
<div class="line">[Monday 07 February 2011] [09:19:15] &lt;mikko&gt;  you can also get a snapshot from there</div>
<div class="line">[Monday 07 February 2011] [09:20:43] &lt;ianbarber&gt;      mikko: are there any plans to do rpm and deb builds as part of your build empire at any point?</div>
<div class="line">[Monday 07 February 2011] [09:21:25] &lt;ianbarber&gt;      it seems like you have to run the make dist (i guess?) to generate the spec files etc. properly, so it seems build-y</div>
<div class="line">[Monday 07 February 2011] [09:21:44] &lt;mikko&gt;  yes, debian would be easy as the build master is debian</div>
<div class="line">[Monday 07 February 2011] [09:21:54] &lt;mikko&gt;  rpm would require setting up centos/rhel build slave</div>
<div class="line">[Monday 07 February 2011] [09:22:47] &lt;ianbarber&gt;      really? i mean, you could run rpmbuild on debian ok</div>
<div class="line">[Monday 07 February 2011] [09:24:07] &lt;mikko&gt;  the dependencies don&#8217;t come out correctly</div>
<div class="line">[Monday 07 February 2011] [09:24:09] &lt;ianbarber&gt;      i guess the only difficulty would be rpmbuild complaining about build dependencies on compile, but you should be able to force ignore that, as the build reqs will be there</div>
<div class="line">[Monday 07 February 2011] [09:24:34] &lt;mikko&gt;  thats not a problem</div>
<div class="line">[Monday 07 February 2011] [09:24:39] &lt;mikko&gt;  the problem is run-time deps</div>
<div class="line">[Monday 07 February 2011] [09:25:32] &lt;ianbarber&gt;      verifying them, or an actual problem during the build?</div>
<div class="line">[Monday 07 February 2011] [09:26:56] &lt;ianbarber&gt;      probably easiest to have the actual centos env though i guess</div>
<div class="line">[Monday 07 February 2011] [09:28:09] &lt;mikko&gt;  if you build on debian you depend on the libraries present on the host system</div>
<div class="line">[Monday 07 February 2011] [09:28:19] &lt;mikko&gt;  which are more than likely not present in RHEL/Centos</div>
<div class="line">[Monday 07 February 2011] [09:28:40] &lt;mikko&gt;  also library versions you link against etc</div>
<div class="line">[Monday 07 February 2011] [09:29:04] &lt;ianbarber&gt;      oh, i get it. yeah, that&#8217;s a pain. could build the SRPMS automatically, but yeah, would be easier to have a sep slave</div>
<div class="line">[Monday 07 February 2011] [09:31:42] &lt;sustrik&gt;        still, the idea of building packages on remote boxes is quite nice</div>
<div class="line">[Monday 07 February 2011] [09:32:23] &lt;sustrik&gt;        anyone who wants to have fresh packages available could volunteer to run the build on his box</div>
<div class="line">[Monday 07 February 2011] [09:32:52] &lt;sustrik&gt;        this way we could get quite a nice coverage of different CPUs/OSes</div>
<div class="line">[Monday 07 February 2011] [09:32:56] &lt;kristsk&gt;        how bout vms ?</div>
<div class="line">[Monday 07 February 2011] [09:33:09] &lt;sustrik&gt;        are you running vms?</div>
<div class="line">[Monday 07 February 2011] [09:33:26] &lt;sustrik&gt;        vms is a problem as it&#8217;s not an unix</div>
<div class="line">[Monday 07 February 2011] [09:33:28] &lt;kristsk&gt;        uh huh, i ment, VM&#8217;s not VMS</div>
<div class="line">[Monday 07 February 2011] [09:33:55] &lt;sustrik&gt;        can you simulate a different CPU in a VM?</div>
<div class="line">[Monday 07 February 2011] [09:34:13] &lt;kristsk&gt;        probably not :/</div>
<div class="line">[Monday 07 February 2011] [09:36:58] &lt;Guthur&gt; talking about builds...I went and broke the clrzmq2 build again...</div>
<div class="line">[Monday 07 February 2011] [09:37:12] &lt;Guthur&gt; Visual Studios Solutions are really beginning to bug me</div>
<div class="line">[Monday 07 February 2011] [09:39:42] &lt;sustrik&gt;        heh</div>
<div class="line">[Monday 07 February 2011] [09:40:40] &lt;mikko&gt;  Guthur: why dont you use msbuild?</div>
<div class="line">[Monday 07 February 2011] [09:40:55] &lt;mikko&gt;  kristsk: we are running different operating systems in VMs</div>
<div class="line">[Monday 07 February 2011] [09:41:13] &lt;Guthur&gt; mikko: you know I asked myself the same question this morning, hehe</div>
<div class="line">[Monday 07 February 2011] [09:41:14] &lt;mikko&gt;  kristsk: linux, windows, solaris, freebsd but they are all x86</div>
<div class="line">[Monday 07 February 2011] [09:41:45] &lt;kristsk&gt;        yeah but sparcish things prolly wont run in vm on x86</div>
<div class="line">[Monday 07 February 2011] [09:41:47] &lt;Guthur&gt; mikko: but I do want to make sure that clrzmq2 can be used easily from MSVS</div>
<div class="line">[Monday 07 February 2011] [09:42:17] &lt;mikko&gt;  not sure if qemu can emulate processors</div>
<div class="line">[Monday 07 February 2011] [09:42:33] &lt;Guthur&gt; clrzmq2 will experience more resistance if it doesn&#8217;t work well from visual studio</div>
<div class="line">[Monday 07 February 2011] [09:42:46] &lt;Guthur&gt; IMO</div>
<div class="line">[Monday 07 February 2011] [09:46:48] &lt;sustrik&gt;        Guthur: +1</div>
<div class="line">[Monday 07 February 2011] [09:48:45] &lt;mikko&gt;  hi neale1</div>
<div class="line">[Monday 07 February 2011] [09:49:01] &lt;mikko&gt;  everything seems to be up and running and the latest rounds of builds succeeded</div>
<div class="line">[Monday 07 February 2011] [09:50:29] &lt;neale1&gt; Hi Mikko. Yes, we&#8217;re building on bigger processor than my little emulator box. It&#8217;s about 3 models older than the current generation. It&#8217;s on a system with 700 virtual machines so it&#8217;s being constrained so it &#8220;plays well with others&#8221;. But 7 mins is pretty good turnaround.</div>
<div class="line">[Monday 07 February 2011] [09:50:58] &lt;mikko&gt;  neale1: yeah, definitely. thanks for your hard work</div>
<div class="line">[Monday 07 February 2011] [09:51:08] &lt;neale1&gt; No worries</div>
<div class="line">[Monday 07 February 2011] [09:51:15] &lt;mikko&gt;  i&#8217;ll send an email out today that mentions the new system z build machine if you don&#8217;t mind?</div>
<div class="line">[Monday 07 February 2011] [09:51:25] &lt;neale1&gt; Sure</div>
<div class="line">[Monday 07 February 2011] [09:52:07] &lt;neale1&gt; The machine it&#8217;s running on is part of IBM&#8217;s OSDL facility running at Marist College in mid-state new York.</div>
<div class="line">[Monday 07 February 2011] [09:52:35] &lt;neale1&gt; I&#8217;m the s390x maintainer of mono so that&#8217;s where I do my builds for it</div>
<div class="line">[Monday 07 February 2011] [10:05:12] &lt;sustrik&gt;        hm, the people/organizations who participate in build system should be mentioned somewhere so that they get the credit...</div>
<div class="line">[Monday 07 February 2011] [10:12:32] &lt;ianbarber&gt;      with pub/sub, you can have multiple subs connected to a pub, multiple pubs connected to a sub, but not multiple pubs connected to multiple subs right? does that include multicast transports?</div>
<div class="line">[Monday 07 February 2011] [10:13:53] &lt;mikko&gt;  stutter: i need to create a wiki page detailing the build system</div>
<div class="line">[Monday 07 February 2011] [10:14:01] &lt;sustrik&gt;        multicast treats the netowrk swtich (hardware) as a device</div>
<div class="line">[Monday 07 February 2011] [10:14:02] &lt;mikko&gt;  and organisations / people who participate in it</div>
<div class="line">[Monday 07 February 2011] [10:14:15] &lt;stutter&gt;        mikko: did you mean to tab-complete someone else/</div>
<div class="line">[Monday 07 February 2011] [10:14:23] &lt;mikko&gt;  yes</div>
<div class="line">[Monday 07 February 2011] [10:14:26] &lt;stutter&gt;        :P</div>
<div class="line">[Monday 07 February 2011] [10:14:28] &lt;mikko&gt;  i meant to tab complete sustrik</div>
<div class="line">[Monday 07 February 2011] [10:14:32] &lt;stutter&gt;        i figured</div>
<div class="line">[Monday 07 February 2011] [10:14:33] &lt;mikko&gt;  sorry about that</div>
<div class="line">[Monday 07 February 2011] [10:14:45] &lt;sustrik&gt;        mikko: ok</div>
<div class="line">[Monday 07 February 2011] [10:14:57] &lt;mikko&gt;  ill try to have time today, ill put a reminder</div>
<div class="line">[Monday 07 February 2011] [10:15:13] &lt;sustrik&gt;        ianbarber: so both pubs and subs &#8220;connect&#8221; to the switch</div>
<div class="line">[Monday 07 February 2011] [10:15:25] &lt;sustrik&gt;        which then forwards any message from any pub to all subs</div>
<div class="line">[Monday 07 February 2011] [10:15:44] &lt;ianbarber&gt;      that makes sense, thanks</div>
<div class="line">[Monday 07 February 2011] [10:16:03] &lt;mikko&gt;  now when i look at ian&#8217;s message about openpgm i think steven sent me an email about it</div>
<div class="line">[Monday 07 February 2011] [10:16:09] &lt;mikko&gt;  didnt have time to look further</div>
<div class="line">[Monday 07 February 2011] [10:16:21] &lt;sustrik&gt;        mikko: nice, i think if we made it reasonably visible we can get more participants</div>
<div class="line">[Monday 07 February 2011] [10:16:36] &lt;mikko&gt;  &#8220;Building ZeroMQ I finally get through to the same assertion, and wondering through the code I find the window size is being calculated with options.rate in bytes not kilobytes.  So add a  1024 for both rxw_sqns and txw_sqns.&#8221;</div>
<div class="line">[Monday 07 February 2011] [10:16:45] &lt;mikko&gt;  was the relevant part from his email</div>
<div class="line">[Monday 07 February 2011] [10:17:15] &lt;mikko&gt;  but adding 1024 x didn&#8217;t solve the issue for me and didn&#8217;t really have time to look it further</div>
<div class="line">[Monday 07 February 2011] [10:17:51] &lt;sustrik&gt;        i tried to debug it, but here is seemed that setting the port have failed rather than rate...</div>
<div class="line">[Monday 07 February 2011] [10:17:52] &lt;sustrik&gt;        strange</div>
<div class="line">[Monday 07 February 2011] [10:22:42] &lt;ianbarber&gt;      mikko: there is a comment to that effects,     //  Data rate is in [B/s]. options.rate is in [kb/s].</div>
<div class="line">[Monday 07 February 2011] [10:23:01] &lt;ianbarber&gt;      and it is possible I was hitting the assert due to failing pgm_setsockopt (sock, IPPROTO_PGM, PGM_TXW_SQNS,</div>
<div class="line">[Monday 07 February 2011] [10:23:02] &lt;ianbarber&gt;                      &amp;txw_sqns, sizeof (txw_sqns))</div>
<div class="line">[Monday 07 February 2011] [10:28:30] &lt;ianbarber&gt;      yep, that&#8217;s it</div>
<div class="line">[Monday 07 February 2011] [10:28:46] &lt;ianbarber&gt;      if txw_sqns is 0, it asserts</div>
<div class="line">[Monday 07 February 2011] [10:30:33] &lt;ianbarber&gt;      pmg_max_tpdu is 1500</div>
<div class="line">[Monday 07 February 2011] [10:30:57] &lt;ianbarber&gt;      the sqns is options.recovery_ivl * options.rate /</div>
<div class="line">[Monday 07 February 2011] [10:30:57] &lt;ianbarber&gt;                                            txw_max_tpdu</div>
<div class="line">[Monday 07 February 2011] [10:31:05] &lt;ianbarber&gt;      and recovery_ivl defaults to 10</div>
<div class="line">[Monday 07 February 2011] [10:31:22] &lt;ianbarber&gt;      so at 149 or below, it comes out as int 0</div>
<div class="line">[Monday 07 February 2011] [10:31:25] &lt;ianbarber&gt;      which blows up</div>
<div class="line">[Monday 07 February 2011] [10:31:44] &lt;ianbarber&gt;      so i think that for this calculation options.rate should be multiplied by 1024</div>
<div class="line">[Monday 07 February 2011] [10:32:03] &lt;ianbarber&gt;      or zmq:txw_max_tpdu appropriately reduced, but that seems more likely to have knock ons</div>
<div class="line">[Monday 07 February 2011] [10:33:15] &lt;Guthur&gt; is there documentation of ZeroMQs underlying architecture, or is it just the source code?</div>
<div class="line">[Monday 07 February 2011] [10:38:04] &lt;sustrik&gt;        ianbarber: that&#8217;s useful</div>
<div class="line">[Monday 07 February 2011] [10:38:14] &lt;sustrik&gt;        let me see whether it can be fixed</div>
<div class="line">[Monday 07 February 2011] [10:38:26] &lt;ianbarber&gt;      just tested a multiplying it by 1024 and it works fine</div>
<div class="line">[Monday 07 February 2011] [10:38:40] &lt;ianbarber&gt;      i can send a patch if useful (it&#8217;s like 4 lines, so maybe not worth it)</div>
<div class="line">[Monday 07 February 2011] [10:39:04] &lt;sustrik&gt;        you mean patch that mutliples the value?</div>
<div class="line">[Monday 07 February 2011] [10:39:15] &lt;ianbarber&gt;      yeah</div>
<div class="line">[Monday 07 February 2011] [10:42:57] &lt;sustrik&gt;        hm, it seems it should be multiplied by 8 rather than 1024</div>
<div class="line">[Monday 07 February 2011] [10:43:17] &lt;sustrik&gt;        tpdu is in bytes</div>
<div class="line">[Monday 07 February 2011] [10:43:20] &lt;sustrik&gt;        rate is in bits</div>
<div class="line">[Monday 07 February 2011] [10:43:31] &lt;ianbarber&gt;      ah, you&#8217;re right</div>
<div class="line">[Monday 07 February 2011] [10:43:52] &lt;ianbarber&gt;      just fired the patch on mail as well, so you could see what i meant, but yeah, it should be 8</div>
<div class="line">[Monday 07 February 2011] [10:44:16] &lt;ianbarber&gt;      actually, should it?</div>
<div class="line">[Monday 07 February 2011] [10:44:19] &lt;sustrik&gt;        the calculation is kind of strange</div>
<div class="line">[Monday 07 February 2011] [10:44:27] &lt;ianbarber&gt;      just looking, the comment does mention bytes to kb</div>
<div class="line">[Monday 07 February 2011] [10:44:34] &lt;sustrik&gt;        let us decypher what&#8217;s going on there...</div>
<div class="line">[Monday 07 February 2011] [10:44:45] &lt;ianbarber&gt;      are you seeing bits to bytes somewhere?</div>
<div class="line">[Monday 07 February 2011] [10:44:56] &lt;sustrik&gt;        nope</div>
<div class="line">[Monday 07 February 2011] [10:45:12] &lt;stimpie&gt;        Guthur, all I could find is the source code.</div>
<div class="line">[Monday 07 February 2011] [10:45:17] &lt;sustrik&gt;        we are speaking about pgm_socket.cpp:201, right?</div>
<div class="line">[Monday 07 February 2011] [10:45:54] &lt;ianbarber&gt;      yeah, or the equivalent bit in sender</div>
<div class="line">[Monday 07 February 2011] [10:46:03] &lt;sustrik&gt;        options.recovery_ivl_msec &gt;= 0 ?</div>
<div class="line">[Monday 07 February 2011] [10:46:03] &lt;sustrik&gt;                                              options.recovery_ivl_msec * options.rate /</div>
<div class="line">[Monday 07 February 2011] [10:46:03] &lt;sustrik&gt;                                              (1000 * rxw_max_tpdu) :</div>
<div class="line">[Monday 07 February 2011] [10:46:03] &lt;sustrik&gt;                                              options.recovery_ivl * options.rate /</div>
<div class="line">[Monday 07 February 2011] [10:46:03] &lt;sustrik&gt;                                              rxw_max_tpdu</div>
<div class="line">[Monday 07 February 2011] [10:46:16] &lt;ianbarber&gt;      pgm_max_tpdu is 1500, which looks like bytes</div>
<div class="line">[Monday 07 February 2011] [10:46:23] &lt;sustrik&gt;        yes, it&#8217;s bytes</div>
<div class="line">[Monday 07 February 2011] [10:46:47] &lt;sustrik&gt;        so, first of all, there are 2 options</div>
<div class="line">[Monday 07 February 2011] [10:46:59] &lt;sustrik&gt;        recovery_ivl and recovery_ivl_msec</div>
<div class="line">[Monday 07 February 2011] [10:47:11] &lt;sustrik&gt;        the former is in secs, the latter is in msecs</div>
<div class="line">[Monday 07 February 2011] [10:47:37] &lt;sustrik&gt;        if the latter is set to 0 (default), former value is used</div>
<div class="line">[Monday 07 February 2011] [10:47:53] &lt;ianbarber&gt;      zmq_rate says kilobits per second</div>
<div class="line">[Monday 07 February 2011] [10:48:09] &lt;ianbarber&gt;      the msec/sec is dealt with in the * 1000</div>
<div class="line">[Monday 07 February 2011] [10:48:12] &lt;ianbarber&gt;      so i think we need * 128</div>
<div class="line">[Monday 07 February 2011] [10:48:22] &lt;ianbarber&gt;      to go from kilobits to bytes</div>
<div class="line">[Monday 07 February 2011] [10:48:52] &lt;sustrik&gt;        i haven&#8217;t got that far yet :)</div>
<div class="line">[Monday 07 February 2011] [10:49:26]   * sustrik has to write it down</div>
<div class="line">[Monday 07 February 2011] [10:50:24] &lt;ianbarber&gt;      :)</div>
<div class="line">[Monday 07 February 2011] [10:53:27] &lt;sustrik&gt;        recovery_ivl * rate * max_tpdu * 1000 / 8</div>
<div class="line">[Monday 07 February 2011] [10:54:12] &lt;sustrik&gt;        ianbarber: can you double check that?</div>
<div class="line">[Monday 07 February 2011] [10:54:54] &lt;sustrik&gt;        sorry</div>
<div class="line">[Monday 07 February 2011] [10:55:02] &lt;sustrik&gt;        recovery_ivl * rate / max_tpdu * 1000 / 8</div>
<div class="line">[Monday 07 February 2011] [10:56:40] &lt;ianbarber&gt;      was about to say :)</div>
<div class="line">[Monday 07 February 2011] [10:57:02] &lt;sustrik&gt;        ok, now the ordering of the terms</div>
<div class="line">[Monday 07 February 2011] [10:57:08] &lt;sustrik&gt;        the computation is done in ints</div>
<div class="line">[Monday 07 February 2011] [10:57:21] &lt;sustrik&gt;        so we have to beware rounding down to zero</div>
<div class="line">[Monday 07 February 2011] [10:57:31] &lt;ianbarber&gt;      not sure about that one still</div>
<div class="line">[Monday 07 February 2011] [10:57:39] &lt;sustrik&gt;        what&#8217;s wrong?</div>
<div class="line">[Monday 07 February 2011] [10:57:41] &lt;ianbarber&gt;      10 * 100 / 1500 * 1000 / 8</div>
<div class="line">[Monday 07 February 2011] [10:57:49] &lt;ianbarber&gt;      that&#8217;s with the default numbers plugged in</div>
<div class="line">[Monday 07 February 2011] [10:59:11] &lt;sustrik&gt;        that equals in ~83 packets</div>
<div class="line">[Monday 07 February 2011] [11:00:16] &lt;ianbarber&gt;      of course, this is for the ivl_msec case, so it would be 10000 or thereabouts on the left</div>
<div class="line">[Monday 07 February 2011] [11:00:20] &lt;ianbarber&gt;      yeah, that works then</div>
<div class="line">[Monday 07 February 2011] [11:01:07] &lt;ianbarber&gt;      though i don&#8217;t get your 83 - that looks like about 5 packets to me. (i am likely missing something though)</div>
<div class="line">[Monday 07 February 2011] [11:02:28] &lt;sustrik&gt;        &lt;ianbarber&gt; 10 * 100 / 1500 * 1000 / 8</div>
<div class="line">[Monday 07 February 2011] [11:02:31] &lt;sustrik&gt;        = 83</div>
<div class="line">[Monday 07 February 2011] [11:03:24] &lt;ianbarber&gt;      yep, of course. i shoudn&#8217;t try and do that in my head :)</div>
<div class="line">[Monday 07 February 2011] [11:03:29] &lt;ianbarber&gt;      yeah, that looks good</div>
<div class="line">[Monday 07 February 2011] [11:03:41] &lt;sustrik&gt;        ok, now the ordering...</div>
<div class="line">[Monday 07 February 2011] [11:04:40] &lt;sustrik&gt;        i think we can mutliply all multiplicants without overflowing the int</div>
<div class="line">[Monday 07 February 2011] [11:05:00] &lt;sustrik&gt;        hm</div>
<div class="line">[Monday 07 February 2011] [11:05:37] &lt;sustrik&gt;        with 1Gb rate we can overflow a 32-bit integer</div>
<div class="line">[Monday 07 February 2011] [11:05:57] &lt;sustrik&gt;        maybe the computation should be done in int64_t</div>
<div class="line">[Monday 07 February 2011] [11:06:04] &lt;sustrik&gt;        and then cast to int</div>
<div class="line">[Monday 07 February 2011] [11:07:51] &lt;sustrik&gt;        what unit is rxw_sqns meant to be in</div>
<div class="line">[Monday 07 February 2011] [11:08:01] &lt;sustrik&gt;        number of PGM packets?</div>
<div class="line">[Monday 07 February 2011] [11:08:06] &lt;ianbarber&gt;      sequence numbers</div>
<div class="line">[Monday 07 February 2011] [11:08:12] &lt;ianbarber&gt;      yeah, packets basically</div>
<div class="line">[Monday 07 February 2011] [11:08:26] &lt;sustrik&gt;        so the computation is completely wrong now</div>
<div class="line">[Monday 07 February 2011] [11:09:06] &lt;ianbarber&gt;      there is also a limit to how big it is</div>
<div class="line">[Monday 07 February 2011] [11:09:07] &lt;sustrik&gt;        it&#8217;s 125x less than it should be :|</div>
<div class="line">[Monday 07 February 2011] [11:09:21] &lt;ianbarber&gt;      spec says no greater than half the sequence number space less one</div>
<div class="line">[Monday 07 February 2011] [11:09:28] &lt;ianbarber&gt;      though I suspect the space is pretty huge :)</div>
<div class="line">[Monday 07 February 2011] [11:09:53] &lt;sustrik&gt;        yeah, something like 2billion</div>
<div class="line">[Monday 07 February 2011] [11:09:56] &lt;sustrik&gt;        irrelevant here</div>
<div class="line">[Monday 07 February 2011] [11:09:58] &lt;ianbarber&gt;      yeah</div>
<div class="line">[Monday 07 February 2011] [11:10:19] &lt;sustrik&gt;        what i don&#8217;t get it how it can work for anybody</div>
<div class="line">[Monday 07 February 2011] [11:10:41] &lt;ianbarber&gt;      well, it works if you have a high enough rate</div>
<div class="line">[Monday 07 February 2011] [11:10:46] &lt;sustrik&gt;        the buffers allocated now are 125x smaller than they should be</div>
<div class="line">[Monday 07 February 2011] [11:11:00] &lt;ianbarber&gt;      you just get a small sqns range, so it&#8217;ll effectively get a lot less throughput than it should i think</div>
<div class="line">[Monday 07 February 2011] [11:11:08] &lt;sustrik&gt;        well, yes, but that means you recovery interval is 125x shorter</div>
<div class="line">[Monday 07 February 2011] [11:11:19] &lt;ianbarber&gt;      yeah, so less reliable</div>
<div class="line">[Monday 07 February 2011] [11:11:26] &lt;sustrik&gt;        strange</div>
<div class="line">[Monday 07 February 2011] [11:11:51] &lt;ianbarber&gt;      but reliability is pretty good on networks - most people are unlikely to hit it unless they&#8217;re dropping packets</div>
<div class="line">[Monday 07 February 2011] [11:11:57] &lt;sustrik&gt;        maybe</div>
<div class="line">[Monday 07 February 2011] [11:12:03] &lt;sustrik&gt;        but if we fix it now</div>
<div class="line">[Monday 07 February 2011] [11:12:13] &lt;sustrik&gt;        prople&#8217;s buffers will grow 126x</div>
<div class="line">[Monday 07 February 2011] [11:12:16] &lt;sustrik&gt;        125x</div>
<div class="line">[Monday 07 February 2011] [11:12:24] &lt;sustrik&gt;        and possibly get out of memory</div>
<div class="line">[Monday 07 February 2011] [11:12:25] &lt;sustrik&gt;        :(</div>
<div class="line">[Monday 07 February 2011] [11:12:27] &lt;ianbarber&gt;      hmm</div>
<div class="line">[Monday 07 February 2011] [11:12:32] &lt;mikko&gt;  at the moment it asserts (?)</div>
<div class="line">[Monday 07 February 2011] [11:12:53] &lt;sustrik&gt;        mikko: it looks like the computation of pgm buffer size is wrong</div>
<div class="line">[Monday 07 February 2011] [11:12:53] &lt;mikko&gt;  just came back</div>
<div class="line">[Monday 07 February 2011] [11:13:04] &lt;mikko&gt;  i think that is something that should go to 2.1.x</div>
<div class="line">[Monday 07 February 2011] [11:13:06] &lt;sustrik&gt;        yielding buffers 125x smaller than they should be</div>
<div class="line">[Monday 07 February 2011] [11:13:17] &lt;ianbarber&gt;      not sure, txw_seqns does interact with txw_secs</div>
<div class="line">[Monday 07 February 2011] [11:13:28] &lt;ianbarber&gt;      so perhaps the effect isn&#8217;t as large as it might be, of increasing the size</div>
<div class="line">[Monday 07 February 2011] [11:13:48] &lt;sustrik&gt;        i think we need to consult steven before changing it</div>
<div class="line">[Monday 07 February 2011] [11:14:02] &lt;sustrik&gt;        he doesn&#8217;t seem to be online now</div>
<div class="line">[Monday 07 February 2011] [11:14:17] &lt;ianbarber&gt;      yeah, he&#8217;s the best person to comment</div>
<div class="line">[Monday 07 February 2011] [11:14:19] &lt;sustrik&gt;        ianbarber: can you drop him a note on the mailing list?</div>
<div class="line">[Monday 07 February 2011] [11:14:31] &lt;ianbarber&gt;      sure thing</div>
<div class="line">[Monday 07 February 2011] [11:14:43] &lt;sustrik&gt;        thanks</div>
<div class="line">[Monday 07 February 2011] [11:28:36] &lt;Guthur&gt; I was afraid it was only the source code as documentation</div>
<div class="line">[Monday 07 February 2011] [11:31:44] &lt;sustrik&gt;        Guthur: what exactly do you need?</div>
<div class="line">[Monday 07 February 2011] [11:39:22] &lt;Guthur&gt; sustrik: understanding, hehe</div>
<div class="line">[Monday 07 February 2011] [11:39:48] &lt;mikko&gt;  neale1: on the build page should i list &#8220;Contributed by: IBM&#8221; or something else</div>
<div class="line">[Monday 07 February 2011] [11:40:10] &lt;Guthur&gt; I was hoping to provide patches, but there is a lot to understand</div>
<div class="line">[Monday 07 February 2011] [11:40:21] &lt;sustrik&gt;        i&#8217;ve started writing somrthing:</div>
<div class="line">[Monday 07 February 2011] [11:40:22] &lt;sustrik&gt;        <a class="reference external" href="http://www.zeromq.org/whitepapers:architecture">http://www.zeromq.org/whitepapers:architecture</a></div>
<div class="line">[Monday 07 February 2011] [11:40:23] &lt;Guthur&gt; Specifically the duplicate identity issue</div>
<div class="line">[Monday 07 February 2011] [11:40:28] &lt;sustrik&gt;        but never got too far</div>
<div class="line">[Monday 07 February 2011] [11:40:51] &lt;sustrik&gt;        in any case, feel free to ask on irc</div>
<div class="line">[Monday 07 February 2011] [11:41:08] &lt;Guthur&gt; in general I think it would make the learning curve for new contributors a little less steep</div>
<div class="line">[Monday 07 February 2011] [11:41:40] &lt;sustrik&gt;        definitely</div>
<div class="line">[Monday 07 February 2011] [11:41:59] &lt;ianbarber&gt;      that duplicate identity issue seems tricky</div>
<div class="line">[Monday 07 February 2011] [11:42:08] &lt;sustrik&gt;        the only problem is someone has to write it down and maintain it as the development goes on</div>
<div class="line">[Monday 07 February 2011] [11:44:22] &lt;Guthur&gt; ianbarber: My main issue with it is the fact it crashes the server side</div>
<div class="line">[Monday 07 February 2011] [11:44:35] &lt;Guthur&gt; clients crashing a server is not good</div>
<div class="line">[Monday 07 February 2011] [11:44:49] &lt;ianbarber&gt;      yep, i agree</div>
<div class="line">[Monday 07 February 2011] [11:44:54] &lt;ianbarber&gt;      i had the same reaction</div>
<div class="line">[Monday 07 February 2011] [11:52:11] &lt;ianbarber&gt;      hmm</div>
<div class="line">[Monday 07 February 2011] [11:52:13] &lt;ianbarber&gt;      sessions_sync.lock ();</div>
<div class="line">[Monday 07 February 2011] [11:52:13] &lt;ianbarber&gt;          bool registered = sessions.insert (</div>
<div class="line">[Monday 07 February 2011] [11:52:13] &lt;ianbarber&gt;              sessions_t::value_type (<a href="#id77"><span class="problematic" id="id78">name_</span></a>, <a href="#id79"><span class="problematic" id="id80">session_</span></a>)).second;</div>
<div class="line">[Monday 07 February 2011] [11:52:13] &lt;ianbarber&gt;          sessions_sync.unlock ();</div>
<div class="line">[Monday 07 February 2011] [11:52:14] &lt;ianbarber&gt;          return registered;</div>
<div class="line">[Monday 07 February 2011] [11:52:42] &lt;ianbarber&gt;      just google, the first ref I found for stl map said insert would return the inserted thing, or an operator</div>
<div class="line">[Monday 07 February 2011] [11:52:44] &lt;ianbarber&gt;      not a bool</div>
<div class="line">[Monday 07 February 2011] [11:53:04] &lt;ianbarber&gt;      so the insert wouldn&#8217;t report a failure, even if it had encountered a collision?</div>
<div class="line">[Monday 07 February 2011] [11:53:16] &lt;ianbarber&gt;      sure sustrik will correct me in short order :)</div>
<div class="line">[Monday 07 February 2011] [12:01:47] &lt;mikko&gt;  <a class="reference external" href="http://www.zeromq.org/docs:builds">http://www.zeromq.org/docs:builds</a></div>
<div class="line">[Monday 07 February 2011] [12:01:55] &lt;mikko&gt;  needs information about contributors as well</div>
<div class="line">[Monday 07 February 2011] [12:03:54] &lt;ianbarber&gt;      surely put yourself on there under contributors</div>
<div class="line">[Monday 07 February 2011] [12:04:06] &lt;ianbarber&gt;      others can add themselves I guess would be easiest, it is a wiki</div>
<div class="line">[Monday 07 February 2011] [12:25:30] &lt;mikko&gt;  crlzmq2 fails to build atm</div>
<div class="line">[Monday 07 February 2011] [12:30:39] &lt;Guthur&gt; mikko: yeah sorry about that</div>
<div class="line">[Monday 07 February 2011] [12:30:55] &lt;Guthur&gt; I know the issue, but can not fix at the moment, at work</div>
<div class="line">[Monday 07 February 2011] [12:31:00] &lt;mikko&gt;  thats fine</div>
<div class="line">[Monday 07 February 2011] [12:31:05] &lt;mikko&gt;  just making sure that it&#8217;s known</div>
<div class="line">[Monday 07 February 2011] [12:31:19] &lt;neale1&gt;         mikko: There&#8217;s a mono environment on the same s390x build server if you want to exploit that. What level of mono do you require? It&#8217;s 2.7.1 atm, but can be brought up to current git head if required</div>
<div class="line">[Monday 07 February 2011] [12:31:46] &lt;Guthur&gt; the solution file is the source of the problem</div>
<div class="line">[Monday 07 February 2011] [12:32:03] &lt;mikko&gt;  i got mono 2.6.7</div>
<div class="line">[Monday 07 February 2011] [12:32:11] &lt;mikko&gt;  is there a difference with mono across architectures?</div>
<div class="line">[Monday 07 February 2011] [12:32:16] &lt;Guthur&gt; I should be able to push a fix in a couple of hours</div>
<div class="line">[Monday 07 February 2011] [12:33:11] &lt;neale1&gt; mikko: Shouldn&#8217;t be. I build from same base, just have s390x jit to do bytecode to s390x machine code xlate</div>
<div class="line">[Monday 07 February 2011] [12:33:33] &lt;mikko&gt;  neale1: should i mention that &#8220;Linux s390x build slave was contributed by IBM&#8221; ?</div>
<div class="line">[Monday 07 February 2011] [12:33:49] &lt;neale1&gt; No, by Marist College would be better</div>
<div class="line">[Monday 07 February 2011] [12:33:57] &lt;mikko&gt;  neale1: i could add a mono build for clrzmq and clrzmq2</div>
<div class="line">[Monday 07 February 2011] [12:34:01] &lt;mikko&gt;  neale1: sure, will add that</div>
<div class="line">[Monday 07 February 2011] [12:34:04] &lt;neale1&gt; Yes</div>
<div class="line">[Monday 07 February 2011] [12:34:15] &lt;mikko&gt;  do you want url to anywhere?</div>
<div class="line">[Monday 07 February 2011] [12:35:24] &lt;neale1&gt; I&#8217;ll ask the Marist folks</div>
<div class="line">[Monday 07 February 2011] [12:35:40] &lt;mikko&gt;  neale1: <a class="reference external" href="http://www.zeromq.org/docs:builds">http://www.zeromq.org/docs:builds</a></div>
<div class="line">[Monday 07 February 2011] [12:35:47] &lt;mikko&gt;  you can edit the page to add the link</div>
<div class="line">[Monday 07 February 2011] [12:37:30] &lt;neale1&gt; mikko: Tks</div>
<div class="line">[Monday 07 February 2011] [12:38:05] &lt;ianbarber&gt;      ah, there&#8217;s a .second on that sessions code, so it&#8217;s all good. Stepping through it looks like register session is only being called once, for some odd reason</div>
<div class="line">[Monday 07 February 2011] [12:41:20] &lt;neale1&gt; mikko: Do I have a wikidot id to update that page?</div>
<div class="line">[Monday 07 February 2011] [12:42:48] &lt;mikko&gt;  neale1: i think you can create one</div>
<div class="line">[Monday 07 February 2011] [12:42:55] &lt;mikko&gt;  neale1: im not sure if you have one already :)</div>
<div class="line">[Monday 07 February 2011] [12:44:01] &lt;neale1&gt;  mikko: Cld u just add this <a class="reference external" href="http://www.marist.edu/it/datacenter/systems.html">http://www.marist.edu/it/datacenter/systems.html</a></div>
<div class="line">[Monday 07 February 2011] [12:44:21] &lt;mikko&gt;  neale1: will do</div>
<div class="line">[Monday 07 February 2011] [12:45:19] &lt;mikko&gt;  neale1: done</div>
<div class="line">[Monday 07 February 2011] [12:54:27] &lt;sustrik&gt;        ianbarber: insert returns pair, the code selects the second part of the pair, which is bool</div>
<div class="line">[Monday 07 February 2011] [12:55:10] &lt;ianbarber&gt;      sustrik: spotted that, seems correct</div>
<div class="line">[Monday 07 February 2011] [12:55:22] &lt;ianbarber&gt;      weird thing I had when debugging the dual identities thing is that it only seems to be hit once</div>
<div class="line">[Monday 07 February 2011] [12:55:35] &lt;ianbarber&gt;      so I suspect the problem is further up the chain, in attach or something like that</div>
<div class="line">[Monday 07 February 2011] [12:55:57] &lt;sustrik&gt;        ianbarber: yes, possibly</div>
<div class="line">[Monday 07 February 2011] [12:57:09] &lt;sustrik&gt;        where exactly does it crash now?</div>
<div class="line">[Monday 07 February 2011] [12:57:59] &lt;ianbarber&gt;      Assertion failed: new_sndbuf &gt; old_sndbuf (mailbox.cpp:182)</div>
<div class="line">[Monday 07 February 2011] [12:58:17] &lt;ianbarber&gt;      i think that&#8217;s just because if it gets a send fail it just tries to increase buffer size (until it can&#8217;t)</div>
<div class="line">[Monday 07 February 2011] [12:58:50] &lt;sustrik&gt;        ianbarber: that has nothing to do with duplicate identities imo</div>
<div class="line">[Monday 07 February 2011] [12:59:27] &lt;sustrik&gt;        well, unless duplicate identities cause an infinite or extremely fast generation of commands</div>
<div class="line">[Monday 07 February 2011] [12:59:40] &lt;sustrik&gt;        hm, the latter may be the case...</div>
<div class="line">[Monday 07 February 2011] [13:01:46] &lt;ianbarber&gt;      sustrik: i don&#8217;t get the crash on connect, only when I attempt to send something to connected peers</div>
<div class="line">[Monday 07 February 2011] [13:01:58] &lt;ianbarber&gt;      so it may be something of that nature</div>
<div class="line">[Monday 07 February 2011] [13:02:16] &lt;rook-&gt;  hello? I have a noob question if someone has a few minutes</div>
<div class="line">[Monday 07 February 2011] [13:02:41] &lt;sustrik&gt;        inabarder: interesting</div>
<div class="line">[Monday 07 February 2011] [13:02:48] &lt;sustrik&gt;        rook-: shoot</div>
<div class="line">[Monday 07 February 2011] [13:03:19] &lt;sustrik&gt;        ianbarber: it looks like large amount of commands is generated for some reason</div>
<div class="line">[Monday 07 February 2011] [13:03:22] &lt;rook-&gt;  I&#8217;m looking for a messaging system to support a distributed &#8220;eventually consistent&#8221; cloud architecture...</div>
<div class="line">[Monday 07 February 2011] [13:03:30] &lt;sustrik&gt;        you need to find out why it is so</div>
<div class="line">[Monday 07 February 2011] [13:03:51] &lt;sustrik&gt;        check the send_command() function to hook into command passing mechanism</div>
<div class="line">[Monday 07 February 2011] [13:03:53] &lt;rook-&gt;  all the mq&#8217;s I&#8217;ve found seem to support 2 models: durable queues and pub/sub (fanout)</div>
<div class="line">[Monday 07 February 2011] [13:04:39] &lt;rook-&gt;  but nothing seems to support publishing blindly to n-subscribers and guaranteeing that each subscriber receives 1 and only 1 copy of the message</div>
<div class="line">[Monday 07 February 2011] [13:04:51] &lt;sustrik&gt;        it&#8217;s impossible</div>
<div class="line">[Monday 07 February 2011] [13:05:01] &lt;sustrik&gt;        slow consumers are the problem</div>
<div class="line">[Monday 07 February 2011] [13:05:08] &lt;rook-&gt;  by blindly, I mean that the publisher just writes 1 message and all subs who&#8217;ve scribed (whether they&#8217;re connected or not) eventually get it</div>
<div class="line">[Monday 07 February 2011] [13:05:49] &lt;rook-&gt;  it looks to me like a pub-sub with a replay service or something similar would solve the problem, but haven&#8217;t seen anything like it</div>
<div class="line">[Monday 07 February 2011] [13:06:08] &lt;sustrik&gt;        you would need infinite memory to hold the messages for slow/stuck consumers</div>
<div class="line">[Monday 07 February 2011] [13:06:27] &lt;rook-&gt;  infinite/disk</div>
<div class="line">[Monday 07 February 2011] [13:06:27] &lt;rook-&gt;  yea</div>
<div class="line">[Monday 07 February 2011] [13:07:20] &lt;sustrik&gt;        yes, so it can&#8217;t be done</div>
<div class="line">[Monday 07 February 2011] [13:07:37] &lt;rook-&gt;  um.. I have a hard time believing that...</div>
<div class="line">[Monday 07 February 2011] [13:08:13] &lt;rook-&gt;  since so many services are using eventually consistent frameworks of their own devising</div>
<div class="line">[Monday 07 February 2011] [13:08:32] &lt;sustrik&gt;        shrug</div>
<div class="line">[Monday 07 February 2011] [13:09:21] &lt;rook-&gt;  I mean, there may be the need for a high water mark/&#8221;beyond this point the stuck consumer needs help with rebuilding&#8221;</div>
<div class="line">[Monday 07 February 2011] [13:09:33] &lt;rook-&gt;  but &#8220;can&#8217;t be done&#8221; seems improbable</div>
<div class="line">[Monday 07 February 2011] [13:10:12] &lt;sustrik&gt;        there&#8217;s an alternative, yes</div>
<div class="line">[Monday 07 February 2011] [13:10:20] &lt;sustrik&gt;        you can block the sender</div>
<div class="line">[Monday 07 February 2011] [13:10:39] &lt;sustrik&gt;        but that means that the slow/stuck consumer can stop all the data distribution</div>
<div class="line">[Monday 07 February 2011] [13:10:50] &lt;sustrik&gt;        even to the properly working consumers</div>
<div class="line">[Monday 07 February 2011] [13:11:10] &lt;rook-&gt;  yea that&#8217;d suck :D</div>
<div class="line">[Monday 07 February 2011] [13:11:20] &lt;sustrik&gt;        so it&#8217;s either-or</div>
<div class="line">[Monday 07 February 2011] [13:11:33] &lt;sustrik&gt;        either drop messages when there no space to store them</div>
<div class="line">[Monday 07 February 2011] [13:11:43] &lt;sustrik&gt;        or block the whole distribution</div>
<div class="line">[Monday 07 February 2011] [13:12:38] &lt;rook-&gt;  hrm...</div>
<div class="line">[Monday 07 February 2011] [13:13:26] &lt;rook-&gt;  I think in our env. a rolling window would potentially be ok... i.e. if the consumer isn&#8217;t around for a given period of time, then remediation is required for it to rejoin and resync</div>
<div class="line">[Monday 07 February 2011] [13:13:43] &lt;sustrik&gt;        ack</div>
<div class="line">[Monday 07 February 2011] [13:13:51] &lt;rook-&gt;  true</div>
<div class="line">[Monday 07 February 2011] [13:13:51] &lt;sustrik&gt;        that&#8217;s the standard model for pub-sub</div>
<div class="line">[Monday 07 February 2011] [13:14:03] &lt;rook-&gt;  sorry?</div>
<div class="line">[Monday 07 February 2011] [13:14:32] &lt;rook-&gt;  I thought that pub/sub was limited by immediately connectivity and deliverability</div>
<div class="line">[Monday 07 February 2011] [13:14:53] &lt;rook-&gt;  i.e. if consumer isn&#8217;t there to receive message, or isn&#8217;t accepting the message, it may miss out</div>
<div class="line">[Monday 07 February 2011] [13:16:29] &lt;rook-&gt;  is my impression of pub/sub overly simplified?</div>
<div class="line">[Monday 07 February 2011] [13:16:51] &lt;rook-&gt;   / have I missed something?</div>
<div class="line">[Monday 07 February 2011] [13:18:25] &lt;ianbarber&gt;      rook: that&#8217;s how pubsub works in 0MQ, without identities. If you have identities set then it&#8217;ll try and buffer up messages for them.</div>
<div class="line">[Monday 07 February 2011] [13:19:13] &lt;sustrik&gt;        rook-: yes, you are right</div>
<div class="line">[Monday 07 February 2011] [13:19:19] &lt;sustrik&gt;        that&#8217;s the general model</div>
<div class="line">[Monday 07 February 2011] [13:19:32] &lt;sustrik&gt;        however, different solution add some amount of reliability</div>
<div class="line">[Monday 07 February 2011] [13:20:02] &lt;sustrik&gt;        for example, PGM retransmits the missing packets if they are still in the reliability window</div>
<div class="line">[Monday 07 February 2011] [13:20:04] &lt;sustrik&gt;        etc.</div>
<div class="line">[Monday 07 February 2011] [13:21:22] &lt;Guthur&gt; is the HWM per durable subscriber or does it effect all globally?</div>
<div class="line">[Monday 07 February 2011] [13:21:53] &lt;sustrik&gt;        it&#8217;s per peer</div>
<div class="line">[Monday 07 February 2011] [13:22:33] &lt;Guthur&gt; is there no way to clear it, besides the peer connecting?</div>
<div class="line">[Monday 07 February 2011] [13:23:31] &lt;rook-&gt;  so I can, in 0mq, have a publisher, who just publishes events, and I can have n-consumers that each, with some reliability, receive every message and the publisher doesn&#8217;t need to know or be configured with what the consumers are, how many of them there are, etc.</div>
<div class="line">[Monday 07 February 2011] [13:23:35] &lt;rook-&gt;  ?</div>
<div class="line">[Monday 07 February 2011] [13:27:52] &lt;rook-&gt;  ?</div>
<div class="line">[Monday 07 February 2011] [13:28:00] &lt;rook-&gt;  sustrik?</div>
<div class="line">[Monday 07 February 2011] [13:31:33] &lt;sustrik&gt;        Guthur: no</div>
<div class="line">[Monday 07 February 2011] [13:31:52] &lt;sustrik&gt;        rook-: yes</div>
<div class="line">[Monday 07 February 2011] [13:32:09] &lt;rook-&gt;  cool!</div>
<div class="line">[Monday 07 February 2011] [13:32:48] &lt;rook-&gt;  is the size of the window configurable?  I clearly have more reading to do, url reference handy?  Pointers?</div>
<div class="line">[Monday 07 February 2011] [13:32:53] &lt;rook-&gt;  (thanks for your help btw)</div>
<div class="line">[Monday 07 February 2011] [13:33:22] &lt;Guthur&gt; rook-: <a class="reference external" href="http://zguide.zeromq.org/chapter:all">http://zguide.zeromq.org/chapter:all</a></div>
<div class="line">[Monday 07 February 2011] [13:33:29] &lt;Guthur&gt; you may have seen it already</div>
<div class="line">[Monday 07 February 2011] [13:33:32] &lt;sustrik&gt;        or check the man pages</div>
<div class="line">[Monday 07 February 2011] [13:34:14] &lt;rook-&gt;  yea saw the docs - to be honest, I find them... difficult.. very friendly and jovial but not as... concise as typical docs ;)</div>
<div class="line">[Monday 07 February 2011] [13:34:29] &lt;sustrik&gt;        there&#8217;s reference</div>
<div class="line">[Monday 07 February 2011] [13:34:36] &lt;sustrik&gt;        that&#8217;s consice</div>
<div class="line">[Monday 07 February 2011] [13:35:04] &lt;rook-&gt;  ok I&#8217;ll poke about</div>
<div class="line">[Monday 07 February 2011] [13:35:10] &lt;rook-&gt;  now that I know that 0mq handles it</div>
<div class="line">[Monday 07 February 2011] [13:35:23] &lt;rook-&gt;  I feel more justified in digging harder for the info :)</div>
<div class="line">[Monday 07 February 2011] [13:35:57] &lt;rook-&gt;  thanks for the help - off to read</div>
<div class="line">[Monday 07 February 2011] [13:35:59] &lt;rook-&gt;  :)</div>
<div class="line">[Monday 07 February 2011] [14:45:08] &lt;mikko&gt;  good evening</div>
<div class="line">[Monday 07 February 2011] [14:58:36] &lt;neale1&gt; mikko: I am getting an article on 0MQ printed in the April/May edition of z/Journal (a journal for IBM mainframers). It&#8217;s an introduction to 0MQ for a group more familiar with things like MQSeries</div>
<div class="line">[Monday 07 February 2011] [14:59:08] &lt;mikko&gt;  nice</div>
<div class="line">[Monday 07 February 2011] [14:59:16] &lt;mikko&gt;  i read about ibm system z</div>
<div class="line">[Monday 07 February 2011] [14:59:24] &lt;mikko&gt;  seems like pretty serious computing system</div>
<div class="line">[Monday 07 February 2011] [15:00:48] &lt;neale1&gt; Yep, there&#8217;s a major conference in Anaheim later this month which I&#8217;m going to. I wasn&#8217;t able to schedule a 0MQ talk this time but I&#8217;ll be trying to get one on the agenda for August in Orlando. As I&#8217;m on the program committee, it should get on</div>
<div class="line">[Monday 07 February 2011] [15:02:17] &lt;mikko&gt;  what is the conference in Orlando?</div>
<div class="line">[Monday 07 February 2011] [15:02:36] &lt;neale1&gt; Same as the one in Anaheim - they hold 2 yearly. It&#8217;s called &#8220;SHARE&#8221;</div>
<div class="line">[Monday 07 February 2011] [15:02:55] &lt;mikko&gt;  is it mainframy conference?</div>
<div class="line">[Monday 07 February 2011] [15:03:09] &lt;neale1&gt; Yep</div>
<div class="line">[Monday 07 February 2011] [15:03:37] &lt;neale1&gt; <a class="reference external" href="http://share.confex.com/share/116/webprogram/start.html">http://share.confex.com/share/116/webprogram/start.html</a></div>
<div class="line">[Monday 07 February 2011] [15:05:20] &lt;mikko&gt;  seems like a big conference</div>
<div class="line">[Monday 07 February 2011] [15:06:20] &lt;mikko&gt;  i&#8217;ve worked with some of the technologies mentioned in the talks</div>
<div class="line">[Monday 07 February 2011] [15:06:32] &lt;mikko&gt;  mainly on integrating them with web</div>
<div class="line">[Monday 07 February 2011] [15:07:53] &lt;sustrik&gt;        the introduction to 0mq for mq series users is something that&#8217;s badly missing</div>
<div class="line">[Monday 07 February 2011] [15:08:11] &lt;sustrik&gt;        neale1: would your article be publicly available?</div>
<div class="line">[Monday 07 February 2011] [15:08:38] &lt;neale1&gt; sustrik: Yes, z/Journal has it online as well as in a physical magazine.</div>
<div class="line">[Monday 07 February 2011] [15:08:56] &lt;sustrik&gt;        great!</div>
<div class="line">[Monday 07 February 2011] [15:09:04] &lt;neale1&gt; sustrik: I&#8217;m not doing a if you&#8217;re using WebSphere MQ and you do x, then on 0MQ you do y</div>
<div class="line">[Monday 07 February 2011] [15:09:15] &lt;sustrik&gt;        understood</div>
<div class="line">[Monday 07 February 2011] [15:09:22] &lt;neale1&gt; It&#8217;s a straight introduction trying to put it in context of where it would be useful.</div>
<div class="line">[Monday 07 February 2011] [15:09:40] &lt;sustrik&gt;        i mean, the problem is that if you have &#8220;corporate messaging&#8221; experience</div>
<div class="line">[Monday 07 February 2011] [15:09:49] &lt;neale1&gt; A lot of folks want to avoid the complexity and cost of MQ</div>
<div class="line">[Monday 07 February 2011] [15:09:53] &lt;sustrik&gt;        you have quite lot of expectations...</div>
<div class="line">[Monday 07 February 2011] [15:09:56] &lt;neale1&gt; yes</div>
<div class="line">[Monday 07 February 2011] [15:10:00] &lt;sustrik&gt;        that don&#8217;t apply to 0mq</div>
<div class="line">[Monday 07 February 2011] [15:10:41] &lt;sustrik&gt;        so i think the point of the article is to explain the difference between mq series and 0mq</div>
<div class="line">[Monday 07 February 2011] [15:10:55] &lt;sustrik&gt;        like &#8220;what you should expect from 0mq&#8221;</div>
<div class="line">[Monday 07 February 2011] [15:10:58] &lt;sustrik&gt;        right?</div>
<div class="line">[Monday 07 February 2011] [15:12:40] &lt;sustrik&gt;        in any case, that kind of introduction is missing so far</div>
<div class="line">[Monday 07 February 2011] [15:14:19] &lt;neale1&gt; At the moment it&#8217;s even more basic than that. I want to aim at the sockets programmers who are dreading having to go to a full brokered option.</div>
<div class="line">[Monday 07 February 2011] [15:14:33] &lt;sustrik&gt;        ah, that&#8217;s easier, yes</div>
<div class="line">[Monday 07 February 2011] [15:15:14] &lt;neale1&gt; The linux on system z community is about 10 years old now, but most of its growth has been in the past 5. We&#8217;re seeing a mix of traditional sysadmin/programmer types from the UNIX world combining with the old hands from the traditional mainframe set.</div>
<div class="line">[Monday 07 February 2011] [15:16:00] &lt;neale1&gt; I want to conclude the article with a set of questions people can ask when they want to select a technology. It might be useful to open the floor here to suggestions.</div>
<div class="line">[Monday 07 February 2011] [15:16:51] &lt;sustrik&gt;        definitely</div>
<div class="line">[Monday 07 February 2011] [15:17:15] &lt;sustrik&gt;        it&#8217;s rather hard question to ask though</div>
<div class="line">[Monday 07 February 2011] [15:17:35] &lt;sustrik&gt;        as it&#8217;s not only a technical question</div>
<div class="line">[Monday 07 February 2011] [15:18:07] &lt;sustrik&gt;        and depends on whether there are people skilled in the technology, whether company have licenses bought already etc.</div>
<div class="line">[Monday 07 February 2011] [15:18:36] &lt;neale1&gt; In my own case I discovered 0MQ when I was tasked with a project that needed to have several &#8220;collector&#8221; clients receive raw data, package it, and send it to a sink which would process the collected data. In addition I wanted to add collectors at will, ensure delivery, receive configuration information from the server. And do this in a minimal footprint with little affect on overall CPU on the systems where those collectors are ru</div>
<div class="line">[Monday 07 February 2011] [15:18:54] &lt;neale1&gt; Oh, and not require the customer install a full-fledged broker type system</div>
<div class="line">[Monday 07 February 2011] [15:19:14] &lt;sustrik&gt;        right, then using 0mq makes perfect sense</div>
<div class="line">[Monday 07 February 2011] [15:19:34] &lt;sustrik&gt;        when you spoke about mainframes i though of integrating legacy apps</div>
<div class="line">[Monday 07 February 2011] [15:19:42] &lt;sustrik&gt;        rather than writing new apps</div>
<div class="line">[Monday 07 February 2011] [15:20:37] &lt;sustrik&gt;        but linux subsystem is probably not that legacy-oriented</div>
<div class="line">[Monday 07 February 2011] [15:23:01] &lt;neale1&gt; Actually, IBM has spent a lot of time/money putting hooks into its &#8220;legacy&#8221; systems to allow them to integrate with Linux. One thing we&#8217;d need to do on the legacy side though is to port the code (or provide a minimal set of things like the tcp: transport)</div>
<div class="line">[Monday 07 February 2011] [15:23:49] &lt;sustrik&gt;        right</div>
<div class="line">[Monday 07 February 2011] [15:24:06] &lt;sustrik&gt;        anyway, if you are going to have a lecture about 0mq</div>
<div class="line">[Monday 07 February 2011] [15:24:11] &lt;neale1&gt; Within a mainframe you can talk between the legacy systems like z/OS and a z/Linux system at memory-to-memory speeds even though it appears to be a layer2/layer3 network</div>
<div class="line">[Monday 07 February 2011] [15:24:27] &lt;sustrik&gt;        announce it on www.zeromq.org/community (see top right)</div>
<div class="line">[Monday 07 February 2011] [15:24:32] &lt;neale1&gt; Will do</div>
<div class="line">[Monday 07 February 2011] [15:24:58] &lt;sustrik&gt;        neale1: are you familiar with z/OS as well?</div>
<div class="line">[Monday 07 February 2011] [15:26:22] &lt;neale1&gt; sustrik: Yes as well as z/VSE and z/VM. The latter two I&#8217;ve been using for <em>many</em> years now. I have only a few years experience with z/OS.</div>
<div class="line">[Monday 07 February 2011] [15:26:57] &lt;neale1&gt; 0MQ could easily be ported to what z/OS calls Unix System Services (USS). It has a full UNIX-branded set of APIs.</div>
<div class="line">[Monday 07 February 2011] [15:27:08] &lt;sustrik&gt;        wow</div>
<div class="line">[Monday 07 February 2011] [15:27:21] &lt;sustrik&gt;        thay have a posix-y interface, right?</div>
<div class="line">[Monday 07 February 2011] [15:27:30] &lt;neale1&gt; Yes, fully posix-compliant</div>
<div class="line">[Monday 07 February 2011] [15:27:39] &lt;sustrik&gt;        that&#8217;s need</div>
<div class="line">[Monday 07 February 2011] [15:27:43] &lt;sustrik&gt;        neat</div>
<div class="line">[Monday 07 February 2011] [15:28:04] &lt;sustrik&gt;        would be nice to have the port one day</div>
<div class="line">[Monday 07 February 2011] [15:28:19] &lt;sustrik&gt;        but i assume the build system would be the main problem</div>
<div class="line">[Monday 07 February 2011] [15:28:45] &lt;neale1&gt; THey have most of the common tools too: autoconf/automake/libtool - at what level I&#8217;m not sure</div>
<div class="line">[Monday 07 February 2011] [15:28:57] &lt;sustrik&gt;        even better</div>
<div class="line">[Monday 07 February 2011] [15:29:04] &lt;sustrik&gt;        there&#8217;s a 0mq port to VMS</div>
<div class="line">[Monday 07 February 2011] [15:29:12] &lt;sustrik&gt;        there&#8217;s a POSIX interface available</div>
<div class="line">[Monday 07 February 2011] [15:29:15] &lt;neale1&gt; Yes, I saw that.</div>
<div class="line">[Monday 07 February 2011] [15:29:25] &lt;sustrik&gt;        but the problem is that there&#8217;s no unix shell</div>
<div class="line">[Monday 07 February 2011] [15:29:35] &lt;sustrik&gt;        so the autotools doesn&#8217;t work</div>
<div class="line">[Monday 07 February 2011] [15:29:41] &lt;neale1&gt; Ugh</div>
<div class="line">[Monday 07 February 2011] [15:30:01] &lt;neale1&gt; On USS they have a korn shell but you can also run bash</div>
<div class="line">[Monday 07 February 2011] [15:30:12] &lt;sustrik&gt;        sounds good</div>
<div class="line">[Monday 07 February 2011] [15:30:15] &lt;Guthur&gt; is there a zeromq irc log?</div>
<div class="line">[Monday 07 February 2011] [15:30:31] &lt;sustrik&gt;        travlr used to log the conversation</div>
<div class="line">[Monday 07 February 2011] [15:30:34] &lt;neale1&gt; Same goes with z/VM</div>
<div class="line">[Monday 07 February 2011] [15:30:57] &lt;sustrik&gt;        i see</div>
<div class="line">[Monday 07 February 2011] [15:31:05] &lt;Guthur&gt; ah ha, and he still does</div>
<div class="line">[Monday 07 February 2011] [15:31:05] &lt;Guthur&gt; cheers sustrik</div>
<div class="line">[Monday 07 February 2011] [15:31:33] &lt;sustrik&gt;        neale1: maybe give it a shot if you have some spare time</div>
<div class="line">[Monday 07 February 2011] [15:31:39] &lt;Guthur&gt; oh it&#8217;s a bit behind though</div>
<div class="line">[Monday 07 February 2011] [15:32:32] &lt;neale1&gt; I&#8217;m going to be installing an upgrade of our z/OS system in the near future, so I&#8217;ll make sure the USS environment and tools are there.</div>
<div class="line">[Monday 07 February 2011] [15:32:35] &lt;sustrik&gt;        the logger used to hang around called &#8216;zmqircd&#8217;</div>
<div class="line">[Monday 07 February 2011] [15:32:46] &lt;sustrik&gt;        but it doesn&#8217;t seem to be there for some time already</div>
<div class="line">[Monday 07 February 2011] [15:33:06] &lt;sustrik&gt;        neale1: nice</div>
<div class="line">[Monday 07 February 2011] [15:33:41] &lt;mikko&gt;  i got logs</div>
<div class="line">[Monday 07 February 2011] [15:33:50] &lt;mikko&gt;  since last Feb i think</div>
<div class="line">[Monday 07 February 2011] [15:34:37] &lt;Guthur&gt; it only goes up until Feb 4 2011 or something</div>
<div class="line">[Monday 07 February 2011] [15:34:54] &lt;Guthur&gt; I suppose it just needs the newest ones placed on it</div>
<div class="line">[Monday 07 February 2011] [15:36:25] &lt;mikko&gt;  it should be up to date</div>
<div class="line">[Monday 07 February 2011] [15:37:04] &lt;Guthur&gt; here <a class="reference external" href="http://travlr.github.com/zmqirclog/">http://travlr.github.com/zmqirclog/</a></div>
<div class="line">[Monday 07 February 2011] [15:37:07] &lt;Guthur&gt; correct?</div>
<div class="line">[Monday 07 February 2011] [15:37:13] &lt;mikko&gt;  <a class="reference external" href="http://valokuva.org/~mikko/zeromq.log">http://valokuva.org/~mikko/zeromq.log</a></div>
<div class="line">[Monday 07 February 2011] [15:37:15] &lt;mikko&gt;  mine&#8217;s here</div>
<div class="line">[Monday 07 February 2011] [15:37:46] &lt;mikko&gt;  it just links to my normal irc log from this channel</div>
<div class="line">[Monday 07 February 2011] [16:23:33] &lt;Guthur&gt; ok, hopefully that&#8217;s the clrzmq2 build fixed</div>
<div class="line">[Monday 07 February 2011] [17:28:54] &lt;Guthur&gt; just whipped together this asyncReturn device <a class="reference external" href="http://paste.lisp.org/display/119452">http://paste.lisp.org/display/119452</a></div>
<div class="line">[Monday 07 February 2011] [17:29:30] &lt;Guthur&gt; the return call could be made with a push socket supplying the appropriate address</div>
<div class="line">[Monday 07 February 2011] [17:30:31] &lt;Guthur&gt; As an aside I have just moved the RunningLoop into the base class</div>
<div class="line">[Monday 07 February 2011] [17:31:15] &lt;Guthur&gt; Just a simple thing, but thought I would share anyway</div>
<div class="line">[Monday 07 February 2011] [20:50:35] &lt;Steve-o&gt;        mikko: the x1024 patch on PGM &#8216;works&#8217; but isn&#8217;t correct, I&#8217;ll have to look at Ian&#8217;s suggestion tomorrow</div>
<div class="line">[Monday 07 February 2011] [20:51:49] &lt;Steve-o&gt;        all day at IKEA today, patience is a virtue as is said.</div>
<div class="line">[Monday 07 February 2011] [20:57:56] &lt;d4de&gt;   Hi, any idea on when aprox. v2.1.0 will go stable?</div>
<div class="line">[Monday 07 February 2011] [21:00:03] &lt;Steve-o&gt;        good question, probably dependent on the issue list on github getting cleaned up a bit</div>
<div class="line">[Monday 07 February 2011] [21:01:22] &lt;d4de&gt;   link?</div>
<div class="line">[Monday 07 February 2011] [21:02:05] &lt;d4de&gt;   meh nvm ... I think google can answer that one :-)</div>
<div class="line">[Monday 07 February 2011] [21:02:08] &lt;Steve-o&gt;        <a class="reference external" href="https://github.com/zeromq/zeromq2/issues">https://github.com/zeromq/zeromq2/issues</a></div>
<div class="line">[Monday 07 February 2011] [21:02:18] &lt;d4de&gt;   ooh well ... thanks :-D</div>
<div class="line">[Monday 07 February 2011] [21:03:01] &lt;Steve-o&gt;        there are a couple of weird platform dependent / compiler optimisation issues with the PGM socket</div>
<div class="line">[Monday 07 February 2011] [21:03:26] &lt;Steve-o&gt;        and there has been issues with zmq_term</div>
<div class="line">[Monday 07 February 2011] [21:03:36] &lt;d4de&gt;   so it is just PGM that is putting it back ... I saw that you guys has already fixed some annoying bugs in 2.1 beta, so I keep wondering what is left</div>
<div class="line">[Monday 07 February 2011] [21:03:41] &lt;Steve-o&gt;        you can always ask Martin again on the list</div>
<div class="line">[Monday 07 February 2011] [21:04:29] &lt;d4de&gt;   hmm still no IPv6 support huh?</div>
<div class="line">[Monday 07 February 2011] [21:04:58] &lt;Steve-o&gt;        well yes and no</div>
<div class="line">[Monday 07 February 2011] [21:05:44] &lt;Steve-o&gt;        there probably needs to be extra flags or specification for using IPv4 or IPv6, or both</div>
<div class="line">[Monday 07 February 2011] [21:05:58] &lt;Steve-o&gt;        similar to BSD&#8217;s IPV6ONLY</div>
<div class="line">[Monday 07 February 2011] [21:06:12] &lt;d4de&gt;   aha</div>
<div class="line">[Monday 07 February 2011] [21:06:17] &lt;Steve-o&gt;        binding to eth0:* tends to be complicated in a multi-stack environment</div>
<div class="line">[Monday 07 February 2011] [21:07:39] &lt;Steve-o&gt;        surprisingly PGM has better support for IPv6 but it depends on reasonable OS support</div>
<div class="line">[Monday 07 February 2011] [21:08:11] &lt;Steve-o&gt;        there are some issues with the glibc in Ubuntu 10.10 there are definitely unexpected</div>
<div class="line">[Monday 07 February 2011] [21:08:24] &lt;Steve-o&gt;        for example ::1 resolves as 127.0.0.1</div>
<div class="line">[Monday 07 February 2011] [21:08:59] &lt;Steve-o&gt;        getaddrinfo (<cite>hostname</cite>) returns different address to ping <cite>hostname</cite> when using DHCP</div>
<div class="line">[Monday 07 February 2011] [21:09:38] &lt;Steve-o&gt;        one easy path is to assume IPv4 only and follow SMTP&#8217;s requirement to use a IPv6: prefix</div>
<div class="line">[Monday 07 February 2011] [21:11:12] &lt;Steve-o&gt;        I have to concede I only follow the PGM parts of ZeroMQ, not so much the other parts</div>
<div class="line">[Monday 07 February 2011] [21:12:54] &lt;Steve-o&gt;        There is certainly work on improving ZMQ_SWAP and XPUB/XSUB sockets</div>
<div class="line">[Tuesday 08 February 2011] [01:18:15] &lt;stockMQ&gt;       Hi.. I have a binary char* which i want to send from one Thread to Another.. i am trying inproc.. sending the char* as it is as a message does not work as at the receiving end while decoding i get erroneous data..I understand i have to use protobuf..but then can i serialize to string</div>
<div class="line">[Tuesday 08 February 2011] [01:42:58] &lt;sustrik&gt;       you have to copy the data to the message</div>
<div class="line">[Tuesday 08 February 2011] [02:38:39] &lt;stockMQ&gt;       I want to send a Byte* over a socket.. What would be the right way to do it</div>
<div class="line">[Tuesday 08 February 2011] [02:53:35] &lt;Guthur&gt;        stockMQ, do you mean send the pointer?</div>
<div class="line">[Tuesday 08 February 2011] [03:54:02] &lt;Guthur&gt;        I am sorry, I&#8217;ve busted the clrzmq2 build again, this MSVS solution stuff is utter crap</div>
<div class="line">[Tuesday 08 February 2011] [04:05:21] &lt;mikko&gt; good morning</div>
<div class="line">[Tuesday 08 February 2011] [04:52:39] &lt;sustrik&gt;       morning</div>
<div class="line">[Tuesday 08 February 2011] [08:11:41] &lt;Skaag&gt; BAHAHAHAHA.... IT&#8217;S ALIVE!!!</div>
<div class="line">[Tuesday 08 February 2011] [08:11:50] &lt;Skaag&gt; The horror!</div>
<div class="line">[Tuesday 08 February 2011] [08:14:06] &lt;sustrik&gt;       run!</div>
<div class="line">[Tuesday 08 February 2011] [08:14:36] &lt;sustrik&gt;       :)</div>
<div class="line">[Tuesday 08 February 2011] [08:14:41]          * taotetek flees</div>
<div class="line">[Tuesday 08 February 2011] [08:19:43] &lt;ianbarber&gt;     another epgm question: if I, in one thread, do a PUB send, then a SUB recv, using PGM, that should work right?</div>
<div class="line">[Tuesday 08 February 2011] [08:21:32] &lt;sustrik&gt;       ianbarber: that&#8217;s using loopback multicast</div>
<div class="line">[Tuesday 08 February 2011] [08:21:40] &lt;Guthur&gt;        is the lack of IPC on windows more a lack of motivation issue as oppose to technical?</div>
<div class="line">[Tuesday 08 February 2011] [08:21:58] &lt;sustrik&gt;       in reality, multicast doesn&#8217;t work in loopback manner</div>
<div class="line">[Tuesday 08 February 2011] [08:22:13] &lt;sustrik&gt;       so there&#8217;s an emulation layer in the OS that simulates it</div>
<div class="line">[Tuesday 08 February 2011] [08:22:20] &lt;ianbarber&gt;     oh right</div>
<div class="line">[Tuesday 08 February 2011] [08:22:26] &lt;sustrik&gt;       however, as i am said, it&#8217;s pretty crappy</div>
<div class="line">[Tuesday 08 February 2011] [08:22:38] &lt;sustrik&gt;       so rather use ipc/tcp for loopback</div>
<div class="line">[Tuesday 08 February 2011] [08:22:51] &lt;sustrik&gt;       Guthur: both in a way</div>
<div class="line">[Tuesday 08 February 2011] [08:22:56] &lt;ianbarber&gt;     that makes sense, i mean it&#8217;s not something that is a good idea other than for testing stuff</div>
<div class="line">[Tuesday 08 February 2011] [08:23:20] &lt;sustrik&gt;       ack</div>
<div class="line">[Tuesday 08 February 2011] [08:23:41] &lt;sustrik&gt;       Guthur: to implement IPC on windows you need NamedPipes</div>
<div class="line">[Tuesday 08 February 2011] [08:23:53] &lt;sustrik&gt;       these are identified by handles rather than fds</div>
<div class="line">[Tuesday 08 February 2011] [08:24:02] &lt;sustrik&gt;       so you can&#8217;t use select() for polling</div>
<div class="line">[Tuesday 08 February 2011] [08:24:13] &lt;sustrik&gt;       thus you have to implement IOCP polling mechanism</div>
<div class="line">[Tuesday 08 February 2011] [08:24:45] &lt;Guthur&gt;        oh, I should have none it was a simple issue, hehe</div>
<div class="line">[Tuesday 08 February 2011] [08:25:03] &lt;sustrik&gt;       well, it&#8217;s doable</div>
<div class="line">[Tuesday 08 February 2011] [08:25:05] &lt;Skaag&gt; what happens when one client out of 20, is down for an hour?</div>
<div class="line">[Tuesday 08 February 2011] [08:25:13] &lt;Skaag&gt; it loses all data, right?</div>
<div class="line">[Tuesday 08 February 2011] [08:25:35] &lt;sustrik&gt;       Skaag: if no identity is set, then yes</div>
<div class="line">[Tuesday 08 February 2011] [08:25:48] &lt;Skaag&gt; and if identity is set?</div>
<div class="line">[Tuesday 08 February 2011] [08:26:09] &lt;sustrik&gt;       then only the data that were &#8220;on the wire&#8221; during the failure are lost</div>
<div class="line">[Tuesday 08 February 2011] [08:26:19] &lt;sustrik&gt;       the subsequent messages are queued in the publisher</div>
<div class="line">[Tuesday 08 February 2011] [08:26:27] &lt;Skaag&gt; and are saved in memory?</div>
<div class="line">[Tuesday 08 February 2011] [08:26:32] &lt;sustrik&gt;       yes</div>
<div class="line">[Tuesday 08 February 2011] [08:26:43] &lt;Skaag&gt; and if the publisher died too, they are lost?</div>
<div class="line">[Tuesday 08 February 2011] [08:26:50] &lt;sustrik&gt;       sure thing</div>
<div class="line">[Tuesday 08 February 2011] [08:26:55] &lt;Skaag&gt; ok :)</div>
<div class="line">[Tuesday 08 February 2011] [08:27:24] &lt;Skaag&gt; i&#8217;m trying to figure out how to keep 20+ machines in sync with the same data</div>
<div class="line">[Tuesday 08 February 2011] [08:27:36] &lt;Skaag&gt; they all get small incremental updates via zmq</div>
<div class="line">[Tuesday 08 February 2011] [08:27:42] &lt;Skaag&gt; but it accumulates to quite a lot</div>
<div class="line">[Tuesday 08 February 2011] [08:28:05] &lt;sustrik&gt;       ask for a snapshot after starting the client using req/rep</div>
<div class="line">[Tuesday 08 February 2011] [08:28:16] &lt;sustrik&gt;       then subscribe to incremental upgrades using pub/sub</div>
<div class="line">[Tuesday 08 February 2011] [08:31:51] &lt;Skaag&gt; sounds simple enough</div>
<div class="line">[Tuesday 08 February 2011] [08:32:02] &lt;Skaag&gt; the remaining problem is knowing who to ask the snapshot from</div>
<div class="line">[Tuesday 08 February 2011] [08:32:08] &lt;Skaag&gt; who is the leader with the best snapshot</div>
<div class="line">[Tuesday 08 February 2011] [08:32:29] &lt;Skaag&gt; probably the one with the longest uptime</div>
<div class="line">[Tuesday 08 February 2011] [08:32:31] &lt;mikko&gt; are you using zookeeper in the setup?</div>
<div class="line">[Tuesday 08 February 2011] [08:32:37] &lt;Skaag&gt; not anymore</div>
<div class="line">[Tuesday 08 February 2011] [08:32:48] &lt;Skaag&gt; I can&#8217;t use zookeeper because it requires a fixed number of nodes</div>
<div class="line">[Tuesday 08 February 2011] [08:33:00] &lt;mikko&gt; why is that?</div>
<div class="line">[Tuesday 08 February 2011] [08:33:00] &lt;Skaag&gt; when when nodes are added, a configuration file needs to be edited, and the whole thing restarted</div>
<div class="line">[Tuesday 08 February 2011] [08:33:14] &lt;mikko&gt; you mean to zookeeper itself?</div>
<div class="line">[Tuesday 08 February 2011] [08:33:17] &lt;Skaag&gt; I followed a thread on their list, and found a person started working on fixing this</div>
<div class="line">[Tuesday 08 February 2011] [08:33:31] &lt;Skaag&gt; yes to zookeeper itself</div>
<div class="line">[Tuesday 08 February 2011] [08:33:50] &lt;Skaag&gt; anyway his work has stalled</div>
<div class="line">[Tuesday 08 February 2011] [08:34:12] &lt;Skaag&gt; and he offered someone else to continue working on it, and the ETA is 3 ~ 5 month to implement</div>
<div class="line">[Tuesday 08 February 2011] [08:34:23] &lt;Skaag&gt; why, no idea..</div>
<div class="line">[Tuesday 08 February 2011] [08:35:04] &lt;Guthur&gt;        sustrik: why not just use sockets for IPC</div>
<div class="line">[Tuesday 08 February 2011] [08:36:16] &lt;Guthur&gt;        sockets can be polled with select, or am I missing something big here</div>
<div class="line">[Tuesday 08 February 2011] [08:36:26] &lt;sustrik&gt;       Guthur: nope</div>
<div class="line">[Tuesday 08 February 2011] [08:36:33] &lt;sustrik&gt;       you can use sockets</div>
<div class="line">[Tuesday 08 February 2011] [08:36:46] &lt;sustrik&gt;       just use <a class="reference external" href="tcp://127.0.0.1:port">tcp://127.0.0.1:port</a></div>
<div class="line">[Tuesday 08 February 2011] [08:38:10] &lt;sustrik&gt;       Skaag: choosing a leader in a distributed env is a complex problem...</div>
<div class="line">[Tuesday 08 February 2011] [08:38:16] &lt;Guthur&gt;        are pipes more performant?</div>
<div class="line">[Tuesday 08 February 2011] [08:38:32] &lt;sustrik&gt;       you should peek into some disttibuted algorithm textbook</div>
<div class="line">[Tuesday 08 February 2011] [08:38:38] &lt;zchrish&gt;       mikko: You referred me to valokuva.org for a mingw dll for  Windows build. Is there a library option also available?</div>
<div class="line">[Tuesday 08 February 2011] [08:38:43] &lt;sustrik&gt;       Guthur: never measured it</div>
<div class="line">[Tuesday 08 February 2011] [08:38:57] &lt;sustrik&gt;       but it would make sense if they were</div>
<div class="line">[Tuesday 08 February 2011] [08:39:44] &lt;sustrik&gt;       Skaag: especially beware of split-brain syndrome</div>
<div class="line">[Tuesday 08 February 2011] [08:40:03] &lt;Skaag&gt; right, I heard about that</div>
<div class="line">[Tuesday 08 February 2011] [08:40:14] &lt;Skaag&gt; a problem that exists in the glusterfs project</div>
<div class="line">[Tuesday 08 February 2011] [08:40:17] &lt;Skaag&gt; (which I also use)</div>
<div class="line">[Tuesday 08 February 2011] [08:40:31] &lt;sustrik&gt;       it&#8217;s when the network is broken into two parts</div>
<div class="line">[Tuesday 08 February 2011] [08:40:39] &lt;sustrik&gt;       each part selects its own leader</div>
<div class="line">[Tuesday 08 February 2011] [08:40:48] &lt;sustrik&gt;       resulting in inconsistent state</div>
<div class="line">[Tuesday 08 February 2011] [08:41:10] &lt;Skaag&gt; can run a competition with set rules, and the winner gets its data replicated to everybody</div>
<div class="line">[Tuesday 08 February 2011] [08:41:52] &lt;sustrik&gt;       to prevent the split-brain the competition could be won only by a node that gets more than 50% of the vote</div>
<div class="line">[Tuesday 08 February 2011] [08:42:08] &lt;sustrik&gt;       to compute 50% you need to know the size of the cluster</div>
<div class="line">[Tuesday 08 February 2011] [08:42:11] &lt;sustrik&gt;       it&#8217;s complex...</div>
<div class="line">[Tuesday 08 February 2011] [08:45:40] &lt;mikko&gt; zchrish: what do you mean?</div>
<div class="line">[Tuesday 08 February 2011] [08:45:45] &lt;mikko&gt; zchrish: static library?</div>
<div class="line">[Tuesday 08 February 2011] [08:46:01] &lt;zchrish&gt;       Yes, a static library.</div>
<div class="line">[Tuesday 08 February 2011] [08:46:12] &lt;mikko&gt; zchrish: no, we don&#8217;t support building static libraries under mingw32</div>
<div class="line">[Tuesday 08 February 2011] [08:46:33] &lt;zchrish&gt;       Oh, I see. Why not?</div>
<div class="line">[Tuesday 08 February 2011] [08:46:52] &lt;mikko&gt; zchrish: it&#8217;s a massive hassle with the dllexport/dllimport stuff</div>
<div class="line">[Tuesday 08 February 2011] [08:46:59] &lt;mikko&gt; on windows</div>
<div class="line">[Tuesday 08 February 2011] [08:47:19] &lt;zchrish&gt;       Sure, ok. Thank you.</div>
<div class="line">[Tuesday 08 February 2011] [08:47:31] &lt;mikko&gt; you can probably build libs by hacking the build scripts</div>
<div class="line">[Tuesday 08 February 2011] [08:47:56] &lt;mikko&gt; but to keep things somewhat sane for mingw32/visual studio we only support dlls</div>
<div class="line">[Tuesday 08 February 2011] [08:48:10] &lt;CIA-21&gt;        zeromq2: 03Martin Sustrik 07master * r5dcbc34 10/ src/zmq.cpp :</div>
<div class="line">[Tuesday 08 February 2011] [08:48:11] &lt;CIA-21&gt;        zeromq2: zmq_poll with no fds behaves decently</div>
<div class="line">[Tuesday 08 February 2011] [08:48:11] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/g191uU">http://bit.ly/g191uU</a></div>
<div class="line">[Tuesday 08 February 2011] [08:48:46] &lt;zchrish&gt;       But I see a .lib in the msvc2008 output.</div>
<div class="line">[Tuesday 08 February 2011] [08:49:00] &lt;mikko&gt; thats the import library</div>
<div class="line">[Tuesday 08 February 2011] [08:49:07] &lt;zchrish&gt;       Oh, ok.</div>
<div class="line">[Tuesday 08 February 2011] [09:00:28] &lt;zchrish&gt;       mikko: Is WIN7 required to use the DLL?</div>
<div class="line">[Tuesday 08 February 2011] [09:02:54] &lt;ianbarber&gt;     sustrik/mikko: any thoughts on best way to debug if I see PGM packets from wireshark on my reciever host, but am not getting anything from 0MQ listening on that host</div>
<div class="line">[Tuesday 08 February 2011] [09:07:48] &lt;sustrik&gt;       check whether the multicast addresses and ports match on publisher and receiver</div>
<div class="line">[Tuesday 08 February 2011] [09:08:39] &lt;ianbarber&gt;     yep, definitely match</div>
<div class="line">[Tuesday 08 February 2011] [09:08:46] &lt;ianbarber&gt;     subscribe is &#8220;&#8221;</div>
<div class="line">[Tuesday 08 February 2011] [09:08:57] &lt;ianbarber&gt;     (as well)</div>
<div class="line">[Tuesday 08 February 2011] [09:09:13] &lt;sustrik&gt;       then you can place breakpoint to pgm_socket_t::recv()</div>
<div class="line">[Tuesday 08 February 2011] [09:09:28] &lt;sustrik&gt;       to see whether the data are getting from openPGM to 0MQ</div>
<div class="line">[Tuesday 08 February 2011] [09:16:20] &lt;signalseeker&gt;   Is a pdf version of the zmq guide available?</div>
<div class="line">[Tuesday 08 February 2011] [09:17:34] &lt;mikko&gt; zchrish: i wouldn&#8217;t think so</div>
<div class="line">[Tuesday 08 February 2011] [09:17:52] &lt;zchrish&gt;       OK.</div>
<div class="line">[Tuesday 08 February 2011] [09:18:05] &lt;mikko&gt; might need the visual studio 2008 redist libs</div>
<div class="line">[Tuesday 08 February 2011] [09:18:23] &lt;ianbarber&gt;     sustrik: it&#8217;s not breaking in there, so it looks like 0MQ isn&#8217;t seeing the packets</div>
<div class="line">[Tuesday 08 February 2011] [09:33:35] &lt;sustrik&gt;       ianbarber: ask steve-o then</div>
<div class="line">[Tuesday 08 February 2011] [09:33:41] &lt;ianbarber&gt;     steve-o: is there anything to check whether libpgm can see the packets on a host, for example? I&#8217;ve can see them in wireshark, but 0MQ doesn&#8217;t seem to be getting them.</div>
<div class="line">[Tuesday 08 February 2011] [09:33:58] &lt;ianbarber&gt;     was just about to, and did :)</div>
<div class="line">[Tuesday 08 February 2011] [09:34:30] &lt;Steve-o&gt;       mmm</div>
<div class="line">[Tuesday 08 February 2011] [09:34:56] &lt;Steve-o&gt;       You can try increasing the log level, i.e. PGM_MIN_LOG_LEVEL=TRACE</div>
<div class="line">[Tuesday 08 February 2011] [09:35:43] &lt;ianbarber&gt;     where would the logging go?</div>
<div class="line">[Tuesday 08 February 2011] [09:36:00] &lt;Steve-o&gt;       stdout</div>
<div class="line">[Tuesday 08 February 2011] [09:36:51] &lt;Steve-o&gt;       is it completely silent in zeromq or a little bit of data then silence?</div>
<div class="line">[Tuesday 08 February 2011] [09:36:56] &lt;ianbarber&gt;     ah</div>
<div class="line">[Tuesday 08 February 2011] [09:36:57] &lt;ianbarber&gt;     Trace: Discarded packet for muted receiver</div>
<div class="line">[Tuesday 08 February 2011] [09:37:07] &lt;ianbarber&gt;     awesome!</div>
<div class="line">[Tuesday 08 February 2011] [09:37:13] &lt;ianbarber&gt;     now, why would it do that</div>
<div class="line">[Tuesday 08 February 2011] [09:37:15] &lt;ianbarber&gt;     :)</div>
<div class="line">[Tuesday 08 February 2011] [09:39:28] &lt;Steve-o&gt;       a sender would see that on data packets</div>
<div class="line">[Tuesday 08 February 2011] [09:39:46] &lt;Steve-o&gt;       possible cause is multiple active senders</div>
<div class="line">[Tuesday 08 February 2011] [09:40:43] &lt;Steve-o&gt;       it&#8217;s not expected for a SUB socket</div>
<div class="line">[Tuesday 08 February 2011] [09:41:02] &lt;Steve-o&gt;       only PUBs</div>
<div class="line">[Tuesday 08 February 2011] [09:45:37] &lt;ianbarber&gt;     hmm, that was definitely on a sub</div>
<div class="line">[Tuesday 08 February 2011] [09:45:45] &lt;ianbarber&gt;     but maybe there&#8217;s something rogue running as well</div>
<div class="line">[Tuesday 08 February 2011] [09:47:34] &lt;Steve-o&gt;       it is only emitted if the socket is not permitted to receive data</div>
<div class="line">[Tuesday 08 February 2011] [09:48:05] &lt;Steve-o&gt;       so a SUB socket that cannot recv sounds a bit broken</div>
<div class="line">[Tuesday 08 February 2011] [09:48:37] &lt;ianbarber&gt;     hmm, that&#8217;s strange</div>
<div class="line">[Tuesday 08 February 2011] [09:48:41] &lt;ianbarber&gt;     nothing else running</div>
<div class="line">[Tuesday 08 February 2011] [09:48:47] &lt;ianbarber&gt;     definitely only triggers when I&#8217;m sending on the other host</div>
<div class="line">[Tuesday 08 February 2011] [09:48:54] &lt;ianbarber&gt;     if i don&#8217;t send, no output</div>
<div class="line">[Tuesday 08 February 2011] [09:49:38] &lt;Guthur&gt;        If i was wanting to learn what interface a windows IPC implementation should have where is the best places to look in the source code?</div>
<div class="line">[Tuesday 08 February 2011] [09:50:07] &lt;ianbarber&gt;     it does mention a send interface as well steve-o</div>
<div class="line">[Tuesday 08 February 2011] [09:50:09] &lt;ianbarber&gt;     Trace: Create transmit window.</div>
<div class="line">[Tuesday 08 February 2011] [09:50:09] &lt;ianbarber&gt;     Trace: Binding receive socket to INADDR_ANY</div>
<div class="line">[Tuesday 08 February 2011] [09:50:09] &lt;ianbarber&gt;     Trace: Binding send socket to interface index 2</div>
<div class="line">[Tuesday 08 February 2011] [09:50:10] &lt;ianbarber&gt;     Trace: Join multicast group 239.192.0.1 on interface index 2</div>
<div class="line">[Tuesday 08 February 2011] [09:50:10] &lt;ianbarber&gt;     Trace: Multicast send interface set to 192.168.192.132 index 2</div>
<div class="line">[Tuesday 08 February 2011] [09:50:11] &lt;ianbarber&gt;     is that normal?</div>
<div class="line">[Tuesday 08 February 2011] [09:50:28] &lt;Steve-o&gt;       ianbarber: PGM requires a back-channel from recv to sender for reliability</div>
<div class="line">[Tuesday 08 February 2011] [09:50:36] &lt;ianbarber&gt;     oh, of course</div>
<div class="line">[Tuesday 08 February 2011] [09:50:40] &lt;ianbarber&gt;     silly me</div>
<div class="line">[Tuesday 08 February 2011] [09:51:28] &lt;ianbarber&gt;     if you have a sec, could you look at <a class="reference external" href="https://gist.github.com/816533">https://gist.github.com/816533</a> and see if I&#8217;m doing something obviously dumb?</div>
<div class="line">[Tuesday 08 February 2011] [09:51:49] &lt;Steve-o&gt;       on Linux or Windows?</div>
<div class="line">[Tuesday 08 February 2011] [09:52:11] &lt;Steve-o&gt;       Linux flavour I&#8217;m guessing</div>
<div class="line">[Tuesday 08 February 2011] [09:52:55] &lt;ianbarber&gt;     linux</div>
<div class="line">[Tuesday 08 February 2011] [09:53:30] &lt;Steve-o&gt;       looks reasonable although you may hit this bug:  <a class="reference external" href="https://github.com/zeromq/zeromq2/issues#issue/139">https://github.com/zeromq/zeromq2/issues#issue/139</a></div>
<div class="line">[Tuesday 08 February 2011] [09:53:50] &lt;sustrik&gt;       Guthur: you would have to start with implementing IOCP poller</div>
<div class="line">[Tuesday 08 February 2011] [09:54:11] &lt;sustrik&gt;       see select_t, poll_t, epoll_t, devpoll_t and kqueue_t</div>
<div class="line">[Tuesday 08 February 2011] [09:54:20] &lt;sustrik&gt;       you would have to make something similar</div>
<div class="line">[Tuesday 08 February 2011] [09:54:26] &lt;sustrik&gt;       presumably called iocp_t</div>
<div class="line">[Tuesday 08 February 2011] [09:54:34] &lt;Steve-o&gt;       ianbarber: sleeping before zmq_term can usually help diagnosis, basically keeping the socket open a bit longer.</div>
<div class="line">[Tuesday 08 February 2011] [09:54:54] &lt;Steve-o&gt;       ianbarber: or sending more data.</div>
<div class="line">[Tuesday 08 February 2011] [09:55:11] &lt;Guthur&gt;        sustrik: ok, thanks</div>
<div class="line">[Tuesday 08 February 2011] [09:55:27] &lt;ianbarber&gt;     steve-o: I&#8217;ve got the sender sending then sleeping for 1 second, in a loop, so it&#8217;s c onstant stream of data. At the moment, I just wait on recv in the test code</div>
<div class="line">[Tuesday 08 February 2011] [09:56:04] &lt;ianbarber&gt;     each send triggers about 4-5 of those muted receiver  notices</div>
<div class="line">[Tuesday 08 February 2011] [09:56:20] &lt;Guthur&gt;        from MS docs local named pipes would be considerably faster than sockets</div>
<div class="line">[Tuesday 08 February 2011] [09:56:33] &lt;Guthur&gt;        so maybe worth the look</div>
<div class="line">[Tuesday 08 February 2011] [09:56:39] &lt;Steve-o&gt;       ianbarber: send me some code, <a class="reference external" href="mailto:steven&#46;mccoy&#37;&#52;&#48;miru&#46;hk">steven<span>&#46;</span>mccoy<span>&#64;</span>miru<span>&#46;</span>hk</a>, I&#8217;m working on Windows this morning and I&#8217;ll have a look later</div>
<div class="line">[Tuesday 08 February 2011] [09:57:14] &lt;ianbarber&gt;     will do, thanks steve</div>
<div class="line">[Tuesday 08 February 2011] [09:57:21] &lt;sustrik&gt;       Gurthur: yes, definitely</div>
<div class="line">[Tuesday 08 February 2011] [10:17:08] &lt;neale1&gt;        sustrik: Have you seen this whitepaper: <a class="reference external" href="http://mnb.ociweb.com/mnb/MiddlewareNewsBrief-201004.html">http://mnb.ociweb.com/mnb/MiddlewareNewsBrief-201004.html</a></div>
<div class="line">[Tuesday 08 February 2011] [10:18:41] &lt;drbobbeaty&gt;    Question: Let&#8217;s say I am using ZMQ/OpenPGM on the epgm: protocol... also let&#8217;s assume that I have several multicast channels sending data. On the client, is it better to have a single zmq::context_t with 1 thread working for a series of zmq::socket_t connections, each ZMQ_SUB-ed to different multicast channels? Or would it be better to have a 1:1 mapping between the zmq::context_t and it&#8217;s zmq::socket_t?</div>
<div class="line">[Tuesday 08 February 2011] [10:21:19] &lt;CIA-21&gt;        zeromq2: 03Martin Sustrik 07master * r889424e 10/ src/ctx.cpp :</div>
<div class="line">[Tuesday 08 February 2011] [10:21:19] &lt;CIA-21&gt;        zeromq2: max_sockets honoured precisely</div>
<div class="line">[Tuesday 08 February 2011] [10:21:19] &lt;CIA-21&gt;        zeromq2: The internal log socket was subtracted from the number of</div>
<div class="line">[Tuesday 08 February 2011] [10:21:19] &lt;CIA-21&gt;        zeromq2: available sockets. So, if max_sockets was set to 100,</div>
<div class="line">[Tuesday 08 February 2011] [10:21:19] &lt;CIA-21&gt;        zeromq2: you could create only 99 sockets. Fixed.</div>
<div class="line">[Tuesday 08 February 2011] [10:21:19] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/g08FfG">http://bit.ly/g08FfG</a></div>
<div class="line">[Tuesday 08 February 2011] [10:34:15] &lt;Guthur&gt;        what is the default max number of sockets per context?</div>
<div class="line">[Tuesday 08 February 2011] [10:34:34] &lt;Guthur&gt;        and what happens if you try to exceed that</div>
<div class="line">[Tuesday 08 February 2011] [10:35:20] &lt;Guthur&gt;        oh I&#8217;ve just answered my own question</div>
<div class="line">[Tuesday 08 February 2011] [10:38:12] &lt;drbobbeaty&gt;    I <em>believe</em> the context is a &#8220;one per process space&#8221; entity, so I <em>believe</em> you have one context for any number of sockets in the process, but I just wanted a verification from the designers.</div>
<div class="line">[Tuesday 08 February 2011] [11:02:38] &lt;sustrik&gt;       Guthur: 512</div>
<div class="line">[Tuesday 08 February 2011] [11:03:17] &lt;Guthur&gt;        sustrik: is it possible to set it higher?</div>
<div class="line">[Tuesday 08 February 2011] [11:03:28] &lt;sustrik&gt;       neale1: yep, it&#8217;s an old one</div>
<div class="line">[Tuesday 08 February 2011] [11:04:00] &lt;sustrik&gt;       i think there is some discussion with opendds guys on the mailing list or somewhere</div>
<div class="line">[Tuesday 08 February 2011] [11:04:06] &lt;sustrik&gt;       Guthur: sure</div>
<div class="line">[Tuesday 08 February 2011] [11:05:03] &lt;sustrik&gt;       drbobbeaty: confirmed</div>
<div class="line">[Tuesday 08 February 2011] [11:06:40] &lt;drbobbeaty&gt;    sustrik: thank you very much for the confirmation. Appreciated.</div>
<div class="line">[Tuesday 08 February 2011] [11:07:10] &lt;Guthur&gt;        sustrik: I did a search for max_sockets in the src and couldn&#8217;t find it</div>
<div class="line">[Tuesday 08 February 2011] [11:07:19] &lt;Guthur&gt;        is it a build variable</div>
<div class="line">[Tuesday 08 February 2011] [11:08:45] &lt;sustrik&gt;       src/confing.hpp</div>
<div class="line">[Tuesday 08 February 2011] [11:10:55] &lt;Guthur&gt;        all there is is max_app_threads = 512,</div>
<div class="line">[Tuesday 08 February 2011] [11:11:03] &lt;Guthur&gt;        is that equivalent?</div>
<div class="line">[Tuesday 08 February 2011] [11:12:48] &lt;mikko&gt; Guthur: <a class="reference external" href="https://github.com/zeromq/zeromq2/blob/master/src/config.hpp#L31">https://github.com/zeromq/zeromq2/blob/master/src/config.hpp#L31</a></div>
<div class="line">[Tuesday 08 February 2011] [11:13:26] &lt;Guthur&gt;        umm thats called max_app_threads = 512, in my source</div>
<div class="line">[Tuesday 08 February 2011] [11:13:38] &lt;mikko&gt; 2.0.x ?</div>
<div class="line">[Tuesday 08 February 2011] [11:14:04] &lt;Guthur&gt;        ah, yeah</div>
<div class="line">[Tuesday 08 February 2011] [11:28:59] &lt;sustrik&gt;       the theading has changed between 2.0 and 2.1</div>
<div class="line">[Tuesday 08 February 2011] [11:29:28] &lt;sustrik&gt;       with 2.0 the limit is on <em>threads</em> using 0mq sockets</div>
<div class="line">[Tuesday 08 February 2011] [11:29:47] &lt;sustrik&gt;       in 2.1 the limit is on the number of the sockets themselves</div>
<div class="line">[Tuesday 08 February 2011] [11:30:19] &lt;Guthur&gt;        I think this may explain a mysterious app crash I was having</div>
<div class="line">[Tuesday 08 February 2011] [11:30:56] &lt;mikko&gt; Guthur: on windows?</div>
<div class="line">[Tuesday 08 February 2011] [11:31:56] &lt;Guthur&gt;        yep</div>
<div class="line">[Tuesday 08 February 2011] [11:32:31] &lt;Guthur&gt;        but it should have thrown an exception</div>
<div class="line">[Tuesday 08 February 2011] [11:32:39] &lt;Guthur&gt;        might have been another cause</div>
<div class="line">[Tuesday 08 February 2011] [11:34:51] &lt;mikko&gt; running out of filehandles?</div>
<div class="line">[Tuesday 08 February 2011] [11:35:07] &lt;mikko&gt; i think there was some shenanigans with filedescriptor count on windows</div>
<div class="line">[Tuesday 08 February 2011] [11:37:06] &lt;kristsk&gt;       like max 512 per process or so i&#8217;ve heard</div>
<div class="line">[Tuesday 08 February 2011] [11:37:28] &lt;mikko&gt; i think it was way less by default</div>
<div class="line">[Tuesday 08 February 2011] [11:37:32] &lt;mikko&gt; 64 even</div>
<div class="line">[Tuesday 08 February 2011] [11:38:30] &lt;kristsk&gt;       thats not much.</div>
<div class="line">[Tuesday 08 February 2011] [11:38:33] &lt;mikko&gt; <a class="reference external" href="https://github.com/zeromq/zeromq2/issues/issue/57">https://github.com/zeromq/zeromq2/issues/issue/57</a></div>
<div class="line">[Tuesday 08 February 2011] [11:39:19] &lt;sustrik&gt;       64 is the default max descriptors you can poll on on win32</div>
<div class="line">[Tuesday 08 February 2011] [11:39:30] &lt;mikko&gt; ah ok</div>
<div class="line">[Tuesday 08 February 2011] [11:39:30] &lt;sustrik&gt;       i&#8217;ve overloaded the value to 1024 recently</div>
<div class="line">[Tuesday 08 February 2011] [11:53:57] &lt;Guthur&gt;        I&#8217;m not sure what my issue was, the app just silently shutdown, not very helpful at all</div>
<div class="line">[Tuesday 08 February 2011] [11:55:15] &lt;sustrik&gt;       not even an assertion?</div>
<div class="line">[Tuesday 08 February 2011] [11:55:46] &lt;Guthur&gt;        nothing, it may not have been ZMQ</div>
<div class="line">[Tuesday 08 February 2011] [11:55:53] &lt;Guthur&gt;        there was quickfix as well</div>
<div class="line">[Tuesday 08 February 2011] [11:56:29] &lt;sustrik&gt;       i see</div>
<div class="line">[Tuesday 08 February 2011] [11:59:44] &lt;Guthur&gt;        well, home time now</div>
<div class="line">[Tuesday 08 February 2011] [12:09:51] &lt;stockMQ&gt;       Hi.. I am receiving protobuf messages from my zmq socket which i then want to serialize to a file as binary.. this file in turn should be readable by other processes simultaneously..</div>
<div class="line">[Tuesday 08 February 2011] [12:09:57] &lt;stockMQ&gt;       Any pointers?</div>
<div class="line">[Tuesday 08 February 2011] [12:10:46] &lt;mikko&gt; one file per message or all messages in one file?</div>
<div class="line">[Tuesday 08 February 2011] [12:11:24] &lt;stockMQ&gt;       all messages in one file.. the messages are sequentially timestamped</div>
<div class="line">[Tuesday 08 February 2011] [12:12:22] &lt;stockMQ&gt;       basically the writer will just dump all incoming messages to the file</div>
<div class="line">[Tuesday 08 February 2011] [12:12:41] &lt;stockMQ&gt;       but the reader processes should be able to read and de serialize them</div>
<div class="line">[Tuesday 08 February 2011] [12:13:11] &lt;mikko&gt; how does the reader know that message is not impartial?</div>
<div class="line">[Tuesday 08 February 2011] [12:14:37] &lt;stockMQ&gt;       by impartial what do you mean?can you elaborate please</div>
<div class="line">[Tuesday 08 February 2011] [12:15:19] &lt;mikko&gt; if the writer is writing a message how do the readers know that the message has been fully written?</div>
<div class="line">[Tuesday 08 February 2011] [12:15:25] &lt;mikko&gt; are you planning to use locking?</div>
<div class="line">[Tuesday 08 February 2011] [12:15:39] &lt;stockMQ&gt;       No..basically what i was doing till now is</div>
<div class="line">[Tuesday 08 February 2011] [12:15:46] &lt;mikko&gt; and if yes how are you going to sync readers/writers?</div>
<div class="line">[Tuesday 08 February 2011] [12:15:46] &lt;stockMQ&gt;       intradayFile.Open(dataPath,CFile::modeWrite | CFile::modeNoTruncate | CFile::modeCreate | CFile::shareDenyWrite | CFile::osWriteThrough)</div>
<div class="line">[Tuesday 08 February 2011] [12:16:00] &lt;mikko&gt; because you could easily &#8220;DoS&#8221; yourself by having high rate of messages coming in</div>
<div class="line">[Tuesday 08 February 2011] [12:16:08] &lt;mikko&gt; in which case the lock wouldnt be released</div>
<div class="line">[Tuesday 08 February 2011] [12:16:40] &lt;sustrik&gt;       i would just use a DB</div>
<div class="line">[Tuesday 08 February 2011] [12:16:54] &lt;stockMQ&gt;       This basically is supposed to allow Shared read.. if the reader process opens the file with appropriate permission</div>
<div class="line">[Tuesday 08 February 2011] [12:17:14] &lt;stockMQ&gt;       The synchronization is supposed to be handled by the OS</div>
<div class="line">[Tuesday 08 February 2011] [12:17:44] &lt;stockMQ&gt;       I am working on VC++</div>
<div class="line">[Tuesday 08 February 2011] [12:18:02] &lt;sustrik&gt;       the OS won&#8217;t handle the sync for you</div>
<div class="line">[Tuesday 08 February 2011] [12:18:09] &lt;sustrik&gt;       you have to implement it yourself</div>
<div class="line">[Tuesday 08 February 2011] [12:18:19] &lt;sustrik&gt;       that&#8217;s why it&#8217;s better to use a DB</div>
<div class="line">[Tuesday 08 February 2011] [12:18:36] &lt;stockMQ&gt;       ok</div>
<div class="line">[Tuesday 08 February 2011] [12:19:23] &lt;mikko&gt; i think posix will guarantee that write within a process is atomic</div>
<div class="line">[Tuesday 08 February 2011] [12:19:25] &lt;mikko&gt; but thats about it</div>
<div class="line">[Tuesday 08 February 2011] [12:19:42] &lt;stockMQ&gt;       ok</div>
<div class="line">[Tuesday 08 February 2011] [12:19:48] &lt;mikko&gt; between processes</div>
<div class="line">[Tuesday 08 February 2011] [12:19:58] &lt;mikko&gt; but that doesn&#8217;t really help you with readers at all</div>
<div class="line">[Tuesday 08 February 2011] [12:20:15] &lt;mikko&gt; and not sure how posix windows is</div>
<div class="line">[Tuesday 08 February 2011] [12:20:36] &lt;mikko&gt; this is what posix says:</div>
<div class="line">[Tuesday 08 February 2011] [12:20:39] &lt;mikko&gt; &#8220;Atomic/non-atomic: A write is atomic if the whole amount written in one operation is not interleaved with data from any other process. This is useful when there are multiple writers sending data to a single reader. Applications need to know how large a write request can be expected to be performed atomically. &#8220;</div>
<div class="line">[Tuesday 08 February 2011] [12:21:19] &lt;stockMQ&gt;       My understanding was that CFile::ShareDenyWrite is a flag that tells the operating system not to permit any other process to write to your file while you have it open.</div>
<div class="line">[Tuesday 08 February 2011] [12:21:54] &lt;mikko&gt; stockMQ: it will probably but what about if you have a constant stream of messages coming in?</div>
<div class="line">[Tuesday 08 February 2011] [12:22:12] &lt;stockMQ&gt;       and shareRead would allow it to be read simultaneously</div>
<div class="line">[Tuesday 08 February 2011] [12:22:30] &lt;stockMQ&gt;       yes u r right.. i had that in mind.. but wanted to check that heuristically</div>
<div class="line">[Tuesday 08 February 2011] [12:22:42] &lt;mikko&gt; writer will block the readers</div>
<div class="line">[Tuesday 08 February 2011] [12:23:03] &lt;mikko&gt; usually</div>
<div class="line">[Tuesday 08 February 2011] [12:23:19] &lt;mikko&gt; if you have readers reading while the writer is writing you might end up with partial / incomplete data</div>
<div class="line">[Tuesday 08 February 2011] [12:23:39] &lt;mikko&gt; then you need to track if the message is fully written or not</div>
<div class="line">[Tuesday 08 February 2011] [12:24:16] &lt;neale1&gt;        mikko: did you want to try enabling the clrzmq build for s390x to see how it goes?</div>
<div class="line">[Tuesday 08 February 2011] [12:24:39] &lt;mikko&gt; neale1: i can at some point, still at work for about an hour</div>
<div class="line">[Tuesday 08 February 2011] [12:24:59] &lt;neale1&gt;        no worries</div>
<div class="line">[Tuesday 08 February 2011] [12:25:06] &lt;stockMQ&gt;       yes u r right.. Hence i planned to first write it to a file..see how the readers behave and then switch to a DB.. to learn along the process as well</div>
<div class="line">[Tuesday 08 February 2011] [12:26:45] &lt;stockMQ&gt;       I have received suggestions here like Kyoto cabinet,BDB etc.. More inputs/suggestions are welcome..Also it would be helpful if there is anyone who has written protobufs to a file can share his/her experience</div>
<div class="line">[Tuesday 08 February 2011] [12:29:04] &lt;mikko&gt; do you need to keep this data?</div>
<div class="line">[Tuesday 08 February 2011] [12:29:12] &lt;stockMQ&gt;       yes</div>
<div class="line">[Tuesday 08 February 2011] [12:29:24] &lt;stockMQ&gt;       basically these are stock trade data..</div>
<div class="line">[Tuesday 08 February 2011] [12:29:32] &lt;stockMQ&gt;       they need to be kept for back analysis</div>
<div class="line">[Tuesday 08 February 2011] [12:29:52] &lt;mikko&gt; and this is on windows?</div>
<div class="line">[Tuesday 08 February 2011] [12:30:04] &lt;stockMQ&gt;       and there could be more than one analysis tool accessing the data and hence the parallel readers</div>
<div class="line">[Tuesday 08 February 2011] [12:30:05] &lt;stockMQ&gt;       correct</div>
<div class="line">[Tuesday 08 February 2011] [12:31:01] &lt;mikko&gt; do you want to keep the raw data or the results of the analysis?</div>
<div class="line">[Tuesday 08 February 2011] [12:31:08] &lt;stockMQ&gt;       The raw data</div>
<div class="line">[Tuesday 08 February 2011] [12:31:30] &lt;stockMQ&gt;       the analysis tools they basically read the data..do their stuff and display</div>
<div class="line">[Tuesday 08 February 2011] [12:31:32] &lt;mikko&gt; so you want to be able to get historic data for time periods etc?</div>
<div class="line">[Tuesday 08 February 2011] [12:31:38] &lt;stockMQ&gt;       yess</div>
<div class="line">[Tuesday 08 February 2011] [12:31:44] &lt;mikko&gt; do you want to be able to query the data?</div>
<div class="line">[Tuesday 08 February 2011] [12:31:57] &lt;stockMQ&gt;       till now i was copying the protobufs to struct and then writing the structs</div>
<div class="line">[Tuesday 08 February 2011] [12:32:09] &lt;stockMQ&gt;       now i want to bypass the structs and directly write the protobufs</div>
<div class="line">[Tuesday 08 February 2011] [12:33:12] &lt;mikko&gt; the data you are receiveing, what kind of data is it?</div>
<div class="line">[Tuesday 08 February 2011] [12:33:13] &lt;stockMQ&gt;       yes.. query for the time window..nothing complex</div>
<div class="line">[Tuesday 08 February 2011] [12:33:15] &lt;stockMQ&gt;       as for nw</div>
<div class="line">[Tuesday 08 February 2011] [12:33:17] &lt;mikko&gt; numbers, text?</div>
<div class="line">[Tuesday 08 February 2011] [12:33:52] &lt;stockMQ&gt;       both..mostly numbers.. text are just names of the Stock scrip</div>
<div class="line">[Tuesday 08 February 2011] [12:34:09] &lt;mikko&gt; what sort of consistency requirements do you have for the data?</div>
<div class="line">[Tuesday 08 February 2011] [12:35:21] &lt;mikko&gt; or maybe more accurate question would be resilience requirements</div>
<div class="line">[Tuesday 08 February 2011] [12:36:14] &lt;mikko&gt; for example is it ok to fsync to disk every 10 seconds and if your system crashes you lose 10 seconds of data currently in buffers?</div>
<div class="line">[Tuesday 08 February 2011] [12:36:40] &lt;stockMQ&gt;       well.. if it is better not to lose any data :)</div>
<div class="line">[Tuesday 08 February 2011] [12:36:59] &lt;stockMQ&gt;       the analysis are going to be sensitive to loss of data</div>
<div class="line">[Tuesday 08 February 2011] [12:39:19] &lt;mikko&gt; it&#8217;s not an easy engineering task in that case</div>
<div class="line">[Tuesday 08 February 2011] [12:41:09] &lt;mikko&gt; does the data need to be consistent on all consumers all the time?</div>
<div class="line">[Tuesday 08 February 2011] [12:41:49] &lt;stockMQ&gt;       I understand.. In fact to convince the management to go for DB.. i need to first implement a prototype writing it to a file and show them how the readers fair.</div>
<div class="line">[Tuesday 08 February 2011] [12:41:51] &lt;kristsk&gt;       CAP is a bitch.</div>
<div class="line">[Tuesday 08 February 2011] [12:42:05] &lt;mikko&gt; yes, i was thinking this in terms of cap theorem</div>
<div class="line">[Tuesday 08 February 2011] [12:42:23] &lt;stockMQ&gt;       yes. basically more than one instance of a tool would be accessing it</div>
<div class="line">[Tuesday 08 February 2011] [12:42:25] &lt;stockMQ&gt;       so yes</div>
<div class="line">[Tuesday 08 February 2011] [12:42:32] &lt;stockMQ&gt;       CAP? please enlighten</div>
<div class="line">[Tuesday 08 February 2011] [12:43:03] &lt;mikko&gt; <a class="reference external" href="http://en.wikipedia.org/wiki/CAP_theorem">http://en.wikipedia.org/wiki/CAP_theorem</a></div>
<div class="line">[Tuesday 08 February 2011] [12:43:41] &lt;kristsk&gt;       consistency, availability, partitioning - choose any two.</div>
<div class="line">[Tuesday 08 February 2011] [12:44:35] &lt;stockMQ&gt;       C and A</div>
<div class="line">[Tuesday 08 February 2011] [12:44:38] &lt;ianbarber&gt;     stockMQ: you might have more success in writing straight out to a file, less disk seeks</div>
<div class="line">[Tuesday 08 February 2011] [12:44:56] &lt;ianbarber&gt;     the kafka guys talk about that a bit on their site</div>
<div class="line">[Tuesday 08 February 2011] [12:45:31] &lt;mikko&gt; ianbarber: the problematic thing is that the processes reading the files are external</div>
<div class="line">[Tuesday 08 February 2011] [12:45:34] &lt;mikko&gt; unlikely with kafka</div>
<div class="line">[Tuesday 08 February 2011] [12:45:47] &lt;kristsk&gt;       kafka ?</div>
<div class="line">[Tuesday 08 February 2011] [12:45:57] &lt;mikko&gt; <a class="reference external" href="http://sna-projects.com/kafka/">http://sna-projects.com/kafka/</a></div>
<div class="line">[Tuesday 08 February 2011] [12:46:02] &lt;ianbarber&gt;     mikko: oh, i see. I was thinking write file for backanalysis, 0MQ for distribution</div>
<div class="line">[Tuesday 08 February 2011] [12:46:03] &lt;kristsk&gt;       oh.</div>
<div class="line">[Tuesday 08 February 2011] [12:46:23] &lt;mikko&gt; ianbarber: the process writing file is a subscriber as far as i understood</div>
<div class="line">[Tuesday 08 February 2011] [12:46:32] &lt;mikko&gt; and the analysis tools read the file and create reports and such</div>
<div class="line">[Tuesday 08 February 2011] [12:47:00] &lt;mikko&gt; so what you are effectively creating is a database</div>
<div class="line">[Tuesday 08 February 2011] [12:47:02] &lt;stockMQ&gt;       that is right Mikko</div>
<div class="line">[Tuesday 08 February 2011] [12:47:27] &lt;ianbarber&gt;     yeah, sounds like a database and replication</div>
<div class="line">[Tuesday 08 February 2011] [12:48:08] &lt;mikko&gt; so, without knowing the application / architecture very deeply somehow i would be inclined to say that it makes sense to investigate existing database technologies before going through all the hurdles</div>
<div class="line">[Tuesday 08 February 2011] [12:49:30] &lt;mikko&gt; maybe you have volatile database for quick access to data and push to another queue which warehouses the data</div>
<div class="line">[Tuesday 08 February 2011] [12:49:50] &lt;mikko&gt; very hard to say without knowing much about the application or the overall architecture</div>
<div class="line">[Tuesday 08 February 2011] [12:50:55] &lt;stockMQ&gt;       In a nutshell.. The exchange multicasts feed which contains the Intra day data.. I have intercepted this feed and then implemented a PUB</div>
<div class="line">[Tuesday 08 February 2011] [12:51:58] &lt;kristsk&gt;       uh, kafka is java-ish...</div>
<div class="line">[Tuesday 08 February 2011] [12:52:00] &lt;stockMQ&gt;       The SUBs need to dump this data somewhere.. which should be accessible to the Analysis tools during market hours for intra day analysis and after market hours for back analysis</div>
<div class="line">[Tuesday 08 February 2011] [12:52:47] &lt;stockMQ&gt;       After market hours, the write will not be happening..so it will be only reads.</div>
<div class="line">[Tuesday 08 February 2011] [12:52:56] &lt;stockMQ&gt;       The hurdle is during market hours</div>
<div class="line">[Tuesday 08 February 2011] [12:53:09] &lt;kristsk&gt;       umm, isnt pub/sub kinda &#8220;you weren&#8217;t here, you missed, sorry&#8221; ?</div>
<div class="line">[Tuesday 08 February 2011] [12:53:38] &lt;stockMQ&gt;       yes that is right</div>
<div class="line">[Tuesday 08 February 2011] [12:53:52] &lt;stockMQ&gt;       hence the PUB also need to keep a copy of the data</div>
<div class="line">[Tuesday 08 February 2011] [12:53:54] &lt;mikko&gt; pub/sub is like a radio broadcast (a metaphore sustrik tends to use)</div>
<div class="line">[Tuesday 08 February 2011] [12:54:05] &lt;mikko&gt; when your receiver is on you will receive the broadcast</div>
<div class="line">[Tuesday 08 February 2011] [12:54:12] &lt;stockMQ&gt;       If any SUB failed to connect on time..it should be able to borrow the missed data from PUB</div>
<div class="line">[Tuesday 08 February 2011] [12:54:50] &lt;mikko&gt; you can use identities for the subscribers</div>
<div class="line">[Tuesday 08 February 2011] [12:55:34] &lt;kristsk&gt;       how many subscribers? maye you could make a queue per &#8220;subscriber&#8221;?</div>
<div class="line">[Tuesday 08 February 2011] [12:56:24] &lt;stockMQ&gt;       Well hard to say..to start with internally it will be around 10.. but it can scale quickly</div>
<div class="line">[Tuesday 08 February 2011] [12:57:45] &lt;kristsk&gt;       umyeah, ten-folding data probably is not a good idea.</div>
<div class="line">[Tuesday 08 February 2011] [12:57:46] &lt;mikko&gt; so effetively you want separate req/rep socket on the publisher where subscribers can ask for a delta</div>
<div class="line">[Tuesday 08 February 2011] [12:58:25] &lt;mikko&gt; is subscriber is offline for let&#8217;s say 10 minutes it could ask the publisher through REQ for the last ten minutes</div>
<div class="line">[Tuesday 08 February 2011] [12:58:39] &lt;mikko&gt; to get the missing pieces</div>
<div class="line">[Tuesday 08 February 2011] [12:59:02] &lt;stockMQ&gt;       yes .. that is going to be phase 2.. for now the market hours are known to all.. so the SUBs take up the responsiblity of listening before the market opens</div>
<div class="line">[Tuesday 08 February 2011] [12:59:34] &lt;stockMQ&gt;       yes somewhat like that</div>
<div class="line">[Tuesday 08 February 2011] [12:59:39] &lt;mikko&gt; anyway, gotta commute home -&gt;</div>
<div class="line">[Tuesday 08 February 2011] [13:00:01] &lt;stockMQ&gt;       ohkk..can i catchu later?</div>
<div class="line">[Tuesday 08 February 2011] [13:04:10] &lt;sustrik&gt;       stockMQ: you should also be concerned about HD performance</div>
<div class="line">[Tuesday 08 February 2011] [13:04:28] &lt;sustrik&gt;       if the feed is fast, as it tends to be with market data</div>
<div class="line">[Tuesday 08 February 2011] [13:04:42] &lt;sustrik&gt;       you may not be able to write the data to the HD fast enough</div>
<div class="line">[Tuesday 08 February 2011] [13:05:16] &lt;stockMQ&gt;       ok</div>
<div class="line">[Tuesday 08 February 2011] [13:06:20] &lt;stockMQ&gt;       So what would be the right approach in your opinion</div>
<div class="line">[Tuesday 08 February 2011] [13:07:22] &lt;sustrik&gt;       depends on details</div>
<div class="line">[Tuesday 08 February 2011] [13:07:35] &lt;sustrik&gt;       like, are you NASDAQ?</div>
<div class="line">[Tuesday 08 February 2011] [13:07:50] &lt;sustrik&gt;       if so, a single HD won&#8217;t be enough</div>
<div class="line">[Tuesday 08 February 2011] [13:08:15] &lt;sustrik&gt;       if you are just a small trading firm getting modest amount of market data</div>
<div class="line">[Tuesday 08 February 2011] [13:08:19] &lt;sustrik&gt;       it may suffice though</div>
<div class="line">[Tuesday 08 February 2011] [13:08:34] &lt;kristsk&gt;       SSD then heh</div>
<div class="line">[Tuesday 08 February 2011] [13:08:53] &lt;sustrik&gt;       SSD is better in terms of latencies</div>
<div class="line">[Tuesday 08 February 2011] [13:09:12] &lt;sustrik&gt;       the throughput is similar to standard HD</div>
<div class="line">[Tuesday 08 February 2011] [13:09:25] &lt;sustrik&gt;       what you need is either software load balancer</div>
<div class="line">[Tuesday 08 February 2011] [13:09:30] &lt;sustrik&gt;       or a RAID</div>
<div class="line">[Tuesday 08 February 2011] [13:09:34] &lt;sustrik&gt;       SAN maybe...</div>
<div class="line">[Tuesday 08 February 2011] [13:09:44] &lt;stockMQ&gt;       ok</div>
<div class="line">[Tuesday 08 February 2011] [13:10:00] &lt;sustrik&gt;       in any case i would not try to implement a database myself</div>
<div class="line">[Tuesday 08 February 2011] [13:10:05] &lt;kristsk&gt;       netwrokish san would actually ensure no data gets lost</div>
<div class="line">[Tuesday 08 February 2011] [13:10:17] &lt;sustrik&gt;       it takes tens of manyears to do it properly</div>
<div class="line">[Tuesday 08 February 2011] [13:12:39] &lt;stockMQ&gt;       Actually the Interceptor aggregates the data and then Publishes it.. so the data received by the SUB will be lesser and slower than the actual feed received by the interceptor</div>
<div class="line">[Tuesday 08 February 2011] [13:13:09] &lt;stockMQ&gt;       Any suggestions for DBs.. open source</div>
<div class="line">[Tuesday 08 February 2011] [13:14:27] &lt;kristsk&gt;       pg ?</div>
<div class="line">[Tuesday 08 February 2011] [13:14:32] &lt;sustrik&gt;       given you need very little functionality, i would check those new nosql projects</div>
<div class="line">[Tuesday 08 February 2011] [13:14:33] &lt;kristsk&gt;       postgre</div>
<div class="line">[Tuesday 08 February 2011] [13:14:44]          * sustrik is not an expert though</div>
<div class="line">[Tuesday 08 February 2011] [13:15:01] &lt;stockMQ&gt;       like Kyoto cabinet?</div>
<div class="line">[Tuesday 08 February 2011] [13:15:32] &lt;stockMQ&gt;       or</div>
<div class="line">[Tuesday 08 February 2011] [13:15:33] &lt;stockMQ&gt;       <a class="reference external" href="http://en.wikipedia.org/wiki/Berkeley_DB">http://en.wikipedia.org/wiki/Berkeley_DB</a></div>
<div class="line">[Tuesday 08 February 2011] [13:15:39] &lt;stockMQ&gt;       any users here already?</div>
<div class="line">[Tuesday 08 February 2011] [13:20:52] &lt;stockMQ&gt;       I think Mikko had used Kyoto</div>
<div class="line">[Tuesday 08 February 2011] [13:28:17] &lt;stockMQ&gt;       so to summarize.. DB seems to be the only sane solution.. Is that right</div>
<div class="line">[Tuesday 08 February 2011] [14:03:21] &lt;stockMQ&gt;       What would be the behaviour of the sockets if it is kept idle say overnight..</div>
<div class="line">[Tuesday 08 February 2011] [14:06:23] &lt;Guthur&gt;        One would hope it is still there in the morning</div>
<div class="line">[Tuesday 08 February 2011] [15:06:41] &lt;cremes&gt;        Guthur: max_sockets in src/config.hpp</div>
<div class="line">[Tuesday 08 February 2011] [15:06:55] &lt;cremes&gt;        it defaults to 512; i usually override it to 10k for my own use</div>
<div class="line">[Tuesday 08 February 2011] [15:33:58] &lt;Guthur&gt;        cremes, cheers, I was looking in the wrong src version, pre-2.1 it was just a thread count</div>
<div class="line">[Tuesday 08 February 2011] [15:34:22] &lt;cremes&gt;        Guthur: ah, ok</div>
<div class="line">[Tuesday 08 February 2011] [15:44:45] &lt;andrewvc&gt;      any idea what to make of nbytes != -1 (mailbox.cpp:241) errors in zmq?</div>
<div class="line">[Tuesday 08 February 2011] [16:32:25] &lt;mikko&gt; neale1: there?</div>
<div class="line">[Tuesday 08 February 2011] [16:33:19] &lt;neale1&gt;        mikko: Yes</div>
<div class="line">[Tuesday 08 February 2011] [16:33:31] &lt;neale1&gt;        mikko: BTW, where r u located?</div>
<div class="line">[Tuesday 08 February 2011] [16:33:36] &lt;mikko&gt; neale1: London</div>
<div class="line">[Tuesday 08 February 2011] [16:33:46] &lt;mikko&gt; London United Kingdom, not London Canada</div>
<div class="line">[Tuesday 08 February 2011] [16:33:56] &lt;neale1&gt;        mikko: Better not mention the cricket - I&#8217;m an Australian living in the US</div>
<div class="line">[Tuesday 08 February 2011] [16:34:19] &lt;mikko&gt; I&#8217;m a Finn living in London and know nothing about cricket</div>
<div class="line">[Tuesday 08 February 2011] [16:34:20] &lt;mikko&gt; heh</div>
<div class="line">[Tuesday 08 February 2011] [16:34:23] &lt;taotetek&gt;      gah. anyone here have some pointers on how one could make a pull socket appear as a file (stringio object) using python with pyzmq?  I suppose that&#8217;s more of a python question than a zeromq question.</div>
<div class="line">[Tuesday 08 February 2011] [16:34:24] &lt;neale1&gt;        :-)</div>
<div class="line">[Tuesday 08 February 2011] [16:34:29] &lt;Guthur&gt;        Australians, sure they are always winning the Ashes</div>
<div class="line">[Tuesday 08 February 2011] [16:34:33] &lt;Guthur&gt;        ...oh wait</div>
<div class="line">[Tuesday 08 February 2011] [16:34:55] &lt;mikko&gt; so anyway, i added a possibility for SSL tunneling the Hudson slave connection to add transport layer security to the connection</div>
<div class="line">[Tuesday 08 February 2011] [16:34:58] &lt;Guthur&gt;        hehe, only teasing, I don&#8217;t much care for cricket</div>
<div class="line">[Tuesday 08 February 2011] [16:35:22] &lt;mikko&gt; currently the master-slave connection goes over plain text which is not ideal as the master executes commands on the slave</div>
<div class="line">[Tuesday 08 February 2011] [16:35:23] &lt;neale1&gt;        It&#8217;s okay, the poms have waited 20 years to get back at us</div>
<div class="line">[Tuesday 08 February 2011] [16:35:41] &lt;neale1&gt;        mikko: Do I need to do anything from my end?</div>
<div class="line">[Tuesday 08 February 2011] [16:35:57] &lt;Guthur&gt;        neale1, Yeah, sure you&#8217;re just lending it to them for a while</div>
<div class="line">[Tuesday 08 February 2011] [16:36:14] &lt;bitweiler&gt;     hey what is this uuid-dev package &amp; uuid/e2fsprogs?</div>
<div class="line">[Tuesday 08 February 2011] [16:36:20] &lt;mikko&gt; neale1: yes, unfortunately Jenkins doesn&#8217;t support SSL natively with JNLP connections so it would require setting up stunnel</div>
<div class="line">[Tuesday 08 February 2011] [16:36:43] &lt;mikko&gt; i got a ready configuration for stunnel</div>
<div class="line">[Tuesday 08 February 2011] [16:36:49] &lt;neale1&gt;        mikko: I&#8217;m not as paranoid about SSL etc on the Marist system</div>
<div class="line">[Tuesday 08 February 2011] [16:37:01] &lt;mikko&gt; neale1: ok</div>
<div class="line">[Tuesday 08 February 2011] [16:37:15] &lt;mikko&gt; neale1: i just want to provide options to people as they are contributing the slaves</div>
<div class="line">[Tuesday 08 February 2011] [16:37:45] &lt;mikko&gt; you don&#8217;t need to add TLS but it&#8217;s there if you want at some point</div>
<div class="line">[Tuesday 08 February 2011] [16:37:49] &lt;bitweiler&gt;     are those packages needed to run zeromq</div>
<div class="line">[Tuesday 08 February 2011] [16:38:09] &lt;mikko&gt; bitweiler: libuuid from efs2progs is, yes</div>
<div class="line">[Tuesday 08 February 2011] [16:38:20] &lt;bitweiler&gt;     okay</div>
<div class="line">[Tuesday 08 February 2011] [16:38:40] &lt;neale1&gt;        mikko: Understood</div>
<div class="line">[Tuesday 08 February 2011] [16:38:42] &lt;mikko&gt; hopefully rpm specs and debian packages have a dependency on that</div>
<div class="line">[Tuesday 08 February 2011] [16:39:17] &lt;bitweiler&gt;     slackware does have rpm specs or debian packages</div>
<div class="line">[Tuesday 08 February 2011] [16:40:19] &lt;sustrik&gt;       andrwvc: that&#8217;s interesting, are you able to reproduce it?</div>
<div class="line">[Tuesday 08 February 2011] [16:40:57] &lt;neale1&gt;        bitweller: libuuid keeps changing packages. In Fedora 13 it&#8217;s efs2progs but in 14 it&#8217;s in its own libuuid-devel</div>
<div class="line">[Tuesday 08 February 2011] [16:43:11] &lt;kristsk&gt;       it likes to travel.</div>
<div class="line">[Tuesday 08 February 2011] [16:43:59] &lt;neale1&gt;        It&#8217;s a pain the arse trying to keep a spec file that will work on all distributions</div>
<div class="line">[Tuesday 08 February 2011] [16:47:28] &lt;mikko&gt; anyway, time to sleep</div>
<div class="line">[Tuesday 08 February 2011] [16:47:30] &lt;mikko&gt; good night</div>
<div class="line">[Tuesday 08 February 2011] [16:48:02] &lt;neale1&gt;        &#8216;night</div>
<div class="line">[Tuesday 08 February 2011] [16:49:22] &lt;bitweiler&gt;     lucky me slackware has it pre-installed</div>
<div class="line">[Tuesday 08 February 2011] [16:50:20] &lt;Guthur&gt;        I&#8217;m making devices with a start and stop, and the way I was going to do it was have poll that would timeout every interval, what would be the opinion of the appropriate balance of performance and response?</div>
<div class="line">[Tuesday 08 February 2011] [16:50:39] &lt;Guthur&gt;        I am currently using a 750ms polling interval</div>
<div class="line">[Tuesday 08 February 2011] [16:50:55] &lt;Guthur&gt;        so at worse case it would take 750ms to stop</div>
<div class="line">[Tuesday 08 February 2011] [16:58:21] &lt;sustrik&gt;       what do you do on the timeout?</div>
<div class="line">[Tuesday 08 February 2011] [17:03:29] &lt;Guthur&gt;        just check if the stop flag has been set</div>
<div class="line">[Tuesday 08 February 2011] [17:03:41] &lt;Guthur&gt;        then go start polling again</div>
<div class="line">[Tuesday 08 February 2011] [17:05:10] &lt;Guthur&gt;        I have a feeling it may actually be necessary when implementing the device in a managed code environment</div>
<div class="line">[Tuesday 08 February 2011] [17:06:06] &lt;sustrik&gt;       who sets the stop flag?</div>
<div class="line">[Tuesday 08 February 2011] [17:06:28] &lt;Guthur&gt;        either the user by calling Stop(), or the Dispose method</div>
<div class="line">[Tuesday 08 February 2011] [17:06:50] &lt;Guthur&gt;        the device is nonblocking</div>
<div class="line">[Tuesday 08 February 2011] [17:07:07] &lt;sustrik&gt;       who calls the Stop() methos?</div>
<div class="line">[Tuesday 08 February 2011] [17:07:10] &lt;sustrik&gt;       method*</div>
<div class="line">[Tuesday 08 February 2011] [17:07:14] &lt;sustrik&gt;       main thread?</div>
<div class="line">[Tuesday 08 February 2011] [17:07:26] &lt;sustrik&gt;       a thread different to the device thread?</div>
<div class="line">[Tuesday 08 February 2011] [17:07:34] &lt;Guthur&gt;        sustrik, you&#8217;ve just given me a bad threading feeling, hehe</div>
<div class="line">[Tuesday 08 February 2011] [17:07:46] &lt;Guthur&gt;        I have a feeling I am doing something bad</div>
<div class="line">[Tuesday 08 February 2011] [17:08:00] &lt;sustrik&gt;       well, if it&#8217;s invoked from another thread</div>
<div class="line">[Tuesday 08 February 2011] [17:08:08] &lt;sustrik&gt;       you have to synchronise it using a mutex</div>
<div class="line">[Tuesday 08 February 2011] [17:08:11] &lt;sustrik&gt;       or something</div>
<div class="line">[Tuesday 08 February 2011] [17:08:19] &lt;sustrik&gt;       which will kill the performance</div>
<div class="line">[Tuesday 08 February 2011] [17:08:40] &lt;sustrik&gt;       so I would suggest simply calling zmq_term() from the main thread</div>
<div class="line">[Tuesday 08 February 2011] [17:08:46] &lt;Guthur&gt;        I have a a second flag that actually indicates when it has stopped</div>
<div class="line">[Tuesday 08 February 2011] [17:09:03] &lt;sustrik&gt;       which will cause next call to libzmq in the device to return ETERM error</div>
<div class="line">[Tuesday 08 February 2011] [17:09:20] &lt;sustrik&gt;       you can exit the device loop then</div>
<div class="line">[Tuesday 08 February 2011] [17:09:43] &lt;Guthur&gt;        I never considered that option</div>
<div class="line">[Tuesday 08 February 2011] [17:10:02] &lt;sustrik&gt;       ETERM was introduced specifically for this scenario</div>
<div class="line">[Tuesday 08 February 2011] [17:10:09] &lt;sustrik&gt;       shutting down multithreaded programs</div>
<div class="line">[Tuesday 08 February 2011] [17:10:38] &lt;Guthur&gt;        oh, this could make the code a bit nicer</div>
<div class="line">[Tuesday 08 February 2011] [17:10:49] &lt;sustrik&gt;       a much more performant</div>
<div class="line">[Tuesday 08 February 2011] [17:11:06] &lt;sustrik&gt;       as you can avoid mutex that way</div>
<div class="line">[Tuesday 08 February 2011] [17:37:33] &lt;tiglionabbit&gt;  I&#8217;m having a bit of trouble wading through the pretentious documentation.  Is there a simple multiple-chatrooms example for zeromq?</div>
<div class="line">[Tuesday 08 February 2011] [17:38:22] &lt;tiglionabbit&gt;  like, if I have a variety of incoming long-polling connections each listening for different criteria</div>
<div class="line">[Tuesday 08 February 2011] [17:43:20] &lt;Steve-o&gt;       if someone is bored I have plenty of x86 atomic ops instructions to convert from GCC format to SunPro format, already done MSVC :D</div>
<div class="line">[Tuesday 08 February 2011] [17:45:48] &lt;Steve-o&gt;       ending up almost two screen fulls of code to simply perform number++, lol</div>
<div class="line">[Tuesday 08 February 2011] [18:01:34] &lt;Guthur&gt;        tiglionabbit, do you mean the Guide?</div>
<div class="line">[Tuesday 08 February 2011] [18:01:45] &lt;tiglionabbit&gt;  yes</div>
<div class="line">[Tuesday 08 February 2011] [18:02:40] &lt;Guthur&gt;        I actually thought it was quite reasonable, you could just jump straight to code examples from the guide</div>
<div class="line">[Tuesday 08 February 2011] [18:02:56] &lt;Guthur&gt;        and then refer back to the guide if you get confused</div>
<div class="line">[Tuesday 08 February 2011] [18:03:51] &lt;Guthur&gt;        there is so many patterns possible with 0MQ that it would be impossible to convey properly with just one code example</div>
<div class="line">[Tuesday 08 February 2011] [18:03:53] &lt;Guthur&gt;        IMO</div>
<div class="line">[Tuesday 08 February 2011] [18:07:20] &lt;Guthur&gt;        is there a function that returns the ZMQ_HAUSNUMERO</div>
<div class="line">[Tuesday 08 February 2011] [18:11:10] &lt;kristsk&gt;       ZMQ_NOTAMUSED</div>
<div class="line">[Tuesday 08 February 2011] [18:11:14] &lt;kristsk&gt;       sorry.</div>
<div class="line">[Tuesday 08 February 2011] [18:14:27] &lt;bitweiler&gt;     does zeromq include the mongrel2 server?</div>
<div class="line">[Tuesday 08 February 2011] [18:15:54] &lt;bitweiler&gt;     just trying to see if I need to install that as well</div>
<div class="line">[Tuesday 08 February 2011] [18:21:21] &lt;Steve-o&gt;       bitweiler: no, the core zeromq package is just the sockets, not even the bindings any more</div>
<div class="line">[Tuesday 08 February 2011] [18:23:33] &lt;bitweiler&gt;     oh, okay</div>
<div class="line">[Tuesday 08 February 2011] [18:41:39] &lt;bitweiler&gt;     does zeromq have any other documentation besides the man pages?</div>
<div class="line">[Tuesday 08 February 2011] [18:42:03] &lt;bitweiler&gt;     I ask cause I trying to make a package for slackware</div>
<div class="line">[Tuesday 08 February 2011] [18:44:06] &lt;Guthur&gt;        bitweiler, I think the guide is the only other doc, <a class="reference external" href="http://zguide.zeromq.org/chapter:all">http://zguide.zeromq.org/chapter:all</a></div>
<div class="line">[Tuesday 08 February 2011] [18:44:36] &lt;Guthur&gt;        When connecting a Push to a Pull using TCP, does one need a delay before sending?</div>
<div class="line">[Tuesday 08 February 2011] [18:45:37] &lt;bitweiler&gt;     Guthur: thanks</div>
<div class="line">[Tuesday 08 February 2011] [18:46:33] &lt;bitweiler&gt;     things look real promising for this project, i my eyes</div>
<div class="line">[Tuesday 08 February 2011] [18:47:43] &lt;Guthur&gt;        I think it&#8217;s pretty cool, the guys have produced some cool tech</div>
<div class="line">[Tuesday 08 February 2011] [18:49:08] &lt;bitweiler&gt;     hmm, hopeful everything works smoothly with scheme&#8217;s c-ffi</div>
<div class="line">[Tuesday 08 February 2011] [18:49:24] &lt;Guthur&gt;        I think there is a racket binding</div>
<div class="line">[Tuesday 08 February 2011] [18:49:41] &lt;bitweiler&gt;     there&#8217;s one for chicken as well</div>
<div class="line">[Tuesday 08 February 2011] [18:49:44] &lt;Guthur&gt;        and someone was working on one for that chicken scheme i think</div>
<div class="line">[Tuesday 08 February 2011] [18:49:53] &lt;Guthur&gt;        there is also a Common Lisp one</div>
<div class="line">[Tuesday 08 February 2011] [18:49:53]          * bitweiler nods</div>
<div class="line">[Tuesday 08 February 2011] [18:50:10] &lt;bitweiler&gt;     I aim to test drive the chicken binding</div>
<div class="line">[Tuesday 08 February 2011] [18:51:29] &lt;Guthur&gt;        On my issue...I seem to be having an issue with REQ&lt;-&gt;XREP&lt;-PULL&lt;-PUSH, using TCP</div>
<div class="line">[Tuesday 08 February 2011] [18:52:01] &lt;Guthur&gt;        it was working OK with inproc, now I have place a delay when connecting at the PUSH end</div>
<div class="line">[Tuesday 08 February 2011] [19:00:40] &lt;Guthur&gt;        nvm, something else is wrong actually</div>
<div class="line">[Tuesday 08 February 2011] [19:25:11] &lt;Guthur&gt;        ok I notice some weirdness, is there an upper limit to the timeout for Polling?</div>
<div class="line">[Tuesday 08 February 2011] [19:27:28] &lt;Guthur&gt;        around 500000 it stops working for me</div>
<div class="line">[Tuesday 08 February 2011] [19:33:25] &lt;Guthur&gt;        oh the problem disappears in 2.1</div>
<div class="line">[Tuesday 08 February 2011] [21:20:48] &lt;bitweiler&gt;     is the guide the best introduction to zeromq?</div>
<div class="line">[Tuesday 08 February 2011] [22:20:55] &lt;bitweiler&gt;     are context&#8217;s numbers?</div>
<div class="line">[Tuesday 08 February 2011] [22:29:19] &lt;bitweiler&gt;     DerGuteMoritz: how you make contexts with zmq?</div>
<div class="line">[Wednesday 09 February 2011] [01:25:06] &lt;gambi&gt;       Can I connect multiple taskers to multiple workers with out a broker inbetween if I don&#8217;t need a reply from a worker? Basically a FIFO that gets filled by the taskers and emptied by the workers.</div>
<div class="line">[Wednesday 09 February 2011] [01:25:40] &lt;ianbarber&gt;   not without them all knowing about each other</div>
<div class="line">[Wednesday 09 February 2011] [01:26:13] &lt;ianbarber&gt;   you could have each client connect to each worker with PUSH/PULL sockets</div>
<div class="line">[Wednesday 09 February 2011] [01:26:45] &lt;gambi&gt;       yeah, i&#8217;ve started with that ... but realized that PUSH blocks the socket</div>
<div class="line">[Wednesday 09 February 2011] [01:27:09] &lt;ianbarber&gt;   i would look at using a FORWARDER device, and have that be the stable point in the architecture</div>
<div class="line">[Wednesday 09 February 2011] [01:27:35] &lt;gambi&gt;       and the single point of failure :(</div>
<div class="line">[Wednesday 09 February 2011] [01:27:49] &lt;ianbarber&gt;   that&#8217;s a pretty easy fix, have a couple of them (or more!)</div>
<div class="line">[Wednesday 09 February 2011] [01:27:55] &lt;gambi&gt;       ok</div>
<div class="line">[Wednesday 09 February 2011] [01:28:39] &lt;gambi&gt;       so i do (many tasker) - device forwarder - (many worker) kinda thing?</div>
<div class="line">[Wednesday 09 February 2011] [01:29:29] &lt;ianbarber&gt;   yeah</div>
<div class="line">[Wednesday 09 February 2011] [01:30:38] &lt;gambi&gt;       if i don&#8217;t need an reply from the worker and have to have the fastest possible way to talk to the device which pattern socket type should i use? tasker - (PUB/SUB) - dev forwarder (with stream + callback) - PUSH/PULL - worker?</div>
<div class="line">[Wednesday 09 February 2011] [01:31:35] &lt;ianbarber&gt;   i would say PUSH PULL in both parts. if you have pub/sub and two forwarders, they&#8217;ll both get the message, and you&#8217;ll likely end up with the work done twice</div>
<div class="line">[Wednesday 09 February 2011] [01:32:01] &lt;ianbarber&gt;   if you don&#8217;t want to get stuck in a send() you could use ZMQ_NOBLOCk and catch when it can&#8217;t send</div>
<div class="line">[Wednesday 09 February 2011] [01:33:50] &lt;gambi&gt;       how can I bind multiple PUSH sockets? I thought I can only PUSH from one tasker?</div>
<div class="line">[Wednesday 09 February 2011] [01:34:18] &lt;ianbarber&gt;   a single pull socket can have many pushes connected to it</div>
<div class="line">[Wednesday 09 February 2011] [01:34:25] &lt;gambi&gt;       ah</div>
<div class="line">[Wednesday 09 February 2011] [01:34:30] &lt;ianbarber&gt;   and vice versa</div>
<div class="line">[Wednesday 09 February 2011] [01:34:38] &lt;gambi&gt;       didn&#8217;t know that</div>
<div class="line">[Wednesday 09 February 2011] [01:34:38] &lt;ianbarber&gt;   basically your forwarder would bind the pull</div>
<div class="line">[Wednesday 09 February 2011] [01:35:03] &lt;ianbarber&gt;   so lets say you had a forwarder on <a class="reference external" href="tcp://129.168.0.1:5566">tcp://129.168.0.1:5566</a> and <a class="reference external" href="tcp://129.168.0.2:5566">tcp://129.168.0.2:5566</a></div>
<div class="line">[Wednesday 09 February 2011] [01:35:17] &lt;ianbarber&gt;   you would then connect() both of those on each of your workers</div>
<div class="line">[Wednesday 09 February 2011] [01:35:23] &lt;ianbarber&gt;   sorry, taskers</div>
<div class="line">[Wednesday 09 February 2011] [01:35:52] &lt;gambi&gt;       ok</div>
<div class="line">[Wednesday 09 February 2011] [01:35:52] &lt;ianbarber&gt;   they would fire tasks at each alternatively, and on the other end the pull would fair queue between all the connected incoming</div>
<div class="line">[Wednesday 09 February 2011] [01:40:29] &lt;ianbarber&gt;   you should only need to bind() on the forwarder side</div>
<div class="line">[Wednesday 09 February 2011] [01:40:33] &lt;ianbarber&gt;   connect on all the other sides</div>
<div class="line">[Wednesday 09 February 2011] [01:40:42] &lt;gambi&gt;       ah</div>
<div class="line">[Wednesday 09 February 2011] [01:40:50] &lt;gambi&gt;       omg. lol ... sorry. yes of course</div>
<div class="line">[Wednesday 09 February 2011] [01:40:56] &lt;gambi&gt;       i&#8217;m new to zeromq</div>
<div class="line">[Wednesday 09 February 2011] [01:41:06] &lt;ianbarber&gt;   :)</div>
<div class="line">[Wednesday 09 February 2011] [01:42:12] &lt;gambi&gt;       ianbarber: thx for your help. let me try and write that out. :)</div>
<div class="line">[Wednesday 09 February 2011] [01:42:27] &lt;ianbarber&gt;   no worries</div>
<div class="line">[Wednesday 09 February 2011] [03:11:26] &lt;<a href="#id81"><span class="problematic" id="id82">andrewvc_</span></a>&gt;   I&#8217;ve been getting some weird zmq errs</div>
<div class="line">[Wednesday 09 February 2011] [03:11:29] &lt;<a href="#id83"><span class="problematic" id="id84">andrewvc_</span></a>&gt;   I see at some point</div>
<div class="line">[Wednesday 09 February 2011] [03:11:36] &lt;<a href="#id85"><span class="problematic" id="id86">andrewvc_</span></a>&gt;   [pid 24407] pipe([14, 15])              = 0</div>
<div class="line">[Wednesday 09 February 2011] [03:12:32] &lt;<a href="#id87"><span class="problematic" id="id88">andrewvc_</span></a>&gt;   actually nm</div>
<div class="line">[Wednesday 09 February 2011] [03:35:43] &lt;skysbird2&gt;   hi, buddies, lovely buddies</div>
<div class="line">[Wednesday 09 February 2011] [03:35:49] &lt;skysbird2&gt;   i want to know</div>
<div class="line">[Wednesday 09 February 2011] [03:36:02] &lt;skysbird2&gt;   why i cannot find the zmq_server file after i make install</div>
<div class="line">[Wednesday 09 February 2011] [03:36:16] &lt;skysbird2&gt;   i downloaded from www.zeromq.org</div>
<div class="line">[Wednesday 09 February 2011] [03:36:28] &lt;skysbird2&gt;   zeromq-2.0.10.tar.gz for POSIX systems</div>
<div class="line">[Wednesday 09 February 2011] [03:36:32] &lt;skysbird2&gt;   this one</div>
<div class="line">[Wednesday 09 February 2011] [03:38:39] &lt;guido_g&gt;     migt be because there is no such file</div>
<div class="line">[Wednesday 09 February 2011] [03:38:42] &lt;guido_g&gt;     <a href="#id7"><span class="problematic" id="id8">*</span></a>might</div>
<div class="line">[Wednesday 09 February 2011] [03:45:30] &lt;skysbird2&gt;   guido_g,but i think this file zmq_server is the kernel start up file of zeromq</div>
<div class="line">[Wednesday 09 February 2011] [03:48:09] &lt;guido_g&gt;     no it&#8217;s not</div>
<div class="line">[Wednesday 09 February 2011] [03:48:20] &lt;guido_g&gt;     read the guide and the appropriate docs</div>
<div class="line">[Wednesday 09 February 2011] [04:00:39] &lt;skysbird2&gt;   guido_g, i just cannot find appropriate docs, can you recommend one for me?</div>
<div class="line">[Wednesday 09 February 2011] [04:08:56] &lt;ianbarber&gt;   skysbird2: try the guide <a class="reference external" href="http://zguide.zeromq.org/">http://zguide.zeromq.org/</a></div>
<div class="line">[Wednesday 09 February 2011] [04:09:14] &lt;ianbarber&gt;   zeromq doesn&#8217;t have a daemon, it&#8217;s a library</div>
<div class="line">[Wednesday 09 February 2011] [04:12:10] &lt;skysbird2&gt;   ianbarber,oh ,thank you</div>
<div class="line">[Wednesday 09 February 2011] [04:12:27] &lt;skysbird2&gt;   i &#8216;ve seen some document said it has zmq_server....</div>
<div class="line">[Wednesday 09 February 2011] [04:12:43] &lt;skysbird2&gt;   <a class="reference external" href="http://www.zeromq.org/code:examples-exchange#toc3">http://www.zeromq.org/code:examples-exchange#toc3</a></div>
<div class="line">[Wednesday 09 February 2011] [04:12:45] &lt;skysbird2&gt;   like this</div>
<div class="line">[Wednesday 09 February 2011] [04:13:02] &lt;guido_g&gt;     outdated</div>
<div class="line">[Wednesday 09 February 2011] [04:13:25] &lt;skysbird2&gt;   oh</div>
<div class="line">[Wednesday 09 February 2011] [04:13:31] &lt;ianbarber&gt;   the hint is at the top &#8220;WARNING: This text is deprecated and refers to an old version of MQ. It remains here for historical interest. DO NOT USE THIS TO LEARN MQ.&#8221;</div>
<div class="line">[Wednesday 09 February 2011] [04:15:40] &lt;skysbird2&gt;   oh</div>
<div class="line">[Wednesday 09 February 2011] [04:16:22] &lt;skysbird2&gt;   so is there some amq middleware like OpenAMQ build on zeroMQ?</div>
<div class="line">[Wednesday 09 February 2011] [04:18:11] &lt;ianbarber&gt;   i would really take a skim through the guide - 0MQ uses a different set of ideas</div>
<div class="line">[Wednesday 09 February 2011] [04:19:07] &lt;ianbarber&gt;   as an answer though - there are devices, which are similar, but intetionally simpler, and it&#8217;s also a lot easier to write your own, so the idea is that you will have several small, specific devices in an architecture rather than one big broker</div>
<div class="line">[Wednesday 09 February 2011] [04:20:00] &lt;skysbird2&gt;   ok i know</div>
<div class="line">[Wednesday 09 February 2011] [04:20:04] &lt;skysbird2&gt;   just distribution</div>
<div class="line">[Wednesday 09 February 2011] [04:20:17] &lt;skysbird2&gt;   because i heard that opemamq will be unsupported</div>
<div class="line">[Wednesday 09 February 2011] [04:20:21] &lt;skysbird2&gt;   by 2011</div>
<div class="line">[Wednesday 09 February 2011] [04:20:39] &lt;skysbird2&gt;   so i just want to find a middleware to replace OpenAMQ</div>
<div class="line">[Wednesday 09 February 2011] [04:21:47] &lt;guido_g&gt;     <a class="reference external" href="http://www.zeromq.org/whitepapers:brokerless">http://www.zeromq.org/whitepapers:brokerless</a>  &lt;- for starters</div>
<div class="line">[Wednesday 09 February 2011] [04:22:48] &lt;ianbarber&gt;   skysbird2: I would say that take a look at <a class="reference external" href="http://www.zeromq.org/docs:welcome-from-amqp">http://www.zeromq.org/docs:welcome-from-amqp</a> to work out whether 0MQ is right for you - if not then take a look at other AMQP systems like Rabbit I guess.</div>
<div class="line">[Wednesday 09 February 2011] [04:24:52] &lt;mikko&gt;       ianbarber: you got up early</div>
<div class="line">[Wednesday 09 February 2011] [04:34:30] &lt;ianbarber&gt;   mikko: had a deploy at 6 this morning</div>
<div class="line">[Wednesday 09 February 2011] [09:00:33] &lt;Guthur&gt;      Are shareable (between threads) sockets being worked on</div>
<div class="line">[Wednesday 09 February 2011] [09:00:38] &lt;Guthur&gt;      it would be a nice to have</div>
<div class="line">[Wednesday 09 February 2011] [09:01:14] &lt;mikko&gt;       no, i dont think they are</div>
<div class="line">[Wednesday 09 February 2011] [09:01:26] &lt;mikko&gt;       there should be no need for such a thing</div>
<div class="line">[Wednesday 09 February 2011] [09:01:36] &lt;mikko&gt;       if you share you need to lock</div>
<div class="line">[Wednesday 09 February 2011] [09:02:21] &lt;Guthur&gt;      yeah in general I suppose there isn&#8217;t much need</div>
<div class="line">[Wednesday 09 February 2011] [09:05:32] &lt;Guthur&gt;      curious more than anything</div>
<div class="line">[Wednesday 09 February 2011] [10:06:52] &lt;CIA-21&gt;      zeromq2: 03Martin Sustrik 07master * r80ac398 10/ (14 files in 2 dirs):</div>
<div class="line">[Wednesday 09 February 2011] [10:06:52] &lt;CIA-21&gt;      zeromq2: Initial implementation of reaper thread.</div>
<div class="line">[Wednesday 09 February 2011] [10:06:52] &lt;CIA-21&gt;      zeromq2: Reaper thread destroys the socket asynchronously.</div>
<div class="line">[Wednesday 09 February 2011] [10:06:52] &lt;CIA-21&gt;      zeromq2: zmq_term() can be interrupted by a signal (EINTR).</div>
<div class="line">[Wednesday 09 February 2011] [10:06:52] &lt;CIA-21&gt;      zeromq2: zmq_socket() will return ETERM after zmq_term() was called.</div>
<div class="line">[Wednesday 09 February 2011] [10:06:53] &lt;CIA-21&gt;      zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/gQddej">http://bit.ly/gQddej</a></div>
<div class="line">[Wednesday 09 February 2011] [10:16:57] &lt;cremes&gt;      ooh, a reaper thread! just what we need to get rid of the zmq_term blocking behavior</div>
<div class="line">[Wednesday 09 February 2011] [10:17:04] &lt;cremes&gt;      glad to see some progress on that piece</div>
<div class="line">[Wednesday 09 February 2011] [10:20:45] &lt;sustrik&gt;     cremes: give it a try please</div>
<div class="line">[Wednesday 09 February 2011] [10:20:54] &lt;sustrik&gt;     does it solve the Ctrl+C problem?</div>
<div class="line">[Wednesday 09 February 2011] [10:21:35] &lt;cremes&gt;      sustrik: i&#8217;ll try it out in a few hours; i&#8217;m in the middle of a refactoring and don&#8217;t want to interrupt it just yet</div>
<div class="line">[Wednesday 09 February 2011] [10:21:45] &lt;cremes&gt;      i&#8217;ll post my results here</div>
<div class="line">[Wednesday 09 February 2011] [10:22:17] &lt;sustrik&gt;     great, thanks</div>
<div class="line">[Wednesday 09 February 2011] [10:52:10] &lt;<a href="#id89"><span class="problematic" id="id90">andrewvc_</span></a>&gt;   cremes: around?</div>
<div class="line">[Wednesday 09 February 2011] [10:53:03] &lt;cremes&gt;      <a href="#id91"><span class="problematic" id="id92">andrewvc_</span></a>: yep, but a tad busy... got something quick?</div>
<div class="line">[Wednesday 09 February 2011] [10:53:21] &lt;<a href="#id93"><span class="problematic" id="id94">andrewvc_</span></a>&gt;   mmm, just wondering if you&#8217;ve seen nbytes = -1 errors in ffi-rzmq before</div>
<div class="line">[Wednesday 09 February 2011] [10:53:26] &lt;<a href="#id95"><span class="problematic" id="id96">andrewvc_</span></a>&gt;   err != -1  I mean</div>
<div class="line">[Wednesday 09 February 2011] [10:53:40] &lt;<a href="#id97"><span class="problematic" id="id98">andrewvc_</span></a>&gt;   followed by libzmq quitting</div>
<div class="line">[Wednesday 09 February 2011] [10:53:57] &lt;cremes&gt;      yes, i&#8217;ve seen that assertion before...</div>
<div class="line">[Wednesday 09 February 2011] [10:54:10] &lt;cremes&gt;      um... are you on latest master or are you using 2.1 release?</div>
<div class="line">[Wednesday 09 February 2011] [10:54:14] &lt;<a href="#id99"><span class="problematic" id="id100">andrewvc_</span></a>&gt;   master</div>
<div class="line">[Wednesday 09 February 2011] [10:54:28] &lt;<a href="#id101"><span class="problematic" id="id102">andrewvc_</span></a>&gt;   2.1 release doesn&#8217;t seem to work with FDs for me</div>
<div class="line">[Wednesday 09 February 2011] [10:54:57] &lt;cremes&gt;      interesting... i used to see that assertion on 2.1 release but i upgraded to master about a month ago and forgot about it</div>
<div class="line">[Wednesday 09 February 2011] [10:55:14] &lt;cremes&gt;      is it reproducible or is it a heisenbug?</div>
<div class="line">[Wednesday 09 February 2011] [10:55:32] &lt;cremes&gt;      also, are you on osx or linux?</div>
<div class="line">[Wednesday 09 February 2011] [10:55:36] &lt;<a href="#id103"><span class="problematic" id="id104">andrewvc_</span></a>&gt;   linux</div>
<div class="line">[Wednesday 09 February 2011] [10:55:42] &lt;<a href="#id105"><span class="problematic" id="id106">andrewvc_</span></a>&gt;   totally reproduces</div>
<div class="line">[Wednesday 09 February 2011] [10:55:48] &lt;<a href="#id107"><span class="problematic" id="id108">andrewvc_</span></a>&gt;   can get it in this one exchange of messages</div>
<div class="line">[Wednesday 09 February 2011] [10:55:51] &lt;<a href="#id109"><span class="problematic" id="id110">andrewvc_</span></a>&gt;   always the same message</div>
<div class="line">[Wednesday 09 February 2011] [10:56:01] &lt;<a href="#id111"><span class="problematic" id="id112">andrewvc_</span></a>&gt;   I tried changing the message content, no diff</div>
<div class="line">[Wednesday 09 February 2011] [10:56:57] &lt;cremes&gt;      put up a gist and i&#8217;ll try to look at it later; i need to get back to work</div>
<div class="line">[Wednesday 09 February 2011] [10:57:27] &lt;<a href="#id113"><span class="problematic" id="id114">andrewvc_</span></a>&gt;   cool, can do</div>
<div class="line">[Wednesday 09 February 2011] [11:09:38] &lt;<a href="#id115"><span class="problematic" id="id116">andrewvc_</span></a>&gt;   sustrik around?</div>
<div class="line">[Wednesday 09 February 2011] [11:20:50] &lt;Guthur&gt;      When the it says: Never initialize the same zmq_msg_t twice.</div>
<div class="line">[Wednesday 09 February 2011] [11:20:58] &lt;Guthur&gt;      does that mean reuse the msg</div>
<div class="line">[Wednesday 09 February 2011] [11:21:49] &lt;Guthur&gt;      or does it mean close and then init</div>
<div class="line">[Wednesday 09 February 2011] [11:24:05] &lt;pieterh&gt;     Guthur, close followed by init is ok afaics</div>
<div class="line">[Wednesday 09 February 2011] [11:24:16] &lt;mikko&gt;       it&#8217;s ok</div>
<div class="line">[Wednesday 09 February 2011] [11:24:26] &lt;mikko&gt;       initing twice without close will leak</div>
<div class="line">[Wednesday 09 February 2011] [11:24:27] &lt;pieterh&gt;     Where does it say not to init twice?</div>
<div class="line">[Wednesday 09 February 2011] [11:24:49] &lt;Guthur&gt;      pieterh: <a class="reference external" href="http://api.zeromq.org/zmq_msg_init.html">http://api.zeromq.org/zmq_msg_init.html</a></div>
<div class="line">[Wednesday 09 February 2011] [11:24:53] &lt;Guthur&gt;      second caution</div>
<div class="line">[Wednesday 09 February 2011] [11:25:30] &lt;pieterh&gt;     Guthur, ah, it&#8217;s wrong, afaik, you might want to signal that to Mato or send a patch</div>
<div class="line">[Wednesday 09 February 2011] [11:26:18] &lt;Guthur&gt;      pieterh: which part is wrong?</div>
<div class="line">[Wednesday 09 February 2011] [11:26:38] &lt;Guthur&gt;      assume it is fine to pass a msg directly from a recv to a send</div>
<div class="line">[Wednesday 09 February 2011] [11:26:52] &lt;Guthur&gt;      I assume*</div>
<div class="line">[Wednesday 09 February 2011] [11:27:26] &lt;andrewvc&gt;    pieterh, if you can spare a minute. Any idea what would cause a bad file descriptor error followed by nbytes != -1 error in ZMQ</div>
<div class="line">[Wednesday 09 February 2011] [11:27:34] &lt;pieterh&gt;     Guthur, it should probably say, &#8220;Never initialize the same zmq_msg_t twice without first doing zmq_msg_close.&#8221;</div>
<div class="line">[Wednesday 09 February 2011] [11:27:55] &lt;pieterh&gt;     andrewvc, did you check strerror?</div>
<div class="line">[Wednesday 09 February 2011] [11:28:47] &lt;pieterh&gt;     andrewvc, uhm, I guess &#8220;bad file descriptor&#8221; is the error string?</div>
<div class="line">[Wednesday 09 February 2011] [11:28:52] &lt;andrewvc&gt;    yeah</div>
<div class="line">[Wednesday 09 February 2011] [11:28:57] &lt;andrewvc&gt;    I have that, followed by</div>
<div class="line">[Wednesday 09 February 2011] [11:28:58] &lt;pieterh&gt;     what&#8217;s the context where you get the error?</div>
<div class="line">[Wednesday 09 February 2011] [11:29:07] &lt;andrewvc&gt;    sure, it&#8217;s right after a send operation</div>
<div class="line">[Wednesday 09 February 2011] [11:29:15] &lt;Guthur&gt;      pieterh: ah ok, I&#8217;ll mention it to mato, then</div>
<div class="line">[Wednesday 09 February 2011] [11:29:26] &lt;andrewvc&gt;    I get bad file descriptor, then it complains about mailbox.cpp:241 nbytes != -1</div>
<div class="line">[Wednesday 09 February 2011] [11:29:31] &lt;andrewvc&gt;    on the second line</div>
<div class="line">[Wednesday 09 February 2011] [11:29:31] &lt;Guthur&gt;      or maybe send a patch</div>
<div class="line">[Wednesday 09 February 2011] [11:29:37] &lt;andrewvc&gt;    I straced it as well</div>
<div class="line">[Wednesday 09 February 2011] [11:29:51] &lt;pieterh&gt;     andrewvc: possibly a bad bind or connect?</div>
<div class="line">[Wednesday 09 February 2011] [11:30:01] &lt;pieterh&gt;     don&#8217;t really know these internals, sorry</div>
<div class="line">[Wednesday 09 February 2011] [11:30:05] &lt;andrewvc&gt;    well, the sockets are all local, on the loopback.</div>
<div class="line">[Wednesday 09 February 2011] [11:30:15] &lt;andrewvc&gt;    no worries, thanks though</div>
<div class="line">[Wednesday 09 February 2011] [11:30:18] &lt;pieterh&gt;     try replacing with ipc instead of tcp</div>
<div class="line">[Wednesday 09 February 2011] [11:30:28] &lt;pieterh&gt;     just to see what happens</div>
<div class="line">[Wednesday 09 February 2011] [11:30:38] &lt;andrewvc&gt;    yeah tried that</div>
<div class="line">[Wednesday 09 February 2011] [11:30:41] &lt;pieterh&gt;     same error?</div>
<div class="line">[Wednesday 09 February 2011] [11:30:47] &lt;andrewvc&gt;    yeah</div>
<div class="line">[Wednesday 09 February 2011] [11:31:06] &lt;andrewvc&gt;    actually, I should confirm that I have a mix of sockets, maybe I got the wrong one</div>
<div class="line">[Wednesday 09 February 2011] [11:31:34] &lt;pieterh&gt;     sounds something like that</div>
<div class="line">[Wednesday 09 February 2011] [11:32:25] &lt;pieterh&gt;     windows or Linux?</div>
<div class="line">[Wednesday 09 February 2011] [11:32:37] &lt;andrewvc&gt;    linux</div>
<div class="line">[Wednesday 09 February 2011] [11:33:07] &lt;pieterh&gt;     this is where we summon sustrik</div>
<div class="line">[Wednesday 09 February 2011] [11:33:46] &lt;andrewvc&gt;    hehe, that&#8217;d be awesome, I&#8217;ve been on the trail of this forever</div>
<div class="line">[Wednesday 09 February 2011] [11:33:52] &lt;pieterh&gt;     offhand I&#8217;d say you&#8217;re using a socket that failed to bind/connect</div>
<div class="line">[Wednesday 09 February 2011] [11:34:05] &lt;andrewvc&gt;    well, the thing is, the app works in a stable manner for a while</div>
<div class="line">[Wednesday 09 February 2011] [11:34:08] &lt;andrewvc&gt;    then it just stops</div>
<div class="line">[Wednesday 09 February 2011] [11:34:15] &lt;andrewvc&gt;    but it&#8217;s reproducible</div>
<div class="line">[Wednesday 09 February 2011] [11:34:25] &lt;andrewvc&gt;    consistently</div>
<div class="line">[Wednesday 09 February 2011] [11:34:29] &lt;pieterh&gt;     are you using assertions on all <a href="#id117"><span class="problematic" id="id118">zmq_</span></a> calls?</div>
<div class="line">[Wednesday 09 February 2011] [11:35:30] &lt;pieterh&gt;     clearly the socket that zmq is trying to read from is invalid</div>
<div class="line">[Wednesday 09 February 2011] [11:35:45] &lt;andrewvc&gt;    hmmm, lemme see, I&#8217;m using the ruby zeromq library</div>
<div class="line">[Wednesday 09 February 2011] [11:35:51] &lt;andrewvc&gt;    I&#8217;ve got the source open...</div>
<div class="line">[Wednesday 09 February 2011] [11:35:55] &lt;bitweiler&gt;   anyone know of any docs that gives examples of how to use chicken&#8217;s zeromq bindings?</div>
<div class="line">[Wednesday 09 February 2011] [11:37:59] &lt;pieterh&gt;     bitweiler, the only docs I know of are at <a class="reference external" href="http://wiki.call-cc.org/eggref/4/zmq?action=show">http://wiki.call-cc.org/eggref/4/zmq?action=show</a></div>
<div class="line">[Wednesday 09 February 2011] [11:38:30] &lt;bitweiler&gt;   thanks I have those, which don&#8217;t help much</div>
<div class="line">[Wednesday 09 February 2011] [11:39:06] &lt;pieterh&gt;     andrewvc, if you can reproduce it consistently, I&#8217;d suggest making a stripped-down test case</div>
<div class="line">[Wednesday 09 February 2011] [11:39:17] &lt;pieterh&gt;     quite often as you strip it down you&#8217;ll see what you&#8217;re doing wrong</div>
<div class="line">[Wednesday 09 February 2011] [11:39:19] &lt;andrewvc&gt;    that&#8217;s the tough part, it&#8217;s part of a complex app</div>
<div class="line">[Wednesday 09 February 2011] [11:39:25] &lt;andrewvc&gt;    and it was working fine</div>
<div class="line">[Wednesday 09 February 2011] [11:39:33] &lt;pieterh&gt;     &#8216;was not showing the error&#8217;</div>
<div class="line">[Wednesday 09 February 2011] [11:39:39] &lt;andrewvc&gt;    then all of a sudden it wasn&#8217;t, I can fiddle with its inputs to get it to repro</div>
<div class="line">[Wednesday 09 February 2011] [11:39:42] &lt;sustrik&gt;     i am sorry, i have to leave now</div>
<div class="line">[Wednesday 09 February 2011] [11:39:46] &lt;sustrik&gt;     if there&#8217;s a problem</div>
<div class="line">[Wednesday 09 February 2011] [11:39:52] &lt;sustrik&gt;     just send it to the ML</div>
<div class="line">[Wednesday 09 February 2011] [11:39:55] &lt;andrewvc&gt;    no worries, I&#8217;ll see if I can figure out how to make a minimal case</div>
<div class="line">[Wednesday 09 February 2011] [11:40:03] &lt;andrewvc&gt;    maybe I&#8217;ll record the message flow and make a fake app</div>
<div class="line">[Wednesday 09 February 2011] [11:40:07] &lt;pieterh&gt;     yeah</div>
<div class="line">[Wednesday 09 February 2011] [11:40:18] &lt;pieterh&gt;     at least follow what&#8217;s happening on that specific zmq socket</div>
<div class="line">[Wednesday 09 February 2011] [11:40:52] &lt;mikko&gt;       can you attach a debugger and check errno on line 241?</div>
<div class="line">[Wednesday 09 February 2011] [11:41:19] &lt;pieterh&gt;     mikko: &#8220;bad file descriptor&#8221;, said andrew</div>
<div class="line">[Wednesday 09 February 2011] [11:41:36] &lt;mikko&gt;       ah, i just hopped in. reading the buffer</div>
<div class="line">[Wednesday 09 February 2011] [11:41:39] &lt;andrewvc&gt;    yeah, it&#8217;s an inproc socket btw</div>
<div class="line">[Wednesday 09 February 2011] [11:41:50] &lt;andrewvc&gt;    I switched it to inproc to help debug</div>
<div class="line">[Wednesday 09 February 2011] [11:42:23] &lt;andrewvc&gt;    tried ipc as well, same deal</div>
<div class="line">[Wednesday 09 February 2011] [11:42:34] &lt;mikko&gt;       sounds slightly odd</div>
<div class="line">[Wednesday 09 February 2011] [11:42:41] &lt;andrewvc&gt;    It&#8217;s a pub/sub if that matters</div>
<div class="line">[Wednesday 09 February 2011] [11:42:47] &lt;andrewvc&gt;    it works for a little while</div>
<div class="line">[Wednesday 09 February 2011] [11:43:02] &lt;andrewvc&gt;    I&#8217;m not familiar with GDB, but if you don&#8217;t mind walking me through it</div>
<div class="line">[Wednesday 09 February 2011] [11:43:10] &lt;mikko&gt;       can you run it inside valgrind just to see that there is nothing random going on with memory ?</div>
<div class="line">[Wednesday 09 February 2011] [11:43:11] &lt;andrewvc&gt;    I would be game. I have strace output already</div>
<div class="line">[Wednesday 09 February 2011] [11:43:25] &lt;andrewvc&gt;    mmm, it&#8217;s a ruby app, not sure if valgrind supports that</div>
<div class="line">[Wednesday 09 February 2011] [11:43:40] &lt;mikko&gt;       it does</div>
<div class="line">[Wednesday 09 February 2011] [11:43:52] &lt;mikko&gt;       it doesn&#8217;t understand about ruby</div>
<div class="line">[Wednesday 09 February 2011] [11:44:07] &lt;mikko&gt;       i remember seeing this before somewhere</div>
<div class="line">[Wednesday 09 February 2011] [11:44:21] &lt;andrewvc&gt;    well, so here&#8217;s some history</div>
<div class="line">[Wednesday 09 February 2011] [11:44:28] &lt;andrewvc&gt;    I used to see it in odd places</div>
<div class="line">[Wednesday 09 February 2011] [11:44:33] &lt;andrewvc&gt;    so did cremes</div>
<div class="line">[Wednesday 09 February 2011] [11:44:50] &lt;andrewvc&gt;    he also uses ffi-rzmq as  a binding</div>
<div class="line">[Wednesday 09 February 2011] [11:44:52] &lt;andrewvc&gt;    but lately upgrading to master fixed it</div>
<div class="line">[Wednesday 09 February 2011] [11:45:06] &lt;andrewvc&gt;    until yesterday, now it&#8217;s back with a vengeance on this one app of mine</div>
<div class="line">[Wednesday 09 February 2011] [11:45:26] &lt;mikko&gt;       no, i was thinking about the recent new_sndbuf &gt; old_sndbuf (mailbox.cpp:182)</div>
<div class="line">[Wednesday 09 February 2011] [11:47:55] &lt;pieterh&gt;     andrewvc, if you&#8217;re getting this no matter what the transport... then I&#8217;d say the zmq socket is in an invalid state</div>
<div class="line">[Wednesday 09 February 2011] [11:48:07] &lt;pieterh&gt;     try simply tracing all work you do with that socket</div>
<div class="line">[Wednesday 09 February 2011] [11:48:10] &lt;andrewvc&gt;    cool.</div>
<div class="line">[Wednesday 09 February 2011] [11:48:48] &lt;andrewvc&gt;    yeah, I&#8217;ve got crazy debugging going on right now :) hopefully I&#8217;ll have something substantial to work off of</div>
<div class="line">[Wednesday 09 February 2011] [11:49:02] &lt;andrewvc&gt;    is there any call to just ask is this socket ok?</div>
<div class="line">[Wednesday 09 February 2011] [11:49:16] &lt;andrewvc&gt;    or does it sound like an uncaugh assertion?</div>
<div class="line">[Wednesday 09 February 2011] [11:53:14] &lt;pieterh&gt;     andrewvc, well, there is no such call but you could do a sanity test...</div>
<div class="line">[Wednesday 09 February 2011] [11:53:34] &lt;pieterh&gt;     e.g. try a non-blocking recv on the socket</div>
<div class="line">[Wednesday 09 February 2011] [11:53:48] &lt;andrewvc&gt;    ah, well, it&#8217;s a PUB socket</div>
<div class="line">[Wednesday 09 February 2011] [11:53:53] &lt;pieterh&gt;     hang on</div>
<div class="line">[Wednesday 09 February 2011] [11:54:06] &lt;pieterh&gt;     it&#8217;s a pub socket... so why are you ending up trying to recv from it?</div>
<div class="line">[Wednesday 09 February 2011] [11:55:07]        * pieterh could be confused here, not sure if <a class="reference external" href="mailbox:recv">mailbox:recv</a> is reading from socket</div>
<div class="line">[Wednesday 09 February 2011] [11:55:51] &lt;andrewvc&gt;    hmmm, could it be a weird timing thing, maybe some socket is receiving in the background</div>
<div class="line">[Wednesday 09 February 2011] [11:56:00] &lt;andrewvc&gt;    and it just happens to be at the same time</div>
<div class="line">[Wednesday 09 February 2011] [11:56:26] &lt;andrewvc&gt;    so it&#8217;s not actually the PUB socket at all. Or maybe it&#8217;s the SUB receiving?</div>
<div class="line">[Wednesday 09 February 2011] [11:56:29] &lt;pieterh&gt;     weird timing things don&#8217;t usually act reproducibly</div>
<div class="line">[Wednesday 09 February 2011] [11:56:53] &lt;andrewvc&gt;    yeah, maybe I should split it into two processes, so the sub is separated</div>
<div class="line">[Wednesday 09 February 2011] [11:57:20] &lt;andrewvc&gt;    oh, i&#8217;m not trying to receive</div>
<div class="line">[Wednesday 09 February 2011] [11:57:27] &lt;andrewvc&gt;    the error is right after a send</div>
<div class="line">[Wednesday 09 February 2011] [11:58:07] &lt;pieterh&gt;     well, as sustrik said, send the snippet and error message to zeromq-dev...</div>
<div class="line">[Wednesday 09 February 2011] [11:58:18] &lt;pieterh&gt;     he&#8217;ll be back later</div>
<div class="line">[Wednesday 09 February 2011] [11:58:40] &lt;andrewvc&gt;    cool, thanks for your time pieter</div>
<div class="line">[Wednesday 09 February 2011] [11:58:54] &lt;pieterh&gt;     np</div>
<div class="line">[Wednesday 09 February 2011] [11:58:54] &lt;andrewvc&gt;    something fishy is going on here</div>
<div class="line">[Wednesday 09 February 2011] [11:58:56] &lt;andrewvc&gt;    lol</div>
<div class="line">[Wednesday 09 February 2011] [14:55:04] &lt;mikko&gt;       good evening</div>
<div class="line">[Wednesday 09 February 2011] [15:00:31] &lt;Guthur&gt;      &#8216;evening mikko</div>
<div class="line">[Wednesday 09 February 2011] [16:27:30] &lt;CIA-21&gt;      zeromq2: 03Martin Sustrik 07master * r5b82b1b 10/ (7 files):</div>
<div class="line">[Wednesday 09 February 2011] [16:27:30] &lt;CIA-21&gt;      zeromq2: Reaper thread waits for commands rather them retrieving them periodically</div>
<div class="line">[Wednesday 09 February 2011] [16:27:30] &lt;CIA-21&gt;      zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/eNn0wP">http://bit.ly/eNn0wP</a></div>
<div class="line">[Wednesday 09 February 2011] [16:35:34] &lt;CIA-21&gt;      zeromq2: 03Martin Sustrik 07master * re947900 10/ builds/msvc/libzmq/libzmq.vcproj :</div>
<div class="line">[Wednesday 09 February 2011] [16:35:34] &lt;CIA-21&gt;      zeromq2: reaper added to MSVC build</div>
<div class="line">[Wednesday 09 February 2011] [16:35:34] &lt;CIA-21&gt;      zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/enwx8O">http://bit.ly/enwx8O</a></div>
<div class="line">[Wednesday 09 February 2011] [16:40:54] &lt;sustrik&gt;     mikko: <a class="reference external" href="https://github.com/zeromq/zeromq2/issues#issue/163">https://github.com/zeromq/zeromq2/issues#issue/163</a></div>
<div class="line">[Wednesday 09 February 2011] [16:41:08] &lt;sustrik&gt;     i have no idea whether it&#8217;s ok or not</div>
<div class="line">[Wednesday 09 February 2011] [16:41:35] &lt;mikko&gt;       will check</div>
<div class="line">[Wednesday 09 February 2011] [16:42:43] &lt;mikko&gt;       majority of the shared libraries and libtool archives i have installed on my machine have executable bit set</div>
<div class="line">[Wednesday 09 February 2011] [16:42:47] &lt;mikko&gt;       static libraries don&#8217;t</div>
<div class="line">[Wednesday 09 February 2011] [16:43:23]        * sustrik hasn&#8217;t a slightest idea</div>
<div class="line">[Wednesday 09 February 2011] [16:46:17] &lt;mikko&gt;       commented on the issue</div>
<div class="line">[Wednesday 09 February 2011] [16:47:14] &lt;Guthur&gt;      what would be the use case for zmq_msg_move(3)</div>
<div class="line">[Wednesday 09 February 2011] [16:47:35] &lt;sustrik&gt;     when you need to move a message payload without copying it?</div>
<div class="line">[Wednesday 09 February 2011] [16:47:48] &lt;Guthur&gt;      can you not just use the original msg?</div>
<div class="line">[Wednesday 09 February 2011] [16:48:05] &lt;sustrik&gt;     class X</div>
<div class="line">[Wednesday 09 February 2011] [16:48:06] &lt;sustrik&gt;     {</div>
<div class="line">[Wednesday 09 February 2011] [16:48:14] &lt;sustrik&gt;        message_t msg;</div>
<div class="line">[Wednesday 09 February 2011] [16:48:28] &lt;sustrik&gt;         void get_message (message_t <a href="#id9"><span class="problematic" id="id10">*</span></a><a href="#id119"><span class="problematic" id="id120">msg_</span></a>)</div>
<div class="line">[Wednesday 09 February 2011] [16:48:30] &lt;sustrik&gt;         {</div>
<div class="line">[Wednesday 09 February 2011] [16:48:43] &lt;sustrik&gt;             zmq_msg_move (<a href="#id121"><span class="problematic" id="id122">msg_</span></a>, &amp;msg);</div>
<div class="line">[Wednesday 09 February 2011] [16:48:45] &lt;sustrik&gt;         }</div>
<div class="line">[Wednesday 09 February 2011] [16:48:46] &lt;sustrik&gt;     }</div>
<div class="line">[Wednesday 09 February 2011] [16:48:54] &lt;Guthur&gt;      oh ok, cheers</div>
<div class="line">[Wednesday 09 February 2011] [16:49:02] &lt;sustrik&gt;     :)</div>
<div class="line">[Wednesday 09 February 2011] [16:49:45] &lt;Guthur&gt;      I suppose I was wondering it there was any reason I should use it when moving a msg directly from one socket to another</div>
<div class="line">[Wednesday 09 February 2011] [16:50:38] &lt;sustrik&gt;     i don&#8217;t think so</div>
<div class="line">[Wednesday 09 February 2011] [16:50:59] &lt;sustrik&gt;     you can pass the original message directly</div>
<div class="line">[Wednesday 09 February 2011] [16:51:33] &lt;Guthur&gt;      is there any lag when closing the msg for reuse in a multi part msg</div>
<div class="line">[Wednesday 09 February 2011] [16:51:44] &lt;Guthur&gt;      I&#8217;m sort of wildly guessing now though</div>
<div class="line">[Wednesday 09 February 2011] [16:52:07] &lt;sustrik&gt;     ?</div>
<div class="line">[Wednesday 09 February 2011] [16:52:27] &lt;mikko&gt;       close should be fairly predictable operation</div>
<div class="line">[Wednesday 09 February 2011] [16:52:54] &lt;Guthur&gt;      Actual release of resources associated with the message object shall be postponed by MQ until all users of the message or underlying data buffer have indicated it is no longer required.</div>
<div class="line">[Wednesday 09 February 2011] [16:53:04] &lt;sustrik&gt;     yes</div>
<div class="line">[Wednesday 09 February 2011] [16:53:32] &lt;sustrik&gt;     the buffer is not deallocated until is it pushed to the network</div>
<div class="line">[Wednesday 09 February 2011] [16:53:55] &lt;Guthur&gt;      will that block close, or is it async</div>
<div class="line">[Wednesday 09 February 2011] [16:54:45] &lt;sustrik&gt;     it&#8217;s asyncv</div>
<div class="line">[Wednesday 09 February 2011] [16:55:11] &lt;sustrik&gt;     zmq_msg_t is not a message itself</div>
<div class="line">[Wednesday 09 February 2011] [16:55:17] &lt;sustrik&gt;     it&#8217;s just a pointer to message</div>
<div class="line">[Wednesday 09 February 2011] [16:55:26] &lt;sustrik&gt;     so what you close is the pointer</div>
<div class="line">[Wednesday 09 February 2011] [16:55:49] &lt;sustrik&gt;     the message itself may remain in the memory because it may be used from elsewhere</div>
<div class="line">[Wednesday 09 February 2011] [16:57:04] &lt;Guthur&gt;      ah yes, my thinking was getting a bit off there</div>
<div class="line">[Wednesday 09 February 2011] [17:04:47] &lt;sustrik&gt;     mikko: btw, any answer from ivan about the AIX build env?</div>
<div class="line">[Wednesday 09 February 2011] [17:05:22] &lt;mikko&gt;       sustrik: nope</div>
<div class="line">[Wednesday 09 February 2011] [17:05:30] &lt;mikko&gt;       sustrik: not sure how feasible it is behind a proxy</div>
<div class="line">[Wednesday 09 February 2011] [17:05:42] &lt;sustrik&gt;     understood</div>
<div class="line">[Wednesday 09 February 2011] [17:05:59] &lt;sustrik&gt;     i was just curious whether he replied</div>
<div class="line">[Wednesday 09 February 2011] [17:06:12] &lt;mikko&gt;       effectively they would need to hack around the proxy</div>
<div class="line">[Wednesday 09 February 2011] [17:06:39] &lt;mikko&gt;       it was very interesting offer as they have HP-UX and AIX</div>
<div class="line">[Wednesday 09 February 2011] [17:06:57] &lt;sustrik&gt;     yeah</div>
<div class="line">[Wednesday 09 February 2011] [17:07:36] &lt;sustrik&gt;     HP has a free programme to allow you to boot and use HP-UX boxes</div>
<div class="line">[Wednesday 09 February 2011] [17:07:42] &lt;sustrik&gt;     DSPP it is called</div>
<div class="line">[Wednesday 09 February 2011] [17:07:57] &lt;sustrik&gt;     not sure whether there&#8217;s a way to do it in regular intervals</div>
<div class="line">[Wednesday 09 February 2011] [17:09:15] &lt;Rich_Morin&gt;  I would love to try using ZeroMQ under SketchUp&#8217;s Ruby.  However, I have no idea how to make it work.  Any Rubyists around?</div>
<div class="line">[Wednesday 09 February 2011] [17:09:45] &lt;Rich_Morin&gt;  The Ruby version (1.8.6, with limited library support) doesn&#8217;t have sockets, but I&#8217;ve been able to construct a message-based protocol using EM, message files, and WebSockets.</div>
<div class="line">[Wednesday 09 February 2011] [17:10:13] &lt;mikko&gt;       Rich_Morin: cremes and <a href="#id123"><span class="problematic" id="id124">andrewvc_</span></a> are ruby people</div>
<div class="line">[Wednesday 09 February 2011] [17:10:14] &lt;mikko&gt;       i think</div>
<div class="line">[Wednesday 09 February 2011] [17:10:24] &lt;<a href="#id125"><span class="problematic" id="id126">andrewvc_</span></a>&gt;   yeah</div>
<div class="line">[Wednesday 09 February 2011] [17:10:50] &lt;<a href="#id127"><span class="problematic" id="id128">andrewvc_</span></a>&gt;   1.8.7 doesn&#8217;t work right</div>
<div class="line">[Wednesday 09 February 2011] [17:10:58] &lt;<a href="#id129"><span class="problematic" id="id130">andrewvc_</span></a>&gt;   the threading model is broken from what I&#8217;ve heard</div>
<div class="line">[Wednesday 09 February 2011] [17:11:10] &lt;<a href="#id131"><span class="problematic" id="id132">andrewvc_</span></a>&gt;   I&#8217;ve tried it, it seems to work, then a couple seconds later acts all weird and crashy</div>
<div class="line">[Wednesday 09 February 2011] [17:11:26] &lt;Rich_Morin&gt;  Threading isn&#8217;t really an option, in any case. However, you can set up a periodic timer.</div>
<div class="line">[Wednesday 09 February 2011] [17:11:36] &lt;<a href="#id133"><span class="problematic" id="id134">andrewvc_</span></a>&gt;   well, even w/o threading 1.8.7 is weird</div>
<div class="line">[Wednesday 09 February 2011] [17:12:40] &lt;mikko&gt;       sustrik: The virtual systems offered span the HP portfolio. Available operating systems include HP-UX, OpenVMS, Microsoft Windows, Red Hat Enterprise Linux and Novell SuSE Linux.</div>
<div class="line">[Wednesday 09 February 2011] [17:12:57] &lt;<a href="#id135"><span class="problematic" id="id136">andrewvc_</span></a>&gt;   there&#8217;s a branch of rbzmq by method_missing, that&#8217;s called 1.8.7 threads. I haven&#8217;t tried it, not even sure if it&#8217;s considered usable by anyone</div>
<div class="line">[Wednesday 09 February 2011] [17:13:17] &lt;sustrik&gt;     mikko: yep, but i think you have to book the time upfront</div>
<div class="line">[Wednesday 09 February 2011] [17:13:31] &lt;sustrik&gt;     not sure whether you can book periodic uptime</div>
<div class="line">[Wednesday 09 February 2011] [17:14:21] &lt;mikko&gt;       i guess it wouldn&#8217;t hurt to ask if anyone has contacts there</div>
<div class="line">[Wednesday 09 February 2011] [17:14:30] &lt;mikko&gt;       mailing their customer support and asking might be a lost cause</div>
<div class="line">[Wednesday 09 February 2011] [17:14:45] &lt;sustrik&gt;     we have few friends at HP</div>
<div class="line">[Wednesday 09 February 2011] [17:15:00] &lt;sustrik&gt;     let me introduce you...</div>
<div class="line">[Wednesday 09 February 2011] [17:15:15] &lt;mikko&gt;       OpenVMS and HP-UX are both support iirc</div>
<div class="line">[Wednesday 09 February 2011] [17:15:21] &lt;mikko&gt;       by zeromq i mean</div>
<div class="line">[Wednesday 09 February 2011] [17:15:41] &lt;sustrik&gt;     yup, but getting hudson work on openvms may be tricky</div>
<div class="line">[Wednesday 09 February 2011] [17:15:41] &lt;Rich_Morin&gt;  <a href="#id137"><span class="problematic" id="id138">andrewvc_</span></a>: Does  ZeroMQ support a documented socket protocol?  IE, Can I use EM to proxy the messages via a socket?</div>
<div class="line">[Wednesday 09 February 2011] [17:15:58] &lt;sustrik&gt;     anyway, i introduce you to the guys doing openvms port</div>
<div class="line">[Wednesday 09 February 2011] [17:16:05] &lt;sustrik&gt;     they are both hp engineers</div>
<div class="line">[Wednesday 09 February 2011] [17:16:12] &lt;sustrik&gt;     wait a sec</div>
<div class="line">[Wednesday 09 February 2011] [17:19:42] &lt;sustrik&gt;     done</div>
<div class="line">[Wednesday 09 February 2011] [17:19:52] &lt;sustrik&gt;     Rich_Morin: check zmq_tcp(7)</div>
<div class="line">[Wednesday 09 February 2011] [17:20:27] &lt;Rich_Morin&gt;  tnx!</div>
<div class="line">[Wednesday 09 February 2011] [17:20:32] &lt;chris_st&gt;    Howdy &#8211; any XCode folks here?  I&#8217;d like to build in XCode, and use the Objective-C bindings, and am curious how to do it... never built a library in XCode before!</div>
<div class="line">[Wednesday 09 February 2011] [17:21:16] &lt;mikko&gt;       sustrik: thanks</div>
<div class="line">[Wednesday 09 February 2011] [17:22:04] &lt;Rich_Morin&gt;  chris_st: The Cocoa (etc) bindings are also available in MacRuby.</div>
<div class="line">[Wednesday 09 February 2011] [17:22:31] &lt;chris_st&gt;    Rich_Morin: Thanks!  That&#8217;s cool.  But I want to build an Obj-C program to use 0MQ.</div>
<div class="line">[Wednesday 09 February 2011] [17:22:53] &lt;Rich_Morin&gt;  np</div>
<div class="line">[Wednesday 09 February 2011] [17:23:39] &lt;drbobbeaty&gt;  chris_st: I think the best way is to look at the zmq.hpp file and see how they wrap the C calls into C++ objects. It&#8217;s a simple conversion to Ocj-C methods from there.</div>
<div class="line">[Wednesday 09 February 2011] [17:24:03] &lt;sustrik&gt;     there&#8217;s a objective C binding out there IIRC</div>
<div class="line">[Wednesday 09 February 2011] [17:24:12] &lt;chris_st&gt;    drbobbeaty: Thanks for the pointer &#8211; appreciated.  I&#8217;m going to try JeremyW&#8217;s code first, since I&#8217;m lazy :-)</div>
<div class="line">[Wednesday 09 February 2011] [17:34:21] &lt;sustrik&gt;     mikko: that was quick :)</div>
<div class="line">[Wednesday 09 February 2011] [17:41:50] &lt;mikko&gt;       sustrik: yeah</div>
<div class="line">[Wednesday 09 February 2011] [17:42:00] &lt;mikko&gt;       interesting to see what happens</div>
<div class="line">[Wednesday 09 February 2011] [17:42:07] &lt;mikko&gt;       now i gotta sleep, long day tomorrow</div>
<div class="line">[Wednesday 09 February 2011] [17:42:12] &lt;sustrik&gt;     cyl</div>
<div class="line">[Wednesday 09 February 2011] [17:42:13] &lt;mikko&gt;       good night</div>
<div class="line">[Wednesday 09 February 2011] [17:56:08] &lt;Rich_Morin&gt;  sustrik: <a class="reference external" href="https://github.com/chuckremes/zmqmachine">https://github.com/chuckremes/zmqmachine</a> looks like an interesting possibility. I already have an EM script that proxies between files ans WebSockets; it might be possible to mash my proxy up with zmqmachine.</div>
<div class="line">[Wednesday 09 February 2011] [18:01:52] &lt;cremes&gt;      Rich_Morin: you want to run your code on sketchup ruby, right? i&#8217;m not familiar with that... is it a &#8220;new&#8221; runtime from google?</div>
<div class="line">[Wednesday 09 February 2011] [18:02:47] &lt;Rich_Morin&gt;  No, it may actually predate Rails.  The Ruby version (1.8.6, with limited library support) doesn&#8217;t have sockets, but I&#8217;ve been able to construct a message-based protocol using EM, message files, and WebSockets.</div>
<div class="line">[Wednesday 09 February 2011] [18:03:06] &lt;Rich_Morin&gt;  &#8220;want&#8221; perhaps overstates the case :-)</div>
<div class="line">[Wednesday 09 February 2011] [18:03:33] &lt;cremes&gt;      oh, i see</div>
<div class="line">[Wednesday 09 February 2011] [18:04:01] &lt;cremes&gt;      well, zmqmachine is just a thin wrapper around the ffi-rzmq gem which itself is a thin wrapper around libzmq</div>
<div class="line">[Wednesday 09 February 2011] [18:04:23] &lt;cremes&gt;      i assume the sketchup runtime can load C extensions if you are playing with EM</div>
<div class="line">[Wednesday 09 February 2011] [18:04:53] &lt;cremes&gt;      <a href="#id139"><span class="problematic" id="id140">andrewvc_</span></a> has been working on a companion gem to ffi-rzmq so that 0mq sockets can be used from EM</div>
<div class="line">[Wednesday 09 February 2011] [18:04:57] &lt;Rich_Morin&gt;  ouch.  Even if it&#8217;s possible, it would be nice to avoid.</div>
<div class="line">[Wednesday 09 February 2011] [18:05:11] &lt;cremes&gt;      what ouch?</div>
<div class="line">[Wednesday 09 February 2011] [18:06:17] &lt;Rich_Morin&gt;  SketchUp is used by modelers.  I&#8217;d like to keep things as lightweight as possible.</div>
<div class="line">[Wednesday 09 February 2011] [18:06:43] &lt;Rich_Morin&gt;  Thait said, I&#8217;m not ruling it out.</div>
<div class="line">[Wednesday 09 February 2011] [18:06:58] &lt;cremes&gt;      ok; then you&#8217;ll need to reimplement 0mq in pure ruby because the existing solutions just wrap the 0mq C lib</div>
<div class="line">[Wednesday 09 February 2011] [18:07:06] &lt;cremes&gt;      that&#8217;s a lot of work</div>
<div class="line">[Wednesday 09 February 2011] [18:07:44] &lt;Rich_Morin&gt;  Another possibility would be to hack my EM proxy to speak your socket-based protocol.  Any clues here?</div>
<div class="line">[Wednesday 09 February 2011] [18:08:10] &lt;Rich_Morin&gt;  The proxy runs under normal Ruby, BTW</div>
<div class="line">[Wednesday 09 February 2011] [18:10:51] &lt;cremes&gt;      sorry, no clues... the wire protocol in 0mq is documented but i have no particular insight on how to make it work in your situation</div>
<div class="line">[Wednesday 09 February 2011] [18:12:46] &lt;Rich_Morin&gt;  thanks, anyway</div>
<div class="line">[Wednesday 09 February 2011] [18:34:24] &lt;msch&gt;        hi, i&#8217;ve got a really strange bug. i&#8217;ve written a very simple zmq setup with PUSH/PULL, the PUSH code seems to work (it exists cleanly) while to PULL code just hangs in socket.recv. anyone care to take a look? <a class="reference external" href="https://gist.github.com/819576">https://gist.github.com/819576</a></div>
<div class="line">[Wednesday 09 February 2011] [18:35:33] &lt;Seta00&gt;      trying to link to zmq, gcc is giving me &#8220;/usr/lib/libzmq.so: could not read symbols: File in wrong format&#8221;</div>
<div class="line">[Wednesday 09 February 2011] [18:35:40] &lt;Seta00&gt;      and I&#8217;ve just built it</div>
<div class="line">[Wednesday 09 February 2011] [18:35:42] &lt;Seta00&gt;      everything goes fine</div>
<div class="line">[Wednesday 09 February 2011] [18:36:30] &lt;Seta00&gt;      oh</div>
<div class="line">[Wednesday 09 February 2011] [18:36:31] &lt;Seta00&gt;      -m 32</div>
<div class="line">[Wednesday 09 February 2011] [18:36:31] &lt;Seta00&gt;      damn</div>
<div class="line">[Wednesday 09 February 2011] [18:42:36] &lt;Seta00&gt;      er.. configure is asking me to use &#8211;target</div>
<div class="line">[Wednesday 09 February 2011] [18:42:40] &lt;Seta00&gt;      but &#8211;target i386 doesn&#8217;t work</div>
<div class="line">[Wednesday 09 February 2011] [18:42:51] &lt;Seta00&gt;      &#8211;target=i386 **</div>
<div class="line">[Wednesday 09 February 2011] [19:07:43] &lt;Seta00&gt;      forgot to install g++-multilib</div>
<div class="line">[Wednesday 09 February 2011] [19:07:45] &lt;Seta00&gt;      :P</div>
<div class="line">[Thursday 10 February 2011] [02:37:56] &lt;suzan_shakya&gt; hi all, can anybody explain me why a single context should be used in a process ?</div>
<div class="line">[Thursday 10 February 2011] [02:42:17] &lt;Guthur&gt;       suzan_shakya, you can use multiple contexts in a process</div>
<div class="line">[Thursday 10 February 2011] [02:42:44] &lt;Guthur&gt;       with you want to use inproc transport the sockets need to be created by the same context though</div>
<div class="line">[Thursday 10 February 2011] [02:43:03] &lt;Guthur&gt;       with/if</div>
<div class="line">[Thursday 10 February 2011] [02:46:13] &lt;suzan_shakya&gt; Guthur: thanks</div>
<div class="line">[Thursday 10 February 2011] [02:46:58] &lt;guido_g&gt;      but is not the canonical way to have more then one context per process</div>
<div class="line">[Thursday 10 February 2011] [04:54:58] &lt;mikko&gt;        sustrik: <a class="reference external" href="http://build.valokuva.org/job/ZeroMQ2-core-master_mingw32-win7/79/console">http://build.valokuva.org/job/ZeroMQ2-core-master_mingw32-win7/79/console</a></div>
<div class="line">[Thursday 10 February 2011] [04:55:04] &lt;mikko&gt;        started failing after reaper changes</div>
<div class="line">[Thursday 10 February 2011] [05:20:55] &lt;mikko&gt;        man you are fast pieter_hintjens</div>
<div class="line">[Thursday 10 February 2011] [05:21:08] &lt;pieter_hintjens&gt;      mikko: huh?</div>
<div class="line">[Thursday 10 February 2011] [05:21:23] &lt;mikko&gt;        pieter_hintjens: the &#8220;What happens when push socket is closed&#8221;</div>
<div class="line">[Thursday 10 February 2011] [05:21:32] &lt;pieterh&gt;      :-)</div>
<div class="line">[Thursday 10 February 2011] [05:21:36] &lt;mikko&gt;        i had barely read the message and already gmail indicated response from you</div>
<div class="line">[Thursday 10 February 2011] [05:22:02] &lt;pieterh&gt;      4 minutes is still pretty high latency</div>
<div class="line">[Thursday 10 February 2011] [05:22:19] &lt;pieterh&gt;      I need to find a way to get alerts on 0MQ list traffic...</div>
<div class="line">[Thursday 10 February 2011] [09:46:49] &lt;mikko&gt;        pieterh: <a class="reference external" href="https://build.valokuva.org/job/zfl-master_ZeroMQ2-master_mingw32/9/console">https://build.valokuva.org/job/zfl-master_ZeroMQ2-master_mingw32/9/console</a></div>
<div class="line">[Thursday 10 February 2011] [09:46:54] &lt;mikko&gt;        zfl mingw32 running now</div>
<div class="line">[Thursday 10 February 2011] [09:47:13] &lt;pieterh&gt;      mikko, nice... there are still a few glitches but most of it builds</div>
<div class="line">[Thursday 10 February 2011] [09:48:07] &lt;mikko&gt;        fails</div>
<div class="line">[Thursday 10 February 2011] [10:02:34] &lt;pieterh&gt;      mikko: I&#8217;ve committed further fixes, send me a log of the errors and I&#8217;ll check them out</div>
<div class="line">[Thursday 10 February 2011] [10:05:15] &lt;mikko&gt;        pieterh: you should be able to init build on hudson</div>
<div class="line">[Thursday 10 February 2011] [10:05:20] &lt;mikko&gt;        if you still have your username and pass</div>
<div class="line">[Thursday 10 February 2011] [10:05:32] &lt;pieterh&gt;      mikko: I have too many pots boiling :-)</div>
<div class="line">[Thursday 10 February 2011] [10:06:42] &lt;mikko&gt;        <a class="reference external" href="https://gist.github.com/73dae202027903631905">https://gist.github.com/73dae202027903631905</a></div>
<div class="line">[Thursday 10 February 2011] [10:06:51] &lt;mikko&gt;        looks like include issue</div>
<div class="line">[Thursday 10 February 2011] [10:07:01] &lt;mikko&gt;        path missing or something</div>
<div class="line">[Thursday 10 February 2011] [10:07:44] &lt;mikko&gt;        <a class="reference external" href="https://github.com/mkoppanen/zfl/commit/b54ea4c22956818f435ee085d01847bb5f6c9335">https://github.com/mkoppanen/zfl/commit/b54ea4c22956818f435ee085d01847bb5f6c9335</a></div>
<div class="line">[Thursday 10 February 2011] [10:07:50] &lt;mikko&gt;        this is some old fix i did</div>
<div class="line">[Thursday 10 February 2011] [10:07:56] &lt;mikko&gt;        not sure how relevant that still is</div>
<div class="line">[Thursday 10 February 2011] [10:10:20] &lt;pieterh&gt;      ah... the errors from zfl_prelude.h are because that file thinks it&#8217;s building on a Unix box and is looking for Unix include files</div>
<div class="line">[Thursday 10 February 2011] [10:11:15] &lt;pieterh&gt;      I&#8217;ve not used ming32 for a really long time, so don&#8217;t recall what&#8217;s needed here</div>
<div class="line">[Thursday 10 February 2011] [10:11:16] &lt;mikko&gt;        not fully true</div>
<div class="line">[Thursday 10 February 2011] [10:11:26] &lt;mikko&gt;        you wouldn&#8217;t include using &#8216;&#8217; on unix ?</div>
<div class="line">[Thursday 10 February 2011] [10:11:38] &lt;pieterh&gt;      indeed</div>
<div class="line">[Thursday 10 February 2011] [10:11:41] &lt;pieterh&gt;      :-)</div>
<div class="line">[Thursday 10 February 2011] [10:11:50] &lt;mikko&gt;        zfl_prelude.h:255 is inside windows defs</div>
<div class="line">[Thursday 10 February 2011] [10:12:33] &lt;pieterh&gt;      it thinks it&#8217;s both __MSDOS__ and __UNIX__</div>
<div class="line">[Thursday 10 February 2011] [10:13:11] &lt;mikko&gt;        regarding the build issue on freebsd someone mailed about</div>
<div class="line">[Thursday 10 February 2011] [10:13:28] &lt;mikko&gt;        i think a switch in configure would be nice &#8220;&#8211;with-libzmq=&#8221; or so</div>
<div class="line">[Thursday 10 February 2011] [10:13:44] &lt;pieterh&gt;      well, zfl is by definition dependent on zmq</div>
<div class="line">[Thursday 10 February 2011] [10:13:45] &lt;mikko&gt;        that could use pkg-config to check the prefix and required flags</div>
<div class="line">[Thursday 10 February 2011] [10:14:17] &lt;mikko&gt;        it also currently depending on user to specify CFLAGS and LDFLAGS for non-standard location</div>
<div class="line">[Thursday 10 February 2011] [10:14:35] &lt;pieterh&gt;      right</div>
<div class="line">[Thursday 10 February 2011] [10:14:41]         * pieterh needs to get some food</div>
<div class="line">[Thursday 10 February 2011] [10:14:51] &lt;pieterh&gt;      mikko, i&#8217;m going to leave this to settle for a while and come back to it later</div>
<div class="line">[Thursday 10 February 2011] [10:14:55] &lt;mikko&gt;        &#8211;with-libzmq=/opt/i/installed/libzmq/here style</div>
<div class="line">[Thursday 10 February 2011] [10:14:56] &lt;mikko&gt;        ok</div>
<div class="line">[Thursday 10 February 2011] [10:14:57] &lt;pieterh&gt;      may install mingw32 if needed</div>
<div class="line">[Thursday 10 February 2011] [10:15:11] &lt;mikko&gt;        i can look into patching this</div>
<div class="line">[Thursday 10 February 2011] [10:15:16] &lt;pieterh&gt;      have gotten the thing to compile on MSVC and almost link successfully...</div>
<div class="line">[Thursday 10 February 2011] [10:15:19] &lt;mikko&gt;        i&#8217;ll send you a mail if i got time to look into it today</div>
<div class="line">[Thursday 10 February 2011] [10:15:32] &lt;pieterh&gt;      that earns me lunch, in any timezone :-)</div>
<div class="line">[Thursday 10 February 2011] [10:15:39] &lt;mikko&gt;        true</div>
<div class="line">[Thursday 10 February 2011] [10:15:56] &lt;pieterh&gt;      cyl</div>
<div class="line">[Thursday 10 February 2011] [10:16:01] &lt;mikko&gt;        later</div>
<div class="line">[Thursday 10 February 2011] [11:07:30] &lt;andrewvc&gt;     sustrik: If you&#8217;re around I have an strace that shows where that nbytes error is I believe</div>
<div class="line">[Thursday 10 February 2011] [11:07:36] &lt;andrewvc&gt;     <a class="reference external" href="https://gist.github.com/820779">https://gist.github.com/820779</a></div>
<div class="line">[Thursday 10 February 2011] [11:07:50] &lt;andrewvc&gt;     basically, it looks like close is called on FD 22</div>
<div class="line">[Thursday 10 February 2011] [11:11:42] &lt;cremes&gt;       andrewvc: fyi, i found (and fixed) a bug in ffi-rzmq</div>
<div class="line">[Thursday 10 February 2011] [11:11:48] &lt;andrewvc&gt;     oh?</div>
<div class="line">[Thursday 10 February 2011] [11:12:14] &lt;cremes&gt;       sometimes when a recv failed with rc = -1, eagain is <em>false</em> but it was still acting like it was a successful read</div>
<div class="line">[Thursday 10 February 2011] [11:12:21] &lt;cremes&gt;       i&#8217;ll push the patch in a minute</div>
<div class="line">[Thursday 10 February 2011] [11:12:21] &lt;andrewvc&gt;     oh, good catch</div>
<div class="line">[Thursday 10 February 2011] [11:12:39] &lt;andrewvc&gt;     cool, I&#8217;ll test it, I wonder if that was related, it sounds like it could have been</div>
<div class="line">[Thursday 10 February 2011] [11:12:45] &lt;cremes&gt;       i need to do a code clean up... some of my logic is too hard to follow</div>
<div class="line">[Thursday 10 February 2011] [11:12:48] &lt;cremes&gt;       simpler is better</div>
<div class="line">[Thursday 10 February 2011] [11:13:12] &lt;andrewvc&gt;     agreed, but don&#8217;t bash your code, I&#8217;ve found it pretty clear ):</div>
<div class="line">[Thursday 10 February 2011] [11:13:15] &lt;andrewvc&gt;     :)</div>
<div class="line">[Thursday 10 February 2011] [11:14:53] &lt;cremes&gt;       andrewvc: you are too kind!</div>
<div class="line">[Thursday 10 February 2011] [11:14:55] &lt;cremes&gt;       ok, pushed</div>
<div class="line">[Thursday 10 February 2011] [11:15:04] &lt;andrewvc&gt;     cool, I&#8217;ve got my test suite all up already</div>
<div class="line">[Thursday 10 February 2011] [11:15:16] &lt;cremes&gt;       give it a try and see if it makes a difference</div>
<div class="line">[Thursday 10 February 2011] [11:15:33] &lt;cremes&gt;       btw, at the same time i found an error in zmqmachine related to the same thing</div>
<div class="line">[Thursday 10 February 2011] [11:15:35] &lt;cremes&gt;       i&#8217;ll push that too</div>
<div class="line">[Thursday 10 February 2011] [11:16:43] &lt;andrewvc&gt;     sadly, not related</div>
<div class="line">[Thursday 10 February 2011] [11:17:12] &lt;andrewvc&gt;     i mean, that patch didn&#8217;t fix this bug</div>
<div class="line">[Thursday 10 February 2011] [11:17:26] &lt;cremes&gt;       bummer</div>
<div class="line">[Thursday 10 February 2011] [11:17:39] &lt;cremes&gt;       it&#8217;s likely a 0mq flaw</div>
<div class="line">[Thursday 10 February 2011] [11:17:47] &lt;andrewvc&gt;     yeah, I was just about to post to the list</div>
<div class="line">[Thursday 10 February 2011] [11:17:59] &lt;cremes&gt;       do you have a gist you can share? i have an hour or so today where i can poke at this</div>
<div class="line">[Thursday 10 February 2011] [11:18:02] &lt;andrewvc&gt;     yep</div>
<div class="line">[Thursday 10 February 2011] [11:18:16] &lt;andrewvc&gt;     well, so this is interesting in and of itself I guess</div>
<div class="line">[Thursday 10 February 2011] [11:18:18] &lt;andrewvc&gt;     <a class="reference external" href="https://gist.github.com/820779">https://gist.github.com/820779</a></div>
<div class="line">[Thursday 10 February 2011] [11:18:30] &lt;andrewvc&gt;     that&#8217;s an strace to start with, I&#8217;ll post the ruby code in a sec</div>
<div class="line">[Thursday 10 February 2011] [11:18:34] &lt;andrewvc&gt;     FD 22 is closed</div>
<div class="line">[Thursday 10 February 2011] [11:18:45] &lt;andrewvc&gt;     then recvfrom is called on it again later on</div>
<div class="line">[Thursday 10 February 2011] [11:19:17] &lt;andrewvc&gt;     I think that&#8217;s the bug, unless I&#8217;m missing something, I&#8217;m a little shaky on low level syscall semantics</div>
<div class="line">[Thursday 10 February 2011] [11:20:04] &lt;andrewvc&gt;     FD22 being a unix domain socket, but one that was opened internally, as the ZMQ sockets are all tcp</div>
<div class="line">[Thursday 10 February 2011] [11:20:34] &lt;andrewvc&gt;     lemme upload the ruby code actually, right now it needs RBX or 1.9.2 to run. I&#8217;m working on jruby support (kicking Thin out)</div>
<div class="line">[Thursday 10 February 2011] [11:20:41] &lt;cremes&gt;       i wonder if FD 22 has some special meaning? i don&#8217;t have a lot of knowledge about this lower level stuff</div>
<div class="line">[Thursday 10 February 2011] [11:20:53] &lt;cremes&gt;       cool, i use both</div>
<div class="line">[Thursday 10 February 2011] [11:21:06] &lt;mikko&gt;        no, it shouldn&#8217;t have</div>
<div class="line">[Thursday 10 February 2011] [11:22:38] &lt;andrewvc&gt;     It&#8217;s opened higher up with 116809 [pid 11284] socketpair(PF_FILE, SOCK_STREAM, 0, [21, 22]) = 0</div>
<div class="line">[Thursday 10 February 2011] [11:23:53] &lt;andrewvc&gt;     if you want to give the ruby code a shot cremes I can set you up pretty quick, lemme just push a couple things</div>
<div class="line">[Thursday 10 February 2011] [11:24:20] &lt;cremes&gt;       sure</div>
<div class="line">[Thursday 10 February 2011] [11:26:12] &lt;andrewvc&gt;     ok, so just a few things, you need either rbx or 1.9.2. then....</div>
<div class="line">[Thursday 10 February 2011] [11:26:22] &lt;andrewvc&gt;     gem install dripdrop</div>
<div class="line">[Thursday 10 February 2011] [11:26:49] &lt;andrewvc&gt;     then clone this somewhere git://github.com/andrewvc/socket-motor.git</div>
<div class="line">[Thursday 10 February 2011] [11:27:23] &lt;andrewvc&gt;     then, inside the socket-motor dir: ruby bin/socket-motor</div>
<div class="line">[Thursday 10 February 2011] [11:28:30] &lt;andrewvc&gt;     oh you also need: gem install sinatra haml</div>
<div class="line">[Thursday 10 February 2011] [11:28:59] &lt;andrewvc&gt;     inside socket-motor&#8217;s example dir, run ./run.sh</div>
<div class="line">[Thursday 10 February 2011] [11:29:28] &lt;andrewvc&gt;     finally visit localhost:3000 and try putting a message in the chat entry box and hitting send. that&#8217;ll cause the bin/socket-motor process to die</div>
<div class="line">[Thursday 10 February 2011] [11:29:33] &lt;andrewvc&gt;     phew</div>
<div class="line">[Thursday 10 February 2011] [11:29:51] &lt;andrewvc&gt;     yeah, I&#8217;ve been trying to communicate this via strace because the setup is a bit cumbersome</div>
<div class="line">[Thursday 10 February 2011] [11:34:25] &lt;cremes&gt;       needs hashie/mash too</div>
<div class="line">[Thursday 10 February 2011] [11:35:35] &lt;andrewvc&gt;     ah crap</div>
<div class="line">[Thursday 10 February 2011] [11:35:35] &lt;cremes&gt;       andrewvc: another require error, but this one doesn&#8217;t look like a gem</div>
<div class="line">[Thursday 10 February 2011] [11:35:37] &lt;cremes&gt;       &lt;internal:lib/rubygems/custom_require&gt;:29:in <a href="#id11"><span class="problematic" id="id12">`</span></a>require&#8217;: no such file to load &#8211; socket-motor/messages/req_rep_message (LoadError)</div>
<div class="line">[Thursday 10 February 2011] [11:35:38] &lt;andrewvc&gt;     gem install hashie</div>
<div class="line">[Thursday 10 February 2011] [11:35:45] &lt;andrewvc&gt;     oh, forgot to check that in damnit</div>
<div class="line">[Thursday 10 February 2011] [11:36:36] &lt;andrewvc&gt;     wait, hmm it is there</div>
<div class="line">[Thursday 10 February 2011] [11:37:45] &lt;cremes&gt;       probably a path issue</div>
<div class="line">[Thursday 10 February 2011] [11:37:48] &lt;andrewvc&gt;     I&#8217;ve been running it with -I lib/ in the socket motor dir</div>
<div class="line">[Thursday 10 February 2011] [11:37:49] &lt;andrewvc&gt;     yeah</div>
<div class="line">[Thursday 10 February 2011] [11:38:28] &lt;andrewvc&gt;      this is bin/socket-motor yeah</div>
<div class="line">[Thursday 10 February 2011] [11:39:01] &lt;cremes&gt;       so, what&#8217;s the right command? ruby -l lib bin/socket-motor doesn&#8217;t work</div>
<div class="line">[Thursday 10 February 2011] [11:39:49] &lt;andrewvc&gt;     I start it with ruby -I lib/ bin/socket-motor</div>
<div class="line">[Thursday 10 February 2011] [11:39:59] &lt;cremes&gt;       ruby -I lib bin/socket-motor works (where -I is an &#8220;eye&#8221;)</div>
<div class="line">[Thursday 10 February 2011] [11:40:13] &lt;andrewvc&gt;     yep</div>
<div class="line">[Thursday 10 February 2011] [11:40:26] &lt;cremes&gt;       now i&#8217;m getting an in6_addr error (invalid address)</div>
<div class="line">[Thursday 10 February 2011] [11:40:33] &lt;cremes&gt;       do you have some addresses hard coded?</div>
<div class="line">[Thursday 10 February 2011] [11:40:40] &lt;cremes&gt;       or ipv6 stuff?</div>
<div class="line">[Thursday 10 February 2011] [11:40:53] &lt;andrewvc&gt;     nope</div>
<div class="line">[Thursday 10 February 2011] [11:41:06] &lt;andrewvc&gt;     I disabled it actually</div>
<div class="line">[Thursday 10 February 2011] [11:41:22] &lt;cremes&gt;       <a class="reference external" href="https://gist.github.com/820848">https://gist.github.com/820848</a></div>
<div class="line">[Thursday 10 February 2011] [11:41:52] &lt;cremes&gt;       i&#8217;m on osx... don&#8217;t know if that should matter</div>
<div class="line">[Thursday 10 February 2011] [11:41:58] &lt;andrewvc&gt;     oh, it uses resolv to do a hostname lookup, weird lemme disable that whole block</div>
<div class="line">[Thursday 10 February 2011] [11:42:08] &lt;andrewvc&gt;     right now it doesn&#8217;t do anything, it just looks for the first ipv4 addr</div>
<div class="line">[Thursday 10 February 2011] [11:42:31] &lt;andrewvc&gt;     for a given host</div>
<div class="line">[Thursday 10 February 2011] [11:43:18] &lt;andrewvc&gt;     prolly an OSX vs linux thing</div>
<div class="line">[Thursday 10 February 2011] [11:44:06] &lt;cremes&gt;       how can i disable it locally in your code?</div>
<div class="line">[Thursday 10 February 2011] [11:44:11] &lt;andrewvc&gt;     gem install dripdrop should fix it</div>
<div class="line">[Thursday 10 February 2011] [11:44:22] &lt;andrewvc&gt;     well hold on one sec</div>
<div class="line">[Thursday 10 February 2011] [11:44:26] &lt;andrewvc&gt;     pushing...</div>
<div class="line">[Thursday 10 February 2011] [11:44:31] &lt;cremes&gt;       heh</div>
<div class="line">[Thursday 10 February 2011] [11:44:39] &lt;andrewvc&gt;     ok pushed, dripdrop 0.9.6  should do it</div>
<div class="line">[Thursday 10 February 2011] [11:46:42] &lt;cremes&gt;       success</div>
<div class="line">[Thursday 10 February 2011] [11:46:45] &lt;andrewvc&gt;     nice!</div>
<div class="line">[Thursday 10 February 2011] [11:47:33] &lt;andrewvc&gt;     basically, this is a websocket &lt;-&gt; ZMQ &lt;-&gt; HTTP &lt;-&gt; Rack bridge</div>
<div class="line">[Thursday 10 February 2011] [11:47:34] &lt;cremes&gt;       andrewvc: new error:  <a class="reference external" href="https://gist.github.com/820863">https://gist.github.com/820863</a></div>
<div class="line">[Thursday 10 February 2011] [11:48:11] &lt;andrewvc&gt;     hmm, that&#8217;s a new one</div>
<div class="line">[Thursday 10 February 2011] [11:48:48] &lt;cremes&gt;       i&#8217;m looking at config.ru... do i need some /swf and /js dirs somewhere?</div>
<div class="line">[Thursday 10 February 2011] [11:48:59] &lt;andrewvc&gt;     yeah, they&#8217;re in public</div>
<div class="line">[Thursday 10 February 2011] [11:49:08] &lt;cremes&gt;       ah, so they are</div>
<div class="line">[Thursday 10 February 2011] [11:49:19] &lt;andrewvc&gt;     not sure about thin, hmmm</div>
<div class="line">[Thursday 10 February 2011] [11:49:34] &lt;cremes&gt;       is thin 1.2.7 the right one?</div>
<div class="line">[Thursday 10 February 2011] [11:50:02] &lt;andrewvc&gt;     oh, I just got it as well, it&#8217;s a 1.9.2 vs rbx issue hold on lemme pin it down</div>
<div class="line">[Thursday 10 February 2011] [11:51:01] &lt;andrewvc&gt;     ah, here we go</div>
<div class="line">[Thursday 10 February 2011] [11:51:02] &lt;andrewvc&gt;      thin -R config.ru start</div>
<div class="line">[Thursday 10 February 2011] [11:51:15] &lt;andrewvc&gt;     I was using old style syntax, apparently RBX doesn&#8217;t mind weirdly</div>
<div class="line">[Thursday 10 February 2011] [11:52:22] &lt;cremes&gt;       okay, i get the crash</div>
<div class="line">[Thursday 10 February 2011] [11:52:42] &lt;cremes&gt;       there are a <em>lot</em> of moving parts here... this is going to be tough</div>
<div class="line">[Thursday 10 February 2011] [11:53:01] &lt;andrewvc&gt;     yeah, that&#8217;s the thing</div>
<div class="line">[Thursday 10 February 2011] [11:53:10] &lt;cremes&gt;       do you also see the EM crash from run.sh?</div>
<div class="line">[Thursday 10 February 2011] [11:53:44] &lt;andrewvc&gt;     ohh yeah, now I do, this is the first time i&#8217;ve run it in 1.9.2 in a while, I guess rbx has been shielding me</div>
<div class="line">[Thursday 10 February 2011] [11:53:46] &lt;andrewvc&gt;     interesting</div>
<div class="line">[Thursday 10 February 2011] [11:54:01] &lt;cremes&gt;       i&#8217;m going to let you chase this a little bit more... :)</div>
<div class="line">[Thursday 10 February 2011] [11:54:05] &lt;andrewvc&gt;     yeah</div>
<div class="line">[Thursday 10 February 2011] [11:54:07] &lt;andrewvc&gt;     good find</div>
<div class="line">[Thursday 10 February 2011] [11:54:18] &lt;cremes&gt;       i find that i fix a <em>lot</em> of bugs by running my code across all 3 of the major runtimes</div>
<div class="line">[Thursday 10 February 2011] [11:54:20] &lt;andrewvc&gt;     i mean, if they&#8217;re synchronized, that opens up a whole new world</div>
<div class="line">[Thursday 10 February 2011] [11:54:29] &lt;cremes&gt;       some are more forgiving than others</div>
<div class="line">[Thursday 10 February 2011] [11:55:33] &lt;cremes&gt;       you might also try MRI 1.8.7p-&lt;whatever is latest&gt; just for giggles</div>
<div class="line">[Thursday 10 February 2011] [11:55:36] &lt;andrewvc&gt;     hehe</div>
<div class="line">[Thursday 10 February 2011] [11:55:43] &lt;andrewvc&gt;     yeah, well here&#8217;s the crazy thing, I&#8217;ve been  running socket-motor in rbx and 1.9.2</div>
<div class="line">[Thursday 10 February 2011] [11:55:50] &lt;andrewvc&gt;     just never thought to run the rack app in it</div>
<div class="line">[Thursday 10 February 2011] [11:55:51] &lt;cremes&gt;       i know the bindings don&#8217;t really have support for it, but it might shed some light</div>
<div class="line">[Thursday 10 February 2011] [11:56:01] &lt;cremes&gt;       heh</div>
<div class="line">[Thursday 10 February 2011] [11:56:15] &lt;andrewvc&gt;     I&#8217;m looking forward to jruby support in dripdrop, that&#8217;s around the corner, thin wasn&#8217;t a great choice</div>
<div class="line">[Thursday 10 February 2011] [11:56:35] &lt;andrewvc&gt;     thanks for shedding light on this though</div>
<div class="line">[Thursday 10 February 2011] [11:57:03] &lt;andrewvc&gt;     I guess I should still submit the strace zmq dev, prolly is a zmq bug, shouldn&#8217;t be possible anyway right?</div>
<div class="line">[Thursday 10 February 2011] [11:57:32] &lt;cremes&gt;       well, it depends</div>
<div class="line">[Thursday 10 February 2011] [11:57:59] &lt;cremes&gt;       is your rack app sending a 0mq packet in the right wire format?</div>
<div class="line">[Thursday 10 February 2011] [11:58:22] &lt;cremes&gt;       i.e. are you using a 0mq socket from rack or something else?</div>
<div class="line">[Thursday 10 February 2011] [11:58:39] &lt;andrewvc&gt;     nope, it doesn&#8217;t speak 0mq, it speaks http. Dripdrop lets you drop HTTP in for a req/rep</div>
<div class="line">[Thursday 10 February 2011] [11:58:55] &lt;andrewvc&gt;     so, I&#8217;m guessing EM is going crazy, and terminating strangely</div>
<div class="line">[Thursday 10 February 2011] [11:59:01] &lt;cremes&gt;       ok, then i don&#8217;t know</div>
<div class="line">[Thursday 10 February 2011] [11:59:44] &lt;cremes&gt;       don&#8217;t you just love bug hunts?</div>
<div class="line">[Thursday 10 February 2011] [11:59:46] &lt;andrewvc&gt;     yeah, well, the HTTP message gets turned into ZMQ xreq/xrep, then comes back as HTTP</div>
<div class="line">[Thursday 10 February 2011] [11:59:47] &lt;andrewvc&gt;     hah</div>
<div class="line">[Thursday 10 February 2011] [12:00:04] &lt;andrewvc&gt;     Ummm, I woke up at 4am yesterday with an idea to fix it, went back to sleep at 4:30. grumpy</div>
<div class="line">[Thursday 10 February 2011] [12:00:56] &lt;cremes&gt;       so funny... i was just telling my partner that i went to bed at midnight, laid awake for 2 hours and started coding again at 2 until 3</div>
<div class="line">[Thursday 10 February 2011] [12:01:01] &lt;cremes&gt;       i&#8217;m a bit grumpy today myself :)</div>
<div class="line">[Thursday 10 February 2011] [12:01:16] &lt;cremes&gt;       sometimes it&#8217;s impossible to turn off my brain</div>
<div class="line">[Thursday 10 February 2011] [12:01:23] &lt;andrewvc&gt;     lol</div>
<div class="line">[Thursday 10 February 2011] [12:01:26] &lt;andrewvc&gt;     same</div>
<div class="line">[Thursday 10 February 2011] [12:01:32] &lt;andrewvc&gt;     btw, apparently that error was unrelated</div>
<div class="line">[Thursday 10 February 2011] [12:02:13] &lt;andrewvc&gt;     I wasn&#8217;t handling an HTTP response, so EM died, handled it, now it lives  but zmq still dies, I&#8217;m gonna send this off to the list</div>
<div class="line">[Thursday 10 February 2011] [12:03:01] &lt;andrewvc&gt;     my hunch is there&#8217;s a bug in my app code, and EM is handling an exception strangely, and ZMQ is dying. I have no proof of this, but that&#8217;s my feeling</div>
<div class="line">[Thursday 10 February 2011] [12:04:55] &lt;cremes&gt;       andrewvc: any idea what line of code in dripdrop that this dies on?</div>
<div class="line">[Thursday 10 February 2011] [12:05:06] &lt;cremes&gt;       have you narrowed that piece down yet?</div>
<div class="line">[Thursday 10 February 2011] [12:05:10] &lt;andrewvc&gt;     I think that&#8217;s a red herring, I traced all the way through to ffi-rzmq</div>
<div class="line">[Thursday 10 February 2011] [12:05:24] &lt;andrewvc&gt;     to right before libzmq send</div>
<div class="line">[Thursday 10 February 2011] [12:05:38] &lt;andrewvc&gt;     but it&#8217;s dying trying to recv from a socket</div>
<div class="line">[Thursday 10 February 2011] [12:05:43] &lt;andrewvc&gt;     according to strace</div>
<div class="line">[Thursday 10 February 2011] [12:05:56] &lt;andrewvc&gt;     a tried changing up the message being sent, allocating a new one</div>
<div class="line">[Thursday 10 February 2011] [12:06:16] &lt;cremes&gt;       is the socket that it is sending on the same as the one libzmq is recv on?</div>
<div class="line">[Thursday 10 February 2011] [12:06:19] &lt;andrewvc&gt;     I tried checking ZMQ::EVENTS in a debugger right before the call as well, making sure it was writable</div>
<div class="line">[Thursday 10 February 2011] [12:06:24] &lt;andrewvc&gt;     nah, it&#8217;s a pub socket</div>
<div class="line">[Thursday 10 February 2011] [12:06:31] &lt;cremes&gt;       ok</div>
<div class="line">[Thursday 10 February 2011] [12:06:45] &lt;andrewvc&gt;     tcp vs inprocess vs ipc makes no diff either</div>
<div class="line">[Thursday 10 February 2011] [12:06:45] &lt;cremes&gt;       i bet this is some internal FD that the lib uses for talking amongst itself</div>
<div class="line">[Thursday 10 February 2011] [12:07:03] &lt;andrewvc&gt;     yeah, it uses a unix socket for that weird FD no matter which protocols I use</div>
<div class="line">[Thursday 10 February 2011] [12:07:32] &lt;cremes&gt;       you need to catch this in gdb</div>
<div class="line">[Thursday 10 February 2011] [12:08:06] &lt;cremes&gt;       run it like;  gdb &#8211;args ruby -I lib bin/socket-motor</div>
<div class="line">[Thursday 10 February 2011] [12:08:26] &lt;cremes&gt;       when it dies, you can print the zmq backtrace</div>
<div class="line">[Thursday 10 February 2011] [12:08:33]         * cremes goes to try this...</div>
<div class="line">[Thursday 10 February 2011] [12:08:51] &lt;andrewvc&gt;     awesome, I know nothing about GDB</div>
<div class="line">[Thursday 10 February 2011] [12:09:32] &lt;cremes&gt;       i know enough to be dangerous</div>
<div class="line">[Thursday 10 February 2011] [12:09:46] &lt;andrewvc&gt;     lol</div>
<div class="line">[Thursday 10 February 2011] [12:09:50] &lt;cremes&gt;       i have it in gdb... now i need sustrik or mato to tell me what they need to figure this out</div>
<div class="line">[Thursday 10 February 2011] [12:10:06] &lt;andrewvc&gt;     btw, I fixed the rack client</div>
<div class="line">[Thursday 10 February 2011] [12:10:28] &lt;cremes&gt;       <a class="reference external" href="https://gist.github.com/820902">https://gist.github.com/820902</a>   the backtrace in gdb</div>
<div class="line">[Thursday 10 February 2011] [12:10:32] &lt;andrewvc&gt;     if you pull socket motor thin won&#8217;t keep dying</div>
<div class="line">[Thursday 10 February 2011] [12:11:12] &lt;cremes&gt;       it didn&#8217;t die when i caught the error in gdb</div>
<div class="line">[Thursday 10 February 2011] [12:11:28] &lt;andrewvc&gt;     that&#8217;s good and bad</div>
<div class="line">[Thursday 10 February 2011] [12:11:35] &lt;cremes&gt;       it died when i exited gdb though</div>
<div class="line">[Thursday 10 February 2011] [12:11:44] &lt;andrewvc&gt;     interesting</div>
<div class="line">[Thursday 10 February 2011] [12:12:07] &lt;andrewvc&gt;     zmq acts weird in general when you ctrl-C</div>
<div class="line">[Thursday 10 February 2011] [12:12:08] &lt;cremes&gt;       andrewvc: which line in ffi-rzmq does it execute before choking?</div>
<div class="line">[Thursday 10 February 2011] [12:12:18] &lt;andrewvc&gt;     lemme dig it up</div>
<div class="line">[Thursday 10 February 2011] [12:12:20] &lt;cremes&gt;       yeah, the new reaper thread stuff is supposed to solve that</div>
<div class="line">[Thursday 10 February 2011] [12:13:10] &lt;andrewvc&gt;     socket.rb line 260</div>
<div class="line">[Thursday 10 February 2011] [12:13:16] &lt;andrewvc&gt;     yeah, I just pulled this morning</div>
<div class="line">[Thursday 10 February 2011] [12:13:25] &lt;andrewvc&gt;     no luck there, as far as the new reaper stuff</div>
<div class="line">[Thursday 10 February 2011] [12:13:58] &lt;andrewvc&gt;     well, it used to die there</div>
<div class="line">[Thursday 10 February 2011] [12:14:00] &lt;andrewvc&gt;     maybe not anymore</div>
<div class="line">[Thursday 10 February 2011] [12:14:17] &lt;cremes&gt;       any flags?</div>
<div class="line">[Thursday 10 February 2011] [12:14:27] &lt;cremes&gt;       NOBLOCK?</div>
<div class="line">[Thursday 10 February 2011] [12:14:35] &lt;andrewvc&gt;     yeah, I tried messing with those as well, it&#8217;s a two part PUB messages, topic + body</div>
<div class="line">[Thursday 10 February 2011] [12:14:39] &lt;andrewvc&gt;     yeah, noblock</div>
<div class="line">[Thursday 10 February 2011] [12:14:46] &lt;cremes&gt;       ok, so NOBLOCK &amp; SNDMORE</div>
<div class="line">[Thursday 10 February 2011] [12:14:50] &lt;andrewvc&gt;     i tried it with no flags as well</div>
<div class="line">[Thursday 10 February 2011] [12:14:56] &lt;cremes&gt;       ok</div>
<div class="line">[Thursday 10 February 2011] [12:15:20] &lt;cremes&gt;       how are you constructing the message? is message.address valid?</div>
<div class="line">[Thursday 10 February 2011] [12:15:54] &lt;cremes&gt;       i.e. maybe there is garbage in the message and 0mq is choking on that somehow</div>
<div class="line">[Thursday 10 February 2011] [12:16:16] &lt;andrewvc&gt;     <a class="reference external" href="https://github.com/andrewvc/dripdrop/blob/master/lib/dripdrop/handlers/zeromq.rb#L44">https://github.com/andrewvc/dripdrop/blob/master/lib/dripdrop/handlers/zeromq.rb#L44</a></div>
<div class="line">[Thursday 10 February 2011] [12:16:18] &lt;cremes&gt;       is the message freshly allocated with Message.new? or is it sourced from elsewhere?</div>
<div class="line">[Thursday 10 February 2011] [12:16:20] &lt;andrewvc&gt;     is how it&#8217;s constructed</div>
<div class="line">[Thursday 10 February 2011] [12:16:36] &lt;andrewvc&gt;     I tried firing up a debugger, allocating a new message, and sending that, right before it died</div>
<div class="line">[Thursday 10 February 2011] [12:16:50] &lt;andrewvc&gt;     so I used to be able to time it, like, it&#8217;d send 4 messages, and die on # 4</div>
<div class="line">[Thursday 10 February 2011] [12:17:05] &lt;andrewvc&gt;     so I stepped through the first 3, and inserted a new message right before zmq_send to test that out</div>
<div class="line">[Thursday 10 February 2011] [12:17:12] &lt;andrewvc&gt;     no luck there either</div>
<div class="line">[Thursday 10 February 2011] [12:17:15] &lt;cremes&gt;       are you sure this line is correct?</div>
<div class="line">[Thursday 10 February 2011] [12:17:16] &lt;cremes&gt;       <a class="reference external" href="https://github.com/andrewvc/dripdrop/blob/master/lib/dripdrop/handlers/zeromq.rb#L51">https://github.com/andrewvc/dripdrop/blob/master/lib/dripdrop/handlers/zeromq.rb#L51</a></div>
<div class="line">[Thursday 10 February 2011] [12:17:32] &lt;cremes&gt;       generally you OR flags together, not add them</div>
<div class="line">[Thursday 10 February 2011] [12:18:02] &lt;cremes&gt;       e.g. flags = (i + 1 &lt; num_parts ? ZMQ::SNDMORE : 0) | ZMQ::NOBLOCK</div>
<div class="line">[Thursday 10 February 2011] [12:18:25] &lt;andrewvc&gt;     oye, crap good catch</div>
<div class="line">[Thursday 10 February 2011] [12:18:28] &lt;andrewvc&gt;     <a href="#id13"><span class="problematic" id="id14">*</span></a>pacepalm</div>
<div class="line">[Thursday 10 February 2011] [12:18:32] &lt;andrewvc&gt;     <a href="#id15"><span class="problematic" id="id16">*</span></a>face palm</div>
<div class="line">[Thursday 10 February 2011] [12:18:40] &lt;andrewvc&gt;     lemme try that</div>
<div class="line">[Thursday 10 February 2011] [12:18:58] &lt;cremes&gt;       still crashes</div>
<div class="line">[Thursday 10 February 2011] [12:20:04] &lt;andrewvc&gt;     yep</div>
<div class="line">[Thursday 10 February 2011] [12:20:28] &lt;andrewvc&gt;     I think this is in libzmq, I mean, it shouldn&#8217;t ever reach there anyway</div>
<div class="line">[Thursday 10 February 2011] [12:20:34] &lt;andrewvc&gt;     no matter how inept I am :)</div>
<div class="line">[Thursday 10 February 2011] [12:21:30] &lt;andrewvc&gt;     that socket is used for a remote logger, so it&#8217;s not critical to the app. If I disable it, it runs fairly well</div>
<div class="line">[Thursday 10 February 2011] [12:21:49] &lt;cremes&gt;       still looking...</div>
<div class="line">[Thursday 10 February 2011] [12:21:54] &lt;andrewvc&gt;     well, aside from all the other bugs in it, that I haven&#8217;t had time to deal with as I&#8217;ve tracked down this.</div>
<div class="line">[Thursday 10 February 2011] [12:22:04] &lt;andrewvc&gt;     brb</div>
<div class="line">[Thursday 10 February 2011] [12:26:56] &lt;cremes&gt;       andrewvc: found something</div>
<div class="line">[Thursday 10 February 2011] [12:30:45] &lt;cremes&gt;       andrewvc: nope, false alarm</div>
<div class="line">[Thursday 10 February 2011] [12:33:05] &lt;andrewvc&gt;     back</div>
<div class="line">[Thursday 10 February 2011] [12:33:31] &lt;andrewvc&gt;     the amount of time I&#8217;ve dumped into this is a bit ridiculous at this point, hopefully the mailing list will have an answer</div>
<div class="line">[Thursday 10 February 2011] [12:33:56] &lt;Rich_Morin&gt;   Zed Shaw gave a very nice talk last night at the Bay Area Python group, talking about how he used ZeroMQ on assorted projects.</div>
<div class="line">[Thursday 10 February 2011] [12:33:57] &lt;andrewvc&gt;     my last hope is finishing jruby dripdrop support</div>
<div class="line">[Thursday 10 February 2011] [12:34:08] &lt;andrewvc&gt;     and seeing if jruby gives a better error</div>
<div class="line">[Thursday 10 February 2011] [12:36:41] &lt;andrewvc&gt;     that, or running git bisect on libzmq on a lazy saturday</div>
<div class="line">[Thursday 10 February 2011] [12:37:29] &lt;andrewvc&gt;     course, I guess I need a known good rev for that</div>
<div class="line">[Thursday 10 February 2011] [12:40:27] &lt;alexbOrsova&gt;  im having an issue with zeromq on ubuntu 10.04.1. I downloaded the library for posix, did &#8221;./configure&#8221;, &#8220;make&#8221;, &#8220;sudo make install&#8221;. Then I complied one of the examples and tried to run it and I got &#8220;error while loading shared libraries: libzmq.so.0&#8221;</div>
<div class="line">[Thursday 10 February 2011] [12:40:49] &lt;alexbOrsova&gt;  any suggestions?</div>
<div class="line">[Thursday 10 February 2011] [12:42:24] &lt;alexbOrsova&gt;  nevermind, it was a bug in the makefile, &#8220;/sbin/ldconfig&#8221; should probably be called as part of the &#8220;make install&#8221; process...</div>
<div class="line">[Thursday 10 February 2011] [13:03:23] &lt;Rich_Morin&gt;   Hi, guys.  Should we try for a SUSS session this Sunday?</div>
<div class="line">[Thursday 10 February 2011] [13:03:46] &lt;mikko&gt;        what is a SUSS session ?</div>
<div class="line">[Thursday 10 February 2011] [13:05:01] &lt;Rich_Morin&gt;   Sorry, wrong channel :-/</div>
<div class="line">[Thursday 10 February 2011] [13:05:19] &lt;Rich_Morin&gt;   SketchUp Sunday Social</div>
<div class="line">[Thursday 10 February 2011] [14:11:00] &lt;bitweiler&gt;    is ZMQ_REQ  and ZMQ_REP still use in library or should one use ZMQ_PULL &amp; ZMQ_PUSH?</div>
<div class="line">[Thursday 10 February 2011] [14:17:16] &lt;Seta00&gt;       bitweiler, PUSH and PULL aren&#8217;t replacements to REQ and REP</div>
<div class="line">[Thursday 10 February 2011] [14:19:51] &lt;andrewvc&gt;     cremes: I think I figured it out</div>
<div class="line">[Thursday 10 February 2011] [14:20:27] &lt;andrewvc&gt;     thanks for all the help, I mean it&#8217;s still most likely a ZMQ bug I think, but it looks like ZMQ::EVENTS is the cause</div>
<div class="line">[Thursday 10 February 2011] [14:20:38] &lt;cremes&gt;       andrewvc: good deal</div>
<div class="line">[Thursday 10 February 2011] [14:20:53] &lt;andrewvc&gt;     so, thanks for GDB, that narrowed it down to getsockopt</div>
<div class="line">[Thursday 10 February 2011] [14:20:54] &lt;cremes&gt;       bitweiler: REQ/REP and PUSH/PULL are different kinds of sockets</div>
<div class="line">[Thursday 10 February 2011] [14:21:19] &lt;cremes&gt;       bitweiler: PUSH/PULL used to have different names that were deprecated; i forget what they were</div>
<div class="line">[Thursday 10 February 2011] [14:21:20] &lt;andrewvc&gt;     and ZMQ::EVENTS would get checked by my em-zeromq library, and it&#8217;d work for a while, then kaput</div>
<div class="line">[Thursday 10 February 2011] [14:21:39] &lt;cremes&gt;       andrewvc: race condition in getsockopt you think?</div>
<div class="line">[Thursday 10 February 2011] [14:21:52] &lt;andrewvc&gt;     I think what may be happening still is, ruby is generating some kind of exception but ZMQ is dying first.</div>
<div class="line">[Thursday 10 February 2011] [14:22:36] &lt;andrewvc&gt;     the ZMQ::EVENTS calls aren&#8217;t necessary strictly, as far as I can tell, commenting them out in em-zeromq just results in recv or send being called, and those can fail and be handled</div>
<div class="line">[Thursday 10 February 2011] [14:23:05] &lt;andrewvc&gt;     so, I can&#8217;t speak to it being a race condition, but that sounds right to me</div>
<div class="line">[Thursday 10 February 2011] [14:26:34] &lt;cremes&gt;       interesting</div>
<div class="line">[Thursday 10 February 2011] [14:26:41] &lt;cremes&gt;       you should post your observations to the ML</div>
<div class="line">[Thursday 10 February 2011] [14:26:54] &lt;andrewvc&gt;     I&#8217;m going to for sure</div>
<div class="line">[Thursday 10 February 2011] [14:29:08] &lt;andrewvc&gt;     if you have some time chuck: <a class="reference external" href="https://github.com/andrewvc/em-zeromq/blob/master/lib/em-zeromq/connection.rb">https://github.com/andrewvc/em-zeromq/blob/master/lib/em-zeromq/connection.rb</a></div>
<div class="line">[Thursday 10 February 2011] [14:29:27] &lt;andrewvc&gt;     I just removed the calls to ZMQ::EVENTS</div>
<div class="line">[Thursday 10 February 2011] [14:30:06] &lt;andrewvc&gt;     I mean, if I just attempt to send or recv and it fails, that works, I can see how it could be slower depending on the ZMQ internals, since those FDs are kind of blunt instruments</div>
<div class="line">[Thursday 10 February 2011] [14:30:19] &lt;andrewvc&gt;     could use a second pair of more experienced eyes</div>
<div class="line">[Thursday 10 February 2011] [14:31:37] &lt;cremes&gt;       looking...</div>
<div class="line">[Thursday 10 February 2011] [14:31:47]         * cremes finds it funny that my eyes are more experienced</div>
<div class="line">[Thursday 10 February 2011] [14:33:50] &lt;andrewvc&gt;     I think it may just be calling ZMQ::EVENTS on writable sockets</div>
<div class="line">[Thursday 10 February 2011] [14:34:13] &lt;andrewvc&gt;     it may even just be PUB sockets, since that&#8217;s what it is in this case, leaving ZMQ::EVENTS enabled for readables doesn&#8217;t trigger it</div>
<div class="line">[Thursday 10 February 2011] [14:34:45] &lt;andrewvc&gt;     though, this is obviously all new, and perhaps further testing will reveal problems there as well</div>
<div class="line">[Thursday 10 February 2011] [14:35:33] &lt;cremes&gt;       andrewvc: not sure about the purpose of #deregister_writable; it just sets a flag that isn&#8217;t used anywhere</div>
<div class="line">[Thursday 10 February 2011] [14:36:42] &lt;andrewvc&gt;     oh, that&#8217;s used by eventmachine</div>
<div class="line">[Thursday 10 February 2011] [14:36:54] &lt;andrewvc&gt;     so, it tells EM to regard or disregard activity on the FD</div>
<div class="line">[Thursday 10 February 2011] [14:37:06] &lt;andrewvc&gt;     yeah, it&#8217;s a bit funky looking, could use a comment</div>
<div class="line">[Thursday 10 February 2011] [14:37:26] &lt;andrewvc&gt;     same thing in notify_readable</div>
<div class="line">[Thursday 10 February 2011] [14:37:41] &lt;cremes&gt;       ok</div>
<div class="line">[Thursday 10 February 2011] [14:37:52] &lt;cremes&gt;       nothing major jumps out at me; looks good</div>
<div class="line">[Thursday 10 February 2011] [14:38:28] &lt;andrewvc&gt;     cool. Well, I&#8217;ve got to get back to other stuff, but I&#8217;ll be posting gdb traces and other goodness on the list tonight</div>
<div class="line">[Thursday 10 February 2011] [14:38:39] &lt;cremes&gt;       ok</div>
<div class="line">[Thursday 10 February 2011] [14:38:40] &lt;andrewvc&gt;     thanks a bunch, if you hadn&#8217;t brought out GDB I think I&#8217;d still be stuck</div>
<div class="line">[Thursday 10 February 2011] [14:38:57] &lt;sysgears&gt;     hi guys, i&#8217;m trying to extend zmq termination, so that messages at the receiving pipe were all fetched before ZMQ terminates</div>
<div class="line">[Thursday 10 February 2011] [14:38:57] &lt;cremes&gt;       it&#8217;s nice to have multiple tools in your toolbag</div>
<div class="line">[Thursday 10 February 2011] [14:39:13] &lt;cremes&gt;       sysgears: take a look at ZMQ_LINGER</div>
<div class="line">[Thursday 10 February 2011] [14:41:04] &lt;sysgears&gt;     cremes, what for? I&#8217;m trying to not loose any messages at receiver end, ZMQ_LINGER is to set TTL for messages, its a different thing I think</div>
<div class="line">[Thursday 10 February 2011] [14:43:08] &lt;cremes&gt;       ZMQ_LINGER prevents the socket from closing until it has flushed all messages OR until the timeout has expired</div>
<div class="line">[Thursday 10 February 2011] [14:43:12] &lt;cremes&gt;       there is no TTL in 0mq</div>
<div class="line">[Thursday 10 February 2011] [14:43:44] &lt;cremes&gt;       and it isn&#8217;t possible to not lose messages at receiver end unless you do an explicit ACK/reply</div>
<div class="line">[Thursday 10 February 2011] [14:43:49] &lt;cremes&gt;       for each message</div>
<div class="line">[Thursday 10 February 2011] [14:43:51] &lt;sysgears&gt;     Cremes, this is true for sending end</div>
<div class="line">[Thursday 10 February 2011] [14:44:13] &lt;sysgears&gt;     I know it is not possible now, thats why I&#8217;m patching ZMQ</div>
<div class="line">[Thursday 10 February 2011] [14:44:43] &lt;cremes&gt;       ok</div>
<div class="line">[Thursday 10 February 2011] [14:44:52] &lt;cremes&gt;       are you creating a new socket type?</div>
<div class="line">[Thursday 10 February 2011] [14:45:58] &lt;sysgears&gt;     nope, I want that recv fetched all the messages it has before it will return ETERM</div>
<div class="line">[Thursday 10 February 2011] [14:46:36] &lt;sysgears&gt;     currently it returns ETERM right after it detects ctx_terminated is on</div>
<div class="line">[Thursday 10 February 2011] [14:46:56] &lt;cremes&gt;       do you plan to make that a socket option?</div>
<div class="line">[Thursday 10 February 2011] [14:47:17] &lt;Seta00&gt;       I&#8217;m having difficulties to track down the reason I&#8217;m hitting this assertion: nbytes == sizeof (command_t) (mailbox.cpp:244)</div>
<div class="line">[Thursday 10 February 2011] [14:47:49] &lt;cremes&gt;       Seta00: what os?</div>
<div class="line">[Thursday 10 February 2011] [14:47:52] &lt;Seta00&gt;       Linux</div>
<div class="line">[Thursday 10 February 2011] [14:47:56] &lt;Seta00&gt;       Ubuntu 10.10</div>
<div class="line">[Thursday 10 February 2011] [14:48:32] &lt;cremes&gt;       you might want to look at modifying some sysctls; the command_t&#8217;s use some of those buffers for ipc/tcp/udp</div>
<div class="line">[Thursday 10 February 2011] [14:48:35] &lt;sysgears&gt;     I plan to extend zmq_term semantics - it will not only flush all messages to be sent before termination it will also recv all messages that are currently in its buffers before termination.</div>
<div class="line">[Thursday 10 February 2011] [14:48:47] &lt;cremes&gt;       search the ML for sysctl and see what comes up</div>
<div class="line">[Thursday 10 February 2011] [14:49:00] &lt;Seta00&gt;       the ML?</div>
<div class="line">[Thursday 10 February 2011] [14:49:05] &lt;cremes&gt;       mailing list</div>
<div class="line">[Thursday 10 February 2011] [14:49:07] &lt;Seta00&gt;       oh</div>
<div class="line">[Thursday 10 February 2011] [14:49:21]         * cremes likes acronyms that confuse people</div>
<div class="line">[Thursday 10 February 2011] [14:49:24] &lt;Seta00&gt;       lol</div>
<div class="line">[Thursday 10 February 2011] [14:49:33] &lt;Seta00&gt;       don&#8217;t use ANU&#8217;s</div>
<div class="line">[Thursday 10 February 2011] [14:49:42] &lt;Seta00&gt;       (Acronyms Nobody Understand)</div>
<div class="line">[Thursday 10 February 2011] [14:50:24] &lt;cremes&gt;       yessir</div>
<div class="line">[Thursday 10 February 2011] [14:51:01] &lt;andrewvc&gt;     ANU&#8217;s are fine so long as they&#8217;re TLA&#8217;s</div>
<div class="line">[Thursday 10 February 2011] [14:51:22] &lt;cremes&gt;       andrewvc: hey, get back to work!</div>
<div class="line">[Thursday 10 February 2011] [14:51:38] &lt;andrewvc&gt;     lol</div>
<div class="line">[Thursday 10 February 2011] [15:00:15] &lt;Guthur&gt;       i have the scenario where requests come in on individual threads the reply to each comes back async on other threads, my solution is to use 0MQ, is it overkill and normal thread constructs more suited?</div>
<div class="line">[Thursday 10 February 2011] [15:00:22] &lt;Seta00&gt;       tried this: <a class="reference external" href="http://www.mail-archive.com/zeromq-dev&#64;lists.zeromq.org/msg06901.html">http://www.mail-archive.com/zeromq-dev&#64;lists.zeromq.org/msg06901.html</a></div>
<div class="line">[Thursday 10 February 2011] [15:00:23] &lt;Seta00&gt;       didn&#8217;t work</div>
<div class="line">[Thursday 10 February 2011] [15:03:15] &lt;cremes&gt;       Guthur: that&#8217;s a great use-case for the inproc transport</div>
<div class="line">[Thursday 10 February 2011] [15:03:25] &lt;kaib&gt; hi all. are there any other native implementation of zeromq than the reference c++ implementation?</div>
<div class="line">[Thursday 10 February 2011] [15:03:49] &lt;cremes&gt;       kaib: not that i know of</div>
<div class="line">[Thursday 10 February 2011] [15:04:30] &lt;cremes&gt;       Seta00: hmm... are there are sysctl&#8217;s for ipc?</div>
<div class="line">[Thursday 10 February 2011] [15:04:55] &lt;cremes&gt;       i&#8217;m pretty sure the command mailboxes are using ipc or something similar internal to the library</div>
<div class="line">[Thursday 10 February 2011] [15:04:58] &lt;kaib&gt; are they actively discouraged or just haven&#8217;t happened yet? the protocol seems like a great little language interoperability system.</div>
<div class="line">[Thursday 10 February 2011] [15:05:00] &lt;cremes&gt;       (though i could definitely be wrong)</div>
<div class="line">[Thursday 10 February 2011] [15:05:16] &lt;cremes&gt;       kaib: no one has come along to take a whack at it yet; you could be the first</div>
<div class="line">[Thursday 10 February 2011] [15:05:35] &lt;cremes&gt;       i&#8217;ve never seen the imatix guys discourage anybody from hacking on the lib or attempting a port</div>
<div class="line">[Thursday 10 February 2011] [15:05:59] &lt;Guthur&gt;       cremes, that&#8217;s my thought as well</div>
<div class="line">[Thursday 10 February 2011] [15:06:31] &lt;Guthur&gt;       trying to convince the team lead at work is proofing a challenge</div>
<div class="line">[Thursday 10 February 2011] [15:06:57] &lt;Guthur&gt;       he seems to think normal threading constructs and a global store are an &#8216;easy&#8217; solution</div>
<div class="line">[Thursday 10 February 2011] [15:07:14] &lt;Guthur&gt;       it&#8217;s funny though, this easy solution still does work right yet</div>
<div class="line">[Thursday 10 February 2011] [15:07:18] &lt;cremes&gt;       well, one way to discuss it is in terms of future scalability</div>
<div class="line">[Thursday 10 February 2011] [15:07:29] &lt;Guthur&gt;       does/doesn&#8217;t</div>
<div class="line">[Thursday 10 February 2011] [15:07:34] &lt;cremes&gt;       what might be a thread today could easily be a separate process (or on a separate box) tomorrow</div>
<div class="line">[Thursday 10 February 2011] [15:07:49] &lt;cremes&gt;       and the only thing you need to change is the transport string:  inproc -&gt; tcp</div>
<div class="line">[Thursday 10 February 2011] [15:08:35] &lt;Guthur&gt;       yeah, the flexibility is a real seller for me personally</div>
<div class="line">[Thursday 10 February 2011] [15:08:43] &lt;Guthur&gt;       that and the whole message passing concept</div>
<div class="line">[Thursday 10 February 2011] [15:09:05] &lt;kaib&gt; cremes: so the transports add some framing, do the sockets add any framing of their own?</div>
<div class="line">[Thursday 10 February 2011] [15:09:17] &lt;Guthur&gt;       I just have to keep plugging a way at work to try and convince others</div>
<div class="line">[Thursday 10 February 2011] [15:09:19] &lt;kaib&gt; cremes: i&#8217;ve been trying to figure out the exact wire format.</div>
<div class="line">[Thursday 10 February 2011] [15:09:39] &lt;kaib&gt; Guthur: what is the problem you are trying to solve, i logged on just past your description..</div>
<div class="line">[Thursday 10 February 2011] [15:09:54] &lt;Guthur&gt;       kaib i have the scenario where requests come in on individual threads the reply to each comes back async on other threads, my solution is to use 0MQ, is it overkill and normal thread constructs more suited?</div>
<div class="line">[Thursday 10 February 2011] [15:11:16] &lt;kaib&gt; ok, so are the original threads that received the request the ones that transmit out the response?</div>
<div class="line">[Thursday 10 February 2011] [15:12:17] &lt;kaib&gt; Guthur: ie. Client -&gt; Thread0 -&gt; async backend -&gt; Thread1 -&gt; Thread0 -&gt; Client</div>
<div class="line">[Thursday 10 February 2011] [15:13:35] &lt;Seta00&gt;       hmm, it has something to do with the way I&#8217;m killing the socket on disconnect</div>
<div class="line">[Thursday 10 February 2011] [15:17:08] &lt;Guthur&gt;       sorry i disco&#8217;d</div>
<div class="line">[Thursday 10 February 2011] [15:17:17] &lt;Guthur&gt;       kaib yeah that&#8217;s the scenario</div>
<div class="line">[Thursday 10 February 2011] [15:17:26] &lt;Guthur&gt;       multiple client requests as well</div>
<div class="line">[Thursday 10 February 2011] [15:17:39] &lt;Guthur&gt;       concurrent requests</div>
<div class="line">[Thursday 10 February 2011] [15:17:47] &lt;cremes&gt;       kaib: wire format documented here:  <a class="reference external" href="http://api.zeromq.org/zmq_tcp.html">http://api.zeromq.org/zmq_tcp.html</a></div>
<div class="line">[Thursday 10 February 2011] [15:18:27] &lt;Guthur&gt;       I actually have it solved with ZMQ</div>
<div class="line">[Thursday 10 February 2011] [15:18:58] &lt;Guthur&gt;       but just can&#8217;t get the buy in from my team lead to include the dependency</div>
<div class="line">[Thursday 10 February 2011] [15:19:05] &lt;Guthur&gt;       very frustrating</div>
<div class="line">[Thursday 10 February 2011] [15:19:07] &lt;cremes&gt;       Guthur: show your team lead how you can now break it up into multiple processes without changing any of the message queueing code</div>
<div class="line">[Thursday 10 February 2011] [15:19:17] &lt;cremes&gt;       that&#8217;s a pretty big win in my opinion</div>
<div class="line">[Thursday 10 February 2011] [15:19:59] &lt;kaib&gt; cremes: that&#8217;s the wire protocol for tcp, i&#8217;m reading the code and it seems like there is some other framing going on as well. there is talk about &#8220;data batches&#8221;</div>
<div class="line">[Thursday 10 February 2011] [15:20:34] &lt;cremes&gt;       kaib: not sure then; i haven&#8217;t heard the term &#8220;data batches&#8221; come up before</div>
<div class="line">[Thursday 10 February 2011] [15:23:40] &lt;kaib&gt; Guthur: when you fire off the request to the async backend do you have any chance of deciding which thread gets the response? or even which pool of threads?</div>
<div class="line">[Thursday 10 February 2011] [15:24:26] &lt;Guthur&gt;       kaib:nope its pretty opaque, the scenario is a request to a process running a quickFIX app</div>
<div class="line">[Thursday 10 February 2011] [15:24:58] &lt;Guthur&gt;       the requesting thread send off a, QuoteRequest FIX message, this will then return a Quote async on another thread</div>
<div class="line">[Thursday 10 February 2011] [15:27:24] &lt;kaib&gt; Guthur: ok, your team lead might be trying to avoid extra dependencies on external projects... ie. if you guys can get it to work with a simpler approach you will be good for a while.</div>
<div class="line">[Thursday 10 February 2011] [15:27:57] &lt;cremes&gt;       s/simpler/more familiar/</div>
<div class="line">[Thursday 10 February 2011] [15:28:19] &lt;kaib&gt; Guthur: i would benchmark your implementation. that gives you data to go on when the discussion resurfaces later..</div>
<div class="line">[Thursday 10 February 2011] [15:28:39] &lt;kaib&gt; cremes: that&#8217;s true. much can be said for believing in the familiar.. :-)</div>
<div class="line">[Thursday 10 February 2011] [15:28:55] &lt;cremes&gt;       kaib: don&#8217;t i know it! :)</div>
<div class="line">[Thursday 10 February 2011] [15:29:08] &lt;kaib&gt; cremes: in zmq_encoder.cpp, talking about batches.</div>
<div class="line">[Thursday 10 February 2011] [15:29:47] &lt;cremes&gt;       kaib: you need to chat with sustrik (primary dev) or drop a note to the mailing list</div>
<div class="line">[Thursday 10 February 2011] [15:30:06] &lt;cremes&gt;       i only dig into the internals when i have a showstopper bug</div>
<div class="line">[Thursday 10 February 2011] [15:30:12] &lt;kaib&gt; cremes: thanks.</div>
<div class="line">[Thursday 10 February 2011] [15:30:16] &lt;cremes&gt;       so far, i have somehow avoided the encoder stuff</div>
<div class="line">[Thursday 10 February 2011] [15:30:19] &lt;kaib&gt; sustrik: ping?</div>
<div class="line">[Thursday 10 February 2011] [15:30:22] &lt;cremes&gt;       you are welcome</div>
<div class="line">[Thursday 10 February 2011] [15:30:50] &lt;cremes&gt;       kaib: i think most of the devs are GMT+3</div>
<div class="line">[Thursday 10 February 2011] [15:30:59] &lt;Guthur&gt;       I think it is telling how no one has actually implemented the a solution using the &#8216;easy&#8217; global data approach</div>
<div class="line">[Thursday 10 February 2011] [15:32:12] &lt;kaib&gt; Guthur: heh.. well, you need to come well armed. working code and good political connections go a long way. :-)</div>
<div class="line">[Thursday 10 February 2011] [15:32:41] &lt;kaib&gt; cremes: oh, well i&#8217;m gmt+2, they seem to drop off awfully early.. :-)</div>
<div class="line">[Thursday 10 February 2011] [15:32:45] &lt;Guthur&gt;       well I have the first,</div>
<div class="line">[Thursday 10 February 2011] [15:33:15] &lt;Guthur&gt;       The half working solution they currently have takes the same time to do one quote as mine does to 60</div>
<div class="line">[Thursday 10 February 2011] [15:33:21] &lt;Guthur&gt;       to do 60*</div>
<div class="line">[Thursday 10 February 2011] [15:34:05] &lt;Guthur&gt;       That performance measurement has only became available to me this evening</div>
<div class="line">[Thursday 10 February 2011] [15:34:51] &lt;Guthur&gt;       though they are using HTTP for the remoting</div>
<div class="line">[Thursday 10 February 2011] [15:35:01] &lt;Guthur&gt;       so it will improve some when they can move a fast protocol</div>
<div class="line">[Thursday 10 February 2011] [15:35:04] &lt;Guthur&gt;       faster*</div>
<div class="line">[Thursday 10 February 2011] [15:36:20] &lt;Guthur&gt;       though it will need to be considerably faster than that, 5 secs per quote is just not going to cut it at all</div>
<div class="line">[Thursday 10 February 2011] [15:43:10] &lt;cremes&gt;       Guthur: i do <em>way</em> faster than that in <em>ruby</em></div>
<div class="line">[Thursday 10 February 2011] [16:21:43] &lt;chmod700&gt;     so I just grabbed 0mq+python bindings for v2.0.10 and am trying to get <a class="reference external" href="https://github.com/imatix/zguide/blob/master/examples/Python/mtserver.py">https://github.com/imatix/zguide/blob/master/examples/Python/mtserver.py</a> to work, can someone tell me what I should be sending to get the &#8220;World&#8221; response back?</div>
<div class="line">[Thursday 10 February 2011] [16:24:10] &lt;chmod700&gt;     all I see on my connection to port 5555 is &#8216;x01x00&#8217;</div>
<div class="line">[Thursday 10 February 2011] [16:25:58] &lt;ianbarber&gt;    are you connecting with 0mq?</div>
<div class="line">[Thursday 10 February 2011] [16:26:14] &lt;ianbarber&gt;    on both sides</div>
<div class="line">[Thursday 10 February 2011] [16:28:43] &lt;chmod700&gt;     ianbarber: no I was just using telnet to connect</div>
<div class="line">[Thursday 10 February 2011] [16:29:42] &lt;chmod700&gt;     I guess I missed something in the docs :), how does one go about layering their wire-format stuff on top of that XREP device?</div>
<div class="line">[Thursday 10 February 2011] [16:30:53] &lt;ianbarber&gt;    0mq pretty much does all the wire level stuff, you send your own format in the messages</div>
<div class="line">[Thursday 10 February 2011] [16:31:07] &lt;ianbarber&gt;    its very little overhead</div>
<div class="line">[Thursday 10 February 2011] [16:32:03] &lt;chmod700&gt;     ianbarber: so why doesn&#8217;t telnet work (or wget, or a browser) when hitting the XREP port?</div>
<div class="line">[Thursday 10 February 2011] [17:11:05] &lt;ianbarber&gt;    there is still a wire protocol, so you need to be able to understand that</div>
<div class="line">[Thursday 10 February 2011] [17:11:17] &lt;ianbarber&gt;    in general zmq is designed for people using the library at both ends</div>
<div class="line">[Thursday 10 February 2011] [17:14:51] &lt;chmod700&gt;     ianbarber: thanks, so for HTTP for instance, do I need to stand up my own HTTP server and then forward requests through a zmq socket to workers?</div>
<div class="line">[Thursday 10 February 2011] [17:15:06] &lt;chmod700&gt;     or is there some magic http zmq device?</div>
<div class="line">[Thursday 10 February 2011] [17:15:57] &lt;Skaag&gt;        the first.</div>
<div class="line">[Thursday 10 February 2011] [17:16:11] &lt;Skaag&gt;        there is no direct relation between http and zmq</div>
<div class="line">[Thursday 10 February 2011] [17:16:48] &lt;Skaag&gt;        if with java, you can use something like jetty to expose some kind of rest/json/xml interface, then pass the messages to a thread that publishes messages</div>
<div class="line">[Thursday 10 February 2011] [17:18:49] &lt;Guthur&gt;       are select_t, poll_t, epoll_t, devpoll_t and kqueue_t all essentially doing the same thing except with different raw connections</div>
<div class="line">[Thursday 10 February 2011] [17:19:44] &lt;ianbarber&gt;    chmod700: mongrel2 is quite good for doing a webserver with 0MQ transport to the backend</div>
<div class="line">[Thursday 10 February 2011] [17:19:57] &lt;ianbarber&gt;    but in general, yeah, that&#8217;s the kind of thing</div>
<div class="line">[Thursday 10 February 2011] [17:21:13] &lt;Skaag&gt;        ianbarber: any samples of such a setup with mongrel2?</div>
<div class="line">[Thursday 10 February 2011] [17:21:23] &lt;Skaag&gt;        would love to play around with it</div>
<div class="line">[Thursday 10 February 2011] [17:21:46] &lt;ianbarber&gt;    Skaag: look at the mongrel2 book, 0MQ is the only way you can do dynamic content with it</div>
<div class="line">[Thursday 10 February 2011] [17:22:08] &lt;Skaag&gt;        they have that as a sample? :)</div>
<div class="line">[Thursday 10 February 2011] [17:22:18] &lt;ianbarber&gt;    basically it binds a push socket, and sends the headers, path, and some other bits and pieces over it</div>
<div class="line">[Thursday 10 February 2011] [17:22:34] &lt;ianbarber&gt;    yeah, download mongrel2 and look in the examples dir</div>
<div class="line">[Thursday 10 February 2011] [17:23:28] &lt;Skaag&gt;        awesome</div>
<div class="line">[Thursday 10 February 2011] [17:23:31] &lt;Skaag&gt;        will do that now</div>
<div class="line">[Thursday 10 February 2011] [17:24:15] &lt;ianbarber&gt;    if you just need one way comms, take a look at mikko&#8217;s httpush <a class="reference external" href="https://github.com/mkoppanen/httpush">https://github.com/mkoppanen/httpush</a></div>
<div class="line">[Thursday 10 February 2011] [17:24:29] &lt;ianbarber&gt;    that&#8217;s great if you want to do network logging over http or similar</div>
<div class="line">[Thursday 10 February 2011] [17:41:27] &lt;Skaag&gt;        that&#8217;s one way, towards the client side, I assume?</div>
<div class="line">[Thursday 10 February 2011] [17:42:16] &lt;Skaag&gt;        damn -17 outside... not daring to go out.</div>
<div class="line">[Thursday 10 February 2011] [17:42:24] &lt;Skaag&gt;        celcius.</div>
<div class="line">[Thursday 10 February 2011] [18:58:45] &lt;eut&gt;  hello</div>
<div class="line">[Thursday 10 February 2011] [18:59:46] &lt;eut&gt;  when using zmq_xrep sockets how are the three message pieces (identity, delimiter, and body) supposed to be separated?</div>
<div class="line">[Thursday 10 February 2011] [19:06:04] &lt;cremes&gt;       eut: <a class="reference external" href="http://www.zeromq.org/tutorials:xreq-and-xrep">http://www.zeromq.org/tutorials:xreq-and-xrep</a></div>
<div class="line">[Thursday 10 February 2011] [19:06:07] &lt;cremes&gt;       that might help</div>
<div class="line">[Thursday 10 February 2011] [19:08:16] &lt;eut&gt;  great :]</div>
<div class="line">[Thursday 10 February 2011] [23:47:00] &lt;gui81&gt;        anyone here</div>
<div class="line">[Thursday 10 February 2011] [23:47:38] &lt;gui81&gt;        this is my first time joining an irc chat, is this working</div>
<div class="line">[Thursday 10 February 2011] [23:57:49] &lt;gui81&gt;        has anyone solved the async client problem, or does anyone have an example using zmq_poll</div>
<div class="line">[Thursday 10 February 2011] [23:58:26] &lt;gui81&gt;        Matt talks about this issue in the comments section on <a class="reference external" href="http://www.zeromq.org/blog:multithreaded-server">http://www.zeromq.org/blog:multithreaded-server</a></div>
<div class="line">[Friday 11 February 2011] [00:01:03] &lt;gui81&gt;  another question I have is whether or not it is possible to publish and subscribe on the same port number, I have tried a simple example, that compiled just fine, but it locked up my computer and I had to reboot</div>
<div class="line">[Friday 11 February 2011] [00:04:18] &lt;gui81&gt;  the multithreaded server example in the link above requires that you send, receive, send, receive, etc..., but I want to be able to send a message and maybe send a few more messages before a response is actually received.  This is so that I don&#8217;t have to wait on a request that could take a potentially long time</div>
<div class="line">[Friday 11 February 2011] [00:07:14] &lt;gui81&gt;  I could use pub/sub and rethink how I handle messages, but I was hoping I could do this over the same port</div>
<div class="line">[Friday 11 February 2011] [00:10:20] &lt;guido_g&gt;        publisher and subscriber should of course use the same port, otherwise they couldn&#8217;t talk to each other</div>
<div class="line">[Friday 11 February 2011] [00:11:34] &lt;gui81&gt;  I&#8217;m saying that I want a single process to both publish and subscribe like the following:</div>
<div class="line">[Friday 11 February 2011] [00:12:03] &lt;gui81&gt;  zmq::socket_t publisher(context, ZMQ_PUB);</div>
<div class="line">[Friday 11 February 2011] [00:12:03] &lt;guido_g&gt;        doesn&#8217;t matter</div>
<div class="line">[Friday 11 February 2011] [00:12:33] &lt;guido_g&gt;        publisher sends things out and subscriber needs to get the information</div>
<div class="line">[Friday 11 February 2011] [00:12:57] &lt;guido_g&gt;        so both need to share a communication path</div>
<div class="line">[Friday 11 February 2011] [00:13:02] &lt;gui81&gt;  publisher.bind(&#8220;<a class="reference external" href="tcp://">tcp://</a><a href="#id17"><span class="problematic" id="id18">*</span></a>:5563&#8221;);</div>
<div class="line">[Friday 11 February 2011] [00:13:02] &lt;gui81&gt;  zmq::socket_t subscriber(context, ZMQ_SUB);subscriber.connect(&#8220;tcp://localhost:5564&#8221;);</div>
<div class="line">[Friday 11 February 2011] [00:13:22] &lt;guido_g&gt;        wouldn&#8217;t work</div>
<div class="line">[Friday 11 February 2011] [00:13:26] &lt;gui81&gt;  sorry, let me try that again</div>
<div class="line">[Friday 11 February 2011] [00:13:45] &lt;guido_g&gt;        did you ever to network stuff befeore?</div>
<div class="line">[Friday 11 February 2011] [00:13:52] &lt;guido_g&gt;        s/to/do/</div>
<div class="line">[Friday 11 February 2011] [00:14:11] &lt;gui81&gt;  zmq::context_t context(1);</div>
<div class="line">[Friday 11 February 2011] [00:14:12] &lt;gui81&gt;      zmq::socket_t publisher(context, ZMQ_PUB);</div>
<div class="line">[Friday 11 February 2011] [00:14:12] &lt;gui81&gt;      publisher.bind(&#8220;<a class="reference external" href="tcp://">tcp://</a><a href="#id19"><span class="problematic" id="id20">*</span></a>:5563&#8221;);</div>
<div class="line">[Friday 11 February 2011] [00:14:12] &lt;gui81&gt;          // don&#8217;t do this on the same port as above, will have to reboot computer</div>
<div class="line">[Friday 11 February 2011] [00:14:12] &lt;gui81&gt;          zmq::socket_t subscriber(context, ZMQ_SUB);</div>
<div class="line">[Friday 11 February 2011] [00:14:13] &lt;gui81&gt;          subscriber.connect(&#8220;<a class="reference external" href="tcp://localhost:5563">tcp://localhost:5563</a>&#8221;);</div>
<div class="line">[Friday 11 February 2011] [00:14:13] &lt;gui81&gt;          subscriber.setsockopt( ZMQ_SUBSCRIBE, &#8220;C&#8221;, 1);</div>
<div class="line">[Friday 11 February 2011] [00:15:03] &lt;guido_g&gt;        i don&#8217;t know your computer and what you&#8217;ve done elsewhere, but the principle is right</div>
<div class="line">[Friday 11 February 2011] [00:15:59] &lt;guido_g&gt;        and for code please use a pastbin like <a class="reference external" href="https://gist.github.com/">https://gist.github.com/</a> or <a class="reference external" href="http://paste.pocoo.org/">http://paste.pocoo.org/</a></div>
<div class="line">[Friday 11 February 2011] [00:17:22] &lt;guido_g&gt;        next thing: if you have trouble w/ something, write a minimal example that shows the problem and show the complete code and describe the expeceted vs. the observed behaviour</div>
<div class="line">[Friday 11 February 2011] [00:18:03] &lt;gui81&gt;  are you suggesting i post my code on a website?</div>
<div class="line">[Friday 11 February 2011] [00:18:20] &lt;guido_g&gt;        yes</div>
<div class="line">[Friday 11 February 2011] [00:28:16] &lt;gui81&gt;  guido_g, I think I figured out what I was doing wrong with my pub/sub stuff.  looks like I was trying to bind on both sides.  Turns out this compiled just fine, but after running it, it would lock up.  I even had to reboot, kill -9 wasn&#8217;t working.  I am running on a Mac.  When I switched to only using one bind with multiple connects, things started working.</div>
<div class="line">[Friday 11 February 2011] [00:30:38] &lt;gui81&gt;  does anyone have any examples on an async client like what is suggested on <a class="reference external" href="http://www.zeromq.org/blog:multithreaded-server">http://www.zeromq.org/blog:multithreaded-server</a> by Matt in the comments section</div>
<div class="line">[Friday 11 February 2011] [00:31:17] &lt;guido_g&gt;        did you read the guide?</div>
<div class="line">[Friday 11 February 2011] [00:31:39] &lt;gui81&gt;  yes</div>
<div class="line">[Friday 11 February 2011] [00:33:49] &lt;gui81&gt;  using req/rep it looks like you always have to send, receive, send, receive.  If I want to send, send, receive, send, receive, recieve   how would I do it, are there examples out there</div>
<div class="line">[Friday 11 February 2011] [00:34:35] &lt;guido_g&gt;        use xreq/xrep sockets</div>
<div class="line">[Friday 11 February 2011] [00:40:17] &lt;gui81&gt;  do you know of an example showing how to use xreq/xrep for something similar to the scenario i mentioned?  all of the examples in the guide look like they are used when kicking off worker threads</div>
<div class="line">[Friday 11 February 2011] [00:41:43] &lt;guido_g&gt;        frankly, i don&#8217;t know what you intend</div>
<div class="line">[Friday 11 February 2011] [00:42:35] &lt;guido_g&gt;        if you have threads just let them talk via xreq/xrep</div>
<div class="line">[Friday 11 February 2011] [00:44:44] &lt;gui81&gt;  I would like to be able to do something similar to: s.send (request, callback);  where the sending thread won&#8217;t be blocked and the application can send more requests.  then the callback is invoked whenever a reply is received for that request</div>
<div class="line">[Friday 11 February 2011] [00:45:45] &lt;guido_g&gt;        a) MQ doesn&#8217;t do callbacks, you should have discovered that by now</div>
<div class="line">[Friday 11 February 2011] [00:46:42] &lt;guido_g&gt;        b) go read the XREQ/XREP docs again, there is no need for waiting or blocking</div>
<div class="line">[Friday 11 February 2011] [00:47:25] &lt;gui81&gt;  I understand they don&#8217;t do callbacks, but if I can build a wrapper that would function similar to the callback, then that would work for me.  if this is possible with xreq/xrep then I will try to look further into this type of socket.  I admit that I don&#8217;t know much about zeromq since I just started reading the guide today.  Thanks for the help.</div>
<div class="line">[Friday 11 February 2011] [00:48:39] &lt;guido_g&gt;        then finish reading the guide and the docs, will make a lot of things much clearer</div>
<div class="line">[Friday 11 February 2011] [00:49:13] &lt;jugg&gt;   I&#8217;ve had a system running for a couple of weeks, with zeromq built off of commit: 56bdba - and I just had the following assertion occur while running another round of stress tests: &#8220;Assertion failed: inpipes [current_in].active (xrep.cpp:229)&#8221;   Can that assert occur because of usage error, or why?</div>
<div class="line">[Friday 11 February 2011] [00:49:14] &lt;guido_g&gt;        ahh... and don&#8217;t expect cookbook like examples suited for your use-cases</div>
<div class="line">[Friday 11 February 2011] [00:53:33] &lt;jugg&gt;   irc logs show another instance of this assertion at <a class="reference external" href="http://travlr.github.com/zmqirclog/2010-November.html">http://travlr.github.com/zmqirclog/2010-November.html</a></div>
<div class="line">[Friday 11 February 2011] [01:10:44] &lt;bitweiler&gt;      i notice in the zeromq-FAQ that it doesn&#8217;t provide protocol buffering; what is the purpose of such said buffering?</div>
<div class="line">[Friday 11 February 2011] [01:14:34] &lt;guido_g&gt;        which faq item you&#8217;re reffering to?</div>
<div class="line">[Friday 11 February 2011] [01:16:12] &lt;guido_g&gt;        s/reffering/referring/</div>
<div class="line">[Friday 11 February 2011] [01:16:19] &lt;guido_g&gt;        need more coffee</div>
<div class="line">[Friday 11 February 2011] [01:16:49] &lt;bitweiler&gt;      sorry, i meant serializing data to/from the wire representation</div>
<div class="line">[Friday 11 February 2011] [01:17:14] &lt;bitweiler&gt;      guido_g: this FAQ: <a class="reference external" href="http://www.zeromq.org/area:faq">http://www.zeromq.org/area:faq</a></div>
<div class="line">[Friday 11 February 2011] [01:18:29] &lt;bitweiler&gt;      Does MQ include APIs for serializing data to/from the wire representation? what is the purpose of such serializing?</div>
<div class="line">[Friday 11 February 2011] [01:19:26] &lt;guido_g&gt;        as stated, there is no such api in mq</div>
<div class="line">[Friday 11 February 2011] [01:20:07] &lt;guido_g&gt;        and serialization in the context of messaging means to convert a data strcuture into/from a byte stream for transfer</div>
<div class="line">[Friday 11 February 2011] [01:23:17] &lt;guido_g&gt;        bitweiler: hope that answers your question</div>
<div class="line">[Friday 11 February 2011] [01:24:23] &lt;bitweiler&gt;      yes, thanks</div>
<div class="line">[Friday 11 February 2011] [01:24:54] &lt;guido_g&gt;        great, i gotta run now... :)</div>
<div class="line">[Friday 11 February 2011] [01:25:05]   * bitweiler waves at guido_g</div>
<div class="line">[Friday 11 February 2011] [02:02:13] Notice   -NickServ- This nickname is registered. Please choose a different nickname, or identify via /msg NickServ identify &lt;password&gt;.</div>
<div class="line">[Friday 11 February 2011] [02:02:13] Notice   -NickServ- You are now identified for travlr.</div>
<div class="line">[Friday 11 February 2011] [02:30:55] &lt;Guthur&gt; sustrik, ping</div>
<div class="line">[Friday 11 February 2011] [03:24:54] &lt;bitweiler&gt;      quick question, in the wuserver.c example from the guide what&#8217;s the purpose of the within statement?</div>
<div class="line">[Friday 11 February 2011] [03:30:35] &lt;sustrik&gt;        morning</div>
<div class="line">[Friday 11 February 2011] [03:30:55] &lt;bitweiler&gt;      good day sustrik</div>
<div class="line">[Friday 11 February 2011] [04:31:17] &lt;pieterh&gt;        bitweiler: it produces a random number between 0 and N</div>
<div class="line">[Friday 11 February 2011] [04:31:45] &lt;pieterh&gt;        sorry that it&#8217;s a bit cryptic, I&#8217;ll change that</div>
<div class="line">[Friday 11 February 2011] [05:01:04] &lt;sustrik&gt;        pieterh: seems like there&#8217;s something wrong with the mailing list</div>
<div class="line">[Friday 11 February 2011] [05:01:19] &lt;sustrik&gt;        i&#8217;ve sent a message there 5 mins ago</div>
<div class="line">[Friday 11 February 2011] [05:01:37] &lt;sustrik&gt;        and it&#8217;s still not there</div>
<div class="line">[Friday 11 February 2011] [05:05:05] &lt;mikko&gt;  good morning</div>
<div class="line">[Friday 11 February 2011] [05:31:50] &lt;sustrik&gt;        kaib: pong</div>
<div class="line">[Friday 11 February 2011] [05:32:11] &lt;sustrik&gt;        Guthur: pong</div>
<div class="line">[Friday 11 February 2011] [05:36:21] &lt;kaib&gt;   sustrik: hi there</div>
<div class="line">[Friday 11 February 2011] [05:36:51] &lt;kaib&gt;   sustrik: i&#8217;m toying around with a freshly written 0mq protocol stack and was looking into how the wire protocol works.</div>
<div class="line">[Friday 11 February 2011] [05:37:38] &lt;kaib&gt;   sustrik: my aim is to write a prototype to see if a messaging based solution could be a good replacement for rpc in our system.</div>
<div class="line">[Friday 11 February 2011] [05:37:59] &lt;sustrik&gt;        kaib: speaking of 0mq over TCP?</div>
<div class="line">[Friday 11 February 2011] [05:38:01] &lt;kaib&gt;   sustrik: being wire compatible with 0mq seems like a good idea</div>
<div class="line">[Friday 11 February 2011] [05:38:14] &lt;kaib&gt;   sustrik: TCP initially, maybe UDP and other protocols later.</div>
<div class="line">[Friday 11 February 2011] [05:38:33] &lt;sustrik&gt;        there&#8217;s no UDP transport for 0MQ so far...</div>
<div class="line">[Friday 11 February 2011] [05:38:40] &lt;sustrik&gt;        just PGM multicast</div>
<div class="line">[Friday 11 February 2011] [05:38:42] &lt;sustrik&gt;        anyway</div>
<div class="line">[Friday 11 February 2011] [05:38:48] &lt;sustrik&gt;        see zmq_tcp(7) man page</div>
<div class="line">[Friday 11 February 2011] [05:38:58] &lt;sustrik&gt;        there&#8217;s 0mq framing described</div>
<div class="line">[Friday 11 February 2011] [05:39:02] &lt;kaib&gt;   sustrik: yep, i saw the line level framing</div>
<div class="line">[Friday 11 February 2011] [05:39:06] &lt;sustrik&gt;        ok</div>
<div class="line">[Friday 11 February 2011] [05:39:07] &lt;mikko&gt;  kaib: you could probably get prototype running pretty quickly by using zeromq and ZFL RPC</div>
<div class="line">[Friday 11 February 2011] [05:39:29] &lt;sustrik&gt;        as for the wire protocol on top of that</div>
<div class="line">[Friday 11 February 2011] [05:39:34] &lt;kaib&gt;   sustrik: i was wondering about the framing used by the different ports</div>
<div class="line">[Friday 11 February 2011] [05:39:43] &lt;sustrik&gt;        it&#8217;s different for different messaging patterns</div>
<div class="line">[Friday 11 February 2011] [05:39:51] &lt;sustrik&gt;        REQ/REP</div>
<div class="line">[Friday 11 February 2011] [05:39:54] &lt;sustrik&gt;        PUB/SUB</div>
<div class="line">[Friday 11 February 2011] [05:39:57] &lt;sustrik&gt;        PUSH/PULL</div>
<div class="line">[Friday 11 February 2011] [05:40:04] &lt;kaib&gt;   mikko: what is ZFL RPC?</div>
<div class="line">[Friday 11 February 2011] [05:40:09] &lt;mikko&gt;  <a class="reference external" href="https://github.com/zeromq/zfl/blob/master/src/zfl_rpc.c">https://github.com/zeromq/zfl/blob/master/src/zfl_rpc.c</a></div>
<div class="line">[Friday 11 February 2011] [05:40:16] &lt;mikko&gt;  <a class="reference external" href="https://github.com/zeromq/zfl/blob/master/src/zfl_rpcd.c">https://github.com/zeromq/zfl/blob/master/src/zfl_rpcd.c</a></div>
<div class="line">[Friday 11 February 2011] [05:40:21] &lt;sustrik&gt;        you can think of each pattern as a separate protocol on top of basic 0mq framing</div>
<div class="line">[Friday 11 February 2011] [05:40:27] &lt;sustrik&gt;        which one are you interested in?</div>
<div class="line">[Friday 11 February 2011] [05:40:48] &lt;kaib&gt;   sustrik: pub/sub push/pull req/rep, in that order.</div>
<div class="line">[Friday 11 February 2011] [05:41:06] &lt;kaib&gt;   sustrik: we have all those patterns in the system..</div>
<div class="line">[Friday 11 February 2011] [05:41:17] &lt;sustrik&gt;        pub/sub and push/pull are easy</div>
<div class="line">[Friday 11 February 2011] [05:41:39] &lt;sustrik&gt;        the only specific so far is that the first message sent be each peer is identity</div>
<div class="line">[Friday 11 February 2011] [05:41:48] &lt;sustrik&gt;        (see ZMQ_IDENTITY socket option)</div>
<div class="line">[Friday 11 February 2011] [05:42:00] &lt;kaib&gt;   sustrik: what does the peer do with the identity?</div>
<div class="line">[Friday 11 February 2011] [05:42:01] &lt;sustrik&gt;        if no identity is set, empty message is sent</div>
<div class="line">[Friday 11 February 2011] [05:42:23] &lt;sustrik&gt;        it can use when reconnection happens</div>
<div class="line">[Friday 11 February 2011] [05:42:24] &lt;kaib&gt;   sustrik: i understood it&#8217;s used for persisting messages between crashes (presumably somewhere on disk?)</div>
<div class="line">[Friday 11 February 2011] [05:42:40] &lt;sustrik&gt;        if the new connection has same identity as one previously broken</div>
<div class="line">[Friday 11 February 2011] [05:42:53] &lt;sustrik&gt;        it can reuse the resources allocated for the old one</div>
<div class="line">[Friday 11 February 2011] [05:43:23] &lt;sustrik&gt;        so it can hold messages in the memory (or swap them to the disk) while the peer reconnects</div>
<div class="line">[Friday 11 February 2011] [05:44:03] &lt;sustrik&gt;        as for REQ/REP see here: <a class="reference external" href="http://www.zeromq.org/tutorials:xreq-and-xrep">http://www.zeromq.org/tutorials:xreq-and-xrep</a></div>
<div class="line">[Friday 11 February 2011] [05:44:17] &lt;kaib&gt;   sustrik: ok, so it&#8217;s useful for making sure that no messages are dropped even if the client disconnects, right?</div>
<div class="line">[Friday 11 February 2011] [05:45:00] &lt;sustrik&gt;        messages can still be lost if they were processed or &#8220;on-the-wire&#8221; during the failure</div>
<div class="line">[Friday 11 February 2011] [05:45:11] &lt;sustrik&gt;        but it makes the whole thing more reliable, yes</div>
<div class="line">[Friday 11 February 2011] [05:45:37] &lt;sustrik&gt;        aside of that identities are used for routing replies to the original requesters in REQ/REP pattern</div>
<div class="line">[Friday 11 February 2011] [05:45:41] &lt;sustrik&gt;        see the link above</div>
<div class="line">[Friday 11 February 2011] [05:45:50] &lt;sustrik&gt;        there&#8217;s a picture showing how it works</div>
<div class="line">[Friday 11 February 2011] [05:46:53] &lt;sustrik&gt;        kaib: btw, why write a new messaging solution?</div>
<div class="line">[Friday 11 February 2011] [05:47:11] &lt;sustrik&gt;        i&#8217;m not discouraging you, but it takes some manyears to get that done</div>
<div class="line">[Friday 11 February 2011] [05:47:58] &lt;kaib&gt;   sustrik: curiosity mostly, partially to see if a native implementation could be better integrated.</div>
<div class="line">[Friday 11 February 2011] [05:48:30] &lt;kaib&gt;   sustrik: we run a cluster consisting of ~50 nodes (we are still in pre launch) with the servers all written in Go.</div>
<div class="line">[Friday 11 February 2011] [05:48:48] &lt;kaib&gt;   sustrik: i was looking into hooking up mongrel2 as our http server and started reading more about 0mq.</div>
<div class="line">[Friday 11 February 2011] [05:48:56] &lt;sustrik&gt;        kaib: sure</div>
<div class="line">[Friday 11 February 2011] [05:49:08] &lt;kaib&gt;   sustrik: it seems like pattern used in 0mq is actually quite nice.</div>
<div class="line">[Friday 11 February 2011] [05:49:25] &lt;kaib&gt;   sustrik: i&#8217;ve used messaging systems back at Google but never really grokked them, the rpc system is so much more common.</div>
<div class="line">[Friday 11 February 2011] [05:49:51] &lt;sustrik&gt;        the patterns are the most interesting part of 0mq i think</div>
<div class="line">[Friday 11 February 2011] [05:50:04] &lt;kaib&gt;   sustrik: our main pain point is complexity we run 6 distinct server types with some very complex and latency sensitive interactions.</div>
<div class="line">[Friday 11 February 2011] [05:50:37] &lt;kaib&gt;   sustrik: i have a gut feeling that messages might be a good fit, but i need to write some code to make sure that&#8217;s true.</div>
<div class="line">[Friday 11 February 2011] [05:51:06] &lt;sustrik&gt;        give it a try</div>
<div class="line">[Friday 11 February 2011] [05:51:17] &lt;kaib&gt;   sustrik: i&#8217;m not trying to do a generic library, just something that fits our specific purpose. i&#8217;ll probably open source it when we have time, but it&#8217;s definitely just to scratch our own itch.</div>
<div class="line">[Friday 11 February 2011] [05:51:39] &lt;sustrik&gt;        well, good luck</div>
<div class="line">[Friday 11 February 2011] [05:51:45] &lt;kaib&gt;   sustrik: given the core 0mq library is pretty good .. :-)</div>
<div class="line">[Friday 11 February 2011] [05:52:22] &lt;sustrik&gt;        you know, i&#8217;ve seen loads of ad hoc messaging library projects running into troubles</div>
<div class="line">[Friday 11 February 2011] [05:52:32] &lt;sustrik&gt;        it looks easy when you start</div>
<div class="line">[Friday 11 February 2011] [05:52:46] &lt;kaib&gt;   what type of issues do they usually encounter?</div>
<div class="line">[Friday 11 February 2011] [05:53:07] &lt;sustrik&gt;        all kind of asynchronicity issues</div>
<div class="line">[Friday 11 February 2011] [05:53:28] &lt;sustrik&gt;        also scaling issues</div>
<div class="line">[Friday 11 February 2011] [05:53:43] &lt;sustrik&gt;        everything works ok in test env</div>
<div class="line">[Friday 11 February 2011] [05:53:59] &lt;sustrik&gt;        then when you move to production you start to exprience bottlenecks</div>
<div class="line">[Friday 11 February 2011] [05:54:14] &lt;kaib&gt;   yep, that seems to be a common pattern for all distributed code.</div>
<div class="line">[Friday 11 February 2011] [05:54:30] &lt;sustrik&gt;        later on it turns out that the bottleneck can&#8217;t be avoided without rewriting the whole code from scratch</div>
<div class="line">[Friday 11 February 2011] [05:54:31] &lt;sustrik&gt;        etc.</div>
<div class="line">[Friday 11 February 2011] [05:54:36] &lt;kaib&gt;   are the perf problems mostly in userspace or in interactions with the kernel?</div>
<div class="line">[Friday 11 February 2011] [05:54:42] &lt;sustrik&gt;        both</div>
<div class="line">[Friday 11 February 2011] [05:56:22] &lt;kaib&gt;   i&#8217;d love to know more specifics, obviously that&#8217;s something i&#8217;d rather avoid .. are the difficulties related to messaging systems or just concurrent/parallel code in general?</div>
<div class="line">[Friday 11 February 2011] [05:56:36] &lt;kaib&gt;   ie. do the people running into trouble have experience with writing distributed systems?</div>
<div class="line">[Friday 11 February 2011] [05:56:44] &lt;sustrik&gt;        sure</div>
<div class="line">[Friday 11 February 2011] [06:01:56] &lt;sustrik&gt;        for example, there&#8217;s some 12 manyears altogether spent on 0mq + many more years of messaging experience from beforehand</div>
<div class="line">[Friday 11 February 2011] [06:02:15] &lt;sustrik&gt;        but we still run into this kind of trouble occassionally</div>
<div class="line">[Friday 11 February 2011] [06:02:36] &lt;sustrik&gt;        say: what happens it 500 peers decide to disconnect at exactly the same moment?</div>
<div class="line">[Friday 11 February 2011] [06:02:55] &lt;sustrik&gt;        what&#8217;s the latency impact for the remaining peers?</div>
<div class="line">[Friday 11 February 2011] [06:03:11] &lt;sustrik&gt;        how does the number of cores on the system affect the impact</div>
<div class="line">[Friday 11 February 2011] [06:03:13] &lt;sustrik&gt;        etc.</div>
<div class="line">[Friday 11 February 2011] [06:03:18] &lt;sustrik&gt;        complex stuff</div>
<div class="line">[Friday 11 February 2011] [06:04:20] &lt;Guthur&gt; sustrik: Sorry I was not watching there</div>
<div class="line">[Friday 11 February 2011] [06:04:51] &lt;Guthur&gt; I was hoping to pick your brains a little regarding the polling classes in 0MQ</div>
<div class="line">[Friday 11 February 2011] [06:04:57] &lt;sustrik&gt;        sure</div>
<div class="line">[Friday 11 February 2011] [06:04:59] &lt;sustrik&gt;        shoot</div>
<div class="line">[Friday 11 February 2011] [06:05:17] &lt;Guthur&gt; I was investigating in relation to implementing windows named pipes</div>
<div class="line">[Friday 11 February 2011] [06:05:33] &lt;Guthur&gt; is the polling used internally by 0MQ</div>
<div class="line">[Friday 11 February 2011] [06:05:44] &lt;Guthur&gt; and are all the events required?</div>
<div class="line">[Friday 11 February 2011] [06:05:53] &lt;sustrik&gt;        what events?</div>
<div class="line">[Friday 11 February 2011] [06:05:56] &lt;Guthur&gt; eg POLLIN, POLLOUT, and POLLERR</div>
<div class="line">[Friday 11 February 2011] [06:06:19] &lt;sustrik&gt;        that&#8217;s used in POSIX poll()</div>
<div class="line">[Friday 11 February 2011] [06:06:33] &lt;sustrik&gt;        0mq virtualises the polling mechanism</div>
<div class="line">[Friday 11 February 2011] [06:06:51] &lt;sustrik&gt;        and from the user&#8217;s perspective you have these events:</div>
<div class="line">[Friday 11 February 2011] [06:06:57] &lt;sustrik&gt;        in_event</div>
<div class="line">[Friday 11 February 2011] [06:06:59] &lt;sustrik&gt;        out_event</div>
<div class="line">[Friday 11 February 2011] [06:07:02] &lt;sustrik&gt;        timer_event</div>
<div class="line">[Friday 11 February 2011] [06:07:30] &lt;kaib&gt;   sustrik: thanks, i&#8217;ll tinker around a bit and see what i get. we can always fall back on using the ref implementation if push comes to shove.</div>
<div class="line">[Friday 11 February 2011] [06:07:33] &lt;sustrik&gt;        (these are callbacks invoked by the poller class)</div>
<div class="line">[Friday 11 February 2011] [06:07:41] &lt;sustrik&gt;        kaib: sure</div>
<div class="line">[Friday 11 February 2011] [06:07:44] &lt;Guthur&gt; ok, sorry I&#8217;ll be right back</div>
<div class="line">[Friday 11 February 2011] [06:07:50] &lt;Guthur&gt; need to go into a conf call</div>
<div class="line">[Friday 11 February 2011] [06:07:58] &lt;Guthur&gt; sorry about this</div>
<div class="line">[Friday 11 February 2011] [06:09:36] &lt;Guthur&gt; I was checking out select_t, poll_t, epoll_t, devpoll_t and kqueue_t, as you recommended</div>
<div class="line">[Friday 11 February 2011] [06:09:47] &lt;Guthur&gt; is there anywhere else in particular I should look?</div>
<div class="line">[Friday 11 February 2011] [06:10:46] &lt;sustrik&gt;        nope, just implement the same interface with IOCP</div>
<div class="line">[Friday 11 February 2011] [06:10:59] &lt;sustrik&gt;        ah</div>
<div class="line">[Friday 11 February 2011] [06:11:10] &lt;sustrik&gt;        you should also redefine fd_t</div>
<div class="line">[Friday 11 February 2011] [06:11:18] &lt;sustrik&gt;        to resolve to HANDLE instead of SOCKET</div>
<div class="line">[Friday 11 February 2011] [06:11:21] &lt;Guthur&gt; Named Pipes in MSWin obviously don&#8217;t have a poll, all they have is call back functions on completion</div>
<div class="line">[Friday 11 February 2011] [06:11:42] &lt;Guthur&gt; ok</div>
<div class="line">[Friday 11 February 2011] [06:12:24] &lt;sustrik&gt;        afaiu you can use ReadFile/WriteFile</div>
<div class="line">[Friday 11 February 2011] [06:12:46] &lt;sustrik&gt;        and IOCP for polling</div>
<div class="line">[Friday 11 February 2011] [06:12:56] &lt;sustrik&gt;        check that out first though</div>
<div class="line">[Friday 11 February 2011] [06:14:49] &lt;Guthur&gt; yeah ReadFile/WriteFile sync, or ReadFileEx/WriteFileEx async</div>
<div class="line">[Friday 11 February 2011] [06:15:03] &lt;Guthur&gt; each of those accept a completion callback function</div>
<div class="line">[Friday 11 February 2011] [06:15:46] &lt;Guthur&gt; umm I haven&#8217;t seen this IOCP</div>
<div class="line">[Friday 11 February 2011] [06:15:50] &lt;Guthur&gt; I&#8217;ll check that out</div>
<div class="line">[Friday 11 February 2011] [08:28:13] &lt;zchrish&gt;        Question about exceptions and C++ : When a user gives a bogus hostname, the code asserts. Can I catch the error; what is the accepted alternative to dying in this case?</div>
<div class="line">[Friday 11 February 2011] [08:28:24] &lt;zchrish&gt;        This is on a connect.</div>
<div class="line">[Friday 11 February 2011] [08:29:40] &lt;drbobbeaty&gt;     You&#8217;re going to need to check the data before you pass it to zmq. The assert() is not &#8220;catchable&#8221; like an exception is.</div>
<div class="line">[Friday 11 February 2011] [08:31:18] &lt;zchrish&gt;        I see; thank you.</div>
<div class="line">[Friday 11 February 2011] [09:46:08] &lt;ianbarber&gt;      pieterh: re DPC talk, will do, I was just waiting to see if i&#8217;ll be doing it at confoo in canada as well (already speaking there about solr, they asked if I could do another). Not that it takes much longer to update twice</div>
<div class="line">[Friday 11 February 2011] [09:52:48] &lt;ianbarber&gt;      i do hope this talk doesn&#8217;t suck! different sort of audience with PHP devs to your fosdem one, not so much multithreading being discussed :)</div>
<div class="line">[Friday 11 February 2011] [09:56:54] &lt;sustrik&gt;        that makes the talk more interesting imo</div>
<div class="line">[Friday 11 February 2011] [12:27:49] &lt;mikko&gt;  pieterh: there?</div>
<div class="line">[Friday 11 February 2011] [13:52:56] &lt;Guthur&gt; do we have a way of executing unit tests on the build server?</div>
<div class="line">[Friday 11 February 2011] [13:53:09] &lt;Guthur&gt; or is that outside the remit</div>
<div class="line">[Friday 11 February 2011] [14:13:42] &lt;sustrik&gt;        Guthur: make check is executed when zmq is built</div>
<div class="line">[Friday 11 February 2011] [14:14:58] &lt;Guthur&gt; i wonder if I could get something similar set up for clrzmq1</div>
<div class="line">[Friday 11 February 2011] [14:15:05] &lt;Guthur&gt; clrzmq2*</div>
<div class="line">[Friday 11 February 2011] [14:19:01] &lt;Guthur&gt; mikko, you about?</div>
<div class="line">[Friday 11 February 2011] [16:29:09] &lt;CIA-21&gt; jzmq: 03Nathan Marz 07master * r7983d5c 10/ src/Socket.cpp : fix type for args to linger from github issue #26 - <a class="reference external" href="http://bit.ly/dWrCkv">http://bit.ly/dWrCkv</a></div>
<div class="line">[Friday 11 February 2011] [16:29:10] &lt;CIA-21&gt; jzmq: 03Gonzalo Diethelm 07master * r306e3b8 10/ src/Socket.cpp : Arranged proposed changes a bit, and added a cast to avoid a warning. - <a class="reference external" href="http://bit.ly/eiciUG">http://bit.ly/eiciUG</a></div>
<div class="line">[Friday 11 February 2011] [21:25:17] &lt;andrewvc&gt;       chuck</div>
<div class="line">[Friday 11 February 2011] [21:25:19] &lt;andrewvc&gt;       err</div>
<div class="line">[Friday 11 February 2011] [21:25:21] &lt;andrewvc&gt;       cremes: around?</div>
<div class="line">[Friday 11 February 2011] [21:25:32] &lt;andrewvc&gt;       I think I found the bug, it&#8217;s in ffi-rzmq I believe</div>
<div class="line">[Saturday 12 February 2011] [01:41:04] &lt;yrashk&gt;       under certain circumstances I am getting some weird segfault in zmq_recv (I use it in an Erlang NIF, and it works fine until I create a so called &#8216;release&#8217; for my erlang app)</div>
<div class="line">[Saturday 12 February 2011] [01:41:07] &lt;yrashk&gt;       <a class="reference external" href="https://gist.github.com/2b197cc5718a9f6452e6">https://gist.github.com/2b197cc5718a9f6452e6</a></div>
<div class="line">[Saturday 12 February 2011] [01:41:10] &lt;yrashk&gt;             peer_identity = 0x870e5bfa &lt;Address 0x870e5bfa out of bounds&gt;</div>
<div class="line">[Saturday 12 February 2011] [01:41:15] &lt;yrashk&gt;       looks suspicious</div>
<div class="line">[Saturday 12 February 2011] [01:41:31] &lt;yrashk&gt;       any ideas what to do to figure out the source of the problem</div>
<div class="line">[Saturday 12 February 2011] [01:41:42] &lt;yrashk&gt;       happens only in that beforementioned setting and only on osx</div>
<div class="line">[Saturday 12 February 2011] [01:41:45] &lt;yrashk&gt;       works fine on linux</div>
<div class="line">[Saturday 12 February 2011] [01:45:04] &lt;yrashk&gt;       sustrik: ^^^</div>
<div class="line">[Saturday 12 February 2011] [01:51:10] &lt;yrashk&gt;       and yes, this is 2.1.0 and master</div>
<div class="line">[Saturday 12 February 2011] [02:31:21] &lt;sustrik&gt;      yrashk: aren&#8217;t you using same socket from multiple threads?</div>
<div class="line">[Saturday 12 February 2011] [02:32:31] &lt;yrashk&gt;       well, all sockets are created in thread #1</div>
<div class="line">[Saturday 12 February 2011] [02:32:46] &lt;yrashk&gt;       then I use push socket from a thread #1</div>
<div class="line">[Saturday 12 February 2011] [02:32:55] &lt;yrashk&gt;       and a pul socket from thread #2</div>
<div class="line">[Saturday 12 February 2011] [02:32:58] &lt;yrashk&gt;       pull*</div>
<div class="line">[Saturday 12 February 2011] [02:33:56] &lt;yrashk&gt;       will that result in an undefined behaviour?</div>
<div class="line">[Saturday 12 February 2011] [02:35:55] &lt;sustrik&gt;      if passing of the socket from #1 to #2 is well synchronised, then it should be ok</div>
<div class="line">[Saturday 12 February 2011] [02:36:52] &lt;yrashk&gt;       Each MQ socket belonging to a particular context may only be used by the thread that created it using zmq_socket().</div>
<div class="line">[Saturday 12 February 2011] [02:37:02] &lt;yrashk&gt;       I might have missed this</div>
<div class="line">[Saturday 12 February 2011] [02:37:21] &lt;yrashk&gt;       so the documentation says I have to use the socket form a thread that created it?</div>
<div class="line">[Saturday 12 February 2011] [02:37:24] &lt;yrashk&gt;       from*</div>
<div class="line">[Saturday 12 February 2011] [02:37:37] &lt;sustrik&gt;      with 2.1 the restriction is alleviated</div>
<div class="line">[Saturday 12 February 2011] [02:37:47] &lt;yrashk&gt;       k</div>
<div class="line">[Saturday 12 February 2011] [02:37:48] &lt;sustrik&gt;      you <em>can</em> pass sockets between threads</div>
<div class="line">[Saturday 12 February 2011] [02:38:03] &lt;sustrik&gt;      but you can&#8217;t access a socket from 2 threads in parallel</div>
<div class="line">[Saturday 12 February 2011] [02:38:18] &lt;yrashk&gt;       I am never touching that pull socket from the 1st thread</div>
<div class="line">[Saturday 12 February 2011] [02:38:30] &lt;yrashk&gt;       except for its initialization</div>
<div class="line">[Saturday 12 February 2011] [02:39:36] &lt;sustrik&gt;      how do you pass the socket to the other thread?</div>
<div class="line">[Saturday 12 February 2011] [02:40:30] &lt;yrashk&gt;       it just lives in a class instance that 1st thread creates</div>
<div class="line">[Saturday 12 February 2011] [02:42:39] &lt;yrashk&gt;       after that 1s thread creates a 2nd thread and passes that object as an argument to a thread function</div>
<div class="line">[Saturday 12 February 2011] [02:42:50] &lt;sustrik&gt;      ok, i see</div>
<div class="line">[Saturday 12 February 2011] [02:42:53] &lt;sustrik&gt;      that should be ok</div>
<div class="line">[Saturday 12 February 2011] [02:43:30] &lt;yrashk&gt;       is there anything else that might result in that segfault? specifically on OSX</div>
<div class="line">[Saturday 12 February 2011] [02:43:39] &lt;yrashk&gt;       as Linux build seems to work just fine</div>
<div class="line">[Saturday 12 February 2011] [02:43:49] &lt;yrashk&gt;       at least I am yet to see a single crash in the same scenario</div>
<div class="line">[Saturday 12 February 2011] [02:43:58] &lt;yrashk&gt;       while OSX build crashes 80-90% times</div>
<div class="line">[Saturday 12 February 2011] [02:44:05] &lt;sustrik&gt;      well, what you have shown me looks like a socket have been closed while still being used</div>
<div class="line">[Saturday 12 February 2011] [02:44:22] &lt;sustrik&gt;      either from another thread</div>
<div class="line">[Saturday 12 February 2011] [02:44:51] &lt;sustrik&gt;      or from a single thread this way: zmq_close(x);zmq_recv(x,...);</div>
<div class="line">[Saturday 12 February 2011] [02:45:03] &lt;sustrik&gt;      do you have a minimal test case?</div>
<div class="line">[Saturday 12 February 2011] [02:45:31] &lt;yrashk&gt;       not yet</div>
<div class="line">[Saturday 12 February 2011] [02:45:38] &lt;yrashk&gt;       the setting is pretty complicated</div>
<div class="line">[Saturday 12 February 2011] [02:45:45] &lt;sustrik&gt;      ok</div>
<div class="line">[Saturday 12 February 2011] [02:45:57] &lt;yrashk&gt;       as it works just fine when not packaged as an erlang app release</div>
<div class="line">[Saturday 12 February 2011] [02:47:34] &lt;yrashk&gt;       I am just trying to think of any possible explanation of this segfault</div>
<div class="line">[Saturday 12 February 2011] [02:48:11] &lt;sustrik&gt;      library mismatch?</div>
<div class="line">[Saturday 12 February 2011] [02:48:31] &lt;sustrik&gt;      the recv that fails, is it the first recv called?</div>
<div class="line">[Saturday 12 February 2011] [02:50:07] &lt;yrashk&gt;       nope</div>
<div class="line">[Saturday 12 February 2011] [02:50:25] &lt;yrashk&gt;       normally anywhere from like 4 calls to about, say, 20</div>
<div class="line">[Saturday 12 February 2011] [02:52:38] &lt;sustrik&gt;      memory overwrite then?</div>
<div class="line">[Saturday 12 February 2011] [02:52:49] &lt;sustrik&gt;      it&#8217;s just a guesswork</div>
<div class="line">[Saturday 12 February 2011] [02:53:57] &lt;yrashk&gt;       well may be</div>
<div class="line">[Saturday 12 February 2011] [02:54:06] &lt;yrashk&gt;       but I am not quite positive how can this happen</div>
<div class="line">[Saturday 12 February 2011] [02:54:17] &lt;yrashk&gt;       and only when the app is packaged</div>
<div class="line">[Saturday 12 February 2011] [02:54:56] &lt;sustrik&gt;      it&#8217;a a segfault, right?</div>
<div class="line">[Saturday 12 February 2011] [02:55:09] &lt;sustrik&gt;      does it print out the address it segfaults at?</div>
<div class="line">[Saturday 12 February 2011] [02:56:48] &lt;yrashk&gt;       it is</div>
<div class="line">[Saturday 12 February 2011] [02:57:17] &lt;yrashk&gt;       <a class="reference external" href="https://gist.github.com/63c48785c8f42c6c1f8b">https://gist.github.com/63c48785c8f42c6c1f8b</a></div>
<div class="line">[Saturday 12 February 2011] [02:58:18] &lt;sustrik&gt;      i don&#8217;t see the notification about the segfault there</div>
<div class="line">[Saturday 12 February 2011] [02:58:51] &lt;sustrik&gt;      i mean what address it tries to access that is out of bounds?</div>
<div class="line">[Saturday 12 February 2011] [02:59:07] &lt;yrashk&gt;             peer_identity = 0x870e5bfa &lt;Address 0x870e5bfa out of bounds&gt;</div>
<div class="line">[Saturday 12 February 2011] [02:59:12] &lt;yrashk&gt;       I guess this is it</div>
<div class="line">[Saturday 12 February 2011] [03:00:35] &lt;sustrik&gt;      nope</div>
<div class="line">[Saturday 12 February 2011] [03:00:50] &lt;sustrik&gt;      it prints &#8220;segfault&#8221; somewhere</div>
<div class="line">[Saturday 12 February 2011] [03:00:58] &lt;sustrik&gt;      is there an address mentioned there?</div>
<div class="line">[Saturday 12 February 2011] [03:01:52] &lt;yrashk&gt;       it didn&#8217;t print any address</div>
<div class="line">[Saturday 12 February 2011] [03:02:05] &lt;yrashk&gt;       anyway I think you led me into something</div>
<div class="line">[Saturday 12 February 2011] [03:04:40] &lt;yrashk&gt;       thanks a lot!</div>
<div class="line">[Saturday 12 February 2011] [03:07:07] &lt;yrashk&gt;       I really appreciate your help, sustrik &#8211; I think I got it</div>
<div class="line">[Saturday 12 February 2011] [03:08:30]         * sustrik is curious</div>
<div class="line">[Saturday 12 February 2011] [03:08:36] &lt;sustrik&gt;      what&#8217;s the problem?</div>
<div class="line">[Saturday 12 February 2011] [03:09:15] &lt;yrashk&gt;       apparently due to the hack I used to ensure a NIF module is loaded, I was calling initializion of that NIF twice</div>
<div class="line">[Saturday 12 February 2011] [03:09:21] &lt;yrashk&gt;       and it rewrote the context</div>
<div class="line">[Saturday 12 February 2011] [03:09:23] &lt;yrashk&gt;       facepalm</div>
<div class="line">[Saturday 12 February 2011] [03:09:49] &lt;yrashk&gt;       absolute facepalm</div>
<div class="line">[Saturday 12 February 2011] [03:10:08] &lt;yrashk&gt;       well I didn&#8217;t check that it actually overwrote the context</div>
<div class="line">[Saturday 12 February 2011] [03:10:16] &lt;yrashk&gt;       but it is fairly trivial to guess that from the code</div>
<div class="line">[Saturday 12 February 2011] [03:10:19] &lt;yrashk&gt;       because it&#8217;s my code</div>
<div class="line">[Saturday 12 February 2011] [03:10:21] &lt;yrashk&gt;       :]</div>
<div class="line">[Saturday 12 February 2011] [03:12:59] &lt;sustrik&gt;      :)</div>
<div class="line">[Saturday 12 February 2011] [05:00:06] &lt;pieterh&gt;      hi guys</div>
<div class="line">[Saturday 12 February 2011] [05:00:24] &lt;pieterh&gt;      seems our email server was out of action for a while</div>
<div class="line">[Saturday 12 February 2011] [05:00:41] &lt;pieterh&gt;      it looks like stuff was queued but not being sent out</div>
<div class="line">[Saturday 12 February 2011] [05:01:00] &lt;pieterh&gt;      this would have affected the zeromq-dev list presumably</div>
<div class="line">[Saturday 12 February 2011] [05:01:33] &lt;pieterh&gt;      anyhow, I rebooted the beast and emails are now slowly appearing</div>
<div class="line">[Saturday 12 February 2011] [08:57:23] &lt;pieterh&gt;      Anyone hitting &#8220;Successful WSASTARTUP not yet performed (c:worksrczeromq2srcmailbox.cpp:263)&#8221; on Windows</div>
<div class="line">[Saturday 12 February 2011] [08:57:27] &lt;pieterh&gt;      ?</div>
<div class="line">[Saturday 12 February 2011] [09:18:25] &lt;Guthur&gt;       pieterh, never seen such an error myself</div>
<div class="line">[Saturday 12 February 2011] [09:18:58] &lt;Guthur&gt;       which windows version?</div>
<div class="line">[Saturday 12 February 2011] [09:21:17] &lt;pieterh&gt;      Guthur: I&#8217;m running WinXP, this hits at zmq_init()</div>
<div class="line">[Saturday 12 February 2011] [09:21:41] &lt;pieterh&gt;      Seems new to 2.1.0</div>
<div class="line">[Saturday 12 February 2011] [09:22:11] &lt;Guthur&gt;       I&#8217;ve be running 2.1.0 ok recently, WinXP as well</div>
<div class="line">[Saturday 12 February 2011] [09:22:58] &lt;Guthur&gt;       sorry, that&#8217;s not really helpful for you though</div>
<div class="line">[Saturday 12 February 2011] [09:23:18] &lt;pieterh&gt;      I&#8217;ll check if zmq is doing WSAStartup or not...</div>
<div class="line">[Saturday 12 February 2011] [09:24:39] &lt;Guthur&gt;       i&#8217;m looking at IOCP today for ICP on win</div>
<div class="line">[Saturday 12 February 2011] [09:24:56] &lt;Guthur&gt;       not sure if I will have it ready this weekend though, it&#8217;s not very well documented</div>
<div class="line">[Saturday 12 February 2011] [09:25:30] &lt;Guthur&gt;       ICP/IPC</div>
<div class="line">[Saturday 12 February 2011] [09:27:46] &lt;pieterh&gt;      getting ipc: to work on win32 would be great</div>
<div class="line">[Saturday 12 February 2011] [09:28:24] &lt;pieterh&gt;      for some reason I&#8217;m getting zmq calling make_socketpair before doing WSAStartup... strange</div>
<div class="line">[Saturday 12 February 2011] [09:37:36] &lt;sustrik&gt;      pieterh: what version are you using?</div>
<div class="line">[Saturday 12 February 2011] [09:37:42] &lt;pieterh&gt;      latest from github</div>
<div class="line">[Saturday 12 February 2011] [09:37:59] &lt;pieterh&gt;      stepping though, it definitely tries to create a mailbox socket pair before doing WSAStartup</div>
<div class="line">[Saturday 12 February 2011] [09:38:15] &lt;pieterh&gt;      C++ is a joy to understand</div>
<div class="line">[Saturday 12 February 2011] [09:38:22] &lt;sustrik&gt;      how come?</div>
<div class="line">[Saturday 12 February 2011] [09:38:26] &lt;sustrik&gt;      see ctx.cpp</div>
<div class="line">[Saturday 12 February 2011] [09:38:36] &lt;pieterh&gt;      I am staring at it :-)</div>
<div class="line">[Saturday 12 February 2011] [09:38:41] &lt;sustrik&gt;      ctx_t constructor</div>
<div class="line">[Saturday 12 February 2011] [09:38:52] &lt;sustrik&gt;      line 36</div>
<div class="line">[Saturday 12 February 2011] [09:38:53] &lt;pieterh&gt;      any specific line no?</div>
<div class="line">[Saturday 12 February 2011] [09:39:08] &lt;sustrik&gt;      the very thing fitst done is WSAStartup</div>
<div class="line">[Saturday 12 February 2011] [09:39:23] &lt;pieterh&gt;      well, line 36 is a blank line here</div>
<div class="line">[Saturday 12 February 2011] [09:39:30] &lt;pieterh&gt;      yes, the very first thing it does is WSAStartup</div>
<div class="line">[Saturday 12 February 2011] [09:40:07] &lt;sustrik&gt;      that&#8217;s zmq_init() implementation</div>
<div class="line">[Saturday 12 February 2011] [09:40:17] &lt;pieterh&gt;      ok, when I debug it step by step, I get...</div>
<div class="line">[Saturday 12 February 2011] [09:40:23] &lt;pieterh&gt;      (hang on, it&#8217;ll take me a second...)</div>
<div class="line">[Saturday 12 February 2011] [09:41:36] &lt;Guthur&gt;       cool, just got feedback of some users of zmq2 and clrzmq2 being used as core tech, sweet</div>
<div class="line">[Saturday 12 February 2011] [09:42:07] &lt;Guthur&gt;       good to be getting feedback on some field tests</div>
<div class="line">[Saturday 12 February 2011] [09:42:09] &lt;pieterh&gt;      sustrik: array, vector, mutex_t, vector, mailbox constructors before it does first line of ctx constructor</div>
<div class="line">[Saturday 12 February 2011] [09:42:38] &lt;pieterh&gt;      that is, after calling ctx constructor from zmq_init...</div>
<div class="line">[Saturday 12 February 2011] [09:42:38] &lt;sustrik&gt;      wait a sec, checking...</div>
<div class="line">[Saturday 12 February 2011] [09:42:57] &lt;pieterh&gt;      Guthur: saw that on twitter... nice</div>
<div class="line">[Saturday 12 February 2011] [09:43:06] &lt;sustrik&gt;      ok, got it</div>
<div class="line">[Saturday 12 February 2011] [09:43:10] &lt;sustrik&gt;      let me fix it</div>
<div class="line">[Saturday 12 February 2011] [09:43:26] &lt;pieterh&gt;      excellent, can you explain what it&#8217;s doing?</div>
<div class="line">[Saturday 12 February 2011] [09:43:44] &lt;Guthur&gt;       pieterh, they already caught a couple of bugs, so paying dividends already</div>
<div class="line">[Saturday 12 February 2011] [09:43:54] &lt;Guthur&gt;       bugs in clrzmq2</div>
<div class="line">[Saturday 12 February 2011] [09:44:10] &lt;pieterh&gt;      It&#8217;s nice to have users :-)</div>
<div class="line">[Saturday 12 February 2011] [09:44:12] &lt;sustrik&gt;      constructors of embedded object are called <em>before</em> the constructor of the main object</div>
<div class="line">[Saturday 12 February 2011] [09:44:26] &lt;pieterh&gt;      sustrik: ah, and mailbox is embedded I guess</div>
<div class="line">[Saturday 12 February 2011] [09:44:26] &lt;sustrik&gt;      ctx_t has a member called term_mailbox</div>
<div class="line">[Saturday 12 February 2011] [09:44:30] &lt;pieterh&gt;      right</div>
<div class="line">[Saturday 12 February 2011] [09:44:31] &lt;sustrik&gt;      right</div>
<div class="line">[Saturday 12 February 2011] [09:44:41]         * pieterh found a bug! :-)</div>
<div class="line">[Saturday 12 February 2011] [09:45:07] &lt;pieterh&gt;      you could move the WSAStartup code to zmq_init</div>
<div class="line">[Saturday 12 February 2011] [09:45:17] &lt;sustrik&gt;      yes, i should</div>
<div class="line">[Saturday 12 February 2011] [09:45:28] &lt;pieterh&gt;      well, let me try that, test it, submit a patch</div>
<div class="line">[Saturday 12 February 2011] [09:45:33] &lt;sustrik&gt;      goodo</div>
<div class="line">[Saturday 12 February 2011] [09:45:38] &lt;pieterh&gt;      it&#8217;ll take me 3 minutes...</div>
<div class="line">[Saturday 12 February 2011] [09:46:21] &lt;sustrik&gt;      also, to retain symetricity, move WSACleanup to zmq_term()</div>
<div class="line">[Saturday 12 February 2011] [09:50:38] &lt;zchrish&gt;      In C++, should a context ever be introduced in a place other than in main()?</div>
<div class="line">[Saturday 12 February 2011] [09:52:10] &lt;zchrish&gt;      I am trying to design a thread management strategy to incorporate some sort of error management. Will a context ever become corrupted?</div>
<div class="line">[Saturday 12 February 2011] [09:59:48] &lt;pieterh&gt;      sustrik: ok, fixed and tested, sending patch now</div>
<div class="line">[Saturday 12 February 2011] [10:04:39] &lt;pieterh&gt;      zchrish: you can create a context anywhere you like but two threads that want to communicate via inproc: must share the same context</div>
<div class="line">[Saturday 12 February 2011] [10:04:51] &lt;pieterh&gt;      so the natural place is usually where you create child threads, which is usually main()</div>
<div class="line">[Saturday 12 February 2011] [10:05:15] &lt;pieterh&gt;      and no, a context will not become corrupted unless your application overwrites memory erroneously</div>
<div class="line">[Saturday 12 February 2011] [10:05:41] &lt;zchrish&gt;      OK; thanks.</div>
<div class="line">[Saturday 12 February 2011] [10:17:20] &lt;sustrik&gt;      pieterh: please, sign-off the patch</div>
<div class="line">[Saturday 12 February 2011] [10:17:28] &lt;sustrik&gt;      (commit -s)</div>
<div class="line">[Saturday 12 February 2011] [10:40:11] &lt;Guthur&gt;       sustrik, he has left</div>
<div class="line">[Saturday 12 February 2011] [10:54:54] &lt;sustrik&gt;      ah, missed that, thanks</div>
<div class="line">[Saturday 12 February 2011] [10:55:23] &lt;Guthur&gt;       sustrik, question about the IOCP integration...</div>
<div class="line">[Saturday 12 February 2011] [10:55:32] &lt;sustrik&gt;      sure</div>
<div class="line">[Saturday 12 February 2011] [10:55:33] &lt;sustrik&gt;      go on</div>
<div class="line">[Saturday 12 February 2011] [10:55:54] &lt;Guthur&gt;       will the zmq engine be able to call PostQueuedCompletionStatus on socket recvs and sends</div>
<div class="line">[Saturday 12 February 2011] [10:56:37] &lt;sustrik&gt;      ?</div>
<div class="line">[Saturday 12 February 2011] [10:56:49] &lt;Guthur&gt;       i could be missing something but that seems to be how IOCP works, it&#8217;s just a means of syncing stuff</div>
<div class="line">[Saturday 12 February 2011] [10:57:43] &lt;Guthur&gt;       so the polling object calls GetQueuedCompletionStatusEx to get any signalled events</div>
<div class="line">[Saturday 12 February 2011] [10:58:17] &lt;Guthur&gt;       but i&#8217;m having trouble seeing where these would get signalled form</div>
<div class="line">[Saturday 12 February 2011] [10:58:19] &lt;Guthur&gt;       from*</div>
<div class="line">[Saturday 12 February 2011] [10:58:34] &lt;sustrik&gt;      i would say the NamesPipe would signal it</div>
<div class="line">[Saturday 12 February 2011] [10:58:44] &lt;sustrik&gt;      you don&#8217;t need to do that yourself</div>
<div class="line">[Saturday 12 February 2011] [10:58:57] &lt;Guthur&gt;       that&#8217;s what i was initially thinking too</div>
<div class="line">[Saturday 12 February 2011] [10:59:08] &lt;Guthur&gt;       i&#8217;ll dig a bit more</div>
<div class="line">[Saturday 12 February 2011] [10:59:09]         * sustrik never used IOCP though</div>
<div class="line">[Saturday 12 February 2011] [10:59:16] &lt;Guthur&gt;       the documentation is useless</div>
<div class="line">[Saturday 12 February 2011] [10:59:22] &lt;Guthur&gt;       MSDN is crap</div>
<div class="line">[Saturday 12 February 2011] [11:01:42] &lt;sustrik&gt;      any examples out there?</div>
<div class="line">[Saturday 12 February 2011] [11:02:16] &lt;Guthur&gt;       some stuff, I have more code here, but they do seem to be calling PostQueuedCompletionStatus explicitly</div>
<div class="line">[Saturday 12 February 2011] [11:02:33] &lt;Guthur&gt;       they are passing custom overlapped structs with event details</div>
<div class="line">[Saturday 12 February 2011] [11:03:38] &lt;Guthur&gt;       I have some server code here, i&#8217;ll look through that</div>
<div class="line">[Saturday 12 February 2011] [11:04:12] &lt;sustrik&gt;      Have you seen this:</div>
<div class="line">[Saturday 12 February 2011] [11:04:13] &lt;sustrik&gt;      <a class="reference external" href="http://lists.zeromq.org/pipermail/zeromq-dev/2010-September/006240.html">http://lists.zeromq.org/pipermail/zeromq-dev/2010-September/006240.html</a></div>
<div class="line">[Saturday 12 February 2011] [11:06:30] &lt;Guthur&gt;       I hadn&#8217;t seen that</div>
<div class="line">[Saturday 12 February 2011] [11:59:56] &lt;Guthur&gt;       I think I&#8217;m just going to have to throw some code together an experiment</div>
<div class="line">[Saturday 12 February 2011] [12:23:06] &lt;sustrik&gt;      maybe discussing it at some windows forum may give you some insight into different technologies</div>
<div class="line">[Saturday 12 February 2011] [12:23:16] &lt;Guthur&gt;       sustrik, way ahead. hehe</div>
<div class="line">[Saturday 12 February 2011] [12:23:26] &lt;Guthur&gt;       talking to someone on #winapi</div>
<div class="line">[Saturday 12 February 2011] [12:23:29] &lt;sustrik&gt;      :)</div>
<div class="line">[Saturday 12 February 2011] [12:23:50] &lt;Guthur&gt;       it is indeed possible to get events automatically from pipes via IOCP</div>
<div class="line">[Saturday 12 February 2011] [12:23:56] &lt;Guthur&gt;       it&#8217;s just a little confusing</div>
<div class="line">[Saturday 12 February 2011] [12:32:10] &lt;sustrik&gt;      i see</div>
<div class="line">[Saturday 12 February 2011] [12:36:16] &lt;CIA-21&gt;       zeromq2: 03Pieter Hintjens 07master * r14a0e14 10/ (src/ctx.cpp src/zmq.cpp):</div>
<div class="line">[Saturday 12 February 2011] [12:36:16] &lt;CIA-21&gt;       zeromq2: Fixed win32 issue with WSAStartup</div>
<div class="line">[Saturday 12 February 2011] [12:36:16] &lt;CIA-21&gt;       zeromq2:  - ctx constructor was calling mailbox_t constructor implicitly</div>
<div class="line">[Saturday 12 February 2011] [12:36:16] &lt;CIA-21&gt;       zeromq2:  - moved WSAStartup and WSACleanup to be outside constructor/destructor</div>
<div class="line">[Saturday 12 February 2011] [12:36:16] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Pieter Hintjens &lt;<a class="reference external" href="mailto:ph&#37;&#52;&#48;imatix&#46;com">ph<span>&#64;</span>imatix<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/f693K5">http://bit.ly/f693K5</a></div>
<div class="line">[Saturday 12 February 2011] [14:01:52] &lt;eut&gt;  does anyone use the lua zmq bindings? i&#8217;m having some trouble with the nonblocking recv</div>
<div class="line">[Saturday 12 February 2011] [14:02:03] &lt;eut&gt;  it seems as though i can never receive a message</div>
<div class="line">[Saturday 12 February 2011] [14:05:05] &lt;cremes&gt;       eut: what kind of sockets are you using in your test?</div>
<div class="line">[Saturday 12 February 2011] [14:05:15] &lt;eut&gt;  xrep/xreq</div>
<div class="line">[Saturday 12 February 2011] [14:09:02] &lt;eut&gt;  ah, never mind...</div>
<div class="line">[Saturday 12 February 2011] [14:09:14] &lt;cremes&gt;       ok</div>
<div class="line">[Saturday 12 February 2011] [14:09:26] &lt;eut&gt;  it looks like zmq buffers outgoing messages, sending several all at once</div>
<div class="line">[Saturday 12 February 2011] [14:10:09] &lt;eut&gt;  so sometimes i would quit listening before it finally sent</div>
<div class="line">[Saturday 12 February 2011] [14:10:10] &lt;cremes&gt;       i believe it has an internal timer on its I/O thread so that messages are coalesced and sent</div>
<div class="line">[Saturday 12 February 2011] [14:10:26] &lt;cremes&gt;       kind of like nagle&#8217;s algorithm</div>
<div class="line">[Saturday 12 February 2011] [14:10:56] &lt;eut&gt;  ok i see</div>
<div class="line">[Saturday 12 February 2011] [14:11:47] &lt;eut&gt;  is there a way to influence that internal timer (or whatever)?</div>
<div class="line">[Saturday 12 February 2011] [14:18:16] &lt;cremes&gt;       eut: don&#8217;t know... plus, i may be wrong on that</div>
<div class="line">[Saturday 12 February 2011] [14:18:57] &lt;cremes&gt;       ask the mailing list; be sure to include a pointer to your code just in case it&#8217;s a different issue</div>
<div class="line">[Saturday 12 February 2011] [14:19:05] &lt;eut&gt;  ok</div>
<div class="line">[Saturday 12 February 2011] [14:35:46] &lt;zedas&gt;        hey can anyone point me at the docs on how 2.1.0 does graceful shutdown?  apparently there&#8217;s a change where sockets will LINGER or not?</div>
<div class="line">[Saturday 12 February 2011] [14:37:53] &lt;cremes&gt;       zedas: <a class="reference external" href="https://github.com/zeromq/zeromq2/blob/master/doc/zmq_term.txt">https://github.com/zeromq/zeromq2/blob/master/doc/zmq_term.txt</a></div>
<div class="line">[Saturday 12 February 2011] [14:38:19] &lt;cremes&gt;       and</div>
<div class="line">[Saturday 12 February 2011] [14:38:20] &lt;cremes&gt;       <a class="reference external" href="https://github.com/zeromq/zeromq2/blob/master/doc/zmq_setsockopt.txt">https://github.com/zeromq/zeromq2/blob/master/doc/zmq_setsockopt.txt</a></div>
<div class="line">[Saturday 12 February 2011] [14:38:54] &lt;cremes&gt;       by default, it will &#8220;linger&#8221; forever until all packets are flushed</div>
<div class="line">[Saturday 12 February 2011] [14:47:10] &lt;Guthur&gt;       ah, i think i&#8217;m making progress</div>
<div class="line">[Saturday 12 February 2011] [14:47:57] &lt;Guthur&gt;       i&#8217;ll not have the IOCP in ZMQ tonight, but I think i might be able to get it in soon enough</div>
<div class="line">[Saturday 12 February 2011] [14:48:21] &lt;Guthur&gt;       I have it working in a small test client server app</div>
<div class="line">[Saturday 12 February 2011] [15:03:03] &lt;zedas&gt;        cremes: ok thanks, i&#8217;ve gotta get 2.1.0 working with mongrel2 and this is the only thing that&#8217;s broken right now.</div>
<div class="line">[Saturday 12 February 2011] [19:08:22] &lt;rbitcon&gt;      Howdy, I am kooking to be pointed in the right direction for help</div>
<div class="line">[Saturday 12 February 2011] [19:09:51] &lt;rbitcon&gt;      I am using zeromq with Python in a REQ/RESP model with one server and many &#8220;workers&#8221;. I see that the zmq library take up hude amounts of RAM</div>
<div class="line">[Saturday 12 February 2011] [19:11:08] &lt;rbitcon&gt;      I read the docs about socket.setsockopt(zmq.HWM, 125), but it is not that clear</div>
<div class="line">[Saturday 12 February 2011] [19:11:24] &lt;rbitcon&gt;      any pointers?</div>
<div class="line">[Saturday 12 February 2011] [19:52:17] &lt;rbitcon&gt;      Solved my problem with memory usage.</div>
<div class="line">[Saturday 12 February 2011] [19:53:49] &lt;rbitcon&gt;      I downloaded pyzmq 2.0.10.1 and dis a plan python.exe setup.py install, previously i did a development build and install or 2.0.10. This is all under windows7 and using python2.6</div>
<div class="line">[Saturday 12 February 2011] [20:10:11] &lt;tjgillies&gt;    if im behind NAT can i use zeromq to do udp hole punching?</div>
<div class="line">[Saturday 12 February 2011] [22:35:24] &lt;Seta00&gt;       anyone from the pyzmq team here?</div>
<div class="line">[Saturday 12 February 2011] [22:35:43] &lt;Seta00&gt;       in fact, anyone with python 2.7 pyzmq builds for windows here?</div>
<div class="line">[Saturday 12 February 2011] [22:35:47] &lt;Seta00&gt;       it just won&#8217;t install</div>
<div class="line">[Sunday 13 February 2011] [03:50:48] &lt;sustrik&gt;        zedas: just set ZMQ_LINGER option to zero for all the sockets and everything should work as with 2.0.x</div>
<div class="line">[Sunday 13 February 2011] [03:52:34] &lt;sustrik&gt;        Guthut: wow!</div>
<div class="line">[Sunday 13 February 2011] [04:06:39] &lt;CIA-21&gt; zeromq2: 03Martin Sustrik 07master * rba26cc9 10/ src/zmq.cpp :</div>
<div class="line">[Sunday 13 February 2011] [04:06:39] &lt;CIA-21&gt; zeromq2: Build problem with OpenPGM and MSVC fixed</div>
<div class="line">[Sunday 13 February 2011] [04:06:39] &lt;CIA-21&gt; zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/guRl75">http://bit.ly/guRl75</a></div>
<div class="line">[Sunday 13 February 2011] [06:30:27] &lt;Guthur&gt; Sustrik: ping</div>
<div class="line">[Sunday 13 February 2011] [06:33:11] &lt;DeadZen&gt;        whats zeromq?</div>
<div class="line">[Sunday 13 February 2011] [06:38:52] &lt;mikko&gt;  DeadZen: <a class="reference external" href="http://www.zeromq.org/">http://www.zeromq.org/</a></div>
<div class="line">[Sunday 13 February 2011] [06:44:23] &lt;Guthur&gt; in like the &#8216;0MQ in 100 words&#8217; in the guide as a description</div>
<div class="line">[Sunday 13 February 2011] [06:44:25] &lt;Guthur&gt; <a class="reference external" href="http://zguide.zeromq.org/chapter:all#toc2">http://zguide.zeromq.org/chapter:all#toc2</a></div>
<div class="line">[Sunday 13 February 2011] [06:49:59] &lt;Guthur&gt; mikko, would be possible to have tests run as part of a bindings build, on the build server?</div>
<div class="line">[Sunday 13 February 2011] [06:51:57] &lt;mikko&gt;  sure</div>
<div class="line">[Sunday 13 February 2011] [06:53:20] &lt;Guthur&gt; cool, I don&#8217;t have the tests at the moment, but it is something I would like to add in the future for clrzmq2</div>
<div class="line">[Sunday 13 February 2011] [07:04:55] &lt;mikko&gt;  it should be a fairly painless process to add them to builds</div>
<div class="line">[Sunday 13 February 2011] [07:20:07] &lt;mikko&gt;  i to the b</div>
<div class="line">[Sunday 13 February 2011] [07:45:33] &lt;Guthur&gt; I&#8217;ve been looking into IOCP for named pipes connection under windows, the main issue I have found is differentiating between the read and write operations. It is possible to pass in a handle to an event object to writefile function (as part of the overlapped struct), which will allow differentiation.</div>
<div class="line">[Sunday 13 February 2011] [07:46:04] &lt;Guthur&gt; The only issue with that is that both the poller and and the writer need the handle to that event object.</div>
<div class="line">[Sunday 13 February 2011] [07:47:12] &lt;Guthur&gt; or at least for the poller to know it is a write event object, it will be matched to the right pipe as part of the return from IOCP</div>
<div class="line">[Sunday 13 February 2011] [10:25:45] &lt;sustrik&gt;        Guthur: pong</div>
<div class="line">[Sunday 13 February 2011] [10:30:03] &lt;Guthur&gt; sustrik, did that stuff i posted earlier make much sense?</div>
<div class="line">[Sunday 13 February 2011] [10:30:25] &lt;sustrik&gt;        i have no idea how IOCP works :|</div>
<div class="line">[Sunday 13 February 2011] [10:30:37] &lt;sustrik&gt;        anyway, what you need for integration with 0mq</div>
<div class="line">[Sunday 13 February 2011] [10:31:08] &lt;sustrik&gt;        is a polling mechanism that triggers an event when particular &#8220;socket&#8221; is readable and/or writeable</div>
<div class="line">[Sunday 13 February 2011] [10:31:26] &lt;sustrik&gt;        it has to be able to handle multiple &#8220;sockets&#8221; in parallel</div>
<div class="line">[Sunday 13 February 2011] [10:31:38] &lt;Guthur&gt; oh yeah IOCP does multiple sockets very well</div>
<div class="line">[Sunday 13 February 2011] [10:31:57] &lt;sustrik&gt;        and all the event handlers have to be invoked within a single thread</div>
<div class="line">[Sunday 13 February 2011] [10:32:26] &lt;Guthur&gt; that&#8217;s no problem as well</div>
<div class="line">[Sunday 13 February 2011] [10:32:47] &lt;sustrik&gt;        then it should be easy, no?</div>
<div class="line">[Sunday 13 February 2011] [10:32:59] &lt;Guthur&gt; the only complication as far as I can see is differentiating between what event is fired</div>
<div class="line">[Sunday 13 February 2011] [10:33:36] &lt;sustrik&gt;        can&#8217;t you use 2 different events?</div>
<div class="line">[Sunday 13 February 2011] [10:33:47] &lt;sustrik&gt;        event objects i mean</div>
<div class="line">[Sunday 13 February 2011] [10:34:28] &lt;Guthur&gt; if we can pass a different event object when writing to the pipe then yes</div>
<div class="line">[Sunday 13 February 2011] [10:35:01] &lt;Guthur&gt; 2 secs, just going to ask someone about it now</div>
<div class="line">[Sunday 13 February 2011] [10:36:55] &lt;Guthur&gt; when one creates the name pipe one passes in an overlapped struct with an event object, this is set active by all events as far as I can see</div>
<div class="line">[Sunday 13 February 2011] [10:39:42] &lt;sustrik&gt;        aha</div>
<div class="line">[Sunday 13 February 2011] [10:40:08] &lt;sustrik&gt;        so how you are supposed to know whether the socket is readable or writeable?</div>
<div class="line">[Sunday 13 February 2011] [10:40:50] &lt;Guthur&gt; you mean like a connected event?</div>
<div class="line">[Sunday 13 February 2011] [10:41:02] &lt;sustrik&gt;        hm</div>
<div class="line">[Sunday 13 February 2011] [10:41:17] &lt;sustrik&gt;        CreateNamedPipe doesn&#8217;t seem to accept OVERLAPPED struct</div>
<div class="line">[Sunday 13 February 2011] [10:42:04] &lt;Guthur&gt; writefile does</div>
<div class="line">[Sunday 13 February 2011] [10:43:47] &lt;Guthur&gt; i&#8217;m talking to someone more knowledgeable now</div>
<div class="line">[Sunday 13 February 2011] [10:43:48] &lt;Guthur&gt; 2 secs</div>
<div class="line">[Sunday 13 February 2011] [10:44:30]   * sustrik is reading the docs</div>
<div class="line">[Sunday 13 February 2011] [10:48:19] &lt;mikko&gt;  Guthur: steve-o might be able to help you with IOCP</div>
<div class="line">[Sunday 13 February 2011] [10:48:25] &lt;mikko&gt;  he did some tests with it some time ago</div>
<div class="line">[Sunday 13 February 2011] [10:48:58] &lt;Guthur&gt; mikko, did he rule it out for any technical reason?</div>
<div class="line">[Sunday 13 February 2011] [10:49:48] &lt;mikko&gt;  Guthur: i think it wasnt as fast as he expected</div>
<div class="line">[Sunday 13 February 2011] [10:50:03] &lt;sustrik&gt;        the problem with 0mq is a bit different</div>
<div class="line">[Sunday 13 February 2011] [10:50:12] &lt;Guthur&gt; oh, interesting</div>
<div class="line">[Sunday 13 February 2011] [10:50:20] &lt;sustrik&gt;        namely, select() function that&#8217;s currently used for polling</div>
<div class="line">[Sunday 13 February 2011] [10:50:44] &lt;sustrik&gt;        is limited to POSIX-like TCP sockets (winsock)</div>
<div class="line">[Sunday 13 February 2011] [10:50:54] &lt;sustrik&gt;        it doesn&#8217;t work with anything else afaik</div>
<div class="line">[Sunday 13 February 2011] [10:51:04] &lt;sustrik&gt;        ie. named pipes etc.</div>
<div class="line">[Sunday 13 February 2011] [10:51:20] &lt;mikko&gt;  and kelly brock has done some work</div>
<div class="line">[Sunday 13 February 2011] [10:51:34] &lt;mikko&gt;  &#8220;For those interested, I highly</div>
<div class="line">[Sunday 13 February 2011] [10:51:34] &lt;mikko&gt;  suggest reading the change lists from V1 to V2rc of libevent, most changes</div>
<div class="line">[Sunday 13 February 2011] [10:51:34] &lt;mikko&gt;  were required because IOCP is nearly the opposite of all other async</div>
<div class="line">[Sunday 13 February 2011] [10:51:35] &lt;mikko&gt;  solutions.&#8221;</div>
<div class="line">[Sunday 13 February 2011] [10:52:23] &lt;sustrik&gt;        the first question imo is whether IOCP is the only option to poll on TCP sockets and named pipes</div>
<div class="line">[Sunday 13 February 2011] [10:52:39] &lt;sustrik&gt;        maybe there&#8217;s a different (and maybe less complex) way</div>
<div class="line">[Sunday 13 February 2011] [10:53:01] &lt;mikko&gt;  or whether named pipes could be emulated on windows using shared memory</div>
<div class="line">[Sunday 13 February 2011] [10:53:17] &lt;mikko&gt;  not sure if that makes sense as you would busy wait</div>
<div class="line">[Sunday 13 February 2011] [10:53:30] &lt;sustrik&gt;        you still to have poll in I/O thread</div>
<div class="line">[Sunday 13 February 2011] [10:53:37] &lt;sustrik&gt;        if you emulate the named pipes</div>
<div class="line">[Sunday 13 February 2011] [10:53:47] &lt;sustrik&gt;        you still have to event the I/O thread</div>
<div class="line">[Sunday 13 February 2011] [10:53:55] &lt;sustrik&gt;        which can be done via TCP socket (slow)</div>
<div class="line">[Sunday 13 February 2011] [10:54:12] &lt;sustrik&gt;        other option would be something like Event object</div>
<div class="line">[Sunday 13 February 2011] [10:54:42] &lt;sustrik&gt;        but once again, you can&#8217;t poll on Event object using select()</div>
<div class="line">[Sunday 13 February 2011] [10:54:42] &lt;mikko&gt;  thinking out loud: optional dependency to libevent?</div>
<div class="line">[Sunday 13 February 2011] [10:55:02] &lt;mikko&gt;  new poller type which uses libevent or libev</div>
<div class="line">[Sunday 13 February 2011] [10:55:17] &lt;mikko&gt;  disabled by default but can be enabled during build</div>
<div class="line">[Sunday 13 February 2011] [10:55:42] &lt;sustrik&gt;        that would be more work than supporting IOCP natively IMO</div>
<div class="line">[Sunday 13 February 2011] [10:56:09] &lt;mikko&gt;  i really don&#8217;t know whats involved in adding support for IOCP</div>
<div class="line">[Sunday 13 February 2011] [10:56:46] &lt;Guthur&gt; does steve-o come on irc</div>
<div class="line">[Sunday 13 February 2011] [10:56:55] &lt;mikko&gt;  yes</div>
<div class="line">[Sunday 13 February 2011] [10:57:02] &lt;mikko&gt;  he is here usually during the week</div>
<div class="line">[Sunday 13 February 2011] [10:57:10] &lt;mikko&gt;  he&#8217;s on NYC timezone</div>
<div class="line">[Sunday 13 February 2011] [10:57:17] &lt;mikko&gt;  EST?</div>
<div class="line">[Sunday 13 February 2011] [10:57:21] &lt;sustrik&gt;        still in NY?</div>
<div class="line">[Sunday 13 February 2011] [10:57:28] &lt;mikko&gt;  i thought so</div>
<div class="line">[Sunday 13 February 2011] [10:57:31] &lt;sustrik&gt;        he&#8217;s from hong kong</div>
<div class="line">[Sunday 13 February 2011] [10:57:52] &lt;mikko&gt;  yeah, i thought he was going to be in NYC for a longer period</div>
<div class="line">[Sunday 13 February 2011] [10:57:57] &lt;mikko&gt;  maybe i misunderstood</div>
<div class="line">[Sunday 13 February 2011] [10:57:59] &lt;sustrik&gt;        ah, no idea</div>
<div class="line">[Sunday 13 February 2011] [10:58:20] &lt;mikko&gt;  he was in NYC and referred to &#8220;buying a house&#8221; during that time. i thought he might be there for a while</div>
<div class="line">[Sunday 13 February 2011] [10:58:38] &lt;mikko&gt;  anyway, he does come here occasionally during the week</div>
<div class="line">[Sunday 13 February 2011] [11:00:13] &lt;Guthur&gt; there is a way to getting this IOCP working I&#8217;m sure</div>
<div class="line">[Sunday 13 February 2011] [11:01:11] &lt;Guthur&gt; I&#8217;m missing something regarding the identification of the various ops, I can know that an something is happening on a pipe, just not what that something is</div>
<div class="line">[Sunday 13 February 2011] [11:01:19] &lt;Guthur&gt; there has to be a way</div>
<div class="line">[Sunday 13 February 2011] [11:02:54] &lt;sustrik&gt;        Guthur: my impression so far is that event object is associated with particular I/O operation (Read/Write)</div>
<div class="line">[Sunday 13 February 2011] [11:03:03] &lt;sustrik&gt;        rather than Pipe as such</div>
<div class="line">[Sunday 13 February 2011] [11:03:18] &lt;Guthur&gt; yeah, that&#8217;s correct enough</div>
<div class="line">[Sunday 13 February 2011] [11:03:38] &lt;Guthur&gt; sorry if I drew you to a different conclusion before</div>
<div class="line">[Sunday 13 February 2011] [11:04:05] &lt;sustrik&gt;        ok, maybe i misunderstood what the problem is then</div>
<div class="line">[Sunday 13 February 2011] [11:05:18] &lt;Guthur&gt; <a href="#id21"><span class="problematic" id="id22">`</span></a>Orum on #winapi is posting some IOCP code, it might shed some light</div>
<div class="line">[Sunday 13 February 2011] [11:21:01] &lt;zchrish&gt;        I am performing a test to perform repeated zmq_init and zmq_term w/o performing any bind; is that permissible? I am noticing a memory leak after a continued run of this test.</div>
<div class="line">[Sunday 13 February 2011] [11:22:20] &lt;sustrik&gt;        zchrish: yes, it&#8217;s permissible</div>
<div class="line">[Sunday 13 February 2011] [11:22:24] &lt;sustrik&gt;        what&#8217;s the leak?</div>
<div class="line">[Sunday 13 February 2011] [11:23:58] &lt;zchrish&gt;        I am performing a &#8220;cout&#8221; of the context pointer and it is giving me a different value over time. I am watching &#8220;top&#8221; and the amount of memory required by my process is slowing growing. I am performing a zmq_init/zmq_term avery 1-2 seconds.</div>
<div class="line">[Sunday 13 February 2011] [11:24:37] &lt;mikko&gt;  zchrish: have you checked in valgrind?</div>
<div class="line">[Sunday 13 February 2011] [11:24:56] &lt;zchrish&gt;        Let me check; thanks.</div>
<div class="line">[Sunday 13 February 2011] [11:35:15] &lt;zchrish&gt;        Not sure whether the output of valgrind is related to the way I am using my program. I am creating threads which zmq_init and then zmq_term using a pthread_cleanup_push concept. After 20 iterations, I close the master thread which closes the main program. But I don&#8217;t know whether this closing affects the slave threads which perform the zmq_init/zmq_term.</div>
<div class="line">[Sunday 13 February 2011] [11:36:02] &lt;zchrish&gt;        ==22197== LEAK SUMMARY:</div>
<div class="line">[Sunday 13 February 2011] [11:36:02] &lt;zchrish&gt;        ==22197==    definitely lost: 0 bytes in 0 blocks</div>
<div class="line">[Sunday 13 February 2011] [11:36:02] &lt;zchrish&gt;        ==22197==    indirectly lost: 0 bytes in 0 blocks</div>
<div class="line">[Sunday 13 February 2011] [11:36:02] &lt;zchrish&gt;        ==22197==      possibly lost: 12,584 bytes in 43 blocks</div>
<div class="line">[Sunday 13 February 2011] [11:36:02] &lt;zchrish&gt;        ==22197==    still reachable: 4,552 bytes in 5 blocks</div>
<div class="line">[Sunday 13 February 2011] [11:36:02] &lt;zchrish&gt;        ==22197==         suppressed: 0 bytes in 0 blocks</div>
<div class="line">[Sunday 13 February 2011] [11:37:31] &lt;zchrish&gt;        I have 3 threads: (A) master and (B),(C) slave threads. In (B), (C), I peform zmq_init and zmq_term based on a simulated incident which indicates a problem.</div>
<div class="line">[Sunday 13 February 2011] [11:38:48] &lt;sustrik&gt;        run the valgrind with &#8211;leak-check=full</div>
<div class="line">[Sunday 13 February 2011] [11:38:58] &lt;sustrik&gt;        to find out what&#8217;s leaking</div>
<div class="line">[Sunday 13 February 2011] [11:39:07] &lt;zchrish&gt;        Anyway, it seems like the amount lost isn&#8217;t that much, if it is from 0mq, so I won&#8217;t worry about it at this point. I don&#8217;t expect to perform a zmq_term and zmq_init very often.</div>
<div class="line">[Sunday 13 February 2011] [11:43:52] &lt;zchrish&gt;        Hmm. I did this but I am not proficient enough with valgrind to properly interpret the results. The program is simple enough but I am not sure whether someone is interested in re-creating the situation. If so, I will upload somewhere.</div>
<div class="line">[Sunday 13 February 2011] [11:47:43] &lt;sustrik&gt;        yes. do so. i&#8217;ll have a look</div>
<div class="line">[Sunday 13 February 2011] [11:53:57] &lt;zchrish&gt;        I remember watching discussions about uploading to a website but I don&#8217;t remember; would you please let me know. Thank you.</div>
<div class="line">[Sunday 13 February 2011] [11:54:09] &lt;zchrish&gt;        I will upload it.</div>
<div class="line">[Sunday 13 February 2011] [11:55:56] &lt;sustrik&gt;        gist.github.com</div>
<div class="line">[Sunday 13 February 2011] [11:56:01] &lt;sustrik&gt;        place it there</div>
<div class="line">[Sunday 13 February 2011] [11:56:07] &lt;sustrik&gt;        post the link here</div>
<div class="line">[Sunday 13 February 2011] [11:57:44] &lt;Guthur&gt; sustrik, re: IOCP, what we can do is pass a custom overlapped struct to Connect, Read, Write etc, and this struct will be returned by IOCP</div>
<div class="line">[Sunday 13 February 2011] [11:58:15] &lt;Guthur&gt; so the custom struct can have a member containing and enum of the op type, for example</div>
<div class="line">[Sunday 13 February 2011] [11:58:54] &lt;sustrik&gt;        how would you physically perform the polling?</div>
<div class="line">[Sunday 13 February 2011] [11:59:05] &lt;sustrik&gt;        WaitForMultiple objects or what?</div>
<div class="line">[Sunday 13 February 2011] [11:59:19] &lt;Guthur&gt; GetQueuedCompletionStatus</div>
<div class="line">[Sunday 13 February 2011] [11:59:24] &lt;Guthur&gt; GetQueuedCompletionStatusEx</div>
<div class="line">[Sunday 13 February 2011] [11:59:25] &lt;zchrish&gt;        Not sure if this is the output result; this is my first gist upload....       gist: 824833</div>
<div class="line">[Sunday 13 February 2011] [11:59:50] &lt;sustrik&gt;        can you prpvide the link?</div>
<div class="line">[Sunday 13 February 2011] [12:00:20] &lt;zchrish&gt;        <a class="reference external" href="https://gist.github.com/824833">https://gist.github.com/824833</a></div>
<div class="line">[Sunday 13 February 2011] [12:00:29] &lt;zchrish&gt;        Is that right?</div>
<div class="line">[Sunday 13 February 2011] [12:00:36] &lt;zchrish&gt;        I think so.</div>
<div class="line">[Sunday 13 February 2011] [12:01:18] &lt;sustrik&gt;        ah</div>
<div class="line">[Sunday 13 February 2011] [12:01:30] &lt;sustrik&gt;        i meant, can you provide the valgrind output?</div>
<div class="line">[Sunday 13 February 2011] [12:01:44] &lt;zchrish&gt;        Oh, sorry. Let me do another.</div>
<div class="line">[Sunday 13 February 2011] [12:03:00] &lt;sustrik&gt;        Guthur: I see</div>
<div class="line">[Sunday 13 February 2011] [12:03:12] &lt;sustrik&gt;        so, a completion port</div>
<div class="line">[Sunday 13 February 2011] [12:03:29] &lt;sustrik&gt;        is actually a queue of pointers to OVERLAPPED structures</div>
<div class="line">[Sunday 13 February 2011] [12:05:38] &lt;zchrish&gt;        <a class="reference external" href="https://gist.github.com/824840">https://gist.github.com/824840</a></div>
<div class="line">[Sunday 13 February 2011] [12:05:43] &lt;zchrish&gt;        is the valgrind output</div>
<div class="line">[Sunday 13 February 2011] [12:07:13] &lt;sustrik&gt;        thanks</div>
<div class="line">[Sunday 13 February 2011] [12:08:22] &lt;Guthur&gt; sustrik, essentially yes</div>
<div class="line">[Sunday 13 February 2011] [12:08:28] &lt;Guthur&gt; there is also a completion key</div>
<div class="line">[Sunday 13 February 2011] [12:08:43] &lt;Guthur&gt; it&#8217;s quite common to place the handle of the socket in that</div>
<div class="line">[Sunday 13 February 2011] [12:08:58] &lt;Guthur&gt; or some other context struct</div>
<div class="line">[Sunday 13 February 2011] [12:09:19] &lt;sustrik&gt;        ack</div>
<div class="line">[Sunday 13 February 2011] [12:09:27] &lt;sustrik&gt;        that seems reasonable</div>
<div class="line">[Sunday 13 February 2011] [12:09:33] &lt;Guthur&gt; sustrik, does it sound like it will fullfil 0MQs needs?</div>
<div class="line">[Sunday 13 February 2011] [12:09:40] &lt;sustrik&gt;        definitely</div>
<div class="line">[Sunday 13 February 2011] [12:09:48] &lt;Guthur&gt; sweet</div>
<div class="line">[Sunday 13 February 2011] [12:10:13] &lt;sustrik&gt;        you&#8217;ll simply have a I/O thread loop with GetIOCompletionStatus</div>
<div class="line">[Sunday 13 February 2011] [12:10:39] &lt;sustrik&gt;        should be relativelty easy</div>
<div class="line">[Sunday 13 February 2011] [12:14:48] &lt;Guthur&gt; so, do you want me put some code together for an implementation of epoll et al. using IOCP</div>
<div class="line">[Sunday 13 February 2011] [12:15:14] &lt;sustrik&gt;        definitely</div>
<div class="line">[Sunday 13 February 2011] [12:15:34] &lt;sustrik&gt;        try to hack something</div>
<div class="line">[Sunday 13 February 2011] [12:15:45] &lt;sustrik&gt;        feel free to ask about 0mq details in the process</div>
<div class="line">[Sunday 13 February 2011] [12:16:13] &lt;Guthur&gt; will do, cheers to all for the help so far</div>
<div class="line">[Sunday 13 February 2011] [12:16:39] &lt;Guthur&gt; I need to do something else tonight, for MSc thesis, but I&#8217;ll continue with the IOCP this week</div>
<div class="line">[Sunday 13 February 2011] [12:18:22] &lt;sustrik&gt;        great</div>
<div class="line">[Sunday 13 February 2011] [12:18:59] &lt;Guthur&gt; just as an aside: according to wiki  IOCP is also available on Solaris 10+</div>
<div class="line">[Sunday 13 February 2011] [12:19:11] &lt;Guthur&gt; is ZMQ on solaris?</div>
<div class="line">[Sunday 13 February 2011] [12:19:55] &lt;sustrik&gt;        sure</div>
<div class="line">[Sunday 13 February 2011] [12:20:13] &lt;sustrik&gt;        but i think solaris I/O completion ports are a different beast</div>
<div class="line">[Sunday 13 February 2011] [12:20:23] &lt;Guthur&gt; yeah probably</div>
<div class="line">[Sunday 13 February 2011] [12:20:41] &lt;Guthur&gt; not like I have a solaris box hanging around anyway, hehe</div>
<div class="line">[Sunday 13 February 2011] [12:21:17] &lt;sustrik&gt;        i recall we&#8217;ve investigated polling mechanisms in solris quite a long time ago</div>
<div class="line">[Sunday 13 February 2011] [12:21:33] &lt;sustrik&gt;        and devided to go with /dev/poll rather than completion ports</div>
<div class="line">[Sunday 13 February 2011] [12:23:14] &lt;Guthur&gt; if I can help bring IOCP on windows to 0MQ i&#8217;ll be happy enough</div>
<div class="line">[Sunday 13 February 2011] [13:16:23] &lt;sustrik&gt;        zchrish: it looks like you are not terminating your threads cleanly</div>
<div class="line">[Sunday 13 February 2011] [13:44:18] &lt;ianbarber&gt;      m to the k (delayed response goodness)</div>
<div class="line">[Sunday 13 February 2011] [13:51:29] &lt;zchrish&gt;        I see; any pointer is appreciated. Thanks.</div>
<div class="line">[Sunday 13 February 2011] [14:28:05] &lt;sustrik&gt;        zchrish: pthread_cancel basically means you kill the thread</div>
<div class="line">[Sunday 13 February 2011] [14:28:30] &lt;sustrik&gt;        what you should do instead is to pthread_join it</div>
<div class="line">[Sunday 13 February 2011] [16:54:57] &lt;eut&gt;    cremes, i think that the delay or whatever in nonblocking packet delivery is manageable. if things on my end are designed properly then it shouldn&#8217;t be a problem.</div>
<div class="line">[Sunday 13 February 2011] [16:55:11] &lt;bitweiler&gt;      hey using a publisher, socket should the publisher receive some request?</div>
<div class="line">[Sunday 13 February 2011] [16:55:39] &lt;eut&gt;    bitweiler, no</div>
<div class="line">[Sunday 13 February 2011] [16:55:58] &lt;bitweiler&gt;      eut: why is that?</div>
<div class="line">[Sunday 13 February 2011] [16:56:08] &lt;eut&gt;    <a class="reference external" href="http://api.zeromq.org/zmq_socket.html">http://api.zeromq.org/zmq_socket.html</a> see summary of ZMQ_PUB characteristics. it is unidirectional and send only</div>
<div class="line">[Sunday 13 February 2011] [16:56:24] &lt;bitweiler&gt;      okay thanks</div>
<div class="line">[Sunday 13 February 2011] [17:01:03] &lt;bitweiler&gt;      what is meant by: The zmq_send() function is not implemented for this socket type. where socket type is ZMQ_SUB</div>
<div class="line">[Sunday 13 February 2011] [17:04:13] &lt;eut&gt;    did you bind or connect to this socket?</div>
<div class="line">[Sunday 13 February 2011] [17:04:45] &lt;bitweiler&gt;      yes, I bind in the server side and connect on the client side</div>
<div class="line">[Sunday 13 February 2011] [17:05:18] &lt;eut&gt;    whoops</div>
<div class="line">[Sunday 13 February 2011] [17:05:21] &lt;bitweiler&gt;      but I&#8217;m getting nothing on the client side in response</div>
<div class="line">[Sunday 13 February 2011] [17:05:31] &lt;mikko&gt;  bitweiler: are you subscribing</div>
<div class="line">[Sunday 13 February 2011] [17:05:38] &lt;eut&gt;    see that page i linked to earlier for description of ZMQ_SUB</div>
<div class="line">[Sunday 13 February 2011] [17:05:40] &lt;mikko&gt;  thats the most common thing causing messages not to be received</div>
<div class="line">[Sunday 13 February 2011] [17:06:09] &lt;eut&gt;    ZMQ_SUB is unidirectional receive only... you cannot send...</div>
<div class="line">[Sunday 13 February 2011] [17:07:57] &lt;bitweiler&gt;      mikko: yes I&#8217;m subscribing</div>
<div class="line">[Sunday 13 February 2011] [17:08:29] &lt;eut&gt;    i have a question about the xrep/xreq sockets. on the xreq side i have set the socket identity to some 4 byte long string (&#8220;1110&#8221;). when i send a message, on the xrep side, i&#8217;m getting a 17 byte long response in the first received part.</div>
<div class="line">[Sunday 13 February 2011] [17:08:52] &lt;mikko&gt;  eut: you get three messages</div>
<div class="line">[Sunday 13 February 2011] [17:09:11] &lt;mikko&gt;  one with identity, empty message and the actual message</div>
<div class="line">[Sunday 13 February 2011] [17:09:40] &lt;mikko&gt;  you should send in xreq side in that fashion as well</div>
<div class="line">[Sunday 13 February 2011] [17:10:06] &lt;mikko&gt;  identity (ZMQ_SNDMORE set), empty message (ZMQ_SNDMORE set), message</div>
<div class="line">[Sunday 13 February 2011] [17:10:54] &lt;eut&gt;    i thought that zmq takes care of prepending the socket identity and empty message when sending from a xreq socket</div>
<div class="line">[Sunday 13 February 2011] [17:11:53] &lt;mikko&gt;  let me check the code, it&#8217;s been a while since i used xreq/xreq</div>
<div class="line">[Sunday 13 February 2011] [17:14:14] &lt;eut&gt;    i hope it doesnt matter... but the xrep side is in lua and the xreq side is c</div>
<div class="line">[Sunday 13 February 2011] [17:18:25] &lt;mikko&gt;  yes, client side prepends</div>
<div class="line">[Sunday 13 February 2011] [17:18:36] &lt;mikko&gt;  on xrep side you should receive multiple messages</div>
<div class="line">[Sunday 13 February 2011] [17:18:43] &lt;mikko&gt;  check for ZMQ_RCVMORE</div>
<div class="line">[Sunday 13 February 2011] [17:21:25] &lt;eut&gt;    yes</div>
<div class="line">[Sunday 13 February 2011] [17:21:49] &lt;mikko&gt;  does the lua binding expose that?</div>
<div class="line">[Sunday 13 February 2011] [17:21:58] &lt;eut&gt;    it exposes getsockopt</div>
<div class="line">[Sunday 13 February 2011] [17:22:11] &lt;eut&gt;    i&#8217;m able to see that more messages parts are there</div>
<div class="line">[Sunday 13 February 2011] [17:22:38] &lt;mikko&gt;  how are you replying with xreq?</div>
<div class="line">[Sunday 13 February 2011] [17:22:57] &lt;eut&gt;    i&#8217;m not replying at all yet, i&#8217;m just trying to interpret the received messages correctly.</div>
<div class="line">[Sunday 13 February 2011] [17:23:31] &lt;mikko&gt;  can i see the xrep code?</div>
<div class="line">[Sunday 13 February 2011] [17:23:50] &lt;mikko&gt;  trying to focus on too many things at once</div>
<div class="line">[Sunday 13 February 2011] [17:24:16] &lt;eut&gt;    sure</div>
<div class="line">[Sunday 13 February 2011] [17:26:05] &lt;eut&gt;    <a class="reference external" href="http://codepad.org/TqP35vOT">http://codepad.org/TqP35vOT</a></div>
<div class="line">[Sunday 13 February 2011] [17:27:20] &lt;mikko&gt;  what about xreq?</div>
<div class="line">[Sunday 13 February 2011] [17:27:50] &lt;eut&gt;    whoops, this is more correct xrep code: <a class="reference external" href="http://codepad.org/YfZepWdv">http://codepad.org/YfZepWdv</a></div>
<div class="line">[Sunday 13 February 2011] [17:27:57] &lt;eut&gt;    a moment for xreq</div>
<div class="line">[Sunday 13 February 2011] [17:35:40] &lt;eut&gt;    xreq code: <a class="reference external" href="http://codepad.org/3SFTxCwh">http://codepad.org/3SFTxCwh</a></div>
<div class="line">[Sunday 13 February 2011] [17:37:36] &lt;Guthur&gt; are you not suppose to set the identity before connecting</div>
<div class="line">[Sunday 13 February 2011] [17:38:32] &lt;eut&gt;    this is the output i&#8217;m getting and what i expect should happen: <a class="reference external" href="http://codepad.org/PSnx9yqX">http://codepad.org/PSnx9yqX</a></div>
<div class="line">[Sunday 13 February 2011] [17:38:48] &lt;eut&gt;    the first part of the multipart message is 17 bytes for some reason...</div>
<div class="line">[Sunday 13 February 2011] [17:39:18] &lt;eut&gt;    the identity was set to &#8220;222&#8221; so i dont understand what is going on</div>
<div class="line">[Sunday 13 February 2011] [17:40:30] &lt;Guthur&gt; from guide: If you want to set an identity you must do it before connecting or binding the socket.</div>
<div class="line">[Sunday 13 February 2011] [17:40:42] &lt;Guthur&gt; you connect then set the identity in that code</div>
<div class="line">[Sunday 13 February 2011] [17:40:59] &lt;Guthur&gt; the one for the xreq</div>
<div class="line">[Sunday 13 February 2011] [17:41:15] &lt;eut&gt;    :D</div>
<div class="line">[Sunday 13 February 2011] [17:41:24] &lt;eut&gt;    it works. thanks very much</div>
<div class="line">[Sunday 13 February 2011] [17:41:38] &lt;Guthur&gt; you&#8217;re welcome</div>
<div class="line">[Sunday 13 February 2011] [17:41:55] &lt;Guthur&gt; it actually should mention that in the manual</div>
<div class="line">[Sunday 13 February 2011] [17:42:06] &lt;Guthur&gt; i&#8217;m surprised it doesn&#8217;t actually</div>
<div class="line">[Sunday 13 February 2011] [17:42:30] &lt;eut&gt;    it would make a nice addition to the zmq_socket api page</div>
<div class="line">[Sunday 13 February 2011] [17:42:45] &lt;eut&gt;    err, setsockopt</div>
<div class="line">[Sunday 13 February 2011] [17:42:51] &lt;Guthur&gt; yeah I agree</div>
<div class="line">[Sunday 13 February 2011] [17:43:25] &lt;eut&gt;    do all options need to be set prior to connecting? or are some more flexible?</div>
<div class="line">[Sunday 13 February 2011] [17:43:42] &lt;Guthur&gt; no identity is special</div>
<div class="line">[Sunday 13 February 2011] [17:44:01] &lt;Guthur&gt; it makes sense that it needs to be before connecting, in a way</div>
<div class="line">[Sunday 13 February 2011] [17:44:13] &lt;Guthur&gt; though it might be nice to be able to change an identity</div>
<div class="line">[Sunday 13 February 2011] [17:45:03] &lt;Guthur&gt; after connecting, but things could get confusing then, and packet delivery might go terribly wrong</div>
<div class="line">[Sunday 13 February 2011] [17:45:12] &lt;eut&gt;    right</div>
<div class="line">[Sunday 13 February 2011] [17:45:46] &lt;eut&gt;    i think its fine the way it is, but it would help to have the api docs updated</div>
<div class="line">[Sunday 13 February 2011] [17:46:21] &lt;Guthur&gt; yeah, I&#8217;ll submit a patch</div>
<div class="line">[Sunday 13 February 2011] [17:46:33] &lt;Guthur&gt; there was another thing I wanted to submit for the docs anyway</div>
<div class="line">[Sunday 13 February 2011] [17:46:49] &lt;eut&gt;    ok sure, thanks for the help</div>
<div class="line">[Sunday 13 February 2011] [17:47:10] &lt;Guthur&gt; sure, anytime</div>
<div class="line">[Sunday 13 February 2011] [17:48:18] &lt;eut&gt;    is the development branch github.com/zeromq/zeromq2?</div>
<div class="line">[Sunday 13 February 2011] [17:49:29] &lt;mikko&gt;  eut: yes</div>
<div class="line">[Sunday 13 February 2011] [17:49:39] &lt;mikko&gt;  sorry, had to jet for a minute</div>
<div class="line">[Sunday 13 February 2011] [17:50:02] &lt;mikko&gt;  17 part response is UUID most likely, should&#8217;ve catched that</div>
<div class="line">[Sunday 13 February 2011] [17:50:12] &lt;mikko&gt;  17 char part*</div>
<div class="line">[Sunday 13 February 2011] [17:50:48] &lt;eut&gt;    ah, and of course its binary data so it wont display as normal text</div>
<div class="line">[Sunday 13 February 2011] [17:54:25] &lt;Guthur&gt; mikko, do you think the api documentation for setsockopt identity should mention that it has to be set before bind/connect?</div>
<div class="line">[Sunday 13 February 2011] [17:54:35] &lt;Guthur&gt; and if so should it be a caution note?</div>
<div class="line">[Sunday 13 February 2011] [17:54:40] &lt;mikko&gt;  Guthur: i think majority of them should mention it</div>
<div class="line">[Sunday 13 February 2011] [17:54:55] &lt;mikko&gt;  like HWM affects only subsequent binds/connects</div>
<div class="line">[Sunday 13 February 2011] [17:55:06] &lt;sustrik&gt;        all of them, actually</div>
<div class="line">[Sunday 13 February 2011] [17:55:08] &lt;Guthur&gt; oh, I thought some didn&#8217;t matter</div>
<div class="line">[Sunday 13 February 2011] [17:55:09] &lt;eut&gt;    is the delimiter message necessary if only going directly from xrep &lt;-&gt; xreq? it seems like it is only useful for chains longer than two nodes</div>
<div class="line">[Sunday 13 February 2011] [17:55:31] &lt;Guthur&gt; good to know</div>
<div class="line">[Sunday 13 February 2011] [17:55:47] &lt;sustrik&gt;        it should be mentioned in the docs, you are right</div>
<div class="line">[Sunday 13 February 2011] [17:56:05] &lt;mikko&gt;  i ended up doing a patch for jenkins after running an issue with build slaves</div>
<div class="line">[Sunday 13 February 2011] [17:56:23] &lt;mikko&gt;  hopefully they&#8217;ll accept it</div>
<div class="line">[Sunday 13 February 2011] [17:56:33] &lt;sustrik&gt;        congrats!</div>
<div class="line">[Sunday 13 February 2011] [17:56:37] &lt;sustrik&gt;        what was wrong there</div>
<div class="line">[Sunday 13 February 2011] [17:56:39] &lt;sustrik&gt;        ?</div>
<div class="line">[Sunday 13 February 2011] [17:56:50] &lt;mikko&gt;  it adds ssl between slave and master</div>
<div class="line">[Sunday 13 February 2011] [17:56:54] &lt;Guthur&gt; is there any opts it doesn&#8217;t matter for?</div>
<div class="line">[Sunday 13 February 2011] [17:56:55] &lt;mikko&gt;  rather than having to use stunnel</div>
<div class="line">[Sunday 13 February 2011] [17:57:06] &lt;mikko&gt;  good for WAN connected slaves</div>
<div class="line">[Sunday 13 February 2011] [17:57:14] &lt;sustrik&gt;        ack</div>
<div class="line">[Sunday 13 February 2011] [17:57:27] &lt;sustrik&gt;        Guthur: the system applies to all the options</div>
<div class="line">[Sunday 13 February 2011] [17:57:33] &lt;mikko&gt;  what are the big todo items for 2.1.x stable ?</div>
<div class="line">[Sunday 13 February 2011] [17:57:49] &lt;Guthur&gt; sustrik, ack</div>
<div class="line">[Sunday 13 February 2011] [17:58:28] &lt;mikko&gt;  i think it might be useful at some point to look into the todo items and sort them by value and effort</div>
<div class="line">[Sunday 13 February 2011] [17:58:39] &lt;Guthur&gt; except for subscription string though, correct?</div>
<div class="line">[Sunday 13 February 2011] [17:58:50] &lt;Guthur&gt; strings*</div>
<div class="line">[Sunday 13 February 2011] [17:59:02] &lt;mikko&gt;  that way people needing those features would have a place to check &#8220;rough estimation&#8221; and possibly chip in</div>
<div class="line">[Sunday 13 February 2011] [17:59:14] &lt;mikko&gt;  currently todo-list is github tickets mainly (?)</div>
<div class="line">[Sunday 13 February 2011] [18:01:17] &lt;mikko&gt;  <a class="reference external" href="http://sourceforge.net/projects/udt/forums/forum/393036/topic/4061830">http://sourceforge.net/projects/udt/forums/forum/393036/topic/4061830</a></div>
<div class="line">[Sunday 13 February 2011] [18:01:35] &lt;mikko&gt;  interesting, as this seems like the feature that would allow integrating udt with minimal pain</div>
<div class="line">[Sunday 13 February 2011] [18:09:03] &lt;Guthur&gt; I updated the docs on a my fork, should I just submit a pull request?</div>
<div class="line">[Sunday 13 February 2011] [18:09:29] &lt;mikko&gt;  i think currently things go as signed patches over the mailing lists</div>
<div class="line">[Sunday 13 February 2011] [18:10:39] &lt;Guthur&gt; ah ok</div>
<div class="line">[Sunday 13 February 2011] [18:36:36] &lt;Guthur&gt; I have two minor doc updates, should they be separate patches?</div>
<div class="line">[Monday 14 February 2011] [02:19:17] &lt;sustrik&gt;        mikko: yes, clear roadmap to 2.1 would be nice</div>
<div class="line">[Monday 14 February 2011] [02:20:21] &lt;sustrik&gt;        however, i am not sure how to manage it within a distributed development model</div>
<div class="line">[Monday 14 February 2011] [02:20:37] &lt;sustrik&gt;        would it mean that patches out of scope of the roadmap are not accepted?</div>
<div class="line">[Monday 14 February 2011] [04:45:17] &lt;mikko&gt;  sustrik: sure they would</div>
<div class="line">[Monday 14 February 2011] [04:45:23] &lt;mikko&gt;  sustrik: im talking about feature roadmap</div>
<div class="line">[Monday 14 February 2011] [04:45:36] &lt;mikko&gt;  things that we know needs to be done</div>
<div class="line">[Monday 14 February 2011] [05:30:46] &lt;mikko&gt;  pieterh: there?</div>
<div class="line">[Monday 14 February 2011] [05:31:29] &lt;pieterh&gt;        mikko: hi</div>
<div class="line">[Monday 14 February 2011] [05:31:51] &lt;mikko&gt;  pieterh: is pkgconfig dependency acceptable in zfl?</div>
<div class="line">[Monday 14 February 2011] [05:32:43] &lt;pieterh&gt;        you mean autoconf tooling?</div>
<div class="line">[Monday 14 February 2011] [05:33:58] &lt;mikko&gt;  yes</div>
<div class="line">[Monday 14 February 2011] [05:34:01] &lt;sustrik&gt;        mikko: there&#8217;s 3.0 roadmap</div>
<div class="line">[Monday 14 February 2011] [05:34:11] &lt;mikko&gt;  pieterh: let me show you a patch</div>
<div class="line">[Monday 14 February 2011] [05:34:15] &lt;mikko&gt;  sec</div>
<div class="line">[Monday 14 February 2011] [05:34:19] &lt;pieterh&gt;        mikko: I used the same framework as for zmq</div>
<div class="line">[Monday 14 February 2011] [05:34:30] &lt;pieterh&gt;        but all suggestions welcome, of course</div>
<div class="line">[Monday 14 February 2011] [05:34:42] &lt;mikko&gt;  pieterh: <a class="reference external" href="https://github.com/mkoppanen/zfl/commit/25219e93d42e8fff6fac696c7ebcbe6e661fa2c3">https://github.com/mkoppanen/zfl/commit/25219e93d42e8fff6fac696c7ebcbe6e661fa2c3</a></div>
<div class="line">[Monday 14 February 2011] [05:34:52] &lt;mikko&gt;  pieterh: i sent one pull request for mingw32 fixes earlier</div>
<div class="line">[Monday 14 February 2011] [05:35:05] &lt;mikko&gt;  that can be rewritten without pkgconfig as well</div>
<div class="line">[Monday 14 February 2011] [05:35:09] &lt;mikko&gt;  to remove the dependency</div>
<div class="line">[Monday 14 February 2011] [05:35:36] &lt;pieterh&gt;        sorry to be ignorant... I&#8217;m not even sure what pkgconfig is/does</div>
<div class="line">[Monday 14 February 2011] [05:36:07] &lt;mikko&gt;  NAME pkg-config - Return metainformation about installed libraries</div>
<div class="line">[Monday 14 February 2011] [05:36:15] &lt;pieterh&gt;        right</div>
<div class="line">[Monday 14 February 2011] [05:36:33] &lt;mikko&gt;  cflags, libs to link etc</div>
<div class="line">[Monday 14 February 2011] [05:36:45] &lt;pieterh&gt;        if you&#8217;re happier removing the dependency, that&#8217;s fine by me</div>
<div class="line">[Monday 14 February 2011] [05:37:00] &lt;mikko&gt;  ok, ill tinker with it this evening</div>
<div class="line">[Monday 14 February 2011] [05:37:07] &lt;mikko&gt;  the mingw32 fix is more straight-forward</div>
<div class="line">[Monday 14 February 2011] [05:37:08] &lt;mikko&gt;  <a class="reference external" href="https://github.com/mkoppanen/zfl/commit/ce88c706fc0c1bb023cc422e0c707a1a90a07fe8">https://github.com/mkoppanen/zfl/commit/ce88c706fc0c1bb023cc422e0c707a1a90a07fe8</a></div>
<div class="line">[Monday 14 February 2011] [05:37:18] &lt;pieterh&gt;        let me apply that mingw32 patch then...</div>
<div class="line">[Monday 14 February 2011] [05:37:21] &lt;mikko&gt;  the assumption before was that build happens on linux if gnu compiler is used</div>
<div class="line">[Monday 14 February 2011] [05:37:38] &lt;mikko&gt;  so -DLINUX got defined in mingw32 and bsd</div>
<div class="line">[Monday 14 February 2011] [05:37:40] &lt;mikko&gt;  etc</div>
<div class="line">[Monday 14 February 2011] [05:37:45] &lt;pieterh&gt;        right</div>
<div class="line">[Monday 14 February 2011] [05:38:03] &lt;pieterh&gt;        there is some plausible benefit in having zfl build the same way as zeromq2</div>
<div class="line">[Monday 14 February 2011] [05:38:41] &lt;pieterh&gt;        and i assume you made a similar patch for the zeromq2 configure.in?</div>
<div class="line">[Monday 14 February 2011] [05:38:57] &lt;mikko&gt;  pieterh: zeromq2 hasn&#8217;t had that in ages</div>
<div class="line">[Monday 14 February 2011] [05:39:12] &lt;pieterh&gt;        the dependency, you mean?</div>
<div class="line">[Monday 14 February 2011] [05:39:14] &lt;pieterh&gt;        aight</div>
<div class="line">[Monday 14 February 2011] [05:39:23] &lt;mikko&gt;  the dependency to pkg-config can be removed</div>
<div class="line">[Monday 14 February 2011] [05:39:28] &lt;mikko&gt;  ill make a clean patch this evening</div>
<div class="line">[Monday 14 February 2011] [05:39:33] &lt;pieterh&gt;        nice</div>
<div class="line">[Monday 14 February 2011] [05:39:44] &lt;mikko&gt;  i think it&#8217;s easier for users to do: ./configure &#8211;with-libzmq=/usr/local</div>
<div class="line">[Monday 14 February 2011] [05:39:56] &lt;mikko&gt;  rather than having to specify CFLAGS and LDFLAGS</div>
<div class="line">[Monday 14 February 2011] [05:40:47] &lt;mikko&gt;  this is really more zfl specific as it uses zeromq as a dependency</div>
<div class="line">[Monday 14 February 2011] [05:41:33] &lt;mikko&gt;  i&#8217;ll add zfl build on solaris and freebsd at some point</div>
<div class="line">[Monday 14 February 2011] [05:48:53] &lt;pieterh&gt;        mikko: pull request merged</div>
<div class="line">[Monday 14 February 2011] [05:49:02] &lt;mikko&gt;  pieterh: will run mingw32 build now</div>
<div class="line">[Monday 14 February 2011] [05:49:03] &lt;mikko&gt;  sec</div>
<div class="line">[Monday 14 February 2011] [05:49:41] &lt;mikko&gt;  mingw32 and linux builds running now</div>
<div class="line">[Monday 14 February 2011] [05:49:46] &lt;pieterh&gt;        on linux it looks in /usr/local by default, right?</div>
<div class="line">[Monday 14 February 2011] [05:49:57] &lt;mikko&gt;  nope</div>
<div class="line">[Monday 14 February 2011] [05:50:20] &lt;pieterh&gt;        hmm, so how does this work on all my linux boxes without any special options...?</div>
<div class="line">[Monday 14 February 2011] [05:50:36] &lt;mikko&gt;  you&#8217;ve added /usr/local to runtime linkers conf</div>
<div class="line">[Monday 14 February 2011] [05:50:39] &lt;mikko&gt;  ?</div>
<div class="line">[Monday 14 February 2011] [05:50:41] &lt;mikko&gt;  or your distro adds it</div>
<div class="line">[Monday 14 February 2011] [05:50:44] &lt;pieterh&gt;        let me check...</div>
<div class="line">[Monday 14 February 2011] [05:50:55] &lt;mikko&gt;  cd /etc/ld.so.conf.d/</div>
<div class="line">[Monday 14 February 2011] [05:51:02] &lt;pieterh&gt;        LD_LIBRARY_PATH...</div>
<div class="line">[Monday 14 February 2011] [05:51:28] &lt;mikko&gt;  <a class="reference external" href="https://build.valokuva.org/job/zfl-master_ZeroMQ2-master_mingw32/19/">https://build.valokuva.org/job/zfl-master_ZeroMQ2-master_mingw32/19/</a></div>
<div class="line">[Monday 14 February 2011] [05:51:30] &lt;mikko&gt;  mingw builds now</div>
<div class="line">[Monday 14 February 2011] [05:51:38] &lt;mikko&gt;  and linux builds as well</div>
<div class="line">[Monday 14 February 2011] [05:52:02] &lt;mikko&gt;  this is how i got it configured on build box:</div>
<div class="line">[Monday 14 February 2011] [05:52:03] &lt;mikko&gt;  CFLAGS=&#8221;-I${ZEROMQ2_PREFIX_MASTER_MINGW32}/include&#8221; LDFLAGS=&#8221;-L${ZEROMQ2_PREFIX_MASTER_MINGW32}/lib&#8221; ./configure &#8211;target=mingw32 &#8211;build=i686-linux &#8211;host=i586-mingw32msvc</div>
<div class="line">[Monday 14 February 2011] [05:52:19] &lt;mikko&gt;  for mingw32</div>
<div class="line">[Monday 14 February 2011] [05:52:34] &lt;mikko&gt;  linux is: CFLAGS=&#8221;-I${ZEROMQ2_PREFIX_MASTER_GCC}/include&#8221; LDFLAGS=&#8221;-L${ZEROMQ2_PREFIX_MASTER_GCC}/lib&#8221; ./configure</div>
<div class="line">[Monday 14 February 2011] [05:54:17] &lt;pieterh&gt;        hmm, I don&#8217;t seem to need any of that... need to investigate</div>
<div class="line">[Monday 14 February 2011] [05:55:03] &lt;mikko&gt;  pieterh: the macro you use uses runtime linker</div>
<div class="line">[Monday 14 February 2011] [05:55:13] &lt;mikko&gt;  so if you got it configured then it should work (not sure about includes)</div>
<div class="line">[Monday 14 February 2011] [05:55:44] &lt;stimpie&gt;        I need to implement a push-pull with a custom loadbalancing strategy, what would be the recommend method? adjust the source and create a new socket type? implement it using PAIR&#8217;s?</div>
<div class="line">[Monday 14 February 2011] [05:55:52] &lt;mikko&gt;  do echo | gcc -v -x c -E -</div>
<div class="line">[Monday 14 February 2011] [05:55:59] &lt;mikko&gt;  and check for default includes</div>
<div class="line">[Monday 14 February 2011] [05:56:30] &lt;pieterh&gt;        mikko: yes, gcc goes looking in /usr/local/include</div>
<div class="line">[Monday 14 February 2011] [05:57:07] &lt;pieterh&gt;        stimpie, read the Guide and Ch3 on custom routing using XREP sockets</div>
<div class="line">[Monday 14 February 2011] [05:57:25] &lt;pieterh&gt;        to do custom routing you <em>always</em> use an XREP socket</div>
<div class="line">[Monday 14 February 2011] [06:01:06] &lt;pieterh&gt;        mikko: IMO it&#8217;s Ubuntu doing smart stuff with gcc configuration</div>
<div class="line">[Monday 14 February 2011] [06:01:07] &lt;stimpie&gt;        pieterh, ok thanks I will do some more reading</div>
<div class="line">[Monday 14 February 2011] [06:01:27] &lt;pieterh&gt;        stimpie, if it&#8217;s not clear in the Guide, let me know</div>
<div class="line">[Monday 14 February 2011] [06:02:04] &lt;mikko&gt;  pieterh: yes</div>
<div class="line">[Monday 14 February 2011] [06:02:17] &lt;mikko&gt;  pieterh: hence the build flag would be nice</div>
<div class="line">[Monday 14 February 2011] [06:02:24] &lt;pieterh&gt;        mikko: so basically any gcc system that is not set-up to look in /usr needs these build flags</div>
<div class="line">[Monday 14 February 2011] [06:02:25] &lt;pieterh&gt;        that&#8217;s clear</div>
<div class="line">[Monday 14 February 2011] [06:02:51] &lt;pieterh&gt;        feel free to change the README.txt file for zfl (patch)</div>
<div class="line">[Monday 14 February 2011] [06:03:12] &lt;mikko&gt;  pieterh: i&#8217;ll create a new patch to add the flag and update docs while im at it</div>
<div class="line">[Monday 14 February 2011] [06:03:38] &lt;mikko&gt;  probably won&#8217;t have time until this evening</div>
<div class="line">[Monday 14 February 2011] [06:04:21] &lt;pieterh&gt;        mikko: :-) there is no hurry</div>
<div class="line">[Monday 14 February 2011] [06:40:32] &lt;Guthur&gt; mikko: what was the link to your logs again?</div>
<div class="line">[Monday 14 February 2011] [06:40:48] &lt;mikko&gt;  <a class="reference external" href="http://valokuva.org/~mikko/zeromq.log">http://valokuva.org/~mikko/zeromq.log</a></div>
<div class="line">[Monday 14 February 2011] [06:41:03] &lt;Guthur&gt; cheers, you don&#8217;t mind me using it?</div>
<div class="line">[Monday 14 February 2011] [06:41:42] &lt;mikko&gt;  don&#8217;t like to it if possbly</div>
<div class="line">[Monday 14 February 2011] [06:41:46] &lt;mikko&gt;  possible*</div>
<div class="line">[Monday 14 February 2011] [06:42:36] &lt;Guthur&gt; oh no certainly, it was just for my personal use</div>
<div class="line">[Monday 14 February 2011] [06:42:44] &lt;Guthur&gt; to check anything I missed</div>
<div class="line">[Monday 14 February 2011] [06:42:49] &lt;mikko&gt;  thats fine</div>
<div class="line">[Monday 14 February 2011] [06:43:59] &lt;Guthur&gt; i see the talk of 2.1 roadmap earlier, this for movement to a stable release I assume?</div>
<div class="line">[Monday 14 February 2011] [06:52:25] &lt;sustrik&gt;        yeah</div>
<div class="line">[Monday 14 February 2011] [06:52:36] &lt;sustrik&gt;        i am not sure how to fomalise it though</div>
<div class="line">[Monday 14 February 2011] [06:58:11] &lt;Guthur&gt; sustrik: are there many outstanding issues?</div>
<div class="line">[Monday 14 February 2011] [06:58:20] &lt;mikko&gt;  gant chart!</div>
<div class="line">[Monday 14 February 2011] [06:59:02] &lt;sustrik&gt;        :)</div>
<div class="line">[Monday 14 February 2011] [06:59:12] &lt;sustrik&gt;        the problem is that everyone here is a volunteer</div>
<div class="line">[Monday 14 February 2011] [06:59:21] &lt;sustrik&gt;        so there&#8217;s no way to estimate anything</div>
<div class="line">[Monday 14 February 2011] [07:01:18] &lt;Guthur&gt; are the issues prioritized at all yet?</div>
<div class="line">[Monday 14 February 2011] [07:01:58] &lt;sustrik&gt;        what would that be good for?</div>
<div class="line">[Monday 14 February 2011] [07:02:43] &lt;Guthur&gt; well maybe there are some that must be resolved and some that would be nice to have resolved</div>
<div class="line">[Monday 14 February 2011] [07:03:08] &lt;Guthur&gt; I&#8217;ve not looked at the issues though, so I don&#8217;t know what there is</div>
<div class="line">[Monday 14 February 2011] [07:03:19] &lt;Guthur&gt; is it just the list on github?</div>
<div class="line">[Monday 14 February 2011] [07:03:29] &lt;sustrik&gt;        well, the point is that even an issue with highest priority won&#8217;t be solved unless someone decides to solve it</div>
<div class="line">[Monday 14 February 2011] [07:03:42] &lt;sustrik&gt;        so having priorities is kind of mute</div>
<div class="line">[Monday 14 February 2011] [07:06:23] &lt;Guthur&gt;  very true</div>
<div class="line">[Monday 14 February 2011] [07:08:10] &lt;Guthur&gt; though from the github issue list it seems hard to know what is an issue stopping 2.1 becoming stable</div>
<div class="line">[Monday 14 February 2011] [07:08:24] &lt;Guthur&gt; what/which</div>
<div class="line">[Monday 14 February 2011] [07:09:03] &lt;sustrik&gt;        there&#8217;s no formal criterion</div>
<div class="line">[Monday 14 February 2011] [07:09:26] &lt;sustrik&gt;        if people are happy with stability of 2.1 it will become stable</div>
<div class="line">[Monday 14 February 2011] [07:10:10] &lt;sustrik&gt;        i think it has to do with migration to 2.1</div>
<div class="line">[Monday 14 February 2011] [07:10:19] &lt;sustrik&gt;        some people have switched already</div>
<div class="line">[Monday 14 February 2011] [07:10:22] &lt;sustrik&gt;        some have not</div>
<div class="line">[Monday 14 February 2011] [07:12:10] &lt;sustrik&gt;        if there&#8217;s enough people using 2.1 in prodution, i believe we can make it &#8220;stable&#8221;</div>
<div class="line">[Monday 14 February 2011] [07:20:34] &lt;Guthur&gt; is 0MQ then working towards a 2.2 after that</div>
<div class="line">[Monday 14 February 2011] [07:22:06] &lt;sustrik&gt;        either 2.2 or 3.0</div>
<div class="line">[Monday 14 February 2011] [07:22:18] &lt;sustrik&gt;        depends on overall sentiment of the community</div>
<div class="line">[Monday 14 February 2011] [07:27:44] &lt;Guthur&gt; is the MQ/3.0 Roadmap up to date with current desires for 3.0?</div>
<div class="line">[Monday 14 February 2011] [07:28:37] &lt;mikko&gt;  i got a couple of desires that i would like to get in later releases</div>
<div class="line">[Monday 14 February 2011] [07:28:46] &lt;mikko&gt;  but it will take some time to produce patches</div>
<div class="line">[Monday 14 February 2011] [07:29:08] &lt;mikko&gt;  investigating UDT is one and another one is PUSH/PULL acks</div>
<div class="line">[Monday 14 February 2011] [07:29:50] &lt;sustrik&gt;        mikko: ack</div>
<div class="line">[Monday 14 February 2011] [07:30:19] &lt;sustrik&gt;        Guthur: the distinction is that 2.2 has to be backward compatible</div>
<div class="line">[Monday 14 February 2011] [07:30:37] &lt;sustrik&gt;        while 3.0 can break backward compatibility</div>
<div class="line">[Monday 14 February 2011] [07:30:52] &lt;sustrik&gt;        so 3.0 is a chance to fix API bugs and mis-designs</div>
<div class="line">[Monday 14 February 2011] [07:31:18] &lt;sustrik&gt;        however, introducing incompatible API is a painful process</div>
<div class="line">[Monday 14 February 2011] [07:31:42] &lt;sustrik&gt;        so people may choose to stick with existing API and work on 2.2 instead</div>
<div class="line">[Monday 14 February 2011] [07:32:08] &lt;mikko&gt;  do we have any outstanding ones?</div>
<div class="line">[Monday 14 February 2011] [07:32:18] &lt;sustrik&gt;        outstanding what?</div>
<div class="line">[Monday 14 February 2011] [07:32:27] &lt;mikko&gt;  &#8220;so 3.0 is a chance to fix API bugs and mis-designs&#8221;</div>
<div class="line">[Monday 14 February 2011] [07:32:34] &lt;mikko&gt;  api bugs and misdesign</div>
<div class="line">[Monday 14 February 2011] [07:32:38] &lt;sustrik&gt;        ah, many of them</div>
<div class="line">[Monday 14 February 2011] [07:32:47] &lt;sustrik&gt;        see socket option types</div>
<div class="line">[Monday 14 February 2011] [07:32:50] &lt;sustrik&gt;        they are a mess</div>
<div class="line">[Monday 14 February 2011] [07:34:00] &lt;Guthur&gt; is that the: Review the types of socket options for getsockopt/setsockopt (it&#8217;s kind of arbitrary now).</div>
<div class="line">[Monday 14 February 2011] [07:34:09] &lt;sustrik&gt;        another example: zero-copy should not be default</div>
<div class="line">[Monday 14 February 2011] [07:34:20] &lt;sustrik&gt;        zmq_send should look like POSIX send:</div>
<div class="line">[Monday 14 February 2011] [07:34:34] &lt;sustrik&gt;        zmq_send (void <a href="#id23"><span class="problematic" id="id24">*</span></a>buff, size_t size, int flags);</div>
<div class="line">[Monday 14 February 2011] [07:34:57] &lt;sustrik&gt;        Guthur: yes</div>
<div class="line">[Monday 14 February 2011] [07:38:48] &lt;sustrik&gt;        one intriguing option would be to provide both version of the API from the same library</div>
<div class="line">[Monday 14 February 2011] [07:39:02] &lt;sustrik&gt;        however, i am not sure whether that&#8217;s technically possible</div>
<div class="line">[Monday 14 February 2011] [07:40:30] &lt;Guthur&gt; like some compatibility layer on top the new API</div>
<div class="line">[Monday 14 February 2011] [07:40:49] &lt;sustrik&gt;        yep</div>
<div class="line">[Monday 14 February 2011] [07:40:56] &lt;mikko&gt;  LD_PRELOAD sumbols</div>
<div class="line">[Monday 14 February 2011] [07:40:59] &lt;mikko&gt;  symbols*</div>
<div class="line">[Monday 14 February 2011] [07:41:01] &lt;mikko&gt;  messy though</div>
<div class="line">[Monday 14 February 2011] [07:41:18] &lt;sustrik&gt;        not sure how portable that is</div>
<div class="line">[Monday 14 February 2011] [07:41:25] &lt;mikko&gt;  not very probably</div>
<div class="line">[Monday 14 February 2011] [07:41:41] &lt;sustrik&gt;        an alternative would be to export symbols such as:</div>
<div class="line">[Monday 14 February 2011] [07:41:44] &lt;sustrik&gt;        _zmq_init</div>
<div class="line">[Monday 14 February 2011] [07:41:47] &lt;sustrik&gt;        _zmq_socket</div>
<div class="line">[Monday 14 February 2011] [07:41:50] &lt;sustrik&gt;        etc.</div>
<div class="line">[Monday 14 February 2011] [07:41:59] &lt;sustrik&gt;        then have 2 header files</div>
<div class="line">[Monday 14 February 2011] [07:42:18] &lt;sustrik&gt;        containing simple inline functions</div>
<div class="line">[Monday 14 February 2011] [07:42:47] &lt;sustrik&gt;        that would call the appropriate _zmq routine</div>
<div class="line">[Monday 14 February 2011] [08:40:48] &lt;pieterh&gt;        sustrik: wrt 2.1 stable, IMO it&#8217;s self-regulating...</div>
<div class="line">[Monday 14 February 2011] [08:41:05] &lt;pieterh&gt;        when there are no patches for a certain period you can assume it&#8217;s stable</div>
<div class="line">[Monday 14 February 2011] [08:41:06] &lt;sustrik&gt;        yes, that&#8217;s what i was saying</div>
<div class="line">[Monday 14 February 2011] [08:41:19] &lt;pieterh&gt;        difficulty is when you mix old and new code, it can remain unstable forever</div>
<div class="line">[Monday 14 February 2011] [08:41:36] &lt;sustrik&gt;        ack</div>
<div class="line">[Monday 14 February 2011] [08:41:44] &lt;pieterh&gt;        i&#8217;d not take master HEAD to stable, ever</div>
<div class="line">[Monday 14 February 2011] [08:41:58] &lt;pieterh&gt;        but rather the 2.1 unstable + patches -&gt; stable</div>
<div class="line">[Monday 14 February 2011] [08:42:11] &lt;sustrik&gt;        i&#8217;ve missed that</div>
<div class="line">[Monday 14 February 2011] [08:42:32] &lt;pieterh&gt;        there is an unstable branch, no?</div>
<div class="line">[Monday 14 February 2011] [08:42:38] &lt;sustrik&gt;        master</div>
<div class="line">[Monday 14 February 2011] [08:42:51] &lt;pieterh&gt;        ah... well... this won&#8217;t be optimal then</div>
<div class="line">[Monday 14 February 2011] [08:43:03] &lt;pieterh&gt;        not if you develop on master</div>
<div class="line">[Monday 14 February 2011] [08:43:17] &lt;sustrik&gt;        development should go on on topic branches</div>
<div class="line">[Monday 14 February 2011] [08:43:29] &lt;pieterh&gt;        yes but then it does not get tested...</div>
<div class="line">[Monday 14 February 2011] [08:43:49] &lt;sustrik&gt;        true</div>
<div class="line">[Monday 14 February 2011] [08:43:51] &lt;pieterh&gt;        i think the basic principle is that any specific code ages and becomes stable (or unused) automatically</div>
<div class="line">[Monday 14 February 2011] [08:44:00] &lt;pieterh&gt;        like fine wine</div>
<div class="line">[Monday 14 February 2011] [08:44:08] &lt;sustrik&gt;        that&#8217;s the case with 2.1 i think</div>
<div class="line">[Monday 14 February 2011] [08:44:14] &lt;sustrik&gt;        people are already switching</div>
<div class="line">[Monday 14 February 2011] [08:44:24] &lt;pieterh&gt;        right but if you mix new wine with the old wine there is a problem</div>
<div class="line">[Monday 14 February 2011] [08:44:44] &lt;pieterh&gt;        you risk making a stable release that has relatively new, unproven code in it</div>
<div class="line">[Monday 14 February 2011] [08:45:21] &lt;sustrik&gt;        there&#8217;s still a maint branch</div>
<div class="line">[Monday 14 February 2011] [08:45:33] &lt;sustrik&gt;        bugs are still patched in maint</div>
<div class="line">[Monday 14 February 2011] [08:45:36] &lt;pieterh&gt;        this is something to discuss with Mato when he&#8217;s back from down-under</div>
<div class="line">[Monday 14 February 2011] [08:45:47] &lt;sustrik&gt;        yes</div>
<div class="line">[Monday 14 February 2011] [08:46:29] &lt;pieterh&gt;        if you can cleanly separate older code (6 months+) into its own branch you can push it to &#8216;stable&#8217; safely</div>
<div class="line">[Monday 14 February 2011] [08:46:43] &lt;pieterh&gt;        e.g. stuff like the socket shutdown mechanics from 2.1</div>
<div class="line">[Monday 14 February 2011] [08:47:02] &lt;mikko&gt;  but in that case you need to separate well-tested from old</div>
<div class="line">[Monday 14 February 2011] [08:47:12] &lt;pieterh&gt;        but it would be a pity to have e.g. the bug I found on win32 yesterday to still be in a &#8216;stable&#8217; release</div>
<div class="line">[Monday 14 February 2011] [08:47:22] &lt;mikko&gt;  older code that is implicitly used by everyone is more tested than some feature just used by some</div>
<div class="line">[Monday 14 February 2011] [08:47:28] &lt;pieterh&gt;        yeah</div>
<div class="line">[Monday 14 February 2011] [08:47:31] &lt;mikko&gt;  in the former you expect to see bugs quicker</div>
<div class="line">[Monday 14 February 2011] [08:47:39] &lt;pieterh&gt;        so you&#8217;d expect, IMO, to see</div>
<div class="line">[Monday 14 February 2011] [08:47:59] &lt;pieterh&gt;        - very stable (2.0.x), does not change except for major bugs</div>
<div class="line">[Monday 14 February 2011] [08:48:17] &lt;pieterh&gt;        - (almost) stable (2.1.x), maintained</div>
<div class="line">[Monday 14 February 2011] [08:48:26] &lt;pieterh&gt;        - raw (master HEAD)</div>
<div class="line">[Monday 14 February 2011] [08:48:38] &lt;pieterh&gt;        and all new work as rapidly as possible into HEAD</div>
<div class="line">[Monday 14 February 2011] [08:48:48] &lt;pieterh&gt;        e.g. xsub, xpub should be in HEAD now, so we actually test it</div>
<div class="line">[Monday 14 February 2011] [08:49:22] &lt;pieterh&gt;        but people have an &#8216;official latest&#8217; release to work with</div>
<div class="line">[Monday 14 February 2011] [08:49:43] &lt;pieterh&gt;        to have to choose between 2.0.x and HEAD is kind of painful</div>
<div class="line">[Monday 14 February 2011] [08:49:44] &lt;sustrik&gt;        that&#8217;s 2.1.0</div>
<div class="line">[Monday 14 February 2011] [08:49:50] &lt;pieterh&gt;        yeah, but it&#8217;s not maintained :-)</div>
<div class="line">[Monday 14 February 2011] [08:50:18] &lt;sustrik&gt;        wait a sec</div>
<div class="line">[Monday 14 February 2011] [08:50:24] &lt;sustrik&gt;        there are 3 things there&#8221;</div>
<div class="line">[Monday 14 February 2011] [08:50:39] &lt;sustrik&gt;        1. latest stable (2.0.10)</div>
<div class="line">[Monday 14 February 2011] [08:50:52] &lt;sustrik&gt;        2. latest dev (2.0.1)</div>
<div class="line">[Monday 14 February 2011] [08:50:55] &lt;sustrik&gt;        3. head</div>
<div class="line">[Monday 14 February 2011] [08:51:03] &lt;pieterh&gt;        2. latest dev (2.1.0) ?</div>
<div class="line">[Monday 14 February 2011] [08:51:13] &lt;sustrik&gt;        2.1.0, sorry</div>
<div class="line">[Monday 14 February 2011] [08:51:15] &lt;pieterh&gt;        ack</div>
<div class="line">[Monday 14 February 2011] [08:51:29] &lt;pieterh&gt;        let me add two things I think would help</div>
<div class="line">[Monday 14 February 2011] [08:51:50] &lt;pieterh&gt;        a. new code goes into HEAD asap, not topic branches unless extremely unstable</div>
<div class="line">[Monday 14 February 2011] [08:52:07] &lt;pieterh&gt;        b. latest dev is a branch and gets bug fixes from head</div>
<div class="line">[Monday 14 February 2011] [08:52:47] &lt;pieterh&gt;        rationale for a = faster testing of new code is very valuable</div>
<div class="line">[Monday 14 February 2011] [08:52:50] &lt;mikko&gt;  latest dev is bug fixes only?</div>
<div class="line">[Monday 14 February 2011] [08:52:56] &lt;pieterh&gt;        hmm, yes</div>
<div class="line">[Monday 14 February 2011] [08:53:02] &lt;pieterh&gt;        at least</div>
<div class="line">[Monday 14 February 2011] [08:53:05] &lt;sustrik&gt;        then it&#8217;s same as maint</div>
<div class="line">[Monday 14 February 2011] [08:53:09] &lt;mikko&gt;  so when do new features get in?</div>
<div class="line">[Monday 14 February 2011] [08:53:28] &lt;pieterh&gt;        well, this rolls around</div>
<div class="line">[Monday 14 February 2011] [08:53:31] &lt;mikko&gt;  and is new version branched of from HEAD?</div>
<div class="line">[Monday 14 February 2011] [08:53:36] &lt;pieterh&gt;        latest dev becomes stable at a certain point</div>
<div class="line">[Monday 14 February 2011] [08:53:41] &lt;pieterh&gt;        and then new dev is branched from head</div>
<div class="line">[Monday 14 February 2011] [08:53:49] &lt;pieterh&gt;        like I&#8217;d suggest 2.1.0 + patches is today ready for stable</div>
<div class="line">[Monday 14 February 2011] [08:53:56] &lt;pieterh&gt;        we want people to move off 2.0.10</div>
<div class="line">[Monday 14 February 2011] [08:54:11] &lt;pieterh&gt;        of course the packages can remain available</div>
<div class="line">[Monday 14 February 2011] [08:54:24] &lt;pieterh&gt;        but we don&#8217;t want people asking about stuff that was fixed 6 months ago</div>
<div class="line">[Monday 14 February 2011] [08:54:56] &lt;sustrik&gt;        i still don&#8217;t see why we need two maintenance branches instead of a single one</div>
<div class="line">[Monday 14 February 2011] [08:55:10] &lt;pieterh&gt;        because you have two generations of &#8216;officially released&#8217; code</div>
<div class="line">[Monday 14 February 2011] [08:55:22] &lt;pieterh&gt;        that is standard operating procedure</div>
<div class="line">[Monday 14 February 2011] [08:55:38] &lt;pieterh&gt;        and you need to maintain both branches</div>
<div class="line">[Monday 14 February 2011] [08:55:50] &lt;sustrik&gt;        me?</div>
<div class="line">[Monday 14 February 2011] [08:55:51] &lt;pieterh&gt;        while also having space for new functionality that is raw and liable to break</div>
<div class="line">[Monday 14 February 2011] [08:55:54] &lt;pieterh&gt;        not you</div>
<div class="line">[Monday 14 February 2011] [08:55:55] &lt;pieterh&gt;        one</div>
<div class="line">[Monday 14 February 2011] [08:55:57] &lt;pieterh&gt;         :-)</div>
<div class="line">[Monday 14 February 2011] [08:55:59] &lt;sustrik&gt;        :)</div>
<div class="line">[Monday 14 February 2011] [08:56:06] &lt;pieterh&gt;        i&#8217;m happy to do this</div>
<div class="line">[Monday 14 February 2011] [08:56:09] &lt;pieterh&gt;        i&#8217;ve said that often</div>
<div class="line">[Monday 14 February 2011] [08:56:33] &lt;mikko&gt;  if the process is being reviewed can we also look into using pull requests on github instead of signed patches?</div>
<div class="line">[Monday 14 February 2011] [08:56:42] &lt;pieterh&gt;        mikko: +1</div>
<div class="line">[Monday 14 February 2011] [08:57:29] &lt;pieterh&gt;        it allows the author of a patch to request explicitly that it be applied to a set of target branches</div>
<div class="line">[Monday 14 February 2011] [08:57:34] &lt;pieterh&gt;        and it creates an asynchronous workflow</div>
<div class="line">[Monday 14 February 2011] [08:57:36] &lt;pieterh&gt;        +100</div>
<div class="line">[Monday 14 February 2011] [08:58:56] &lt;sustrik&gt;        ok, we can have as many maintenance branches as we want</div>
<div class="line">[Monday 14 February 2011] [08:59:14] &lt;sustrik&gt;        have a look at linux, there are some 4-5 of them</div>
<div class="line">[Monday 14 February 2011] [08:59:25] &lt;pieterh&gt;        indeed</div>
<div class="line">[Monday 14 February 2011] [08:59:36] &lt;sustrik&gt;        as for new features, linux kernel uses concept of merge windows</div>
<div class="line">[Monday 14 February 2011] [08:59:50] &lt;mikko&gt;  do they still use the even and odd versions?</div>
<div class="line">[Monday 14 February 2011] [08:59:56] &lt;sustrik&gt;        nope</div>
<div class="line">[Monday 14 February 2011] [09:00:04] &lt;sustrik&gt;        basically, there&#8217;s a week or two in each cycle</div>
<div class="line">[Monday 14 February 2011] [09:00:15] &lt;sustrik&gt;        when people can ask their new code to be merged</div>
<div class="line">[Monday 14 February 2011] [09:00:26] &lt;pieterh&gt;        linux kernel processes are <em>weird</em>, they don&#8217;t always make good examples</div>
<div class="line">[Monday 14 February 2011] [09:00:32] &lt;sustrik&gt;        the rest of the cycle is used to stabilise the new codebase</div>
<div class="line">[Monday 14 February 2011] [09:01:33] &lt;sustrik&gt;        the merge windows eases the stabilisation process</div>
<div class="line">[Monday 14 February 2011] [09:02:10] &lt;sustrik&gt;        it makes the development of new features to happen in discrete steps</div>
<div class="line">[Monday 14 February 2011] [09:02:18] &lt;pieterh&gt;        i&#8217;d really avoid trying to imitate the Linux processes unless they solve real problems we face</div>
<div class="line">[Monday 14 February 2011] [09:02:44] &lt;mikko&gt;  i think one of the issues to solve is: clear and visible roadmap for new features</div>
<div class="line">[Monday 14 February 2011] [09:02:49] &lt;sustrik&gt;        well, this is the problem we face:</div>
<div class="line">[Monday 14 February 2011] [09:03:04] &lt;sustrik&gt;        the new fetures are merged in continuously</div>
<div class="line">[Monday 14 February 2011] [09:03:23] &lt;sustrik&gt;        so what you have is a shifting landscape</div>
<div class="line">[Monday 14 February 2011] [09:03:48] &lt;pieterh&gt;        i think the roadmap for 2.1 worked pretty well</div>
<div class="line">[Monday 14 February 2011] [09:04:00] &lt;pieterh&gt;        what sustrik says is right</div>
<div class="line">[Monday 14 February 2011] [09:04:07] &lt;pieterh&gt;        you cannot take a shifting landscape to stability</div>
<div class="line">[Monday 14 February 2011] [09:04:20] &lt;pieterh&gt;        today we have no way to produce a stable 2.1 release afaics</div>
<div class="line">[Monday 14 February 2011] [09:04:36] &lt;pieterh&gt;        except by putting all new work into topic branches and waiting for another 3 months</div>
<div class="line">[Monday 14 February 2011] [09:04:51] &lt;pieterh&gt;        and even then it would not be based on a real &#8216;unstable&#8217;</div>
<div class="line">[Monday 14 February 2011] [09:05:59] &lt;mikko&gt;  we don&#8217;t really classify incoming features much</div>
<div class="line">[Monday 14 February 2011] [09:06:29] &lt;sustrik&gt;        classify?</div>
<div class="line">[Monday 14 February 2011] [09:06:42] &lt;pieterh&gt;        mikko: you just need to ask Sustrik more often, &#8220;what are you going to make?&#8221; :-)</div>
<div class="line">[Monday 14 February 2011] [09:07:17] &lt;mikko&gt;  pieterh: im trying more and more be able to produce patches</div>
<div class="line">[Monday 14 February 2011] [09:07:30] &lt;Guthur&gt; i&#8217;d like to +1 the pull request, more from a laziness point of view, hehe</div>
<div class="line">[Monday 14 February 2011] [09:07:36] &lt;mikko&gt;  sustrik: we get a fair amount of feature requests</div>
<div class="line">[Monday 14 February 2011] [09:07:56] &lt;mikko&gt;  sustrik: which i think could be classified based on two factors: value and effort</div>
<div class="line">[Monday 14 February 2011] [09:08:04] &lt;mikko&gt;  maybe more factors needed but as a baseline</div>
<div class="line">[Monday 14 February 2011] [09:08:06] &lt;sustrik&gt;        i see</div>
<div class="line">[Monday 14 February 2011] [09:08:27] &lt;mikko&gt;  small effort, large value -&gt; you want to do those first</div>
<div class="line">[Monday 14 February 2011] [09:08:44] &lt;sustrik&gt;        in theory</div>
<div class="line">[Monday 14 February 2011] [09:08:46] &lt;mikko&gt;  large effort, large value -&gt; maybe schedule somewhere future</div>
<div class="line">[Monday 14 February 2011] [09:08:47] &lt;mikko&gt;  etc</div>
<div class="line">[Monday 14 February 2011] [09:08:56] &lt;sustrik&gt;        the reality is that everyone scratches his own itch</div>
<div class="line">[Monday 14 February 2011] [09:09:28] &lt;sustrik&gt;        so people are going to do work on what they need rather than on effort/value estimates</div>
<div class="line">[Monday 14 February 2011] [09:09:30] &lt;mikko&gt;  i think this would also give &#8216;tools&#8217; to people wanting to contribute</div>
<div class="line">[Monday 14 February 2011] [09:09:40] &lt;mikko&gt;  they could start from the small effort ones</div>
<div class="line">[Monday 14 February 2011] [09:09:53] &lt;mikko&gt;  sustrik: that is true as well</div>
<div class="line">[Monday 14 February 2011] [09:10:12] &lt;sustrik&gt;        sure, but do you really see people asking for something to do</div>
<div class="line">[Monday 14 February 2011] [09:10:14] &lt;sustrik&gt;        ?</div>
<div class="line">[Monday 14 February 2011] [09:10:56] &lt;sustrik&gt;        it&#8217;s rather like they choose what to do depending on what they want to use 0mq for</div>
<div class="line">[Monday 14 February 2011] [09:11:13] &lt;sustrik&gt;        GSoC may be a bit like what you have in mind</div>
<div class="line">[Monday 14 February 2011] [09:11:27] &lt;mikko&gt;  GSoC and also individuals</div>
<div class="line">[Monday 14 February 2011] [09:11:27] &lt;sustrik&gt;        but even with GSoC you just sketch some ideas</div>
<div class="line">[Monday 14 February 2011] [09:11:33] &lt;pieterh&gt;        mikko, what could be nice is an area on the wiki where people <em>ask</em> for help on areas</div>
<div class="line">[Monday 14 February 2011] [09:11:34] &lt;mikko&gt;  there are people who contribute just for the sake of it</div>
<div class="line">[Monday 14 February 2011] [09:11:47] &lt;pieterh&gt;        i.e. acting as mentors</div>
<div class="line">[Monday 14 February 2011] [09:11:48] &lt;sustrik&gt;        and people are free to work on something completely different</div>
<div class="line">[Monday 14 February 2011] [09:12:09] &lt;mikko&gt;  is it too late for GSoC this year?</div>
<div class="line">[Monday 14 February 2011] [09:12:13] &lt;sustrik&gt;        nope</div>
<div class="line">[Monday 14 February 2011] [09:12:31] &lt;sustrik&gt;        the applications are to be posted shortly</div>
<div class="line">[Monday 14 February 2011] [09:12:34] &lt;mikko&gt;  we should apply. i think there are a couple of things that GSoC students could do</div>
<div class="line">[Monday 14 February 2011] [09:13:19] &lt;pieterh&gt;        mikko: there is a page on the wiki with about 50 ideas</div>
<div class="line">[Monday 14 February 2011] [09:13:26] &lt;mikko&gt;  pieterh: which one?</div>
<div class="line">[Monday 14 February 2011] [09:13:46] &lt;pieterh&gt;        it should be visible from the main community page</div>
<div class="line">[Monday 14 February 2011] [09:13:49] &lt;pieterh&gt;        hang on...</div>
<div class="line">[Monday 14 February 2011] [09:14:03] &lt;pieterh&gt;        yeah</div>
<div class="line">[Monday 14 February 2011] [09:14:12] &lt;pieterh&gt;        <a class="reference external" href="http://www.zeromq.org/topics:google-summer-of-code">http://www.zeromq.org/topics:google-summer-of-code</a></div>
<div class="line">[Monday 14 February 2011] [09:14:20] &lt;mikko&gt;  hot topics</div>
<div class="line">[Monday 14 February 2011] [09:16:20] &lt;pieterh&gt;        :-)</div>
<div class="line">[Monday 14 February 2011] [09:21:50] &lt;mikko&gt;  udt and sctp are on the list</div>
<div class="line">[Monday 14 February 2011] [09:21:57] &lt;mikko&gt;  both very interesting transports</div>
<div class="line">[Monday 14 February 2011] [09:22:22] &lt;mikko&gt;  sustrik: <a class="reference external" href="https://github.com/zeromq/zeromq2/issues/issue/160">https://github.com/zeromq/zeromq2/issues/issue/160</a> is this likely to be major change?</div>
<div class="line">[Monday 14 February 2011] [09:23:15] &lt;Guthur&gt; From a prospective contributor point of view I think it would be nice to have a list of areas needing work</div>
<div class="line">[Monday 14 February 2011] [09:23:29] &lt;Guthur&gt; i was looking at the GSoC and the 3.0 roadmap like that though</div>
<div class="line">[Monday 14 February 2011] [09:23:51] &lt;Guthur&gt; i also have an interest in adding win32 IPC</div>
<div class="line">[Monday 14 February 2011] [09:24:20] &lt;pieterh&gt;        what do you think of the mentor idea?</div>
<div class="line">[Monday 14 February 2011] [09:24:32] &lt;pieterh&gt;        i.e. area of work means working with someone who helps you get into that code</div>
<div class="line">[Monday 14 February 2011] [09:25:06] &lt;Guthur&gt; yeah that&#8217;s a neat idea, though devs here tend to be very helpful as well</div>
<div class="line">[Monday 14 February 2011] [09:25:57] &lt;Guthur&gt; i&#8217;ve been asking here regarding pointers in starting the win32 IPC</div>
<div class="line">[Monday 14 February 2011] [09:26:14] &lt;Guthur&gt; got a lot the preliminary research done at the weekend there</div>
<div class="line">[Monday 14 February 2011] [09:26:53] &lt;Guthur&gt; sustrik gave me a lot of pointers on where to start looking in ZMQ as well</div>
<div class="line">[Monday 14 February 2011] [09:27:15] &lt;pieterh&gt;        Grrr. we need ipc: working on windows... :-/</div>
<div class="line">[Monday 14 February 2011] [09:27:36] &lt;pieterh&gt;        just hitting problems due to that</div>
<div class="line">[Monday 14 February 2011] [09:28:49] &lt;pieterh&gt;        Guthur, can I help you make IPC work on win32?</div>
<div class="line">[Monday 14 February 2011] [09:30:24] &lt;pieterh&gt;        Oh... I&#8217;m using inproc: ... I take it back :-)</div>
<div class="line">[Monday 14 February 2011] [09:35:56] &lt;mikko&gt;  pieterh: zfl doesn&#8217;t need to link against libuuid, right?</div>
<div class="line">[Monday 14 February 2011] [09:36:10] &lt;Guthur&gt; pieterh: hehe, well hopefully someone will need it, I&#8217;m sure they will</div>
<div class="line">[Monday 14 February 2011] [09:36:48] &lt;Guthur&gt; I just need to write some code now for it, my time is limited during the week though due to work, and I&#8217;ll be in dublin on saturday</div>
<div class="line">[Monday 14 February 2011] [09:37:13] &lt;Guthur&gt; hopefully slow but steady progress will be made</div>
<div class="line">[Monday 14 February 2011] [09:39:10] &lt;sustrik&gt;        btw guys, there&#8217;s a need for backup mentor for GSoC</div>
<div class="line">[Monday 14 February 2011] [09:39:27] &lt;sustrik&gt;        i can be the mentor as i know the code best</div>
<div class="line">[Monday 14 February 2011] [09:39:45] &lt;sustrik&gt;        but the rules of GSoC require to have a backup mentor as well</div>
<div class="line">[Monday 14 February 2011] [09:40:09] &lt;sustrik&gt;        in case i got run over by car or something</div>
<div class="line">[Monday 14 February 2011] [09:40:29] &lt;sustrik&gt;        any volunteers?</div>
<div class="line">[Monday 14 February 2011] [09:44:23] &lt;Guthur&gt; probably need to send that on ml</div>
<div class="line">[Monday 14 February 2011] [09:44:52] &lt;sustrik&gt;        i&#8217;ve already did :)</div>
<div class="line">[Monday 14 February 2011] [09:45:01] &lt;sustrik&gt;        no answer though</div>
<div class="line">[Monday 14 February 2011] [09:51:20] &lt;pieterh&gt;        mikko: well, zfl links with zeromq, which links with libuuid</div>
<div class="line">[Monday 14 February 2011] [09:51:39] &lt;mikko&gt;  pieterh: but zfl doesn&#8217;t need to link libuuid</div>
<div class="line">[Monday 14 February 2011] [09:51:44] &lt;mikko&gt;  ?</div>
<div class="line">[Monday 14 February 2011] [09:52:05] &lt;pieterh&gt;        mikko: it&#8217;s like I said... there are zfl classes that link zmq functions</div>
<div class="line">[Monday 14 February 2011] [09:52:18] &lt;pieterh&gt;        like zfl_msg and zfl_rpc</div>
<div class="line">[Monday 14 February 2011] [09:52:33] &lt;sustrik&gt;        zfl-&gt;libzmq-&gt;libuuid</div>
<div class="line">[Monday 14 February 2011] [09:52:47] &lt;pieterh&gt;        sustrik: that email had too many questions in it, I doubt many read the part about backup mentor</div>
<div class="line">[Monday 14 February 2011] [09:52:48] &lt;mikko&gt;  yeah, but zfl links against libuuid as well which i think is unnecessary dependency</div>
<div class="line">[Monday 14 February 2011] [09:53:16] &lt;pieterh&gt;        zfl_selftest will need it</div>
<div class="line">[Monday 14 February 2011] [09:53:29] &lt;pieterh&gt;        remove the dependency, see if it still works :-)</div>
<div class="line">[Monday 14 February 2011] [09:54:05] &lt;pieterh&gt;        sustrik: do you know any place to get kefir seeds in bratislava?</div>
<div class="line">[Monday 14 February 2011] [09:54:50] &lt;mikko&gt;  pieterh: i think it should be fine as libzmq doesnt expose any libuuid stuff directly</div>
<div class="line">[Monday 14 February 2011] [09:55:05] &lt;sustrik&gt;        hm, some bio-food store, i would say</div>
<div class="line">[Monday 14 February 2011] [09:55:06] &lt;mikko&gt;  so there should be no need for dependent programs/libraries to link with libuuid</div>
<div class="line">[Monday 14 February 2011] [09:55:10] &lt;mikko&gt;  will test</div>
<div class="line">[Monday 14 February 2011] [09:55:17] &lt;sustrik&gt;        never tried to buy it myself</div>
<div class="line">[Monday 14 February 2011] [09:55:42] &lt;pieterh&gt;        ah, katka will know... :-)</div>
<div class="line">[Monday 14 February 2011] [09:56:06]   * pieterh needs a reliable supply of evil slavic fermented milk products</div>
<div class="line">[Monday 14 February 2011] [09:56:22] &lt;sustrik&gt;        you can buy kefir in any shop here</div>
<div class="line">[Monday 14 February 2011] [09:56:28] &lt;sustrik&gt;        but it&#8217;s pasteurized</div>
<div class="line">[Monday 14 February 2011] [09:56:51] &lt;sustrik&gt;        so the culture is dead i suppose</div>
<div class="line">[Monday 14 February 2011] [09:56:57] &lt;pieterh&gt;        made from pasteurized milk but not itself pasteurized</div>
<div class="line">[Monday 14 February 2011] [09:57:02] &lt;pieterh&gt;        otherwise there&#8217;d be no point</div>
<div class="line">[Monday 14 February 2011] [09:57:28] &lt;pieterh&gt;        i&#8217;ve cultured kefir here, you can buy imported Polish kefir in some places</div>
<div class="line">[Monday 14 February 2011] [09:57:44] &lt;pieterh&gt;        but it&#8217;s kind of hard to find</div>
<div class="line">[Monday 14 February 2011] [09:58:32] &lt;pieterh&gt;        mikko: regarding uuid, IMO it&#8217;s better to leave the check in there</div>
<div class="line">[Monday 14 February 2011] [09:58:49] &lt;pieterh&gt;        since otherwise people will just get an error when they try to link their apps, if they don&#8217;t have libuuid</div>
<div class="line">[Monday 14 February 2011] [10:00:16] &lt;sustrik&gt;        i have bottle of kefir in the fridge, it says nothing about pasteurisation, so it&#8217;s probably alive</div>
<div class="line">[Monday 14 February 2011] [10:01:40] &lt;sustrik&gt;        my girlfriend suggests that the culture may be sold in pharmacy</div>
<div class="line">[Monday 14 February 2011] [10:01:41] &lt;sustrik&gt;        no guarantee though</div>
<div class="line">[Monday 14 February 2011] [10:02:25] &lt;pieterh&gt;        hmm, there are some online stores, will check them out</div>
<div class="line">[Monday 14 February 2011] [10:03:22] &lt;pieterh&gt;        heh, there are even kefir grain sharing communities :-)</div>
<div class="line">[Monday 14 February 2011] [10:06:00] &lt;mikko&gt;  pieterh: what do you mean?</div>
<div class="line">[Monday 14 February 2011] [10:06:09] &lt;mikko&gt;  pieterh: people shouldnt need to link libuuid</div>
<div class="line">[Monday 14 February 2011] [10:07:22] &lt;pieterh&gt;        mikko: we seem to have a misunderstanding...</div>
<div class="line">[Monday 14 February 2011] [10:07:39] &lt;pieterh&gt;        if you link with libzfl, you&#8217;re going to need the uuid functions</div>
<div class="line">[Monday 14 February 2011] [10:07:58] &lt;mikko&gt;  pieterh: libzfl doesn&#8217;t seem to use them directly (from what i can see)</div>
<div class="line">[Monday 14 February 2011] [10:08:09] &lt;mikko&gt;  pieterh: only through libzmq</div>
<div class="line">[Monday 14 February 2011] [10:08:15] &lt;mikko&gt;  or am i missing something (?)</div>
<div class="line">[Monday 14 February 2011] [10:10:28] &lt;pieterh&gt;        link is link</div>
<div class="line">[Monday 14 February 2011] [10:10:42] &lt;pieterh&gt;        there will be a dependency on uuid functions</div>
<div class="line">[Monday 14 February 2011] [10:10:48] &lt;sustrik&gt;        i think it&#8217;s different for staci and dynamic libraries</div>
<div class="line">[Monday 14 February 2011] [10:11:18] &lt;sustrik&gt;        static*</div>
<div class="line">[Monday 14 February 2011] [10:11:23] &lt;pieterh&gt;        i don&#8217;t think so</div>
<div class="line">[Monday 14 February 2011] [10:12:08] &lt;sustrik&gt;        if zfl links static version of libzmq, it has to link with libuuid</div>
<div class="line">[Monday 14 February 2011] [10:12:20] &lt;pieterh&gt;        if you do a static link, linker will search for uuid functions at link time</div>
<div class="line">[Monday 14 February 2011] [10:12:26] &lt;mikko&gt;  unless libzmq links static version of uuid</div>
<div class="line">[Monday 14 February 2011] [10:12:30] &lt;mikko&gt;  in which case they would collide</div>
<div class="line">[Monday 14 February 2011] [10:12:37] &lt;pieterh&gt;        mikko: libraries do not link...</div>
<div class="line">[Monday 14 February 2011] [10:13:05] &lt;pieterh&gt;        if you use dynamic libraries, executable will look for uuid functions at run time</div>
<div class="line">[Monday 14 February 2011] [10:13:12] &lt;pieterh&gt;        it&#8217;s the same result</div>
<div class="line">[Monday 14 February 2011] [10:13:21] &lt;pieterh&gt;        if you use zfl you will eventually have to have uuid on your box</div>
<div class="line">[Monday 14 February 2011] [10:13:58] &lt;pieterh&gt;        libzmq <em>never</em> includes other libraries</div>
<div class="line">[Monday 14 February 2011] [10:14:13] &lt;pieterh&gt;        on no system, ever, afaik</div>
<div class="line">[Monday 14 February 2011] [10:14:50] &lt;mikko&gt;  libuuid is shared library dependency for libzmq</div>
<div class="line">[Monday 14 February 2011] [10:15:54] &lt;pieterh&gt;        if you remove the dependency check in configure.in, in zmq, libzmq will build fine</div>
<div class="line">[Monday 14 February 2011] [10:17:42] &lt;pieterh&gt;        and if you don&#8217;t have libuuid installed, your apps will run until a peer tries to generate an identity</div>
<div class="line">[Monday 14 February 2011] [10:18:01] &lt;pieterh&gt;        alternatively if you&#8217;re doing static links, your apps won&#8217;t link at all</div>
<div class="line">[Monday 14 February 2011] [10:18:37] &lt;pieterh&gt;        this is precisely the same situation for a zfl app</div>
<div class="line">[Monday 14 February 2011] [10:18:46] &lt;pieterh&gt;        and therefore the check has exactly the same purpose and value</div>
<div class="line">[Monday 14 February 2011] [10:21:24] &lt;mikko&gt;  what happens in a situation where i have libzmq statically linked with libuuid and i try to use that with libzfl?</div>
<div class="line">[Monday 14 February 2011] [10:23:15] &lt;mikko&gt;  i guess thats more rare scenario</div>
<div class="line">[Monday 14 February 2011] [10:24:59] &lt;sustrik&gt;        i have no idea of how it is to be done</div>
<div class="line">[Monday 14 February 2011] [10:25:15] &lt;sustrik&gt;        however, i would suggest following the best practices</div>
<div class="line">[Monday 14 February 2011] [10:25:17] &lt;mikko&gt;  i guess it doesn&#8217;t harm to have the explicit dependency there</div>
<div class="line">[Monday 14 February 2011] [10:25:28] &lt;sustrik&gt;        rather than trying to figure it out yourselves</div>
<div class="line">[Monday 14 February 2011] [10:25:30] &lt;pieterh&gt;        mikko: there is no such thing afaik as a &#8220;statically linked library&#8221;</div>
<div class="line">[Monday 14 February 2011] [10:26:03] &lt;pieterh&gt;        you create statically linked executables that pull in all referenced object files from various lbraries</div>
<div class="line">[Monday 14 February 2011] [10:27:09] &lt;pieterh&gt;        I don&#8217;t know if any linkers allow a mix of static and dynamic</div>
<div class="line">[Monday 14 February 2011] [10:27:11] &lt;mikko&gt;  pieterh: on linux you seem to be able to include static libraries inside shared libraries</div>
<div class="line">[Monday 14 February 2011] [10:27:31] &lt;mikko&gt;  did some investigation a while ago regarding pgm builds</div>
<div class="line">[Monday 14 February 2011] [10:27:36] &lt;mikko&gt;  but it&#8217;s non-portable case anyway</div>
<div class="line">[Monday 14 February 2011] [10:28:09] &lt;pieterh&gt;        weird and wonderful and in that specific case, if libzmq was changed to do that, we could drop the uuid check in zfl for those platforms</div>
<div class="line">[Monday 14 February 2011] [10:28:52] &lt;mikko&gt;  the only reason i know this is because i was looking into openpgm autotools builds and how to include the results of those in zeromq</div>
<div class="line">[Monday 14 February 2011] [10:29:20] &lt;sustrik&gt;        mikko: btw have you seen the email wrt. openvms builds?</div>
<div class="line">[Monday 14 February 2011] [10:29:26] &lt;mikko&gt;  but my original thinking was related to libzmq making a dependency to libuuid already it wouldnt be necessary in libzfl</div>
<div class="line">[Monday 14 February 2011] [10:29:49] &lt;mikko&gt;  but i guess it&#8217;s ok to be explicit about it especially when its almost identical to zeromq build check</div>
<div class="line">[Monday 14 February 2011] [10:30:35] &lt;mikko&gt;  sustrik: yeah, haven&#8217;t formulated a response yet</div>
<div class="line">[Monday 14 February 2011] [10:30:58] &lt;sustrik&gt;        actually, i think there&#8217;s java on openvms</div>
<div class="line">[Monday 14 February 2011] [10:31:14] &lt;sustrik&gt;        but i have no idea whether hudson will run on it</div>
<div class="line">[Monday 14 February 2011] [10:31:31] &lt;sustrik&gt;        s/hudson/jenkins</div>
<div class="line">[Monday 14 February 2011] [10:32:02] &lt;mikko&gt;  we should be able to execute a script over ssh as well</div>
<div class="line">[Monday 14 February 2011] [10:32:24] &lt;sustrik&gt;        ack</div>
<div class="line">[Monday 14 February 2011] [10:36:44] &lt;mikko&gt;  sustrik: responded</div>
<div class="line">[Monday 14 February 2011] [10:36:49] &lt;sustrik&gt;        thx</div>
<div class="line">[Monday 14 February 2011] [13:05:53] &lt;Guthur&gt; would a socket pool make much sense from a 0MQ perspective?</div>
<div class="line">[Monday 14 February 2011] [13:06:31] &lt;Guthur&gt; I&#8217;m thinking of implementing in C# and was curious if it would translate down into the 0MQ lib</div>
<div class="line">[Monday 14 February 2011] [13:34:53] &lt;pieterh&gt;        Guthur, what problem does that solve?</div>
<div class="line">[Monday 14 February 2011] [13:36:00] &lt;Guthur&gt; pieterh, so that sockets can be reused</div>
<div class="line">[Monday 14 February 2011] [13:36:19] &lt;Guthur&gt; not sure if it will really benefit much</div>
<div class="line">[Monday 14 February 2011] [13:36:44] &lt;Guthur&gt; in a managed environment it may have more benefit</div>
<div class="line">[Monday 14 February 2011] [13:37:00] &lt;bitweiler&gt;      can zeromq send any kind of data or does it have to be string data?</div>
<div class="line">[Monday 14 February 2011] [13:38:03] &lt;Guthur&gt; bitweiler, the messages can contain any byte data</div>
<div class="line">[Monday 14 February 2011] [13:38:18] &lt;bitweiler&gt;      okay thanks :)</div>
<div class="line">[Monday 14 February 2011] [13:42:58] &lt;Guthur&gt; pieterh, I had the situation where there is many differing threads coming in and I was thinking of having a pool of already connected sockets for them to use and reuse</div>
<div class="line">[Monday 14 February 2011] [13:43:21] &lt;Guthur&gt; probably too specialized to be relevant to 0MQ</div>
<div class="line">[Monday 14 February 2011] [13:57:26] &lt;Guthur&gt; it&#8217;s partly inspired by WCF which is quite fast once it is &#8216;warmed up&#8217;, in part due to reusing the connection</div>
<div class="line">[Monday 14 February 2011] [13:57:58] &lt;Guthur&gt; i need to bench of course</div>
<div class="line">[Monday 14 February 2011] [14:03:08] &lt;pieterh&gt;        Guthur, sorry, was away...</div>
<div class="line">[Monday 14 February 2011] [14:03:32] &lt;pieterh&gt;        Reusing connections could be a fun optimization but you may hit the issue of flushing messages on sockets</div>
<div class="line">[Monday 14 February 2011] [14:03:57] &lt;pieterh&gt;        I&#8217;ve seen apps that did a lot of socket opening and closing</div>
<div class="line">[Monday 14 February 2011] [14:04:02] &lt;pieterh&gt;        but they were IMO badly designed</div>
<div class="line">[Monday 14 February 2011] [14:04:52] &lt;pieterh&gt;        TCP startup costs are significant compared to message transfer</div>
<div class="line">[Monday 14 February 2011] [14:13:17] &lt;Guthur&gt; it&#8217;s a interesting minor wee exercise</div>
<div class="line">[Monday 14 February 2011] [14:19:50] &lt;Guthur&gt; pieterh, are other socket types (in ZMQ) reasonable cheap to create</div>
<div class="line">[Monday 14 February 2011] [14:57:21] &lt;pieterh&gt;        Guthur, I&#8217;d expect them to be very cheap, yes... it&#8217;s something to measure if you want figures</div>
<div class="line">[Monday 14 February 2011] [15:02:25] &lt;cremes&gt; on linux do i need to do anything special to compile the lib to use epoll?</div>
<div class="line">[Monday 14 February 2011] [15:02:31] &lt;cremes&gt; or does it pick that up automatically?</div>
<div class="line">[Monday 14 February 2011] [15:06:10] &lt;Guthur&gt; cremes, will epoll is #ifdef ZMQ_HAVE_LINUX if that makes any difference</div>
<div class="line">[Monday 14 February 2011] [15:06:15] &lt;Guthur&gt; will/well</div>
<div class="line">[Monday 14 February 2011] [15:07:46] &lt;cremes&gt; Guthur: ah, i see that now</div>
<div class="line">[Monday 14 February 2011] [15:08:00] &lt;cremes&gt; my config.log shows it set to 1 so i assume it picked it up correctly</div>
<div class="line">[Monday 14 February 2011] [15:17:57] &lt;neale1&gt; vargaz: I just pushed my s390x unwind changes. It hits a couple of common files in mini so you may want to inspect</div>
<div class="line">[Monday 14 February 2011] [15:20:14] &lt;neale1&gt; Sorry wrong window!</div>
<div class="line">[Monday 14 February 2011] [15:28:43] &lt;cremes&gt; i am seeing something quite odd on linux (2.6.35-ARCH)</div>
<div class="line">[Monday 14 February 2011] [15:29:22] &lt;cremes&gt; processes that should be idle are showing 80% cpu; it looks like it&#8217;s all in zmq_poll</div>
<div class="line">[Monday 14 February 2011] [15:29:29] &lt;cremes&gt; which is set for a 10ms timeout</div>
<div class="line">[Monday 14 February 2011] [15:29:37] &lt;cremes&gt; that shouldn&#8217;t tax the machine at all</div>
<div class="line">[Monday 14 February 2011] [15:29:46] &lt;cremes&gt; suggestions on debugging this?</div>
<div class="line">[Monday 14 February 2011] [15:34:11] &lt;pieterh&gt;        cremes: perhaps you&#8217;re doing other heavy work in that loop</div>
<div class="line">[Monday 14 February 2011] [15:34:18] &lt;pieterh&gt;        profiler should help</div>
<div class="line">[Monday 14 February 2011] [15:34:26] &lt;cremes&gt; pieterh: nope, i&#8217;m not doing <em>any</em> work</div>
<div class="line">[Monday 14 February 2011] [15:34:42] &lt;cremes&gt; running the exact same code on OSX shows around 3-5% cpu</div>
<div class="line">[Monday 14 February 2011] [15:34:54] &lt;cremes&gt; do you have a suggested profiler?</div>
<div class="line">[Monday 14 February 2011] [15:35:21] &lt;pieterh&gt;        gprof springs to mind</div>
<div class="line">[Monday 14 February 2011] [15:35:30] &lt;pieterh&gt;        it sounds like a bug in zmq</div>
<div class="line">[Monday 14 February 2011] [15:35:45] &lt;cremes&gt; okay, i&#8217;ll poke at it with gprof</div>
<div class="line">[Monday 14 February 2011] [15:36:47] &lt;Guthur&gt; cremes, you have remembered poll takes micro seconds, not sure if that would effect CPU load, but it&#8217;s something I keep forgetting</div>
<div class="line">[Monday 14 February 2011] [15:37:13] &lt;cremes&gt; Guthur: yes, i pass 10000 as the value for a 10ms timeout</div>
<div class="line">[Monday 14 February 2011] [15:37:41] &lt;cremes&gt; it looks like a platform bug; osx is okay with it (for once) and linux is not</div>
<div class="line">[Monday 14 February 2011] [15:43:30] &lt;mikko&gt;  pieterh: pull req sent</div>
<div class="line">[Monday 14 February 2011] [15:43:37] &lt;mikko&gt;  pieterh: does that look sensible?</div>
<div class="line">[Monday 14 February 2011] [15:47:40] &lt;pieterh&gt;        mikko: hang on a sec</div>
<div class="line">[Monday 14 February 2011] [15:49:51] &lt;pieterh&gt;        mikko: yeah, but you removed the check for uuid :-)</div>
<div class="line">[Monday 14 February 2011] [15:50:03] &lt;mikko&gt;  i did?</div>
<div class="line">[Monday 14 February 2011] [15:50:18] &lt;pieterh&gt;        looks like it</div>
<div class="line">[Monday 14 February 2011] [15:50:32] &lt;pieterh&gt;        actually I don&#8217;t mind, people building zfl will normally have built zmq already</div>
<div class="line">[Monday 14 February 2011] [15:50:37] &lt;mikko&gt;  oh, didnt save file before reverting that</div>
<div class="line">[Monday 14 February 2011] [15:50:56] &lt;mikko&gt;  i also noticed one thing</div>
<div class="line">[Monday 14 February 2011] [15:51:06] &lt;mikko&gt;  majority of the tests in configure.in for zfl are done in C++</div>
<div class="line">[Monday 14 February 2011] [15:51:30] &lt;pieterh&gt;        lol, yes, inherited from zmq</div>
<div class="line">[Monday 14 February 2011] [15:51:34] &lt;pieterh&gt;        feel free to rip em out</div>
<div class="line">[Monday 14 February 2011] [15:54:14] &lt;mikko&gt;  are you planning to use these things in the build in future?</div>
<div class="line">[Monday 14 February 2011] [15:54:21] &lt;mikko&gt;  as there is much inherited from zmq build</div>
<div class="line">[Monday 14 February 2011] [15:54:35] &lt;mikko&gt;  like checks for atomic operations</div>
<div class="line">[Monday 14 February 2011] [15:54:38] &lt;pieterh&gt;        to some extent this was meant to be a template for other libraries</div>
<div class="line">[Monday 14 February 2011] [15:54:50] &lt;pieterh&gt;        but I doubt that will happen</div>
<div class="line">[Monday 14 February 2011] [15:55:01] &lt;mikko&gt;  on zeromq side i tried to isolate these things into functions</div>
<div class="line">[Monday 14 February 2011] [15:55:04] &lt;pieterh&gt;        take an axe to it, you have a blank check</div>
<div class="line">[Monday 14 February 2011] [15:55:16] &lt;mikko&gt;  <a class="reference external" href="https://github.com/zeromq/zeromq2/blob/master/acinclude.m4">https://github.com/zeromq/zeromq2/blob/master/acinclude.m4</a></div>
<div class="line">[Monday 14 February 2011] [15:55:26] &lt;mikko&gt;  these should be fairly reusable if needed</div>
<div class="line">[Monday 14 February 2011] [15:56:02] &lt;pieterh&gt;        it&#8217;s a shame it&#8217;s not reusable as-is</div>
<div class="line">[Monday 14 February 2011] [15:56:18] &lt;pieterh&gt;        nice work</div>
<div class="line">[Monday 14 February 2011] [15:56:58] &lt;pieterh&gt;        mikko: are you volunteering to give the zfl tooling a clean-up?</div>
<div class="line">[Monday 14 February 2011] [15:57:04] &lt;pieterh&gt;        :-)</div>
<div class="line">[Monday 14 February 2011] [15:57:14] &lt;pieterh&gt;        for me, it works, which is kind of sufficient</div>
<div class="line">[Monday 14 February 2011] [15:57:22] &lt;pieterh&gt;        since what I really like doing is writing beautiful C code</div>
<div class="line">[Monday 14 February 2011] [15:57:55] &lt;mikko&gt;  pieterh: yes, i think the build can be simplified a lot</div>
<div class="line">[Monday 14 February 2011] [15:57:59] &lt;pieterh&gt;        mato yells from the back of the room, &#8220;keep trying old man, one day you&#8217;ll get it right!&#8221;</div>
<div class="line">[Monday 14 February 2011] [15:58:00] &lt;mikko&gt;  i&#8217;ll take a poke at it</div>
<div class="line">[Monday 14 February 2011] [15:58:03] &lt;pieterh&gt;        yay!</div>
<div class="line">[Monday 14 February 2011] [15:59:13] &lt;pieterh&gt;        i doubt we&#8217;ll have more C/C++ libraries but it&#8217;s always possible</div>
<div class="line">[Monday 14 February 2011] [16:03:37] &lt;Guthur&gt; pieterh, It&#8217;s ok there is probably only a handful of people how can write beautiful C code, and even less than that for C++ (probably none)</div>
<div class="line">[Monday 14 February 2011] [16:03:45] &lt;Guthur&gt; how/who</div>
<div class="line">[Monday 14 February 2011] [16:08:03] &lt;pieterh&gt;        Guthur, I wasn&#8217;t being modest :-)</div>
<div class="line">[Monday 14 February 2011] [17:28:47] &lt;Luke234&gt;        Hey I&#8217;m trying to build and install the ZMQ java bindings for windows but can&#8217;t locate the java class files the docs mention</div>
<div class="line">[Monday 14 February 2011] [17:29:12] &lt;Luke234&gt;        <a class="reference external" href="http://www.zeromq.org/bindings:java">http://www.zeromq.org/bindings:java</a></div>
<div class="line">[Monday 14 February 2011] [17:29:46] &lt;Luke234&gt;        &#8220;Secondly, make sure that you have set the Java classpath to the directory where MQ classes reside.&#8221; anyone know where I can get those classes?</div>
<div class="line">[Monday 14 February 2011] [17:40:04] &lt;mikko&gt;  Luke234: iirc you build them with ant</div>
<div class="line">[Monday 14 February 2011] [18:18:09] &lt;Guthur&gt; sustrik: will it be possible for 0MQ to pass in an extended OVERLAPPED struct to pipe ops for use with  IOCP, where the OVERLAPPED struct basically has the standard content plus what would usually be in poll_entry_t</div>
<div class="line">[Monday 14 February 2011] [18:19:21] &lt;Guthur&gt; there is other possibilities though</div>
<div class="line">[Monday 14 February 2011] [18:20:29] &lt;Guthur&gt; we could just pass a generic extend OVERLAPPED struct with the OP set, and use the completion key to get the poll_entry_t</div>
<div class="line">[Monday 14 February 2011] [18:20:36] &lt;Guthur&gt; which might be neater</div>
<div class="line">[Tuesday 15 February 2011] [03:26:51] &lt;sustrik&gt;       Guthur: what&#8217;s pipe ops?</div>
<div class="line">[Tuesday 15 February 2011] [03:33:50] &lt;CIA-21&gt;        zeromq2: 03Michael Compton 07master * rfbe5d85 10/ (AUTHORS doc/zmq_setsockopt.txt):</div>
<div class="line">[Tuesday 15 February 2011] [03:33:50] &lt;CIA-21&gt;        zeromq2: Added note regarding setting sockopt before bind/connect</div>
<div class="line">[Tuesday 15 February 2011] [03:33:50] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Michael Compton &lt;<a class="reference external" href="mailto:michael&#46;compton&#37;&#52;&#48;littleedge&#46;co&#46;uk">michael<span>&#46;</span>compton<span>&#64;</span>littleedge<span>&#46;</span>co<span>&#46;</span>uk</a>&gt; - <a class="reference external" href="http://bit.ly/fNGMan">http://bit.ly/fNGMan</a></div>
<div class="line">[Tuesday 15 February 2011] [06:22:09] &lt;cyball&gt;        hi can i do something like this :: REQ -&gt; XREP-&gt;XREQ-&gt;SUB with zmq_device::ZMQ_FORWARDER ? i want to publish a message to morre than one subscribers :) thx</div>
<div class="line">[Tuesday 15 February 2011] [06:23:37] &lt;cyball&gt;        or is it also possible to work with ... REQ-&gt;PUB-&gt;SUB ?</div>
<div class="line">[Tuesday 15 February 2011] [06:31:01] &lt;mikko&gt; cyball: do you need req sock on client?</div>
<div class="line">[Tuesday 15 February 2011] [06:32:09] &lt;mikko&gt; cyball: you could have PUB on client and use forwarder device</div>
<div class="line">[Tuesday 15 February 2011] [06:32:36] &lt;mikko&gt; client PUB &lt;&#8212;&gt; SUB forwarder PUB &lt;&#8212;&gt; SUB subscribers</div>
<div class="line">[Tuesday 15 February 2011] [06:34:35] &lt;cyball&gt;        mikko, i work on a continous integration service and i got a post-commit from github so i can not run the PUB whole the time only on request from github :)</div>
<div class="line">[Tuesday 15 February 2011] [06:35:38] &lt;mikko&gt; cyball: you can have the pub connect to forwarder on post-commit ?</div>
<div class="line">[Tuesday 15 February 2011] [06:35:52] &lt;mikko&gt; connect, publish, go away</div>
<div class="line">[Tuesday 15 February 2011] [06:36:22] &lt;cyball&gt;        mikko, ohh ok .. i thought that i have to run the publisher whole the time</div>
<div class="line">[Tuesday 15 February 2011] [06:36:30] &lt;cyball&gt;        because of the subscriibers</div>
<div class="line">[Tuesday 15 February 2011] [06:36:53] &lt;mikko&gt; the subscribers would be connected to forwarder device</div>
<div class="line">[Tuesday 15 February 2011] [06:36:57] &lt;mikko&gt; whcih can run all the time</div>
<div class="line">[Tuesday 15 February 2011] [06:37:02] &lt;cyball&gt;        ok</div>
<div class="line">[Tuesday 15 February 2011] [06:37:45] &lt;mikko&gt; look at the diagram:</div>
<div class="line">[Tuesday 15 February 2011] [06:37:46] &lt;mikko&gt; client PUB &lt;&#8212;&gt; SUB forwarder PUB &lt;&#8212;&gt; SUB subscribers</div>
<div class="line">[Tuesday 15 February 2011] [06:37:48] &lt;mikko&gt; :)</div>
<div class="line">[Tuesday 15 February 2011] [06:38:00] &lt;cyball&gt;        mikko, thx</div>
<div class="line">[Tuesday 15 February 2011] [06:38:02] &lt;mikko&gt; forwarder would run all the time and subscribers would only know that they are connected to it</div>
<div class="line">[Tuesday 15 February 2011] [06:38:09] &lt;cyball&gt;        ok</div>
<div class="line">[Tuesday 15 February 2011] [06:38:15] &lt;cyball&gt;        i will have a look on it</div>
<div class="line">[Tuesday 15 February 2011] [06:38:57] &lt;cyball&gt;        do you have a link to it ?</div>
<div class="line">[Tuesday 15 February 2011] [06:39:03] &lt;mikko&gt; link to where?</div>
<div class="line">[Tuesday 15 February 2011] [06:39:12] &lt;cyball&gt;        diagrag :)</div>
<div class="line">[Tuesday 15 February 2011] [06:39:18] &lt;cyball&gt;        diagram :)</div>
<div class="line">[Tuesday 15 February 2011] [06:39:19] &lt;mikko&gt; it&#8217;s that ascii one</div>
<div class="line">[Tuesday 15 February 2011] [06:39:38] &lt;mikko&gt; let me see if zguide has similar with prettier graphics</div>
<div class="line">[Tuesday 15 February 2011] [06:39:56] &lt;cyball&gt;        no sorry i thought there is one in the manual i did not seen</div>
<div class="line">[Tuesday 15 February 2011] [06:41:29] &lt;mikko&gt; it&#8217;s a very simple scenario</div>
<div class="line">[Tuesday 15 February 2011] [06:41:44] &lt;mikko&gt; the publisher client connects to insocket on forwarder and publishes message</div>
<div class="line">[Tuesday 15 February 2011] [06:41:53] &lt;mikko&gt; forwarder then publishes it on outsocket</div>
<div class="line">[Tuesday 15 February 2011] [06:42:02] &lt;mikko&gt; and subscribers are connected to outsocket</div>
<div class="line">[Tuesday 15 February 2011] [06:42:27] &lt;mikko&gt; forwarder runs on the background and subscribers only know about it&#8217;s existence</div>
<div class="line">[Tuesday 15 February 2011] [06:42:38] &lt;mikko&gt; publishers on insocket can come and go as they please</div>
<div class="line">[Tuesday 15 February 2011] [06:42:46] &lt;cyball&gt;        mikko, is that ok ? <a class="reference external" href="http://pastebin.com/1USs18EG">http://pastebin.com/1USs18EG</a></div>
<div class="line">[Tuesday 15 February 2011] [06:45:08] &lt;mikko&gt; cyball: subscribe to &#8220;&#8221; on frontend</div>
<div class="line">[Tuesday 15 February 2011] [06:46:23] &lt;mikko&gt; so before the frontend bind</div>
<div class="line">[Tuesday 15 February 2011] [06:47:02] &lt;mikko&gt; zmq_setsockopt(frontend, &#8220;&#8221;, 0);</div>
<div class="line">[Tuesday 15 February 2011] [06:47:49] &lt;mikko&gt; otherwise your frontend will filter all messages</div>
<div class="line">[Tuesday 15 February 2011] [07:03:13] &lt;cyball&gt;        mikko, <a class="reference external" href="http://pastebin.com/yfHkwBv1">http://pastebin.com/yfHkwBv1</a> is that ok for the publisher on the client ?</div>
<div class="line">[Tuesday 15 February 2011] [07:04:19] &lt;cyball&gt;        or should i also add some socket options too ?</div>
<div class="line">[Tuesday 15 February 2011] [07:04:45] &lt;mikko&gt; should be fine</div>
<div class="line">[Tuesday 15 February 2011] [07:19:05] &lt;cyball&gt;        mikko,  ok i have put all pieces together :: <a class="reference external" href="http://pastebin.com/EGUTh9mY">http://pastebin.com/EGUTh9mY</a> i do not see anything on the subscriber i guess there is something i do not see can u have pls a look on it ?</div>
<div class="line">[Tuesday 15 February 2011] [07:36:04] &lt;mikko&gt; cyball: subscribe the sub</div>
<div class="line">[Tuesday 15 February 2011] [07:36:17] &lt;mikko&gt; subscriber.setsockopt(ZMQ_SUBSCRIBE, &#8220;&#8221;, 0);</div>
<div class="line">[Tuesday 15 February 2011] [07:36:27] &lt;mikko&gt; otherwise it will filter all messages</div>
<div class="line">[Tuesday 15 February 2011] [07:36:37] &lt;mikko&gt; i gotta commute to the office</div>
<div class="line">[Tuesday 15 February 2011] [07:36:43] &lt;mikko&gt; back in 30 mins or so</div>
<div class="line">[Tuesday 15 February 2011] [07:37:45] &lt;cyball&gt;        thx</div>
<div class="line">[Tuesday 15 February 2011] [07:42:19] &lt;cyball&gt;        it does not work :-(</div>
<div class="line">[Tuesday 15 February 2011] [07:47:17] &lt;cyball&gt;        sure that i can have a SUB bind on a port and it does not only support connect ?</div>
<div class="line">[Tuesday 15 February 2011] [07:51:51] &lt;sustrik&gt;       yes, bind/connect are orthogonal to the socket type</div>
<div class="line">[Tuesday 15 February 2011] [07:55:45] &lt;cyball&gt;        sustrik, thx</div>
<div class="line">[Tuesday 15 February 2011] [07:57:05] &lt;cyball&gt;        sustrik, can you please have a look on the code ... ? <a class="reference external" href="http://pastebin.com/EGUTh9mY">http://pastebin.com/EGUTh9mY</a></div>
<div class="line">[Tuesday 15 February 2011] [07:57:47] &lt;cyball&gt;        probably there is something missing ... i have adde the  subscriber.setsockopt(ZMQ_SUBSCRIBE, &#8220;&#8221;, 0);</div>
<div class="line">[Tuesday 15 February 2011] [07:57:51] &lt;cyball&gt;        but it also does not work</div>
<div class="line">[Tuesday 15 February 2011] [07:58:36] &lt;sustrik&gt;       what version of 0mq are you using?</div>
<div class="line">[Tuesday 15 February 2011] [07:58:42] &lt;Liam`&gt; I can safely assess that I do not understand a word of this conversation.</div>
<div class="line">[Tuesday 15 February 2011] [07:59:22] &lt;cyball&gt;        2.0.10</div>
<div class="line">[Tuesday 15 February 2011] [08:00:06] &lt;sustrik&gt;       with 2.0.10 there&#8217;s no blocking zmq_close()</div>
<div class="line">[Tuesday 15 February 2011] [08:00:19] &lt;cyball&gt;        ohhh upps</div>
<div class="line">[Tuesday 15 February 2011] [08:00:26] &lt;sustrik&gt;       thus, if there are any queued outbound messages</div>
<div class="line">[Tuesday 15 February 2011] [08:00:33] &lt;sustrik&gt;       they are dropped on zmq_close()</div>
<div class="line">[Tuesday 15 February 2011] [08:00:53] &lt;cyball&gt;        ok that means i should compile the beta ?</div>
<div class="line">[Tuesday 15 February 2011] [08:00:54] &lt;sustrik&gt;       if you need to block till the messages are send, you&#8217;ll have to use 2.1.0</div>
<div class="line">[Tuesday 15 February 2011] [08:01:00] &lt;sustrik&gt;       yup</div>
<div class="line">[Tuesday 15 February 2011] [08:01:10] &lt;cyball&gt;        ok i will do it now :)</div>
<div class="line">[Tuesday 15 February 2011] [08:06:27] &lt;cyball&gt;        sustrik, yeahhh it works now THX</div>
<div class="line">[Tuesday 15 February 2011] [08:06:35] &lt;sustrik&gt;       np</div>
<div class="line">[Tuesday 15 February 2011] [08:10:38] &lt;marcinkuzminski&gt;       Hi, I&#8217;m planning a system to do concurrent database insert, that suppose to be fail safe when insert fails, it would retry/remember, can that all be achieved using zeromq ?</div>
<div class="line">[Tuesday 15 February 2011] [08:11:56] &lt;sustrik&gt;       what do you mean by fail-safe?</div>
<div class="line">[Tuesday 15 February 2011] [08:12:22] &lt;marcinkuzminski&gt;       sustrik, That i cannot allow a task to be lost.</div>
<div class="line">[Tuesday 15 February 2011] [08:12:33] &lt;marcinkuzminski&gt;       i run ~200-300 tasks/s</div>
<div class="line">[Tuesday 15 February 2011] [08:13:20] &lt;marcinkuzminski&gt;       let say one out of million fails due to any reason network/db. And i need to retry that task with delay few times, if it fails permanently i need to store and remember that.</div>
<div class="line">[Tuesday 15 February 2011] [08:14:14] &lt;sustrik&gt;       then you have to store the task into a database</div>
<div class="line">[Tuesday 15 February 2011] [08:14:37] &lt;sustrik&gt;       distributed transactions should be used to pair the task generation with the insertion</div>
<div class="line">[Tuesday 15 February 2011] [08:14:47] &lt;sustrik&gt;       so that either both fail or both succeed</div>
<div class="line">[Tuesday 15 February 2011] [08:14:57] &lt;sustrik&gt;       it has very little to do with 0mq</div>
<div class="line">[Tuesday 15 February 2011] [08:15:53] &lt;marcinkuzminski&gt;       right,</div>
<div class="line">[Tuesday 15 February 2011] [08:16:09] &lt;marcinkuzminski&gt;       so it&#8217;s just about distrubution of task that zeromq does ?</div>
<div class="line">[Tuesday 15 February 2011] [08:16:51] &lt;marcinkuzminski&gt;       sustrik, ok, getting back to reading 0mq manual</div>
<div class="line">[Tuesday 15 February 2011] [08:16:59] &lt;sustrik&gt;       right</div>
<div class="line">[Tuesday 15 February 2011] [08:19:10] &lt;Guthur&gt;        sustrik: did you catch my  messages last night</div>
<div class="line">[Tuesday 15 February 2011] [08:19:30] &lt;Guthur&gt;        you can ignore the first suggestion though</div>
<div class="line">[Tuesday 15 February 2011] [08:19:41] &lt;Guthur&gt;        I now think the second would be better</div>
<div class="line">[Tuesday 15 February 2011] [08:22:13] &lt;sustrik&gt;       Guthur: i missed it</div>
<div class="line">[Tuesday 15 February 2011] [08:22:26] &lt;sustrik&gt;       can you explain once more?</div>
<div class="line">[Tuesday 15 February 2011] [08:30:16] &lt;Guthur&gt;        basically would it be ok for 0MQ to pass in a custom OVERLAPPED struct with an operation type flag when performing various pipe operations. iocp_t (epoll etc equivalent) would then use this along with poll_entry, which would be set as the completion key, to call to determine which event handlers to call</div>
<div class="line">[Tuesday 15 February 2011] [08:30:59] &lt;Guthur&gt;        I also have a question regarding the retired functionality, but I&#8217;m not near the code at the moment and can not remember the details</div>
<div class="line">[Tuesday 15 February 2011] [08:31:42] &lt;Guthur&gt;        does that make any sense?</div>
<div class="line">[Tuesday 15 February 2011] [08:34:59] &lt;sustrik&gt;       Guthur: pass what from where to where?</div>
<div class="line">[Tuesday 15 February 2011] [08:35:04] &lt;sustrik&gt;       sorry, i don&#8217;t follow</div>
<div class="line">[Tuesday 15 February 2011] [08:36:14] &lt;sustrik&gt;       afaics, the OVERLAPPED should be part of poll_entry</div>
<div class="line">[Tuesday 15 February 2011] [08:36:20] &lt;sustrik&gt;       actyually 2 of them</div>
<div class="line">[Tuesday 15 February 2011] [08:36:27] &lt;sustrik&gt;       one for write another one for read</div>
<div class="line">[Tuesday 15 February 2011] [08:37:36] &lt;Guthur&gt;        when doing ReadFile or WriteFile or ConnectToPipe there is an argument for the OVERLAPPED, this will be returned through the IOCP when the op completes</div>
<div class="line">[Tuesday 15 February 2011] [08:38:20] &lt;sustrik&gt;       the event in the OVERLAPPED will be signaled when the op completes, right?</div>
<div class="line">[Tuesday 15 February 2011] [08:39:01] &lt;Guthur&gt;        you can ignore the event field, not using it</div>
<div class="line">[Tuesday 15 February 2011] [08:39:20] &lt;sustrik&gt;       hm</div>
<div class="line">[Tuesday 15 February 2011] [08:39:23] &lt;Guthur&gt;        but the OVERLAPPED can be extended, so that it contains custom fields</div>
<div class="line">[Tuesday 15 February 2011] [08:39:42] &lt;sustrik&gt;       how are you notified about operation being exectured then?</div>
<div class="line">[Tuesday 15 February 2011] [08:39:59] &lt;sustrik&gt;       executed*</div>
<div class="line">[Tuesday 15 February 2011] [08:40:13] &lt;Guthur&gt;        the only way is by setting a field in the custom OVERLAPPED struct</div>
<div class="line">[Tuesday 15 February 2011] [08:40:28] &lt;sustrik&gt;       i mean, is it a callback or what?</div>
<div class="line">[Tuesday 15 February 2011] [08:41:34] &lt;Guthur&gt;        IOCP will return an array of OVERLAPPED_ENTRIES, these will contain that the OVERLAPPED passed in when starting the OP</div>
<div class="line">[Tuesday 15 February 2011] [08:41:53] &lt;sustrik&gt;       which function is that?</div>
<div class="line">[Tuesday 15 February 2011] [08:42:08] &lt;sustrik&gt;       the one that returns the ENTRIES</div>
<div class="line">[Tuesday 15 February 2011] [08:42:13] &lt;Guthur&gt;        it will also return the Completion Key which you specify when you add the handle to the IOCP</div>
<div class="line">[Tuesday 15 February 2011] [08:42:26] &lt;Guthur&gt;        GetQueueCompletionStatus</div>
<div class="line">[Tuesday 15 February 2011] [08:42:54] &lt;Guthur&gt;        GetQueueCompletionStatusEx actually (for the timeout)</div>
<div class="line">[Tuesday 15 February 2011] [08:45:27] &lt;Guthur&gt;        I&#8217;m going to grab a coffee, back in a mo</div>
<div class="line">[Tuesday 15 February 2011] [08:46:23] &lt;sustrik&gt;       checking the docs</div>
<div class="line">[Tuesday 15 February 2011] [08:46:48] &lt;sustrik&gt;       how do you associate a particular read/write request with a specific completion port?</div>
<div class="line">[Tuesday 15 February 2011] [08:48:24] &lt;zchrish&gt;       I am testing zmq::poll with a single entry pollitem_t list. After I send a packet, I check whether items[0].revents &amp; ZMQ_POLLIN is &#8220;1&#8221; and then process the input from REP. But, in my case, it always seems to be set to &#8220;1&#8221; even though I purposely put a 5 second delay in my XEQ program. Am I doing something wrong?</div>
<div class="line">[Tuesday 15 February 2011] [08:50:47] &lt;sustrik&gt;       zchrish: so you get POLLIN even though there is no message available, right?</div>
<div class="line">[Tuesday 15 February 2011] [08:51:21] &lt;zchrish&gt;       I think so.</div>
<div class="line">[Tuesday 15 February 2011] [08:51:38] &lt;sustrik&gt;       write a minimal test case then and report it as a bug</div>
<div class="line">[Tuesday 15 February 2011] [08:51:56] &lt;sustrik&gt;       POLLIN should be signaled only if there&#8217;s a message available for reading</div>
<div class="line">[Tuesday 15 February 2011] [08:52:05] &lt;zchrish&gt;       ok; let me test a minimal case.</div>
<div class="line">[Tuesday 15 February 2011] [08:52:46] &lt;mikko&gt; <a href="#id141"><span class="problematic" id="id142">pieterh_</span></a>: i&#8217;ve been ripping the guts out from zfl builds</div>
<div class="line">[Tuesday 15 February 2011] [08:53:03] &lt;<a href="#id143"><span class="problematic" id="id144">pieterh_</span></a>&gt;      mikko: nice, I think... :-)</div>
<div class="line">[Tuesday 15 February 2011] [08:53:16] &lt;mikko&gt; there was quite a lot of things that weren&#8217;t seem to be needed</div>
<div class="line">[Tuesday 15 February 2011] [08:53:39] &lt;mikko&gt; like checks for C++ compiler, atomic ops, linking against socket libs etc</div>
<div class="line">[Tuesday 15 February 2011] [08:53:54] &lt;mikko&gt; tested linux, mingw32 and mac os x this far</div>
<div class="line">[Tuesday 15 February 2011] [08:54:05] &lt;mikko&gt; solaris and freebsd to go from platforms i have access to</div>
<div class="line">[Tuesday 15 February 2011] [08:54:10] &lt;<a href="#id145"><span class="problematic" id="id146">pieterh_</span></a>&gt;      sounds great</div>
<div class="line">[Tuesday 15 February 2011] [08:54:25] &lt;mikko&gt; also, make check now runs zfl_selftest</div>
<div class="line">[Tuesday 15 February 2011] [08:54:49] &lt;<a href="#id147"><span class="problematic" id="id148">pieterh_</span></a>&gt;      is that the normal action, there&#8217;s no &#8220;make test&#8221;?</div>
<div class="line">[Tuesday 15 February 2011] [08:55:00] &lt;mikko&gt; make check seems to be default action</div>
<div class="line">[Tuesday 15 February 2011] [08:55:29] &lt;<a href="#id149"><span class="problematic" id="id150">pieterh_</span></a>&gt;      how about I give you commit access to the git?</div>
<div class="line">[Tuesday 15 February 2011] [08:55:37] &lt;<a href="#id151"><span class="problematic" id="id152">pieterh_</span></a>&gt;      that seems simpler than pull requests</div>
<div class="line">[Tuesday 15 February 2011] [08:55:55] &lt;<a href="#id153"><span class="problematic" id="id154">pieterh_</span></a>&gt;      are you committer on zmq?</div>
<div class="line">[Tuesday 15 February 2011] [08:56:02] &lt;mikko&gt; no, im not</div>
<div class="line">[Tuesday 15 February 2011] [08:56:21] &lt;<a href="#id155"><span class="problematic" id="id156">pieterh_</span></a>&gt;      how would you like to work? I&#8217;m happy giving you commit access</div>
<div class="line">[Tuesday 15 February 2011] [08:56:39] &lt;mikko&gt; well, let&#8217;s see whether you agree my thinking here:</div>
<div class="line">[Tuesday 15 February 2011] [08:57:08]          * <a href="#id157"><span class="problematic" id="id158">pieterh_</span></a> listens</div>
<div class="line">[Tuesday 15 February 2011] [08:57:37] &lt;mikko&gt; my thinking was to rip out as much as possible to make things maintainable and then fix per platform if there are bugs on let&#8217;s say very old qnx</div>
<div class="line">[Tuesday 15 February 2011] [08:57:47] &lt;mikko&gt; example:</div>
<div class="line">[Tuesday 15 February 2011] [08:58:05] &lt;mikko&gt; mac os x was set to build without -pedantic even though ZFL builds fine with -pedantic on mac os x</div>
<div class="line">[Tuesday 15 February 2011] [08:59:01] &lt;<a href="#id159"><span class="problematic" id="id160">pieterh_</span></a>&gt;      well, you are far more expert in this than me</div>
<div class="line">[Tuesday 15 February 2011] [08:59:03] &lt;mikko&gt; sparc cpu optimization:</div>
<div class="line">[Tuesday 15 February 2011] [08:59:04] &lt;mikko&gt; -mcpu=v9</div>
<div class="line">[Tuesday 15 February 2011] [08:59:07] &lt;mikko&gt; is that really needed?</div>
<div class="line">[Tuesday 15 February 2011] [08:59:30] &lt;<a href="#id161"><span class="problematic" id="id162">pieterh_</span></a>&gt;      :-)</div>
<div class="line">[Tuesday 15 February 2011] [08:59:43] &lt;<a href="#id163"><span class="problematic" id="id164">pieterh_</span></a>&gt;      I hope you&#8217;re not asking me</div>
<div class="line">[Tuesday 15 February 2011] [08:59:47] &lt;mikko&gt; i am</div>
<div class="line">[Tuesday 15 February 2011] [08:59:50] &lt;mikko&gt; it&#8217;s in the build :)</div>
<div class="line">[Tuesday 15 February 2011] [09:00:03] &lt;<a href="#id165"><span class="problematic" id="id166">pieterh_</span></a>&gt;      well, mikko, my process is kind of different</div>
<div class="line">[Tuesday 15 February 2011] [09:00:18] &lt;<a href="#id167"><span class="problematic" id="id168">pieterh_</span></a>&gt;      copy some code, hack it till it works, forget about it again asap, wait for patches</div>
<div class="line">[Tuesday 15 February 2011] [09:00:27] &lt;mikko&gt; i can agree with that</div>
<div class="line">[Tuesday 15 February 2011] [09:00:35] &lt;<a href="#id169"><span class="problematic" id="id170">pieterh_</span></a>&gt;      specifically, for the tooling, which I don&#8217;t want to be expert in</div>
<div class="line">[Tuesday 15 February 2011] [09:01:29] &lt;<a href="#id171"><span class="problematic" id="id172">pieterh_</span></a>&gt;      so most of what is there I copied, and left unchanged because it didn&#8217;t break things</div>
<div class="line">[Tuesday 15 February 2011] [09:02:04] &lt;<a href="#id173"><span class="problematic" id="id174">pieterh_</span></a>&gt;      clearly someone who knows their stuff, like you, would rip most of it out</div>
<div class="line">[Tuesday 15 February 2011] [09:02:10] &lt;<a href="#id175"><span class="problematic" id="id176">pieterh_</span></a>&gt;      which is perfect</div>
<div class="line">[Tuesday 15 February 2011] [09:03:07] &lt;<a href="#id177"><span class="problematic" id="id178">pieterh_</span></a>&gt;      what&#8217;s your github id?</div>
<div class="line">[Tuesday 15 February 2011] [09:03:50] &lt;<a href="#id179"><span class="problematic" id="id180">pieterh_</span></a>&gt;      plain mikko?</div>
<div class="line">[Tuesday 15 February 2011] [09:03:51] &lt;mikko&gt; mkoppanen</div>
<div class="line">[Tuesday 15 February 2011] [09:04:03] &lt;Guthur&gt;        sustrik: the completion key will take care of that</div>
<div class="line">[Tuesday 15 February 2011] [09:04:17] &lt;<a href="#id181"><span class="problematic" id="id182">pieterh_</span></a>&gt;      ok, mikko, you are now committer on zfl</div>
<div class="line">[Tuesday 15 February 2011] [09:04:20] &lt;Guthur&gt;        it is returned as part of the OVERLAPPED_ENTRY struct</div>
<div class="line">[Tuesday 15 February 2011] [09:04:33] &lt;mikko&gt; cool</div>
<div class="line">[Tuesday 15 February 2011] [09:04:47] &lt;mikko&gt; i&#8217;ll hopefully finish this during this week</div>
<div class="line">[Tuesday 15 February 2011] [09:04:52] &lt;Guthur&gt;        sustrik: oh wait I miss read</div>
<div class="line">[Tuesday 15 February 2011] [09:04:57] &lt;<a href="#id183"><span class="problematic" id="id184">pieterh_</span></a>&gt;      :-) I&#8217;m enormously grateful...</div>
<div class="line">[Tuesday 15 February 2011] [09:05:01] &lt;mikko&gt; got company evening today so might be a bit out of game tomorrow</div>
<div class="line">[Tuesday 15 February 2011] [09:05:05] &lt;Guthur&gt;        I think if you had multiple IOCP it would be returned to all</div>
<div class="line">[Tuesday 15 February 2011] [09:05:20] &lt;<a href="#id185"><span class="problematic" id="id186">pieterh_</span></a>&gt;      suddenly zfl actually builds properly across more than Ubuntu :-)</div>
<div class="line">[Tuesday 15 February 2011] [09:05:29] &lt;Guthur&gt;        That&#8217;s a guess though</div>
<div class="line">[Tuesday 15 February 2011] [09:05:50] &lt;sustrik&gt;       what would that be good for?</div>
<div class="line">[Tuesday 15 February 2011] [09:05:52] &lt;sustrik&gt;       strange</div>
<div class="line">[Tuesday 15 February 2011] [09:06:19] &lt;Guthur&gt;        sustrik: that comment for me?</div>
<div class="line">[Tuesday 15 February 2011] [09:06:26] &lt;sustrik&gt;       yep</div>
<div class="line">[Tuesday 15 February 2011] [09:06:40] &lt;sustrik&gt;       if every event is passed to all completion ports</div>
<div class="line">[Tuesday 15 February 2011] [09:06:44] &lt;Guthur&gt;        I have to admit I never really considered multiple IOCP</div>
<div class="line">[Tuesday 15 February 2011] [09:06:51] &lt;sustrik&gt;       what&#8217;s the point of having many of them</div>
<div class="line">[Tuesday 15 February 2011] [09:07:02] &lt;Guthur&gt;        you associate the pipe handle with the IOCP</div>
<div class="line">[Tuesday 15 February 2011] [09:07:10] &lt;sustrik&gt;       ah</div>
<div class="line">[Tuesday 15 February 2011] [09:07:14] &lt;sustrik&gt;       how do you do that?</div>
<div class="line">[Tuesday 15 February 2011] [09:07:17] &lt;Guthur&gt;        you can associate multiple pipes with the IOCP</div>
<div class="line">[Tuesday 15 February 2011] [09:07:30] &lt;zchrish&gt;       so I added code to C++ example from &#8220;the guide&#8221; to hwclient.cpp and hwserver.cpp to include a single pollitem_t entry. I included a 5 second delay in the hwserver.cpp. It appears the code always enters regardless.</div>
<div class="line">[Tuesday 15 February 2011] [09:07:43] &lt;Guthur&gt;        CreateIoCompletionPort</div>
<div class="line">[Tuesday 15 February 2011] [09:07:47] &lt;Guthur&gt;        sustrik: ^^</div>
<div class="line">[Tuesday 15 February 2011] [09:08:07] &lt;Guthur&gt;        <a class="reference external" href="http://msdn.microsoft.com/en-us/library/aa363862(v=VS.85).aspx">http://msdn.microsoft.com/en-us/library/aa363862(v=VS.85).aspx</a></div>
<div class="line">[Tuesday 15 February 2011] [09:08:28] &lt;<a href="#id187"><span class="problematic" id="id188">pieterh_</span></a>&gt;      zchrish: could you post the code in a pastebin somewhere?</div>
<div class="line">[Tuesday 15 February 2011] [09:08:45] &lt;zchrish&gt;       Sure, that&#8217;s next.</div>
<div class="line">[Tuesday 15 February 2011] [09:08:52] &lt;sustrik&gt;       Guthur: ok, i see</div>
<div class="line">[Tuesday 15 February 2011] [09:09:11] &lt;Guthur&gt;        sustrik: so, can we make it fit?</div>
<div class="line">[Tuesday 15 February 2011] [09:09:14] &lt;sustrik&gt;       i think i have a vague idea of how it works now :)</div>
<div class="line">[Tuesday 15 February 2011] [09:09:25] &lt;mikko&gt; isnt ZMQ_SUBSCRIBE an exception to setsockopts before connect/bind?</div>
<div class="line">[Tuesday 15 February 2011] [09:09:37] &lt;sustrik&gt;       Guthur: there are few things to keep in mind</div>
<div class="line">[Tuesday 15 February 2011] [09:09:40] &lt;sustrik&gt;       mikko: no</div>
<div class="line">[Tuesday 15 February 2011] [09:09:56] &lt;<a href="#id189"><span class="problematic" id="id190">pieterh_</span></a>&gt;      sustrik: really?</div>
<div class="line">[Tuesday 15 February 2011] [09:10:04] &lt;mikko&gt; then i found an error on zguide :)</div>
<div class="line">[Tuesday 15 February 2011] [09:10:18] &lt;sustrik&gt;       yes, ZMQ_SUBSCRIBE applies to the socket as a whole</div>
<div class="line">[Tuesday 15 February 2011] [09:10:22] &lt;<a href="#id191"><span class="problematic" id="id192">pieterh_</span></a>&gt;      you can&#8217;t add/remove a filter after binding?</div>
<div class="line">[Tuesday 15 February 2011] [09:10:36] &lt;Guthur&gt;        i think you can</div>
<div class="line">[Tuesday 15 February 2011] [09:10:37] &lt;sustrik&gt;       as opposed to other sockopts that apply only to subsequent connects/binds</div>
<div class="line">[Tuesday 15 February 2011] [09:10:46] &lt;sustrik&gt;       <a href="#id193"><span class="problematic" id="id194">pieterh_</span></a>: yes</div>
<div class="line">[Tuesday 15 February 2011] [09:10:57] &lt;<a href="#id195"><span class="problematic" id="id196">pieterh_</span></a>&gt;      sorry, the &#8216;no&#8217; part confused us, I think</div>
<div class="line">[Tuesday 15 February 2011] [09:11:28] &lt;sustrik&gt;       Guthur: namely, that the messages should be kept in 0mq as long as possible</div>
<div class="line">[Tuesday 15 February 2011] [09:11:56] &lt;sustrik&gt;       thus instead of starting asynch writes immediately for any data to send</div>
<div class="line">[Tuesday 15 February 2011] [09:12:10] &lt;sustrik&gt;       you should start async send</div>
<div class="line">[Tuesday 15 February 2011] [09:12:15] &lt;sustrik&gt;       wait while it compeltes</div>
<div class="line">[Tuesday 15 February 2011] [09:12:25] &lt;sustrik&gt;       then start next send</div>
<div class="line">[Tuesday 15 February 2011] [09:12:26] &lt;sustrik&gt;       etc.</div>
<div class="line">[Tuesday 15 February 2011] [09:12:48] &lt;sustrik&gt;       the rationale is that if you pushed all the data to the kernel immediately</div>
<div class="line">[Tuesday 15 February 2011] [09:13:03] &lt;Guthur&gt;        sustrik: and does 0MQ use the poll to do that subsequent send?</div>
<div class="line">[Tuesday 15 February 2011] [09:13:04] &lt;sustrik&gt;       0mq flow control (such as HWM) won&#8217;t work</div>
<div class="line">[Tuesday 15 February 2011] [09:13:36] &lt;sustrik&gt;       Guthur: all existing polling mechanisms are using sync sends</div>
<div class="line">[Tuesday 15 February 2011] [09:13:43] &lt;sustrik&gt;       i.e. they poll for pollout</div>
<div class="line">[Tuesday 15 February 2011] [09:14:05] &lt;sustrik&gt;       pollout is signaled if there&#8217;s a space free in the kernel buffer</div>
<div class="line">[Tuesday 15 February 2011] [09:14:24] &lt;sustrik&gt;       then it sends the data</div>
<div class="line">[Tuesday 15 February 2011] [09:14:43] &lt;Guthur&gt;        which should be the same as an IOCP completion status signaled for a write op, correct?</div>
<div class="line">[Tuesday 15 February 2011] [09:14:57] &lt;sustrik&gt;       yes</div>
<div class="line">[Tuesday 15 February 2011] [09:15:04] &lt;sustrik&gt;       it should be same</div>
<div class="line">[Tuesday 15 February 2011] [09:15:16] &lt;sustrik&gt;       except that IOCP itself is different from poll</div>
<div class="line">[Tuesday 15 February 2011] [09:15:23] &lt;sustrik&gt;       so it&#8217;ll be a bit complex</div>
<div class="line">[Tuesday 15 February 2011] [09:15:30] &lt;sustrik&gt;       but the semantics should be the same, yes</div>
<div class="line">[Tuesday 15 February 2011] [09:15:52] &lt;Guthur&gt;        yep, we need to send some op identifying data  in the OVERLAPPED,</div>
<div class="line">[Tuesday 15 February 2011] [09:16:27] &lt;zchrish&gt;       OK; here is the snipper - <a class="reference external" href="https://gist.github.com/827576">https://gist.github.com/827576</a></div>
<div class="line">[Tuesday 15 February 2011] [09:16:35] &lt;Guthur&gt;        it&#8217;s the only way we will know what the completion status is being returned for</div>
<div class="line">[Tuesday 15 February 2011] [09:16:35] &lt;sustrik&gt;       even better: we can have a single IOCP per poller</div>
<div class="line">[Tuesday 15 February 2011] [09:17:00] &lt;Guthur&gt;        but IOCP will return for all ops</div>
<div class="line">[Tuesday 15 February 2011] [09:17:18] &lt;sustrik&gt;       yes, but we can place custom data to the result, right?</div>
<div class="line">[Tuesday 15 February 2011] [09:17:35] &lt;Guthur&gt;        via a custom OVERLAPPED sure</div>
<div class="line">[Tuesday 15 February 2011] [09:17:52] &lt;pieterh&gt;       zchrish: what does the client program print?</div>
<div class="line">[Tuesday 15 February 2011] [09:18:11] &lt;sustrik&gt;       then we can identify the socket there as well as operation being performed</div>
<div class="line">[Tuesday 15 February 2011] [09:18:19] &lt;sustrik&gt;       something like:</div>
<div class="line">[Tuesday 15 February 2011] [09:18:21] &lt;sustrik&gt;       {</div>
<div class="line">[Tuesday 15 February 2011] [09:18:28] &lt;sustrik&gt;           HANDLE socket;</div>
<div class="line">[Tuesday 15 February 2011] [09:18:36] &lt;sustrik&gt;           bool read_or_write;</div>
<div class="line">[Tuesday 15 February 2011] [09:18:36] &lt;sustrik&gt;       }</div>
<div class="line">[Tuesday 15 February 2011] [09:18:37] &lt;zchrish&gt;       Just the normal case : Received reply 0: [World]</div>
<div class="line">[Tuesday 15 February 2011] [09:18:50] &lt;Guthur&gt;        struct exactly that</div>
<div class="line">[Tuesday 15 February 2011] [09:19:00] &lt;Guthur&gt;        well roughly actually</div>
<div class="line">[Tuesday 15 February 2011] [09:19:16] &lt;Guthur&gt;        you don&#8217;t need the Handle though, we can set the completion key to that</div>
<div class="line">[Tuesday 15 February 2011] [09:19:32] &lt;Guthur&gt;        it will be returned for all completion status&#8217; for that socket</div>
<div class="line">[Tuesday 15 February 2011] [09:19:36] &lt;zchrish&gt;       Never goes to &#8220;WAITING...&#8221;</div>
<div class="line">[Tuesday 15 February 2011] [09:19:39] &lt;pieterh&gt;       zchrish: you are doing an infinite timeout in zmq::poll, what else would you expect to see?</div>
<div class="line">[Tuesday 15 February 2011] [09:19:56] &lt;sustrik&gt;       Guthur: ok</div>
<div class="line">[Tuesday 15 February 2011] [09:20:02] &lt;zchrish&gt;       Sorry, yes.</div>
<div class="line">[Tuesday 15 February 2011] [09:20:41] &lt;pieterh&gt;       zchrish: note that timeout is in usec (so use 1000000 for 1 second)</div>
<div class="line">[Tuesday 15 February 2011] [09:21:39] &lt;Guthur&gt;        sustrik: a bool wont cut it though, I actually intended to use an enum. There is at least 3 ops that take an overlapped ConnectNamedPipe, Read, write</div>
<div class="line">[Tuesday 15 February 2011] [09:22:51] &lt;Guthur&gt;        so the connect will also be returning to the IOCP</div>
<div class="line">[Tuesday 15 February 2011] [09:25:15] &lt;zchrish&gt;       So if I want to wrap my code like this, it seems like I should enter &#8220;0&#8221; and then perform the sleep myself. Is that permissible? Seems so.</div>
<div class="line">[Tuesday 15 February 2011] [09:27:13] &lt;pieterh&gt;       zchrish: did you get it working as expected?</div>
<div class="line">[Tuesday 15 February 2011] [09:27:42] &lt;pieterh&gt;       e.g. using a zmq_poll timeout of 1 second...</div>
<div class="line">[Tuesday 15 February 2011] [09:28:45] &lt;pieterh&gt;       doing the sleep outside zmq_poll is a bad design</div>
<div class="line">[Tuesday 15 February 2011] [09:29:01] &lt;pieterh&gt;       imagine your server replies after 1000 usec</div>
<div class="line">[Tuesday 15 February 2011] [09:29:23] &lt;pieterh&gt;       you client won&#8217;t get the response until after 1 full second</div>
<div class="line">[Tuesday 15 February 2011] [09:30:08] &lt;zchrish&gt;       yes, it works. Thank you. I used &#8220;0&#8221;. I agree with your assessment.</div>
<div class="line">[Tuesday 15 February 2011] [09:33:05] &lt;sustrik&gt;       Guthur: right</div>
<div class="line">[Tuesday 15 February 2011] [09:36:55] &lt;Guthur&gt;        cool, I think we are making progress with this. I have some rough code at home, hopefully we can go over it sometime soon</div>
<div class="line">[Tuesday 15 February 2011] [09:44:03] &lt;zchrish&gt;       pieterh: So I am playing around with different ways to detect errors in network traffic flow and the one that I seem to feel most comfortable with is the concept of a watchdog thread that monitors socket states. I put my 0mq socket into a thread and that thread doesn&#8217;t reset the state, an alarm goes off. This is the best method I have learned thus far. If there are better ways that you are willing to share, please do so. Thank</div>
<div class="line">[Tuesday 15 February 2011] [09:44:03] &lt;zchrish&gt;       you.</div>
<div class="line">[Tuesday 15 February 2011] [09:44:38] &lt;pieterh&gt;       zchrish: you cannot share a socket between threads, remember</div>
<div class="line">[Tuesday 15 February 2011] [09:45:05] &lt;pieterh&gt;       in general you need specific algorithms for different kinds of failure</div>
<div class="line">[Tuesday 15 February 2011] [09:45:31] &lt;zchrish&gt;       pieterh: No, I have a variable that represents the thread state and the thread is responsible for updating that state on a timely basis.</div>
<div class="line">[Tuesday 15 February 2011] [09:45:44] &lt;mikko&gt; zchrish: what does that actually monitor?</div>
<div class="line">[Tuesday 15 February 2011] [09:45:45] &lt;pieterh&gt;       you cannot share state between threads either</div>
<div class="line">[Tuesday 15 February 2011] [09:45:51] &lt;mikko&gt; that the thread is not stuck blocking?</div>
<div class="line">[Tuesday 15 February 2011] [09:47:49] &lt;zchrish&gt;       Well the idea is to try to verify that the routine is cycling through its while (true) state which I have defined to do so every &#8220;x&#8221; cycles of time. I want to ensure this is the case.</div>
<div class="line">[Tuesday 15 February 2011] [09:49:00] &lt;zchrish&gt;       pieterh: I am referring to &#8220;state&#8221; in a non-zeromq sense.</div>
<div class="line">[Tuesday 15 February 2011] [09:49:14] &lt;pieterh&gt;       zchrish: you are IMO misusing threads quite fundamentally</div>
<div class="line">[Tuesday 15 February 2011] [09:49:42] &lt;pieterh&gt;       each thread should be entirely isolated in terms of state, meaning memory</div>
<div class="line">[Tuesday 15 February 2011] [09:49:50] &lt;pieterh&gt;       threads should communicate only by sending each other messages</div>
<div class="line">[Tuesday 15 February 2011] [09:50:18] &lt;pieterh&gt;       threads should process a set of sockets that they own fully</div>
<div class="line">[Tuesday 15 February 2011] [09:51:05] &lt;pieterh&gt;       the only object in ZMQ that&#8217;s safe to share between threads is the context</div>
<div class="line">[Tuesday 15 February 2011] [09:51:26] &lt;zchrish&gt;       Thank you for your feedback; I will think...</div>
<div class="line">[Tuesday 15 February 2011] [09:53:31] &lt;stimpie&gt;       zchrish, you could have all your treads send a &#8216;variable&#8217; to your watchdog thread using messages</div>
<div class="line">[Tuesday 15 February 2011] [10:44:27] &lt;sustrik&gt;       Guthur: still there?</div>
<div class="line">[Tuesday 15 February 2011] [10:44:40] &lt;Guthur&gt;        sure</div>
<div class="line">[Tuesday 15 February 2011] [10:44:56] &lt;sustrik&gt;       there&#8217;s one problem with IOCP i haven&#8217;t realised</div>
<div class="line">[Tuesday 15 February 2011] [10:45:11] &lt;sustrik&gt;       namely: how to implement zmq_poll()</div>
<div class="line">[Tuesday 15 February 2011] [10:45:12] &lt;sustrik&gt;       ?</div>
<div class="line">[Tuesday 15 February 2011] [10:45:35] &lt;sustrik&gt;       given that fd_t will be HANDLE instead of SOCKET</div>
<div class="line">[Tuesday 15 February 2011] [10:45:51] &lt;sustrik&gt;       we can&#8217;t use select() to simulate the polling</div>
<div class="line">[Tuesday 15 February 2011] [10:45:55] &lt;Guthur&gt;        yeah, that&#8217;s something I meant to be asking you</div>
<div class="line">[Tuesday 15 February 2011] [10:46:41]          * sustrik is checking MSDN</div>
<div class="line">[Tuesday 15 February 2011] [10:48:18] &lt;Guthur&gt;        sustrik: though you can use SOCKETS with IOCP, but I assume that&#8217;s not the issue</div>
<div class="line">[Tuesday 15 February 2011] [10:48:57] &lt;sustrik&gt;       the problem is that IPC descriptor <em>has</em> to be HANDLE</div>
<div class="line">[Tuesday 15 February 2011] [10:49:27] &lt;sustrik&gt;       hm, well</div>
<div class="line">[Tuesday 15 February 2011] [10:49:51] &lt;sustrik&gt;       the I/O thread has to poll on both TCP and IPC sockets</div>
<div class="line">[Tuesday 15 February 2011] [10:50:15] &lt;sustrik&gt;       zmq_poll has to poll only on the descriptors provided by mailbox_t</div>
<div class="line">[Tuesday 15 February 2011] [10:50:33] &lt;sustrik&gt;       currently SOCKET but presumably a HANDLE in the future</div>
<div class="line">[Tuesday 15 February 2011] [10:51:21] &lt;sustrik&gt;       could be doable...</div>
<div class="line">[Tuesday 15 February 2011] [10:51:54]          * sustrik still doesn&#8217;t believe WinAPI has no equivalen of a simple poll() function</div>
<div class="line">[Tuesday 15 February 2011] [10:51:56] &lt;Guthur&gt;        yeah, a socket handle can be a file handle so it would make sense to get them all the same</div>
<div class="line">[Tuesday 15 February 2011] [10:52:32] &lt;Guthur&gt;        I think IOCP seems quite neat actually</div>
<div class="line">[Tuesday 15 February 2011] [10:52:45] &lt;Guthur&gt;        at bit murky at the beginning</div>
<div class="line">[Tuesday 15 February 2011] [10:53:12] &lt;Guthur&gt;        one thing though...</div>
<div class="line">[Tuesday 15 February 2011] [10:53:27] &lt;Guthur&gt;        I don&#8217;t think one can remove a handle from an IOCP</div>
<div class="line">[Tuesday 15 February 2011] [10:53:35] &lt;sustrik&gt;       the problem with IOCP is that it doesn&#8217;t provide a sane pushback mechanism</div>
<div class="line">[Tuesday 15 February 2011] [10:53:36] &lt;Guthur&gt;        which begs believe</div>
<div class="line">[Tuesday 15 February 2011] [10:54:27] &lt;Guthur&gt;        sustrik: you mean the fact we have to use the overlapped struct to identify etc?</div>
<div class="line">[Tuesday 15 February 2011] [10:54:58] &lt;sustrik&gt;       i mean the fact that you can push any amount of data to the socket</div>
<div class="line">[Tuesday 15 February 2011] [10:55:07] &lt;sustrik&gt;       without being notified that the TCP buffer is full</div>
<div class="line">[Tuesday 15 February 2011] [10:57:00] &lt;sustrik&gt;       there seems to be no equivalent to HWM when using IOCP</div>
<div class="line">[Tuesday 15 February 2011] [10:57:21] &lt;Guthur&gt;        sustrik: there is data in the overlapped regarding the amount of data sent</div>
<div class="line">[Tuesday 15 February 2011] [10:57:40] &lt;Guthur&gt;        you would probably also have to pass you HWM it make the comparison</div>
<div class="line">[Tuesday 15 February 2011] [10:58:03] &lt;Guthur&gt;        that is off the top of my head, so there may be other nicer ways</div>
<div class="line">[Tuesday 15 February 2011] [10:58:36] &lt;sustrik&gt;       i don&#8217;t follow</div>
<div class="line">[Tuesday 15 February 2011] [10:58:46] &lt;sustrik&gt;       what data in OVERLAPPED</div>
<div class="line">[Tuesday 15 February 2011] [10:58:48] &lt;sustrik&gt;       ?</div>
<div class="line">[Tuesday 15 February 2011] [10:58:51] &lt;Guthur&gt;        <a class="reference external" href="http://msdn.microsoft.com/en-us/library/ms684342(v=vs.85).aspx">http://msdn.microsoft.com/en-us/library/ms684342(v=vs.85).aspx</a></div>
<div class="line">[Tuesday 15 February 2011] [10:58:55] &lt;Guthur&gt;        internalhigh</div>
<div class="line">[Tuesday 15 February 2011] [10:59:22] &lt;sustrik&gt;       &#8220;The InternalHigh member was originally reserved for system use and its behavior may change. &#8220;</div>
<div class="line">[Tuesday 15 February 2011] [10:59:23] &lt;Guthur&gt;        internal might have an error code for full buffer</div>
<div class="line">[Tuesday 15 February 2011] [10:59:35] &lt;sustrik&gt;       it&#8217;s some internal IOCP stuff</div>
<div class="line">[Tuesday 15 February 2011] [10:59:40] &lt;sustrik&gt;       better not touch it</div>
<div class="line">[Tuesday 15 February 2011] [10:59:53] &lt;Guthur&gt;        no i meant the part that says: The number of bytes transferred for the I/O request. The system sets this member if the request is completed without errors.</div>
<div class="line">[Tuesday 15 February 2011] [11:00:24] &lt;Guthur&gt;        we can add are own stuff to the custom overlapped struct so that&#8217;s not an issue</div>
<div class="line">[Tuesday 15 February 2011] [11:01:29] &lt;Guthur&gt;        a custom overlapped could look like follows...</div>
<div class="line">[Tuesday 15 February 2011] [11:01:31] &lt;Guthur&gt;        {                 OVERLAPPED olp;                 OP_TYPE op;                 int HWM;             }</div>
<div class="line">[Tuesday 15 February 2011] [11:01:34] &lt;Guthur&gt;        damn</div>
<div class="line">[Tuesday 15 February 2011] [11:01:38] &lt;Guthur&gt;        {</div>
<div class="line">[Tuesday 15 February 2011] [11:01:50] &lt;Guthur&gt;             OVERLAPPED olp;</div>
<div class="line">[Tuesday 15 February 2011] [11:01:57] &lt;Guthur&gt;            OP_TYPE op;</div>
<div class="line">[Tuesday 15 February 2011] [11:02:04] &lt;Guthur&gt;            int HWM;</div>
<div class="line">[Tuesday 15 February 2011] [11:02:06] &lt;Guthur&gt;        }</div>
<div class="line">[Tuesday 15 February 2011] [11:02:18] &lt;Guthur&gt;        sorry for the spam</div>
<div class="line">[Tuesday 15 February 2011] [11:02:55] &lt;Guthur&gt;        that&#8217;s just a very crude example</div>
<div class="line">[Tuesday 15 February 2011] [11:03:07] &lt;sustrik&gt;       hm, how would you limit the amount of pending outbound data?</div>
<div class="line">[Tuesday 15 February 2011] [11:15:27] &lt;Guthur&gt;        hmm, yeah that HWM probably wouldn&#8217;t help, it was more to explicitly show the custom Overlapped</div>
<div class="line">[Tuesday 15 February 2011] [11:16:09] &lt;Guthur&gt;        but I think in terms of what is in epoll etc, we can get that easy enough with IOCP</div>
<div class="line">[Tuesday 15 February 2011] [11:16:15] &lt;Guthur&gt;        agree?</div>
<div class="line">[Tuesday 15 February 2011] [11:16:34] &lt;Guthur&gt;        I haven&#8217;t looked much outside that</div>
<div class="line">[Tuesday 15 February 2011] [11:17:22] &lt;sustrik&gt;       Guthur: in terms of functionality you can get the same with IOCP</div>
<div class="line">[Tuesday 15 February 2011] [11:17:28] &lt;sustrik&gt;       although it requires a bit more work</div>
<div class="line">[Tuesday 15 February 2011] [11:18:00] &lt;sustrik&gt;       in terms of performance, there can be problems with IOCP</div>
<div class="line">[Tuesday 15 February 2011] [11:23:13] &lt;Guthur&gt;        i though IOCP was pretty performant</div>
<div class="line">[Tuesday 15 February 2011] [11:23:16] &lt;Guthur&gt;        thought*</div>
<div class="line">[Tuesday 15 February 2011] [11:24:16] &lt;sustrik&gt;       the problem i see is with under-filled outbound TCP buffer</div>
<div class="line">[Tuesday 15 February 2011] [11:24:38] &lt;sustrik&gt;       to honour the HWM on the send side</div>
<div class="line">[Tuesday 15 February 2011] [11:25:07] &lt;Guthur&gt;        how to the other method facilitate that?</div>
<div class="line">[Tuesday 15 February 2011] [11:25:20] &lt;Guthur&gt;        to/do</div>
<div class="line">[Tuesday 15 February 2011] [11:25:56] &lt;sustrik&gt;       hm, in theory we can count the number of bytes we&#8217;ve already sent to the socket and haven&#8217;t seen acknowledgements for</div>
<div class="line">[Tuesday 15 February 2011] [11:26:13] &lt;sustrik&gt;       yuck</div>
<div class="line">[Tuesday 15 February 2011] [11:26:37] &lt;Guthur&gt;        ah yes I see, pretty yucky</div>
<div class="line">[Tuesday 15 February 2011] [11:26:50] &lt;Guthur&gt;        so you get this for free the other ways?</div>
<div class="line">[Tuesday 15 February 2011] [11:27:04] &lt;sustrik&gt;       yes, using select/poll/epoll etc.</div>
<div class="line">[Tuesday 15 February 2011] [11:27:12] &lt;sustrik&gt;       any sane OS has a mechanism like this</div>
<div class="line">[Tuesday 15 February 2011] [11:27:17] &lt;sustrik&gt;       Win32 has select</div>
<div class="line">[Tuesday 15 February 2011] [11:27:31] &lt;sustrik&gt;       but undfortunately, it can be used just for SOCKETs</div>
<div class="line">[Tuesday 15 February 2011] [11:27:36] &lt;sustrik&gt;       (i.e. not named pipes)</div>
<div class="line">[Tuesday 15 February 2011] [11:28:50] &lt;sustrik&gt;       There&#8217;s WSAPoll btw</div>
<div class="line">[Tuesday 15 February 2011] [11:28:52] &lt;sustrik&gt;       but:</div>
<div class="line">[Tuesday 15 February 2011] [11:28:55] &lt;sustrik&gt;       &#8220;The WSAPoll function is defined on Windows Vista and later.&#8221;</div>
<div class="line">[Tuesday 15 February 2011] [11:29:41] &lt;sustrik&gt;       so the alternative to IOCP would be to use WSAPoll on Vista and Win7</div>
<div class="line">[Tuesday 15 February 2011] [11:29:49] &lt;Guthur&gt;        umm, XP is a large chuck of windows to not support</div>
<div class="line">[Tuesday 15 February 2011] [11:29:56] &lt;sustrik&gt;       and fall back to select() on XP or somesuch</div>
<div class="line">[Tuesday 15 February 2011] [11:30:05] &lt;sustrik&gt;       shrug</div>
<div class="line">[Tuesday 15 February 2011] [11:30:07] &lt;Guthur&gt;        also may rule out a lot of windows server</div>
<div class="line">[Tuesday 15 February 2011] [11:30:28] &lt;Guthur&gt;        not sure on win server kernel families though</div>
<div class="line">[Tuesday 15 February 2011] [11:31:44] &lt;sustrik&gt;       Minimum supported server</div>
<div class="line">[Tuesday 15 February 2011] [11:31:44] &lt;sustrik&gt;               Windows Server 2008</div>
<div class="line">[Tuesday 15 February 2011] [11:32:03] &lt;Guthur&gt;        umm that&#8217;s quite modern</div>
<div class="line">[Tuesday 15 February 2011] [11:32:06] &lt;sustrik&gt;       damn, it works for SOCKETs only</div>
<div class="line">[Tuesday 15 February 2011] [11:32:14] &lt;Guthur&gt;        hehe</div>
<div class="line">[Tuesday 15 February 2011] [11:32:17] &lt;Guthur&gt;        red herring then</div>
<div class="line">[Tuesday 15 February 2011] [11:40:19] &lt;sustrik&gt;       however, WSAPoll seems to have no limit on number of sockets it can poll on</div>
<div class="line">[Tuesday 15 February 2011] [11:40:30] &lt;sustrik&gt;       select is by default limited to 64</div>
<div class="line">[Tuesday 15 February 2011] [11:41:20] &lt;sustrik&gt;       so maybe, as a warm up, you could try to modify poll.hpp/poll.cpp to use WSAPoll on windows instead of poll</div>
<div class="line">[Tuesday 15 February 2011] [11:41:47] &lt;sustrik&gt;       you would need vista/win7 for that, obviously</div>
<div class="line">[Tuesday 15 February 2011] [11:43:01] &lt;sustrik&gt;       WSAPoll looks like pretty close copy of POSIX poll, so it should take some 1 hour to do that...</div>
<div class="line">[Tuesday 15 February 2011] [11:46:24] &lt;Guthur&gt;        sustrik: and keep the old version as a fall back?</div>
<div class="line">[Tuesday 15 February 2011] [11:46:41] &lt;sustrik&gt;       poll.cpp doesn&#8217;t compile on windows</div>
<div class="line">[Tuesday 15 February 2011] [11:46:48] &lt;sustrik&gt;       there&#8217;s no poll() function there</div>
<div class="line">[Tuesday 15 February 2011] [11:46:58] &lt;sustrik&gt;       so you won&#8217;t break anything</div>
<div class="line">[Tuesday 15 February 2011] [11:47:06] &lt;Guthur&gt;        oh, it uses select instead though, right?</div>
<div class="line">[Tuesday 15 February 2011] [11:47:10] &lt;sustrik&gt;       right</div>
<div class="line">[Tuesday 15 February 2011] [11:47:51] &lt;sustrik&gt;       you could force 0MQ to compile with poll</div>
<div class="line">[Tuesday 15 February 2011] [11:48:00] &lt;sustrik&gt;       by defining ZMQ_FORCE_POLL macro</div>
<div class="line">[Tuesday 15 February 2011] [11:48:13] &lt;sustrik&gt;       that would make it use poll.cpp instead of select.cpp</div>
<div class="line">[Tuesday 15 February 2011] [11:48:21] &lt;sustrik&gt;       obviously, the build will fail now</div>
<div class="line">[Tuesday 15 February 2011] [11:48:39] &lt;sustrik&gt;       but it can be presumably fixed by doing something like this:</div>
<div class="line">[Tuesday 15 February 2011] [11:48:46] &lt;sustrik&gt;       #ifdef ZMQ_HAVE_WINDOWS</div>
<div class="line">[Tuesday 15 February 2011] [11:48:55] &lt;sustrik&gt;           WSAPoll (...);</div>
<div class="line">[Tuesday 15 February 2011] [11:48:58] &lt;sustrik&gt;       #else</div>
<div class="line">[Tuesday 15 February 2011] [11:49:04] &lt;sustrik&gt;           poll (...);</div>
<div class="line">[Tuesday 15 February 2011] [11:49:06] &lt;sustrik&gt;       #endif</div>
<div class="line">[Tuesday 15 February 2011] [11:50:41] &lt;Guthur&gt;        ok, seems a reasonable well contained updated</div>
<div class="line">[Tuesday 15 February 2011] [11:50:46] &lt;Guthur&gt;        update*</div>
<div class="line">[Tuesday 15 February 2011] [11:51:33] &lt;Guthur&gt;        so would there be performance gains for ZMQ, how does the 64 socket limit effect ZMQ at the moment?</div>
<div class="line">[Tuesday 15 February 2011] [11:53:02] &lt;sustrik&gt;       in MSVC build the limit is rasied to 1024</div>
<div class="line">[Tuesday 15 February 2011] [11:53:16] &lt;sustrik&gt;       still, if 0mq hits the limit it fails</div>
<div class="line">[Tuesday 15 February 2011] [11:54:12] &lt;sustrik&gt;       also, poll() should be more efficient with large pollsets than select</div>
<div class="line">[Tuesday 15 February 2011] [11:56:58] &lt;sustrik&gt;       Guthur: wait a sec, the current implementation of poll presumes that fd is an int</div>
<div class="line">[Tuesday 15 February 2011] [11:57:09] &lt;Guthur&gt;        sustrik: can you point me to the portion of polls which IOCP does supply</div>
<div class="line">[Tuesday 15 February 2011] [11:57:11] &lt;sustrik&gt;       which is not true on windows</div>
<div class="line">[Tuesday 15 February 2011] [11:57:29] &lt;Guthur&gt;        sorry I&#8217;m a little inexperienced with polls and sockets in general</div>
<div class="line">[Tuesday 15 February 2011] [11:57:40] &lt;sustrik&gt;       so rewriting the poll wouldn&#8217;t be that easy</div>
<div class="line">[Tuesday 15 February 2011] [11:57:46] &lt;sustrik&gt;       anyway, what&#8217;s your question?</div>
<div class="line">[Tuesday 15 February 2011] [11:58:04] &lt;sustrik&gt;       polling means that you can wait for multiple sockets at once</div>
<div class="line">[Tuesday 15 February 2011] [11:58:32] &lt;sustrik&gt;       you wait either for socket becoming readable or socket becoming writeavle (or both)</div>
<div class="line">[Tuesday 15 February 2011] [11:58:56] &lt;sustrik&gt;       POSIX defines 2 ways of polling : select and poll</div>
<div class="line">[Tuesday 15 February 2011] [11:59:14] &lt;sustrik&gt;       different unix flavours provide additional polling mechanisms:</div>
<div class="line">[Tuesday 15 February 2011] [11:59:21] &lt;sustrik&gt;       epoll, /dev/poll, kqueue</div>
<div class="line">[Tuesday 15 February 2011] [11:59:43] &lt;sustrik&gt;       winapi is, unfortunately, highly inconsistent</div>
<div class="line">[Tuesday 15 February 2011] [11:59:45] &lt;Guthur&gt;        and there is something more than the events?</div>
<div class="line">[Tuesday 15 February 2011] [12:00:15] &lt;sustrik&gt;       ?</div>
<div class="line">[Tuesday 15 February 2011] [12:00:31] &lt;sustrik&gt;       poll() simply exists</div>
<div class="line">[Tuesday 15 February 2011] [12:00:37] &lt;sustrik&gt;       when one of the sockets is readable/writeable</div>
<div class="line">[Tuesday 15 February 2011] [12:00:49] &lt;sustrik&gt;       it works in the same way as zmq_poll() does</div>
<div class="line">[Tuesday 15 February 2011] [12:01:25] &lt;sustrik&gt;       exits*</div>
<div class="line">[Tuesday 15 February 2011] [12:01:36] &lt;Guthur&gt;        ok, so the problem is that IOCP only notifies when an operation has completed?</div>
<div class="line">[Tuesday 15 February 2011] [12:01:42] &lt;sustrik&gt;       exactly</div>
<div class="line">[Tuesday 15 February 2011] [12:01:46] &lt;sustrik&gt;       it&#8217;s so called AIO</div>
<div class="line">[Tuesday 15 February 2011] [12:01:51] &lt;sustrik&gt;       (async I/O)</div>
<div class="line">[Tuesday 15 February 2011] [12:02:02] &lt;sustrik&gt;       which is supposed to be better than standard I/O</div>
<div class="line">[Tuesday 15 February 2011] [12:02:11] &lt;sustrik&gt;       howver, it&#8217;s not used much</div>
<div class="line">[Tuesday 15 February 2011] [12:02:25] &lt;private_meta&gt;  Heya... Small question. Is there a way the server knows when a client disconnects?</div>
<div class="line">[Tuesday 15 February 2011] [12:02:27] &lt;sustrik&gt;       linux, for example, never implemented AIO for sockets</div>
<div class="line">[Tuesday 15 February 2011] [12:02:37] &lt;sustrik&gt;       private_meta: no</div>
<div class="line">[Tuesday 15 February 2011] [12:03:19] &lt;private_meta&gt;  so I&#8217;d have to implement some heartbeat and check if it&#8217;s going through?</div>
<div class="line">[Tuesday 15 February 2011] [12:04:13] &lt;sustrik&gt;       it&#8217;s up to you</div>
<div class="line">[Tuesday 15 February 2011] [12:04:22] &lt;private_meta&gt;  Would there be better options?</div>
<div class="line">[Tuesday 15 February 2011] [12:04:29] &lt;sustrik&gt;       i personally prefer timing out the request and resending afterwards</div>
<div class="line">[Tuesday 15 February 2011] [12:05:25] &lt;private_meta&gt;  Well, I would have needed to know when a connection terminates unexpectedly :/</div>
<div class="line">[Tuesday 15 February 2011] [12:05:46] &lt;sustrik&gt;       what does that mean?</div>
<div class="line">[Tuesday 15 February 2011] [12:06:24] &lt;sustrik&gt;       network stack has no idea about &#8220;connection termination&#8221;</div>
<div class="line">[Tuesday 15 February 2011] [12:07:04] &lt;sustrik&gt;       the only way to find out whether the other party is alive</div>
<div class="line">[Tuesday 15 February 2011] [12:07:11] &lt;sustrik&gt;       is to send it a ping</div>
<div class="line">[Tuesday 15 February 2011] [12:07:15] &lt;sustrik&gt;       and wait for a reply</div>
<div class="line">[Tuesday 15 February 2011] [12:07:16] &lt;private_meta&gt;  hmm k, thank you</div>
<div class="line">[Tuesday 15 February 2011] [12:07:33] &lt;sustrik&gt;       if the reply doesn&#8217;t arrive in x secs, you say the &#8220;connection is broken&#8221;</div>
<div class="line">[Tuesday 15 February 2011] [12:07:35] &lt;private_meta&gt;  Apparently boost asio implemented something like that under the hood</div>
<div class="line">[Tuesday 15 February 2011] [12:07:52] &lt;sustrik&gt;       quite possibly</div>
<div class="line">[Tuesday 15 February 2011] [12:08:40] &lt;private_meta&gt;  Just to make sure, are timeout mechanims somehow implemented?</div>
<div class="line">[Tuesday 15 February 2011] [12:09:11] &lt;sustrik&gt;       there&#8217;s timeout parameter in zmq_poll() finction</div>
<div class="line">[Tuesday 15 February 2011] [12:09:15] &lt;sustrik&gt;       function</div>
<div class="line">[Tuesday 15 February 2011] [12:09:37] &lt;private_meta&gt;  Thank you! I&#8217;ll try to figure out the rest on my own.</div>
<div class="line">[Tuesday 15 February 2011] [12:20:02] &lt;pieterh&gt;       sustrik: I sent an email to the list about releases</div>
<div class="line">[Tuesday 15 February 2011] [12:22:51] &lt;pieterh&gt;       private_meta: it kind of depends on the type of work you&#8217;re doing</div>
<div class="line">[Tuesday 15 February 2011] [12:23:16] &lt;pieterh&gt;       e.g. for pub-sub, servers don&#8217;t even know clients exist</div>
<div class="line">[Tuesday 15 February 2011] [12:24:00] &lt;pieterh&gt;       and 0MQ&#8217;s <a class="reference external" href="tcp://">tcp://</a> transport is &#8216;disconnected&#8217; meaning nodes can go and come back invisibly</div>
<div class="line">[Tuesday 15 February 2011] [12:24:03] &lt;private_meta&gt;  pieterh: I need two way communication between a server and multiple clients, and the server needs to be aware of the online status of clients</div>
<div class="line">[Tuesday 15 February 2011] [12:24:17] &lt;pieterh&gt;       so you have to define what this means, &#8220;online status&#8221;</div>
<div class="line">[Tuesday 15 February 2011] [12:24:28] &lt;pieterh&gt;       and then you have to explicitly send that to the server from clients</div>
<div class="line">[Tuesday 15 February 2011] [12:24:43] &lt;pieterh&gt;       typically it means &#8220;alive and kicking&#8221;, i.e. not frozen, not crashed, not offline</div>
<div class="line">[Tuesday 15 February 2011] [12:24:55] &lt;private_meta&gt;  if the network connection between server and client is severed, the server needs to know, that&#8217;s the basic thing</div>
<div class="line">[Tuesday 15 February 2011] [12:25:06] &lt;private_meta&gt;  hmm</div>
<div class="line">[Tuesday 15 February 2011] [12:25:07] &lt;pieterh&gt;       right</div>
<div class="line">[Tuesday 15 February 2011] [12:25:22] &lt;pieterh&gt;       the other typical problems are looping application threads, CPU overload on client box, etc.</div>
<div class="line">[Tuesday 15 February 2011] [12:25:30] &lt;pieterh&gt;       so a heartbeat sent by the main thread in your client is often the best thing</div>
<div class="line">[Tuesday 15 February 2011] [12:25:52] &lt;private_meta&gt;  ok</div>
<div class="line">[Tuesday 15 February 2011] [12:25:54] &lt;pieterh&gt;       this could be done by certain 0MQ sockets but it would not be fully reliable</div>
<div class="line">[Tuesday 15 February 2011] [12:26:06] &lt;pieterh&gt;       i.e. if your main thread looped, heartbeats would still be sent out</div>
<div class="line">[Tuesday 15 February 2011] [12:26:18] &lt;pieterh&gt;       also the reaction of your server to a dead client is specific to the use case</div>
<div class="line">[Tuesday 15 February 2011] [12:26:41] &lt;pieterh&gt;       if you read the Guide, you&#8217;ll see an example of &#8220;least recently used&#8221; routing</div>
<div class="line">[Tuesday 15 February 2011] [12:26:48] &lt;private_meta&gt;  Of course. The reaction is already implemented. It&#8217;s just that we need to switch the underlying server-client-infrastructure</div>
<div class="line">[Tuesday 15 February 2011] [12:26:59] &lt;pieterh&gt;       it&#8217;s quite easy to modify to implement heartbeats</div>
<div class="line">[Tuesday 15 February 2011] [12:27:31] &lt;pieterh&gt;       I believe there are more advanced examples that actually do heartbeating</div>
<div class="line">[Tuesday 15 February 2011] [12:27:34]          * pieterh goes to check</div>
<div class="line">[Tuesday 15 February 2011] [12:28:43] &lt;pieterh&gt;       take a look at the peering1/3 examples</div>
<div class="line">[Tuesday 15 February 2011] [12:29:49] &lt;pieterh&gt;       well, it&#8217;s more complex than heartbeating but shows how to handle multiple sockets using zmq_poll</div>
<div class="line">[Tuesday 15 February 2011] [12:29:52] &lt;pieterh&gt;       <a class="reference external" href="http://zguide.zeromq.org/chapter:all#toc50">http://zguide.zeromq.org/chapter:all#toc50</a></div>
<div class="line">[Tuesday 15 February 2011] [12:30:55] &lt;pieterh&gt;       mikko: there are zfl build failures from Hud^hJenkins, I&#8217;ve fixed that issue</div>
<div class="line">[Tuesday 15 February 2011] [12:31:17] &lt;private_meta&gt;  Thanks, I&#8217;ll look it up</div>
<div class="line">[Tuesday 15 February 2011] [12:31:57] &lt;private_meta&gt;  <em>sigh</em> it&#8217;s a pain having switch to a new library if it&#8217;s not all too compatible :/</div>
<div class="line">[Tuesday 15 February 2011] [12:36:03] &lt;sustrik&gt;       pieterh: thx</div>
<div class="line">[Tuesday 15 February 2011] [12:36:29] &lt;pieterh&gt;       private_meta: you can most likely make a decent emulation of your old library</div>
<div class="line">[Tuesday 15 February 2011] [12:36:57] &lt;pieterh&gt;       sustrik: let&#8217;s see what discussion that creates...</div>
<div class="line">[Tuesday 15 February 2011] [12:37:06] &lt;private_meta&gt;  pieterh: In some way that is what I want to do. Or let&#8217;s say need to do.</div>
<div class="line">[Tuesday 15 February 2011] [12:37:22] &lt;pieterh&gt;       what is the old library? Boost.asio?</div>
<div class="line">[Tuesday 15 February 2011] [12:39:19] &lt;private_meta&gt;  Yes</div>
<div class="line">[Tuesday 15 February 2011] [12:39:44] &lt;pieterh&gt;       I&#8217;d suggest making that a public project then</div>
<div class="line">[Tuesday 15 February 2011] [12:39:59] &lt;pieterh&gt;       shove it on github, announce it on zeromq-dev, get others to help you</div>
<div class="line">[Tuesday 15 February 2011] [12:40:10] &lt;private_meta&gt;  But apparently, when compiled with a linux MPI compiler and when using it with MPI commands, it loses messages</div>
<div class="line">[Tuesday 15 February 2011] [12:40:59] &lt;pieterh&gt;       private_meta: if your only problem is bugs, that&#8217;s pretty good</div>
<div class="line">[Tuesday 15 February 2011] [12:41:10] &lt;private_meta&gt;  How so?</div>
<div class="line">[Tuesday 15 February 2011] [12:41:30] &lt;pieterh&gt;       should be easy to solve, if it&#8217;s reproducible</div>
<div class="line">[Tuesday 15 February 2011] [12:41:43] &lt;private_meta&gt;  Ahahaa... yeah, that&#8217;s what we thought</div>
<div class="line">[Tuesday 15 February 2011] [12:42:02] &lt;private_meta&gt;  before we spent months trying to fix it</div>
<div class="line">[Tuesday 15 February 2011] [12:42:10] &lt;pieterh&gt;       months? wow... ok</div>
<div class="line">[Tuesday 15 February 2011] [12:42:33] &lt;private_meta&gt;  The OpenMPI project doesn&#8217;t care and not a single boost or asio developer can help</div>
<div class="line">[Tuesday 15 February 2011] [12:43:15] &lt;pieterh&gt;       Can you explain briefly the relationship between boost asio and MPI?</div>
<div class="line">[Tuesday 15 February 2011] [12:44:16] &lt;pieterh&gt;       Also, if you get stuck on any 0MQ issue for more than a few... days... come here or to the dev list for help</div>
<div class="line">[Tuesday 15 February 2011] [12:44:17] &lt;private_meta&gt;  Well, I don&#8217;t know exactly what you want detailed. We use boost asio to communicate between a server and clients, while these clients are MPI programs that run parallel code.</div>
<div class="line">[Tuesday 15 February 2011] [12:44:47] &lt;pieterh&gt;       i&#8217;ve never used MPI and have only seen boost asio from a distance</div>
<div class="line">[Tuesday 15 February 2011] [12:44:54] &lt;pieterh&gt;       does the MPI API call boost asio?</div>
<div class="line">[Tuesday 15 February 2011] [12:45:30] &lt;pieterh&gt;       or is the MPI part separate from the boost asio stuff?</div>
<div class="line">[Tuesday 15 February 2011] [12:45:32] &lt;private_meta&gt;  Nonono, MPI and Boost asio are not connected in any way execpt for our code. We use MPI for parallelization.</div>
<div class="line">[Tuesday 15 February 2011] [12:45:44] &lt;pieterh&gt;       ok...</div>
<div class="line">[Tuesday 15 February 2011] [12:45:50] &lt;private_meta&gt;  But still we need communication from the parallel clients to the server(s)</div>
<div class="line">[Tuesday 15 February 2011] [12:45:59] &lt;pieterh&gt;       so your client apps are doing weird multithreading via MPI</div>
<div class="line">[Tuesday 15 February 2011] [12:46:12] &lt;pieterh&gt;       and at the same time trying to do sane multithreading via 0MQ at the other side</div>
<div class="line">[Tuesday 15 February 2011] [12:46:21] &lt;pieterh&gt;       all in a single process</div>
<div class="line">[Tuesday 15 February 2011] [12:46:25] &lt;private_meta&gt;  Somewhat. I&#8217;d rather call it multiprocessing</div>
<div class="line">[Tuesday 15 February 2011] [12:46:54] &lt;pieterh&gt;       :-) to be able to help, I need to map unfamiliar stuff onto words that make sense in this universe...</div>
<div class="line">[Tuesday 15 February 2011] [12:47:00] &lt;private_meta&gt;  We have a cluster with several nodes/servers, and they all need to be communicated with while they do some multicore and multinode crunching</div>
<div class="line">[Tuesday 15 February 2011] [12:47:18] &lt;private_meta&gt;  hmm</div>
<div class="line">[Tuesday 15 February 2011] [12:47:22] &lt;private_meta&gt;  something familiar...</div>
<div class="line">[Tuesday 15 February 2011] [12:47:39] &lt;pieterh&gt;       so a client behaves correctly when it doesn&#8217;t do any work, and starts to lose messages when it uses MPI...?</div>
<div class="line">[Tuesday 15 February 2011] [12:47:48] &lt;private_meta&gt;  well, imagine MPI to be some sort of threading library, where the threads can communicate with each other AND can be on different computers</div>
<div class="line">[Tuesday 15 February 2011] [12:47:58] &lt;private_meta&gt;  &gt;_&gt;</div>
<div class="line">[Tuesday 15 February 2011] [12:47:59] &lt;pieterh&gt;       sure, like a primitive 0MQ</div>
<div class="line">[Tuesday 15 February 2011] [12:48:05] &lt;private_meta&gt;  ok</div>
<div class="line">[Tuesday 15 February 2011] [12:48:35] &lt;pieterh&gt;       nah, I&#8217;m sure MPI is great, that&#8217;s not the point</div>
<div class="line">[Tuesday 15 February 2011] [12:48:47] &lt;pieterh&gt;       your emulation over 0MQ works until you link clients with MPI, right?</div>
<div class="line">[Tuesday 15 February 2011] [12:48:49] &lt;private_meta&gt;  so, we use this setup to execute code on different platforms, like Graphics Cards (CUDA compiler), CPUs (MPI compiler) or IBM Cell Broadband Engine (IBM compiler)</div>
<div class="line">[Tuesday 15 February 2011] [12:49:01] &lt;pieterh&gt;       ack, a fairly classic setup IMO</div>
<div class="line">[Tuesday 15 February 2011] [12:49:05] &lt;private_meta&gt;  Whenever it&#8217;s compiled with MPI and used with MPI, several messages are lost</div>
<div class="line">[Tuesday 15 February 2011] [12:49:09] &lt;pieterh&gt;       ok</div>
<div class="line">[Tuesday 15 February 2011] [12:49:19] &lt;pieterh&gt;       do you have a <em>minimal</em> test case that reproduces this?</div>
<div class="line">[Tuesday 15 February 2011] [12:50:01] &lt;private_meta&gt;  I&#8217;d have to ask my colleague, but he&#8217;s not here right now</div>
<div class="line">[Tuesday 15 February 2011] [12:50:18] &lt;pieterh&gt;       faced with this, what I&#8217;d do is:</div>
<div class="line">[Tuesday 15 February 2011] [12:50:21] &lt;private_meta&gt;  As far as I know, he created some minimal test case for trying to find the bug</div>
<div class="line">[Tuesday 15 February 2011] [12:50:39] &lt;pieterh&gt;       ... ok, more questions</div>
<div class="line">[Tuesday 15 February 2011] [12:50:45] &lt;pieterh&gt;       what 0MQ socket types are you using?</div>
<div class="line">[Tuesday 15 February 2011] [12:51:44] &lt;private_meta&gt;  slow down, slow down, I&#8217;m new to 0MQ, do you mean like &#8220;TCP and IPC&#8221; or do you mean that &#8220;ZMQ_REP&#8221; stuff?</div>
<div class="line">[Tuesday 15 February 2011] [12:51:50] &lt;pieterh&gt;       :-)</div>
<div class="line">[Tuesday 15 February 2011] [12:52:01] &lt;pieterh&gt;       both</div>
<div class="line">[Tuesday 15 February 2011] [12:52:16] &lt;pieterh&gt;       socket types means REP/REQ/PUB/SUB/etc.</div>
<div class="line">[Tuesday 15 February 2011] [12:52:36] &lt;pieterh&gt;       but I was also going to ask what transports you use (presumably <a class="reference external" href="tcp://">tcp://</a>)</div>
<div class="line">[Tuesday 15 February 2011] [12:52:43] &lt;private_meta&gt;  We want to use TCP and IPC</div>
<div class="line">[Tuesday 15 February 2011] [12:53:02] &lt;pieterh&gt;       the best way to proceed (and this is for any kind of 0MQ problem you face)</div>
<div class="line">[Tuesday 15 February 2011] [12:53:20] &lt;pieterh&gt;       is to make a minimal 0MQ server/client that reproduces the problem</div>
<div class="line">[Tuesday 15 February 2011] [12:53:26] &lt;private_meta&gt;  I guess I still need to find a list where the REP/REQ and other 0MQ vocabulary is detailed</div>
<div class="line">[Tuesday 15 February 2011] [12:53:35] &lt;pieterh&gt;       and post this somewhere we can look at it (e.g. a gist at github)</div>
<div class="line">[Tuesday 15 February 2011] [12:53:52] &lt;private_meta&gt;  uhm...</div>
<div class="line">[Tuesday 15 February 2011] [12:54:03] &lt;private_meta&gt;  My problem isn&#8217;t with 0MQ right now I hope</div>
<div class="line">[Tuesday 15 February 2011] [12:54:08] &lt;pieterh&gt;       and you do need to read the Guide (<a class="reference external" href="http://zguide.zeromq.org/chapter:all">http://zguide.zeromq.org/chapter:all</a>)</div>
<div class="line">[Tuesday 15 February 2011] [12:54:22] &lt;private_meta&gt;  It&#8217;s getting to simulate what I HAVE (without the error of course)</div>
<div class="line">[Tuesday 15 February 2011] [12:54:39] &lt;pieterh&gt;       90% of the time its down to some error in how you use 0MQ</div>
<div class="line">[Tuesday 15 February 2011] [12:54:42] &lt;private_meta&gt;  yeah, I&#8217;m doing that, I was initially coming here to ask about the socket termination issue</div>
<div class="line">[Tuesday 15 February 2011] [12:55:07] &lt;private_meta&gt;  It&#8217;s not like the docs are a 5 minute read :)</div>
<div class="line">[Tuesday 15 February 2011] [12:55:19] &lt;pieterh&gt;       3-4 days, IMO</div>
<div class="line">[Tuesday 15 February 2011] [12:55:31] &lt;pieterh&gt;       well, it took longer to write :-)</div>
<div class="line">[Tuesday 15 February 2011] [12:56:05] &lt;pieterh&gt;       anyhow, first thing to do is a sanity check of your 0MQ code</div>
<div class="line">[Tuesday 15 February 2011] [12:56:11] &lt;private_meta&gt;  I&#8217;m sure of that. I try to extract what&#8217;s necessary, I doubt I need all the details for now (somewhat lazy approach, I know)</div>
<div class="line">[Tuesday 15 February 2011] [12:56:19] &lt;pieterh&gt;       we don&#8217;t care about code that works</div>
<div class="line">[Tuesday 15 February 2011] [12:56:48] &lt;pieterh&gt;       so a minimal (totally stripped down) server/client that fails, that we can look at...</div>
<div class="line">[Tuesday 15 February 2011] [12:56:56] &lt;pieterh&gt;       if we don&#8217;t find any errors in that, we can start to blame something else</div>
<div class="line">[Tuesday 15 February 2011] [12:57:00] &lt;private_meta&gt;  Well, the usual then :)</div>
<div class="line">[Tuesday 15 February 2011] [12:57:13] &lt;pieterh&gt;       right</div>
<div class="line">[Tuesday 15 February 2011] [12:57:32] &lt;pieterh&gt;       feel free to email me at <a class="reference external" href="mailto:ph&#37;&#52;&#48;imatix&#46;com">ph<span>&#64;</span>imatix<span>&#46;</span>com</a> if I&#8217;m not here when you&#8217;re ready</div>
<div class="line">[Tuesday 15 February 2011] [12:57:40] &lt;pieterh&gt;       or else post to the zeromq-dev list</div>
<div class="line">[Tuesday 15 February 2011] [12:58:07] &lt;pieterh&gt;       I assume the problem can be reproduced without exotic hardware?</div>
<div class="line">[Tuesday 15 February 2011] [13:00:50] &lt;private_meta&gt;  Somehow it feels like I&#8217;m being misunderstood. Until now there&#8217;s no problem with 0MQ yet, just with Boost Asio, that&#8217;s why I want to replace Asio with 0MQ, but I just started, so there are no problems, except for the learning curve :)</div>
<div class="line">[Tuesday 15 February 2011] [13:04:12] &lt;pieterh&gt;       ah</div>
<div class="line">[Tuesday 15 February 2011] [13:04:28] &lt;private_meta&gt;  &gt;_&lt;</div>
<div class="line">[Tuesday 15 February 2011] [13:04:41] &lt;pieterh&gt;       see how fast we kill problems with 0MQ!</div>
<div class="line">[Tuesday 15 February 2011] [13:04:48] &lt;pieterh&gt;       that took negative 30 minutes</div>
<div class="line">[Tuesday 15 February 2011] [13:05:01] &lt;pieterh&gt;       of <em>course</em> boost asio is dropping messages</div>
<div class="line">[Tuesday 15 February 2011] [13:05:30] &lt;private_meta&gt;  o_O</div>
<div class="line">[Tuesday 15 February 2011] [13:05:35] &lt;private_meta&gt;  Well, it shouldn&#8217;t</div>
<div class="line">[Tuesday 15 February 2011] [13:05:47] &lt;pieterh&gt;       sorry for misunderstanding</div>
<div class="line">[Tuesday 15 February 2011] [13:05:59] &lt;pieterh&gt;       presumably there is a queue overflow issue or something</div>
<div class="line">[Tuesday 15 February 2011] [13:08:55] &lt;pieterh&gt;       So if you want to make a boost asio emulation layer over 0MQ, I&#8217;d recommend doing it open source</div>
<div class="line">[Tuesday 15 February 2011] [13:11:37] &lt;private_meta&gt;  The amount of &#8220;emulation&#8221; we need contradicts a full open source emulation... it would be a heck of a lot of work, and I don&#8217;t have time for that at work &gt;_&gt;</div>
<div class="line">[Tuesday 15 February 2011] [13:11:47] &lt;private_meta&gt;  not that it wouldn&#8217;t be a neat idea</div>
<div class="line">[Tuesday 15 February 2011] [13:14:59] &lt;pieterh&gt;       The usual (sane) approach is to make strictly only what you need for your apps, release it, and allow others to expand it</div>
<div class="line">[Tuesday 15 February 2011] [13:15:15] &lt;pieterh&gt;       Assuming it&#8217;s possible to map the subset of boost asio you use to 0MQ</div>
<div class="line">[Tuesday 15 February 2011] [13:15:52] &lt;private_meta&gt;  It would be difficult I assume</div>
<div class="line">[Tuesday 15 February 2011] [13:42:37] &lt;Guthur&gt;        sustrik, returning to are discussion earlier re: IOCP, would it not be beneficial in the long run, if possible, to have both named pipes and sockets on IOCP, with aim to remove the need for Select</div>
<div class="line">[Tuesday 15 February 2011] [13:53:06] &lt;staylor&gt;       I have a question about zmq sockets, are the underlying sockets maintained or opened/closed on demand?</div>
<div class="line">[Tuesday 15 February 2011] [13:53:42] &lt;staylor&gt;       reason I ask is I&#8217;d like to know from my application if the client application is currently connected to the server or not, but I don&#8217;t see any socket status calls in the zmq_socket api</div>
<div class="line">[Tuesday 15 February 2011] [14:04:03] &lt;cremes&gt;        pieterh: does anyone with a wiki account have permission to modify the FAQ?</div>
<div class="line">[Tuesday 15 February 2011] [14:04:41] &lt;cremes&gt;        pieterh: nm; just answered my own question</div>
<div class="line">[Tuesday 15 February 2011] [14:13:40] &lt;cremes&gt;        just updated the FAQ to help people with the assertion in mailbox.cpp:182</div>
<div class="line">[Tuesday 15 February 2011] [15:06:33] Notice  -Martinp23- [Global Notice] Hi everyone. You will have possibly noticed some instability on the network earlier this evening. The network is under a sustained DDoS and so lag and possible further splits are to be expected. We apologise for the inconvenience - our fantastic sponsorship and infra teams are working to minimise the further impact. Have a nice evening!</div>
<div class="line">[Tuesday 15 February 2011] [15:40:03] &lt;sejo&gt;  hey all I&#8217;m looking at different solutions, and basicly just need an mq to be able to use from python,</div>
<div class="line">[Tuesday 15 February 2011] [15:40:27] &lt;sejo&gt;  so what would be my advantage using 0mq over rabbitmq or others?</div>
<div class="line">[Tuesday 15 February 2011] [15:47:14] &lt;Guthur&gt;        sejo, I really think it depends on use case scenario</div>
<div class="line">[Tuesday 15 February 2011] [15:48:04] &lt;Guthur&gt;        they are different beasts, rabbitmq is a broker base MQ, whereas ZeroMQ is brokerless, for a start</div>
<div class="line">[Tuesday 15 February 2011] [15:48:45] &lt;Guthur&gt;        I wont pretend to know much about rabbitmq though</div>
<div class="line">[Tuesday 15 February 2011] [15:49:10] &lt;Guthur&gt;        hehe, even my 0MQ knowledge would be on the lighter side compared to some around here</div>
<div class="line">[Tuesday 15 February 2011] [15:50:54] &lt;sejo&gt;  ok, well basicly in the beginning i probably have only like 10 clients popping items, and the same 10 pushing others onto it</div>
<div class="line">[Tuesday 15 February 2011] [15:51:57] &lt;sejo&gt;  as far as I understand now I should write my own protocol(s) and can use them over the clients and the servers. However is it easy to have multiple servers handling the same data?</div>
<div class="line">[Tuesday 15 February 2011] [15:52:27] &lt;sejo&gt;  it probably is</div>
<div class="line">[Tuesday 15 February 2011] [15:52:39] &lt;sejo&gt;  sorry stupid question</div>
<div class="line">[Tuesday 15 February 2011] [15:56:09] &lt;sejo&gt;  my biggest fear is that i&#8217;ll spend too much time developing on it before I can use it...</div>
<div class="line">[Tuesday 15 February 2011] [15:56:40] &lt;sejo&gt;  that&#8217;s why I ask around and not test them out all.. don&#8217;t have the time for it</div>
<div class="line">[Tuesday 15 February 2011] [15:58:59] &lt;Guthur&gt;        sure, it&#8217;s sensible to do research first</div>
<div class="line">[Tuesday 15 February 2011] [15:59:56] &lt;Guthur&gt;        scaling to multiple servers would something that 0MQ can do well</div>
<div class="line">[Tuesday 15 February 2011] [16:01:04] &lt;Guthur&gt;        but you don&#8217;t really get much in the way of &#8216;topic&#8217; or &#8216;queue&#8217; management out of the box, though there are PUB/SUB sockets</div>
<div class="line">[Tuesday 15 February 2011] [16:01:39] &lt;Guthur&gt;        I&#8217;m reluctant to give any hard advice though, due to be lack of hardcore experience and knowledge</div>
<div class="line">[Tuesday 15 February 2011] [16:02:16] &lt;sejo&gt;  thanks anyway right now I have no knowledge on what to use so</div>
<div class="line">[Tuesday 15 February 2011] [16:02:35] &lt;Guthur&gt;        you could glance through the 0MQ guide</div>
<div class="line">[Tuesday 15 February 2011] [16:02:50] &lt;sejo&gt;  basicly i want multiple servers and n-clients pushing and popping independently</div>
<div class="line">[Tuesday 15 February 2011] [16:03:00] &lt;Guthur&gt;        <a class="reference external" href="http://zguide.zeromq.org/chapter:all">http://zguide.zeromq.org/chapter:all</a></div>
<div class="line">[Tuesday 15 February 2011] [16:03:12] &lt;sejo&gt;  i&#8217;m reading through it while we talk :p</div>
<div class="line">[Tuesday 15 February 2011] [16:03:14] &lt;Guthur&gt;        ok</div>
<div class="line">[Tuesday 15 February 2011] [16:03:20] &lt;Guthur&gt;        hehe cool</div>
<div class="line">[Tuesday 15 February 2011] [16:03:50] &lt;Guthur&gt;        there is a few example in there that could give some inspiration for your particular problem</div>
<div class="line">[Tuesday 15 February 2011] [16:04:41] &lt;sejo&gt;  yeah, main thing is that I don&#8217;t need a real pub/sub, client just chooses when to pop a message</div>
<div class="line">[Tuesday 15 February 2011] [16:06:15] &lt;Guthur&gt;        check out the Queue device, which would show a possible multi server pattern</div>
<div class="line">[Tuesday 15 February 2011] [16:06:24] &lt;Guthur&gt;        at a very simple level</div>
<div class="line">[Tuesday 15 February 2011] [16:06:59] &lt;Guthur&gt;        pieter or sustrik would be better at giving advice than me</div>
<div class="line">[Tuesday 15 February 2011] [16:07:25] &lt;sejo&gt;  thk i&#8217;ll chekc it out</div>
<div class="line">[Tuesday 15 February 2011] [16:07:58] &lt;sejo&gt;  the thing that got me here was the nice looking python api :p</div>
<div class="line">[Tuesday 15 February 2011] [16:13:46] &lt;Guthur&gt;        I&#8217;m not familiar with the python binding, but yeah I&#8217;m sure its nice, hehe</div>
<div class="line">[Tuesday 15 February 2011] [16:14:19] &lt;Guthur&gt;        python has that sort of philosophy, nice simple interfaces</div>
<div class="line">[Tuesday 15 February 2011] [16:15:04] &lt;sejo&gt;  we&#8217;ll i&#8217;ll read up on it more, the ventilation example pretty much does what i want, only i have multiple ventilators and each of them multiple types of messages</div>
<div class="line">[Tuesday 15 February 2011] [16:16:12] &lt;sejo&gt;  well no probably i only need one type that works with json</div>
<div class="line">[Tuesday 15 February 2011] [16:16:49] &lt;Guthur&gt;        I like JSON, nice format</div>
<div class="line">[Tuesday 15 February 2011] [16:17:00] &lt;sejo&gt;  Guthur: thanks for the information, i&#8217;ll read up on it a bit more and then i&#8217;ll probably need to choose</div>
<div class="line">[Tuesday 15 February 2011] [16:17:07] &lt;sejo&gt;  ttyal</div>
<div class="line">[Tuesday 15 February 2011] [16:17:11] &lt;sejo&gt;  gtg</div>
<div class="line">[Tuesday 15 February 2011] [16:17:14] &lt;Guthur&gt;        later</div>
<div class="line">[Tuesday 15 February 2011] [16:17:38] &lt;Guthur&gt;        ok, drop by later and someone more experience can give better advice</div>
<div class="line">[Tuesday 15 February 2011] [16:43:59] &lt;lt_schmidt_jr&gt; is gonzalo here perchance</div>
<div class="line">[Tuesday 15 February 2011] [16:46:59] &lt;whack&gt; So, is there no way to bind to a random port? (like binding to port 0)</div>
<div class="line">[Tuesday 15 February 2011] [16:47:19] &lt;whack&gt; I&#8217;m not seeing anything obvious in the docs, and attempts to bind to <a class="reference external" href="tcp://blah:0">tcp://blah:0</a> result in an error</div>
<div class="line">[Tuesday 15 February 2011] [17:46:57] &lt;sustrik&gt;       lt_schmidt_jr: gonzalo doesn&#8217;t come here often, you have to use email instead</div>
<div class="line">[Tuesday 15 February 2011] [17:47:23] &lt;sustrik&gt;       whack: no there&#8217;s no way</div>
<div class="line">[Tuesday 15 February 2011] [17:53:51] &lt;lt_schmidt_jr&gt; sustrik; we are having an impedance mismatch on our responses, thanks</div>
<div class="line">[Tuesday 15 February 2011] [18:06:55] &lt;kdj&gt;   So what is the proper way to make sure that a message is sent to a polling server? Just a response?</div>
<div class="line">[Tuesday 15 February 2011] [18:07:33] &lt;cremes&gt;        kdj: i don&#8217;t understand the question; can you rephrase?</div>
<div class="line">[Tuesday 15 February 2011] [18:09:48] &lt;kdj&gt;   Sorry. We have some clients that will occasionally send a short message to a server... but just sending won&#8217;t error if the server isn&#8217;t there. I understand why (I think)</div>
<div class="line">[Tuesday 15 February 2011] [18:10:09] &lt;kdj&gt;   But I want to make sure the server is there</div>
<div class="line">[Tuesday 15 February 2011] [18:10:40] &lt;cremes&gt;        kdj: that&#8217;s correct; 0mq has no indicator that the server went away</div>
<div class="line">[Tuesday 15 February 2011] [18:11:02] &lt;cremes&gt;        you should establish an &#8220;ack&#8221; that the server should send back; if it times out, the server is dead</div>
<div class="line">[Tuesday 15 February 2011] [18:11:17] &lt;cremes&gt;        i recommend polling on req/rep sockets to accomplish this</div>
<div class="line">[Tuesday 15 February 2011] [18:11:43] &lt;cremes&gt;        e.g. each client has its own REQ socket; the server has a XREP socket (so that it can respond to multiple clients)</div>
<div class="line">[Tuesday 15 February 2011] [18:11:52] &lt;kdj&gt;   You can poll on REQ sockets?</div>
<div class="line">[Tuesday 15 February 2011] [18:12:04] &lt;kdj&gt;   Yeah, that is how it is setup now</div>
<div class="line">[Tuesday 15 February 2011] [18:12:06] &lt;cremes&gt;        absolutely; send/recv with ZM_NOBLOCK</div>
<div class="line">[Tuesday 15 February 2011] [18:12:15] &lt;cremes&gt;        and register them with zmq_poll</div>
<div class="line">[Tuesday 15 February 2011] [18:13:45] &lt;kdj&gt;   Sending with NOBLOCK isn&#8217;t actually doing anything with just a normal REQ socket, but it does on receive... is that because I need polling?</div>
<div class="line">[Tuesday 15 February 2011] [18:14:34] &lt;cremes&gt;        kdj: well, you don&#8217;t <em>need</em> to send with noblock</div>
<div class="line">[Tuesday 15 February 2011] [18:14:50] &lt;cremes&gt;        the basic idea is when your client sends the data, start a timer</div>
<div class="line">[Tuesday 15 February 2011] [18:15:02] &lt;cremes&gt;        if the server responds back, cancel the timer</div>
<div class="line">[Tuesday 15 February 2011] [18:15:08] &lt;cremes&gt;        if the timer expires, close the req socket</div>
<div class="line">[Tuesday 15 February 2011] [18:15:26] &lt;cremes&gt;        none of that needs noblock</div>
<div class="line">[Tuesday 15 February 2011] [18:15:42] &lt;lt_schmidt_jr&gt; to jump in with kdj, when would you use in polling vs blocking</div>
<div class="line">[Tuesday 15 February 2011] [18:15:46] &lt;cremes&gt;        you will need to poll if your timer and req socket are in the same thread</div>
<div class="line">[Tuesday 15 February 2011] [18:16:04] &lt;cremes&gt;        lt_schmidt_jr: like so...</div>
<div class="line">[Tuesday 15 February 2011] [18:16:23] &lt;cremes&gt;        if you start your timer and then call recv in blocking mode, how do you handle timer expiration?</div>
<div class="line">[Tuesday 15 February 2011] [18:16:43] &lt;cremes&gt;        1. timer must live in a separate thread or process from the blocking recv</div>
<div class="line">[Tuesday 15 February 2011] [18:17:10] &lt;lt_schmidt_jr&gt; right</div>
<div class="line">[Tuesday 15 February 2011] [18:17:12] &lt;cremes&gt;        2. recv is non-blocking and you use poll to handle the recv; timer is on the same thread</div>
<div class="line">[Tuesday 15 February 2011] [18:17:21] &lt;cremes&gt;        those are the 2 ways i would approach</div>
<div class="line">[Tuesday 15 February 2011] [18:17:25] &lt;cremes&gt;        i like #2 better</div>
<div class="line">[Tuesday 15 February 2011] [18:17:31] &lt;kdj&gt;   Ok. I wasn&#8217;t sending an acknowledgement from the server originally... just receiving the message and moving on</div>
<div class="line">[Tuesday 15 February 2011] [18:17:33] &lt;cremes&gt;        threading gets so messy</div>
<div class="line">[Tuesday 15 February 2011] [18:18:09] &lt;cremes&gt;        kdj: if you were using REQ sockets on the client, the next time you tried to send you would get a EFSM error</div>
<div class="line">[Tuesday 15 February 2011] [18:18:37] &lt;cremes&gt;        REQ/REP sockets are strictly stateful; REQ <em>must</em> send/recv/send/recv while REP <em>must</em> recv/send/recv/send</div>
<div class="line">[Tuesday 15 February 2011] [18:19:44] &lt;kdj&gt;   Yeah, that makes sense.</div>
<div class="line">[Tuesday 15 February 2011] [18:21:39] &lt;lt_schmidt_jr&gt; hmm, interesting, so I should be able to put multiple sockets with a poller</div>
<div class="line">[Tuesday 15 February 2011] [18:21:50] &lt;lt_schmidt_jr&gt; same poller</div>
<div class="line">[Tuesday 15 February 2011] [18:23:04] &lt;kdj&gt;   Hmmm... does 0mq send an acknowledgement automatically?</div>
<div class="line">[Tuesday 15 February 2011] [18:23:27] &lt;cremes&gt;        lt_schmidt_jr: yes</div>
<div class="line">[Tuesday 15 February 2011] [18:23:30] &lt;cremes&gt;        kdj: no</div>
<div class="line">[Tuesday 15 February 2011] [18:24:17] &lt;cremes&gt;        kdj: the heartbeat is an application-level responsibility; your code must process and send the ack</div>
<div class="line">[Tuesday 15 February 2011] [18:24:46] &lt;cremes&gt;        you could actually abstract this out into your own private &#8220;heartbeat&#8221; socket and make it completely transparent</div>
<div class="line">[Tuesday 15 February 2011] [18:25:01] &lt;kdj&gt;   Yeah, that totally makes sense... I just threw some code together to test it though and it (sort of) works</div>
<div class="line">[Tuesday 15 February 2011] [18:26:03] &lt;kdj&gt;   having a poller on the server end, which just recieves messages (no sending), and a client which sends and then receives... somehow the receiving on the client end is still happening (and not blocking)</div>
<div class="line">[Tuesday 15 February 2011] [18:26:10] &lt;lt_schmidt_jr&gt; kdj: for me I am planning to use ZooKeeper, which I have used successfully in a similar way to figure out server presence</div>
<div class="line">[Tuesday 15 February 2011] [18:27:01] &lt;lt_schmidt_jr&gt; in my case to figure out other servers that will form a cluster</div>
<div class="line">[Tuesday 15 February 2011] [18:27:13] &lt;cremes&gt;        kdj: print out the data that your client is receiving</div>
<div class="line">[Tuesday 15 February 2011] [18:27:26] &lt;cremes&gt;        or run tcpdump and watch the packets fly</div>
<div class="line">[Tuesday 15 February 2011] [18:27:45] &lt;cremes&gt;        unless you are issuing a zmq_send() from the server, the client shouldn&#8217;t be getting a response</div>
<div class="line">[Tuesday 15 February 2011] [18:27:59] &lt;cremes&gt;        there has to be code doing that somewhere in your example</div>
<div class="line">[Tuesday 15 February 2011] [18:28:05] &lt;cremes&gt;        is it small enough to pastie?</div>
<div class="line">[Tuesday 15 February 2011] [18:29:19] &lt;lt_schmidt_jr&gt; kdj, cremes: you can use <a class="reference external" href="http://pastebin.com/">http://pastebin.com/</a></div>
<div class="line">[Tuesday 15 February 2011] [18:31:34] &lt;kdj&gt;   Sorry, I think it was just my threading code for testing it. It works as it is supposed to. :X</div>
<div class="line">[Tuesday 15 February 2011] [18:32:02] &lt;cremes&gt;        yeah, that&#8217;s an easy mistake to make</div>
<div class="line">[Tuesday 15 February 2011] [18:32:18] &lt;cremes&gt;        take a look at using the &#8220;inproc&#8221; transport for communicating between threads</div>
<div class="line">[Tuesday 15 February 2011] [18:32:35] &lt;cremes&gt;        it obviates the need for mutexes and makes threading code simpler</div>
<div class="line">[Tuesday 15 February 2011] [18:32:56] &lt;cremes&gt;        btw, that&#8217;s one of the great wins of using 0mq; it&#8217;s a threading library too!</div>
<div class="line">[Tuesday 15 February 2011] [18:34:36] &lt;lt_schmidt_jr&gt; cremes: not to ask a stupid question, but how does one use it for threading - is it in the guide?</div>
<div class="line">[Tuesday 15 February 2011] [18:36:00] &lt;cremes&gt;        lt_schmidt_jr: i don&#8217;t know if it&#8217;s in the guide; haven&#8217;t looked lately</div>
<div class="line">[Tuesday 15 February 2011] [18:36:03] &lt;cremes&gt;        but here&#8217;s the basic idea</div>
<div class="line">[Tuesday 15 February 2011] [18:36:26] &lt;cremes&gt;        imagine you have 10 threads trying to access a shared resource</div>
<div class="line">[Tuesday 15 February 2011] [18:36:35] &lt;lt_schmidt_jr&gt; right</div>
<div class="line">[Tuesday 15 February 2011] [18:36:41] &lt;cremes&gt;        right now you use a mutex, spinlock or some locking structure</div>
<div class="line">[Tuesday 15 February 2011] [18:36:50] &lt;lt_schmidt_jr&gt; ok</div>
<div class="line">[Tuesday 15 February 2011] [18:37:00] &lt;cremes&gt;        with 0mq, put the resource that everyone wants into its own thread and give it a XREP socket</div>
<div class="line">[Tuesday 15 February 2011] [18:37:22] &lt;cremes&gt;        now make every other thread a &#8220;client&#8221; of that &#8220;server&#8221; and give them REQ sockets</div>
<div class="line">[Tuesday 15 February 2011] [18:37:50] &lt;cremes&gt;        connect them all together using inproc (all platforms) or ipc (unix only) to communicate so you don&#8217;t pay the TCP penalty</div>
<div class="line">[Tuesday 15 February 2011] [18:38:12] &lt;cremes&gt;        each client &#8220;asks&#8221; the resource for whatever via the 0mq socket</div>
<div class="line">[Tuesday 15 February 2011] [18:38:26] &lt;cremes&gt;        the 0mq socket serializes all access to the resource and prevents all race conditions</div>
<div class="line">[Tuesday 15 February 2011] [18:38:35] &lt;cremes&gt;        make sense?</div>
<div class="line">[Tuesday 15 February 2011] [18:38:35] &lt;lt_schmidt_jr&gt; I see</div>
<div class="line">[Tuesday 15 February 2011] [18:38:42] &lt;lt_schmidt_jr&gt; absolutely</div>
<div class="line">[Tuesday 15 February 2011] [18:38:51] &lt;lt_schmidt_jr&gt; thank you</div>
<div class="line">[Tuesday 15 February 2011] [18:38:54] &lt;cremes&gt;        this is the basic idea behind Actors if you have played with those in any languages</div>
<div class="line">[Tuesday 15 February 2011] [18:39:05] &lt;lt_schmidt_jr&gt; I have played with erl</div>
<div class="line">[Tuesday 15 February 2011] [18:39:28] &lt;cremes&gt;        lt_schmidt_jr: right; instead of using mutexes, you are using <em>messaging</em> for your concurrency</div>
<div class="line">[Tuesday 15 February 2011] [18:39:45] &lt;cremes&gt;        and here&#8217;s another cool part of using 0mq</div>
<div class="line">[Tuesday 15 February 2011] [18:39:56] &lt;lt_schmidt_jr&gt; cremes: very cool</div>
<div class="line">[Tuesday 15 February 2011] [18:40:04] &lt;cremes&gt;        let&#8217;s say at some point this &#8220;server&#8221; resource needs to be on its own box</div>
<div class="line">[Tuesday 15 February 2011] [18:40:34] &lt;cremes&gt;        all you have to do to change communications is modify the transport string that you pass to zmq_connect/zmq_bind from inproc (or ipc) to tcp</div>
<div class="line">[Tuesday 15 February 2011] [18:40:39] &lt;cremes&gt;        instant scaling</div>
<div class="line">[Tuesday 15 February 2011] [18:40:52] &lt;cremes&gt;        i have used this technique many times already; works wonderfully</div>
<div class="line">[Tuesday 15 February 2011] [18:40:53] &lt;lt_schmidt_jr&gt; yeah, you would just change the ..</div>
<div class="line">[Tuesday 15 February 2011] [18:41:36] &lt;lt_schmidt_jr&gt; I have prototyped a pub/sub message bus and I have inproc/ipc/tcp going between different participants</div>
<div class="line">[Tuesday 15 February 2011] [18:42:03] &lt;kdj&gt;   Hmmm... now I&#8217;m not really sure how our original client/server stuff was working...</div>
<div class="line">[Tuesday 15 February 2011] [18:42:29] &lt;lt_schmidt_jr&gt; but I think I am just not treating the threading correctly - too many threads</div>
<div class="line">[Tuesday 15 February 2011] [18:43:29] &lt;cremes&gt;        lt_schmidt_jr: you&#8217;ll have to figure that one out; i&#8217;m not a threading expert</div>
<div class="line">[Tuesday 15 February 2011] [18:45:29] &lt;lt_schmidt_jr&gt; cremes: the issue is I have a thread per connection and I still need to use polling to figure out if the thread needs to be shut down</div>
<div class="line">[Tuesday 15 February 2011] [18:45:36] &lt;lt_schmidt_jr&gt; so its a little ugly</div>
<div class="line">[Tuesday 15 February 2011] [18:46:41] &lt;cremes&gt;        i don&#8217;t understand, but ok</div>
<div class="line">[Tuesday 15 February 2011] [18:46:46] &lt;lt_schmidt_jr&gt; If I block on recv, I am not sure how a subscriber can be inerrrupted</div>
<div class="line">[Tuesday 15 February 2011] [18:46:58] &lt;cremes&gt;        oh, i see</div>
<div class="line">[Tuesday 15 February 2011] [18:47:04] &lt;cremes&gt;        are you using 2.0.10 or 2.1.0?</div>
<div class="line">[Tuesday 15 February 2011] [18:47:13] &lt;lt_schmidt_jr&gt; 2.0.1 and Java</div>
<div class="line">[Tuesday 15 February 2011] [18:47:20] &lt;lt_schmidt_jr&gt; 2.0.10</div>
<div class="line">[Tuesday 15 February 2011] [18:47:23] &lt;cremes&gt;        um... ok</div>
<div class="line">[Tuesday 15 February 2011] [18:47:47] &lt;lt_schmidt_jr&gt; is there something in 2.1.0 that  I should be using?</div>
<div class="line">[Tuesday 15 February 2011] [18:47:55] &lt;cremes&gt;        i think your only solution then is to close the entire context via zmq_term()</div>
<div class="line">[Tuesday 15 February 2011] [18:48:08] &lt;cremes&gt;        that will cause each socket to awaken and return ETERM</div>
<div class="line">[Tuesday 15 February 2011] [18:48:45] &lt;cremes&gt;        everybody should be on 2.1.0 now; the only 2.0.10 users should be legacy guys who <em>cannot</em> upgrade for whatever reason</div>
<div class="line">[Tuesday 15 February 2011] [18:48:52] &lt;cremes&gt;        so yeah, upgrade</div>
<div class="line">[Tuesday 15 February 2011] [18:48:52] &lt;lt_schmidt_jr&gt; see, I have multiple subscibers within the same context, and only one would need to be terminated</div>
<div class="line">[Tuesday 15 February 2011] [18:49:17] &lt;cremes&gt;        yep, terminating the context terminates <em>all</em> sockets so that&#8217;s your only choice there</div>
<div class="line">[Tuesday 15 February 2011] [18:49:33] &lt;cremes&gt;        in 2.1.0 i believe you can call zmq_close() on the socket from another thread and it will work as expected</div>
<div class="line">[Tuesday 15 February 2011] [18:49:35] &lt;lt_schmidt_jr&gt; ok, I skipped 2.1.0, because it caused the java binding unit tests to fail</div>
<div class="line">[Tuesday 15 February 2011] [18:49:53] &lt;cremes&gt;        yeah, 2.1.0 is considered beta so not everyone has updated their bindings</div>
<div class="line">[Tuesday 15 February 2011] [18:50:02] &lt;lt_schmidt_jr&gt; maybe I should do that myself</div>
<div class="line">[Tuesday 15 February 2011] [18:50:08] &lt;cremes&gt;        but it is <em>way</em> more stable than 2.0.10 so i would upgrade</div>
<div class="line">[Tuesday 15 February 2011] [18:50:16] &lt;cremes&gt;        maybe you could submit a patch to fix the java tests</div>
<div class="line">[Tuesday 15 February 2011] [18:50:41] &lt;lt_schmidt_jr&gt; I submitted the maven fix, should do this as well</div>
<div class="line">[Tuesday 15 February 2011] [18:51:16] &lt;lt_schmidt_jr&gt; so I could close the socket from a different thread, great</div>
<div class="line">[Tuesday 15 February 2011] [18:52:16] &lt;lt_schmidt_jr&gt; I guess I could figure out how to use polling correctly and not have a bunch of threads in the first place</div>
<div class="line">[Tuesday 15 February 2011] [18:52:36] &lt;lt_schmidt_jr&gt; that is have many sockets and a single polling thread</div>
<div class="line">[Tuesday 15 February 2011] [18:53:13] &lt;lt_schmidt_jr&gt; and not have the computer turn into a space heater</div>
<div class="line">[Tuesday 15 February 2011] [18:53:51] &lt;lt_schmidt_jr&gt; will go through the guide</div>
<div class="line">[Tuesday 15 February 2011] [18:54:54] &lt;kdj&gt;   Thanks for your help cremes</div>
<div class="line">[Tuesday 15 February 2011] [19:00:54] &lt;cremes&gt;        kdj: you are welcome; remember to pay it forward at some point ;)</div>
<div class="line">[Tuesday 15 February 2011] [19:01:50] &lt;kdj&gt;   Hopefully that won&#8217;t involve inadvertently leading someone astray. ;)</div>
<div class="line">[Tuesday 15 February 2011] [23:50:44] &lt;zedas&gt; sustrik: hey so i still see this poll 100%CPU bug even with the latest 2.1.0 and <em>cannot</em> figure out how to fix it. <a class="reference external" href="http://dpaste.de/oxeU/">http://dpaste.de/oxeU/</a></div>
<div class="line">[Tuesday 15 February 2011] [23:51:20] &lt;zedas&gt; sustrik: it looks like i&#8217;ll have to dig into the zeromq code and pull out the error handling that zmq_poll does.</div>
<div class="line">[Wednesday 16 February 2011] [02:07:37] &lt;sustrik&gt;     zedas: any chance to reproduce the problem here?</div>
<div class="line">[Wednesday 16 February 2011] [02:24:37] &lt;zedas&gt;       sustrik: it happens at random on my servers, so next time i can gdb to it and debug for you.</div>
<div class="line">[Wednesday 16 February 2011] [02:24:59] &lt;sustrik&gt;     thanks</div>
<div class="line">[Wednesday 16 February 2011] [02:25:12] &lt;sustrik&gt;     find out what&#8217;s looping there</div>
<div class="line">[Wednesday 16 February 2011] [02:31:21] &lt;zedas&gt;       well i&#8217;m pretty sure it&#8217;s zmq_poll not handling an EAGAIN on zeromq socket objects.</div>
<div class="line">[Wednesday 16 February 2011] [02:31:41] &lt;zedas&gt;       but i&#8217;ll confirm it and work up a fix.  looking at the code the fix may be a flag that says to not stuff errors.</div>
<div class="line">[Wednesday 16 February 2011] [02:42:26] &lt;sustrik&gt;     let me have a look...</div>
<div class="line">[Wednesday 16 February 2011] [02:42:45] &lt;sustrik&gt;     zedas: is that linux?</div>
<div class="line">[Wednesday 16 February 2011] [02:44:30] &lt;sustrik&gt;     hm, the only operations on zeromq socket objects witihn zmq_poll is zmq_getsockopt()</div>
<div class="line">[Wednesday 16 February 2011] [02:45:02] &lt;sustrik&gt;     are you getting EAGAIN from zmq_getsockopt()? That should not happen as far as i am aware.</div>
<div class="line">[Wednesday 16 February 2011] [03:41:54] &lt;enleth&gt;      Hello</div>
<div class="line">[Wednesday 16 February 2011] [03:44:44] &lt;sustrik&gt;     hi</div>
<div class="line">[Wednesday 16 February 2011] [03:44:52] &lt;enleth&gt;      I&#8217;ve got a problem building OMQ - it&#8217;s about the luuid dependency. OMQ reuires the OSSP UUID library, which, due to conflicts with (unmaintained and dropped a long time ago) e2fsprogrs libuuid was renamed to libossp-uuid in my Linux distribution and, FWIW, this was generally a very popular solution.</div>
<div class="line">[Wednesday 16 February 2011] [03:45:10] &lt;enleth&gt;      But OMQ looks for libuuid and the configure script does not accept an alternate name</div>
<div class="line">[Wednesday 16 February 2011] [03:45:56] &lt;sustrik&gt;     enleth: easy, patch the build system and submit the patch to the mailing list</div>
<div class="line">[Wednesday 16 February 2011] [03:47:49] &lt;enleth&gt;      Oh, and I just noticed that the proper libuuid provides an uuid-config program for the configure script to use</div>
<div class="line">[Wednesday 16 February 2011] [03:48:08] &lt;enleth&gt;      uuid-config &#8211;libs outputs -lossp-uuid, which should be used</div>
<div class="line">[Wednesday 16 February 2011] [03:48:41] &lt;enleth&gt;      I guess this is what the build system should do instead of using a hardcoded name</div>
<div class="line">[Wednesday 16 February 2011] [03:49:12] &lt;sustrik&gt;     great, post your suggestion to the mailing list</div>
<div class="line">[Wednesday 16 February 2011] [03:49:12] &lt;enleth&gt;      The problem is, my skills with autotools are crap</div>
<div class="line">[Wednesday 16 February 2011] [03:49:23] &lt;sustrik&gt;     so that build system maintainers can have a look at it</div>
<div class="line">[Wednesday 16 February 2011] [03:49:28] &lt;enleth&gt;      OK, will do</div>
<div class="line">[Wednesday 16 February 2011] [03:49:31] &lt;sustrik&gt;     thanks</div>
<div class="line">[Wednesday 16 February 2011] [04:16:56] &lt;enleth&gt;      No, wait. It does use the old e2fsprogrs-derived libuuid, my bad.</div>
<div class="line">[Wednesday 16 February 2011] [04:25:44] &lt;enleth&gt;      OK, there is no problem, the distro repository managed screwed up and I got a bad upgrade installed</div>
<div class="line">[Wednesday 16 February 2011] [04:34:18] &lt;mikko&gt;       pieterh: are you here sir?</div>
<div class="line">[Wednesday 16 February 2011] [04:34:28] &lt;pieterh&gt;     mikko: just arrived</div>
<div class="line">[Wednesday 16 February 2011] [04:36:22] &lt;mikko&gt;       is there a specific reason why test functions are compiled into zfl ?</div>
<div class="line">[Wednesday 16 February 2011] [04:36:33] &lt;mikko&gt;       are those symbols needed outside selftest?</div>
<div class="line">[Wednesday 16 February 2011] [04:38:49] &lt;pieterh&gt;     if you can find a way of compiling a single C source file into two objects, I&#8217;m hapopy</div>
<div class="line">[Wednesday 16 February 2011] [04:38:51] &lt;pieterh&gt;     <a href="#id25"><span class="problematic" id="id26">*</span></a>happy</div>
<div class="line">[Wednesday 16 February 2011] [04:39:02] &lt;pieterh&gt;     but the test code must, for me, be in the same source as the actual class</div>
<div class="line">[Wednesday 16 February 2011] [04:40:00] &lt;mikko&gt;       pieterh: ok</div>
<div class="line">[Wednesday 16 February 2011] [04:41:04] &lt;pieterh&gt;     mikko: if people are unhappy about extra code in their executables we could make these conditionally compiled</div>
<div class="line">[Wednesday 16 February 2011] [04:42:36] &lt;mikko&gt;       pieterh: currently i was prototyping something like: <a class="reference external" href="https://gist.github.com/3f2a43c19ab439b22884">https://gist.github.com/3f2a43c19ab439b22884</a></div>
<div class="line">[Wednesday 16 February 2011] [04:42:41] &lt;mikko&gt;       separate tests/ directory</div>
<div class="line">[Wednesday 16 February 2011] [04:42:59] &lt;mikko&gt;       but i think it should be possible to create separate objects from same code as well</div>
<div class="line">[Wednesday 16 February 2011] [04:43:00] &lt;pieterh&gt;     aaaghhhh.....</div>
<div class="line">[Wednesday 16 February 2011] [04:43:13] &lt;pieterh&gt;     it&#8217;s the reason the man pages are a real pain to maintain</div>
<div class="line">[Wednesday 16 February 2011] [04:43:21] &lt;pieterh&gt;     separate directories look very clean organizationally</div>
<div class="line">[Wednesday 16 February 2011] [04:43:29] &lt;pieterh&gt;     but they ensure pieces don&#8217;t get updated</div>
<div class="line">[Wednesday 16 February 2011] [04:44:02] &lt;pieterh&gt;     also the test cases are essential documentation, like the rest of the source file</div>
<div class="line">[Wednesday 16 February 2011] [04:44:29] &lt;pieterh&gt;     running the selftest in its own directory is a good idea, some tests need to mess with files</div>
<div class="line">[Wednesday 16 February 2011] [04:44:57] &lt;pieterh&gt;     but I really, really don&#8217;t want to find ourselves in the zmq situation of having lots of code that lacks test cases</div>
<div class="line">[Wednesday 16 February 2011] [04:46:09] &lt;mikko&gt;       hmmm, this gives me additional idea</div>
<div class="line">[Wednesday 16 February 2011] [04:47:14] &lt;mikko&gt;       in zfls case code coverage reports would make sense</div>
<div class="line">[Wednesday 16 February 2011] [04:47:46] &lt;pieterh&gt;     yes, as an additional insurance</div>
<div class="line">[Wednesday 16 February 2011] [04:47:57] &lt;pieterh&gt;     that&#8217;s meta testing, i.e. testing the test cases</div>
<div class="line">[Wednesday 16 February 2011] [04:48:11] &lt;pieterh&gt;     it&#8217;s a neat idea</div>
<div class="line">[Wednesday 16 February 2011] [04:48:27] &lt;mikko&gt;       i&#8217;ll put this on my todo</div>
<div class="line">[Wednesday 16 February 2011] [04:49:04] &lt;pieterh&gt;     there&#8217;s still space? I&#8217;m impressed...</div>
<div class="line">[Wednesday 16 February 2011] [04:49:07] &lt;pieterh&gt;     :-)</div>
<div class="line">[Wednesday 16 February 2011] [04:49:33] &lt;ianbarber&gt;   speaking off: mikko, did you move the pear server?</div>
<div class="line">[Wednesday 16 February 2011] [04:49:44] &lt;ianbarber&gt;   s/off/of</div>
<div class="line">[Wednesday 16 February 2011] [04:50:51] &lt;mikko&gt;       ianbarber: in the works</div>
<div class="line">[Wednesday 16 February 2011] [04:51:12] &lt;mikko&gt;       hmm</div>
<div class="line">[Wednesday 16 February 2011] [04:51:23] &lt;mikko&gt;       i guess the easiest would be to put it where rest of the stuff is</div>
<div class="line">[Wednesday 16 February 2011] [04:51:30] &lt;mikko&gt;       you can point the dns to 193.211.31.222</div>
<div class="line">[Wednesday 16 February 2011] [04:51:46] &lt;ianbarber&gt;   i&#8217;ll point both php. and pear. at it</div>
<div class="line">[Wednesday 16 February 2011] [04:56:05] &lt;mikko&gt;       looking at the apache rewrite rules this makes me want to use nginx</div>
<div class="line">[Wednesday 16 February 2011] [04:56:55] &lt;kristsk&gt;     nginx is about the same, imho</div>
<div class="line">[Wednesday 16 February 2011] [04:57:47] &lt;mikko&gt;       kristsk: dynamic virtualhosting seems a lot more fluent in nginx</div>
<div class="line">[Wednesday 16 February 2011] [05:03:15] &lt;kristsk&gt;     might be because of nginx&#8217;s config syntax, it does not feel so archaic</div>
<div class="line">[Wednesday 16 February 2011] [05:05:06] &lt;kristsk&gt;     in regard of vhosts lighthttpd is sought to be more powerfull</div>
<div class="line">[Wednesday 16 February 2011] [05:48:11] &lt;Guthur&gt;      sustrik: do you think having wsapoll on supported win platforms would be good to have?</div>
<div class="line">[Wednesday 16 February 2011] [06:06:02] &lt;ianbarber&gt;   pieterh: about?</div>
<div class="line">[Wednesday 16 February 2011] [06:06:22] &lt;pieterh&gt;     ianbarber: about 12ish</div>
<div class="line">[Wednesday 16 February 2011] [06:06:46] &lt;pieterh&gt;     :-) how can I help you?</div>
<div class="line">[Wednesday 16 February 2011] [06:06:50] &lt;ianbarber&gt;   :)</div>
<div class="line">[Wednesday 16 February 2011] [06:08:09] &lt;ianbarber&gt;   i discovered the wonderful land of martinique has a fun domain extension, so the PHP extension is now available on php.zero.mq and pear.zero.mq (pear is the PHP package system). Was wondering - do you want to have zeromq.org listen on zero.mq and www.zero.mq as well, i can point in that direction (even if it&#8217;s just doing a rewrite to zeromq.org)</div>
<div class="line">[Wednesday 16 February 2011] [06:08:56] &lt;ianbarber&gt;   we can redirect from hosting as well, just seems like if someone does go to just zero.mq, they should end up at the site. It&#8217;s on mikko&#8217;s geo redundant hosting at the mo :)</div>
<div class="line">[Wednesday 16 February 2011] [06:09:08] &lt;pieterh&gt;     oh... I like it</div>
<div class="line">[Wednesday 16 February 2011] [06:10:25] &lt;ianbarber&gt;   i can point them at 74.86.234.146 if thats sensible - don&#8217;t know if there are any weird wikidot issues or similar</div>
<div class="line">[Wednesday 16 February 2011] [06:10:27] &lt;pieterh&gt;     if you point www.zero.mq to www.wikidot.com, then I&#8217;ll add it to the custom domains on the website</div>
<div class="line">[Wednesday 16 February 2011] [06:10:32] &lt;ianbarber&gt;   cool</div>
<div class="line">[Wednesday 16 February 2011] [06:10:33] &lt;ianbarber&gt;   will do</div>
<div class="line">[Wednesday 16 February 2011] [06:10:57] &lt;pieterh&gt;     wow, we have a sneaky short domain name, so 2011...</div>
<div class="line">[Wednesday 16 February 2011] [06:11:40] &lt;pieterh&gt;     afair you can&#8217;t point zero.mq itself to a DNS name, you need to use the IP address there</div>
<div class="line">[Wednesday 16 February 2011] [06:11:52] &lt;mikko&gt;       you can</div>
<div class="line">[Wednesday 16 February 2011] [06:11:53] &lt;mikko&gt;       CNAME</div>
<div class="line">[Wednesday 16 February 2011] [06:11:57] &lt;ianbarber&gt;   should be able to cname it</div>
<div class="line">[Wednesday 16 February 2011] [06:11:58] &lt;ianbarber&gt;   yeah</div>
<div class="line">[Wednesday 16 February 2011] [06:12:27] &lt;pieterh&gt;     maybe I&#8217;m confusing with wildcards, I usually point <a href="#id27"><span class="problematic" id="id28">*</span></a>.zeromq.org etc. to wikidot</div>
<div class="line">[Wednesday 16 February 2011] [06:13:08] &lt;pieterh&gt;     cname the heck out of it, ianbarber, I&#8217;ll add the custom domain entries in an hour or so</div>
<div class="line">[Wednesday 16 February 2011] [06:14:12] &lt;ianbarber&gt;   cool :) I&#8217;ve pointed zero.mq and www.zero.mq, so we&#8217;ll see then :)</div>
<div class="line">[Wednesday 16 February 2011] [06:15:15] &lt;pieterh&gt;     would it be worth doing something sneaky like...</div>
<div class="line">[Wednesday 16 February 2011] [06:15:31] &lt;pieterh&gt;     zero.mq -&gt; redirects to www.zeromq.org/community... ?</div>
<div class="line">[Wednesday 16 February 2011] [06:16:03] &lt;pieterh&gt;     I can make that work</div>
<div class="line">[Wednesday 16 February 2011] [06:16:54] &lt;pieterh&gt;     ianbarber: DNS seems to have propagated already, that was fast</div>
<div class="line">[Wednesday 16 February 2011] [06:17:07] &lt;pieterh&gt;     presumably not cached anywhere</div>
<div class="line">[Wednesday 16 February 2011] [06:17:33] &lt;ianbarber&gt;   yeah, www wasn&#8217;t set up before</div>
<div class="line">[Wednesday 16 February 2011] [06:17:45] &lt;ianbarber&gt;   redirect to community sounds like an idea, if that&#8217;s doable on wikidot</div>
<div class="line">[Wednesday 16 February 2011] [06:18:12] &lt;pieterh&gt;     np, give me 5 minutes...</div>
<div class="line">[Wednesday 16 February 2011] [06:20:03] &lt;enleth&gt;      mikko: hey, just wanted to say thanks for the PHP bindings for ZMQ, TC and TT - good job!</div>
<div class="line">[Wednesday 16 February 2011] [06:21:40] &lt;enleth&gt;      It was pretty amusing when I opened the github page for ZMQ bindings a moment ago, saw your username and though &#8220;well, I know this guy - what else I might be using that he did?&#8221;</div>
<div class="line">[Wednesday 16 February 2011] [06:21:55] &lt;pieterh&gt;     ianbarber: ok, done, give it a whirl... :-)</div>
<div class="line">[Wednesday 16 February 2011] [06:22:06] &lt;mikko&gt;       enleth: my pleasure</div>
<div class="line">[Wednesday 16 February 2011] [06:25:13] &lt;ianbarber&gt;   pieterh: i seem to be getting a password page. that&#8217;s odd</div>
<div class="line">[Wednesday 16 February 2011] [06:25:32] &lt;pieterh&gt;     ianbarber: ah, my bad, it&#8217;s still a private site, will fix immediately</div>
<div class="line">[Wednesday 16 February 2011] [06:25:47] &lt;ianbarber&gt;   ah, cool</div>
<div class="line">[Wednesday 16 February 2011] [06:26:03] &lt;pieterh&gt;     ianbarber: try again now?</div>
<div class="line">[Wednesday 16 February 2011] [06:26:12] &lt;ianbarber&gt;   yep, that&#8217;s looking good</div>
<div class="line">[Wednesday 16 February 2011] [06:26:17] &lt;ianbarber&gt;   very nice!</div>
<div class="line">[Wednesday 16 February 2011] [06:26:57] &lt;pieterh&gt;     it&#8217;s very cool</div>
<div class="line">[Wednesday 16 February 2011] [09:30:33] &lt;ianbarber&gt;   pieterh: was thinking, I&#8217;ve noticed that there are a lot of questions on the mailing lists that are solved in broadly the same way, even from people who have read the guide (myself included). I was wondering whether there is any value in some sort of 0MQ pattern library.</div>
<div class="line">[Wednesday 16 February 2011] [09:30:50] &lt;ianbarber&gt;   sort of like <a class="reference external" href="http://developer.yahoo.com/ypatterns/">http://developer.yahoo.com/ypatterns/</a> but with messaging patterns at all kinds of scales</div>
<div class="line">[Wednesday 16 February 2011] [09:31:56] &lt;ianbarber&gt;   i like how the generic pattern is described and an example given in each one of those (<a class="reference external" href="http://developer.yahoo.com/ypatterns/navigation/accordion.html">http://developer.yahoo.com/ypatterns/navigation/accordion.html</a>)</div>
<div class="line">[Wednesday 16 February 2011] [09:32:37] &lt;ianbarber&gt;   but still pretty simple, 1 page</div>
<div class="line">[Wednesday 16 February 2011] [09:51:55] &lt;mikko&gt;       cremes: you can run make check</div>
<div class="line">[Wednesday 16 February 2011] [09:52:07] &lt;mikko&gt;       (dont wanna confuse the thread as it has moved on from there)</div>
<div class="line">[Wednesday 16 February 2011] [09:54:40] &lt;cremes&gt;      mikko: here are the results:  <a class="reference external" href="https://gist.github.com/829493">https://gist.github.com/829493</a></div>
<div class="line">[Wednesday 16 February 2011] [09:54:43] &lt;cremes&gt;      failure...</div>
<div class="line">[Wednesday 16 February 2011] [09:57:00] &lt;mikko&gt;       No space left on device</div>
<div class="line">[Wednesday 16 February 2011] [09:58:22] &lt;cremes&gt;      how did i not see that?.... bleary eyed after 30 hours of debugging...</div>
<div class="line">[Wednesday 16 February 2011] [09:58:39] &lt;mikko&gt;       also, the tests wont output anything but they should assert on failure</div>
<div class="line">[Wednesday 16 February 2011] [09:58:47] &lt;mikko&gt;       return code for success is 0</div>
<div class="line">[Wednesday 16 February 2011] [09:59:24] &lt;cremes&gt;      oh wait, that out of space condition happened overnight as i was testing something</div>
<div class="line">[Wednesday 16 February 2011] [09:59:29] &lt;cremes&gt;      hold on a sec</div>
<div class="line">[Wednesday 16 February 2011] [10:00:51] &lt;cremes&gt;      mikko: reload the gist; it now shows all as passing</div>
<div class="line">[Wednesday 16 February 2011] [10:01:10] &lt;cremes&gt;      my problem with running the tests was i didn&#8217;t know the right make target</div>
<div class="line">[Wednesday 16 February 2011] [10:01:25] &lt;mikko&gt;       make check is autotools default test target</div>
<div class="line">[Wednesday 16 February 2011] [10:01:29] &lt;cremes&gt;      i tried &#8216;make test&#8217; and &#8216;make all&#8217; but the former didn&#8217;t exist and the latter didn&#8217;t seem to run them</div>
<div class="line">[Wednesday 16 February 2011] [10:01:35] &lt;cremes&gt;      didn&#8217;t know that</div>
<div class="line">[Wednesday 16 February 2011] [10:02:03] &lt;mikko&gt;       make test seems to be widely used as well</div>
<div class="line">[Wednesday 16 February 2011] [10:02:04] &lt;cremes&gt;      looks like all is well; chalk this up to user error</div>
<div class="line">[Wednesday 16 February 2011] [10:02:25] &lt;cremes&gt;      yeah, maybe adding it as an additional target would be a nice convenience</div>
<div class="line">[Wednesday 16 February 2011] [10:02:43] &lt;mikko&gt;       i&#8217;ll add that on todo</div>
<div class="line">[Wednesday 16 February 2011] [10:09:41] &lt;<a href="#id197"><span class="problematic" id="id198">pieterh_</span></a>&gt;    ianbarber, was eating lunch... back now</div>
<div class="line">[Wednesday 16 February 2011] [10:10:17] &lt;<a href="#id199"><span class="problematic" id="id200">pieterh_</span></a>&gt;    imo there would be value in a pattern library but I&#8217;ll use Sustrik&#8217;s Law here</div>
<div class="line">[Wednesday 16 February 2011] [10:10:57] &lt;<a href="#id201"><span class="problematic" id="id202">pieterh_</span></a>&gt;    find the person to collect and maintain the patterns, and the problem is solved :-)</div>
<div class="line">[Wednesday 16 February 2011] [10:12:42] &lt;mikko&gt;       <a class="reference external" href="http://build.valokuva.org/job/test-gcov/5/cobertura/">http://build.valokuva.org/job/test-gcov/5/cobertura/</a>?</div>
<div class="line">[Wednesday 16 February 2011] [10:12:48] &lt;mikko&gt;       zfl code coverage</div>
<div class="line">[Wednesday 16 February 2011] [10:13:22] &lt;ianbarber&gt;   <a href="#id203"><span class="problematic" id="id204">pieterh_</span></a>: fair point, i do appreciate sustrik&#8217;s law :)</div>
<div class="line">[Wednesday 16 February 2011] [10:13:33] &lt;mikko&gt;       hmm source code missing</div>
<div class="line">[Wednesday 16 February 2011] [10:14:48] &lt;<a href="#id205"><span class="problematic" id="id206">pieterh_</span></a>&gt;    ianbarber, you can also apply Pieter&#8217;s Response to Calls to Action</div>
<div class="line">[Wednesday 16 February 2011] [10:15:01] &lt;<a href="#id207"><span class="problematic" id="id208">pieterh_</span></a>&gt;    &#8220;Excellent idea, Ian, I&#8217;m curious to see how you do it&#8221;</div>
<div class="line">[Wednesday 16 February 2011] [10:15:31] &lt;<a href="#id209"><span class="problematic" id="id210">pieterh_</span></a>&gt;    Known in ruder groups as nypa :-)</div>
<div class="line">[Wednesday 16 February 2011] [10:16:46] &lt;<a href="#id211"><span class="problematic" id="id212">pieterh_</span></a>&gt;    Actually, I do have a more positive idea</div>
<div class="line">[Wednesday 16 February 2011] [10:17:33] &lt;<a href="#id213"><span class="problematic" id="id214">pieterh_</span></a>&gt;    When you see a question solved in a way you think is reusable, point me to it, and I&#8217;ll cover it in the Guide at some stage</div>
<div class="line">[Wednesday 16 February 2011] [10:17:47] &lt;<a href="#id215"><span class="problematic" id="id216">pieterh_</span></a>&gt;    there are a lot of chapters waiting to be written</div>
<div class="line">[Wednesday 16 February 2011] [10:19:02] &lt;ianbarber&gt;   yeah, i think that&#8217;s good. the guide really is the basis for shared understanding about it</div>
<div class="line">[Wednesday 16 February 2011] [10:19:13] &lt;mikko&gt;       ah</div>
<div class="line">[Wednesday 16 February 2011] [10:19:16] &lt;mikko&gt;       finally it works</div>
<div class="line">[Wednesday 16 February 2011] [10:19:17] &lt;mikko&gt;       <a class="reference external" href="https://build.valokuva.org/job/test-gcov/7/cobertura/_default_/zfl_rpcd_c/">https://build.valokuva.org/job/test-gcov/7/cobertura/_default_/zfl_rpcd_c/</a></div>
<div class="line">[Wednesday 16 February 2011] [10:19:35] &lt;ianbarber&gt;   i&#8217;m happy to do some patterns (at some point!) just wanted to check whether it fitted in with the direction you&#8217;re taking the guide</div>
<div class="line">[Wednesday 16 February 2011] [10:25:38] &lt;<a href="#id217"><span class="problematic" id="id218">pieterh_</span></a>&gt;    mikko: sweet!</div>
<div class="line">[Wednesday 16 February 2011] [10:25:59] &lt;<a href="#id219"><span class="problematic" id="id220">pieterh_</span></a>&gt;    ianbarber, I guess the Guide aims to be the bible, eventually</div>
<div class="line">[Wednesday 16 February 2011] [10:26:02] &lt;<a href="#id221"><span class="problematic" id="id222">pieterh_</span></a>&gt;    modest aims</div>
<div class="line">[Wednesday 16 February 2011] [10:27:04] &lt;<a href="#id223"><span class="problematic" id="id224">pieterh_</span></a>&gt;    we can (and by &#8216;we&#8217; I really mean &#8216;you&#8217;) start by collecting text on a wiki page</div>
<div class="line">[Wednesday 16 February 2011] [10:27:19] &lt;<a href="#id225"><span class="problematic" id="id226">pieterh_</span></a>&gt;    that is trivial, shareable, reusable</div>
<div class="line">[Wednesday 16 February 2011] [10:27:42] &lt;<a href="#id227"><span class="problematic" id="id228">pieterh_</span></a>&gt;    join the zero.mq (great name) wiki if you&#8217;re not already on it, start a docs:patterns page...</div>
<div class="line">[Wednesday 16 February 2011] [10:27:47] &lt;ianbarber&gt;   yeah. i think the tricky thing with the guide is balancing it for new users, and for experienced ones</div>
<div class="line">[Wednesday 16 February 2011] [10:28:06] &lt;ianbarber&gt;   yep, i&#8217;m on it, will do</div>
<div class="line">[Wednesday 16 February 2011] [10:28:07] &lt;<a href="#id229"><span class="problematic" id="id230">pieterh_</span></a>&gt;    no problem, really... start with simple stuff, get more advanced as you go along</div>
<div class="line">[Wednesday 16 February 2011] [10:28:30] &lt;<a href="#id231"><span class="problematic" id="id232">pieterh_</span></a>&gt;    patterns would be like a cookbook, stand alone section, with some good indexing</div>
<div class="line">[Wednesday 16 February 2011] [10:28:33] &lt;ianbarber&gt;   yeah</div>
<div class="line">[Wednesday 16 February 2011] [10:28:55] &lt;ianbarber&gt;   that&#8217;s pretty much the idea, just to have a concise example of different interaction models really</div>
<div class="line">[Wednesday 16 February 2011] [10:29:08] &lt;<a href="#id233"><span class="problematic" id="id234">pieterh_</span></a>&gt;    even copy/paste of solutions from the email list is a good start</div>
<div class="line">[Wednesday 16 February 2011] [10:29:22] &lt;<a href="#id235"><span class="problematic" id="id236">pieterh_</span></a>&gt;    don&#8217;t worry about producing prose, that&#8217;s my speciality</div>
<div class="line">[Wednesday 16 February 2011] [10:42:44] &lt;mikko&gt;       hi Steve-o</div>
<div class="line">[Wednesday 16 February 2011] [10:42:55] &lt;Steve-o&gt;     hi mikko</div>
<div class="line">[Wednesday 16 February 2011] [10:43:59] &lt;Steve-o&gt;     working on new house this week, a foreclosure so many minor issues :/</div>
<div class="line">[Wednesday 16 February 2011] [10:44:16] &lt;Steve-o&gt;     back in HK next week and back to work</div>
<div class="line">[Wednesday 16 February 2011] [10:44:36] &lt;mikko&gt;       is your house in the states?</div>
<div class="line">[Wednesday 16 February 2011] [10:44:47] &lt;Steve-o&gt;     upstate NY</div>
<div class="line">[Wednesday 16 February 2011] [10:45:11] &lt;mikko&gt;       are you moving there?</div>
<div class="line">[Wednesday 16 February 2011] [10:45:24] &lt;Steve-o&gt;     near Martha Stewart is about the only notable point</div>
<div class="line">[Wednesday 16 February 2011] [10:46:18] &lt;Steve-o&gt;     eventually moving there, house prices very cheap so good time to buy</div>
<div class="line">[Wednesday 16 February 2011] [10:46:47] &lt;Steve-o&gt;     I have another year for my greencard it looks</div>
<div class="line">[Wednesday 16 February 2011] [10:48:40] &lt;Steve-o&gt;     so what is the status on autoconf in zeromq, anymore changes required?</div>
<div class="line">[Wednesday 16 February 2011] [10:49:52] &lt;mikko&gt;       i think we should get 2.1.0 out before refactoring the openpgm part</div>
<div class="line">[Wednesday 16 February 2011] [10:49:58] &lt;mikko&gt;       it seems to be working well with openpgm trunk</div>
<div class="line">[Wednesday 16 February 2011] [10:50:09] &lt;mikko&gt;       some open issues to solve but in general good</div>
<div class="line">[Wednesday 16 February 2011] [10:50:33] &lt;mikko&gt;       one of them is how to link openpgm if zeromq invokes openpgm built?</div>
<div class="line">[Wednesday 16 February 2011] [10:50:35] &lt;mikko&gt;       build*</div>
<div class="line">[Wednesday 16 February 2011] [10:50:51] &lt;mikko&gt;       install openpgm.so and use the shared lib?</div>
<div class="line">[Wednesday 16 February 2011] [10:51:04] &lt;mikko&gt;       use the object files directly?</div>
<div class="line">[Wednesday 16 February 2011] [10:51:05] &lt;mikko&gt;       etc</div>
<div class="line">[Wednesday 16 February 2011] [10:51:33] &lt;Steve-o&gt;     good question, distros would like shared libs,</div>
<div class="line">[Wednesday 16 February 2011] [10:51:43] &lt;mikko&gt;       linking libpgm.a into libzmq.so works on linux (assuming libpgm.a is position independent code) but not portable</div>
<div class="line">[Wednesday 16 February 2011] [10:52:16] &lt;mikko&gt;       yes, my only fear is the following scenario:</div>
<div class="line">[Wednesday 16 February 2011] [10:52:17] &lt;Steve-o&gt;     which is why I don&#8217;t have a dll on Windows</div>
<div class="line">[Wednesday 16 February 2011] [10:52:53] &lt;mikko&gt;       user has libpgm installed, now installs zeromq with openpgm support, zeromq invokes openpgm build and overwrites the existing installation</div>
<div class="line">[Wednesday 16 February 2011] [10:54:34] &lt;Steve-o&gt;     well a common solution I have seen to that is to install the dependent library in a sub-directory of the product build instead of the OS preferred location</div>
<div class="line">[Wednesday 16 February 2011] [10:55:31] &lt;mikko&gt;       but distros dont like rpath</div>
<div class="line">[Wednesday 16 February 2011] [10:55:38] &lt;Steve-o&gt;     For convenience prefer static libraries but allow distributions to use shared libraries.</div>
<div class="line">[Wednesday 16 February 2011] [10:55:58] &lt;Steve-o&gt;     so out of the tarball build libpgm.a but allow configure options for libpgm.so</div>
<div class="line">[Wednesday 16 February 2011] [10:56:20] &lt;mikko&gt;       but how to use the libpgm.a ?</div>
<div class="line">[Wednesday 16 February 2011] [10:56:35] &lt;mikko&gt;       .a inside .so is not really portable</div>
<div class="line">[Wednesday 16 February 2011] [10:56:55] &lt;Steve-o&gt;     really?  where isn&#8217;t it valid?</div>
<div class="line">[Wednesday 16 February 2011] [10:57:11] &lt;mikko&gt;       i can check, i did a lot of googling on this</div>
<div class="line">[Wednesday 16 February 2011] [11:01:24] &lt;mikko&gt;       hp-ux seems to be one</div>
<div class="line">[Wednesday 16 February 2011] [11:01:31] &lt;mikko&gt;       is that even supported by openpgm?</div>
<div class="line">[Wednesday 16 February 2011] [11:01:55] &lt;Steve-o&gt;     not yet</div>
<div class="line">[Wednesday 16 February 2011] [11:02:03] &lt;mikko&gt;       Libtool convenience library</div>
<div class="line">[Wednesday 16 February 2011] [11:02:07] &lt;mikko&gt;       sounds like a solution</div>
<div class="line">[Wednesday 16 February 2011] [11:02:09] &lt;mikko&gt;       <a class="reference external" href="http://sourceware.org/autobook/autobook/autobook_92.html">http://sourceware.org/autobook/autobook/autobook_92.html</a></div>
<div class="line">[Wednesday 16 February 2011] [11:02:24] &lt;mikko&gt;       groups together a set of object files</div>
<div class="line">[Wednesday 16 February 2011] [11:02:30] &lt;Steve-o&gt;     that&#8217;s what zeromq is using now</div>
<div class="line">[Wednesday 16 February 2011] [11:03:06] &lt;mikko&gt;       but on different side of the fence</div>
<div class="line">[Wednesday 16 February 2011] [11:04:09] &lt;Steve-o&gt;     let me read up on HPUX, v10 was fine as I remember they broke various things with 11</div>
<div class="line">[Wednesday 16 February 2011] [11:04:35] &lt;mikko&gt;       Steve-o: how does bundling convenience lib on openpgm side sound like?</div>
<div class="line">[Wednesday 16 February 2011] [11:04:42] &lt;mikko&gt;       and then zeromq links that</div>
<div class="line">[Wednesday 16 February 2011] [11:04:56] &lt;mikko&gt;       i could at least investigate this as it seems like a portable option</div>
<div class="line">[Wednesday 16 February 2011] [11:05:46] &lt;Steve-o&gt;     ok, if you can provide the code, I&#8217;m not sure how this is supposed to work with two different projects</div>
<div class="line">[Wednesday 16 February 2011] [11:06:10] &lt;mikko&gt;       the ultimate goal i guess is to have both as shared libraries provided by distros</div>
<div class="line">[Wednesday 16 February 2011] [11:06:19] &lt;mikko&gt;       but in the meanwhile convenience lib sounds ok</div>
<div class="line">[Wednesday 16 February 2011] [11:06:26] &lt;mikko&gt;       i&#8217;ll put this on my ever growing todo list</div>
<div class="line">[Wednesday 16 February 2011] [11:07:04] &lt;mikko&gt;       at least i got ZFL code coverage working today</div>
<div class="line">[Wednesday 16 February 2011] [11:08:06] &lt;Steve-o&gt;     using gcov?</div>
<div class="line">[Wednesday 16 February 2011] [11:08:55] &lt;mikko&gt;       yes</div>
<div class="line">[Wednesday 16 February 2011] [11:09:25] &lt;mikko&gt;       <a class="reference external" href="http://build.valokuva.org/job/test-gcov/7/cobertura/_default_/">http://build.valokuva.org/job/test-gcov/7/cobertura/_default_/</a></div>
<div class="line">[Wednesday 16 February 2011] [11:12:40] &lt;Steve-o&gt;     nice, it&#8217;s tedious getting those percentages higher though</div>
<div class="line">[Wednesday 16 February 2011] [11:13:50] &lt;mikko&gt;       true. you would almost need to preload a malloc implementation that fails randomly</div>
<div class="line">[Wednesday 16 February 2011] [11:13:54] &lt;mikko&gt;       to test all asserts</div>
<div class="line">[Wednesday 16 February 2011] [11:14:04] &lt;mikko&gt;       and even then it would be very random</div>
<div class="line">[Wednesday 16 February 2011] [11:15:00] &lt;mikko&gt;       might add same thing for zeromq later as well</div>
<div class="line">[Wednesday 16 February 2011] [11:17:08] &lt;cremes&gt;      pieterh: ping... where is &#8220;zhelpers.h&#8221;? i can&#8217;t compile your mailbugz.c test without it</div>
<div class="line">[Wednesday 16 February 2011] [11:18:04] &lt;<a href="#id237"><span class="problematic" id="id238">pieterh_</span></a>&gt;    cremes: sorry!</div>
<div class="line">[Wednesday 16 February 2011] [11:18:11] &lt;<a href="#id239"><span class="problematic" id="id240">pieterh_</span></a>&gt;    adding it now</div>
<div class="line">[Wednesday 16 February 2011] [11:18:12] &lt;sustrik&gt;     cremes, just replace it with zmq.h</div>
<div class="line">[Wednesday 16 February 2011] [11:18:21] &lt;<a href="#id241"><span class="problematic" id="id242">pieterh_</span></a>&gt;    sustrik: nope, that and other stuff</div>
<div class="line">[Wednesday 16 February 2011] [11:18:27] &lt;sustrik&gt;     there&#8217;s nothing used from zhelpers.h in the code</div>
<div class="line">[Wednesday 16 February 2011] [11:18:39] &lt;sustrik&gt;     i&#8217;ve just compiled it</div>
<div class="line">[Wednesday 16 February 2011] [11:18:50] &lt;sustrik&gt;     aha</div>
<div class="line">[Wednesday 16 February 2011] [11:18:59] &lt;sustrik&gt;     replace the line with:</div>
<div class="line">[Wednesday 16 February 2011] [11:18:59] &lt;sustrik&gt;     #include &lt;zmq.h&gt;</div>
<div class="line">[Wednesday 16 February 2011] [11:19:00] &lt;sustrik&gt;     #include &lt;stdio.h&gt;</div>
<div class="line">[Wednesday 16 February 2011] [11:19:00] &lt;sustrik&gt;     #include &lt;string.h&gt;</div>
<div class="line">[Wednesday 16 February 2011] [11:19:03] &lt;sustrik&gt;     that works</div>
<div class="line">[Wednesday 16 February 2011] [11:19:16] &lt;<a href="#id243"><span class="problematic" id="id244">pieterh_</span></a>&gt;    yes, that works</div>
<div class="line">[Wednesday 16 February 2011] [11:21:30] &lt;Steve-o&gt;     mikko: ok so I already have the libtool convenience library libpgm.la, libtool is giving me the shared and static libraries for free</div>
<div class="line">[Wednesday 16 February 2011] [11:22:09] &lt;mikko&gt;       Steve-o: i know, but if you link against the .la from zeromq it gives a a warning &#8220;Warning: libpgm.la won&#8217;t be deployed&#8221;</div>
<div class="line">[Wednesday 16 February 2011] [11:22:14] &lt;mikko&gt;       not sure if that can be ignored</div>
<div class="line">[Wednesday 16 February 2011] [11:22:29] &lt;mikko&gt;       maybe it can</div>
<div class="line">[Wednesday 16 February 2011] [11:22:35] &lt;Steve-o&gt;     is that because of a <a href="#id245"><span class="problematic" id="id246">noinst_</span></a> line?</div>
<div class="line">[Wednesday 16 February 2011] [11:23:24] &lt;mikko&gt;       i got a local branch here</div>
<div class="line">[Wednesday 16 February 2011] [11:23:43] &lt;<a href="#id247"><span class="problematic" id="id248">pieterh_</span></a>&gt;    sustrik, in the pubsub pattern it is IMO a design flaw that zmq_connect is asynchronous</div>
<div class="line">[Wednesday 16 February 2011] [11:23:51] &lt;mikko&gt;       Steve-o: <a class="reference external" href="https://gist.github.com/3f14f1a3f816df3016c7">https://gist.github.com/3f14f1a3f816df3016c7</a></div>
<div class="line">[Wednesday 16 February 2011] [11:23:59] &lt;mikko&gt;       these are some of the changes related to zeromq</div>
<div class="line">[Wednesday 16 February 2011] [11:24:04] &lt;<a href="#id249"><span class="problematic" id="id250">pieterh_</span></a>&gt;    that is, on a sub socket</div>
<div class="line">[Wednesday 16 February 2011] [11:25:08] &lt;mikko&gt;       Steve-o: i tested that with ./configure &#8211;without-documentation &#8211;with-pgm=/tmp/to/pgm-trunk</div>
<div class="line">[Wednesday 16 February 2011] [11:28:23] &lt;Steve-o&gt;     mikko: I can&#8217;t find anything on that error message in google</div>
<div class="line">[Wednesday 16 February 2011] [11:29:19] &lt;sustrik&gt;     <a href="#id251"><span class="problematic" id="id252">pieterh_</span></a>: why so?</div>
<div class="line">[Wednesday 16 February 2011] [11:32:59] &lt;zedas&gt;       sustrik: yep that&#8217;s linux. why?</div>
<div class="line">[Wednesday 16 February 2011] [11:33:22] &lt;sustrik&gt;     there are 2 implementations of zmq_poll</div>
<div class="line">[Wednesday 16 February 2011] [11:33:38] &lt;sustrik&gt;     i was just checking which one to have a look at</div>
<div class="line">[Wednesday 16 February 2011] [11:34:25] &lt;sustrik&gt;     anyway, what&#8217;s the problem you were referring to?</div>
<div class="line">[Wednesday 16 February 2011] [11:35:18] &lt;sustrik&gt;     ah, the EAGAINs in strace</div>
<div class="line">[Wednesday 16 February 2011] [11:35:37] &lt;Steve-o&gt;     mikko: maybe I need to explicitly add a noinst_LTLIBRARIES instead of lib_LTLIBRARIES</div>
<div class="line">[Wednesday 16 February 2011] [11:35:38] &lt;sustrik&gt;     i&#8217;ve missed the link, sorry</div>
<div class="line">[Wednesday 16 February 2011] [11:36:04] &lt;cremes&gt;      <a href="#id253"><span class="problematic" id="id254">pieterh_</span></a>: i don&#8217;t compile a lot of C programs; what&#8217;s the gcc line to get the example to compile &amp; link?</div>
<div class="line">[Wednesday 16 February 2011] [11:37:29] &lt;cremes&gt;      nm, got it</div>
<div class="line">[Wednesday 16 February 2011] [11:38:09] &lt;mikko&gt;       Steve-o: gimme a sec</div>
<div class="line">[Wednesday 16 February 2011] [11:38:16] &lt;mikko&gt;       getting the exact error message out</div>
<div class="line">[Wednesday 16 February 2011] [11:40:53] &lt;<a href="#id255"><span class="problematic" id="id256">pieterh_</span></a>&gt;    cremes: sorry, my irc client&#8217;s not alerting me for some reason</div>
<div class="line">[Wednesday 16 February 2011] [11:41:20] &lt;cremes&gt;      no worries; i compiled the program and ran it successfully</div>
<div class="line">[Wednesday 16 February 2011] [11:41:23] &lt;cremes&gt;      no failures</div>
<div class="line">[Wednesday 16 February 2011] [11:41:37] &lt;cremes&gt;      so my hypothesis must be wrong as to the cause of the mailbox assertion</div>
<div class="line">[Wednesday 16 February 2011] [11:41:49] &lt;<a href="#id257"><span class="problematic" id="id258">pieterh_</span></a>&gt;    at least it&#8217;s not that simple</div>
<div class="line">[Wednesday 16 February 2011] [11:42:22] &lt;cremes&gt;      right</div>
<div class="line">[Wednesday 16 February 2011] [11:42:24] &lt;<a href="#id259"><span class="problematic" id="id260">pieterh_</span></a>&gt;    assuming I got the case right</div>
<div class="line">[Wednesday 16 February 2011] [11:42:32] &lt;<a href="#id261"><span class="problematic" id="id262">pieterh_</span></a>&gt;    5M writes, 5M reads...</div>
<div class="line">[Wednesday 16 February 2011] [11:42:39] &lt;cremes&gt;      you got it right as i explained it</div>
<div class="line">[Wednesday 16 February 2011] [11:42:46] &lt;<a href="#id263"><span class="problematic" id="id264">pieterh_</span></a>&gt;    sustrik: sorry also, I&#8217;m not getting beeps...</div>
<div class="line">[Wednesday 16 February 2011] [11:42:56] &lt;<a href="#id265"><span class="problematic" id="id266">pieterh_</span></a>&gt;    pubsub fails, for every new user, in the same way</div>
<div class="line">[Wednesday 16 February 2011] [11:43:14] &lt;<a href="#id267"><span class="problematic" id="id268">pieterh_</span></a>&gt;    subscriber connects, then misses X milliseconds of messages</div>
<div class="line">[Wednesday 16 February 2011] [11:43:25] &lt;sustrik&gt;     ack</div>
<div class="line">[Wednesday 16 February 2011] [11:43:36] &lt;<a href="#id269"><span class="problematic" id="id270">pieterh_</span></a>&gt;    i&#8217;m not sure doing a synchronous connect would make any difference</div>
<div class="line">[Wednesday 16 February 2011] [11:43:49] &lt;sustrik&gt;     it probably won&#8217;t</div>
<div class="line">[Wednesday 16 February 2011] [11:43:49] &lt;cremes&gt;      <a href="#id271"><span class="problematic" id="id272">pieterh_</span></a>: is it possible to run this under gdb and have it drop into the debugger instead of asserting?</div>
<div class="line">[Wednesday 16 February 2011] [11:43:51] &lt;<a href="#id273"><span class="problematic" id="id274">pieterh_</span></a>&gt;    but there is definitely a problem when every user hits the same issue</div>
<div class="line">[Wednesday 16 February 2011] [11:44:02] &lt;cremes&gt;      if so, perhaps i could dump the contents of the mailbox?</div>
<div class="line">[Wednesday 16 February 2011] [11:44:24] &lt;<a href="#id275"><span class="problematic" id="id276">pieterh_</span></a>&gt;    cremes, afaik usual tactic is to get a core dump and then debug from there</div>
<div class="line">[Wednesday 16 February 2011] [11:44:31] &lt;<a href="#id277"><span class="problematic" id="id278">pieterh_</span></a>&gt;    i&#8217;m no gdb expert</div>
<div class="line">[Wednesday 16 February 2011] [11:44:37]        * <a href="#id279"><span class="problematic" id="id280">pieterh_</span></a> likes printfs</div>
<div class="line">[Wednesday 16 February 2011] [11:44:39] &lt;cremes&gt;      ok, how can i force it to core?</div>
<div class="line">[Wednesday 16 February 2011] [11:44:47] &lt;sustrik&gt;     cremes: p</div>
<div class="line">[Wednesday 16 February 2011] [11:44:50] &lt;<a href="#id281"><span class="problematic" id="id282">pieterh_</span></a>&gt;    divide by zero?</div>
<div class="line">[Wednesday 16 February 2011] [11:45:14] &lt;sustrik&gt;     when you want to dump the content of variable x, type &#8220;p x&#8221;</div>
<div class="line">[Wednesday 16 February 2011] [11:45:17] &lt;<a href="#id283"><span class="problematic" id="id284">pieterh_</span></a>&gt;    assertion failure will produce a core I think</div>
<div class="line">[Wednesday 16 February 2011] [11:45:28] &lt;<a href="#id285"><span class="problematic" id="id286">pieterh_</span></a>&gt;    you need to enable core dumps for your process</div>
<div class="line">[Wednesday 16 February 2011] [11:45:49] &lt;<a href="#id287"><span class="problematic" id="id288">pieterh_</span></a>&gt;    ulimit unlimited</div>
<div class="line">[Wednesday 16 February 2011] [11:45:50] &lt;cremes&gt;      yeah, right now i&#8217;m set for a core size of 0; i can change that</div>
<div class="line">[Wednesday 16 February 2011] [11:46:05] &lt;cremes&gt;      are you sure the assertion causes a core?</div>
<div class="line">[Wednesday 16 February 2011] [11:46:11] &lt;sustrik&gt;     cremes: just start the executable under gdb</div>
<div class="line">[Wednesday 16 February 2011] [11:46:27] &lt;sustrik&gt;     it will stop and get you gdb prompt when assertion is hit</div>
<div class="line">[Wednesday 16 February 2011] [11:46:29] &lt;<a href="#id289"><span class="problematic" id="id290">pieterh_</span></a>&gt;    yeah, and make sure it&#8217;s compiled and linked for debugging</div>
<div class="line">[Wednesday 16 February 2011] [11:47:20] &lt;cremes&gt;      i did run it under gdb several times; the assertion would cause the ruby runtime to throw an exception and exit cleanly</div>
<div class="line">[Wednesday 16 February 2011] [11:47:31] &lt;cremes&gt;      so gdb never caught the issue</div>
<div class="line">[Wednesday 16 February 2011] [11:47:43] &lt;cremes&gt;      outside of gdb, it would assert</div>
<div class="line">[Wednesday 16 February 2011] [11:47:49] &lt;cremes&gt;      very frustrating</div>
<div class="line">[Wednesday 16 February 2011] [11:47:54] &lt;sustrik&gt;     :|</div>
<div class="line">[Wednesday 16 February 2011] [11:48:40] &lt;<a href="#id291"><span class="problematic" id="id292">pieterh_</span></a>&gt;    my brute force approach would be to add code to 0MQ that dumps the mailbox just before it asserts, under the same conditions</div>
<div class="line">[Wednesday 16 February 2011] [11:48:52] &lt;<a href="#id293"><span class="problematic" id="id294">pieterh_</span></a>&gt;    don&#8217;t waste time trying to get debuggers working unless you already know how</div>
<div class="line">[Wednesday 16 February 2011] [11:49:11] &lt;cremes&gt;      i like that suggestion; any suggestion on how to dump the mailbox?</div>
<div class="line">[Wednesday 16 February 2011] [11:49:29] &lt;sustrik&gt;     cremes: i would do a bit different thing</div>
<div class="line">[Wednesday 16 February 2011] [11:49:31] &lt;cremes&gt;      i.e. are there important components to capture or should i just dump it as a string?</div>
<div class="line">[Wednesday 16 February 2011] [11:49:40] &lt;cremes&gt;      sustrik: talk to me</div>
<div class="line">[Wednesday 16 February 2011] [11:49:47] &lt;sustrik&gt;     just print some text when mailbox_t::send() is invoked</div>
<div class="line">[Wednesday 16 February 2011] [11:50:07] &lt;sustrik&gt;     in you scenario the number of invocations should be pretty modest</div>
<div class="line">[Wednesday 16 February 2011] [11:50:33] &lt;sustrik&gt;     if it starts printing a lot of text, there&#8217;s definitely some problem there</div>
<div class="line">[Wednesday 16 February 2011] [11:50:45] &lt;cremes&gt;      sustrik: just any text like &#8220;mailbox.send!&#8221;</div>
<div class="line">[Wednesday 16 February 2011] [11:50:53] &lt;sustrik&gt;     yes</div>
<div class="line">[Wednesday 16 February 2011] [11:50:55] &lt;cremes&gt;      ok</div>
<div class="line">[Wednesday 16 February 2011] [11:51:14] &lt;cremes&gt;      so you don&#8217;t care about the contents of the mailbox</div>
<div class="line">[Wednesday 16 February 2011] [11:51:37] &lt;sustrik&gt;     not really</div>
<div class="line">[Wednesday 16 February 2011] [11:51:44] &lt;cremes&gt;      ok, i&#8217;ll try that now</div>
<div class="line">[Wednesday 16 February 2011] [11:51:52] &lt;sustrik&gt;     if we find out that there&#8217;s a lot of commands is written</div>
<div class="line">[Wednesday 16 February 2011] [11:52:04] &lt;sustrik&gt;     we&#8217;ll have a look at what kind of commands is that</div>
<div class="line">[Wednesday 16 February 2011] [12:10:53] &lt;<a href="#id295"><span class="problematic" id="id296">pieterh_</span></a>&gt;    mikko: I&#8217;m improving some of the coverage but it&#8217;s always going to miss on assertions, apparently</div>
<div class="line">[Wednesday 16 February 2011] [12:15:09] &lt;mikko&gt;       <a href="#id297"><span class="problematic" id="id298">pieterh_</span></a>: yes</div>
<div class="line">[Wednesday 16 February 2011] [12:15:13] &lt;mikko&gt;       i dont think it calculates those</div>
<div class="line">[Wednesday 16 February 2011] [12:15:21] &lt;<a href="#id299"><span class="problematic" id="id300">pieterh_</span></a>&gt;    hey, my beep works now! :-)</div>
<div class="line">[Wednesday 16 February 2011] [12:15:34] &lt;mikko&gt;       and 100% is not really a realistic or even desirable aim</div>
<div class="line">[Wednesday 16 February 2011] [12:15:41] &lt;mikko&gt;       Steve-o: i think i solved it</div>
<div class="line">[Wednesday 16 February 2011] [12:15:43] &lt;<a href="#id301"><span class="problematic" id="id302">pieterh_</span></a>&gt;    ok, I&#8217;ll improve some of the coverage but like Steve-o says, it gets messy</div>
<div class="line">[Wednesday 16 February 2011] [12:16:34] &lt;mikko&gt;       Steve-o: almost. now it compiles twice it seems</div>
<div class="line">[Wednesday 16 February 2011] [12:17:30] &lt;ianbarber&gt;   just to be doubly sure</div>
<div class="line">[Wednesday 16 February 2011] [12:18:16] &lt;ianbarber&gt;   compare the two, and if they&#8217;re different fail on a non-deterministic build process</div>
<div class="line">[Wednesday 16 February 2011] [12:25:35] &lt;cremes&gt;      sustrik: yes, there are a <em>lot</em> of commands sent</div>
<div class="line">[Wednesday 16 February 2011] [12:25:53] &lt;sustrik&gt;     ok</div>
<div class="line">[Wednesday 16 February 2011] [12:25:53] &lt;cremes&gt;      what&#8217;s the next step? dump the commands when the mailbox buffer is increased?</div>
<div class="line">[Wednesday 16 February 2011] [12:26:06] &lt;sustrik&gt;     can you print out cmd-&gt;type?</div>
<div class="line">[Wednesday 16 February 2011] [12:26:19] &lt;sustrik&gt;     that will show what kind of commands are being passed</div>
<div class="line">[Wednesday 16 February 2011] [12:26:30] &lt;cremes&gt;      sure; on every invocation or just when the buffer size is increased?</div>
<div class="line">[Wednesday 16 February 2011] [12:26:43] &lt;sustrik&gt;     on every invocation</div>
<div class="line">[Wednesday 16 February 2011] [12:26:46] &lt;cremes&gt;      ok</div>
<div class="line">[Wednesday 16 February 2011] [12:28:45] &lt;cremes&gt;      sustrik: i see it&#8217;s defined as an enum so i can use printf(&#8220;%d&#8221;, cmd-&gt;type), yes?</div>
<div class="line">[Wednesday 16 February 2011] [12:29:28] &lt;sustrik&gt;     printf(&#8220;%d&#8221;, (int) cmd-&gt;type)</div>
<div class="line">[Wednesday 16 February 2011] [12:29:30] &lt;sustrik&gt;     just in case</div>
<div class="line">[Wednesday 16 February 2011] [12:29:38] &lt;cremes&gt;      k</div>
<div class="line">[Wednesday 16 February 2011] [12:31:52] &lt;cremes&gt;      sustrik: mailbox.cpp:158:34: error: base operand of &#8216;-&gt;&#8217; has non-pointer type &#8216;const zmq::command_t&#8217;</div>
<div class="line">[Wednesday 16 February 2011] [12:32:02] &lt;cremes&gt;      ??</div>
<div class="line">[Wednesday 16 February 2011] [12:32:16] &lt;sustrik&gt;     it should be <a href="#id303"><span class="problematic" id="id304">cmd_</span></a>.type</div>
<div class="line">[Wednesday 16 February 2011] [12:32:17] &lt;sustrik&gt;     sorry</div>
<div class="line">[Wednesday 16 February 2011] [12:34:37] &lt;cremes&gt;      clean compile; running now</div>
<div class="line">[Wednesday 16 February 2011] [12:37:07] &lt;cremes&gt;      sustrik: here&#8217;s a sampling of what i see; the cmd is wrapped in TY(cmd) so i can pick it out of the log easily</div>
<div class="line">[Wednesday 16 February 2011] [12:37:08] &lt;cremes&gt;      <a class="reference external" href="https://gist.github.com/829782">https://gist.github.com/829782</a></div>
<div class="line">[Wednesday 16 February 2011] [12:39:51] &lt;sustrik&gt;     do you call connect or bind in that app?</div>
<div class="line">[Wednesday 16 February 2011] [12:40:40] &lt;cremes&gt;      i call both early on during setup, then i don&#8217;t need to call it again</div>
<div class="line">[Wednesday 16 February 2011] [12:41:01] &lt;sustrik&gt;     ah, both are in the same process</div>
<div class="line">[Wednesday 16 February 2011] [12:41:02] &lt;sustrik&gt;     i see</div>
<div class="line">[Wednesday 16 February 2011] [12:41:12] &lt;sustrik&gt;     what transport do you use?</div>
<div class="line">[Wednesday 16 February 2011] [12:41:18] &lt;sustrik&gt;     tcp? inproc? ipc?</div>
<div class="line">[Wednesday 16 February 2011] [12:41:29] &lt;cremes&gt;      tcp</div>
<div class="line">[Wednesday 16 February 2011] [12:42:27] &lt;sustrik&gt;     cremes: can you printf something in connect_sessio_t::detached() function?</div>
<div class="line">[Wednesday 16 February 2011] [12:42:35] &lt;cremes&gt;      yes</div>
<div class="line">[Wednesday 16 February 2011] [12:42:59] &lt;sustrik&gt;     (that wey we&#8217;ll see if there a lot of reconnecting happening)</div>
<div class="line">[Wednesday 16 February 2011] [12:47:35] &lt;cremes&gt;      sustrik: [<a class="reference external" href="mailto:cremes&#37;&#52;&#48;box1">cremes<span>&#64;</span>box1</a> servers]$ grep ^REC t.out | wc -l</div>
<div class="line">[Wednesday 16 February 2011] [12:47:35] &lt;cremes&gt;      921674</div>
<div class="line">[Wednesday 16 February 2011] [12:47:43] &lt;cremes&gt;      so yes, lots of reconnects</div>
<div class="line">[Wednesday 16 February 2011] [12:51:37] &lt;cremes&gt;      this is a threaded app writing to the same logfile so sequence is a bit suspect</div>
<div class="line">[Wednesday 16 February 2011] [12:52:01] &lt;cremes&gt;      however, it appears each REC is always followed by command type 1 or 3 (plug or attach) which kind of makes sense</div>
<div class="line">[Wednesday 16 February 2011] [12:56:32] &lt;sustrik&gt;     yep</div>
<div class="line">[Wednesday 16 February 2011] [12:56:43] &lt;sustrik&gt;     the question is: why does it reconnect at all?</div>
<div class="line">[Wednesday 16 February 2011] [12:57:08] &lt;sustrik&gt;     moreover, the default reconnect interval is 0.1 sec</div>
<div class="line">[Wednesday 16 February 2011] [12:57:14] &lt;cremes&gt;      agreed; all transport strings are of the form &#8216;<a class="reference external" href="tcp://127.0.0.1">tcp://127.0.0.1</a>:&lt;port&gt;&#8217;</div>
<div class="line">[Wednesday 16 February 2011] [12:57:33] &lt;sustrik&gt;     so to get 921675 would require couple of days</div>
<div class="line">[Wednesday 16 February 2011] [12:58:00] &lt;sustrik&gt;     you mean: &#8220;both&#8221; rather than &#8220;all&#8221;, right?</div>
<div class="line">[Wednesday 16 February 2011] [12:59:04] &lt;cremes&gt;      there is a PUB producer, a FORWARDER device, and multiple SUB consumers in this process</div>
<div class="line">[Wednesday 16 February 2011] [12:59:30] &lt;cremes&gt;      they all connect up in the beginning and should never close/reconnect for the life of the program</div>
<div class="line">[Wednesday 16 February 2011] [12:59:58] &lt;cremes&gt;      so each one has its own transport connection string; that&#8217;s what i meant by &#8216;all&#8217;</div>
<div class="line">[Wednesday 16 February 2011] [13:00:12] &lt;sustrik&gt;     i see</div>
<div class="line">[Wednesday 16 February 2011] [13:00:39] &lt;sustrik&gt;     how many SUBs?</div>
<div class="line">[Wednesday 16 February 2011] [13:01:59] &lt;cremes&gt;      let&#8217;s see...</div>
<div class="line">[Wednesday 16 February 2011] [13:02:18] &lt;sustrik&gt;     approximately...</div>
<div class="line">[Wednesday 16 February 2011] [13:02:35] &lt;sustrik&gt;     tens, hundreds, thousands?</div>
<div class="line">[Wednesday 16 February 2011] [13:02:35] &lt;cremes&gt;      5 in the clients and 1 in the FORWARDER, so about 6 (i might be forgetting one or two)</div>
<div class="line">[Wednesday 16 February 2011] [13:02:47] &lt;sustrik&gt;     ok</div>
<div class="line">[Wednesday 16 February 2011] [13:03:32] &lt;sustrik&gt;     do you close the FORWARDER before closing the SUBs?</div>
<div class="line">[Wednesday 16 February 2011] [13:04:47] &lt;cremes&gt;      they should all terminate at roughly the same time when i interrupt/kill the program</div>
<div class="line">[Wednesday 16 February 2011] [13:04:56] &lt;sustrik&gt;     ok</div>
<div class="line">[Wednesday 16 February 2011] [13:05:02] &lt;cremes&gt;      otherwise, the FORWARDER never exits</div>
<div class="line">[Wednesday 16 February 2011] [13:05:10] &lt;sustrik&gt;     does FORWARDER connect to SUBs or other way round?</div>
<div class="line">[Wednesday 16 February 2011] [13:05:32] &lt;cremes&gt;      FORWARDER binds while all clients connect</div>
<div class="line">[Wednesday 16 February 2011] [13:05:50] &lt;sustrik&gt;     what about PUB?</div>
<div class="line">[Wednesday 16 February 2011] [13:05:50] &lt;cremes&gt;      actually, the IN/OUT sockets on the FORWARDER always bind</div>
<div class="line">[Wednesday 16 February 2011] [13:06:00] &lt;cremes&gt;      the publisher connects too as a result</div>
<div class="line">[Wednesday 16 February 2011] [13:06:03] &lt;sustrik&gt;     ok</div>
<div class="line">[Wednesday 16 February 2011] [13:06:39] &lt;sustrik&gt;     hm, i see no reason then for reconnections to happen</div>
<div class="line">[Wednesday 16 February 2011] [13:06:57] &lt;sustrik&gt;     are you 100% that the connection strings match?</div>
<div class="line">[Wednesday 16 February 2011] [13:07:09] &lt;cremes&gt;      match in what way?</div>
<div class="line">[Wednesday 16 February 2011] [13:07:24] &lt;cremes&gt;      they are all tcp?</div>
<div class="line">[Wednesday 16 February 2011] [13:07:28] &lt;sustrik&gt;     are they the same on bind and connect side?</div>
<div class="line">[Wednesday 16 February 2011] [13:07:50] &lt;cremes&gt;      if they weren&#8217;t, the data wouldn&#8217;t flow through my app, yes?</div>
<div class="line">[Wednesday 16 February 2011] [13:08:00]        * cremes checks anyway...</div>
<div class="line">[Wednesday 16 February 2011] [13:08:11] &lt;sustrik&gt;     ah, the data flow through</div>
<div class="line">[Wednesday 16 February 2011] [13:08:13] &lt;sustrik&gt;     i see</div>
<div class="line">[Wednesday 16 February 2011] [13:08:19] &lt;sustrik&gt;     to all 5 subs?</div>
<div class="line">[Wednesday 16 February 2011] [13:09:02] &lt;cremes&gt;      yes, the main PUB broadcasts and the 5 subs each sub to everything</div>
<div class="line">[Wednesday 16 February 2011] [13:09:32] &lt;sustrik&gt;     and all of them actually get the data</div>
<div class="line">[Wednesday 16 February 2011] [13:09:35] &lt;cremes&gt;      if they weren&#8217;t getting the data, the app would lock (and produce something similar to EFSM in my code)</div>
<div class="line">[Wednesday 16 February 2011] [13:09:43] &lt;sustrik&gt;     ok, good</div>
<div class="line">[Wednesday 16 February 2011] [13:09:57] &lt;cremes&gt;      it&#8217;s kind of like an election algo</div>
<div class="line">[Wednesday 16 February 2011] [13:10:04] &lt;sustrik&gt;     to be frank, i have no idea what&#8217;s going on there</div>
<div class="line">[Wednesday 16 February 2011] [13:10:11] &lt;sustrik&gt;     if the reconnections happen</div>
<div class="line">[Wednesday 16 February 2011] [13:10:24] &lt;sustrik&gt;     one would expect that at least some messages would be lost</div>
<div class="line">[Wednesday 16 February 2011] [13:10:50] &lt;cremes&gt;      any idea how i can do 900k reconnects in a few minutes?</div>
<div class="line">[Wednesday 16 February 2011] [13:10:58] &lt;sustrik&gt;     no idea</div>
<div class="line">[Wednesday 16 February 2011] [13:11:07] &lt;cremes&gt;      &lt;sigh&gt;</div>
<div class="line">[Wednesday 16 February 2011] [13:11:12] &lt;sustrik&gt;     have you changed the default RECONNECT_IVL?</div>
<div class="line">[Wednesday 16 February 2011] [13:11:30] &lt;cremes&gt;      btw, i ran pieter&#8217;s mailbugz code with these debug prints in them and it barely puts out anything at all</div>
<div class="line">[Wednesday 16 February 2011] [13:11:41] &lt;sustrik&gt;     exactly</div>
<div class="line">[Wednesday 16 February 2011] [13:11:41] &lt;cremes&gt;      nope, no changes to RECONNECT_IVL</div>
<div class="line">[Wednesday 16 February 2011] [13:12:21] &lt;cremes&gt;      all sockets are allocated in their default state; the one exception is calling setsockopt on the SUBs to set their subscription string</div>
<div class="line">[Wednesday 16 February 2011] [13:12:27] &lt;cremes&gt;      and i always set my own IDENTITY</div>
<div class="line">[Wednesday 16 February 2011] [13:12:52] &lt;cremes&gt;      someone on the ML suggested a potential IDENTITY collision; could that be related?</div>
<div class="line">[Wednesday 16 February 2011] [13:13:03] &lt;sustrik&gt;     maybe</div>
<div class="line">[Wednesday 16 February 2011] [13:13:13] &lt;sustrik&gt;     do you have identity collisions there?</div>
<div class="line">[Wednesday 16 February 2011] [13:13:23] &lt;sustrik&gt;     like all 5 subs having the same identity?</div>
<div class="line">[Wednesday 16 February 2011] [13:13:57] &lt;cremes&gt;      i shouldn&#8217;t; the identity is always &lt;random id&gt;.&lt;sock type&gt;.&lt;server type&gt; where random id is 0 to 999_999_999</div>
<div class="line">[Wednesday 16 February 2011] [13:14:11] &lt;cremes&gt;      it&#8217;s <em>possible</em> there is a collision but <em>improbable</em></div>
<div class="line">[Wednesday 16 February 2011] [13:14:55] &lt;sustrik&gt;     try printing them out</div>
<div class="line">[Wednesday 16 February 2011] [13:15:40] &lt;cremes&gt;      i&#8217;m auditing that right now; give me 5m</div>
<div class="line">[Wednesday 16 February 2011] [13:22:47] &lt;<a href="#id305"><span class="problematic" id="id306">pieterh_</span></a>&gt;    cremes, are you sure you&#8217;re initializing your random number generator?</div>
<div class="line">[Wednesday 16 February 2011] [13:22:57] &lt;<a href="#id307"><span class="problematic" id="id308">pieterh_</span></a>&gt;    if not, every client will produce an identical &#8216;random&#8217; sequence</div>
<div class="line">[Wednesday 16 February 2011] [13:23:48] &lt;<a href="#id309"><span class="problematic" id="id310">pieterh_</span></a>&gt;    cremes: if you&#8217;re getting reconnects, presumably you&#8217;re also getting disconnects</div>
<div class="line">[Wednesday 16 February 2011] [13:23:57] &lt;<a href="#id311"><span class="problematic" id="id312">pieterh_</span></a>&gt;    and if you can find those, you can find what is causing them</div>
<div class="line">[Wednesday 16 February 2011] [13:24:13] &lt;<a href="#id313"><span class="problematic" id="id314">pieterh_</span></a>&gt;    sustrik: how many places does 0MQ forcefully disconnect a subscriber socket without assertion</div>
<div class="line">[Wednesday 16 February 2011] [13:24:23] &lt;<a href="#id315"><span class="problematic" id="id316">pieterh_</span></a>&gt;    do we have the sys: transport working?</div>
<div class="line">[Wednesday 16 February 2011] [13:24:57]        * <a href="#id317"><span class="problematic" id="id318">pieterh_</span></a> bets 1c that this is a subscriber identity issue, and 0MQ is disconnecting subscribers massively but the error is never reported</div>
<div class="line">[Wednesday 16 February 2011] [13:26:14] &lt;sustrik&gt;     <a href="#id319"><span class="problematic" id="id320">pieterh_</span></a>: every time the other side does something unexpected</div>
<div class="line">[Wednesday 16 February 2011] [13:26:21] &lt;sustrik&gt;     such as sending malformed frame</div>
<div class="line">[Wednesday 16 February 2011] [13:26:28] &lt;<a href="#id321"><span class="problematic" id="id322">pieterh_</span></a>&gt;    yeah, but are there lots of places in the code?</div>
<div class="line">[Wednesday 16 February 2011] [13:26:44] &lt;sustrik&gt;     not much, 3-4 i think</div>
<div class="line">[Wednesday 16 February 2011] [13:26:56] &lt;<a href="#id323"><span class="problematic" id="id324">pieterh_</span></a>&gt;    right... so a few well-placed prints and we&#8217;ll know what&#8217;s happening</div>
<div class="line">[Wednesday 16 February 2011] [13:26:57] &lt;sustrik&gt;     sys: works</div>
<div class="line">[Wednesday 16 February 2011] [13:27:08] &lt;sustrik&gt;     and should be used exactly for this kind of thing</div>
<div class="line">[Wednesday 16 February 2011] [13:27:18] &lt;<a href="#id325"><span class="problematic" id="id326">pieterh_</span></a>&gt;    precisely</div>
<div class="line">[Wednesday 16 February 2011] [13:27:32] &lt;sustrik&gt;     the only problem is that some kind of throttling</div>
<div class="line">[Wednesday 16 February 2011] [13:27:38] &lt;sustrik&gt;     not to get the log overloaded</div>
<div class="line">[Wednesday 16 February 2011] [13:27:50] &lt;<a href="#id327"><span class="problematic" id="id328">pieterh_</span></a>&gt;    presumably all we care about are the first 10 messages</div>
<div class="line">[Wednesday 16 February 2011] [13:27:53] &lt;sustrik&gt;     i.e. if the same problem happens over and over again</div>
<div class="line">[Wednesday 16 February 2011] [13:27:57] &lt;sustrik&gt;     in 10us intevals</div>
<div class="line">[Wednesday 16 February 2011] [13:28:09] &lt;sustrik&gt;     only the fist one should be reported</div>
<div class="line">[Wednesday 16 February 2011] [13:28:19] &lt;<a href="#id329"><span class="problematic" id="id330">pieterh_</span></a>&gt;    add a numeric code and ignore duplicates, standard solution</div>
<div class="line">[Wednesday 16 February 2011] [13:28:37] &lt;sustrik&gt;     you need some kind of state machine</div>
<div class="line">[Wednesday 16 February 2011] [13:29:06] &lt;sustrik&gt;     if connecting fails happens log it a switch to &#8220;no log&#8221; state</div>
<div class="line">[Wednesday 16 February 2011] [13:29:10] &lt;cremes&gt;      alas, it looks to me like they are all unique:  <a class="reference external" href="https://gist.github.com/829865">https://gist.github.com/829865</a></div>
<div class="line">[Wednesday 16 February 2011] [13:29:21] &lt;sustrik&gt;     any subsequent connect failures are not logged</div>
<div class="line">[Wednesday 16 February 2011] [13:29:32] &lt;cremes&gt;      interestingly, out of all 4 components, only the one that crashes shows the hundreds of thousands of reconnects</div>
<div class="line">[Wednesday 16 February 2011] [13:29:34] &lt;sustrik&gt;     when connecting succeeds, switch back to &#8220;log&#8221; state</div>
<div class="line">[Wednesday 16 February 2011] [13:29:55] &lt;sustrik&gt;     thus making next disconnect being logged</div>
<div class="line">[Wednesday 16 February 2011] [13:30:12] &lt;<a href="#id331"><span class="problematic" id="id332">pieterh_</span></a>&gt;    you don&#8217;t need anything that complex IMO</div>
<div class="line">[Wednesday 16 February 2011] [13:30:22] &lt;<a href="#id333"><span class="problematic" id="id334">pieterh_</span></a>&gt;    if you get more than 1000 alerts on sys: you can give up</div>
<div class="line">[Wednesday 16 February 2011] [13:30:34] &lt;<a href="#id335"><span class="problematic" id="id336">pieterh_</span></a>&gt;    (in a minute, hour, <a href="#id337"><span class="problematic" id="id338">day_</span></a>)</div>
<div class="line">[Wednesday 16 February 2011] [13:30:54] &lt;<a href="#id339"><span class="problematic" id="id340">pieterh_</span></a>&gt;    cremes, you may want to add prints in the places 0MQ <em>disconnects</em> subscribers</div>
<div class="line">[Wednesday 16 February 2011] [13:31:11] &lt;sustrik&gt;     cremes: no more ideas, i need a minimal test case</div>
<div class="line">[Wednesday 16 February 2011] [13:31:25] &lt;sustrik&gt;     to reproduce it here</div>
<div class="line">[Wednesday 16 February 2011] [13:31:30] &lt;cremes&gt;      ok, i&#8217;ll keep poking at it</div>
<div class="line">[Wednesday 16 February 2011] [13:32:23] &lt;<a href="#id341"><span class="problematic" id="id342">pieterh_</span></a>&gt;    sustrik, can you tell cremes where those 3-4 places are?</div>
<div class="line">[Wednesday 16 February 2011] [13:32:45] &lt;sustrik&gt;     hm, i don&#8217;t know precisely</div>
<div class="line">[Wednesday 16 February 2011] [13:32:55] &lt;sustrik&gt;     dhammika have supplied those patches</div>
<div class="line">[Wednesday 16 February 2011] [13:33:13] &lt;<a href="#id343"><span class="problematic" id="id344">pieterh_</span></a>&gt;    it used to be easy &#8216;egrep assert <a href="#id29"><span class="problematic" id="id30">*</span></a>.cpp&#8217;</div>
<div class="line">[Wednesday 16 February 2011] [13:33:13] &lt;sustrik&gt;     maybe check the commit log</div>
<div class="line">[Wednesday 16 February 2011] [13:33:36] &lt;sustrik&gt;     ?</div>
<div class="line">[Wednesday 16 February 2011] [13:33:54] &lt;sustrik&gt;     it&#8217;s not asserting, it&#8217;s closing the connections</div>
<div class="line">[Wednesday 16 February 2011] [13:36:08] &lt;cremes&gt;      this conversation gave me an idea... i think i am narrowing it down... give me 10m</div>
<div class="line">[Wednesday 16 February 2011] [13:36:59] &lt;<a href="#id345"><span class="problematic" id="id346">pieterh_</span></a>&gt;    sustrik, I meant, it <em>used</em> to assert and I remember several times chasing down framing errors by sticking printfs into those places</div>
<div class="line">[Wednesday 16 February 2011] [13:38:15] &lt;sustrik&gt;     these assert have been removed via your &#8220;0MQ competition&#8221; :)</div>
<div class="line">[Wednesday 16 February 2011] [13:46:09] &lt;cremes&gt;      sustrik, <a href="#id347"><span class="problematic" id="id348">pieterh_</span></a>: found it!</div>
<div class="line">[Wednesday 16 February 2011] [13:46:17] &lt;<a href="#id349"><span class="problematic" id="id350">pieterh_</span></a>&gt;    :-)</div>
<div class="line">[Wednesday 16 February 2011] [13:46:28] &lt;cremes&gt;      i had a duplicate identity on an unrelated XREQ socket!</div>
<div class="line">[Wednesday 16 February 2011] [13:46:33] &lt;<a href="#id351"><span class="problematic" id="id352">pieterh_</span></a>&gt;    yay!</div>
<div class="line">[Wednesday 16 February 2011] [13:47:06] &lt;cremes&gt;      to reproduce, it&#8217;s probably just these steps...</div>
<div class="line">[Wednesday 16 February 2011] [13:47:14] &lt;<a href="#id353"><span class="problematic" id="id354">pieterh_</span></a>&gt;    sustrik, does zmq already send anything to sys:?</div>
<div class="line">[Wednesday 16 February 2011] [13:47:17] &lt;cremes&gt;      1. create a QUEUE device that binds to some port</div>
<div class="line">[Wednesday 16 February 2011] [13:47:23] &lt;sustrik&gt;     <a href="#id355"><span class="problematic" id="id356">pieterh_</span></a>: no</div>
<div class="line">[Wednesday 16 February 2011] [13:47:37] &lt;cremes&gt;      2. create two XREQ (REQ too?) sockets, set their identity the same and connect them to the QUEUE</div>
<div class="line">[Wednesday 16 February 2011] [13:47:48] &lt;cremes&gt;      3. check for reconnects</div>
<div class="line">[Wednesday 16 February 2011] [13:48:01] &lt;cremes&gt;      4. Maybe need to send some data through first...?</div>
<div class="line">[Wednesday 16 February 2011] [13:48:10] &lt;<a href="#id357"><span class="problematic" id="id358">pieterh_</span></a>&gt;    cremes: I&#8217;ll make a test case later on</div>
<div class="line">[Wednesday 16 February 2011] [13:48:28] &lt;cremes&gt;      ok, thanks pieter! your c skills far exceed my own</div>
<div class="line">[Wednesday 16 February 2011] [13:48:51] &lt;<a href="#id359"><span class="problematic" id="id360">pieterh_</span></a>&gt;    what do you mean by &#8216;check for reconnects&#8217;?</div>
<div class="line">[Wednesday 16 February 2011] [13:48:53] &lt;cremes&gt;      thank you both so much for working through this with me; this conversation solved it</div>
<div class="line">[Wednesday 16 February 2011] [13:49:08] &lt;<a href="#id361"><span class="problematic" id="id362">pieterh_</span></a>&gt;    i&#8217;d like to get a test case that results in a crash</div>
<div class="line">[Wednesday 16 February 2011] [13:49:33] &lt;cremes&gt;      i added a debug statement to connect_session.cpp:detach to print whenever it detached and attempted a reconnect</div>
<div class="line">[Wednesday 16 February 2011] [13:50:00] &lt;cremes&gt;      let me try to write one in ruby</div>
<div class="line">[Wednesday 16 February 2011] [13:50:09] &lt;<a href="#id363"><span class="problematic" id="id364">pieterh_</span></a>&gt;    this still does not explain why the mailbox exploded...</div>
<div class="line">[Wednesday 16 February 2011] [13:50:14] &lt;cremes&gt;      then i can tell you exactly what needs to be done in c</div>
<div class="line">[Wednesday 16 February 2011] [13:50:20] &lt;<a href="#id365"><span class="problematic" id="id366">pieterh_</span></a>&gt;    yes, make a ruby test case, that&#8217;s perfect</div>
<div class="line">[Wednesday 16 February 2011] [13:50:34] &lt;<a href="#id367"><span class="problematic" id="id368">pieterh_</span></a>&gt;    exploding mailbox gets double score</div>
<div class="line">[Wednesday 16 February 2011] [13:50:53] &lt;<a href="#id369"><span class="problematic" id="id370">pieterh_</span></a>&gt;    sustrik: we should start to send stuff to sys: where we used to assert</div>
<div class="line">[Wednesday 16 February 2011] [13:51:16] &lt;<a href="#id371"><span class="problematic" id="id372">pieterh_</span></a>&gt;    if you can document how to use sys: from inside zmq I can try that</div>
<div class="line">[Wednesday 16 February 2011] [13:51:35] &lt;<a href="#id373"><span class="problematic" id="id374">pieterh_</span></a>&gt;    ideally, a 1-liner that sends a string... :-)</div>
<div class="line">[Wednesday 16 February 2011] [13:52:01] &lt;<a href="#id375"><span class="problematic" id="id376">pieterh_</span></a>&gt;    then we can apply that to cremes test case and check that we&#8217;d have caught this error</div>
<div class="line">[Wednesday 16 February 2011] [13:52:22] &lt;sustrik&gt;     log ();</div>
<div class="line">[Wednesday 16 February 2011] [13:52:29] &lt;sustrik&gt;     it&#8217;s ther</div>
<div class="line">[Wednesday 16 February 2011] [13:52:30] &lt;sustrik&gt;     e</div>
<div class="line">[Wednesday 16 February 2011] [13:53:13] &lt;<a href="#id377"><span class="problematic" id="id378">pieterh_</span></a>&gt;    ah, it requires all the work of creating a message first</div>
<div class="line">[Wednesday 16 February 2011] [13:53:19] &lt;<a href="#id379"><span class="problematic" id="id380">pieterh_</span></a>&gt;    that&#8217;s tedious</div>
<div class="line">[Wednesday 16 February 2011] [13:54:03] &lt;<a href="#id381"><span class="problematic" id="id382">pieterh_</span></a>&gt;    do we have a standardized format for sys://log messages?</div>
<div class="line">[Wednesday 16 February 2011] [13:54:49] &lt;<a href="#id383"><span class="problematic" id="id384">pieterh_</span></a>&gt;    sorry to complain but if this was packaged somewhat, it&#8217;d be easier for people to use it internally</div>
<div class="line">[Wednesday 16 February 2011] [13:55:01] &lt;sustrik&gt;     no format</div>
<div class="line">[Wednesday 16 February 2011] [13:55:06] &lt;sustrik&gt;     just use string atm</div>
<div class="line">[Wednesday 16 February 2011] [13:55:23] &lt;sustrik&gt;     we can polish the format later on</div>
<div class="line">[Wednesday 16 February 2011] [13:55:46] &lt;<a href="#id385"><span class="problematic" id="id386">pieterh_</span></a>&gt;    every single object has a log method?</div>
<div class="line">[Wednesday 16 February 2011] [13:56:22] &lt;<a href="#id387"><span class="problematic" id="id388">pieterh_</span></a>&gt;    inherited from object_t?</div>
<div class="line">[Wednesday 16 February 2011] [13:56:27] &lt;sustrik&gt;     yes</div>
<div class="line">[Wednesday 16 February 2011] [13:56:38] &lt;<a href="#id389"><span class="problematic" id="id390">pieterh_</span></a>&gt;    so the log method there could be somewhat expanded to take a string and create/destroy the msg itself</div>
<div class="line">[Wednesday 16 February 2011] [13:57:00] &lt;<a href="#id391"><span class="problematic" id="id392">pieterh_</span></a>&gt;    afaics we don&#8217;t use this anywhere yet</div>
<div class="line">[Wednesday 16 February 2011] [13:57:11] &lt;sustrik&gt;     sure</div>
<div class="line">[Wednesday 16 February 2011] [13:57:18] &lt;<a href="#id393"><span class="problematic" id="id394">pieterh_</span></a>&gt;    and then we need a documented parsable format for messages</div>
<div class="line">[Wednesday 16 February 2011] [13:57:23] &lt;<a href="#id395"><span class="problematic" id="id396">pieterh_</span></a>&gt;    minimal</div>
<div class="line">[Wednesday 16 February 2011] [13:57:32] &lt;<a href="#id397"><span class="problematic" id="id398">pieterh_</span></a>&gt;    easy to improve later</div>
<div class="line">[Wednesday 16 February 2011] [13:57:40] &lt;sustrik&gt;     ack</div>
<div class="line">[Wednesday 16 February 2011] [13:57:57] &lt;<a href="#id399"><span class="problematic" id="id400">pieterh_</span></a>&gt;    ok, I&#8217;ll try my hand at this, apologies in advance...</div>
<div class="line">[Wednesday 16 February 2011] [14:11:34] &lt;cremes&gt;      yes! i have a reproducible crasher in ruby!</div>
<div class="line">[Wednesday 16 February 2011] [14:12:10] &lt;cremes&gt;      <a href="#id401"><span class="problematic" id="id402">pieterh_</span></a>: do you want the ruby code or an explanation for translation to c?</div>
<div class="line">[Wednesday 16 February 2011] [14:12:49] &lt;<a href="#id403"><span class="problematic" id="id404">pieterh_</span></a>&gt;    cremes, I think we need to log two issues here</div>
<div class="line">[Wednesday 16 February 2011] [14:13:11] &lt;cremes&gt;      ok, i can create the issues, but i only see one</div>
<div class="line">[Wednesday 16 February 2011] [14:13:14] &lt;<a href="#id405"><span class="problematic" id="id406">pieterh_</span></a>&gt;    (a) lack of any warning to the app developer</div>
<div class="line">[Wednesday 16 February 2011] [14:13:18] &lt;<a href="#id407"><span class="problematic" id="id408">pieterh_</span></a>&gt;    (b) mailbox crash</div>
<div class="line">[Wednesday 16 February 2011] [14:13:32] &lt;<a href="#id409"><span class="problematic" id="id410">pieterh_</span></a>&gt;    (b) is the critical one, and the ruby example will be valuable there</div>
<div class="line">[Wednesday 16 February 2011] [14:13:40] &lt;cremes&gt;      ok, so (a) is for tracking a new feature request to add the sys: stuff, yes?</div>
<div class="line">[Wednesday 16 February 2011] [14:13:44] &lt;<a href="#id411"><span class="problematic" id="id412">pieterh_</span></a>&gt;    yes</div>
<div class="line">[Wednesday 16 February 2011] [14:13:50] &lt;cremes&gt;      ok, i&#8217;ll write them up</div>
<div class="line">[Wednesday 16 February 2011] [14:14:00] &lt;<a href="#id413"><span class="problematic" id="id414">pieterh_</span></a>&gt;    well, we don&#8217;t track new feature requests, so perhaps skip (a)</div>
<div class="line">[Wednesday 16 February 2011] [14:14:36] &lt;cremes&gt;      i&#8217;ll add it to the wiki 3.0/roadmap page</div>
<div class="line">[Wednesday 16 February 2011] [14:14:56] &lt;<a href="#id415"><span class="problematic" id="id416">pieterh_</span></a>&gt;    i&#8217;m working on it now... :-)</div>
<div class="line">[Wednesday 16 February 2011] [14:15:11] &lt;cremes&gt;      ok!</div>
<div class="line">[Wednesday 16 February 2011] [14:27:12] &lt;cremes&gt;      <a href="#id417"><span class="problematic" id="id418">pieterh_</span></a>: preview this issue and let me know if you need more details to reproduce in c:  <a class="reference external" href="https://github.com/zeromq/zeromq2/issues/165">https://github.com/zeromq/zeromq2/issues/165</a></div>
<div class="line">[Wednesday 16 February 2011] [14:27:22] &lt;<a href="#id419"><span class="problematic" id="id420">pieterh_</span></a>&gt;    cremes, thanks!</div>
<div class="line">[Wednesday 16 February 2011] [14:27:49] &lt;cremes&gt;      <a href="#id421"><span class="problematic" id="id422">pieterh_</span></a>: i&#8217;ve spent the last 96 hours banging on this! i&#8217;m happy to see it solved!</div>
<div class="line">[Wednesday 16 February 2011] [14:28:27] &lt;<a href="#id423"><span class="problematic" id="id424">pieterh_</span></a>&gt;    that&#8217;s why i&#8217;m doing the sys://log stuff, it&#8217;s insane to lose so much time to a missing warning</div>
<div class="line">[Wednesday 16 February 2011] [14:28:54] &lt;cremes&gt;      honestly, i&#8217;m taking the rest of the day off.... i feel deflated</div>
<div class="line">[Wednesday 16 February 2011] [14:29:59] &lt;<a href="#id425"><span class="problematic" id="id426">pieterh_</span></a>&gt;    sustrik, what&#8217;s the correct way to work with a msg in the zmq core?</div>
<div class="line">[Wednesday 16 February 2011] [14:30:13] &lt;<a href="#id427"><span class="problematic" id="id428">pieterh_</span></a>&gt;    ::zmq_msg_t or is there a message class I&#8217;m missing?</div>
<div class="line">[Wednesday 16 February 2011] [14:39:18] &lt;enleth&gt;      Hello</div>
<div class="line">[Wednesday 16 February 2011] [14:39:59] &lt;enleth&gt;      mikko: is the API documentation at <a class="reference external" href="http://valokuva.org/~mikko/php-zmq/">http://valokuva.org/~mikko/php-zmq/</a> supposed to be inaccessible?</div>
<div class="line">[Wednesday 16 February 2011] [14:46:14] &lt;ianbarber&gt;   enleth: check php.zero.mq</div>
<div class="line">[Wednesday 16 February 2011] [14:46:40] &lt;ianbarber&gt;   references probably need updating</div>
<div class="line">[Wednesday 16 February 2011] [14:50:55] &lt;mikko&gt;       enleth: yes</div>
<div class="line">[Wednesday 16 February 2011] [14:55:46] &lt;enleth&gt;      ianbarber: thanks, that&#8217;s it.</div>
<div class="line">[Wednesday 16 February 2011] [14:56:17] &lt;enleth&gt;      mikko: can I suggest a 302 redirect to the new address?</div>
<div class="line">[Wednesday 16 February 2011] [14:56:26] &lt;<a href="#id429"><span class="problematic" id="id430">pieterh_</span></a>&gt;    cremes: still there?</div>
<div class="line">[Wednesday 16 February 2011] [14:56:44] &lt;enleth&gt;      The old one is all over the latest git tree</div>
<div class="line">[Wednesday 16 February 2011] [15:01:16] &lt;mikko&gt;       done</div>
<div class="line">[Wednesday 16 February 2011] [15:01:29] &lt;cremes&gt;      <a href="#id431"><span class="problematic" id="id432">pieterh_</span></a>: for a bit more; what&#8217;s up?</div>
<div class="line">[Wednesday 16 February 2011] [15:01:48] &lt;<a href="#id433"><span class="problematic" id="id434">pieterh_</span></a>&gt;    just wondered if you need to actually use the REQ/REP sockets to create the crash</div>
<div class="line">[Wednesday 16 February 2011] [15:01:55] &lt;<a href="#id435"><span class="problematic" id="id436">pieterh_</span></a>&gt;    or just bind them and BOOM</div>
<div class="line">[Wednesday 16 February 2011] [15:02:20] &lt;<a href="#id437"><span class="problematic" id="id438">pieterh_</span></a>&gt;    s/bind/connect</div>
<div class="line">[Wednesday 16 February 2011] [15:02:25] &lt;cremes&gt;      let me see... give me 1m</div>
<div class="line">[Wednesday 16 February 2011] [15:03:26] &lt;cremes&gt;      <a href="#id439"><span class="problematic" id="id440">pieterh_</span></a>: nope, crashes without using them; good catch... it&#8217;s even <em>more</em> reduced now</div>
<div class="line">[Wednesday 16 February 2011] [15:03:33] &lt;<a href="#id441"><span class="problematic" id="id442">pieterh_</span></a>&gt;    excellent...</div>
<div class="line">[Wednesday 16 February 2011] [15:03:37] &lt;<a href="#id443"><span class="problematic" id="id444">pieterh_</span></a>&gt;    thanks a lot</div>
<div class="line">[Wednesday 16 February 2011] [15:03:37] &lt;cremes&gt;      i&#8217;m no longer thinking clearly otherwise i would have tried that :)</div>
<div class="line">[Wednesday 16 February 2011] [15:04:50] &lt;<a href="#id445"><span class="problematic" id="id446">pieterh_</span></a>&gt;    it&#8217;s been a long day :-)</div>
<div class="line">[Wednesday 16 February 2011] [15:04:51] &lt;cremes&gt;      <a href="#id447"><span class="problematic" id="id448">pieterh_</span></a>: looks like you <em>do</em> need the REQ socket too</div>
<div class="line">[Wednesday 16 February 2011] [15:05:03] &lt;cremes&gt;      a pair of REP&#8217;s with the same ID is insufficient</div>
<div class="line">[Wednesday 16 February 2011] [15:05:16] &lt;cremes&gt;      it&#8217;s been a long <em>week</em></div>
<div class="line">[Wednesday 16 February 2011] [15:05:27] &lt;<a href="#id449"><span class="problematic" id="id450">pieterh_</span></a>&gt;    ack, you need a pair of sockets with one disconnecting the other</div>
<div class="line">[Wednesday 16 February 2011] [15:05:44] &lt;<a href="#id451"><span class="problematic" id="id452">pieterh_</span></a>&gt;    presumably, I&#8217;ll test that, it applies to all relevant socket types</div>
<div class="line">[Wednesday 16 February 2011] [15:05:56] &lt;<a href="#id453"><span class="problematic" id="id454">pieterh_</span></a>&gt;    it&#8217;s been a long <em>year</em>!</div>
<div class="line">[Wednesday 16 February 2011] [15:05:58] &lt;cremes&gt;      perhaps...</div>
<div class="line">[Wednesday 16 February 2011] [15:05:59] &lt;<a href="#id455"><span class="problematic" id="id456">pieterh_</span></a>&gt;    hang on...</div>
<div class="line">[Wednesday 16 February 2011] [15:06:05] &lt;<a href="#id457"><span class="problematic" id="id458">pieterh_</span></a>&gt;    :-)</div>
<div class="line">[Wednesday 16 February 2011] [15:06:07] &lt;cremes&gt;      heh</div>
<div class="line">[Wednesday 16 February 2011] [15:10:09] &lt;<a href="#id459"><span class="problematic" id="id460">pieterh_</span></a>&gt;    cremes: bingo, I reproduced it!</div>
<div class="line">[Wednesday 16 February 2011] [15:10:23] &lt;cremes&gt;      awesome!</div>
<div class="line">[Wednesday 16 February 2011] [15:11:03] &lt;cremes&gt;      once started it only takes a few seconds to exhaust that buffer even when it&#8217;s 5MB!</div>
<div class="line">[Wednesday 16 February 2011] [15:11:11] &lt;<a href="#id461"><span class="problematic" id="id462">pieterh_</span></a>&gt;    just connect two req sockets with same ID, wait 1 second...</div>
<div class="line">[Wednesday 16 February 2011] [15:11:17] &lt;<a href="#id463"><span class="problematic" id="id464">pieterh_</span></a>&gt;    I&#8217;m going to try with other socket types now</div>
<div class="line">[Wednesday 16 February 2011] [15:16:42] &lt;<a href="#id465"><span class="problematic" id="id466">pieterh_</span></a>&gt;    cremes: it affects all socket types</div>
<div class="line">[Wednesday 16 February 2011] [15:16:52] &lt;<a href="#id467"><span class="problematic" id="id468">pieterh_</span></a>&gt;    any combination of bind/connect, even pub connecting to sub</div>
<div class="line">[Wednesday 16 February 2011] [15:17:21] &lt;cremes&gt;      wow</div>
<div class="line">[Wednesday 16 February 2011] [15:17:46] &lt;cremes&gt;      this <em>might</em> explain a lot of people&#8217;s problems; there are several issues open about this assertion</div>
<div class="line">[Wednesday 16 February 2011] [15:18:28] &lt;<a href="#id469"><span class="problematic" id="id470">pieterh_</span></a>&gt;    ironically 0MQ used to assert before :-)</div>
<div class="line">[Wednesday 16 February 2011] [15:18:51] &lt;cremes&gt;      oh, the irony... :(</div>
<div class="line">[Wednesday 16 February 2011] [15:19:25] &lt;cremes&gt;      well, i&#8217;m just glad it&#8217;s no longer a mystery</div>
<div class="line">[Wednesday 16 February 2011] [15:19:38] &lt;<a href="#id471"><span class="problematic" id="id472">pieterh_</span></a>&gt;    anyhow, this makes it much easier to solve properly</div>
<div class="line">[Wednesday 16 February 2011] [15:19:42] &lt;cremes&gt;      other than this, i haven&#8217;t hit an assertion in a long time</div>
<div class="line">[Wednesday 16 February 2011] [15:22:15] &lt;<a href="#id473"><span class="problematic" id="id474">pieterh_</span></a>&gt;    indeed, we had a competition to kill them :-)</div>
<div class="line">[Wednesday 16 February 2011] [17:30:32] &lt;jol&gt; pieterh: nice talk at fosdem, I just watch it.</div>
<div class="line">[Wednesday 16 February 2011] [17:40:48] &lt;Steve-o&gt;     thx mikko</div>
<div class="line">[Wednesday 16 February 2011] [18:53:12] &lt;dan___&gt;      hello</div>
<div class="line">[Wednesday 16 February 2011] [18:53:16] &lt;mikko&gt;       hi</div>
<div class="line">[Wednesday 16 February 2011] [18:53:47] &lt;dan___&gt;      i&#8217;ve got a question about zmq</div>
<div class="line">[Wednesday 16 February 2011] [18:54:43] &lt;mikko&gt;       go ahead</div>
<div class="line">[Wednesday 16 February 2011] [18:54:52] &lt;dan___&gt;      is there any reason I should not be able to implement a pubsub connection with one side in python and the other in cpp over ipc?</div>
<div class="line">[Wednesday 16 February 2011] [18:55:33] &lt;mikko&gt;       no reason</div>
<div class="line">[Wednesday 16 February 2011] [18:55:39] &lt;mikko&gt;       should be perfectly ok</div>
<div class="line">[Wednesday 16 February 2011] [18:55:41] &lt;dan___&gt;      hm</div>
<div class="line">[Wednesday 16 February 2011] [18:56:05] &lt;mikko&gt;       you are not seeing any messages?</div>
<div class="line">[Wednesday 16 February 2011] [18:56:31] &lt;dan___&gt;      i see them when I use tcp, but not when i use ipc</div>
<div class="line">[Wednesday 16 February 2011] [18:56:38] &lt;mikko&gt;       can i see the code?</div>
<div class="line">[Wednesday 16 February 2011] [18:56:48] &lt;dan___&gt;      whats the best way to share it?</div>
<div class="line">[Wednesday 16 February 2011] [18:56:52] &lt;dan___&gt;      copy paste in here?</div>
<div class="line">[Wednesday 16 February 2011] [18:56:52] &lt;mikko&gt;       gist.github.com</div>
<div class="line">[Wednesday 16 February 2011] [18:57:48] &lt;dan___&gt;      sure - let me copy the code</div>
<div class="line">[Wednesday 16 February 2011] [19:01:17] &lt;mikko&gt;       did it work?</div>
<div class="line">[Wednesday 16 February 2011] [19:02:31] &lt;dan___&gt;      yeah</div>
<div class="line">[Wednesday 16 February 2011] [19:02:38] &lt;dan___&gt;      im trying to figure out how to &#8220;share it&#8221; lol</div>
<div class="line">[Wednesday 16 February 2011] [19:02:43] &lt;mikko&gt;       just the url</div>
<div class="line">[Wednesday 16 February 2011] [19:02:53] &lt;dan___&gt;      <a class="reference external" href="mailto:git&#37;&#52;&#48;gist&#46;github&#46;com">git<span>&#64;</span>gist<span>&#46;</span>github<span>&#46;</span>com</a>:2f8a0d953fa7c1acc7d6.git</div>
<div class="line">[Wednesday 16 February 2011] [19:03:06] &lt;dan___&gt;      <a class="reference external" href="https://gist.github.com/2f8a0d953fa7c1acc7d6">https://gist.github.com/2f8a0d953fa7c1acc7d6</a></div>
<div class="line">[Wednesday 16 February 2011] [19:03:09] &lt;mikko&gt;       thanks</div>
<div class="line">[Wednesday 16 February 2011] [19:03:13] &lt;mikko&gt;       let me take a look</div>
<div class="line">[Wednesday 16 February 2011] [19:03:39] &lt;mikko&gt;       thats not the ipc one?</div>
<div class="line">[Wednesday 16 February 2011] [19:03:45] &lt;dan___&gt;      The Connections.cpp and Connections.py files define &#8220;Publisher&#8221; and &#8220;Subscriber&#8221; classes</div>
<div class="line">[Wednesday 16 February 2011] [19:03:52] &lt;mikko&gt;       what did you use as URI for the ipc?</div>
<div class="line">[Wednesday 16 February 2011] [19:04:09] &lt;dan___&gt;      there is an intermediate service on tcp that tells teh publisher and subscribers where to connect</div>
<div class="line">[Wednesday 16 February 2011] [19:05:18] &lt;dan___&gt;      ah crap i forgot the file for the intermediate name look-up...</div>
<div class="line">[Wednesday 16 February 2011] [19:05:30] &lt;dan___&gt;      the ipc names are just ipc://something.ipc</div>
<div class="line">[Wednesday 16 February 2011] [19:05:50] &lt;dan___&gt;      the publisher gets told to bind to both tcp and ipc ports</div>
<div class="line">[Wednesday 16 February 2011] [19:06:10] &lt;mikko&gt;       hmm</div>
<div class="line">[Wednesday 16 February 2011] [19:06:16] &lt;dan___&gt;      the subscriber gets told to bind to an ipc (if it is on the same machine as the publisher) or tcp if it is remote</div>
<div class="line">[Wednesday 16 February 2011] [19:06:19] &lt;mikko&gt;       are you running them on same directory?</div>
<div class="line">[Wednesday 16 February 2011] [19:06:32] &lt;dan___&gt;      ... no</div>
<div class="line">[Wednesday 16 February 2011] [19:06:46] &lt;mikko&gt;       ipc:///tmp/test.ipc</div>
<div class="line">[Wednesday 16 February 2011] [19:06:55] &lt;mikko&gt;       that would be an absolute path to /tmp/test.ipc</div>
<div class="line">[Wednesday 16 February 2011] [19:07:08] &lt;mikko&gt;       ipc://something.ipc would be relative to the current working directory</div>
<div class="line">[Wednesday 16 February 2011] [19:07:15] &lt;mikko&gt;       notice the amount of slashes</div>
<div class="line">[Wednesday 16 February 2011] [19:07:20] &lt;dan___&gt;      ah ok that would make sense</div>
<div class="line">[Wednesday 16 February 2011] [19:07:34] &lt;dan___&gt;      let me try that</div>
<div class="line">[Wednesday 16 February 2011] [19:09:38] &lt;dan___&gt;      awesome</div>
<div class="line">[Wednesday 16 February 2011] [19:09:40] &lt;dan___&gt;      that worked</div>
<div class="line">[Wednesday 16 February 2011] [19:09:42] &lt;dan___&gt;      thanks</div>
<div class="line">[Wednesday 16 February 2011] [19:10:27] &lt;mikko&gt;       no problem</div>
<div class="line">[Wednesday 16 February 2011] [19:11:27] &lt;dan___&gt;      one other question i just thought of - what is the correct way to get a python subscriber to exit cleanly if it is stuck waiting on a recv()?</div>
<div class="line">[Wednesday 16 February 2011] [19:11:40] &lt;dan___&gt;      (like in SubTest.py) ?</div>
<div class="line">[Wednesday 16 February 2011] [19:13:27] &lt;mikko&gt;       ctrl + c doesnt work?</div>
<div class="line">[Wednesday 16 February 2011] [19:13:55] &lt;dan___&gt;      no - it seems to take kill -9</div>
<div class="line">[Wednesday 16 February 2011] [19:14:44] &lt;mikko&gt;       i don&#8217;t really know about python that much</div>
<div class="line">[Wednesday 16 February 2011] [19:14:55] &lt;mikko&gt;       i think python might be eating the signal</div>
<div class="line">[Wednesday 16 February 2011] [19:14:55] &lt;dan___&gt;      lol neither do i</div>
<div class="line">[Wednesday 16 February 2011] [19:15:08] &lt;dan___&gt;      well thats why i tried putting the signal handler in</div>
<div class="line">[Wednesday 16 February 2011] [19:15:25] &lt;dan___&gt;      but it doesn&#8217;t seem to have any effect</div>
<div class="line">[Wednesday 16 February 2011] [19:15:58] &lt;mikko&gt;       one option would be to use zmq poll</div>
<div class="line">[Wednesday 16 February 2011] [19:16:11] &lt;mikko&gt;       use a timeout on socket and after timeout check a flag or something</div>
<div class="line">[Wednesday 16 February 2011] [19:16:19] &lt;mikko&gt;       which you set in signal handler</div>
<div class="line">[Wednesday 16 February 2011] [19:16:38] &lt;dan___&gt;      that sounds reasonable</div>
<div class="line">[Wednesday 16 February 2011] [19:16:48] &lt;dan___&gt;      i have not used the poll feature yet</div>
<div class="line">[Wednesday 16 February 2011] [19:17:55] &lt;dan___&gt;      at any rate - thanks for your time and help!</div>
<div class="line">[Wednesday 16 February 2011] [19:19:00] &lt;mikko&gt;       no probs</div>
<div class="line">[Wednesday 16 February 2011] [19:19:11] &lt;mikko&gt;       its usually more lively in here around day time  (eu time)</div>
<div class="line">[Wednesday 16 February 2011] [19:19:30] &lt;dan___&gt;      ah - are you a contributer?</div>
<div class="line">[Wednesday 16 February 2011] [19:32:29] &lt;sam`&gt;        hi</div>
<div class="line">[Wednesday 16 February 2011] [19:32:52] &lt;sam`&gt;        going through the mailing list archives I read that a reliable pub/sub (with EPGM) would be as slow as the slowest subscriber</div>
<div class="line">[Wednesday 16 February 2011] [19:33:12] &lt;sam`&gt;        anyone has some insight on this, and on how to avoid it?</div>
<div class="line">[Wednesday 16 February 2011] [19:33:47] &lt;sam`&gt;        i&#8217;m looking at using 0MQ with an EPGM transport to distribute blobs of data (~100MB) to several hundred machines effeciently</div>
<div class="line">[Wednesday 16 February 2011] [19:34:30] &lt;sam`&gt;        but I can&#8217;t figure out if that&#8217;s the worst idea ever, or if it&#8217;s actually efficient both speed-wise and network usage -wise</div>
<div class="line">[Wednesday 16 February 2011] [23:35:39] &lt;rhino&gt;       Hi, has anyone loaded jzmq into eclipse before?</div>
<div class="line">[Thursday 17 February 2011] [03:29:22] &lt;yrashk&gt;       I am confused again.. which erlzmq is supposed to be better? I have currently packaged official one (zeromq/erlzmq) into erlagner.org index.</div>
<div class="line">[Thursday 17 February 2011] [03:32:21] &lt;sustrik&gt;      there are several of them?</div>
<div class="line">[Thursday 17 February 2011] [03:32:59] &lt;jugg&gt; imo <a class="reference external" href="http://github.com/csrl/erlzmq">http://github.com/csrl/erlzmq</a> is more feature complete and stable.  The &#8220;official&#8221; version is useful for high volume &#8216;sub&#8217; sockets, and playground use.  But is pretty buggy otherwise.</div>
<div class="line">[Thursday 17 February 2011] [03:34:11] &lt;jugg&gt; disclaimer, &#8216;csrl&#8217; is me.</div>
<div class="line">[Thursday 17 February 2011] [03:34:12] &lt;sustrik&gt;      anything tah zeromq/erlzmq has and csrl/erlzmq hasn&#8217;t?</div>
<div class="line">[Thursday 17 February 2011] [03:34:16] &lt;sustrik&gt;      i know</div>
<div class="line">[Thursday 17 February 2011] [03:34:55] &lt;yrashk&gt;       sustrik: I am trying to understand what&#8217;s the difference between csrl and zeromq</div>
<div class="line">[Thursday 17 February 2011] [03:35:02] &lt;sustrik&gt;      no idea</div>
<div class="line">[Thursday 17 February 2011] [03:35:09] &lt;sustrik&gt;      jugg should be able to explain</div>
<div class="line">[Thursday 17 February 2011] [03:35:10] &lt;yrashk&gt;       jugg: then I just sent you a message on github :)</div>
<div class="line">[Thursday 17 February 2011] [03:35:24] &lt;jugg&gt; zeromq/erlzmq will actively push incoming data to the erlang process.  csrl/erlzmq won&#8217;t.</div>
<div class="line">[Thursday 17 February 2011] [03:35:26] &lt;yrashk&gt;       would you mind checking it out?</div>
<div class="line">[Thursday 17 February 2011] [03:36:28] &lt;sustrik&gt;      yrashk: what message? i haven&#8217;t got anything yet.</div>
<div class="line">[Thursday 17 February 2011] [03:36:40] &lt;yrashk&gt;       sustrik: no, I have sent it to hugg</div>
<div class="line">[Thursday 17 February 2011] [03:36:42] &lt;yrashk&gt;       jugg*</div>
<div class="line">[Thursday 17 February 2011] [03:36:58] &lt;yrashk&gt;       I wrote &#8221; jugg: then I just sent you a message on github :)&#8221;</div>
<div class="line">[Thursday 17 February 2011] [03:37:07] &lt;sustrik&gt;      oops</div>
<div class="line">[Thursday 17 February 2011] [03:37:08] &lt;sustrik&gt;      :)</div>
<div class="line">[Thursday 17 February 2011] [03:37:11] &lt;yrashk&gt;       :]</div>
<div class="line">[Thursday 17 February 2011] [03:37:36] &lt;sustrik&gt;      jugg: i think there used to be both options, no?</div>
<div class="line">[Thursday 17 February 2011] [03:37:44] &lt;jugg&gt; yrashk, sure, I&#8217;ll do that.</div>
<div class="line">[Thursday 17 February 2011] [03:37:55] &lt;sustrik&gt;      iirc, something like &#8220;passive&#8221; flag</div>
<div class="line">[Thursday 17 February 2011] [03:37:55] &lt;yrashk&gt;       sustrik: I think zeromq/erlzmq has active option</div>
<div class="line">[Thursday 17 February 2011] [03:37:56] &lt;jugg&gt; sustrik, yes, my version doesn&#8217;t provide that option.</div>
<div class="line">[Thursday 17 February 2011] [03:38:02] &lt;jugg&gt; &#8216;active&#8217; flag actually...</div>
<div class="line">[Thursday 17 February 2011] [03:38:09] &lt;sustrik&gt;      aha</div>
<div class="line">[Thursday 17 February 2011] [03:38:21] &lt;sustrik&gt;      ok, any chance to merge the two implementations?</div>
<div class="line">[Thursday 17 February 2011] [03:38:28] &lt;yrashk&gt;       jugg: please let me know when you&#8217;ll merge that patch in, I&#8217;ll package your fork right after that</div>
<div class="line">[Thursday 17 February 2011] [03:38:36] &lt;yrashk&gt;       sustrik: that would be nice.. I guess</div>
<div class="line">[Thursday 17 February 2011] [03:38:39] &lt;jugg&gt; yrashk, ok</div>
<div class="line">[Thursday 17 February 2011] [03:38:43] &lt;yrashk&gt;       less to manage for me :]</div>
<div class="line">[Thursday 17 February 2011] [03:39:34] &lt;sustrik&gt;      yrashk: are you an erlzmq maintainer?</div>
<div class="line">[Thursday 17 February 2011] [03:39:40] &lt;jugg&gt; sustrik, the &#8216;active&#8217; flag is only useful for subscription sockets.  If used on other sockets it is the source of problems.</div>
<div class="line">[Thursday 17 February 2011] [03:39:53] &lt;yrashk&gt;       sustrik: erlzmq.agner maintainer, it&#8217;s just a &#8220;spec&#8221; package</div>
<div class="line">[Thursday 17 February 2011] [03:40:05] &lt;sustrik&gt;      i see</div>
<div class="line">[Thursday 17 February 2011] [03:40:35] &lt;yrashk&gt;       I am the guy behing erlagner.org operations, we&#8217;re finally doing proper packaging system for erlang</div>
<div class="line">[Thursday 17 February 2011] [03:41:00] &lt;sustrik&gt;      ah, i&#8217;ve heard about it</div>
<div class="line">[Thursday 17 February 2011] [03:41:21] &lt;sustrik&gt;      not or erlang user myself though</div>
<div class="line">[Thursday 17 February 2011] [03:41:58] &lt;jugg&gt; saleyn will not merge my changes unless I implement &#8216;active&#8217; option support and a couple of other minor things.  But I don&#8217;t have the time to do it correctly at this point, and I&#8217;m not interested in merging the implementation as is, given the issues surrounding it.</div>
<div class="line">[Thursday 17 February 2011] [03:42:14] &lt;sustrik&gt;      jugg: iirc active was introduced to allow erlzmq to work in non-lock-step fashion</div>
<div class="line">[Thursday 17 February 2011] [03:42:32] &lt;yrashk&gt;       this is why I&#8217;d prefer to package both official and jugg&#8217;s versions</div>
<div class="line">[Thursday 17 February 2011] [03:42:41] &lt;jugg&gt; yes, my implementation supports polling, which negates the need for it in that regards.</div>
<div class="line">[Thursday 17 February 2011] [03:42:56] &lt;sustrik&gt;      well, no way out at the moment</div>
<div class="line">[Thursday 17 February 2011] [03:43:22] &lt;sustrik&gt;      you may also consider adding new binding page to zeromq.org</div>
<div class="line">[Thursday 17 February 2011] [03:43:28] &lt;sustrik&gt;      there&#8217;s a precedent:</div>
<div class="line">[Thursday 17 February 2011] [03:43:34] &lt;sustrik&gt;      there are 2 ruby bindings</div>
<div class="line">[Thursday 17 February 2011] [03:43:35] &lt;jugg&gt; saleyn sites possible performance implications, however no actual testing has been done afaik.</div>
<div class="line">[Thursday 17 February 2011] [03:44:14] &lt;yrashk&gt;       how much is the slowdown on raw 0mq vs erlzmq btw?</div>
<div class="line">[Thursday 17 February 2011] [03:44:18] &lt;yrashk&gt;       on either binding</div>
<div class="line">[Thursday 17 February 2011] [03:44:33] &lt;yrashk&gt;       or, let me rephrase, how severe*</div>
<div class="line">[Thursday 17 February 2011] [03:44:53] &lt;sustrik&gt;      nobody really tested it, afaik</div>
<div class="line">[Thursday 17 February 2011] [03:44:55] &lt;yrashk&gt;       and erlzmq vs raw 0mq, to be more correct :]</div>
<div class="line">[Thursday 17 February 2011] [03:45:05] &lt;yrashk&gt;       heh</div>
<div class="line">[Thursday 17 February 2011] [03:45:08] &lt;yrashk&gt;       too bad</div>
<div class="line">[Thursday 17 February 2011] [03:45:19] &lt;yrashk&gt;       I am actually actively considering using erlzmq in one of the oncoming projects</div>
<div class="line">[Thursday 17 February 2011] [03:45:37] &lt;sustrik&gt;      testing it should be easy</div>
<div class="line">[Thursday 17 February 2011] [03:45:49] &lt;sustrik&gt;      there are C testing in /perf subdirectory</div>
<div class="line">[Thursday 17 February 2011] [03:46:10] &lt;sustrik&gt;      as for erlzmq, i don&#8217;t know, but most bindings have /perf subdir as well</div>
<div class="line">[Thursday 17 February 2011] [03:46:33] &lt;jugg&gt; A different comparison: I have two interfaces to my application, one native erlang, and another using erlzmq.  zeromq doesn&#8217;t significantly add any overhead.</div>
<div class="line">[Thursday 17 February 2011] [03:46:33] &lt;sustrik&gt;      containing exactly the same tests</div>
<div class="line">[Thursday 17 February 2011] [03:46:52] &lt;yrashk&gt;       jugg: so it&#8217;s just comparable?</div>
<div class="line">[Thursday 17 February 2011] [03:47:29] &lt;yrashk&gt;       I hoped it will be faster, lol :)</div>
<div class="line">[Thursday 17 February 2011] [03:47:44] &lt;jugg&gt; native erlang vs erlzmq, yes comparable.</div>
<div class="line">[Thursday 17 February 2011] [03:47:46] &lt;yrashk&gt;       although of course it is unlikely to be faster</div>
<div class="line">[Thursday 17 February 2011] [03:47:46] &lt;sustrik&gt;      it&#8217;s native erlang vs. 0mq; what you asked about is raw 0MQ from C vs. erlzmq</div>
<div class="line">[Thursday 17 February 2011] [03:47:55] &lt;yrashk&gt;       yeah I understand</div>
<div class="line">[Thursday 17 February 2011] [03:48:15] &lt;yrashk&gt;       I suppose raw 0mq is much, much faster</div>
<div class="line">[Thursday 17 February 2011] [03:48:37] &lt;sustrik&gt;      jugg: are there perf tests in erlzmq?</div>
<div class="line">[Thursday 17 February 2011] [03:48:44]         * sustrik is checking</div>
<div class="line">[Thursday 17 February 2011] [03:48:48] &lt;yrashk&gt;       sustrik: nope</div>
<div class="line">[Thursday 17 February 2011] [03:49:14] &lt;sustrik&gt;      than you may consider writing them, it&#8217;s few lines of code</div>
<div class="line">[Thursday 17 February 2011] [03:49:18] &lt;jugg&gt; no</div>
<div class="line">[Thursday 17 February 2011] [03:50:09] &lt;yrashk&gt;       sustrik: like porting <a class="reference external" href="https://github.com/zeromq/pyzmq/tree/master/perf">https://github.com/zeromq/pyzmq/tree/master/perf</a> ?</div>
<div class="line">[Thursday 17 February 2011] [03:50:23] &lt;mikko&gt;        good morning</div>
<div class="line">[Thursday 17 February 2011] [03:50:46] &lt;sustrik&gt;      morning</div>
<div class="line">[Thursday 17 February 2011] [03:50:59] &lt;sustrik&gt;      yrashk: these seem unnecessary complex</div>
<div class="line">[Thursday 17 February 2011] [03:51:12] &lt;yrashk&gt;       sustrik: do you have any other examples?</div>
<div class="line">[Thursday 17 February 2011] [03:51:53] &lt;sustrik&gt;      what about this:</div>
<div class="line">[Thursday 17 February 2011] [03:51:54] &lt;sustrik&gt;      <a class="reference external" href="https://github.com/zeromq/rbzmq/tree/master/perf">https://github.com/zeromq/rbzmq/tree/master/perf</a></div>
<div class="line">[Thursday 17 February 2011] [03:52:18] &lt;yrashk&gt;       yup, quite simple</div>
<div class="line">[Thursday 17 February 2011] [04:02:48] &lt;yrashk&gt;       porting local_lat</div>
<div class="line">[Thursday 17 February 2011] [04:03:57] &lt;yrashk&gt;       hmmm erlzmq has no support for contexts</div>
<div class="line">[Thursday 17 February 2011] [04:03:58] &lt;yrashk&gt;       :)</div>
<div class="line">[Thursday 17 February 2011] [04:10:13] &lt;sustrik&gt;      doesn&#8217;t matter, there a global context in the lib, i assume</div>
<div class="line">[Thursday 17 February 2011] [04:11:09] &lt;sustrik&gt;      btw, setting HWM in local_lat is superfluous</div>
<div class="line">[Thursday 17 February 2011] [04:11:26] &lt;sustrik&gt;      no idea how it got into ruby perf suite</div>
<div class="line">[Thursday 17 February 2011] [04:14:36] &lt;yrashk&gt;       lol</div>
<div class="line">[Thursday 17 February 2011] [04:14:43] &lt;yrashk&gt;       anyway I actually switched to porting _thr tests</div>
<div class="line">[Thursday 17 February 2011] [04:14:48] &lt;sustrik&gt;      ack</div>
<div class="line">[Thursday 17 February 2011] [04:14:51] &lt;yrashk&gt;       local_thr is done</div>
<div class="line">[Thursday 17 February 2011] [04:14:54] &lt;sustrik&gt;      lol</div>
<div class="line">[Thursday 17 February 2011] [04:14:57] &lt;yrashk&gt;       :D</div>
<div class="line">[Thursday 17 February 2011] [04:15:01] &lt;sustrik&gt;      you are fast</div>
<div class="line">[Thursday 17 February 2011] [04:15:02] &lt;yrashk&gt;       realtime progress, eh?</div>
<div class="line">[Thursday 17 February 2011] [04:18:54] &lt;yrashk&gt;       what size &amp; count should I test it on?</div>
<div class="line">[Thursday 17 February 2011] [04:21:15] &lt;yrashk&gt;       I think official erlzmq is somewhat broken</div>
<div class="line">[Thursday 17 February 2011] [04:22:38] &lt;jugg&gt; yrashk, pushed.</div>
<div class="line">[Thursday 17 February 2011] [04:22:58] &lt;yrashk&gt;       jugg: cool!</div>
<div class="line">[Thursday 17 February 2011] [04:23:24] &lt;yrashk&gt;       zeromq/erlzmq setsockopt doesn&#8217;t work with the type of sockets socket/* create :S</div>
<div class="line">[Thursday 17 February 2011] [04:26:57] &lt;yrashk&gt;       aaand {error,einval} :-</div>
<div class="line">[Thursday 17 February 2011] [04:29:47] &lt;yrashk&gt;       ok, I&#8217;ll try to package jugg&#8217;s fork now</div>
<div class="line">[Thursday 17 February 2011] [04:32:34] &lt;yrashk&gt;       done</div>
<div class="line">[Thursday 17 February 2011] [04:32:41] &lt;yrashk&gt;       it looks much cleaner</div>
<div class="line">[Thursday 17 February 2011] [04:35:37] &lt;CIA-21&gt;       zeromq2: 03Martin Sustrik 07master * r28f3e87 10/ (5 files):</div>
<div class="line">[Thursday 17 February 2011] [04:35:37] &lt;CIA-21&gt;       zeromq2: Add delay before reconnecting</div>
<div class="line">[Thursday 17 February 2011] [04:35:37] &lt;CIA-21&gt;       zeromq2: So far ZMQ_RECONNECT_IVL delay was used only when TCP connect</div>
<div class="line">[Thursday 17 February 2011] [04:35:37] &lt;CIA-21&gt;       zeromq2: failed. Now it is used even if connect succeeds and the peer</div>
<div class="line">[Thursday 17 February 2011] [04:35:37] &lt;CIA-21&gt;       zeromq2: closes the connection afterwards.</div>
<div class="line">[Thursday 17 February 2011] [04:35:38] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/i9iO9x">http://bit.ly/i9iO9x</a></div>
<div class="line">[Thursday 17 February 2011] [04:36:17] &lt;sustrik&gt;      yrashk: any perf results?</div>
<div class="line">[Thursday 17 February 2011] [04:36:35] &lt;sustrik&gt;      use something like 1M messages, each 1B long</div>
<div class="line">[Thursday 17 February 2011] [04:39:21] &lt;yrashk&gt;       sustrik: almost there</div>
<div class="line">[Thursday 17 February 2011] [04:39:28] &lt;yrashk&gt;       sustrik: fixing last bugs</div>
<div class="line">[Thursday 17 February 2011] [04:39:37] &lt;jugg&gt; yrashk, for those perf tests, if you run local/remote on the same node under the same zmq context, you&#8217;ll be sharing a single port which could cause a bottleneck.  Either run them on separate nodes, or create two contexts, one for local, one for remote.  (Using a port per socket is a TODO item).</div>
<div class="line">[Thursday 17 February 2011] [04:40:22] &lt;yrashk&gt;       it is late in the night so I am not sure if my math is right</div>
<div class="line">[Thursday 17 February 2011] [04:40:27] &lt;yrashk&gt;       jugg: testing on separate vms</div>
<div class="line">[Thursday 17 February 2011] [04:40:32] &lt;jugg&gt; k</div>
<div class="line">[Thursday 17 February 2011] [04:40:48] &lt;yrashk&gt;           Throughput = MessageCount / Elapsed</div>
<div class="line">[Thursday 17 February 2011] [04:40:53] &lt;yrashk&gt;       Elapsed is in microseconds</div>
<div class="line">[Thursday 17 February 2011] [04:41:16] &lt;yrashk&gt;       I guess I need to multiply by 1000</div>
<div class="line">[Thursday 17 February 2011] [04:42:13] &lt;yrashk&gt;       1M messages taking some time...</div>
<div class="line">[Thursday 17 February 2011] [04:42:17] &lt;yrashk&gt;       quite some time</div>
<div class="line">[Thursday 17 February 2011] [04:42:44] &lt;yrashk&gt;       sustrik: how long 1M of 1B is supposed to be with raw 0mq?</div>
<div class="line">[Thursday 17 February 2011] [04:42:53] &lt;sustrik&gt;      fraction of a second</div>
<div class="line">[Thursday 17 February 2011] [04:43:15] &lt;yrashk&gt;       ha</div>
<div class="line">[Thursday 17 February 2011] [04:43:25] &lt;yrashk&gt;       well erlzmq is doomed then</div>
<div class="line">[Thursday 17 February 2011] [04:43:59] &lt;jugg&gt; can you post the code?</div>
<div class="line">[Thursday 17 February 2011] [04:44:15] &lt;sustrik&gt;      0.3 sec on my box</div>
<div class="line">[Thursday 17 February 2011] [04:44:46] &lt;yrashk&gt;       <a class="reference external" href="https://gist.github.com/5c3005692b594c318897">https://gist.github.com/5c3005692b594c318897</a></div>
<div class="line">[Thursday 17 February 2011] [04:44:53] &lt;yrashk&gt;       sustrik: with raw 0mq right?</div>
<div class="line">[Thursday 17 February 2011] [04:45:04] &lt;sustrik&gt;      yes</div>
<div class="line">[Thursday 17 February 2011] [04:46:17] &lt;yrashk&gt;       well it took about half a minute here</div>
<div class="line">[Thursday 17 February 2011] [04:46:18] &lt;yrashk&gt;       hehe</div>
<div class="line">[Thursday 17 February 2011] [04:46:31] &lt;yrashk&gt;       for tcp transport</div>
<div class="line">[Thursday 17 February 2011] [04:46:56] &lt;yrashk&gt;       mean throughput: 30524.908462667627 [msg/s]</div>
<div class="line">[Thursday 17 February 2011] [04:47:10] &lt;yrashk&gt;       (if my math is correct)</div>
<div class="line">[Thursday 17 February 2011] [04:47:20] &lt;yrashk&gt;       (this is csrl&#8217;s fork)</div>
<div class="line">[Thursday 17 February 2011] [04:52:18] &lt;yrashk&gt;       official one, I can&#8217;t even test yet</div>
<div class="line">[Thursday 17 February 2011] [04:52:23] &lt;yrashk&gt;       getting einval on recv</div>
<div class="line">[Thursday 17 February 2011] [04:53:20] &lt;yrashk&gt;       sustrik: jugg ^^^</div>
<div class="line">[Thursday 17 February 2011] [04:54:25] &lt;sustrik&gt;      strange</div>
<div class="line">[Thursday 17 February 2011] [04:54:58] &lt;yrashk&gt;       this performance isn&#8217;t impressive at all :-(</div>
<div class="line">[Thursday 17 February 2011] [04:55:09] &lt;sustrik&gt;      maybe because of &#8220;active&#8221;?</div>
<div class="line">[Thursday 17 February 2011] [04:56:06] &lt;sustrik&gt;      in any case, don&#8217;t throw the tests away</div>
<div class="line">[Thursday 17 February 2011] [04:56:23] &lt;sustrik&gt;      let&#8217;s merge them to erlzmq</div>
<div class="line">[Thursday 17 February 2011] [04:56:36] &lt;yrashk&gt;       I am trying to set active to false explicitly</div>
<div class="line">[Thursday 17 February 2011] [04:57:20] &lt;yrashk&gt;       ok it worked</div>
<div class="line">[Thursday 17 February 2011] [04:57:25] &lt;yrashk&gt;       I think it was enabled by default</div>
<div class="line">[Thursday 17 February 2011] [04:58:24] &lt;yrashk&gt;       I suspect that official w/o active is even slower</div>
<div class="line">[Thursday 17 February 2011] [04:58:30] &lt;yrashk&gt;       no</div>
<div class="line">[Thursday 17 February 2011] [04:58:32] &lt;yrashk&gt;       about the same</div>
<div class="line">[Thursday 17 February 2011] [04:58:38] &lt;yrashk&gt;       mean throughput: 32142.1195960057 [msg/s]</div>
<div class="line">[Thursday 17 February 2011] [04:58:49] &lt;sustrik&gt;      hm</div>
<div class="line">[Thursday 17 February 2011] [04:59:17] &lt;yrashk&gt;       creating another version to test with active on</div>
<div class="line">[Thursday 17 February 2011] [05:01:02] &lt;yrashk&gt;       active was even worse</div>
<div class="line">[Thursday 17 February 2011] [05:01:02] &lt;yrashk&gt;       mean throughput: 28188.449027560524 [msg/s]</div>
<div class="line">[Thursday 17 February 2011] [05:01:35] &lt;mikko&gt;        sustrik: whats the process in updating openpgm?</div>
<div class="line">[Thursday 17 February 2011] [05:01:36] &lt;yrashk&gt;       and</div>
<div class="line">[Thursday 17 February 2011] [05:01:37] &lt;yrashk&gt;       mean throughput: 26443.701834780386 [msg/s]</div>
<div class="line">[Thursday 17 February 2011] [05:01:52] &lt;sustrik&gt;      mikko: i don&#8217;t know, mato did it</div>
<div class="line">[Thursday 17 February 2011] [05:02:03] &lt;sustrik&gt;      i suppose it&#8217;s just replacing the archive</div>
<div class="line">[Thursday 17 February 2011] [05:02:30] &lt;mikko&gt;        sustrik: i think we are soon in a point where we can invoke openpgm autotools build</div>
<div class="line">[Thursday 17 February 2011] [05:02:38] &lt;mikko&gt;        and remove large amount of duplicated work</div>
<div class="line">[Thursday 17 February 2011] [05:02:46] &lt;sustrik&gt;      wow</div>
<div class="line">[Thursday 17 February 2011] [05:02:53] &lt;mikko&gt;        everything still works as they did before (bundled openpgm)</div>
<div class="line">[Thursday 17 February 2011] [05:02:53] &lt;sustrik&gt;      congrats</div>
<div class="line">[Thursday 17 February 2011] [05:03:08] &lt;mikko&gt;        but it just runs openpgm &#8216;configure&#8217; from zeromq &#8216;configure&#8217;</div>
<div class="line">[Thursday 17 February 2011] [05:03:13] &lt;sustrik&gt;      yrashk: time to profile erlzmq :)</div>
<div class="line">[Thursday 17 February 2011] [05:03:45] &lt;mikko&gt;        also, all compiler choices etc flow down to openpgm build</div>
<div class="line">[Thursday 17 February 2011] [05:04:01] &lt;<a href="#id475"><span class="problematic" id="id476">pieterh_</span></a>&gt;     sustrik, fix to mailbox did not work, I&#8217;ve sent details to the list</div>
<div class="line">[Thursday 17 February 2011] [05:04:02] &lt;sustrik&gt;      nice</div>
<div class="line">[Thursday 17 February 2011] [05:04:20] &lt;sustrik&gt;      <a href="#id477"><span class="problematic" id="id478">pieterh_</span></a>: yes, it&#8217;s a complex problem</div>
<div class="line">[Thursday 17 February 2011] [05:04:23] &lt;mikko&gt;        should i add gcov to zeromq as well?</div>
<div class="line">[Thursday 17 February 2011] [05:04:27] &lt;sustrik&gt;      see the original email in the thread</div>
<div class="line">[Thursday 17 February 2011] [05:04:33] &lt;mikko&gt;        so that we can visually see what&#8217;s tested and what&#8217;s not?</div>
<div class="line">[Thursday 17 February 2011] [05:04:50] &lt;yrashk&gt;       sustrik, jugg: ok so I have patches with perf teststo merge in now, interested?</div>
<div class="line">[Thursday 17 February 2011] [05:04:55] &lt;<a href="#id479"><span class="problematic" id="id480">pieterh_</span></a>&gt;     sustrik: IMO there is a bug in the mailbox handling of reconnect commands</div>
<div class="line">[Thursday 17 February 2011] [05:05:10] &lt;<a href="#id481"><span class="problematic" id="id482">pieterh_</span></a>&gt;     the mailbox grows consistently for each reconnect</div>
<div class="line">[Thursday 17 February 2011] [05:05:15] &lt;jugg&gt; yrashk, sure</div>
<div class="line">[Thursday 17 February 2011] [05:05:18] &lt;<a href="#id483"><span class="problematic" id="id484">pieterh_</span></a>&gt;     doesn&#8217;t matter how fast or slow you do them</div>
<div class="line">[Thursday 17 February 2011] [05:05:24] &lt;sustrik&gt;      mikko: why not</div>
<div class="line">[Thursday 17 February 2011] [05:05:48] &lt;yrashk&gt;       jugg: sent performance tests pull req</div>
<div class="line">[Thursday 17 February 2011] [05:05:49] &lt;sustrik&gt;      <a href="#id485"><span class="problematic" id="id486">pieterh_</span></a>: it&#8217;s because the application thread does not process the commands (it&#8217;s sleeping)</div>
<div class="line">[Thursday 17 February 2011] [05:06:20] &lt;<a href="#id487"><span class="problematic" id="id488">pieterh_</span></a>&gt;     sustrik: ack, any way to discard duplicates?</div>
<div class="line">[Thursday 17 February 2011] [05:06:34] &lt;yrashk&gt;       I am a very sad panda now</div>
<div class="line">[Thursday 17 February 2011] [05:06:40] &lt;sustrik&gt;      not really, they are in the middle of the socketpair buffer</div>
<div class="line">[Thursday 17 February 2011] [05:06:53] &lt;<a href="#id489"><span class="problematic" id="id490">pieterh_</span></a>&gt;     then kill the parent socket if it doesn&#8217;t behave</div>
<div class="line">[Thursday 17 February 2011] [05:06:54] &lt;sustrik&gt;      rather the reconnection logic should be rethought</div>
<div class="line">[Thursday 17 February 2011] [05:07:12] &lt;sustrik&gt;      that&#8217;s an option</div>
<div class="line">[Thursday 17 February 2011] [05:07:19] &lt;sustrik&gt;      EBROKEN</div>
<div class="line">[Thursday 17 February 2011] [05:07:22] &lt;yrashk&gt;       sustrik: <a class="reference external" href="https://github.com/zeromq/erlzmq/pull/16">https://github.com/zeromq/erlzmq/pull/16</a></div>
<div class="line">[Thursday 17 February 2011] [05:07:23] &lt;<a href="#id491"><span class="problematic" id="id492">pieterh_</span></a>&gt;     yes, exactly</div>
<div class="line">[Thursday 17 February 2011] [05:07:56] &lt;sustrik&gt;      yrashk: thx</div>
<div class="line">[Thursday 17 February 2011] [05:08:07] &lt;<a href="#id493"><span class="problematic" id="id494">pieterh_</span></a>&gt;     it&#8217;s not a 0MQ error, it&#8217;s a caller error, so it should kill whatever&#8217;s misbehaving and return an error</div>
<div class="line">[Thursday 17 February 2011] [05:08:07] &lt;yrashk&gt;       still, 30K 1-byte messages per second...</div>
<div class="line">[Thursday 17 February 2011] [05:08:10] &lt;<a href="#id495"><span class="problematic" id="id496">pieterh_</span></a>&gt;     not assert, of course</div>
<div class="line">[Thursday 17 February 2011] [05:08:13] &lt;yrashk&gt;       :S</div>
<div class="line">[Thursday 17 February 2011] [05:08:26] &lt;<a href="#id497"><span class="problematic" id="id498">pieterh_</span></a>&gt;     yrashk, you running AMQP?</div>
<div class="line">[Thursday 17 February 2011] [05:08:58] &lt;<a href="#id499"><span class="problematic" id="id500">pieterh_</span></a>&gt;     just kidding, there was a 30K figure from someone impressed with AMQP, on Twitter...</div>
<div class="line">[Thursday 17 February 2011] [05:10:45] &lt;yrashk&gt;       <a href="#id501"><span class="problematic" id="id502">pieterh_</span></a>: no, erlzmq actually</div>
<div class="line">[Thursday 17 February 2011] [05:10:47] &lt;yrashk&gt;       i am not impressed</div>
<div class="line">[Thursday 17 February 2011] [05:10:51] &lt;yrashk&gt;       rather opposite</div>
<div class="line">[Thursday 17 February 2011] [05:11:08] &lt;<a href="#id503"><span class="problematic" id="id504">pieterh_</span></a>&gt;     erlang does some heavy locking, I&#8217;ve been told</div>
<div class="line">[Thursday 17 February 2011] [05:11:31] &lt;yrashk&gt;       this is a very vague statement</div>
<div class="line">[Thursday 17 February 2011] [05:11:58] &lt;<a href="#id505"><span class="problematic" id="id506">pieterh_</span></a>&gt;     indeed</div>
<div class="line">[Thursday 17 February 2011] [05:12:02] &lt;yrashk&gt;       I can&#8217;t even reply to it</div>
<div class="line">[Thursday 17 February 2011] [05:12:50] &lt;<a href="#id507"><span class="problematic" id="id508">pieterh_</span></a>&gt;     i mean, it&#8217;s spending its time somewhere and that is not 0MQ and probably not erlzmq as such either</div>
<div class="line">[Thursday 17 February 2011] [05:13:50] &lt;mikko&gt;        <a class="reference external" href="http://www.erlang-factory.com/upload/presentations/303/rickard-green-euc2010.pdf">http://www.erlang-factory.com/upload/presentations/303/rickard-green-euc2010.pdf</a></div>
<div class="line">[Thursday 17 February 2011] [05:13:54] &lt;mikko&gt;        erlang locking explained</div>
<div class="line">[Thursday 17 February 2011] [05:14:28] &lt;yrashk&gt;       I assume everyone knows what erlang rwlocks are</div>
<div class="line">[Thursday 17 February 2011] [05:14:41] &lt;mikko&gt;        i didn&#8217;t before i read that</div>
<div class="line">[Thursday 17 February 2011] [05:15:21] &lt;<a href="#id509"><span class="problematic" id="id510">pieterh_</span></a>&gt;     yrashk, few people here have every used erlang</div>
<div class="line">[Thursday 17 February 2011] [05:15:25] &lt;<a href="#id511"><span class="problematic" id="id512">pieterh_</span></a>&gt;     <a href="#id31"><span class="problematic" id="id32">*</span></a>ever used</div>
<div class="line">[Thursday 17 February 2011] [05:16:00] &lt;<a href="#id513"><span class="problematic" id="id514">pieterh_</span></a>&gt;     mikko, interesting stuff but does anyone have figures for the actual overhead of erlang rwlocks?</div>
<div class="line">[Thursday 17 February 2011] [05:18:49] &lt;<a href="#id515"><span class="problematic" id="id516">pieterh_</span></a>&gt;     sustrik: any best practice on turning an identity blob_t into a printable string for error reporting?</div>
<div class="line">[Thursday 17 February 2011] [05:18:59] &lt;yrashk&gt;       what really upsets me is that erlzmq is maintained by saleyn</div>
<div class="line">[Thursday 17 February 2011] [05:19:08] &lt;yrashk&gt;       if he can&#8217;t make it fast, then who can? :-</div>
<div class="line">[Thursday 17 February 2011] [05:19:20] &lt;<a href="#id517"><span class="problematic" id="id518">pieterh_</span></a>&gt;     maybe 30k/sec is fast, it&#8217;s always relative...</div>
<div class="line">[Thursday 17 February 2011] [05:19:30] &lt;yrashk&gt;       I don&#8217;t think it&#8217;s fast</div>
<div class="line">[Thursday 17 February 2011] [05:19:38] &lt;yrashk&gt;       if raw 0mq can do it like 100 times faster</div>
<div class="line">[Thursday 17 February 2011] [05:19:48] &lt;<a href="#id519"><span class="problematic" id="id520">pieterh_</span></a>&gt;     Have you measured the raw speed of two erlang tasks talking to each other?</div>
<div class="line">[Thursday 17 February 2011] [05:19:58] &lt;yrashk&gt;       nope</div>
<div class="line">[Thursday 17 February 2011] [05:20:05] &lt;yrashk&gt;       I think jugg had</div>
<div class="line">[Thursday 17 February 2011] [05:20:07] &lt;yrashk&gt;       did you?</div>
<div class="line">[Thursday 17 February 2011] [05:20:26] &lt;<a href="#id521"><span class="problematic" id="id522">pieterh_</span></a>&gt;     So Erlang is afaik not meant to be a high performance language but a language for reliable distributed systems</div>
<div class="line">[Thursday 17 February 2011] [05:21:13] &lt;<a href="#id523"><span class="problematic" id="id524">pieterh_</span></a>&gt;     I suspect (with only third-hand information) that you&#8217;ll find it to be around 30K/second</div>
<div class="line">[Thursday 17 February 2011] [05:21:34] &lt;<a href="#id525"><span class="problematic" id="id526">pieterh_</span></a>&gt;     Which is actually fine for many apps</div>
<div class="line">[Thursday 17 February 2011] [05:21:50] &lt;<a href="#id527"><span class="problematic" id="id528">pieterh_</span></a>&gt;     Especially if they process only one stream of data</div>
<div class="line">[Thursday 17 February 2011] [05:22:14] &lt;yrashk&gt;       &#8220;I see therefore that on two different Erlang nodes, this benchmark gives a result of an average of 700 thousands ping/pong messages per minute&#8221;</div>
<div class="line">[Thursday 17 February 2011] [05:22:18] &lt;yrashk&gt;       just googled this</div>
<div class="line">[Thursday 17 February 2011] [05:22:32] &lt;yrashk&gt;       well it looks like we&#8217;re doing more</div>
<div class="line">[Thursday 17 February 2011] [05:22:32] &lt;<a href="#id529"><span class="problematic" id="id530">pieterh_</span></a>&gt;     hmm, 20x faster...</div>
<div class="line">[Thursday 17 February 2011] [05:22:41] &lt;yrashk&gt;       we have million per 30 seconds</div>
<div class="line">[Thursday 17 February 2011] [05:22:49] &lt;<a href="#id531"><span class="problematic" id="id532">pieterh_</span></a>&gt;     per <em>minute</em>...</div>
<div class="line">[Thursday 17 February 2011] [05:23:08] &lt;yrashk&gt;       it&#8217;s ping/pong tho</div>
<div class="line">[Thursday 17 February 2011] [05:23:09] &lt;<a href="#id533"><span class="problematic" id="id534">pieterh_</span></a>&gt;     that&#8217;s ping pongs</div>
<div class="line">[Thursday 17 February 2011] [05:23:11] &lt;<a href="#id535"><span class="problematic" id="id536">pieterh_</span></a>&gt;     so double it</div>
<div class="line">[Thursday 17 February 2011] [05:23:15] &lt;yrashk&gt;       1,4mln</div>
<div class="line">[Thursday 17 February 2011] [05:23:19] &lt;<a href="#id537"><span class="problematic" id="id538">pieterh_</span></a>&gt;     1,400,000/minute</div>
<div class="line">[Thursday 17 February 2011] [05:23:38] &lt;<a href="#id539"><span class="problematic" id="id540">pieterh_</span></a>&gt;     23k/second</div>
<div class="line">[Thursday 17 February 2011] [05:23:38] &lt;yrashk&gt;       sustrik: in your tests, I assume you run over tcp?</div>
<div class="line">[Thursday 17 February 2011] [05:24:06] &lt;yrashk&gt;       &#8220;I see therefore that within the same Erlang node, this benchmark gives a result of an average of 5.3 million ping/pong messages per minute, the same that we had without the queuing mechanism.&#8221;</div>
<div class="line">[Thursday 17 February 2011] [05:24:08] &lt;<a href="#id541"><span class="problematic" id="id542">pieterh_</span></a>&gt;     which is pretty much equal to 30k/sec allowing for system differences</div>
<div class="line">[Thursday 17 February 2011] [05:24:45] &lt;yrashk&gt;       sustrik: also, different processes?</div>
<div class="line">[Thursday 17 February 2011] [05:25:43] &lt;<a href="#id543"><span class="problematic" id="id544">pieterh_</span></a>&gt;     so 160k/sec within same node</div>
<div class="line">[Thursday 17 February 2011] [05:26:46] &lt;yrashk&gt;       I just want to verify raw 0mq can do million messages betwen two diff processes over tcp on macosx in 0.3 secs</div>
<div class="line">[Thursday 17 February 2011] [05:26:56] &lt;yrashk&gt;       whether raw 0mq*</div>
<div class="line">[Thursday 17 February 2011] [05:27:08] &lt;yrashk&gt;       does this sound about right?</div>
<div class="line">[Thursday 17 February 2011] [05:27:32] &lt;yrashk&gt;       obviously there&#8217;s an overhead in any higher level language esp with VM likes beam</div>
<div class="line">[Thursday 17 February 2011] [05:27:32] &lt;<a href="#id545"><span class="problematic" id="id546">pieterh_</span></a>&gt;     yrashk, not ping pong, just send?</div>
<div class="line">[Thursday 17 February 2011] [05:27:40] &lt;yrashk&gt;       just sends</div>
<div class="line">[Thursday 17 February 2011] [05:27:42] &lt;yrashk&gt;       and recvs</div>
<div class="line">[Thursday 17 February 2011] [05:27:47] &lt;<a href="#id547"><span class="problematic" id="id548">pieterh_</span></a>&gt;     well, it will batch messages</div>
<div class="line">[Thursday 17 February 2011] [05:27:55] &lt;yrashk&gt;       but I want to make sure it is 100 times faster</div>
<div class="line">[Thursday 17 February 2011] [05:28:14] &lt;<a href="#id549"><span class="problematic" id="id550">pieterh_</span></a>&gt;     so if you use 1 byte messages you will get a throughput of several million per second at least</div>
<div class="line">[Thursday 17 February 2011] [05:28:43] &lt;<a href="#id551"><span class="problematic" id="id552">pieterh_</span></a>&gt;     depends a lot on your material here</div>
<div class="line">[Thursday 17 February 2011] [05:28:43] &lt;yrashk&gt;       I guess this is what is causing a problem in erlzmq</div>
<div class="line">[Thursday 17 February 2011] [05:28:52] &lt;<a href="#id553"><span class="problematic" id="id554">pieterh_</span></a>&gt;     multicore = multifaster</div>
<div class="line">[Thursday 17 February 2011] [05:30:47] &lt;yrashk&gt;       does anybody have any other binding available with perf tests available?</div>
<div class="line">[Thursday 17 February 2011] [05:30:51] &lt;yrashk&gt;       like rbzmq?</div>
<div class="line">[Thursday 17 February 2011] [05:31:08] &lt;yrashk&gt;       I just don&#8217;t want to go throguh system-wide installation of zeromq and such</div>
<div class="line">[Thursday 17 February 2011] [05:31:25] &lt;yrashk&gt;       I copied my test from ruby&#8217;s remote/local_thr.rb</div>
<div class="line">[Thursday 17 February 2011] [05:33:49] &lt;mikko&gt;        do you want bindings tested or is local_thr/remote_thr from zeromq ok?</div>
<div class="line">[Thursday 17 February 2011] [05:34:33] &lt;yrashk&gt;       ideally I want both :D</div>
<div class="line">[Thursday 17 February 2011] [05:34:39] &lt;yrashk&gt;       I can do the zeromq thing myself I guess</div>
<div class="line">[Thursday 17 February 2011] [05:38:21] &lt;yrashk&gt;       mean throughput: 2315163 [msg/s]</div>
<div class="line">[Thursday 17 February 2011] [05:38:52] &lt;<a href="#id555"><span class="problematic" id="id556">pieterh_</span></a>&gt;     yrashk, that&#8217;s rbzmq?</div>
<div class="line">[Thursday 17 February 2011] [05:39:03] &lt;mikko&gt;        mean throughput: 4997086 [msg/s]</div>
<div class="line">[Thursday 17 February 2011] [05:39:16] &lt;mikko&gt;        over lo using tcp socket on OS X</div>
<div class="line">[Thursday 17 February 2011] [05:39:26] &lt;yrashk&gt;       <a href="#id557"><span class="problematic" id="id558">pieterh_</span></a>: that&#8217;s raw 0mq</div>
<div class="line">[Thursday 17 February 2011] [05:39:36] &lt;yrashk&gt;       win 10</div>
<div class="line">[Thursday 17 February 2011] [05:39:38] &lt;yrashk&gt;       oops</div>
<div class="line">[Thursday 17 February 2011] [05:39:48] &lt;mikko&gt;        mean throughput: 5345358 [msg/s]</div>
<div class="line">[Thursday 17 February 2011] [05:39:51] &lt;mikko&gt;        over en0</div>
<div class="line">[Thursday 17 February 2011] [05:41:50] &lt;yrashk&gt;       this is all raw 0mq right?</div>
<div class="line">[Thursday 17 February 2011] [05:41:57] &lt;mikko&gt;        yes</div>
<div class="line">[Thursday 17 February 2011] [05:41:58] &lt;yrashk&gt;       anybody with rbzmq or pyzmq handy?</div>
<div class="line">[Thursday 17 February 2011] [05:42:06] &lt;mikko&gt;        i do</div>
<div class="line">[Thursday 17 February 2011] [05:42:09] &lt;mikko&gt;        i build them all :)</div>
<div class="line">[Thursday 17 February 2011] [05:42:16] &lt;mikko&gt;        sec</div>
<div class="line">[Thursday 17 February 2011] [05:42:22] &lt;yrashk&gt;       can you please run the same test? 1b msgs 1mln times</div>
<div class="line">[Thursday 17 February 2011] [05:44:58] &lt;mikko&gt;        yrashk: let me figure out how</div>
<div class="line">[Thursday 17 February 2011] [05:45:13] &lt;yrashk&gt;       mikko: in rbzmq those are exactly the same tests</div>
<div class="line">[Thursday 17 February 2011] [05:45:26] &lt;yrashk&gt;       perf/local_thr.rb perf/remote_thr.rb</div>
<div class="line">[Thursday 17 February 2011] [05:46:19] &lt;mikko&gt;        ok</div>
<div class="line">[Thursday 17 February 2011] [05:47:48] &lt;mikko&gt;        i think im running it now</div>
<div class="line">[Thursday 17 February 2011] [05:50:02] &lt;mikko&gt;        takes very long time with ruby</div>
<div class="line">[Thursday 17 February 2011] [05:50:33] &lt;yrashk&gt;       mikko: lets wait until it&#8217;s done</div>
<div class="line">[Thursday 17 February 2011] [05:50:43] &lt;yrashk&gt;       did you use <a class="reference external" href="tcp://127.0.0.1:port">tcp://127.0.0.1:port</a> 1 1000000</div>
<div class="line">[Thursday 17 February 2011] [05:50:45] &lt;yrashk&gt;       or something?</div>
<div class="line">[Thursday 17 February 2011] [05:51:01] &lt;mikko&gt;        i started with 100000000 or so</div>
<div class="line">[Thursday 17 February 2011] [05:51:09] &lt;mikko&gt;        now testing quickly with 10 that it actually works</div>
<div class="line">[Thursday 17 February 2011] [05:51:27] &lt;yrashk&gt;       well I want the same test</div>
<div class="line">[Thursday 17 February 2011] [05:51:32] &lt;yrashk&gt;       1 byte msgs, 1mln messages</div>
<div class="line">[Thursday 17 February 2011] [05:51:37] &lt;mikko&gt;        <a class="reference external" href="https://gist.github.com/62772ec66fc1a46a3372">https://gist.github.com/62772ec66fc1a46a3372</a></div>
<div class="line">[Thursday 17 February 2011] [05:51:55] &lt;mikko&gt;        this is on linux</div>
<div class="line">[Thursday 17 February 2011] [05:51:58] &lt;yrashk&gt;       that&#8217;s 10mlns but thanks anyway</div>
<div class="line">[Thursday 17 February 2011] [05:52:17] &lt;mikko&gt;        and ruby</div>
<div class="line">[Thursday 17 February 2011] [05:52:20] &lt;mikko&gt;        <a class="reference external" href="http://build.valokuva.org/">http://build.valokuva.org/</a></div>
<div class="line">[Thursday 17 February 2011] [05:52:23] &lt;mikko&gt;        i got those available</div>
<div class="line">[Thursday 17 February 2011] [05:57:52] &lt;jugg&gt; porting yrashk&#8217;s tests to do raw erlang message passing between two nodes yields 59645.1127719094 [msg/s].</div>
<div class="line">[Thursday 17 February 2011] [05:58:09] &lt;jugg&gt; to clarify that is without zeromq</div>
<div class="line">[Thursday 17 February 2011] [05:59:19] &lt;mikko&gt;        ok</div>
<div class="line">[Thursday 17 February 2011] [06:00:00] &lt;yrashk&gt;       jugg: so twice as fast</div>
<div class="line">[Thursday 17 February 2011] [06:00:55] &lt;jugg&gt; using zmq (tcp lo) those tests yield 21378.701789023213 [msg/s]  on my system.</div>
<div class="line">[Thursday 17 February 2011] [06:01:18] &lt;jugg&gt; erlzmq that is...</div>
<div class="line">[Thursday 17 February 2011] [06:01:43] &lt;jugg&gt; anyway, I&#8217;m off. yrashk, I&#8217;ll look at your pull request later.</div>
<div class="line">[Thursday 17 February 2011] [06:01:52] &lt;yrashk&gt;       well my pull req == git</div>
<div class="line">[Thursday 17 February 2011] [06:01:53] &lt;yrashk&gt;       gist</div>
<div class="line">[Thursday 17 February 2011] [06:01:54] &lt;mikko&gt;        yrashk: not many things on your blog</div>
<div class="line">[Thursday 17 February 2011] [06:02:03] &lt;mikko&gt;        in*</div>
<div class="line">[Thursday 17 February 2011] [06:02:05] &lt;yrashk&gt;       mikko: it&#8217;s empty, I know</div>
<div class="line">[Thursday 17 February 2011] [06:02:08] &lt;yrashk&gt;       I keep myself busy</div>
<div class="line">[Thursday 17 February 2011] [06:02:34] &lt;mikko&gt;        is there more locking involved accessing zeromq sockets from erlang?</div>
<div class="line">[Thursday 17 February 2011] [06:02:38] &lt;mikko&gt;        like explicit locking?</div>
<div class="line">[Thursday 17 February 2011] [06:22:36] &lt;sustrik&gt;      re</div>
<div class="line">[Thursday 17 February 2011] [06:24:42] &lt;sustrik&gt;      <a href="#id559"><span class="problematic" id="id560">pieterh_</span></a>: no standard way to convert blob into string</div>
<div class="line">[Thursday 17 February 2011] [06:25:39] &lt;sustrik&gt;      yrashk: i&#8217;ve used TCP</div>
<div class="line">[Thursday 17 February 2011] [06:25:48] &lt;sustrik&gt;      yrashk: you can investigate further</div>
<div class="line">[Thursday 17 February 2011] [06:26:03] &lt;sustrik&gt;      by running C local_thr vs. Erlang remote_thr</div>
<div class="line">[Thursday 17 February 2011] [06:26:09] &lt;sustrik&gt;      and vice versa</div>
<div class="line">[Thursday 17 February 2011] [06:26:35] &lt;sustrik&gt;      that way you&#8217;ll find out whether the bottleneck on the sender or receiver side</div>
<div class="line">[Thursday 17 February 2011] [06:32:30] &lt;yrashk&gt;       sustrik: I think I have a vague idea on how to make erlzmq faster</div>
<div class="line">[Thursday 17 February 2011] [06:32:44] &lt;yrashk&gt;       will require a lot of rewriting, though</div>
<div class="line">[Thursday 17 February 2011] [06:33:03] &lt;sustrik&gt;      do you have any idea where the bottleneck is?</div>
<div class="line">[Thursday 17 February 2011] [06:33:14] &lt;yrashk&gt;       port driver communication</div>
<div class="line">[Thursday 17 February 2011] [06:33:23] &lt;yrashk&gt;       not confirmed, just an idea</div>
<div class="line">[Thursday 17 February 2011] [06:33:35] &lt;sustrik&gt;      it&#8217;s good to measure it first</div>
<div class="line">[Thursday 17 February 2011] [06:33:45] &lt;sustrik&gt;      otherwise you may end with no perf improvement</div>
<div class="line">[Thursday 17 February 2011] [06:33:46] &lt;yrashk&gt;       hard to measure this, though</div>
<div class="line">[Thursday 17 February 2011] [06:33:57] &lt;yrashk&gt;       but possible</div>
<div class="line">[Thursday 17 February 2011] [06:34:22] &lt;sustrik&gt;      anyway, try the c/erlang perf tests</div>
<div class="line">[Thursday 17 February 2011] [06:34:36] &lt;yrashk&gt;       c/erlang?</div>
<div class="line">[Thursday 17 February 2011] [06:34:40] &lt;sustrik&gt;      it may turn out that the bottleneck is only on one side</div>
<div class="line">[Thursday 17 February 2011] [06:34:48] &lt;sustrik&gt;      &lt;sustrik&gt; yrashk: you can investigate further</div>
<div class="line">[Thursday 17 February 2011] [06:34:49] &lt;sustrik&gt;      &lt;sustrik&gt; by running C local_thr vs. Erlang remote_thr</div>
<div class="line">[Thursday 17 February 2011] [06:34:49] &lt;sustrik&gt;      &lt;sustrik&gt; and vice versa</div>
<div class="line">[Thursday 17 February 2011] [06:34:54] &lt;yrashk&gt;       oh</div>
<div class="line">[Thursday 17 February 2011] [06:34:55] &lt;yrashk&gt;       right</div>
<div class="line">[Thursday 17 February 2011] [06:34:57] &lt;yrashk&gt;       missed that</div>
<div class="line">[Thursday 17 February 2011] [06:35:01] &lt;yrashk&gt;       good idea actually</div>
<div class="line">[Thursday 17 February 2011] [06:36:09] &lt;yrashk&gt;       mean throughput: 30606 [msg/s]</div>
<div class="line">[Thursday 17 February 2011] [06:36:16] &lt;yrashk&gt;       this is C local_thr</div>
<div class="line">[Thursday 17 February 2011] [06:36:55] &lt;yrashk&gt;       mean throughput: 67086.58395785352 [msg/s]</div>
<div class="line">[Thursday 17 February 2011] [06:37:01] &lt;yrashk&gt;       this is Erlang local_thr</div>
<div class="line">[Thursday 17 February 2011] [06:37:39] &lt;yrashk&gt;       so partially it is the way erlzmq&#8217;s send works</div>
<div class="line">[Thursday 17 February 2011] [06:37:50] &lt;yrashk&gt;       sustrik: ^^</div>
<div class="line">[Thursday 17 February 2011] [06:38:13] &lt;sustrik&gt;      both are low</div>
<div class="line">[Thursday 17 February 2011] [06:38:16] &lt;yrashk&gt;       I guess no batching happening with erlzmq</div>
<div class="line">[Thursday 17 February 2011] [06:38:21] &lt;sustrik&gt;      so there&#8217;s some common problem</div>
<div class="line">[Thursday 17 February 2011] [06:38:23] &lt;yrashk&gt;       yes they are</div>
<div class="line">[Thursday 17 February 2011] [06:38:25] &lt;sustrik&gt;      both on send and recv side</div>
<div class="line">[Thursday 17 February 2011] [06:38:37] &lt;yrashk&gt;       but receiving got twice as fast</div>
<div class="line">[Thursday 17 February 2011] [06:38:42] &lt;sustrik&gt;      yup</div>
<div class="line">[Thursday 17 February 2011] [06:39:28] &lt;sustrik&gt;      however, don&#8217;t focus on that, the primary goal is to speed the whole beast ~50x</div>
<div class="line">[Thursday 17 February 2011] [06:39:47] &lt;yrashk&gt;       yeah 50x will be enough</div>
<div class="line">[Thursday 17 February 2011] [06:39:53] &lt;yrashk&gt;       that will be like about 1/2 of raw perf</div>
<div class="line">[Thursday 17 February 2011] [06:40:03] &lt;yrashk&gt;       which is acceptable</div>
<div class="line">[Thursday 17 February 2011] [06:40:04] &lt;sustrik&gt;      afterwards, you can check why recv is 2x faster</div>
<div class="line">[Thursday 17 February 2011] [06:40:12] &lt;sustrik&gt;      ack</div>
<div class="line">[Thursday 17 February 2011] [06:40:28] &lt;yrashk&gt;       well I am blaming erlzmq&#8217;s model (driver) now</div>
<div class="line">[Thursday 17 February 2011] [06:40:35] &lt;sustrik&gt;      quite possible</div>
<div class="line">[Thursday 17 February 2011] [06:40:38] &lt;yrashk&gt;       driver communication isn&#8217;t very fast as far as I understand</div>
<div class="line">[Thursday 17 February 2011] [06:40:45] &lt;yrashk&gt;       I can try converting this into a NIF</div>
<div class="line">[Thursday 17 February 2011] [06:40:51] &lt;sustrik&gt;      NIF?</div>
<div class="line">[Thursday 17 February 2011] [06:40:52] &lt;yrashk&gt;       which may or may not speed it up</div>
<div class="line">[Thursday 17 February 2011] [06:40:59] &lt;yrashk&gt;       Native Implemented Function</div>
<div class="line">[Thursday 17 February 2011] [06:41:03] &lt;yrashk&gt;       much less overhead</div>
<div class="line">[Thursday 17 February 2011] [06:41:23] &lt;yrashk&gt;       port communication sends data and parses it</div>
<div class="line">[Thursday 17 February 2011] [06:41:27] &lt;yrashk&gt;       which isn&#8217;t fast</div>
<div class="line">[Thursday 17 February 2011] [06:42:05] &lt;yrashk&gt;       the only problem is that until some time in future, NIFs are blocking their scheduler. There is a way around that, though &#8211; I wrote erlv8 so I know how to deal with tis</div>
<div class="line">[Thursday 17 February 2011] [06:42:08] &lt;yrashk&gt;       this*</div>
<div class="line">[Thursday 17 February 2011] [06:44:32] &lt;sustrik&gt;      i see</div>
<div class="line">[Thursday 17 February 2011] [06:44:56] &lt;yrashk&gt;       if only I had an unlimited supply of time</div>
<div class="line">[Thursday 17 February 2011] [06:45:12] &lt;yrashk&gt;       although I still may try to rewrite erlzmq</div>
<div class="line">[Thursday 17 February 2011] [06:45:22] &lt;yrashk&gt;       but that will be almost a complete rewrite</div>
<div class="line">[Thursday 17 February 2011] [06:45:23] &lt;yrashk&gt;       :-(</div>
<div class="line">[Thursday 17 February 2011] [06:46:55] &lt;yrashk&gt;       writing NIFs is not much fun, really</div>
<div class="line">[Thursday 17 February 2011] [06:47:06] &lt;yrashk&gt;       so are the drivers, though :)</div>
<div class="line">[Thursday 17 February 2011] [06:48:45] &lt;yrashk&gt;       sustrik: how does the batching work? is it time-based? like batch X messages within T?</div>
<div class="line">[Thursday 17 February 2011] [06:53:12] &lt;sustrik&gt;      it&#8217;s triggered by the network stack</div>
<div class="line">[Thursday 17 February 2011] [06:53:37] &lt;sustrik&gt;      so, when the network stack notifies the user space that there&#8217;s free space in tx buffer</div>
<div class="line">[Thursday 17 February 2011] [06:53:52] &lt;sustrik&gt;      0mq takes as much data as is available atm</div>
<div class="line">[Thursday 17 February 2011] [06:54:04] &lt;sustrik&gt;      and tries to push it into the kernel in a single go</div>
<div class="line">[Thursday 17 February 2011] [06:54:38] &lt;yrashk&gt;       I ee</div>
<div class="line">[Thursday 17 February 2011] [06:54:40] &lt;yrashk&gt;       I see</div>
<div class="line">[Thursday 17 February 2011] [06:54:49] &lt;yrashk&gt;       well at this point I&#8217;d really blame the port communication</div>
<div class="line">[Thursday 17 February 2011] [06:54:55] &lt;sustrik&gt;      well, maybe</div>
<div class="line">[Thursday 17 February 2011] [06:55:04] &lt;sustrik&gt;      if you haven&#8217;t time to play with it</div>
<div class="line">[Thursday 17 February 2011] [06:55:06] &lt;yrashk&gt;       it is an encode -&gt; pass -&gt; decode -&gt; work -&gt; encode -&gt; decode routine</div>
<div class="line">[Thursday 17 February 2011] [06:55:11] &lt;sustrik&gt;      at least write an email to the ML</div>
<div class="line">[Thursday 17 February 2011] [06:55:30] &lt;yrashk&gt;       it is an encode -&gt; pass -&gt; decode -&gt; work -&gt; encode -&gt; pass -&gt; decode routine *</div>
<div class="line">[Thursday 17 February 2011] [06:55:42] &lt;sustrik&gt;      doesn&#8217;t seem very efficient</div>
<div class="line">[Thursday 17 February 2011] [06:56:01] &lt;yrashk&gt;       those encodings/decodings aren&#8217;t super slow by themselves, probably, but still, everything adds up</div>
<div class="line">[Thursday 17 February 2011] [06:56:12] &lt;yrashk&gt;       NIFs work nearly directly with the data</div>
<div class="line">[Thursday 17 February 2011] [06:56:13] &lt;sustrik&gt;      ack</div>
<div class="line">[Thursday 17 February 2011] [06:56:25] &lt;sustrik&gt;      yes, that&#8217;s how other bindings are done</div>
<div class="line">[Thursday 17 February 2011] [06:56:37] &lt;sustrik&gt;      the problem with erlang is its threading model</div>
<div class="line">[Thursday 17 February 2011] [06:56:54] &lt;sustrik&gt;      afaiu blocking in NIF could get the whole VM to a standstill</div>
<div class="line">[Thursday 17 February 2011] [06:56:59] &lt;yrashk&gt;       yes</div>
<div class="line">[Thursday 17 February 2011] [06:57:05] &lt;yrashk&gt;       but there are two points:</div>
<div class="line">[Thursday 17 February 2011] [06:57:46] &lt;yrashk&gt;       1) this is going to change <a class="reference external" href="http://erlang-factory.com/conference/SFBay2011/speakers/RickardGreen">http://erlang-factory.com/conference/SFBay2011/speakers/RickardGreen</a></div>
<div class="line">[Thursday 17 February 2011] [06:58:18] &lt;yrashk&gt;       2) there are some workarounds (basically, two-thread model). I used it in erlv8. Incidentially, I ended up using 0mq inside erlv8&#8217;s NIF</div>
<div class="line">[Thursday 17 February 2011] [06:58:33] &lt;sustrik&gt;      :)</div>
<div class="line">[Thursday 17 February 2011] [06:59:19] &lt;yrashk&gt;       I will be at that conference (I am a speaker there, too) so I will have a chance to attend that talk</div>
<div class="line">[Thursday 17 February 2011] [06:59:25] &lt;yrashk&gt;       (in pt. 1)</div>
<div class="line">[Thursday 17 February 2011] [06:59:35] &lt;sustrik&gt;      i see</div>
<div class="line">[Thursday 17 February 2011] [07:00:32] &lt;sustrik&gt;      are you from SF?</div>
<div class="line">[Thursday 17 February 2011] [07:00:38] &lt;yrashk&gt;       nope</div>
<div class="line">[Thursday 17 February 2011] [07:00:53] &lt;yrashk&gt;       <a class="reference external" href="http://erlang-factory.com/conference/SFBay2011/speakers/YuriiRashkovskii">http://erlang-factory.com/conference/SFBay2011/speakers/YuriiRashkovskii</a></div>
<div class="line">[Thursday 17 February 2011] [07:00:55] &lt;yrashk&gt;       Vancouver, BC</div>
<div class="line">[Thursday 17 February 2011] [07:01:56] &lt;sustrik&gt;      aha, just that i&#8217;m visiting SF shortly</div>
<div class="line">[Thursday 17 February 2011] [07:02:20] &lt;yrashk&gt;       oh</div>
<div class="line">[Thursday 17 February 2011] [07:02:26] &lt;sustrik&gt;      but before the conference</div>
<div class="line">[Thursday 17 February 2011] [07:02:29] &lt;sustrik&gt;      no overlap there</div>
<div class="line">[Thursday 17 February 2011] [07:02:29] &lt;yrashk&gt;       too bad</div>
<div class="line">[Thursday 17 February 2011] [07:02:39] &lt;yrashk&gt;       I&#8217;d love to share a beer or something</div>
<div class="line">[Thursday 17 February 2011] [07:02:58] &lt;yrashk&gt;       open source developers don&#8217;t get much face-to-face time</div>
<div class="line">[Thursday 17 February 2011] [07:03:00] &lt;yrashk&gt;       and it&#8217;s bad</div>
<div class="line">[Thursday 17 February 2011] [07:03:27] &lt;<a href="#id561"><span class="problematic" id="id562">pieterh_</span></a>&gt;     yeah, 5,000 open source developers at FOSDEM earlier in Feb, here in Brussels</div>
<div class="line">[Thursday 17 February 2011] [07:03:45] &lt;yrashk&gt;       well I didn&#8217;t say they don&#8217;t get it at all</div>
<div class="line">[Thursday 17 February 2011] [07:03:48] &lt;yrashk&gt;       just not much</div>
<div class="line">[Thursday 17 February 2011] [07:03:49] &lt;yrashk&gt;       :D</div>
<div class="line">[Thursday 17 February 2011] [07:03:56] &lt;<a href="#id563"><span class="problematic" id="id564">pieterh_</span></a>&gt;     I mean, it&#8217;s only once a year</div>
<div class="line">[Thursday 17 February 2011] [07:04:04] &lt;yrashk&gt;       I see</div>
<div class="line">[Thursday 17 February 2011] [07:04:21] &lt;yrashk&gt;       it would be cool to have a rolling set of unconferences happening in every &#8220;hub&#8221; city</div>
<div class="line">[Thursday 17 February 2011] [07:04:28] &lt;yrashk&gt;       well, they do happen</div>
<div class="line">[Thursday 17 February 2011] [07:04:37] &lt;yrashk&gt;       but they are fairly limited</div>
<div class="line">[Thursday 17 February 2011] [07:05:05] &lt;<a href="#id565"><span class="problematic" id="id566">pieterh_</span></a>&gt;     sustrik: why not do a 0MQ meetup while you&#8217;re there...</div>
<div class="line">[Thursday 17 February 2011] [07:06:08] &lt;sustrik&gt;      yes, i&#8217;ll do that</div>
<div class="line">[Thursday 17 February 2011] [07:06:16] &lt;yrashk&gt;       record some video! :)</div>
<div class="line">[Thursday 17 February 2011] [07:06:30] &lt;yrashk&gt;       if there are going to be any presentations</div>
<div class="line">[Thursday 17 February 2011] [07:06:40] &lt;sustrik&gt;      nope, just people drinking beer :)</div>
<div class="line">[Thursday 17 February 2011] [07:06:45] &lt;yrashk&gt;       sigh</div>
<div class="line">[Thursday 17 February 2011] [07:06:46] &lt;yrashk&gt;       :]</div>
<div class="line">[Thursday 17 February 2011] [07:07:00] &lt;<a href="#id567"><span class="problematic" id="id568">pieterh_</span></a>&gt;     yrashk, there&#8217;s a video of me (I think) praising Erlang at FOSDEM</div>
<div class="line">[Thursday 17 February 2011] [07:07:25] &lt;<a href="#id569"><span class="problematic" id="id570">pieterh_</span></a>&gt;     that&#8217;s &#8220;praising Erlang, I think&#8221; not &#8220;a video of me, I think&#8221;...</div>
<div class="line">[Thursday 17 February 2011] [07:07:26] &lt;yrashk&gt;       <a href="#id571"><span class="problematic" id="id572">pieterh_</span></a>: &#8220;of me (I think)&#8221;</div>
<div class="line">[Thursday 17 February 2011] [07:07:29] &lt;yrashk&gt;       were you drunk? :)</div>
<div class="line">[Thursday 17 February 2011] [07:07:34] &lt;<a href="#id573"><span class="problematic" id="id574">pieterh_</span></a>&gt;     one is never totally sure</div>
<div class="line">[Thursday 17 February 2011] [07:07:51] &lt;<a href="#id575"><span class="problematic" id="id576">pieterh_</span></a>&gt;     FOSDEM is fairly beer intensive</div>
<div class="line">[Thursday 17 February 2011] [07:08:02] &lt;yrashk&gt;       that comes withour saying</div>
<div class="line">[Thursday 17 February 2011] [07:08:24] &lt;yrashk&gt;       although I&#8217;ve never been to one</div>
<div class="line">[Thursday 17 February 2011] [07:08:31] &lt;yrashk&gt;       but just about any dev meetup implies beer</div>
<div class="line">[Thursday 17 February 2011] [07:08:52] &lt;<a href="#id577"><span class="problematic" id="id578">pieterh_</span></a>&gt;     yeah, but in Belgium that implies &#8220;how strong can we get the beer, and how cheaply can we sell it&#8221;</div>
<div class="line">[Thursday 17 February 2011] [07:08:54] &lt;yrashk&gt;       too bad I am a little sensitive to alcohol since like 2005 so I don&#8217;t drink much</div>
<div class="line">[Thursday 17 February 2011] [07:09:01] &lt;<a href="#id579"><span class="problematic" id="id580">pieterh_</span></a>&gt;     me too, sadly</div>
<div class="line">[Thursday 17 February 2011] [07:09:28] &lt;yrashk&gt;       esp beer :-(</div>
<div class="line">[Thursday 17 February 2011] [07:09:35] &lt;yrashk&gt;       weak stomach</div>
<div class="line">[Thursday 17 February 2011] [07:09:38] &lt;<a href="#id581"><span class="problematic" id="id582">pieterh_</span></a>&gt;     anyhow fwiw the video is here:     //  If the session already has an engine attached, destroy new one.</div>
<div class="line">[Thursday 17 February 2011] [07:09:38] &lt;<a href="#id583"><span class="problematic" id="id584">pieterh_</span></a>&gt;         //  Note new engine is not plugged in yet, we don&#8217;t have to unplug it.</div>
<div class="line">[Thursday 17 February 2011] [07:09:38] &lt;<a href="#id585"><span class="problematic" id="id586">pieterh_</span></a>&gt;         if (engine) {</div>
<div class="line">[Thursday 17 February 2011] [07:09:38] &lt;<a href="#id587"><span class="problematic" id="id588">pieterh_</span></a>&gt;             delete <a href="#id589"><span class="problematic" id="id590">engine_</span></a>;</div>
<div class="line">[Thursday 17 February 2011] [07:09:39] &lt;<a href="#id591"><span class="problematic" id="id592">pieterh_</span></a>&gt;             puts (&#8220;HEY!&#8221;);</div>
<div class="line">[Thursday 17 February 2011] [07:09:41] &lt;<a href="#id593"><span class="problematic" id="id594">pieterh_</span></a>&gt;             return;</div>
<div class="line">[Thursday 17 February 2011] [07:09:43] &lt;<a href="#id595"><span class="problematic" id="id596">pieterh_</span></a>&gt;         }</div>
<div class="line">[Thursday 17 February 2011] [07:09:45] &lt;yrashk&gt;       that&#8217;s not the video</div>
<div class="line">[Thursday 17 February 2011] [07:09:45] &lt;yrashk&gt;       :D</div>
<div class="line">[Thursday 17 February 2011] [07:09:48] &lt;<a href="#id597"><span class="problematic" id="id598">pieterh_</span></a>&gt;     aw, wrong paste</div>
<div class="line">[Thursday 17 February 2011] [07:10:15] &lt;<a href="#id599"><span class="problematic" id="id600">pieterh_</span></a>&gt;     <a class="reference external" href="http://www.youtube.com/watch?v=CCBYzKfmQ4U">http://www.youtube.com/watch?v=CCBYzKfmQ4U</a></div>
<div class="line">[Thursday 17 February 2011] [07:11:23] &lt;yrashk&gt;       nice accent</div>
<div class="line">[Thursday 17 February 2011] [07:15:41] &lt;<a href="#id601"><span class="problematic" id="id602">pieterh_</span></a>&gt;     What&#8217;s erlv8? I couldn&#8217;t find that on google</div>
<div class="line">[Thursday 17 February 2011] [07:15:51] &lt;yrashk&gt;       part of <a class="reference external" href="http://beamjs.org/">http://beamjs.org/</a></div>
<div class="line">[Thursday 17 February 2011] [07:16:01] &lt;yrashk&gt;       tightly integrated V8 for Erlang</div>
<div class="line">[Thursday 17 February 2011] [07:16:28] &lt;yrashk&gt;       heeey</div>
<div class="line">[Thursday 17 February 2011] [07:16:33] &lt;yrashk&gt;       Erlang is not a &#8220;weird language&#8221;</div>
<div class="line">[Thursday 17 February 2011] [07:16:34] &lt;yrashk&gt;       ;)</div>
<div class="line">[Thursday 17 February 2011] [07:17:45] &lt;<a href="#id603"><span class="problematic" id="id604">pieterh_</span></a>&gt;     Well, it&#8217;s sooo relative ... :-)</div>
<div class="line">[Thursday 17 February 2011] [07:17:53] &lt;yrashk&gt;       it&#8217;s not weird for me</div>
<div class="line">[Thursday 17 February 2011] [07:17:54] &lt;yrashk&gt;       :D</div>
<div class="line">[Thursday 17 February 2011] [07:18:08] &lt;yrashk&gt;       sayign language is weird is not exactly &#8220;praising&#8221; :-P</div>
<div class="line">[Thursday 17 February 2011] [07:18:09] &lt;yrashk&gt;       ;)</div>
<div class="line">[Thursday 17 February 2011] [07:18:18] &lt;<a href="#id605"><span class="problematic" id="id606">pieterh_</span></a>&gt;     that&#8217;s what my crazy uncle says when he eats raw spinach</div>
<div class="line">[Thursday 17 February 2011] [07:19:35] &lt;kristsk&gt;      why is he eating it raw?</div>
<div class="line">[Thursday 17 February 2011] [07:20:01] &lt;<a href="#id607"><span class="problematic" id="id608">pieterh_</span></a>&gt;     no-one knows, that&#8217;s why we say he&#8217;s weird, but he says &#8220;it&#8217;s not weird for me&#8221;</div>
<div class="line">[Thursday 17 February 2011] [07:20:14] &lt;<a href="#id609"><span class="problematic" id="id610">pieterh_</span></a>&gt;     I think &#8216;weird&#8217; is high praise compared to &#8216;boring&#8217;, &#8216;irrelevant&#8217;, or &#8216;ok&#8217;</div>
<div class="line">[Thursday 17 February 2011] [07:20:23] &lt;<a href="#id611"><span class="problematic" id="id612">pieterh_</span></a>&gt;     people do speak highly of Erlang once they learn it</div>
<div class="line">[Thursday 17 February 2011] [07:20:33] &lt;<a href="#id613"><span class="problematic" id="id614">pieterh_</span></a>&gt;     I&#8217;m too lazy and happily ignorant to make that effort</div>
<div class="line">[Thursday 17 February 2011] [07:20:39] &lt;<a href="#id615"><span class="problematic" id="id616">pieterh_</span></a>&gt;     calling it &#8216;weird&#8217; is much easier</div>
<div class="line">[Thursday 17 February 2011] [07:20:40] &lt;kristsk&gt;      same goes for lisp</div>
<div class="line">[Thursday 17 February 2011] [07:20:43] &lt;yrashk&gt;       ;)</div>
<div class="line">[Thursday 17 February 2011] [07:20:52] &lt;yrashk&gt;       Erlang is actually a fantastic platform</div>
<div class="line">[Thursday 17 February 2011] [07:20:58] &lt;yrashk&gt;       I&#8217;ve used it stating in 2001</div>
<div class="line">[Thursday 17 February 2011] [07:21:04] &lt;yrashk&gt;       and I am always returning to it</div>
<div class="line">[Thursday 17 February 2011] [07:21:08] &lt;yrashk&gt;       from other platforms</div>
<div class="line">[Thursday 17 February 2011] [07:21:18] &lt;kristsk&gt;      addiction eh</div>
<div class="line">[Thursday 17 February 2011] [07:21:28] &lt;<a href="#id617"><span class="problematic" id="id618">pieterh_</span></a>&gt;     it does seem to produce pretty good applications</div>
<div class="line">[Thursday 17 February 2011] [07:21:40] &lt;<a href="#id619"><span class="problematic" id="id620">pieterh_</span></a>&gt;     lots of return on your development investment</div>
<div class="line">[Thursday 17 February 2011] [07:21:59] &lt;<a href="#id621"><span class="problematic" id="id622">pieterh_</span></a>&gt;     but still...</div>
<div class="line">[Thursday 17 February 2011] [07:22:04] &lt;yrashk&gt;       it might be not very fast, but you know, only 20% of code impacts for 80% of slowdown</div>
<div class="line">[Thursday 17 February 2011] [07:22:07] &lt;<a href="#id623"><span class="problematic" id="id624">pieterh_</span></a>&gt;     ... weird :)</div>
<div class="line">[Thursday 17 February 2011] [07:22:14] &lt;yrashk&gt;       so you can rewrite bottlenecks even in C</div>
<div class="line">[Thursday 17 February 2011] [07:22:23] &lt;<a href="#id625"><span class="problematic" id="id626">pieterh_</span></a>&gt;     just trolling, yrashk :)</div>
<div class="line">[Thursday 17 February 2011] [07:22:27] &lt;yrashk&gt;       and it&#8217;s really to write some complicated stuff with it</div>
<div class="line">[Thursday 17 February 2011] [07:22:36] &lt;yrashk&gt;       ikr</div>
<div class="line">[Thursday 17 February 2011] [07:22:48] &lt;<a href="#id627"><span class="problematic" id="id628">pieterh_</span></a>&gt;     I don&#8217;t trust any language that&#8217;s not been properly dead for 10 years</div>
<div class="line">[Thursday 17 February 2011] [07:22:54] &lt;kristsk&gt;      im kinda looking for some pet project to try erlang</div>
<div class="line">[Thursday 17 February 2011] [07:23:00] &lt;yrashk&gt;       see, I&#8217;ve been with erlang for 10 years and i still have hair ;)</div>
<div class="line">[Thursday 17 February 2011] [07:23:09] &lt;<a href="#id629"><span class="problematic" id="id630">pieterh_</span></a>&gt;     true</div>
<div class="line">[Thursday 17 February 2011] [07:23:24] &lt;<a href="#id631"><span class="problematic" id="id632">pieterh_</span></a>&gt;     did it grow faster after you learned Erlang, that&#8217;s my question</div>
<div class="line">[Thursday 17 February 2011] [07:23:26] &lt;yrashk&gt;       kristsk: help porting socket.io server to erlang</div>
<div class="line">[Thursday 17 February 2011] [07:23:31] &lt;yrashk&gt;       <a href="#id633"><span class="problematic" id="id634">pieterh_</span></a>: of coure it did!</div>
<div class="line">[Thursday 17 February 2011] [07:23:34] &lt;yrashk&gt;       course*</div>
<div class="line">[Thursday 17 February 2011] [07:23:46] &lt;yrashk&gt;       kristsk: <a class="reference external" href="https://github.com/yrashk/socket.io-erlang">https://github.com/yrashk/socket.io-erlang</a></div>
<div class="line">[Thursday 17 February 2011] [07:23:57] &lt;kristsk&gt;      huh</div>
<div class="line">[Thursday 17 February 2011] [07:24:02] &lt;yrashk&gt;       I&#8217;ve barely started it but then again I don&#8217;t have much time and my attention span is limited</div>
<div class="line">[Thursday 17 February 2011] [07:24:21] &lt;yrashk&gt;       erlang is like the best platform for socket.io</div>
<div class="line">[Thursday 17 February 2011] [07:24:24] &lt;kristsk&gt;      about same here</div>
<div class="line">[Thursday 17 February 2011] [07:24:32] &lt;kristsk&gt;      regarding attention span</div>
<div class="line">[Thursday 17 February 2011] [07:24:36] &lt;yrashk&gt;       :D</div>
<div class="line">[Thursday 17 February 2011] [07:24:41] &lt;yrashk&gt;       yet i manage to create something</div>
<div class="line">[Thursday 17 February 2011] [07:24:51] &lt;yrashk&gt;       this winter accounts for erlv8/beamjs and agner</div>
<div class="line">[Thursday 17 February 2011] [07:24:57] &lt;yrashk&gt;       not too much but at least something</div>
<div class="line">[Thursday 17 February 2011] [07:25:20] &lt;kristsk&gt;      &#8220;dear lord, what the heck is this? did i write this?&#8221;</div>
<div class="line">[Thursday 17 February 2011] [07:25:29] &lt;yrashk&gt;       hahaha</div>
<div class="line">[Thursday 17 February 2011] [07:25:37] &lt;yrashk&gt;       I experience this like almost every day</div>
<div class="line">[Thursday 17 February 2011] [07:27:40] &lt;yrashk&gt;       or at least every other day</div>
<div class="line">[Thursday 17 February 2011] [08:17:57] &lt;xet&gt;  hi</div>
<div class="line">[Thursday 17 February 2011] [08:22:14] &lt;sustrik&gt;      hi</div>
<div class="line">[Thursday 17 February 2011] [08:22:19] &lt;CIA-21&gt;       zeromq2: 03Martin Sustrik 07master * r1f536b2 10/ src/zmq_listener.cpp :</div>
<div class="line">[Thursday 17 February 2011] [08:22:19] &lt;CIA-21&gt;       zeromq2: Init object is child of listener</div>
<div class="line">[Thursday 17 February 2011] [08:22:19] &lt;CIA-21&gt;       zeromq2: This means that all the handshaking while accepting incoming</div>
<div class="line">[Thursday 17 February 2011] [08:22:19] &lt;CIA-21&gt;       zeromq2: connection is done exclusively in I/O threads, thus it won&#8217;t</div>
<div class="line">[Thursday 17 February 2011] [08:22:19] &lt;CIA-21&gt;       zeromq2: overload the application thread&#8217;s mailbox.</div>
<div class="line">[Thursday 17 February 2011] [08:22:19] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/i0AFxk">http://bit.ly/i0AFxk</a></div>
<div class="line">[Thursday 17 February 2011] [08:23:35] &lt;xet&gt;  any1 knows of a good realtime plotting lib to use with a zmq tcp socket?</div>
<div class="line">[Thursday 17 February 2011] [08:23:59] &lt;xet&gt;  realtime data stream i mean</div>
<div class="line">[Thursday 17 February 2011] [08:26:21] &lt;sustrik&gt;      no idea</div>
<div class="line">[Thursday 17 February 2011] [08:33:03] &lt;yrashk&gt;       so ok it looks like I am writing a new erlang binding</div>
<div class="line">[Thursday 17 February 2011] [08:33:04] &lt;yrashk&gt;       :-O</div>
<div class="line">[Thursday 17 February 2011] [08:33:18] &lt;yrashk&gt;       <em>facepalm</em></div>
<div class="line">[Thursday 17 February 2011] [08:35:17] &lt;<a href="#id635"><span class="problematic" id="id636">pieterh_</span></a>&gt;     yrashk, that&#8217;ll make 3... :-)</div>
<div class="line">[Thursday 17 February 2011] [08:35:46] &lt;yrashk&gt;       :D</div>
<div class="line">[Thursday 17 February 2011] [08:35:50] &lt;<a href="#id637"><span class="problematic" id="id638">pieterh_</span></a>&gt;     cremes: you around?</div>
<div class="line">[Thursday 17 February 2011] [08:43:21] &lt;yrashk&gt;       sustrik, <a href="#id639"><span class="problematic" id="id640">pieterh_</span></a> I am trying to recall, is it safe to call zmq_msg_close after sending a message?</div>
<div class="line">[Thursday 17 February 2011] [08:43:43] &lt;yrashk&gt;       or should I better setup an ffn?</div>
<div class="line">[Thursday 17 February 2011] [08:44:14] &lt;yrashk&gt;       umm</div>
<div class="line">[Thursday 17 February 2011] [08:44:28] &lt;yrashk&gt;       I think I can do without this at all, I&#8217;ll let erlang deal with deallocation</div>
<div class="line">[Thursday 17 February 2011] [08:44:36] &lt;yrashk&gt;       it&#8217;s probably error prone tho</div>
<div class="line">[Thursday 17 February 2011] [08:45:05] &lt;sustrik&gt;      yrashk: it&#8217;s safe</div>
<div class="line">[Thursday 17 February 2011] [08:45:14] &lt;<a href="#id641"><span class="problematic" id="id642">pieterh_</span></a>&gt;     yrashk, yes</div>
<div class="line">[Thursday 17 February 2011] [08:45:19] &lt;sustrik&gt;      unless you use zmq_init_data()</div>
<div class="line">[Thursday 17 February 2011] [08:45:50] &lt;sustrik&gt;      in which case 0mq will take ownerwhip and deallocate the buffer you pass to it</div>
<div class="line">[Thursday 17 February 2011] [08:45:55] &lt;<a href="#id643"><span class="problematic" id="id644">pieterh_</span></a>&gt;     which I&#8217;d propose to rename to zmq_init_data_are_you_really_sure ()</div>
<div class="line">[Thursday 17 February 2011] [08:46:16] &lt;sustrik&gt;      is should be zmq_sendmsg</div>
<div class="line">[Thursday 17 February 2011] [08:46:33] &lt;sustrik&gt;      and zmq_send should be zmq_send(void <a href="#id33"><span class="problematic" id="id34">*</span></a>data, size_t size, int flags);</div>
<div class="line">[Thursday 17 February 2011] [08:46:35] &lt;<a href="#id645"><span class="problematic" id="id646">pieterh_</span></a>&gt;     there should be zmq_send (blob) (implied copy)</div>
<div class="line">[Thursday 17 February 2011] [08:46:46] &lt;<a href="#id647"><span class="problematic" id="id648">pieterh_</span></a>&gt;     and zmq_sendz (message)</div>
<div class="line">[Thursday 17 February 2011] [08:46:48] &lt;yrashk&gt;       so should I do zmq_msg_init_size and then refer to a structure that is handled by erlang gc?</div>
<div class="line">[Thursday 17 February 2011] [08:46:57] &lt;yrashk&gt;       or init_size, then copy that binary</div>
<div class="line">[Thursday 17 February 2011] [08:47:09] &lt;yrashk&gt;       well, then I a need an ffn</div>
<div class="line">[Thursday 17 February 2011] [08:47:09] &lt;<a href="#id649"><span class="problematic" id="id650">pieterh_</span></a>&gt;     yrashk, you need to copy, IMO</div>
<div class="line">[Thursday 17 February 2011] [08:47:19] &lt;yrashk&gt;       then init_data</div>
<div class="line">[Thursday 17 February 2011] [08:47:30] &lt;sustrik&gt;      yrashk: forget about zero copy for now</div>
<div class="line">[Thursday 17 February 2011] [08:47:36] &lt;<a href="#id651"><span class="problematic" id="id652">pieterh_</span></a>&gt;     unless you can guarantee that Erlang won&#8217;t free the data before zmq sends it</div>
<div class="line">[Thursday 17 February 2011] [08:47:39] &lt;sustrik&gt;      you can add it later if possible</div>
<div class="line">[Thursday 17 February 2011] [08:47:44] &lt;yrashk&gt;       I can&#8217;t guarantee that</div>
<div class="line">[Thursday 17 February 2011] [08:47:51] &lt;yrashk&gt;       so when should I close that message?</div>
<div class="line">[Thursday 17 February 2011] [08:47:51] &lt;<a href="#id653"><span class="problematic" id="id654">pieterh_</span></a>&gt;     then just copy</div>
<div class="line">[Thursday 17 February 2011] [08:47:56] &lt;<a href="#id655"><span class="problematic" id="id656">pieterh_</span></a>&gt;     after sending</div>
<div class="line">[Thursday 17 February 2011] [08:48:01] &lt;yrashk&gt;       in case if I use init_data, too?</div>
<div class="line">[Thursday 17 February 2011] [08:48:14] &lt;<a href="#id657"><span class="problematic" id="id658">pieterh_</span></a>&gt;     zmq_msg_init_size, memcpy, zmq_send, zmq_msg_close</div>
<div class="line">[Thursday 17 February 2011] [08:48:19] &lt;<a href="#id659"><span class="problematic" id="id660">pieterh_</span></a>&gt;     do not use init_data</div>
<div class="line">[Thursday 17 February 2011] [08:48:41] &lt;<a href="#id661"><span class="problematic" id="id662">pieterh_</span></a>&gt;     sustrik: this has to be explained more forcefully IMO</div>
<div class="line">[Thursday 17 February 2011] [08:49:01] &lt;yrashk&gt;       ok</div>
<div class="line">[Thursday 17 February 2011] [08:49:07] &lt;sustrik&gt;      yes, but API change is even more importatnt</div>
<div class="line">[Thursday 17 February 2011] [08:49:15] &lt;sustrik&gt;      unfortunately it can&#8217;t be done till 3.0</div>
<div class="line">[Thursday 17 February 2011] [08:49:18] &lt;<a href="#id663"><span class="problematic" id="id664">pieterh_</span></a>&gt;     idea: can we make the init method name match the send method?</div>
<div class="line">[Thursday 17 February 2011] [08:49:27] &lt;sustrik&gt;      ?</div>
<div class="line">[Thursday 17 February 2011] [08:49:28] &lt;<a href="#id665"><span class="problematic" id="id666">pieterh_</span></a>&gt;     so zmq_msg_init_zcopy and zmq_send_zcopy?</div>
<div class="line">[Thursday 17 February 2011] [08:49:38] &lt;sustrik&gt;      why so?</div>
<div class="line">[Thursday 17 February 2011] [08:49:52] &lt;<a href="#id667"><span class="problematic" id="id668">pieterh_</span></a>&gt;     they are always used together, no?</div>
<div class="line">[Thursday 17 February 2011] [08:50:03] &lt;sustrik&gt;      there&#8217;s only one send method</div>
<div class="line">[Thursday 17 February 2011] [08:50:09] &lt;<a href="#id669"><span class="problematic" id="id670">pieterh_</span></a>&gt;     today, yes</div>
<div class="line">[Thursday 17 February 2011] [08:50:19] &lt;<a href="#id671"><span class="problematic" id="id672">pieterh_</span></a>&gt;     oh... sorry... forget it</div>
<div class="line">[Thursday 17 February 2011] [08:50:27] &lt;sustrik&gt;      i would copy POSIX as close as possible</div>
<div class="line">[Thursday 17 February 2011] [08:50:30] &lt;<a href="#id673"><span class="problematic" id="id674">pieterh_</span></a>&gt;     brainfart</div>
<div class="line">[Thursday 17 February 2011] [08:50:51] &lt;<a href="#id675"><span class="problematic" id="id676">pieterh_</span></a>&gt;     anyhow, init_data is deceptively named IMO</div>
<div class="line">[Thursday 17 February 2011] [08:51:01] &lt;yrashk&gt;       will no zero copy seriously degrage perf?</div>
<div class="line">[Thursday 17 February 2011] [08:51:16] &lt;sustrik&gt;      only for very large messages</div>
<div class="line">[Thursday 17 February 2011] [08:51:16] &lt;<a href="#id677"><span class="problematic" id="id678">pieterh_</span></a>&gt;     it looks like a normal sibling of init_size when in fact it&#8217;s a weird spinach eating cousin</div>
<div class="line">[Thursday 17 February 2011] [08:51:22] &lt;sustrik&gt;      like 256MB or so</div>
<div class="line">[Thursday 17 February 2011] [08:51:32] &lt;yrashk&gt;       ok</div>
<div class="line">[Thursday 17 February 2011] [08:51:43] &lt;sustrik&gt;      <a href="#id679"><span class="problematic" id="id680">pieterh_</span></a>: yes, agreed, but we can&#8217;t change it till 3.0</div>
<div class="line">[Thursday 17 February 2011] [08:51:43] &lt;yrashk&gt;       likely, seriously degrade?</div>
<div class="line">[Thursday 17 February 2011] [08:51:45] &lt;sustrik&gt;      shrug</div>
<div class="line">[Thursday 17 February 2011] [08:51:45] &lt;yrashk&gt;       like*</div>
<div class="line">[Thursday 17 February 2011] [08:51:55] &lt;<a href="#id681"><span class="problematic" id="id682">pieterh_</span></a>&gt;     sustrik, np, can I add that to the roadmap page?</div>
<div class="line">[Thursday 17 February 2011] [08:52:08] &lt;sustrik&gt;      it&#8217;s there</div>
<div class="line">[Thursday 17 February 2011] [08:52:10] &lt;<a href="#id683"><span class="problematic" id="id684">pieterh_</span></a>&gt;     yrashk, for large messages, you will see a visible difference...</div>
<div class="line">[Thursday 17 February 2011] [08:52:52] &lt;sustrik&gt;      yrashk: <a class="reference external" href="http://www.zeromq.org/results:copying">http://www.zeromq.org/results:copying</a></div>
<div class="line">[Thursday 17 February 2011] [08:56:27] &lt;<a href="#id685"><span class="problematic" id="id686">pieterh_</span></a>&gt;     sustrik, it wasn&#8217;t there but I&#8217;ve added it and made a few other updates</div>
<div class="line">[Thursday 17 February 2011] [08:57:09] &lt;<a href="#id687"><span class="problematic" id="id688">pieterh_</span></a>&gt;     3.0 is going to be fun... :-)</div>
<div class="line">[Thursday 17 February 2011] [08:57:21] &lt;<a href="#id689"><span class="problematic" id="id690">pieterh_</span></a>&gt;     We&#8217;re like MSFT, we get it right by version 3...</div>
<div class="line">[Thursday 17 February 2011] [08:58:41] &lt;sustrik&gt;      thanks</div>
<div class="line">[Thursday 17 February 2011] [08:58:58] &lt;sustrik&gt;      it&#8217;s not obvious how to do the switch though</div>
<div class="line">[Thursday 17 February 2011] [08:59:04] &lt;sustrik&gt;      it&#8217;s going to be painful</div>
<div class="line">[Thursday 17 February 2011] [09:00:08] &lt;<a href="#id691"><span class="problematic" id="id692">pieterh_</span></a>&gt;     90% of people work via bindings</div>
<div class="line">[Thursday 17 February 2011] [09:00:27] &lt;<a href="#id693"><span class="problematic" id="id694">pieterh_</span></a>&gt;     and bindings can handle both APIs, quite simply IMO</div>
<div class="line">[Thursday 17 February 2011] [09:01:27] &lt;<a href="#id695"><span class="problematic" id="id696">pieterh_</span></a>&gt;     that made more sense before I wrote it :-(</div>
<div class="line">[Thursday 17 February 2011] [09:04:03] &lt;sustrik&gt;      :)</div>
<div class="line">[Thursday 17 February 2011] [09:08:01] &lt;yrashk&gt;       debugging FFIs i fun</div>
<div class="line">[Thursday 17 February 2011] [09:08:03] &lt;yrashk&gt;       is*</div>
<div class="line">[Thursday 17 February 2011] [09:08:03] &lt;yrashk&gt;       Socket operation on non-socket</div>
<div class="line">[Thursday 17 February 2011] [09:08:04] &lt;yrashk&gt;       :D</div>
<div class="line">[Thursday 17 February 2011] [09:08:34] &lt;sustrik&gt;      what&#8217;s needed imo is transitory period</div>
<div class="line">[Thursday 17 February 2011] [09:08:45] &lt;sustrik&gt;      when both APIs would be available</div>
<div class="line">[Thursday 17 February 2011] [09:09:32] &lt;sustrik&gt;      presumably, with 2.0 API being a lightweight wrapper over 3.0 like internals</div>
<div class="line">[Thursday 17 February 2011] [09:10:59] &lt;yrashk&gt;       hmm errno 156384765</div>
<div class="line">[Thursday 17 February 2011] [09:11:00] &lt;yrashk&gt;       :d</div>
<div class="line">[Thursday 17 February 2011] [09:11:08] &lt;sustrik&gt;      see zmq.h</div>
<div class="line">[Thursday 17 February 2011] [09:11:18] &lt;yrashk&gt;       trying</div>
<div class="line">[Thursday 17 February 2011] [09:11:37] &lt;sustrik&gt;      ETERM</div>
<div class="line">[Thursday 17 February 2011] [09:11:55] &lt;sustrik&gt;      that means the context was already closed</div>
<div class="line">[Thursday 17 February 2011] [09:12:03] &lt;yrashk&gt;       ETERM</div>
<div class="line">[Thursday 17 February 2011] [09:12:04] &lt;yrashk&gt;       ya</div>
<div class="line">[Thursday 17 February 2011] [09:15:31] &lt;sustrik&gt;      mikko: are you here by chance</div>
<div class="line">[Thursday 17 February 2011] [09:15:36] &lt;sustrik&gt;      ?</div>
<div class="line">[Thursday 17 February 2011] [09:15:38] &lt;mikko&gt;        yes</div>
<div class="line">[Thursday 17 February 2011] [09:16:07] &lt;sustrik&gt;      are there any changes needed to the build system in case the names of exported symbols change?</div>
<div class="line">[Thursday 17 February 2011] [09:16:24] &lt;mikko&gt;        shouldn&#8217;t be</div>
<div class="line">[Thursday 17 February 2011] [09:16:37] &lt;sustrik&gt;      the visibility thing?</div>
<div class="line">[Thursday 17 February 2011] [09:16:43] &lt;mikko&gt;        thats per symbol</div>
<div class="line">[Thursday 17 February 2011] [09:16:48] &lt;mikko&gt;        take a look at zmq.h</div>
<div class="line">[Thursday 17 February 2011] [09:17:00] &lt;sustrik&gt;      ZMQ_EXPORT, right?</div>
<div class="line">[Thursday 17 February 2011] [09:17:07] &lt;mikko&gt;        yes</div>
<div class="line">[Thursday 17 February 2011] [09:17:17] &lt;sustrik&gt;      mikko: thanks</div>
<div class="line">[Thursday 17 February 2011] [09:17:23] &lt;mikko&gt;        are you looking to support two apis in one lib?</div>
<div class="line">[Thursday 17 February 2011] [09:17:32] &lt;sustrik&gt;      yep</div>
<div class="line">[Thursday 17 February 2011] [09:17:43] &lt;mikko&gt;        hmm</div>
<div class="line">[Thursday 17 February 2011] [09:17:52] &lt;sustrik&gt;      still the option of exporting _zmq_init etc. seems most viable</div>
<div class="line">[Thursday 17 February 2011] [09:18:08] &lt;mikko&gt;        why do you need to support two versions in one library?</div>
<div class="line">[Thursday 17 February 2011] [09:18:09] &lt;sustrik&gt;      and supplying simple zmq_init etc. wrappers in the header file</div>
<div class="line">[Thursday 17 February 2011] [09:18:34] &lt;sustrik&gt;      otherwise the migration to 3.0 API would have to be done in one go</div>
<div class="line">[Thursday 17 February 2011] [09:18:55] &lt;sustrik&gt;      which is almost impossible, given all the bindings etc.</div>
<div class="line">[Thursday 17 February 2011] [09:19:50] &lt;yrashk&gt;       heh</div>
<div class="line">[Thursday 17 February 2011] [09:19:52] &lt;yrashk&gt;       almost there!</div>
<div class="line">[Thursday 17 February 2011] [09:20:29] &lt;mikko&gt;        i dont know why but i have some doubts about the approach</div>
<div class="line">[Thursday 17 February 2011] [09:20:47] &lt;mikko&gt;        it sounds complex</div>
<div class="line">[Thursday 17 February 2011] [09:21:09] &lt;sustrik&gt;      any better idea?</div>
<div class="line">[Thursday 17 February 2011] [09:21:23] &lt;yrashk&gt;       ok</div>
<div class="line">[Thursday 17 February 2011] [09:21:24] &lt;yrashk&gt;       works</div>
<div class="line">[Thursday 17 February 2011] [09:21:27] &lt;yrashk&gt;       :]</div>
<div class="line">[Thursday 17 February 2011] [09:21:29] &lt;yrashk&gt;       that was fast</div>
<div class="line">[Thursday 17 February 2011] [09:21:31] &lt;sustrik&gt;      new binding?</div>
<div class="line">[Thursday 17 February 2011] [09:21:34] &lt;yrashk&gt;       yep</div>
<div class="line">[Thursday 17 February 2011] [09:21:42] &lt;<a href="#id697"><span class="problematic" id="id698">pieterh_</span></a>&gt;     sustrik, transitional API sounds a good idea, it can be an optional header you include</div>
<div class="line">[Thursday 17 February 2011] [09:21:50] &lt;sustrik&gt;      your keyboard must have caught fire in the process :)</div>
<div class="line">[Thursday 17 February 2011] [09:21:53] &lt;yrashk&gt;       currently with block receive but I am going to solve this by using 2nd thread and 0mq inproc</div>
<div class="line">[Thursday 17 February 2011] [09:21:59] &lt;yrashk&gt;       sustrik: no, my kbd is cool</div>
<div class="line">[Thursday 17 February 2011] [09:22:05] &lt;<a href="#id699"><span class="problematic" id="id700">pieterh_</span></a>&gt;     i think that&#8217;s the a world record for a new binding</div>
<div class="line">[Thursday 17 February 2011] [09:22:31] &lt;yrashk&gt;       it&#8217;s an incomplete binding</div>
<div class="line">[Thursday 17 February 2011] [09:22:35] &lt;yrashk&gt;       sockopts are not there yet</div>
<div class="line">[Thursday 17 February 2011] [09:22:45] &lt;yrashk&gt;       and non-blocking receive is not there yet, too</div>
<div class="line">[Thursday 17 February 2011] [09:22:47] &lt;yrashk&gt;       <a class="reference external" href="https://gist.github.com/6e203bc2aeb410b36532">https://gist.github.com/6e203bc2aeb410b36532</a></div>
<div class="line">[Thursday 17 February 2011] [09:23:08] &lt;sustrik&gt;      still:</div>
<div class="line">[Thursday 17 February 2011] [09:23:09] &lt;sustrik&gt;      &lt;yrashk&gt; so ok it looks like I am writing a new erlang binding</div>
<div class="line">[Thursday 17 February 2011] [09:23:35] &lt;sustrik&gt;      at 14:33</div>
<div class="line">[Thursday 17 February 2011] [09:23:43] &lt;sustrik&gt;      15:21: works</div>
<div class="line">[Thursday 17 February 2011] [09:23:44] &lt;<a href="#id701"><span class="problematic" id="id702">pieterh_</span></a>&gt;     under 1 hour...</div>
<div class="line">[Thursday 17 February 2011] [09:24:08] &lt;sustrik&gt;      :)</div>
<div class="line">[Thursday 17 February 2011] [09:24:35] &lt;sustrik&gt;      <a href="#id703"><span class="problematic" id="id704">pieterh_</span></a>: the API shift is doable even now</div>
<div class="line">[Thursday 17 February 2011] [09:24:39] &lt;<a href="#id705"><span class="problematic" id="id706">pieterh_</span></a>&gt;     yup</div>
<div class="line">[Thursday 17 February 2011] [09:24:45] &lt;<a href="#id707"><span class="problematic" id="id708">pieterh_</span></a>&gt;     it can be done with macros in zmq.h</div>
<div class="line">[Thursday 17 February 2011] [09:24:51] &lt;sustrik&gt;      but maybe forking the stable should be done first</div>
<div class="line">[Thursday 17 February 2011] [09:24:57] &lt;mikko&gt;        sustrik: i guess not</div>
<div class="line">[Thursday 17 February 2011] [09:25:10] &lt;<a href="#id709"><span class="problematic" id="id710">pieterh_</span></a>&gt;     yes, no new features before we fork...</div>
<div class="line">[Thursday 17 February 2011] [09:25:16] &lt;sustrik&gt;      ack</div>
<div class="line">[Thursday 17 February 2011] [09:25:44] &lt;mikko&gt;        when is master going to be open for radical changes?</div>
<div class="line">[Thursday 17 February 2011] [09:25:54] &lt;yrashk&gt;       sustrik: <a class="reference external" href="https://github.com/yrashk/ezmq">https://github.com/yrashk/ezmq</a></div>
<div class="line">[Thursday 17 February 2011] [09:25:58] &lt;<a href="#id711"><span class="problematic" id="id712">pieterh_</span></a>&gt;     mikko: are you in a hurry?</div>
<div class="line">[Thursday 17 February 2011] [09:26:15] &lt;mikko&gt;        <a href="#id713"><span class="problematic" id="id714">pieterh_</span></a>: no</div>
<div class="line">[Thursday 17 February 2011] [09:26:22] &lt;sustrik&gt;      yrashk: nice</div>
<div class="line">[Thursday 17 February 2011] [09:26:25] &lt;sustrik&gt;      any perf results?</div>
<div class="line">[Thursday 17 February 2011] [09:26:44] &lt;<a href="#id715"><span class="problematic" id="id716">pieterh_</span></a>&gt;     easymq, hehe</div>
<div class="line">[Thursday 17 February 2011] [09:26:48] &lt;mikko&gt;        this is the openpgm autotools build change</div>
<div class="line">[Thursday 17 February 2011] [09:27:01] &lt;mikko&gt;        which also includes update from openpgm 5.0.x to 5.1.x</div>
<div class="line">[Thursday 17 February 2011] [09:27:16] &lt;<a href="#id717"><span class="problematic" id="id718">pieterh_</span></a>&gt;     mikko: that does not risk introducing bugs IMO</div>
<div class="line">[Thursday 17 February 2011] [09:27:25] &lt;<a href="#id719"><span class="problematic" id="id720">pieterh_</span></a>&gt;     i&#8217;d get that into the master asap</div>
<div class="line">[Thursday 17 February 2011] [09:27:48] &lt;mikko&gt;        well, openpgm update is potentially risky (?)</div>
<div class="line">[Thursday 17 February 2011] [09:28:35] &lt;<a href="#id721"><span class="problematic" id="id722">pieterh_</span></a>&gt;     hmm, we didn&#8217;t see any real issues with switch from openpgm2.x to 5.0.x...</div>
<div class="line">[Thursday 17 February 2011] [09:28:37] &lt;<a href="#id723"><span class="problematic" id="id724">pieterh_</span></a>&gt;     afair</div>
<div class="line">[Thursday 17 February 2011] [09:29:08] &lt;<a href="#id725"><span class="problematic" id="id726">pieterh_</span></a>&gt;     if you don&#8217;t get that into master before we clone it, it&#8217;ll be for 2.2 only</div>
<div class="line">[Thursday 17 February 2011] [09:29:12] &lt;<a href="#id727"><span class="problematic" id="id728">pieterh_</span></a>&gt;     as you like</div>
<div class="line">[Thursday 17 February 2011] [09:29:31] &lt;mikko&gt;        ok</div>
<div class="line">[Thursday 17 February 2011] [09:29:36] &lt;sustrik&gt;      <a href="#id729"><span class="problematic" id="id730">pieterh_</span></a>: btw, are you not going to fork from a historic version?</div>
<div class="line">[Thursday 17 February 2011] [09:29:38] &lt;mikko&gt;        i&#8217;ll have to check with steve-p</div>
<div class="line">[Thursday 17 February 2011] [09:29:41] &lt;mikko&gt;        steve-o</div>
<div class="line">[Thursday 17 February 2011] [09:29:53] &lt;sustrik&gt;      my feeling was that you want to fork pre-XPUB/XSUB version</div>
<div class="line">[Thursday 17 February 2011] [09:30:00] &lt;<a href="#id731"><span class="problematic" id="id732">pieterh_</span></a>&gt;     sustrik, nope, my plan is to fork head and then make releases as we collect fixes to it</div>
<div class="line">[Thursday 17 February 2011] [09:30:07] &lt;sustrik&gt;      ok</div>
<div class="line">[Thursday 17 February 2011] [09:30:23] &lt;<a href="#id733"><span class="problematic" id="id734">pieterh_</span></a>&gt;     we can disable XPUB/XSUB if needed (just the definitions, not the internals)</div>
<div class="line">[Thursday 17 February 2011] [09:30:48] &lt;<a href="#id735"><span class="problematic" id="id736">pieterh_</span></a>&gt;     that&#8217;s a 2.2 feature, I guess</div>
<div class="line">[Thursday 17 February 2011] [09:31:00] &lt;sustrik&gt;      it&#8217;s just a placeholder atm</div>
<div class="line">[Thursday 17 February 2011] [09:31:30] &lt;<a href="#id737"><span class="problematic" id="id738">pieterh_</span></a>&gt;     I&#8217;ve seen that</div>
<div class="line">[Thursday 17 February 2011] [09:31:43] &lt;<a href="#id739"><span class="problematic" id="id740">pieterh_</span></a>&gt;     so how do I get stuff off sys://log</div>
<div class="line">[Thursday 17 February 2011] [09:31:52] &lt;<a href="#id741"><span class="problematic" id="id742">pieterh_</span></a>&gt;     connect a SUB socket to it?</div>
<div class="line">[Thursday 17 February 2011] [09:31:55] &lt;sustrik&gt;      yes</div>
<div class="line">[Thursday 17 February 2011] [09:32:01] &lt;<a href="#id743"><span class="problematic" id="id744">pieterh_</span></a>&gt;     ok, trying that now...</div>
<div class="line">[Thursday 17 February 2011] [09:36:07] &lt;cremes&gt;       <a href="#id745"><span class="problematic" id="id746">pieterh_</span></a>: what&#8217;s up?</div>
<div class="line">[Thursday 17 February 2011] [09:36:20] &lt;<a href="#id747"><span class="problematic" id="id748">pieterh_</span></a>&gt;     cremes: we found &amp; nailed the real issue with mailboxes</div>
<div class="line">[Thursday 17 February 2011] [09:36:33] &lt;<a href="#id749"><span class="problematic" id="id750">pieterh_</span></a>&gt;     of course it&#8217;s a 1-line fix :-)</div>
<div class="line">[Thursday 17 February 2011] [09:36:42] &lt;cremes&gt;       oh, of course!</div>
<div class="line">[Thursday 17 February 2011] [09:37:14] &lt;<a href="#id751"><span class="problematic" id="id752">pieterh_</span></a>&gt;     well, it&#8217;s one line of magic from Martin...</div>
<div class="line">[Thursday 17 February 2011] [09:37:19] &lt;cremes&gt;       has it been committed already?</div>
<div class="line">[Thursday 17 February 2011] [09:37:22] &lt;<a href="#id753"><span class="problematic" id="id754">pieterh_</span></a>&gt;     yup</div>
<div class="line">[Thursday 17 February 2011] [09:37:35] &lt;cremes&gt;       i&#8217;m going to look...</div>
<div class="line">[Thursday 17 February 2011] [09:39:00] &lt;cremes&gt;       launch_sibling became launch_child? that truly is magic</div>
<div class="line">[Thursday 17 February 2011] [09:39:34] &lt;yrashk&gt;       sustrik: no perfs yet, I haven&#8217;t done 2nd thread non-block recv yet anyway</div>
<div class="line">[Thursday 17 February 2011] [09:39:40] &lt;yrashk&gt;       working on sockopts</div>
<div class="line">[Thursday 17 February 2011] [09:39:56] &lt;<a href="#id755"><span class="problematic" id="id756">pieterh_</span></a>&gt;     sustrik, ok, it works like a charm</div>
<div class="line">[Thursday 17 February 2011] [09:40:19] &lt;<a href="#id757"><span class="problematic" id="id758">pieterh_</span></a>&gt;     Compiling mailbugz...</div>
<div class="line">[Thursday 17 February 2011] [09:40:19] &lt;<a href="#id759"><span class="problematic" id="id760">pieterh_</span></a>&gt;     Linking mailbugz...</div>
<div class="line">[Thursday 17 February 2011] [09:40:19] &lt;<a href="#id761"><span class="problematic" id="id762">pieterh_</span></a>&gt;     E: (syslog) DUID: peer using non-unique identity - disconnected</div>
<div class="line">[Thursday 17 February 2011] [09:40:19] &lt;<a href="#id763"><span class="problematic" id="id764">pieterh_</span></a>&gt;     E: (syslog) DUID: 0x444945</div>
<div class="line">[Thursday 17 February 2011] [09:40:19] &lt;<a href="#id765"><span class="problematic" id="id766">pieterh_</span></a>&gt;     E: (syslog) DUID: &#8220;DIE&#8221;</div>
<div class="line">[Thursday 17 February 2011] [09:40:26] &lt;sustrik&gt;      yrashk: ack</div>
<div class="line">[Thursday 17 February 2011] [09:40:38] &lt;<a href="#id767"><span class="problematic" id="id768">pieterh_</span></a>&gt;     that message comes from session.cpp, and object.cpp formats and prints the identity</div>
<div class="line">[Thursday 17 February 2011] [09:40:49] &lt;<a href="#id769"><span class="problematic" id="id770">pieterh_</span></a>&gt;     and a thread in mailbugz catches and reports the error</div>
<div class="line">[Thursday 17 February 2011] [09:41:22] &lt;sustrik&gt;      <a href="#id771"><span class="problematic" id="id772">pieterh_</span></a>: it should be one log recoed imo</div>
<div class="line">[Thursday 17 February 2011] [09:41:26] &lt;sustrik&gt;      record</div>
<div class="line">[Thursday 17 February 2011] [09:41:42] &lt;<a href="#id773"><span class="problematic" id="id774">pieterh_</span></a>&gt;     sustrik, sure, this is a proof of concept</div>
<div class="line">[Thursday 17 February 2011] [09:42:02] &lt;sustrik&gt;      in the future it would be nice to add IP address of the offending peer</div>
<div class="line">[Thursday 17 February 2011] [09:42:07] &lt;<a href="#id775"><span class="problematic" id="id776">pieterh_</span></a>&gt;     and etc...</div>
<div class="line">[Thursday 17 February 2011] [09:42:09] &lt;<a href="#id777"><span class="problematic" id="id778">pieterh_</span></a>&gt;     yes</div>
<div class="line">[Thursday 17 February 2011] [09:42:52] &lt;<a href="#id779"><span class="problematic" id="id780">pieterh_</span></a>&gt;     my C++ skills are too poor to do this properly</div>
<div class="line">[Thursday 17 February 2011] [09:43:02] &lt;sustrik&gt;      use raw C</div>
<div class="line">[Thursday 17 February 2011] [09:43:09] &lt;<a href="#id781"><span class="problematic" id="id782">pieterh_</span></a>&gt;     done that, np</div>
<div class="line">[Thursday 17 February 2011] [09:43:35] &lt;<a href="#id783"><span class="problematic" id="id784">pieterh_</span></a>&gt;     ok, will add IP address and make a single string</div>
<div class="line">[Thursday 17 February 2011] [09:43:51] &lt;sustrik&gt;      the IP addr stuff may be tricky imo</div>
<div class="line">[Thursday 17 February 2011] [09:44:18] &lt;<a href="#id785"><span class="problematic" id="id786">pieterh_</span></a>&gt;     does the engine not have a socket it can look at?</div>
<div class="line">[Thursday 17 February 2011] [09:44:26] &lt;sustrik&gt;      it does</div>
<div class="line">[Thursday 17 February 2011] [09:44:34] &lt;sustrik&gt;      but there no code to do that</div>
<div class="line">[Thursday 17 February 2011] [09:44:41] &lt;<a href="#id787"><span class="problematic" id="id788">pieterh_</span></a>&gt;     ok, well, one step at a time</div>
<div class="line">[Thursday 17 February 2011] [09:44:45] &lt;sustrik&gt;      exactly</div>
<div class="line">[Thursday 17 February 2011] [09:44:50] &lt;<a href="#id789"><span class="problematic" id="id790">pieterh_</span></a>&gt;     the first thing is to get end-to-end reporting in place</div>
<div class="line">[Thursday 17 February 2011] [09:44:54] &lt;<a href="#id791"><span class="problematic" id="id792">pieterh_</span></a>&gt;     then we can extend and improve it...</div>
<div class="line">[Thursday 17 February 2011] [09:45:48] &lt;<a href="#id793"><span class="problematic" id="id794">pieterh_</span></a>&gt;     not sure if bindings should read sys://log themselves or leave this to apps...</div>
<div class="line">[Thursday 17 February 2011] [09:46:12] &lt;<a href="#id795"><span class="problematic" id="id796">pieterh_</span></a>&gt;     in latter case, people just won&#8217;t use it and will still have the same &#8216;what is happening?&#8217; issue</div>
<div class="line">[Thursday 17 February 2011] [09:46:53] &lt;sustrik&gt;      it&#8217;s up to binding developers imo</div>
<div class="line">[Thursday 17 February 2011] [09:47:19] &lt;<a href="#id797"><span class="problematic" id="id798">pieterh_</span></a>&gt;     some thought and consistent policy would help IMO</div>
<div class="line">[Thursday 17 February 2011] [09:49:03] &lt;sustrik&gt;      i would leave binding as thin as possible personally</div>
<div class="line">[Thursday 17 February 2011] [09:49:22] &lt;sustrik&gt;      =&gt; no need to change anything</div>
<div class="line">[Thursday 17 February 2011] [09:55:48] &lt;<a href="#id799"><span class="problematic" id="id800">pieterh_</span></a>&gt;     there is one very small issue with the syslog design</div>
<div class="line">[Thursday 17 February 2011] [09:55:58] &lt;<a href="#id801"><span class="problematic" id="id802">pieterh_</span></a>&gt;     if you get an error right at startup, you won&#8217;t see it</div>
<div class="line">[Thursday 17 February 2011] [09:56:11] &lt;<a href="#id803"><span class="problematic" id="id804">pieterh_</span></a>&gt;     due to the async connect issue with pubsub</div>
<div class="line">[Thursday 17 February 2011] [09:57:12] &lt;sustrik&gt;      rightr</div>
<div class="line">[Thursday 17 February 2011] [09:57:20] &lt;<a href="#id805"><span class="problematic" id="id806">pieterh_</span></a>&gt;     since I&#8217;m conflating errors (sending only the first of a series), this means sometimes nothing shows</div>
<div class="line">[Thursday 17 February 2011] [09:57:35] &lt;<a href="#id807"><span class="problematic" id="id808">pieterh_</span></a>&gt;     I</div>
<div class="line">[Thursday 17 February 2011] [09:57:49] &lt;<a href="#id809"><span class="problematic" id="id810">pieterh_</span></a>&gt;     I&#8217;ve no solution in mind but it&#8217;s an interesting use case</div>
<div class="line">[Thursday 17 February 2011] [09:58:26] &lt;sustrik&gt;      are you subscribing for logs immediately after zmq_init()</div>
<div class="line">[Thursday 17 February 2011] [09:58:27] &lt;sustrik&gt;      ?</div>
<div class="line">[Thursday 17 February 2011] [09:58:45] &lt;<a href="#id811"><span class="problematic" id="id812">pieterh_</span></a>&gt;     yes</div>
<div class="line">[Thursday 17 February 2011] [09:59:01] &lt;sustrik&gt;      that should not happen imo</div>
<div class="line">[Thursday 17 February 2011] [09:59:05] &lt;sustrik&gt;      likely a bug...</div>
<div class="line">[Thursday 17 February 2011] [09:59:06] &lt;<a href="#id813"><span class="problematic" id="id814">pieterh_</span></a>&gt;     hang on, there should be no delay over inproc...</div>
<div class="line">[Thursday 17 February 2011] [09:59:18] &lt;<a href="#id815"><span class="problematic" id="id816">pieterh_</span></a>&gt;     i&#8217;m mistaken, it&#8217;s because I&#8217;m using two threads</div>
<div class="line">[Thursday 17 February 2011] [09:59:39] &lt;<a href="#id817"><span class="problematic" id="id818">pieterh_</span></a>&gt;     ok, easily solved, connect subscriber in main thread and then pass to background thread</div>
<div class="line">[Thursday 17 February 2011] [09:59:48] &lt;sustrik&gt;      ack</div>
<div class="line">[Thursday 17 February 2011] [10:00:58] &lt;<a href="#id819"><span class="problematic" id="id820">pieterh_</span></a>&gt;     ack, that fixes it</div>
<div class="line">[Thursday 17 February 2011] [10:01:36] &lt;yrashk&gt;       when I am doing getsockopts on ZMQ_IDENTITY, should I allocate option value?</div>
<div class="line">[Thursday 17 February 2011] [10:02:10] &lt;yrashk&gt;       sorry for dumb questions, was working through the whole night</div>
<div class="line">[Thursday 17 February 2011] [10:02:50] &lt;sustrik&gt;      yrashk: you supply a buffer</div>
<div class="line">[Thursday 17 February 2011] [10:02:59] &lt;sustrik&gt;      0mq will fill the identity into the buffer</div>
<div class="line">[Thursday 17 February 2011] [10:03:20] &lt;yrashk&gt;       gothca, will do 255 buff</div>
<div class="line">[Thursday 17 February 2011] [10:05:56] &lt;yrashk&gt;       I am not sure I really understand this IDENTITY thing yet, though</div>
<div class="line">[Thursday 17 February 2011] [10:08:37] &lt;yrashk&gt;       I am getting garbage from there :S</div>
<div class="line">[Thursday 17 February 2011] [10:08:45] &lt;yrashk&gt;       even though I set it to a binary value beforehand</div>
<div class="line">[Thursday 17 February 2011] [10:08:53] &lt;yrashk&gt;       lol, debugging stuff at 7am is fun</div>
<div class="line">[Thursday 17 February 2011] [10:12:13] &lt;<a href="#id821"><span class="problematic" id="id822">pieterh_</span></a>&gt;     yrashk, then tomorrow you&#8217;re like &#8216;wha...?&#8217;</div>
<div class="line">[Thursday 17 February 2011] [10:12:25] &lt;yrashk&gt;       well</div>
<div class="line">[Thursday 17 February 2011] [10:12:27] &lt;yrashk&gt;       that&#8217;s a given</div>
<div class="line">[Thursday 17 February 2011] [10:12:32] &lt;yrashk&gt;       but anyway I fixed something</div>
<div class="line">[Thursday 17 February 2011] [10:12:33] &lt;yrashk&gt;       and it works</div>
<div class="line">[Thursday 17 February 2011] [10:13:03] &lt;yrashk&gt;       so what&#8217;s left?</div>
<div class="line">[Thursday 17 February 2011] [10:13:07] &lt;yrashk&gt;       I guess non-blocking receive</div>
<div class="line">[Thursday 17 February 2011] [10:13:09] &lt;yrashk&gt;       and nicer API</div>
<div class="line">[Thursday 17 February 2011] [10:28:43] &lt;<a href="#id823"><span class="problematic" id="id824">pieterh_</span></a>&gt;     sustrik, ok, patch sent for the syslog interface</div>
<div class="line">[Thursday 17 February 2011] [10:28:58] &lt;<a href="#id825"><span class="problematic" id="id826">pieterh_</span></a>&gt;     it&#8217;s pretty brutal, will benefit from some C++ review</div>
<div class="line">[Thursday 17 February 2011] [10:34:34] &lt;yrashk&gt;       horaay</div>
<div class="line">[Thursday 17 February 2011] [10:34:43] &lt;yrashk&gt;       even pub/sub aleady works</div>
<div class="line">[Thursday 17 February 2011] [10:35:05] &lt;sustrik&gt;      :)</div>
<div class="line">[Thursday 17 February 2011] [10:35:24] &lt;yrashk&gt;       <a class="reference external" href="https://gist.github.com/36cde07be28d3dad39a7">https://gist.github.com/36cde07be28d3dad39a7</a></div>
<div class="line">[Thursday 17 February 2011] [10:35:30] &lt;yrashk&gt;       and I added nicer higher level API</div>
<div class="line">[Thursday 17 February 2011] [10:36:06]         * sustrik is looking forward for the perf results</div>
<div class="line">[Thursday 17 February 2011] [10:37:46] &lt;yrashk&gt;       I am actually porting those right now</div>
<div class="line">[Thursday 17 February 2011] [10:38:24] &lt;sustrik&gt;      !</div>
<div class="line">[Thursday 17 February 2011] [10:39:19] &lt;yrashk&gt;       it probably is much worse</div>
<div class="line">[Thursday 17 February 2011] [10:39:32] &lt;yrashk&gt;       since it&#8217;s currenly blocking</div>
<div class="line">[Thursday 17 February 2011] [10:39:38] &lt;yrashk&gt;       haha</div>
<div class="line">[Thursday 17 February 2011] [10:39:39] &lt;yrashk&gt;       the same</div>
<div class="line">[Thursday 17 February 2011] [10:39:40] &lt;yrashk&gt;       mean throughput: 30938.745584228862 [msg/s]</div>
<div class="line">[Thursday 17 February 2011] [10:39:54] &lt;yrashk&gt;       still my API is nice :-P</div>
<div class="line">[Thursday 17 February 2011] [10:41:48] &lt;yrashk&gt;       I increased message size to 100 bytes</div>
<div class="line">[Thursday 17 February 2011] [10:41:53] &lt;yrashk&gt;       and now it&#8217;s faster:</div>
<div class="line">[Thursday 17 February 2011] [10:41:53] &lt;yrashk&gt;       mean throughput: 40136.63795933773 [msg/s]</div>
<div class="line">[Thursday 17 February 2011] [10:42:45] &lt;sustrik&gt;      what&#8217;s going on there?</div>
<div class="line">[Thursday 17 February 2011] [10:42:49] &lt;yrashk&gt;       1000 bytes gives 38K</div>
<div class="line">[Thursday 17 February 2011] [10:43:25] &lt;yrashk&gt;       so I wrote this nice NIF API for nothing? :-(</div>
<div class="line">[Thursday 17 February 2011] [10:43:33] &lt;sustrik&gt;      is it possible that erlang itself is so slow as not to be able to execute the loop faster than that?</div>
<div class="line">[Thursday 17 February 2011] [10:43:35] &lt;yrashk&gt;       actually 40K for 1000 bytes</div>
<div class="line">[Thursday 17 February 2011] [10:43:47] &lt;sustrik&gt;      still, it should b 400k</div>
<div class="line">[Thursday 17 February 2011] [10:43:57] &lt;sustrik&gt;      at least</div>
<div class="line">[Thursday 17 February 2011] [10:44:00] &lt;yrashk&gt;       true</div>
<div class="line">[Thursday 17 February 2011] [10:44:05] &lt;yrashk&gt;       I am thinking why this is happening</div>
<div class="line">[Thursday 17 February 2011] [10:44:14] &lt;yrashk&gt;       I cutted driver communications out</div>
<div class="line">[Thursday 17 February 2011] [10:44:24] &lt;yrashk&gt;       so now it&#8217;s NIF</div>
<div class="line">[Thursday 17 February 2011] [10:44:53] &lt;sustrik&gt;      can you benchmark average duration spent in the NIF</div>
<div class="line">[Thursday 17 February 2011] [10:44:56] &lt;sustrik&gt;      ?</div>
<div class="line">[Thursday 17 February 2011] [10:45:02] &lt;sustrik&gt;      say in send?</div>
<div class="line">[Thursday 17 February 2011] [10:45:15] &lt;yrashk&gt;       or may be even better in recv?</div>
<div class="line">[Thursday 17 February 2011] [10:45:23] &lt;yrashk&gt;       send should be faster anyway, no?</div>
<div class="line">[Thursday 17 February 2011] [10:45:33] &lt;yrashk&gt;       getting 44K on 1 bytes</div>
<div class="line">[Thursday 17 February 2011] [10:45:53] &lt;sustrik&gt;      recv is more problematic, because it can be slow either because it itself is slow or because sender is slow</div>
<div class="line">[Thursday 17 February 2011] [10:46:12] &lt;yrashk&gt;       added noblock to sender</div>
<div class="line">[Thursday 17 February 2011] [10:46:31] &lt;sustrik&gt;      so, if you are able to find out how much time is spent in send</div>
<div class="line">[Thursday 17 February 2011] [10:46:40] &lt;sustrik&gt;      it may turn out that it&#8217;s 10%</div>
<div class="line">[Thursday 17 February 2011] [10:46:49] &lt;sustrik&gt;      that would mean that erlang itself is slow</div>
<div class="line">[Thursday 17 February 2011] [10:46:51] &lt;yrashk&gt;       well I can do that</div>
<div class="line">[Thursday 17 February 2011] [10:47:05] &lt;yrashk&gt;       still I will probably not delete my binding</div>
<div class="line">[Thursday 17 February 2011] [10:47:10] &lt;sustrik&gt;      or 95% which would mean erlzmq is slow</div>
<div class="line">[Thursday 17 February 2011] [10:47:12] &lt;yrashk&gt;       as it&#8217;s quite nice actually</div>
<div class="line">[Thursday 17 February 2011] [10:47:17] &lt;sustrik&gt;      no, don&#8217;t do that</div>
<div class="line">[Thursday 17 February 2011] [10:47:26] &lt;sustrik&gt;      it may come handy one day</div>
<div class="line">[Thursday 17 February 2011] [10:48:38] &lt;cremes&gt;       erlang isn&#8217;t known for execution performance; it&#8217;s known for massive concurrency</div>
<div class="line">[Thursday 17 February 2011] [10:49:00] &lt;cremes&gt;       if the problem isn&#8217;t parallelizable, perf isn&#8217;t usually too impressive</div>
<div class="line">[Thursday 17 February 2011] [10:49:20] &lt;yrashk&gt;       it spends 2-3 microseconds in that call</div>
<div class="line">[Thursday 17 February 2011] [10:49:22] &lt;yrashk&gt;       (recv)</div>
<div class="line">[Thursday 17 February 2011] [10:50:42] &lt;sustrik&gt;      that should mean 330,000-500,000 msgs/sec</div>
<div class="line">[Thursday 17 February 2011] [10:51:08] &lt;yrashk&gt;       may be my math is wrong?</div>
<div class="line">[Thursday 17 February 2011] [10:51:09] &lt;yrashk&gt;       ;)</div>
<div class="line">[Thursday 17 February 2011] [10:51:28] &lt;sustrik&gt;      yes, the math there is tricky</div>
<div class="line">[Thursday 17 February 2011] [10:51:38] &lt;yrashk&gt;       but it does spend up to 20-30 seconds or so</div>
<div class="line">[Thursday 17 February 2011] [10:51:41] &lt;sustrik&gt;      due to rounding errors</div>
<div class="line">[Thursday 17 February 2011] [10:51:45] &lt;yrashk&gt;       for a million messages</div>
<div class="line">[Thursday 17 February 2011] [10:51:53] &lt;sustrik&gt;      than the result looks right</div>
<div class="line">[Thursday 17 February 2011] [10:52:09] &lt;yrashk&gt;       real    0m31.754s</div>
<div class="line">[Thursday 17 February 2011] [10:52:10] &lt;yrashk&gt;       user    0m14.646s</div>
<div class="line">[Thursday 17 February 2011] [10:52:10] &lt;yrashk&gt;       sys     0m18.121s</div>
<div class="line">[Thursday 17 February 2011] [10:52:11] &lt;sustrik&gt;      the problem is that most of the time is spent <em>out</em> of erlzmq</div>
<div class="line">[Thursday 17 February 2011] [10:52:17] &lt;yrashk&gt;       well it is ezmq now</div>
<div class="line">[Thursday 17 February 2011] [10:52:23] &lt;yrashk&gt;       I rewrote it from scratch</div>
<div class="line">[Thursday 17 February 2011] [10:52:27] &lt;yrashk&gt;       ;)</div>
<div class="line">[Thursday 17 February 2011] [10:52:33] &lt;sustrik&gt;      :)</div>
<div class="line">[Thursday 17 February 2011] [10:52:54] &lt;sustrik&gt;      those 2-3 microseconds are spent in NIF</div>
<div class="line">[Thursday 17 February 2011] [10:52:57] &lt;sustrik&gt;      or 0MQ itself?</div>
<div class="line">[Thursday 17 February 2011] [10:53:08] &lt;yrashk&gt;       NIF call</div>
<div class="line">[Thursday 17 February 2011] [10:53:24] &lt;sustrik&gt;      can you check the same on the send() call?</div>
<div class="line">[Thursday 17 February 2011] [10:53:35] &lt;yrashk&gt;       sure</div>
<div class="line">[Thursday 17 February 2011] [10:54:18] &lt;yrashk&gt;       10-15 microseconds</div>
<div class="line">[Thursday 17 February 2011] [10:54:31] &lt;yrashk&gt;       well even 8-15</div>
<div class="line">[Thursday 17 February 2011] [10:55:05] &lt;sustrik&gt;      with 40k msgs/sec</div>
<div class="line">[Thursday 17 February 2011] [10:55:22] &lt;sustrik&gt;      the time for single message is 25 usec</div>
<div class="line">[Thursday 17 February 2011] [10:55:32] &lt;yrashk&gt;       a little less without noblock</div>
<div class="line">[Thursday 17 February 2011] [10:55:41] &lt;sustrik&gt;      8-15 can be attributed to ezmq</div>
<div class="line">[Thursday 17 February 2011] [10:55:57] &lt;sustrik&gt;      remaining 10 are either erlang itself or the time measurement</div>
<div class="line">[Thursday 17 February 2011] [10:56:13] &lt;yrashk&gt;       still 8-15 is pretty fast, right?</div>
<div class="line">[Thursday 17 February 2011] [10:56:53] &lt;sustrik&gt;      it equals to 125k-666k msgs/sec</div>
<div class="line">[Thursday 17 February 2011] [10:57:48] &lt;yrashk&gt;       the almost empty cycle takes about 890645 microsecond</div>
<div class="line">[Thursday 17 February 2011] [10:58:03] &lt;sustrik&gt;      1M iterations?</div>
<div class="line">[Thursday 17 February 2011] [10:58:06] &lt;yrashk&gt;       yep</div>
<div class="line">[Thursday 17 February 2011] [10:58:15] &lt;yrashk&gt;       well, it&#8217;s not empty</div>
<div class="line">[Thursday 17 February 2011] [10:58:18] &lt;yrashk&gt;       but almost</div>
<div class="line">[Thursday 17 February 2011] [10:58:23] &lt;sustrik&gt;      0.8 usec per iteration</div>
<div class="line">[Thursday 17 February 2011] [10:58:28] &lt;sustrik&gt;      that&#8217;s reasonable</div>
<div class="line">[Thursday 17 February 2011] [10:58:41] &lt;sustrik&gt;      so what&#8217;s the rest of the time spent on?</div>
<div class="line">[Thursday 17 February 2011] [10:58:45] &lt;yrashk&gt;       a little bit slower with integer value in it</div>
<div class="line">[Thursday 17 February 2011] [10:58:49] &lt;yrashk&gt;       I have no idea yet</div>
<div class="line">[Thursday 17 February 2011] [10:59:03] &lt;sustrik&gt;      cycle is 25 used long</div>
<div class="line">[Thursday 17 February 2011] [10:59:10] &lt;sustrik&gt;      8-15usec in NIF</div>
<div class="line">[Thursday 17 February 2011] [10:59:18] &lt;sustrik&gt;      0.8 the iteration itself</div>
<div class="line">[Thursday 17 February 2011] [10:59:25] &lt;sustrik&gt;      still some 10 usecs are missing</div>
<div class="line">[Thursday 17 February 2011] [10:59:31] &lt;yrashk&gt;       yup</div>
<div class="line">[Thursday 17 February 2011] [10:59:35] &lt;yrashk&gt;       you mean on send, right?</div>
<div class="line">[Thursday 17 February 2011] [10:59:43] &lt;sustrik&gt;      yes</div>
<div class="line">[Thursday 17 February 2011] [11:00:06] &lt;yrashk&gt;       right</div>
<div class="line">[Thursday 17 February 2011] [11:00:10] &lt;yrashk&gt;       I have no idea :)</div>
<div class="line">[Thursday 17 February 2011] [11:00:10] &lt;sustrik&gt;      maybe send is fast</div>
<div class="line">[Thursday 17 February 2011] [11:00:29] &lt;sustrik&gt;      how long does sending 1000000 msgs take?</div>
<div class="line">[Thursday 17 February 2011] [11:00:41] &lt;sustrik&gt;      measured before calling zmq_term()</div>
<div class="line">[Thursday 17 February 2011] [11:01:25] &lt;sustrik&gt;      (zmq_term waits for messages to be actually pushed to the wire)</div>
<div class="line">[Thursday 17 February 2011] [11:01:45] &lt;yrashk&gt;       lets see</div>
<div class="line">[Thursday 17 February 2011] [11:01:46] &lt;sustrik&gt;      (what we are interested in is how fast is erlang/ezmq able to push messages to 0mq)</div>
<div class="line">[Thursday 17 February 2011] [11:01:55] &lt;yrashk&gt;       I am measure the whole script timing</div>
<div class="line">[Thursday 17 February 2011] [11:02:04] &lt;yrashk&gt;       measuring*</div>
<div class="line">[Thursday 17 February 2011] [11:02:21] &lt;yrashk&gt;       25 secds</div>
<div class="line">[Thursday 17 February 2011] [11:02:22] &lt;yrashk&gt;       secs</div>
<div class="line">[Thursday 17 February 2011] [11:02:36] &lt;yrashk&gt;       real    0m25.188s</div>
<div class="line">[Thursday 17 February 2011] [11:02:36] &lt;yrashk&gt;       user    0m26.410s</div>
<div class="line">[Thursday 17 February 2011] [11:02:36] &lt;yrashk&gt;       sys     0m22.533s</div>
<div class="line">[Thursday 17 February 2011] [11:03:45] &lt;sustrik&gt;      that&#8217;s before zmq_term is called, right?</div>
<div class="line">[Thursday 17 February 2011] [11:04:30] &lt;sustrik&gt;      that&#8217;s 40k msgs/sec  i.e. 25 usec per message</div>
<div class="line">[Thursday 17 February 2011] [11:04:46] &lt;yrashk&gt;       no, not before</div>
<div class="line">[Thursday 17 February 2011] [11:05:05] &lt;mikko&gt;        are you setting linger to 0</div>
<div class="line">[Thursday 17 February 2011] [11:05:07] &lt;mikko&gt;        ?</div>
<div class="line">[Thursday 17 February 2011] [11:06:07] &lt;yrashk&gt;       def not explicitly</div>
<div class="line">[Thursday 17 February 2011] [11:06:17] &lt;sustrik&gt;      right, setting linger to 0 would cause measuring only pushing the messages to 0mq</div>
<div class="line">[Thursday 17 February 2011] [11:06:21] &lt;yrashk&gt;       just got 52K messages per sec</div>
<div class="line">[Thursday 17 February 2011] [11:06:38] &lt;yrashk&gt;       also, 14249556 microseconds to send</div>
<div class="line">[Thursday 17 February 2011] [11:06:44] &lt;yrashk&gt;       before term</div>
<div class="line">[Thursday 17 February 2011] [11:07:11] &lt;yrashk&gt;       that is 14 seconds</div>
<div class="line">[Thursday 17 February 2011] [11:07:15] &lt;yrashk&gt;       now even 13</div>
<div class="line">[Thursday 17 February 2011] [11:07:21] &lt;sustrik&gt;      ie. 14 usec per message</div>
<div class="line">[Thursday 17 February 2011] [11:07:22] &lt;yrashk&gt;       and 67K messages</div>
<div class="line">[Thursday 17 February 2011] [11:07:27] &lt;yrashk&gt;       and I am not changing anything</div>
<div class="line">[Thursday 17 February 2011] [11:07:35] &lt;sustrik&gt;      with 8-15 in NIF</div>
<div class="line">[Thursday 17 February 2011] [11:07:47] &lt;sustrik&gt;      that sounds more or less reasonable</div>
<div class="line">[Thursday 17 February 2011] [11:08:06] &lt;sustrik&gt;      assuming that 8 is an outlayer</div>
<div class="line">[Thursday 17 February 2011] [11:08:16] &lt;yrashk&gt;       well I cant measure exactly NIF timing, but it&#8217;s very close to that</div>
<div class="line">[Thursday 17 February 2011] [11:08:19] &lt;sustrik&gt;      and average values are around 14-15</div>
<div class="line">[Thursday 17 February 2011] [11:08:34] &lt;yrashk&gt;       avg seemed to be around 11-13</div>
<div class="line">[Thursday 17 February 2011] [11:08:48] &lt;yrashk&gt;       anyway I am getting even 67K messages</div>
<div class="line">[Thursday 17 February 2011] [11:08:48] &lt;sustrik&gt;      that seems ok</div>
<div class="line">[Thursday 17 February 2011] [11:08:58] &lt;yrashk&gt;       I was not able to see that with erlzmq</div>
<div class="line">[Thursday 17 February 2011] [11:09:18] &lt;sustrik&gt;      14.9 usec/msg</div>
<div class="line">[Thursday 17 February 2011] [11:09:54] &lt;sustrik&gt;      can you do ezmq/c perf test as before?</div>
<div class="line">[Thursday 17 February 2011] [11:10:12] &lt;sustrik&gt;      ezmq local + c remote</div>
<div class="line">[Thursday 17 February 2011] [11:10:15] &lt;sustrik&gt;      and vice versa?</div>
<div class="line">[Thursday 17 February 2011] [11:10:27] &lt;yrashk&gt;       sure just let me finish 10mln messages test</div>
<div class="line">[Thursday 17 February 2011] [11:10:35] &lt;sustrik&gt;      sure</div>
<div class="line">[Thursday 17 February 2011] [11:10:40] &lt;yrashk&gt;       still running...</div>
<div class="line">[Thursday 17 February 2011] [11:11:11] &lt;yrashk&gt;       that&#8217;s likely to be like 3 mins</div>
<div class="line">[Thursday 17 February 2011] [11:11:12] &lt;yrashk&gt;       :D</div>
<div class="line">[Thursday 17 February 2011] [11:11:31] &lt;yrashk&gt;       whoa</div>
<div class="line">[Thursday 17 February 2011] [11:11:31] &lt;yrashk&gt;       mean throughput: 71015.7477562681 [msg/s]</div>
<div class="line">[Thursday 17 February 2011] [11:11:34] &lt;yrashk&gt;       71K</div>
<div class="line">[Thursday 17 February 2011] [11:12:48] &lt;yrashk&gt;       with C remote:</div>
<div class="line">[Thursday 17 February 2011] [11:12:48] &lt;yrashk&gt;       mean throughput: 119761.54040167542 [msg/s]</div>
<div class="line">[Thursday 17 February 2011] [11:13:07] &lt;yrashk&gt;       twice as good as it was with erlzmq btw</div>
<div class="line">[Thursday 17 February 2011] [11:13:08] &lt;yrashk&gt;       :-P</div>
<div class="line">[Thursday 17 February 2011] [11:13:49] &lt;yrashk&gt;       mean throughput: 126762.65050054133 [msg/s]</div>
<div class="line">[Thursday 17 February 2011] [11:14:03] &lt;yrashk&gt;       it looks like it warms up more every time I run it again</div>
<div class="line">[Thursday 17 February 2011] [11:14:28] &lt;yrashk&gt;       =_</div>
<div class="line">[Thursday 17 February 2011] [11:15:44] &lt;sustrik&gt;      heh</div>
<div class="line">[Thursday 17 February 2011] [11:16:20] &lt;yrashk&gt;       one thing I know for sure</div>
<div class="line">[Thursday 17 February 2011] [11:16:24] &lt;yrashk&gt;       it&#8217;s faster than erlzmq</div>
<div class="line">[Thursday 17 February 2011] [11:16:34] &lt;yrashk&gt;       I just retested C/erlzmq: it tops at 80K/msgs</div>
<div class="line">[Thursday 17 February 2011] [11:16:45] &lt;yrashk&gt;       while C/ezmq tops at about 120K msgs</div>
<div class="line">[Thursday 17 February 2011] [11:17:26] &lt;sustrik&gt;      nice</div>
<div class="line">[Thursday 17 February 2011] [11:18:00] &lt;yrashk&gt;       and I ony spent... like 2 hours with it?</div>
<div class="line">[Thursday 17 February 2011] [11:18:05] &lt;sustrik&gt;      so maybe just write an email about your experiments to the ML</div>
<div class="line">[Thursday 17 February 2011] [11:18:08] &lt;sustrik&gt;      and have some sleep</div>
<div class="line">[Thursday 17 February 2011] [11:18:19] &lt;yrashk&gt;       I am too lazy to write emails right now</div>
<div class="line">[Thursday 17 February 2011] [11:18:25] &lt;sustrik&gt;      sure</div>
<div class="line">[Thursday 17 February 2011] [11:18:40] &lt;yrashk&gt;       well hopefully ezmq will be of use for somebody</div>
<div class="line">[Thursday 17 February 2011] [11:18:45] &lt;yrashk&gt;       since it&#8217;s faster</div>
<div class="line">[Thursday 17 February 2011] [11:19:01] &lt;sustrik&gt;      we can even have a look at why the call to NIF takes 15 usec later on</div>
<div class="line">[Thursday 17 February 2011] [11:19:14] &lt;yrashk&gt;       yeah it&#8217;s quite long</div>
<div class="line">[Thursday 17 February 2011] [11:19:34] &lt;yrashk&gt;       C version takes no time at all</div>
<div class="line">[Thursday 17 February 2011] [11:19:48] &lt;sustrik&gt;      something like 0.3 usec</div>
<div class="line">[Thursday 17 February 2011] [11:20:02] &lt;sustrik&gt;      so there&#8217;s quite a lot of overhead that can be possibly eliminated</div>
<div class="line">[Thursday 17 February 2011] [11:20:04] &lt;yrashk&gt;       for all messages</div>
<div class="line">[Thursday 17 February 2011] [11:20:23] &lt;sustrik&gt;      for 1-byte messages</div>
<div class="line">[Thursday 17 February 2011] [11:20:30] &lt;yrashk&gt;       right</div>
<div class="line">[Thursday 17 February 2011] [11:20:45] &lt;yrashk&gt;       also may be it is not batching for some reason in this scenario?</div>
<div class="line">[Thursday 17 February 2011] [11:20:49] &lt;yrashk&gt;       could that happen?</div>
<div class="line">[Thursday 17 February 2011] [11:21:34] &lt;sustrik&gt;      batching does not occur only if messages are passed slower than the underlying network stack can send them</div>
<div class="line">[Thursday 17 February 2011] [11:21:51] &lt;sustrik&gt;      which can be the case here</div>
<div class="line">[Thursday 17 February 2011] [11:22:01] &lt;sustrik&gt;      however, if we speed up the erlzmq part</div>
<div class="line">[Thursday 17 February 2011] [11:22:09] &lt;sustrik&gt;      the batching will kick in</div>
<div class="line">[Thursday 17 February 2011] [11:22:39] &lt;yrashk&gt;       I think this is the case</div>
<div class="line">[Thursday 17 February 2011] [11:22:51] &lt;yrashk&gt;       we send whole packets for every byte</div>
<div class="line">[Thursday 17 February 2011] [11:23:11] &lt;sustrik&gt;      possible</div>
<div class="line">[Thursday 17 February 2011] [11:23:38] &lt;sustrik&gt;      but only way to make it not happen is to speed up the sender</div>
<div class="line">[Thursday 17 February 2011] [11:23:45] &lt;sustrik&gt;      i.e. erlang+ezmq</div>
<div class="line">[Thursday 17 February 2011] [11:24:37] &lt;yrashk&gt;       yup</div>
<div class="line">[Thursday 17 February 2011] [11:25:22] &lt;yrashk&gt;       yet I have no idea why this is so slow</div>
<div class="line">[Thursday 17 February 2011] [11:25:29] &lt;yrashk&gt;       well,erlang is indeed not very fast</div>
<div class="line">[Thursday 17 February 2011] [11:25:31] &lt;yrashk&gt;       but still</div>
<div class="line">[Thursday 17 February 2011] [11:27:23] &lt;yrashk&gt;       this code <a class="reference external" href="https://github.com/yrashk/ezmq/blob/master/c_src/ezmq_nif.c#L250">https://github.com/yrashk/ezmq/blob/master/c_src/ezmq_nif.c#L250</a> looks clean enough by me</div>
<div class="line">[Thursday 17 February 2011] [11:27:32] &lt;yrashk&gt;       to not cause <em>too</em> much trouble</div>
<div class="line">[Thursday 17 February 2011] [11:30:05] &lt;sustrik&gt;      yes, this is how most bindings look like</div>
<div class="line">[Thursday 17 February 2011] [11:30:20] &lt;sustrik&gt;      erlzmq is exceptional in its complexity</div>
<div class="line">[Thursday 17 February 2011] [11:30:29] &lt;yrashk&gt;       mine is much simpler, eh?</div>
<div class="line">[Thursday 17 February 2011] [11:30:34] &lt;sustrik&gt;      yup</div>
<div class="line">[Thursday 17 February 2011] [11:30:44] &lt;yrashk&gt;       and faster [grin]</div>
<div class="line">[Thursday 17 February 2011] [11:30:56] &lt;sustrik&gt;      hi5!</div>
<div class="line">[Thursday 17 February 2011] [11:44:24] &lt;yrashk&gt;       hm may be binary allocation isn&#8217;t that fast</div>
<div class="line">[Thursday 17 February 2011] [11:44:51] &lt;yrashk&gt;       there is a way to tell erlang to use existing memory region as a binary without allocating it</div>
<div class="line">[Thursday 17 February 2011] [11:45:05] &lt;yrashk&gt;       but it means it will get into erlang gc</div>
<div class="line">[Thursday 17 February 2011] [11:45:16] &lt;yrashk&gt;       and should not be altered until erlang collects it</div>
<div class="line">[Thursday 17 February 2011] [11:45:26] &lt;yrashk&gt;       sustrik: is there a way to do that with 0mq?</div>
<div class="line">[Thursday 17 February 2011] [11:46:03] &lt;yrashk&gt;       should I not close message on recv and only close in a finalizer called by erlang gc?</div>
<div class="line">[Thursday 17 February 2011] [11:47:10] &lt;sustrik&gt;      yrashk: i don&#8217;t follow</div>
<div class="line">[Thursday 17 February 2011] [11:47:17] &lt;sustrik&gt;      inside the NIF you get a message</div>
<div class="line">[Thursday 17 February 2011] [11:47:23] &lt;yrashk&gt;       yes</div>
<div class="line">[Thursday 17 February 2011] [11:47:27] &lt;yrashk&gt;       then I copy and close it</div>
<div class="line">[Thursday 17 February 2011] [11:47:36] &lt;sustrik&gt;      sounds ok</div>
<div class="line">[Thursday 17 February 2011] [11:47:43] &lt;yrashk&gt;       instead there is a possibility that I can use another API (that I haven&#8217;t used before)</div>
<div class="line">[Thursday 17 February 2011] [11:47:54] &lt;yrashk&gt;       that allows me to reuse existing memory region as a binary</div>
<div class="line">[Thursday 17 February 2011] [11:48:03] &lt;yrashk&gt;       instead of copying it and allocating binary</div>
<div class="line">[Thursday 17 February 2011] [11:48:19] &lt;yrashk&gt;       and I can attach a destructor to such a binary</div>
<div class="line">[Thursday 17 February 2011] [11:48:26] &lt;yrashk&gt;       which can call msg_close</div>
<div class="line">[Thursday 17 February 2011] [11:48:37] &lt;yrashk&gt;       I am just thinking how good or bad this approach is</div>
<div class="line">[Thursday 17 February 2011] [11:49:18] &lt;sustrik&gt;      it&#8217;s not bad, but it&#8217;ll get pretty complex soon</div>
<div class="line">[Thursday 17 February 2011] [11:49:36] &lt;sustrik&gt;      i would just stick with the existing copy semantics at the moment</div>
<div class="line">[Thursday 17 February 2011] [11:49:56] &lt;yrashk&gt;       I am just trying to understand where&#8217;s the bottleneck</div>
<div class="line">[Thursday 17 February 2011] [11:50:11] &lt;yrashk&gt;       btw it looks like ezmq got more or less consistently 2x faster than erlzmq</div>
<div class="line">[Thursday 17 February 2011] [11:50:16] &lt;yrashk&gt;       with some minor changes</div>
<div class="line">[Thursday 17 February 2011] [11:50:29] &lt;yrashk&gt;       at least I am constantly getting 60-70K</div>
<div class="line">[Thursday 17 February 2011] [11:50:32] &lt;sustrik&gt;      nice</div>
<div class="line">[Thursday 17 February 2011] [11:51:07] &lt;sustrik&gt;      handling native memory from VM tends to be pretty messy</div>
<div class="line">[Thursday 17 February 2011] [11:51:24] &lt;yrashk&gt;       I know</div>
<div class="line">[Thursday 17 February 2011] [11:51:31] &lt;sustrik&gt;      anyway, 15 usec for an allocation seems too much</div>
<div class="line">[Thursday 17 February 2011] [11:51:39] &lt;yrashk&gt;       well</div>
<div class="line">[Thursday 17 February 2011] [11:51:45] &lt;yrashk&gt;       I don&#8217;t know what exactly takes 15 usec</div>
<div class="line">[Thursday 17 February 2011] [11:51:58] &lt;sustrik&gt;      i would rather guess scheduling is kicking in or something like that</div>
<div class="line">[Thursday 17 February 2011] [11:52:03] &lt;yrashk&gt;       I am just reading the code and fantasizing</div>
<div class="line">[Thursday 17 February 2011] [11:52:13] &lt;yrashk&gt;       well when it enters C part</div>
<div class="line">[Thursday 17 February 2011] [11:52:20] &lt;yrashk&gt;       there is no scheduling happening whatsoevr</div>
<div class="line">[Thursday 17 February 2011] [11:52:52] &lt;sustrik&gt;      doesn&#8217;t the erlang thread get into wait state</div>
<div class="line">[Thursday 17 February 2011] [11:53:07] &lt;sustrik&gt;      while dedicated NIF thread does the work?</div>
<div class="line">[Thursday 17 February 2011] [11:53:09] &lt;yrashk&gt;       well current scheduler waits until C function ends</div>
<div class="line">[Thursday 17 February 2011] [11:53:18] &lt;yrashk&gt;       there&#8217;s no dedicated NIF thread</div>
<div class="line">[Thursday 17 February 2011] [11:53:22] &lt;yrashk&gt;       it&#8217;s in the scheduler&#8217;s thread</div>
<div class="line">[Thursday 17 February 2011] [11:53:41] &lt;sustrik&gt;      ok</div>
<div class="line">[Thursday 17 February 2011] [11:53:52] &lt;sustrik&gt;      that should not take 15 usec either</div>
<div class="line">[Thursday 17 February 2011] [11:54:02] &lt;yrashk&gt;       no</div>
<div class="line">[Thursday 17 February 2011] [11:54:10] &lt;yrashk&gt;       I am really at loss here</div>
<div class="line">[Thursday 17 February 2011] [11:54:12] &lt;sustrik&gt;      maybe just locking and unlocking a mutex or somesuch</div>
<div class="line">[Thursday 17 February 2011] [11:54:15] &lt;yrashk&gt;       I don&#8217;t quite get it</div>
<div class="line">[Thursday 17 February 2011] [11:54:16] &lt;sustrik&gt;      ~1 usec</div>
<div class="line">[Thursday 17 February 2011] [11:54:53] &lt;yrashk&gt;       NIFs are pretty much like BIFs, implemented directly in the VMs opcode interpreter</div>
<div class="line">[Thursday 17 February 2011] [11:55:38] &lt;sustrik&gt;      can we do measurements in both erlang and ezmq?</div>
<div class="line">[Thursday 17 February 2011] [11:55:51] &lt;sustrik&gt;      1. before NIF is called</div>
<div class="line">[Thursday 17 February 2011] [11:55:57] &lt;sustrik&gt;      2. when C code is invoked</div>
<div class="line">[Thursday 17 February 2011] [11:56:06] &lt;sustrik&gt;      3. when C code is ready</div>
<div class="line">[Thursday 17 February 2011] [11:56:10] &lt;yrashk&gt;       btw time meas. takes time too</div>
<div class="line">[Thursday 17 February 2011] [11:56:19] &lt;sustrik&gt;      4. when erlang resumes execution</div>
<div class="line">[Thursday 17 February 2011] [11:56:30] &lt;sustrik&gt;      yes</div>
<div class="line">[Thursday 17 February 2011] [11:56:43] &lt;sustrik&gt;      something like readeing TSC is preferable</div>
<div class="line">[Thursday 17 February 2011] [11:56:54] &lt;sustrik&gt;      however, i am not sure it&#8217;s available from erlang</div>
<div class="line">[Thursday 17 February 2011] [11:56:59] &lt;yrashk&gt;       TSC?</div>
<div class="line">[Thursday 17 February 2011] [11:57:15] &lt;sustrik&gt;      processor tick count</div>
<div class="line">[Thursday 17 February 2011] [11:58:15] &lt;sustrik&gt;      but we don&#8217;t to do that now</div>
<div class="line">[Thursday 17 February 2011] [11:58:22] &lt;sustrik&gt;      let&#8217;s use just standard time measurement</div>
<div class="line">[Thursday 17 February 2011] [11:58:44] &lt;sustrik&gt;      even if single measurement takes 1 usec</div>
<div class="line">[Thursday 17 February 2011] [11:59:05] &lt;sustrik&gt;      the original 15 usecs should still be visible</div>
<div class="line">[Thursday 17 February 2011] [12:01:26] &lt;yrashk&gt;       ya</div>
<div class="line">[Thursday 17 February 2011] [12:02:00] &lt;yrashk&gt;       I usually prefer to think about potential cause of a problem, sometimes logic beats brutal force</div>
<div class="line">[Thursday 17 February 2011] [12:02:03] &lt;yrashk&gt;       :D</div>
<div class="line">[Thursday 17 February 2011] [12:04:33] &lt;sustrik&gt;      my experience with tuning is that in most cases you are very surprised when you find out where the bottleneck is</div>
<div class="line">[Thursday 17 February 2011] [12:05:00] &lt;yrashk&gt;       true</div>
<div class="line">[Thursday 17 February 2011] [12:07:06] &lt;yrashk&gt;       damn my macbook air is much slower</div>
<div class="line">[Thursday 17 February 2011] [12:08:10] &lt;yrashk&gt;       ...than my dual quad core mac pro :D</div>
<div class="line">[Thursday 17 February 2011] [12:09:00] &lt;guido_g&gt;      how comes?</div>
<div class="line">[Thursday 17 February 2011] [12:09:04] &lt;yrashk&gt;       very weird</div>
<div class="line">[Thursday 17 February 2011] [12:09:09] &lt;guido_g&gt;      in deed</div>
<div class="line">[Thursday 17 February 2011] [12:09:15] &lt;yrashk&gt;       in bed</div>
<div class="line">[Thursday 17 February 2011] [12:09:53] &lt;guido_g&gt;      sustrik: any pgm changes between 2.1.0 und the current git?</div>
<div class="line">[Thursday 17 February 2011] [12:10:16] &lt;guido_g&gt;      updated zmq to git master and pgm stopped working</div>
<div class="line">[Thursday 17 February 2011] [12:10:26] &lt;guido_g&gt;      pgm receive</div>
<div class="line">[Thursday 17 February 2011] [12:10:30] &lt;sustrik&gt;      what&#8217;s the problem?</div>
<div class="line">[Thursday 17 February 2011] [12:10:59] &lt;guido_g&gt;      epgm messages are not received anymore</div>
<div class="line">[Thursday 17 February 2011] [12:11:33] &lt;guido_g&gt;      restored the 2.1.0 from the tar and everything was back</div>
<div class="line">[Thursday 17 February 2011] [12:12:23] &lt;guido_g&gt;      plain amd64 linux (2.6.37) box</div>
<div class="line">[Thursday 17 February 2011] [12:15:19] &lt;sustrik&gt;      can you report the problem?</div>
<div class="line">[Thursday 17 February 2011] [12:15:25] &lt;guido_g&gt;      sure</div>
<div class="line">[Thursday 17 February 2011] [12:15:30] &lt;sustrik&gt;      thanks</div>
<div class="line">[Thursday 17 February 2011] [12:15:34] &lt;guido_g&gt;      going to write small tests</div>
<div class="line">[Thursday 17 February 2011] [12:16:02] &lt;sustrik&gt;      post a note to the ML so that steve-o is aware of the problem</div>
<div class="line">[Thursday 17 February 2011] [12:16:11] &lt;guido_g&gt;      maybe it&#8217;s the python binding...</div>
<div class="line">[Thursday 17 February 2011] [12:16:23] &lt;guido_g&gt;      yepp</div>
<div class="line">[Thursday 17 February 2011] [12:16:24] &lt;sustrik&gt;      not likely imo</div>
<div class="line">[Thursday 17 February 2011] [12:16:37] &lt;guido_g&gt;      no, because i just switched libzmq</div>
<div class="line">[Thursday 17 February 2011] [12:17:20] &lt;yrashk&gt;       anyway I am off for a nap</div>
<div class="line">[Thursday 17 February 2011] [12:17:28] &lt;yrashk&gt;       sustrik: thanks a lot for your help!</div>
<div class="line">[Thursday 17 February 2011] [12:17:33] &lt;guido_g&gt;      good night!</div>
<div class="line">[Thursday 17 February 2011] [12:17:48] &lt;yrashk&gt;       more like morning here already</div>
<div class="line">[Thursday 17 February 2011] [12:17:49] &lt;yrashk&gt;       :D</div>
<div class="line">[Thursday 17 February 2011] [12:17:51] &lt;yrashk&gt;       thanks anyway</div>
<div class="line">[Thursday 17 February 2011] [12:32:09] &lt;sustrik&gt;      good night</div>
<div class="line">[Thursday 17 February 2011] [12:40:23] &lt;eyeris&gt;       Am I doing something incorrectly here, or is that &#8220;Resource temporarily unavailable&#8221; message related to some actual resource being in use? I&#8217;ve checked that port 5563 is not in use. What other resource could it be referring to? <a class="reference external" href="http://pastebin.com/SdxBiFAk">http://pastebin.com/SdxBiFAk</a></div>
<div class="line">[Thursday 17 February 2011] [12:40:42] &lt;guido_g&gt;      ouch</div>
<div class="line">[Thursday 17 February 2011] [12:41:05] &lt;guido_g&gt;      the test sender runs into an assert</div>
<div class="line">[Thursday 17 February 2011] [12:41:27] &lt;guido_g&gt;      Assertion failed: rc == 0 (connect_session.cpp:82)</div>
<div class="line">[Thursday 17 February 2011] [12:43:05] &lt;eyeris&gt;       guido_g: in my code? I don&#8217;t see that</div>
<div class="line">[Thursday 17 February 2011] [12:43:13] &lt;guido_g&gt;      no</div>
<div class="line">[Thursday 17 February 2011] [12:51:56] &lt;guido_g&gt;      mail sent</div>
<div class="line">[Thursday 17 February 2011] [12:58:02] &lt;guido_g&gt;      eyeris: it&#8217;s a timing problem</div>
<div class="line">[Thursday 17 February 2011] [12:58:26] &lt;guido_g&gt;      the io thread simply does not have enough time to connect</div>
<div class="line">[Thursday 17 February 2011] [12:59:17] &lt;guido_g&gt;      eyeris: <a class="reference external" href="https://gist.github.com/832259">https://gist.github.com/832259</a>  &lt;- works</div>
<div class="line">[Thursday 17 February 2011] [13:02:55] &lt;eyeris&gt;       I understand the idea behind what you&#8217;re saying. In fact, I tried the sleep(1) before the loop before and it didn&#8217;t work. Using your gist I get an error: Assertion failed: <a href="#id35"><span class="problematic" id="id36">*</span></a>tmpbuf &gt; 0 (src/zmq_decoder.cpp:60)</div>
<div class="line">[Thursday 17 February 2011] [13:03:38] &lt;guido_g&gt;      ouch</div>
<div class="line">[Thursday 17 February 2011] [13:04:14] &lt;guido_g&gt;      i&#8217;m on zeromq 2.1.0 from the tarball and the latest pyzmq (git master)</div>
<div class="line">[Thursday 17 February 2011] [13:05:00] &lt;eyeris&gt;       I am on 2.0.10 from pypi</div>
<div class="line">[Thursday 17 February 2011] [13:05:28] &lt;guido_g&gt;      and zeromq version?</div>
<div class="line">[Thursday 17 February 2011] [13:05:54] &lt;eyeris&gt;       Same</div>
<div class="line">[Thursday 17 February 2011] [13:06:09] &lt;guido_g&gt;      explains the assertion</div>
<div class="line">[Thursday 17 February 2011] [13:06:31] &lt;guido_g&gt;      try to update zeromq to 2.1.0 (from the tarball)</div>
<div class="line">[Thursday 17 February 2011] [13:15:41] &lt;eyeris&gt;       Alright, I&#8217;ve built and installed 2.1.0 into /opt/zeromq</div>
<div class="line">[Thursday 17 February 2011] [13:15:53] &lt;eyeris&gt;       I can&#8217;t figure out how to make pyzmq find it though</div>
<div class="line">[Thursday 17 February 2011] [13:16:13] &lt;eyeris&gt;       There doesn&#8217;t seem to be a &#8211;with-zeromq (or similar) build switch</div>
<div class="line">[Thursday 17 February 2011] [13:16:48] &lt;guido_g&gt;      from where did you get zeromq before?</div>
<div class="line">[Thursday 17 February 2011] [13:16:53] &lt;eyeris&gt;       pypi</div>
<div class="line">[Thursday 17 February 2011] [13:17:03] &lt;guido_g&gt;      not pyzmq</div>
<div class="line">[Thursday 17 February 2011] [13:17:50] &lt;eyeris&gt;       <a class="reference external" href="http://pypi.python.org/pypi/pyzmq-static/2.0.10">http://pypi.python.org/pypi/pyzmq-static/2.0.10</a></div>
<div class="line">[Thursday 17 February 2011] [13:18:00] &lt;guido_g&gt;      ouch</div>
<div class="line">[Thursday 17 February 2011] [13:18:01] &lt;eyeris&gt;       That includes the lib</div>
<div class="line">[Thursday 17 February 2011] [13:19:24] &lt;guido_g&gt;      get rid of it and use the non-static version</div>
<div class="line">[Thursday 17 February 2011] [13:20:04] &lt;guido_g&gt;      install zeromq using the default settings (using /usr/local/lib)</div>
<div class="line">[Thursday 17 February 2011] [13:20:18] &lt;guido_g&gt;      then install the non-static pyzmq</div>
<div class="line">[Thursday 17 February 2011] [13:34:04] &lt;eyeris&gt;       Works now</div>
<div class="line">[Thursday 17 February 2011] [13:34:05] &lt;eyeris&gt;       Thanks</div>
<div class="line">[Thursday 17 February 2011] [13:55:48] &lt;fbarriga&gt;     hello everyone</div>
<div class="line">[Thursday 17 February 2011] [13:57:24] &lt;fbarriga&gt;     there is any trade off on using zmq for non critical latency ? (use it only because is comfortable)</div>
<div class="line">[Thursday 17 February 2011] [14:03:48] &lt;pieterh&gt;      hi fbarriga</div>
<div class="line">[Thursday 17 February 2011] [14:03:53] &lt;fbarriga&gt;     hi</div>
<div class="line">[Thursday 17 February 2011] [14:04:02] &lt;pieterh&gt;      0MQ makes great soup no matter how you slice it</div>
<div class="line">[Thursday 17 February 2011] [14:04:26] &lt;pieterh&gt;      its speed is just a bonus when you need it</div>
<div class="line">[Thursday 17 February 2011] [14:04:49] &lt;pieterh&gt;      what&#8217;s your use case?</div>
<div class="line">[Thursday 17 February 2011] [14:06:06] &lt;fbarriga&gt;     because here I have a program (A) that receive data and send it to another (B) to process it. So I want to monitor B in a gui (C) and I don&#8217;t need a fancy way to send data. But as I&#8217;m already using zmq for comunicate A and B, it can be a good idea to use it to comunicate with the gui</div>
<div class="line">[Thursday 17 February 2011] [14:06:58] &lt;pieterh&gt;      sure</div>
<div class="line">[Thursday 17 February 2011] [14:09:41] &lt;fbarriga&gt;     has anyone tested the latency of using an point-to-point channel v/s publisher/subscriber ?</div>
<div class="line">[Thursday 17 February 2011] [14:10:00] &lt;pieterh&gt;      it&#8217;s the same, unless you ping-pong back</div>
<div class="line">[Thursday 17 February 2011] [14:14:49] &lt;fbarriga&gt;     but any difference ? not even 1 uS ?</div>
<div class="line">[Thursday 17 February 2011] [14:15:13] &lt;pieterh&gt;      over the same transport? depends how many messages you are sending, how large they are</div>
<div class="line">[Thursday 17 February 2011] [14:15:23] &lt;pieterh&gt;      it does not depend on the socket type</div>
<div class="line">[Thursday 17 February 2011] [14:16:00] &lt;fbarriga&gt;     using unix socket, thousands of msg with a size of 32 bytes</div>
<div class="line">[Thursday 17 February 2011] [14:16:31] &lt;pieterh&gt;      fbarriga: have you read the documentation yet? the Guide?</div>
<div class="line">[Thursday 17 February 2011] [14:17:11] &lt;fbarriga&gt;     umm a kind RTFM ?</div>
<div class="line">[Thursday 17 February 2011] [14:17:34] &lt;pieterh&gt;      no, I want to know how much you know about 0MQ</div>
<div class="line">[Thursday 17 February 2011] [14:17:45] &lt;fbarriga&gt;     I read it but not completely</div>
<div class="line">[Thursday 17 February 2011] [14:18:04] &lt;pieterh&gt;      &#8216;point to point channel&#8217; is not a 0MQ term</div>
<div class="line">[Thursday 17 February 2011] [14:18:14] &lt;fbarriga&gt;     Not too much, I have 2 publishers, one on C++ and other on python feeding a C++ program</div>
<div class="line">[Thursday 17 February 2011] [14:19:17] &lt;pieterh&gt;      i think your questions are beside the point</div>
<div class="line">[Thursday 17 February 2011] [14:19:26] &lt;pieterh&gt;      (latency)</div>
<div class="line">[Thursday 17 February 2011] [14:19:41] &lt;pieterh&gt;      if you are not actually worried about usecs, it&#8217;s irrelevant what I say</div>
<div class="line">[Thursday 17 February 2011] [14:20:23] &lt;staylor&gt;      something I&#8217;m not very clear on, if I have a server bound to an XREQ with multiple clients bound to REP how exactly could I send a message to a specific client from the server side?  I&#8217;m not very clear on how the addressing works here.</div>
<div class="line">[Thursday 17 February 2011] [14:20:28] &lt;pieterh&gt;      the usual rule is measure it, don&#8217;t trust others&#8217; opinions</div>
<div class="line">[Thursday 17 February 2011] [14:20:43] &lt;pieterh&gt;      staylor: read Ch3 of the Guide</div>
<div class="line">[Thursday 17 February 2011] [14:20:56] &lt;pieterh&gt;      you need an XREP socket to do routing, and we&#8217;re going to rename that a ROUTER socket</div>
<div class="line">[Thursday 17 February 2011] [14:21:03] &lt;fbarriga&gt;     I&#8217;m worried about uS. The python publisher uses bulk historic data (no latency problem). The C++ publisher receives marketdata in realtime</div>
<div class="line">[Thursday 17 February 2011] [14:21:32] &lt;pieterh&gt;      fbarriga: ok, that&#8217;s good</div>
<div class="line">[Thursday 17 February 2011] [14:21:43] &lt;pieterh&gt;      you can try this yourself, it&#8217;s trivial, two test programs in C++</div>
<div class="line">[Thursday 17 February 2011] [14:21:56] &lt;pieterh&gt;      try pubsub and push-pull</div>
<div class="line">[Thursday 17 February 2011] [14:21:59] &lt;pieterh&gt;      measure the latency</div>
<div class="line">[Thursday 17 February 2011] [14:22:20] &lt;fbarriga&gt;     yes, I was working in that way, but trying to avoid work asking here =)</div>
<div class="line">[Thursday 17 February 2011] [14:22:21] &lt;staylor&gt;      I&#8217;ll look at it again, but out of quick curiosity would messages go to all REP sockets and be filtered or only to the specific client?</div>
<div class="line">[Thursday 17 February 2011] [14:22:42] &lt;pieterh&gt;      fbarriga: go do your own homework :-)</div>
<div class="line">[Thursday 17 February 2011] [14:22:48] &lt;pieterh&gt;      come back when you have results for us</div>
<div class="line">[Thursday 17 February 2011] [14:22:59] &lt;fbarriga&gt;     but is not too easy, event getting the time add some delay</div>
<div class="line">[Thursday 17 February 2011] [14:23:06] &lt;fbarriga&gt;     ok, thanks for the help</div>
<div class="line">[Thursday 17 February 2011] [14:23:27] &lt;pieterh&gt;      fbarriga: see how the latency test programs do it</div>
<div class="line">[Thursday 17 February 2011] [14:24:24] &lt;pieterh&gt;      staylor: clients are usually REQ, not REP</div>
<div class="line">[Thursday 17 February 2011] [14:24:41] &lt;pieterh&gt;      a REP socket is really for workers</div>
<div class="line">[Thursday 17 February 2011] [14:25:12] &lt;pieterh&gt;      are the names confusing?</div>
<div class="line">[Thursday 17 February 2011] [14:25:19] &lt;staylor&gt;      I might be going at this all wrong, but what I&#8217;m looking for is clients that connect to a server and wait for work requests (clients perform a task for the server)</div>
<div class="line">[Thursday 17 February 2011] [14:25:31] &lt;pieterh&gt;      call them &#8216;workers&#8217;, for sanity&#8217;s sake :-)</div>
<div class="line">[Thursday 17 February 2011] [14:26:05] &lt;staylor&gt;      alright, so workers connect to the server which then sends them requests</div>
<div class="line">[Thursday 17 February 2011] [14:26:11] &lt;pieterh&gt;      it round-robins them</div>
<div class="line">[Thursday 17 February 2011] [14:26:20] &lt;pieterh&gt;      that&#8217;s what an XREQ/DEALER socket does</div>
<div class="line">[Thursday 17 February 2011] [14:26:27] &lt;pieterh&gt;      deals the cards out</div>
<div class="line">[Thursday 17 February 2011] [14:26:44] &lt;staylor&gt;      in my scenario I need to send work to specific workers, that&#8217;s where I&#8217;m unclear about how to identify them</div>
<div class="line">[Thursday 17 February 2011] [14:27:11] &lt;fbarriga&gt;     (any chance to use inproc for two different process ? like shared memory between processes?)</div>
<div class="line">[Thursday 17 February 2011] [14:27:27] &lt;pieterh&gt;      staylor: so, read Ch3, it is explained in exhaustive detail</div>
<div class="line">[Thursday 17 February 2011] [14:27:43] &lt;pieterh&gt;      you need REQ sockets for the workers, and XREQ to route to specific workers</div>
<div class="line">[Thursday 17 February 2011] [14:28:11] &lt;pieterh&gt;      fbarriga: nope, not unless you&#8217;re able to hack together a shmem transport for 0MQ</div>
<div class="line">[Thursday 17 February 2011] [14:28:14] &lt;staylor&gt;      I think I see where I misunderstood the docs, I&#8217;ll go over chap3 again</div>
<div class="line">[Thursday 17 February 2011] [14:28:28] &lt;staylor&gt;      thank you</div>
<div class="line">[Thursday 17 February 2011] [14:28:32] &lt;pieterh&gt;      np</div>
<div class="line">[Thursday 17 February 2011] [14:29:21] &lt;fbarriga&gt;     anyone has tried ?</div>
<div class="line">[Thursday 17 February 2011] [14:29:36] &lt;pieterh&gt;      don&#8217;t think so</div>
<div class="line">[Thursday 17 February 2011] [14:29:48] &lt;pieterh&gt;      it would be fun to do but not portable</div>
<div class="line">[Thursday 17 February 2011] [15:16:55] &lt;mikko&gt;        evenin&#8217;</div>
<div class="line">[Thursday 17 February 2011] [15:26:26] &lt;staylor&gt;      is there a way to know if a worker is connected or not, or should that be let to the application to send acknowledgement requests?</div>
<div class="line">[Thursday 17 February 2011] [15:26:55] &lt;staylor&gt;      for example knowing when the underlying socket is broken?</div>
<div class="line">[Thursday 17 February 2011] [15:28:13] &lt;Guthur&gt;       staylor, the application will have to take care of the reliability</div>
<div class="line">[Thursday 17 February 2011] [15:29:34] &lt;staylor&gt;      alright, thank you</div>
<div class="line">[Thursday 17 February 2011] [15:55:13] &lt;sam`&gt; hi</div>
<div class="line">[Thursday 17 February 2011] [15:55:34] &lt;sam`&gt; i haven&#8217;t heard back anything from my question yesterday about epgm and data distribution</div>
<div class="line">[Thursday 17 February 2011] [15:55:45] &lt;sam`&gt; anyone around with some knowledge on this?</div>
<div class="line">[Thursday 17 February 2011] [15:57:00] &lt;drbobbeaty&gt;   sam: I&#8217;m not one of the main guys, but I&#8217;m using epgm and if I can answer your question, I&#8217;ll give it a try. Can you repeat it (or cut-n-paste it) again?</div>
<div class="line">[Thursday 17 February 2011] [15:57:33] &lt;Guthur&gt;       sam`, you might try the Mailing list as well</div>
<div class="line">[Thursday 17 February 2011] [15:58:19] &lt;sam`&gt; drbobbeaty: sure</div>
<div class="line">[Thursday 17 February 2011] [15:58:39] &lt;sam`&gt; i need to distribute as efficiently as possible 100MB of data to several hundred machines in several datacenters around the world</div>
<div class="line">[Thursday 17 February 2011] [15:59:08] &lt;sam`&gt; I was looking at multicast, and since my application uses 0MQ, epgm sounds like a good fit</div>
<div class="line">[Thursday 17 February 2011] [15:59:22] &lt;sam`&gt; but I&#8217;m not sure multicast is even the appopriate solution</div>
<div class="line">[Thursday 17 February 2011] [16:00:38] &lt;sam`&gt; also, I would like to do source-specific multicast, but I&#8217;m not sure how to do this with 0MQ. in SSM, you need to somehow specify both the source IP and the multicast channel, but I don&#8217;t know how to do this in the epgm://&lt;iface&gt;;&lt;multicast endpoint&gt; syntax</div>
<div class="line">[Thursday 17 February 2011] [16:01:00] &lt;drbobbeaty&gt;   Wow... 100MB... Honestly, 0MQ is not what I&#8217;d be using - not that it&#8217;s bad, but there are system-level tools to do this far more efficiently. For example, rdist on unix... you set up a &#8220;tree&#8221; of your datacenters where the &#8216;source&#8217; sends to 4 boxes, each of those 4 send to 4 more, etc. Pretty soon it&#8217;s all done.</div>
<div class="line">[Thursday 17 February 2011] [16:01:48] &lt;drbobbeaty&gt;   As for the source-specific multicast, that&#8217;s not really possible in the 0MQ world because the sender is masked by the OpenPGM/URL scheme.</div>
<div class="line">[Thursday 17 February 2011] [16:01:49] &lt;lt_schmidt_jr&gt;        Upon advice from the experts I have grabbed the 2.1.0 tarball  instead of the 2.0.10 I have been using with homebrew on OSX</div>
<div class="line">[Thursday 17 February 2011] [16:01:57] &lt;lt_schmidt_jr&gt;        I am seeing the following error:</div>
<div class="line">[Thursday 17 February 2011] [16:02:00] &lt;lt_schmidt_jr&gt;        Making check in tests</div>
<div class="line">[Thursday 17 February 2011] [16:02:01] &lt;lt_schmidt_jr&gt;        make  check-TESTS</div>
<div class="line">[Thursday 17 February 2011] [16:02:01] &lt;lt_schmidt_jr&gt;        PASS: test_pair_inproc</div>
<div class="line">[Thursday 17 February 2011] [16:02:01] &lt;lt_schmidt_jr&gt;        PASS: test_pair_ipc</div>
<div class="line">[Thursday 17 February 2011] [16:02:02] &lt;lt_schmidt_jr&gt;        PASS: test_pair_tcp</div>
<div class="line">[Thursday 17 February 2011] [16:02:02] &lt;lt_schmidt_jr&gt;        PASS: test_reqrep_inproc</div>
<div class="line">[Thursday 17 February 2011] [16:02:02] &lt;lt_schmidt_jr&gt;        PASS: test_reqrep_ipc</div>
<div class="line">[Thursday 17 February 2011] [16:02:03] &lt;lt_schmidt_jr&gt;        PASS: test_reqrep_tcp</div>
<div class="line">[Thursday 17 February 2011] [16:02:03] &lt;lt_schmidt_jr&gt;        Invalid argument</div>
<div class="line">[Thursday 17 February 2011] [16:02:03] &lt;lt_schmidt_jr&gt;        nbytes != -1 (tcp_socket.cpp:197)</div>
<div class="line">[Thursday 17 February 2011] [16:02:04] &lt;lt_schmidt_jr&gt;        FAIL: test_shutdown_stress</div>
<div class="line">[Thursday 17 February 2011] [16:02:17] &lt;lt_schmidt_jr&gt;        sorry for the paste fail</div>
<div class="line">[Thursday 17 February 2011] [16:02:47] &lt;lt_schmidt_jr&gt;        so test_shutdown_stress fails when I run make check</div>
<div class="line">[Thursday 17 February 2011] [16:02:51] &lt;lt_schmidt_jr&gt;        should I worry?</div>
<div class="line">[Thursday 17 February 2011] [16:03:50] &lt;drbobbeaty&gt;   sam`: If you want to double-check me on the source specific multicast, send something to the mailing list. As for the 100MB file, I think there are better ways - especially since multicast is not routable so you&#8217;d have to make &#8220;tunnels&#8221; and that&#8217;s a lot of work. There are tools/utilities geared for this for unix.</div>
<div class="line">[Thursday 17 February 2011] [16:04:12] &lt;sam`&gt; drbobbeaty: what do you mean make tunnels?</div>
<div class="line">[Thursday 17 February 2011] [16:04:44] &lt;drbobbeaty&gt;   lt_schmidt_jr: this is a known issue with 2.1.0 but I <em>believe</em> it&#8217;s fixed in the master (HEAD) on the git repo.</div>
<div class="line">[Thursday 17 February 2011] [16:04:59] &lt;sam`&gt; drbobbeaty: afaik multicast is routable</div>
<div class="line">[Thursday 17 February 2011] [16:05:40] &lt;sam`&gt; in my situation, all network equipment is layer3 capable and supports igmpv3, igmp snooping, pgm and ssm</div>
<div class="line">[Thursday 17 February 2011] [16:05:55] &lt;lt_schmidt_jr&gt;        drbobbeaty: thanks I think I will hold off, given the issues with the HEAD revision I see on the list</div>
<div class="line">[Thursday 17 February 2011] [16:06:17] &lt;drbobbeaty&gt;   sam`: I can almost certainly guarantee that it&#8217;s not going to route through the internet. If you have a private WAN, then yes, it can be set up to have one switch send the data to another, but if you&#8217;re betting on the plain old net, I think you&#8217;re going to find it isn&#8217;t.</div>
<div class="line">[Thursday 17 February 2011] [16:06:38] &lt;sam`&gt; drbobbeaty: yes, you&#8217;re absolutely right</div>
<div class="line">[Thursday 17 February 2011] [16:07:05] &lt;sam`&gt; but we have dedicated links between our colos and a private network</div>
<div class="line">[Thursday 17 February 2011] [16:08:34] &lt;drbobbeaty&gt;   sam`: OK.. if you have private WANs then you can route it. However, my point on the best tool for the job stands. You can build something with 0MQ and use epgm, but I think there are better tools like rdist already written that make this so much easier.</div>
<div class="line">[Thursday 17 February 2011] [16:08:54] &lt;sam`&gt; drbobbeaty: rdist looks cool, but it&#8217;s basically a dump copy, it doesn&#8217;t really help for the distribution problem</div>
<div class="line">[Thursday 17 February 2011] [16:09:58] &lt;drbobbeaty&gt;   sam`: OK... I&#8217;m missing something. If you have 100MB to move from A to B, then you can put that 100MB in a file, use rdist, load it at the other end. Right? If not, what am I missing about your requirements?</div>
<div class="line">[Thursday 17 February 2011] [16:10:26] &lt;sam`&gt; it&#8217;s not so much the copy from A to B that is the problem</div>
<div class="line">[Thursday 17 February 2011] [16:10:38] &lt;sam`&gt; it&#8217;s the distribution from A to B001 to B999</div>
<div class="line">[Thursday 17 February 2011] [16:11:32] &lt;sam`&gt; right now, we&#8217;re using scp, one machine after the other, which is what has been done for the past few years, and was probably fine with ~20 machines</div>
<div class="line">[Thursday 17 February 2011] [16:11:49] &lt;sam`&gt; now we have ... &#8220;more&#8221;</div>
<div class="line">[Thursday 17 February 2011] [16:12:27] &lt;sam`&gt; so I&#8217;m looking for a scalable solution, which obviously makes multicast come to mind</div>
<div class="line">[Thursday 17 February 2011] [16:12:41] &lt;drbobbeaty&gt;   sam`: If it were put in as a file, then the 1000 machines at B can all read it at the same time. Maybe what you need is an NFS mount for all machines at B to share?</div>
<div class="line">[Thursday 17 February 2011] [16:13:13] &lt;sam`&gt; drbobbeaty: copying 1 file to 1000 serially, and having 1000 machines pull that 1 file from 1 machine at the same time</div>
<div class="line">[Thursday 17 February 2011] [16:13:16] &lt;sam`&gt; doesn&#8217;t help at all</div>
<div class="line">[Thursday 17 February 2011] [16:13:24] &lt;sam`&gt; since you&#8217;ll be sharing the bandwidth of that one machine</div>
<div class="line">[Thursday 17 February 2011] [16:13:31] &lt;sam`&gt; so no time reduction at all</div>
<div class="line">[Thursday 17 February 2011] [16:14:52] &lt;sam`&gt; and that&#8217;s even worse when you only want the distribution of that file to take no more than X% of the network capacity</div>
<div class="line">[Thursday 17 February 2011] [16:15:20] &lt;sam`&gt; (we&#8217;re in a network-latency-critical environment, as is latency between our services as a direct impact on our revenue)</div>
<div class="line">[Thursday 17 February 2011] [16:15:22] &lt;drbobbeaty&gt;   sam`: if you have a primary box with a 10GbE NIC (or two), then it&#8217;ll be a load, but not a lot.</div>
<div class="line">[Thursday 17 February 2011] [16:16:05] &lt;drbobbeaty&gt;   sam`: you know your set-up best, and maybe this isn&#8217;t a workable solution. If that&#8217;s the case, then sure, use 0MQ.</div>
<div class="line">[Thursday 17 February 2011] [16:16:31] &lt;drbobbeaty&gt;   sam`: You can write a &#8220;sender&#8221; and a &#8220;receiver&#8221; PUB/SUB and then make sure it&#8217;s routed, and off you go.</div>
<div class="line">[Thursday 17 February 2011] [16:16:48] &lt;drbobbeaty&gt;   The examples in The Guide are really about all you need.</div>
<div class="line">[Thursday 17 February 2011] [16:17:04] &lt;sam`&gt; it sure is a complex problem, and I&#8217;m not a network expert by any means</div>
<div class="line">[Thursday 17 February 2011] [16:17:26] &lt;sam`&gt; but so far all existing solutions like puppet file serving, rdist, etc, all pull from one single machine, in unicast</div>
<div class="line">[Thursday 17 February 2011] [16:17:45] &lt;sam`&gt; which puts a lot of load on that one machine, and the network, because you have N concurrent data streams</div>
<div class="line">[Thursday 17 February 2011] [16:18:25] &lt;sam`&gt; that&#8217;s why multicast looked interesting to me because I feel like it&#8217;s (theoratically) the most &#8220;efficient&#8221; in the number of network packets transmitted</div>
<div class="line">[Thursday 17 February 2011] [16:19:26] &lt;drbobbeaty&gt;   sam`: But it&#8217;s not &#8220;free&#8221;... if you have a failure, and a NACK is sent, you&#8217;ll have to send that packet again - and with a WAN, the possibility goes up for that to happen.</div>
<div class="line">[Thursday 17 February 2011] [16:19:46] &lt;drbobbeaty&gt;   sam`: you are going to need a networking expert for this to be really efficient and workable.</div>
<div class="line">[Thursday 17 February 2011] [16:20:43] &lt;sam`&gt; i&#8217;m afraid so</div>
<div class="line">[Thursday 17 February 2011] [16:21:04] &lt;sam`&gt; and our network guy is in another continent building our next colo :</div>
<div class="line">[Thursday 17 February 2011] [16:22:25] &lt;sam`&gt; drbobbeaty: about my second question about SSM, any idea how to specify the source to 0MQ ?</div>
<div class="line">[Thursday 17 February 2011] [16:29:30] &lt;drbobbeaty&gt;   sam`: As for the source-specific multicast, that&#8217;s not really possible in the 0MQ world because the sender is masked by the OpenPGM/URL scheme.</div>
<div class="line">[Thursday 17 February 2011] [16:30:00] &lt;drbobbeaty&gt;   sam`: but ask the mailing list to double-check me on this. I just don&#8217;t see how with the APIs I&#8217;ve been using.</div>
<div class="line">[Thursday 17 February 2011] [16:30:44] &lt;sam`&gt; kthx</div>
<div class="line">[Thursday 17 February 2011] [16:35:05] &lt;sam`&gt; yep, I believe this could/should be added to pgm_socket.cpp to handle the source address somehow and do a pgm_setsockopt(sock, IPPROTO_PGM, PGM_MSFILTER, ...);</div>
<div class="line">[Thursday 17 February 2011] [16:35:54] &lt;sam`&gt; if I settle on using 0MQ for the file distribution, I&#8217;ll make a patch</div>
<div class="line">[Thursday 17 February 2011] [16:55:28] &lt;sustrik&gt;      lt_schmidt_jr: can you possibly find out what&#8217;s the errno when the test fails?</div>
<div class="line">[Thursday 17 February 2011] [16:57:12] &lt;lt_schmidt_jr&gt;        let me see</div>
<div class="line">[Thursday 17 February 2011] [16:58:20] &lt;mikko&gt;        sustrik: steve-o suspects that openpgm with the changes needed for zeromq integration will be released next week around thu-fri</div>
<div class="line">[Thursday 17 February 2011] [16:59:46] &lt;lt_schmidt_jr&gt;        sustrik: this is what I am seeing: Invalid argumentn Nbytes != -1 (tcp_socket.cpp:197)</div>
<div class="line">[Thursday 17 February 2011] [17:01:43] &lt;lt_schmidt_jr&gt;        sustrik: I see what you are asking for, let me try to instrument the source</div>
<div class="line">[Thursday 17 February 2011] [17:02:31] &lt;sustrik&gt;      ah, invalid argument</div>
<div class="line">[Thursday 17 February 2011] [17:02:36] &lt;sustrik&gt;      i&#8217;ve missed that</div>
<div class="line">[Thursday 17 February 2011] [17:02:38] &lt;sustrik&gt;      sorry</div>
<div class="line">[Thursday 17 February 2011] [17:02:43] &lt;sustrik&gt;      mikko: great</div>
<div class="line">[Thursday 17 February 2011] [17:04:58] &lt;sustrik&gt;      hm, POSIX doesn&#8217;t allow for send() returning EINVAL</div>
<div class="line">[Thursday 17 February 2011] [17:05:36] &lt;sustrik&gt;      Linux docs are not very helpful either:</div>
<div class="line">[Thursday 17 February 2011] [17:05:38] &lt;sustrik&gt;      &#8220;EINVAL Invalid argument passed.&#8221;</div>
<div class="line">[Thursday 17 February 2011] [17:06:25] &lt;sustrik&gt;      lt_schmidt_jr: is that linux?</div>
<div class="line">[Thursday 17 February 2011] [17:06:50] &lt;lt_schmidt_jr&gt;        sustrik: mac osx</div>
<div class="line">[Thursday 17 February 2011] [17:07:04] &lt;sustrik&gt;      can you check &#8220;man send&#8221;</div>
<div class="line">[Thursday 17 February 2011] [17:07:10] &lt;sustrik&gt;      and look for EINVAL?</div>
<div class="line">[Thursday 17 February 2011] [17:07:14] &lt;lt_schmidt_jr&gt;        checking</div>
<div class="line">[Thursday 17 February 2011] [17:08:34] &lt;lt_schmidt_jr&gt;        sustik:  [EINVAL]           The sum of the iov_len values overflows an ssize_t.</div>
<div class="line">[Thursday 17 February 2011] [17:09:53] &lt;sustrik&gt;      funny</div>
<div class="line">[Thursday 17 February 2011] [17:10:01] &lt;sustrik&gt;      that applies to sendmsg</div>
<div class="line">[Thursday 17 February 2011] [17:10:05] &lt;lt_schmidt_jr&gt;        yes</div>
<div class="line">[Thursday 17 February 2011] [17:10:18] &lt;sustrik&gt;      in this case its simple send that returns EINVAL</div>
<div class="line">[Thursday 17 February 2011] [17:10:56] &lt;lt_schmidt_jr&gt;        send() does not mention EINVAL in man</div>
<div class="line">[Thursday 17 February 2011] [17:11:30] &lt;lt_schmidt_jr&gt;        sustrik: where did you see EINVAL?</div>
<div class="line">[Thursday 17 February 2011] [17:13:17] &lt;sustrik&gt;      &#8220;Invalid argument&#8221;</div>
<div class="line">[Thursday 17 February 2011] [17:13:34] &lt;sustrik&gt;      = EINVAL</div>
<div class="line">[Thursday 17 February 2011] [17:14:43] &lt;matott&gt;       I&#8217;m starting with zmq. As an overlay network zmq it uses messages and doesn&#8217;t provide a streaming api. Are there any fragmentation libraries to emulate streaming?</div>
<div class="line">[Thursday 17 February 2011] [17:16:48] &lt;lt_schmidt_jr&gt;        sustrik: this is odd, I have added a printf just before the failing assert to see the error number, and the failure changed to mailbox.cpp</div>
<div class="line">[Thursday 17 February 2011] [17:16:56] &lt;matott&gt;       I had a look at mongrel, but it seemed to me from the demos that the applications had to handle it itself.</div>
<div class="line">[Thursday 17 February 2011] [17:17:42] &lt;sustrik&gt;      what assert?</div>
<div class="line">[Thursday 17 February 2011] [17:18:25] &lt;lt_schmidt_jr&gt;        Nbytes != -1 (tcp_socket.cpp:197)</div>
<div class="line">[Thursday 17 February 2011] [17:18:33] &lt;sustrik&gt;      in mailbox.cpp?</div>
<div class="line">[Thursday 17 February 2011] [17:20:16] &lt;lt_schmidt_jr&gt;        I may be very confused, but the tcp_scoket.cpp:197 contains:  errno_assert (nbytes != -1);</div>
<div class="line">[Thursday 17 February 2011] [17:21:04] &lt;sustrik&gt;      &#8220;this is odd, I have added a printf just before the failing assert to see the error number, and the failure changed to mailbox.cpp&#8221;</div>
<div class="line">[Thursday 17 February 2011] [17:22:28] &lt;lt_schmidt_jr&gt;        but once I try to print the the errno in tcp_socket.cpp just before errno_assert in tcp_socket.cpp, the failure becomes: Assertion failed: nbytes == sizeof (command_t) (mailbox.cpp:193)</div>
<div class="line">[Thursday 17 February 2011] [17:22:39] &lt;sustrik&gt;      aha</div>
<div class="line">[Thursday 17 February 2011] [17:22:46] &lt;sustrik&gt;      that&#8217;s a known problem with OSX</div>
<div class="line">[Thursday 17 February 2011] [17:23:06] &lt;sustrik&gt;      OSX has small default socket buffers</div>
<div class="line">[Thursday 17 February 2011] [17:23:15] &lt;sustrik&gt;      and resizing them seems to be broken</div>
<div class="line">[Thursday 17 February 2011] [17:23:38] &lt;cremes&gt;       sustrik: right... i have my little local &#8220;patch&#8221; that solves that for me on osx</div>
<div class="line">[Thursday 17 February 2011] [17:23:57] &lt;cremes&gt;       maybe lt_schmidt_jr can use the same thing until it gets fixed in master</div>
<div class="line">[Thursday 17 February 2011] [17:23:59] &lt;sustrik&gt;      yup, it would be nice to solve it in systemic way</div>
<div class="line">[Thursday 17 February 2011] [17:24:06] &lt;sustrik&gt;      however, i have no OSX box...</div>
<div class="line">[Thursday 17 February 2011] [17:24:29] &lt;sustrik&gt;      as for the tcp_socket/EINVAL error that&#8217;s plain strange</div>
<div class="line">[Thursday 17 February 2011] [17:24:46] &lt;sustrik&gt;      it looks like the OS is returning undocumented error :(</div>
<div class="line">[Thursday 17 February 2011] [17:25:04] &lt;lt_schmidt_jr&gt;        hey, its like being back on Windows</div>
<div class="line">[Thursday 17 February 2011] [17:25:08] &lt;lt_schmidt_jr&gt;        :)</div>
<div class="line">[Thursday 17 February 2011] [17:25:43] &lt;sustrik&gt;      shrug</div>
<div class="line">[Thursday 17 February 2011] [17:26:15] &lt;lt_schmidt_jr&gt;        well, its ok, if I can get a patch, that would be great  - we would be deploying on CentOS</div>
<div class="line">[Thursday 17 February 2011] [17:26:26] &lt;lt_schmidt_jr&gt;        if I can get by for develpment</div>
<div class="line">[Thursday 17 February 2011] [17:28:02] &lt;lt_schmidt_jr&gt;        cremes: what version does you patch ... patch?</div>
<div class="line">[Thursday 17 February 2011] [17:29:09] &lt;cremes&gt;       lt_schmidt_jr: it&#8217;s against master</div>
<div class="line">[Thursday 17 February 2011] [17:29:10] &lt;cremes&gt;       <a class="reference external" href="http://article.gmane.org/gmane.network.zeromq.devel/7146/match=old%5fsndbuf">http://article.gmane.org/gmane.network.zeromq.devel/7146/match=old%5fsndbuf</a></div>
<div class="line">[Thursday 17 February 2011] [17:30:17] &lt;lt_schmidt_jr&gt;        cremes: thanks</div>
<div class="line">[Thursday 17 February 2011] [17:31:02] &lt;lt_schmidt_jr&gt;        Should I be using master? I just went from 2.0.10 which homebrew installed to 2.1.0 tarball</div>
<div class="line">[Thursday 17 February 2011] [17:31:19] &lt;lt_schmidt_jr&gt;        based on your suggestion</div>
<div class="line">[Thursday 17 February 2011] [17:31:35] &lt;cremes&gt;       lt_schmidt_jr: you should be; however, that little patch i just gave you should also work on 2.0.10 if you are happy with that release</div>
<div class="line">[Thursday 17 February 2011] [17:33:20] &lt;lt_schmidt_jr&gt;        Thanks. I will stay with the 2.1.0 tarball - I have already fixed the java tests - they were not exiting since sockets were not closed before context.term()</div>
<div class="line">[Thursday 17 February 2011] [17:33:50] &lt;lt_schmidt_jr&gt;        My question is more 2.1.0 tar on the zmq page vs latest git</div>
<div class="line">[Thursday 17 February 2011] [17:34:17] &lt;lt_schmidt_jr&gt;        a little nervous about HEAD revision</div>
<div class="line">[Thursday 17 February 2011] [17:37:54] &lt;cremes&gt;       lt_schmidt_jr: HEAD is likely more stable than 2.1.0 tarball; <em>lots</em> of fixes including another mailbox assert on osx</div>
<div class="line">[Thursday 17 February 2011] [17:38:05] &lt;cremes&gt;       given a choice between the tarball and master, use master</div>
<div class="line">[Thursday 17 February 2011] [17:38:30] &lt;lt_schmidt_jr&gt;        cremes: thank you</div>
<div class="line">[Thursday 17 February 2011] [17:38:36] &lt;cremes&gt;       you are welcome</div>
<div class="line">[Thursday 17 February 2011] [17:38:51] &lt;cremes&gt;       if you have fixes for the java tests, please contribute them back</div>
<div class="line">[Thursday 17 February 2011] [17:46:26] &lt;lt_schmidt_jr&gt;        I have not been getting responses from gonzalo on the mvn issues, so not sure how to contribute (its just 4 lines of socket.close())</div>
<div class="line">[Thursday 17 February 2011] [17:46:57] &lt;lt_schmidt_jr&gt;        to be fair to gonzalo, first he was gone, then he responded, I was gone, now he is gone ...</div>
<div class="line">[Thursday 17 February 2011] [19:14:24] &lt;gui81&gt;        anyone there</div>
<div class="line">[Thursday 17 February 2011] [19:15:44] &lt;gui81&gt;        is it possible to do this: <a class="reference external" href="http://pastebin.com/8KHzgu3a">http://pastebin.com/8KHzgu3a</a></div>
<div class="line">[Thursday 17 February 2011] [19:16:42] &lt;gui81&gt;        I am trying to publish to <a class="reference external" href="tcp://">tcp://</a><a href="#id37"><span class="problematic" id="id38">*</span></a>:5555 and subscribe to <a class="reference external" href="tcp://localhost:5555">tcp://localhost:5555</a>, but it doesn&#8217;t seem to work</div>
<div class="line">[Thursday 17 February 2011] [19:17:53] &lt;gui81&gt;        I can get the Hello World from pub_thread and Hello World from sub_thread messages to print out, but it doesn&#8217;t seem to publish from pub_main or subscribe from sub_main</div>
<div class="line">[Thursday 17 February 2011] [19:27:18] &lt;lt_schmidt_jr&gt;        Regarding the named sockets - if I have a publisher with named subscribers that are connected to it. When a subscriber goes away and reconnects, is there any way to know if the subscriber has missed messages?</div>
<div class="line">[Thursday 17 February 2011] [19:27:35] &lt;gui81&gt;        nevermind, after reading through the Problem Solver, I realized that I didn&#8217;t have setsockopt properly set the ZMQ_SUBSCRIBE option</div>
<div class="line">[Thursday 17 February 2011] [19:34:12] &lt;lt_schmidt_jr&gt;        sustrik: this may be a question for you</div>
<div class="line">[Thursday 17 February 2011] [19:34:42] &lt;lt_schmidt_jr&gt;        sustrik: how do i know (when using a named socket) if I have missed messages</div>
<div class="line">[Thursday 17 February 2011] [19:37:23] &lt;lt_schmidt_jr&gt;        named socket = DURABLE socket</div>
<div class="line">[Thursday 17 February 2011] [19:39:33] &lt;cremes&gt;       lt_schmidt_jr: a PUB socket is like a radio broadcast</div>
<div class="line">[Thursday 17 February 2011] [19:39:49] &lt;cremes&gt;       if you aren&#8217;t connected when some messages go out, you miss them and never know it</div>
<div class="line">[Thursday 17 February 2011] [19:40:11] &lt;lt_schmidt_jr&gt;        even if I connect with a durable socket</div>
<div class="line">[Thursday 17 February 2011] [19:40:13] &lt;lt_schmidt_jr&gt;        ?</div>
<div class="line">[Thursday 17 February 2011] [19:40:16] &lt;lt_schmidt_jr&gt;        then disconnect</div>
<div class="line">[Thursday 17 February 2011] [19:40:21] &lt;lt_schmidt_jr&gt;        and come back?</div>
<div class="line">[Thursday 17 February 2011] [19:40:30] &lt;cremes&gt;       if you disconnect, your queue is flushed</div>
<div class="line">[Thursday 17 February 2011] [19:40:51] &lt;lt_schmidt_jr&gt;        so durable sockets don&#8217;t work with pub/sub</div>
<div class="line">[Thursday 17 February 2011] [19:40:52] &lt;cremes&gt;       you&#8217;ll have to detect this via a sequence number gap (or similar) in the broadcast messages</div>
<div class="line">[Thursday 17 February 2011] [19:41:04] &lt;cremes&gt;       perhaps i don&#8217;t understand what you mean by durable socket</div>
<div class="line">[Thursday 17 February 2011] [19:41:13] &lt;cremes&gt;       never heard of one</div>
<div class="line">[Thursday 17 February 2011] [19:41:29] &lt;lt_schmidt_jr&gt;        its in the guide</div>
<div class="line">[Thursday 17 February 2011] [19:42:18] &lt;cremes&gt;       i&#8217;ll look in a minute...</div>
<div class="line">[Thursday 17 February 2011] [19:42:26] &lt;cremes&gt;       if you can provide a link, that would be best</div>
<div class="line">[Thursday 17 February 2011] [19:44:20] &lt;lt_schmidt_jr&gt;        <a class="reference external" href="http://zguide.zeromq.org/chapter:all#toc37">http://zguide.zeromq.org/chapter:all#toc37</a></div>
<div class="line">[Thursday 17 February 2011] [19:56:57] &lt;lt_schmidt_jr&gt;        I guess I should just try it out</div>
<div class="line">[Thursday 17 February 2011] [20:01:02] &lt;cremes&gt;       lt_schmidt_jr: ok, i hadn&#8217;t heard this term before</div>
<div class="line">[Thursday 17 February 2011] [20:01:19] &lt;cremes&gt;       but note that it <em>only</em> keeps the send buffer around</div>
<div class="line">[Thursday 17 February 2011] [20:01:32] &lt;cremes&gt;       anything in transit or in the receiver&#8217;s OS buffers or queue will be lost</div>
<div class="line">[Thursday 17 February 2011] [20:01:49] &lt;cremes&gt;       so you probably still need to be able to identity gaps and recover from them</div>
<div class="line">[Thursday 17 February 2011] [20:02:10] &lt;lt_schmidt_jr&gt;        how does that interact with INPROC</div>
<div class="line">[Thursday 17 February 2011] [20:02:17] &lt;lt_schmidt_jr&gt;        loss is still possible?</div>
<div class="line">[Thursday 17 February 2011] [20:07:18] &lt;cremes&gt;       lt_schmidt_jr: i don&#8217;t know</div>
<div class="line">[Thursday 17 February 2011] [20:07:25] &lt;cremes&gt;       that&#8217;s a good question for the mailing list</div>
<div class="line">[Thursday 17 February 2011] [20:07:33] &lt;lt_schmidt_jr&gt;        thanks</div>
<div class="line">[Thursday 17 February 2011] [20:08:40] &lt;lt_schmidt_jr&gt;        I have subscriber sockets on the server on behalf of the websockets that may get disconnected</div>
<div class="line">[Thursday 17 February 2011] [20:08:59] &lt;lt_schmidt_jr&gt;        I actually have them run for a bit to see if client websocket reconects</div>
<div class="line">[Thursday 17 February 2011] [20:10:33] &lt;lt_schmidt_jr&gt;        but I wonder if I can terminate them instead</div>
<div class="line">[Thursday 17 February 2011] [20:10:49] &lt;lt_schmidt_jr&gt;        if they DURABLE</div>
<div class="line">[Thursday 17 February 2011] [20:21:20] &lt;stodge&gt;       Is there a pyzmq example of using PGM?</div>
<div class="line">[Thursday 17 February 2011] [20:36:49] &lt;jugg&gt; yrashk, fyi, &#8216;ezmq&#8217; is already used for an Eiffel 0mq binding.</div>
<div class="line">[Thursday 17 February 2011] [20:37:47] &lt;yrashk&gt;       jugg: oh well</div>
<div class="line">[Thursday 17 February 2011] [20:37:53] &lt;yrashk&gt;       who uses eiffel anyway?</div>
<div class="line">[Thursday 17 February 2011] [20:38:16] &lt;jugg&gt; how about enifzmq ?</div>
<div class="line">[Thursday 17 February 2011] [20:38:28] &lt;yrashk&gt;       horrible :D</div>
<div class="line">[Thursday 17 February 2011] [20:38:30] &lt;jugg&gt; :)</div>
<div class="line">[Thursday 17 February 2011] [20:38:58] &lt;yrashk&gt;       btw apparently ezmq is faster than erlzmq</div>
<div class="line">[Thursday 17 February 2011] [20:39:00] &lt;yrashk&gt;       up to 2x</div>
<div class="line">[Thursday 17 February 2011] [20:39:28] &lt;jugg&gt; what changed?  I read some of the backlog... your original tests showed similar performance... how&#8217;d you up it?</div>
<div class="line">[Thursday 17 February 2011] [20:41:22] &lt;yrashk&gt;       jugg: well I don&#8217;t quite know yet</div>
<div class="line">[Thursday 17 February 2011] [20:41:24] &lt;yrashk&gt;       it warmed up :D</div>
<div class="line">[Thursday 17 February 2011] [20:41:38] &lt;yrashk&gt;       I rewrote it form scratch as a NIF as you can see</div>
<div class="line">[Thursday 17 February 2011] [20:41:55] &lt;yrashk&gt;       from*</div>
<div class="line">[Thursday 17 February 2011] [20:42:54] &lt;jugg&gt; yes, I&#8217;m stuck on R13B04 unfortunately.</div>
<div class="line">[Thursday 17 February 2011] [20:43:10] &lt;yrashk&gt;       and it can reach about 60-80K on my mac pro as opposed to 30K with erlzmq</div>
<div class="line">[Thursday 17 February 2011] [20:43:38] &lt;yrashk&gt;       I would assume this is because there is not so much communication overhead now</div>
<div class="line">[Thursday 17 February 2011] [20:44:00] &lt;jugg&gt; that is ezmq/ezmq or erlang/ezmq ?</div>
<div class="line">[Thursday 17 February 2011] [20:44:05] &lt;jugg&gt; eh</div>
<div class="line">[Thursday 17 February 2011] [20:44:08] &lt;jugg&gt; zmq/ezmq</div>
<div class="line">[Thursday 17 February 2011] [20:45:43] &lt;jugg&gt; I mean I saw something about testing C zmq to erlang zmq.</div>
<div class="line">[Thursday 17 February 2011] [20:46:29] &lt;jugg&gt; those 60-80k is ezmq to ezmq?</div>
<div class="line">[Thursday 17 February 2011] [20:47:38] &lt;yrashk&gt;       yes</div>
<div class="line">[Thursday 17 February 2011] [21:02:44] &lt;jugg&gt; yrashk, do you plan on making these bindings usable for receiving messages without having to call recv(noblock) on an interval? If so, how?</div>
<div class="line">[Thursday 17 February 2011] [21:03:46] &lt;yrashk&gt;       jugg: you mean nb recv?</div>
<div class="line">[Thursday 17 February 2011] [21:05:11] &lt;jugg&gt; I mean you can&#8217;t call zmq_poll, and there is no out of band recv support.  So, you either have to call recv on an interval, or call it and block the vm.</div>
<div class="line">[Thursday 17 February 2011] [21:05:35] &lt;yrashk&gt;       yes right now what you can see there is brecv()</div>
<div class="line">[Thursday 17 February 2011] [21:05:40] &lt;yrashk&gt;       a blocking recv</div>
<div class="line">[Thursday 17 February 2011] [21:05:52] &lt;yrashk&gt;       and here I have a non blocking recv() in my WIP</div>
<div class="line">[Thursday 17 February 2011] [21:06:04] &lt;yrashk&gt;       right now I am solving this with having a thread per socket</div>
<div class="line">[Thursday 17 February 2011] [21:06:57] &lt;yrashk&gt;       it works but only for some time, I have a bug somewhere</div>
<div class="line">[Thursday 17 February 2011] [21:07:00] &lt;yrashk&gt;       that causes a crash</div>
<div class="line">[Thursday 17 February 2011] [21:07:08] &lt;yrashk&gt;       that&#8217;s why I am not committing it yet</div>
<div class="line">[Thursday 17 February 2011] [21:18:51] &lt;jugg&gt; Why is &#8216;send&#8217; not called &#8216;bsend&#8217;?</div>
<div class="line">[Thursday 17 February 2011] [21:18:57] &lt;jugg&gt; yrashk</div>
<div class="line">[Thursday 17 February 2011] [21:20:41] &lt;yrashk&gt;       jugg: because it&#8217;s not inherently a waiting operation</div>
<div class="line">[Thursday 17 February 2011] [21:20:56] &lt;yrashk&gt;       you can use noblock flag for it</div>
<div class="line">[Thursday 17 February 2011] [21:21:32] &lt;jugg&gt; and you can&#8217;t in brecv?</div>
<div class="line">[Thursday 17 February 2011] [21:22:14] &lt;yrashk&gt;       you can, but the nature of recv is different</div>
<div class="line">[Thursday 17 February 2011] [21:22:56] &lt;yrashk&gt;       it is inherently a waiting operation</div>
<div class="line">[Thursday 17 February 2011] [21:30:25] &lt;yrashk&gt;       nb recv() is about 10 times slower than blocking</div>
<div class="line">[Thursday 17 February 2011] [21:45:42] &lt;jugg&gt; yrashk, is it possible to call an escript function using apply()?  I tried using ?MODULE for the module name, but that didn&#8217;t work...  I&#8217;m trying to get those perf tests to run under R13B04.</div>
<div class="line">[Thursday 17 February 2011] [21:49:33] &lt;yrashk&gt;       jugg -mode(compile) will help with the ?MODULE thing afair</div>
<div class="line">[Thursday 17 February 2011] [21:51:28] &lt;yrashk&gt;       <em>if I am not mistaken</em></div>
<div class="line">[Thursday 17 February 2011] [21:52:43] &lt;jugg&gt; that worked, thanks.</div>
<div class="line">[Thursday 17 February 2011] [21:54:52] &lt;yrashk&gt;       yw</div>
<div class="line">[Thursday 17 February 2011] [22:58:13] &lt;jugg&gt; yrashk, <a class="reference external" href="https://gist.github.com/833227">https://gist.github.com/833227</a> is what I&#8217;ll commit on csrl/erlzmq.  Do you oppose being labeled the author?</div>
<div class="line">[Thursday 17 February 2011] [23:36:48] &lt;jugg&gt; yrashk, if the ezmq:recv concept was also used for ezmq:send and for a ezmq:poll implementation, those bindings would become quite usable.  Nice (and fast) work.</div>
<div class="line">[Friday 18 February 2011] [00:22:58] &lt;yrashk&gt; jugg: I don&#8217;t oppose</div>
<div class="line">[Friday 18 February 2011] [00:23:26] &lt;yrashk&gt; jugg: you think so? I might try doing recv trick with send, too</div>
<div class="line">[Friday 18 February 2011] [00:23:34] &lt;yrashk&gt; but recv is quite slow</div>
<div class="line">[Friday 18 February 2011] [00:23:45] &lt;yrashk&gt; brecv is much faster</div>
<div class="line">[Friday 18 February 2011] [00:27:56] &lt;jugg&gt;   how many cpu/cores do you have?</div>
<div class="line">[Friday 18 February 2011] [00:32:40] &lt;yrashk&gt; 8 (16 virtual)</div>
<div class="line">[Friday 18 February 2011] [00:33:08] &lt;yrashk&gt; dual quadcore</div>
<div class="line">[Friday 18 February 2011] [00:35:18] &lt;jugg&gt;   it&#8217;d be interesting to know what the scheduler is doing then... playing with thread affinity could be interesting.  10x slow down seems odd.</div>
<div class="line">[Friday 18 February 2011] [00:37:04] &lt;yrashk&gt; ya I am not sure what&#8217;s happening</div>
<div class="line">[Friday 18 February 2011] [00:37:10] &lt;yrashk&gt; but recv is about 10 times slower than brecv</div>
<div class="line">[Friday 18 February 2011] [00:37:21] &lt;yrashk&gt; there&#8217;s certainly <em>some</em> overhead</div>
<div class="line">[Friday 18 February 2011] [00:37:29] &lt;yrashk&gt; but I doubt there is that much of an overhead</div>
<div class="line">[Friday 18 February 2011] [00:38:52] &lt;yrashk&gt; although who knows</div>
<div class="line">[Friday 18 February 2011] [00:38:56] &lt;yrashk&gt; recv is pretty tricky</div>
<div class="line">[Friday 18 February 2011] [00:39:10] &lt;yrashk&gt; push, pull, recv, end</div>
<div class="line">[Friday 18 February 2011] [00:39:12] &lt;yrashk&gt; <a href="#id39"><span class="problematic" id="id40">*</span></a>send</div>
<div class="line">[Friday 18 February 2011] [00:39:13] &lt;jugg&gt;   wild guess, but receiver_thread&#8217;s enif_send() is the likely candidate since it is out of band, but brecv, the erlang scheduler is already blocking for the result.</div>
<div class="line">[Friday 18 February 2011] [00:39:49] &lt;yrashk&gt; it is the candidate</div>
<div class="line">[Friday 18 February 2011] [00:39:58] &lt;yrashk&gt; but I have no idea how else can you communicate result back</div>
<div class="line">[Friday 18 February 2011] [00:39:59] &lt;yrashk&gt; ;)</div>
<div class="line">[Friday 18 February 2011] [00:40:42] &lt;yrashk&gt; also I suspect that ezmq is leaking memory</div>
<div class="line">[Friday 18 February 2011] [00:40:50] &lt;yrashk&gt; but that should be fixable since its pretty small</div>
<div class="line">[Friday 18 February 2011] [00:40:55] &lt;yrashk&gt; shouldn&#8217;t be that hard to trace the leak</div>
<div class="line">[Friday 18 February 2011] [00:41:01] &lt;yrashk&gt; I have no proof of leaking yet tho</div>
<div class="line">[Friday 18 February 2011] [00:41:51] &lt;jugg&gt;   maybe figure out a batch recv implementation... it&#8217;ll loop until zmq_recv(noblock) returns eagain (or a max number is hit), then return the batch result.  Certainly useful for when SNDMORE exists.</div>
<div class="line">[Friday 18 February 2011] [00:42:22] &lt;yrashk&gt; yeah I haven&#8217;t even begin to deal with sndmore</div>
<div class="line">[Friday 18 February 2011] [00:42:25] &lt;yrashk&gt; was out of scope</div>
<div class="line">[Friday 18 February 2011] [00:42:49] &lt;yrashk&gt; if you only you can tell erlang to designate a scheduler to only one process</div>
<div class="line">[Friday 18 February 2011] [00:43:04] &lt;yrashk&gt; that is the one that talks to the NIF</div>
<div class="line">[Friday 18 February 2011] [00:43:12] &lt;yrashk&gt; this way blocking would be irrelevant</div>
<div class="line">[Friday 18 February 2011] [00:43:12] &lt;yrashk&gt; :D</div>
<div class="line">[Friday 18 February 2011] [00:44:28] &lt;yrashk&gt; but I don&#8217;t see any way to do so</div>
<div class="line">[Friday 18 February 2011] [00:46:37] &lt;yrashk&gt; sigh</div>
<div class="line">[Friday 18 February 2011] [00:49:12] &lt;jugg&gt;   I think you&#8217;ll need to refine your get/setsockopt implementation... zmq is rather exact about value lengths.  Also, not all socket options are valid for &#8216;get&#8217;.</div>
<div class="line">[Friday 18 February 2011] [00:49:31] &lt;yrashk&gt; I am ready to merge pull reqs</div>
<div class="line">[Friday 18 February 2011] [00:49:39] &lt;jugg&gt;   :)</div>
<div class="line">[Friday 18 February 2011] [00:49:39] &lt;yrashk&gt; I&#8217;d rather focus on performance issues right now</div>
<div class="line">[Friday 18 February 2011] [00:49:44] &lt;yrashk&gt; that was the original intention</div>
<div class="line">[Friday 18 February 2011] [00:49:51] &lt;yrashk&gt; even though it is faster than erlzmq</div>
<div class="line">[Friday 18 February 2011] [00:49:56] &lt;yrashk&gt; there&#8217;s still a lot of work</div>
<div class="line">[Friday 18 February 2011] [00:50:12] &lt;yrashk&gt; so if you can actually help me with sockopt thing, I will greatly appreciate that</div>
<div class="line">[Friday 18 February 2011] [00:50:17] &lt;yrashk&gt; although you&#8217;re on R13 :-(</div>
<div class="line">[Friday 18 February 2011] [00:51:09] &lt;jugg&gt;   yah, I can&#8217;t even compile it... The best I can do is refer you to csrl/erlzmq implementation.</div>
<div class="line">[Friday 18 February 2011] [00:51:18] &lt;yrashk&gt; re sockopt and stuff: after all ezmq is very new, I spent like 3 hours with it or so</div>
<div class="line">[Friday 18 February 2011] [00:51:47] &lt;yrashk&gt; well you can also install R14 somewhere... hehehe :)</div>
<div class="line">[Friday 18 February 2011] [00:51:50] &lt;jugg&gt;   :)</div>
<div class="line">[Friday 18 February 2011] [00:53:29] &lt;yrashk&gt; I am really trying to understand how to get recv almost as fast as brecv</div>
<div class="line">[Friday 18 February 2011] [00:56:25] &lt;yrashk&gt; I have a rought idea of msend</div>
<div class="line">[Friday 18 February 2011] [00:56:31] &lt;yrashk&gt; but it&#8217;s too vague</div>
<div class="line">[Friday 18 February 2011] [00:57:42] &lt;jugg&gt;   ezmq_nif_recv should directly call zmq_recv(noblock|flags) and only if it returns EAGAIN do you hand it off to the receive_thread.</div>
<div class="line">[Friday 18 February 2011] [00:58:10] &lt;yrashk&gt; or even asend.. hey this is an idea!</div>
<div class="line">[Friday 18 February 2011] [00:58:28] &lt;jugg&gt;   well, hand it off if (flags &amp; noblock) == 0.</div>
<div class="line">[Friday 18 February 2011] [00:58:31] &lt;yrashk&gt; jugg: hey, not a bad idea</div>
<div class="line">[Friday 18 February 2011] [00:58:39] &lt;jugg&gt;   it is what I do in erlzmq...</div>
<div class="line">[Friday 18 February 2011] [00:59:38] &lt;yrashk&gt; just tested brecv again on this mac pro just in case</div>
<div class="line">[Friday 18 February 2011] [00:59:41] &lt;yrashk&gt; 66K</div>
<div class="line">[Friday 18 February 2011] [00:59:46] &lt;yrashk&gt; twice as good as erlzmq</div>
<div class="line">[Friday 18 February 2011] [00:59:48] &lt;yrashk&gt; still there, good</div>
<div class="line">[Friday 18 February 2011] [01:00:48] &lt;yrashk&gt; now, recv</div>
<div class="line">[Friday 18 February 2011] [01:01:17] &lt;yrashk&gt; 27K</div>
<div class="line">[Friday 18 February 2011] [01:01:38] &lt;yrashk&gt; hm not 10 times, roughly 2 times</div>
<div class="line">[Friday 18 February 2011] [01:01:53] &lt;yrashk&gt; well I didn&#8217;t recv on mac pro before yet</div>
<div class="line">[Friday 18 February 2011] [01:01:56] &lt;yrashk&gt; only on macbook air</div>
<div class="line">[Friday 18 February 2011] [01:02:02] &lt;yrashk&gt; which is much slower and fewer cores</div>
<div class="line">[Friday 18 February 2011] [01:12:17] &lt;yrashk&gt; jugg: horaay</div>
<div class="line">[Friday 18 February 2011] [01:12:55] &lt;jugg&gt;   the suspense...</div>
<div class="line">[Friday 18 February 2011] [01:13:01] &lt;yrashk&gt; now recv is more or less on par with brecv</div>
<div class="line">[Friday 18 February 2011] [01:13:06] &lt;yrashk&gt; deviation is minimal</div>
<div class="line">[Friday 18 February 2011] [01:13:15] &lt;jugg&gt;   good deal</div>
<div class="line">[Friday 18 February 2011] [01:13:30] &lt;yrashk&gt; thanks a lot!</div>
<div class="line">[Friday 18 February 2011] [01:15:16] &lt;yrashk&gt; committed</div>
<div class="line">[Friday 18 February 2011] [01:16:02] &lt;yrashk&gt; jugg: <a class="reference external" href="https://github.com/yrashk/ezmq/commit/77060d1b74d37c91ac7b403c90ea84095d30e5b9">https://github.com/yrashk/ezmq/commit/77060d1b74d37c91ac7b403c90ea84095d30e5b9</a></div>
<div class="line">[Friday 18 February 2011] [01:20:07] &lt;yrashk&gt; now... how can we make it even faster?</div>
<div class="line">[Friday 18 February 2011] [01:20:18] &lt;jugg&gt;   nice.  so, your old recv performed similarly to erlzmq?</div>
<div class="line">[Friday 18 February 2011] [01:20:32] &lt;yrashk&gt; I haven&#8217;t read erlzmq, honestly</div>
<div class="line">[Friday 18 February 2011] [01:20:47] &lt;yrashk&gt; my recv was just unconditionally handing commands to the thread</div>
<div class="line">[Friday 18 February 2011] [01:20:50] &lt;yrashk&gt; now it checks first</div>
<div class="line">[Friday 18 February 2011] [01:21:02] &lt;jugg&gt;   you said it was doing 27K msg/s?  erlzmq was about the same, yes?</div>
<div class="line">[Friday 18 February 2011] [01:21:03] &lt;yrashk&gt; commands off*</div>
<div class="line">[Friday 18 February 2011] [01:21:19] &lt;yrashk&gt; no, current codebase is within 60-80K msg/s</div>
<div class="line">[Friday 18 February 2011] [01:21:31] &lt;yrashk&gt; that was for brecv prior to that commit</div>
<div class="line">[Friday 18 February 2011] [01:21:32] &lt;jugg&gt;   yah, sorry, I mean the old version.</div>
<div class="line">[Friday 18 February 2011] [01:21:38] &lt;yrashk&gt; and recv was roughly 30K</div>
<div class="line">[Friday 18 February 2011] [01:21:46] &lt;yrashk&gt; and now recv is on par with brecv</div>
<div class="line">[Friday 18 February 2011] [01:21:51] &lt;jugg&gt;   ok</div>
<div class="line">[Friday 18 February 2011] [01:22:04] &lt;yrashk&gt; because if there&#8217;s a lot of messages it does pretty much what brecv oes</div>
<div class="line">[Friday 18 February 2011] [01:22:05] &lt;yrashk&gt; does</div>
<div class="line">[Friday 18 February 2011] [01:22:11] &lt;yrashk&gt; thanks to your suggestion</div>
<div class="line">[Friday 18 February 2011] [01:22:23] &lt;jugg&gt;   that makes me think that the message passing out of the driver (nif/port) is the difference... a port driver always has to do message passing.</div>
<div class="line">[Friday 18 February 2011] [01:22:32] &lt;yrashk&gt; yes</div>
<div class="line">[Friday 18 February 2011] [01:22:38] &lt;yrashk&gt; and this is why I wrote NIF in the first place</div>
<div class="line">[Friday 18 February 2011] [01:22:46] &lt;yrashk&gt; I blamed port comm for delays</div>
<div class="line">[Friday 18 February 2011] [01:23:06] &lt;yrashk&gt; and apparently it can attribute to about 2x diff in timming</div>
<div class="line">[Friday 18 February 2011] [01:23:11] &lt;yrashk&gt; timing*</div>
<div class="line">[Friday 18 February 2011] [01:23:41] &lt;jugg&gt;   well, I guess that is a bit of the reason NIFs exist anyway...</div>
<div class="line">[Friday 18 February 2011] [01:23:54] &lt;yrashk&gt; ya</div>
<div class="line">[Friday 18 February 2011] [01:24:02] &lt;yrashk&gt; and they are going to get even better</div>
<div class="line">[Friday 18 February 2011] [01:24:05] &lt;yrashk&gt; in regards of async stuff</div>
<div class="line">[Friday 18 February 2011] [01:24:16] &lt;yrashk&gt; but since it&#8217;s only in the future I am dealing with what he have now</div>
<div class="line">[Friday 18 February 2011] [01:24:22] &lt;jugg&gt;   sure</div>
<div class="line">[Friday 18 February 2011] [01:24:42] &lt;yrashk&gt; and I am not yet happy with 60-80K msg/sec</div>
<div class="line">[Friday 18 February 2011] [01:24:46] &lt;yrashk&gt; and also sending is superslow</div>
<div class="line">[Friday 18 February 2011] [01:24:53] &lt;yrashk&gt; looks like batching doesn&#8217;t kick in</div>
<div class="line">[Friday 18 February 2011] [01:25:43] &lt;yrashk&gt; it takes roughly 13 seconds to send those msgs</div>
<div class="line">[Friday 18 February 2011] [01:25:44] &lt;yrashk&gt; insane</div>
<div class="line">[Friday 18 February 2011] [01:25:55] &lt;yrashk&gt; C version takes less than a half of a second</div>
<div class="line">[Friday 18 February 2011] [01:26:16] &lt;yrashk&gt; if I send messages with C version, ezmq reads at about 120K msg/sec</div>
<div class="line">[Friday 18 February 2011] [01:26:39] &lt;yrashk&gt; so yet another 2x gain can be achieved if sending was somehow optimized</div>
<div class="line">[Friday 18 February 2011] [01:28:51]   * yrashk is scratching head</div>
<div class="line">[Friday 18 February 2011] [01:31:03] &lt;yrashk&gt; hmm send seem to crash sometimes on my laptop</div>
<div class="line">[Friday 18 February 2011] [01:31:06] &lt;yrashk&gt; not on the pro</div>
<div class="line">[Friday 18 February 2011] [01:31:20] &lt;yrashk&gt; I guess ezmq needs a little bit more of maturing</div>
<div class="line">[Friday 18 February 2011] [01:52:34] &lt;jugg&gt;   yrashk, any progress, looks like I got disconnected for a while.</div>
<div class="line">[Friday 18 February 2011] [01:53:02] &lt;cremes&gt; pieterh, sustrik: that mailbox fix has eliminated a ton of weird shit; so glad we solved it!</div>
<div class="line">[Friday 18 February 2011] [01:53:41] &lt;sustrik&gt;        cremes: i hope it haven&#8217;t introduced other weird shit</div>
<div class="line">[Friday 18 February 2011] [01:54:12] &lt;cremes&gt; sustrik: not at all; it&#8217;s probably the most important fix i have seen yet</div>
<div class="line">[Friday 18 February 2011] [01:54:19] &lt;sustrik&gt;        :)</div>
<div class="line">[Friday 18 February 2011] [01:54:28] &lt;cremes&gt; minor in code changes, huge in effect</div>
<div class="line">[Friday 18 February 2011] [01:54:31] &lt;sustrik&gt;        btw, do you have an osx box?</div>
<div class="line">[Friday 18 February 2011] [01:54:32] &lt;cremes&gt; double :)</div>
<div class="line">[Friday 18 February 2011] [01:54:36] &lt;cremes&gt; yes, i do</div>
<div class="line">[Friday 18 February 2011] [01:55:03] &lt;sustrik&gt;        i would like to fix the buffer resizing algorithm so that it works on osx</div>
<div class="line">[Friday 18 February 2011] [01:55:15] &lt;cremes&gt; sustrik: i can give you an account on it</div>
<div class="line">[Friday 18 February 2011] [01:55:16] &lt;sustrik&gt;        if i do the patch, can you possibly test it?</div>
<div class="line">[Friday 18 February 2011] [01:55:25] &lt;cremes&gt; sure, either way</div>
<div class="line">[Friday 18 February 2011] [01:55:28] &lt;sustrik&gt;        that would be great</div>
<div class="line">[Friday 18 February 2011] [01:55:30] &lt;sustrik&gt;        ssh?</div>
<div class="line">[Friday 18 February 2011] [01:55:35] &lt;cremes&gt; of course</div>
<div class="line">[Friday 18 February 2011] [01:55:56] &lt;cremes&gt; i&#8217;m going to bed now (1am) so i&#8217;ll take care of it tomorrow</div>
<div class="line">[Friday 18 February 2011] [01:56:02] &lt;sustrik&gt;        great. let me know by email then</div>
<div class="line">[Friday 18 February 2011] [01:56:08] &lt;cremes&gt; will do</div>
<div class="line">[Friday 18 February 2011] [01:56:11] &lt;sustrik&gt;        thanks</div>
<div class="line">[Friday 18 February 2011] [01:56:22] &lt;cremes&gt; good night</div>
<div class="line">[Friday 18 February 2011] [01:56:37] &lt;sustrik&gt;        good night</div>
<div class="line">[Friday 18 February 2011] [01:56:49] &lt;yrashk&gt; jugg: no</div>
<div class="line">[Friday 18 February 2011] [01:57:03] &lt;yrashk&gt; jugg: just thinking how to improve performance further</div>
<div class="line">[Friday 18 February 2011] [01:57:18] &lt;yrashk&gt; jugg: also I think I need to use rwlocks to guard sockets</div>
<div class="line">[Friday 18 February 2011] [01:58:42] &lt;jugg&gt;   or you could only allow the owner pid to use the socket?</div>
<div class="line">[Friday 18 February 2011] [01:59:04] &lt;jugg&gt;   not sure if that calling pid is availble in NIFs?</div>
<div class="line">[Friday 18 February 2011] [01:59:04] &lt;yrashk&gt; or that</div>
<div class="line">[Friday 18 February 2011] [01:59:10] &lt;yrashk&gt; it is</div>
<div class="line">[Friday 18 February 2011] [01:59:19] &lt;yrashk&gt; but I think rwlock is a better method</div>
<div class="line">[Friday 18 February 2011] [01:59:20] &lt;yrashk&gt; probably</div>
<div class="line">[Friday 18 February 2011] [01:59:32] &lt;yrashk&gt; also</div>
<div class="line">[Friday 18 February 2011] [01:59:59] &lt;yrashk&gt; I am not sure but afair there is no guarantee that call will always be made within the same scheduler</div>
<div class="line">[Friday 18 February 2011] [02:00:02] &lt;yrashk&gt; hence it will be another thread</div>
<div class="line">[Friday 18 February 2011] [02:00:07] &lt;yrashk&gt; and hence it will crash 0mq</div>
<div class="line">[Friday 18 February 2011] [02:00:13] &lt;yrashk&gt; that&#8217;s why I am thinking rwlocks</div>
<div class="line">[Friday 18 February 2011] [02:00:17] &lt;jugg&gt;   I don&#8217;t... a socket should only be used by a single process.  Else you have troubles with multi-part messages, and socket states (eg REQ toggling of send/recv).</div>
<div class="line">[Friday 18 February 2011] [02:00:33] &lt;yrashk&gt; and I think these occasional crashes might be attributed to this</div>
<div class="line">[Friday 18 February 2011] [02:01:01] &lt;yrashk&gt; true</div>
<div class="line">[Friday 18 February 2011] [02:01:01] &lt;jugg&gt;   it is fine for sockets to be used in different threads (I assume you are using zmq 2.1.x)</div>
<div class="line">[Friday 18 February 2011] [02:01:14] &lt;yrashk&gt; but not simultaneously</div>
<div class="line">[Friday 18 February 2011] [02:01:18] &lt;yrashk&gt; I guess</div>
<div class="line">[Friday 18 February 2011] [02:01:21] &lt;jugg&gt;   correct</div>
<div class="line">[Friday 18 February 2011] [02:01:27] &lt;yrashk&gt; hence rwlocks</div>
<div class="line">[Friday 18 February 2011] [02:01:41] &lt;jugg&gt;   or a single erlang process...</div>
<div class="line">[Friday 18 February 2011] [02:01:58] &lt;yrashk&gt; again it doesn&#8217;t guarantee the same scheduler (thread)</div>
<div class="line">[Friday 18 February 2011] [02:02:03] &lt;jugg&gt;   doesn&#8217;t need to</div>
<div class="line">[Friday 18 February 2011] [02:02:12] &lt;jugg&gt;   a single process can&#8217;t call into multiple nifs at once.</div>
<div class="line">[Friday 18 February 2011] [02:02:18] &lt;yrashk&gt; true</div>
<div class="line">[Friday 18 February 2011] [02:02:31] &lt;yrashk&gt; then we need to record pid on socket creation</div>
<div class="line">[Friday 18 February 2011] [02:02:32] &lt;yrashk&gt; easy to do</div>
<div class="line">[Friday 18 February 2011] [02:02:37] &lt;jugg&gt;   yes</div>
<div class="line">[Friday 18 February 2011] [02:03:06] &lt;yrashk&gt; and return badarg or something more appropriate if it is not from the same process</div>
<div class="line">[Friday 18 February 2011] [02:04:47] &lt;yrashk&gt; this all doesn&#8217;t explain rare segfaults</div>
<div class="line">[Friday 18 February 2011] [02:05:06] &lt;yrashk&gt; basically <em>sometimes</em> 0mq fails on reading receiver_thread&#8217;s pull socket</div>
<div class="line">[Friday 18 February 2011] [02:05:18] &lt;yrashk&gt; which is something I can&#8217;t yet explain</div>
<div class="line">[Friday 18 February 2011] [02:06:24] &lt;yrashk&gt; A MQ context is thread safe and may be shared among as many application threads as necessary, without any additional locking required on the part of the caller. Each MQ socket belonging to a particular context may only be used by the thread that created it using zmq_socket().</div>
<div class="line">[Friday 18 February 2011] [02:06:37] &lt;yrashk&gt; so not anymore?</div>
<div class="line">[Friday 18 February 2011] [02:07:14] &lt;jugg&gt;   not on 2.1.x</div>
<div class="line">[Friday 18 February 2011] [02:07:27] &lt;yrashk&gt; too bad api doc is outdated</div>
<div class="line">[Friday 18 February 2011] [02:07:28] &lt;yrashk&gt; :-(</div>
<div class="line">[Friday 18 February 2011] [02:07:37] &lt;jugg&gt;   in source, or on the web?</div>
<div class="line">[Friday 18 February 2011] [02:07:44] &lt;yrashk&gt; web</div>
<div class="line">[Friday 18 February 2011] [02:07:45] &lt;jugg&gt;   the web is for 2.0.x still.</div>
<div class="line">[Friday 18 February 2011] [02:07:52] &lt;yrashk&gt; any reason why?</div>
<div class="line">[Friday 18 February 2011] [02:07:58] &lt;jugg&gt;   it is the &#8216;stable&#8217; version.</div>
<div class="line">[Friday 18 February 2011] [02:08:05] &lt;yrashk&gt; ah</div>
<div class="line">[Friday 18 February 2011] [02:08:11] &lt;yrashk&gt; so will be updated for 2.2?</div>
<div class="line">[Friday 18 February 2011] [02:08:21] &lt;jugg&gt;   I&#8217;m not sure how they&#8217;re handling that...</div>
<div class="line">[Friday 18 February 2011] [02:09:03] &lt;jugg&gt;   I do wish they&#8217;d provide namespacing at api.zeromq.org tho for the different versions...</div>
<div class="line">[Friday 18 February 2011] [02:09:17] &lt;jugg&gt;   but I believe that&#8217;s been discussed and rejected.</div>
<div class="line">[Friday 18 February 2011] [02:09:21] &lt;yrashk&gt; that would be awesome</div>
<div class="line">[Friday 18 February 2011] [04:03:00] &lt;mikko&gt;  <a href="#id827"><span class="problematic" id="id828">pieterh_</span></a>: there?</div>
<div class="line">[Friday 18 February 2011] [04:03:13] &lt;pieterh&gt;        mikko: yup</div>
<div class="line">[Friday 18 February 2011] [04:03:46] &lt;mikko&gt;  pieterh: cJSON</div>
<div class="line">[Friday 18 February 2011] [04:04:00] &lt;pieterh&gt;        it&#8217;s giving build errors?</div>
<div class="line">[Friday 18 February 2011] [04:04:00] &lt;mikko&gt;  is there a reason why the .c file is included in zfl_config_json?</div>
<div class="line">[Friday 18 February 2011] [04:04:09] &lt;pieterh&gt;        ah, that&#8217;s just to simplify things</div>
<div class="line">[Friday 18 February 2011] [04:04:09] &lt;mikko&gt;  well, it&#8217;s not included in make dist atm</div>
<div class="line">[Friday 18 February 2011] [04:04:11] &lt;mikko&gt;  fixing that</div>
<div class="line">[Friday 18 February 2011] [04:04:26] &lt;mikko&gt;  make dist, take the tar.gz and try to build</div>
<div class="line">[Friday 18 February 2011] [04:04:34] &lt;pieterh&gt;        it&#8217;s used only by that one zfl class</div>
<div class="line">[Friday 18 February 2011] [04:04:38] &lt;mikko&gt;  yeah</div>
<div class="line">[Friday 18 February 2011] [04:04:43] &lt;pieterh&gt;        true, we never tested a tarball yet</div>
<div class="line">[Friday 18 February 2011] [04:17:43] &lt;mikko&gt;  pieterh: larger config refactoring on zfl, want it on separate branch first?</div>
<div class="line">[Friday 18 February 2011] [04:17:59] &lt;mikko&gt;  i went through most of it last night and all aspects of build work for me</div>
<div class="line">[Friday 18 February 2011] [04:18:07] &lt;pieterh&gt;        I don&#8217;t think so mikko, let&#8217;s do everything on master</div>
<div class="line">[Friday 18 February 2011] [04:18:24] &lt;mikko&gt;  ok, i can always revert if it breaks things in a bad way</div>
<div class="line">[Friday 18 February 2011] [04:18:27] &lt;pieterh&gt;        the sooner it breaks the more time we have to fix it :-)</div>
<div class="line">[Friday 18 February 2011] [04:18:40] &lt;pieterh&gt;        oh, we never revert :-)</div>
<div class="line">[Friday 18 February 2011] [04:19:20] &lt;pieterh&gt;        i&#8217;m serious, the only process I know is to publish &amp; improve</div>
<div class="line">[Friday 18 February 2011] [04:19:56] &lt;mikko&gt;   3 files changed, 67 insertions(+), 149 deletions(-)</div>
<div class="line">[Friday 18 February 2011] [04:19:58] &lt;mikko&gt;  heh</div>
<div class="line">[Friday 18 February 2011] [04:20:11] &lt;pieterh&gt;        commit it, I&#8217;ll quickly test on this box I&#8217;m on</div>
<div class="line">[Friday 18 February 2011] [04:20:19] &lt;pieterh&gt;        I have 6 minutes then need to leave :-)</div>
<div class="line">[Friday 18 February 2011] [04:20:32] &lt;pieterh&gt;        I mean, push the commit...</div>
<div class="line">[Friday 18 February 2011] [04:20:38] &lt;mikko&gt;  pushed</div>
<div class="line">[Friday 18 February 2011] [04:21:05] &lt;mikko&gt;  let me know if something breaks. i&#8217;ll test solaris today as well</div>
<div class="line">[Friday 18 February 2011] [04:22:03] &lt;pieterh&gt;        Tests passed OK</div>
<div class="line">[Friday 18 February 2011] [04:22:03] &lt;pieterh&gt;        PASS: zfl_selftest</div>
<div class="line">[Friday 18 February 2011] [04:22:03] &lt;pieterh&gt;        =============</div>
<div class="line">[Friday 18 February 2011] [04:22:03] &lt;pieterh&gt;        1 test passed</div>
<div class="line">[Friday 18 February 2011] [04:22:03] &lt;pieterh&gt;        =============</div>
<div class="line">[Friday 18 February 2011] [04:22:07] &lt;pieterh&gt;        that&#8217;s on Ubuntu</div>
<div class="line">[Friday 18 February 2011] [04:22:12] &lt;pieterh&gt;        nice stuff!</div>
<div class="line">[Friday 18 February 2011] [04:22:27] &lt;mikko&gt;  good stuff</div>
<div class="line">[Friday 18 February 2011] [04:22:39] &lt;mikko&gt;  now i can add the gcov script and make the daily builds do this properly</div>
<div class="line">[Friday 18 February 2011] [04:36:13] &lt;sustrik&gt;        mikko: morning</div>
<div class="line">[Friday 18 February 2011] [04:36:28] &lt;sustrik&gt;        win7/msvc build seems to be failing</div>
<div class="line">[Friday 18 February 2011] [04:36:45] &lt;sustrik&gt;        when in build on my XP/msvc there&#8217;s no problem</div>
<div class="line">[Friday 18 February 2011] [04:37:00] &lt;sustrik&gt;        is the source up to date there?</div>
<div class="line">[Friday 18 February 2011] [04:37:57] &lt;sustrik&gt;        maybe it has something to do with pgm?</div>
<div class="line">[Friday 18 February 2011] [04:37:58] &lt;sustrik&gt;        hm</div>
<div class="line">[Friday 18 February 2011] [04:39:29] &lt;sustrik&gt;        aha, that&#8217;s probably it</div>
<div class="line">[Friday 18 February 2011] [04:44:35] &lt;sustrik&gt;        here it is: types.h:44: #       define bool             BOOL</div>
<div class="line">[Friday 18 February 2011] [04:57:00] &lt;mikko&gt;  yes</div>
<div class="line">[Friday 18 February 2011] [04:57:08] &lt;mikko&gt;  the pgm folder keeps disappearing for some reason</div>
<div class="line">[Friday 18 February 2011] [04:57:17] &lt;mikko&gt;  i think jenkins cleans the workspace at some point</div>
<div class="line">[Friday 18 February 2011] [04:58:38] &lt;sustrik&gt;        it&#8217;s a different problem</div>
<div class="line">[Friday 18 February 2011] [04:58:59] &lt;sustrik&gt;        i&#8217;ve already sent an email about it to openpgm mailing list</div>
<div class="line">[Friday 18 February 2011] [05:00:25] &lt;mikko&gt;  ah good</div>
<div class="line">[Friday 18 February 2011] [05:00:32] &lt;mikko&gt;  so maybe the file permissions are working after all</div>
<div class="line">[Friday 18 February 2011] [05:00:52] &lt;mikko&gt;  if you got time at some point can you test this branch <a class="reference external" href="https://github.com/mkoppanen/zeromq2/tree/openpgm-autoconf">https://github.com/mkoppanen/zeromq2/tree/openpgm-autoconf</a></div>
<div class="line">[Friday 18 February 2011] [05:00:58] &lt;mikko&gt;  ./configure &#8211;with-pgm</div>
<div class="line">[Friday 18 February 2011] [05:01:09] &lt;mikko&gt;  you should see during configure that it invokes openpgm configure</div>
<div class="line">[Friday 18 February 2011] [05:01:15] &lt;mikko&gt;  and everything works like magic</div>
<div class="line">[Friday 18 February 2011] [05:02:02] &lt;sustrik&gt;        i have ubuntu here</div>
<div class="line">[Friday 18 February 2011] [05:02:09] &lt;sustrik&gt;        would testing on that help you?</div>
<div class="line">[Friday 18 February 2011] [05:05:43] &lt;mikko&gt;  yeah, if you can</div>
<div class="line">[Friday 18 February 2011] [05:05:51] &lt;mikko&gt;  i&#8217;ve been only running it on my local vm</div>
<div class="line">[Friday 18 February 2011] [05:05:56] &lt;mikko&gt;  where everything seems to work ok</div>
<div class="line">[Friday 18 February 2011] [05:06:03] &lt;sustrik&gt;        ok, wait a sec</div>
<div class="line">[Friday 18 February 2011] [05:06:45] &lt;mikko&gt;  sun studio complains about same thing as msvc</div>
<div class="line">[Friday 18 February 2011] [05:07:58] &lt;sustrik&gt;        yes, same problem</div>
<div class="line">[Friday 18 February 2011] [05:13:57] &lt;sustrik&gt;        mikko: tested</div>
<div class="line">[Friday 18 February 2011] [05:13:59] &lt;sustrik&gt;        builds ok</div>
<div class="line">[Friday 18 February 2011] [05:14:02] &lt;mikko&gt;  good</div>
<div class="line">[Friday 18 February 2011] [05:14:10] &lt;mikko&gt;  so it&#8217;s ready(ish)</div>
<div class="line">[Friday 18 February 2011] [05:14:16] &lt;sustrik&gt;        nice</div>
<div class="line">[Friday 18 February 2011] [05:14:23] &lt;mikko&gt;  todo list emptying faster than i hoped</div>
<div class="line">[Friday 18 February 2011] [05:33:37] &lt;yrashk&gt; I am confused now</div>
<div class="line">[Friday 18 February 2011] [05:33:48] &lt;yrashk&gt; in PUB/SUBs who should connect and who should bind?</div>
<div class="line">[Friday 18 February 2011] [05:33:54] &lt;mikko&gt;  yrashk: doesnt matter</div>
<div class="line">[Friday 18 February 2011] [05:34:23] &lt;yrashk&gt; looks like it works either way</div>
<div class="line">[Friday 18 February 2011] [05:34:25] &lt;mikko&gt;  yes</div>
<div class="line">[Friday 18 February 2011] [05:34:30] &lt;yrashk&gt; mikko: that&#8217;s what I thought, thanks</div>
<div class="line">[Friday 18 February 2011] [05:34:37] &lt;yrashk&gt; I just received a patch &#8220;fixing&#8221; this in my tests</div>
<div class="line">[Friday 18 February 2011] [05:35:22] &lt;yrashk&gt; and it got me puzzled because I never even thought about it</div>
<div class="line">[Friday 18 February 2011] [06:31:20]   * yrashk is trying to figure out how to make ezmq:send faster now</div>
<div class="line">[Friday 18 February 2011] [06:53:42] &lt;mikko&gt;  heyo</div>
<div class="line">[Friday 18 February 2011] [06:53:50] &lt;<a href="#id829"><span class="problematic" id="id830">pieterh_</span></a>&gt;       heyo, mikko</div>
<div class="line">[Friday 18 February 2011] [06:54:01] &lt;mikko&gt;  q: would it be useful to have sockopt to prevent durable subscribers on server side?</div>
<div class="line">[Friday 18 February 2011] [06:54:14] &lt;<a href="#id831"><span class="problematic" id="id832">pieterh_</span></a>&gt;       IMO yes</div>
<div class="line">[Friday 18 February 2011] [06:54:15] &lt;mikko&gt;  currently the server side is pretty vulnerable to DoS</div>
<div class="line">[Friday 18 February 2011] [06:54:35] &lt;mikko&gt;  connect tons of clients with identities, disconnect them and it should run out of memory</div>
<div class="line">[Friday 18 February 2011] [06:54:40] &lt;<a href="#id833"><span class="problematic" id="id834">pieterh_</span></a>&gt;       Even more so, have sockopt that <em>allows</em> this</div>
<div class="line">[Friday 18 February 2011] [06:54:53] &lt;mikko&gt;  and another thing is removing subscriptions</div>
<div class="line">[Friday 18 February 2011] [06:54:53] &lt;<a href="#id835"><span class="problematic" id="id836">pieterh_</span></a>&gt;       Or else limit nbr of durable peers</div>
<div class="line">[Friday 18 February 2011] [06:55:06] &lt;mikko&gt;  or controlling their lifetime</div>
<div class="line">[Friday 18 February 2011] [06:55:14] &lt;<a href="#id837"><span class="problematic" id="id838">pieterh_</span></a>&gt;       indeed</div>
<div class="line">[Friday 18 February 2011] [06:55:16] &lt;mikko&gt;  as in &#8220;if peer has missed N messages consider it dead&#8221;</div>
<div class="line">[Friday 18 February 2011] [06:55:27] &lt;<a href="#id839"><span class="problematic" id="id840">pieterh_</span></a>&gt;       well, that&#8217;s the whole point of durable sockets</div>
<div class="line">[Friday 18 February 2011] [06:55:29] &lt;mikko&gt;  or &#8220;if peer hasn&#8217;t been back in 2 hours consider it dead&#8221;</div>
<div class="line">[Friday 18 February 2011] [06:55:32] &lt;<a href="#id841"><span class="problematic" id="id842">pieterh_</span></a>&gt;       peer can go away for a long time</div>
<div class="line">[Friday 18 February 2011] [06:55:41] &lt;mikko&gt;  i mean controllable time for durability</div>
<div class="line">[Friday 18 February 2011] [06:56:08] &lt;<a href="#id843"><span class="problematic" id="id844">pieterh_</span></a>&gt;       from a paranoid POV, I&#8217;d like</div>
<div class="line">[Friday 18 February 2011] [06:56:16] &lt;<a href="#id845"><span class="problematic" id="id846">pieterh_</span></a>&gt;       - default HWM for durable sockets</div>
<div class="line">[Friday 18 February 2011] [06:56:17] &lt;mikko&gt;  that way you don&#8217;t have to worry about restarting server if you remove a durable subscriber</div>
<div class="line">[Friday 18 February 2011] [06:56:24] &lt;<a href="#id847"><span class="problematic" id="id848">pieterh_</span></a>&gt;       - default limit on number of those sockets</div>
<div class="line">[Friday 18 February 2011] [06:56:35] &lt;<a href="#id849"><span class="problematic" id="id850">pieterh_</span></a>&gt;       - default limit on total memory used by durable socket queues</div>
<div class="line">[Friday 18 February 2011] [06:57:15] &lt;<a href="#id851"><span class="problematic" id="id852">pieterh_</span></a>&gt;       good topic for discussion on list IMO</div>
<div class="line">[Friday 18 February 2011] [06:57:21] &lt;mikko&gt;  - ability to remove durable subscription explicitly</div>
<div class="line">[Friday 18 February 2011] [06:57:36] &lt;mikko&gt;  like remove subscription of &#8220;company ABC&#8221; while keeping others</div>
<div class="line">[Friday 18 February 2011] [06:57:42] &lt;<a href="#id853"><span class="problematic" id="id854">pieterh_</span></a>&gt;       - timeout on durable sockets</div>
<div class="line">[Friday 18 February 2011] [06:57:47] &lt;mikko&gt;  yes</div>
<div class="line">[Friday 18 February 2011] [06:58:16] &lt;mikko&gt;  one of the important features for 2.1.0 i could see is not failing on invalid connection uri</div>
<div class="line">[Friday 18 February 2011] [06:59:39] &lt;<a href="#id855"><span class="problematic" id="id856">pieterh_</span></a>&gt;       we should list the outstanding &#8216;bugs&#8217; in 2.1.0</div>
<div class="line">[Friday 18 February 2011] [07:00:07] &lt;mikko&gt;  is atlassian stack overkill for us?</div>
<div class="line">[Friday 18 February 2011] [07:00:14] &lt;mikko&gt;  they give licenses to open source as far as i know</div>
<div class="line">[Friday 18 February 2011] [07:00:19] &lt;mikko&gt;  jira/confluence/etc</div>
<div class="line">[Friday 18 February 2011] [07:00:35] &lt;<a href="#id857"><span class="problematic" id="id858">pieterh_</span></a>&gt;       oh, I&#8217;d rather not</div>
<div class="line">[Friday 18 February 2011] [07:00:41] &lt;<a href="#id859"><span class="problematic" id="id860">pieterh_</span></a>&gt;       we used to use Jira for all issue tracking</div>
<div class="line">[Friday 18 February 2011] [07:00:46] &lt;<a href="#id861"><span class="problematic" id="id862">pieterh_</span></a>&gt;       it is a great, fantastic product</div>
<div class="line">[Friday 18 February 2011] [07:01:03] &lt;<a href="#id863"><span class="problematic" id="id864">pieterh_</span></a>&gt;       you just have to pay someone to reboot the <a href="#id41"><span class="problematic" id="id42">*</span></a>&#64;%&#64;$E# server once a week</div>
<div class="line">[Friday 18 February 2011] [07:01:33] &lt;<a href="#id865"><span class="problematic" id="id866">pieterh_</span></a>&gt;       i would 10x rather use github&#8217;s simple but maintenance free issue tracking</div>
<div class="line">[Friday 18 February 2011] [07:02:05] &lt;<a href="#id867"><span class="problematic" id="id868">pieterh_</span></a>&gt;       anyhow, I was thinking of a wiki page, like the 2.0 roadmap</div>
<div class="line">[Friday 18 February 2011] [07:02:09] &lt;<a href="#id869"><span class="problematic" id="id870">pieterh_</span></a>&gt;       <a href="#id43"><span class="problematic" id="id44">*</span></a>3.0</div>
<div class="line">[Friday 18 February 2011] [07:02:30] &lt;mikko&gt;  what i would like is somehow automatically assign issues to roadmap milestones</div>
<div class="line">[Friday 18 February 2011] [07:02:54] &lt;mikko&gt;  i wonder if zfl tests should be broken into separate files</div>
<div class="line">[Friday 18 February 2011] [07:03:03] &lt;mikko&gt;  currently it shows &#8220;1 test succeeded&#8221;</div>
<div class="line">[Friday 18 February 2011] [07:03:38] &lt;<a href="#id871"><span class="problematic" id="id872">pieterh_</span></a>&gt;       regarding issue tracking, discuss on list, it&#8217;s too contentious</div>
<div class="line">[Friday 18 February 2011] [07:04:06] &lt;<a href="#id873"><span class="problematic" id="id874">pieterh_</span></a>&gt;       remember our process is not driven by issues but by patches</div>
<div class="line">[Friday 18 February 2011] [07:04:31] &lt;<a href="#id875"><span class="problematic" id="id876">pieterh_</span></a>&gt;       for zfl tests, multiple executables would work for me, sure...</div>
<div class="line">[Friday 18 February 2011] [07:04:36] &lt;<a href="#id877"><span class="problematic" id="id878">pieterh_</span></a>&gt;       it&#8217;s more work to maintain though</div>
<div class="line">[Friday 18 February 2011] [07:05:34] &lt;<a href="#id879"><span class="problematic" id="id880">pieterh_</span></a>&gt;       when we have four files for each class I start to get tempted by code generation</div>
<div class="line">[Friday 18 February 2011] [07:05:46] &lt;<a href="#id881"><span class="problematic" id="id882">pieterh_</span></a>&gt;       and that gets ugly, you don&#8217;t want to see that :-)</div>
<div class="line">[Friday 18 February 2011] [07:06:47] &lt;yrashk&gt; hey <a href="#id883"><span class="problematic" id="id884">pieterh_</span></a></div>
<div class="line">[Friday 18 February 2011] [07:06:54] &lt;<a href="#id885"><span class="problematic" id="id886">pieterh_</span></a>&gt;       hi yrashk</div>
<div class="line">[Friday 18 February 2011] [07:07:37] &lt;yrashk&gt; mikko: I use open source license for bamboo, nice stuff</div>
<div class="line">[Friday 18 February 2011] [07:11:19] &lt;mikko&gt;  i find jenkins a lot better than bamboo</div>
<div class="line">[Friday 18 February 2011] [07:11:25] &lt;mikko&gt;  especially for distributed builds</div>
<div class="line">[Friday 18 February 2011] [07:17:49] &lt;yrashk&gt; hmm may be I should add select() based active mode for ezmq.. not sure if this help with the performance issue, though</div>
<div class="line">[Friday 18 February 2011] [07:17:59] &lt;yrashk&gt; this will*</div>
<div class="line">[Friday 18 February 2011] [07:22:58] &lt;yrashk&gt; or, rather poll() one</div>
<div class="line">[Friday 18 February 2011] [07:44:17] &lt;sustrik&gt;        mikko, <a href="#id887"><span class="problematic" id="id888">pieterh_</span></a>: re durable subscribers: +1</div>
<div class="line">[Friday 18 February 2011] [07:44:30] &lt;sustrik&gt;        i would even remove the identity option altogether</div>
<div class="line">[Friday 18 February 2011] [08:02:15] &lt;tormaroe&gt;       Just found 0MQ, and I really exited. Built from source on Windows without problems. Now want to install Ruby gem, but having problems.</div>
<div class="line">[Friday 18 February 2011] [08:02:23] &lt;tormaroe&gt;       Trying gem install zmq &#8211; &#8211;with-zmq-dir=c:zeromq</div>
<div class="line">[Friday 18 February 2011] [08:02:31] &lt;tormaroe&gt;       but still getting ERROR: Failed to build gem native extension. extconf.rb:25: Couldn&#8217;t find zmq library. try setting &#8211;with-zmq-dir=&lt;path&gt; to tell me where it is. (RuntimeError)</div>
<div class="line">[Friday 18 February 2011] [08:02:54] &lt;tormaroe&gt;       please help :)</div>
<div class="line">[Friday 18 February 2011] [08:03:47] &lt;tormaroe&gt;       I just copied the build output to my c:zeromq. No other &#8220;installation&#8221; required, right?</div>
<div class="line">[Friday 18 February 2011] [08:05:50] &lt;sustrik&gt;        no</div>
<div class="line">[Friday 18 February 2011] [08:06:03] &lt;sustrik&gt;        you need just the library an the header file</div>
<div class="line">[Friday 18 February 2011] [08:07:13] &lt;tormaroe&gt;       I have no clue about c++, so what&#8217;s the header file?</div>
<div class="line">[Friday 18 February 2011] [08:07:29] &lt;tormaroe&gt;       got dll, exp, ilk, lib and pdb</div>
<div class="line">[Friday 18 February 2011] [08:09:59] &lt;yrashk&gt; it looks like I forgot a lot about poll()-related matters</div>
<div class="line">[Friday 18 February 2011] [08:10:12] &lt;yrashk&gt; my recv blocks after receving a ZMQ_POLLIN revent</div>
<div class="line">[Friday 18 February 2011] [08:10:14] &lt;yrashk&gt; eh</div>
<div class="line">[Friday 18 February 2011] [08:12:16] &lt;yrashk&gt; don&#8217;t quite understand how this could happen, but likely my 5am bug :D</div>
<div class="line">[Friday 18 February 2011] [08:16:07] &lt;CIA-21&gt; zeromq2: 03Martin Sustrik 07master * r17e2ca7 10/ (5 files):</div>
<div class="line">[Friday 18 February 2011] [08:16:07] &lt;CIA-21&gt; zeromq2: Logging of duplicit identities added</div>
<div class="line">[Friday 18 February 2011] [08:16:07] &lt;CIA-21&gt; zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/dXqok7">http://bit.ly/dXqok7</a></div>
<div class="line">[Friday 18 February 2011] [08:16:26] &lt;sustrik&gt;        tormaroe: zmq.h</div>
<div class="line">[Friday 18 February 2011] [08:17:00] &lt;sustrik&gt;        yrashk: that should not happen</div>
<div class="line">[Friday 18 February 2011] [08:21:07] &lt;tormaroe&gt;       Added zmq.h from the include folder and re-ran gem command, but getting same error :(</div>
<div class="line">[Friday 18 February 2011] [08:21:44] &lt;sustrik&gt;        try asking on the mailing list, i am not a ruby expert</div>
<div class="line">[Friday 18 February 2011] [08:21:54] &lt;tormaroe&gt;       ok, thanks anyway</div>
<div class="line">[Friday 18 February 2011] [08:24:24] &lt;yrashk&gt; sustrik: yeah I figured that out already and fixed the bug</div>
<div class="line">[Friday 18 February 2011] [08:34:37] &lt;yrashk&gt; doing poll &amp; recv at the same time is probably an insanely bad idea, after all :D</div>
<div class="line">[Friday 18 February 2011] [10:05:54] &lt;yrashk&gt; sustrik: pieterh is that ok that send() with ZMQ_NOBLOCK takes roughly 10 usec?</div>
<div class="line">[Friday 18 February 2011] [10:06:07] &lt;yrashk&gt; I am profiling my C code</div>
<div class="line">[Friday 18 February 2011] [10:06:27] &lt;sustrik&gt;        raw zmq_send()?</div>
<div class="line">[Friday 18 February 2011] [10:06:30] &lt;yrashk&gt; ya</div>
<div class="line">[Friday 18 February 2011] [10:06:48] &lt;sustrik&gt;        that&#8217;s too much</div>
<div class="line">[Friday 18 February 2011] [10:06:58] &lt;sustrik&gt;        should be below 1 us</div>
<div class="line">[Friday 18 February 2011] [10:07:06] &lt;yrashk&gt; <a class="reference external" href="https://gist.github.com/af07bbd989ec1f7e659c">https://gist.github.com/af07bbd989ec1f7e659c</a></div>
<div class="line">[Friday 18 February 2011] [10:08:03] &lt;yrashk&gt; appended that gist with some typical tv.tv_usec-tv1.tv_usec printout</div>
<div class="line">[Friday 18 February 2011] [10:08:21] &lt;yrashk&gt; it looks more like 7 us</div>
<div class="line">[Friday 18 February 2011] [10:08:41] &lt;yrashk&gt; but still</div>
<div class="line">[Friday 18 February 2011] [10:08:44] &lt;sustrik&gt;        have you tried to measure zmq_send() itself?</div>
<div class="line">[Friday 18 February 2011] [10:08:54] &lt;sustrik&gt;        there&#8217;s some other work being done there</div>
<div class="line">[Friday 18 February 2011] [10:08:57] &lt;yrashk&gt; well that if condition is false</div>
<div class="line">[Friday 18 February 2011] [10:09:07] &lt;sustrik&gt;        ah</div>
<div class="line">[Friday 18 February 2011] [10:09:09] &lt;sustrik&gt;        ok</div>
<div class="line">[Friday 18 February 2011] [10:09:13] &lt;yrashk&gt; but I can try</div>
<div class="line">[Friday 18 February 2011] [10:09:17] &lt;sustrik&gt;        what OS are you on?</div>
<div class="line">[Friday 18 February 2011] [10:09:20] &lt;yrashk&gt; osx</div>
<div class="line">[Friday 18 February 2011] [10:09:34] &lt;sustrik&gt;        how long does gettimeofday take on osx?</div>
<div class="line">[Friday 18 February 2011] [10:09:46] &lt;yrashk&gt; still 5+ us at least</div>
<div class="line">[Friday 18 February 2011] [10:09:50] &lt;yrashk&gt; with no if</div>
<div class="line">[Friday 18 February 2011] [10:09:56] &lt;yrashk&gt; no idea</div>
<div class="line">[Friday 18 February 2011] [10:10:03] &lt;sustrik&gt;        it tends to be slow</div>
<div class="line">[Friday 18 February 2011] [10:10:15] &lt;sustrik&gt;        it&#8217;s kind of better with linux nowadays</div>
<div class="line">[Friday 18 February 2011] [10:10:24] &lt;sustrik&gt;        they&#8217;ve got it to something like 1us</div>
<div class="line">[Friday 18 February 2011] [10:10:37] &lt;sustrik&gt;        but before it was much worse</div>
<div class="line">[Friday 18 February 2011] [10:10:45] &lt;sustrik&gt;        no idea about osx though</div>
<div class="line">[Friday 18 February 2011] [10:11:24] &lt;sustrik&gt;        easiest way to measure is to make 1M zmq_send()s</div>
<div class="line">[Friday 18 February 2011] [10:11:31] &lt;sustrik&gt;        measure the whole thing</div>
<div class="line">[Friday 18 February 2011] [10:11:37] &lt;sustrik&gt;        and divide it by 1000000</div>
<div class="line">[Friday 18 February 2011] [10:12:16] &lt;yrashk&gt; apparently _lat tests are good on ezmq</div>
<div class="line">[Friday 18 February 2011] [10:12:48] &lt;yrashk&gt; well that&#8217;s what I do</div>
<div class="line">[Friday 18 February 2011] [10:13:04] &lt;yrashk&gt; (07:12) &lt;evaxsoftware&gt; _lat results:</div>
<div class="line">[Friday 18 February 2011] [10:13:04] &lt;yrashk&gt; (07:12) &lt;evaxsoftware&gt; local_lat       remote_lat      mean latency        real/usr/sys</div>
<div class="line">[Friday 18 February 2011] [10:13:07] &lt;yrashk&gt; (07:12) &lt;evaxsoftware&gt; C               C               41                  8.2/0.8/3.7</div>
<div class="line">[Friday 18 February 2011] [10:13:10] &lt;yrashk&gt; (07:12) &lt;evaxsoftware&gt; ezmq            ezmq            47                  9.5/2.6/2.3</div>
<div class="line">[Friday 18 February 2011] [10:13:14] &lt;yrashk&gt; (07:13) &lt;evaxsoftware&gt; pyzmq           pyzmq           48                  12.7/1.8/3.7</div>
<div class="line">[Friday 18 February 2011] [10:13:17] &lt;yrashk&gt; .win 26</div>
<div class="line">[Friday 18 February 2011] [10:13:19] &lt;yrashk&gt; oops</div>
<div class="line">[Friday 18 February 2011] [10:13:22] &lt;yrashk&gt; (07:14) &lt;evaxsoftware&gt; it&#8217;s efficient (completes nearly as fast as the C version)</div>
<div class="line">[Friday 18 February 2011] [10:13:46] &lt;yrashk&gt; apparently better than pyzmq</div>
<div class="line">[Friday 18 February 2011] [10:15:19] &lt;DarkGod&gt;        hello, I&#8217;m sorry but I am afradi I have a few, probably stupid questions. I read the manual and wanted to try the auto reconnect stuff, I took the simple REQ/REP C examples and copiled them, if I run the client and then the server it&#8217;s all dandy, yet if I kill the server while the client is running and then restart the server it does not seem to reconnect</div>
<div class="line">[Friday 18 February 2011] [10:15:32] &lt;DarkGod&gt;        it should no? or did I misunderstand ?</div>
<div class="line">[Friday 18 February 2011] [10:16:37] &lt;sustrik&gt;        yrashk: nice</div>
<div class="line">[Friday 18 February 2011] [10:17:10] &lt;yrashk&gt; so I am not sure why thr is so bad</div>
<div class="line">[Friday 18 February 2011] [10:17:41] &lt;sustrik&gt;        throughput is a silly metric</div>
<div class="line">[Friday 18 February 2011] [10:17:59] &lt;sustrik&gt;        it exhibits large oscillation due to minor causes</div>
<div class="line">[Friday 18 February 2011] [10:18:04] &lt;sustrik&gt;        shrug</div>
<div class="line">[Friday 18 February 2011] [10:19:02] &lt;sustrik&gt;        DarkGod: it probably reconnects, but current request is lost</div>
<div class="line">[Friday 18 February 2011] [10:19:26] &lt;sustrik&gt;        if you need reliability you should implement it on top of 0mq</div>
<div class="line">[Friday 18 February 2011] [10:19:37] &lt;sustrik&gt;        iirc, the guide explains that</div>
<div class="line">[Friday 18 February 2011] [10:20:26] &lt;DarkGod&gt;        ah, so I should put a timeout on the send on the REQ side so that it can fail</div>
<div class="line">[Friday 18 February 2011] [10:20:39] &lt;sustrik&gt;        yes</div>
<div class="line">[Friday 18 February 2011] [10:20:47] &lt;sustrik&gt;        then you can resend the request if needed</div>
<div class="line">[Friday 18 February 2011] [10:20:59] &lt;DarkGod&gt;        I see</div>
<div class="line">[Friday 18 February 2011] [10:21:04] &lt;DarkGod&gt;        thanks :)</div>
<div class="line">[Friday 18 February 2011] [10:21:08] &lt;sustrik&gt;        np</div>
<div class="line">[Friday 18 February 2011] [10:22:53] &lt;DarkGod&gt;        next silly question: the pub/sub sockets look neat, but in some cases I want to adress a specific client, I could use filtering but a ngrep of the ethernet interface shows me that all data is pushed to clients and that they then do the filtering, as I might have large data going through I really do notwant it transmited to all</div>
<div class="line">[Friday 18 February 2011] [10:23:05] &lt;DarkGod&gt;        clietns when it is actaully only meant for one</div>
<div class="line">[Friday 18 February 2011] [10:23:30] &lt;DarkGod&gt;        I must use pairs in this case? (setting up a pair per client ?)</div>
<div class="line">[Friday 18 February 2011] [10:27:53] &lt;sustrik&gt;        there&#8217;s a work in progress wrt filtering on the PUBside</div>
<div class="line">[Friday 18 February 2011] [10:28:04] &lt;sustrik&gt;        (sub-forward branch)</div>
<div class="line">[Friday 18 February 2011] [10:28:16] &lt;sustrik&gt;        you can help to finish that work</div>
<div class="line">[Friday 18 February 2011] [10:29:00] &lt;DarkGod&gt;        I&#8217;m afraid I dont know zmq code quite well enough, but yeah that&#8217;s what I&#8217;d need I imagine</div>
<div class="line">[Friday 18 February 2011] [10:31:27] &lt;DarkGod&gt;        how advanced is this branch/what needs to be done ?</div>
<div class="line">[Friday 18 February 2011] [10:32:20] &lt;sustrik&gt;        check the mailing list archives</div>
<div class="line">[Friday 18 February 2011] [10:32:30] &lt;sustrik&gt;        there lot of related discussion there</div>
<div class="line">[Friday 18 February 2011] [10:32:45] &lt;DarkGod&gt;        ok :)</div>
<div class="line">[Friday 18 February 2011] [10:32:50] &lt;sustrik&gt;        so far the subscriptions are propagated up the distribution tree</div>
<div class="line">[Friday 18 February 2011] [10:32:59] &lt;sustrik&gt;        what&#8217;s missing is acutal filtering</div>
<div class="line">[Friday 18 February 2011] [10:56:16] &lt;yrashk&gt; <a class="reference external" href="https://gist.github.com/a3fd747d0bd7b3d61aba">https://gist.github.com/a3fd747d0bd7b3d61aba</a></div>
<div class="line">[Friday 18 February 2011] [10:56:44] &lt;yrashk&gt; sustrik: ^^ another bizzare crash :) now I don&#8217;t even see any out of bound pointers :-D</div>
<div class="line">[Friday 18 February 2011] [10:57:05] &lt;yrashk&gt; does this tracce tell you anything worth checking out?</div>
<div class="line">[Friday 18 February 2011] [11:12:58] &lt;sustrik&gt;        yrashk: what&#8217;s the error?</div>
<div class="line">[Friday 18 February 2011] [11:13:02] &lt;sustrik&gt;        SEGFAULT?</div>
<div class="line">[Friday 18 February 2011] [11:13:08] &lt;yrashk&gt; yes</div>
<div class="line">[Friday 18 February 2011] [11:13:26] &lt;sustrik&gt;        segfault in glibc</div>
<div class="line">[Friday 18 February 2011] [11:13:28] &lt;sustrik&gt;        nasty</div>
<div class="line">[Friday 18 February 2011] [11:13:33] &lt;yrashk&gt; I can show the whole socket printout</div>
<div class="line">[Friday 18 February 2011] [11:13:35] &lt;yrashk&gt; if you want</div>
<div class="line">[Friday 18 February 2011] [11:13:50] &lt;sustrik&gt;        no need</div>
<div class="line">[Friday 18 February 2011] [11:13:54] &lt;sustrik&gt;        is it reproducible?</div>
<div class="line">[Friday 18 February 2011] [11:14:11] &lt;yrashk&gt; not every time</div>
<div class="line">[Friday 18 February 2011] [11:14:18] &lt;yrashk&gt; and not on every computer</div>
<div class="line">[Friday 18 February 2011] [11:14:19] &lt;yrashk&gt; but it is</div>
<div class="line">[Friday 18 February 2011] [11:14:22] &lt;sustrik&gt;        hm</div>
<div class="line">[Friday 18 February 2011] [11:14:26] &lt;yrashk&gt; just in case <a class="reference external" href="https://gist.github.com/dfc2e7eea5c89673ea74">https://gist.github.com/dfc2e7eea5c89673ea74</a></div>
<div class="line">[Friday 18 February 2011] [11:14:27] &lt;yrashk&gt; :)</div>
<div class="line">[Friday 18 February 2011] [11:14:42] &lt;sustrik&gt;        erlang, hm</div>
<div class="line">[Friday 18 February 2011] [11:14:45] &lt;sustrik&gt;        :|</div>
<div class="line">[Friday 18 February 2011] [11:14:48] &lt;yrashk&gt; crash happens both on osx and linux</div>
<div class="line">[Friday 18 February 2011] [11:15:04] &lt;yrashk&gt; I don&#8217;t think it has <em>anything</em> to do with erlang per se</div>
<div class="line">[Friday 18 February 2011] [11:15:59] &lt;yrashk&gt; this code is in a separate thread that Erlang has even a litle to no idea about</div>
<div class="line">[Friday 18 February 2011] [11:16:11] &lt;yrashk&gt; s/a little/little/</div>
<div class="line">[Friday 18 February 2011] [11:19:24] &lt;sustrik&gt;        yrashk: any chance to reproduce the problem in C?</div>
<div class="line">[Friday 18 February 2011] [11:20:38] &lt;yrashk&gt; may be</div>
<div class="line">[Friday 18 February 2011] [11:20:43] &lt;yrashk&gt; but I have no idea how</div>
<div class="line">[Friday 18 February 2011] [11:22:24] &lt;yrashk&gt; (yet)</div>
<div class="line">[Friday 18 February 2011] [11:22:33] &lt;sustrik&gt;        what&#8217;s the OS btw?</div>
<div class="line">[Friday 18 February 2011] [11:25:32] &lt;yrashk&gt; both osx and linux</div>
<div class="line">[Friday 18 February 2011] [11:25:35] &lt;yrashk&gt; very similar crash</div>
<div class="line">[Friday 18 February 2011] [11:38:05] &lt;yrashk&gt; are there any circumstances under which context gets terminated implicitly, sustrik?</div>
<div class="line">[Friday 18 February 2011] [11:38:27] &lt;sustrik&gt;        yrashk: no</div>
<div class="line">[Friday 18 February 2011] [11:38:37] &lt;sustrik&gt;        you have to terminate by calling zmq_term()</div>
<div class="line">[Friday 18 February 2011] [11:38:59] &lt;sustrik&gt;        it looks like a bug in 0mq anyway</div>
<div class="line">[Friday 18 February 2011] [11:39:17] &lt;sustrik&gt;        so the goal now is to make a reproducible test case</div>
<div class="line">[Friday 18 February 2011] [11:39:25] &lt;sustrik&gt;        and to fix it</div>
<div class="line">[Friday 18 February 2011] [11:39:39] &lt;yrashk&gt; do you think it is a 0mq bug?</div>
<div class="line">[Friday 18 February 2011] [11:39:46] &lt;yrashk&gt; huh</div>
<div class="line">[Friday 18 February 2011] [11:39:59] &lt;yrashk&gt; I was getting segfaults in recvfrom() before</div>
<div class="line">[Friday 18 February 2011] [11:40:21] &lt;yrashk&gt; last time it was due to an accidental rewrite over context</div>
<div class="line">[Friday 18 February 2011] [11:40:25] &lt;sustrik&gt;        it&#8217;s kind of strange</div>
<div class="line">[Friday 18 February 2011] [11:40:43] &lt;sustrik&gt;        yes, it looks like memory overwrite</div>
<div class="line">[Friday 18 February 2011] [11:40:56] &lt;sustrik&gt;        wither by 0mq or ezmq or erlang itself</div>
<div class="line">[Friday 18 February 2011] [11:41:07] &lt;sustrik&gt;        that&#8217;s why C use case would help</div>
<div class="line">[Friday 18 February 2011] [11:41:28] &lt;sustrik&gt;        that would make it clear that the problem is in 0mq</div>
<div class="line">[Friday 18 February 2011] [11:42:05] &lt;yrashk&gt; yeah I know</div>
<div class="line">[Friday 18 February 2011] [11:42:14] &lt;yrashk&gt; it&#8217;s barely reproducable here on my laptop</div>
<div class="line">[Friday 18 February 2011] [11:42:27] &lt;sustrik&gt;        what&#8217;s the use case?</div>
<div class="line">[Friday 18 February 2011] [11:42:28] &lt;yrashk&gt; much more frequent on aother guy&#8217;s linux box</div>
<div class="line">[Friday 18 February 2011] [11:42:54] &lt;yrashk&gt; second thread recving on pull socket waiting for a command to recv another socket</div>
<div class="line">[Friday 18 February 2011] [11:44:30] &lt;yrashk&gt; sustrik: does context change over time or is it immutable?</div>
<div class="line">[Friday 18 February 2011] [11:46:06] &lt;sustrik&gt;        you mean the internals of the context?</div>
<div class="line">[Friday 18 February 2011] [11:46:12] &lt;yrashk&gt; ya</div>
<div class="line">[Friday 18 February 2011] [11:46:18] &lt;sustrik&gt;        yes, there&#8217;s a lis of inproc endpoints for example</div>
<div class="line">[Friday 18 February 2011] [11:46:23] &lt;sustrik&gt;        a table of open sockets</div>
<div class="line">[Friday 18 February 2011] [11:46:27] &lt;sustrik&gt;        and similar</div>
<div class="line">[Friday 18 February 2011] [11:46:29] &lt;yrashk&gt; that might be the case</div>
<div class="line">[Friday 18 February 2011] [11:46:39] &lt;yrashk&gt; does any zmq operation might change the context?</div>
<div class="line">[Friday 18 February 2011] [11:47:09] &lt;sustrik&gt;        creating a socket</div>
<div class="line">[Friday 18 February 2011] [11:47:13] &lt;sustrik&gt;        closing a socket</div>
<div class="line">[Friday 18 February 2011] [11:47:18] &lt;sustrik&gt;        binding to inproc endpoint</div>
<div class="line">[Friday 18 February 2011] [11:48:02] &lt;yrashk&gt; that&#8217;s it?</div>
<div class="line">[Friday 18 February 2011] [11:48:46] &lt;yrashk&gt; we do all three</div>
<div class="line">[Friday 18 February 2011] [11:48:50] &lt;yrashk&gt; ;)</div>
<div class="line">[Friday 18 February 2011] [11:48:55] &lt;yrashk&gt; and definitely bind to inproc</div>
<div class="line">[Friday 18 February 2011] [11:49:00] &lt;yrashk&gt; in that context</div>
<div class="line">[Friday 18 February 2011] [11:49:07] &lt;yrashk&gt; in fact it is only used for inproc</div>
<div class="line">[Friday 18 February 2011] [11:50:03] &lt;sustrik&gt;        yes, but what&#8217;s the deal?</div>
<div class="line">[Friday 18 February 2011] [11:50:15] &lt;sustrik&gt;        why should changing the context be a problem?</div>
<div class="line">[Friday 18 February 2011] [11:50:55] &lt;yrashk&gt; &#8220;As soon as you write towards a shared state either through static variables or enif_priv_data you need to supply your own explicit synchronization. &#8220;</div>
<div class="line">[Friday 18 February 2011] [11:51:01] &lt;yrashk&gt; this is from NIF documentation</div>
<div class="line">[Friday 18 February 2011] [11:51:16] &lt;yrashk&gt; that context that we use there is a static variable</div>
<div class="line">[Friday 18 February 2011] [11:52:33] &lt;sustrik&gt;        but it&#8217;s only a pointer to context, right?</div>
<div class="line">[Friday 18 February 2011] [11:52:36] &lt;sustrik&gt;        which never changes</div>
<div class="line">[Friday 18 February 2011] [11:52:39] &lt;yrashk&gt; yup</div>
<div class="line">[Friday 18 February 2011] [11:52:46] &lt;sustrik&gt;        the context itself is threadsafe</div>
<div class="line">[Friday 18 February 2011] [11:52:59] &lt;sustrik&gt;        so it should be ok imo</div>
<div class="line">[Friday 18 February 2011] [11:53:01] &lt;yrashk&gt; we&#8217;re just trying to find any possible explanation for the crash :)</div>
<div class="line">[Friday 18 February 2011] [11:55:13] &lt;yrashk&gt; ok, bed time</div>
<div class="line">[Friday 18 February 2011] [11:55:22] &lt;yrashk&gt; I am exhausted and need to get up in 3 hours :]</div>
<div class="line">[Friday 18 February 2011] [11:57:00] &lt;sustrik&gt;        good god</div>
<div class="line">[Friday 18 February 2011] [11:57:28] &lt;sustrik&gt;        see you later then</div>
<div class="line">[Friday 18 February 2011] [11:58:38] &lt;CIA-21&gt; zeromq2: 03Martin Sustrik 07master * r12486fe 10/ (src/pgm_socket.hpp src/zmq.cpp):</div>
<div class="line">[Friday 18 February 2011] [11:58:38] &lt;CIA-21&gt; zeromq2: Fix MSVC and SunStudio builds with OpenPGM</div>
<div class="line">[Friday 18 February 2011] [11:58:38] &lt;CIA-21&gt; zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/hxuwyD">http://bit.ly/hxuwyD</a></div>
<div class="line">[Friday 18 February 2011] [12:36:45] &lt;lt_schmidt_jr&gt;  sustrik: for inproc sub, are durable sockets trully durable?</div>
<div class="line">[Friday 18 February 2011] [12:37:03] &lt;sustrik&gt;        what&#8217;s durable?</div>
<div class="line">[Friday 18 February 2011] [12:38:00] &lt;lt_schmidt_jr&gt;  <a class="reference external" href="http://zguide.zeromq.org/chapter:all#toc37">http://zguide.zeromq.org/chapter:all#toc37</a></div>
<div class="line">[Friday 18 February 2011] [12:38:18] &lt;lt_schmidt_jr&gt;  sockets with explicit identity</div>
<div class="line">[Friday 18 February 2011] [12:48:28] &lt;sustrik&gt;        and what&#8217;s &#8220;trully durable&#8221;? :)</div>
<div class="line">[Friday 18 February 2011] [12:50:06] &lt;lt_schmidt_jr&gt;  sustrik: I mean if the connection is closed I would not loose messages given that there are no network buffers</div>
<div class="line">[Friday 18 February 2011] [12:51:55] &lt;lt_schmidt_jr&gt;  sustrik: I wonder if with inproc the client sub buffer gets filled</div>
<div class="line">[Friday 18 February 2011] [12:52:40] &lt;sustrik&gt;        when you close the SUB side</div>
<div class="line">[Friday 18 February 2011] [12:52:47] &lt;sustrik&gt;        the buffer on PUB side is filled</div>
<div class="line">[Friday 18 February 2011] [12:53:11] &lt;sustrik&gt;        (SUB buffer doesn&#8217;t exist at the moment)</div>
<div class="line">[Friday 18 February 2011] [12:53:37] &lt;lt_schmidt_jr&gt;  ah, so this may actually work for me</div>
<div class="line">[Friday 18 February 2011] [12:54:11] &lt;sustrik&gt;        i don&#8217;t know how well inproc works with identities</div>
<div class="line">[Friday 18 February 2011] [12:54:21] &lt;sustrik&gt;        you have to test it yourself, i would say</div>
<div class="line">[Friday 18 February 2011] [12:54:24] &lt;lt_schmidt_jr&gt;  ah</div>
<div class="line">[Friday 18 February 2011] [12:54:46] &lt;sustrik&gt;        the problem with inproc is that there are still pieces missing</div>
<div class="line">[Friday 18 February 2011] [12:54:59] &lt;sustrik&gt;        like reconnect, for example</div>
<div class="line">[Friday 18 February 2011] [12:55:03] &lt;sustrik&gt;        not sure about identitie</div>
<div class="line">[Friday 18 February 2011] [12:55:04] &lt;lt_schmidt_jr&gt;  did not realize that</div>
<div class="line">[Friday 18 February 2011] [12:56:42] &lt;lt_schmidt_jr&gt;  the reason I am asking - is that I have an inproc forwarder connected to other servers symmetrically</div>
<div class="line">[Friday 18 February 2011] [12:57:33] &lt;lt_schmidt_jr&gt;  and I have sub sockets that I keep on behalf of web clients , and if the web clietnts disconnect, I keep the sub socket for a bit in case they reconnect</div>
<div class="line">[Friday 18 February 2011] [12:58:08] &lt;lt_schmidt_jr&gt;  I am thinking to use identity to have zmq do that for me</div>
<div class="line">[Friday 18 February 2011] [12:58:59] &lt;lt_schmidt_jr&gt;  but sounds like that may not be the best approach currently</div>
<div class="line">[Friday 18 February 2011] [13:55:37] &lt;<a href="#id889"><span class="problematic" id="id890">bhuga_</span></a>&gt; i&#8217;m getting an assertion failure while using zeromq from the ruby FFI: Assertion failed: inpipes [current_in].active (xrep.cpp:229). Is that indicative of something I&#8217;m doing wrong, or a bug?</div>
<div class="line">[Friday 18 February 2011] [15:05:13] &lt;cremes&gt; <a href="#id891"><span class="problematic" id="id892">bhuga_</span></a>: can you pastie your code that&#8217;s causing that? it may be a bug in 0mq</div>
<div class="line">[Friday 18 February 2011] [15:29:19] &lt;<a href="#id893"><span class="problematic" id="id894">bhuga_</span></a>&gt; it is kind of convoluted :/, pretty far from a minimal test case. it is also not deterministic, happening for sure, but not always after the same number of messages have passed. i have an strace running up to it, if that helps?</div>
<div class="line">[Friday 18 February 2011] [16:02:41] &lt;cremes&gt; <a href="#id895"><span class="problematic" id="id896">bhuga_</span></a>: is your code similar to the setup described in this ticket?</div>
<div class="line">[Friday 18 February 2011] [16:02:42] &lt;cremes&gt; <a class="reference external" href="https://github.com/zeromq/zeromq2/issuesearch?state=open&amp;q=xrep#issue/164">https://github.com/zeromq/zeromq2/issuesearch?state=open&amp;q=xrep#issue/164</a></div>
<div class="line">[Friday 18 February 2011] [16:02:57] &lt;cremes&gt; that raises the same assertion as your code</div>
<div class="line">[Friday 18 February 2011] [16:03:10] &lt;cremes&gt; i am wondering if the configuration of sockets &amp; threads is similar in your case</div>
<div class="line">[Friday 18 February 2011] [16:03:27] &lt;<a href="#id897"><span class="problematic" id="id898">bhuga_</span></a>&gt; mine is simpler</div>
<div class="line">[Friday 18 February 2011] [16:03:44] &lt;<a href="#id899"><span class="problematic" id="id900">bhuga_</span></a>&gt; but still difficult to hand over for reproduction</div>
<div class="line">[Friday 18 February 2011] [16:04:05] &lt;cremes&gt; how many sockets are you using?</div>
<div class="line">[Friday 18 February 2011] [16:04:19] &lt;cremes&gt; i.e. how many xrep, how many xreq?</div>
<div class="line">[Friday 18 February 2011] [16:04:19] &lt;<a href="#id901"><span class="problematic" id="id902">bhuga_</span></a>&gt; the ruby end is sitting on an xrep socket, one thread (ruby, after all) and the other end is common lisp via ffi on a req-rep</div>
<div class="line">[Friday 18 February 2011] [16:04:33] &lt;cremes&gt; ok</div>
<div class="line">[Friday 18 February 2011] [16:04:42] &lt;cremes&gt; are they both using the same build of libzmq?</div>
<div class="line">[Friday 18 February 2011] [16:04:47] &lt;<a href="#id903"><span class="problematic" id="id904">bhuga_</span></a>&gt; yes, 2.1.0</div>
<div class="line">[Friday 18 February 2011] [16:05:02] &lt;cremes&gt; 2.1.0 from the tarball or 2.1.0 from github master?</div>
<div class="line">[Friday 18 February 2011] [16:05:23] &lt;<a href="#id905"><span class="problematic" id="id906">bhuga_</span></a>&gt; yowza, good question, i didnt write that down when i put it into puppet last month.  probably the tarball.</div>
<div class="line">[Friday 18 February 2011] [16:05:34] &lt;cremes&gt; ok</div>
<div class="line">[Friday 18 February 2011] [16:05:49] &lt;cremes&gt; i would recommend trying master and seeing if the problem persists</div>
<div class="line">[Friday 18 February 2011] [16:06:04] &lt;<a href="#id907"><span class="problematic" id="id908">bhuga_</span></a>&gt; okay, i can do that. will be back in 15 or 20</div>
<div class="line">[Friday 18 February 2011] [16:06:06] &lt;cremes&gt; there have been many bug fixes since the 2.1.0 tarball was cut 2 or 3 months ago</div>
<div class="line">[Friday 18 February 2011] [16:06:10] &lt;cremes&gt; k</div>
<div class="line">[Friday 18 February 2011] [16:07:37] &lt;<a href="#id909"><span class="problematic" id="id910">bhuga_</span></a>&gt; (about to try it, but my buddy on the lisp end, debugging something else, just realized that putting 1 second between calls fixes it)</div>
<div class="line">[Friday 18 February 2011] [16:10:21] &lt;cremes&gt; <a href="#id911"><span class="problematic" id="id912">bhuga_</span></a>: yuck, that&#8217;s a sucky fix :)</div>
<div class="line">[Friday 18 February 2011] [16:10:36] &lt;<a href="#id913"><span class="problematic" id="id914">bhuga_</span></a>&gt; yeah, it kinda defeats the point of a sweet high-performance message queue :)</div>
<div class="line">[Friday 18 February 2011] [16:10:48] &lt;cremes&gt; definitely</div>
<div class="line">[Friday 18 February 2011] [16:11:33] &lt;cremes&gt; i have dozens of xrep/xreq sockets doing very high volume communications (from ruby) and i haven&#8217;t hit that particular assertin</div>
<div class="line">[Friday 18 February 2011] [16:11:51] &lt;cremes&gt; (though i was tearing my hair out about another one that just got fixed a few days back)</div>
<div class="line">[Friday 18 February 2011] [16:12:09] &lt;<a href="#id915"><span class="problematic" id="id916">bhuga_</span></a>&gt; this one has our hair pulled, i have to admit</div>
<div class="line">[Friday 18 February 2011] [16:12:13] &lt;cremes&gt; heh</div>
<div class="line">[Friday 18 February 2011] [16:12:15] &lt;<a href="#id917"><span class="problematic" id="id918">bhuga_</span></a>&gt; its pretty much brought us to a standstill</div>
<div class="line">[Friday 18 February 2011] [16:12:25] &lt;cremes&gt; let me know how it goes after the update</div>
<div class="line">[Friday 18 February 2011] [16:12:42] &lt;<a href="#id919"><span class="problematic" id="id920">bhuga_</span></a>&gt; figuring out how to make autoconf work on head still :)</div>
<div class="line">[Friday 18 February 2011] [16:13:17] &lt;cremes&gt; what os are you on?</div>
<div class="line">[Friday 18 February 2011] [16:13:23] &lt;<a href="#id921"><span class="problematic" id="id922">bhuga_</span></a>&gt; ubuntu 10.10</div>
<div class="line">[Friday 18 February 2011] [16:13:26] &lt;cremes&gt; ko</div>
<div class="line">[Friday 18 February 2011] [16:13:29] &lt;cremes&gt; er, ok</div>
<div class="line">[Friday 18 February 2011] [16:15:05] &lt;<a href="#id923"><span class="problematic" id="id924">bhuga_</span></a>&gt; autoreconf &#8211;install and autoconf are neither doing the trick :/</div>
<div class="line">[Friday 18 February 2011] [16:16:09] &lt;<a href="#id925"><span class="problematic" id="id926">bhuga_</span></a>&gt; (then i found autogen.sh, not mentioned in the INSTALL :) )</div>
<div class="line">[Friday 18 February 2011] [16:25:28] &lt;<a href="#id927"><span class="problematic" id="id928">bhuga_</span></a>&gt; (initial results with the new version are quite promising. thanks!)</div>
<div class="line">[Friday 18 February 2011] [16:33:14] &lt;cremes&gt; <a href="#id929"><span class="problematic" id="id930">bhuga_</span></a>: good to hear</div>
<div class="line">[Friday 18 February 2011] [16:33:48] &lt;<a href="#id931"><span class="problematic" id="id932">bhuga_</span></a>&gt; we are still getting it but its more deterministic now</div>
<div class="line">[Friday 18 February 2011] [16:34:13] &lt;<a href="#id933"><span class="problematic" id="id934">bhuga_</span></a>&gt; makes me think we&#8217;re using it wrong now as opposed to weird bugs</div>
<div class="line">[Friday 18 February 2011] [16:34:38] &lt;cremes&gt; interesting</div>
<div class="line">[Friday 18 February 2011] [16:34:55] &lt;cremes&gt; a reproducible case would be a great addition to that ticket i referenced earlier</div>
<div class="line">[Friday 18 February 2011] [16:35:58] &lt;<a href="#id935"><span class="problematic" id="id936">bhuga_</span></a>&gt; well you know how testing these things are</div>
<div class="line">[Friday 18 February 2011] [16:36:05] &lt;<a href="#id937"><span class="problematic" id="id938">bhuga_</span></a>&gt; by definition they&#8217;re made to work with different languages, daemons, etc</div>
<div class="line">[Friday 18 February 2011] [16:36:20] &lt;<a href="#id939"><span class="problematic" id="id940">bhuga_</span></a>&gt; if we can make a minimal case we will</div>
<div class="line">[Friday 18 February 2011] [16:36:25] &lt;cremes&gt; cool</div>
<div class="line">[Friday 18 February 2011] [16:36:26] &lt;<a href="#id941"><span class="problematic" id="id942">bhuga_</span></a>&gt; (though i suspect if i could i could just fix it)</div>
<div class="line">[Friday 18 February 2011] [16:36:34] &lt;cremes&gt; :)</div>
<div class="line">[Friday 18 February 2011] [16:44:18] &lt;<a href="#id943"><span class="problematic" id="id944">bhuga_</span></a>&gt; more testing reveals some more non-deterministic failures :( but i guess if nobody&#8217;s heard of it before we&#8217;ll have to figure it out</div>
<div class="line">[Friday 18 February 2011] [16:45:18] &lt;cremes&gt; <a href="#id945"><span class="problematic" id="id946">bhuga_</span></a>: do you have any QUEUE devices in between your clients &amp; servers?</div>
<div class="line">[Friday 18 February 2011] [16:45:40] &lt;cremes&gt; if i understand your setup a bit, perhaps i can suggest a place to start looking</div>
<div class="line">[Friday 18 February 2011] [16:46:22] &lt;<a href="#id947"><span class="problematic" id="id948">bhuga_</span></a>&gt; its really simple</div>
<div class="line">[Friday 18 February 2011] [16:46:36] &lt;<a href="#id949"><span class="problematic" id="id950">bhuga_</span></a>&gt; the two are on the same machine, talking over an IPC (it might actually be ITC, i&#8217;d need to check) socket</div>
<div class="line">[Friday 18 February 2011] [16:46:50] &lt;<a href="#id951"><span class="problematic" id="id952">bhuga_</span></a>&gt; REQ-REP from lisp talking to XREP on ruby</div>
<div class="line">[Friday 18 February 2011] [16:47:01] &lt;<a href="#id953"><span class="problematic" id="id954">bhuga_</span></a>&gt; no other devices, no shenanigans</div>
<div class="line">[Friday 18 February 2011] [16:47:06] &lt;cremes&gt; ok</div>
<div class="line">[Friday 18 February 2011] [16:47:26] &lt;<a href="#id955"><span class="problematic" id="id956">bhuga_</span></a>&gt; the general feel of the upgrade is that it happens less, but it still happens</div>
<div class="line">[Friday 18 February 2011] [16:47:40] &lt;cremes&gt; what do you mean by REQ-REP from lisp? is a req socket talking to <em>both</em> the rep lisp and xrep ruby sockets?</div>
<div class="line">[Friday 18 February 2011] [16:47:59] &lt;<a href="#id957"><span class="problematic" id="id958">bhuga_</span></a>&gt; it&#8217;s doing a request-reply pattern, sending a request, blocking waiting for a reply</div>
<div class="line">[Friday 18 February 2011] [16:48:25] &lt;<a href="#id959"><span class="problematic" id="id960">bhuga_</span></a>&gt; the ruby bit is data-driven, receiving that message and sending a response</div>
<div class="line">[Friday 18 February 2011] [16:48:39] &lt;cremes&gt; ok, so you have single req socket in the lisp program talking to a single xrep socket in ruby</div>
<div class="line">[Friday 18 February 2011] [16:49:10] &lt;cremes&gt; and only the ruby side crashes?</div>
<div class="line">[Friday 18 February 2011] [16:49:45] &lt;<a href="#id961"><span class="problematic" id="id962">bhuga_</span></a>&gt; only the ruby side crashes, correct</div>
<div class="line">[Friday 18 February 2011] [16:51:02] &lt;cremes&gt; does it crash on recv or on send? and are these recv/sends blocking or non-blocking?</div>
<div class="line">[Friday 18 February 2011] [16:52:00] &lt;<a href="#id963"><span class="problematic" id="id964">bhuga_</span></a>&gt; i dont actually know. it&#8217;s hard to debug the assert. i have an strace of it</div>
<div class="line">[Friday 18 February 2011] [16:52:07] &lt;<a href="#id965"><span class="problematic" id="id966">bhuga_</span></a>&gt; and ruby&#8217;s not doing any syscalls on its own, i can say</div>
<div class="line">[Friday 18 February 2011] [16:52:13] &lt;cremes&gt; ok</div>
<div class="line">[Friday 18 February 2011] [16:52:41] &lt;<a href="#id967"><span class="problematic" id="id968">bhuga_</span></a>&gt; (apologies for spam:)</div>
<div class="line">[Friday 18 February 2011] [16:52:42] &lt;<a href="#id969"><span class="problematic" id="id970">bhuga_</span></a>&gt; send(5, &#8220;220#.rn0003773773773771000fQ200r0302236f&#8221;, 24, 0) = 24</div>
<div class="line">[Friday 18 February 2011] [16:52:42] &lt;<a href="#id971"><span class="problematic" id="id972">bhuga_</span></a>&gt; recv(15, &#8220;230P200r2000h201Er24000t201Er364357f267&#8221;, 24, MSG_DONTWAIT) = 24</div>
<div class="line">[Friday 18 February 2011] [16:52:42] &lt;<a href="#id973"><span class="problematic" id="id974">bhuga_</span></a>&gt; recv(15, &#8220;230P200r200030#6r33026425110t201Er364357f267&#8221;, 24, MSG_DONTWAIT) = 24</div>
<div class="line">[Friday 18 February 2011] [16:52:43] &lt;<a href="#id975"><span class="problematic" id="id976">bhuga_</span></a>&gt; recv(15, &#8220;230P200rt000h201Er3642772026730#6r3000&#8221;, 24, MSG_DONTWAIT) = 24</div>
<div class="line">[Friday 18 February 2011] [16:52:43] &lt;<a href="#id977"><span class="problematic" id="id978">bhuga_</span></a>&gt; send(5, &#8220;h201Ern0003773773773770000fQ200r0302236f&#8221;, 24, 0) = 24</div>
<div class="line">[Friday 18 February 2011] [16:52:43] &lt;<a href="#id979"><span class="problematic" id="id980">bhuga_</span></a>&gt; recv(15, &#8220;230P200r4000p323or21034-r2100010O266v&#8221;, 24, MSG_DONTWAIT) = 24</div>
<div class="line">[Friday 18 February 2011] [16:52:44] &lt;<a href="#id981"><span class="problematic" id="id982">bhuga_</span></a>&gt; recv(15, &#8220;250335Sr7000300223M267364177M267300223M26730#6r&#8221;, 24, MSG_DONTWAIT) = 24</div>
<div class="line">[Friday 18 February 2011] [16:52:44] &lt;<a href="#id983"><span class="problematic" id="id984">bhuga_</span></a>&gt; send(5, &#8220;X1_r10000300223M267364177M267300223M267230P200r&#8221;, 24, 0) = 24</div>
<div class="line">[Friday 18 February 2011] [16:52:44] &lt;<a href="#id985"><span class="problematic" id="id986">bhuga_</span></a>&gt; recv(15, &#8220;240345&lt;r5000300223M267364177M267300223M26730#6r&#8221;, 24, MSG_DONTWAIT) = 24</div>
<div class="line">[Friday 18 February 2011] [16:52:44] &lt;<a href="#id987"><span class="problematic" id="id988">bhuga_</span></a>&gt; recv(15, &#8220;230P200rv000324201Er0000n00036427720267&#8221;, 24, MSG_DONTWAIT) = 24</div>
<div class="line">[Friday 18 February 2011] [16:52:45] &lt;<a href="#id989"><span class="problematic" id="id990">bhuga_</span></a>&gt; recv(15, 0xbfe7b514, 24, MSG_DONTWAIT)  = -1 EAGAIN (Resource temporarily unavailable)</div>
<div class="line">[Friday 18 February 2011] [16:52:45] &lt;cremes&gt; can you puts a debug statement around the ruby send/recv calls to see which one is active during the crash?</div>
<div class="line">[Friday 18 February 2011] [16:52:45] &lt;<a href="#id991"><span class="problematic" id="id992">bhuga_</span></a>&gt; send(5, &#8220;p&lt;350f7000300223M267364177M267300223M26736427720267&#8221;, 24, 0) = 24</div>
<div class="line">[Friday 18 February 2011] [16:52:45] &lt;<a href="#id993"><span class="problematic" id="id994">bhuga_</span></a>&gt; recv(15, &#8220;240345&lt;r10000h201Er0000n00036427720267&#8221;, 24, MSG_DONTWAIT) = 24</div>
<div class="line">[Friday 18 February 2011] [16:53:13] &lt;cremes&gt; <a href="#id995"><span class="problematic" id="id996">bhuga_</span></a>: use pastie.org or gist.github.com for anything over 2 lines, pls; that&#8217;s really hard to read in the channel</div>
<div class="line">[Friday 18 February 2011] [16:53:17] &lt;<a href="#id997"><span class="problematic" id="id998">bhuga_</span></a>&gt; yeah <a class="reference external" href="http://pastie.org/1580392">http://pastie.org/1580392</a></div>
<div class="line">[Friday 18 February 2011] [16:53:23] &lt;<a href="#id999"><span class="problematic" id="id1000">bhuga_</span></a>&gt; i got throttled anyway</div>
<div class="line">[Friday 18 February 2011] [16:53:53] &lt;cremes&gt; can you puts a debug statement around the ruby send/recv calls to see which one is active during the crash?</div>
<div class="line">[Friday 18 February 2011] [16:54:25] &lt;<a href="#id1001"><span class="problematic" id="id1002">bhuga_</span></a>&gt; based on the assertion, it seems to be receiving</div>
<div class="line">[Friday 18 February 2011] [16:54:30] &lt;<a href="#id1003"><span class="problematic" id="id1004">bhuga_</span></a>&gt; it&#8217;s asserting that it shouldn&#8217;t be doing what it&#8217;s about to do unless the message has more parts</div>
<div class="line">[Friday 18 February 2011] [16:54:55] &lt;cremes&gt; ok</div>
<div class="line">[Friday 18 February 2011] [16:55:14] &lt;cremes&gt; how are you forming the messages on the lisp end for transmission? are they simple strings?</div>
<div class="line">[Friday 18 February 2011] [16:55:27] &lt;cremes&gt; encoded as json? protobufs, etc?</div>
<div class="line">[Friday 18 February 2011] [16:55:33] &lt;<a href="#id1005"><span class="problematic" id="id1006">bhuga_</span></a>&gt; that i know less about :/</div>
<div class="line">[Friday 18 February 2011] [16:55:36] &lt;cremes&gt; hell, s-expressions?</div>
<div class="line">[Friday 18 February 2011] [16:55:46] &lt;cremes&gt; ok</div>
<div class="line">[Friday 18 February 2011] [16:55:59] &lt;<a href="#id1007"><span class="problematic" id="id1008">bhuga_</span></a>&gt; im finding out</div>
<div class="line">[Friday 18 February 2011] [16:56:29] &lt;<a href="#id1009"><span class="problematic" id="id1010">bhuga_</span></a>&gt; utf-8 encoded, null-terminated strings</div>
<div class="line">[Friday 18 February 2011] [16:56:41] &lt;cremes&gt; ok</div>
<div class="line">[Friday 18 February 2011] [16:56:42] &lt;<a href="#id1011"><span class="problematic" id="id1012">bhuga_</span></a>&gt; the content of them does not appear to matter</div>
<div class="line">[Friday 18 February 2011] [16:57:18] &lt;<a href="#id1013"><span class="problematic" id="id1014">bhuga_</span></a>&gt; in that a given message (which we send from the lisp end, and reproduce) can be sent any number of times</div>
<div class="line">[Friday 18 February 2011] [16:57:46] &lt;<a href="#id1015"><span class="problematic" id="id1016">bhuga_</span></a>&gt; until the random crash</div>
<div class="line">[Friday 18 February 2011] [16:58:08] &lt;<a href="#id1017"><span class="problematic" id="id1018">bhuga_</span></a>&gt; (after playing with it, it seems a 50-100ms delay is sufficient to prevent the issue from appearing in simple tests)</div>
<div class="line">[Friday 18 February 2011] [16:58:08] &lt;cremes&gt; can you try a req socket on the ruby end instead of xrep? it doesn&#8217;t sound like you need the flexibility of an xrep anyway</div>
<div class="line">[Friday 18 February 2011] [16:58:48] &lt;<a href="#id1019"><span class="problematic" id="id1020">bhuga_</span></a>&gt; hrm. i can try it, i think.</div>
<div class="line">[Friday 18 February 2011] [16:58:54] &lt;<a href="#id1021"><span class="problematic" id="id1022">bhuga_</span></a>&gt; it will take me a minute</div>
<div class="line">[Friday 18 February 2011] [16:58:58] &lt;cremes&gt; ok</div>
<div class="line">[Friday 18 February 2011] [16:59:19] &lt;cremes&gt; with a rep socket you don&#8217;t have to worry about creating the null message delimiter and such</div>
<div class="line">[Friday 18 February 2011] [16:59:28] &lt;<a href="#id1023"><span class="problematic" id="id1024">bhuga_</span></a>&gt; (though the xrep is kind of what you need on ruby&#8211;we&#8217;re currently only doing one task at a time but that&#8217;s not the goal, and blocking is the devil)</div>
<div class="line">[Friday 18 February 2011] [16:59:52] &lt;cremes&gt; yeah, but how does xrep help in that case? it&#8217;s blocking too</div>
<div class="line">[Friday 18 February 2011] [17:00:16] &lt;cremes&gt; you can use both rep and xrep with ZMQ::NOBLOCK; it isn&#8217;t limited to just xrep</div>
<div class="line">[Friday 18 February 2011] [17:00:35] &lt;<a href="#id1025"><span class="problematic" id="id1026">bhuga_</span></a>&gt; i guess i need to keep reading (i have taken this bug over from someone else)</div>
<div class="line">[Friday 18 February 2011] [17:00:58] &lt;cremes&gt; can you pastie the ruby method that does the recv and the one that does the send?</div>
<div class="line">[Friday 18 February 2011] [17:01:41] &lt;cremes&gt; i can probably help with the socket switch out... i wrote the ffi-rzmq gem so i&#8217;m pretty familiar with this stuff</div>
<div class="line">[Friday 18 February 2011] [17:02:53] &lt;<a href="#id1027"><span class="problematic" id="id1028">bhuga_</span></a>&gt; okay, i can do that</div>
<div class="line">[Friday 18 February 2011] [17:03:51] &lt;<a href="#id1029"><span class="problematic" id="id1030">bhuga_</span></a>&gt; <a class="reference external" href="http://pastie.org/1580429">http://pastie.org/1580429</a></div>
<div class="line">[Friday 18 February 2011] [17:04:16] &lt;<a href="#id1031"><span class="problematic" id="id1032">bhuga_</span></a>&gt; there is a lot of silly metaprogramming going on</div>
<div class="line">[Friday 18 February 2011] [17:04:28] &lt;<a href="#id1033"><span class="problematic" id="id1034">bhuga_</span></a>&gt; but the log_req in that method never happens</div>
<div class="line">[Friday 18 February 2011] [17:04:56] &lt;<a href="#id1035"><span class="problematic" id="id1036">bhuga_</span></a>&gt; i can toss in a debug to make sure that it&#8217;s getting to that socket.recv_string, which i suspect is the line</div>
<div class="line">[Friday 18 February 2011] [17:05:10] &lt;cremes&gt; right</div>
<div class="line">[Friday 18 February 2011] [17:05:19] &lt;cremes&gt; do you set any options on this socket?</div>
<div class="line">[Friday 18 February 2011] [17:05:31] &lt;cremes&gt; e.g. socket.setsockopt(option, value)</div>
<div class="line">[Friday 18 February 2011] [17:05:56] &lt;<a href="#id1037"><span class="problematic" id="id1038">bhuga_</span></a>&gt; the metaprogramming thing again. i&#8217;ll try and output the current options in my forthcoming debug addition</div>
<div class="line">[Friday 18 February 2011] [17:06:38] &lt;cremes&gt; ok</div>
<div class="line">[Friday 18 February 2011] [17:06:51] &lt;cremes&gt; btw, nothing you are doing there requires an xrep socket</div>
<div class="line">[Friday 18 February 2011] [17:06:59] &lt;<a href="#id1039"><span class="problematic" id="id1040">bhuga_</span></a>&gt; i believe you :)</div>
<div class="line">[Friday 18 February 2011] [17:07:04] &lt;cremes&gt; but you do make things more complicated for yourself when you have to send the reply</div>
<div class="line">[Friday 18 February 2011] [17:07:05] &lt;<a href="#id1041"><span class="problematic" id="id1042">bhuga_</span></a>&gt; and i will change it if need be</div>
<div class="line">[Friday 18 February 2011] [17:07:33] &lt;<a href="#id1043"><span class="problematic" id="id1044">bhuga_</span></a>&gt; im afraid to change it just now since if we are doing the null-terminator thing that would perhaps no longer be correct?</div>
<div class="line">[Friday 18 February 2011] [17:07:41] &lt;cremes&gt; right</div>
<div class="line">[Friday 18 February 2011] [17:07:58] &lt;cremes&gt; you need to save the &#8220;return envelope&#8221; for the reply</div>
<div class="line">[Friday 18 February 2011] [17:08:17] &lt;cremes&gt; and it is separated from the body of your messages by an empty/null message</div>
<div class="line">[Friday 18 February 2011] [17:08:30] &lt;<a href="#id1045"><span class="problematic" id="id1046">bhuga_</span></a>&gt; is there a nice way to get all of the socket options?</div>
<div class="line">[Friday 18 February 2011] [17:08:40] &lt;cremes&gt; search the code for setsockopt</div>
<div class="line">[Friday 18 February 2011] [17:09:01] &lt;cremes&gt; if you don&#8217;t find it, then you haven&#8217;t set any beyond the defaults</div>
<div class="line">[Friday 18 February 2011] [17:09:34] &lt;<a href="#id1047"><span class="problematic" id="id1048">bhuga_</span></a>&gt;  sockets[shard_id].setsockopt(ZMQ::LINGER, -1)</div>
<div class="line">[Friday 18 February 2011] [17:09:47] &lt;<a href="#id1049"><span class="problematic" id="id1050">bhuga_</span></a>&gt; which i thing fixed a bug we had on exiting</div>
<div class="line">[Friday 18 February 2011] [17:10:08] &lt;cremes&gt; yeah, it prevents the socket from closing until all packets are flushed</div>
<div class="line">[Friday 18 February 2011] [17:10:27] &lt;<a href="#id1051"><span class="problematic" id="id1052">bhuga_</span></a>&gt; sounds about right, i think it was giving all kinds of errors when we tried to exit</div>
<div class="line">[Friday 18 February 2011] [17:10:30] &lt;cremes&gt; just for kicks, can you comment that out and run your test? it crashes before it&#8217;s done anyway, right?</div>
<div class="line">[Friday 18 February 2011] [17:10:36] &lt;<a href="#id1053"><span class="problematic" id="id1054">bhuga_</span></a>&gt; yeah, i can do that</div>
<div class="line">[Friday 18 February 2011] [17:13:37] &lt;<a href="#id1055"><span class="problematic" id="id1056">bhuga_</span></a>&gt; i dont think the linger is on the server</div>
<div class="line">[Friday 18 February 2011] [17:13:47] &lt;<a href="#id1057"><span class="problematic" id="id1058">bhuga_</span></a>&gt; i think this is from a (being replaced by lisp) ruby client</div>
<div class="line">[Friday 18 February 2011] [17:13:57] &lt;<a href="#id1059"><span class="problematic" id="id1060">bhuga_</span></a>&gt; could a server expecting a lingering client cause this behavior?</div>
<div class="line">[Friday 18 February 2011] [17:14:03] &lt;cremes&gt; no</div>
<div class="line">[Friday 18 February 2011] [17:14:56] &lt;cremes&gt; so, i think it is worthwhile for you to figure out how to swap the xrep for a rep socket</div>
<div class="line">[Friday 18 February 2011] [17:15:10] &lt;cremes&gt; xrep is a lower-level 0mq socket so it is trickier to work with</div>
<div class="line">[Friday 18 February 2011] [17:15:38] &lt;cremes&gt; from what i have seen, you don&#8217;t need it; a rep socket and an xrep socket both &#8216;block&#8217; the same way when sending/recving</div>
<div class="line">[Friday 18 February 2011] [17:16:08] &lt;cremes&gt; you only use xrep when you want to break the strict send/recv/send/recv REQ-REP pattern</div>
<div class="line">[Friday 18 February 2011] [17:17:36] &lt;<a href="#id1061"><span class="problematic" id="id1062">bhuga_</span></a>&gt; well, it will need to, of sorts. eventually the &#8216;client&#8217; in this case will send out one request and get results of initially-unknown length back from n different workers</div>
<div class="line">[Friday 18 February 2011] [17:17:47] &lt;<a href="#id1063"><span class="problematic" id="id1064">bhuga_</span></a>&gt; but not <em>yet</em>, necessarily :)</div>
<div class="line">[Friday 18 February 2011] [17:18:12] &lt;cremes&gt; ok</div>
<div class="line">[Friday 18 February 2011] [17:18:28] &lt;<a href="#id1065"><span class="problematic" id="id1066">bhuga_</span></a>&gt; but i&#8217;ll investigate taht further and plug in some debug to make sure i know exactly what line of ruby is causing it</div>
<div class="line">[Friday 18 February 2011] [17:18:29] &lt;cremes&gt; but remember the YAGNI principle :)</div>
<div class="line">[Friday 18 February 2011] [17:18:31] &lt;<a href="#id1067"><span class="problematic" id="id1068">bhuga_</span></a>&gt; then update the issue</div>
<div class="line">[Friday 18 February 2011] [17:18:39] &lt;cremes&gt; cool</div>
<div class="line">[Friday 18 February 2011] [17:18:50] &lt;<a href="#id1069"><span class="problematic" id="id1070">bhuga_</span></a>&gt; if i pin it down</div>
<div class="line">[Friday 18 February 2011] [17:18:54] &lt;<a href="#id1071"><span class="problematic" id="id1072">bhuga_</span></a>&gt; thanks for your time anyway</div>
<div class="line">[Friday 18 February 2011] [17:18:59] &lt;cremes&gt; sure</div>
<div class="line">[Friday 18 February 2011] [17:19:05] &lt;<a href="#id1073"><span class="problematic" id="id1074">bhuga_</span></a>&gt; best gem author ever</div>
<div class="line">[Friday 18 February 2011] [19:20:26] &lt;Kinbote&gt;        would it be possible to use zermomq as a kind of &#8220;router&#8221; for udp traffic, specfically SIP+RTP?</div>
<div class="line">[Friday 18 February 2011] [19:24:45] &lt;sam`&gt;   Kinbote: 0MQ uses its own wire protocol, so it&#8217;s not &#8220;directly&#8221; compatible with software not using 0MQ</div>
<div class="line">[Friday 18 February 2011] [19:25:04] &lt;sam`&gt;   but you could listen on one side with a &#8220;normal&#8221; socket for UDP traffic</div>
<div class="line">[Friday 18 February 2011] [19:25:12] &lt;sam`&gt;   route that through your series of hops using ZMQ</div>
<div class="line">[Friday 18 February 2011] [19:25:25] &lt;sam`&gt;   and de-encapsulate at the end onto a normal socket</div>
<div class="line">[Friday 18 February 2011] [20:04:59] &lt;stodge&gt; Anyone know if there are ubuntu packages for openpgm/zeromq/pyzmq?</div>
<div class="line">[Friday 18 February 2011] [20:05:40] &lt;stodge&gt; Oops - accidentally left the channel. Did my question make it?</div>
<div class="line">[Friday 18 February 2011] [20:06:06] &lt;stodge&gt; Are there Ubuntu packages for openpgm/zeromq/pyzmq?</div>
<div class="line">[Friday 18 February 2011] [20:31:10] &lt;stodge&gt; How do I build pyzmq with openpgm support? I built openpgm, built zeromq &#8211;with-pgm and then built pyzmq. But zmq.EPGM isn&#8217;t available</div>
<div class="line">[Saturday 19 February 2011] [11:09:23] &lt;Steve-o&gt;      sustrik: have a new alternative to types.h, following MSVC&#8217;s CRT definitions</div>
<div class="line">[Saturday 19 February 2011] [12:36:48] &lt;sustrik&gt;      Steve-o: would that fix the 0mq build?</div>
<div class="line">[Saturday 19 February 2011] [12:37:02] &lt;sustrik&gt;      i&#8217;ve undefined bool</div>
<div class="line">[Saturday 19 February 2011] [12:37:10] &lt;sustrik&gt;      which fixed sunstudio build</div>
<div class="line">[Saturday 19 February 2011] [12:37:19] &lt;sustrik&gt;      however, the msvc build is still broken</div>
<div class="line">[Saturday 19 February 2011] [12:37:28] &lt;sustrik&gt;      no idea of what&#8217;s going to</div>
<div class="line">[Saturday 19 February 2011] [12:37:32] &lt;sustrik&gt;      on*</div>
<div class="line">[Saturday 19 February 2011] [12:37:44] &lt;Steve-o&gt;      msvc has never complained here</div>
<div class="line">[Saturday 19 February 2011] [12:38:29] &lt;Steve-o&gt;      haven&#8217;t tested 0mq &amp; sunpro for a long while</div>
<div class="line">[Saturday 19 February 2011] [12:38:43] &lt;Steve-o&gt;      got an output log?</div>
<div class="line">[Saturday 19 February 2011] [12:44:10] &lt;sustrik&gt;      wait a sec</div>
<div class="line">[Saturday 19 February 2011] [12:45:02] &lt;sustrik&gt;      Steve-o: <a class="reference external" href="http://build.zero.mq/job/ZeroMQ2-core-master_MSVC-win7/184/console">http://build.zero.mq/job/ZeroMQ2-core-master_MSVC-win7/184/console</a></div>
<div class="line">[Saturday 19 February 2011] [12:45:24] &lt;sustrik&gt;      that&#8217;s 0mq master</div>
<div class="line">[Saturday 19 February 2011] [12:45:32] &lt;sustrik&gt;      it looks like there&#8217;s still problem with bool</div>
<div class="line">[Saturday 19 February 2011] [12:45:52] &lt;sustrik&gt;      note that the &#8220;missing&#8221; function has bool argument</div>
<div class="line">[Saturday 19 February 2011] [12:46:22] &lt;Steve-o&gt;      I see</div>
<div class="line">[Saturday 19 February 2011] [12:46:40] &lt;sustrik&gt;      it&#8217;s pgm_sender and pgm_receiver</div>
<div class="line">[Saturday 19 February 2011] [12:46:45] &lt;sustrik&gt;      which include pgm_socket</div>
<div class="line">[Saturday 19 February 2011] [12:46:52] &lt;sustrik&gt;      which in turn include pgm.h</div>
<div class="line">[Saturday 19 February 2011] [12:47:35] &lt;Steve-o&gt;      so what changed, how come 2.1.0 builds fine?</div>
<div class="line">[Saturday 19 February 2011] [12:48:41] &lt;sustrik&gt;      so what happened is that i&#8217;ve added a new argument to one internal 0mq function</div>
<div class="line">[Saturday 19 February 2011] [12:48:56] &lt;sustrik&gt;      it was a bool argument</div>
<div class="line">[Saturday 19 February 2011] [12:49:17] &lt;Steve-o&gt;      and conflicts trickled through, ok</div>
<div class="line">[Saturday 19 February 2011] [12:49:22] &lt;sustrik&gt;      right</div>
<div class="line">[Saturday 19 February 2011] [12:49:32] &lt;sustrik&gt;      then i&#8217;ve added something like this:</div>
<div class="line">[Saturday 19 February 2011] [12:49:35] &lt;sustrik&gt;      #include &lt;pgm.h&gt;</div>
<div class="line">[Saturday 19 February 2011] [12:49:42] &lt;sustrik&gt;      #ifdef bool</div>
<div class="line">[Saturday 19 February 2011] [12:49:48] &lt;sustrik&gt;      #undef bool</div>
<div class="line">[Saturday 19 February 2011] [12:49:50] &lt;sustrik&gt;      #endif</div>
<div class="line">[Saturday 19 February 2011] [12:49:50] &lt;Steve-o&gt;      as per your mail</div>
<div class="line">[Saturday 19 February 2011] [12:49:57] &lt;sustrik&gt;      yes</div>
<div class="line">[Saturday 19 February 2011] [12:50:05] &lt;sustrik&gt;      that fixed the sunstudio build</div>
<div class="line">[Saturday 19 February 2011] [12:50:18] &lt;sustrik&gt;      but caused different errors in msvc build</div>
<div class="line">[Saturday 19 February 2011] [12:50:28] &lt;sustrik&gt;      the ones you see now</div>
<div class="line">[Saturday 19 February 2011] [12:51:02] &lt;Steve-o&gt;      so the header and the code are using different definitions of bool still</div>
<div class="line">[Saturday 19 February 2011] [12:52:05] &lt;sustrik&gt;      yes, looks like that</div>
<div class="line">[Saturday 19 February 2011] [12:52:17] &lt;guido_g&gt;      howdy</div>
<div class="line">[Saturday 19 February 2011] [12:52:17] &lt;sustrik&gt;      no idea what exactly is wrong</div>
<div class="line">[Saturday 19 February 2011] [12:52:20] &lt;sustrik&gt;      hi</div>
<div class="line">[Saturday 19 February 2011] [12:52:22] &lt;Steve-o&gt;      well pgm.h is only included twice</div>
<div class="line">[Saturday 19 February 2011] [12:52:26] &lt;sustrik&gt;      yes</div>
<div class="line">[Saturday 19 February 2011] [12:52:33] &lt;sustrik&gt;      i&#8217;ve undefed bool at both places</div>
<div class="line">[Saturday 19 February 2011] [12:52:35] &lt;guido_g&gt;      any ideas why (e)pgm stopped working on the master?</div>
<div class="line">[Saturday 19 February 2011] [12:53:13] &lt;sustrik&gt;      no, but it looks like 0mq problem</div>
<div class="line">[Saturday 19 February 2011] [12:53:21] &lt;guido_g&gt;      ahh ok</div>
<div class="line">[Saturday 19 February 2011] [12:53:27] &lt;sustrik&gt;      presumably one of the recent patches have broken it</div>
<div class="line">[Saturday 19 February 2011] [12:53:50] &lt;guido_g&gt;      just asking because there was no feedback to the mail</div>
<div class="line">[Saturday 19 February 2011] [12:54:07] &lt;sustrik&gt;      are you experiencing the problem?</div>
<div class="line">[Saturday 19 February 2011] [12:54:14] &lt;sustrik&gt;      my problem is i have no test env</div>
<div class="line">[Saturday 19 February 2011] [12:54:24] &lt;sustrik&gt;      so it&#8217;s hard for me to find out what&#8217;s the problem</div>
<div class="line">[Saturday 19 February 2011] [12:54:35] &lt;guido_g&gt;      yes, i experienced the problem and reported it</div>
<div class="line">[Saturday 19 February 2011] [12:54:42] &lt;sustrik&gt;      i may try pgm over loopback though...</div>
<div class="line">[Saturday 19 February 2011] [12:54:57] &lt;guido_g&gt;      huh?</div>
<div class="line">[Saturday 19 February 2011] [12:55:08] &lt;sustrik&gt;      i have just a single box :)</div>
<div class="line">[Saturday 19 February 2011] [12:55:13] &lt;guido_g&gt;      lo doesn&#8217;t do multicast</div>
<div class="line">[Saturday 19 February 2011] [12:55:24] &lt;guido_g&gt;      too bad</div>
<div class="line">[Saturday 19 February 2011] [12:55:26] &lt;Steve-o&gt;      my blade chassis is switched off and 50,000 miles away, I only have a windows laptop currently</div>
<div class="line">[Saturday 19 February 2011] [12:55:47] &lt;Steve-o&gt;      :D</div>
<div class="line">[Saturday 19 February 2011] [12:55:48] &lt;sustrik&gt;      still in NY?</div>
<div class="line">[Saturday 19 February 2011] [12:56:02] &lt;Steve-o&gt;      back in HK next week</div>
<div class="line">[Saturday 19 February 2011] [12:56:24] &lt;Steve-o&gt;      just working through a lot of contractor jobs</div>
<div class="line">[Saturday 19 February 2011] [12:56:29] &lt;sustrik&gt;      right</div>
<div class="line">[Saturday 19 February 2011] [12:56:50] &lt;sustrik&gt;      guido_g: there&#8217;s simulated multicast over lo</div>
<div class="line">[Saturday 19 February 2011] [12:56:56] &lt;sustrik&gt;      i may try that</div>
<div class="line">[Saturday 19 February 2011] [12:57:26] &lt;guido_g&gt;      you simply use the external ip, mc isn&#8217;t routed anyway</div>
<div class="line">[Saturday 19 February 2011] [12:57:51] &lt;guido_g&gt;      btw, this was the setup where i first discovered that something went wrong</div>
<div class="line">[Saturday 19 February 2011] [12:58:16] &lt;guido_g&gt;      normaly mc traffic is also routed back to the originating host</div>
<div class="line">[Saturday 19 February 2011] [12:58:28] &lt;sustrik&gt;      if i do that i won&#8217;t see whether the message goes through or not</div>
<div class="line">[Saturday 19 February 2011] [12:58:48] &lt;guido_g&gt;      huh?</div>
<div class="line">[Saturday 19 February 2011] [12:58:58] &lt;guido_g&gt;      sorry, can&#8217;t follow you</div>
<div class="line">[Saturday 19 February 2011] [12:59:12] &lt;sustrik&gt;      when i use a multicast group that nobody listens to</div>
<div class="line">[Saturday 19 February 2011] [12:59:21] &lt;sustrik&gt;      &#8220;you simply use the external ip, mc isn&#8217;t routed anyway&#8221;</div>
<div class="line">[Saturday 19 February 2011] [13:00:22] &lt;guido_g&gt;      ment to mean that the mc traffic is not gouing to leave your local network when using the external ip of you box</div>
<div class="line">[Saturday 19 February 2011] [13:00:56] &lt;guido_g&gt;      and you don&#8217;t have to play tricks w/ the network stack to make lo mc aware</div>
<div class="line">[Saturday 19 February 2011] [13:01:29] &lt;guido_g&gt;      or did you mean multicast loopback?</div>
<div class="line">[Saturday 19 February 2011] [13:01:29] &lt;sustrik&gt;      ok</div>
<div class="line">[Saturday 19 February 2011] [13:01:34] &lt;sustrik&gt;      yep</div>
<div class="line">[Saturday 19 February 2011] [13:01:38] &lt;guido_g&gt;      ahhh...</div>
<div class="line">[Saturday 19 February 2011] [13:01:39] &lt;guido_g&gt;      sorry</div>
<div class="line">[Saturday 19 February 2011] [13:01:43] &lt;guido_g&gt;      my fault then</div>
<div class="line">[Saturday 19 February 2011] [13:01:48] &lt;sustrik&gt;      never mind</div>
<div class="line">[Saturday 19 February 2011] [13:01:55] &lt;guido_g&gt;      i assumed loopback device</div>
<div class="line">[Saturday 19 February 2011] [13:02:14] &lt;sustrik&gt;      i&#8217;ll try that am i&#8217;ll see whether i can discover the bug that way</div>
<div class="line">[Saturday 19 February 2011] [13:02:29] &lt;guido_g&gt;      ok</div>
<div class="line">[Saturday 19 February 2011] [13:02:39] &lt;guido_g&gt;      thanks</div>
<div class="line">[Saturday 19 February 2011] [13:02:58] &lt;guido_g&gt;      if you think you have it, i can try it w/ two machines</div>
<div class="line">[Saturday 19 February 2011] [13:13:56] &lt;Steve-o&gt;      sustrik:  ugggggh, so I really have to use a pgm_bool_t?  Is MSVC picking up BOOL from inside pgm.h and breaking some C++ templates expecting bool?</div>
<div class="line">[Saturday 19 February 2011] [13:23:29] &lt;Steve-o&gt;      the xtree template warning with bool/BOOL conflict no longer occurs with OpenPGM trunk</div>
<div class="line">[Saturday 19 February 2011] [13:24:18] &lt;Steve-o&gt;      i.e. the new types.h:  <a class="reference external" href="http://code.google.com/p/openpgm/source/browse/trunk/openpgm/pgm/include/pgm/types.h">http://code.google.com/p/openpgm/source/browse/trunk/openpgm/pgm/include/pgm/types.h</a></div>
<div class="line">[Saturday 19 February 2011] [13:33:19] &lt;<a href="#id1075"><span class="problematic" id="id1076">pieterh_</span></a>&gt;     sustrik, do we have a place in the git for tools like web api generation?</div>
<div class="line">[Saturday 19 February 2011] [13:33:19] &lt;sustrik&gt;      Steve-o: well, i&#8217;m not sure what&#8217;s exactly going on</div>
<div class="line">[Saturday 19 February 2011] [13:33:34] &lt;sustrik&gt;      <a href="#id1077"><span class="problematic" id="id1078">pieterh_</span></a>: hm, not yet</div>
<div class="line">[Saturday 19 February 2011] [13:33:53] &lt;<a href="#id1079"><span class="problematic" id="id1080">pieterh_</span></a>&gt;     I guess this applies also to mikko&#8217;s tools</div>
<div class="line">[Saturday 19 February 2011] [13:34:12] &lt;sustrik&gt;      the build system is scattered across the directiories</div>
<div class="line">[Saturday 19 February 2011] [13:34:20] &lt;sustrik&gt;      which is how autotools work</div>
<div class="line">[Saturday 19 February 2011] [13:34:31] &lt;sustrik&gt;      what about putting the scripts to doc subdir?</div>
<div class="line">[Saturday 19 February 2011] [13:34:42] &lt;<a href="#id1081"><span class="problematic" id="id1082">pieterh_</span></a>&gt;     hmm, ok what I&#8217;ll do is make a separate tool that does this work</div>
<div class="line">[Saturday 19 February 2011] [13:34:47] &lt;<a href="#id1083"><span class="problematic" id="id1084">pieterh_</span></a>&gt;     in its own git</div>
<div class="line">[Saturday 19 February 2011] [13:34:58] &lt;<a href="#id1085"><span class="problematic" id="id1086">pieterh_</span></a>&gt;     since we have other projects with the same needs, e.g. zfl</div>
<div class="line">[Saturday 19 February 2011] [13:35:06] &lt;sustrik&gt;      as you wish</div>
<div class="line">[Saturday 19 February 2011] [13:35:22] &lt;sustrik&gt;      however, there are documentation generation scripts in doc subdir</div>
<div class="line">[Saturday 19 February 2011] [13:35:33]         * <a href="#id1087"><span class="problematic" id="id1088">pieterh_</span></a> goes to check...</div>
<div class="line">[Saturday 19 February 2011] [13:35:48] &lt;sustrik&gt;      so placing one more there won&#8217;t be completely ridiculous</div>
<div class="line">[Saturday 19 February 2011] [13:36:04] &lt;sustrik&gt;      Steve-o: i though that undefining bool should solve the issue...</div>
<div class="line">[Saturday 19 February 2011] [13:36:25] &lt;<a href="#id1089"><span class="problematic" id="id1090">pieterh_</span></a>&gt;     sustrik, what&#8217;s there now is the straight man-&gt;txt/xml stuff</div>
<div class="line">[Saturday 19 February 2011] [13:36:28] &lt;Steve-o&gt;      not defining in the first place is better :D</div>
<div class="line">[Saturday 19 February 2011] [13:36:52] &lt;<a href="#id1091"><span class="problematic" id="id1092">pieterh_</span></a>&gt;     let me think this over for a couple of hours</div>
<div class="line">[Saturday 19 February 2011] [13:37:01] &lt;sustrik&gt;      <a href="#id1093"><span class="problematic" id="id1094">pieterh_</span></a>: txt-&gt;man/http</div>
<div class="line">[Saturday 19 February 2011] [13:37:08] &lt;sustrik&gt;      html*</div>
<div class="line">[Saturday 19 February 2011] [13:37:11] &lt;sustrik&gt;      Steve-o: yes</div>
<div class="line">[Saturday 19 February 2011] [13:37:19] &lt;<a href="#id1095"><span class="problematic" id="id1096">pieterh_</span></a>&gt;     yes, txt to man/html/xml</div>
<div class="line">[Saturday 19 February 2011] [13:37:28] &lt;<a href="#id1097"><span class="problematic" id="id1098">pieterh_</span></a>&gt;     I&#8217;m using the xml as input for this process</div>
<div class="line">[Saturday 19 February 2011] [13:37:34] &lt;sustrik&gt;      but as far as I understand you use your &#8220;bool&#8221; in PGM API, right?</div>
<div class="line">[Saturday 19 February 2011] [13:38:08] &lt;sustrik&gt;      pieterh: what xml?</div>
<div class="line">[Saturday 19 February 2011] [13:38:19] &lt;<a href="#id1099"><span class="problematic" id="id1100">pieterh_</span></a>&gt;     try &#8216;make zmq.xml&#8217; in the doc directory</div>
<div class="line">[Saturday 19 February 2011] [13:38:24] &lt;sustrik&gt;      it&#8217;s some intermediate asciidoc step?</div>
<div class="line">[Saturday 19 February 2011] [13:38:26] &lt;sustrik&gt;      a-ha</div>
<div class="line">[Saturday 19 February 2011] [13:38:28] &lt;<a href="#id1101"><span class="problematic" id="id1102">pieterh_</span></a>&gt;     sure</div>
<div class="line">[Saturday 19 February 2011] [13:38:31] &lt;sustrik&gt;      i see</div>
<div class="line">[Saturday 19 February 2011] [13:38:32] &lt;<a href="#id1103"><span class="problematic" id="id1104">pieterh_</span></a>&gt;     docbook xml format</div>
<div class="line">[Saturday 19 February 2011] [13:39:21] &lt;sustrik&gt;      Steve-o: maybe the bool in the API should be simply changed to int</div>
<div class="line">[Saturday 19 February 2011] [13:40:22] &lt;sustrik&gt;      <a href="#id1105"><span class="problematic" id="id1106">pieterh_</span></a>: i would say generating the wikidot source could be part of the build process</div>
<div class="line">[Saturday 19 February 2011] [13:40:31] &lt;sustrik&gt;      it introduces dependency on perl though</div>
<div class="line">[Saturday 19 February 2011] [13:40:46] &lt;<a href="#id1107"><span class="problematic" id="id1108">pieterh_</span></a>&gt;     sustrik, indeed</div>
<div class="line">[Saturday 19 February 2011] [13:41:16] &lt;Steve-o&gt;      try the update first, although it might indeed be that BOOL is too strongly typed</div>
<div class="line">[Saturday 19 February 2011] [13:41:29] &lt;<a href="#id1109"><span class="problematic" id="id1110">pieterh_</span></a>&gt;     let&#8217;s aim for stand-alone tool which mikko can then integrate into his build processes</div>
<div class="line">[Saturday 19 February 2011] [13:41:41] &lt;sustrik&gt;      <a href="#id1111"><span class="problematic" id="id1112">pieterh_</span></a>: ok</div>
<div class="line">[Saturday 19 February 2011] [13:41:52] &lt;sustrik&gt;      Steve-o: ok</div>
<div class="line">[Saturday 19 February 2011] [13:41:57] &lt;<a href="#id1113"><span class="problematic" id="id1114">pieterh_</span></a>&gt;     :-)</div>
<div class="line">[Saturday 19 February 2011] [13:42:17] &lt;<a href="#id1115"><span class="problematic" id="id1116">pieterh_</span></a>&gt;     if there are other things we can profitably mechanically upload to the wiki, let me know</div>
<div class="line">[Saturday 19 February 2011] [13:43:07] &lt;sustrik&gt;      ultimately, the docs for stable version</div>
<div class="line">[Saturday 19 February 2011] [13:43:38] &lt;sustrik&gt;      on the other hand, raw html is much faster than wikidot</div>
<div class="line">[Saturday 19 February 2011] [13:43:55] &lt;sustrik&gt;      it&#8217;s a trade-off, speed vs. nice design</div>
<div class="line">[Saturday 19 February 2011] [13:47:10] &lt;<a href="#id1117"><span class="problematic" id="id1118">pieterh_</span></a>&gt;     up to you, really</div>
<div class="line">[Saturday 19 February 2011] [13:47:58] &lt;<a href="#id1119"><span class="problematic" id="id1120">pieterh_</span></a>&gt;     it&#8217;s faster with pure HTML but we can do more interesting things with Wikidot, e.g. Table of Contents, navigation, etc.</div>
<div class="line">[Saturday 19 February 2011] [13:48:13] &lt;<a href="#id1121"><span class="problematic" id="id1122">pieterh_</span></a>&gt;     our limiting factor is URLs, really</div>
<div class="line">[Saturday 19 February 2011] [13:48:42] &lt;<a href="#id1123"><span class="problematic" id="id1124">pieterh_</span></a>&gt;     api.zeromq.org/2.1.0/zmq_bind would work</div>
<div class="line">[Saturday 19 February 2011] [13:48:55] &lt;<a href="#id1125"><span class="problematic" id="id1126">pieterh_</span></a>&gt;     for each stable version released</div>
<div class="line">[Saturday 19 February 2011] [13:49:05] &lt;<a href="#id1127"><span class="problematic" id="id1128">pieterh_</span></a>&gt;     there are still people using 2.0.8 in production...</div>
<div class="line">[Saturday 19 February 2011] [13:49:46] &lt;<a href="#id1129"><span class="problematic" id="id1130">pieterh_</span></a>&gt;     sorry, my bad, wikidot doesn&#8217;t allow subdirectories...</div>
<div class="line">[Saturday 19 February 2011] [13:50:21] &lt;<a href="#id1131"><span class="problematic" id="id1132">pieterh_</span></a>&gt;     api.zeromq.org/2-1-0:zmq_bind</div>
<div class="line">[Saturday 19 February 2011] [13:52:06] &lt;sustrik&gt;      no preference</div>
<div class="line">[Saturday 19 February 2011] [13:52:18] &lt;sustrik&gt;      should we ask on the ml?</div>
<div class="line">[Saturday 19 February 2011] [14:08:52] &lt;<a href="#id1133"><span class="problematic" id="id1134">pieterh_</span></a>&gt;     sustrik: ack</div>
<div class="line">[Saturday 19 February 2011] [16:28:14] &lt;mikko&gt;        g&#8217;evening</div>
<div class="line">[Saturday 19 February 2011] [17:03:33] &lt;<a href="#id1135"><span class="problematic" id="id1136">pieterh_</span></a>&gt;     mikko, top of the evening to you!</div>
<div class="line">[Saturday 19 February 2011] [17:43:05] &lt;sustrik&gt;      <a href="#id1137"><span class="problematic" id="id1138">pieterh_</span></a>: still there?</div>
<div class="line">[Saturday 19 February 2011] [17:57:33] &lt;Steve-o&gt;      wow, it&#8217;s surprisingly tedious to detect single core machines with hyper-threading</div>
<div class="line">[Saturday 19 February 2011] [17:58:34] &lt;mikko&gt;        Steve-o: runtime?</div>
<div class="line">[Saturday 19 February 2011] [17:58:40] &lt;Steve-o&gt;      yup</div>
<div class="line">[Saturday 19 February 2011] [17:59:01] &lt;Steve-o&gt;      Windows XP SP3 has a backported API to walk the CPU topology to count packages, cores, logical processors</div>
<div class="line">[Saturday 19 February 2011] [17:59:27] &lt;Steve-o&gt;      CPUID seems to be a bit broken on new i3, i5, i7 processors</div>
<div class="line">[Saturday 19 February 2011] [17:59:47] &lt;Steve-o&gt;      every Unix has it&#8217;s own custom API or /proc system</div>
<div class="line">[Saturday 19 February 2011] [18:00:48] &lt;Steve-o&gt;      I&#8217;m trying to see if I can at runtime catch the case of 1 core with HT enabled to stop spinlocks spinning</div>
<div class="line">[Saturday 19 February 2011] [18:01:54] &lt;Steve-o&gt;      it&#8217;s probably futile as on Linux at least the system clock is pretty much only low resolution in such configurations as HT causes it to jump all over the place</div>
<div class="line">[Saturday 19 February 2011] [18:02:06] &lt;mikko&gt;        i got a vague memory about reading about this or something related</div>
<div class="line">[Saturday 19 February 2011] [18:03:02] &lt;Steve-o&gt;      I have something working in Windows but it&#8217;s probably not worth committing</div>
<div class="line">[Saturday 19 February 2011] [18:04:34] &lt;Steve-o&gt;      I already use hyper-threading CPU pauses in spinlocks so that multi-core HT systems run fine</div>
<div class="line">[Saturday 19 February 2011] [18:06:42] &lt;mikko&gt;        btw, i don&#8217;t know whether you saw this:</div>
<div class="line">[Saturday 19 February 2011] [18:06:51] &lt;mikko&gt;        <a class="reference external" href="https://github.com/mkoppanen/zeromq2/tree/openpgm-autoconf">https://github.com/mkoppanen/zeromq2/tree/openpgm-autoconf</a></div>
<div class="line">[Saturday 19 February 2011] [18:07:02] &lt;mikko&gt;        seems to be functional now</div>
<div class="line">[Saturday 19 February 2011] [18:10:20] &lt;Steve-o&gt;      ok great</div>
<div class="line">[Saturday 19 February 2011] [18:10:43] &lt;mikko&gt;        intel seems to have articles on detecting HT</div>
<div class="line">[Saturday 19 February 2011] [18:10:56] &lt;mikko&gt;        but when i try to follow the link to the article it 404s</div>
<div class="line">[Saturday 19 February 2011] [18:11:00] &lt;Steve-o&gt;      just have the recent fixes from sustrik for C++ and should be good to release soon</div>
<div class="line">[Saturday 19 February 2011] [18:11:18] &lt;Steve-o&gt;      detecting HT is easy with CPUID, counting the physical cores is a bit difficult</div>
<div class="line">[Saturday 19 February 2011] [18:11:35] &lt;Steve-o&gt;      or rather the number of logical processors CPUID returns no longer appears valid</div>
<div class="line">[Saturday 19 February 2011] [18:12:35] &lt;Steve-o&gt;      there&#8217;s a question on stackoverflow with i7 cores</div>
<div class="line">[Saturday 19 February 2011] [18:12:46] &lt;Steve-o&gt;      anyway, must dash, ciao</div>
<div class="line">[Saturday 19 February 2011] [18:13:10] &lt;mikko&gt;        see you</div>
<div class="line">[Saturday 19 February 2011] [21:16:16] &lt;<a href="#id1139"><span class="problematic" id="id1140">Jay7_</span></a>&gt;        Hey I&#8217;m new to ZMQ and tried installing in on a Mac OSX 10.6.3; but it appears &#8211;with-pgm is not supported currently on darwin.  Is this expected in the near future by chance?</div>
<div class="line">[Saturday 19 February 2011] [21:28:57] &lt;cremes&gt;       <a href="#id1141"><span class="problematic" id="id1142">Jay7_</span></a>: i&#8217;m not a pgm expert, but apparently the openpgm package (a separate project from 0mq) doesn&#8217;t have good/any osx support</div>
<div class="line">[Saturday 19 February 2011] [21:29:09] &lt;cremes&gt;       <a href="#id1143"><span class="problematic" id="id1144">Jay7_</span></a>: check the mailing list archives for more discussion on this</div>
<div class="line">[Saturday 19 February 2011] [21:29:52] &lt;<a href="#id1145"><span class="problematic" id="id1146">Jay7_</span></a>&gt;        &#64;cremes_: ah, okay. Thank you. I&#8217;ll look through those.</div>
<div class="line">[Sunday 20 February 2011] [02:51:40] &lt;<a href="#id1147"><span class="problematic" id="id1148">pieterh_</span></a>&gt;       sustrik: hi</div>
<div class="line">[Sunday 20 February 2011] [02:53:15] &lt;rem7&gt;   Hi, I was going over the zmq guide, I noticed the examples use strings as messages. If I want to send something like floats is it ok to just memcpy the float, or should I use something like protobuffers?</div>
<div class="line">[Sunday 20 February 2011] [02:53:59] &lt;<a href="#id1149"><span class="problematic" id="id1150">pieterh_</span></a>&gt;       rem7, depends on your needs</div>
<div class="line">[Sunday 20 February 2011] [02:54:40] &lt;<a href="#id1151"><span class="problematic" id="id1152">pieterh_</span></a>&gt;       sending data as-such is easy and cheap but doesn&#8217;t give you any kind of leverage</div>
<div class="line">[Sunday 20 February 2011] [02:54:43] &lt;rem7&gt;   I just need to pass float arrays... using a PUSH/PULL system.</div>
<div class="line">[Sunday 20 February 2011] [02:55:01] &lt;<a href="#id1153"><span class="problematic" id="id1154">pieterh_</span></a>&gt;       if it&#8217;s a throw-away app, go for it</div>
<div class="line">[Sunday 20 February 2011] [02:55:16] &lt;<a href="#id1155"><span class="problematic" id="id1156">pieterh_</span></a>&gt;       if it&#8217;s something you are more serious about, make formal &#8216;contracts&#8217;</div>
<div class="line">[Sunday 20 February 2011] [02:55:28] &lt;<a href="#id1157"><span class="problematic" id="id1158">pieterh_</span></a>&gt;       i.e. serialize your data properly (portably), document the message formats, etc.</div>
<div class="line">[Sunday 20 February 2011] [02:55:46] &lt;<a href="#id1159"><span class="problematic" id="id1160">pieterh_</span></a>&gt;       it&#8217;s a lot more work up front but lets you work more cheaply long term</div>
<div class="line">[Sunday 20 February 2011] [02:56:07] &lt;<a href="#id1161"><span class="problematic" id="id1162">pieterh_</span></a>&gt;       e.g. plug in a worker in a different language</div>
<div class="line">[Sunday 20 February 2011] [02:56:43] &lt;rem7&gt;   would using google proto buffers take care of that?</div>
<div class="line">[Sunday 20 February 2011] [02:57:00] &lt;rem7&gt;   I don&#8217;t have much experience with this kinda of stuff...</div>
<div class="line">[Sunday 20 February 2011] [03:15:21] &lt;<a href="#id1163"><span class="problematic" id="id1164">pieterh_</span></a>&gt;       rem7, yes, it would</div>
<div class="line">[Sunday 20 February 2011] [03:18:17] &lt;rem7&gt;   <a href="#id1165"><span class="problematic" id="id1166">pieterh_</span></a>:  I guess I&#8217;ll start looking into that. Thanks.</div>
<div class="line">[Sunday 20 February 2011] [03:18:27] &lt;<a href="#id1167"><span class="problematic" id="id1168">pieterh_</span></a>&gt;       let us know how it goes</div>
<div class="line">[Sunday 20 February 2011] [03:20:15] &lt;guido_g&gt;        smaller alternative might be <a class="reference external" href="http://msgpack.org/">http://msgpack.org/</a></div>
<div class="line">[Sunday 20 February 2011] [03:22:23] &lt;rem7&gt;   guido_g: thanks, I&#8217;ll look into it</div>
<div class="line">[Sunday 20 February 2011] [03:42:39] &lt;sustrik&gt;        <a href="#id1169"><span class="problematic" id="id1170">pieterh_</span></a>: morning</div>
<div class="line">[Sunday 20 February 2011] [03:56:53] &lt;<a href="#id1171"><span class="problematic" id="id1172">pieterh_</span></a>&gt;       sustrik, hi</div>
<div class="line">[Sunday 20 February 2011] [03:58:31] &lt;<a href="#id1173"><span class="problematic" id="id1174">pieterh_</span></a>&gt;       do you think the red theme is readable enough for the man pages?</div>
<div class="line">[Sunday 20 February 2011] [05:28:25] &lt;pieter_hintjens&gt;        anyone looked at distributed hash tables on top of 0MQ, e.g. Chord?</div>
<div class="line">[Sunday 20 February 2011] [05:52:46] &lt;travlr&gt; hi all. i&#8217;ve got a question about interfacing zmq in Qt having read up a lot on what&#8217;s going on I&#8217;m still a little confused about zmq&#8217;s edge-trigger....</div>
<div class="line">[Sunday 20 February 2011] [05:53:21] &lt;travlr&gt; Qt has a QSocketNotifier class that provides a signal when there is activity on a profided FD</div>
<div class="line">[Sunday 20 February 2011] [05:53:47] &lt;travlr&gt; like from zmq_getsockopt(... ZMQ_FD...)</div>
<div class="line">[Sunday 20 February 2011] [05:54:15] &lt;travlr&gt; I&#8217;m assuming that the Qt sig is level triggered.</div>
<div class="line">[Sunday 20 February 2011] [05:56:19] &lt;travlr&gt; so when I get a signal from QSocketNotifier, I check the ZMQ_EVENTS for ZMQ_POLLIN (in this case) and ....</div>
<div class="line">[Sunday 20 February 2011] [05:56:33] &lt;travlr&gt; what do I do exactly when I get EAGAIN?</div>
<div class="line">[Sunday 20 February 2011] [06:02:30] &lt;travlr&gt; I&#8217;m guessing that I need to keep calling zmq_recv() until I do get the EAGAIN condition.</div>
<div class="line">[Sunday 20 February 2011] [06:06:37] &lt;pieter_hintjens&gt;        travlr: sorry, can&#8217;t really help, not sure what the edge trigger vs. level trigger is about</div>
<div class="line">[Sunday 20 February 2011] [06:06:45] &lt;pieter_hintjens&gt;        try invoking sustrik... :-)</div>
<div class="line">[Sunday 20 February 2011] [06:07:00] &lt;travlr&gt; hi pieter.. ok, thanks just the same</div>
<div class="line">[Sunday 20 February 2011] [06:42:05] &lt;private_meta&gt;   Is it possible to download a certain language bound example-set (or all of them if necessary) without having to install the entire git suite?</div>
<div class="line">[Sunday 20 February 2011] [06:42:58] &lt;travlr&gt; private_meta: each binding has its own git repo.. i think</div>
<div class="line">[Sunday 20 February 2011] [06:43:20] &lt;private_meta&gt;   I meant that one <a class="reference external" href="https://github.com/imatix/zguide/tree/master/examples">https://github.com/imatix/zguide/tree/master/examples</a></div>
<div class="line">[Sunday 20 February 2011] [06:43:30] &lt;private_meta&gt;   and/or the dedicated subdirectories/trees</div>
<div class="line">[Sunday 20 February 2011] [06:43:43] &lt;private_meta&gt;   brb</div>
<div class="line">[Sunday 20 February 2011] [06:44:42] &lt;travlr&gt; no. but the that download isn&#8217;t that big anyway</div>
<div class="line">[Sunday 20 February 2011] [07:05:42] &lt;sustrik&gt;        travlr: yes</div>
<div class="line">[Sunday 20 February 2011] [07:05:57] &lt;sustrik&gt;        you have to call recv() till you get EAGAIN</div>
<div class="line">[Sunday 20 February 2011] [07:06:17] &lt;private_meta&gt;   travlr: I don&#8217;t want to download 40 files per language, it&#8217;s a hassle</div>
<div class="line">[Sunday 20 February 2011] [07:15:26] &lt;mikko&gt;  good morning all</div>
<div class="line">[Sunday 20 February 2011] [07:16:52] &lt;sustrik&gt;        morning</div>
<div class="line">[Sunday 20 February 2011] [07:24:11] &lt;mikko&gt;  build failure on s390x</div>
<div class="line">[Sunday 20 February 2011] [07:24:18] &lt;mikko&gt;  but that is due to shutdown_stress</div>
<div class="line">[Sunday 20 February 2011] [07:35:53] &lt;pieter_hintjens&gt;        mikko: quick question</div>
<div class="line">[Sunday 20 February 2011] [07:39:47] &lt;pieter_hintjens&gt;        private_meta: it takes about 30 seconds to clone the git</div>
<div class="line">[Sunday 20 February 2011] [07:40:47] &lt;pieter_hintjens&gt;        and it&#8217;s nice that people get the git because they can then translate the examples into other languages</div>
<div class="line">[Sunday 20 February 2011] [07:42:36] &lt;pieter_hintjens&gt;        private_meta: ah, you can click on &#8216;Downloads&#8217; on the github page and get a .zip or .tar.gz. file</div>
<div class="line">[Sunday 20 February 2011] [07:45:04] &lt;mikko&gt;  pieter_hintjens: sure</div>
<div class="line">[Sunday 20 February 2011] [07:45:12] &lt;mikko&gt;  what is the question?</div>
<div class="line">[Sunday 20 February 2011] [07:45:56] &lt;pieter_hintjens&gt;        mikko: I have scripts that will rebuild api.zero.mq from the git repo</div>
<div class="line">[Sunday 20 February 2011] [07:46:04] &lt;pieter_hintjens&gt;        bash/perl/python</div>
<div class="line">[Sunday 20 February 2011] [07:46:22] &lt;mikko&gt;  do you want to run it automatically on daily builds?</div>
<div class="line">[Sunday 20 February 2011] [07:46:30] &lt;pieter_hintjens&gt;        at least for master, I think, yes</div>
<div class="line">[Sunday 20 February 2011] [07:46:46] &lt;mikko&gt;  of course</div>
<div class="line">[Sunday 20 February 2011] [07:46:49] &lt;pieter_hintjens&gt;        also for any branch that is being maintained...</div>
<div class="line">[Sunday 20 February 2011] [07:46:51] &lt;mikko&gt;  is the script available somewhere?</div>
<div class="line">[Sunday 20 February 2011] [07:47:16] &lt;mikko&gt;  thats perfectly fine, the box is idle apart from the 5am/pm builds</div>
<div class="line">[Sunday 20 February 2011] [07:47:21] &lt;pieter_hintjens&gt;        I guess the question is whether the scripts should be in their own git, the zeromq2 git, or just floating around somewhere</div>
<div class="line">[Sunday 20 February 2011] [07:47:43] &lt;pieter_hintjens&gt;        eventually we could do the same for the zfl man pages</div>
<div class="line">[Sunday 20 February 2011] [07:47:45] &lt;mikko&gt;  well, i think we could have git for random infra stuff</div>
<div class="line">[Sunday 20 February 2011] [07:47:55] &lt;pieter_hintjens&gt;        ztools?</div>
<div class="line">[Sunday 20 February 2011] [07:47:55] &lt;mikko&gt;  i got some scripts on the build server that could be there as well</div>
<div class="line">[Sunday 20 February 2011] [07:48:07] &lt;mikko&gt;  which are not available anywhere now etc</div>
<div class="line">[Sunday 20 February 2011] [07:48:10] &lt;pieter_hintjens&gt;        indeed</div>
<div class="line">[Sunday 20 February 2011] [07:49:06] &lt;pieter_hintjens&gt;        so a new git that collects all the random tools we make?</div>
<div class="line">[Sunday 20 February 2011] [07:49:23] &lt;mikko&gt;  it wouldn&#8217;t probably something usable for people out of the box</div>
<div class="line">[Sunday 20 February 2011] [07:49:31] &lt;mikko&gt;  but just to make sure that everything is available</div>
<div class="line">[Sunday 20 February 2011] [07:49:48] &lt;pieter_hintjens&gt;        right</div>
<div class="line">[Sunday 20 February 2011] [07:49:58] &lt;pieter_hintjens&gt;        in the zeromq organization would be best</div>
<div class="line">[Sunday 20 February 2011] [07:50:05] &lt;mikko&gt;  yeah, probably</div>
<div class="line">[Sunday 20 February 2011] [07:50:54] &lt;pieter_hintjens&gt;        <a class="reference external" href="mailto:git&#37;&#52;&#48;github&#46;com">git<span>&#64;</span>github<span>&#46;</span>com</a>:zeromq/ztools.git</div>
<div class="line">[Sunday 20 February 2011] [07:51:21] &lt;mikko&gt;  cool, i&#8217;ll add things there later</div>
<div class="line">[Sunday 20 February 2011] [07:51:26] &lt;pieter_hintjens&gt;        I&#8217;ll whip up a README, I suggest one directory per tool</div>
<div class="line">[Sunday 20 February 2011] [07:51:40] &lt;mikko&gt;  yeah</div>
<div class="line">[Sunday 20 February 2011] [07:51:43] &lt;mikko&gt;  makes sense</div>
<div class="line">[Sunday 20 February 2011] [07:51:57] &lt;mikko&gt;  lunch, brb</div>
<div class="line">[Sunday 20 February 2011] [07:53:20] &lt;pieter_hintjens&gt;        ok, you should have rw access</div>
<div class="line">[Sunday 20 February 2011] [07:53:22] &lt;pieter_hintjens&gt;        cyl</div>
<div class="line">[Sunday 20 February 2011] [07:53:47] &lt;private_meta&gt;   pieter_hintjens: the download page was empty for me</div>
<div class="line">[Sunday 20 February 2011] [07:54:10] &lt;pieter_hintjens&gt;        private_meta: ? it should pop up a window asking if you want a .zip or .tar.gz...</div>
<div class="line">[Sunday 20 February 2011] [07:54:28] &lt;pieter_hintjens&gt;        what URL did you get?</div>
<div class="line">[Sunday 20 February 2011] [07:54:42] &lt;pieter_hintjens&gt;        You want to be here: <a class="reference external" href="https://github.com/zeromq/zfl">https://github.com/zeromq/zfl</a></div>
<div class="line">[Sunday 20 February 2011] [07:54:51] &lt;pieter_hintjens&gt;        then click on Downloads</div>
<div class="line">[Sunday 20 February 2011] [07:55:17] &lt;pieter_hintjens&gt;        sorry!</div>
<div class="line">[Sunday 20 February 2011] [07:55:23] &lt;pieter_hintjens&gt;        <a class="reference external" href="https://github.com/imatix/zguide">https://github.com/imatix/zguide</a></div>
<div class="line">[Sunday 20 February 2011] [07:56:23] &lt;private_meta&gt;   pieter_hintjens: &#8220;should&#8221; is such a nice word, covers all kinds of possibilities, mostly the &#8220;not&#8221; possibility for me</div>
<div class="line">[Sunday 20 February 2011] [07:56:43] &lt;Guthur&gt; it works fine here</div>
<div class="line">[Sunday 20 February 2011] [07:57:03] &lt;pieter_hintjens&gt;        private_meta: please explain in more detail what you do, and what happens</div>
<div class="line">[Sunday 20 February 2011] [07:57:19] &lt;pieter_hintjens&gt;        &#8220;it doesn&#8217;t work&#8221; is not useful...</div>
<div class="line">[Sunday 20 February 2011] [08:01:34] &lt;pieter_hintjens&gt;        ok, lunch, bbl</div>
<div class="line">[Sunday 20 February 2011] [08:04:57] &lt;private_meta&gt;   yay... demonstrative effect... had &#8220;no downloads&#8221; or something like that for half a week, now I ASK about it nd it shows downloads</div>
<div class="line">[Sunday 20 February 2011] [08:05:07] &lt;private_meta&gt;   I hate that</div>
<div class="line">[Sunday 20 February 2011] [08:07:16] &lt;Guthur&gt; well, at least it&#8217;s working, hehe</div>
<div class="line">[Sunday 20 February 2011] [08:13:05] &lt;private_meta&gt;   I&#8217;m not sure anymore, someone might have told me already, but where in the guide can I find some info about how to implement heartbeating. according to the guide it has to do something with zmq_poll, but I don&#8217;t find anything helpful on zmq_poll. I want to do something like heartbeat pings, but I&#8217;m not sure how to do it exactly</div>
<div class="line">[Sunday 20 February 2011] [08:19:46] &lt;mikko&gt;  pieter_hintjens: <a class="reference external" href="http://snapshot.zero.mq/zfl/">http://snapshot.zero.mq/zfl/</a></div>
<div class="line">[Sunday 20 February 2011] [08:23:45] &lt;mikko&gt;  private_meta: normally you would send a heartbeat request to client</div>
<div class="line">[Sunday 20 February 2011] [08:23:52] &lt;mikko&gt;  zmq_poll for incoming messages</div>
<div class="line">[Sunday 20 February 2011] [08:24:02] &lt;mikko&gt;  no message in given timeout -&gt; consider dead</div>
<div class="line">[Sunday 20 February 2011] [08:25:48] &lt;private_meta&gt;   I don&#8217;t quite understand zmq_poll and how to use it yet. I&#8217;m reading the man page, but i need to see how to be able to use the zmq_poll system.</div>
<div class="line">[Sunday 20 February 2011] [08:26:24] &lt;private_meta&gt;   So the heartbeat request would be a normal message that&#8217;s recognizable as a heartbeat for the other side I assume?</div>
<div class="line">[Sunday 20 February 2011] [08:26:43] &lt;mikko&gt;  see &#8220;Handling Multiple Sockets</div>
<div class="line">[Sunday 20 February 2011] [08:26:47] &lt;mikko&gt;  in the zguide</div>
<div class="line">[Sunday 20 February 2011] [08:27:03] &lt;mikko&gt;  yes, or even a separate heartbeat socket</div>
<div class="line">[Sunday 20 February 2011] [08:27:10] &lt;mikko&gt;  depends on the application</div>
<div class="line">[Sunday 20 February 2011] [08:28:53] &lt;private_meta&gt;   A separate socket might be an interesting idea, thanks. I&#8217;ll read up the multiple sockets first</div>
<div class="line">[Sunday 20 February 2011] [08:29:56] &lt;mikko&gt;  for example if you got PUSH/PULL as main socket you can&#8217;t really heartbeat over it</div>
<div class="line">[Sunday 20 February 2011] [08:31:23] &lt;private_meta&gt;   So do push/pull stand for dedicated one-way-communication endpoints?</div>
<div class="line">[Sunday 20 February 2011] [08:32:15] &lt;mikko&gt;  <a class="reference external" href="http://api.zero.mq/2-1-0:zmq-socket">http://api.zero.mq/2-1-0:zmq-socket</a></div>
<div class="line">[Sunday 20 February 2011] [08:32:26] &lt;mikko&gt;  you can see the characteristics of each socket type from here</div>
<div class="line">[Sunday 20 February 2011] [08:32:40] &lt;private_meta&gt;   i hate surfing on gprs</div>
<div class="line">[Sunday 20 February 2011] [08:32:48] &lt;private_meta&gt;   thanks</div>
<div class="line">[Sunday 20 February 2011] [08:32:48] &lt;mikko&gt;  whether they force a pattern, uni-directional/bi-directional</div>
<div class="line">[Sunday 20 February 2011] [08:32:58] &lt;mikko&gt;  if you got zeromq installed the man pages should work as well</div>
<div class="line">[Sunday 20 February 2011] [08:33:13] &lt;private_meta&gt;   thought as much</div>
<div class="line">[Sunday 20 February 2011] [08:35:57] &lt;mikko&gt;  XREP/XREQ is probably the most suitable socket for heartbeating</div>
<div class="line">[Sunday 20 February 2011] [08:37:31] &lt;private_meta&gt;   Well, I have 1 server, multiple clients, and I need to address these clients separately and each of these clients need to check heartbeats, or at least know if a connection terminates</div>
<div class="line">[Sunday 20 February 2011] [08:37:47] &lt;private_meta&gt;   while these connections are bidirectional</div>
<div class="line">[Sunday 20 February 2011] [08:39:08] &lt;mikko&gt;  yep, definitely XREQ/XREP</div>
<div class="line">[Sunday 20 February 2011] [08:39:16] &lt;mikko&gt;  i think zguide has an example of custom routing</div>
<div class="line">[Sunday 20 February 2011] [08:39:20] &lt;mikko&gt;  which is needed here</div>
<div class="line">[Sunday 20 February 2011] [08:39:41] &lt;private_meta&gt;   so the normal req/rep is balanced automatically all the time?</div>
<div class="line">[Sunday 20 February 2011] [08:40:06] &lt;private_meta&gt;   or is xreq and xrep as well, normally?</div>
<div class="line">[Sunday 20 February 2011] [08:41:23] &lt;private_meta&gt;   I have a slight difficulty understanding the terminology for the custom routing I find in the guide. dealer, mama, papa, router. Assuming I need one of those, I don&#8217;t know what these terms actually mean</div>
<div class="line">[Sunday 20 February 2011] [08:42:48] &lt;private_meta&gt;   ah...think i found the explanation</div>
<div class="line">[Sunday 20 February 2011] [08:44:17] &lt;private_meta&gt;   so i&#8217;d need router-to-router,</div>
<div class="line">[Sunday 20 February 2011] [08:45:04] &lt;mikko&gt;  private_meta: xrep/xrep doesnt force request-reply pattern as strictly as req/rep</div>
<div class="line">[Sunday 20 February 2011] [08:45:26] &lt;mikko&gt;  in your case you might want &#8220;req client 1, req client 2, req client 3&#8221;, &#8220;wait responses from all&#8221;</div>
<div class="line">[Sunday 20 February 2011] [08:45:29] &lt;mikko&gt;  i guess</div>
<div class="line">[Sunday 20 February 2011] [08:45:46] &lt;private_meta&gt;   uhm... train station coming up, brb</div>
<div class="line">[Sunday 20 February 2011] [08:45:48] &lt;mikko&gt;  not necessarily req client 1, wait for rep client 1, req client 2</div>
<div class="line">[Sunday 20 February 2011] [08:45:49] &lt;mikko&gt;  etc</div>
<div class="line">[Sunday 20 February 2011] [08:46:39] &lt;mikko&gt;  <a href="#id1175"><span class="problematic" id="id1176">pieterh_</span></a>: snapshots for zfl are now generated during builds</div>
<div class="line">[Sunday 20 February 2011] [08:57:09] &lt;private_meta&gt;   mikko: According to some of the terminology: Server-to-N-Clients connection, no forced request-to-reply pattern and standard-async-but-sync-by-choice (by higher level wrapper)</div>
<div class="line">[Sunday 20 February 2011] [08:57:17] &lt;private_meta&gt;   Is what I need</div>
<div class="line">[Sunday 20 February 2011] [08:58:31] &lt;private_meta&gt;   and non-balanced directly addressed messaging</div>
<div class="line">[Sunday 20 February 2011] [09:04:04] &lt;private_meta&gt;   mikko: concerning multiple sockets, Actually I want the connections incoming at the SAME socket, like all connection incoming at tcp port (e.g.) 5555. Still I want to address all connected clients separately</div>
<div class="line">[Sunday 20 February 2011] [09:10:22] &lt;<a href="#id1177"><span class="problematic" id="id1178">pieterh_</span></a>&gt;       private_meta, see LRU routing in Ch3 of the Guide</div>
<div class="line">[Sunday 20 February 2011] [09:10:54] &lt;<a href="#id1179"><span class="problematic" id="id1180">pieterh_</span></a>&gt;       mikko: nice, snapshots</div>
<div class="line">[Sunday 20 February 2011] [09:12:09] &lt;private_meta&gt;   <a href="#id1181"><span class="problematic" id="id1182">pieterh_</span></a>: you mean as in &#8220;lru uses several clients/workers connecting to the same socket&#8221;?</div>
<div class="line">[Sunday 20 February 2011] [09:12:22] &lt;<a href="#id1183"><span class="problematic" id="id1184">pieterh_</span></a>&gt;       private_meta, yes, it gives you the basic framework</div>
<div class="line">[Sunday 20 February 2011] [09:12:41] &lt;<a href="#id1185"><span class="problematic" id="id1186">pieterh_</span></a>&gt;       you will want to do your own routing, not LRU</div>
<div class="line">[Sunday 20 February 2011] [09:13:01] &lt;private_meta&gt;   Yes</div>
<div class="line">[Sunday 20 February 2011] [09:13:58] &lt;private_meta&gt;   <a href="#id1187"><span class="problematic" id="id1188">pieterh_</span></a>: do you know why the c++ version uses void* instead of char* for messages??</div>
<div class="line">[Sunday 20 February 2011] [09:14:18] &lt;<a href="#id1189"><span class="problematic" id="id1190">pieterh_</span></a>&gt;       private_meta, no idea...</div>
<div class="line">[Sunday 20 February 2011] [09:14:27] &lt;private_meta&gt;   kk</div>
<div class="line">[Sunday 20 February 2011] [09:18:08] &lt;private_meta&gt;   hmm... 3g networks are way too spotty here outside of towns... it&#8217;s a hassle working in trains :/</div>
<div class="line">[Sunday 20 February 2011] [09:21:43] &lt;private_meta&gt;   <a href="#id1191"><span class="problematic" id="id1192">pieterh_</span></a>: not quite sure I understand correctly, for demonstrative purposes, in the lru example the client and server code is in one file and only executed in threads so you don&#8217;t have separate server/client files?</div>
<div class="line">[Sunday 20 February 2011] [09:22:00] &lt;<a href="#id1193"><span class="problematic" id="id1194">pieterh_</span></a>&gt;       private_meta, yes, it&#8217;s just to simplify the exercise</div>
<div class="line">[Sunday 20 February 2011] [09:22:08] &lt;private_meta&gt;   ok</div>
<div class="line">[Sunday 20 February 2011] [09:22:13] &lt;<a href="#id1195"><span class="problematic" id="id1196">pieterh_</span></a>&gt;       the code in each thread is the same as it would be in a separate process</div>
<div class="line">[Sunday 20 February 2011] [09:22:19] &lt;<a href="#id1197"><span class="problematic" id="id1198">pieterh_</span></a>&gt;       with a little less wrapping</div>
<div class="line">[Sunday 20 February 2011] [09:22:27] &lt;private_meta&gt;   Thanks!</div>
<div class="line">[Sunday 20 February 2011] [09:30:31] &lt;private_meta&gt;   hmm... the lru example on git seems pretty different from the guide example</div>
<div class="line">[Sunday 20 February 2011] [09:32:39] &lt;<a href="#id1199"><span class="problematic" id="id1200">pieterh_</span></a>&gt;       private_meta,  what URL?</div>
<div class="line">[Sunday 20 February 2011] [09:32:59] &lt;<a href="#id1201"><span class="problematic" id="id1202">pieterh_</span></a>&gt;       are you looking at the same two languages?</div>
<div class="line">[Sunday 20 February 2011] [09:33:24] &lt;private_meta&gt;   Ah, let me look a second</div>
<div class="line">[Sunday 20 February 2011] [09:34:02] &lt;private_meta&gt;   Ah, i thought i was looking at the lruqueue example in the guide, it was rtmama</div>
<div class="line">[Sunday 20 February 2011] [09:34:27] &lt;private_meta&gt;   Sorry</div>
<div class="line">[Sunday 20 February 2011] [09:35:48] &lt;private_meta&gt;   mama is not ideal for me i guess, everyone should be able to initiate a message</div>
<div class="line">[Sunday 20 February 2011] [11:12:32] &lt;mikko&gt;  private_meta: it&#8217;s void* because it&#8217;s not really an array of characters</div>
<div class="line">[Sunday 20 February 2011] [11:12:40] &lt;mikko&gt;  rather a blob of data of size X</div>
<div class="line">[Sunday 20 February 2011] [11:42:32] &lt;private_meta&gt;   mikko: &#8220;just because you are sending strings over a line most of the time doesn&#8217;t mean everyone does&#8221;</div>
<div class="line">[Sunday 20 February 2011] [11:42:37] &lt;private_meta&gt;   mikko: something like that?</div>
<div class="line">[Sunday 20 February 2011] [11:43:30] &lt;private_meta&gt;   I guess representing something other than a string AS a string might be a severe waste of space...</div>
<div class="line">[Sunday 20 February 2011] [11:48:03] &lt;mikko&gt;  private_meta: it&#8217;s also conceptual thing</div>
<div class="line">[Sunday 20 February 2011] [11:48:15] &lt;mikko&gt;  private_meta: using the inproc transport you might send a pointer to a struct</div>
<div class="line">[Sunday 20 February 2011] [11:48:21] &lt;mikko&gt;  or just about anything</div>
<div class="line">[Sunday 20 February 2011] [11:48:25] &lt;mikko&gt;  rather than char*</div>
<div class="line">[Sunday 20 February 2011] [11:50:36] &lt;mikko&gt;  private_meta: but yes, you are right</div>
<div class="line">[Sunday 20 February 2011] [11:51:21] &lt;private_meta&gt;   I didn&#8217;t think of using a message queue from an external library for in-process messaging</div>
<div class="line">[Sunday 20 February 2011] [11:51:37] &lt;private_meta&gt;   ah, between threads it might be handy i guess</div>
<div class="line">[Sunday 20 February 2011] [11:53:23] &lt;mikko&gt;  private_meta: <a class="reference external" href="http://www.zeromq.org/blog:multithreading-magic">http://www.zeromq.org/blog:multithreading-magic</a></div>
<div class="line">[Sunday 20 February 2011] [11:53:29] &lt;mikko&gt;  related post</div>
<div class="line">[Sunday 20 February 2011] [12:24:10] &lt;Guthur&gt; imho inproc messaging is a big win</div>
<div class="line">[Sunday 20 February 2011] [12:24:43] &lt;Guthur&gt; the multithreading magic article explains it best though</div>
<div class="line">[Sunday 20 February 2011] [12:47:41] &lt;andrewvc&gt;       anyone know if zmq_queue supports xreq/xrep or just rep/req</div>
<div class="line">[Sunday 20 February 2011] [12:56:33] &lt;sustrik&gt;        andrewvc: just xreq/xrep :)</div>
<div class="line">[Sunday 20 February 2011] [12:56:45] &lt;andrewvc&gt;       oh, awesome :)</div>
<div class="line">[Sunday 20 February 2011] [13:00:52] &lt;travlr&gt; sustrik: thanks for the help earlier</div>
<div class="line">[Sunday 20 February 2011] [13:02:10] &lt;sustrik&gt;        you are welcome</div>
<div class="line">[Sunday 20 February 2011] [13:02:44] &lt;sustrik&gt;        travlr: if you feel the reference is unclear, feel free to suggest a patch</div>
<div class="line">[Sunday 20 February 2011] [13:05:23] &lt;travlr&gt; i will. i&#8217;m just coming back to my work with zmq after having to totally focus on other stuff for a while.</div>
<div class="line">[Sunday 20 February 2011] [13:05:37] &lt;travlr&gt;  I also have to get the internal api bot working again at <a class="reference external" href="http://travlr.github.com/zeromq2">http://travlr.github.com/zeromq2</a></div>
<div class="line">[Sunday 20 February 2011] [13:06:14] &lt;travlr&gt; as its broken atm</div>
<div class="line">[Sunday 20 February 2011] [13:07:20] &lt;Guthur&gt; is the new API doc only beta at the moment</div>
<div class="line">[Sunday 20 February 2011] [13:07:36] &lt;Guthur&gt; I&#8217;m just wondering why it&#8217;s not linked from the main site</div>
<div class="line">[Sunday 20 February 2011] [13:08:03] &lt;sustrik&gt;        well, pieter have written the generator yesterday</div>
<div class="line">[Sunday 20 February 2011] [13:08:05] &lt;sustrik&gt;        that&#8217;s why</div>
<div class="line">[Sunday 20 February 2011] [13:08:43] &lt;Guthur&gt; ah, ok</div>
<div class="line">[Sunday 20 February 2011] [13:09:12] &lt;Guthur&gt; it does seem very good though</div>
<div class="line">[Sunday 20 February 2011] [13:10:26] &lt;travlr&gt; nice! l like the the new reference links from a simple index.</div>
<div class="line">[Sunday 20 February 2011] [13:10:41] &lt;sustrik&gt;        what&#8217;s particularly nice is that all the released versions are covered</div>
<div class="line">[Sunday 20 February 2011] [13:10:47] &lt;travlr&gt; yup</div>
<div class="line">[Sunday 20 February 2011] [13:20:55] &lt;andrewvc&gt;       Are there any examples of the XML for zmq_queue?</div>
<div class="line">[Sunday 20 February 2011] [13:21:10] &lt;andrewvc&gt;       the manpage is empty of course, and my google-fu is failing me</div>
<div class="line">[Sunday 20 February 2011] [13:26:20] &lt;andrewvc&gt;       nm, figured it out</div>
<div class="line">[Sunday 20 February 2011] [13:53:40] &lt;<a href="#id1203"><span class="problematic" id="id1204">pieterh_</span></a>&gt;       sustrik, mikko and I will arrange to rebuild the docs once a day or so</div>
<div class="line">[Sunday 20 February 2011] [13:55:50] &lt;sustrik&gt;        <a href="#id1205"><span class="problematic" id="id1206">pieterh_</span></a>: great</div>
<div class="line">[Sunday 20 February 2011] [13:56:10] &lt;sustrik&gt;        if you do it twice a day, the docs will be in sync with latest snapshots</div>
<div class="line">[Sunday 20 February 2011] [13:56:13] &lt;<a href="#id1207"><span class="problematic" id="id1208">pieterh_</span></a>&gt;       we&#8217;ve made a ztools git for random tools, incl the rebuild shells scripts</div>
<div class="line">[Sunday 20 February 2011] [13:56:31] &lt;sustrik&gt;        ack</div>
<div class="line">[Sunday 20 February 2011] [13:56:50] &lt;<a href="#id1209"><span class="problematic" id="id1210">pieterh_</span></a>&gt;       let&#8217;s see if people have more comments on the look &amp; feel</div>
<div class="line">[Sunday 20 February 2011] [13:57:01] &lt;<a href="#id1211"><span class="problematic" id="id1212">pieterh_</span></a>&gt;       i already toned it down, darker red, no logo on man pages, etc.</div>
<div class="line">[Sunday 20 February 2011] [13:57:17] &lt;sustrik&gt;        let me see</div>
<div class="line">[Sunday 20 February 2011] [13:57:47] &lt;sustrik&gt;        nice</div>
<div class="line">[Sunday 20 February 2011] [13:57:54] &lt;sustrik&gt;        btw, what about the stable branch, do you have any schedule for doing the fork?</div>
<div class="line">[Sunday 20 February 2011] [13:58:29] &lt;<a href="#id1213"><span class="problematic" id="id1214">pieterh_</span></a>&gt;       next week sometime, I was thinking</div>
<div class="line">[Sunday 20 February 2011] [13:58:33] &lt;sustrik&gt;        great</div>
<div class="line">[Sunday 20 February 2011] [13:59:00] &lt;<a href="#id1215"><span class="problematic" id="id1216">pieterh_</span></a>&gt;       ok, good!</div>
<div class="line">[Sunday 20 February 2011] [13:59:12] &lt;<a href="#id1217"><span class="problematic" id="id1218">pieterh_</span></a>&gt;       people will be happy to see a new stable 2.1.x version</div>
<div class="line">[Sunday 20 February 2011] [13:59:26] &lt;<a href="#id1219"><span class="problematic" id="id1220">pieterh_</span></a>&gt;       so many new goodies :-)</div>
<div class="line">[Sunday 20 February 2011] [13:59:26] &lt;sustrik&gt;        i think so</div>
<div class="line">[Sunday 20 February 2011] [13:59:34] &lt;sustrik&gt;        so will I</div>
<div class="line">[Sunday 20 February 2011] [13:59:49] &lt;<a href="#id1221"><span class="problematic" id="id1222">pieterh_</span></a>&gt;       I&#8217;ll keep the 2.0.x version of the Guide online as well</div>
<div class="line">[Sunday 20 February 2011] [14:00:07] &lt;sustrik&gt;        i like that all the versions are available</div>
<div class="line">[Sunday 20 February 2011] [14:00:20] &lt;sustrik&gt;        ah, the guide</div>
<div class="line">[Sunday 20 February 2011] [14:00:21] &lt;<a href="#id1223"><span class="problematic" id="id1224">pieterh_</span></a>&gt;       yes, people have asked for that...</div>
<div class="line">[Sunday 20 February 2011] [14:00:39] &lt;<a href="#id1225"><span class="problematic" id="id1226">pieterh_</span></a>&gt;       so I will update that for 2.1, and keep the 2.0 version for reference</div>
<div class="line">[Sunday 20 February 2011] [14:00:43] &lt;sustrik&gt;        i&#8217;ve checked it lately and it seemed to cover both 2.0 and 2.1</div>
<div class="line">[Sunday 20 February 2011] [14:01:17] &lt;<a href="#id1227"><span class="problematic" id="id1228">pieterh_</span></a>&gt;       in several places it covers things that were changed</div>
<div class="line">[Sunday 20 February 2011] [14:01:24] &lt;<a href="#id1229"><span class="problematic" id="id1230">pieterh_</span></a>&gt;       e.g. socket migration, socket shutdown</div>
<div class="line">[Sunday 20 February 2011] [14:01:30] &lt;<a href="#id1231"><span class="problematic" id="id1232">pieterh_</span></a>&gt;       needs fixing for 2.1</div>
<div class="line">[Sunday 20 February 2011] [14:01:35] &lt;sustrik&gt;        right</div>
<div class="line">[Sunday 20 February 2011] [14:01:45] &lt;<a href="#id1233"><span class="problematic" id="id1234">pieterh_</span></a>&gt;       hmm, perhaps better is a section with explicit differences</div>
<div class="line">[Sunday 20 February 2011] [14:01:57] &lt;sustrik&gt;        it&#8217;s up to you</div>
<div class="line">[Sunday 20 February 2011] [14:02:19] &lt;<a href="#id1235"><span class="problematic" id="id1236">pieterh_</span></a>&gt;       i think as a programmer, what I want is &#8220;what changed in 2.1 and what does this mean for my code?&#8221;</div>
<div class="line">[Sunday 20 February 2011] [14:02:28] &lt;<a href="#id1237"><span class="problematic" id="id1238">pieterh_</span></a>&gt;       expanded release notes with some jokes</div>
<div class="line">[Sunday 20 February 2011] [14:02:37] &lt;sustrik&gt;        sounds good</div>
<div class="line">[Sunday 20 February 2011] [14:02:42] &lt;<a href="#id1239"><span class="problematic" id="id1240">pieterh_</span></a>&gt;       ok!</div>
<div class="line">[Sunday 20 February 2011] [14:03:27] &lt;mikko&gt;  good stuff</div>
<div class="line">[Sunday 20 February 2011] [14:03:40] &lt;mikko&gt;  do you have the build script online already?</div>
<div class="line">[Sunday 20 February 2011] [14:03:43] &lt;mikko&gt;  the documentation one</div>
<div class="line">[Sunday 20 February 2011] [14:04:32] &lt;mikko&gt;  my todo-list is almost empty now</div>
<div class="line">[Sunday 20 February 2011] [14:04:39] &lt;mikko&gt;  apart from testing openpgm on solaris</div>
<div class="line">[Sunday 20 February 2011] [14:06:14] &lt;<a href="#id1241"><span class="problematic" id="id1242">pieterh_</span></a>&gt;       mikko: I&#8217;m documenting / cleaning it up, will publish it asap</div>
<div class="line">[Sunday 20 February 2011] [14:07:20] &lt;mikko&gt;  <a href="#id1243"><span class="problematic" id="id1244">pieterh_</span></a>: cool</div>
<div class="line">[Sunday 20 February 2011] [14:07:30] &lt;mikko&gt;  any other periodic things that should be automated?</div>
<div class="line">[Sunday 20 February 2011] [14:08:18] &lt;<a href="#id1245"><span class="problematic" id="id1246">pieterh_</span></a>&gt;       mikko the machine</div>
<div class="line">[Sunday 20 February 2011] [14:08:26] &lt;<a href="#id1247"><span class="problematic" id="id1248">pieterh_</span></a>&gt;       no todo list can survive</div>
<div class="line">[Sunday 20 February 2011] [14:08:28] &lt;Guthur&gt; <a href="#id1249"><span class="problematic" id="id1250">pieterh_</span></a>, my first impression of the new api doc is that it is very good</div>
<div class="line">[Sunday 20 February 2011] [14:08:33] &lt;Guthur&gt; well done</div>
<div class="line">[Sunday 20 February 2011] [14:08:51] &lt;<a href="#id1251"><span class="problematic" id="id1252">pieterh_</span></a>&gt;       Guthur, I&#8217;m glad you like it...</div>
<div class="line">[Sunday 20 February 2011] [14:09:16] &lt;Guthur&gt; I&#8217;d imagine most will have similar impressions</div>
<div class="line">[Sunday 20 February 2011] [14:09:21] &lt;<a href="#id1253"><span class="problematic" id="id1254">pieterh_</span></a>&gt;       not too painful to read? it&#8217;s the usual cortex red scheme but toned down a little</div>
<div class="line">[Sunday 20 February 2011] [14:09:48] &lt;Guthur&gt; nope the styling is very good, for my tastes</div>
<div class="line">[Sunday 20 February 2011] [14:10:12] &lt;mikko&gt;  lestrrat: are you there?</div>
<div class="line">[Sunday 20 February 2011] [14:10:15] &lt;Guthur&gt; must dash though</div>
<div class="line">[Sunday 20 February 2011] [14:13:11] &lt;<a href="#id1255"><span class="problematic" id="id1256">pieterh_</span></a>&gt;       mikko: you&#8217;ll need to get an API key from Wikidot</div>
<div class="line">[Sunday 20 February 2011] [14:13:27] &lt;<a href="#id1257"><span class="problematic" id="id1258">pieterh_</span></a>&gt;       it&#8217;s tied to your account</div>
<div class="line">[Sunday 20 February 2011] [14:13:51] &lt;<a href="#id1259"><span class="problematic" id="id1260">pieterh_</span></a>&gt;       if you don&#8217;t already have a Wikidot.com account, register and tell me your account name</div>
<div class="line">[Sunday 20 February 2011] [14:14:00] &lt;<a href="#id1261"><span class="problematic" id="id1262">pieterh_</span></a>&gt;       then I&#8217;ll get them to give you API access and a key</div>
<div class="line">[Sunday 20 February 2011] [14:14:15] &lt;mikko&gt;  mkoppanen</div>
<div class="line">[Sunday 20 February 2011] [14:17:50] &lt;<a href="#id1263"><span class="problematic" id="id1264">pieterh_</span></a>&gt;       ok</div>
<div class="line">[Sunday 20 February 2011] [14:49:38] &lt;<a href="#id1265"><span class="problematic" id="id1266">pieterh_</span></a>&gt;       mikko: ok, the tool is documented and packaged for reuse</div>
<div class="line">[Sunday 20 February 2011] [15:42:20] &lt;jobytaffey&gt;     Hi, I was wondering if anyone can help out. I&#8217;m new to 0MQ. I&#8217;m trying to write a TCP server which accepts many incoming connections, reads fixed sized packets from TCP and generates 0MQ messages for handling somewhere else. I&#8217;m using libev and the receive side seems fine. But, for sending (receive 0MQ message then put it onto a TCP socket), it looks like I need to zmq_poll() when libev gives me EV_WRITE, is there a better way of doing this? A zmq ca</div>
<div class="line">[Sunday 20 February 2011] [15:43:31] &lt;mikko&gt;  jobytaffey: yes</div>
<div class="line">[Sunday 20 February 2011] [15:43:47] &lt;mikko&gt;  jobytaffey: you should schedule libev EV_WRITE only if you got message coming from zeromq</div>
<div class="line">[Sunday 20 February 2011] [15:44:00] &lt;mikko&gt;  so roughly the following (assuming zeromq 2.1.x)</div>
<div class="line">[Sunday 20 February 2011] [15:44:24] &lt;mikko&gt;  you schedule constant read event for incoming tcp messages and incoming zeromq messages</div>
<div class="line">[Sunday 20 February 2011] [15:44:48] &lt;mikko&gt;  if you get tcp message in you schedule a EV_WRITE for zeromq out socket</div>
<div class="line">[Sunday 20 February 2011] [15:45:01] &lt;mikko&gt;  and if you get zeromq message in you schedule EV_WRITE for tcp socket</div>
<div class="line">[Sunday 20 February 2011] [15:45:57] &lt;jobytaffey&gt;     Ok, that makes sense. I didn&#8217;t see anything in the API for getting at zeromq&#8217;s underlying sockets though?</div>
<div class="line">[Sunday 20 February 2011] [15:46:07] &lt;mikko&gt;  jobytaffey: it&#8217;s a feature in 2.1.x</div>
<div class="line">[Sunday 20 February 2011] [15:46:10] &lt;mikko&gt;  give me a sec</div>
<div class="line">[Sunday 20 February 2011] [15:46:38] &lt;mikko&gt;  jobytaffey: <a class="reference external" href="http://api.zero.mq/master:zmq-getsockopt">http://api.zero.mq/master:zmq-getsockopt</a> see ZMQ_FD and ZMQ_EVENTS there</div>
<div class="line">[Sunday 20 February 2011] [15:48:50] &lt;jobytaffey&gt;     That looks like what I need. Thanks.</div>
<div class="line">[Sunday 20 February 2011] [15:49:12] &lt;mikko&gt;  it doesn&#8217;t make sense to schedule EV_WRITE event unless you know that you have something to write</div>
<div class="line">[Sunday 20 February 2011] [17:52:41] &lt;lestrrat&gt;       wassup?</div>
<div class="line">[Sunday 20 February 2011] [17:54:03] &lt;sam`&gt;   not much</div>
<div class="line">[Sunday 20 February 2011] [18:05:24] &lt;lestrrat&gt;       oh I get it, there&#8217;s a build failure. <a class="reference external" href="http://build.zero.mq/job/ZeroMQPerl-master_ZeroMQ2-master_GCC/313/">http://build.zero.mq/job/ZeroMQPerl-master_ZeroMQ2-master_GCC/313/</a></div>
<div class="line">[Sunday 20 February 2011] [18:05:39] &lt;lestrrat&gt;       mikko: I didn&#8217;t change anything in the last few days</div>
<div class="line">[Sunday 20 February 2011] [18:48:31] &lt;mikko&gt;  lestrrat: ok, will rerun to see</div>
<div class="line">[Sunday 20 February 2011] [18:49:18] &lt;mikko&gt;  succeeds</div>
<div class="line">[Sunday 20 February 2011] [18:49:27] &lt;mikko&gt;  probably an intermittent failure</div>
<div class="line">[Sunday 20 February 2011] [21:54:48] &lt;JStoker&gt;        Hi. Is there any debian packages for zeromq? :)</div>
<div class="line">[Sunday 20 February 2011] [21:55:04] &lt;sam`&gt;   JStoker: yes, i think there&#8217;s a 2.0.10 package</div>
<div class="line">[Sunday 20 February 2011] [21:55:07] &lt;sam`&gt;   (at least in sid)</div>
<div class="line">[Sunday 20 February 2011] [21:56:03] &lt;JStoker&gt;        Aah. Thanks, I&#8217;ll try to work out a way of coaxing that into my squeeze install. :)</div>
<div class="line">[Sunday 20 February 2011] [21:56:31] &lt;sam`&gt;   JStoker: <a class="reference external" href="http://packages.debian.org/libzmq">http://packages.debian.org/libzmq</a></div>
<div class="line">[Sunday 20 February 2011] [21:56:57] &lt;sam`&gt;   keep in mind though that 2.1.x is probably a better choice, it fixes a lot of things</div>
<div class="line">[Sunday 20 February 2011] [21:57:51] &lt;JStoker&gt;        Ah. Hm.</div>
<div class="line">[Sunday 20 February 2011] [21:58:39] &lt;JStoker&gt;        The debian machine works fine with compiling, I guess. The ubuntu one on the other hand seems to have a bit of a dependency failure, so isn&#8217;t able to actually compile it itself.</div>
<div class="line">[Sunday 20 February 2011] [21:58:48] &lt;sam`&gt;   ah?</div>
<div class="line">[Sunday 20 February 2011] [21:59:11] &lt;sam`&gt;   libzmq is rather easy on the dependencies AFAIR</div>
<div class="line">[Sunday 20 February 2011] [21:59:17] &lt;sam`&gt;   what problem are you facing?</div>
<div class="line">[Sunday 20 February 2011] [21:59:20] &lt;JStoker&gt;        Requires uuid-dev, but &#8220;libuuid1 (= 2.17.2-0ubuntu1) but 2.17.2-0ubuntu1.10.04.2 is to be installed&#8221;</div>
<div class="line">[Sunday 20 February 2011] [21:59:53] &lt;sam`&gt;   install the uuid-dev version you can, and build zeromq yourself</div>
<div class="line">[Sunday 20 February 2011] [21:59:58] &lt;sam`&gt;   you should be fine</div>
<div class="line">[Sunday 20 February 2011] [22:00:15] &lt;JStoker&gt;        I just tried <cite>apt-get install uuid-dev</cite>, didn&#8217;t specify a version :/</div>
<div class="line">[Sunday 20 February 2011] [22:01:44] &lt;sam`&gt;   try with aptitude</div>
<div class="line">[Sunday 20 February 2011] [22:01:53] &lt;sam`&gt;   it&#8217;s usually smarter when resolving dependencies</div>
<div class="line">[Sunday 20 February 2011] [22:02:15] &lt;JStoker&gt;        I&#8217;ve just forced it to a different version, which has seemed to help... (it&#8217;s installing, at least)</div>
<div class="line">[Sunday 20 February 2011] [22:13:29] &lt;seb`&gt;   JStoker: it should be fine</div>
<div class="line">[Sunday 20 February 2011] [22:14:58] &lt;seb`&gt;   JStoker: for ubuntu you should use this ppa: <a class="reference external" href="https://launchpad.net/~chris-lea/+archive/zeromq">https://launchpad.net/~chris-lea/+archive/zeromq</a></div>
<div class="line">[Sunday 20 February 2011] [22:15:08] &lt;seb`&gt;   but it&#8217;s only 2.0.10:-(</div>
<div class="line">[Sunday 20 February 2011] [22:17:14] &lt;JStoker&gt;        That&#8217;s the ub... oh. I just went and built my own package out of git://github.com/zeromq/zeromq2.git. Whoops.</div>
<div class="line">[Sunday 20 February 2011] [22:17:40] &lt;JStoker&gt;        seb`, Question. Are 2.0.10 and 2.1.x compatable?</div>
<div class="line">[Sunday 20 February 2011] [22:18:37] &lt;JStoker&gt;        That does report itself as 2.1.1 though, so no issues. :)</div>
<div class="line">[Sunday 20 February 2011] [22:19:34] &lt;seb`&gt;   JStoker: It&#8217;s compatible yes</div>
<div class="line">[Sunday 20 February 2011] [22:19:42] &lt;seb`&gt;   at least my code works on both</div>
<div class="line">[Sunday 20 February 2011] [22:20:03] &lt;seb`&gt;   but 2.1 is the way to go IMHO</div>
<div class="line">[Sunday 20 February 2011] [22:20:20] &lt;seb`&gt;   I&#8217;m still using 2.0.10 in production right now</div>
<div class="line">[Sunday 20 February 2011] [22:20:30] &lt;JStoker&gt;        oh well. Got the difficult system running with 2.1 anyway, so might as well continue with it on the debian one.</div>
<div class="line">[Monday 21 February 2011] [05:23:28] &lt;CIA-21&gt; zeromq2: 03Martin Sustrik 07master * r5c09311 10/ (src/pgm_socket.cpp src/pgm_socket.hpp):</div>
<div class="line">[Monday 21 February 2011] [05:23:28] &lt;CIA-21&gt; zeromq2: Computation of buffer size for PGM fixed.</div>
<div class="line">[Monday 21 February 2011] [05:23:28] &lt;CIA-21&gt; zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/i9Ptxs">http://bit.ly/i9Ptxs</a></div>
<div class="line">[Monday 21 February 2011] [05:23:54] &lt;pieter_hintjens&gt;        sustrik, I&#8217;m seeing zmq_term just exit the process</div>
<div class="line">[Monday 21 February 2011] [05:24:00] &lt;pieter_hintjens&gt;        does that sound normal?</div>
<div class="line">[Monday 21 February 2011] [05:24:21] &lt;sustrik&gt;        no</div>
<div class="line">[Monday 21 February 2011] [05:24:35] &lt;sustrik&gt;        do you have a test case</div>
<div class="line">[Monday 21 February 2011] [05:24:36] &lt;sustrik&gt;        ?</div>
<div class="line">[Monday 21 February 2011] [05:24:38] &lt;pieter_hintjens&gt;        trying to make some of the Guide examples work with 2.1...</div>
<div class="line">[Monday 21 February 2011] [05:24:46] &lt;pieter_hintjens&gt;        yes, I have a test case... I&#8217;ll email it to you</div>
<div class="line">[Monday 21 February 2011] [05:24:49] &lt;sustrik&gt;        thanks</div>
<div class="line">[Monday 21 February 2011] [05:25:55] &lt;pieter_hintjens&gt;        <a class="reference external" href="https://gist.github.com/836902">https://gist.github.com/836902</a></div>
<div class="line">[Monday 21 February 2011] [05:26:10] &lt;pieter_hintjens&gt;        also some problems transferring messages but I&#8217;ll break that down</div>
<div class="line">[Monday 21 February 2011] [05:27:28] &lt;sustrik&gt;        ok</div>
<div class="line">[Monday 21 February 2011] [05:28:13] &lt;mikko&gt;  good morning</div>
<div class="line">[Monday 21 February 2011] [05:28:30] &lt;sustrik&gt;        morning</div>
<div class="line">[Monday 21 February 2011] [05:29:33] &lt;pieter_hintjens&gt;        hi mikko :-)</div>
<div class="line">[Monday 21 February 2011] [05:34:58] &lt;pieter_hintjens&gt;        sustrik: you didn&#8217;t add my log on unroutable messages...</div>
<div class="line">[Monday 21 February 2011] [05:35:10] &lt;sustrik&gt;        nope</div>
<div class="line">[Monday 21 February 2011] [05:35:23] &lt;pieter_hintjens&gt;        any particular reason?</div>
<div class="line">[Monday 21 February 2011] [05:35:31] &lt;sustrik&gt;        it&#8217;s a standard behaviour</div>
<div class="line">[Monday 21 February 2011] [05:35:38] &lt;sustrik&gt;        nothing special to log</div>
<div class="line">[Monday 21 February 2011] [05:35:47] &lt;sustrik&gt;        it&#8217;s like dropping an IP packet</div>
<div class="line">[Monday 21 February 2011] [05:35:58] &lt;pieter_hintjens&gt;        i violently disagree</div>
<div class="line">[Monday 21 February 2011] [05:36:09] &lt;pieter_hintjens&gt;        debugging dropped messages is one of the major pains</div>
<div class="line">[Monday 21 February 2011] [05:36:54] &lt;pieter_hintjens&gt;        xrep dropping a malformed envelope is not like dropping an IP packet</div>
<div class="line">[Monday 21 February 2011] [05:37:14] &lt;pieter_hintjens&gt;        it&#8217;s a sign of application error, and that information is particularly valuable to the developer</div>
<div class="line">[Monday 21 February 2011] [05:37:15] &lt;sustrik&gt;        yes, we should log malformed envelope</div>
<div class="line">[Monday 21 February 2011] [05:37:25] &lt;pieter_hintjens&gt;        that is what I had done...</div>
<div class="line">[Monday 21 February 2011] [05:37:35] &lt;sustrik&gt;        not dropping a well-formed envelope though</div>
<div class="line">[Monday 21 February 2011] [05:37:43] &lt;pieter_hintjens&gt;        malformed = no such address, sorry</div>
<div class="line">[Monday 21 February 2011] [05:37:44] &lt;sustrik&gt;        well-formed message i mean</div>
<div class="line">[Monday 21 February 2011] [05:37:52] &lt;sustrik&gt;        it&#8217;s on critical path</div>
<div class="line">[Monday 21 February 2011] [05:38:03] &lt;pieter_hintjens&gt;        errors are exceptional;</div>
<div class="line">[Monday 21 February 2011] [05:38:04] &lt;sustrik&gt;        if you need it for debugging</div>
<div class="line">[Monday 21 February 2011] [05:38:17] &lt;sustrik&gt;        we can add some special debug functionality</div>
<div class="line">[Monday 21 February 2011] [05:38:17] &lt;pieter_hintjens&gt;        when you start to use xrep this is a major pain</div>
<div class="line">[Monday 21 February 2011] [05:38:29] &lt;pieter_hintjens&gt;        errors -&gt; silence</div>
<div class="line">[Monday 21 February 2011] [05:38:38] &lt;sustrik&gt;        yes</div>
<div class="line">[Monday 21 February 2011] [05:38:40] &lt;pieter_hintjens&gt;        the only way I know to debug is to hack 0MQ to print something</div>
<div class="line">[Monday 21 February 2011] [05:38:46] &lt;pieter_hintjens&gt;        it&#8217;s a <em>major</em> annoyance</div>
<div class="line">[Monday 21 February 2011] [05:38:49] &lt;sustrik&gt;        it means that the original requester is no longer available</div>
<div class="line">[Monday 21 February 2011] [05:38:52] &lt;pieter_hintjens&gt;        no</div>
<div class="line">[Monday 21 February 2011] [05:38:53] &lt;sustrik&gt;        so the reply is dropped</div>
<div class="line">[Monday 21 February 2011] [05:38:57] &lt;pieter_hintjens&gt;        it means there&#8217;s a bug in my app code</div>
<div class="line">[Monday 21 February 2011] [05:39:01] &lt;sustrik&gt;        ?</div>
<div class="line">[Monday 21 February 2011] [05:39:11] &lt;pieter_hintjens&gt;        i assume you&#8217;ve never written code that uses xrep then</div>
<div class="line">[Monday 21 February 2011] [05:39:26] &lt;sustrik&gt;        i did</div>
<div class="line">[Monday 21 February 2011] [05:39:29] &lt;sustrik&gt;        queue device :)</div>
<div class="line">[Monday 21 February 2011] [05:39:40] &lt;pieter_hintjens&gt;        well, I&#8217;ve done a lot of work using xrep</div>
<div class="line">[Monday 21 February 2011] [05:39:43] &lt;pieter_hintjens&gt;        and it&#8217;s tricky</div>
<div class="line">[Monday 21 February 2011] [05:40:01] &lt;pieter_hintjens&gt;        and the classic 80% error is a bad envelope (valid for 0MQ but where the routing information is wrongly placed)</div>
<div class="line">[Monday 21 February 2011] [05:40:10] &lt;pieter_hintjens&gt;        0MQ absolutely must report this</div>
<div class="line">[Monday 21 February 2011] [05:40:15] &lt;pieter_hintjens&gt;        ask on the list if you&#8217;re not sure</div>
<div class="line">[Monday 21 February 2011] [05:40:25] &lt;pieter_hintjens&gt;        it&#8217;s not a critical path</div>
<div class="line">[Monday 21 February 2011] [05:40:33] &lt;pieter_hintjens&gt;        there are not millions of malformed addresses per second</div>
<div class="line">[Monday 21 February 2011] [05:40:36] &lt;pieter_hintjens&gt;        no way</div>
<div class="line">[Monday 21 February 2011] [05:40:44] &lt;sustrik&gt;        how would you distinguish it from simply dropping the packet because the destination is simply dead atm</div>
<div class="line">[Monday 21 February 2011] [05:40:47] &lt;mikko&gt;  pieter_hintjens: this is pretty classic as well <a class="reference external" href="http://bit.ly/g6RXaS?r=td">http://bit.ly/g6RXaS?r=td</a></div>
<div class="line">[Monday 21 February 2011] [05:40:51] &lt;pieter_hintjens&gt;        same thing, sustrik</div>
<div class="line">[Monday 21 February 2011] [05:40:52] &lt;mikko&gt;  might want to feature in the guide</div>
<div class="line">[Monday 21 February 2011] [05:40:57] &lt;pieter_hintjens&gt;        not critical path, that&#8217;s the first thing</div>
<div class="line">[Monday 21 February 2011] [05:41:06] &lt;pieter_hintjens&gt;        this is an exception and can be logged</div>
<div class="line">[Monday 21 February 2011] [05:41:28] &lt;pieter_hintjens&gt;        mikko: yes, ipc has some gotchas</div>
<div class="line">[Monday 21 February 2011] [05:41:41] &lt;pieter_hintjens&gt;        i&#8217;m trying to debug a case now and the &#8216;silence when dropping messages&#8217; just cost me an hour</div>
<div class="line">[Monday 21 February 2011] [05:41:45] &lt;pieter_hintjens&gt;        bleh</div>
<div class="line">[Monday 21 February 2011] [05:42:08] &lt;sustrik&gt;        let&#8217;s add some debugging code then</div>
<div class="line">[Monday 21 February 2011] [05:42:16] &lt;pieter_hintjens&gt;        sustrik: why? you have a mechanism that&#8217;s ideal</div>
<div class="line">[Monday 21 February 2011] [05:42:29] &lt;pieter_hintjens&gt;        as a user I&#8217;m asking formally that syslog be used to report bad addresses</div>
<div class="line">[Monday 21 February 2011] [05:42:37] &lt;sustrik&gt;        the problem is that a node being offline is a pretty common occurence</div>
<div class="line">[Monday 21 February 2011] [05:42:40] &lt;pieter_hintjens&gt;        it will also help debug topology errors</div>
<div class="line">[Monday 21 February 2011] [05:42:42] &lt;sustrik&gt;        at least on wan</div>
<div class="line">[Monday 21 February 2011] [05:42:48] &lt;pieter_hintjens&gt;        &#8216;pretty common&#8217; is not a critical path</div>
<div class="line">[Monday 21 February 2011] [05:42:53] &lt;pieter_hintjens&gt;        wan is not our environment today</div>
<div class="line">[Monday 21 February 2011] [05:43:00] &lt;pieter_hintjens&gt;        these are bogus arguments afaics, sorry</div>
<div class="line">[Monday 21 February 2011] [05:43:03] &lt;sustrik&gt;        i&#8217;m planning for the future</div>
<div class="line">[Monday 21 February 2011] [05:43:15] &lt;pieter_hintjens&gt;        you&#8217;re making it unnecessarily difficult for the present</div>
<div class="line">[Monday 21 February 2011] [05:43:30] &lt;pieter_hintjens&gt;        at which point the future becomes less certain at all</div>
<div class="line">[Monday 21 February 2011] [05:43:46] &lt;pieter_hintjens&gt;        if people cannot easily debug routing issues and topology issues they will lose confidence in 0MQ</div>
<div class="line">[Monday 21 February 2011] [05:44:11] &lt;pieter_hintjens&gt;        if you actually hit this <em>theoretical</em> issue of millions of WAN disconnections</div>
<div class="line">[Monday 21 February 2011] [05:44:22] &lt;pieter_hintjens&gt;        <em>then</em> you can solve that problem in the correct fashion</div>
<div class="line">[Monday 21 February 2011] [05:44:36] &lt;pieter_hintjens&gt;        refusing to log this information today is not a solution</div>
<div class="line">[Monday 21 February 2011] [05:44:48] &lt;pieter_hintjens&gt;        you would probably want to reduce the logging level on specific sockets</div>
<div class="line">[Monday 21 February 2011] [05:44:55] &lt;pieter_hintjens&gt;        in 3 years&#8217; time</div>
<div class="line">[Monday 21 February 2011] [05:44:56] &lt;sustrik&gt;        ok, the real problem is that once i add that kind of thing, people start using it to drive their business logic</div>
<div class="line">[Monday 21 February 2011] [05:45:02] &lt;pieter_hintjens&gt;        it&#8217;s syslog</div>
<div class="line">[Monday 21 February 2011] [05:45:11] &lt;pieter_hintjens&gt;        syslog cannot be used for presence</div>
<div class="line">[Monday 21 February 2011] [05:45:16] &lt;pieter_hintjens&gt;        we know this, it&#8217;s not a risk</div>
<div class="line">[Monday 21 February 2011] [05:45:22] &lt;sustrik&gt;        which means the applications would become not scalable outside of a lan</div>
<div class="line">[Monday 21 February 2011] [05:45:30] &lt;pieter_hintjens&gt;        ?</div>
<div class="line">[Monday 21 February 2011] [05:45:39] &lt;pieter_hintjens&gt;        sorry, let&#8217;s kill inproc then</div>
<div class="line">[Monday 21 February 2011] [05:45:44] &lt;pieter_hintjens&gt;        and multicast</div>
<div class="line">[Monday 21 February 2011] [05:45:44] &lt;sustrik&gt;        ?</div>
<div class="line">[Monday 21 February 2011] [05:45:50] &lt;pieter_hintjens&gt;        cause people might depend on that</div>
<div class="line">[Monday 21 February 2011] [05:45:57] &lt;pieter_hintjens&gt;        and not be scalable outside the lan</div>
<div class="line">[Monday 21 February 2011] [05:46:00] &lt;pieter_hintjens&gt;        seriously?</div>
<div class="line">[Monday 21 February 2011] [05:46:08] &lt;sustrik&gt;        nope, you can scale inproc and multicast by replacing them with tcp</div>
<div class="line">[Monday 21 February 2011] [05:46:16] &lt;pieter_hintjens&gt;        sigh</div>
<div class="line">[Monday 21 February 2011] [05:46:26] &lt;sustrik&gt;        when you start using logs in your business logic</div>
<div class="line">[Monday 21 February 2011] [05:46:29] &lt;pieter_hintjens&gt;        how?</div>
<div class="line">[Monday 21 February 2011] [05:46:30] &lt;sustrik&gt;        you are screwed</div>
<div class="line">[Monday 21 February 2011] [05:46:38] &lt;pieter_hintjens&gt;        how do you use logs in your business logic?</div>
<div class="line">[Monday 21 February 2011] [05:46:38] &lt;sustrik&gt;        as the logs are local</div>
<div class="line">[Monday 21 February 2011] [05:46:57] &lt;pieter_hintjens&gt;        syslog is async</div>
<div class="line">[Monday 21 February 2011] [05:46:58] &lt;sustrik&gt;        1. send x to y</div>
<div class="line">[Monday 21 February 2011] [05:47:08] &lt;pieter_hintjens&gt;        you cannot rely on it for business logic</div>
<div class="line">[Monday 21 February 2011] [05:47:14] &lt;pieter_hintjens&gt;        we already discussed this on the list</div>
<div class="line">[Monday 21 February 2011] [05:47:16] &lt;sustrik&gt;        2. if i get &#8220;non routable&#8221; error</div>
<div class="line">[Monday 21 February 2011] [05:47:23] &lt;sustrik&gt;        3. send it somewhere else</div>
<div class="line">[Monday 21 February 2011] [05:47:35] &lt;sustrik&gt;        yes, i&#8217;ve discussed it many times</div>
<div class="line">[Monday 21 February 2011] [05:47:38] &lt;pieter_hintjens&gt;        so people can abuse a tool</div>
<div class="line">[Monday 21 February 2011] [05:47:45] &lt;pieter_hintjens&gt;        that does not mean you throw away the tool</div>
<div class="line">[Monday 21 February 2011] [05:47:47] &lt;sustrik&gt;        and each time people asked for this kind of thing</div>
<div class="line">[Monday 21 February 2011] [05:47:49] &lt;pieter_hintjens&gt;        you educate them</div>
<div class="line">[Monday 21 February 2011] [05:47:57] &lt;sustrik&gt;        i discussed it with them</div>
<div class="line">[Monday 21 February 2011] [05:48:13] &lt;pieter_hintjens&gt;        education, not censorship martin</div>
<div class="line">[Monday 21 February 2011] [05:48:17] &lt;sustrik&gt;        and after some conversation it become obvious thay want to drive their business logic</div>
<div class="line">[Monday 21 February 2011] [05:48:21] &lt;pieter_hintjens&gt;        you do not actually know what people need</div>
<div class="line">[Monday 21 February 2011] [05:48:26] &lt;sustrik&gt;        none a single person wanting just logging</div>
<div class="line">[Monday 21 February 2011] [05:48:31] &lt;pieter_hintjens&gt;        i want just logging</div>
<div class="line">[Monday 21 February 2011] [05:48:38] &lt;sustrik&gt;        it&#8217;s 100% misuse rate</div>
<div class="line">[Monday 21 February 2011] [05:48:44] &lt;sustrik&gt;        99% then</div>
<div class="line">[Monday 21 February 2011] [05:49:24] &lt;sustrik&gt;        ok, an idea</div>
<div class="line">[Monday 21 February 2011] [05:49:47] &lt;sustrik&gt;        what about having a &#8220;debug&#8221; build which would log this kind of errors</div>
<div class="line">[Monday 21 February 2011] [05:49:51] &lt;pieter_hintjens&gt;        and if people want to use routing failures in their app, why not?</div>
<div class="line">[Monday 21 February 2011] [05:49:54] &lt;sustrik&gt;        and release build that won&#8217;t</div>
<div class="line">[Monday 21 February 2011] [05:49:55] &lt;sustrik&gt;        ?</div>
<div class="line">[Monday 21 February 2011] [05:49:57] &lt;pieter_hintjens&gt;        hang on</div>
<div class="line">[Monday 21 February 2011] [05:50:03] &lt;sustrik&gt;        it doesn&#8217;t scale</div>
<div class="line">[Monday 21 February 2011] [05:50:07] &lt;pieter_hintjens&gt;        I&#8217;m challenging your assertion that using this information won&#8217;t scale</div>
<div class="line">[Monday 21 February 2011] [05:50:19] &lt;pieter_hintjens&gt;        if I make a broker that uses this</div>
<div class="line">[Monday 21 February 2011] [05:50:22] &lt;pieter_hintjens&gt;        the broker will scale fine</div>
<div class="line">[Monday 21 February 2011] [05:50:58] &lt;pieter_hintjens&gt;        it&#8217;s like getting disconnection alerts</div>
<div class="line">[Monday 21 February 2011] [05:51:04] &lt;sustrik&gt;        wait a sec</div>
<div class="line">[Monday 21 February 2011] [05:51:08] &lt;sustrik&gt;        let me explain</div>
<div class="line">[Monday 21 February 2011] [05:51:22] &lt;sustrik&gt;        say you have a server (XREP)</div>
<div class="line">[Monday 21 February 2011] [05:51:27] &lt;sustrik&gt;        and clients (XREQ)</div>
<div class="line">[Monday 21 February 2011] [05:52:07] &lt;sustrik&gt;        the server uses sys://log to find out whether clients are disconnected</div>
<div class="line">[Monday 21 February 2011] [05:52:20] &lt;pieter_hintjens&gt;        yes?</div>
<div class="line">[Monday 21 February 2011] [05:52:37] &lt;sustrik&gt;        when it finds out, it will do something relevant, like allert the operator or somesuch</div>
<div class="line">[Monday 21 February 2011] [05:52:51] &lt;pieter_hintjens&gt;        you mean ... log a message somewhere else?</div>
<div class="line">[Monday 21 February 2011] [05:53:05] &lt;pieter_hintjens&gt;        on the operator console, for example...</div>
<div class="line">[Monday 21 February 2011] [05:53:07] &lt;sustrik&gt;        i mean, initiate some other business process</div>
<div class="line">[Monday 21 February 2011] [05:53:12] &lt;sustrik&gt;        like sending the message by DHL</div>
<div class="line">[Monday 21 February 2011] [05:53:23] &lt;pieter_hintjens&gt;        ? this is your example?</div>
<div class="line">[Monday 21 February 2011] [05:53:38] &lt;pieter_hintjens&gt;        business logic would be</div>
<div class="line">[Monday 21 February 2011] [05:53:43] &lt;sustrik&gt;        or placing a message on dlq</div>
<div class="line">[Monday 21 February 2011] [05:53:47] &lt;pieter_hintjens&gt;        - discover principal connection is dead</div>
<div class="line">[Monday 21 February 2011] [05:53:52] &lt;pieter_hintjens&gt;        - switch over to backup connection</div>
<div class="line">[Monday 21 February 2011] [05:53:53] &lt;sustrik&gt;        or running a special repair script</div>
<div class="line">[Monday 21 February 2011] [05:54:12] &lt;sustrik&gt;        any business logic will do</div>
<div class="line">[Monday 21 February 2011] [05:54:12] &lt;sustrik&gt;        now</div>
<div class="line">[Monday 21 February 2011] [05:54:20] &lt;sustrik&gt;        the company grows</div>
<div class="line">[Monday 21 February 2011] [05:54:29] &lt;sustrik&gt;        and have several offices all over the world</div>
<div class="line">[Monday 21 February 2011] [05:54:36] &lt;sustrik&gt;        it wants to federate</div>
<div class="line">[Monday 21 February 2011] [05:54:46] &lt;sustrik&gt;        so they place a queue device at each location</div>
<div class="line">[Monday 21 February 2011] [05:55:06] &lt;pieter_hintjens&gt;        sustrik, you have device obsession</div>
<div class="line">[Monday 21 February 2011] [05:55:12] &lt;sustrik&gt;        now imagine an client at point A invoking a service at point B</div>
<div class="line">[Monday 21 February 2011] [05:55:27] &lt;pieter_hintjens&gt;        people do not, ime, use the standard devices except as a stepping stone while they&#8217;re learning 0MQ</div>
<div class="line">[Monday 21 February 2011] [05:55:36] &lt;sustrik&gt;        the connection to A may be perfectly ok, but the client may be dead</div>
<div class="line">[Monday 21 February 2011] [05:55:36] &lt;pieter_hintjens&gt;        they build their own devices, = brokers</div>
<div class="line">[Monday 21 February 2011] [05:55:47] &lt;sustrik&gt;        the same thing</div>
<div class="line">[Monday 21 February 2011] [05:56:10] &lt;sustrik&gt;        the problem is that the &#8220;cannot route&#8221; error works in hop-by-hop fashion</div>
<div class="line">[Monday 21 February 2011] [05:56:13] &lt;pieter_hintjens&gt;        i really can&#8217;t swallow your chain of logic</div>
<div class="line">[Monday 21 February 2011] [05:56:28] &lt;pieter_hintjens&gt;        it is based on the assumption that all 0MQ applications today will one day scale to the WAN</div>
<div class="line">[Monday 21 February 2011] [05:56:34] &lt;sustrik&gt;        so the error you get is &#8216;cannot route to next hop&#8217;</div>
<div class="line">[Monday 21 February 2011] [05:56:40] &lt;sustrik&gt;        instead of &#8216;message is unroutable&#8217;</div>
<div class="line">[Monday 21 February 2011] [05:56:42] &lt;pieter_hintjens&gt;        which is true for about 0.001% of cases, maybe</div>
<div class="line">[Monday 21 February 2011] [05:57:04] &lt;pieter_hintjens&gt;        99.999% of today&#8217;s apps (and those written for the next two years) will do what they do, and basta</div>
<div class="line">[Monday 21 February 2011] [05:57:10] &lt;pieter_hintjens&gt;        that is our constituency</div>
<div class="line">[Monday 21 February 2011] [05:57:32] &lt;sustrik&gt;        if IP folks would think that way Internet would interconnect the original 3 machines still :)</div>
<div class="line">[Monday 21 February 2011] [05:57:36] &lt;pieter_hintjens&gt;        trying to stop people writing those apps any way they can is counter-productive</div>
<div class="line">[Monday 21 February 2011] [05:57:43] &lt;pieter_hintjens&gt;        i&#8217;m not a luddite, please</div>
<div class="line">[Monday 21 February 2011] [05:58:01] &lt;pieter_hintjens&gt;        and you are NOT reinventing the Internet, don&#8217;t imagine that</div>
<div class="line">[Monday 21 February 2011] [05:58:18] &lt;pieter_hintjens&gt;        I&#8217;m asking for basic tools to make today&#8217;s problem slightly easier to solve</div>
<div class="line">[Monday 21 February 2011] [05:58:21] &lt;sustrik&gt;        nope, i&#8217;m building a new layer for it</div>
<div class="line">[Monday 21 February 2011] [05:58:29] &lt;sustrik&gt;        ack</div>
<div class="line">[Monday 21 February 2011] [05:58:35] &lt;pieter_hintjens&gt;        you ignore the requests of your users at your direct peril</div>
<div class="line">[Monday 21 February 2011] [05:58:54] &lt;sustrik&gt;        i know</div>
<div class="line">[Monday 21 February 2011] [05:58:56] &lt;pieter_hintjens&gt;        people will not give much patience to a nerd who tells them &#8220;I know your problems better than you do&#8221;</div>
<div class="line">[Monday 21 February 2011] [05:59:04] &lt;sustrik&gt;        there are several options how to solve the problem</div>
<div class="line">[Monday 21 February 2011] [05:59:10] &lt;pieter_hintjens&gt;        you need people to bring their problems and expertise</div>
<div class="line">[Monday 21 February 2011] [05:59:16] &lt;pieter_hintjens&gt;        to experiment, even if it means blowing things up</div>
<div class="line">[Monday 21 February 2011] [05:59:28] &lt;pieter_hintjens&gt;        without that, what you make will be dead and unused</div>
<div class="line">[Monday 21 February 2011] [05:59:38] &lt;pieter_hintjens&gt;        just a collection of weird names and bizarre theories</div>
<div class="line">[Monday 21 February 2011] [05:59:48] &lt;pieter_hintjens&gt;        that&#8217;s 90% of the software universe</div>
<div class="line">[Monday 21 February 2011] [05:59:59] &lt;sustrik&gt;        i would suggest you fork the stable</div>
<div class="line">[Monday 21 February 2011] [06:00:02] &lt;pieter_hintjens&gt;        not yet</div>
<div class="line">[Monday 21 February 2011] [06:00:06] &lt;sustrik&gt;        and apply the patch there</div>
<div class="line">[Monday 21 February 2011] [06:00:08] &lt;pieter_hintjens&gt;        i cannot run my basic examples on 2.1</div>
<div class="line">[Monday 21 February 2011] [06:00:17] &lt;pieter_hintjens&gt;        and I&#8217;m not going to fork 0MQ... nope</div>
<div class="line">[Monday 21 February 2011] [06:00:22] &lt;sustrik&gt;        a regrestion?</div>
<div class="line">[Monday 21 February 2011] [06:00:27] &lt;sustrik&gt;        what happened?</div>
<div class="line">[Monday 21 February 2011] [06:00:35] &lt;pieter_hintjens&gt;        stabilization = current version + patches from you</div>
<div class="line">[Monday 21 February 2011] [06:00:37] &lt;pieter_hintjens&gt;        no more or less</div>
<div class="line">[Monday 21 February 2011] [06:01:24] &lt;pieter_hintjens&gt;        I&#8217;d like to request some debugging framework (syslog is frankly quite heavy) that tells me when I make the stupid and repeated error of misconstructing a routing envelope</div>
<div class="line">[Monday 21 February 2011] [06:01:25] &lt;sustrik&gt;        well, the problem is we have different goals</div>
<div class="line">[Monday 21 February 2011] [06:01:40] &lt;pieter_hintjens&gt;        we have different timeframes, is all</div>
<div class="line">[Monday 21 February 2011] [06:01:51] &lt;pieter_hintjens&gt;        i&#8217;m actually using 0MQ and finding difficulties with it</div>
<div class="line">[Monday 21 February 2011] [06:01:53] &lt;sustrik&gt;        how can we possibly synchronise?</div>
<div class="line">[Monday 21 February 2011] [06:02:09] &lt;pieter_hintjens&gt;        accept the problems your users present you as real</div>
<div class="line">[Monday 21 February 2011] [06:02:19] &lt;sustrik&gt;        sure they are</div>
<div class="line">[Monday 21 February 2011] [06:02:24] &lt;pieter_hintjens&gt;        if they take the effort to express them, that means there is real pain involved</div>
<div class="line">[Monday 21 February 2011] [06:02:30] &lt;sustrik&gt;        i proposed a solution: let&#8217;s make a debug version of 0mq</div>
<div class="line">[Monday 21 February 2011] [06:02:37] &lt;pieter_hintjens&gt;        yes, that might work but</div>
<div class="line">[Monday 21 February 2011] [06:02:44] &lt;pieter_hintjens&gt;        we know why it won&#8217;t, in practice</div>
<div class="line">[Monday 21 February 2011] [06:02:46] &lt;sustrik&gt;        #ifdef ZMQ_DEBUG</div>
<div class="line">[Monday 21 February 2011] [06:02:50] &lt;sustrik&gt;           log (...)&#8217;</div>
<div class="line">[Monday 21 February 2011] [06:02:51] &lt;sustrik&gt;        #endif</div>
<div class="line">[Monday 21 February 2011] [06:02:53] &lt;sustrik&gt;        easy</div>
<div class="line">[Monday 21 February 2011] [06:03:13] &lt;pieter_hintjens&gt;        Except that many people provide 0MQ to their own customers</div>
<div class="line">[Monday 21 February 2011] [06:03:32] &lt;pieter_hintjens&gt;        Now they face the lovely choice of (a) debug version or (b) silent on failure version</div>
<div class="line">[Monday 21 February 2011] [06:03:41]   * pieter_hintjens needs coffee</div>
<div class="line">[Monday 21 February 2011] [06:05:30] &lt;pieter_hintjens&gt;        ok, I have a proposal</div>
<div class="line">[Monday 21 February 2011] [06:05:59] &lt;pieter_hintjens&gt;        i don&#8217;t actually like the syslog solution at all, for developers</div>
<div class="line">[Monday 21 February 2011] [06:06:14] &lt;pieter_hintjens&gt;        it&#8217;s a pain to use and all it really does is collect output you can print to a log file</div>
<div class="line">[Monday 21 February 2011] [06:06:36] &lt;pieter_hintjens&gt;        if you try to <em>use</em> that information in any way you hit Sustrik&#8217;s Barrier of &#8220;it will not scale to the WAN&#8221;</div>
<div class="line">[Monday 21 February 2011] [06:06:38] &lt;pieter_hintjens&gt;        ack?</div>
<div class="line">[Monday 21 February 2011] [06:07:07] &lt;pieter_hintjens&gt;        it can work internally as a log collector</div>
<div class="line">[Monday 21 February 2011] [06:07:43] &lt;pieter_hintjens&gt;        so leave it undocumented, and add a method zmq_verbose() that enables printing of syslog messages</div>
<div class="line">[Monday 21 February 2011] [06:07:56] &lt;pieter_hintjens&gt;        or zmq_debug() or whatever</div>
<div class="line">[Monday 21 February 2011] [06:08:08] &lt;sustrik&gt;        not bad</div>
<div class="line">[Monday 21 February 2011] [06:08:24] &lt;sustrik&gt;        same as ZMQ_DEBUG but configurable at runtime</div>
<div class="line">[Monday 21 February 2011] [06:08:26] &lt;pieter_hintjens&gt;        then when things go weird we can tell users, &#8220;run again with the &#8211;verbose switch and send me the screen dump&#8221;</div>
<div class="line">[Monday 21 February 2011] [06:08:33] &lt;pieter_hintjens&gt;        yes, has to be runtime configurable</div>
<div class="line">[Monday 21 February 2011] [06:08:34] &lt;sustrik&gt;        ack</div>
<div class="line">[Monday 21 February 2011] [06:08:42] &lt;sustrik&gt;        that&#8217;s a good solution</div>
<div class="line">[Monday 21 February 2011] [06:08:44] &lt;pieter_hintjens&gt;        IMO there is no performance hit in doing this for all exceptional conditions</div>
<div class="line">[Monday 21 February 2011] [06:08:54] &lt;pieter_hintjens&gt;        if we do see such a performance issue, we can solve it</div>
<div class="line">[Monday 21 February 2011] [06:09:33] &lt;pieter_hintjens&gt;        if the syslog collector is embedded in zmq, it can&#8217;t be abused and it requires no extra work except that one call</div>
<div class="line">[Monday 21 February 2011] [06:14:06] &lt;Guthur&gt; is there an optimum zmq_size size?</div>
<div class="line">[Monday 21 February 2011] [06:14:42] &lt;pieter_hintjens&gt;        Guthur: to achieve what?</div>
<div class="line">[Monday 21 February 2011] [06:14:55] &lt;pieter_hintjens&gt;        high throughput or low latency?</div>
<div class="line">[Monday 21 February 2011] [06:15:18] &lt;Guthur&gt; I was thinking of adding a stream interface to clrzmq2</div>
<div class="line">[Monday 21 February 2011] [06:15:37] &lt;pieter_hintjens&gt;        what is a stream interface?</div>
<div class="line">[Monday 21 February 2011] [06:15:37] &lt;Guthur&gt; and so i was think it would send that as a series of msgs</div>
<div class="line">[Monday 21 February 2011] [06:16:03] &lt;Guthur&gt; just passing in a stream to send</div>
<div class="line">[Monday 21 February 2011] [06:16:07] &lt;pieter_hintjens&gt;        no frames?</div>
<div class="line">[Monday 21 February 2011] [06:16:09] &lt;Guthur&gt; and then it would split it up into chunks and send</div>
<div class="line">[Monday 21 February 2011] [06:16:51] &lt;pieter_hintjens&gt;        if it was video, for example</div>
<div class="line">[Monday 21 February 2011] [06:17:12] &lt;pieter_hintjens&gt;        you&#8217;d want to send one frame per message to get best latency</div>
<div class="line">[Monday 21 February 2011] [06:17:12] &lt;Guthur&gt; I haven&#8217;t thoroughly thought it through it yet, do you recommend framing</div>
<div class="line">[Monday 21 February 2011] [06:17:40] &lt;pieter_hintjens&gt;        if it was file transfer, for example, you&#8217;d use large messages to maximize throughput</div>
<div class="line">[Monday 21 February 2011] [06:17:42] &lt;Guthur&gt; early idea genesis stage at the moment, hehe</div>
<div class="line">[Monday 21 February 2011] [06:18:02] &lt;pieter_hintjens&gt;        then just choose a random value and optimize later when you actually know what the target is :-)</div>
<div class="line">[Monday 21 February 2011] [06:18:22] &lt;pieter_hintjens&gt;        4096 bytes per message, there, I&#8217;ve decided for you</div>
<div class="line">[Monday 21 February 2011] [06:18:25] &lt;Guthur&gt; oh, ok</div>
<div class="line">[Monday 21 February 2011] [06:18:42] &lt;Guthur&gt; hehe, thanks</div>
<div class="line">[Monday 21 February 2011] [06:19:28] &lt;mikko&gt;  Guthur: do you have tests you want to have run at some point?</div>
<div class="line">[Monday 21 February 2011] [06:19:46] &lt;Guthur&gt; mikko: not yet, I hope to sometime</div>
<div class="line">[Monday 21 February 2011] [06:19:54] &lt;Guthur&gt; a lot on my plate at the moment</div>
<div class="line">[Monday 21 February 2011] [06:20:08] &lt;Guthur&gt; really behind on my MSc thesis, unfortunately</div>
<div class="line">[Monday 21 February 2011] [06:20:18] &lt;pieter_hintjens&gt;        &#8220;life is a buffet of interesting problems&#8221;</div>
<div class="line">[Monday 21 February 2011] [06:24:12] &lt;mikko&gt;  &#8220;nothing is more expensive than hiring an amateur&#8221;</div>
<div class="line">[Monday 21 February 2011] [06:24:23] &lt;mikko&gt;  saw that on twitter today</div>
<div class="line">[Monday 21 February 2011] [06:24:46] &lt;pieter_hintjens&gt;        &#8220;If you think a professional is expensive, wait till you see the cost of hiring an amateur&#8221; was the version I saw</div>
<div class="line">[Monday 21 February 2011] [06:24:52] &lt;pieter_hintjens&gt;        I think this would make a good motto for iMatix</div>
<div class="line">[Monday 21 February 2011] [06:25:08] &lt;pieter_hintjens&gt;        I prefer your short version...</div>
<div class="line">[Monday 21 February 2011] [06:26:19] &lt;mikko&gt;  <a class="reference external" href="http://twitter.com/cgbystrom/statuses/39607943171284992">http://twitter.com/cgbystrom/statuses/39607943171284992</a></div>
<div class="line">[Monday 21 February 2011] [06:26:24] &lt;mikko&gt;  there it is</div>
<div class="line">[Monday 21 February 2011] [06:26:59] &lt;pieter_hintjens&gt;        I need a Latin version</div>
<div class="line">[Monday 21 February 2011] [06:27:57] &lt;Guthur&gt; &#8216;If you think training a Graduate is expensive, try an Old Dog&#8217;</div>
<div class="line">[Monday 21 February 2011] [06:28:02] &lt;Guthur&gt; there&#8217;s mine, hehe</div>
<div class="line">[Monday 21 February 2011] [06:29:15] &lt;mikko&gt;  &#8220;If you think training a graduate is expensive, you are probably right but it might pay off later. Maybe&#8221;</div>
<div class="line">[Monday 21 February 2011] [06:31:25] &lt;pieter_hintjens&gt;        I&#8217;d like to change the text &#8220;Explore the Community&#8221; on the main welcome page</div>
<div class="line">[Monday 21 February 2011] [06:31:28] &lt;pieter_hintjens&gt;        it is too bland</div>
<div class="line">[Monday 21 February 2011] [06:31:59] &lt;pieter_hintjens&gt;        It should be verb article noun</div>
<div class="line">[Monday 21 February 2011] [06:33:51] &lt;pieter_hintjens&gt;        Escape the Box</div>
<div class="line">[Monday 21 February 2011] [06:34:34] &lt;pieter_hintjens&gt;        that&#8217;ll do...</div>
<div class="line">[Monday 21 February 2011] [06:34:44] &lt;mikko&gt;  reminds too much of thinking out of the box</div>
<div class="line">[Monday 21 February 2011] [06:34:56] &lt;pieter_hintjens&gt;        that was the intention</div>
<div class="line">[Monday 21 February 2011] [06:35:04] &lt;mikko&gt;  oh..</div>
<div class="line">[Monday 21 February 2011] [07:17:42] &lt;pieter_hintjens&gt;        sustrik: how can I tell if a specific commit got into the 2.0.10 release?</div>
<div class="line">[Monday 21 February 2011] [07:17:49] &lt;pieter_hintjens&gt;        e2167cecaefec6557c7a5712fb75e51487ff69a6 is the one I&#8217;m interested in</div>
<div class="line">[Monday 21 February 2011] [07:18:01]   * pieter_hintjens needs to learn more git...</div>
<div class="line">[Monday 21 February 2011] [07:19:34] &lt;pieter_hintjens&gt;        ok, it&#8217;s not there... np</div>
<div class="line">[Monday 21 February 2011] [07:46:38] &lt;pieter_hintjens&gt;        sustrik: I&#8217;ve found another bug in master</div>
<div class="line">[Monday 21 February 2011] [07:46:54] &lt;pieter_hintjens&gt;        am porting all the Guide examples to 2.1, some of them do quite strange stuff</div>
<div class="line">[Monday 21 February 2011] [07:47:14] &lt;pieter_hintjens&gt;        Have logged this <a class="reference external" href="https://github.com/zeromq/zeromq2/issues/167">https://github.com/zeromq/zeromq2/issues/167</a> (and #168 was the one I found earlier)</div>
<div class="line">[Monday 21 February 2011] [07:50:15] &lt;pieter_hintjens&gt;        lunch, brb</div>
<div class="line">[Monday 21 February 2011] [07:55:05] &lt;sustrik&gt;        pieter_hintjens: ok</div>
<div class="line">[Monday 21 February 2011] [07:55:16] &lt;sustrik&gt;        btw &#8220;fathom the basics&#8221; is not good</div>
<div class="line">[Monday 21 February 2011] [07:55:23] &lt;sustrik&gt;        it&#8217;s a rarely used word</div>
<div class="line">[Monday 21 February 2011] [07:55:34] &lt;sustrik&gt;        and most non-native speakers won&#8217;t understand it</div>
<div class="line">[Monday 21 February 2011] [07:56:35] &lt;sustrik&gt;        same with &#8220;grab&#8221;</div>
<div class="line">[Monday 21 February 2011] [07:57:55] &lt;sustrik&gt;        also, nobody will understand &#8220;escape the box&#8221; leads to the community page</div>
<div class="line">[Monday 21 February 2011] [09:32:32] &lt;pieter_hintjens&gt;        sustrik: sure, but what does &#8220;the community&#8221; mean either?</div>
<div class="line">[Monday 21 February 2011] [09:32:44] &lt;sustrik&gt;        dunno :)</div>
<div class="line">[Monday 21 February 2011] [09:32:59] &lt;pieter_hintjens&gt;        exactly, it only makes sense when you already know what it is...</div>
<div class="line">[Monday 21 February 2011] [09:33:05] &lt;sustrik&gt;        development?</div>
<div class="line">[Monday 21 February 2011] [09:33:17] &lt;pieter_hintjens&gt;        ... something that says, &#8220;Get a lot more stuff here...&#8221;</div>
<div class="line">[Monday 21 February 2011] [09:33:22] &lt;sustrik&gt;        yes</div>
<div class="line">[Monday 21 February 2011] [09:33:24] &lt;pieter_hintjens&gt;        Get the Addons</div>
<div class="line">[Monday 21 February 2011] [09:33:38] &lt;pieter_hintjens&gt;        ugh</div>
<div class="line">[Monday 21 February 2011] [09:33:40] &lt;mikko&gt;  addon sounds proprietary</div>
<div class="line">[Monday 21 February 2011] [09:33:42] &lt;sustrik&gt;        or simple &#8220;more&#8221;</div>
<div class="line">[Monday 21 February 2011] [09:34:18] &lt;pieter_hintjens&gt;        from a design basis it&#8217;s Verb article Noun</div>
<div class="line">[Monday 21 February 2011] [09:34:54] &lt;pieter_hintjens&gt;        minimalism is quite difficult... :)</div>
<div class="line">[Monday 21 February 2011] [09:34:59] &lt;sustrik&gt;        true</div>
<div class="line">[Monday 21 February 2011] [09:35:14] &lt;sustrik&gt;        proceed to more</div>
<div class="line">[Monday 21 February 2011] [09:35:23] &lt;sustrik&gt;        check more stuff</div>
<div class="line">[Monday 21 February 2011] [09:35:39] &lt;pieter_hintjens&gt;        Enter the Deep End</div>
<div class="line">[Monday 21 February 2011] [09:35:56] &lt;pieter_hintjens&gt;        Dive into the Boiling Tarpits of Git</div>
<div class="line">[Monday 21 February 2011] [09:36:24] &lt;sustrik&gt;        something like that</div>
<div class="line">[Monday 21 February 2011] [09:36:29] &lt;pieter_hintjens&gt;        anyhow it doesn&#8217;t really matter if people understand what each option means...</div>
<div class="line">[Monday 21 February 2011] [09:36:35] &lt;pieter_hintjens&gt;        there are 5 options, clickety-click...</div>
<div class="line">[Monday 21 February 2011] [09:36:46] &lt;pieter_hintjens&gt;        all we want is their curiosity</div>
<div class="line">[Monday 21 February 2011] [09:37:03] &lt;sustrik&gt;        we can try to leave it as it</div>
<div class="line">[Monday 21 February 2011] [09:37:08] &lt;pieter_hintjens&gt;        no-one&#8217;s going to hesitate thinking, &#8220;Oh, I don&#8217;t fully understand that, therefore I can&#8217;t click&#8221;</div>
<div class="line">[Monday 21 February 2011] [09:37:14] &lt;sustrik&gt;        what i find really wrong is &#8220;fathom&#8221;</div>
<div class="line">[Monday 21 February 2011] [09:37:17] &lt;pieter_hintjens&gt;        sure</div>
<div class="line">[Monday 21 February 2011] [09:37:36] &lt;pieter_hintjens&gt;        I wanted a little more spice</div>
<div class="line">[Monday 21 February 2011] [09:37:48] &lt;pieter_hintjens&gt;        Learn the Basics</div>
<div class="line">[Monday 21 February 2011] [09:37:54] &lt;pieter_hintjens&gt;        but Learn sounds like school</div>
<div class="line">[Monday 21 February 2011] [09:38:05] &lt;pieter_hintjens&gt;        and &#8220;Read the Manual&#8221; just sounds like work</div>
<div class="line">[Monday 21 February 2011] [09:38:35] &lt;sustrik&gt;        read the manual is neutral imo</div>
<div class="line">[Monday 21 February 2011] [09:38:52] &lt;pieter_hintjens&gt;        hmm, basics vs. advancedics</div>
<div class="line">[Monday 21 February 2011] [09:38:57] &lt;sustrik&gt;        what about community -&gt; &#8220;dive into details&#8221;</div>
<div class="line">[Monday 21 February 2011] [09:39:03] &lt;pieter_hintjens&gt;        I like it</div>
<div class="line">[Monday 21 February 2011] [09:39:09] &lt;pieter_hintjens&gt;        that contrasts with Basics nicely</div>
<div class="line">[Monday 21 February 2011] [09:40:16] &lt;pieter_hintjens&gt;        aight, we have a winner, thanks Martin :-)</div>
<div class="line">[Monday 21 February 2011] [09:44:46] &lt;jobytaffey&gt;     I&#8217;m working on a server which multiplexes many TCP sockets into 0MQ. I want a worker app to be able to talk bi-directionally to any TCP socket. What&#8217;s an efficient way to approach this? One 0MQ socket per TCP socket? or perhaps a single 0MQ socket per direction, aggregating all TCP messages (filtered with ZMQ_SUBSCRIBE)?</div>
<div class="line">[Monday 21 February 2011] [09:45:24] &lt;pieter_hintjens&gt;        jobytaffey: have you read the Guide?</div>
<div class="line">[Monday 21 February 2011] [09:46:06] &lt;jobytaffey&gt;     Bits of. I guess I&#8217;ll go and read some more then...</div>
<div class="line">[Monday 21 February 2011] [09:46:42] &lt;pieter_hintjens&gt;        this is not actually covered but it will help you understand how to make the 0MQ part</div>
<div class="line">[Monday 21 February 2011] [09:47:02] &lt;pieter_hintjens&gt;        the answer depends a lot on what kind of work you are doing with the TCP sockets</div>
<div class="line">[Monday 21 February 2011] [09:47:32] &lt;pieter_hintjens&gt;        i.e. how you map the TCP side to one or more 0MQ patterns (pubsub, req-rep, pipeline)</div>
<div class="line">[Monday 21 February 2011] [09:49:12] &lt;jobytaffey&gt;     I&#8217;ve got fixed sized packets going in both directions over TCP. I have an online wireless sensor network where I want to be able to register for telemetry feeds from the devices. But, given millions of devices, I don&#8217;t think I can afford a 0MQ socket per device.</div>
<div class="line">[Monday 21 February 2011] [09:50:25] &lt;pieter_hintjens&gt;        jobytaffey: please read the Guide, at least Ch1 in detail, and come back when you can map your problem to 0MQ patterns</div>
<div class="line">[Monday 21 February 2011] [09:50:34] &lt;pieter_hintjens&gt;        otherwise you lack the tools to design this properly</div>
<div class="line">[Monday 21 February 2011] [09:51:12] &lt;pieter_hintjens&gt;        it sounds like pubsub except you say it&#8217;s bidirectional</div>
<div class="line">[Monday 21 February 2011] [09:51:41] &lt;jobytaffey&gt;     I agree I&#8217;m trying to run before walking, thanks.</div>
<div class="line">[Monday 21 February 2011] [10:00:12] &lt;fbarriga&gt;       I don&#8217;t speak english very good but after a while I could decipher the expresion &#8220;Dive into the Boiling Tarpits of Git&#8221; but &#8220;fathom&#8221; is quite weird</div>
<div class="line">[Monday 21 February 2011] [10:01:15] &lt;fbarriga&gt;       reading the guide is quite amusing but all the decoration make it a bit longer to finish.</div>
<div class="line">[Monday 21 February 2011] [10:02:20] &lt;neale1&gt; fathom == a unit of depth (6 feet ~ 2m). The expression is used to indicate that you getting &#8220;deeper&#8221; into the subject matter.</div>
<div class="line">[Monday 21 February 2011] [10:03:01] &lt;pieter_hintjens&gt;        fbarriga: ah, but you did finish it ... :-)</div>
<div class="line">[Monday 21 February 2011] [10:03:30] &lt;pieter_hintjens&gt;        we had some arguments at the start, about whether or not to decorate the text</div>
<div class="line">[Monday 21 February 2011] [10:03:44] &lt;pieter_hintjens&gt;        some people complained about it, but most people enjoyed it, so that&#8217;s the style I used</div>
<div class="line">[Monday 21 February 2011] [10:04:04] &lt;fbarriga&gt;       pieter_hintjens, nop, I was working on other stuff :(</div>
<div class="line">[Monday 21 February 2011] [10:04:32] &lt;pieter_hintjens&gt;        for those who prefer their text dry we have the man pages, I guess</div>
<div class="line">[Monday 21 February 2011] [10:06:43] &lt;fbarriga&gt;       is more &#8216;artistic&#8217; the way you write the guide. I think that it sound more intellectual rather than technical.</div>
<div class="line">[Monday 21 February 2011] [10:13:19] &lt;pieter_hintjens&gt;        fbarriga: well, to be honest, this is how I write when no-one is telling me to conform</div>
<div class="line">[Monday 21 February 2011] [10:13:30] &lt;pieter_hintjens&gt;        s/telling/paying/</div>
<div class="line">[Monday 21 February 2011] [10:24:22] &lt;fbarriga&gt;       that&#8217;s good</div>
<div class="line">[Monday 21 February 2011] [10:49:20] &lt;cremes&gt; is this callstack from 0mq sending or receiving a message?  <a class="reference external" href="https://gist.github.com/837241">https://gist.github.com/837241</a></div>
<div class="line">[Monday 21 February 2011] [10:50:22] &lt;neale1&gt; anyone had any experience using 0MQ with Spring?</div>
<div class="line">[Monday 21 February 2011] [10:54:30] &lt;pieter_hintjens&gt;        cremes: it looks like it&#8217;s in the zmq_msg_init_size method</div>
<div class="line">[Monday 21 February 2011] [10:55:38] &lt;pieter_hintjens&gt;        neale1: not as far as I know of, there are some people talking about it but nothing concrete yet</div>
<div class="line">[Monday 21 February 2011] [10:56:39] &lt;neale1&gt; Tks. I have a client trying to use it and having problems. (That&#8217;s as about as detailed as they have described it unfortunately)</div>
<div class="line">[Monday 21 February 2011] [10:57:21] &lt;cremes&gt; pieter_hintjens: right; but i&#8217;m wondering if this is 0mq in the act of sending or receiving a message because this isn&#8217;t code i am calling directly</div>
<div class="line">[Monday 21 February 2011] [10:57:37] &lt;cremes&gt; and i&#8217;m showing that i have a small memory leak here on occasion</div>
<div class="line">[Monday 21 February 2011] [10:58:30] &lt;pieter_hintjens&gt;        cremes: hmm, sustrik would know for sure but it looks like an input event, so receiving a message</div>
<div class="line">[Monday 21 February 2011] [10:58:48] &lt;pieter_hintjens&gt;        neale1: you obviously need more detail on what the problems are...</div>
<div class="line">[Monday 21 February 2011] [10:59:17] &lt;cremes&gt; yeah, i&#8217;m thinking this is 0mq allocating its own msg_t for receiving the message envelope/header/routing information for an req/rep pair</div>
<div class="line">[Monday 21 February 2011] [11:03:20] &lt;sustrik&gt;        cremes: receiving</div>
<div class="line">[Monday 21 February 2011] [11:04:09] &lt;cremes&gt; sustrik: any chance the lib is not calling close on the message envelope (which isn&#8217;t passed to the user)?</div>
<div class="line">[Monday 21 February 2011] [11:04:09] &lt;sustrik&gt;        cremes: how do you know there&#8217;s a memory leak?</div>
<div class="line">[Monday 21 February 2011] [11:04:31] &lt;sustrik&gt;        sure, there can be a bug</div>
<div class="line">[Monday 21 February 2011] [11:04:40] &lt;sustrik&gt;        can you be more specific about the leak?</div>
<div class="line">[Monday 21 February 2011] [11:04:44] &lt;cremes&gt; on osx there is a program called &#8216;leaks&#8217; that can read the heap and use a malloc flag to find leaks</div>
<div class="line">[Monday 21 February 2011] [11:04:51] &lt;cremes&gt; yes</div>
<div class="line">[Monday 21 February 2011] [11:05:17] &lt;sustrik&gt;        ok, so it maps malloc to frees</div>
<div class="line">[Monday 21 February 2011] [11:05:22] &lt;sustrik&gt;        and once the program exits</div>
<div class="line">[Monday 21 February 2011] [11:05:26] &lt;sustrik&gt;        it&#8217;ll print out the leaks</div>
<div class="line">[Monday 21 February 2011] [11:05:27] &lt;cremes&gt; &#8216;leaks&#8217; is outputting that i am leaking 112 bytes periodically</div>
<div class="line">[Monday 21 February 2011] [11:05:28] &lt;sustrik&gt;        right?</div>
<div class="line">[Monday 21 February 2011] [11:05:47] &lt;cremes&gt; nope, it analyses a live heap</div>
<div class="line">[Monday 21 February 2011] [11:06:08] &lt;sustrik&gt;        how can it possibly know the chunk is not referenced anymore?</div>
<div class="line">[Monday 21 February 2011] [11:07:26] &lt;pieter_hintjens&gt;        it&#8217;s osx... apple... magic... :)</div>
<div class="line">[Monday 21 February 2011] [11:08:10] &lt;cremes&gt; sustrik: login to my box with your account and run &#8216;man leaks&#8217;; read the first paragraph</div>
<div class="line">[Monday 21 February 2011] [11:08:21] &lt;sustrik&gt;        let me see...</div>
<div class="line">[Monday 21 February 2011] [11:08:46] &lt;cremes&gt; also, reload this gist to see the output from leaks for my program:  <a class="reference external" href="https://gist.github.com/837241">https://gist.github.com/837241</a></div>
<div class="line">[Monday 21 February 2011] [11:10:46] &lt;cremes&gt; the receiving socket in this case is an xreq</div>
<div class="line">[Monday 21 February 2011] [11:11:37] &lt;sustrik&gt;        ok, it scans whole memory for the pointers</div>
<div class="line">[Monday 21 February 2011] [11:12:19] &lt;cremes&gt; yes; if you keep reading, you&#8217;ll see the note about MallocStackLogging for getting the stack where the leaked memory was allocated</div>
<div class="line">[Monday 21 February 2011] [11:12:33] &lt;cremes&gt; s/stack/callstack/</div>
<div class="line">[Monday 21 February 2011] [11:13:01] &lt;sustrik&gt;        the stack i see in the output it</div>
<div class="line">[Monday 21 February 2011] [11:13:03] &lt;sustrik&gt;        is</div>
<div class="line">[Monday 21 February 2011] [11:13:10] &lt;sustrik&gt;        thread_start | _pthread_start | thread_routine | zmq::kqueue_t::loop() | zmq::zmq_engine_t::in_event()</div>
<div class="line">[Monday 21 February 2011] [11:13:26] &lt;sustrik&gt;        that&#8217;s different from the one you&#8217;ve posted before</div>
<div class="line">[Monday 21 February 2011] [11:13:33] &lt;sustrik&gt;        is it truncated or what?</div>
<div class="line">[Monday 21 February 2011] [11:14:12] &lt;cremes&gt; you need to scroll the gist to the right; for some reason it doesn&#8217;t wrap this output</div>
<div class="line">[Monday 21 February 2011] [11:14:33] &lt;sustrik&gt;        ah</div>
<div class="line">[Monday 21 February 2011] [11:16:15] &lt;sustrik&gt;        well, there are 3 possibilities:</div>
<div class="line">[Monday 21 February 2011] [11:16:23] &lt;sustrik&gt;        1. bug in 0mq</div>
<div class="line">[Monday 21 February 2011] [11:16:31] &lt;sustrik&gt;        2. client program not closing the message</div>
<div class="line">[Monday 21 February 2011] [11:16:51] &lt;sustrik&gt;        3. the pointer is actually stored outside of process memory</div>
<div class="line">[Monday 21 February 2011] [11:17:46] &lt;cremes&gt; i don&#8217;t think it&#8217;s 2 because i loop over all messages and call zmq_close() on each part when i&#8217;m done</div>
<div class="line">[Monday 21 February 2011] [11:17:57] &lt;cremes&gt; there&#8217;s no way for my logic to skip that step</div>
<div class="line">[Monday 21 February 2011] [11:18:12] &lt;cremes&gt; though it&#8217;s certainly possible my code is the cause</div>
<div class="line">[Monday 21 February 2011] [11:18:22] &lt;sustrik&gt;        ok</div>
<div class="line">[Monday 21 February 2011] [11:18:28] &lt;sustrik&gt;        then it&#8217;s either 1 or 3</div>
<div class="line">[Monday 21 February 2011] [11:18:49] &lt;sustrik&gt;        3 happens when pointer to memory is actually held inside of socketpair buffer</div>
<div class="line">[Monday 21 February 2011] [11:18:57] &lt;sustrik&gt;        which resides in kernel space</div>
<div class="line">[Monday 21 February 2011] [11:19:13] &lt;sustrik&gt;        at least i would assume it does, even on osx</div>
<div class="line">[Monday 21 February 2011] [11:19:53] &lt;cremes&gt; i am <em>only</em> seeing this on the one client program i have using an xreq socket</div>
<div class="line">[Monday 21 February 2011] [11:20:14] &lt;cremes&gt; everything else is using req,rep,pub,sub and i don&#8217;t see the leak</div>
<div class="line">[Monday 21 February 2011] [11:20:23] &lt;cremes&gt; so i am wondering if this is specific to xreq</div>
<div class="line">[Monday 21 February 2011] [11:20:57] &lt;sustrik&gt;        ack</div>
<div class="line">[Monday 21 February 2011] [11:20:57] &lt;cremes&gt; you can see from the &#8216;context&#8217; hex that it contains my custom identity so i assume this is routing info</div>
<div class="line">[Monday 21 February 2011] [11:21:09] &lt;cremes&gt; which xreq is supposed to cut off before passing the messages to me</div>
<div class="line">[Monday 21 February 2011] [11:21:39] &lt;sustrik&gt;        is it a head version?</div>
<div class="line">[Monday 21 February 2011] [11:21:56] &lt;sustrik&gt;        or 2.1.0 or 2.0.x?</div>
<div class="line">[Monday 21 February 2011] [11:22:07] &lt;cremes&gt; hang on, let me get the git commit hash (oh, 2.1.0)</div>
<div class="line">[Monday 21 February 2011] [11:22:14] &lt;sustrik&gt;        ok</div>
<div class="line">[Monday 21 February 2011] [11:22:38] &lt;cremes&gt; e94790006ea6f4c64c commit from feb 9</div>
<div class="line">[Monday 21 February 2011] [11:22:52] &lt;cremes&gt; i&#8217;ll update to latest &amp; greatest</div>
<div class="line">[Monday 21 February 2011] [11:23:11]   * sustrik is checking the code</div>
<div class="line">[Monday 21 February 2011] [11:25:14] &lt;neale1&gt; pieter_hintjens: Yeah I was just going to see if anyone had done it so (a) I know it could be done and (b) they might have a &#8220;recipe&#8221; for doing it and I could pass that wisdom on</div>
<div class="line">[Monday 21 February 2011] [11:25:48] &lt;sustrik&gt;        cremes: the application in questio; is it using req or xreq socket?</div>
<div class="line">[Monday 21 February 2011] [11:25:55] &lt;cremes&gt; xreq</div>
<div class="line">[Monday 21 February 2011] [11:26:20] &lt;sustrik&gt;        ok, so you handle individual message parts by hand</div>
<div class="line">[Monday 21 February 2011] [11:26:29] &lt;sustrik&gt;        are you closing all of them?</div>
<div class="line">[Monday 21 February 2011] [11:26:47] &lt;sustrik&gt;        identity/delimiter/body?</div>
<div class="line">[Monday 21 February 2011] [11:27:32] &lt;cremes&gt; yes</div>
<div class="line">[Monday 21 February 2011] [11:27:43] &lt;cremes&gt; btw, i see this with the latest master too</div>
<div class="line">[Monday 21 February 2011] [11:28:31] &lt;cremes&gt; all message parts are passed to my read callback</div>
<div class="line">[Monday 21 February 2011] [11:28:35] &lt;cremes&gt; and i call:  messages.each { <a href="#id65"><span class="problematic" id="id66">|message|</span></a> message.close }</div>
<div class="line">[Monday 21 February 2011] [11:29:14] &lt;cremes&gt; it&#8217;s iterating over the array of message parts calling close on each (zmq_close is called inside of the close() instance method)</div>
<div class="line">[Monday 21 February 2011] [11:29:39] &lt;sustrik&gt;        what language is that?</div>
<div class="line">[Monday 21 February 2011] [11:29:42] &lt;cremes&gt; does xreq pass the identity and delimiter messages up the stack?</div>
<div class="line">[Monday 21 February 2011] [11:29:44] &lt;cremes&gt; ruby</div>
<div class="line">[Monday 21 February 2011] [11:29:53] &lt;sustrik&gt;        cremes: yes</div>
<div class="line">[Monday 21 February 2011] [11:29:59] &lt;cremes&gt; i thought only xrep saw all that detail</div>
<div class="line">[Monday 21 February 2011] [11:30:22] &lt;sustrik&gt;        same with xreq</div>
<div class="line">[Monday 21 February 2011] [11:31:37] &lt;sustrik&gt;        are there connections being created and torn down during the test?</div>
<div class="line">[Monday 21 February 2011] [11:33:31] &lt;cremes&gt; yes, these connections can and do go away (socket is closed via zmq_close())</div>
<div class="line">[Monday 21 February 2011] [11:33:48] &lt;cremes&gt; btw, i am printing everything this callback is receiving to my log</div>
<div class="line">[Monday 21 February 2011] [11:34:05] &lt;cremes&gt; it does get the nul delimiter message but it does not get the identity message before it</div>
<div class="line">[Monday 21 February 2011] [11:34:41] &lt;sustrik&gt;        right the identity is used and stripped off by the xrep socket on the other side of the connection</div>
<div class="line">[Monday 21 February 2011] [11:34:44] &lt;cremes&gt; that confirms what i originally thought; xreq strips that off</div>
<div class="line">[Monday 21 February 2011] [11:34:50] &lt;sustrik&gt;        xrep</div>
<div class="line">[Monday 21 February 2011] [11:35:22] &lt;sustrik&gt;        so the identity is passed to the xreq only on a single occassion:</div>
<div class="line">[Monday 21 February 2011] [11:35:27] &lt;sustrik&gt;        on connection initiation</div>
<div class="line">[Monday 21 February 2011] [11:35:43] &lt;sustrik&gt;        let me check the corresponding code...</div>
<div class="line">[Monday 21 February 2011] [11:36:07] &lt;cremes&gt; i thought it worked opposite; xrep gets identity from xreq during connection</div>
<div class="line">[Monday 21 February 2011] [11:36:22] &lt;cremes&gt; xreq doesn&#8217;t actually send its identity after that; xrep prepends it locally</div>
<div class="line">[Monday 21 February 2011] [11:37:04] &lt;cremes&gt; so when sending from xreq, it goes nul delimiter + message parts</div>
<div class="line">[Monday 21 February 2011] [11:37:46] &lt;cremes&gt; xrep recvs routing info (if any intervening hops) and pushes its peers identity on the top of that stack + delimiter + message parts</div>
<div class="line">[Monday 21 February 2011] [11:38:03] &lt;cremes&gt; then when it replies, it just sends that routing info stack + nul + parts</div>
<div class="line">[Monday 21 February 2011] [11:38:43] &lt;cremes&gt; and ultimately xreq (at original source) recvs just nul delimiter + parts because each intervening xreq stripped off one level of routing info</div>
<div class="line">[Monday 21 February 2011] [11:38:52] &lt;sustrik&gt;        except of the first part of the route stack</div>
<div class="line">[Monday 21 February 2011] [11:39:06] &lt;sustrik&gt;        which it have already used to route the message back</div>
<div class="line">[Monday 21 February 2011] [11:39:09] &lt;sustrik&gt;        to the xreq</div>
<div class="line">[Monday 21 February 2011] [11:40:07] &lt;cremes&gt; why would the last hop need to send that routing info to the originator? that socket already &#8220;knows&#8221; their own identity!</div>
<div class="line">[Monday 21 February 2011] [11:40:29] &lt;sustrik&gt;        that&#8217;s why it stips it off</div>
<div class="line">[Monday 21 February 2011] [11:40:33] &lt;sustrik&gt;        i short</div>
<div class="line">[Monday 21 February 2011] [11:40:44] &lt;sustrik&gt;        xreq doesn&#8217;t mess with routing info at all</div>
<div class="line">[Monday 21 February 2011] [11:41:03] &lt;sustrik&gt;        xrep adds one peers identity to the stack on message receival</div>
<div class="line">[Monday 21 February 2011] [11:41:17] &lt;sustrik&gt;        and strips one identity from the stack on send</div>
<div class="line">[Monday 21 February 2011] [11:41:19] &lt;pieter_hintjens&gt;        s/xreq/dealer/g, s/xrep/router/g, it&#8217;ll be much easier</div>
<div class="line">[Monday 21 February 2011] [11:41:31] &lt;sustrik&gt;        i think i see the leak</div>
<div class="line">[Monday 21 February 2011] [11:41:56] &lt;pieter_hintjens&gt;        dealers are just like push + pull</div>
<div class="line">[Monday 21 February 2011] [11:42:04] &lt;cremes&gt; right, then i think we agree; the <em>last</em> xrep to reply to the original xreq will <em>strip</em> off its identity, so it only sends the delimiter + parts</div>
<div class="line">[Monday 21 February 2011] [11:44:50] &lt;sustrik&gt;        cremes: i&#8217;ve pasted the patch via irc to you directly</div>
<div class="line">[Monday 21 February 2011] [11:45:05] &lt;sustrik&gt;        let me know whether it helps</div>
<div class="line">[Monday 21 February 2011] [11:45:22] &lt;pieter_hintjens&gt;        sustrik: thanks for your help with those two issues btw</div>
<div class="line">[Monday 21 February 2011] [11:45:34] &lt;sustrik&gt;        np</div>
<div class="line">[Monday 21 February 2011] [11:45:54] &lt;pieter_hintjens&gt;        i have a third one which I <em>think</em> actually might be a 0MQ issue ... :-)</div>
<div class="line">[Monday 21 February 2011] [11:45:57] &lt;pieter_hintjens&gt;        #169</div>
<div class="line">[Monday 21 February 2011] [11:46:10] &lt;sustrik&gt;        :)</div>
<div class="line">[Monday 21 February 2011] [11:46:44] &lt;pieter_hintjens&gt;        not sure what the semantics are for zmq_term and pubsub</div>
<div class="line">[Monday 21 February 2011] [11:46:57] &lt;pieter_hintjens&gt;        if there are 10 connected subscribers, should they all get the last message?</div>
<div class="line">[Monday 21 February 2011] [11:47:13] &lt;pieter_hintjens&gt;        assuming publisher sends and then terminates</div>
<div class="line">[Monday 21 February 2011] [11:47:39] &lt;sustrik&gt;        aren&#8217;t you just running into async connect issue?</div>
<div class="line">[Monday 21 February 2011] [11:47:55] &lt;cremes&gt; sustrik: success!</div>
<div class="line">[Monday 21 February 2011] [11:47:56] &lt;pieter_hintjens&gt;        it&#8217;s a synchronized pubsub example</div>
<div class="line">[Monday 21 February 2011] [11:48:12] &lt;sustrik&gt;        cremes: great</div>
<div class="line">[Monday 21 February 2011] [11:48:18] &lt;sustrik&gt;        let me apply the patch</div>
<div class="line">[Monday 21 February 2011] [11:48:26] &lt;pieter_hintjens&gt;        subscribers explicitly tell publisher when they are present</div>
<div class="line">[Monday 21 February 2011] [11:48:38] &lt;cremes&gt; sustrik: if you want to do an occasional &#8216;leaks&#8217; check on osx, feel free</div>
<div class="line">[Monday 21 February 2011] [11:48:48] &lt;sustrik&gt;        ack</div>
<div class="line">[Monday 21 February 2011] [11:49:00] &lt;cremes&gt; it&#8217;s really easy... # MallocStackLogging=1 ./my_program</div>
<div class="line">[Monday 21 February 2011] [11:49:09] &lt;cremes&gt; leaks &lt;pid of my_program&gt;</div>
<div class="line">[Monday 21 February 2011] [11:49:17] &lt;pieter_hintjens&gt;        sustrik: I&#8217;ll test if it&#8217;s due to async connects... hang on...</div>
<div class="line">[Monday 21 February 2011] [11:50:31] &lt;CIA-21&gt; zeromq2: 03Martin Sustrik 07master * r0eea935 10/ src/zmq_init.cpp :</div>
<div class="line">[Monday 21 February 2011] [11:50:32] &lt;CIA-21&gt; zeromq2: Fix for memory leak caused by long identities</div>
<div class="line">[Monday 21 February 2011] [11:50:32] &lt;CIA-21&gt; zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/hrfcjQ">http://bit.ly/hrfcjQ</a></div>
<div class="line">[Monday 21 February 2011] [11:50:40] &lt;sustrik&gt;        cremes: done</div>
<div class="line">[Monday 21 February 2011] [11:50:45] &lt;sustrik&gt;        and thanks for the offer</div>
<div class="line">[Monday 21 February 2011] [11:51:22] &lt;sustrik&gt;        cremes: btw, it was you who said that SO_SNDBUF/SO_RCVBUF on OSX is measured in kB rather than bytes, right?</div>
<div class="line">[Monday 21 February 2011] [11:51:57] &lt;cremes&gt; sustrik: yeah, that&#8217;s the way it looks to me but i can&#8217;t find that documented anywhere</div>
<div class="line">[Monday 21 February 2011] [11:51:59] &lt;cremes&gt; it&#8217;s screwy</div>
<div class="line">[Monday 21 February 2011] [11:52:47] &lt;sustrik&gt;        the interesting part is that you&#8217;ve mentioned that getsockopt(SNDBUF) returns 0</div>
<div class="line">[Monday 21 February 2011] [11:52:58] &lt;sustrik&gt;        so it&#8217;s not obvious how to even find out</div>
<div class="line">[Monday 21 February 2011] [11:53:09] &lt;cremes&gt; ack</div>
<div class="line">[Monday 21 February 2011] [11:53:26] &lt;cremes&gt; if you want to write a small c program that exercises that stuff, that&#8217;s probably the best way to know &#8220;for sure&#8221;</div>
<div class="line">[Monday 21 February 2011] [11:53:41] &lt;sustrik&gt;        what kind of kernel is that btw</div>
<div class="line">[Monday 21 February 2011] [11:53:44] &lt;sustrik&gt;        proprietaty?</div>
<div class="line">[Monday 21 February 2011] [11:53:44] &lt;cremes&gt; i could also ask about it on apple&#8217;s dev lists</div>
<div class="line">[Monday 21 February 2011] [11:53:53] &lt;cremes&gt; nope, it&#8217;s open source</div>
<div class="line">[Monday 21 February 2011] [11:54:05] &lt;cremes&gt; it&#8217;s called darwin... it&#8217;s a mach + freebsd hybrid</div>
<div class="line">[Monday 21 February 2011] [11:54:05] &lt;sustrik&gt;        then try asking on the list</div>
<div class="line">[Monday 21 February 2011] [11:54:22] &lt;cremes&gt; ok</div>
<div class="line">[Monday 21 February 2011] [11:54:22] &lt;sustrik&gt;        the functionality is obviously misbehaving</div>
<div class="line">[Monday 21 February 2011] [11:54:34] &lt;sustrik&gt;        so it would be nice to know what the devs have to say about it</div>
<div class="line">[Monday 21 February 2011] [11:54:35] &lt;cremes&gt; any chance you could provide a small c program that illustrates the issue?</div>
<div class="line">[Monday 21 February 2011] [11:54:41] &lt;cremes&gt; code always talks louder</div>
<div class="line">[Monday 21 February 2011] [11:54:43] &lt;sustrik&gt;        i can try</div>
<div class="line">[Monday 21 February 2011] [11:54:46] &lt;sustrik&gt;        wait a sec</div>
<div class="line">[Monday 21 February 2011] [11:54:48] &lt;cremes&gt; especially when they can repro it :)</div>
<div class="line">[Monday 21 February 2011] [11:55:22] &lt;cremes&gt; maybe get/setsockopt only screw up on socketpairs</div>
<div class="line">[Monday 21 February 2011] [11:55:57] &lt;sustrik&gt;        yes, that&#8217;s my thinking as well</div>
<div class="line">[Monday 21 February 2011] [11:56:06] &lt;sustrik&gt;        btw, POSIX doesn&#8217;t specify the unit :_</div>
<div class="line">[Monday 21 February 2011] [11:56:07] &lt;sustrik&gt;        :)</div>
<div class="line">[Monday 21 February 2011] [11:56:17] &lt;sustrik&gt;        it just says &#8220;buffer size&#8221;</div>
<div class="line">[Monday 21 February 2011] [11:56:22] &lt;cremes&gt; heh</div>
<div class="line">[Monday 21 February 2011] [11:56:47] &lt;cremes&gt; yeah, i can&#8217;t imagine get/setsockopt are broken for all sockets... that would be <em>very</em> obvious</div>
<div class="line">[Monday 21 February 2011] [11:56:56] &lt;sustrik&gt;        Same with Stevens&#8217; book</div>
<div class="line">[Monday 21 February 2011] [11:57:09] &lt;sustrik&gt;        anyway, let me write an example</div>
<div class="line">[Monday 21 February 2011] [11:57:58] &lt;cremes&gt; k</div>
<div class="line">[Monday 21 February 2011] [12:02:22] &lt;pieter_hintjens&gt;        sustrik: you were right...!</div>
<div class="line">[Monday 21 February 2011] [12:02:55] &lt;pieter_hintjens&gt;        0MQ is just too fast, all the 1M messages get broadcast even before the clients connect...</div>
<div class="line">[Monday 21 February 2011] [12:03:23] &lt;sustrik&gt;        heh</div>
<div class="line">[Monday 21 February 2011] [12:03:52] &lt;pieter_hintjens&gt;        it makes it quite a challenge to synchronize subscribers and publishers then...</div>
<div class="line">[Monday 21 February 2011] [12:03:58] &lt;pieter_hintjens&gt;        not sure the worked example is even valid</div>
<div class="line">[Monday 21 February 2011] [12:06:27] &lt;sustrik&gt;        i am not sure that&#8217;s it even possible</div>
<div class="line">[Monday 21 February 2011] [12:06:35] &lt;sustrik&gt;        it&#8217;s like synchronising a radio show</div>
<div class="line">[Monday 21 February 2011] [12:06:38] &lt;sustrik&gt;        with all listeners</div>
<div class="line">[Monday 21 February 2011] [12:07:29] &lt;sustrik&gt;        there still me a letter from a listener in amazonia asking for postponing the show</div>
<div class="line">[Monday 21 February 2011] [12:07:39] &lt;sustrik&gt;        stuck somewhere in post office at manaos</div>
<div class="line">[Monday 21 February 2011] [12:08:38] &lt;sustrik&gt;        if you know the number of listeners in advance, it can be solvable</div>
<div class="line">[Monday 21 February 2011] [12:13:02] &lt;sustrik&gt;        cremes: i&#8217;ve created a socket pair on OSX</div>
<div class="line">[Monday 21 February 2011] [12:13:14] &lt;cremes&gt; ok</div>
<div class="line">[Monday 21 February 2011] [12:13:22] &lt;sustrik&gt;        tried to getsockopt the SNDBUF and RCVBUF</div>
<div class="line">[Monday 21 February 2011] [12:13:28] &lt;sustrik&gt;        both result in 3,000,000</div>
<div class="line">[Monday 21 February 2011] [12:13:43] &lt;sustrik&gt;        where have you seen it returning a zero?</div>
<div class="line">[Monday 21 February 2011] [12:14:26] &lt;cremes&gt; in mailbox.cpp ::send, that buffer expansion code will return 0 or 32 depending</div>
<div class="line">[Monday 21 February 2011] [12:14:59] &lt;cremes&gt; zmq::mailbox_t::send around line 160</div>
<div class="line">[Monday 21 February 2011] [12:15:26] &lt;sustrik&gt;        strange</div>
<div class="line">[Monday 21 February 2011] [12:15:27] &lt;cremes&gt; line 170 usually fails to return a sane number</div>
<div class="line">[Monday 21 February 2011] [12:15:43] &lt;sustrik&gt;        meybe setsockopt uses different units than getsockopt?</div>
<div class="line">[Monday 21 February 2011] [12:15:48] &lt;sustrik&gt;        let me try</div>
<div class="line">[Monday 21 February 2011] [12:16:08] &lt;cremes&gt; btw, that 3 million number is bytes and i set it in my /etc/sysctl.conf if you want to look at that</div>
<div class="line">[Monday 21 February 2011] [12:16:26] &lt;sustrik&gt;        that seems to be ok</div>
<div class="line">[Monday 21 February 2011] [12:16:27] &lt;cremes&gt; that&#8217;s the sysctl for local communications which is what i guess socketpair uses</div>
<div class="line">[Monday 21 February 2011] [12:16:30] &lt;sustrik&gt;        no need checking</div>
<div class="line">[Monday 21 February 2011] [12:16:39] &lt;sustrik&gt;        the problem is somewhere further down the way</div>
<div class="line">[Monday 21 February 2011] [12:21:22] &lt;sustrik&gt;        resizing on osx works better on osx than on linux :)</div>
<div class="line">[Monday 21 February 2011] [12:21:29] &lt;sustrik&gt;        i resize to 100,000</div>
<div class="line">[Monday 21 February 2011] [12:21:32] &lt;sustrik&gt;        i check the size</div>
<div class="line">[Monday 21 February 2011] [12:21:35] &lt;sustrik&gt;        i get 100000</div>
<div class="line">[Monday 21 February 2011] [12:21:45] &lt;sustrik&gt;        when i do same with linux i get</div>
<div class="line">[Monday 21 February 2011] [12:21:47] &lt;sustrik&gt;        200000</div>
<div class="line">[Monday 21 February 2011] [12:22:00] &lt;cremes&gt; heh</div>
<div class="line">[Monday 21 February 2011] [12:22:23] &lt;cremes&gt; try running that stress test... that usually blows it up</div>
<div class="line">[Monday 21 February 2011] [12:27:21] &lt;pieter_hintjens&gt;        sustrik: something to think about for the future, if we can make synchronous connects</div>
<div class="line">[Monday 21 February 2011] [12:27:34] &lt;pieter_hintjens&gt;        it&#8217;d add real value IMO</div>
<div class="line">[Monday 21 February 2011] [12:27:46] &lt;pieter_hintjens&gt;        for certain use cases at least</div>
<div class="line">[Monday 21 February 2011] [12:28:19] &lt;cremes&gt; pieter_hintjens: that could be provided by an add-on/wrapper library</div>
<div class="line">[Monday 21 February 2011] [12:28:26] &lt;pieter_hintjens&gt;        nope, not afaics</div>
<div class="line">[Monday 21 February 2011] [12:28:35] &lt;pieter_hintjens&gt;        i&#8217;m hitting this problem in one of the examples</div>
<div class="line">[Monday 21 February 2011] [12:28:47] &lt;cremes&gt; why, because connection status isn&#8217;t exposed?</div>
<div class="line">[Monday 21 February 2011] [12:28:53] &lt;pieter_hintjens&gt;        i use a req/rep dialog to synchronize the two peers, then a pubsub dialog for the data</div>
<div class="line">[Monday 21 February 2011] [12:29:04] &lt;cremes&gt; sounds like ftp</div>
<div class="line">[Monday 21 February 2011] [12:29:11] &lt;pieter_hintjens&gt;        but I can&#8217;t get the two synchronized</div>
<div class="line">[Monday 21 February 2011] [12:29:20] &lt;pieter_hintjens&gt;        because the pubsub connect can take any arbitrary time</div>
<div class="line">[Monday 21 February 2011] [12:29:37] &lt;cremes&gt; hmmm</div>
<div class="line">[Monday 21 February 2011] [12:29:38] &lt;pieter_hintjens&gt;        so even if the req/rep dialog says &#8216;ready&#8217;, that doesn&#8217;t mean the subscriber will get data</div>
<div class="line">[Monday 21 February 2011] [12:29:43] &lt;cremes&gt; right</div>
<div class="line">[Monday 21 February 2011] [12:29:56] &lt;pieter_hintjens&gt;        the only sure way is that the pubsub dialog explicitly confirms the connection, if over a connected transport</div>
<div class="line">[Monday 21 February 2011] [12:30:11] &lt;cremes&gt; so, you bind the SUB socket, the req/rep says ready, you connect the PUB and it fails?</div>
<div class="line">[Monday 21 February 2011] [12:30:15] &lt;pieter_hintjens&gt;        yup</div>
<div class="line">[Monday 21 February 2011] [12:30:26] &lt;cremes&gt; sounds like a bug</div>
<div class="line">[Monday 21 February 2011] [12:30:27] &lt;pieter_hintjens&gt;        doesn&#8217;t fail, just doesn&#8217;t connect in time to get any data</div>
<div class="line">[Monday 21 February 2011] [12:30:40] &lt;cremes&gt; wait, which one doesn&#8217;t connect in time to get data?</div>
<div class="line">[Monday 21 February 2011] [12:30:57] &lt;pieter_hintjens&gt;        It&#8217;s this one: <a class="reference external" href="https://github.com/zeromq/zeromq2/issues/169">https://github.com/zeromq/zeromq2/issues/169</a></div>
<div class="line">[Monday 21 February 2011] [12:31:46] &lt;pieter_hintjens&gt;        i&#8217;d like a handshake between publisher &amp; subscriber at connect time, which is exposed to the app</div>
<div class="line">[Monday 21 February 2011] [12:32:04] &lt;pieter_hintjens&gt;        so subscriber sends identity, and publisher acknowledges, and app code can wait for that to complete</div>
<div class="line">[Monday 21 February 2011] [12:32:10] &lt;pieter_hintjens&gt;        optionally</div>
<div class="line">[Monday 21 February 2011] [12:32:14] &lt;cremes&gt; pieter_hintjens: this is why i use devices so much</div>
<div class="line">[Monday 21 February 2011] [12:32:33] &lt;cremes&gt; put a forwarder in the middle and it will probably work</div>
<div class="line">[Monday 21 February 2011] [12:32:45] &lt;cremes&gt; the pub connects to the forwarder as do the subs</div>
<div class="line">[Monday 21 February 2011] [12:32:56] &lt;pieter_hintjens&gt;        i&#8217;ll have the same issue from forwarder to subscribers</div>
<div class="line">[Monday 21 February 2011] [12:32:59] &lt;cremes&gt; when your req/rep gives the all-clear, let &#8216;er rip</div>
<div class="line">[Monday 21 February 2011] [12:33:36] &lt;cremes&gt; well, if zmq_connect() takes an arbitrary amount of time, that seems like a &#8216;broken&#8217; contract to me</div>
<div class="line">[Monday 21 February 2011] [12:33:36] &lt;pieter_hintjens&gt;        it&#8217;s all asynchronous, adding more steps may introduce enough delay, but it&#8217;s not certain</div>
<div class="line">[Monday 21 February 2011] [12:33:43] &lt;cremes&gt; right, i see</div>
<div class="line">[Monday 21 February 2011] [12:34:22] &lt;pieter_hintjens&gt;        sustrik: would you consider a handshake for new connections?</div>
<div class="line">[Monday 21 February 2011] [12:34:38] &lt;pieter_hintjens&gt;        i.e. C: identity frame, S: identity ack</div>
<div class="line">[Monday 21 February 2011] [14:16:13] &lt;sustrik&gt;        cremes: still there?</div>
<div class="line">[Monday 21 February 2011] [14:16:24] &lt;cremes&gt; sustrik: yes</div>
<div class="line">[Monday 21 February 2011] [14:16:27] &lt;sustrik&gt;        git doesn&#8217;t seem to be installed on your box</div>
<div class="line">[Monday 21 February 2011] [14:16:54] &lt;sustrik&gt;        how do you get the sources?</div>
<div class="line">[Monday 21 February 2011] [14:16:57] &lt;cremes&gt; add /opt/local/bin to your $PATH</div>
<div class="line">[Monday 21 February 2011] [14:17:02] &lt;sustrik&gt;        ok</div>
<div class="line">[Monday 21 February 2011] [14:17:27] &lt;sustrik&gt;        works!</div>
<div class="line">[Monday 21 February 2011] [14:17:28] &lt;sustrik&gt;        thanks</div>
<div class="line">[Monday 21 February 2011] [14:17:34] &lt;cremes&gt; you&#8217;re welcome</div>
<div class="line">[Monday 21 February 2011] [14:19:58] &lt;sustrik&gt;        btw, have you seen the shutdown stress to fail with head?</div>
<div class="line">[Monday 21 February 2011] [14:20:18] &lt;sustrik&gt;        doesn&#8217;t fail for me</div>
<div class="line">[Monday 21 February 2011] [14:20:35]   * sustrik guesses that the problem was alleviated by introduction of the reaper thread</div>
<div class="line">[Monday 21 February 2011] [14:26:17] &lt;cremes&gt; sustrik: i haven&#8217;t seen it fail since i boosted my buffers to 3MB (that 3 million number you saw earlier)</div>
<div class="line">[Monday 21 February 2011] [14:26:28] &lt;cremes&gt; if i move back to the defaults, i&#8217;m fairly certain it will fail</div>
<div class="line">[Monday 21 February 2011] [14:26:29] &lt;sustrik&gt;        aha</div>
<div class="line">[Monday 21 February 2011] [14:26:36] &lt;sustrik&gt;        can you do that?</div>
<div class="line">[Monday 21 February 2011] [14:26:54] &lt;cremes&gt; not at the moment... i&#8217;m wrapping up some work</div>
<div class="line">[Monday 21 February 2011] [14:26:59] &lt;cremes&gt; i can do that tomorrow</div>
<div class="line">[Monday 21 February 2011] [14:27:00] &lt;sustrik&gt;        ok, np</div>
<div class="line">[Monday 21 February 2011] [14:27:09] &lt;sustrik&gt;        just ping me then</div>
<div class="line">[Monday 21 February 2011] [14:28:05] &lt;ljackson&gt;       did I read the documentation correctly that in a multithreaded app the zmq context is common to all sockets bind and connect ?</div>
<div class="line">[Monday 21 February 2011] [14:28:40] &lt;sustrik&gt;        yes</div>
<div class="line">[Monday 21 February 2011] [14:29:45] &lt;ljackson&gt;       k, if you have a embeded queue device with workers in threads connecting to inproc</div>
<div class="line">[Monday 21 February 2011] [14:29:57] &lt;pieter_hintjens&gt;        ljackson: only necessarily if you&#8217;re using inproc</div>
<div class="line">[Monday 21 February 2011] [14:30:08] &lt;ljackson&gt;       can you with the same context in another thread add stuff to the queue via another inproc ?</div>
<div class="line">[Monday 21 February 2011] [14:30:16] &lt;ljackson&gt;       pieter_hintjens, good to know.</div>
<div class="line">[Monday 21 February 2011] [14:30:33] &lt;pieter_hintjens&gt;        ljackson: the semantic for communicating between threads is &#8216;send a message&#8217;</div>
<div class="line">[Monday 21 February 2011] [14:30:44] &lt;pieter_hintjens&gt;        you can send a message to the queue device from any thread, obviously</div>
<div class="line">[Monday 21 February 2011] [14:30:46] &lt;ljackson&gt;       what I am seeing is zmq hanging trying to connect/bind must be something i messed up then</div>
<div class="line">[Monday 21 February 2011] [14:31:22] &lt;ljackson&gt;       basically as a test tring to take mtserver.cpp and put the client internal all on inproc using same context is this even valid ?</div>
<div class="line">[Monday 21 February 2011] [14:31:31] &lt;ljackson&gt;       obviously</div>
<div class="line">[Monday 21 February 2011] [14:31:37] &lt;ljackson&gt;       diffrent inproc:// addresses</div>
<div class="line">[Monday 21 February 2011] [14:31:53] &lt;ljackson&gt;       workers for threads as example has and then using queue for clients</div>
<div class="line">[Monday 21 February 2011] [14:31:58] &lt;pieter_hintjens&gt;        it should work</div>
<div class="line">[Monday 21 February 2011] [14:32:02] &lt;ljackson&gt;       humm</div>
<div class="line">[Monday 21 February 2011] [14:32:24] &lt;ljackson&gt;       ok will keep digging or write example test code if I can get it to work and ask again here</div>
<div class="line">[Monday 21 February 2011] [14:32:27] &lt;ljackson&gt;       thx</div>
<div class="line">[Monday 21 February 2011] [14:32:30] &lt;pieter_hintjens&gt;        if your code&#8217;s short, post it to a gist so we can look at it</div>
<div class="line">[Monday 21 February 2011] [14:33:06] &lt;ljackson&gt;       yeah might have to write an example code for my own sanity anyway if I can reproduce my issue I will post and ask again here</div>
<div class="line">[Monday 21 February 2011] [14:34:44] &lt;ljackson&gt;       i also believe I read that the order of connection bind vs connect doesn&#8217;t matter? Or is that in only certain socket types ?</div>
<div class="line">[Monday 21 February 2011] [14:35:00] &lt;ljackson&gt;       worried that the device thread is not binding before the workers connect</div>
<div class="line">[Monday 21 February 2011] [14:35:06] &lt;ljackson&gt;       ...etc.</div>
<div class="line">[Monday 21 February 2011] [14:35:32] &lt;pieter_hintjens&gt;        for inproc it matters</div>
<div class="line">[Monday 21 February 2011] [14:35:38] &lt;pieter_hintjens&gt;        you must absolutely bind, then connect</div>
<div class="line">[Monday 21 February 2011] [14:35:50] &lt;pieter_hintjens&gt;        let me send you a new version of mtrelay that shows how I do this in 2.1</div>
<div class="line">[Monday 21 February 2011] [14:35:54] &lt;pieter_hintjens&gt;        it&#8217;s somewhat changed</div>
<div class="line">[Monday 21 February 2011] [14:36:04] &lt;ljackson&gt;       nice thx, I am using 2.1.1 from git</div>
<div class="line">[Monday 21 February 2011] [14:36:25] &lt;pieter_hintjens&gt;        <a class="reference external" href="https://gist.github.com/837575">https://gist.github.com/837575</a></div>
<div class="line">[Monday 21 February 2011] [14:36:43] &lt;pieter_hintjens&gt;        the trick is to bind and connect a socket pair in the parent thread, then pass the context &amp; socket to the child thread</div>
<div class="line">[Monday 21 February 2011] [14:37:06] &lt;pieter_hintjens&gt;        i will try to make a simple abstraction for this, it&#8217;s a very common pattern</div>
<div class="line">[Monday 21 February 2011] [14:37:28] &lt;pieter_hintjens&gt;        specifically for inproc multithreading that is never intended to be scaled out</div>
<div class="line">[Monday 21 February 2011] [14:39:23] &lt;ljackson&gt;       humm</div>
<div class="line">[Monday 21 February 2011] [14:39:38] &lt;ljackson&gt;       i thought you were never to share/send the socket ?</div>
<div class="line">[Monday 21 February 2011] [14:42:23] &lt;pieter_hintjens&gt;        in 2.1 this is legal, and extremely useful for inproc/multithreading</div>
<div class="line">[Monday 21 February 2011] [14:42:31] &lt;pieter_hintjens&gt;        not shared, just sent</div>
<div class="line">[Monday 21 February 2011] [14:49:52] &lt;ljackson&gt;       ahh i get it so you know for sure that it was done in the correct order</div>
<div class="line">[Monday 21 February 2011] [14:50:04] &lt;ljackson&gt;       then you send on the pointer and forget you knew about it</div>
<div class="line">[Monday 21 February 2011] [14:50:07] &lt;ljackson&gt;       k</div>
<div class="line">[Monday 21 February 2011] [14:51:40] &lt;ljackson&gt;       pieter_hintjens, so you need to bind a new socket for each worker thread then</div>
<div class="line">[Monday 21 February 2011] [14:51:54] &lt;ljackson&gt;       in REQ/RES...etc.</div>
<div class="line">[Monday 21 February 2011] [14:52:25] &lt;pieter_hintjens&gt;        yes</div>
<div class="line">[Monday 21 February 2011] [14:55:06] &lt;amacleod&gt;       What 0MQ pattern is best for an asynchronous dialogue, where 2 participants can send messages but there doesn&#8217;t need to be a 1:1 request/response correspondence?</div>
<div class="line">[Monday 21 February 2011] [14:55:20] &lt;amacleod&gt;       Can XREQ/XREP do that?</div>
<div class="line">[Monday 21 February 2011] [14:56:42] &lt;ljackson&gt;       pieter_hintjens, thread_args_t <a href="#id45"><span class="problematic" id="id46">*</span></a>child; child-&gt;socket = new zmq::socket_t(<a href="#id47"><span class="problematic" id="id48">*</span></a>context, ZMQ_ZXREP); ?</div>
<div class="line">[Monday 21 February 2011] [14:57:08] &lt;cremes&gt; amacleod: yes, those sockets are the perfect choice</div>
<div class="line">[Monday 21 February 2011] [14:57:15] &lt;pieter_hintjens&gt;        ljackson: what&#8217;s the question?</div>
<div class="line">[Monday 21 February 2011] [14:57:34] &lt;amacleod&gt;       Okay, cool.  My next step is to understand how to use identity addressing, then.</div>
<div class="line">[Monday 21 February 2011] [14:57:43] &lt;pieter_hintjens&gt;        amacleod: have you read the Guide yet?</div>
<div class="line">[Monday 21 February 2011] [14:57:45] &lt;ljackson&gt;       c++ vs your example</div>
<div class="line">[Monday 21 February 2011] [14:57:55] &lt;amacleod&gt;       pieter_hintjens, parts of it.</div>
<div class="line">[Monday 21 February 2011] [14:58:04] &lt;pieter_hintjens&gt;        ljackson: you&#8217;re asking whether the C++ is correct?</div>
<div class="line">[Monday 21 February 2011] [14:58:46] &lt;ljackson&gt;       as in the new pointer .. yeah nevermind answered my own Q</div>
<div class="line">[Monday 21 February 2011] [15:05:28] &lt;amacleod&gt;       So, I noticed when using the Java bindings, I cannot seem to interrupt a recv operation that&#8217;s trying to read from a socket whose other endpoint doesn&#8217;t exist.</div>
<div class="line">[Monday 21 February 2011] [15:05:51] &lt;amacleod&gt;       If I want to preserve Java interruptability, should I be using NOBLOCK and a poller?</div>
<div class="line">[Monday 21 February 2011] [15:16:28] &lt;fbarriga&gt;       I have a little problem with python</div>
<div class="line">[Monday 21 February 2011] [15:16:41] &lt;fbarriga&gt;       I can&#8217;t receive an structure from C++</div>
<div class="line">[Monday 21 February 2011] [15:16:56] &lt;amacleod&gt;       fbarriga, what format are you using to serialize structures?</div>
<div class="line">[Monday 21 February 2011] [15:17:00] &lt;fbarriga&gt;       I don&#8217;t know why It tries to receive it like a string</div>
<div class="line">[Monday 21 February 2011] [15:17:06] &lt;fbarriga&gt;       in C++ raw structure</div>
<div class="line">[Monday 21 February 2011] [15:17:11] &lt;fbarriga&gt;       in python struct.unpack</div>
<div class="line">[Monday 21 February 2011] [15:17:16] &lt;fbarriga&gt;       in the reverse way it works</div>
<div class="line">[Monday 21 February 2011] [15:17:59] &lt;fbarriga&gt;       msg = self.socket.recv()</div>
<div class="line">[Monday 21 February 2011] [15:18:13] &lt;fbarriga&gt;       len (msg) it prints 29</div>
<div class="line">[Monday 21 February 2011] [15:18:59] &lt;fbarriga&gt;       and I&#8217;m sending only a double</div>
<div class="line">[Monday 21 February 2011] [15:19:09] &lt;fbarriga&gt;       double nav = 1; memcpy(zmq_msg_data(&amp;msg), &amp;nav, sizeof(double));</div>
<div class="line">[Monday 21 February 2011] [15:19:39] &lt;amacleod&gt;       Can you do a byte-by-byte comparison of what you&#8217;re getting on the wire and the result of struct.pack with the value you expect?</div>
<div class="line">[Monday 21 February 2011] [15:21:36] &lt;amacleod&gt;       On the C++ side you are telling zmq that your packet should be (sizeof double) bytes long?</div>
<div class="line">[Monday 21 February 2011] [15:22:48] &lt;ljackson&gt;       pieterh, acording to what I read in the docs/guide am i correct in that the PUSH/PULL socket can have multiple pushers and a single puller in the same context e.g. workers and sinks ?</div>
<div class="line">[Monday 21 February 2011] [15:23:06] &lt;pieterh&gt;        sure</div>
<div class="line">[Monday 21 February 2011] [15:23:12] &lt;fbarriga&gt;       sorry guys I found it</div>
<div class="line">[Monday 21 February 2011] [15:23:23] &lt;ljackson&gt;       pieterh, just wanted to make sure I read it right thx :)</div>
<div class="line">[Monday 21 February 2011] [15:23:34] &lt;pieterh&gt;        ljackson: all socket types except PAIR can be connected 1-N or N-1</div>
<div class="line">[Monday 21 February 2011] [15:23:42] &lt;ljackson&gt;       or N-N ?</div>
<div class="line">[Monday 21 February 2011] [15:23:54] &lt;fbarriga&gt;       quite stupid my error, I&#8217;ve 2 streams and I was connecting to the wrong one :(</div>
<div class="line">[Monday 21 February 2011] [15:24:00] &lt;pieterh&gt;        that&#8217;s just 1-N and N-1 from two sides</div>
<div class="line">[Monday 21 February 2011] [15:24:06] &lt;ljackson&gt;       ya</div>
<div class="line">[Monday 21 February 2011] [15:25:36] &lt;ljackson&gt;       inproc, pull push need the same treatment as req/res ..etc ?</div>
<div class="line">[Monday 21 February 2011] [15:28:08] &lt;pieterh&gt;        ljackson: rtfm here <a class="reference external" href="http://zguide.zeromq.org/chapter:all#toc21">http://zguide.zeromq.org/chapter:all#toc21</a></div>
<div class="line">[Monday 21 February 2011] [15:28:38] &lt;pieterh&gt;        i&#8217;m adding more detail on the 2.1 mtrelay example but the point is that inproc is not a disconnected transport</div>
<div class="line">[Monday 21 February 2011] [15:34:07] &lt;ljackson&gt;       k thx</div>
<div class="line">[Monday 21 February 2011] [15:52:53] &lt;amacleod&gt;       In Java bindings, how do I determine what error happened when recv returns null?</div>
<div class="line">[Monday 21 February 2011] [15:58:58] &lt;CIA-21&gt; jzmq: 03Gonzalo Diethelm 07master * r91da678 10/ (5 files in 2 dirs):</div>
<div class="line">[Monday 21 February 2011] [15:58:59] &lt;CIA-21&gt; jzmq: Use zmq_errno() everywhere instead of errno.</div>
<div class="line">[Monday 21 February 2011] [15:58:59] &lt;CIA-21&gt; jzmq: Set all projects to compile with a Release configuration. - <a class="reference external" href="http://bit.ly/h8ZIKL">http://bit.ly/h8ZIKL</a></div>
<div class="line">[Monday 21 February 2011] [16:05:49] &lt;gdan&gt;   trying to build in ubuntu 10.10:  installed: g++,g++ 4.5,gcc-opt, libstdc++6, libstdc++645-dev,   <a href="#id49"><span class="problematic" id="id50">**</span></a>* I am getting what appers to me stl errors, does anyone have a list of reuired libaries?</div>
<div class="line">[Monday 21 February 2011] [16:06:04] &lt;gdan&gt;   building the libzmq</div>
<div class="line">[Monday 21 February 2011] [16:09:08] &lt;pieterh&gt;        gdan: I&#8217;m searching for the answer...</div>
<div class="line">[Monday 21 February 2011] [16:09:15] &lt;gdan&gt;   thanks</div>
<div class="line">[Monday 21 February 2011] [16:10:56] &lt;pieterh&gt;        gdan: do you have build-essential?</div>
<div class="line">[Monday 21 February 2011] [16:11:11] &lt;gdan&gt;   let me check</div>
<div class="line">[Monday 21 February 2011] [16:12:51] &lt;gdan&gt;   do not see it, nor do i see it avail in software centr</div>
<div class="line">[Monday 21 February 2011] [16:13:11] &lt;pieterh&gt;        apt-get install build-essential</div>
<div class="line">[Monday 21 February 2011] [16:13:25] &lt;pieterh&gt;        sudo apt-get install build-essential, to be accurate</div>
<div class="line">[Monday 21 February 2011] [16:13:56] &lt;pieterh&gt;        also uuid-dev</div>
<div class="line">[Monday 21 February 2011] [16:14:05] &lt;gdan&gt;   installing...</div>
<div class="line">[Monday 21 February 2011] [16:14:35] &lt;soren&gt;  Or: sudo apt-get build-dep libzmq0</div>
<div class="line">[Monday 21 February 2011] [16:14:49] &lt;soren&gt;  That installs all the build-dependencies of the libzmq0 ubuntu package.</div>
<div class="line">[Monday 21 February 2011] [16:14:54] &lt;soren&gt;  Handy shortcut.</div>
<div class="line">[Monday 21 February 2011] [16:15:14] &lt;gdan&gt;   will do...</div>
<div class="line">[Monday 21 February 2011] [16:19:33] &lt;gdan&gt;   i re-ran  configure, now make is running.   so far, looks good.  thank you</div>
<div class="line">[Monday 21 February 2011] [16:24:39] &lt;pieterh&gt;        gdan: np</div>
<div class="line">[Monday 21 February 2011] [16:28:29] &lt;ljackson&gt;       pieterh, odd appears i am close, getting context terminated exception...</div>
<div class="line">[Monday 21 February 2011] [16:29:09] &lt;pieterh&gt;        main thread terminates the context before other threads are finished</div>
<div class="line">[Monday 21 February 2011] [16:31:23] &lt;ljackson&gt;       humm</div>
<div class="line">[Monday 21 February 2011] [16:32:40] &lt;ljackson&gt;       this happens starting up the ZMQ_QUEUE device. even before I get to starting worker threads</div>
<div class="line">[Monday 21 February 2011] [16:32:59] &lt;ljackson&gt;       QUEUE bridging inproc not tested ?</div>
<div class="line">[Monday 21 February 2011] [16:38:43] &lt;pieterh&gt;        ljackson: hard to say without code to look at</div>
<div class="line">[Monday 21 February 2011] [16:39:07] &lt;pieterh&gt;        the queue device is just normal code</div>
<div class="line">[Monday 21 February 2011] [16:39:47] &lt;pieterh&gt;        find where you&#8217;re doing zmq_term, print &#8220;HELLO&#8221; and then check whether that shows before the error...</div>
<div class="line">[Monday 21 February 2011] [16:40:02] &lt;pieterh&gt;        if you terminate the context, that kills all inproc sockets</div>
<div class="line">[Monday 21 February 2011] [16:42:50] &lt;ljackson&gt;       yeah not doing any terminate, but a few other things with this existing code... prob need to make test code to try to reproduce</div>
<div class="line">[Monday 21 February 2011] [16:49:12] &lt;ljackson&gt;       doh I think i see it</div>
<div class="line">[Monday 21 February 2011] [16:51:18] &lt;amacleod&gt;       Where are the URIs for 0MQ documented?  I assumed I should be using <a class="reference external" href="tcp://host:port">tcp://host:port</a> even for my XREQ/XREP dialogue, but the &#8220;mamas/papas&#8221; examples in the guide use things like &#8220;ipc://routing.ipc&#8221;.</div>
<div class="line">[Monday 21 February 2011] [16:53:46] &lt;amacleod&gt;       Found it.  zmq_ipc(7) man page.</div>
<div class="line">[Monday 21 February 2011] [16:58:03] &lt;pieterh&gt;        amacleod: zmq_bind / zmq_connect man pages list the transports, each has its own man page</div>
<div class="line">[Monday 21 February 2011] [16:59:05] &lt;amacleod&gt;       Ok, thanks.  So I still want tcp since I want all my sockets to be remote.</div>
<div class="line">[Monday 21 February 2011] [17:00:44] &lt;amacleod&gt;       I&#8217;m still having trouble wrapping my head around the addressing requirements for XREQ/XREP.</div>
<div class="line">[Monday 21 February 2011] [17:01:26] &lt;amacleod&gt;       So far I have an XREP &#8220;server&#8221; that listens for connections.  I&#8217;m able to create an XREQ &#8220;client&#8221; that establishes a connection and sends a request.</div>
<div class="line">[Monday 21 February 2011] [17:01:56] &lt;amacleod&gt;       The server sees the request and where it came from (2 message parts: address, payload), and is able to reply.</div>
<div class="line">[Monday 21 February 2011] [17:02:27] &lt;amacleod&gt;       When I send the reply as (address, null, payload), I can see in wireshark that some data gets sent in the opposite direction on the socket, but my recv call in the client never returns.</div>
<div class="line">[Monday 21 February 2011] [17:02:35] &lt;pieterh&gt;        amacleod: ... some generalities about the request-reply pattern</div>
<div class="line">[Monday 21 February 2011] [17:02:51] &lt;pieterh&gt;        in most cases, client is REQ and server is REP</div>
<div class="line">[Monday 21 February 2011] [17:03:06] &lt;pieterh&gt;        and anything in the middle (e.g. queue device) is XREP&#8211;XREQ</div>
<div class="line">[Monday 21 February 2011] [17:03:20] &lt;pieterh&gt;        that&#8217;s the basic layout</div>
<div class="line">[Monday 21 February 2011] [17:03:29] &lt;pieterh&gt;        after that there is the weird stuff</div>
<div class="line">[Monday 21 February 2011] [17:03:42] &lt;pieterh&gt;        which chapter 3 explains</div>
<div class="line">[Monday 21 February 2011] [17:03:47] &lt;amacleod&gt;       So to do this &#8220;asynchronous dialogue&#8221; thing, do I need to have more than 2 participants?</div>
<div class="line">[Monday 21 February 2011] [17:04:06] &lt;pieterh&gt;        asynchronous means what exactly?</div>
<div class="line">[Monday 21 February 2011] [17:04:16] &lt;pieterh&gt;        in your use case, I mean</div>
<div class="line">[Monday 21 February 2011] [17:04:21] &lt;amacleod&gt;       Not lockstep on requests and replies.</div>
<div class="line">[Monday 21 February 2011] [17:04:30] &lt;pieterh&gt;        so how do the messages flow?</div>
<div class="line">[Monday 21 February 2011] [17:04:37] &lt;pieterh&gt;        do you have N clients, 1 server?</div>
<div class="line">[Monday 21 February 2011] [17:04:43] &lt;pieterh&gt;        N clients, N servers?</div>
<div class="line">[Monday 21 February 2011] [17:04:45] &lt;amacleod&gt;       Yes.. N clients, 1 server.</div>
<div class="line">[Monday 21 February 2011] [17:04:51] &lt;amacleod&gt;       Bi-directional messages.</div>
<div class="line">[Monday 21 February 2011] [17:05:08] &lt;pieterh&gt;        can servers send messages to clients who have not sent a message to the server?</div>
<div class="line">[Monday 21 February 2011] [17:05:17] &lt;pieterh&gt;        or is it 1 request / 0-N responses?</div>
<div class="line">[Monday 21 February 2011] [17:05:21] &lt;amacleod&gt;       No.  There has to be at least an initial handshake.</div>
<div class="line">[Monday 21 February 2011] [17:05:29] &lt;amacleod&gt;       It&#8217;s 1-N requests, 0-N responses.</div>
<div class="line">[Monday 21 February 2011] [17:05:44] &lt;amacleod&gt;       So, the client can still send messages to the server even while the server is sending responses.</div>
<div class="line">[Monday 21 February 2011] [17:05:47] &lt;pieterh&gt;        can clients pipeline requests?</div>
<div class="line">[Monday 21 February 2011] [17:05:50] &lt;pieterh&gt;        ah, ok</div>
<div class="line">[Monday 21 February 2011] [17:06:26] &lt;pieterh&gt;        so your server definitely has to be XREP (which we will rename to ROUTER at some stage)</div>
<div class="line">[Monday 21 February 2011] [17:06:39] &lt;amacleod&gt;       Okay.  That&#8217;s the way I have it.</div>
<div class="line">[Monday 21 February 2011] [17:06:57] &lt;pieterh&gt;        your clients always initiate the dialog, and they talk to a single server only</div>
<div class="line">[Monday 21 February 2011] [17:07:04] &lt;amacleod&gt;       When I get messages in on the server, I add the identity to a routing table in the server object.</div>
<div class="line">[Monday 21 February 2011] [17:07:05] &lt;gdan&gt;   does anyone know in mono, how in mono (on ubuntu) i reference the libzmq runtime libraries i just built in the project?  ( do see that they are in usr/local/lib)</div>
<div class="line">[Monday 21 February 2011] [17:07:10] &lt;pieterh&gt;        so they do indeed use XREQ</div>
<div class="line">[Monday 21 February 2011] [17:07:13] &lt;amacleod&gt;       pieterh, that is correct.</div>
<div class="line">[Monday 21 February 2011] [17:07:27] &lt;pieterh&gt;        if your clients talked to N servers, you&#8217;d want to use XREP for them as well</div>
<div class="line">[Monday 21 February 2011] [17:07:28] &lt;amacleod&gt;       gdan, does mono respect LD_LIBRARY_PATH?</div>
<div class="line">[Monday 21 February 2011] [17:08:11] &lt;gdan&gt;   don&#8217;t know.   perhaps when i run i specify the path?</div>
<div class="line">[Monday 21 February 2011] [17:08:24] &lt;amacleod&gt;       pieterh, indeed.  One thing I didn&#8217;t realize at first was that, with XREQ, I did not need to explicitly send the client&#8217;s identity.</div>
<div class="line">[Monday 21 February 2011] [17:08:55] &lt;amacleod&gt;       gdan, I know in Java, I have to do something like -Djava.library.path=path/to/jzmq_native.  Probably mono has something similar.</div>
<div class="line">[Monday 21 February 2011] [17:08:57] &lt;pieterh&gt;        amacleod: if you use either XREP or XREQ in your code, you absolutely have to study and learn how these sockets create and use envelopes</div>
<div class="line">[Monday 21 February 2011] [17:09:13] &lt;pieterh&gt;        it&#8217;s logical once you know it but it is really not obvious</div>
<div class="line">[Monday 21 February 2011] [17:09:26] &lt;amacleod&gt;       pieterh, I have been trying to understand a bit by looking at wireshark.</div>
<div class="line">[Monday 21 February 2011] [17:09:30] &lt;gdan&gt;   i&#8217;ll look</div>
<div class="line">[Monday 21 February 2011] [17:09:46] &lt;pieterh&gt;        it&#8217;s explained in Ch3, look for Request-Reply envelopes</div>
<div class="line">[Monday 21 February 2011] [17:10:26] &lt;amacleod&gt;       One thing I was confused about in chapter 3 was how XREP and XREQ expect their envelopes.  Is it true that XREQ expects envelopes the same way REQ does and that XREP expects envelopes the same way REP does?</div>
<div class="line">[Monday 21 February 2011] [17:10:35] &lt;pieterh&gt;        no</div>
<div class="line">[Monday 21 February 2011] [17:10:39] &lt;pieterh&gt;        the name XREQ is highly misleading</div>
<div class="line">[Monday 21 February 2011] [17:10:46] &lt;pieterh&gt;        it should and will be called &#8220;DEALER&#8221;</div>
<div class="line">[Monday 21 February 2011] [17:10:56] &lt;pieterh&gt;        it is exactly equivalent to a PUSH+PULL combination</div>
<div class="line">[Monday 21 February 2011] [17:11:11] &lt;pieterh&gt;        it deals messages out, and in, without changing them</div>
<div class="line">[Monday 21 February 2011] [17:11:37] &lt;pieterh&gt;        whereas REP is a terminator that rips open the envelope, hides it, gives you the contents, and sneakily recreates the envelope when you send a reply</div>
<div class="line">[Monday 21 February 2011] [17:11:51] &lt;pieterh&gt;        they are fundamentally different tools</div>
<div class="line">[Monday 21 February 2011] [17:12:35] &lt;pieterh&gt;        take a look at the rtdealer example</div>
<div class="line">[Monday 21 February 2011] [17:12:38] &lt;amacleod&gt;       Ok.  What I was thinking a while ago is that I could achieve what I wanted with a pair of REQ/REP sockets, one for each direction.  The replies would always be dinky little &#8220;yep I got it&#8221; acknowledgements.</div>
<div class="line">[Monday 21 February 2011] [17:13:01] &lt;pieterh&gt;        it will work really easily using XREQ/XREP, don&#8217;t panic</div>
<div class="line">[Monday 21 February 2011] [17:13:18] &lt;amacleod&gt;       But I couldn&#8217;t think of a good way to create both at once.  (trying not to panic :-D)</div>
<div class="line">[Monday 21 February 2011] [17:13:50] &lt;pieterh&gt;        - your clients using XREQ just connect, and send simple messages</div>
<div class="line">[Monday 21 February 2011] [17:14:19] &lt;pieterh&gt;        - the server, when it receives a message, gives the app the client identity, followed by the simple message, in two parts</div>
<div class="line">[Monday 21 February 2011] [17:14:21] &lt;amacleod&gt;       So they are similar to the &#8220;worker&#8221; in rtdealer?  (I say this because worker uses XREQ).</div>
<div class="line">[Monday 21 February 2011] [17:14:42] &lt;pieterh&gt;        - the server, when it wants to talk to client A, sends two parts: identity A, and then simple message</div>
<div class="line">[Monday 21 February 2011] [17:14:59] &lt;pieterh&gt;        in rtdealer, client is the worker (uses XREQ as you see), server is the main thread</div>
<div class="line">[Monday 21 February 2011] [17:15:20] &lt;pieterh&gt;        would it help to have a real example of a server and clients working like this?</div>
<div class="line">[Monday 21 February 2011] [17:15:34] &lt;pieterh&gt;        i&#8217;ll make one tomorrow, it&#8217;s late here now</div>
<div class="line">[Monday 21 February 2011] [17:15:55] &lt;amacleod&gt;       Possibly.  I might try translating rtdealer into Java after I get home.</div>
<div class="line">[Monday 21 February 2011] [17:16:10] &lt;pieterh&gt;        it&#8217;s not literally what you want, but it shows how to use that socket pair</div>
<div class="line">[Monday 21 February 2011] [17:17:15] &lt;amacleod&gt;       I thought that I had things pretty much okay as far as you have said.  When you say &#8220;the server sends two parts: identity A, and then simple message&#8221;, do you mean that XREP(router) does that for me when I call send, or that my code should do that using sendmore followed by send?</div>
<div class="line">[Monday 21 February 2011] [17:17:56] &lt;pieterh&gt;        sendmore followed by send</div>
<div class="line">[Monday 21 February 2011] [17:18:09] &lt;pieterh&gt;        you need to explicitly tell the router socket who to send the message to</div>
<div class="line">[Monday 21 February 2011] [17:18:17] &lt;pieterh&gt;        it does not actually send the identity</div>
<div class="line">[Monday 21 February 2011] [17:18:32] &lt;pieterh&gt;        it uses that to decide what client to talk to, then sends the remaining message part(s)</div>
<div class="line">[Monday 21 February 2011] [17:18:42] &lt;amacleod&gt;       Ok.  It&#8217;s possible there is a bug in my client receiving code.  I did see the reply come back on the socket in wireshark.</div>
<div class="line">[Monday 21 February 2011] [17:19:43] &lt;pieterh&gt;        I think your use case is much better than the one I used for XREP-XREQ</div>
<div class="line">[Monday 21 February 2011] [17:20:00] &lt;pieterh&gt;        so I&#8217;ll change the Guide for that...</div>
<div class="line">[Monday 21 February 2011] [17:20:20] &lt;amacleod&gt;       It&#8217;s for instant-message style chat.  (wrapping XMPP).</div>
<div class="line">[Monday 21 February 2011] [17:20:40] &lt;pieterh&gt;        indeed</div>
<div class="line">[Monday 21 February 2011] [17:20:53] &lt;pieterh&gt;        tomorrow sometime I&#8217;ll have a working example</div>
<div class="line">[Monday 21 February 2011] [17:21:38] &lt;amacleod&gt;       Ok.  I&#8217;ll stop pestering you so you can sleep :-)  If I am able to translate the current example into Java, I&#8217;ll let you know here tomorrow.</div>
<div class="line">[Monday 21 February 2011] [17:23:20] &lt;pieterh&gt;        np :-)</div>
<div class="line">[Monday 21 February 2011] [17:41:39] &lt;CIA-21&gt; zeromq2: 03Mikko Koppanen 07master * r98ccff1 10/ builds/redhat/zeromq.spec :</div>
<div class="line">[Monday 21 February 2011] [17:41:40] &lt;CIA-21&gt; zeromq2: Fixes build on at least CentOS 5</div>
<div class="line">[Monday 21 February 2011] [17:41:40] &lt;CIA-21&gt; zeromq2: Signed-off-by: Mikko Koppanen &lt;<a class="reference external" href="mailto:mikko&#46;koppanen&#37;&#52;&#48;gmail&#46;com">mikko<span>&#46;</span>koppanen<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/hHoTEo">http://bit.ly/hHoTEo</a></div>
<div class="line">[Monday 21 February 2011] [18:39:57] &lt;rem7&gt;   what is the best way to ensure the delivery of a msg in a PUSH/PULL (something very similar to the ventilator tutorial) ... I sent out about 16Million msgs and my sink recvd 10million.</div>
<div class="line">[Monday 21 February 2011] [18:41:07] &lt;rem7&gt;   I was reading that multicast only works on PUB/SUB...?</div>
<div class="line">[Monday 21 February 2011] [18:50:24] &lt;mikko&gt;  sustrik: thanks!</div>
<div class="line">[Monday 21 February 2011] [19:20:28] &lt;cremes&gt; on a multi-part send, if any part fails (rc != 0 and errno is set) then 0mq gives my user code owernship of the messages again, yes?</div>
<div class="line">[Monday 21 February 2011] [19:20:50] &lt;cremes&gt; in normal circumstances, once you pass a message to zmq_send() it&#8217;s 0mq&#8217;s responsibility to call zmq_msg_close()</div>
<div class="line">[Monday 21 February 2011] [19:20:56] &lt;cremes&gt; except in the case above, right?</div>
<div class="line">[Monday 21 February 2011] [19:33:57] &lt;mikko&gt;  cremes: nope</div>
<div class="line">[Monday 21 February 2011] [19:34:07] &lt;mikko&gt;  cremes: even if you zmq_send message you need to close it</div>
<div class="line">[Monday 21 February 2011] [19:35:59] &lt;cremes&gt; mikko: sheesh, i&#8217;ve been doing this wrong for <em>months</em> then</div>
<div class="line">[Monday 21 February 2011] [19:36:34] &lt;cremes&gt; so, does zmq_send() increment the &#8220;copy counter&#8221; on the zmq_msg_t and then decrement it (and release) when it&#8217;s sent?</div>
<div class="line">[Monday 21 February 2011] [19:37:00] &lt;cremes&gt; it must otherwise when i call close it would release the message before 0mq has a chance to transmit it</div>
<div class="line">[Monday 21 February 2011] [19:37:10] &lt;cremes&gt; pls confirm if you can</div>
<div class="line">[Monday 21 February 2011] [20:37:20] &lt;mikko&gt;  cremes: sorry, was a away building stuff</div>
<div class="line">[Monday 21 February 2011] [20:37:55] &lt;mikko&gt;  cremes: you can close right after send</div>
<div class="line">[Monday 21 February 2011] [20:38:03] &lt;mikko&gt;  take a look at zguide for samples</div>
<div class="line">[Monday 21 February 2011] [20:38:47] &lt;mikko&gt;  <a class="reference external" href="https://github.com/zeromq/zeromq2/blob/master/src/zmq.cpp#L129">https://github.com/zeromq/zeromq2/blob/master/src/zmq.cpp#L129</a></div>
<div class="line">[Monday 21 February 2011] [20:38:52] &lt;mikko&gt;  also, that might clear it up a bit</div>
<div class="line">[Monday 21 February 2011] [20:40:14] &lt;mikko&gt;  also, see the page: <a class="reference external" href="http://api.zero.mq/master:zmq-msg-close">http://api.zero.mq/master:zmq-msg-close</a> for zmq_msg_close</div>
<div class="line">[Monday 21 February 2011] [21:09:39] &lt;jugg&gt;   whoa!  Since when did we get versioned api on the web?  Nice! :)</div>
<div class="line">[Monday 21 February 2011] [21:10:24] &lt;jugg&gt;   oh, different domain.  interesting.</div>
<div class="line">[Monday 21 February 2011] [21:11:43] &lt;mikko&gt;  jugg: been there a few days</div>
<div class="line">[Monday 21 February 2011] [21:12:09] &lt;mikko&gt;  and finally!</div>
<div class="line">[Monday 21 February 2011] [21:12:12] &lt;mikko&gt;  <a class="reference external" href="http://snapshot.zero.mq/rpm/2011-02-22_02-09-11/centos5/i386/">http://snapshot.zero.mq/rpm/2011-02-22_02-09-11/centos5/i386/</a></div>
<div class="line">[Monday 21 February 2011] [21:12:16] &lt;mikko&gt;  centos rpms available</div>
<div class="line">[Monday 21 February 2011] [21:12:20] &lt;mikko&gt;  time to sleep</div>
<div class="line">[Tuesday 22 February 2011] [05:40:56] &lt;pieterh&gt;       good morning</div>
<div class="line">[Tuesday 22 February 2011] [05:42:43] &lt;ianbarber&gt;     morning</div>
<div class="line">[Tuesday 22 February 2011] [05:48:01] &lt;pieterh&gt;       ianbarber: what part of the world are you in?</div>
<div class="line">[Tuesday 22 February 2011] [05:48:34] &lt;pieterh&gt;       London? you seem to get around a lot for your &#8220;0MQ is the answer&#8221; talks :-)</div>
<div class="line">[Tuesday 22 February 2011] [05:56:34] &lt;ianbarber&gt;     yep, london</div>
<div class="line">[Tuesday 22 February 2011] [05:56:54] &lt;ianbarber&gt;     i was hoping to get to give it at confoo as well, but they went with a different talk in the end :)</div>
<div class="line">[Tuesday 22 February 2011] [05:59:45] &lt;pieterh&gt;       I was thinking of doing a small 0MQ event in Brussels later in spring</div>
<div class="line">[Tuesday 22 February 2011] [06:00:01] &lt;pieterh&gt;       April or May, when it&#8217;s nicer weather</div>
<div class="line">[Tuesday 22 February 2011] [06:03:42] &lt;ianbarber&gt;     awesome, i think that would be fun</div>
<div class="line">[Tuesday 22 February 2011] [06:05:05] &lt;ianbarber&gt;     are you based in brussels then, or near by?</div>
<div class="line">[Tuesday 22 February 2011] [06:07:37] &lt;pieterh&gt;       I&#8217;m in Brussels, yes, so it&#8217;s easy for us to organize something here</div>
<div class="line">[Tuesday 22 February 2011] [06:08:03] &lt;pieterh&gt;       There&#8217;s a nice place in the center of town I used to hold conferences in</div>
<div class="line">[Tuesday 22 February 2011] [06:09:02] &lt;pieterh&gt;       Brussels is reasonably central IMO, and of course there&#8217;s the beer...</div>
<div class="line">[Tuesday 22 February 2011] [06:09:44] &lt;ianbarber&gt;     surely there are some unused government buildings available? :)</div>
<div class="line">[Tuesday 22 February 2011] [06:10:28] &lt;ianbarber&gt;     yeah, brussels is a really nice place, and easy to get to on the train from everywhere as well for people that aren&#8217;t keen on flying.</div>
<div class="line">[Tuesday 22 February 2011] [06:10:33] &lt;pieterh&gt;       you mean because one of our 7 governments is currently on extended holiday?</div>
<div class="line">[Tuesday 22 February 2011] [06:10:38] &lt;pieterh&gt;       lol</div>
<div class="line">[Tuesday 22 February 2011] [06:10:51] &lt;pieterh&gt;       ok, I&#8217;ll set it up... excellent...</div>
<div class="line">[Tuesday 22 February 2011] [06:11:45] &lt;pieterh&gt;       I&#8217;m thinking, mix of workshops and project presentations</div>
<div class="line">[Tuesday 22 February 2011] [06:12:13] &lt;pieterh&gt;       people can go home in the evening, or stay overnight and socialise</div>
<div class="line">[Tuesday 22 February 2011] [06:13:53] &lt;ianbarber&gt;     i think that&#8217;s sensible, though I would probably aim for a panel or discussion slot or two, just to to give it a less structured feel - I would imagine that the crowd will all be pretty good with the library so the chat will be as good as the talks</div>
<div class="line">[Tuesday 22 February 2011] [06:17:46] &lt;pieterh&gt;       So the idea is a lot of tables, chairs, refreshments, in a large room</div>
<div class="line">[Tuesday 22 February 2011] [06:18:07] &lt;pieterh&gt;       wifi</div>
<div class="line">[Tuesday 22 February 2011] [06:19:58] &lt;ianbarber&gt;     sounds good</div>
<div class="line">[Tuesday 22 February 2011] [06:29:01] &lt;ianbarber&gt;     btw, the clone example in the new guide chapter is excellent.</div>
<div class="line">[Tuesday 22 February 2011] [06:31:35] &lt;pieterh&gt;       ah, glad you like it</div>
<div class="line">[Tuesday 22 February 2011] [06:32:04] &lt;pieterh&gt;       do you think it makes sense to do all the design discussion first, and then the code later?</div>
<div class="line">[Tuesday 22 February 2011] [06:32:26] &lt;pieterh&gt;       these examples are going to be a lot larger than the earlier ones</div>
<div class="line">[Tuesday 22 February 2011] [06:34:46] &lt;ianbarber&gt;     yeah, i think that&#8217;s tricky whenever you get to a more real world example - i mean if the reader had been paying attention then should pretty much get how to build it by that point as all of the blocks have been covered. I think it is going to be a big block of code to cover the whole client and server case, but I&#8217;m not sure there&#8217;s that much that should split it up</div>
<div class="line">[Tuesday 22 February 2011] [06:36:11] &lt;pieterh&gt;       I mean, after you read the Clone discussion, do you want to see it worked out in code, or do you want to continue to the Harmony discussion?</div>
<div class="line">[Tuesday 22 February 2011] [06:36:26] &lt;pieterh&gt;       assuming that code is 20 pages long...</div>
<div class="line">[Tuesday 22 February 2011] [06:36:54] &lt;pieterh&gt;       (not one code block, but developed piece by piece)</div>
<div class="line">[Tuesday 22 February 2011] [06:37:17] &lt;pieterh&gt;       for me the only way to prove the design is running code</div>
<div class="line">[Tuesday 22 February 2011] [06:37:50] &lt;ianbarber&gt;     yeah, i would definitely prefer to see some code</div>
<div class="line">[Tuesday 22 February 2011] [06:38:16] &lt;pieterh&gt;       ok, then I&#8217;ll switch back to the earlier structure... it&#8217;ll be like the last Worked example in Ch3</div>
<div class="line">[Tuesday 22 February 2011] [06:38:41] &lt;ianbarber&gt;     yeah, i think that was a reasonable model</div>
<div class="line">[Tuesday 22 February 2011] [06:39:01] &lt;ianbarber&gt;     would it be worth maybe having these examples be in python or another scripting language, just to trim the size on-page some?</div>
<div class="line">[Tuesday 22 February 2011] [06:41:17] &lt;pieterh&gt;       that could be good, yes</div>
<div class="line">[Tuesday 22 February 2011] [06:41:33] &lt;pieterh&gt;       it solves one problem I have with C, the lack of containers</div>
<div class="line">[Tuesday 22 February 2011] [06:41:44] &lt;pieterh&gt;       I was thinking of using ZFL for these advanced cases</div>
<div class="line">[Tuesday 22 February 2011] [06:41:49] &lt;pieterh&gt;       but Python would be neater</div>
<div class="line">[Tuesday 22 February 2011] [06:42:10] &lt;pieterh&gt;       However... I still need to write them in C :-)</div>
<div class="line">[Tuesday 22 February 2011] [06:42:20] &lt;pieterh&gt;       For completeness&#8217; sake</div>
<div class="line">[Tuesday 22 February 2011] [06:43:03]          * pieterh thinks a little...</div>
<div class="line">[Tuesday 22 February 2011] [06:43:15] &lt;pieterh&gt;       let&#8217;s continue in C, which is the language of the API</div>
<div class="line">[Tuesday 22 February 2011] [06:43:35] &lt;pieterh&gt;       but we can produce versions of the Guide for every single language</div>
<div class="line">[Tuesday 22 February 2011] [06:43:44] &lt;pieterh&gt;       you want the Guide in Python? Not a problem!</div>
<div class="line">[Tuesday 22 February 2011] [06:44:03] &lt;pieterh&gt;       (any examples not translated will default to C then)</div>
<div class="line">[Tuesday 22 February 2011] [06:45:00] &lt;pieterh&gt;       since the source for examples is merged into the text at build time anyhow</div>
<div class="line">[Tuesday 22 February 2011] [06:46:46] &lt;ianbarber&gt;     that would be quite cool</div>
<div class="line">[Tuesday 22 February 2011] [06:47:22] &lt;pieterh&gt;       ok, it&#8217;s a deal</div>
<div class="line">[Tuesday 22 February 2011] [06:47:57] &lt;ianbarber&gt;     on that note - is there a process for saying when new examples are ready for translation?</div>
<div class="line">[Tuesday 22 February 2011] [06:48:09] &lt;ianbarber&gt;     maybe just a mailing list ping that the code is there before the guide goes live</div>
<div class="line">[Tuesday 22 February 2011] [06:48:13] &lt;pieterh&gt;       hmm, I guess it involves tracking the git</div>
<div class="line">[Tuesday 22 February 2011] [06:48:34] &lt;pieterh&gt;       I&#8217;d rather not get into a release process for the guide</div>
<div class="line">[Tuesday 22 February 2011] [06:49:08] &lt;pieterh&gt;       there are only a couple of languages that people have translated systematically</div>
<div class="line">[Tuesday 22 February 2011] [06:49:12] &lt;pieterh&gt;       like PHP :-)</div>
<div class="line">[Tuesday 22 February 2011] [06:49:17] &lt;stimpie&gt;       I understood the goal of zeromq is becoming a kernel module, I have just read the interesting new part of the manual &#8216;clone pattern&#8217; but I wander how this adds to a kernel level system?</div>
<div class="line">[Tuesday 22 February 2011] [06:49:29] &lt;pieterh&gt;       stimpie: it&#8217;s a layer on top</div>
<div class="line">[Tuesday 22 February 2011] [06:50:13] &lt;ianbarber&gt;     pieterh: fair point :)</div>
<div class="line">[Tuesday 22 February 2011] [06:50:49] &lt;pieterh&gt;       ianbarber: yesterday I updated the C examples and text for 2.1...</div>
<div class="line">[Tuesday 22 February 2011] [06:51:06] &lt;pieterh&gt;       I&#8217;m not sure the PHP binding handles 2.1 even...</div>
<div class="line">[Tuesday 22 February 2011] [06:51:07] &lt;ianbarber&gt;     yeah, i was just making a note I should check the PHP ones</div>
<div class="line">[Tuesday 22 February 2011] [06:51:36] &lt;ianbarber&gt;     it&#8217;s up to date as far as I know, I&#8217;ve been mostly using it against 2.1.0</div>
<div class="line">[Tuesday 22 February 2011] [06:51:43] &lt;stimpie&gt;       pieterh, ok clear enough.</div>
<div class="line">[Tuesday 22 February 2011] [06:51:45] &lt;pieterh&gt;       nice!</div>
<div class="line">[Tuesday 22 February 2011] [06:51:47] &lt;pieterh&gt;       hopefully these shifts will become rarer and rarer</div>
<div class="line">[Tuesday 22 February 2011] [06:52:15] &lt;pieterh&gt;       stimpie: there are lots of reusable patterns we can make on top of 0MQ, Ch4 is covering some of the reliability ones</div>
<div class="line">[Tuesday 22 February 2011] [06:52:28] &lt;pieterh&gt;       I think giving them names makes them easier to understand and reuse</div>
<div class="line">[Tuesday 22 February 2011] [06:54:27] &lt;stimpie&gt;       They are interesting patterns but it confuses me with what the scope of the zeromq project is</div>
<div class="line">[Tuesday 22 February 2011] [06:55:22] &lt;private_meta&gt;  hmm... I&#8217;ve been told that the c++ version of zmq uses void pointers because you can send something OTHER than char pointers as well, yet for the python version you can pretty much send a standard string in the send function. Doesn&#8217;t that mean that this gives c++ functionality you can&#8217;t capture with a similar python implementation?</div>
<div class="line">[Tuesday 22 February 2011] [06:57:30] &lt;stimpie&gt;       private_meta, the message content is up to the client. You could also serialize java objects which are pretty useless in a c++ client.</div>
<div class="line">[Tuesday 22 February 2011] [06:58:32] &lt;private_meta&gt;  Yeah, but it looks to me that for the python interface, in case I don&#8217;t misunderstand it, the message content is narrowed down to strings</div>
<div class="line">[Tuesday 22 February 2011] [06:59:28] &lt;ianbarber&gt;     private_meta: underneath it&#8217;s just a chunk of bytes - I would imagine that there is a pack function or similar that can pack anything into a string for python?</div>
<div class="line">[Tuesday 22 February 2011] [07:00:42] &lt;private_meta&gt;  I don&#8217;t know, it&#8217;s just that the send interface for python looks so convenient while with c++ you have to bitch around with zmq::message_t where you have to use memcpy or message_t.rebuild to get a simple string into a message</div>
<div class="line">[Tuesday 22 February 2011] [07:02:39] &lt;ianbarber&gt;     hmm, for C there&#8217;s the little zhelpers script pieterh uses that provides some handy helper functions to hide some of that stuff, i don&#8217;t know if there&#8217;s a C++ equivalent</div>
<div class="line">[Tuesday 22 February 2011] [07:03:05] &lt;pieterh&gt;       stimpie: I&#8217;ll make this clear in the text, thanks for pointing that out</div>
<div class="line">[Tuesday 22 February 2011] [07:04:00] &lt;pieterh&gt;       ianbarber: yes, some kind person made zhelpers.hpp</div>
<div class="line">[Tuesday 22 February 2011] [07:05:02] &lt;pieterh&gt;       private_meta: feel free to translate the zmsg code from C to C++, it&#8217;ll give you what you want</div>
<div class="line">[Tuesday 22 February 2011] [07:06:01] &lt;private_meta&gt;  pieterh: uhm... it doesn&#8217;t exist yte?</div>
<div class="line">[Tuesday 22 February 2011] [07:06:02] &lt;private_meta&gt;  <a href="#id51"><span class="problematic" id="id52">*</span></a>yet?</div>
<div class="line">[Tuesday 22 February 2011] [07:06:37] &lt;pieterh&gt;       private_meta: the feeling of pride and accomplishment you&#8217;ll feel as you make it... will be better than steak salad and fries</div>
<div class="line">[Tuesday 22 February 2011] [07:06:58] &lt;private_meta&gt;  Well, not that hard, I don&#8217;t quite like steak</div>
<div class="line">[Tuesday 22 February 2011] [07:07:10] &lt;pieterh&gt;       even better then... :-)</div>
<div class="line">[Tuesday 22 February 2011] [07:07:30] &lt;pieterh&gt;       general rule with 0MQ is, if there&#8217;s something you think could work better, make it happen</div>
<div class="line">[Tuesday 22 February 2011] [07:07:53] &lt;pieterh&gt;       you can take the C code and wrap it as C++ very easily IMO</div>
<div class="line">[Tuesday 22 February 2011] [07:07:55] &lt;private_meta&gt;  I wouldn&#8217;t know how</div>
<div class="line">[Tuesday 22 February 2011] [07:08:09] &lt;pieterh&gt;       you are working in what language?</div>
<div class="line">[Tuesday 22 February 2011] [07:08:18] &lt;private_meta&gt;  C++</div>
<div class="line">[Tuesday 22 February 2011] [07:08:58] &lt;pieterh&gt;       did you read the zmsg.c code yet?</div>
<div class="line">[Tuesday 22 February 2011] [07:10:34] &lt;private_meta&gt;  nope</div>
<div class="line">[Tuesday 22 February 2011] [07:10:58] &lt;private_meta&gt;  Well, isn&#8217;t there a zmsg.cpp already?</div>
<div class="line">[Tuesday 22 February 2011] [07:12:07] &lt;pieterh&gt;       private_meta: please read both those files, then come back...</div>
<div class="line">[Tuesday 22 February 2011] [07:13:44] &lt;pieterh&gt;       you have three choices, when it comes to getting functionality in 0MQ (or any software)</div>
<div class="line">[Tuesday 22 February 2011] [07:13:48] &lt;pieterh&gt;       1. pay for it and get it soon</div>
<div class="line">[Tuesday 22 February 2011] [07:14:00] &lt;private_meta&gt;  2. don&#8217;t pay and wait</div>
<div class="line">[Tuesday 22 February 2011] [07:14:02] &lt;pieterh&gt;       2. wait until someone else makes it and shares it, then get it for free</div>
<div class="line">[Tuesday 22 February 2011] [07:14:02] &lt;private_meta&gt;  3. do it yourself</div>
<div class="line">[Tuesday 22 February 2011] [07:14:08] &lt;pieterh&gt;       exactly</div>
<div class="line">[Tuesday 22 February 2011] [07:14:14] &lt;pieterh&gt;       :-)</div>
<div class="line">[Tuesday 22 February 2011] [07:14:31] &lt;pieterh&gt;       in this case I&#8217;ve made it really, really easy for you...</div>
<div class="line">[Tuesday 22 February 2011] [07:14:43] &lt;private_meta&gt;  seen an interesting venn diagram for that</div>
<div class="line">[Tuesday 22 February 2011] [07:14:49] &lt;pieterh&gt;       since you can literally take the C code (already designed as a class), wrap it with (I&#8217;d guess 20 lines of C++ code)</div>
<div class="line">[Tuesday 22 February 2011] [07:14:55] &lt;pieterh&gt;       and get what you need</div>
<div class="line">[Tuesday 22 February 2011] [07:14:56] &lt;stimpie&gt;       the file: examples/Java/psenvsub.java contains some garbage at the end</div>
<div class="line">[Tuesday 22 February 2011] [07:15:22] &lt;pieterh&gt;       stimpie: indeed, it seems chopped off...</div>
<div class="line">[Tuesday 22 February 2011] [07:16:53] &lt;pieterh&gt;       stimpie: ah, I see what you mean</div>
<div class="line">[Tuesday 22 February 2011] [07:17:02] &lt;pieterh&gt;       ok, fixing that, I found the original contribution</div>
<div class="line">[Tuesday 22 February 2011] [07:17:40] &lt;pieterh&gt;       stimpie: fixed, thanks!</div>
<div class="line">[Tuesday 22 February 2011] [07:17:43] &lt;stimpie&gt;       np</div>
<div class="line">[Tuesday 22 February 2011] [07:26:24] &lt;private_meta&gt;  just out of curiosity, don&#8217;t have time at the moment, let&#8217;s say i want to improve zmq by adding convenience methods for send/recv for c++, let&#8217;s say for strings, would that be worth considering it?</div>
<div class="line">[Tuesday 22 February 2011] [07:28:07] &lt;stimpie&gt;       private_meta, what is wrong with send(msg.toBytes())?</div>
<div class="line">[Tuesday 22 February 2011] [07:28:08] &lt;pieterh&gt;       private_meta: it would not go into the core</div>
<div class="line">[Tuesday 22 February 2011] [07:28:44] &lt;pieterh&gt;       private_meta: if all you want is send/recv string, it&#8217;s already in zhelpers.hpp</div>
<div class="line">[Tuesday 22 February 2011] [07:29:43] &lt;pieterh&gt;       //  Convert string to 0MQ string and send to socket</div>
<div class="line">[Tuesday 22 February 2011] [07:29:43] &lt;pieterh&gt;       static bool</div>
<div class="line">[Tuesday 22 February 2011] [07:29:43] &lt;pieterh&gt;       s_send (zmq::socket_t &amp; socket, const std::string &amp; string) {</div>
<div class="line">[Tuesday 22 February 2011] [07:29:43] &lt;pieterh&gt;           zmq::message_t message(string.size());</div>
<div class="line">[Tuesday 22 February 2011] [07:29:43] &lt;pieterh&gt;           memcpy(message.data(), string.data(), string.size());</div>
<div class="line">[Tuesday 22 February 2011] [07:29:44] &lt;pieterh&gt;           bool rc = socket.send(message);</div>
<div class="line">[Tuesday 22 February 2011] [07:29:44] &lt;pieterh&gt;           return (rc);</div>
<div class="line">[Tuesday 22 February 2011] [07:29:45] &lt;pieterh&gt;       }</div>
<div class="line">[Tuesday 22 February 2011] [07:30:18] &lt;private_meta&gt;  oh, I&#8217;ve already seen that. By the way, why do you use memcpy there and not rebuild?</div>
<div class="line">[Tuesday 22 February 2011] [07:38:34] &lt;private_meta&gt;  argh... the disabled copy constructor is annoying, I can&#8217;t even return a message_t object from a function</div>
<div class="line">[Tuesday 22 February 2011] [08:08:45] &lt;pieterh&gt;       private_meta: that code was written by Olivier Chamoux afair</div>
<div class="line">[Tuesday 22 February 2011] [08:09:46] &lt;private_meta&gt;  The example code carries that name as well</div>
<div class="line">[Tuesday 22 February 2011] [08:10:35] &lt;private_meta&gt;  According to a comment in the source it&#8217;s to avoid &#8220;shared messages&#8221;, which seems to be a somewhat valid argument if you tried to use it for that, but it&#8217;s annoying if you want to return a message by a function</div>
<div class="line">[Tuesday 22 February 2011] [08:11:11] &lt;pieterh&gt;       sure</div>
<div class="line">[Tuesday 22 February 2011] [10:24:33] &lt;CIA-21&gt;        zeromq2: 03Martin Sustrik 07master * r43e8868 10/ (24 files):</div>
<div class="line">[Tuesday 22 February 2011] [10:24:33] &lt;CIA-21&gt;        zeromq2: Added explicit error message in case of memory exhaustion</div>
<div class="line">[Tuesday 22 February 2011] [10:24:33] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/eVM1AS">http://bit.ly/eVM1AS</a></div>
<div class="line">[Tuesday 22 February 2011] [11:00:38] &lt;amacleod&gt;      Are there any plans to have language-native ZMQ libraries, rather than wrapping C++ libs?</div>
<div class="line">[Tuesday 22 February 2011] [11:01:25] &lt;amacleod&gt;      I guess maintaining parallel language-native libs would be a much bigger maintenance load.</div>
<div class="line">[Tuesday 22 February 2011] [11:08:57] &lt;pieterh&gt;       amacleod: it&#8217;s a lot of work unless there&#8217;s a real payoff, e.g. languages that can&#8217;t link to C++</div>
<div class="line">[Tuesday 22 February 2011] [11:09:16] &lt;pieterh&gt;       you would not reach a similar level of performance and functionality</div>
<div class="line">[Tuesday 22 February 2011] [11:09:36] &lt;pieterh&gt;       it&#8217;s been discussed, we would need to document the wire level protocols properly first</div>
<div class="line">[Tuesday 22 February 2011] [11:10:07] &lt;amacleod&gt;      pieterh, hm, yeah, good point.  And I guess the hassle of linking, for example, JNI libraries in Java, is pretty much a one-time configuration thing.</div>
<div class="line">[Tuesday 22 February 2011] [11:10:23] &lt;pieterh&gt;       plus you always get the latest/greatest 0MQ, etc.</div>
<div class="line">[Tuesday 22 February 2011] [11:10:24] &lt;amacleod&gt;      pieterh, well, documenting the wire level protocols sounds like a good idea anyway. :-D</div>
<div class="line">[Tuesday 22 February 2011] [11:10:38] &lt;pieterh&gt;       yes, when someone actually wants it... :-)</div>
<div class="line">[Tuesday 22 February 2011] [11:11:01] &lt;amacleod&gt;      pieterh, by the way, where can I look at the new router/dealer example you made?</div>
<div class="line">[Tuesday 22 February 2011] [11:11:29] &lt;pieterh&gt;       amacleod: hang on, I&#8217;ll rebuild the Guide...</div>
<div class="line">[Tuesday 22 February 2011] [11:11:36] &lt;amacleod&gt;      Thanks.</div>
<div class="line">[Tuesday 22 February 2011] [11:16:05] &lt;pieterh&gt;       hmm, Wikidot seems to cache the old text for a while...</div>
<div class="line">[Tuesday 22 February 2011] [11:17:06] &lt;pieterh&gt;       oops, error in my upload robot, it&#8217;s sending the content to the wrong place...</div>
<div class="line">[Tuesday 22 February 2011] [11:17:32] &lt;amacleod&gt;      Silly robot.</div>
<div class="line">[Tuesday 22 February 2011] [11:18:21] &lt;pieterh&gt;       ok, here: <a class="reference external" href="http://zguide.zeromq.org/chapter:all#toc51">http://zguide.zeromq.org/chapter:all#toc51</a></div>
<div class="line">[Tuesday 22 February 2011] [11:19:04] &lt;ljackson&gt;      pieterh, got that code working last night, thx for your help</div>
<div class="line">[Tuesday 22 February 2011] [11:19:18] &lt;pieterh&gt;       ljackson: np</div>
<div class="line">[Tuesday 22 February 2011] [11:19:30] &lt;ljackson&gt;      pieterh, silly mistake of not de-ref on the work/clients sockets before sending to the queue device</div>
<div class="line">[Tuesday 22 February 2011] [11:19:39] &lt;ljackson&gt;      odd that the api took that tho</div>
<div class="line">[Tuesday 22 February 2011] [11:20:02] &lt;pieterh&gt;       ljackson: what language binding?</div>
<div class="line">[Tuesday 22 February 2011] [11:20:06] &lt;ljackson&gt;      who maintains the c++ api for zeromq ? Maybe I could extend to accept socket pointers and ask for a pull request ?</div>
<div class="line">[Tuesday 22 February 2011] [11:20:21] &lt;pieterh&gt;       ah, yes, I&#8217;m sure the maintainers will welcome contributions</div>
<div class="line">[Tuesday 22 February 2011] [11:20:30] &lt;amacleod&gt;      &#8220;Worked Example: Inter-Broker Routing&#8221;, right?</div>
<div class="line">[Tuesday 22 February 2011] [11:20:42] &lt;pieterh&gt;       amacleod: &#8220;Asynchronous Client-Server&#8221;...</div>
<div class="line">[Tuesday 22 February 2011] [11:20:52] &lt;pieterh&gt;       reload that page</div>
<div class="line">[Tuesday 22 February 2011] [11:21:19] &lt;amacleod&gt;      Ah, ok.</div>
<div class="line">[Tuesday 22 February 2011] [11:21:41] &lt;amacleod&gt;      Looks like it renders as #toc50 for me.</div>
<div class="line">[Tuesday 22 February 2011] [11:22:17] &lt;pieterh&gt;       caching issue perhaps</div>
<div class="line">[Tuesday 22 February 2011] [11:22:25] &lt;amacleod&gt;      Yeah.. I think I&#8217;m still getting the old version.</div>
<div class="line">[Tuesday 22 February 2011] [11:22:41] &lt;pieterh&gt;       do you see figure 46 &#8220;Asynchronous Client Server&#8221; ?</div>
<div class="line">[Tuesday 22 February 2011] [11:22:48] &lt;amacleod&gt;      Yeah.. I see the diagram.</div>
<div class="line">[Tuesday 22 February 2011] [11:22:54] &lt;pieterh&gt;       ok, then that&#8217;s all good</div>
<div class="line">[Tuesday 22 February 2011] [11:23:34] &lt;amacleod&gt;      The next code sample is router-to-router, though...</div>
<div class="line">[Tuesday 22 February 2011] [11:24:08] &lt;pieterh&gt;       does it not show the asyncsrv example?</div>
<div class="line">[Tuesday 22 February 2011] [11:24:29] &lt;pieterh&gt;       ah, diagrams are accurate but text is out of date...</div>
<div class="line">[Tuesday 22 February 2011] [11:24:34] &lt;pieterh&gt;       reload, reload, reload!</div>
<div class="line">[Tuesday 22 February 2011] [11:24:41] &lt;amacleod&gt;      Nope.  It&#8217;s a little incongruous, actually... :)</div>
<div class="line">[Tuesday 22 February 2011] [11:24:49] &lt;amacleod&gt;      aha.. there it is!</div>
<div class="line">[Tuesday 22 February 2011] [11:25:28] &lt;pieterh&gt;       enjoy, amacleod, and let me know if it&#8217;s helpful</div>
<div class="line">[Tuesday 22 February 2011] [11:25:39] &lt;pieterh&gt;       it was quite fun making this pattern</div>
<div class="line">[Tuesday 22 February 2011] [11:25:43] &lt;amacleod&gt;      Sure thing.  :)</div>
<div class="line">[Tuesday 22 February 2011] [11:27:44] &lt;amacleod&gt;      Could the client_task use blocking recv rather than polling, or is the polling crucial?</div>
<div class="line">[Tuesday 22 February 2011] [11:28:29] &lt;pieterh&gt;       amacleod: if you want to send a mix of requests and replies, it can&#8217;t block on recv</div>
<div class="line">[Tuesday 22 February 2011] [11:28:48] &lt;pieterh&gt;       you can&#8217;t have a separate thread doing the receiving</div>
<div class="line">[Tuesday 22 February 2011] [11:29:08] &lt;pieterh&gt;       it can use a simpler poll than the one I made, that&#8217;s to ensure requests are sent on time</div>
<div class="line">[Tuesday 22 February 2011] [11:30:14] &lt;pieterh&gt;       brb, lunch...</div>
<div class="line">[Tuesday 22 February 2011] [11:34:55] &lt;CIA-21&gt;        zeromq2: 03Martin Sustrik 07sub-forward * r977f5b7 10/ (5 files):</div>
<div class="line">[Tuesday 22 February 2011] [11:34:55] &lt;CIA-21&gt;        zeromq2: Trie-based matcher (ptrie_t) implemented.</div>
<div class="line">[Tuesday 22 February 2011] [11:34:55] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/gSZiWK">http://bit.ly/gSZiWK</a></div>
<div class="line">[Tuesday 22 February 2011] [12:31:46] &lt;cremes&gt;        is there any technique for detecting a slow subscriber? e.g. check queue sizes on netstat or something?</div>
<div class="line">[Tuesday 22 February 2011] [12:32:12] &lt;cremes&gt;        i have a pub socket that has a dozen or so subscribers; my memory usage slowly climbs even though i don&#8217;t have any leaks</div>
<div class="line">[Tuesday 22 February 2011] [12:32:40] &lt;cremes&gt;        i now suspect a slow subscriber isn&#8217;t pulling stuff off the queue quickly enough and it&#8217;s backing up at the publisher (HWM is default)</div>
<div class="line">[Tuesday 22 February 2011] [12:44:55] &lt;pieterh&gt;       cremes: there&#8217;s zmq_getsockopt (..ZMQ_BACKLOG)</div>
<div class="line">[Tuesday 22 February 2011] [12:46:15] &lt;cremes&gt;        is that really appropriate? that just controls the queue of initial connects/binds</div>
<div class="line">[Tuesday 22 February 2011] [12:46:31] &lt;cremes&gt;        it doesn&#8217;t have anything to do with message queue length, right?</div>
<div class="line">[Tuesday 22 February 2011] [12:46:37] &lt;pieterh&gt;       oops</div>
<div class="line">[Tuesday 22 February 2011] [12:46:50] &lt;cremes&gt;        :)</div>
<div class="line">[Tuesday 22 February 2011] [12:47:22] &lt;pieterh&gt;       so there&#8217;s no way to know what&#8217;s happening at the level of individual subscribers...</div>
<div class="line">[Tuesday 22 February 2011] [12:47:39] &lt;pieterh&gt;       do you number your messages?</div>
<div class="line">[Tuesday 22 February 2011] [12:47:52] &lt;cremes&gt;        no but they do get a timestamp</div>
<div class="line">[Tuesday 22 February 2011] [12:47:58] &lt;nooob&gt; you might want to setup a connection from the subscriber back to the sender</div>
<div class="line">[Tuesday 22 February 2011] [12:48:00] &lt;cremes&gt;        so they are sequential</div>
<div class="line">[Tuesday 22 February 2011] [12:48:01] &lt;pieterh&gt;       ok, even better</div>
<div class="line">[Tuesday 22 February 2011] [12:48:15] &lt;pieterh&gt;       in the subscriber, check how old incoming messages are</div>
<div class="line">[Tuesday 22 February 2011] [12:48:28] &lt;pieterh&gt;       if you exceed X seconds, send an alert to your system console</div>
<div class="line">[Tuesday 22 February 2011] [12:48:29] &lt;nooob&gt; there was a pattern like that in the guide</div>
<div class="line">[Tuesday 22 February 2011] [12:48:39] &lt;cremes&gt;        hmmm, that doesn&#8217;t seem like it would help unless i misunderstand how the pub socket queueing works</div>
<div class="line">[Tuesday 22 February 2011] [12:48:59] &lt;cremes&gt;        there is a separate outgoing queue for each subscriber on a pub socket, yes?</div>
<div class="line">[Tuesday 22 February 2011] [12:49:12] &lt;pieterh&gt;       cremes: if your pubsub system is stable, subscribers will get messages with predictably low delays</div>
<div class="line">[Tuesday 22 February 2011] [12:49:13] &lt;cremes&gt;        so fast subscribers would have a small or empty queue while my slow guy would have a large queue</div>
<div class="line">[Tuesday 22 February 2011] [12:49:30] &lt;pieterh&gt;       it&#8217;s running over TCP?</div>
<div class="line">[Tuesday 22 February 2011] [12:49:33] &lt;cremes&gt;        yes</div>
<div class="line">[Tuesday 22 February 2011] [12:49:43] &lt;pieterh&gt;       even over PGM...</div>
<div class="line">[Tuesday 22 February 2011] [12:49:53] &lt;pieterh&gt;       slow subscribers will by definition :-) get messages &#8216;too slowly&#8217;</div>
<div class="line">[Tuesday 22 February 2011] [12:50:05] &lt;pieterh&gt;       timestamp checking should do it</div>
<div class="line">[Tuesday 22 February 2011] [12:50:19] &lt;cremes&gt;        i will check that out</div>
<div class="line">[Tuesday 22 February 2011] [12:50:35] &lt;pieterh&gt;       i like the pattern, will try a quick implementation</div>
<div class="line">[Tuesday 22 February 2011] [13:12:09] &lt;cremes&gt;        pieterh: question...</div>
<div class="line">[Tuesday 22 February 2011] [13:12:16] &lt;pieterh&gt;       cremes: shoot...</div>
<div class="line">[Tuesday 22 February 2011] [13:12:28] &lt;cremes&gt;        i wrote an example where i have a single publisher that connects to a forwarder device</div>
<div class="line">[Tuesday 22 February 2011] [13:12:32] &lt;cremes&gt;        it publishes as fast as it can</div>
<div class="line">[Tuesday 22 February 2011] [13:12:41] &lt;cremes&gt;        there are no subscribers connected to the device</div>
<div class="line">[Tuesday 22 February 2011] [13:12:51] &lt;cremes&gt;        i see memory growing rapidly; is that expected?</div>
<div class="line">[Tuesday 22 February 2011] [13:12:58] &lt;pieterh&gt;       depends...</div>
<div class="line">[Tuesday 22 February 2011] [13:13:04] &lt;pieterh&gt;       running on the same box?</div>
<div class="line">[Tuesday 22 February 2011] [13:13:09] &lt;cremes&gt;        yeah</div>
<div class="line">[Tuesday 22 February 2011] [13:13:13] &lt;pieterh&gt;       one core?</div>
<div class="line">[Tuesday 22 February 2011] [13:13:25] &lt;cremes&gt;        dual quad, 16gb memory... beefy box</div>
<div class="line">[Tuesday 22 February 2011] [13:13:34] &lt;pieterh&gt;       no, then it&#8217;s not expected</div>
<div class="line">[Tuesday 22 February 2011] [13:13:43] &lt;cremes&gt;        ok</div>
<div class="line">[Tuesday 22 February 2011] [13:13:49] &lt;pieterh&gt;       is the memory growing in the publisher or in the forwarder?</div>
<div class="line">[Tuesday 22 February 2011] [13:13:52] &lt;cremes&gt;        i&#8217;m going to try and replicate this with the C forwarder</div>
<div class="line">[Tuesday 22 February 2011] [13:13:57] &lt;cremes&gt;        it grows in the forwarder</div>
<div class="line">[Tuesday 22 February 2011] [13:14:10] &lt;pieterh&gt;       how about CPU usage?</div>
<div class="line">[Tuesday 22 February 2011] [13:14:21] &lt;cremes&gt;        high</div>
<div class="line">[Tuesday 22 February 2011] [13:14:25] &lt;pieterh&gt;       ok, try this</div>
<div class="line">[Tuesday 22 February 2011] [13:14:34] &lt;pieterh&gt;       - publish 20M messages, then pause for 10 seconds</div>
<div class="line">[Tuesday 22 February 2011] [13:14:36] &lt;pieterh&gt;       - repeat</div>
<div class="line">[Tuesday 22 February 2011] [13:14:46] &lt;cremes&gt;        ok</div>
<div class="line">[Tuesday 22 February 2011] [13:14:48] &lt;pieterh&gt;       see if memory usage remains high during that pause</div>
<div class="line">[Tuesday 22 February 2011] [13:14:56] &lt;pieterh&gt;       if so, forwarder is broken somehow</div>
<div class="line">[Tuesday 22 February 2011] [13:15:10] &lt;pieterh&gt;       if it comes down, it&#8217;s just queuing bizarreness</div>
<div class="line">[Tuesday 22 February 2011] [13:28:07] &lt;sustrik&gt;       with a single incoming streams and many outgoing streams you would expect the latter to be bandwidth-bound and thus slower than the former</div>
<div class="line">[Tuesday 22 February 2011] [13:28:38] &lt;sustrik&gt;       consequently, in congestion situations you should expect messages queueing in the forwarder</div>
<div class="line">[Tuesday 22 February 2011] [13:38:42] &lt;pieterh&gt;       sustrik: yes, but here there are no subscribers on the forwarder...</div>
<div class="line">[Tuesday 22 February 2011] [13:39:14] &lt;<a href="#id1267"><span class="problematic" id="id1268">sustrik_</span></a>&gt;      ah</div>
<div class="line">[Tuesday 22 February 2011] [13:40:28] &lt;<a href="#id1269"><span class="problematic" id="id1270">sustrik_</span></a>&gt;      i&#8217;ve missed that</div>
<div class="line">[Tuesday 22 February 2011] [13:41:26] &lt;<a href="#id1271"><span class="problematic" id="id1272">sustrik_</span></a>&gt;      then the queue&#8217;s main loop must be slower then message receiving in its SUB socket</div>
<div class="line">[Tuesday 22 February 2011] [13:41:38] &lt;<a href="#id1273"><span class="problematic" id="id1274">sustrik_</span></a>&gt;      in any case, when doing congestion tests</div>
<div class="line">[Tuesday 22 February 2011] [13:41:40] &lt;<a href="#id1275"><span class="problematic" id="id1276">sustrik_</span></a>&gt;      use hwm</div>
<div class="line">[Tuesday 22 February 2011] [13:41:55] &lt;<a href="#id1277"><span class="problematic" id="id1278">sustrik_</span></a>&gt;      otherwise you are inevitable going to run out of memory</div>
<div class="line">[Tuesday 22 February 2011] [13:52:00] &lt;pieterh&gt;       hmm, forwarder should run at least as fast as publisher in this case...</div>
<div class="line">[Tuesday 22 February 2011] [13:52:34] &lt;pieterh&gt;       let&#8217;s see if cremes comes back with more data</div>
<div class="line">[Tuesday 22 February 2011] [13:52:45] &lt;cremes&gt;        when there are no subscribers attached to the forwarder, calls to zmq_send() should just close the msg and drop it, right?</div>
<div class="line">[Tuesday 22 February 2011] [13:53:38] &lt;pieterh&gt;       cremes: ack</div>
<div class="line">[Tuesday 22 February 2011] [13:53:56] &lt;pieterh&gt;       did you try that run/pause/run/pause ?</div>
<div class="line">[Tuesday 22 February 2011] [13:55:39] &lt;cremes&gt;        yes, the memory did not shrink</div>
<div class="line">[Tuesday 22 February 2011] [13:56:25] &lt;pieterh&gt;       did _not_ shrink?</div>
<div class="line">[Tuesday 22 February 2011] [13:56:28] &lt;pieterh&gt;       then it&#8217;s a real leak</div>
<div class="line">[Tuesday 22 February 2011] [13:56:55] &lt;cremes&gt;        i need to try this with the C forwarder device that comes with the lib</div>
<div class="line">[Tuesday 22 February 2011] [13:57:01] &lt;cremes&gt;        and see if it behaves the same</div>
<div class="line">[Tuesday 22 February 2011] [13:57:05] &lt;pieterh&gt;       yes</div>
<div class="line">[Tuesday 22 February 2011] [13:57:19] &lt;cremes&gt;        i&#8217;ll open a ticket if i see it replicated</div>
<div class="line">[Tuesday 22 February 2011] [13:57:22] &lt;pieterh&gt;       i just reviewed the code for that, there is zero chance it leaks memory</div>
<div class="line">[Tuesday 22 February 2011] [13:57:32] &lt;cremes&gt;        right, it&#8217;s so simple there is <em>no</em> way</div>
<div class="line">[Tuesday 22 February 2011] [13:57:36] &lt;cremes&gt;        &lt;sigh&gt;</div>
<div class="line">[Tuesday 22 February 2011] [13:57:57] &lt;pieterh&gt;       if there&#8217;s a leak it&#8217;s either in the pub socket (unlikely), or the binding (possible), or it&#8217;s a heap artifact (plausible)</div>
<div class="line">[Tuesday 22 February 2011] [13:58:10] &lt;pieterh&gt;       sometimes the heap does not shrink immediately when memory is freed</div>
<div class="line">[Tuesday 22 February 2011] [13:58:45] &lt;pieterh&gt;       try setting a HWM of, say, 100K on the publisher and see what effect that has</div>
<div class="line">[Tuesday 22 February 2011] [13:58:53] &lt;pieterh&gt;       s/publisher/forwarder/ sorry</div>
<div class="line">[Tuesday 22 February 2011] [13:59:06] &lt;pieterh&gt;       on the frontend socket, initially</div>
<div class="line">[Tuesday 22 February 2011] [13:59:11] &lt;cremes&gt;        yes, i&#8217;ll keep at it</div>
<div class="line">[Tuesday 22 February 2011] [14:05:59] &lt;amacleod&gt;      pieterh, my problem from yesterday does seem to be a threading issue.  When I changed my test harness (which simulates a client) to use a separate context from the server, the messages got through correctly in both directions.</div>
<div class="line">[Tuesday 22 February 2011] [14:06:26] &lt;amacleod&gt;      However, now I&#8217;m seeing &#8220;Assertion failed: pending_term_acks&#8221; when closing the socket.</div>
<div class="line">[Tuesday 22 February 2011] [14:06:27] &lt;pieterh&gt;       amacleod: ah, good... I&#8217;ve also been using separate contexts for each &#8216;task&#8217; when it simulates a separate process</div>
<div class="line">[Tuesday 22 February 2011] [14:06:48] &lt;pieterh&gt;       that&#8217;s not a 0MQ assertion...</div>
<div class="line">[Tuesday 22 February 2011] [14:07:04] &lt;amacleod&gt;      It lists it as socket_base.cpp:690</div>
<div class="line">[Tuesday 22 February 2011] [14:07:18] &lt;amacleod&gt;      It&#8217;s hard for me to debug, because it doesn&#8217;t generate a Java exception, it just kills the process.</div>
<div class="line">[Tuesday 22 February 2011] [14:07:54] &lt;pieterh&gt;       what version of 0MQ are you on?</div>
<div class="line">[Tuesday 22 February 2011] [14:07:56] &lt;amacleod&gt;      Might be jzmq, hmm..</div>
<div class="line">[Tuesday 22 February 2011] [14:07:58] &lt;amacleod&gt;      2.0.10</div>
<div class="line">[Tuesday 22 February 2011] [14:08:08] &lt;pieterh&gt;       any problem upgrading to master?</div>
<div class="line">[Tuesday 22 February 2011] [14:08:19] &lt;pieterh&gt;       there are a lot of fixes since 2.0.10</div>
<div class="line">[Tuesday 22 February 2011] [14:09:28] &lt;pieterh&gt;       sustrik: do you keep any log of major changes made apart from the git commit history?</div>
<div class="line">[Tuesday 22 February 2011] [14:09:37] &lt;amacleod&gt;      Depends&#8211;how stable is 2.1?  I think we chose 2.0.10 because we wanted not to use the &#8220;development&#8221; branch.</div>
<div class="line">[Tuesday 22 February 2011] [14:10:21] &lt;pieterh&gt;       amacleod: for various reasons, the git master is significantly more stable than the &#8216;stable&#8217;</div>
<div class="line">[Tuesday 22 February 2011] [14:10:31] &lt;pieterh&gt;       ... than the &#8216;stable&#8217; 2.0.10 release</div>
<div class="line">[Tuesday 22 February 2011] [14:10:58] &lt;amacleod&gt;      Hmm. :)  Might be worth the switch, then.</div>
<div class="line">[Tuesday 22 February 2011] [14:11:00] &lt;<a href="#id1279"><span class="problematic" id="id1280">sustrik_</span></a>&gt;      btw, the assertion is in code that was complately rewritten in 2.1</div>
<div class="line">[Tuesday 22 February 2011] [14:11:09] &lt;amacleod&gt;      sustrik, good to know.</div>
<div class="line">[Tuesday 22 February 2011] [14:11:10] &lt;pieterh&gt;       we&#8217;re in the slow process of making a formal release for 2.1.11</div>
<div class="line">[Tuesday 22 February 2011] [14:11:28] &lt;pieterh&gt;       sustrik: the one thing that will be problematic is making release notes</div>
<div class="line">[Tuesday 22 February 2011] [14:11:30] &lt;<a href="#id1281"><span class="problematic" id="id1282">sustrik_</span></a>&gt;      pieterh: what log?</div>
<div class="line">[Tuesday 22 February 2011] [14:11:41] &lt;<a href="#id1283"><span class="problematic" id="id1284">sustrik_</span></a>&gt;      why so?</div>
<div class="line">[Tuesday 22 February 2011] [14:11:41] &lt;pieterh&gt;       i was afraid of that...</div>
<div class="line">[Tuesday 22 February 2011] [14:11:44] &lt;<a href="#id1285"><span class="problematic" id="id1286">sustrik_</span></a>&gt;      it&#8217;s automatic</div>
<div class="line">[Tuesday 22 February 2011] [14:12:02] &lt;pieterh&gt;       what&#8217;s automatic is a dump of every commit message</div>
<div class="line">[Tuesday 22 February 2011] [14:12:07] &lt;<a href="#id1287"><span class="problematic" id="id1288">sustrik_</span></a>&gt;      yup</div>
<div class="line">[Tuesday 22 February 2011] [14:12:09] &lt;amacleod&gt;      <a class="reference external" href="https://github.com/zeromq/zeromq2/raw/master/NEWS">https://github.com/zeromq/zeromq2/raw/master/NEWS</a></div>
<div class="line">[Tuesday 22 February 2011] [14:12:11] &lt;pieterh&gt;       that is not release notes</div>
<div class="line">[Tuesday 22 February 2011] [14:12:27] &lt;pieterh&gt;       nope, NEWS is painfully made by hand</div>
<div class="line">[Tuesday 22 February 2011] [14:12:29] &lt;<a href="#id1289"><span class="problematic" id="id1290">sustrik_</span></a>&gt;      ah, i&#8217;ll go through the commit messages and write the release notes</div>
<div class="line">[Tuesday 22 February 2011] [14:12:31] &lt;<a href="#id1291"><span class="problematic" id="id1292">sustrik_</span></a>&gt;      not a problem</div>
<div class="line">[Tuesday 22 February 2011] [14:12:36] &lt;pieterh&gt;       excellent...!</div>
<div class="line">[Tuesday 22 February 2011] [14:12:50] &lt;pieterh&gt;       then IMO we&#8217;re ready to break off the branch...</div>
<div class="line">[Tuesday 22 February 2011] [14:13:02] &lt;pieterh&gt;       there were zero issues porting the Guide examples to 2.1.11</div>
<div class="line">[Tuesday 22 February 2011] [14:13:07] &lt;<a href="#id1293"><span class="problematic" id="id1294">sustrik_</span></a>&gt;      there are some pgm problems being experienced with head currently</div>
<div class="line">[Tuesday 22 February 2011] [14:13:32] &lt;pieterh&gt;       that&#8217;s ok, we&#8217;ll have at least a couple of weeks to stabilize</div>
<div class="line">[Tuesday 22 February 2011] [14:13:48] &lt;amacleod&gt;      In the mean time, if we assume I cannot presently upgrade from 2.0.10, any suggestion on where I should look to prevent this assertion from failing?</div>
<div class="line">[Tuesday 22 February 2011] [14:13:56] &lt;pieterh&gt;       the key now IMO is to get a formal package out so folks like amacleod use the current master, not old code</div>
<div class="line">[Tuesday 22 February 2011] [14:14:57] &lt;pieterh&gt;       <a href="#id1295"><span class="problematic" id="id1296">sustrik_</span></a>, so I&#8217;m going to create a separate git but this is somewhat experimental</div>
<div class="line">[Tuesday 22 February 2011] [14:14:58] &lt;amacleod&gt;      As far as I know, jzmq is set up to handle both 2.0.10 and 2.1.x, so upgrading shouldn&#8217;t be too painful.</div>
<div class="line">[Tuesday 22 February 2011] [14:15:10] &lt;<a href="#id1297"><span class="problematic" id="id1298">sustrik_</span></a>&gt;      the only thing preventing branching off right now is the pgm problem</div>
<div class="line">[Tuesday 22 February 2011] [14:15:16] &lt;pieterh&gt;       amacleod: at least, try on the 2.1.x master so you know whether it works better or not</div>
<div class="line">[Tuesday 22 February 2011] [14:15:32] &lt;<a href="#id1299"><span class="problematic" id="id1300">sustrik_</span></a>&gt;      i can&#8217;t help with that :|</div>
<div class="line">[Tuesday 22 February 2011] [14:15:49] &lt;<a href="#id1301"><span class="problematic" id="id1302">sustrik_</span></a>&gt;      so we&#8217;ll have to wait while someone fixes it</div>
<div class="line">[Tuesday 22 February 2011] [14:15:54] &lt;pieterh&gt;       <a href="#id1303"><span class="problematic" id="id1304">sustrik_</span></a> steve&#8217;s traveling right now</div>
<div class="line">[Tuesday 22 February 2011] [14:16:01] &lt;pieterh&gt;       we&#8217;ll pipeline it all</div>
<div class="line">[Tuesday 22 February 2011] [14:16:10] &lt;<a href="#id1305"><span class="problematic" id="id1306">sustrik_</span></a>&gt;      or, alternatively, you can branch from a historic version</div>
<div class="line">[Tuesday 22 February 2011] [14:16:11] &lt;pieterh&gt;       pgm fixes can come in after we branch</div>
<div class="line">[Tuesday 22 February 2011] [14:16:24] &lt;pieterh&gt;       it&#8217;s good to have known issues so we can prove that the process works</div>
<div class="line">[Tuesday 22 February 2011] [14:16:29] &lt;<a href="#id1307"><span class="problematic" id="id1308">sustrik_</span></a>&gt;      right, you can branch a backport the ix</div>
<div class="line">[Tuesday 22 February 2011] [14:16:31] &lt;<a href="#id1309"><span class="problematic" id="id1310">sustrik_</span></a>&gt;      fix</div>
<div class="line">[Tuesday 22 February 2011] [14:16:31] &lt;pieterh&gt;       yes</div>
<div class="line">[Tuesday 22 February 2011] [14:17:04] &lt;pieterh&gt;       do you want to push any code before I clone the repo?</div>
<div class="line">[Tuesday 22 February 2011] [14:17:11] &lt;<a href="#id1311"><span class="problematic" id="id1312">sustrik_</span></a>&gt;      no</div>
<div class="line">[Tuesday 22 February 2011] [14:17:14] &lt;<a href="#id1313"><span class="problematic" id="id1314">sustrik_</span></a>&gt;      do it now</div>
<div class="line">[Tuesday 22 February 2011] [14:17:18] &lt;pieterh&gt;       okay... going for it :-)</div>
<div class="line">[Tuesday 22 February 2011] [14:17:29] &lt;<a href="#id1315"><span class="problematic" id="id1316">sustrik_</span></a>&gt;      amacleod: upgrading should not be painful</div>
<div class="line">[Tuesday 22 February 2011] [14:17:50] &lt;<a href="#id1317"><span class="problematic" id="id1318">sustrik_</span></a>&gt;      trying to fix the problem in 2.0.10 is going to be painful</div>
<div class="line">[Tuesday 22 February 2011] [14:18:00] &lt;amacleod&gt;      Hm, I think you are right.</div>
<div class="line">[Tuesday 22 February 2011] [14:18:09] &lt;<a href="#id1319"><span class="problematic" id="id1320">sustrik_</span></a>&gt;      it&#8217;s a problem with shutdown subsystem</div>
<div class="line">[Tuesday 22 February 2011] [14:18:18] &lt;<a href="#id1321"><span class="problematic" id="id1322">sustrik_</span></a>&gt;      which was pretty creaky in 2.0.x</div>
<div class="line">[Tuesday 22 February 2011] [14:18:39] &lt;<a href="#id1323"><span class="problematic" id="id1324">sustrik_</span></a>&gt;      it was one of the major reasons for making 2.1</div>
<div class="line">[Tuesday 22 February 2011] [14:18:50] &lt;amacleod&gt;      So, which version should I get?  The 2.1.0 package from the front page?</div>
<div class="line">[Tuesday 22 February 2011] [14:19:03] &lt;<a href="#id1325"><span class="problematic" id="id1326">sustrik_</span></a>&gt;      yes</div>
<div class="line">[Tuesday 22 February 2011] [14:24:11] &lt;pieterh&gt;       hmm, anyone know how to clone a github repository and _keep_ it in the same organization?</div>
<div class="line">[Tuesday 22 February 2011] [14:24:28] &lt;pieterh&gt;       I&#8217;m sure I&#8217;m missing something obvious...</div>
<div class="line">[Tuesday 22 February 2011] [14:33:21] &lt;pieterh&gt;       hmm, git push -u, obviously... duh</div>
<div class="line">[Tuesday 22 February 2011] [14:40:19] &lt;pieterh&gt;       <a href="#id1327"><span class="problematic" id="id1328">sustrik_</span></a>: okaaay, I think that&#8217;s done... we now have <a class="reference external" href="http://github.com/zeromq/zeromq2-1">http://github.com/zeromq/zeromq2-1</a></div>
<div class="line">[Tuesday 22 February 2011] [14:40:42] &lt;pieterh&gt;       just the master branch and no tracking between the two gits, I hope</div>
<div class="line">[Tuesday 22 February 2011] [14:43:26] &lt;pieterh&gt;       <a href="#id1329"><span class="problematic" id="id1330">sustrik_</span></a>: next step is to make release notes (you) and then packages (me)</div>
<div class="line">[Tuesday 22 February 2011] [14:49:05] &lt;<a href="#id1331"><span class="problematic" id="id1332">sustrik_</span></a>&gt;      ok</div>
<div class="line">[Tuesday 22 February 2011] [14:49:14] &lt;<a href="#id1333"><span class="problematic" id="id1334">sustrik_</span></a>&gt;      let me see</div>
<div class="line">[Tuesday 22 February 2011] [14:53:46] &lt;pieterh&gt;       I suggest we edit the NEWS together at <a class="reference external" href="http://piratepad.net/">http://piratepad.net/</a>, then commit to (the real) master</div>
<div class="line">[Tuesday 22 February 2011] [14:54:03] &lt;sustrik&gt;       yes</div>
<div class="line">[Tuesday 22 February 2011] [14:54:07] &lt;sustrik&gt;       wait a sec</div>
<div class="line">[Tuesday 22 February 2011] [14:56:16] &lt;pieterh&gt;       I&#8217;d like to make 2-3 release candidates over 2-3 weeks</div>
<div class="line">[Tuesday 22 February 2011] [14:56:32] &lt;pieterh&gt;       <a class="reference external" href="http://piratepad.net/dkenb33ThF">http://piratepad.net/dkenb33ThF</a></div>
<div class="line">[Tuesday 22 February 2011] [14:57:54] &lt;pieterh&gt;       I think we have enough momentum to get rapid feedback on releases</div>
<div class="line">[Tuesday 22 February 2011] [14:58:43] &lt;pieterh&gt;       the one problem I see with this approach is we don&#8217;t get a branch for the stable release, automatically, in the real git</div>
<div class="line">[Tuesday 22 February 2011] [14:59:11] &lt;pieterh&gt;       s/branch/tag/</div>
<div class="line">[Tuesday 22 February 2011] [14:59:30] &lt;pieterh&gt;       mato&#8217;s going to cut my throat...</div>
<div class="line">[Tuesday 22 February 2011] [15:05:07] &lt;sustrik&gt;       what&#8217;s the problem?</div>
<div class="line">[Tuesday 22 February 2011] [15:05:12] &lt;sustrik&gt;       it&#8217;s DCVS</div>
<div class="line">[Tuesday 22 February 2011] [15:05:29] &lt;sustrik&gt;       so it shouldn&#8217;t matter whether it&#8217;s a branch or a separate repo</div>
<div class="line">[Tuesday 22 February 2011] [15:05:39] &lt;sustrik&gt;       DVCS*</div>
<div class="line">[Tuesday 22 February 2011] [15:05:50] &lt;sustrik&gt;       pieterh: still there</div>
<div class="line">[Tuesday 22 February 2011] [15:05:51] &lt;pieterh&gt;       ok, allow for the fact that any gross git manipulations leave me nervous</div>
<div class="line">[Tuesday 22 February 2011] [15:05:52] &lt;sustrik&gt;       ?</div>
<div class="line">[Tuesday 22 February 2011] [15:06:03] &lt;pieterh&gt;       I find the tool 10x too complex and dangerous, so...</div>
<div class="line">[Tuesday 22 February 2011] [15:06:25] &lt;pieterh&gt;       I&#8217;d much prefer to work with a copy of the repository (not a clone or a fork)</div>
<div class="line">[Tuesday 22 February 2011] [15:06:40] &lt;pieterh&gt;       advantages: anyone can imitate this, make releases, safely</div>
<div class="line">[Tuesday 22 February 2011] [15:06:56] &lt;sustrik&gt;       you mean you&#8217;ve created a new repo?</div>
<div class="line">[Tuesday 22 February 2011] [15:06:59] &lt;pieterh&gt;       yes</div>
<div class="line">[Tuesday 22 February 2011] [15:07:05] &lt;sustrik&gt;       i.e. deleted the entire history?</div>
<div class="line">[Tuesday 22 February 2011] [15:07:14] &lt;pieterh&gt;        <a class="reference external" href="http://github.com/zeromq/zeromq2-1">http://github.com/zeromq/zeromq2-1</a></div>
<div class="line">[Tuesday 22 February 2011] [15:07:22] &lt;pieterh&gt;       I was able to copy the master branch</div>
<div class="line">[Tuesday 22 February 2011] [15:07:34] &lt;pieterh&gt;       which is fine for my purposes (stabilization)</div>
<div class="line">[Tuesday 22 February 2011] [15:07:43] &lt;sustrik&gt;       github seems to be dead</div>
<div class="line">[Tuesday 22 February 2011] [15:07:48] &lt;pieterh&gt;       it wasn&#8217;t me!!!!!</div>
<div class="line">[Tuesday 22 February 2011] [15:07:52] &lt;sustrik&gt;       :)))</div>
<div class="line">[Tuesday 22 February 2011] [15:08:12] &lt;pieterh&gt;       i&#8217;d <em>much</em> prefer to work with readonly access to the real repository</div>
<div class="line">[Tuesday 22 February 2011] [15:08:42] &lt;sustrik&gt;       let&#8217;s move to piratepad now</div>
<div class="line">[Tuesday 22 February 2011] [15:08:47] &lt;pieterh&gt;       but problem is, separate repository breaks the neat history of version tags in the real repo</div>
<div class="line">[Tuesday 22 February 2011] [15:09:02] &lt;pieterh&gt;       piratepad seems unreliable right now...</div>
<div class="line">[Tuesday 22 February 2011] [15:09:17] &lt;sustrik&gt;       yuck</div>
<div class="line">[Tuesday 22 February 2011] [15:09:19] &lt;cremes&gt;        ok, i can reproduce the memory &#8220;leak&#8221;; it is somewhat complicated and it&#8217;s not a real leak... it&#8217;s more like a DDOS</div>
<div class="line">[Tuesday 22 February 2011] [15:09:27] &lt;sustrik&gt;       anyway, there are just 2 items</div>
<div class="line">[Tuesday 22 February 2011] [15:09:35] &lt;sustrik&gt;       ZMQ_RECONNECT_IVL_MAX</div>
<div class="line">[Tuesday 22 February 2011] [15:09:41] &lt;sustrik&gt;       and</div>
<div class="line">[Tuesday 22 February 2011] [15:09:42] &lt;sustrik&gt;       ZMQ_RECOVERY_IVL_MSEC</div>
<div class="line">[Tuesday 22 February 2011] [15:09:50] &lt;sustrik&gt;       + the bug fixes</div>
<div class="line">[Tuesday 22 February 2011] [15:10:45] &lt;sustrik&gt;       you can get description for both from zmq_setsockopt(3)</div>
<div class="line">[Tuesday 22 February 2011] [15:10:52] &lt;pieterh&gt;       indeed</div>
<div class="line">[Tuesday 22 February 2011] [15:11:04] &lt;pieterh&gt;       I&#8217;ll do that, np</div>
<div class="line">[Tuesday 22 February 2011] [15:11:12] &lt;sustrik&gt;       it&#8217;s easy this time</div>
<div class="line">[Tuesday 22 February 2011] [15:11:19] &lt;pieterh&gt;       &#8220;An automatic restart of Piratepad will occur in-31945seconds.&#8221;</div>
<div class="line">[Tuesday 22 February 2011] [15:11:21] &lt;pieterh&gt;       good god</div>
<div class="line">[Tuesday 22 February 2011] [15:11:34] &lt;sustrik&gt;       they are pirates, you know</div>
<div class="line">[Tuesday 22 February 2011] [15:11:37] &lt;pieterh&gt;       We killed Piratepad...</div>
<div class="line">[Tuesday 22 February 2011] [15:11:38] &lt;sustrik&gt;       not exactly precise</div>
<div class="line">[Tuesday 22 February 2011] [15:11:45] &lt;pieterh&gt;       Well, Google bought etherpad and then shut it down...</div>
<div class="line">[Tuesday 22 February 2011] [15:12:15] &lt;sustrik&gt;       anyway</div>
<div class="line">[Tuesday 22 February 2011] [15:12:28] &lt;sustrik&gt;       anything else missing for making the stable branch?</div>
<div class="line">[Tuesday 22 February 2011] [15:13:30] &lt;pieterh&gt;       not for me</div>
<div class="line">[Tuesday 22 February 2011] [15:13:35] &lt;sustrik&gt;       good</div>
<div class="line">[Tuesday 22 February 2011] [15:13:36] &lt;pieterh&gt;       but did you understand my concern?</div>
<div class="line">[Tuesday 22 February 2011] [15:13:41] &lt;sustrik&gt;       which one?</div>
<div class="line">[Tuesday 22 February 2011] [15:13:52] &lt;pieterh&gt;       we&#8217;re breaking the master/maint process</div>
<div class="line">[Tuesday 22 February 2011] [15:14:12] &lt;pieterh&gt;       smashing it into little pieces</div>
<div class="line">[Tuesday 22 February 2011] [15:14:22] &lt;sustrik&gt;       yes</div>
<div class="line">[Tuesday 22 February 2011] [15:14:37] &lt;sustrik&gt;       the problem is the maint was not really well maintained anyway</div>
<div class="line">[Tuesday 22 February 2011] [15:14:43] &lt;pieterh&gt;       since I personally dislike that process and find it complex and bizarre, I&#8217;m happy with that</div>
<div class="line">[Tuesday 22 February 2011] [15:15:02] &lt;pieterh&gt;       I&#8217;d like a process that takes 30 seconds to fully understand</div>
<div class="line">[Tuesday 22 February 2011] [15:15:11] &lt;pieterh&gt;       on a cold monday morning before coffee</div>
<div class="line">[Tuesday 22 February 2011] [15:15:18] &lt;sustrik&gt;       i think it&#8217;s the same now</div>
<div class="line">[Tuesday 22 February 2011] [15:16:02] &lt;sustrik&gt;       patches being passed between branches</div>
<div class="line">[Tuesday 22 February 2011] [15:16:16] &lt;sustrik&gt;       ah, one point</div>
<div class="line">[Tuesday 22 February 2011] [15:16:26] &lt;sustrik&gt;       have a look how version numbers are to be maintained</div>
<div class="line">[Tuesday 22 February 2011] [15:16:55] &lt;sustrik&gt;       it&#8217;s important not to mess that up</div>
<div class="line">[Tuesday 22 February 2011] [15:17:32] &lt;pieterh&gt;       I still don&#8217;t remember how changes flow from maint to master and vice-versa</div>
<div class="line">[Tuesday 22 February 2011] [15:17:47] &lt;pieterh&gt;       so if this works, what we&#8217;ll get are a series of stand-alone gits, zeromq2-1, zeromq2-2, zeromq3-0, each with their own maintainer(s)</div>
<div class="line">[Tuesday 22 February 2011] [15:17:48] &lt;pieterh&gt;       and pull requests with patches between them</div>
<div class="line">[Tuesday 22 February 2011] [15:17:48] &lt;pieterh&gt;       each being copied off the real repo as that heads towards stability</div>
<div class="line">[Tuesday 22 February 2011] [15:18:30] &lt;sustrik&gt;       it works both ways</div>
<div class="line">[Tuesday 22 February 2011] [15:18:31] &lt;pieterh&gt;       the version numbering works properly IMO</div>
<div class="line">[Tuesday 22 February 2011] [15:18:35] &lt;amacleod&gt;      :-( Now jzmq tests are hung forever in Context.finalize</div>
<div class="line">[Tuesday 22 February 2011] [15:18:37] &lt;pieterh&gt;       next releases will be 2.1.1, 2.1.2, 2.1.3...</div>
<div class="line">[Tuesday 22 February 2011] [15:18:46] &lt;sustrik&gt;       1. backporting patches from master to maint(s)</div>
<div class="line">[Tuesday 22 February 2011] [15:18:56] &lt;sustrik&gt;       2. upstreaming patches from maint(s) to master</div>
<div class="line">[Tuesday 22 February 2011] [15:19:12] &lt;pieterh&gt;       I&#8217;d assume 2.1.3 will be the stable one if people find bugs</div>
<div class="line">[Tuesday 22 February 2011] [15:19:42] &lt;pieterh&gt;       yes</div>
<div class="line">[Tuesday 22 February 2011] [15:19:43] &lt;pieterh&gt;       I&#8217;d veto that</div>
<div class="line">[Tuesday 22 February 2011] [15:19:43] &lt;pieterh&gt;       upstreaming patches from temporary clones of maint(s) to master</div>
<div class="line">[Tuesday 22 February 2011] [15:19:43] &lt;pieterh&gt;       at least in my view... for now...</div>
<div class="line">[Tuesday 22 February 2011] [15:19:47] &lt;pieterh&gt;       anyhow, yes, if it makes sense</div>
<div class="line">[Tuesday 22 February 2011] [15:19:50] &lt;pieterh&gt;       DCVS as you said</div>
<div class="line">[Tuesday 22 February 2011] [15:20:15] &lt;pieterh&gt;       each repo is largely independent and we work by protocol</div>
<div class="line">[Tuesday 22 February 2011] [15:20:29] &lt;sustrik&gt;       well, if you bugfix a patch for maint, you want to upstream it</div>
<div class="line">[Tuesday 22 February 2011] [15:20:42] &lt;sustrik&gt;       only thing it means is sending it to the ML</div>
<div class="line">[Tuesday 22 February 2011] [15:20:45] &lt;sustrik&gt;       no big deal</div>
<div class="line">[Tuesday 22 February 2011] [15:21:02] &lt;pieterh&gt;       if the bug is in the current master, I&#8217;d first want to get it fixed there</div>
<div class="line">[Tuesday 22 February 2011] [15:21:15] &lt;pieterh&gt;       because until it&#8217;s gone past that filter, there&#8217;s no guarantee it&#8217;s sane</div>
<div class="line">[Tuesday 22 February 2011] [15:21:31] &lt;pieterh&gt;       if the bug is in old code, then there&#8217;s no upstreaming anyhow</div>
<div class="line">[Tuesday 22 February 2011] [15:21:47] &lt;sustrik&gt;       it&#8217;s up to you</div>
<div class="line">[Tuesday 22 February 2011] [15:22:02] &lt;sustrik&gt;       so you&#8217;re going to reject patches to maint</div>
<div class="line">[Tuesday 22 February 2011] [15:22:04] &lt;sustrik&gt;       right?</div>
<div class="line">[Tuesday 22 February 2011] [15:22:15] &lt;pieterh&gt;       presumably, yes</div>
<div class="line">[Tuesday 22 February 2011] [15:22:19] &lt;sustrik&gt;       ok</div>
<div class="line">[Tuesday 22 February 2011] [15:22:22] &lt;pieterh&gt;       or at least treat them with scepticism</div>
<div class="line">[Tuesday 22 February 2011] [15:22:32] &lt;pieterh&gt;       the only person I trust for my patches is you</div>
<div class="line">[Tuesday 22 February 2011] [15:22:48] &lt;sustrik&gt;       ok, now for the versioning</div>
<div class="line">[Tuesday 22 February 2011] [15:22:48] &lt;pieterh&gt;       especially, especially on a stable release people rely on for production</div>
<div class="line">[Tuesday 22 February 2011] [15:22:55] &lt;pieterh&gt;       versioning... ok</div>
<div class="line">[Tuesday 22 February 2011] [15:23:09] &lt;sustrik&gt;       the process looks like this:</div>
<div class="line">[Tuesday 22 February 2011] [15:23:12] &lt;pieterh&gt;       s/you/the owner of the code in question/</div>
<div class="line">[Tuesday 22 February 2011] [15:23:26] &lt;sustrik&gt;       when about to make a release:</div>
<div class="line">[Tuesday 22 February 2011] [15:23:37] &lt;sustrik&gt;       1. update the version numbers in zmq.h</div>
<div class="line">[Tuesday 22 February 2011] [15:23:45] &lt;sustrik&gt;       2. make a release</div>
<div class="line">[Tuesday 22 February 2011] [15:23:52] &lt;sustrik&gt;       3. bump the version number</div>
<div class="line">[Tuesday 22 February 2011] [15:24:02] &lt;pieterh&gt;       right, <a class="reference external" href="http://www.zeromq.org/docs:procedures">http://www.zeromq.org/docs:procedures</a></div>
<div class="line">[Tuesday 22 February 2011] [15:24:08] &lt;sustrik&gt;       yes</div>
<div class="line">[Tuesday 22 February 2011] [15:24:15] &lt;sustrik&gt;       exactly the same process</div>
<div class="line">[Tuesday 22 February 2011] [15:24:17] &lt;pieterh&gt;       this would happen on the release git only</div>
<div class="line">[Tuesday 22 February 2011] [15:24:59] &lt;sustrik&gt;       are you saying you are not going to version the maint  branch?</div>
<div class="line">[Tuesday 22 February 2011] [15:25:09] &lt;sustrik&gt;       that&#8217;s nonsense</div>
<div class="line">[Tuesday 22 February 2011] [15:25:14] &lt;pieterh&gt;       as far as I&#8217;m concerned, there is no maint branch</div>
<div class="line">[Tuesday 22 February 2011] [15:25:21] &lt;sustrik&gt;       maint repo</div>
<div class="line">[Tuesday 22 February 2011] [15:25:27] &lt;sustrik&gt;       no versions?</div>
<div class="line">[Tuesday 22 February 2011] [15:25:28] &lt;pieterh&gt;       ok, the terms are vital here</div>
<div class="line">[Tuesday 22 February 2011] [15:25:36] &lt;pieterh&gt;       let&#8217;s call it the release git</div>
<div class="line">[Tuesday 22 February 2011] [15:25:42] &lt;pieterh&gt;       as compared to the master git</div>
<div class="line">[Tuesday 22 February 2011] [15:25:47] &lt;sustrik&gt;       whatever</div>
<div class="line">[Tuesday 22 February 2011] [15:25:52] &lt;sustrik&gt;       what about versions?</div>
<div class="line">[Tuesday 22 February 2011] [15:25:59] &lt;pieterh&gt;       I&#8217;m going to tag the release git properly</div>
<div class="line">[Tuesday 22 February 2011] [15:26:22] &lt;pieterh&gt;       and version it properly, exactly as now</div>
<div class="line">[Tuesday 22 February 2011] [15:26:24] &lt;sustrik&gt;       change zmq.h as well</div>
<div class="line">[Tuesday 22 February 2011] [15:26:36] &lt;pieterh&gt;       exactly the same, but it all happens on my master branch</div>
<div class="line">[Tuesday 22 February 2011] [15:26:40] &lt;sustrik&gt;       otherwise users won&#8217;t be able to find out what the version is</div>
<div class="line">[Tuesday 22 February 2011] [15:26:48] &lt;sustrik&gt;       (zmq_version(), version macros</div>
<div class="line">[Tuesday 22 February 2011] [15:26:59] &lt;pieterh&gt;       yes, all that is unambiguous</div>
<div class="line">[Tuesday 22 February 2011] [15:27:09] &lt;pieterh&gt;       the versioning is sane, obvious, necessary</div>
<div class="line">[Tuesday 22 February 2011] [15:27:19] &lt;sustrik&gt;       right, 3 steps</div>
<div class="line">[Tuesday 22 February 2011] [15:27:26] &lt;sustrik&gt;       tag</div>
<div class="line">[Tuesday 22 February 2011] [15:27:43] &lt;sustrik&gt;       release</div>
<div class="line">[Tuesday 22 February 2011] [15:27:45] &lt;sustrik&gt;       change version</div>
<div class="line">[Tuesday 22 February 2011] [15:27:48] &lt;pieterh&gt;       yes</div>
<div class="line">[Tuesday 22 February 2011] [15:27:49] &lt;sustrik&gt;       that&#8217;s it</div>
<div class="line">[Tuesday 22 February 2011] [15:27:52] &lt;sustrik&gt;       ok</div>
<div class="line">[Tuesday 22 February 2011] [15:28:10] &lt;pieterh&gt;       and the final step is update the version in the development master</div>
<div class="line">[Tuesday 22 February 2011] [15:28:17] &lt;sustrik&gt;       so, i&#8217;m going to bump master to 2.2</div>
<div class="line">[Tuesday 22 February 2011] [15:28:18] &lt;pieterh&gt;       so it goes from 2.1.1 to 2.2.0</div>
<div class="line">[Tuesday 22 February 2011] [15:28:26] &lt;sustrik&gt;       yes, i&#8217;ll do that now</div>
<div class="line">[Tuesday 22 February 2011] [15:28:36] &lt;pieterh&gt;       very excellent...!</div>
<div class="line">[Tuesday 22 February 2011] [15:28:43] &lt;pieterh&gt;       ok, I&#8217;m going to make a release now</div>
<div class="line">[Tuesday 22 February 2011] [15:28:47] &lt;pieterh&gt;       no time like the present</div>
<div class="line">[Tuesday 22 February 2011] [15:29:16] &lt;sustrik&gt;       cremes: sorry for the delay</div>
<div class="line">[Tuesday 22 February 2011] [15:29:26] &lt;sustrik&gt;       have you found out what&#8217;s the problem?</div>
<div class="line">[Tuesday 22 February 2011] [15:29:34] &lt;pieterh&gt;       amacleod: sounds like there&#8217;s a socket left open</div>
<div class="line">[Tuesday 22 February 2011] [15:29:51] &lt;pieterh&gt;       amacleod: sorry also for the delay</div>
<div class="line">[Tuesday 22 February 2011] [15:30:15] &lt;amacleod&gt;      Terminating a context will not finish if a socket is left open?</div>
<div class="line">[Tuesday 22 February 2011] [15:31:13] &lt;pieterh&gt;       amacleod: not in every case, but in some cases</div>
<div class="line">[Tuesday 22 February 2011] [15:31:19] &lt;pieterh&gt;       this is new behavior in 2.1</div>
<div class="line">[Tuesday 22 February 2011] [15:31:34] &lt;pieterh&gt;       a side-effect of zmq_term&#8217;s determination to flush sockets safely</div>
<div class="line">[Tuesday 22 February 2011] [15:32:02] &lt;pieterh&gt;       if the socket is held by the same thread as calls zmq_term, it deadlocks (or something)</div>
<div class="line">[Tuesday 22 February 2011] [15:32:54] &lt;amacleod&gt;      Hmm, yeah.  It did look as though the Java finalizer was waiting on some things.</div>
<div class="line">[Tuesday 22 February 2011] [15:36:04] &lt;pieterh&gt;       sustrik: s/until/untill/ in zmq_setsockopt.txt...</div>
<div class="line">[Tuesday 22 February 2011] [15:37:06] &lt;sustrik&gt;       would you fix it in maint and upstram it to master or should i fix it in master and you&#8217;ll backport it to the maint :)</div>
<div class="line">[Tuesday 22 February 2011] [15:38:19] &lt;pieterh&gt;       For a one-word fix... let me clone the git and send you a pull request with regression test case</div>
<div class="line">[Tuesday 22 February 2011] [15:38:27] &lt;pieterh&gt;       yeah :-) process!</div>
<div class="line">[Tuesday 22 February 2011] [15:40:15] &lt;sustrik&gt;       i love it :)</div>
<div class="line">[Tuesday 22 February 2011] [15:41:08] &lt;pieterh&gt;       what do you call sys://log? do we want to document that briefly?</div>
<div class="line">[Tuesday 22 February 2011] [15:41:16] &lt;pieterh&gt;       is it an internal transport?</div>
<div class="line">[Tuesday 22 February 2011] [15:41:17] &lt;cremes&gt;        sustrik: yes, i&#8217;ve discovered a problem; i am just finishing a second test of my hypothesis.... i&#8217;ll share it in about 10m</div>
<div class="line">[Tuesday 22 February 2011] [15:41:47] &lt;sustrik&gt;       good god, everything is shutting down</div>
<div class="line">[Tuesday 22 February 2011] [15:41:58] &lt;pieterh&gt;       someone dropped the Internet!</div>
<div class="line">[Tuesday 22 February 2011] [15:42:11] &lt;sustrik&gt;       i suspect i&#8217;m in lybia</div>
<div class="line">[Tuesday 22 February 2011] [15:42:27] &lt;pieterh&gt;       I knew they should have left it safe with the Elders of the Internet at the top of Big Ben</div>
<div class="line">[Tuesday 22 February 2011] [15:43:04] &lt;pieterh&gt;       sustrik: funny, a friend of mine was supposed to be doing a rally in Libya just about now...</div>
<div class="line">[Tuesday 22 February 2011] [15:43:27] &lt;sustrik&gt;       let&#8217;s hope he&#8217;s not there really</div>
<div class="line">[Tuesday 22 February 2011] [15:43:54] &lt;pieterh&gt;       indeed, I asked him like two weeks ago, &#8220;you going before or after the revolution?&#8221;, he lol&#8217;d</div>
<div class="line">[Tuesday 22 February 2011] [15:44:39] &lt;fbarriga&gt;      hi everyone</div>
<div class="line">[Tuesday 22 February 2011] [15:44:44] &lt;fbarriga&gt;      I&#8217;ve a little doubt</div>
<div class="line">[Tuesday 22 February 2011] [15:45:04] &lt;sustrik&gt;       yuck, github is totally braindead</div>
<div class="line">[Tuesday 22 February 2011] [15:45:14] &lt;sustrik&gt;       repos as well as the site</div>
<div class="line">[Tuesday 22 February 2011] [15:45:27] &lt;pieterh&gt;       fbarriga: hi, what&#8217;s up?</div>
<div class="line">[Tuesday 22 February 2011] [15:45:53] &lt;fbarriga&gt;      hi pieterh , playing with the socket</div>
<div class="line">[Tuesday 22 February 2011] [15:46:15] &lt;fbarriga&gt;      probably this deserve a RTFM reply..</div>
<div class="line">[Tuesday 22 February 2011] [15:46:23] &lt;fbarriga&gt;      if I do this: zmq_msg_init(&amp;msg); zmq_recv(sock, &amp;msg, 0); zmq_recv(sock, &amp;msg, 0); zmq_msg_close(&amp;msg);</div>
<div class="line">[Tuesday 22 February 2011] [15:46:29] &lt;fbarriga&gt;      i&#8217;m leaking memory ?</div>
<div class="line">[Tuesday 22 February 2011] [15:46:44] &lt;cremes&gt;        sustrik: apparently i can reproduce a memory ddos with 0mq sockets; here&#8217;s how (there may be a simpler way but this is how i did it)</div>
<div class="line">[Tuesday 22 February 2011] [15:46:55] &lt;fbarriga&gt;      every time zmq_recv allocate new memory ?</div>
<div class="line">[Tuesday 22 February 2011] [15:47:02] &lt;cremes&gt;        setup a standard forwarder</div>
<div class="line">[Tuesday 22 February 2011] [15:47:12] &lt;pieterh&gt;       fbarriga: yes, that works fine</div>
<div class="line">[Tuesday 22 February 2011] [15:47:15] &lt;fbarriga&gt;      and is mandatory to init the msg before receive the data ?</div>
<div class="line">[Tuesday 22 February 2011] [15:47:18] &lt;pieterh&gt;       yes</div>
<div class="line">[Tuesday 22 February 2011] [15:47:26] &lt;cremes&gt;        connect a publisher to it and let it go crazy broadcasting (bigger messages are better, e.g. 20k+)</div>
<div class="line">[Tuesday 22 February 2011] [15:47:32] &lt;cremes&gt;        so far, no leak</div>
<div class="line">[Tuesday 22 February 2011] [15:47:44] &lt;cremes&gt;        now start adding subscribers</div>
<div class="line">[Tuesday 22 February 2011] [15:47:49] &lt;fbarriga&gt;      umm, but if I have a while(true) I can&#8217;t put the init outside to avoid overhead ?</div>
<div class="line">[Tuesday 22 February 2011] [15:48:03] &lt;cremes&gt;        again, no real leak except for a little queueing if the subscribers are slower than the pub</div>
<div class="line">[Tuesday 22 February 2011] [15:48:12] &lt;pieterh&gt;       fbarriga: close and init are a pair</div>
<div class="line">[Tuesday 22 February 2011] [15:48:16] &lt;cremes&gt;        i adjusted my publisher so that it would not overrun the subscribers</div>
<div class="line">[Tuesday 22 February 2011] [15:48:24] &lt;cremes&gt;        now here&#8217;s where the leak comes in....</div>
<div class="line">[Tuesday 22 February 2011] [15:48:49]          * <a href="#id1335"><span class="problematic" id="id1336">sustrik_</span></a> is listening</div>
<div class="line">[Tuesday 22 February 2011] [15:49:04] &lt;cremes&gt;        modify the subscribers so that they only stay connected for a few seconds; they close their sockets, and then immediately reconnect to the forwarder</div>
<div class="line">[Tuesday 22 February 2011] [15:49:11] &lt;fbarriga&gt;      so I can do this:  zmq_msg_init(&amp;msg); while (true) { zmq_recv(sock, &amp;msg, 0); }  zmq_msg_close(&amp;msg); ?</div>
<div class="line">[Tuesday 22 February 2011] [15:49:14] &lt;cremes&gt;        they continue to do this for at least 15 minutes</div>
<div class="line">[Tuesday 22 February 2011] [15:49:26] &lt;cremes&gt;        what i see happening is a lot of sockets go into TIME_WAIT</div>
<div class="line">[Tuesday 22 February 2011] [15:49:57] &lt;cremes&gt;        i suspected that the socket ZMQ_LINGER option (defaults to indefinite) was holding onto the messages</div>
<div class="line">[Tuesday 22 February 2011] [15:50:06] &lt;cremes&gt;        but i just ran a test where i set it to 0 and it still occurred</div>
<div class="line">[Tuesday 22 February 2011] [15:50:37] &lt;cremes&gt;        so i&#8217;m thinking that as a socket sits in TIME_WAIT, its queue is still active; as new messages arrive from the publisher they are added to the queue</div>
<div class="line">[Tuesday 22 February 2011] [15:50:38] &lt;<a href="#id1337"><span class="problematic" id="id1338">sustrik_</span></a>&gt;      do the subscribers have identities?</div>
<div class="line">[Tuesday 22 February 2011] [15:50:53] &lt;cremes&gt;        when the TIME_WAIT expires, the queued data doesn&#8217;t go away</div>
<div class="line">[Tuesday 22 February 2011] [15:51:15] &lt;cremes&gt;        they are using the default random id&#8217;s; i am not overriding with my own</div>
<div class="line">[Tuesday 22 February 2011] [15:51:20] &lt;pieterh&gt;       fbarriga: nope, it&#8217;ll leak memory</div>
<div class="line">[Tuesday 22 February 2011] [15:51:37] &lt;pieterh&gt;       if you have positive proof that init/close are slow, send it along</div>
<div class="line">[Tuesday 22 February 2011] [15:51:45] &lt;cremes&gt;        when i stop the publisher, the forwarder&#8217;s memory stops growing</div>
<div class="line">[Tuesday 22 February 2011] [15:51:49] &lt;pieterh&gt;       if you don&#8217;t then please don&#8217;t optimize unnecessarily, it&#8217;s pointless</div>
<div class="line">[Tuesday 22 February 2011] [15:52:05] &lt;cremes&gt;        when i disconnect the publisher and <em>all</em> subscribers, the forwarder&#8217;s memory footprint remains the same (big)</div>
<div class="line">[Tuesday 22 February 2011] [15:52:26] &lt;cremes&gt;        so if i left it running (like for an overnight test) it would exhaust all memory resources by morning</div>
<div class="line">[Tuesday 22 February 2011] [15:52:37] &lt;<a href="#id1339"><span class="problematic" id="id1340">sustrik_</span></a>&gt;      cremes: afaik processes don&#8217;t return allocated memory to the OS</div>
<div class="line">[Tuesday 22 February 2011] [15:52:43] &lt;cremes&gt;        and this is exactly what has been plaguing me the last week or so (since i found that last bug!)</div>
<div class="line">[Tuesday 22 February 2011] [15:53:12] &lt;pieterh&gt;       cremes: does the forwarder memory grow again from that high point ?</div>
<div class="line">[Tuesday 22 February 2011] [15:53:24] &lt;pieterh&gt;       i.e. leak vs. cached heap in process...?</div>
<div class="line">[Tuesday 22 February 2011] [15:53:27] &lt;cremes&gt;        pieterh: it only grows again if i turn the publisher back on</div>
<div class="line">[Tuesday 22 February 2011] [15:53:38] &lt;pieterh&gt;       but does it start growing again immediately?</div>
<div class="line">[Tuesday 22 February 2011] [15:54:23] &lt;cremes&gt;        let&#8217;s see....</div>
<div class="line">[Tuesday 22 February 2011] [15:54:25] &lt;pieterh&gt;       if it&#8217;s cached heap memory then after a few cycles it will stop growing</div>
<div class="line">[Tuesday 22 February 2011] [15:55:11] &lt;fbarriga&gt;      pieterh, but hypothetically calling those function will slow down the function</div>
<div class="line">[Tuesday 22 February 2011] [15:55:44] &lt;pieterh&gt;       fbarriga: doing hypothetical optimization is a waste of time, please don&#8217;t</div>
<div class="line">[Tuesday 22 February 2011] [15:55:47] &lt;cremes&gt;        pieterh: no, it doesn&#8217;t start growing again right away</div>
<div class="line">[Tuesday 22 February 2011] [15:56:00] &lt;pieterh&gt;       cremes: then it&#8217;s cached heap memory, not a leak</div>
<div class="line">[Tuesday 22 February 2011] [15:56:31] &lt;pieterh&gt;       fbarriga: if you wish to actually know, try calling zmq_msg_init() and zmq_msg_close() in a loop, 1 billion times</div>
<div class="line">[Tuesday 22 February 2011] [15:56:37] &lt;pieterh&gt;       measure how many seconds it takes</div>
<div class="line">[Tuesday 22 February 2011] [15:56:59] &lt;cremes&gt;        so this is just due to the heap growing really large and it never gives the buffer space back to the OS even if the buffer is empty</div>
<div class="line">[Tuesday 22 February 2011] [15:57:00] &lt;cremes&gt;        ?</div>
<div class="line">[Tuesday 22 February 2011] [15:57:04] &lt;pieterh&gt;       cremes: yup</div>
<div class="line">[Tuesday 22 February 2011] [15:57:14] &lt;CIA-21&gt;        jzmq: 03Gonzalo Diethelm 07master * ra791958 10/ (.gitignore configure.in): Changes by jrideout to allow the build to succeed with autoconf 2.59. - <a class="reference external" href="http://bit.ly/fypsls">http://bit.ly/fypsls</a></div>
<div class="line">[Tuesday 22 February 2011] [15:57:27] &lt;pieterh&gt;       if you have a normally peaky stream, it&#8217;ll hit some max and stop growing</div>
<div class="line">[Tuesday 22 February 2011] [15:57:39] &lt;pieterh&gt;       there may be a system call to return memory to the OS</div>
<div class="line">[Tuesday 22 February 2011] [15:57:57] &lt;pieterh&gt;       but it&#8217;s always virtualized anyhow, not real RAM, afaik</div>
<div class="line">[Tuesday 22 February 2011] [15:58:53] &lt;pieterh&gt;       sustrik: is the inproc hwm+swap change worth mentioning in the release notes?</div>
<div class="line">[Tuesday 22 February 2011] [15:59:20] &lt;<a href="#id1341"><span class="problematic" id="id1342">sustrik_</span></a>&gt;      dunno</div>
<div class="line">[Tuesday 22 February 2011] [15:59:30] &lt;<a href="#id1343"><span class="problematic" id="id1344">sustrik_</span></a>&gt;      it&#8217;s more of a fix</div>
<div class="line">[Tuesday 22 February 2011] [15:59:37] &lt;<a href="#id1345"><span class="problematic" id="id1346">sustrik_</span></a>&gt;      than a new feature</div>
<div class="line">[Tuesday 22 February 2011] [16:01:34] &lt;pieterh&gt;       basically the hwm is shared between peers, right?</div>
<div class="line">[Tuesday 22 February 2011] [16:03:13] &lt;<a href="#id1347"><span class="problematic" id="id1348">sustrik_</span></a>&gt;      it&#8217;s sum of the two hwms</div>
<div class="line">[Tuesday 22 February 2011] [16:05:15] &lt;pieterh&gt;       the peers share a single buffer...</div>
<div class="line">[Tuesday 22 February 2011] [16:08:01] &lt;pieterh&gt;       sustrik: <a class="reference external" href="http://edupad.ch/2tZLebJbTg">http://edupad.ch/2tZLebJbTg</a> is the NEWS for 2.1.1...</div>
<div class="line">[Tuesday 22 February 2011] [16:08:13] &lt;pieterh&gt;       I&#8217;ve gone through the git log</div>
<div class="line">[Tuesday 22 February 2011] [16:10:37] &lt;<a href="#id1349"><span class="problematic" id="id1350">sustrik_</span></a>&gt;      you&#8217;ve killed the edupad as well!</div>
<div class="line">[Tuesday 22 February 2011] [16:11:20] &lt;<a href="#id1351"><span class="problematic" id="id1352">sustrik_</span></a>&gt;      isn&#8217;t it a ipv6 day today?</div>
<div class="line">[Tuesday 22 February 2011] [16:15:23] &lt;pieterh&gt;       sustrik: let&#8217;s do that tomorrow... update your NEWS, send me a pull request</div>
<div class="line">[Tuesday 22 February 2011] [16:15:48] &lt;pieterh&gt;       when we get that working, I&#8217;ll make the release</div>
<div class="line">[Tuesday 22 February 2011] [16:16:06] &lt;<a href="#id1353"><span class="problematic" id="id1354">sustrik_</span></a>&gt;      ok</div>
<div class="line">[Tuesday 22 February 2011] [16:19:26] &lt;cremes&gt;        i&#8217;m pretty convinced there is still a leak here... new information</div>
<div class="line">[Tuesday 22 February 2011] [16:19:49] &lt;cremes&gt;        slowing the publisher to every 10ms and setting HWM for all sockets to 1 and LINGER to 0</div>
<div class="line">[Tuesday 22 February 2011] [16:19:58] &lt;cremes&gt;        it still slowly grows in size</div>
<div class="line">[Tuesday 22 February 2011] [16:20:13] &lt;cremes&gt;        there shouldn&#8217;t be <em>anything</em> getting queued or buffered here</div>
<div class="line">[Tuesday 22 February 2011] [16:20:34] &lt;<a href="#id1355"><span class="problematic" id="id1356">sustrik_</span></a>&gt;      ack</div>
<div class="line">[Tuesday 22 February 2011] [16:20:52] &lt;<a href="#id1357"><span class="problematic" id="id1358">sustrik_</span></a>&gt;      can you provide the test program?</div>
<div class="line">[Tuesday 22 February 2011] [16:20:55] &lt;cremes&gt;        the &#8220;cause&#8221; appears to be the subscribers connecting/disconnecting</div>
<div class="line">[Tuesday 22 February 2011] [16:21:10] &lt;<a href="#id1359"><span class="problematic" id="id1360">sustrik_</span></a>&gt;      yes, looks like</div>
<div class="line">[Tuesday 22 February 2011] [16:21:18] &lt;cremes&gt;        sustrik: i can but it will be in ruby; i&#8217;ll describe the steps so it could be replicated in another lang</div>
<div class="line">[Tuesday 22 February 2011] [16:21:44] &lt;pieterh&gt;       hmm, sustrik, maybe you really are in Libya...</div>
<div class="line">[Tuesday 22 February 2011] [16:23:28] &lt;pieterh&gt;       sustrik: does the HWM on a PUB socket affect each subscriber queue (over TCP)? so potentially N x HWM?</div>
<div class="line">[Tuesday 22 February 2011] [16:23:39] &lt;<a href="#id1361"><span class="problematic" id="id1362">sustrik_</span></a>&gt;      cremes: ok</div>
<div class="line">[Tuesday 22 February 2011] [16:23:49] &lt;<a href="#id1363"><span class="problematic" id="id1364">sustrik_</span></a>&gt;      yes</div>
<div class="line">[Tuesday 22 February 2011] [16:23:54] &lt;<a href="#id1365"><span class="problematic" id="id1366">sustrik_</span></a>&gt;      pieterh: yes</div>
<div class="line">[Tuesday 22 February 2011] [16:24:04] &lt;pieterh&gt;       thx</div>
<div class="line">[Tuesday 22 February 2011] [16:39:19] &lt;<a href="#id1367"><span class="problematic" id="id1368">sustrik_</span></a>&gt;      pieterh: still there</div>
<div class="line">[Tuesday 22 February 2011] [16:39:22] &lt;<a href="#id1369"><span class="problematic" id="id1370">sustrik_</span></a>&gt;      ?</div>
<div class="line">[Tuesday 22 February 2011] [16:39:47] &lt;<a href="#id1371"><span class="problematic" id="id1372">sustrik_</span></a>&gt;      one more important thing...</div>
<div class="line">[Tuesday 22 February 2011] [16:40:25] &lt;pieterh&gt;       yeah, still here</div>
<div class="line">[Tuesday 22 February 2011] [16:41:06] &lt;pieterh&gt;       hmm?</div>
<div class="line">[Tuesday 22 February 2011] [16:41:49] &lt;<a href="#id1373"><span class="problematic" id="id1374">sustrik_</span></a>&gt;      given that there are two separately maintained repos now</div>
<div class="line">[Tuesday 22 February 2011] [16:42:02] &lt;<a href="#id1375"><span class="problematic" id="id1376">sustrik_</span></a>&gt;      we should keep the patches completely clean</div>
<div class="line">[Tuesday 22 February 2011] [16:42:14] &lt;<a href="#id1377"><span class="problematic" id="id1378">sustrik_</span></a>&gt;      i.e. no whitespace patching</div>
<div class="line">[Tuesday 22 February 2011] [16:42:20] &lt;<a href="#id1379"><span class="problematic" id="id1380">sustrik_</span></a>&gt;      no mixed patches</div>
<div class="line">[Tuesday 22 February 2011] [16:42:43] &lt;<a href="#id1381"><span class="problematic" id="id1382">sustrik_</span></a>&gt;      like fixing a bug and correcting an unrelated typo in a single patch</div>
<div class="line">[Tuesday 22 February 2011] [16:42:44] &lt;<a href="#id1383"><span class="problematic" id="id1384">sustrik_</span></a>&gt;      etc.</div>
<div class="line">[Tuesday 22 February 2011] [16:42:55] &lt;pieterh&gt;       you mean so we can re-port the history anywhere?</div>
<div class="line">[Tuesday 22 February 2011] [16:42:56] &lt;<a href="#id1385"><span class="problematic" id="id1386">sustrik_</span></a>&gt;      otherwise we&#8217;ll end in dependency hell</div>
<div class="line">[Tuesday 22 February 2011] [16:43:07] &lt;<a href="#id1387"><span class="problematic" id="id1388">sustrik_</span></a>&gt;      yes</div>
<div class="line">[Tuesday 22 February 2011] [16:43:11] &lt;pieterh&gt;       right</div>
<div class="line">[Tuesday 22 February 2011] [16:43:16] &lt;<a href="#id1389"><span class="problematic" id="id1390">sustrik_</span></a>&gt;      keeping patches mobile</div>
<div class="line">[Tuesday 22 February 2011] [16:43:31] &lt;pieterh&gt;       so the way a pull request works is you specify a commit (or multiple commits)</div>
<div class="line">[Tuesday 22 February 2011] [16:43:38] &lt;pieterh&gt;       this may not work all the time</div>
<div class="line">[Tuesday 22 February 2011] [16:44:56] &lt;<a href="#id1391"><span class="problematic" id="id1392">sustrik_</span></a>&gt;      ?</div>
<div class="line">[Tuesday 22 February 2011] [16:50:40] &lt;pieterh&gt;       clearly if we can keep patches fully mobile on the development master, that&#8217;s ideal</div>
<div class="line">[Tuesday 22 February 2011] [16:50:40] &lt;pieterh&gt;       makes it fairly easy to send them anywhere</div>
<div class="line">[Tuesday 22 February 2011] [16:50:40] &lt;pieterh&gt;       we may want to add more process support, e.g. something greppable in the log</div>
<div class="line">[Tuesday 22 February 2011] [16:50:40] &lt;pieterh&gt;       in the worst case we can apply patches by hand</div>
<div class="line">[Tuesday 22 February 2011] [16:51:42] &lt;pieterh&gt;       well, some situations I can see happening</div>
<div class="line">[Tuesday 22 February 2011] [16:51:42] &lt;pieterh&gt;       - bug hits in 2.1 but that code has changed in 2.2</div>
<div class="line">[Tuesday 22 February 2011] [16:51:42] &lt;pieterh&gt;       - patch in 2.2 doesn&#8217;t apply cleanly in 2.1</div>
<div class="line">[Tuesday 22 February 2011] [16:52:19] &lt;pieterh&gt;       - 2.1 needs only part of a patch made to 2.2</div>
<div class="line">[Tuesday 22 February 2011] [16:52:22] &lt;pieterh&gt;       etc.</div>
<div class="line">[Tuesday 22 February 2011] [16:55:11] &lt;<a href="#id1393"><span class="problematic" id="id1394">sustrik_</span></a>&gt;      git has support for that</div>
<div class="line">[Tuesday 22 February 2011] [16:55:11] &lt;amacleod&gt;      I am getting a different assertion error from jzmq tests now: Unknown error 156384765, rc == 0 (src/socket_base.cpp:243)</div>
<div class="line">[Tuesday 22 February 2011] [16:55:17] &lt;<a href="#id1395"><span class="problematic" id="id1396">sustrik_</span></a>&gt;      it&#8217;s called merging</div>
<div class="line">[Tuesday 22 February 2011] [16:55:32] &lt;<a href="#id1397"><span class="problematic" id="id1398">sustrik_</span></a>&gt;      so you apply the patch</div>
<div class="line">[Tuesday 22 February 2011] [16:55:38] &lt;<a href="#id1399"><span class="problematic" id="id1400">sustrik_</span></a>&gt;      you get merge conflicts</div>
<div class="line">[Tuesday 22 February 2011] [16:55:41] &lt;<a href="#id1401"><span class="problematic" id="id1402">sustrik_</span></a>&gt;      you solve them</div>
<div class="line">[Tuesday 22 February 2011] [16:55:46] &lt;<a href="#id1403"><span class="problematic" id="id1404">sustrik_</span></a>&gt;      you commit the patch</div>
<div class="line">[Tuesday 22 February 2011] [16:55:58] &lt;<a href="#id1405"><span class="problematic" id="id1406">sustrik_</span></a>&gt;      it&#8217;s still the same patch, but it have been backported</div>
<div class="line">[Tuesday 22 February 2011] [16:56:27] &lt;<a href="#id1407"><span class="problematic" id="id1408">sustrik_</span></a>&gt;      the backport iirc is visible as a separate commit</div>
<div class="line">[Tuesday 22 February 2011] [16:57:08] &lt;<a href="#id1409"><span class="problematic" id="id1410">sustrik_</span></a>&gt;      amacleod: what version?</div>
<div class="line">[Tuesday 22 February 2011] [16:57:59] &lt;pieterh&gt;       sustrik: ok, we&#8217;ll play it through</div>
<div class="line">[Tuesday 22 February 2011] [16:58:16] &lt;amacleod&gt;      sustrik, v2.1.0, from tarball on <a class="reference external" href="http://www.zeromq.org/intro:get-the-software">http://www.zeromq.org/intro:get-the-software</a></div>
<div class="line">[Tuesday 22 February 2011] [17:00:27] &lt;amacleod&gt;      Looks like that line reference is in zmq::socket_base_t::getsockopt</div>
<div class="line">[Tuesday 22 February 2011] [17:01:25] &lt;<a href="#id1411"><span class="problematic" id="id1412">sustrik_</span></a>&gt;      amacleod: yes, it&#8217;s a bug</div>
<div class="line">[Tuesday 22 February 2011] [17:01:32] &lt;<a href="#id1413"><span class="problematic" id="id1414">sustrik_</span></a>&gt;      it&#8217;s solved in head</div>
<div class="line">[Tuesday 22 February 2011] [17:01:46] &lt;amacleod&gt;      Ok.  Guess I should get head, then, eh?</div>
<div class="line">[Tuesday 22 February 2011] [17:01:55] &lt;<a href="#id1415"><span class="problematic" id="id1416">sustrik_</span></a>&gt;      pieterh: when are you going to release 2.1.1?</div>
<div class="line">[Tuesday 22 February 2011] [17:02:36] &lt;<a href="#id1417"><span class="problematic" id="id1418">sustrik_</span></a>&gt;      amacleod: either get the head or wait for 2.1.1</div>
<div class="line">[Tuesday 22 February 2011] [17:02:45] &lt;amacleod&gt;      I will try with head.</div>
<div class="line">[Tuesday 22 February 2011] [17:10:06] &lt;pieterh&gt;       sustrik: please review <a class="reference external" href="http://edupad.ch/2tZLebJbTg">http://edupad.ch/2tZLebJbTg</a> and add to your master if you&#8217;re happy with it</div>
<div class="line">[Tuesday 22 February 2011] [17:10:06] &lt;pieterh&gt;       date is set for tomorrow</div>
<div class="line">[Tuesday 22 February 2011] [17:10:07] &lt;pieterh&gt;       send me a pull request for that change, and I&#8217;ll process it, and then make the release</div>
<div class="line">[Tuesday 22 February 2011] [17:10:08] &lt;pieterh&gt;       tomorrow morning after coffee</div>
<div class="line">[Tuesday 22 February 2011] [17:10:08] &lt;pieterh&gt;       does that work?</div>
<div class="line">[Tuesday 22 February 2011] [17:10:29] &lt;pieterh&gt;       I&#8217;d like to split off &#8220;Making a Release&#8221; from the &#8220;Source Code&#8221; page, it&#8217;s two separate topics</div>
<div class="line">[Tuesday 22 February 2011] [17:10:29] &lt;pieterh&gt;       and this lets me document how to make a release, as a naive and not very expert person</div>
<div class="line">[Tuesday 22 February 2011] [17:10:29] &lt;pieterh&gt;       which is ideal</div>
<div class="line">[Tuesday 22 February 2011] [17:11:55] &lt;pieterh&gt;       ok, away</div>
<div class="line">[Tuesday 22 February 2011] [17:12:06] &lt;pieterh&gt;       g&#8217;nite everyone</div>
<div class="line">[Tuesday 22 February 2011] [17:12:23] &lt;amacleod&gt;      Nite Pieter.</div>
<div class="line">[Tuesday 22 February 2011] [17:15:35] &lt;<a href="#id1419"><span class="problematic" id="id1420">sustrik_</span></a>&gt;      what change?</div>
<div class="line">[Tuesday 22 February 2011] [17:16:12] &lt;<a href="#id1421"><span class="problematic" id="id1422">sustrik_</span></a>&gt;      edpad times out here btw</div>
<div class="line">[Tuesday 22 February 2011] [17:16:20] &lt;<a href="#id1423"><span class="problematic" id="id1424">sustrik_</span></a>&gt;      good night anyway</div>
<div class="line">[Tuesday 22 February 2011] [17:21:28] &lt;amacleod&gt;      Do pollers need to be closed or finalized in some way before terminating the context?</div>
<div class="line">[Tuesday 22 February 2011] [17:28:03] &lt;rphillips&gt;     is there a way to set a zeromq socket up to timeout on a zmq_send?</div>
<div class="line">[Tuesday 22 February 2011] [17:28:41] &lt;ianbarber&gt;     you could poll for a socket being writeable, with a timeout</div>
<div class="line">[Tuesday 22 February 2011] [17:32:10] &lt;rphillips&gt;     Do I need to check for writability after the connect or after the send?</div>
<div class="line">[Tuesday 22 February 2011] [17:32:18] &lt;rphillips&gt;     the send is blocked already</div>
<div class="line">[Tuesday 22 February 2011] [17:44:41] &lt;<a href="#id1425"><span class="problematic" id="id1426">sustrik_</span></a>&gt;      before the send</div>
<div class="line">[Tuesday 22 February 2011] [19:06:41] &lt;leiger&gt;        Hey, is Pieter here?</div>
<div class="line">[Tuesday 22 February 2011] [19:22:25] &lt;cremes&gt;        sustrik: got a repro for you here:  <a class="reference external" href="https://github.com/zeromq/zeromq2/issues/171">https://github.com/zeromq/zeromq2/issues/171</a></div>
<div class="line">[Tuesday 22 February 2011] [19:22:37] &lt;cremes&gt;        it affects tcp and ipc transports</div>
<div class="line">[Tuesday 22 February 2011] [19:23:06] &lt;cremes&gt;        sustrik: if you&#8217;d like, i can set this up under your account on my box so you can see it since i assume you don&#8217;t plan</div>
<div class="line">[Tuesday 22 February 2011] [19:23:18] &lt;cremes&gt;        to install ruby and the dependent libraries</div>
<div class="line">[Tuesday 22 February 2011] [19:23:27] &lt;cremes&gt;        let me know</div>
<div class="line">[Tuesday 22 February 2011] [19:34:32] &lt;lt_schmidt_jr&gt; Hi guys, is anyone compiling zmq for multiple platforms?</div>
<div class="line">[Tuesday 22 February 2011] [19:35:09] &lt;lt_schmidt_jr&gt; anyone do jar packaging for binaries for java?</div>
<div class="line">[Tuesday 22 February 2011] [19:56:30] &lt;kdj&gt;   I am having a problem uninstalling an older version of pyzmq...</div>
<div class="line">[Tuesday 22 February 2011] [19:56:39] &lt;kdj&gt;   I mean a newer version, actually</div>
<div class="line">[Tuesday 22 February 2011] [19:56:57] &lt;kdj&gt;   I have pyzmq 2.1.0 installed, I want to revert to pyzmq2.0.10</div>
<div class="line">[Tuesday 22 February 2011] [19:57:16] &lt;kdj&gt;   I remove the directory and .egg from site-packages, and the module seems removed...</div>
<div class="line">[Tuesday 22 February 2011] [19:57:45] &lt;kdj&gt;   But when I re-install it, the zmq_version() is still 2.1.0, <em>except</em> for in the shell I installed from O_o</div>
<div class="line">[Tuesday 22 February 2011] [19:57:50] &lt;kdj&gt;   This is in Windows</div>
<div class="line">[Tuesday 22 February 2011] [19:59:17] &lt;kdj&gt;   Oh, it is because I am in the directory in which zmq is located. I still don&#8217;t get how they&#8217;re not the same...</div>
<div class="line">[Tuesday 22 February 2011] [20:37:21] &lt;erickt&gt;        hello #zeromq. I noticed that the HEAD of zeromq2 doesn&#8217;t seem to be building and installing the documentation.</div>
<div class="line">[Tuesday 22 February 2011] [20:42:52] &lt;jugg&gt;  erickt, check the output of ./configure, you&#8217;re probably missing a dependency.</div>
<div class="line">[Tuesday 22 February 2011] [20:44:27] &lt;Steve-o&gt;       which should be asciidoc</div>
<div class="line">[Tuesday 22 February 2011] [20:45:23] &lt;erickt&gt;        I got both asciidoc and xmlto installed. &#8220;make dist&#8221; properly builds all the docs</div>
<div class="line">[Tuesday 22 February 2011] [20:45:55]          * erickt checks 2.0.10</div>
<div class="line">[Tuesday 22 February 2011] [20:47:08] &lt;Steve-o&gt;       didn&#8217;t someone catch this on the list recently</div>
<div class="line">[Tuesday 22 February 2011] [20:48:49] &lt;erickt&gt;        ah yeah the documentation does build correctly with v2.1.0</div>
<div class="line">[Tuesday 22 February 2011] [20:49:04] &lt;Steve-o&gt;       or maybe a new side effect with the new api.zero.mq support</div>
<div class="line">[Tuesday 22 February 2011] [20:55:22]          * erickt git bisects...</div>
<div class="line">[Tuesday 22 February 2011] [21:00:56] &lt;erickt&gt;        oh, haha, it&#8217;s all my fault</div>
<div class="line">[Tuesday 22 February 2011] [21:01:35] &lt;erickt&gt;        I&#8217;m trying to get zeromq to build outside of the checkout directory and I messed up getting the doc builds to work :)</div>
<div class="line">[Tuesday 22 February 2011] [23:54:39] &lt;cremes&gt;        andrewvc: ping</div>
<div class="line">[Tuesday 22 February 2011] [23:54:52] &lt;andrewvc&gt;      yo</div>
<div class="line">[Tuesday 22 February 2011] [23:54:58] &lt;andrewvc&gt;      sitting next to evanphx right now</div>
<div class="line">[Tuesday 22 February 2011] [23:55:09] &lt;cremes&gt;        get it up on flickr</div>
<div class="line">[Tuesday 22 February 2011] [23:55:12] &lt;cremes&gt;        :)</div>
<div class="line">[Tuesday 22 February 2011] [23:55:16] &lt;andrewvc&gt;      lol</div>
<div class="line">[Tuesday 22 February 2011] [23:55:32] &lt;andrewvc&gt;      we&#8217;re looking at that zmq bug actually, going through mailbox.cpp</div>
<div class="line">[Tuesday 22 February 2011] [23:55:35] &lt;cremes&gt;        so which bug are you and evan chatting about?</div>
<div class="line">[Tuesday 22 February 2011] [23:55:49] &lt;andrewvc&gt;      I think yours was a separate one, something about kernel buffers?</div>
<div class="line">[Tuesday 22 February 2011] [23:55:57] &lt;andrewvc&gt;      this is the one I hit a while ago that jruby doesn&#8217;t have</div>
<div class="line">[Tuesday 22 February 2011] [23:56:44] &lt;cremes&gt;        the new_sndbuf &gt; old_sndbuf assertion?</div>
<div class="line">[Tuesday 22 February 2011] [23:56:57] &lt;andrewvc&gt;      mmm this is nbytes != -1 EBADF</div>
<div class="line">[Tuesday 22 February 2011] [23:57:01] &lt;andrewvc&gt;      mailbox.cpp 241</div>
<div class="line">[Tuesday 22 February 2011] [23:57:03] &lt;andrewvc&gt;      that one</div>
<div class="line">[Tuesday 22 February 2011] [23:57:09] &lt;cremes&gt;        ah, your file descriptor one</div>
<div class="line">[Tuesday 22 February 2011] [23:57:11] &lt;andrewvc&gt;      yep</div>
<div class="line">[Wednesday 23 February 2011] [00:00:12] &lt;cremes&gt;      btw, i think 0mq is a pretty good exercise of rbx&#8217;s ffi impl</div>
<div class="line">[Wednesday 23 February 2011] [00:44:03] &lt;andrewvc&gt;    cremes: still around?</div>
<div class="line">[Wednesday 23 February 2011] [00:45:13] &lt;cremes&gt;      barely; what&#8217;s up?</div>
<div class="line">[Wednesday 23 February 2011] [00:46:55] &lt;andrewvc&gt;    yo, not much, but have a bit of a lead on the issue</div>
<div class="line">[Wednesday 23 February 2011] [00:47:07] &lt;andrewvc&gt;    basically, zmq is shutting down, but a call to zmqgetsockopt gets through</div>
<div class="line">[Wednesday 23 February 2011] [00:47:14] &lt;andrewvc&gt;    though the socket has been closed zmq doesn&#8217;t see it</div>
<div class="line">[Wednesday 23 February 2011] [00:47:29] &lt;andrewvc&gt;    btw, evan was saying we should probably not use finalizers, as they can be dangerous</div>
<div class="line">[Wednesday 23 February 2011] [00:47:38] &lt;cremes&gt;      so it&#8217;s shutting down when you do the getsockopt call?</div>
<div class="line">[Wednesday 23 February 2011] [00:47:39] &lt;andrewvc&gt;    basically, it&#8217;s easy to have to FFI pointers to the same data</div>
<div class="line">[Wednesday 23 February 2011] [00:47:46] &lt;andrewvc&gt;    it shuts down  before</div>
<div class="line">[Wednesday 23 February 2011] [00:47:53] &lt;andrewvc&gt;    but the getsockopt gets through later</div>
<div class="line">[Wednesday 23 February 2011] [00:48:01] &lt;cremes&gt;      hrm...</div>
<div class="line">[Wednesday 23 February 2011] [00:48:11] &lt;andrewvc&gt;    and zmq blows up, because an internal FD it uses for that socket, an FD for a socketpair, has been closed</div>
<div class="line">[Wednesday 23 February 2011] [00:48:16] &lt;cremes&gt;      so what&#8217;s this about finalizers? don&#8217;t use &#8216;em for auto-gc?</div>
<div class="line">[Wednesday 23 February 2011] [00:48:43] &lt;andrewvc&gt;    the cpp mailbox object seems to have been deleted, but not overwritten, but the ffi socket still points to it</div>
<div class="line">[Wednesday 23 February 2011] [00:48:50] &lt;andrewvc&gt;    that&#8217;s from evan btw</div>
<div class="line">[Wednesday 23 February 2011] [00:49:00] &lt;cremes&gt;      the ffi socket...?</div>
<div class="line">[Wednesday 23 February 2011] [00:49:06] &lt;andrewvc&gt;    ZMQ::Socket</div>
<div class="line">[Wednesday 23 February 2011] [00:49:16] &lt;andrewvc&gt;    the actual pointer to the socket</div>
<div class="line">[Wednesday 23 February 2011] [00:49:19] &lt;cremes&gt;      the socketpairs are used for internal signaling, so they aren&#8217;t exposed to us via ffi at all</div>
<div class="line">[Wednesday 23 February 2011] [00:49:33] &lt;cremes&gt;      ok, zmq.socket</div>
<div class="line">[Wednesday 23 February 2011] [00:49:37] &lt;andrewvc&gt;    yeah, but I think they&#8217;re still tied to the socket</div>
<div class="line">[Wednesday 23 February 2011] [00:50:07] &lt;evan&gt;        hi cremes</div>
<div class="line">[Wednesday 23 February 2011] [00:50:07] &lt;andrewvc&gt;    evan&#8217;s going to pop in</div>
<div class="line">[Wednesday 23 February 2011] [00:50:08] &lt;evan&gt;        :D</div>
<div class="line">[Wednesday 23 February 2011] [00:50:13] &lt;cremes&gt;      howdeee</div>
<div class="line">[Wednesday 23 February 2011] [00:50:18] &lt;evan&gt;        so, real fast</div>
<div class="line">[Wednesday 23 February 2011] [00:50:20] &lt;evan&gt;        here&#8217;s how I see it.</div>
<div class="line">[Wednesday 23 February 2011] [00:50:39]        * cremes had a dram or two... :)</div>
<div class="line">[Wednesday 23 February 2011] [00:50:43] &lt;andrewvc&gt;    lol</div>
<div class="line">[Wednesday 23 February 2011] [00:50:51] &lt;evan&gt;        FFI -&gt; zmq::getsockopt -&gt; zmq::process_commands -&gt; zmq::mailbox::recv</div>
<div class="line">[Wednesday 23 February 2011] [00:51:01] &lt;evan&gt;        those last 3 are in C++, in zmq&#8217;s code base</div>
<div class="line">[Wednesday 23 February 2011] [00:51:06] &lt;cremes&gt;      hey, when you work 22 hours a day, a dram is all the vacation you need :)</div>
<div class="line">[Wednesday 23 February 2011] [00:51:08] &lt;evan&gt;        the FFI is called from the getsockopt method</div>
<div class="line">[Wednesday 23 February 2011] [00:51:13] &lt;cremes&gt;      right</div>
<div class="line">[Wednesday 23 February 2011] [00:51:29] &lt;evan&gt;        ZMQ_EVENTS is the option requested</div>
<div class="line">[Wednesday 23 February 2011] [00:51:45] &lt;cremes&gt;      k</div>
<div class="line">[Wednesday 23 February 2011] [00:51:51] &lt;evan&gt;        it appears that zmq has deleted the mailbox in question</div>
<div class="line">[Wednesday 23 February 2011] [00:52:08] &lt;evan&gt;        we&#8217;re still able to access it because the FFI side has a hanging pointer to where it used to be</div>
<div class="line">[Wednesday 23 February 2011] [00:52:12] &lt;evan&gt;        and it hasn&#8217;t been overriden</div>
<div class="line">[Wednesday 23 February 2011] [00:52:32] &lt;evan&gt;        I believe it has been deleted because I can see that the destructor for the mailbox is what closes the socketpari</div>
<div class="line">[Wednesday 23 February 2011] [00:52:43] &lt;evan&gt;        and I know that we&#8217;re getting the EBADF on the socketpair in a mailbox</div>
<div class="line">[Wednesday 23 February 2011] [00:52:59] &lt;cremes&gt;      ok, then that&#8217;s a bug</div>
<div class="line">[Wednesday 23 February 2011] [00:53:09] &lt;evan&gt;        all of that leads me to believe that zmq has decided to shutdown</div>
<div class="line">[Wednesday 23 February 2011] [00:53:15] &lt;evan&gt;        either because of an internal condition</div>
<div class="line">[Wednesday 23 February 2011] [00:53:18] &lt;evan&gt;        or because it was requested to</div>
<div class="line">[Wednesday 23 February 2011] [00:53:28] &lt;evan&gt;        but FFI was not told zmq was shutting down</div>
<div class="line">[Wednesday 23 February 2011] [00:53:40] &lt;evan&gt;        and thus still holds pointers to the C++ objects that have been deleted</div>
<div class="line">[Wednesday 23 February 2011] [00:53:50] &lt;cremes&gt;      the socketpair is used for signaling between the virtual socket and the i/o thread that handles all send/recv on the back-end</div>
<div class="line">[Wednesday 23 February 2011] [00:53:55] &lt;cremes&gt;      so if what you are saying is true</div>
<div class="line">[Wednesday 23 February 2011] [00:54:07] &lt;cremes&gt;      then we need to show a repro and get them to fix that up</div>
<div class="line">[Wednesday 23 February 2011] [00:54:17] &lt;cremes&gt;      the socket should only shut down under 2 conditions</div>
<div class="line">[Wednesday 23 February 2011] [00:54:24] &lt;andrewvc&gt;    well, I think that&#8217;s all in the strace and backtrace I showed previously</div>
<div class="line">[Wednesday 23 February 2011] [00:54:26] &lt;cremes&gt;      1. zmq_close() is called on the socket</div>
<div class="line">[Wednesday 23 February 2011] [00:54:29] &lt;andrewvc&gt;    but I didn&#8217;t frame it right</div>
<div class="line">[Wednesday 23 February 2011] [00:54:36] &lt;andrewvc&gt;    well, I never called zmq_close on the socket</div>
<div class="line">[Wednesday 23 February 2011] [00:54:39] &lt;cremes&gt;      2. zmq_term() is called on the context to shut <em>everything</em> down</div>
<div class="line">[Wednesday 23 February 2011] [00:54:48] &lt;andrewvc&gt;    we&#8217;re not sure why it&#8217;s being shut down</div>
<div class="line">[Wednesday 23 February 2011] [00:54:55] &lt;cremes&gt;      ok, then 3. bug</div>
<div class="line">[Wednesday 23 February 2011] [00:55:12] &lt;andrewvc&gt;    in my app I never call those things, it could be related to a ruby exception, or perhaps an exception in eventmachine&#8217;s cext</div>
<div class="line">[Wednesday 23 February 2011] [00:55:20] &lt;andrewvc&gt;    since moving to jruby fixed the issue</div>
<div class="line">[Wednesday 23 February 2011] [00:55:22] &lt;evan&gt;        #1 and #2 need to be verified that they&#8217;re not happening</div>
<div class="line">[Wednesday 23 February 2011] [00:55:31] &lt;evan&gt;        because of the extra indirection of the FFI binding</div>
<div class="line">[Wednesday 23 February 2011] [00:55:34] &lt;andrewvc&gt;    yep</div>
<div class="line">[Wednesday 23 February 2011] [00:55:50] &lt;cremes&gt;      yeah, breakpoints on those c++ functions</div>
<div class="line">[Wednesday 23 February 2011] [00:55:52] &lt;evan&gt;        it seems possible that zmq_term was called (perhaps by a finalizer?)</div>
<div class="line">[Wednesday 23 February 2011] [00:56:05] &lt;cremes&gt;      only if a context is garbage collected</div>
<div class="line">[Wednesday 23 February 2011] [00:56:20] &lt;evan&gt;        sure</div>
<div class="line">[Wednesday 23 February 2011] [00:56:27] &lt;cremes&gt;      and <em>only</em> under 2.1.0... it activates that code based on the version of the 0mq lib that is loaded</div>
<div class="line">[Wednesday 23 February 2011] [00:56:29] &lt;evan&gt;        basically, you need to verify if those are happening.</div>
<div class="line">[Wednesday 23 February 2011] [00:56:38] &lt;evan&gt;        or not happening</div>
<div class="line">[Wednesday 23 February 2011] [00:56:43] &lt;evan&gt;        when the bug occurs</div>
<div class="line">[Wednesday 23 February 2011] [00:56:44] &lt;andrewvc&gt;    oh, well this was off zmq HEAD</div>
<div class="line">[Wednesday 23 February 2011] [00:56:47] &lt;evan&gt;        only then can you proceed to #3</div>
<div class="line">[Wednesday 23 February 2011] [00:56:58] &lt;cremes&gt;      agreed (evan)</div>
<div class="line">[Wednesday 23 February 2011] [00:57:03] &lt;evan&gt;        additionally, you can certainly repro this all in C++</div>
<div class="line">[Wednesday 23 February 2011] [00:57:23] &lt;cremes&gt;      maybe andrewvc  can ... ;)</div>
<div class="line">[Wednesday 23 February 2011] [00:57:27] &lt;evan&gt;        you can see if calling zmq_term, then zmq_getsockopt causes an EBADF</div>
<div class="line">[Wednesday 23 February 2011] [00:57:30] &lt;evan&gt;        it seems likely it would :)</div>
<div class="line">[Wednesday 23 February 2011] [00:57:35] &lt;andrewvc&gt;    lol, I&#8217;d actually really like to, I&#8217;ll put some more time into this this weekend</div>
<div class="line">[Wednesday 23 February 2011] [00:57:39] &lt;cremes&gt;      that&#8217;s easy enough to try</div>
<div class="line">[Wednesday 23 February 2011] [00:58:14] &lt;cremes&gt;      there are certainly bugs in 0mq; i found another today that i&#8217;ve been chasing for the last 4 days</div>
<div class="line">[Wednesday 23 February 2011] [00:58:26] &lt;cremes&gt;      i sent them a repro (in ruby)</div>
<div class="line">[Wednesday 23 February 2011] [00:58:31] &lt;evan&gt;        cremes: yeah, I told andrewvc about that one.</div>
<div class="line">[Wednesday 23 February 2011] [00:58:35] &lt;evan&gt;        the buffer bug.</div>
<div class="line">[Wednesday 23 February 2011] [00:58:50] &lt;cremes&gt;      yeah, the same code also crashes rbx... right</div>
<div class="line">[Wednesday 23 February 2011] [00:58:51] &lt;andrewvc&gt;    yeah</div>
<div class="line">[Wednesday 23 February 2011] [00:59:15] &lt;cremes&gt;      well, this is all pretty exciting</div>
<div class="line">[Wednesday 23 February 2011] [00:59:33] &lt;cremes&gt;      thanks for taking some time to dive into this... are you guys as a BoF or something?</div>
<div class="line">[Wednesday 23 February 2011] [00:59:38] &lt;cremes&gt;      s/as/at/</div>
<div class="line">[Wednesday 23 February 2011] [00:59:51] &lt;andrewvc&gt;    we&#8217;re both usually at LA Ruby hack nights on tues</div>
<div class="line">[Wednesday 23 February 2011] [00:59:57] &lt;cremes&gt;      ah...</div>
<div class="line">[Wednesday 23 February 2011] [01:00:03] &lt;andrewvc&gt;    actually evan&#8217;s a cofounder, him and shane becker run it</div>
<div class="line">[Wednesday 23 February 2011] [01:00:28] &lt;cremes&gt;      cool.... well, you certainly brought in a knotty problem tonight</div>
<div class="line">[Wednesday 23 February 2011] [01:00:29] &lt;andrewvc&gt;    what&#8217;s a BoF</div>
<div class="line">[Wednesday 23 February 2011] [01:00:40] &lt;cremes&gt;      birds of a feather</div>
<div class="line">[Wednesday 23 February 2011] [01:00:52] &lt;cremes&gt;      it&#8217;s a wwdc term</div>
<div class="line">[Wednesday 23 February 2011] [01:00:53] &lt;andrewvc&gt;    yeah, I&#8217;m glad evan took a look at it, really interesting stuff going through zeromq internals tracking it down</div>
<div class="line">[Wednesday 23 February 2011] [01:01:13] &lt;cremes&gt;      heh, i bet evan had some comments on that codebase</div>
<div class="line">[Wednesday 23 February 2011] [01:01:17] &lt;andrewvc&gt;    lol</div>
<div class="line">[Wednesday 23 February 2011] [01:01:21] &lt;andrewvc&gt;    how did you know</div>
<div class="line">[Wednesday 23 February 2011] [01:01:37] &lt;cremes&gt;      i&#8217;ve seen rbx c++ and it&#8217;s nothing like 0mq c++</div>
<div class="line">[Wednesday 23 February 2011] [01:01:40] &lt;cremes&gt;      :)</div>
<div class="line">[Wednesday 23 February 2011] [01:01:53] &lt;andrewvc&gt;    hehe</div>
<div class="line">[Wednesday 23 February 2011] [01:01:59] &lt;cremes&gt;      d&#8217;oh! this is all in-channel!  heh heh</div>
<div class="line">[Wednesday 23 February 2011] [01:02:01] &lt;evan&gt;        cremes: yeah, I did</div>
<div class="line">[Wednesday 23 February 2011] [01:02:05] &lt;evan&gt;        <em>eyeroll</em></div>
<div class="line">[Wednesday 23 February 2011] [01:02:08] &lt;evan&gt;        :D</div>
<div class="line">[Wednesday 23 February 2011] [01:02:27] &lt;cremes&gt;      that&#8217;s why i&#8217;m a ruby guy; i have a hard enough time making that look good let alone attempt c++ anymore</div>
<div class="line">[Wednesday 23 February 2011] [01:02:35] &lt;cremes&gt;      !!</div>
<div class="line">[Wednesday 23 February 2011] [01:02:44] &lt;cremes&gt;      well, thanks for digging into this</div>
<div class="line">[Wednesday 23 February 2011] [01:02:44] &lt;cremes&gt;      i</div>
<div class="line">[Wednesday 23 February 2011] [01:03:02] &lt;cremes&gt;      think between andrewvc and i we can probably produce a repro for these guys</div>
<div class="line">[Wednesday 23 February 2011] [01:03:10] &lt;cremes&gt;      that ZMQ_EVENTS code is still pretty new</div>
<div class="line">[Wednesday 23 February 2011] [01:03:17] &lt;cremes&gt;      and likely needs more shake-down</div>
<div class="line">[Wednesday 23 February 2011] [01:04:04] &lt;cremes&gt;      andrewvc: are you doing your dripdrop testing under rbx full-time yet?</div>
<div class="line">[Wednesday 23 February 2011] [01:04:25] &lt;andrewvc&gt;    hah, switched to jruby because of this bug</div>
<div class="line">[Wednesday 23 February 2011] [01:04:32] &lt;andrewvc&gt;    but if I get this back under control, I&#8217;m back on rbx</div>
<div class="line">[Wednesday 23 February 2011] [01:04:33] &lt;cremes&gt;      pussy</div>
<div class="line">[Wednesday 23 February 2011] [01:04:40] &lt;cremes&gt;      ;)</div>
<div class="line">[Wednesday 23 February 2011] [01:04:47] &lt;evan&gt;        cremes: cool.</div>
<div class="line">[Wednesday 23 February 2011] [01:04:48] &lt;andrewvc&gt;    lol, well, I like my stack traces with my errors</div>
<div class="line">[Wednesday 23 February 2011] [01:05:10] &lt;cremes&gt;      it doesn&#8217;t make a lot of sense that this would work under jruby but break under rbx, yes?</div>
<div class="line">[Wednesday 23 February 2011] [01:05:22] &lt;andrewvc&gt;    well, eventmachine has a different java core</div>
<div class="line">[Wednesday 23 February 2011] [01:05:22] &lt;cremes&gt;      zmq should behave the same in both scenarios</div>
<div class="line">[Wednesday 23 February 2011] [01:05:30] &lt;andrewvc&gt;    so maybe there&#8217;s an interaction with the cext</div>
<div class="line">[Wednesday 23 February 2011] [01:05:36] &lt;evan&gt;        also</div>
<div class="line">[Wednesday 23 February 2011] [01:05:37] &lt;andrewvc&gt;    or maybe I&#8217;m crazy</div>
<div class="line">[Wednesday 23 February 2011] [01:05:40] &lt;cremes&gt;      crazy</div>
<div class="line">[Wednesday 23 February 2011] [01:05:41] &lt;evan&gt;        if it is something with finalizers</div>
<div class="line">[Wednesday 23 February 2011] [01:05:53] &lt;evan&gt;        jruby could have very different finalizer run patterns than rbx</div>
<div class="line">[Wednesday 23 February 2011] [01:05:56] &lt;evan&gt;        jsut throwing that out there.</div>
<div class="line">[Wednesday 23 February 2011] [01:06:02] &lt;andrewvc&gt;    yep, I&#8217;ll try removing finalizers as well</div>
<div class="line">[Wednesday 23 February 2011] [01:06:05] &lt;cremes&gt;      finalizers are easy to disable; andrewvc : give that a try</div>
<div class="line">[Wednesday 23 February 2011] [01:06:21] &lt;andrewvc&gt;    I definitely will</div>
<div class="line">[Wednesday 23 February 2011] [01:06:30] &lt;cremes&gt;      yeah, the finalizers could be the culprit</div>
<div class="line">[Wednesday 23 February 2011] [01:06:46] &lt;cremes&gt;      most of these commands run async on the i/o thread so timing can play a part</div>
<div class="line">[Wednesday 23 February 2011] [01:07:01] &lt;evan&gt;        cremes: i&#8217;m packing up my laptop</div>
<div class="line">[Wednesday 23 February 2011] [01:07:02] &lt;andrewvc&gt;    it was always reproducible in sequence though</div>
<div class="line">[Wednesday 23 February 2011] [01:07:07] &lt;andrewvc&gt;    I as well, they&#8217;re closing down</div>
<div class="line">[Wednesday 23 February 2011] [01:07:09] &lt;evan&gt;        talk to ya tomorrow, back on the battlefield!</div>
<div class="line">[Wednesday 23 February 2011] [01:07:09] &lt;andrewvc&gt;    I&#8217;ll ttyl chuck</div>
<div class="line">[Wednesday 23 February 2011] [01:07:11] &lt;cremes&gt;      evan: g&#8217;night</div>
<div class="line">[Wednesday 23 February 2011] [01:07:17] &lt;cremes&gt;      goodnight to all!</div>
<div class="line">[Wednesday 23 February 2011] [01:07:20] &lt;cremes&gt;      happy hacking</div>
<div class="line">[Wednesday 23 February 2011] [02:31:06] &lt;sustrik&gt;     andrewvc,evan,cremes: just a minor note:</div>
<div class="line">[Wednesday 23 February 2011] [02:31:19] &lt;andrewvc&gt;    yo</div>
<div class="line">[Wednesday 23 February 2011] [02:31:25] &lt;sustrik&gt;     in 2.1, zmq_term() should not invalidate the socekts</div>
<div class="line">[Wednesday 23 February 2011] [02:31:29] &lt;sustrik&gt;     what it does</div>
<div class="line">[Wednesday 23 February 2011] [02:31:43] &lt;sustrik&gt;     it causes the socket to return ETERM on any subsequent call</div>
<div class="line">[Wednesday 23 February 2011] [02:31:53] &lt;sustrik&gt;     and wait for the user to close the socket</div>
<div class="line">[Wednesday 23 February 2011] [02:32:04] &lt;sustrik&gt;     so you should not see EBADF in such case</div>
<div class="line">[Wednesday 23 February 2011] [02:32:10] &lt;sustrik&gt;     if you do, it&#8217;s a bug</div>
<div class="line">[Wednesday 23 February 2011] [02:32:19] &lt;andrewvc&gt;    oh, cool, btw I found the answer to that issue I had sustrik</div>
<div class="line">[Wednesday 23 February 2011] [02:32:26] &lt;andrewvc&gt;    the weird one with the strace and everything</div>
<div class="line">[Wednesday 23 February 2011] [02:32:32] &lt;sustrik&gt;     what was that?</div>
<div class="line">[Wednesday 23 February 2011] [02:33:11] &lt;andrewvc&gt;    Well, haven&#8217;t tested it fully yet, but I&#8217;m fairly sure that eventmachine was catching a ruby exception, and then trying to shutdown() and close() all its FDs</div>
<div class="line">[Wednesday 23 February 2011] [02:33:14] &lt;andrewvc&gt;    including the ZMQ ones</div>
<div class="line">[Wednesday 23 February 2011] [02:33:21] &lt;andrewvc&gt;    which is not good</div>
<div class="line">[Wednesday 23 February 2011] [02:33:29] &lt;sustrik&gt;     i see</div>
<div class="line">[Wednesday 23 February 2011] [02:33:43] &lt;andrewvc&gt;    thanks for taking a look at it though</div>
<div class="line">[Wednesday 23 February 2011] [02:33:48] &lt;sustrik&gt;     so you&#8217;ve used closed socket afterwards, right?</div>
<div class="line">[Wednesday 23 February 2011] [02:34:11] &lt;andrewvc&gt;    well, yeah, the zmq_socket wasn&#8217;t closed, but the FD that ZMQ_FD exposes was</div>
<div class="line">[Wednesday 23 February 2011] [02:34:19] &lt;sustrik&gt;     oh my</div>
<div class="line">[Wednesday 23 February 2011] [02:34:24] &lt;sustrik&gt;     :)</div>
<div class="line">[Wednesday 23 February 2011] [02:34:28] &lt;andrewvc&gt;    yeah, that&#8217;s why it was so odd to track down lol</div>
<div class="line">[Wednesday 23 February 2011] [02:35:01] &lt;andrewvc&gt;    thanks for the heads up on zmq_term</div>
<div class="line">[Wednesday 23 February 2011] [03:05:18] &lt;CIA-21&gt;      zeromq2: 03Martin Sustrik 07master * r820fec7 10/ include/zmq.h :</div>
<div class="line">[Wednesday 23 February 2011] [03:05:18] &lt;CIA-21&gt;      zeromq2: Version bumped to 2.2.0</div>
<div class="line">[Wednesday 23 February 2011] [03:05:18] &lt;CIA-21&gt;      zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/gApquE">http://bit.ly/gApquE</a></div>
<div class="line">[Wednesday 23 February 2011] [03:33:35] &lt;ianbarber&gt;   the blog post does kind of just dismiss the idea that a event driven/actor model is practical - but the issue of losing control flow he describes are basically true of any callback based language, like javascript for example. I would also think the control flow problems would occur in any language which is more declarative than imperative, and there are many succesful examples of those too, so I&#8217;m not so sure that the negative poin</div>
<div class="line">[Wednesday 23 February 2011] [03:33:35] &lt;ianbarber&gt;   good one</div>
<div class="line">[Wednesday 23 February 2011] [03:33:58] &lt;ianbarber&gt;   the stuff about STM looks good, just seems the case against message passing is a bit thin</div>
<div class="line">[Wednesday 23 February 2011] [03:36:17] &lt;ianbarber&gt;   even the paper references, the base MP implementation is in C, for students, which is not necessarily a sensible thing. I would suspect if it were given to Erlang or javascript coders, you&#8217;d have different results, as there is a slightly different mindset.</div>
<div class="line">[Wednesday 23 February 2011] [03:36:55] &lt;Guthur&gt;      I had a little trouble buying into his arguments against MP, but I thought maybe it was because I was sold on 0MQ as one solution to concurrency problems</div>
<div class="line">[Wednesday 23 February 2011] [03:39:29] &lt;<a href="#id1427"><span class="problematic" id="id1428">sustrik_</span></a>&gt;    i think he&#8217;s right that implementing a complex application using MP can be really complex</div>
<div class="line">[Wednesday 23 February 2011] [03:39:42] &lt;<a href="#id1429"><span class="problematic" id="id1430">sustrik_</span></a>&gt;    you have hundreds or thousands of components</div>
<div class="line">[Wednesday 23 February 2011] [03:39:43] &lt;guido_g&gt;     hrhrhr</div>
<div class="line">[Wednesday 23 February 2011] [03:39:53] &lt;<a href="#id1431"><span class="problematic" id="id1432">sustrik_</span></a>&gt;    sending messages randomly among them</div>
<div class="line">[Wednesday 23 February 2011] [03:40:10] &lt;<a href="#id1433"><span class="problematic" id="id1434">sustrik_</span></a>&gt;    you have little idea of how ordering is going to look like</div>
<div class="line">[Wednesday 23 February 2011] [03:40:11] &lt;guido_g&gt;     isn&#8217;t implementig a complex application always... complex?</div>
<div class="line">[Wednesday 23 February 2011] [03:40:11] &lt;<a href="#id1435"><span class="problematic" id="id1436">sustrik_</span></a>&gt;    etc.</div>
<div class="line">[Wednesday 23 February 2011] [03:40:55] &lt;<a href="#id1437"><span class="problematic" id="id1438">sustrik_</span></a>&gt;    yes, what he&#8217;s saying is that complexity of MP solution on shared-data solution is more or less the same</div>
<div class="line">[Wednesday 23 February 2011] [03:41:29] &lt;Guthur&gt;      well, I suppose it&#8217;s better than the complexity multiplier of locking strategies</div>
<div class="line">[Wednesday 23 February 2011] [03:41:55] &lt;<a href="#id1439"><span class="problematic" id="id1440">sustrik_</span></a>&gt;    hard to say, some research would be needed</div>
<div class="line">[Wednesday 23 February 2011] [03:42:30] &lt;<a href="#id1441"><span class="problematic" id="id1442">sustrik_</span></a>&gt;    what really makes difference imo is being able to decompose message flows</div>
<div class="line">[Wednesday 23 February 2011] [03:42:47] &lt;<a href="#id1443"><span class="problematic" id="id1444">sustrik_</span></a>&gt;    into sensible well defined subsystems</div>
<div class="line">[Wednesday 23 February 2011] [03:42:59] &lt;ianbarber&gt;   yeah</div>
<div class="line">[Wednesday 23 February 2011] [03:43:10] &lt;guido_g&gt;     the message as/is the interface</div>
<div class="line">[Wednesday 23 February 2011] [03:43:11] &lt;<a href="#id1445"><span class="problematic" id="id1446">sustrik_</span></a>&gt;    which, of course, is what message patterns do</div>
<div class="line">[Wednesday 23 February 2011] [03:43:34] &lt;<a href="#id1447"><span class="problematic" id="id1448">sustrik_</span></a>&gt;    you can&#8217;t send messages randomly back and forth</div>
<div class="line">[Wednesday 23 February 2011] [03:43:41] &lt;ianbarber&gt;   i think that for practically building complex systems, it is often about choosing the right pre-existing tools to do the job, the building on to your own</div>
<div class="line">[Wednesday 23 February 2011] [03:43:47] &lt;<a href="#id1449"><span class="problematic" id="id1450">sustrik_</span></a>&gt;    you have to say: this is my pub/sub channel</div>
<div class="line">[Wednesday 23 February 2011] [03:43:57] &lt;<a href="#id1451"><span class="problematic" id="id1452">sustrik_</span></a>&gt;    and that&#8217;s what it is</div>
<div class="line">[Wednesday 23 February 2011] [03:45:03] &lt;<a href="#id1453"><span class="problematic" id="id1454">sustrik_</span></a>&gt;    so you have clear idea how the communication work</div>
<div class="line">[Wednesday 23 February 2011] [03:45:35] &lt;ianbarber&gt;   you know, there&#8217;s a lot about distributed processing different types of work, but if i have to do one kind i&#8217;ll use piccolo, another a database, and ideally you&#8217;d have a good substrate for having those bits communicate efficiently, and 0mq is good for that. i see a fair few projects that I wish they had used it on the underlying layer, as it would be more reliable than their current communication solution, and more extensible at th</div>
<div class="line">[Wednesday 23 February 2011] [03:45:35] &lt;ianbarber&gt;   level</div>
<div class="line">[Wednesday 23 February 2011] [03:46:35] &lt;<a href="#id1455"><span class="problematic" id="id1456">sustrik_</span></a>&gt;    yes</div>
<div class="line">[Wednesday 23 February 2011] [03:47:14] &lt;<a href="#id1457"><span class="problematic" id="id1458">sustrik_</span></a>&gt;    i think any programmer that&#8217;s in business for some time have written at least a couple of ad hoc communication solutions :)</div>
<div class="line">[Wednesday 23 February 2011] [03:47:36] &lt;Guthur&gt;      Microsoft Research were looking into STM in C# (SXM), but the last update was 2005, seems a long time ago</div>
<div class="line">[Wednesday 23 February 2011] [03:48:04] &lt;<a href="#id1459"><span class="problematic" id="id1460">sustrik_</span></a>&gt;    the problem with STM, obviosuly, is that it doesn&#8217;t scale</div>
<div class="line">[Wednesday 23 February 2011] [03:49:39] &lt;Guthur&gt;      we are finding scaling issues with our inter threading stuff already</div>
<div class="line">[Wednesday 23 February 2011] [03:50:06] &lt;Guthur&gt;      I couldn&#8217;t sell them on MP(0MQ), so they decided to try with explicit locking</div>
<div class="line">[Wednesday 23 February 2011] [03:50:27] &lt;Guthur&gt;      it&#8217;s taken at least twice as long, so far, and it still doesn&#8217;t work</div>
<div class="line">[Wednesday 23 February 2011] [03:52:05] &lt;Guthur&gt;      Thats why I was looking for concurrency articles, I really want to convince them of the difficulty in developing scalable solutions for our problem</div>
<div class="line">[Wednesday 23 February 2011] [03:52:06] &lt;<a href="#id1461"><span class="problematic" id="id1462">sustrik_</span></a>&gt;    what&#8217;s &#8220;inter threading&#8221;?</div>
<div class="line">[Wednesday 23 February 2011] [03:52:29] &lt;Guthur&gt;      sorry, I meant communicating between threads</div>
<div class="line">[Wednesday 23 February 2011] [03:53:16] &lt;<a href="#id1463"><span class="problematic" id="id1464">sustrik_</span></a>&gt;    i see</div>
<div class="line">[Wednesday 23 February 2011] [03:53:20] &lt;Guthur&gt;      it&#8217;s still that same problem I have talked about a week or 2 ago</div>
<div class="line">[Wednesday 23 February 2011] [03:53:25] &lt;Guthur&gt;      have/had</div>
<div class="line">[Wednesday 23 February 2011] [03:55:39] &lt;Guthur&gt;      N request threads waiting for data from async reply threads</div>
<div class="line">[Wednesday 23 February 2011] [04:05:26] &lt;pieterh&gt;     Guthur: are we still discussing that blog post?</div>
<div class="line">[Wednesday 23 February 2011] [04:05:58] &lt;pieterh&gt;     What he seems to be saying is &#8220;I don&#8217;t have decent MP patterns, so I&#8217;m going to invent a better shared memory technology&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [04:07:23] &lt;pieterh&gt;     it is a straw man blog post</div>
<div class="line">[Wednesday 23 February 2011] [04:08:45] &lt;pieterh&gt;     <a href="#id1465"><span class="problematic" id="id1466">sustrik_</span></a> thanks for the NEWS update, how do we apply this to the two branches now?</div>
<div class="line">[Wednesday 23 February 2011] [04:19:00] &lt;pieterh&gt;     mikko: you around?</div>
<div class="line">[Wednesday 23 February 2011] [04:20:00] &lt;<a href="#id1467"><span class="problematic" id="id1468">sustrik_</span></a>&gt;    pieterh: the news are specific to the release</div>
<div class="line">[Wednesday 23 February 2011] [04:20:12] &lt;<a href="#id1469"><span class="problematic" id="id1470">sustrik_</span></a>&gt;    thus 2.1.1 release notes make no sense in 2.2 branch</div>
<div class="line">[Wednesday 23 February 2011] [04:20:31] &lt;pieterh&gt;     <a href="#id1471"><span class="problematic" id="id1472">sustrik_</span></a> ... the NEWS in your master should be a complete history, no?</div>
<div class="line">[Wednesday 23 February 2011] [04:20:44] &lt;pieterh&gt;     do you intend to remove old release notes?</div>
<div class="line">[Wednesday 23 February 2011] [04:21:40] &lt;pieterh&gt;     it goes back to version 0.2...</div>
<div class="line">[Wednesday 23 February 2011] [04:22:17] &lt;<a href="#id1473"><span class="problematic" id="id1474">sustrik_</span></a>&gt;    but it doesn&#8217;t make sense once you have two branches</div>
<div class="line">[Wednesday 23 February 2011] [04:22:53] &lt;pieterh&gt;     i really want my branch to be passive, not fragment the main git</div>
<div class="line">[Wednesday 23 February 2011] [04:23:23]        * pieterh thinks...</div>
<div class="line">[Wednesday 23 February 2011] [04:24:03] &lt;pieterh&gt;     everything in your NEWS file is for historical interest</div>
<div class="line">[Wednesday 23 February 2011] [04:24:29] &lt;pieterh&gt;     I&#8217;d recommend that remain a complete record of all officially released versions</div>
<div class="line">[Wednesday 23 February 2011] [04:24:52] &lt;pieterh&gt;     if someone forks a branch and makes their own patches, that&#8217;s different</div>
<div class="line">[Wednesday 23 February 2011] [04:25:03] &lt;pieterh&gt;     but this is about a continuous recorded history</div>
<div class="line">[Wednesday 23 February 2011] [04:25:19] &lt;<a href="#id1475"><span class="problematic" id="id1476">sustrik_</span></a>&gt;    the problem is that there are overlaps</div>
<div class="line">[Wednesday 23 February 2011] [04:25:32] &lt;pieterh&gt;     for example the same patch on 2.2 and 2.1?</div>
<div class="line">[Wednesday 23 February 2011] [04:25:37] &lt;<a href="#id1477"><span class="problematic" id="id1478">sustrik_</span></a>&gt;    yes</div>
<div class="line">[Wednesday 23 February 2011] [04:25:41] &lt;pieterh&gt;     we handled that in OpenAMQ quite easily</div>
<div class="line">[Wednesday 23 February 2011] [04:26:15] &lt;<a href="#id1479"><span class="problematic" id="id1480">sustrik_</span></a>&gt;    but the main problem is there&#8217;s <em>no</em> 2.1 history in 2.2 repo</div>
<div class="line">[Wednesday 23 February 2011] [04:26:32] &lt;<a href="#id1481"><span class="problematic" id="id1482">sustrik_</span></a>&gt;    so placing 2.1 release notes there is inconsistent</div>
<div class="line">[Wednesday 23 February 2011] [04:26:44] &lt;pieterh&gt;     there is no 2.1 tag in 2.2 repo, that&#8217;s true</div>
<div class="line">[Wednesday 23 February 2011] [04:27:09] &lt;pieterh&gt;     I don&#8217;t know what you mean by &#8220;there is no 2.1 history&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [04:27:48] &lt;<a href="#id1483"><span class="problematic" id="id1484">sustrik_</span></a>&gt;    git repo doesn&#8217;t contain the 2.1 branch</div>
<div class="line">[Wednesday 23 February 2011] [04:27:56] &lt;pieterh&gt;     a branch is not history</div>
<div class="line">[Wednesday 23 February 2011] [04:27:58] &lt;<a href="#id1485"><span class="problematic" id="id1486">sustrik_</span></a>&gt;    you&#8217;ve created separate repo yesterday</div>
<div class="line">[Wednesday 23 February 2011] [04:28:04] &lt;pieterh&gt;     a branch is just an access path</div>
<div class="line">[Wednesday 23 February 2011] [04:28:14] &lt;<a href="#id1487"><span class="problematic" id="id1488">sustrik_</span></a>&gt;    so the NEWs in 2.2 repo would refer to code in 2.1 repo</div>
<div class="line">[Wednesday 23 February 2011] [04:28:28] &lt;pieterh&gt;     yes</div>
<div class="line">[Wednesday 23 February 2011] [04:28:40] &lt;pieterh&gt;     and since we&#8217;re coordinating between the two repos, using pull requests, etc. that&#8217;s normal</div>
<div class="line">[Wednesday 23 February 2011] [04:29:11] &lt;pieterh&gt;     look, I can fork the NEWS file, np, but it is IMO wrong and we&#8217;ll have to fix it up later</div>
<div class="line">[Wednesday 23 February 2011] [04:29:23] &lt;<a href="#id1489"><span class="problematic" id="id1490">sustrik_</span></a>&gt;    it&#8217;s ok imo</div>
<div class="line">[Wednesday 23 February 2011] [04:29:49] &lt;pieterh&gt;     this will lead to the 2.1 repo becoming detached in some sense</div>
<div class="line">[Wednesday 23 February 2011] [04:30:01] &lt;<a href="#id1491"><span class="problematic" id="id1492">sustrik_</span></a>&gt;    that&#8217;s the goal, isn&#8217;t it</div>
<div class="line">[Wednesday 23 February 2011] [04:30:04] &lt;pieterh&gt;     that only makes sense if we likewise detach a 2.0 repo at some point</div>
<div class="line">[Wednesday 23 February 2011] [04:30:22] &lt;pieterh&gt;     in that case, yes</div>
<div class="line">[Wednesday 23 February 2011] [04:30:48] &lt;<a href="#id1493"><span class="problematic" id="id1494">sustrik_</span></a>&gt;    you can detach 2.0 if you want</div>
<div class="line">[Wednesday 23 February 2011] [04:30:57] &lt;<a href="#id1495"><span class="problematic" id="id1496">sustrik_</span></a>&gt;    i&#8217;m happy with that</div>
<div class="line">[Wednesday 23 February 2011] [04:31:07] &lt;pieterh&gt;     happy = formal approval? :-)</div>
<div class="line">[Wednesday 23 February 2011] [04:31:26] &lt;<a href="#id1497"><span class="problematic" id="id1498">sustrik_</span></a>&gt;    yes. i&#8217;ll be happy to get rid of it :)</div>
<div class="line">[Wednesday 23 February 2011] [04:31:33] &lt;pieterh&gt;     ok, we have a good plan then</div>
<div class="line">[Wednesday 23 February 2011] [04:31:42] &lt;pieterh&gt;     get 2.0 out of your hair as well</div>
<div class="line">[Wednesday 23 February 2011] [04:31:54] &lt;pieterh&gt;     and provide an easy way to maintain these parallel versions</div>
<div class="line">[Wednesday 23 February 2011] [04:32:08] &lt;pieterh&gt;     we do have people using 2.0 in production and there will be patches on it at some point</div>
<div class="line">[Wednesday 23 February 2011] [04:32:23] &lt;pieterh&gt;     so we&#8217;re into three rolling versions, which is where I like to be...</div>
<div class="line">[Wednesday 23 February 2011] [04:32:59] &lt;pieterh&gt;     boring, normal, exciting...</div>
<div class="line">[Wednesday 23 February 2011] [04:33:10] &lt;<a href="#id1499"><span class="problematic" id="id1500">sustrik_</span></a>&gt;    ok</div>
<div class="line">[Wednesday 23 February 2011] [04:33:11] &lt;pieterh&gt;     <a href="#id1501"><span class="problematic" id="id1502">sustrik_</span></a>: thanks, I have everything I need to make the release now</div>
<div class="line">[Wednesday 23 February 2011] [04:33:23] &lt;pieterh&gt;     just let me grab a coffee...</div>
<div class="line">[Wednesday 23 February 2011] [04:34:16] &lt;pieterh&gt;     oh, everyone, I have news that Brett Cameron (who ported 0MQ to OpenVMS), who lives in Christchurch NZ, is safe, though his house was badly damaged</div>
<div class="line">[Wednesday 23 February 2011] [04:53:40] &lt;mikko&gt;       pieterh: am now</div>
<div class="line">[Wednesday 23 February 2011] [04:54:19] &lt;pieterh&gt;     mikko: just in time... what&#8217;s the status of OpenPGM wrt MSVC on the master?</div>
<div class="line">[Wednesday 23 February 2011] [04:54:46] &lt;mikko&gt;       pieterh: builds without issues</div>
<div class="line">[Wednesday 23 February 2011] [04:54:53] &lt;mikko&gt;       there is WithOpenPGM build target</div>
<div class="line">[Wednesday 23 February 2011] [04:54:57] &lt;mikko&gt;       no wait</div>
<div class="line">[Wednesday 23 February 2011] [04:55:00] &lt;pieterh&gt;     excellent, that&#8217;s what... wait...</div>
<div class="line">[Wednesday 23 February 2011] [04:55:07] &lt;mikko&gt;       it&#8217;s broken</div>
<div class="line">[Wednesday 23 February 2011] [04:55:25] &lt;pieterh&gt;     ok, that&#8217;s fine</div>
<div class="line">[Wednesday 23 February 2011] [04:55:27] &lt;mikko&gt;       <a class="reference external" href="http://build.zero.mq/job/ZeroMQ2-core-master_MSVC-win7/">http://build.zero.mq/job/ZeroMQ2-core-master_MSVC-win7/</a></div>
<div class="line">[Wednesday 23 February 2011] [04:55:49] &lt;mikko&gt;       it&#8217;s fixed it seems. there was an issue using different definition of bool between the two iirc</div>
<div class="line">[Wednesday 23 February 2011] [04:56:23] &lt;mikko&gt;       <a class="reference external" href="http://snapshot.zero.mq/msvc2008/">http://snapshot.zero.mq/msvc2008/</a> these snapshots are built with pgm enabled</div>
<div class="line">[Wednesday 23 February 2011] [04:56:34] &lt;mikko&gt;       so in theory people can just download the dll and import library</div>
<div class="line">[Wednesday 23 February 2011] [04:56:39] &lt;pieterh&gt;     lovely</div>
<div class="line">[Wednesday 23 February 2011] [04:56:52] &lt;pieterh&gt;     I&#8217;m making the 2.1.1 (rc1) release now</div>
<div class="line">[Wednesday 23 February 2011] [04:57:22] &lt;mikko&gt;       this means that autoconf builds for openpgm have to wait until 2.2.x ?</div>
<div class="line">[Wednesday 23 February 2011] [04:57:38] &lt;pieterh&gt;     we can try to get them into rc2, np</div>
<div class="line">[Wednesday 23 February 2011] [04:57:44] &lt;mikko&gt;       ok cool</div>
<div class="line">[Wednesday 23 February 2011] [04:58:04] &lt;pieterh&gt;     i&#8217;m aiming at three releases, so stable after rc2, depending on how many issues we have</div>
<div class="line">[Wednesday 23 February 2011] [04:58:24] &lt;mikko&gt;       people are gonna test it when it&#8217;s stable anyway</div>
<div class="line">[Wednesday 23 February 2011] [04:58:49] &lt;pieterh&gt;     you think people won&#8217;t use an rc?</div>
<div class="line">[Wednesday 23 February 2011] [04:59:20] &lt;mikko&gt;       well, the large majority will only jump ship when it&#8217;s stable</div>
<div class="line">[Wednesday 23 February 2011] [04:59:29] &lt;pieterh&gt;     we&#8217;ll see, if no-one reports issues on the rcs then next time we can lie and just push straight from git master to stable</div>
<div class="line">[Wednesday 23 February 2011] [04:59:44] &lt;pieterh&gt;     and then continue with service packs... :-)</div>
<div class="line">[Wednesday 23 February 2011] [05:00:11] &lt;mikko&gt;       paid-for service packs</div>
<div class="line">[Wednesday 23 February 2011] [05:00:16] &lt;mikko&gt;       like windows back in the day</div>
<div class="line">[Wednesday 23 February 2011] [05:01:09] &lt;<a href="#id1503"><span class="problematic" id="id1504">sustrik_</span></a>&gt;    pieterh: just keep on incrementing the third version number</div>
<div class="line">[Wednesday 23 February 2011] [05:01:14] &lt;<a href="#id1505"><span class="problematic" id="id1506">sustrik_</span></a>&gt;    no need for dourth one</div>
<div class="line">[Wednesday 23 February 2011] [05:01:18] &lt;<a href="#id1507"><span class="problematic" id="id1508">sustrik_</span></a>&gt;    fourth</div>
<div class="line">[Wednesday 23 February 2011] [05:01:39] &lt;pieterh&gt;     <a href="#id1509"><span class="problematic" id="id1510">sustrik_</span></a>: yes, that&#8217;s always the case but the problem is the &#8216;beta&#8217; vs. &#8216;stable&#8217; terminology</div>
<div class="line">[Wednesday 23 February 2011] [05:01:43] &lt;<a href="#id1511"><span class="problematic" id="id1512">sustrik_</span></a>&gt;    a</div>
<div class="line">[Wednesday 23 February 2011] [05:01:45] &lt;<a href="#id1513"><span class="problematic" id="id1514">sustrik_</span></a>&gt;    ok</div>
<div class="line">[Wednesday 23 February 2011] [05:01:54] &lt;pieterh&gt;     we need a finer, more precise terminology</div>
<div class="line">[Wednesday 23 February 2011] [05:02:10] &lt;pieterh&gt;     in fact there are three levels afaics</div>
<div class="line">[Wednesday 23 February 2011] [05:02:23] &lt;pieterh&gt;     ABI version, package/software version, stability level</div>
<div class="line">[Wednesday 23 February 2011] [05:02:46] &lt;<a href="#id1515"><span class="problematic" id="id1516">sustrik_</span></a>&gt;    the stability level is pretty informal concept</div>
<div class="line">[Wednesday 23 February 2011] [05:03:03] &lt;pieterh&gt;     yet it&#8217;s the most critical for users</div>
<div class="line">[Wednesday 23 February 2011] [05:03:07] &lt;<a href="#id1517"><span class="problematic" id="id1518">sustrik_</span></a>&gt;    one man&#8217;s beta is another man&#8217;s stable</div>
<div class="line">[Wednesday 23 February 2011] [05:03:10] &lt;mikko&gt;       patch level some say</div>
<div class="line">[Wednesday 23 February 2011] [05:03:24] &lt;pieterh&gt;     no, it&#8217;s a statement of collective confidence</div>
<div class="line">[Wednesday 23 February 2011] [05:03:32] &lt;pieterh&gt;     &#8220;you can trust this for production&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [05:03:42] &lt;pieterh&gt;     &#8220;we recommend you use this for new projects&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [05:03:55] &lt;pieterh&gt;     &#8220;this version is boring and old but very well known&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [05:03:57] &lt;pieterh&gt;     etc.</div>
<div class="line">[Wednesday 23 February 2011] [05:04:00] &lt;mikko&gt;       <a class="reference external" href="http://apr.apache.org/versioning.html">http://apr.apache.org/versioning.html</a></div>
<div class="line">[Wednesday 23 February 2011] [05:04:28] &lt;pieterh&gt;     mikko: APR has been &#8220;boring and old and very well known&#8221; since 1999</div>
<div class="line">[Wednesday 23 February 2011] [05:04:58] &lt;pieterh&gt;     ok, I&#8217;ll make it up as I go along and if anyone dislikes my terminology, just shout</div>
<div class="line">[Wednesday 23 February 2011] [05:05:55] &lt;mikko&gt;       <a href="#id1519"><span class="problematic" id="id1520">sustrik_</span></a>: is there a plan to merge zmq devices into one binary?</div>
<div class="line">[Wednesday 23 February 2011] [05:06:12] &lt;pieterh&gt;     mikko: I&#8217;d like to remove device main programs from the core</div>
<div class="line">[Wednesday 23 February 2011] [05:06:17] &lt;<a href="#id1521"><span class="problematic" id="id1522">sustrik_</span></a>&gt;    there&#8217;s a plan to drop the devices altogether</div>
<div class="line">[Wednesday 23 February 2011] [05:06:32] &lt;pieterh&gt;     I already did this in 2.0.7 or so but it was rolled back</div>
<div class="line">[Wednesday 23 February 2011] [05:06:35] &lt;<a href="#id1523"><span class="problematic" id="id1524">sustrik_</span></a>&gt;    yeah, but can&#8217;t do that till 3.0</div>
<div class="line">[Wednesday 23 February 2011] [05:06:47] &lt;pieterh&gt;     <a href="#id1525"><span class="problematic" id="id1526">sustrik_</span></a>: why not? it&#8217;s not an API issue</div>
<div class="line">[Wednesday 23 February 2011] [05:06:56] &lt;pieterh&gt;     the <em>main</em> programs, not the zmq_devices() function</div>
<div class="line">[Wednesday 23 February 2011] [05:06:57] &lt;<a href="#id1527"><span class="problematic" id="id1528">sustrik_</span></a>&gt;    it&#8217;s a backward comaptibility issue</div>
<div class="line">[Wednesday 23 February 2011] [05:07:25] &lt;pieterh&gt;     <a href="#id1529"><span class="problematic" id="id1530">sustrik_</span></a>: how?</div>
<div class="line">[Wednesday 23 February 2011] [05:07:49] &lt;<a href="#id1531"><span class="problematic" id="id1532">sustrik_</span></a>&gt;    you install a new version and suddenly the devices you were using are no longer there</div>
<div class="line">[Wednesday 23 February 2011] [05:07:52] &lt;pieterh&gt;     the device main programs are not even documented, nor finished, nor really usable</div>
<div class="line">[Wednesday 23 February 2011] [05:08:03] &lt;pieterh&gt;     no configuration, no command line control, nothing</div>
<div class="line">[Wednesday 23 February 2011] [05:08:12] &lt;mikko&gt;       they have xml config</div>
<div class="line">[Wednesday 23 February 2011] [05:08:25] &lt;pieterh&gt;     sorry, yes, they do</div>
<div class="line">[Wednesday 23 February 2011] [05:08:35] &lt;pieterh&gt;     I&#8217;d like to move them out of core ASAP</div>
<div class="line">[Wednesday 23 February 2011] [05:08:39] &lt;<a href="#id1533"><span class="problematic" id="id1534">sustrik_</span></a>&gt;    i&#8217;ve promised to keep backwards compatibility till next major version</div>
<div class="line">[Wednesday 23 February 2011] [05:08:46] &lt;<a href="#id1535"><span class="problematic" id="id1536">sustrik_</span></a>&gt;    and i&#8217;ll keep the promise</div>
<div class="line">[Wednesday 23 February 2011] [05:08:53] &lt;pieterh&gt;     <a href="#id1537"><span class="problematic" id="id1538">sustrik_</span></a>: it&#8217;s for APIs, not these addons</div>
<div class="line">[Wednesday 23 February 2011] [05:09:00] &lt;pieterh&gt;     that&#8217;s what it says in the contract</div>
<div class="line">[Wednesday 23 February 2011] [05:09:15]        * pieterh goes to check the contract</div>
<div class="line">[Wednesday 23 February 2011] [05:09:38] &lt;pieterh&gt;     &#8220;Updates don&#8217;t change API, ABI, wire protocol or semantics.&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [05:09:44] &lt;pieterh&gt;     it&#8217;s quite explicit</div>
<div class="line">[Wednesday 23 February 2011] [05:10:00] &lt;pieterh&gt;     Plus, &#8220;New minor version allows for new functionality (i.e. new APIs), slight changes to the semantics etc.&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [05:10:22] &lt;<a href="#id1539"><span class="problematic" id="id1540">sustrik_</span></a>&gt;    exactly</div>
<div class="line">[Wednesday 23 February 2011] [05:10:31] &lt;<a href="#id1541"><span class="problematic" id="id1542">sustrik_</span></a>&gt;    command lines are part of the API</div>
<div class="line">[Wednesday 23 February 2011] [05:10:38] &lt;pieterh&gt;     not unless they are documented</div>
<div class="line">[Wednesday 23 February 2011] [05:10:43] &lt;pieterh&gt;     the devices are not documented</div>
<div class="line">[Wednesday 23 February 2011] [05:10:43] &lt;<a href="#id1543"><span class="problematic" id="id1544">sustrik_</span></a>&gt;    :)</div>
<div class="line">[Wednesday 23 February 2011] [05:10:47] &lt;pieterh&gt;     I rest my case, m&#8217;lod</div>
<div class="line">[Wednesday 23 February 2011] [05:10:56] &lt;pieterh&gt;     further... as long as they sit in core, they are not improved</div>
<div class="line">[Wednesday 23 February 2011] [05:11:15] &lt;<a href="#id1545"><span class="problematic" id="id1546">sustrik_</span></a>&gt;    yes, they are freezed</div>
<div class="line">[Wednesday 23 February 2011] [05:11:16] &lt;pieterh&gt;     I have far superior code ready</div>
<div class="line">[Wednesday 23 February 2011] [05:11:24] &lt;<a href="#id1547"><span class="problematic" id="id1548">sustrik_</span></a>&gt;    marked to be removed in 3.0</div>
<div class="line">[Wednesday 23 February 2011] [05:11:28] &lt;pieterh&gt;     bleh</div>
<div class="line">[Wednesday 23 February 2011] [05:11:35] &lt;<a href="#id1549"><span class="problematic" id="id1550">sustrik_</span></a>&gt;    backward compatibility</div>
<div class="line">[Wednesday 23 February 2011] [05:11:40] &lt;<a href="#id1551"><span class="problematic" id="id1552">sustrik_</span></a>&gt;    shrug</div>
<div class="line">[Wednesday 23 February 2011] [05:11:49] &lt;pieterh&gt;     I bet you a beer: ask on zeromq-dev if anyone objects to moving these today to another repo</div>
<div class="line">[Wednesday 23 February 2011] [05:11:57] &lt;pieterh&gt;     each objection, 1 beer I owe you</div>
<div class="line">[Wednesday 23 February 2011] [05:12:10] &lt;<a href="#id1553"><span class="problematic" id="id1554">sustrik_</span></a>&gt;    it&#8217;s not about concensus, it&#8217;s about contract</div>
<div class="line">[Wednesday 23 February 2011] [05:12:32] &lt;<a href="#id1555"><span class="problematic" id="id1556">sustrik_</span></a>&gt;    so that even those that are not on the ml have clear guarantees</div>
<div class="line">[Wednesday 23 February 2011] [05:12:34] &lt;pieterh&gt;     so point me to the contract that covers these device main programs</div>
<div class="line">[Wednesday 23 February 2011] [05:12:35] &lt;<a href="#id1557"><span class="problematic" id="id1558">sustrik_</span></a>&gt;    about upgrading</div>
<div class="line">[Wednesday 23 February 2011] [05:12:46] &lt;pieterh&gt;     either documentation</div>
<div class="line">[Wednesday 23 February 2011] [05:12:51] &lt;pieterh&gt;     or explicit contract...</div>
<div class="line">[Wednesday 23 February 2011] [05:12:52] &lt;pieterh&gt;     where?</div>
<div class="line">[Wednesday 23 February 2011] [05:13:05] &lt;<a href="#id1559"><span class="problematic" id="id1560">sustrik_</span></a>&gt;    &#8220;Updates don&#8217;t change API, ABI, wire protocol or semantics&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [05:13:12] &lt;pieterh&gt;     SYNOPSIS</div>
<div class="line">[Wednesday 23 February 2011] [05:13:12] &lt;pieterh&gt;            To be written.</div>
<div class="line">[Wednesday 23 February 2011] [05:13:12] &lt;pieterh&gt;     DESCRIPTION</div>
<div class="line">[Wednesday 23 February 2011] [05:13:12] &lt;pieterh&gt;            To be written.</div>
<div class="line">[Wednesday 23 February 2011] [05:13:12] &lt;pieterh&gt;     OPTIONS</div>
<div class="line">[Wednesday 23 February 2011] [05:13:13] &lt;pieterh&gt;            To be written.</div>
<div class="line">[Wednesday 23 February 2011] [05:13:28] &lt;pieterh&gt;     if you define undocumented command lines as &#8220;API&#8221;... well...</div>
<div class="line">[Wednesday 23 February 2011] [05:13:32] &lt;pieterh&gt;     fine</div>
<div class="line">[Wednesday 23 February 2011] [05:13:41] &lt;<a href="#id1561"><span class="problematic" id="id1562">sustrik_</span></a>&gt;    application interface</div>
<div class="line">[Wednesday 23 February 2011] [05:13:46] &lt;<a href="#id1563"><span class="problematic" id="id1564">sustrik_</span></a>&gt;    that&#8217;s it</div>
<div class="line">[Wednesday 23 February 2011] [05:14:02] &lt;pieterh&gt;     &#8220;To be written&#8221; is not an API contract</div>
<div class="line">[Wednesday 23 February 2011] [05:14:05] &lt;pieterh&gt;     sorry, but it&#8217;s not</div>
<div class="line">[Wednesday 23 February 2011] [05:14:10] &lt;pieterh&gt;     &#8220;read the code&#8221; is not a contract</div>
<div class="line">[Wednesday 23 February 2011] [05:14:15] &lt;<a href="#id1565"><span class="problematic" id="id1566">sustrik_</span></a>&gt;    the API itself is the contract</div>
<div class="line">[Wednesday 23 February 2011] [05:14:17] &lt;pieterh&gt;     documentation is the very basis of a contract</div>
<div class="line">[Wednesday 23 February 2011] [05:14:31] &lt;pieterh&gt;     you have used that argument yourself on multiple occasions</div>
<div class="line">[Wednesday 23 February 2011] [05:14:43] &lt;pieterh&gt;     &#8220;I&#8217;ve deliberately not documented it so that I can change or remove it&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [05:14:50] &lt;pieterh&gt;     well, whatever</div>
<div class="line">[Wednesday 23 February 2011] [05:14:51] &lt;<a href="#id1567"><span class="problematic" id="id1568">sustrik_</span></a>&gt;    yes, but then i&#8217;ve got yelled on on several occassions</div>
<div class="line">[Wednesday 23 February 2011] [05:15:08] &lt;<a href="#id1569"><span class="problematic" id="id1570">sustrik_</span></a>&gt;    so i&#8217;ve written the contract</div>
<div class="line">[Wednesday 23 February 2011] [05:15:23] &lt;pieterh&gt;     shrug</div>
<div class="line">[Wednesday 23 February 2011] [05:15:38] &lt;<a href="#id1571"><span class="problematic" id="id1572">sustrik_</span></a>&gt;    let me make the cotract more precise about the guarantees...</div>
<div class="line">[Wednesday 23 February 2011] [05:16:18] &lt;mikko&gt;       i think martin has a good point here</div>
<div class="line">[Wednesday 23 February 2011] [05:16:29] &lt;mikko&gt;       this might break for example possible automated builds people are using</div>
<div class="line">[Wednesday 23 February 2011] [05:16:30] &lt;mikko&gt;       etc</div>
<div class="line">[Wednesday 23 February 2011] [05:16:36] &lt;pieterh&gt;     basically, by insisting that these addons remain in core, you&#8217;re throttling the use of devices</div>
<div class="line">[Wednesday 23 February 2011] [05:16:47] &lt;pieterh&gt;     mikko: it&#8217;s for a 2.2 release at best</div>
<div class="line">[Wednesday 23 February 2011] [05:16:55] &lt;<a href="#id1573"><span class="problematic" id="id1574">sustrik_</span></a>&gt;    wait a sec</div>
<div class="line">[Wednesday 23 February 2011] [05:17:03] &lt;<a href="#id1575"><span class="problematic" id="id1576">sustrik_</span></a>&gt;    why throttling?</div>
<div class="line">[Wednesday 23 February 2011] [05:17:04] &lt;mikko&gt;       pieterh: what do you mean by that?</div>
<div class="line">[Wednesday 23 February 2011] [05:17:14] &lt;pieterh&gt;     well, look at the code, and docs</div>
<div class="line">[Wednesday 23 February 2011] [05:17:37] &lt;pieterh&gt;     compare to...https://github.com/zeromq/zfl/tree/master/examples</div>
<div class="line">[Wednesday 23 February 2011] [05:17:41] &lt;mikko&gt;       can we document that these devices are provided as an example? and setup a separate wiki page for devices people create?</div>
<div class="line">[Wednesday 23 February 2011] [05:17:42] &lt;<a href="#id1577"><span class="problematic" id="id1578">sustrik_</span></a>&gt;    people should write their own devices</div>
<div class="line">[Wednesday 23 February 2011] [05:17:45] &lt;pieterh&gt;     mikko asks a question that was resolved ages ago</div>
<div class="line">[Wednesday 23 February 2011] [05:17:54] &lt;<a href="#id1579"><span class="problematic" id="id1580">sustrik_</span></a>&gt;    or you can provide them as a library</div>
<div class="line">[Wednesday 23 February 2011] [05:18:02] &lt;pieterh&gt;     done that, done that</div>
<div class="line">[Wednesday 23 February 2011] [05:18:10] &lt;<a href="#id1581"><span class="problematic" id="id1582">sustrik_</span></a>&gt;    what&#8217;s the problem then?</div>
<div class="line">[Wednesday 23 February 2011] [05:18:17] &lt;pieterh&gt;     but as long as these remain in zeromq2, people will assume those are the only official devices</div>
<div class="line">[Wednesday 23 February 2011] [05:18:20] &lt;pieterh&gt;     and they are not maintained</div>
<div class="line">[Wednesday 23 February 2011] [05:18:23] &lt;pieterh&gt;     and they are not documented</div>
<div class="line">[Wednesday 23 February 2011] [05:18:27] &lt;<a href="#id1583"><span class="problematic" id="id1584">sustrik_</span></a>&gt;    ok, let me fix the docs</div>
<div class="line">[Wednesday 23 February 2011] [05:18:28] &lt;pieterh&gt;     and they are rubbish</div>
<div class="line">[Wednesday 23 February 2011] [05:18:37] &lt;pieterh&gt;     sorry, but XML dependencies in 0MQ core is rubbish</div>
<div class="line">[Wednesday 23 February 2011] [05:18:40] &lt;<a href="#id1585"><span class="problematic" id="id1586">sustrik_</span></a>&gt;    it&#8217;ll say: obsolete, marked for removal in 3.0</div>
<div class="line">[Wednesday 23 February 2011] [05:18:45] &lt;mikko&gt;       hi Steve-o</div>
<div class="line">[Wednesday 23 February 2011] [05:18:55] &lt;Steve-o&gt;     hi mikko</div>
<div class="line">[Wednesday 23 February 2011] [05:18:58] &lt;mikko&gt;       Steve-o: minor build problem: solaris studio 12.2 + autoconf</div>
<div class="line">[Wednesday 23 February 2011] [05:19:09] &lt;mikko&gt;       i don&#8217;t actually know what the error means</div>
<div class="line">[Wednesday 23 February 2011] [05:19:11] &lt;Steve-o&gt;     wondered what changes I need for Solaris</div>
<div class="line">[Wednesday 23 February 2011] [05:19:17] &lt;mikko&gt;       this is on linux</div>
<div class="line">[Wednesday 23 February 2011] [05:19:22] &lt;Steve-o&gt;     I know the ticket locks will be broken</div>
<div class="line">[Wednesday 23 February 2011] [05:19:37] &lt;Steve-o&gt;     the concept doesn&#8217;t work on SPARC processors</div>
<div class="line">[Wednesday 23 February 2011] [05:19:57] &lt;mikko&gt;       this is x86 linux + solaris studio 12.2</div>
<div class="line">[Wednesday 23 February 2011] [05:20:08] &lt;Steve-o&gt;     oracle studio I think its called now?</div>
<div class="line">[Wednesday 23 February 2011] [05:20:16] &lt;Steve-o&gt;     or oracle solaris studio</div>
<div class="line">[Wednesday 23 February 2011] [05:20:18] &lt;mikko&gt;       hehe</div>
<div class="line">[Wednesday 23 February 2011] [05:20:20] &lt;mikko&gt;       possibly</div>
<div class="line">[Wednesday 23 February 2011] [05:20:36] &lt;Steve-o&gt;     what&#8217;s the error?  I&#8217;ll have the machines up tomorrow</div>
<div class="line">[Wednesday 23 February 2011] [05:20:38] &lt;<a href="#id1587"><span class="problematic" id="id1588">sustrik_</span></a>&gt;    Steve-o, mikko: can you possibly check whether steve&#8217;s recent update solved the bool issue with MSVC?</div>
<div class="line">[Wednesday 23 February 2011] [05:20:43] &lt;Steve-o&gt;     fixed OSX today</div>
<div class="line">[Wednesday 23 February 2011] [05:20:43] &lt;mikko&gt;       Steve-o: give me a sec</div>
<div class="line">[Wednesday 23 February 2011] [05:20:57] &lt;mikko&gt;       <a href="#id1589"><span class="problematic" id="id1590">sustrik_</span></a>: the daily build seems ok</div>
<div class="line">[Wednesday 23 February 2011] [05:21:34] &lt;<a href="#id1591"><span class="problematic" id="id1592">sustrik_</span></a>&gt;    so you are building from opepgm head?</div>
<div class="line">[Wednesday 23 February 2011] [05:21:46] &lt;<a href="#id1593"><span class="problematic" id="id1594">sustrik_</span></a>&gt;    rather then embeedded openpgm in 0mq?</div>
<div class="line">[Wednesday 23 February 2011] [05:21:47] &lt;mikko&gt;       Steve-o: <a class="reference external" href="https://gist.github.com/edeacc2d3214fc6b11df">https://gist.github.com/edeacc2d3214fc6b11df</a></div>
<div class="line">[Wednesday 23 February 2011] [05:22:14] &lt;mikko&gt;       <a href="#id1595"><span class="problematic" id="id1596">sustrik_</span></a>: not quite</div>
<div class="line">[Wednesday 23 February 2011] [05:22:31] &lt;mikko&gt;       <a href="#id1597"><span class="problematic" id="id1598">sustrik_</span></a>: it&#8217;s not against head but it&#8217;s using openpgm different than one shipped with zeromq</div>
<div class="line">[Wednesday 23 February 2011] [05:22:35] &lt;<a href="#id1599"><span class="problematic" id="id1600">sustrik_</span></a>&gt;    i haven&#8217;t updated the embedded patckage yet...</div>
<div class="line">[Wednesday 23 February 2011] [05:22:40] &lt;<a href="#id1601"><span class="problematic" id="id1602">sustrik_</span></a>&gt;    ah</div>
<div class="line">[Wednesday 23 February 2011] [05:22:49] &lt;<a href="#id1603"><span class="problematic" id="id1604">sustrik_</span></a>&gt;    so should i upgrade?</div>
<div class="line">[Wednesday 23 February 2011] [05:22:51] &lt;mikko&gt;       MSVC is difficult about this</div>
<div class="line">[Wednesday 23 February 2011] [05:23:12] &lt;mikko&gt;       <a href="#id1605"><span class="problematic" id="id1606">sustrik_</span></a>: i think we should update as soon as we can iron out the autoconf build to be stable enough</div>
<div class="line">[Wednesday 23 February 2011] [05:23:16] &lt;mikko&gt;       and do it in same go</div>
<div class="line">[Wednesday 23 February 2011] [05:23:21] &lt;<a href="#id1607"><span class="problematic" id="id1608">sustrik_</span></a>&gt;    ok, good</div>
<div class="line">[Wednesday 23 February 2011] [05:23:24] &lt;<a href="#id1609"><span class="problematic" id="id1610">sustrik_</span></a>&gt;    i&#8217;ll wait then</div>
<div class="line">[Wednesday 23 February 2011] [05:23:29] &lt;mikko&gt;       MSVC people will most likely build using openpgm installer anyway</div>
<div class="line">[Wednesday 23 February 2011] [05:23:32] &lt;mikko&gt;       but</div>
<div class="line">[Wednesday 23 February 2011] [05:23:41] &lt;mikko&gt;       i havent updated openpgm on that box for a while</div>
<div class="line">[Wednesday 23 February 2011] [05:24:00] &lt;<a href="#id1611"><span class="problematic" id="id1612">sustrik_</span></a>&gt;    the build used to fail few days ago</div>
<div class="line">[Wednesday 23 February 2011] [05:24:05] &lt;<a href="#id1613"><span class="problematic" id="id1614">sustrik_</span></a>&gt;    now it builds</div>
<div class="line">[Wednesday 23 February 2011] [05:24:13] &lt;<a href="#id1615"><span class="problematic" id="id1616">sustrik_</span></a>&gt;    something must have changed</div>
<div class="line">[Wednesday 23 February 2011] [05:24:28] &lt;mikko&gt;       hmm</div>
<div class="line">[Wednesday 23 February 2011] [05:24:42] &lt;mikko&gt;       i wonder if the MSVC is smart enough to do incremental build properly</div>
<div class="line">[Wednesday 23 February 2011] [05:24:45] &lt;<a href="#id1617"><span class="problematic" id="id1618">sustrik_</span></a>&gt;    last failed build fed 22nd, 5 am</div>
<div class="line">[Wednesday 23 February 2011] [05:24:57] &lt;mikko&gt;       as it seems here: <a class="reference external" href="https://github.com/zeromq/zeromq2/commit/43e8868875e1d5287979e5b9060a9b16be45cc79">https://github.com/zeromq/zeromq2/commit/43e8868875e1d5287979e5b9060a9b16be45cc79</a></div>
<div class="line">[Wednesday 23 February 2011] [05:25:06] &lt;mikko&gt;       unrelated changes but it touched the files</div>
<div class="line">[Wednesday 23 February 2011] [05:25:58] &lt;<a href="#id1619"><span class="problematic" id="id1620">sustrik_</span></a>&gt;    could that be the reason?</div>
<div class="line">[Wednesday 23 February 2011] [05:26:02] &lt;<a href="#id1621"><span class="problematic" id="id1622">sustrik_</span></a>&gt;    it would make sense then</div>
<div class="line">[Wednesday 23 February 2011] [05:26:06] &lt;Steve-o&gt;     mikko: OK its a typo, should be lock; not lockl;</div>
<div class="line">[Wednesday 23 February 2011] [05:26:24] &lt;Steve-o&gt;     atomic.h line 59</div>
<div class="line">[Wednesday 23 February 2011] [05:27:00] &lt;mikko&gt;       <a href="#id1623"><span class="problematic" id="id1624">sustrik_</span></a>: i&#8217;ll make sure that msvc build wipes out all files and builds clean every time</div>
<div class="line">[Wednesday 23 February 2011] [05:27:55] &lt;<a href="#id1625"><span class="problematic" id="id1626">sustrik_</span></a>&gt;    strange then</div>
<div class="line">[Wednesday 23 February 2011] [05:28:03] &lt;<a href="#id1627"><span class="problematic" id="id1628">sustrik_</span></a>&gt;    anyway, it builds now</div>
<div class="line">[Wednesday 23 February 2011] [05:28:12] &lt;<a href="#id1629"><span class="problematic" id="id1630">sustrik_</span></a>&gt;    so let&#8217;s not worry about it</div>
<div class="line">[Wednesday 23 February 2011] [05:31:15] &lt;Steve-o&gt;     mikko: updated trunk with fix</div>
<div class="line">[Wednesday 23 February 2011] [05:31:35] &lt;mikko&gt;       Steve-o: thanks</div>
<div class="line">[Wednesday 23 February 2011] [05:31:50] &lt;mikko&gt;       Steve-o: i&#8217;ll test x86 solaris soon</div>
<div class="line">[Wednesday 23 February 2011] [05:31:56] &lt;Steve-o&gt;     Is there a simply autoconf to detect whether non-32bit aligned pointers work?</div>
<div class="line">[Wednesday 23 February 2011] [05:31:58] &lt;mikko&gt;       Steve-o: <a class="reference external" href="https://build.zero.mq/job/ZeroMQ2-core-master_MSVC-win7/194/console">https://build.zero.mq/job/ZeroMQ2-core-master_MSVC-win7/194/console</a></div>
<div class="line">[Wednesday 23 February 2011] [05:32:19] &lt;mikko&gt;       Steve-o: AC_TRY_RUN maybe</div>
<div class="line">[Wednesday 23 February 2011] [05:32:41] &lt;Steve-o&gt;     Windows has ticket locks enabled, but only in CMake not in Autoconf,</div>
<div class="line">[Wednesday 23 February 2011] [05:33:07] &lt;mikko&gt;       Steve-o: building with /t:rebuild now</div>
<div class="line">[Wednesday 23 February 2011] [05:33:10] &lt;mikko&gt;       ermm, <a href="#id1631"><span class="problematic" id="id1632">sustrik_</span></a></div>
<div class="line">[Wednesday 23 February 2011] [05:36:12] &lt;mikko&gt;       <a href="#id1633"><span class="problematic" id="id1634">sustrik_</span></a>: <a class="reference external" href="https://build.zero.mq/job/ZeroMQ2-core-master_MSVC-win7/194/console">https://build.zero.mq/job/ZeroMQ2-core-master_MSVC-win7/194/console</a></div>
<div class="line">[Wednesday 23 February 2011] [05:36:14] &lt;mikko&gt;       builds</div>
<div class="line">[Wednesday 23 February 2011] [05:36:50] &lt;<a href="#id1635"><span class="problematic" id="id1636">sustrik_</span></a>&gt;    yup</div>
<div class="line">[Wednesday 23 February 2011] [05:37:12] &lt;<a href="#id1637"><span class="problematic" id="id1638">sustrik_</span></a>&gt;    i was just puzzled how it happened to start building given there was no related change to the code</div>
<div class="line">[Wednesday 23 February 2011] [05:37:27] &lt;<a href="#id1639"><span class="problematic" id="id1640">sustrik_</span></a>&gt;    anyway, not an issue</div>
<div class="line">[Wednesday 23 February 2011] [05:37:30] &lt;mikko&gt;       i think msbuild is not very smart about incremental builds</div>
<div class="line">[Wednesday 23 February 2011] [05:37:36] &lt;<a href="#id1641"><span class="problematic" id="id1642">sustrik_</span></a>&gt;    ack</div>
<div class="line">[Wednesday 23 February 2011] [05:37:37] &lt;mikko&gt;       it now does a clean build each time</div>
<div class="line">[Wednesday 23 February 2011] [05:38:13] &lt;mikko&gt;       Steve-o: builds clean now</div>
<div class="line">[Wednesday 23 February 2011] [05:39:08] &lt;ianbarber&gt;   Steve-o: while you&#8217;re here - you know that issue I sent you some code on? Dr Bob has hit it on the mailing list as well.</div>
<div class="line">[Wednesday 23 February 2011] [05:39:31] &lt;ianbarber&gt;   It looks like it occurs because 0MQ is erroneously setting PGM_SEND_ONLY on both</div>
<div class="line">[Wednesday 23 February 2011] [05:40:01] &lt;Steve-o&gt;     ianbarber: that would make sense consdering the error message</div>
<div class="line">[Wednesday 23 February 2011] [05:40:05] &lt;ianbarber&gt;   but I&#8217;m not sure if there anything that needs to be set instead of that</div>
<div class="line">[Wednesday 23 February 2011] [05:40:28] &lt;<a href="#id1643"><span class="problematic" id="id1644">sustrik_</span></a>&gt;    ianbarber: i think it has to do with recent changes to 0mq codebase</div>
<div class="line">[Wednesday 23 February 2011] [05:40:33] &lt;<a href="#id1645"><span class="problematic" id="id1646">sustrik_</span></a>&gt;    let me check</div>
<div class="line">[Wednesday 23 February 2011] [05:40:56] &lt;Steve-o&gt;     the code is still on my todo list</div>
<div class="line">[Wednesday 23 February 2011] [05:41:04] &lt;ianbarber&gt;   <a href="#id1647"><span class="problematic" id="id1648">sustrik_</span></a>: i think what&#8217;s needed is to use something other than requires_in and requires_out in pgm_socket</div>
<div class="line">[Wednesday 23 February 2011] [05:41:17] &lt;<a href="#id1649"><span class="problematic" id="id1650">sustrik_</span></a>&gt;    exactly</div>
<div class="line">[Wednesday 23 February 2011] [05:41:47] &lt;<a href="#id1651"><span class="problematic" id="id1652">sustrik_</span></a>&gt;    it should check socket type instead</div>
<div class="line">[Wednesday 23 February 2011] [05:44:27] &lt;ianbarber&gt;   just trying if (options.type == ZMQ_XPUB || options.type == ZMQ_PUB) {</div>
<div class="line">[Wednesday 23 February 2011] [05:44:37] &lt;ianbarber&gt;   in connect_session</div>
<div class="line">[Wednesday 23 February 2011] [05:46:03] &lt;sustrik&gt;     just did the same myself :)</div>
<div class="line">[Wednesday 23 February 2011] [05:46:08] &lt;sustrik&gt;     but i cannot test it</div>
<div class="line">[Wednesday 23 February 2011] [05:46:14] &lt;sustrik&gt;     so let me know how it goes</div>
<div class="line">[Wednesday 23 February 2011] [05:46:26] &lt;ianbarber&gt;   will do</div>
<div class="line">[Wednesday 23 February 2011] [05:46:51] &lt;ianbarber&gt;   my little macbook air take a while to run make :)</div>
<div class="line">[Wednesday 23 February 2011] [05:48:16] &lt;ianbarber&gt;   seems to be working!</div>
<div class="line">[Wednesday 23 February 2011] [05:48:28] &lt;ianbarber&gt;   Steve-o: i am still seeing quite a few of these: Trace: Recv again on not-full</div>
<div class="line">[Wednesday 23 February 2011] [05:48:28] &lt;ianbarber&gt;   Trace: Discarded packet for muted receiver.</div>
<div class="line">[Wednesday 23 February 2011] [05:48:40] &lt;ianbarber&gt;   but that may be because i have both bits running on one box at the moment</div>
<div class="line">[Wednesday 23 February 2011] [05:48:58] &lt;Steve-o&gt;     that will happen with multicast loop</div>
<div class="line">[Wednesday 23 February 2011] [05:49:01] &lt;ianbarber&gt;   cool</div>
<div class="line">[Wednesday 23 February 2011] [05:49:07] &lt;sustrik&gt;     ianbarber: ok, so let me apply the patch</div>
<div class="line">[Wednesday 23 February 2011] [05:49:53] &lt;Steve-o&gt;     Linux routing for multicast is a bit surprising</div>
<div class="line">[Wednesday 23 February 2011] [05:50:34] &lt;CIA-21&gt;      zeromq2: 03Martin Sustrik 07master * r29e0e7d 10/ src/connect_session.cpp :</div>
<div class="line">[Wednesday 23 February 2011] [05:50:34] &lt;CIA-21&gt;      zeromq2: Incorrect PGM sender/receiver creation fixed</div>
<div class="line">[Wednesday 23 February 2011] [05:50:34] &lt;CIA-21&gt;      zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/gaABJu">http://bit.ly/gaABJu</a></div>
<div class="line">[Wednesday 23 February 2011] [05:51:08] &lt;ianbarber&gt;   lovely, thanks sustrik &amp; Steve-o !</div>
<div class="line">[Wednesday 23 February 2011] [05:51:37] &lt;pieterh&gt;     mikko: I&#8217;ve updated apisite to handle the new 2.1 repo structure</div>
<div class="line">[Wednesday 23 February 2011] [05:52:01] &lt;sustrik&gt;     pieterh: first patch to backport!</div>
<div class="line">[Wednesday 23 February 2011] [05:52:08] &lt;pieterh&gt;     hehe</div>
<div class="line">[Wednesday 23 February 2011] [05:52:08] &lt;sustrik&gt;     how do i send a pull request?</div>
<div class="line">[Wednesday 23 February 2011] [05:52:11] &lt;pieterh&gt;     that was fast</div>
<div class="line">[Wednesday 23 February 2011] [05:52:52] &lt;pieterh&gt;     go to the zeromq2-1 repo and create a pull request interactively, I assume...</div>
<div class="line">[Wednesday 23 February 2011] [05:52:57] &lt;mikko&gt;       pieterh: do i need to change the daily builds?</div>
<div class="line">[Wednesday 23 February 2011] [05:53:18] &lt;pieterh&gt;     mikko, yes, there is a new repo at zeromq2-1 with a master branch</div>
<div class="line">[Wednesday 23 February 2011] [05:53:30] &lt;pieterh&gt;     you&#8217;re also building 2.0.10 I assume?</div>
<div class="line">[Wednesday 23 February 2011] [05:53:46] &lt;mikko&gt;       well, im building branches master and maint</div>
<div class="line">[Wednesday 23 February 2011] [05:53:50] &lt;pieterh&gt;     we&#8217;ll break that off into a separate zeromq2-0 repo once this works</div>
<div class="line">[Wednesday 23 February 2011] [05:53:59] &lt;pieterh&gt;     so it&#8217;ll be consistent</div>
<div class="line">[Wednesday 23 February 2011] [05:54:05] &lt;mikko&gt;       why do we use separate repos for this?</div>
<div class="line">[Wednesday 23 February 2011] [05:54:11] &lt;pieterh&gt;     ah, long discussion</div>
<div class="line">[Wednesday 23 February 2011] [05:54:20] &lt;pieterh&gt;     basically it&#8217;s the simplest for a safe division of labour</div>
<div class="line">[Wednesday 23 February 2011] [05:54:31] &lt;pieterh&gt;     we need more than master vs. maint</div>
<div class="line">[Wednesday 23 February 2011] [05:54:48] &lt;pieterh&gt;     we need at least three branches and there&#8217;s no way to do that in the current structure</div>
<div class="line">[Wednesday 23 February 2011] [05:55:05] &lt;pieterh&gt;     otherwise we have no way of maintaining both 2.0.10 and 2.1.1</div>
<div class="line">[Wednesday 23 February 2011] [05:55:13] &lt;pieterh&gt;     yet we have production users on both those</div>
<div class="line">[Wednesday 23 February 2011] [05:55:19] &lt;sustrik&gt;     pieterh: i can&#8217;t</div>
<div class="line">[Wednesday 23 February 2011] [05:55:37] &lt;sustrik&gt;     github doesn&#8217;t recognise your repo as a fork of zeromq2</div>
<div class="line">[Wednesday 23 February 2011] [05:55:49] &lt;sustrik&gt;     and thus doesn&#8217;t allow me send a pull request</div>
<div class="line">[Wednesday 23 February 2011] [05:55:55] &lt;pieterh&gt;     sustrik: ah github insanity</div>
<div class="line">[Wednesday 23 February 2011] [05:55:56] &lt;sustrik&gt;     check it out yourself</div>
<div class="line">[Wednesday 23 February 2011] [05:56:14] &lt;pieterh&gt;     does not allow a fork of a repo within the same organization!</div>
<div class="line">[Wednesday 23 February 2011] [05:56:27] &lt;pieterh&gt;     simply not allowed</div>
<div class="line">[Wednesday 23 February 2011] [05:56:46] &lt;ianbarber&gt;   you should be able to add the master as an upstream repo and pull commits from there manually i guess?</div>
<div class="line">[Wednesday 23 February 2011] [05:56:47] &lt;pieterh&gt;     and I think using a separate organization would be wrong</div>
<div class="line">[Wednesday 23 February 2011] [05:56:49] &lt;sustrik&gt;     why not create the fork under imatix then?</div>
<div class="line">[Wednesday 23 February 2011] [05:56:54] &lt;mikko&gt;       pieterh: i mean why didn&#8217;t you create new branches inside the same repo?</div>
<div class="line">[Wednesday 23 February 2011] [05:57:04] &lt;pieterh&gt;     mikko: old argument over branching in git repo</div>
<div class="line">[Wednesday 23 February 2011] [05:57:19] &lt;pieterh&gt;     the only resolution to that was to not touch each others&#8217; repos</div>
<div class="line">[Wednesday 23 February 2011] [05:57:35] &lt;pieterh&gt;     I&#8217;d have preferred one repo with X branches, one per release, that could be maintained</div>
<div class="line">[Wednesday 23 February 2011] [05:57:40] &lt;pieterh&gt;     I proposed this about six months ago</div>
<div class="line">[Wednesday 23 February 2011] [05:57:54] &lt;pieterh&gt;     and was quite loudly told to stfu, it&#8217;s not the git way</div>
<div class="line">[Wednesday 23 February 2011] [05:58:00] &lt;pieterh&gt;     so we ended up with master / maint</div>
<div class="line">[Wednesday 23 February 2011] [05:58:10] &lt;pieterh&gt;     but that does not let us maintain more than one stable release</div>
<div class="line">[Wednesday 23 February 2011] [05:58:26] &lt;pieterh&gt;     so we&#8217;re stuck between freezing 2.0.x or not stabilizing 2.1.x</div>
<div class="line">[Wednesday 23 February 2011] [05:58:32] &lt;pieterh&gt;     hence the current solution</div>
<div class="line">[Wednesday 23 February 2011] [05:59:00] &lt;pieterh&gt;     sustrik: yes, I can fork the repo in imatix but if it&#8217;s a fork IMO we have other issues</div>
<div class="line">[Wednesday 23 February 2011] [05:59:15] &lt;pieterh&gt;     forget pull requests then, it&#8217;s not the only option</div>
<div class="line">[Wednesday 23 February 2011] [05:59:31] &lt;pieterh&gt;     forking would mean I essentially track your master branch</div>
<div class="line">[Wednesday 23 February 2011] [05:59:36] &lt;pieterh&gt;     which is not what we want at all</div>
<div class="line">[Wednesday 23 February 2011] [05:59:42] &lt;mikko&gt;       the natural problem with this are the tools. not being able to switch between branches in one clone but rather the need to clone two repos</div>
<div class="line">[Wednesday 23 February 2011] [06:00:16] &lt;pieterh&gt;     mikko: I think the best answer here is that one repo should &#8216;belong&#8217; to as few people as possible</div>
<div class="line">[Wednesday 23 February 2011] [06:00:25] &lt;pieterh&gt;     and it should be up to those people how they work</div>
<div class="line">[Wednesday 23 February 2011] [06:00:31] &lt;pieterh&gt;     full freedom inside your own repo</div>
<div class="line">[Wednesday 23 February 2011] [06:00:34] &lt;sustrik&gt;     +1</div>
<div class="line">[Wednesday 23 February 2011] [06:00:37] &lt;pieterh&gt;     indeed</div>
<div class="line">[Wednesday 23 February 2011] [06:00:43] &lt;pieterh&gt;     sustrik and I agree violently on this</div>
<div class="line">[Wednesday 23 February 2011] [06:00:51] &lt;pieterh&gt;     it&#8217;s the only scalable approach we can see</div>
<div class="line">[Wednesday 23 February 2011] [06:01:09] &lt;pieterh&gt;     bitter experience tells us when we make a git structure complex, bad things happen</div>
<div class="line">[Wednesday 23 February 2011] [06:01:43] &lt;pieterh&gt;     sustrik: what I suggest are patches and issues, it&#8217;s very close to pull requests</div>
<div class="line">[Wednesday 23 February 2011] [06:01:56] &lt;pieterh&gt;     i.e. open an issue and copy/paste the patch</div>
<div class="line">[Wednesday 23 February 2011] [06:02:18] &lt;pieterh&gt;     alternatively I can pull commits from your repository if I know the commit number</div>
<div class="line">[Wednesday 23 February 2011] [06:02:25] &lt;pieterh&gt;     as ianbarber says</div>
<div class="line">[Wednesday 23 February 2011] [06:02:27] &lt;mikko&gt;       pieterh: i disagree with both of you biolently</div>
<div class="line">[Wednesday 23 February 2011] [06:02:31] &lt;pieterh&gt;     :-)</div>
<div class="line">[Wednesday 23 February 2011] [06:02:33] &lt;mikko&gt;       violently</div>
<div class="line">[Wednesday 23 February 2011] [06:02:40] &lt;pieterh&gt;     mikko: then you can go create your own repo and do it your way</div>
<div class="line">[Wednesday 23 February 2011] [06:02:43] &lt;mikko&gt;       you can organise your local development with git as you please</div>
<div class="line">[Wednesday 23 February 2011] [06:02:45] &lt;pieterh&gt;     that&#8217;s the beauty of this approach</div>
<div class="line">[Wednesday 23 February 2011] [06:02:52] &lt;mikko&gt;       have branches in a way you want</div>
<div class="line">[Wednesday 23 February 2011] [06:03:02] &lt;mikko&gt;       just making sure that release branches contain what they need to contain</div>
<div class="line">[Wednesday 23 February 2011] [06:03:45] &lt;pieterh&gt;     well, yes, except trying to make that work in the development git failed</div>
<div class="line">[Wednesday 23 February 2011] [06:03:52] &lt;mikko&gt;       and now we are creating issues and copy-pasting patches in to them?</div>
<div class="line">[Wednesday 23 February 2011] [06:03:54] &lt;sustrik&gt;     ok, i&#8217;ll send you commit numbers</div>
<div class="line">[Wednesday 23 February 2011] [06:04:10] &lt;pieterh&gt;     mikko: where were you when I was being assaulted for proposing release branches?</div>
<div class="line">[Wednesday 23 February 2011] [06:04:15] &lt;pieterh&gt;     it is too late now, really</div>
<div class="line">[Wednesday 23 February 2011] [06:04:33] &lt;mikko&gt;       pieterh: i didn&#8217;t really interact with the community much back then</div>
<div class="line">[Wednesday 23 February 2011] [06:04:33] &lt;sp|ke&gt;       Hi guys</div>
<div class="line">[Wednesday 23 February 2011] [06:04:39] &lt;mikko&gt;       you were too ahead of time :)</div>
<div class="line">[Wednesday 23 February 2011] [06:04:51] &lt;pieterh&gt;     the tank wheels of history have crushed that opportunity</div>
<div class="line">[Wednesday 23 February 2011] [06:05:51] &lt;pieterh&gt;     sp|ke: hello</div>
<div class="line">[Wednesday 23 February 2011] [06:06:15] &lt;sp|ke&gt;       I just started playing with zmq and i was wondering how would i handle client autoreconnecting to server</div>
<div class="line">[Wednesday 23 February 2011] [06:06:32] &lt;pieterh&gt;     ianbarber: can you point me to instructions on adding upstream repositories? or is it simple?</div>
<div class="line">[Wednesday 23 February 2011] [06:06:48] &lt;pieterh&gt;     sustrik: I&#8217;ll try with that patch, see how it goes</div>
<div class="line">[Wednesday 23 February 2011] [06:06:52] &lt;mikko&gt;       pieterh: git remote add upstream &lt;uri&gt;</div>
<div class="line">[Wednesday 23 February 2011] [06:07:01] &lt;mikko&gt;       upstream being arbitrary name</div>
<div class="line">[Wednesday 23 February 2011] [06:07:03] &lt;pieterh&gt;     thx!</div>
<div class="line">[Wednesday 23 February 2011] [06:07:07] &lt;mikko&gt;       then git fetch upstream</div>
<div class="line">[Wednesday 23 February 2011] [06:07:24] &lt;mikko&gt;       you might like this: <a class="reference external" href="http://beebo.org/stuff/tech/git.html">http://beebo.org/stuff/tech/git.html</a></div>
<div class="line">[Wednesday 23 February 2011] [06:07:44] &lt;pieterh&gt;     git fetch upstream does what exactly?</div>
<div class="line">[Wednesday 23 February 2011] [06:07:59] &lt;pieterh&gt;     sorry, will rtfm but git demands too much space in my brain</div>
<div class="line">[Wednesday 23 February 2011] [06:08:11] &lt;mikko&gt;       it fetches the information about the remote repository</div>
<div class="line">[Wednesday 23 February 2011] [06:08:17] &lt;mikko&gt;       so that you know what branches it contains etc</div>
<div class="line">[Wednesday 23 February 2011] [06:08:25] &lt;pieterh&gt;     let&#8217;s say I want to pull one commit from Martin&#8217;s repo</div>
<div class="line">[Wednesday 23 February 2011] [06:08:47] &lt;pieterh&gt;     &lt;uri&gt; is the read-only git uri, fine</div>
<div class="line">[Wednesday 23 February 2011] [06:09:24] &lt;mikko&gt;       pieterh: you might have a lot easier time with <a class="reference external" href="https://github.com/defunkt/github-gem">https://github.com/defunkt/github-gem</a></div>
<div class="line">[Wednesday 23 February 2011] [06:09:36] &lt;mikko&gt;       it abstracts some of this normal github workflow</div>
<div class="line">[Wednesday 23 February 2011] [06:09:55] &lt;pieterh&gt;     well, let&#8217;s try with the basics</div>
<div class="line">[Wednesday 23 February 2011] [06:10:08] &lt;pieterh&gt;     I add the upstream remote, then fetch that</div>
<div class="line">[Wednesday 23 February 2011] [06:10:19] &lt;sp|ke&gt;       Is there a way to know the the state of the zmq socket and to make the client auto reconnect if server goes down?</div>
<div class="line">[Wednesday 23 February 2011] [06:10:19] &lt;pieterh&gt;     next?</div>
<div class="line">[Wednesday 23 February 2011] [06:10:30] &lt;pieterh&gt;     sp|ke: it happens automatically</div>
<div class="line">[Wednesday 23 February 2011] [06:10:32] &lt;ianbarber&gt;   git cherry-pick</div>
<div class="line">[Wednesday 23 February 2011] [06:10:50] &lt;pieterh&gt;     sp|ke: have you read the Guide yet?</div>
<div class="line">[Wednesday 23 February 2011] [06:11:09] &lt;pieterh&gt;     ianbarber: so &#8220;git cherry-pick upstream/&lt;commit&gt;&#8221;?</div>
<div class="line">[Wednesday 23 February 2011] [06:11:29] &lt;ianbarber&gt;   git cherry-pick &lt;biglong-git-id-of-the-commit&gt;</div>
<div class="line">[Wednesday 23 February 2011] [06:11:40] &lt;sp|ke&gt;       I must have an error somewhere because I tried</div>
<div class="line">[Wednesday 23 February 2011] [06:11:54] &lt;sp|ke&gt;       Yes I have read the guide but not everything</div>
<div class="line">[Wednesday 23 February 2011] [06:12:31] &lt;pieterh&gt;     <a class="reference external" href="mailto:ph&#37;&#52;&#48;ws200901">ph<span>&#64;</span>ws200901</a>:~/work/zeromq2-1$ git cherry-pick 29e0e7d</div>
<div class="line">[Wednesday 23 February 2011] [06:12:31] &lt;pieterh&gt;     Finished one cherry-pick.</div>
<div class="line">[Wednesday 23 February 2011] [06:12:31] &lt;pieterh&gt;     [master f4c1040] Incorrect PGM sender/receiver creation fixed</div>
<div class="line">[Wednesday 23 February 2011] [06:12:31] &lt;pieterh&gt;      Author: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt;</div>
<div class="line">[Wednesday 23 February 2011] [06:12:31] &lt;pieterh&gt;      1 files changed, 2 insertions(+), 2 deletions(-)</div>
<div class="line">[Wednesday 23 February 2011] [06:12:35] &lt;pieterh&gt;     yay!</div>
<div class="line">[Wednesday 23 February 2011] [06:12:50] &lt;sp|ke&gt;       I tried with several REQ clients and a REP server</div>
<div class="line">[Wednesday 23 February 2011] [06:12:53] &lt;pieterh&gt;     sustrik: okay, we have liftoff</div>
<div class="line">[Wednesday 23 February 2011] [06:13:04] &lt;ianbarber&gt;   woo</div>
<div class="line">[Wednesday 23 February 2011] [06:13:31] &lt;pieterh&gt;     sustrik: could you create issues with commit tags like this then?</div>
<div class="line">[Wednesday 23 February 2011] [06:13:45] &lt;pieterh&gt;     that allows public discussion &amp; review of exactly what goes into stable releases</div>
<div class="line">[Wednesday 23 February 2011] [06:14:25] &lt;pieterh&gt;     IMO you can link directly to the commit, e.g. <a class="reference external" href="https://github.com/zeromq/zeromq2/commit/29e0e7dbadfcd0bab70feee119bd7c5e623b38d4">https://github.com/zeromq/zeromq2/commit/29e0e7dbadfcd0bab70feee119bd7c5e623b38d4</a></div>
<div class="line">[Wednesday 23 February 2011] [06:15:24] &lt;mikko&gt;       pieterh: you can also do the following in your local repo:</div>
<div class="line">[Wednesday 23 February 2011] [06:15:56] &lt;mikko&gt;       git checkout -b mrsustrik &lt;localname&gt;/&lt;branchname&gt;</div>
<div class="line">[Wednesday 23 February 2011] [06:16:12] &lt;mikko&gt;       that creates a local branch that tracks for example upstream/master</div>
<div class="line">[Wednesday 23 February 2011] [06:16:31] &lt;mikko&gt;       so when you do for example git diff in that branch it&#8217;s against upstream/master rather than origin/master</div>
<div class="line">[Wednesday 23 February 2011] [06:16:56] &lt;mikko&gt;       also, you can diff directly against remote one by doing &#8220;git diff upstream/master&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [06:17:32] &lt;pieterh&gt;     git is too powerful</div>
<div class="line">[Wednesday 23 February 2011] [06:17:41] &lt;pieterh&gt;     all the stuff I <em>can</em> do</div>
<div class="line">[Wednesday 23 February 2011] [06:18:27] &lt;pieterh&gt;     mikko: regarding your violent objection to separate repos</div>
<div class="line">[Wednesday 23 February 2011] [06:18:59] &lt;pieterh&gt;     our main goals are (a) independence for teams and (b) simplicity</div>
<div class="line">[Wednesday 23 February 2011] [06:19:25] &lt;pieterh&gt;     our experience is that trying to do too much in one git leads to arguments and complexity</div>
<div class="line">[Wednesday 23 February 2011] [06:20:02] &lt;mikko&gt;       but think about the following:</div>
<div class="line">[Wednesday 23 February 2011] [06:20:19] &lt;mikko&gt;       if we are moving to pull requests the development doesnt have to happen in zeromq/zeromq</div>
<div class="line">[Wednesday 23 February 2011] [06:20:25] &lt;mikko&gt;       we can open pull requests</div>
<div class="line">[Wednesday 23 February 2011] [06:20:31] &lt;mikko&gt;       cherry-pick</div>
<div class="line">[Wednesday 23 February 2011] [06:20:32] &lt;mikko&gt;       etc</div>
<div class="line">[Wednesday 23 February 2011] [06:20:38] &lt;pieterh&gt;     indeed</div>
<div class="line">[Wednesday 23 February 2011] [06:20:50] &lt;pieterh&gt;     that&#8217;s already happening to some extent</div>
<div class="line">[Wednesday 23 February 2011] [06:20:54] &lt;mikko&gt;       this allows everyone to organise their fork as they please</div>
<div class="line">[Wednesday 23 February 2011] [06:20:57] &lt;pieterh&gt;     indeed</div>
<div class="line">[Wednesday 23 February 2011] [06:21:00] &lt;mikko&gt;       but still keeps upstream in one place</div>
<div class="line">[Wednesday 23 February 2011] [06:21:04] &lt;pieterh&gt;     exactly</div>
<div class="line">[Wednesday 23 February 2011] [06:21:06] &lt;mikko&gt;       which is better for tools such as jenkins</div>
<div class="line">[Wednesday 23 February 2011] [06:21:52] &lt;mikko&gt;       and not just that</div>
<div class="line">[Wednesday 23 February 2011] [06:22:00] &lt;mikko&gt;       not having to remember what _repo_ contains what</div>
<div class="line">[Wednesday 23 February 2011] [06:22:05] &lt;pieterh&gt;     each repository has its target audience, tradeoffs</div>
<div class="line">[Wednesday 23 February 2011] [06:22:16] &lt;pieterh&gt;     and someone who aims to make that particular mix work</div>
<div class="line">[Wednesday 23 February 2011] [06:22:16] &lt;mikko&gt;       rather once you&#8217;ve cloned a repo you have it all</div>
<div class="line">[Wednesday 23 February 2011] [06:22:26] &lt;mikko&gt;       pieterh: what do you mean by that&gt;</div>
<div class="line">[Wednesday 23 February 2011] [06:22:43] &lt;pieterh&gt;     well, e.g. some people will want multiple release branches in one repo</div>
<div class="line">[Wednesday 23 February 2011] [06:22:52] &lt;pieterh&gt;     because they want to manage it all centrally (or by themselves)</div>
<div class="line">[Wednesday 23 February 2011] [06:22:59] &lt;mikko&gt;       what i&#8217;m saying is distribute the development rather than the results of it</div>
<div class="line">[Wednesday 23 February 2011] [06:23:01] &lt;pieterh&gt;     others will want to delegate that work as far as possible</div>
<div class="line">[Wednesday 23 February 2011] [06:23:23] &lt;mikko&gt;       have multiple forks of one integration point rather than multiple integrations points for the same thing</div>
<div class="line">[Wednesday 23 February 2011] [06:23:41] &lt;pieterh&gt;     your long words hurt my brain</div>
<div class="line">[Wednesday 23 February 2011] [06:23:57] &lt;pieterh&gt;     we only have one integration point, which is basically Martin Sustrik</div>
<div class="line">[Wednesday 23 February 2011] [06:23:58] &lt;mikko&gt;       i&#8217;m a consultant by trade</div>
<div class="line">[Wednesday 23 February 2011] [06:23:58] &lt;mikko&gt;       :)</div>
<div class="line">[Wednesday 23 February 2011] [06:24:07] &lt;pieterh&gt;     people are integration points, remember</div>
<div class="line">[Wednesday 23 February 2011] [06:24:10] &lt;pieterh&gt;     not repositories</div>
<div class="line">[Wednesday 23 February 2011] [06:24:24] &lt;pieterh&gt;     each project really has one brain at its center IME</div>
<div class="line">[Wednesday 23 February 2011] [06:24:54] &lt;pieterh&gt;     now, MS doesn&#8217;t want to be bothered creating stable releases of 0MQ</div>
<div class="line">[Wednesday 23 February 2011] [06:25:03] &lt;pieterh&gt;     so that work becomes another project, with another brain</div>
<div class="line">[Wednesday 23 February 2011] [06:25:13] &lt;pieterh&gt;     and thus, naturally, another repository</div>
<div class="line">[Wednesday 23 February 2011] [06:25:43] &lt;pieterh&gt;     i&#8217;m not sure how this translates to development of the <em>core</em> library</div>
<div class="line">[Wednesday 23 February 2011] [06:26:00] &lt;pieterh&gt;     if you work in terms of layers then it does scale</div>
<div class="line">[Wednesday 23 February 2011] [06:26:13] &lt;pieterh&gt;     OpenPGM has its own repository and its own brain (Hi Steve-o!)</div>
<div class="line">[Wednesday 23 February 2011] [06:26:39] &lt;pieterh&gt;     I&#8217;m a software architect by trade</div>
<div class="line">[Wednesday 23 February 2011] [06:27:25] &lt;mikko&gt;       i&#8217;m still failing to see the benefit of separate repository</div>
<div class="line">[Wednesday 23 February 2011] [06:27:34] &lt;mikko&gt;       i can see the reasoning with one repo per project</div>
<div class="line">[Wednesday 23 February 2011] [06:27:51] &lt;mikko&gt;       but what you are describing as a project clashes with my concept of a project</div>
<div class="line">[Wednesday 23 February 2011] [06:28:07] &lt;mikko&gt;       following that logic i should have a repo for build fixes</div>
<div class="line">[Wednesday 23 February 2011] [06:28:16] &lt;mikko&gt;       steve should have a repo for pgm related fixes</div>
<div class="line">[Wednesday 23 February 2011] [06:28:58] &lt;pieterh&gt;     it is always about the people</div>
<div class="line">[Wednesday 23 February 2011] [06:29:05] &lt;pieterh&gt;     and how much complexity they can tolerate</div>
<div class="line">[Wednesday 23 February 2011] [06:29:33] &lt;pieterh&gt;     &#8220;stable version of 0MQ/2.1&#8221; has become a &#8220;project&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [06:29:55] &lt;pieterh&gt;     by making that decision we remove a chunk of complexity from &#8220;development of 0MQ&#8221; as a project</div>
<div class="line">[Wednesday 23 February 2011] [06:30:03] &lt;sustrik&gt;     i would formulate it this way: does linux have a RHEL5 branch in his vanilla repo?</div>
<div class="line">[Wednesday 23 February 2011] [06:30:09] &lt;ianbarber&gt;   i don&#8217;t think the two of you are that far off really. Mikko: there is one integration point, the master on zeromq, all of the patches for the other projects come from there</div>
<div class="line">[Wednesday 23 February 2011] [06:30:24] &lt;sustrik&gt;     no, they are separate projects</div>
<div class="line">[Wednesday 23 February 2011] [06:30:43] &lt;pieterh&gt;     indeed, it&#8217;s a tool we&#8217;re using to reduce complexity</div>
<div class="line">[Wednesday 23 February 2011] [06:30:54] &lt;ianbarber&gt;   yeah, but is the idea not to push patches into development, then cherry pick ones out to the stable release projects</div>
<div class="line">[Wednesday 23 February 2011] [06:31:03] &lt;pieterh&gt;     yes</div>
<div class="line">[Wednesday 23 February 2011] [06:31:09] &lt;pieterh&gt;     when possible and sane</div>
<div class="line">[Wednesday 23 February 2011] [06:31:54] &lt;pieterh&gt;     but that is a different question, about the trust relationships between these people and projects</div>
<div class="line">[Wednesday 23 February 2011] [06:32:04] &lt;pieterh&gt;     does sustrik trust a patch coming from me?</div>
<div class="line">[Wednesday 23 February 2011] [06:32:08] &lt;pieterh&gt;     inherently, no</div>
<div class="line">[Wednesday 23 February 2011] [06:32:17] &lt;pieterh&gt;     would I trust a patch coming from sustrik?</div>
<div class="line">[Wednesday 23 February 2011] [06:32:19] &lt;pieterh&gt;     totally</div>
<div class="line">[Wednesday 23 February 2011] [06:32:40] &lt;pieterh&gt;     take one of my projects, like ZFL, and its the other way around of course</div>
<div class="line">[Wednesday 23 February 2011] [06:33:40] &lt;sustrik&gt;     i think the problem for contributors is where to submit the patches now</div>
<div class="line">[Wednesday 23 February 2011] [06:33:45] &lt;mikko&gt;       pieterh: if im using zeromq 2.1 and i have an issue with it where do i raise the issue?</div>
<div class="line">[Wednesday 23 February 2011] [06:34:02] &lt;pieterh&gt;     anywhere you think it&#8217;ll get attention</div>
<div class="line">[Wednesday 23 February 2011] [06:34:12] &lt;pieterh&gt;     you&#8217;re speaking to a person, remember</div>
<div class="line">[Wednesday 23 February 2011] [06:34:31] &lt;pieterh&gt;     who do you talk to, the guy who provided you 2.1 or the guy who you think really knows the issue?</div>
<div class="line">[Wednesday 23 February 2011] [06:34:35] &lt;pieterh&gt;     classic question of workflow</div>
<div class="line">[Wednesday 23 February 2011] [06:34:41] &lt;mikko&gt;       i dont know</div>
<div class="line">[Wednesday 23 February 2011] [06:34:42] &lt;mikko&gt;       im a user</div>
<div class="line">[Wednesday 23 February 2011] [06:34:48] &lt;pieterh&gt;     if you are Mikko, of course you talk to the developer</div>
<div class="line">[Wednesday 23 February 2011] [06:34:52] &lt;mikko&gt;       i got a problem and i see this list of github projects</div>
<div class="line">[Wednesday 23 February 2011] [06:34:53] &lt;pieterh&gt;     if you&#8217;re a user, you talk to the packager</div>
<div class="line">[Wednesday 23 February 2011] [06:34:59] &lt;pieterh&gt;     nothing new here</div>
<div class="line">[Wednesday 23 February 2011] [06:35:17] &lt;pieterh&gt;     if I find a bug in Linux, I immediately pick up the phone and call my buddy Linus</div>
<div class="line">[Wednesday 23 February 2011] [06:35:50] &lt;pieterh&gt;     I&#8217;d expect the 2-1 repo to be fairly low-key</div>
<div class="line">[Wednesday 23 February 2011] [06:36:05] &lt;pieterh&gt;     it does not require visibility, really</div>
<div class="line">[Wednesday 23 February 2011] [06:36:27] &lt;pieterh&gt;     but perhaps it does</div>
<div class="line">[Wednesday 23 February 2011] [06:46:32] &lt;Steve-o&gt;     mikko: I have a patch ready to enabled ticket spinlocks in Autoconf, need some testing first</div>
<div class="line">[Wednesday 23 February 2011] [06:47:15] &lt;mikko&gt;       Steve-o: do you want me to test something?</div>
<div class="line">[Wednesday 23 February 2011] [06:47:46] &lt;mikko&gt;       running pkg-get upgrade on the solaris box atm</div>
<div class="line">[Wednesday 23 February 2011] [06:48:34] &lt;Steve-o&gt;     I&#8217;m waiting for some files to copy over wifi, then I can reboot &amp; test on Linux, then I&#8217;ll update trunk</div>
<div class="line">[Wednesday 23 February 2011] [06:49:11] &lt;Steve-o&gt;     I&#8217;m trying to avoid SPARC &amp; Sun Pro x86 assembler</div>
<div class="line">[Wednesday 23 February 2011] [06:50:31] &lt;Steve-o&gt;     I don&#8217;t have the brain cells to convert my GCC or MSVC assembler to Sun Pro friendly constraints</div>
<div class="line">[Wednesday 23 February 2011] [06:57:05] &lt;pieterh&gt;     sustrik: ok, release made, announced, API website updated, etc.</div>
<div class="line">[Wednesday 23 February 2011] [07:00:51] &lt;pieterh&gt;     <a href="#id1653"><span class="problematic" id="id1654">sustrik_</span></a>: I&#8217;ve used the terminology &#8220;2.1 stable (rc1)&#8221; so that more people will use this package</div>
<div class="line">[Wednesday 23 February 2011] [07:01:15] &lt;mikko&gt;       pieterh: remember to tweet as well</div>
<div class="line">[Wednesday 23 February 2011] [07:01:23] &lt;pieterh&gt;     ah, of course</div>
<div class="line">[Wednesday 23 February 2011] [07:01:36] &lt;pieterh&gt;     everyone should tweet</div>
<div class="line">[Wednesday 23 February 2011] [07:01:38] &lt;pieterh&gt;     the more the merrier</div>
<div class="line">[Wednesday 23 February 2011] [07:05:41] &lt;ianbarber&gt;   what are the known instabilities with PGM? just the rate issue?</div>
<div class="line">[Wednesday 23 February 2011] [07:06:26] &lt;pieterh&gt;     yup</div>
<div class="line">[Wednesday 23 February 2011] [07:06:37] &lt;pieterh&gt;     plus there are several unknown instabilities</div>
<div class="line">[Wednesday 23 February 2011] [07:06:54] &lt;guido_g&gt;     like the one I reported to the ml</div>
<div class="line">[Wednesday 23 February 2011] [07:07:31] &lt;pieterh&gt;     until people have severely hammered 0MQ+OpenPGM5, I&#8217;d expect there to be issues</div>
<div class="line">[Wednesday 23 February 2011] [07:07:58] &lt;mikko&gt;       would we benefit from something like trac or redmine?</div>
<div class="line">[Wednesday 23 February 2011] [07:08:09] &lt;mikko&gt;       very lightweight project stuff</div>
<div class="line">[Wednesday 23 February 2011] [07:11:28] &lt;Steve-o&gt;     Ok just enabled ticket spinlocks in trunk, hopefully SunPro on Linux doesn&#8217;t choke on it</div>
<div class="line">[Wednesday 23 February 2011] [07:12:08] &lt;mikko&gt;       Steve-o: will test now</div>
<div class="line">[Wednesday 23 February 2011] [07:12:42] &lt;sustrik&gt;     <a href="#id1655"><span class="problematic" id="id1656">pieterh_</span></a>: congrats!</div>
<div class="line">[Wednesday 23 February 2011] [07:13:13] &lt;sustrik&gt;     do you want access to freshmeat 0mq account?</div>
<div class="line">[Wednesday 23 February 2011] [07:13:18] &lt;pieterh&gt;     sustrik: I&#8217;m now splitting the old procedures page into two, Development and Releases</div>
<div class="line">[Wednesday 23 February 2011] [07:13:46] &lt;pieterh&gt;     ah, probably best to use that account, right?</div>
<div class="line">[Wednesday 23 February 2011] [07:13:55] &lt;pieterh&gt;     since it&#8217;s already configured</div>
<div class="line">[Wednesday 23 February 2011] [07:14:08] &lt;pieterh&gt;     ack, send me the access details by private IRC</div>
<div class="line">[Wednesday 23 February 2011] [08:21:53] &lt;sustrik&gt;     pieterh: development subsection under development section in the left pane is strange</div>
<div class="line">[Wednesday 23 February 2011] [08:22:09] &lt;sustrik&gt;     it&#8217;s about building 0mq rather than development</div>
<div class="line">[Wednesday 23 February 2011] [08:22:49] &lt;pieterh&gt;     sustrik: try now?</div>
<div class="line">[Wednesday 23 February 2011] [08:23:01] &lt;pieterh&gt;     uhm, hang on...</div>
<div class="line">[Wednesday 23 February 2011] [08:24:02] &lt;pieterh&gt;     Development is not accurate, it&#8217;s more... can I use &#8220;Activity&#8221; or something for the nav title?</div>
<div class="line">[Wednesday 23 February 2011] [08:27:25] &lt;sustrik&gt;     it&#8217;s build</div>
<div class="line">[Wednesday 23 February 2011] [08:27:26] &lt;sustrik&gt;     imo</div>
<div class="line">[Wednesday 23 February 2011] [08:28:59] &lt;sustrik&gt;     or just call it source</div>
<div class="line">[Wednesday 23 February 2011] [08:29:02] &lt;sustrik&gt;     as before</div>
<div class="line">[Wednesday 23 February 2011] [08:39:42] &lt;sustrik&gt;     other way round!</div>
<div class="line">[Wednesday 23 February 2011] [08:39:58] &lt;sustrik&gt;     section Development</div>
<div class="line">[Wednesday 23 February 2011] [08:40:07] &lt;sustrik&gt;     subsection Source</div>
<div class="line">[Wednesday 23 February 2011] [08:40:40] &lt;sustrik&gt;     build notes on source page kind of make sense</div>
<div class="line">[Wednesday 23 February 2011] [08:42:59] &lt;pieterh&gt;     What do we call the main repository?</div>
<div class="line">[Wednesday 23 February 2011] [08:43:10] &lt;pieterh&gt;     if it&#8217;s the &#8220;development&#8221; repository, that&#8217;s the page title</div>
<div class="line">[Wednesday 23 February 2011] [08:43:35] &lt;pieterh&gt;     development of 0MQ does not cover bindings, releases, etc. afaics</div>
<div class="line">[Wednesday 23 February 2011] [08:43:58] &lt;sustrik&gt;     its master</div>
<div class="line">[Wednesday 23 February 2011] [08:44:03] &lt;pieterh&gt;     master is a branch</div>
<div class="line">[Wednesday 23 February 2011] [08:44:11] &lt;sustrik&gt;     vanilla?</div>
<div class="line">[Wednesday 23 February 2011] [08:44:19] &lt;pieterh&gt;     meaningless name is meaningless</div>
<div class="line">[Wednesday 23 February 2011] [08:44:45] &lt;sustrik&gt;     whatever</div>
<div class="line">[Wednesday 23 February 2011] [08:44:54] &lt;sustrik&gt;     but the caption is misleading</div>
<div class="line">[Wednesday 23 February 2011] [08:44:56] &lt;pieterh&gt;     well, I need a term that sticks, this is vital</div>
<div class="line">[Wednesday 23 February 2011] [08:45:01] &lt;pieterh&gt;     i can fix the caption afterwards</div>
<div class="line">[Wednesday 23 February 2011] [08:45:11] &lt;pieterh&gt;     upstream?</div>
<div class="line">[Wednesday 23 February 2011] [08:45:13] &lt;pieterh&gt;     core?</div>
<div class="line">[Wednesday 23 February 2011] [08:45:17] &lt;pieterh&gt;     mama?</div>
<div class="line">[Wednesday 23 February 2011] [08:45:22] &lt;sustrik&gt;     The section should be called &#8220;Development&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [08:45:40] &lt;sustrik&gt;     so that only people who are interested in development look at the subsections</div>
<div class="line">[Wednesday 23 February 2011] [08:45:46] &lt;pieterh&gt;     ok... brilliant idea...</div>
<div class="line">[Wednesday 23 February 2011] [08:46:02] &lt;pieterh&gt;     &#8220;0MQ/2.2&#8221; as title</div>
<div class="line">[Wednesday 23 February 2011] [08:46:09] &lt;pieterh&gt;     &#8220;0MQ/2.1&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [08:46:12] &lt;sustrik&gt;     and the first thing you want to do when developing is getting the source</div>
<div class="line">[Wednesday 23 February 2011] [08:46:13] &lt;pieterh&gt;     &#8220;0MQ/3.0&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [08:46:17] &lt;pieterh&gt;     yes</div>
<div class="line">[Wednesday 23 February 2011] [08:46:20] &lt;sustrik&gt;     so the subsection should be called source</div>
<div class="line">[Wednesday 23 February 2011] [08:46:25] &lt;pieterh&gt;     the &#8216;source repo&#8217;?</div>
<div class="line">[Wednesday 23 February 2011] [08:46:30] &lt;pieterh&gt;     could work</div>
<div class="line">[Wednesday 23 February 2011] [08:46:32] &lt;sustrik&gt;     up to you</div>
<div class="line">[Wednesday 23 February 2011] [08:46:38] &lt;sustrik&gt;     source is somewhat shorter</div>
<div class="line">[Wednesday 23 February 2011] [08:46:38] &lt;pieterh&gt;     god no, I need buyin :-)</div>
<div class="line">[Wednesday 23 February 2011] [08:46:53] &lt;pieterh&gt;     ok, let&#8217;s try that</div>
<div class="line">[Wednesday 23 February 2011] [08:50:29] &lt;Guthur&gt;      is this a new look website you guys are talking about</div>
<div class="line">[Wednesday 23 February 2011] [08:56:23] &lt;pieterh&gt;     Guthur: which one?</div>
<div class="line">[Wednesday 23 February 2011] [08:57:08] &lt;pieterh&gt;     sustrik: I&#8217;m going to deprecate the part about emailing patches to the list, and start mentioning github pull requests, is that OK?</div>
<div class="line">[Wednesday 23 February 2011] [08:57:38] &lt;Guthur&gt;      pieterh: whatever you guys are debating</div>
<div class="line">[Wednesday 23 February 2011] [08:58:05] &lt;pieterh&gt;     Oh, this is about contributions &amp; releases</div>
<div class="line">[Wednesday 23 February 2011] [09:08:40] &lt;sustrik&gt;     leave the part about ML there</div>
<div class="line">[Wednesday 23 February 2011] [09:08:51] &lt;pieterh&gt;     yes, I&#8217;m making it a collapsible section</div>
<div class="line">[Wednesday 23 February 2011] [09:13:45] &lt;bijuC&gt;       Hello.. I am facing something strange with 2.1.0 and 2.1.1 MSVC RELEASE builds</div>
<div class="line">[Wednesday 23 February 2011] [09:14:42] &lt;mikko&gt;       bijuC: whats the problem?</div>
<div class="line">[Wednesday 23 February 2011] [09:14:48] &lt;bijuC&gt;       The DEBUG build works fine .. I have a PUB app and a SUB app.. i am able to receive everything at SUB</div>
<div class="line">[Wednesday 23 February 2011] [09:15:15] &lt;bijuC&gt;       but for a RELEASE build .. there are no errors.. but i receive nothing on SUB.. I used Wireshark to check but seems like there is no transmission</div>
<div class="line">[Wednesday 23 February 2011] [09:16:11] &lt;sustrik&gt;     pieterh: i&#8217;m not accepting pull requests, the process on the site would mislead people</div>
<div class="line">[Wednesday 23 February 2011] [09:16:22] &lt;pieterh&gt;     oh... sorry</div>
<div class="line">[Wednesday 23 February 2011] [09:16:35] &lt;pieterh&gt;     I misremembered</div>
<div class="line">[Wednesday 23 February 2011] [09:16:50] &lt;sustrik&gt;     np</div>
<div class="line">[Wednesday 23 February 2011] [09:17:05] &lt;pieterh&gt;     hmm... I hope over time you&#8217;ll be convinced, it really is simpler for everyone</div>
<div class="line">[Wednesday 23 February 2011] [09:18:35] &lt;bijuC&gt;       I am trying both tcp and epgm.. both exhibit the same behaviour</div>
<div class="line">[Wednesday 23 February 2011] [09:18:45] &lt;sustrik&gt;     i want to process to be as widely usable as possible</div>
<div class="line">[Wednesday 23 February 2011] [09:18:52] &lt;sustrik&gt;     pull requests depend on:</div>
<div class="line">[Wednesday 23 February 2011] [09:19:06] &lt;sustrik&gt;     1. contributor having git and understanding it</div>
<div class="line">[Wednesday 23 February 2011] [09:19:14] &lt;sustrik&gt;     2. github being online</div>
<div class="line">[Wednesday 23 February 2011] [09:19:16] &lt;mikko&gt;       Steve-o: problem</div>
<div class="line">[Wednesday 23 February 2011] [09:19:39] &lt;Steve-o&gt;     shoot</div>
<div class="line">[Wednesday 23 February 2011] [09:20:08] &lt;sustrik&gt;     i also want to have the log of patch discussions in my mailbox</div>
<div class="line">[Wednesday 23 February 2011] [09:20:38] &lt;sustrik&gt;     rather than hosted in a third-party, non-exportable archive</div>
<div class="line">[Wednesday 23 February 2011] [09:20:40] &lt;mikko&gt;       Steve-o: the constants defined by autconf build dont have <a href="#id1657"><span class="problematic" id="id1658">CONFIG_</span></a> prefix</div>
<div class="line">[Wednesday 23 February 2011] [09:20:49] &lt;mikko&gt;       which a lot of openpgm expects</div>
<div class="line">[Wednesday 23 February 2011] [09:21:00] &lt;pieterh&gt;     sustrik: well, I think 90% of people on the list were for pull requests</div>
<div class="line">[Wednesday 23 February 2011] [09:21:02] &lt;mikko&gt;       got this on solaris:</div>
<div class="line">[Wednesday 23 February 2011] [09:21:06] &lt;mikko&gt;       -DHAVE_GETTIMEOFDAY=1 defined in build</div>
<div class="line">[Wednesday 23 February 2011] [09:21:08] &lt;pieterh&gt;     but each maintainer is free to choose, obvously</div>
<div class="line">[Wednesday 23 February 2011] [09:21:12] &lt;mikko&gt;       &#8220;time.c&#8221;, line 412: #error: &#8220;gettimeofday() or ftime() required to calculate counter offset&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [09:21:13] &lt;sustrik&gt;     sure</div>
<div class="line">[Wednesday 23 February 2011] [09:21:16] &lt;sustrik&gt;     it&#8217;s just me</div>
<div class="line">[Wednesday 23 February 2011] [09:21:29] &lt;pieterh&gt;     I&#8217;ve changed that page, it was important to me to have a documented policy for other projects as well</div>
<div class="line">[Wednesday 23 February 2011] [09:21:34] &lt;Steve-o&gt;     mikko: all the autoconf defined ones are ignored currently</div>
<div class="line">[Wednesday 23 February 2011] [09:21:35] &lt;mikko&gt;       the constant that it checks for is CONFIG_HAVE_GETTIMEOFDAY</div>
<div class="line">[Wednesday 23 February 2011] [09:21:46] &lt;mikko&gt;       Steve-o: so i&#8217;ll hack that specific case</div>
<div class="line">[Wednesday 23 February 2011] [09:22:01] &lt;Steve-o&gt;     mikko: it basically sets up the environment to match scons</div>
<div class="line">[Wednesday 23 February 2011] [09:22:19] &lt;pieterh&gt;     sustrik: your point #1, either way people need to learn git, and formatted patches is harder, not easier</div>
<div class="line">[Wednesday 23 February 2011] [09:22:26] &lt;pieterh&gt;     so it&#8217;s just down to not trusting github</div>
<div class="line">[Wednesday 23 February 2011] [09:22:38] &lt;pieterh&gt;     but if it&#8217;s offline, nothing works either</div>
<div class="line">[Wednesday 23 February 2011] [09:22:46] &lt;sustrik&gt;     nope, there are platforms with no git</div>
<div class="line">[Wednesday 23 February 2011] [09:22:57] &lt;pieterh&gt;     ?</div>
<div class="line">[Wednesday 23 February 2011] [09:23:08] &lt;pieterh&gt;     the documented process depends on github and git</div>
<div class="line">[Wednesday 23 February 2011] [09:23:14] &lt;sustrik&gt;     openvms, zos?</div>
<div class="line">[Wednesday 23 February 2011] [09:23:28] &lt;pieterh&gt;     I&#8217;m 100% sure openvms has git</div>
<div class="line">[Wednesday 23 February 2011] [09:23:42] &lt;sustrik&gt;     it has not</div>
<div class="line">[Wednesday 23 February 2011] [09:23:50] &lt;sustrik&gt;     brett is working on it</div>
<div class="line">[Wednesday 23 February 2011] [09:23:54] &lt;sustrik&gt;     but it&#8217;s not yet ported</div>
<div class="line">[Wednesday 23 February 2011] [09:24:08] &lt;pieterh&gt;     sure, but the process as already documented does not work then</div>
<div class="line">[Wednesday 23 February 2011] [09:24:28] &lt;pieterh&gt;     so you are saying &#8220;because your process B does not work on OpenVMS, I want to use process A&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [09:24:31] &lt;mikko&gt;       Even VMS seems to have it (although if git is ever ported to VMS, I&#8217;ll</div>
<div class="line">[Wednesday 23 February 2011] [09:24:32] &lt;mikko&gt;       just have to shoot myself. I used VMS in -88, and the scars are _still_</div>
<div class="line">[Wednesday 23 February 2011] [09:24:32] &lt;mikko&gt;       fresh).</div>
<div class="line">[Wednesday 23 February 2011] [09:24:34] &lt;mikko&gt;       Linus</div>
<div class="line">[Wednesday 23 February 2011] [09:24:35] &lt;pieterh&gt;     while process A doesnt work on OpenVMS either</div>
<div class="line">[Wednesday 23 February 2011] [09:24:37] &lt;pieterh&gt;     ?</div>
<div class="line">[Wednesday 23 February 2011] [09:24:46] &lt;pieterh&gt;     weird arguments, el sustrik</div>
<div class="line">[Wednesday 23 February 2011] [09:25:00] &lt;sustrik&gt;     what i am saying that i am willing to accept simple diffs</div>
<div class="line">[Wednesday 23 February 2011] [09:25:03] &lt;mikko&gt;       sustrik: github has subversion bridge</div>
<div class="line">[Wednesday 23 February 2011] [09:25:04] &lt;pieterh&gt;     well, add that</div>
<div class="line">[Wednesday 23 February 2011] [09:25:06] &lt;sustrik&gt;     if there&#8217;s good reason for that</div>
<div class="line">[Wednesday 23 February 2011] [09:25:08] &lt;pieterh&gt;     sure</div>
<div class="line">[Wednesday 23 February 2011] [09:25:09] &lt;sustrik&gt;     yup</div>
<div class="line">[Wednesday 23 February 2011] [09:25:24] &lt;pieterh&gt;     if it&#8217;s not on the page, it&#8217;s not there</div>
<div class="line">[Wednesday 23 February 2011] [09:25:31] &lt;sustrik&gt;     mikko: yes, i know</div>
<div class="line">[Wednesday 23 February 2011] [09:25:43] &lt;pieterh&gt;     what i want is consistency</div>
<div class="line">[Wednesday 23 February 2011] [09:25:46] &lt;pieterh&gt;     simplicity</div>
<div class="line">[Wednesday 23 February 2011] [09:25:48] &lt;pieterh&gt;     least surprise</div>
<div class="line">[Wednesday 23 February 2011] [09:25:57] &lt;pieterh&gt;     that&#8217;s how we get more contributors</div>
<div class="line">[Wednesday 23 February 2011] [09:26:06] &lt;pieterh&gt;     pull requests generate more contributions</div>
<div class="line">[Wednesday 23 February 2011] [09:26:20] &lt;pieterh&gt;     that is my experience and others have reported the same</div>
<div class="line">[Wednesday 23 February 2011] [09:26:30] &lt;pieterh&gt;     the format patch / email process is a barrier</div>
<div class="line">[Wednesday 23 February 2011] [09:27:02] &lt;pieterh&gt;     just compare the complexity of the two explanations on that page</div>
<div class="line">[Wednesday 23 February 2011] [09:28:36] &lt;pieterh&gt;     it requires (and I just counted) 3x more words to describe the email/format patch process</div>
<div class="line">[Wednesday 23 February 2011] [09:29:26] &lt;pieterh&gt;     mikko: you did not _like_ VMS?</div>
<div class="line">[Wednesday 23 February 2011] [09:29:53] &lt;mikko&gt;       pieterh: that was linus torvalds</div>
<div class="line">[Wednesday 23 February 2011] [09:30:01] &lt;pieterh&gt;     ah :-)</div>
<div class="line">[Wednesday 23 February 2011] [09:30:07] &lt;mikko&gt;       i was googling out of interest what is hindering git on openvms</div>
<div class="line">[Wednesday 23 February 2011] [09:30:14] &lt;sustrik&gt;     done</div>
<div class="line">[Wednesday 23 February 2011] [09:35:30] &lt;pieterh&gt;     okaaay... finished documenting all the new process</div>
<div class="line">[Wednesday 23 February 2011] [09:37:24] &lt;nooob&gt;       what is a good way to integrate zmq with http</div>
<div class="line">[Wednesday 23 February 2011] [09:38:46] &lt;bijuC&gt;       Any inputs on the MSVC RELEASE issue??</div>
<div class="line">[Wednesday 23 February 2011] [09:39:47] &lt;mikko&gt;       bijuC: i can give it a spin a bit later</div>
<div class="line">[Wednesday 23 February 2011] [09:39:49] &lt;pieterh&gt;     nooob: make a bridge that speaks HTTP at one side and 0MQ at the other</div>
<div class="line">[Wednesday 23 February 2011] [09:40:19] &lt;mikko&gt;       bijuC: just in case, can you show the code?</div>
<div class="line">[Wednesday 23 February 2011] [09:40:19] &lt;pieterh&gt;     nooob: this is kind of what mongrel2 does</div>
<div class="line">[Wednesday 23 February 2011] [09:40:19] &lt;bijuC&gt;       ohkk.. later today??</div>
<div class="line">[Wednesday 23 February 2011] [09:40:40] &lt;nooob&gt;       how good is mongrel2?</div>
<div class="line">[Wednesday 23 February 2011] [09:41:52] &lt;bijuC&gt;       yeah.. i can show the snippet..lemme know where n how.. but i wonder why release build only gives an issue..</div>
<div class="line">[Wednesday 23 February 2011] [09:42:19] &lt;pieterh&gt;     mikko: I&#8217;ve tried to summarize the arguments for/against multiple repos here: <a class="reference external" href="http://www.zeromq.org/topics:release-process">http://www.zeromq.org/topics:release-process</a></div>
<div class="line">[Wednesday 23 February 2011] [09:42:48] &lt;pieterh&gt;     sustrik: whenever you want, I&#8217;ll spinoff 2.0 into its own git, the process is now documented and clear</div>
<div class="line">[Wednesday 23 February 2011] [09:49:55] &lt;mikko&gt;       pieterh: &#8220;It is easy to cherry-pick changes from the source git to release gits.&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [09:50:04] &lt;pieterh&gt;     yes</div>
<div class="line">[Wednesday 23 February 2011] [09:50:08] &lt;mikko&gt;       interesting that it&#8217;s only argument for different repos</div>
<div class="line">[Wednesday 23 February 2011] [09:50:20] &lt;pieterh&gt;     uhm, there are like four arguments...</div>
<div class="line">[Wednesday 23 February 2011] [09:50:56] &lt;mikko&gt;       &#8220;it is easy to cherry-pick changes from the master branch to release branch&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [09:51:09] &lt;pieterh&gt;     you misunderstand</div>
<div class="line">[Wednesday 23 February 2011] [09:51:16] &lt;pieterh&gt;     &#8220;separate gits are extra work&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [09:51:19] &lt;pieterh&gt;     &#8220;no, it&#8217;s easy&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [09:51:24] &lt;mikko&gt;       ah ok</div>
<div class="line">[Wednesday 23 February 2011] [09:51:34] &lt;pieterh&gt;     I&#8217;ll clarify</div>
<div class="line">[Wednesday 23 February 2011] [09:51:37] &lt;mikko&gt;       i guess what ever you find easiest</div>
<div class="line">[Wednesday 23 February 2011] [09:52:03] &lt;pieterh&gt;     we votes with our feets</div>
<div class="line">[Wednesday 23 February 2011] [09:52:15] &lt;pieterh&gt;     honestly, making this 2.1.1 release was utterly easy</div>
<div class="line">[Wednesday 23 February 2011] [09:52:42] &lt;pieterh&gt;     I&#8217;d like to compress our release cycles significantly, it&#8217;s been my complaint for a year or so</div>
<div class="line">[Wednesday 23 February 2011] [09:52:57] &lt;pieterh&gt;     has taken waay too long to get code into peoples&#8217; hands</div>
<div class="line">[Wednesday 23 February 2011] [09:58:32] &lt;bijuC&gt;       Sorry got disconnected</div>
<div class="line">[Wednesday 23 February 2011] [10:03:04] &lt;bijuC&gt;       I am also looking for clarity as to how openPGM is linked into 2.1.1 for MSVC</div>
<div class="line">[Wednesday 23 February 2011] [10:03:48] &lt;bijuC&gt;       I see #include &lt;pgm/pgm.h&gt; in pgm_socket</div>
<div class="line">[Wednesday 23 February 2011] [10:04:31] &lt;bijuC&gt;       But the libzmq does not include the openPGm dir nor does it link against libpgm.lib</div>
<div class="line">[Wednesday 23 February 2011] [10:04:43] &lt;bijuC&gt;       Just curious how it is done</div>
<div class="line">[Wednesday 23 February 2011] [10:08:03] &lt;mikko&gt;       bijuC: i use separate installer</div>
<div class="line">[Wednesday 23 February 2011] [10:08:15] &lt;mikko&gt;       <a class="reference external" href="http://snapshot.zero.mq/msvc2008/">http://snapshot.zero.mq/msvc2008/</a></div>
<div class="line">[Wednesday 23 February 2011] [10:08:30] &lt;mikko&gt;       you can try the snapshot dlls</div>
<div class="line">[Wednesday 23 February 2011] [10:08:35] &lt;mikko&gt;       they should be built with openpgm</div>
<div class="line">[Wednesday 23 February 2011] [10:11:04] &lt;bijuC&gt;       Sorry Mikko, do you mean separate installer for zmq or openPGM</div>
<div class="line">[Wednesday 23 February 2011] [10:11:51] &lt;bijuC&gt;       You want me to try the dll/libs in the link you gave .. to see if the RELEASE build issue persists?</div>
<div class="line">[Wednesday 23 February 2011] [10:12:13] &lt;mikko&gt;       bijuC: im saying that this link contains dll built with openpgm</div>
<div class="line">[Wednesday 23 February 2011] [10:12:19] &lt;mikko&gt;       statically linked openpgm</div>
<div class="line">[Wednesday 23 February 2011] [10:12:36] &lt;mikko&gt;       give it a spin whether the issue persists with that version as well</div>
<div class="line">[Wednesday 23 February 2011] [10:12:44] &lt;bijuC&gt;       oh ok</div>
<div class="line">[Wednesday 23 February 2011] [10:12:50] &lt;bijuC&gt;       give me 5 mins</div>
<div class="line">[Wednesday 23 February 2011] [10:12:56] &lt;mikko&gt;       thats the latest master branch</div>
<div class="line">[Wednesday 23 February 2011] [10:13:09] &lt;mikko&gt;       can you also put the code to gist.github.com</div>
<div class="line">[Wednesday 23 February 2011] [10:14:29] &lt;cremes&gt;      glad to hear the christchurch guy came through the earthquake relatively unscathed</div>
<div class="line">[Wednesday 23 February 2011] [10:37:36] &lt;andrewvc&gt;    cremes:  good morning</div>
<div class="line">[Wednesday 23 February 2011] [10:38:12] &lt;cremes&gt;      andrewvc: good morning</div>
<div class="line">[Wednesday 23 February 2011] [10:38:20] &lt;cremes&gt;      i saw your notes; that is an incredible find</div>
<div class="line">[Wednesday 23 February 2011] [10:38:37] &lt;andrewvc&gt;    yeah, I mean, I knew it had to be something simple and stupid lol</div>
<div class="line">[Wednesday 23 February 2011] [10:38:45] &lt;cremes&gt;      i was looking over my transcript from last night and i said (paraphrased)</div>
<div class="line">[Wednesday 23 February 2011] [10:38:55] &lt;cremes&gt;      &#8220;there&#8217;s no way 0mq is exposing an internal socketpair&#8221;</div>
<div class="line">[Wednesday 23 February 2011] [10:38:57] &lt;cremes&gt;      :)</div>
<div class="line">[Wednesday 23 February 2011] [10:38:59] &lt;andrewvc&gt;    lol</div>
<div class="line">[Wednesday 23 February 2011] [10:39:17] &lt;cremes&gt;      any ideas on how to fix 0mq?</div>
<div class="line">[Wednesday 23 February 2011] [10:39:22] &lt;andrewvc&gt;    yeah</div>
<div class="line">[Wednesday 23 February 2011] [10:39:33] &lt;andrewvc&gt;    well, give EM a &#8216;nevershutdownthisFD&#8217; flag</div>
<div class="line">[Wednesday 23 February 2011] [10:39:34] &lt;andrewvc&gt;    is one</div>
<div class="line">[Wednesday 23 February 2011] [10:39:47] &lt;cremes&gt;      that just masks the problem</div>
<div class="line">[Wednesday 23 February 2011] [10:39:53] &lt;andrewvc&gt;    I don&#8217;t think its possible</div>
<div class="line">[Wednesday 23 February 2011] [10:40:01] &lt;andrewvc&gt;    aside from writing a kernel patch</div>
<div class="line">[Wednesday 23 February 2011] [10:40:02] &lt;cremes&gt;      i think this deserves a 0mq fix so that <em>no</em> language binding can screw it up</div>
<div class="line">[Wednesday 23 February 2011] [10:40:13] &lt;andrewvc&gt;    ZMQ wants a fake FD, but those don&#8217;t exist</div>
<div class="line">[Wednesday 23 February 2011] [10:40:24] &lt;cremes&gt;      well, perhaps a flag in the 0mq code that uses that FD</div>
<div class="line">[Wednesday 23 February 2011] [10:40:42] &lt;cremes&gt;      it may have to check that it&#8217;s still valid every time before using it</div>
<div class="line">[Wednesday 23 February 2011] [10:40:52] &lt;andrewvc&gt;    yeah, I mean</div>
<div class="line">[Wednesday 23 February 2011] [10:41:06] &lt;cremes&gt;      if 0mq is going to expose that <em>and</em> external code can close this &#8220;internal&#8221; socketpair, then it has to be defensive</div>
<div class="line">[Wednesday 23 February 2011] [10:41:10] &lt;andrewvc&gt;    you could do that, but it&#8217;d still suck, because then you&#8217;d have to either open a new FD automatically</div>
<div class="line">[Wednesday 23 February 2011] [10:41:17] &lt;andrewvc&gt;    which could cause tons of its own issues</div>
<div class="line">[Wednesday 23 February 2011] [10:41:25] &lt;andrewvc&gt;    or just let the socket die, but not be exceptional</div>
<div class="line">[Wednesday 23 February 2011] [10:41:32] &lt;andrewvc&gt;    I guess you could make a new error code eh?</div>
<div class="line">[Wednesday 23 February 2011] [10:41:56] &lt;cremes&gt;      doesn&#8217;t ETERM capture the issue well enough?</div>
<div class="line">[Wednesday 23 February 2011] [10:43:12] &lt;andrewvc&gt;    yeah, you could probably trigger it here: <a class="reference external" href="https://github.com/zeromq/zeromq2/blob/master/src/mailbox.cpp#L204">https://github.com/zeromq/zeromq2/blob/master/src/mailbox.cpp#L204</a></div>
<div class="line">[Wednesday 23 February 2011] [10:43:19] &lt;andrewvc&gt;    add a condition for EBADF</div>
<div class="line">[Wednesday 23 February 2011] [10:43:57] &lt;cremes&gt;      yeah, that has potential</div>
<div class="line">[Wednesday 23 February 2011] [10:44:43] &lt;ptrb&gt;        pyzmq requires python... what? 2.5?</div>
<div class="line">[Wednesday 23 February 2011] [10:44:45] &lt;andrewvc&gt;    I mean, it&#8217;s definitely something someone will hit in the future</div>
<div class="line">[Wednesday 23 February 2011] [10:45:07] &lt;andrewvc&gt;    if you stick ZMQ_FD into an existing poller, there&#8217;s a good chance you automatically will call close on it</div>
<div class="line">[Wednesday 23 February 2011] [10:45:13] &lt;andrewvc&gt;    or whatever</div>
<div class="line">[Wednesday 23 February 2011] [10:46:32] &lt;andrewvc&gt;    so, my other thought, is just to add this to EM instead of using Kernel#epoll  EM::PeriodicTimer.new(0.1) { #zmq_poll stuff}</div>
<div class="line">[Wednesday 23 February 2011] [10:47:12] &lt;andrewvc&gt;    which I&#8217;m not sure would really have any perf ramifications, I mean, 2 calls to a poller vs. 1 prolly wouldn&#8217;t kill performance right?</div>
<div class="line">[Wednesday 23 February 2011] [10:47:19] &lt;andrewvc&gt;    though it isn&#8217;t great</div>
<div class="line">[Wednesday 23 February 2011] [10:55:28] &lt;cremes&gt;      andrewvc: i don&#8217;t think using a periodic timer is appropriate for this</div>
<div class="line">[Wednesday 23 February 2011] [10:55:42] &lt;cremes&gt;      i think it needs a genuine fix in 0mq</div>
<div class="line">[Wednesday 23 February 2011] [10:55:49] &lt;andrewvc&gt;    agreed</div>
<div class="line">[Wednesday 23 February 2011] [10:56:02] &lt;andrewvc&gt;    I guess I&#8217;ll post it on the list</div>
<div class="line">[Wednesday 23 February 2011] [10:56:16] &lt;cremes&gt;      still, an awesome find; i see from the irc backbuffer that sustrik already knows about it</div>
<div class="line">[Wednesday 23 February 2011] [10:56:41] &lt;andrewvc&gt;    hehe, yeah. This would have been really easy to find btw, if I&#8217;d known about a trick evanphx showed me</div>
<div class="line">[Wednesday 23 February 2011] [10:56:47] &lt;andrewvc&gt;    well, didn&#8217;t show me, we never used ti</div>
<div class="line">[Wednesday 23 February 2011] [10:56:52] &lt;andrewvc&gt;    but told me about</div>
<div class="line">[Wednesday 23 February 2011] [10:56:57] &lt;cremes&gt;      ??</div>
<div class="line">[Wednesday 23 February 2011] [10:57:08] &lt;andrewvc&gt;    apparently dtrace can be set to give a GDB back trace for each syscall</div>
<div class="line">[Wednesday 23 February 2011] [10:57:25] &lt;andrewvc&gt;    I&#8217;m not sure if strace does that, but it would have showed who was calling close()</div>
<div class="line">[Wednesday 23 February 2011] [10:57:27] &lt;cremes&gt;      is that an osx-only trick?</div>
<div class="line">[Wednesday 23 February 2011] [10:57:35] &lt;andrewvc&gt;    perhaps, I didn&#8217;t really look into it</div>
<div class="line">[Wednesday 23 February 2011] [10:57:46] &lt;cremes&gt;      that&#8217;s very cool; i&#8217;ll have to research more details</div>
<div class="line">[Wednesday 23 February 2011] [10:58:02] &lt;andrewvc&gt;    yeah, definitely</div>
<div class="line">[Wednesday 23 February 2011] [11:14:31] &lt;andrewvc&gt;    cremes: so the other aspect of it is, there&#8217;s likely a bug in my code</div>
<div class="line">[Wednesday 23 February 2011] [11:14:53] &lt;andrewvc&gt;    but it&#8217;s not my fault :) somehow I&#8217;m triggering an exception, and EM is catching and dealing with it</div>
<div class="line">[Wednesday 23 February 2011] [11:14:58] &lt;andrewvc&gt;    but I still call a getsockopt</div>
<div class="line">[Wednesday 23 February 2011] [11:15:08] &lt;andrewvc&gt;    which is odd because I never use threads</div>
<div class="line">[Wednesday 23 February 2011] [11:15:17] &lt;andrewvc&gt;    since I&#8217;m in EM</div>
<div class="line">[Wednesday 23 February 2011] [11:15:29] &lt;andrewvc&gt;    could be something in the internals of EM I guess</div>
<div class="line">[Wednesday 23 February 2011] [11:15:47] &lt;cremes&gt;      try wrapping your code in begin/rescue/end and see if you can catch it before EM does</div>
<div class="line">[Wednesday 23 February 2011] [11:15:54] &lt;sustrik&gt;     andrewvc: the problem with ruby binding</div>
<div class="line">[Wednesday 23 February 2011] [11:15:59] &lt;sustrik&gt;     we&#8217;ve spoke about</div>
<div class="line">[Wednesday 23 February 2011] [11:16:02] &lt;sustrik&gt;     is it fixed?</div>
<div class="line">[Wednesday 23 February 2011] [11:16:14] &lt;andrewvc&gt;    hehe, hey I just woke up :)</div>
<div class="line">[Wednesday 23 February 2011] [11:16:32] &lt;sustrik&gt;     just asking</div>
<div class="line">[Wednesday 23 February 2011] [11:16:35] &lt;andrewvc&gt;    I&#8217;ll take a look at it later for sure though</div>
<div class="line">[Wednesday 23 February 2011] [11:16:43] &lt;andrewvc&gt;    yeah, no worries :)</div>
<div class="line">[Wednesday 23 February 2011] [11:16:48] &lt;cremes&gt;      isn&#8217;t this a problem that <em>all</em> language bindings have?</div>
<div class="line">[Wednesday 23 February 2011] [11:17:28] &lt;sustrik&gt;     no idea</div>
<div class="line">[Wednesday 23 February 2011] [11:17:41] &lt;cremes&gt;      andrewvc: ??</div>
<div class="line">[Wednesday 23 February 2011] [11:17:44] &lt;sustrik&gt;     it&#8217;s ruby-ffi, right?</div>
<div class="line">[Wednesday 23 February 2011] [11:18:00] &lt;andrewvc&gt;    lemme look at it again, I was so tired last night, I don&#8217;t recall what it was</div>
<div class="line">[Wednesday 23 February 2011] [11:18:09] &lt;cremes&gt;      if the binding can close the FD of the internal socketpair and 0mq doesn&#8217;t catch it, that&#8217;s a general problem</div>
<div class="line">[Wednesday 23 February 2011] [11:18:20] &lt;andrewvc&gt;    ohhh, we&#8217;re talking about two separate issues</div>
<div class="line">[Wednesday 23 February 2011] [11:18:28] &lt;sustrik&gt;     ah</div>
<div class="line">[Wednesday 23 February 2011] [11:18:30] &lt;cremes&gt;      ok, ignore me then :)</div>
<div class="line">[Wednesday 23 February 2011] [11:18:30] &lt;andrewvc&gt;    so, one issue is this</div>
<div class="line">[Wednesday 23 February 2011] [11:18:39] &lt;cremes&gt;      andrewvc: i&#8217;ll let you do the talking</div>
<div class="line">[Wednesday 23 February 2011] [11:18:43] &lt;sustrik&gt;     i meant be BADFD one</div>
<div class="line">[Wednesday 23 February 2011] [11:18:50] &lt;andrewvc&gt;    oh, so it is the same one</div>
<div class="line">[Wednesday 23 February 2011] [11:18:54] &lt;andrewvc&gt;    well, it&#8217;s not actually the binding</div>
<div class="line">[Wednesday 23 February 2011] [11:19:00] &lt;andrewvc&gt;    it&#8217;s eventmachine, the ruby reactor library</div>
<div class="line">[Wednesday 23 February 2011] [11:19:10] &lt;andrewvc&gt;    it assumes on hitting an exceptional state that you want to close all the FDs</div>
<div class="line">[Wednesday 23 February 2011] [11:19:10] &lt;sustrik&gt;     aha</div>
<div class="line">[Wednesday 23 February 2011] [11:19:13] &lt;andrewvc&gt;    which is its fault</div>
<div class="line">[Wednesday 23 February 2011] [11:19:18] &lt;andrewvc&gt;    but maybe zmq should check for EBADF</div>
<div class="line">[Wednesday 23 February 2011] [11:19:21] &lt;andrewvc&gt;    in mailbox.cpp</div>
<div class="line">[Wednesday 23 February 2011] [11:19:25] &lt;andrewvc&gt;    and print a friendly error message</div>
<div class="line">[Wednesday 23 February 2011] [11:19:31] &lt;sustrik&gt;     there&#8217;s one issue in 0mq core bug trakcer</div>
<div class="line">[Wednesday 23 February 2011] [11:19:33] &lt;andrewvc&gt;    like hey, you shutdown an internal FD I think, don&#8217;t do that</div>
<div class="line">[Wednesday 23 February 2011] [11:19:36] &lt;sustrik&gt;     <a class="reference external" href="https://github.com/zeromq/zeromq2/issues#issue/166">https://github.com/zeromq/zeromq2/issues#issue/166</a></div>
<div class="line">[Wednesday 23 February 2011] [11:19:46] &lt;sustrik&gt;     which looks similar</div>
<div class="line">[Wednesday 23 February 2011] [11:20:05] &lt;sustrik&gt;     can it be possibly related?</div>
<div class="line">[Wednesday 23 February 2011] [11:21:12] &lt;andrewvc&gt;    one sec, brb</div>
<div class="line">[Wednesday 23 February 2011] [11:24:56] &lt;andrewvc&gt;    sustrik: cremes: I don&#8217;t think that&#8217;s related</div>
<div class="line">[Wednesday 23 February 2011] [11:25:01] &lt;andrewvc&gt;    I don&#8217;t see him using ZMQ::FD</div>
<div class="line">[Wednesday 23 February 2011] [11:26:09] &lt;andrewvc&gt;    I&#8217;m about to post to the ML, with a better breakdown of what happened / better organized thoughts</div>
<div class="line">[Wednesday 23 February 2011] [11:41:15] &lt;cremes&gt;      sustrik: what do you think of:  <a class="reference external" href="https://github.com/zeromq/zeromq2/issues#issue/171">https://github.com/zeromq/zeromq2/issues#issue/171</a></div>
<div class="line">[Wednesday 23 February 2011] [12:11:22] &lt;jfkw&gt;        Newb to message-queueing, interested in 0mq, wondered if the following is in scope:</div>
<div class="line">[Wednesday 23 February 2011] [12:12:06] &lt;jfkw&gt;        I have a remote-site BerkelyDB with a high write rate. Need to replicate back to the home office over a not-fast, sometimes unavailable link.</div>
<div class="line">[Wednesday 23 February 2011] [12:14:20] &lt;jfkw&gt;        Does 0mq support reliable in-order delivery and compression of data over the wire? Remote site runs Windows XP, home office will be Linux 2.6+.</div>
<div class="line">[Wednesday 23 February 2011] [12:16:58] &lt;andrewvc&gt;    jfkw compression, no</div>
<div class="line">[Wednesday 23 February 2011] [12:17:02] &lt;andrewvc&gt;    in-order yes</div>
<div class="line">[Wednesday 23 February 2011] [12:17:36] &lt;andrewvc&gt;    as far as unavailable, it should reconnect automatically if using the TCP transport</div>
<div class="line">[Wednesday 23 February 2011] [12:17:43] &lt;andrewvc&gt;    but I&#8217;d test it on your network to be sure</div>
<div class="line">[Wednesday 23 February 2011] [12:18:05] &lt;andrewvc&gt;    you can compress the data yourself before sending it</div>
<div class="line">[Wednesday 23 February 2011] [12:18:20] &lt;andrewvc&gt;    since zmq frames messages, each one could be gzipped</div>
<div class="line">[Wednesday 23 February 2011] [12:19:55] &lt;andrewvc&gt;    as far as DB replication goes though, not sure I&#8217;d just trust all that to ZMQ</div>
<div class="line">[Wednesday 23 February 2011] [12:22:43] &lt;pieterh&gt;     jfkw: have you read the Guide yet?</div>
<div class="line">[Wednesday 23 February 2011] [12:26:31] &lt;jfkw&gt;        andrewvc: ack on BDB replication being nontrivial, won&#8217;t expect the ZMQ to do it for us.</div>
<div class="line">[Wednesday 23 February 2011] [12:26:51] &lt;andrewvc&gt;    cool, yeah I&#8217;d really read the guide</div>
<div class="line">[Wednesday 23 February 2011] [12:27:10] &lt;jfkw&gt;        pieterh: Ah, thanks for suggesting that, I see the link on the first page of Learn now. Missed it the first time through hunting for my specific issue.</div>
<div class="line">[Wednesday 23 February 2011] [12:27:27] &lt;pieterh&gt;     jfkw: let me make that link more visible</div>
<div class="line">[Wednesday 23 February 2011] [14:00:34] &lt;amacleod&gt;    I feel like I must somehow be misusing the Java API.  I keep getting assertions when I try to terminate contexts.</div>
<div class="line">[Wednesday 23 February 2011] [14:00:53] &lt;amacleod&gt;    Now it is &#8220;nbytes == sizeof (command_t)&#8221; in mailbox.cpp:244</div>
<div class="line">[Wednesday 23 February 2011] [14:01:13] &lt;amacleod&gt;    Using git master pulled yesterday.</div>
<div class="line">[Wednesday 23 February 2011] [14:12:24] &lt;pieterh&gt;     it shouldn&#8217;t be possible to crash 0MQ via an API like that... :-/</div>
<div class="line">[Wednesday 23 February 2011] [14:12:39] &lt;amacleod&gt;    I agree :-/</div>
<div class="line">[Wednesday 23 February 2011] [14:13:02] &lt;pieterh&gt;     do you have a simple reproducible case?</div>
<div class="line">[Wednesday 23 February 2011] [14:13:24] &lt;amacleod&gt;    So, what I&#8217;m doing now is running, in the same run-time due to the way my test harnesses work, two separate servers, one after the other.</div>
<div class="line">[Wednesday 23 February 2011] [14:13:35] &lt;amacleod&gt;    pieterh, I do not presently.  I might be able to make one.</div>
<div class="line">[Wednesday 23 February 2011] [14:13:40] &lt;pieterh&gt;     we&#8217;d need that</div>
<div class="line">[Wednesday 23 February 2011] [14:13:46] &lt;pieterh&gt;     an absolute minimal test case</div>
<div class="line">[Wednesday 23 February 2011] [14:14:02] &lt;amacleod&gt;    Is it possible for lingering data from a previous socket to corrupt a new one that binds to the same port?</div>
<div class="line">[Wednesday 23 February 2011] [14:14:05] &lt;pieterh&gt;     sorry, this is not fun when you&#8217;re trying to do other work...</div>
<div class="line">[Wednesday 23 February 2011] [14:14:23] &lt;pieterh&gt;     amacleod: not if the socket is being kept within one thread</div>
<div class="line">[Wednesday 23 February 2011] [14:14:28] &lt;pieterh&gt;     are you moving sockets between threads?</div>
<div class="line">[Wednesday 23 February 2011] [14:14:48] &lt;pieterh&gt;     that is one common cause of 0MQ failures and it obviously can happen in any threaded language</div>
<div class="line">[Wednesday 23 February 2011] [14:14:50] &lt;amacleod&gt;    pieterh, indeed.  Let me see what I can do about creating a minimal test case.</div>
<div class="line">[Wednesday 23 February 2011] [14:15:17] &lt;amacleod&gt;    pieterh, I&#8217;m pretty sure I&#8217;ve gotten it to where I&#8217;m never moving sockets between threads.</div>
<div class="line">[Wednesday 23 February 2011] [14:16:01] &lt;pieterh&gt;     you used to do that?</div>
<div class="line">[Wednesday 23 February 2011] [14:16:47] &lt;amacleod&gt;    Well, that was the cause of my original problem.  I didn&#8217;t think I was using sockets between threads, but all threads were using a single context to create sockets.</div>
<div class="line">[Wednesday 23 February 2011] [14:18:01] &lt;pieterh&gt;     that should be safe</div>
<div class="line">[Wednesday 23 February 2011] [14:18:09] &lt;pieterh&gt;     contexts can be shared</div>
<div class="line">[Wednesday 23 February 2011] [14:18:47] &lt;pieterh&gt;     if a threads create sockets and don&#8217;t pass those to other threads, you&#8217;re not moving sockets between threads</div>
<div class="line">[Wednesday 23 February 2011] [14:19:02] &lt;pieterh&gt;     even that is safe so long as you do not read/write/close from more than one thread</div>
<div class="line">[Wednesday 23 February 2011] [14:23:51] &lt;amacleod&gt;    On second look, I think threading may still be my problem.  All of the actual reading and writing happens in worker threads, which is fine, but then when the test is complete, it calls the close method of my wrapper object, so close would be called from the main thread. :(</div>
<div class="line">[Wednesday 23 February 2011] [14:39:05] &lt;pieterh&gt;     amacleod: yeah, that would crash it</div>
<div class="line">[Wednesday 23 February 2011] [14:42:00] &lt;amacleod&gt;    Threaded concurrency gives me a headache.  Give me a single-threaded select/poll event reactor any day.</div>
<div class="line">[Wednesday 23 February 2011] [14:45:20] &lt;cremes&gt;      amacleod: zmqmachine, but you gotta use ruby ;)</div>
<div class="line">[Wednesday 23 February 2011] [14:45:33] &lt;amacleod&gt;    cremes, :-D  Wish I could.</div>
<div class="line">[Wednesday 23 February 2011] [14:45:46] &lt;amacleod&gt;    It would be cool if Twisted had 0MQ support too.</div>
<div class="line">[Wednesday 23 February 2011] [14:45:47] &lt;pieterh&gt;     amacleod: sounds like you&#8217;re mixing shared-state concurrency with message passing</div>
<div class="line">[Wednesday 23 February 2011] [14:45:53] &lt;pieterh&gt;     that is usually a terrible idea</div>
<div class="line">[Wednesday 23 February 2011] [14:46:51] &lt;pieterh&gt;     I&#8217;ve pushed a whitepaper for an open source data plant: <a class="reference external" href="http://www.zeromq.org/whitepapers:open-source-data-plant">http://www.zeromq.org/whitepapers:open-source-data-plant</a></div>
<div class="line">[Wednesday 23 February 2011] [14:46:55] &lt;amacleod&gt;    pieterh, I know it is.  Maybe I can turn message passing to my advantage.</div>
<div class="line">[Wednesday 23 February 2011] [14:47:01] &lt;pieterh&gt;     cremes: this might interest you...</div>
<div class="line">[Wednesday 23 February 2011] [14:48:05] &lt;pieterh&gt;     amacleod: what transport are you using to/from workers?</div>
<div class="line">[Wednesday 23 February 2011] [14:48:14] &lt;pieterh&gt;     tcp?</div>
<div class="line">[Wednesday 23 February 2011] [14:48:47] &lt;amacleod&gt;    Well.. I&#8217;m using TCP for the client/server communication.</div>
<div class="line">[Wednesday 23 February 2011] [14:48:49] &lt;cremes&gt;      pieterh: what might interest me?</div>
<div class="line">[Wednesday 23 February 2011] [14:49:00] &lt;pieterh&gt;     see the line just above</div>
<div class="line">[Wednesday 23 February 2011] [14:49:15] &lt;cremes&gt;      oh, the data plant thing? i&#8217;ll look at it...</div>
<div class="line">[Wednesday 23 February 2011] [14:49:35] &lt;amacleod&gt;    What I&#8217;m just now thinking is that maybe I should have the stuff inside the server do like the pattern from your recent example&#8211;inproc router to router (or dealer to dealer?).</div>
<div class="line">[Wednesday 23 February 2011] [14:49:42] &lt;pieterh&gt;     cremes: great</div>
<div class="line">[Wednesday 23 February 2011] [14:50:16] &lt;pieterh&gt;     amacleod: what example, there are so many...?</div>
<div class="line">[Wednesday 23 February 2011] [14:50:28] &lt;pieterh&gt;     use inproc when you know the server will always be one process</div>
<div class="line">[Wednesday 23 February 2011] [14:50:42] &lt;pieterh&gt;     use tcp when you want to in future move workers to other boxes or processes</div>
<div class="line">[Wednesday 23 February 2011] [14:51:13] &lt;amacleod&gt;    <a class="reference external" href="http://zguide.zeromq.org/chapter:all#toc51">http://zguide.zeromq.org/chapter:all#toc51</a></div>
<div class="line">[Wednesday 23 February 2011] [14:51:46] &lt;amacleod&gt;    Part of the trouble is I need to federate disparate connection types.</div>
<div class="line">[Wednesday 23 February 2011] [14:51:58] &lt;pieterh&gt;     right, so clients and servers talk over tcp, each has their own context, and manage their own sockets</div>
<div class="line">[Wednesday 23 February 2011] [14:52:13] &lt;pieterh&gt;     that sounds painful!</div>
<div class="line">[Wednesday 23 February 2011] [14:52:45] &lt;amacleod&gt;    Yeah.  Square pegs, round holes.  Pain pain pain.</div>
<div class="line">[Wednesday 23 February 2011] [15:01:50] &lt;cremes&gt;      pieterh: i built a (small) whaleshark and didn&#8217;t even know it!</div>
<div class="line">[Wednesday 23 February 2011] [15:01:53] &lt;cremes&gt;      :)</div>
<div class="line">[Wednesday 23 February 2011] [15:02:03] &lt;pieterh&gt;     cremes: :-)</div>
<div class="line">[Wednesday 23 February 2011] [15:03:00] &lt;cremes&gt;      pieterh: i&#8217;m wondering if i can help you with a C repro of this:  <a class="reference external" href="https://github.com/zeromq/zeromq2/issues#issue/171">https://github.com/zeromq/zeromq2/issues#issue/171</a></div>
<div class="line">[Wednesday 23 February 2011] [15:03:15] &lt;cremes&gt;      it&#8217;s preventing my whaleshark from running for more than about 6 hours before exhausting memory</div>
<div class="line">[Wednesday 23 February 2011] [15:03:21] &lt;cremes&gt;      :</div>
<div class="line">[Wednesday 23 February 2011] [15:04:26] &lt;pieterh&gt;     when you say, &#8220;if I can help you&#8221;, you mean &#8220;if you can help me&#8221;?</div>
<div class="line">[Wednesday 23 February 2011] [15:05:05] &lt;cremes&gt;      um, yeah!</div>
<div class="line">[Wednesday 23 February 2011] [15:05:15] &lt;cremes&gt;      and by extension, the whole universe of 0mq users!</div>
<div class="line">[Wednesday 23 February 2011] [15:05:24] &lt;pieterh&gt;     of course, of course...</div>
<div class="line">[Wednesday 23 February 2011] [15:05:28] &lt;cremes&gt;      heh</div>
<div class="line">[Wednesday 23 February 2011] [15:05:54] &lt;pieterh&gt;     i&#8217;m mentally filtering out all that reactor stuff...</div>
<div class="line">[Wednesday 23 February 2011] [15:06:01] &lt;CIA-21&gt;      jzmq: 03Alois Blaka 07master * r013828f 10/ (7 files in 3 dirs): Merge remote branch &#8216;orig/master&#8217; - <a class="reference external" href="http://bit.ly/eaOuPN">http://bit.ly/eaOuPN</a></div>
<div class="line">[Wednesday 23 February 2011] [15:06:06] &lt;CIA-21&gt;      jzmq: 03Alois Blaka 07master * r086899d 10/ (2 files): Poll timeout in ZMQQueue and ZMQForwarder changed from 250 usec to 250 msec. - <a class="reference external" href="http://bit.ly/dP4yAQ">http://bit.ly/dP4yAQ</a></div>
<div class="line">[Wednesday 23 February 2011] [15:06:07] &lt;CIA-21&gt;      jzmq: 03Alois Blaka 07master * r522d747 10/ (2 files): Fixed termination of ZMQForwarder and ZMQQueue tests. - <a class="reference external" href="http://bit.ly/dOWVmj">http://bit.ly/dOWVmj</a></div>
<div class="line">[Wednesday 23 February 2011] [15:06:20] &lt;cremes&gt;      pieterh: the 3 steps i list are pretty much the meat of the issue</div>
<div class="line">[Wednesday 23 February 2011] [15:06:38] &lt;pieterh&gt;     ok, tomorrow, I want to catch a movie this evening</div>
<div class="line">[Wednesday 23 February 2011] [15:06:40] &lt;cremes&gt;      i repro&#8217;ed it using my reactor since all the threading stuff is abstracted away for me</div>
<div class="line">[Wednesday 23 February 2011] [15:06:50] &lt;cremes&gt;      pieterh: no worries...</div>
<div class="line">[Wednesday 23 February 2011] [15:06:57] &lt;mikko&gt;       cremes: are you sure that this is not ruby gc issue?</div>
<div class="line">[Wednesday 23 February 2011] [15:06:57] &lt;pieterh&gt;     I&#8217;ll make the case you explained, we&#8217;ll see if it reproduces the problem or not</div>
<div class="line">[Wednesday 23 February 2011] [15:08:04] &lt;dijix&gt;       I&#8217;ve got something that should be simple giving me problems - something I usually take to mean I have a fundamental misunderstanding.</div>
<div class="line">[Wednesday 23 February 2011] [15:08:17] &lt;mikko&gt;       maybe not</div>
<div class="line">[Wednesday 23 February 2011] [15:09:04] &lt;dijix&gt;       I can set up a REQ/REP - REQ connects to bound REP.  I can send from REQ, receive at REP and send back to REQ - no problems.</div>
<div class="line">[Wednesday 23 February 2011] [15:10:16] &lt;dijix&gt;       Changing to REQ/XREP - I get a three-part message at XREP from the same simple Send from REQ - but I cannot seem to send anything at all back to the REQ.  even if on that side, I RecvAll, I cannot seem to get anything.</div>
<div class="line">[Wednesday 23 February 2011] [15:11:47] &lt;cremes&gt;      mikko: i am nearly positive; this behavior is the same across 3 different ruby runtimes each with completely different GC implementations</div>
<div class="line">[Wednesday 23 February 2011] [15:12:17] &lt;cremes&gt;      also, the ruby heap isn&#8217;t growing; top will show the rsize as (for example) 1GB but dumping the ruby heap</div>
<div class="line">[Wednesday 23 February 2011] [15:12:30] &lt;cremes&gt;      only produces around 100MB; where is the other 900MB?</div>
<div class="line">[Wednesday 23 February 2011] [15:13:04] &lt;cremes&gt;      but the only way to know for sure is to repro in C</div>
<div class="line">[Wednesday 23 February 2011] [15:14:54] &lt;cremes&gt;      dijix: read chapter 3 (advanced request-reply) in the guide</div>
<div class="line">[Wednesday 23 February 2011] [15:15:16] &lt;cremes&gt;      dijix: it will explain how to deal with the xrep envelope and how to properly return a reply with it</div>
<div class="line">[Wednesday 23 February 2011] [15:16:47] &lt;mikko&gt;       cremes: forwarder device is the one that is problematic?</div>
<div class="line">[Wednesday 23 February 2011] [15:20:26] &lt;cremes&gt;      mikko: no, i don&#8217;t think it&#8217;s specific to the device</div>
<div class="line">[Wednesday 23 February 2011] [15:20:41] &lt;cremes&gt;      but using one is the easiest way to isolate the problem and see the memory growth</div>
<div class="line">[Wednesday 23 February 2011] [15:20:59] &lt;dijix&gt;       cremes: Thanks - I was trying to figure it out from info in Chap 2.</div>
<div class="line">[Wednesday 23 February 2011] [15:21:09] &lt;cremes&gt;      it appears to me that some resource isn&#8217;t freed when there are rapid connect/disconnect operations going on</div>
<div class="line">[Wednesday 23 February 2011] [15:21:32] &lt;cremes&gt;      dijix: you are welcome; once you figure the envelope/framing out, it&#8217;s actually pretty cool</div>
<div class="line">[Wednesday 23 February 2011] [15:22:47] &lt;pieterh&gt;     cremes: I&#8217;ll do that tomorrow, np.</div>
<div class="line">[Wednesday 23 February 2011] [15:23:04] &lt;pieterh&gt;     cyat, /me is off</div>
<div class="line">[Wednesday 23 February 2011] [15:23:07] &lt;mikko&gt;       pieterh: enjoy</div>
<div class="line">[Wednesday 23 February 2011] [15:23:16] &lt;pieterh&gt;     mikko: thanks :-)</div>
<div class="line">[Wednesday 23 February 2011] [15:23:31] &lt;cremes&gt;      enjoy your movie!</div>
<div class="line">[Wednesday 23 February 2011] [15:56:49] &lt;ljackson&gt;    anyone know if many threads using push socket each with HWM and SWAP is a valid use case ?</div>
<div class="line">[Wednesday 23 February 2011] [15:57:11] &lt;ljackson&gt;    appears that (swap) it is not thread safe ....</div>
<div class="line">[Wednesday 23 February 2011] [15:57:13] &lt;ljackson&gt;    2.1.1</div>
<div class="line">[Wednesday 23 February 2011] [15:58:12] &lt;mikko&gt;       ljackson: you mean threads concurrently accessing push socket?</div>
<div class="line">[Wednesday 23 February 2011] [15:59:48] &lt;ljackson&gt;    no one push socket per thread</div>
<div class="line">[Wednesday 23 February 2011] [15:59:58] &lt;ljackson&gt;    and having HWM and SWAP enabled on them</div>
<div class="line">[Wednesday 23 February 2011] [16:00:27] &lt;ljackson&gt;    appears to have a segfault as the context is sharing swap for the threads without locking i think</div>
<div class="line">[Wednesday 23 February 2011] [16:00:58] &lt;mikko&gt;       i thought there was atomic counter for swap instances</div>
<div class="line">[Wednesday 23 February 2011] [16:01:04] &lt;mikko&gt;       each socket having their own</div>
<div class="line">[Wednesday 23 February 2011] [16:01:21] &lt;mikko&gt;       have you got a small reproducable test-case?</div>
<div class="line">[Wednesday 23 February 2011] [16:01:24] &lt;ljackson&gt;    <a class="reference external" href="http://pastebin.com/JV1PPyt0">http://pastebin.com/JV1PPyt0</a></div>
<div class="line">[Wednesday 23 February 2011] [16:01:26] &lt;ljackson&gt;    no</div>
<div class="line">[Wednesday 23 February 2011] [16:01:47] &lt;ljackson&gt;    just ran across it and wanted to know if it was valid to have swap/hwm per socket in threads w/ single contet</div>
<div class="line">[Wednesday 23 February 2011] [16:01:49] &lt;ljackson&gt;    er context</div>
<div class="line">[Wednesday 23 February 2011] [16:01:56] &lt;ljackson&gt;    for PUSH</div>
<div class="line">[Wednesday 23 February 2011] [16:03:05] &lt;ljackson&gt;    there were 4 threads each with their own PUSH socket to the same tcp address all with HWM of 10k and SWAP of 25Mb</div>
<div class="line">[Wednesday 23 February 2011] [16:03:26] &lt;ljackson&gt;    and one of them caused that segfault</div>
<div class="line">[Wednesday 23 February 2011] [16:04:22] &lt;ljackson&gt;    yep looks like they create 4 swap files</div>
<div class="line">[Wednesday 23 February 2011] [16:04:28] &lt;ljackson&gt;    so odd that it segfaulted</div>
<div class="line">[Wednesday 23 February 2011] [16:05:43] &lt;mikko&gt;       i mean the actual code</div>
<div class="line">[Wednesday 23 February 2011] [16:06:01] &lt;ljackson&gt;    yeah If I can figure out how to reproduce I will create a test bit of code</div>
<div class="line">[Wednesday 23 February 2011] [16:06:10] &lt;mikko&gt;       cool</div>
<div class="line">[Wednesday 23 February 2011] [16:06:19] &lt;ljackson&gt;    just wanted to know if the use case was valid now I see the 4 swap files must be something odd/else</div>
<div class="line">[Wednesday 23 February 2011] [16:06:19] &lt;mikko&gt;       can you strace the process ?</div>
<div class="line">[Wednesday 23 February 2011] [16:06:29] &lt;mikko&gt;       to see what kind of swap files are being created</div>
<div class="line">[Wednesday 23 February 2011] [16:06:37] &lt;ljackson&gt;    i see them in the directory</div>
<div class="line">[Wednesday 23 February 2011] [16:06:39] &lt;mikko&gt;       it should be valid case</div>
<div class="line">[Wednesday 23 February 2011] [16:06:40] &lt;ljackson&gt;    as .swap</div>
<div class="line">[Wednesday 23 February 2011] [16:07:12] &lt;ljackson&gt;    with zmq_&lt;master pid&gt;_&lt;thread_id&gt;.swap</div>
<div class="line">[Wednesday 23 February 2011] [16:07:23] &lt;ljackson&gt;    er s/thread_id/socket instance/</div>
<div class="line">[Wednesday 23 February 2011] [16:07:50] &lt;ljackson&gt;    is there a socketopt to specifiy where the swap file would be ?</div>
<div class="line">[Wednesday 23 February 2011] [16:08:42] &lt;mikko&gt;       no, not at the moment</div>
<div class="line">[Wednesday 23 February 2011] [16:09:10] &lt;mikko&gt;       you can for example chdir(&#8220;/tmp&#8221;); at the beginning</div>
<div class="line">[Wednesday 23 February 2011] [16:11:34] &lt;ljackson&gt;    ok fair nuf</div>
<div class="line">[Wednesday 23 February 2011] [16:11:54] &lt;ljackson&gt;    what about mmap&#8217;ed vs file</div>
<div class="line">[Wednesday 23 February 2011] [16:13:53] &lt;ljackson&gt;    it appears to pause the HWM/SWAP&#8217;ed socket&#8217;s send method after it reaches the max, this must be dependant on the socket type ? e.g. pub would discard where as res/req &amp; push/pull ...etc won&#8217;t ?</div>
<div class="line">[Wednesday 23 February 2011] [16:14:19] &lt;mikko&gt;       yes, the hwm behaviour is socket dependent</div>
<div class="line">[Wednesday 23 February 2011] [16:14:54] &lt;mikko&gt;       we have had a discussions about swap</div>
<div class="line">[Wednesday 23 February 2011] [16:15:31] &lt;mikko&gt;       i think we came to a conclusion that speed at that point is not the primary concern</div>
<div class="line">[Wednesday 23 February 2011] [16:16:25] &lt;mikko&gt;       as initially you buffer into memory, then into disc as secondary thing</div>
<div class="line">[Wednesday 23 February 2011] [16:18:36] &lt;dijix&gt;       cremes: I&#8217;ve got the XREP message envelopes figured out - thanks for your help</div>
<div class="line">[Wednesday 23 February 2011] [16:19:20] &lt;cremes&gt;      dijix: glad to hear it!</div>
<div class="line">[Wednesday 23 February 2011] [16:25:39] &lt;dijix&gt;       cremes: Is there any other difference between using REQ/XREP versus PAIR/XREP, other than the empty message portion between the payload and the address envelopes?</div>
<div class="line">[Wednesday 23 February 2011] [16:26:43] &lt;cremes&gt;      PAIR is for point-to-point communications; it should <em>only</em> be used with another PAIR socket</div>
<div class="line">[Wednesday 23 February 2011] [16:26:49] &lt;cremes&gt;      therefore PAIR/XREP is illegal</div>
<div class="line">[Wednesday 23 February 2011] [16:26:58] &lt;cremes&gt;      though the lib won&#8217;t complain</div>
<div class="line">[Wednesday 23 February 2011] [16:27:07] &lt;dijix&gt;       true - and it seems to behave</div>
<div class="line">[Wednesday 23 February 2011] [16:51:21] &lt;dijix&gt;       cremes: Strange - for REQ/XREP - if I set the Identity explicitly on the REQ, the response works, but if I allow it to generate a UUID, it doesn&#8217;t.  on the XREP side, I&#8217;m breaking down the RecvAll into three parts, the UUID, empty and payload.  Then on the response, I&#8217;m contructing a three-part reply using that UUID, and empty message, and the response message.</div>
<div class="line">[Wednesday 23 February 2011] [17:36:21] topic #fmcg ^&lt; JeriBunch MultiStream is best viewed in this decade <a class="reference external" href="http://is.gd/glTc1">http://is.gd/glTc1</a> &gt;^^&lt; Jeri&#8217;s stream is usually the speechbot &gt;^^&lt; Urlbot help at <a class="reference external" href="http://is.gd/bsLwZX">http://is.gd/bsLwZX</a> &gt;^^&lt; SpeechKrafter Voices at <a class="reference external" href="http://is.gd/xZl5fV">http://is.gd/xZl5fV</a> &gt;^^&lt; FMCG Forums at <a class="reference external" href="http://is.gd/cHCD75">http://is.gd/cHCD75</a> &gt;^^&lt; TileBot Commands at <a class="reference external" href="http://is.gd/g1Yu5">http://is.gd/g1Yu5</a> &gt;^^&lt; This channel was created for the open sharing of ideas.  Did you bring a hack?&gt;</div>
<div class="line">[Wednesday 23 February 2011] [17:44:31] Notice        -NickServ- This nickname is registered. Please choose a different nickname, or identify via /msg NickServ identify &lt;password&gt;.</div>
<div class="line">[Wednesday 23 February 2011] [17:44:31] Notice        -NickServ- You are now identified for travlr.</div>
<div class="line">[Wednesday 23 February 2011] [17:44:36] Notice        -ChanServ- [#qt] Here are the rules for #qt: (1) Don&#8217;t just join, ask, and quit - stay around and answer questions yourself! (2) Be patient, people may not see your question right away.</div>
<div class="line">[Wednesday 23 February 2011] [17:47:59] &lt;dijix&gt;       cremes: Did you see that comment from me just before the netsplit?  regarding explicitly assigning the IDENTITY on the REQ socket before sending to XREP?  If I set it, the return message I contruct using it works, but not if I use the UUID created automatically</div>
<div class="line">[Wednesday 23 February 2011] [17:48:23] &lt;<a href="#id1659"><span class="problematic" id="id1660">dg_</span></a>&gt; Hello &#8212; can someone confirm that zmq tcp sockets will interoperate with ordinary tcp sockets?</div>
<div class="line">[Wednesday 23 February 2011] [17:48:24] &lt;cremes&gt;      dijix: nope, didn&#8217;t see the comment</div>
<div class="line">[Wednesday 23 February 2011] [17:48:55] &lt;cremes&gt;      <a href="#id1661"><span class="problematic" id="id1662">dg_</span></a>: no, they won&#8217;t; 0mq sockets are built on top of tcp sockets but use their own framing protocol</div>
<div class="line">[Wednesday 23 February 2011] [17:49:02] &lt;<a href="#id1663"><span class="problematic" id="id1664">dg_</span></a>&gt; Well, pants.</div>
<div class="line">[Wednesday 23 February 2011] [17:49:19] &lt;cremes&gt;      your tcp socket at the other end would have to understand this framing protocol (effectively duplicating 0mq logic)</div>
<div class="line">[Wednesday 23 February 2011] [17:49:28] &lt;cremes&gt;      <a href="#id1665"><span class="problematic" id="id1666">dg_</span></a>: take a look at mongrel2</div>
<div class="line">[Wednesday 23 February 2011] [17:49:44] &lt;cremes&gt;      it can act as a proxy between 0mq and http; perhaps it does the same for tcp</div>
<div class="line">[Wednesday 23 February 2011] [17:50:03] &lt;cremes&gt;      dijix: that doesn&#8217;t make any sense</div>
<div class="line">[Wednesday 23 February 2011] [17:50:16] &lt;cremes&gt;      you should gist/pastie your example code that illustrates your problem</div>
<div class="line">[Wednesday 23 February 2011] [17:50:28] &lt;<a href="#id1667"><span class="problematic" id="id1668">dg_</span></a>&gt; TBH I think I can work with zmq anyway &#8212; but does anyone know a telnet/netcat equivalent I can use to connect to my service so I can send it test data?</div>
<div class="line">[Wednesday 23 February 2011] [17:51:43] &lt;cremes&gt;      <a href="#id1669"><span class="problematic" id="id1670">dg_</span></a>: i haven&#8217;t heard of one; maybe that&#8217;s a good first project to get your feet wet with 0mq</div>
<div class="line">[Wednesday 23 February 2011] [17:52:07] &lt;dijix&gt;       cremes: I know.  Okay - REQ/XREP.  REQ sets IDENTITY to a value and just sends a simple text message.  XREP receives three-part message with the designated IDENTITY value in the first part.</div>
<div class="line">[Wednesday 23 February 2011] [17:52:19] &lt;cremes&gt;      good so far</div>
<div class="line">[Wednesday 23 February 2011] [17:52:34] &lt;<a href="#id1671"><span class="problematic" id="id1672">dg_</span></a>&gt; Yay. Sigh.</div>
<div class="line">[Wednesday 23 February 2011] [17:52:50] &lt;<a href="#id1673"><span class="problematic" id="id1674">dg_</span></a>&gt; Well, I need a client to talk to my server anyway, so I might as well as do that bit now. Thanks anyway.</div>
<div class="line">[Wednesday 23 February 2011] [17:52:52] &lt;cremes&gt;      <a href="#id1675"><span class="problematic" id="id1676">dg_</span></a>: try asking on the mailing list if such a tool exists; it might and i just don&#8217;t know about it</div>
<div class="line">[Wednesday 23 February 2011] [17:52:52] &lt;dijix&gt;       cremes: Then XREP contructs new message using that value for the first part, empty, and a response.  It is successfully received by REQ.</div>
<div class="line">[Wednesday 23 February 2011] [17:53:04] &lt;cremes&gt;      ok</div>
<div class="line">[Wednesday 23 February 2011] [17:53:54] &lt;cremes&gt;      dijix: take a look here:  <a class="reference external" href="http://api.zero.mq/master:zmq-setsockopt">http://api.zero.mq/master:zmq-setsockopt</a></div>
<div class="line">[Wednesday 23 February 2011] [17:54:14] &lt;dijix&gt;       cremes: However, if I do not explicitly set the IDENTITY, I still receive a three-parter on XREP, with the auto-gen UUID for the first part.  If I follow everything else and use that UUID for the first part on the response message, REQ never receives it.</div>
<div class="line">[Wednesday 23 February 2011] [17:54:15] &lt;cremes&gt;      note that the system-set IDENTITY starts with a null byte; perhaps you aren&#8217;t copying the whole IDENTITY?</div>
<div class="line">[Wednesday 23 February 2011] [17:55:32] &lt;dijix&gt;       cremes: Could be - I&#8217;ll mess with the Encoding</div>
<div class="line">[Wednesday 23 February 2011] [17:55:57] &lt;cremes&gt;      dijix: show the code; just put it up in a pastie; maybe i&#8217;ll see something you are overlooking</div>
<div class="line">[Wednesday 23 February 2011] [17:57:44] &lt;<a href="#id1677"><span class="problematic" id="id1678">dg_</span></a>&gt; Does anyone know about the Lua bindings?</div>
<div class="line">[Wednesday 23 February 2011] [18:00:18] &lt;<a href="#id1679"><span class="problematic" id="id1680">dg_</span></a>&gt; Um, is zmq 2.0.6 really ancient?</div>
<div class="line">[Wednesday 23 February 2011] [18:00:32] &lt;cremes&gt;      <a href="#id1681"><span class="problematic" id="id1682">dg_</span></a>: it&#8217;s pretty old; use the just-released 2.1.1</div>
<div class="line">[Wednesday 23 February 2011] [18:00:43] &lt;<a href="#id1683"><span class="problematic" id="id1684">dg_</span></a>&gt; Unfortunately that&#8217;s what Ubuntu&#8217;s got.</div>
<div class="line">[Wednesday 23 February 2011] [18:01:17] &lt;cremes&gt;      well, few people are going to want to help a newcomer work through the old and mostly fixed bugs from 2.0.6 :P</div>
<div class="line">[Wednesday 23 February 2011] [18:01:36] &lt;cremes&gt;      so i recommend you dload the source and compile it yourself</div>
<div class="line">[Wednesday 23 February 2011] [18:07:26] &lt;<a href="#id1685"><span class="problematic" id="id1686">dg_</span></a>&gt; Strewth. Even Debian sid&#8217;s version is only 2.0.10.</div>
<div class="line">[Wednesday 23 February 2011] [18:20:24] &lt;<a href="#id1687"><span class="problematic" id="id1688">dg_</span></a>&gt; What does the thread pool argument to zmq_init() actually mean? How do I know what to set it to?</div>
<div class="line">[Wednesday 23 February 2011] [18:21:32] &lt;<a href="#id1689"><span class="problematic" id="id1690">dg_</span></a>&gt; The examples all seem to use 1; is this safe for a single-threaded program?</div>
<div class="line">[Wednesday 23 February 2011] [18:23:08] &lt;cremes&gt;      <a href="#id1691"><span class="problematic" id="id1692">dg_</span></a>: it&#8217;s a dedicated i/o thread for reading/writing to the network</div>
<div class="line">[Wednesday 23 February 2011] [18:23:34] &lt;cremes&gt;      it&#8217;s usually set to 1 because unless you are pumping out data onto 10GB ethernet it is unlikely you will saturate one core/cpu with i/o</div>
<div class="line">[Wednesday 23 February 2011] [18:24:22] &lt;<a href="#id1693"><span class="problematic" id="id1694">dg_</span></a>&gt; Right. Just checking it wasn&#8217;t doing something evil like using blocking I/O with one thread per concurrent operation.</div>
<div class="line">[Wednesday 23 February 2011] [18:28:19] &lt;dijix&gt;       cremes: Got it - I was converting everythign to Encoding.ASCII, and then also using that encoding for contructing the byte arrays for SendMore..  I just have to grab the first portion as a byte array and not touch it.  It worked before because what I was setting the IDENTITY to didn&#8217;t have anything that wasn&#8217;t ASCII.</div>
<div class="line">[Wednesday 23 February 2011] [18:28:44] &lt;cremes&gt;      dijix: ah ha</div>
<div class="line">[Wednesday 23 February 2011] [18:28:54] &lt;cremes&gt;      or is that &#8220;aha&#8221;?</div>
<div class="line">[Wednesday 23 February 2011] [18:30:02] &lt;dijix&gt;       cremes: I think it&#8217;s time to leave the office, carrying this day&#8217;s 0mq successes proudly :)</div>
<div class="line">[Wednesday 23 February 2011] [18:30:21] &lt;cremes&gt;      dijix: huzzah!</div>
<div class="line">[Wednesday 23 February 2011] [18:30:27] &lt;amacleod&gt;    When you connect dealer to dealer (XREQ to XREQ) is there any way for the XREQ that used &#8220;bind&#8221; to send a reply?</div>
<div class="line">[Wednesday 23 February 2011] [18:30:51] &lt;cremes&gt;      amacleod: why would you connect XREQ to XREQ?</div>
<div class="line">[Wednesday 23 February 2011] [18:30:59] &lt;dijix&gt;       cremes: Though why .NET won&#8217;t take bytes convert them to a string, and then convert that back to bytes using the same encoding, and end up with the original byte array is a question for another day.. :/</div>
<div class="line">[Wednesday 23 February 2011] [18:31:11] &lt;amacleod&gt;    <a class="reference external" href="http://zguide.zeromq.org/chapter:all#toc51">http://zguide.zeromq.org/chapter:all#toc51</a></div>
<div class="line">[Wednesday 23 February 2011] [18:31:51] &lt;cremes&gt;      amacleod: that shows two XREQ/DEALER clients talking to a single XREP/ROUTER server</div>
<div class="line">[Wednesday 23 February 2011] [18:31:56] &lt;cremes&gt;      they aren&#8217;t talking to each other directly</div>
<div class="line">[Wednesday 23 February 2011] [18:32:11] &lt;amacleod&gt;    cremes, further down it shows inproc XREQ to XREQ.</div>
<div class="line">[Wednesday 23 February 2011] [18:32:47] &lt;cremes&gt;      amacleod: i don&#8217;t see it</div>
<div class="line">[Wednesday 23 February 2011] [18:32:59] &lt;amacleod&gt;    Figure 47?</div>
<div class="line">[Wednesday 23 February 2011] [18:33:13] &lt;amacleod&gt;    &#8220;Detail of async server&#8221;.</div>
<div class="line">[Wednesday 23 February 2011] [18:33:44] &lt;cremes&gt;      huh... i don&#8217;t know then</div>
<div class="line">[Wednesday 23 February 2011] [18:34:06] &lt;cremes&gt;      i&#8217;ve never seen that... you&#8217;ll have to ask pieterh tomorrow or post a question to the ML</div>
<div class="line">[Wednesday 23 February 2011] [18:37:11] &lt;<a href="#id1695"><span class="problematic" id="id1696">dg_</span></a>&gt; Woot. I&#8217;m now bouncing a message off my server and getting a reply.</div>
<div class="line">[Wednesday 23 February 2011] [18:37:19] &lt;<a href="#id1697"><span class="problematic" id="id1698">dg_</span></a>&gt; Thanks!</div>
<div class="line">[Wednesday 23 February 2011] [18:38:14] &lt;<a href="#id1699"><span class="problematic" id="id1700">dg_</span></a>&gt; One additional question: if I&#8217;m sending a multipart message with ZMQ_SNDMORE, is every part copied and stored before being sent, or are they sent out as I produce them?</div>
<div class="line">[Wednesday 23 February 2011] [18:38:53] &lt;<a href="#id1701"><span class="problematic" id="id1702">dg_</span></a>&gt; e.g. my app&#8217;s messages are actually very long lists of small strings. Like 5000. Can I send each one as a single part or should I buffer them up into a single block?</div>
<div class="line">[Wednesday 23 February 2011] [18:51:47] &lt;cremes&gt;      <a href="#id1703"><span class="problematic" id="id1704">dg_</span></a>: 0mq is a message queue; just send &#8216;em and it will do the buffering for you</div>
<div class="line">[Wednesday 23 February 2011] [21:30:45] &lt;<a href="#id1705"><span class="problematic" id="id1706">gdan_</span></a>&gt;       hello.  trying to install on OSX.  it says to intall pkg-config.  does anyone know where the proper place to get pkg-config is?</div>
<div class="line">[Wednesday 23 February 2011] [21:31:37] &lt;Steve-o&gt;     its not required for the 2.1.0 beta</div>
<div class="line">[Wednesday 23 February 2011] [21:31:48] &lt;Steve-o&gt;     it&#8217;s a part of GLib</div>
<div class="line">[Wednesday 23 February 2011] [21:32:56] &lt;<a href="#id1707"><span class="problematic" id="id1708">gdan_</span></a>&gt;       i&#8217;m installing the lastest stab release  zeromq-2.0.10</div>
<div class="line">[Wednesday 23 February 2011] [21:33:04] &lt;Steve-o&gt;     this should help:  <a class="reference external" href="http://stackoverflow.com/questions/3522248/how-do-i-compile-jzmq-for-zeromq-on-osx">http://stackoverflow.com/questions/3522248/how-do-i-compile-jzmq-for-zeromq-on-osx</a></div>
<div class="line">[Wednesday 23 February 2011] [21:33:20] &lt;<a href="#id1709"><span class="problematic" id="id1710">gdan_</span></a>&gt;       thNKA</div>
<div class="line">[Wednesday 23 February 2011] [21:33:22] &lt;<a href="#id1711"><span class="problematic" id="id1712">gdan_</span></a>&gt;       THANKS</div>
<div class="line">[Wednesday 23 February 2011] [21:38:37] &lt;Steve-o&gt;     <a href="#id1713"><span class="problematic" id="id1714">gdan_</span></a>: but I&#8217;d recommend the 2.1.0 as a lot of changes have ocurred</div>
<div class="line">[Wednesday 23 February 2011] [21:42:14] &lt;<a href="#id1715"><span class="problematic" id="id1716">gdan_</span></a>&gt;       appears to have worked.  thanks.  will test tomorrow :)</div>
<div class="line">[Wednesday 23 February 2011] [22:19:37] &lt;cremes&gt;      gdan: with macports, install libtool and pkg-config; you can then install from github master on osx</div>
<div class="line">[Thursday 24 February 2011] [03:43:43] &lt;Evet&gt; mongrel2 is really cool</div>
<div class="line">[Thursday 24 February 2011] [03:58:57] &lt;<a href="#id1717"><span class="problematic" id="id1718">pieterh_</span></a>&gt;     sustrik: ping</div>
<div class="line">[Thursday 24 February 2011] [04:00:40] &lt;sustrik&gt;      pong</div>
<div class="line">[Thursday 24 February 2011] [04:05:51] &lt;<a href="#id1719"><span class="problematic" id="id1720">pieterh_</span></a>&gt;     I&#8217;ve set up a link shortening service at zero.mq</div>
<div class="line">[Thursday 24 February 2011] [04:06:14] &lt;sustrik&gt;      what&#8217;s that?</div>
<div class="line">[Thursday 24 February 2011] [04:06:25] &lt;<a href="#id1721"><span class="problematic" id="id1722">pieterh_</span></a>&gt;     e.g. <a class="reference external" href="http://zero.mq/tips">http://zero.mq/tips</a></div>
<div class="line">[Thursday 24 February 2011] [04:06:42] &lt;<a href="#id1723"><span class="problematic" id="id1724">pieterh_</span></a>&gt;     jumps to a long URL on zeromq.org somewhere</div>
<div class="line">[Thursday 24 February 2011] [04:06:54] &lt;<a href="#id1725"><span class="problematic" id="id1726">pieterh_</span></a>&gt;     useful for twitter and such</div>
<div class="line">[Thursday 24 February 2011] [04:07:24]         * sustrik has no idea how it works</div>
<div class="line">[Thursday 24 February 2011] [04:07:42] &lt;<a href="#id1727"><span class="problematic" id="id1728">pieterh_</span></a>&gt;     :-) you&#8217;ve got an invitation to join the zero.mq site</div>
<div class="line">[Thursday 24 February 2011] [04:07:44] &lt;<a href="#id1729"><span class="problematic" id="id1730">pieterh_</span></a>&gt;     accept it</div>
<div class="line">[Thursday 24 February 2011] [04:08:08] &lt;<a href="#id1731"><span class="problematic" id="id1732">pieterh_</span></a>&gt;     then when you want a shortcut, go to that page (e.g. zero.mq/sustrik)</div>
<div class="line">[Thursday 24 February 2011] [04:08:12] &lt;<a href="#id1733"><span class="problematic" id="id1734">pieterh_</span></a>&gt;     edit, save</div>
<div class="line">[Thursday 24 February 2011] [04:09:31] &lt;sustrik&gt;      aha</div>
<div class="line">[Thursday 24 February 2011] [04:09:34] &lt;sustrik&gt;      thanks</div>
<div class="line">[Thursday 24 February 2011] [04:10:03] &lt;<a href="#id1735"><span class="problematic" id="id1736">pieterh_</span></a>&gt;     so btw if you have any critique on <a class="reference external" href="http://zero.mq/osdp">http://zero.mq/osdp</a>, let me have it...</div>
<div class="line">[Thursday 24 February 2011] [04:10:16] &lt;sustrik&gt;      i&#8217;ve just read it</div>
<div class="line">[Thursday 24 February 2011] [04:10:22] &lt;sustrik&gt;      two points maybe</div>
<div class="line">[Thursday 24 February 2011] [04:10:37] &lt;sustrik&gt;      it looks like a design for stock quote ticker plant</div>
<div class="line">[Thursday 24 February 2011] [04:10:58] &lt;sustrik&gt;      but it claims that it&#8217;s more generic than that</div>
<div class="line">[Thursday 24 February 2011] [04:11:24] &lt;sustrik&gt;      i am not sure it would fit any other use case</div>
<div class="line">[Thursday 24 February 2011] [04:11:44] &lt;sustrik&gt;      second, if you really want to launch the project</div>
<div class="line">[Thursday 24 February 2011] [04:11:57] &lt;sustrik&gt;      i would suggest creating a new site for it</div>
<div class="line">[Thursday 24 February 2011] [04:12:09] &lt;sustrik&gt;      otherwise there&#8217;ll be confusion about layering</div>
<div class="line">[Thursday 24 February 2011] [04:12:17] &lt;sustrik&gt;      third: i like the name</div>
<div class="line">[Thursday 24 February 2011] [04:12:54] &lt;sustrik&gt;      ah</div>
<div class="line">[Thursday 24 February 2011] [04:12:56] &lt;sustrik&gt;      one more</div>
<div class="line">[Thursday 24 February 2011] [04:13:20] &lt;sustrik&gt;      the paper suggests that the only pattern used in ticker plant is pub-sub</div>
<div class="line">[Thursday 24 February 2011] [04:13:39] &lt;sustrik&gt;      in real world you&#8217;ll need parallelised pipelines as well</div>
<div class="line">[Thursday 24 February 2011] [04:13:53] &lt;sustrik&gt;      for data processing after the data is delivered to the right place</div>
<div class="line">[Thursday 24 February 2011] [04:13:54] &lt;<a href="#id1737"><span class="problematic" id="id1738">pieterh_</span></a>&gt;     hang on, visitor...</div>
<div class="line">[Thursday 24 February 2011] [04:13:59] &lt;<a href="#id1739"><span class="problematic" id="id1740">pieterh_</span></a>&gt;     brb, :-)</div>
<div class="line">[Thursday 24 February 2011] [04:29:22] &lt;mikko&gt;        good morning</div>
<div class="line">[Thursday 24 February 2011] [04:42:39] &lt;sustrik&gt;      morning</div>
<div class="line">[Thursday 24 February 2011] [05:08:14] &lt;mikko&gt;        heheh</div>
<div class="line">[Thursday 24 February 2011] [05:08:17] &lt;mikko&gt;        i will give test this</div>
<div class="line">[Thursday 24 February 2011] [05:11:45] &lt;sustrik&gt;      i would guess the release build forgets to define ZMQ_HAVE_OPENPGM</div>
<div class="line">[Thursday 24 February 2011] [05:12:26] &lt;sustrik&gt;      if the problem was with building openPGM as such the build would fail, which is not the case</div>
<div class="line">[Thursday 24 February 2011] [05:12:40] &lt;mikko&gt;        hmmm</div>
<div class="line">[Thursday 24 February 2011] [05:21:20] &lt;mikko&gt;        sustrik: took a look at the project template</div>
<div class="line">[Thursday 24 February 2011] [05:21:32] &lt;mikko&gt;        interesting as i dont understand how the debug build has openpgm set</div>
<div class="line">[Thursday 24 February 2011] [05:21:46] &lt;pieterh&gt;      sustrik: re</div>
<div class="line">[Thursday 24 February 2011] [05:21:59]         * sustrik has no idea about how msvc projects work</div>
<div class="line">[Thursday 24 February 2011] [05:22:08] &lt;pieterh&gt;      mikko: let me take a look</div>
<div class="line">[Thursday 24 February 2011] [05:22:12] &lt;mikko&gt;        the occurrance libzmq/libzmq.vcproj:                           PreprocessorDefinitions=&#8221;ZMQ_HAVE_OPENPGM&#8221;</div>
<div class="line">[Thursday 24 February 2011] [05:22:23] &lt;mikko&gt;        seems to be under the WithOpenPGM build configuration</div>
<div class="line">[Thursday 24 February 2011] [05:22:46] &lt;sustrik&gt;      so there&#8217;s Dubeg/Release/WithOpenPGM currently?</div>
<div class="line">[Thursday 24 February 2011] [05:22:47] &lt;mikko&gt;        as far as a i understood we have never built openpgm with msvc by default</div>
<div class="line">[Thursday 24 February 2011] [05:22:56] &lt;mikko&gt;        sustrik: yes</div>
<div class="line">[Thursday 24 February 2011] [05:23:02] &lt;mikko&gt;        WithOpenPGM is a release build</div>
<div class="line">[Thursday 24 February 2011] [05:23:06] &lt;sustrik&gt;      right</div>
<div class="line">[Thursday 24 February 2011] [05:23:08] &lt;mikko&gt;        it uses external openpgm</div>
<div class="line">[Thursday 24 February 2011] [05:23:47] &lt;mikko&gt;        maybe we should build openpgm by default</div>
<div class="line">[Thursday 24 February 2011] [05:24:09] &lt;sustrik&gt;      maybe the guy messed up his executables</div>
<div class="line">[Thursday 24 February 2011] [05:24:24] &lt;sustrik&gt;      using withopenpgm instead of debug</div>
<div class="line">[Thursday 24 February 2011] [05:24:34] &lt;mikko&gt;        msvc is such a pain</div>
<div class="line">[Thursday 24 February 2011] [05:24:44] &lt;sustrik&gt;      it is :(</div>
<div class="line">[Thursday 24 February 2011] [05:24:49] &lt;mikko&gt;        i wish they had &#8220;build autotools project&#8221; as an option</div>
<div class="line">[Thursday 24 February 2011] [05:25:21] &lt;sustrik&gt;      unlikely to ever happen</div>
<div class="line">[Thursday 24 February 2011] [05:25:50] &lt;pieterh&gt;      we could always switch to cmake... :-)</div>
<div class="line">[Thursday 24 February 2011] [05:26:24] &lt;sustrik&gt;      we could, but still, you&#8217;ll have to maintain 2 build systems</div>
<div class="line">[Thursday 24 February 2011] [05:26:42] &lt;sustrik&gt;      and i am not sure whethr win devs would appreciate that kind of thing</div>
<div class="line">[Thursday 24 February 2011] [05:27:48] &lt;pieterh&gt;      other option: generate the autotooling, generate the msvc projects from some higher-level abstraction</div>
<div class="line">[Thursday 24 February 2011] [05:28:45] &lt;sustrik&gt;      have you seen the autotools source?</div>
<div class="line">[Thursday 24 February 2011] [05:29:15] &lt;sustrik&gt;      it&#8217;s an intricate maze of different options and their combinations</div>
<div class="line">[Thursday 24 February 2011] [05:29:35] &lt;sustrik&gt;      hm</div>
<div class="line">[Thursday 24 February 2011] [05:29:53] &lt;pieterh&gt;      you don&#8217;t need to navigate/understand that maze to <em>generate</em> it</div>
<div class="line">[Thursday 24 February 2011] [05:30:20] &lt;pieterh&gt;      all you need are good templates with sections where we insert the variable stuff</div>
<div class="line">[Thursday 24 February 2011] [05:30:26] &lt;pieterh&gt;      imho</div>
<div class="line">[Thursday 24 February 2011] [05:30:46] &lt;sustrik&gt;      easy way would be to generate just the source file list</div>
<div class="line">[Thursday 24 February 2011] [05:30:55] &lt;pieterh&gt;      for instance</div>
<div class="line">[Thursday 24 February 2011] [05:31:06] &lt;pieterh&gt;      well, you know how powerful code generation can be when it has to be</div>
<div class="line">[Thursday 24 February 2011] [05:31:17] &lt;sustrik&gt;      yes</div>
<div class="line">[Thursday 24 February 2011] [05:31:32] &lt;sustrik&gt;      but it&#8217;s adding one more layer of complexity to the build</div>
<div class="line">[Thursday 24 February 2011] [05:32:16] &lt;pieterh&gt;      not to the build, but to the tooling <em>we</em> use to maintain the build</div>
<div class="line">[Thursday 24 February 2011] [05:32:35] &lt;pieterh&gt;      if you want less pain working with details, you always need abstraction</div>
<div class="line">[Thursday 24 February 2011] [05:33:00] &lt;sustrik&gt;      unless the abstraction is more complex than the details themselves</div>
<div class="line">[Thursday 24 February 2011] [05:33:05] &lt;sustrik&gt;      which is likely the case here</div>
<div class="line">[Thursday 24 February 2011] [05:33:26] &lt;sustrik&gt;      anyway, code generation is not the problem here</div>
<div class="line">[Thursday 24 February 2011] [05:33:27] &lt;pieterh&gt;      so continue to complain about MSVC :-)</div>
<div class="line">[Thursday 24 February 2011] [05:33:33] &lt;sustrik&gt;      the problem is that msvc is nasty</div>
<div class="line">[Thursday 24 February 2011] [05:33:49] &lt;pieterh&gt;      autotools by contrast is... ... nice?</div>
<div class="line">[Thursday 24 February 2011] [05:33:53] &lt;pieterh&gt;      all build systems are nasty</div>
<div class="line">[Thursday 24 February 2011] [05:33:58] &lt;sustrik&gt;      nasty as well</div>
<div class="line">[Thursday 24 February 2011] [05:34:11] &lt;sustrik&gt;      you just have to deal with the nastyness</div>
<div class="line">[Thursday 24 February 2011] [05:34:24] &lt;sustrik&gt;      either in code generator or in projects files</div>
<div class="line">[Thursday 24 February 2011] [05:34:31] &lt;sustrik&gt;      you can&#8217;t escape that</div>
<div class="line">[Thursday 24 February 2011] [05:34:40] &lt;pieterh&gt;      I know you do not like code generation but to generalize that as &#8220;complex and nasty&#8221; is just wrong</div>
<div class="line">[Thursday 24 February 2011] [05:34:52] &lt;pieterh&gt;      I can dismiss any abstraction like that</div>
<div class="line">[Thursday 24 February 2011] [05:34:56] &lt;pieterh&gt;      C++ is complex and nasty</div>
<div class="line">[Thursday 24 February 2011] [05:35:00] &lt;sustrik&gt;      sure</div>
<div class="line">[Thursday 24 February 2011] [05:35:06] &lt;pieterh&gt;      messaging is complex and nasty</div>
<div class="line">[Thursday 24 February 2011] [05:35:12] &lt;sustrik&gt;      the problem is that we have two nasty build tools</div>
<div class="line">[Thursday 24 February 2011] [05:35:16] &lt;sustrik&gt;      we have to deal with</div>
<div class="line">[Thursday 24 February 2011] [05:35:33] &lt;pieterh&gt;      you don&#8217;t have to deal with, you choose to deal with</div>
<div class="line">[Thursday 24 February 2011] [05:35:49] &lt;pieterh&gt;      especially since you reject the alternatives without even studying them</div>
<div class="line">[Thursday 24 February 2011] [05:35:57] &lt;sustrik&gt;      CMake?</div>
<div class="line">[Thursday 24 February 2011] [05:36:17] &lt;pieterh&gt;      have we actually even tried anything else?</div>
<div class="line">[Thursday 24 February 2011] [05:36:28] &lt;sustrik&gt;      nope</div>
<div class="line">[Thursday 24 February 2011] [05:36:28] &lt;pieterh&gt;      even for a simple test case?</div>
<div class="line">[Thursday 24 February 2011] [05:36:35] &lt;sustrik&gt;      well, CMake</div>
<div class="line">[Thursday 24 February 2011] [05:36:37] &lt;pieterh&gt;      all I hear is &#8220;autotools is what everyone uses&#8221;</div>
<div class="line">[Thursday 24 February 2011] [05:36:39] &lt;sustrik&gt;      long time ago</div>
<div class="line">[Thursday 24 February 2011] [05:36:45] &lt;pieterh&gt;      and &#8220;everything else is crap anyhow&#8221;</div>
<div class="line">[Thursday 24 February 2011] [05:36:51] &lt;pieterh&gt;      that&#8217;s really scientific</div>
<div class="line">[Thursday 24 February 2011] [05:36:55] &lt;sustrik&gt;      it was contrained to 2-3 platforms</div>
<div class="line">[Thursday 24 February 2011] [05:37:04] &lt;pieterh&gt;      it&#8217;s only one of several plausible alternatives</div>
<div class="line">[Thursday 24 February 2011] [05:37:10] &lt;sustrik&gt;      and nobody actually bothered to make it as universal as autotools build</div>
<div class="line">[Thursday 24 February 2011] [05:37:40] &lt;pieterh&gt;      i&#8217;m getting repetitive, but many aspects of our process seem to be based on closed minds and opinion, not evidence</div>
<div class="line">[Thursday 24 February 2011] [05:37:58] &lt;sustrik&gt;      i think nobody has resource to fully convert the existing autobuild solution into something else</div>
<div class="line">[Thursday 24 February 2011] [05:38:04] &lt;pieterh&gt;      of course not</div>
<div class="line">[Thursday 24 February 2011] [05:38:11] &lt;sustrik&gt;      so, if you try</div>
<div class="line">[Thursday 24 February 2011] [05:38:17] &lt;pieterh&gt;      especially when the likely outcome is &#8220;well, thanks, but we&#8217;ll stick to our nasty tooling&#8221;</div>
<div class="line">[Thursday 24 February 2011] [05:38:23] &lt;sustrik&gt;      you&#8217;ll end up with maintaining both autotools and the new system</div>
<div class="line">[Thursday 24 February 2011] [05:38:24] &lt;pieterh&gt;      no-one is going to waste their time</div>
<div class="line">[Thursday 24 February 2011] [05:38:53]         * pieterh sits down again, not my problem, it&#8217;s largely Mikko who suffers here</div>
<div class="line">[Thursday 24 February 2011] [05:39:09] &lt;sustrik&gt;      mikko: what&#8217;s your opinion?</div>
<div class="line">[Thursday 24 February 2011] [05:39:27] &lt;pieterh&gt;      note that I&#8217;ve successfully built massive systems like OpenAMQ on dozens of platforms with trivial maintenance effort</div>
<div class="line">[Thursday 24 February 2011] [05:39:30] &lt;sustrik&gt;      i would say it would take couple of manyears to convert to a different build tool</div>
<div class="line">[Thursday 24 February 2011] [05:39:35] &lt;pieterh&gt;      lol</div>
<div class="line">[Thursday 24 February 2011] [05:39:47] &lt;pieterh&gt;      that&#8217;s your standard estimate when you don&#8217;t like something</div>
<div class="line">[Thursday 24 February 2011] [05:39:54] &lt;pieterh&gt;      it&#8217;s either &#8220;two days of work&#8221; or &#8220;two man years&#8221;</div>
<div class="line">[Thursday 24 February 2011] [05:40:00] &lt;pieterh&gt;      :-)</div>
<div class="line">[Thursday 24 February 2011] [05:40:03] &lt;sustrik&gt;      you are free to try</div>
<div class="line">[Thursday 24 February 2011] [05:40:18] &lt;pieterh&gt;      I would, if there was even a small chance my time would not be wasted</div>
<div class="line">[Thursday 24 February 2011] [05:40:34] &lt;sustrik&gt;      there is</div>
<div class="line">[Thursday 24 February 2011] [05:40:52] &lt;sustrik&gt;      once you have a solution that covers all the cases the existing solution does</div>
<div class="line">[Thursday 24 February 2011] [05:40:52] &lt;pieterh&gt;      not until there is actual consensus that we want to improve this</div>
<div class="line">[Thursday 24 February 2011] [05:41:03] &lt;pieterh&gt;      that&#8217;s not how it works</div>
<div class="line">[Thursday 24 February 2011] [05:41:16] &lt;sustrik&gt;      unless you do that, we can&#8217;t drop autotools</div>
<div class="line">[Thursday 24 February 2011] [05:41:30] &lt;sustrik&gt;      thus we would have to maintain 3 build systems instead of 2</div>
<div class="line">[Thursday 24 February 2011] [05:41:36] &lt;pieterh&gt;      if I come tomorrow with a full solution, there&#8217;s 80% chance it&#8217;ll be rejected on the grounds of &#8220;we don&#8217;t know it, it&#8217;s nasty, and too complex, and not standard&#8221;</div>
<div class="line">[Thursday 24 February 2011] [05:41:42] &lt;pieterh&gt;      we&#8217;ve been through that several times</div>
<div class="line">[Thursday 24 February 2011] [05:42:20] &lt;pieterh&gt;      there has to be consensus, up front, that we are in fact open to change</div>
<div class="line">[Thursday 24 February 2011] [05:42:23] &lt;sustrik&gt;      the question would rather be &#8220;does it build on HP-UX, version from 1992?&#8221;</div>
<div class="line">[Thursday 24 February 2011] [05:42:29] &lt;pieterh&gt;      well, does it?</div>
<div class="line">[Thursday 24 February 2011] [05:42:31] &lt;pieterh&gt;      openamq does</div>
<div class="line">[Thursday 24 February 2011] [05:42:38] &lt;sustrik&gt;      does it cross-compile from osx to mips?</div>
<div class="line">[Thursday 24 February 2011] [05:42:42] &lt;sustrik&gt;      an similar</div>
<div class="line">[Thursday 24 February 2011] [05:42:59] &lt;sustrik&gt;      that&#8217;s the value that&#8217;s already stored in current build system</div>
<div class="line">[Thursday 24 February 2011] [05:43:14] &lt;pieterh&gt;      again, there are several options here</div>
<div class="line">[Thursday 24 February 2011] [05:43:18] &lt;sustrik&gt;      if we want to change we have to find out how to extract the value</div>
<div class="line">[Thursday 24 February 2011] [05:43:23] &lt;pieterh&gt;      one would be to throw out that value and start from scratch</div>
<div class="line">[Thursday 24 February 2011] [05:43:31] &lt;sustrik&gt;      :(</div>
<div class="line">[Thursday 24 February 2011] [05:43:40] &lt;pieterh&gt;      two would be to layer an <em>abstraction</em> on top that reduces the actual pain of maintenance</div>
<div class="line">[Thursday 24 February 2011] [05:43:53] &lt;pieterh&gt;      you dismissed that out of hand</div>
<div class="line">[Thursday 24 February 2011] [05:43:59] &lt;sustrik&gt;      how would you do that?</div>
<div class="line">[Thursday 24 February 2011] [05:44:01] &lt;pieterh&gt;      so I&#8217;m going back to open source data plants</div>
<div class="line">[Thursday 24 February 2011] [05:44:07] &lt;pieterh&gt;      code generation, of course</div>
<div class="line">[Thursday 24 February 2011] [05:44:32] &lt;pieterh&gt;      it is a standard problem</div>
<div class="line">[Thursday 24 February 2011] [05:44:41] &lt;pieterh&gt;      you have a mix of complex code you very rarely want to touch</div>
<div class="line">[Thursday 24 February 2011] [05:44:51] &lt;pieterh&gt;      and simple code you have to maintain almost daily</div>
<div class="line">[Thursday 24 February 2011] [05:44:58] &lt;pieterh&gt;      that is why it&#8217;s painful</div>
<div class="line">[Thursday 24 February 2011] [05:45:09] &lt;sustrik&gt;      ok, there are 2 parts to the build system</div>
<div class="line">[Thursday 24 February 2011] [05:45:14] &lt;pieterh&gt;      &#8216;add this new source to the project&#8217; is a major effort today</div>
<div class="line">[Thursday 24 February 2011] [05:45:20] &lt;sustrik&gt;      the often used part is the list of files</div>
<div class="line">[Thursday 24 February 2011] [05:45:26] &lt;pieterh&gt;      it means knowing about, and editing, dozens of highly complex sources</div>
<div class="line">[Thursday 24 February 2011] [05:45:27] &lt;sustrik&gt;      that&#8217;s easy to maintain even now</div>
<div class="line">[Thursday 24 February 2011] [05:45:41] &lt;pieterh&gt;      msvc project for example</div>
<div class="line">[Thursday 24 February 2011] [05:45:46] &lt;sustrik&gt;      then there&#8217;s &#8220;how to build it part&#8221;</div>
<div class="line">[Thursday 24 February 2011] [05:45:51] &lt;pieterh&gt;      totally separate</div>
<div class="line">[Thursday 24 February 2011] [05:46:02] &lt;pieterh&gt;      as long as you deliver MSVC developers the right projects, it&#8217;s click and build</div>
<div class="line">[Thursday 24 February 2011] [05:46:16] &lt;pieterh&gt;      <em>obviously</em> you want to offer Linux users autogen/configure/make</div>
<div class="line">[Thursday 24 February 2011] [05:46:42] &lt;sustrik&gt;      yes, sure, so you can generate the lists of files</div>
<div class="line">[Thursday 24 February 2011] [05:46:46] &lt;pieterh&gt;      how many people understand the tools used to generate man pages?</div>
<div class="line">[Thursday 24 February 2011] [05:46:58] &lt;sustrik&gt;      that would save me a minute every now and then</div>
<div class="line">[Thursday 24 February 2011] [05:47:00] &lt;pieterh&gt;      yet we can all type &#8216;man zmq&#8217;</div>
<div class="line">[Thursday 24 February 2011] [05:47:42] &lt;sustrik&gt;      the hard part that started this discussion though was not the easy &#8220;file list&#8221; part</div>
<div class="line">[Thursday 24 February 2011] [05:47:53] &lt;sustrik&gt;      it was the intricacies of msvc and autotools</div>
<div class="line">[Thursday 24 February 2011] [05:48:05] &lt;sustrik&gt;      which you have to deal with in code generator anyway</div>
<div class="line">[Thursday 24 February 2011] [05:48:08] &lt;pieterh&gt;      one problem is that you&#8217;re hand-crafting solutions like &#8220;how do I integrate package X into my product&#8221;</div>
<div class="line">[Thursday 24 February 2011] [05:48:17] &lt;mikko&gt;        sorry, let me catch up with backlog</div>
<div class="line">[Thursday 24 February 2011] [05:48:35] &lt;sustrik&gt;      anyway, mikko, is build system maintainer, so it&#8217;s up to him</div>
<div class="line">[Thursday 24 February 2011] [05:49:08] &lt;pieterh&gt;      sustrik: if you&#8217;d said that 20 minutes ago, I&#8217;d have had my coffee by now :-)</div>
<div class="line">[Thursday 24 February 2011] [05:49:10] &lt;mikko&gt;        i think rather than generating something from a definition i would say we need to validate</div>
<div class="line">[Thursday 24 February 2011] [05:49:39] &lt;pieterh&gt;      ok, mikko, sustrik, I have a proposal</div>
<div class="line">[Thursday 24 February 2011] [05:50:06] &lt;mikko&gt;        i think creating a file which checks preprocessor definitions on that platform with that compiler and errors out if they are not there</div>
<div class="line">[Thursday 24 February 2011] [05:50:07] &lt;pieterh&gt;      would you agree that the zmq builds are a more complex form of the zfl builds?</div>
<div class="line">[Thursday 24 February 2011] [05:50:14] &lt;mikko&gt;        pieterh: yes</div>
<div class="line">[Thursday 24 February 2011] [05:50:25] &lt;mikko&gt;        in a way</div>
<div class="line">[Thursday 24 February 2011] [05:50:53] &lt;pieterh&gt;      so since mikko and I are maintaining ZFL, we&#8217;ll start by improving that</div>
<div class="line">[Thursday 24 February 2011] [05:51:06] &lt;pieterh&gt;      what I mean specifically</div>
<div class="line">[Thursday 24 February 2011] [05:51:22] &lt;pieterh&gt;      is that I will try to convince Mikko that code generation will make this magically simple</div>
<div class="line">[Thursday 24 February 2011] [05:51:35] &lt;pieterh&gt;      if this works for ZFL, and Mikko is convinced, we have a way to apply that to ZMQ</div>
<div class="line">[Thursday 24 February 2011] [05:51:54] &lt;mikko&gt;        cmake is trying to be this</div>
<div class="line">[Thursday 24 February 2011] [05:51:58] &lt;mikko&gt;        as far as a i understand</div>
<div class="line">[Thursday 24 February 2011] [05:52:01] &lt;pieterh&gt;      yes, but cmake is not pieter</div>
<div class="line">[Thursday 24 February 2011] [05:52:04] &lt;pieterh&gt;      there is a real difference</div>
<div class="line">[Thursday 24 February 2011] [05:52:13] &lt;pieterh&gt;      I&#8217;ve been making portable build systems since 1985 or so</div>
<div class="line">[Thursday 24 February 2011] [05:52:38] &lt;sustrik&gt;      don&#8217;t fail pray to NIH syndrome though</div>
<div class="line">[Thursday 24 February 2011] [05:52:44] &lt;pieterh&gt;      my key techniques are ignorance and laziness</div>
<div class="line">[Thursday 24 February 2011] [05:52:44]         * sustrik is shutting up</div>
<div class="line">[Thursday 24 February 2011] [05:53:14] &lt;mikko&gt;        the problem with build systems is that the formats and approaches are completely different</div>
<div class="line">[Thursday 24 February 2011] [05:53:30] &lt;mikko&gt;        you need to hack the end format converters for every build system</div>
<div class="line">[Thursday 24 February 2011] [05:53:53] &lt;pieterh&gt;      mikko: let&#8217;s not philosophize over details</div>
<div class="line">[Thursday 24 February 2011] [05:54:06] &lt;mikko&gt;        i see this in a way that rather than generate build systems we need to be able to validate them</div>
<div class="line">[Thursday 24 February 2011] [05:54:38] &lt;mikko&gt;        this should be simple with a header file that errors if preprocessor definition is missing or incorrect ones are set</div>
<div class="line">[Thursday 24 February 2011] [05:56:07] &lt;pieterh&gt;      mikko: will you allow me to try some stuff and show you?</div>
<div class="line">[Thursday 24 February 2011] [05:56:25] &lt;pieterh&gt;      it&#8217;ll take me a long weekend to put together a working toolchain for ZFL</div>
<div class="line">[Thursday 24 February 2011] [05:56:29] &lt;mikko&gt;        pieterh: of course</div>
<div class="line">[Thursday 24 February 2011] [05:56:37] &lt;mikko&gt;        im not going to stop you</div>
<div class="line">[Thursday 24 February 2011] [05:56:49] &lt;pieterh&gt;      we can add backends to e.g. generate cmake files and other stuff after</div>
<div class="line">[Thursday 24 February 2011] [05:56:51] &lt;pieterh&gt;      ok...</div>
<div class="line">[Thursday 24 February 2011] [05:57:03] &lt;mikko&gt;        but when you say that this is the cave-eat</div>
<div class="line">[Thursday 24 February 2011] [05:57:16] &lt;pieterh&gt;      there&#8217;s no catch, if you don&#8217;t like it, we chuck it out</div>
<div class="line">[Thursday 24 February 2011] [05:57:20] &lt;mikko&gt;        ok</div>
<div class="line">[Thursday 24 February 2011] [05:57:24] &lt;mikko&gt;        works for me</div>
<div class="line">[Thursday 24 February 2011] [05:57:26] &lt;pieterh&gt;      well, there is a catch</div>
<div class="line">[Thursday 24 February 2011] [05:57:29] &lt;mikko&gt;        haha</div>
<div class="line">[Thursday 24 February 2011] [05:57:30] &lt;mikko&gt;        i knew it</div>
<div class="line">[Thursday 24 February 2011] [05:57:32] &lt;pieterh&gt;      kind of like selling your soul to the devil</div>
<div class="line">[Thursday 24 February 2011] [05:57:52] &lt;pieterh&gt;      you get a tooling dependency but it&#8217;s no worse than what we have today</div>
<div class="line">[Thursday 24 February 2011] [05:58:08] &lt;mikko&gt;        tooling dependency to our own tool?</div>
<div class="line">[Thursday 24 February 2011] [05:58:17]         * pieterh changes the subject</div>
<div class="line">[Thursday 24 February 2011] [05:58:25] &lt;pieterh&gt;      hey, I got a pull request for zguide!</div>
<div class="line">[Thursday 24 February 2011] [05:58:27] &lt;pieterh&gt;      yay!</div>
<div class="line">[Thursday 24 February 2011] [05:58:34] &lt;mikko&gt;        if it&#8217;s our tool there is really no hard depedency</div>
<div class="line">[Thursday 24 February 2011] [05:58:41] &lt;mikko&gt;        assuming it&#8217;s abstract we can add more &#8220;backends&#8221;</div>
<div class="line">[Thursday 24 February 2011] [05:58:50] &lt;pieterh&gt;      so mikko, what&#8217;s the weather like there?</div>
<div class="line">[Thursday 24 February 2011] [05:59:08] &lt;mikko&gt;        im still not convinced that you can represent all these build systems in abstract way but i am open to be amazed</div>
<div class="line">[Thursday 24 February 2011] [05:59:14] &lt;mikko&gt;        gray</div>
<div class="line">[Thursday 24 February 2011] [05:59:21] &lt;pieterh&gt;      hehe</div>
<div class="line">[Thursday 24 February 2011] [05:59:25] &lt;mikko&gt;        london isn&#8217;t the weather capitol of europe</div>
<div class="line">[Thursday 24 February 2011] [06:00:13] &lt;pieterh&gt;      usually a bit nicer than Brussels IME but yeah...</div>
<div class="line">[Thursday 24 February 2011] [06:01:46] &lt;pieterh&gt;      So my idea for the Guide is to produce translated versions automatically</div>
<div class="line">[Thursday 24 February 2011] [06:01:57] &lt;pieterh&gt;      I.e. a C++ version, a Java version, etc.</div>
<div class="line">[Thursday 24 February 2011] [06:02:05] &lt;pieterh&gt;      with all examples in that language</div>
<div class="line">[Thursday 24 February 2011] [06:02:14] &lt;mikko&gt;        docbook is a fairly portable format for that</div>
<div class="line">[Thursday 24 February 2011] [06:02:27] &lt;mikko&gt;        php documentation is generated from docbook</div>
<div class="line">[Thursday 24 February 2011] [06:02:30] &lt;pieterh&gt;      oh, mikko, I have the tooling already</div>
<div class="line">[Thursday 24 February 2011] [06:02:34] &lt;mikko&gt;        hahaha</div>
<div class="line">[Thursday 24 February 2011] [06:02:46] &lt;mikko&gt;        let me guess, you wrote them?</div>
<div class="line">[Thursday 24 February 2011] [06:02:53] &lt;pieterh&gt;      this is just pulling in examples/PHP instead of examples/C</div>
<div class="line">[Thursday 24 February 2011] [06:02:58] &lt;pieterh&gt;      have you seen gitdown?</div>
<div class="line">[Thursday 24 February 2011] [06:03:11] &lt;mikko&gt;        the markdown format?</div>
<div class="line">[Thursday 24 February 2011] [06:04:22] &lt;pieterh&gt;      <a class="reference external" href="https://github.com/imatix/gitdown">https://github.com/imatix/gitdown</a></div>
<div class="line">[Thursday 24 February 2011] [06:05:40] &lt;mikko&gt;        ok</div>
<div class="line">[Thursday 24 February 2011] [06:05:50] &lt;mikko&gt;        remember to update copyright year</div>
<div class="line">[Thursday 24 February 2011] [06:05:52] &lt;pieterh&gt;      that&#8217;s the basic tooling for the Guide, though that uses an older hacked version</div>
<div class="line">[Thursday 24 February 2011] [06:05:54] &lt;mikko&gt;        Copyright (c) 2010 Pieter Hintjens Copyright (c) 1996-2010 iMatix Corporation</div>
<div class="line">[Thursday 24 February 2011] [06:06:41] &lt;pieterh&gt;      fixed</div>
<div class="line">[Thursday 24 February 2011] [06:06:56] &lt;pieterh&gt;      so the idea is to take a simple text file with images as ditaa text</div>
<div class="line">[Thursday 24 February 2011] [06:07:08] &lt;pieterh&gt;      and mangle into some markup - for the Guide, it&#8217;s wikidot markup</div>
<div class="line">[Thursday 24 February 2011] [06:07:24] &lt;pieterh&gt;      part of that is merging in code from the examples directory</div>
<div class="line">[Thursday 24 February 2011] [06:07:41] &lt;pieterh&gt;      so it&#8217;s easy to make, e.g., a PHP version of the Guide in parallel with teh current C version</div>
<div class="line">[Thursday 24 February 2011] [06:07:58] &lt;pieterh&gt;      my idea is to do that only for languages that hit 75% translation</div>
<div class="line">[Thursday 24 February 2011] [06:11:59] &lt;pieterh&gt;      sustrik: thanks for the feedback on the OSDP</div>
<div class="line">[Thursday 24 February 2011] [06:12:05] &lt;pieterh&gt;      indeed, it&#8217;ll be a separate site and project</div>
<div class="line">[Thursday 24 February 2011] [06:17:46] &lt;pieterh&gt;      mikko: question</div>
<div class="line">[Thursday 24 February 2011] [06:18:03] &lt;pieterh&gt;      why do we build the cJSON object, in zfl/src?</div>
<div class="line">[Thursday 24 February 2011] [06:22:07] &lt;pieterh&gt;      rather, what was the benefit of changing the way cJSON was imported?</div>
<div class="line">[Thursday 24 February 2011] [06:24:09] &lt;sustrik&gt;      pieterh: you are being cited here:</div>
<div class="line">[Thursday 24 February 2011] [06:24:09] &lt;sustrik&gt;      <a class="reference external" href="http://it.toolbox.com/blogs/open-source-smb/whats-the-future-of-amqp-44450">http://it.toolbox.com/blogs/open-source-smb/whats-the-future-of-amqp-44450</a></div>
<div class="line">[Thursday 24 February 2011] [06:38:19] &lt;mikko&gt;        pieterh: to automatically include in make dist</div>
<div class="line">[Thursday 24 February 2011] [06:38:27] &lt;mikko&gt;        it can be added as a no-build source as well</div>
<div class="line">[Thursday 24 February 2011] [06:39:10] &lt;pieterh&gt;      sustrik: I answered that, but it&#8217;s a really annoying blog to post to</div>
<div class="line">[Thursday 24 February 2011] [06:39:22] &lt;pieterh&gt;      mikko: I&#8217;d rather it&#8217;s a no-build source...</div>
<div class="line">[Thursday 24 February 2011] [06:39:48] &lt;pieterh&gt;      the goal was to hide that totally in zfl_config_json, not export it as an object</div>
<div class="line">[Thursday 24 February 2011] [06:39:53] &lt;pieterh&gt;      otherwise apps will use it</div>
<div class="line">[Thursday 24 February 2011] [06:40:02] &lt;mikko&gt;        pieterh: i&#8217;ll make that change</div>
<div class="line">[Thursday 24 February 2011] [06:40:09] &lt;pieterh&gt;      i appreciate it!</div>
<div class="line">[Thursday 24 February 2011] [06:40:11] &lt;mikko&gt;        need to quickly finish this excel</div>
<div class="line">[Thursday 24 February 2011] [06:40:16] &lt;pieterh&gt;      no hurry, no hurry</div>
<div class="line">[Thursday 24 February 2011] [06:49:11] &lt;pieterh&gt;      sustrik: I&#8217;ve made a comment or two on that post</div>
<div class="line">[Thursday 24 February 2011] [07:50:41] &lt;Evet&gt; are there obvious performance differences of zeromq between windows and linux?</div>
<div class="line">[Thursday 24 February 2011] [07:52:51] &lt;mikko&gt;        Evet: not obvious</div>
<div class="line">[Thursday 24 February 2011] [07:52:56] &lt;mikko&gt;        that i am aware of</div>
<div class="line">[Thursday 24 February 2011] [07:53:07] &lt;Steve-o&gt;      well IPC and PGM are slower</div>
<div class="line">[Thursday 24 February 2011] [07:53:10] &lt;mikko&gt;        optimizing things for windows seems to be very much a dark art</div>
<div class="line">[Thursday 24 February 2011] [07:53:21] &lt;mikko&gt;        ipc doesnt exist</div>
<div class="line">[Thursday 24 February 2011] [07:53:28] &lt;mikko&gt;        well, not in zeromq</div>
<div class="line">[Thursday 24 February 2011] [07:53:48] &lt;mikko&gt;        Steve-o: thanks for applying that</div>
<div class="line">[Thursday 24 February 2011] [07:53:53] &lt;mikko&gt;        Steve-o: i&#8217;ll test freebsd next</div>
<div class="line">[Thursday 24 February 2011] [07:55:51] &lt;Steve-o&gt;      no worries, just unit testing on Solaris</div>
<div class="line">[Thursday 24 February 2011] [07:57:59] &lt;Steve-o&gt;      Linux passes now, FreeBSD built, Solaris built, Mingw to go for unit tests on Windows</div>
<div class="line">[Thursday 24 February 2011] [08:03:25] &lt;Evet&gt; Steve-o: do you test it on virtualbox, etc?</div>
<div class="line">[Thursday 24 February 2011] [08:04:26] &lt;Steve-o&gt;      real hardware, vbox hasn&#8217;t got multicast support I think</div>
<div class="line">[Thursday 24 February 2011] [08:10:46] &lt;Evet&gt; Steve-o: do you compare zeromq performance, stability among linux, <a href="#id53"><span class="problematic" id="id54">*</span></a>bsd, solaris?</div>
<div class="line">[Thursday 24 February 2011] [08:11:01] &lt;Steve-o&gt;      and Windows</div>
<div class="line">[Thursday 24 February 2011] [08:11:44] &lt;Steve-o&gt;      but I don&#8217;t have high end SPARC hardware for a fair comparison</div>
<div class="line">[Thursday 24 February 2011] [08:12:49] &lt;Steve-o&gt;      unsurprisingly its linux &gt; freebsd &gt; solaris &gt; windows</div>
<div class="line">[Thursday 24 February 2011] [08:13:12] &lt;Steve-o&gt;      windows only works well when you are not using it, i.e. offloading into hardware</div>
<div class="line">[Thursday 24 February 2011] [08:17:00] &lt;sustrik&gt;      lol</div>
<div class="line">[Thursday 24 February 2011] [08:17:02] &lt;sustrik&gt;      &#8220;windows only works well when you are not using it&#8221;</div>
<div class="line">[Thursday 24 February 2011] [08:17:49] &lt;Steve-o&gt;      which is why TCP is pretty good on it :)</div>
<div class="line">[Thursday 24 February 2011] [08:29:04] &lt;pieterh&gt;      Evet: in my experience Windows is about 3-5 times slower on the same hardware, for TCP</div>
<div class="line">[Thursday 24 February 2011] [08:29:36] &lt;Evet&gt; its sad that i have two windows servers</div>
<div class="line">[Thursday 24 February 2011] [08:30:33] &lt;pieterh&gt;      one is accidental, two is bad luck, three would be unforgiveable :-)</div>
<div class="line">[Thursday 24 February 2011] [08:31:11] &lt;pieterh&gt;      linux is the focus of intense optimization you don&#8217;t see elsewhere</div>
<div class="line">[Thursday 24 February 2011] [08:31:41] &lt;Evet&gt; low-level stuff is pain in the ass on windows</div>
<div class="line">[Thursday 24 February 2011] [08:32:22] &lt;pieterh&gt;      You get lots of choice though</div>
<div class="line">[Thursday 24 February 2011] [08:32:23] &lt;Evet&gt; i had to reboot the server 2 times just for a simple dns server, one for installation and one for updates</div>
<div class="line">[Thursday 24 February 2011] [08:32:35] &lt;pieterh&gt;      like, pthreads offers just one way to start a thread... pah!</div>
<div class="line">[Thursday 24 February 2011] [08:32:37] &lt;guido_g&gt;      and everything you don&#8217;t habe a button for is considered low-level</div>
<div class="line">[Thursday 24 February 2011] [08:32:40] &lt;guido_g&gt;      <a href="#id55"><span class="problematic" id="id56">*</span></a>have</div>
<div class="line">[Thursday 24 February 2011] [08:32:41] &lt;pieterh&gt;      win32 offers at least three</div>
<div class="line">[Thursday 24 February 2011] [08:32:53] &lt;pieterh&gt;      of which two are marked &#8220;Don&#8217;t use this! Will Crash!&#8221;</div>
<div class="line">[Thursday 24 February 2011] [08:33:30] &lt;pieterh&gt;      it&#8217;s like no API call was ever improved... it was written (poorly), delivered, and then frozen</div>
<div class="line">[Thursday 24 February 2011] [08:35:05] &lt;Steve-o&gt;      WSAPoll is quite amusing</div>
<div class="line">[Thursday 24 February 2011] [08:35:16] &lt;Steve-o&gt;      they admit its slower than select()</div>
<div class="line">[Thursday 24 February 2011] [08:39:15] &lt;Steve-o&gt;      then they silently advertise winsock is stupid and slow by implementing wsk sockets</div>
<div class="line">[Thursday 24 February 2011] [08:40:56] &lt;pieterh&gt;      Evet: really, if you can use Linux for your production boxes, you&#8217;re winning big time</div>
<div class="line">[Thursday 24 February 2011] [08:43:19] &lt;Steve-o&gt;      well, unless you&#8217;re employing .net developers I guess</div>
<div class="line">[Thursday 24 February 2011] [08:43:26] &lt;Evet&gt; im planning to chuck out windows and plesk license of 24gigs box and run mongrel2+zeromq only</div>
<div class="line">[Thursday 24 February 2011] [08:43:54] &lt;pieterh&gt;      Steve-o: even then, I&#8217;d use that only for client boxes that absolutely had to use Windows, e.g. to run Excel</div>
<div class="line">[Thursday 24 February 2011] [08:44:22] &lt;pieterh&gt;      you don&#8217;t want production platforms where the tool chain becomes obsolete every 18 months</div>
<div class="line">[Thursday 24 February 2011] [08:47:48] &lt;Steve-o&gt;      I guess at places they&#8217;re changing developers every 6-12 months it&#8217;s not so important :D</div>
<div class="line">[Thursday 24 February 2011] [08:52:54] &lt;Steve-o&gt;      anyway but a lot of the blame on Windows is actually with the drivers</div>
<div class="line">[Thursday 24 February 2011] [09:05:24] &lt;Evet&gt; is 2.1.1 (rc1) production ready?</div>
<div class="line">[Thursday 24 February 2011] [09:07:31] &lt;pieterh&gt;      Evet: it&#8217;s a release candidate</div>
<div class="line">[Thursday 24 February 2011] [09:07:58] &lt;pieterh&gt;      that means we&#8217;re expecting to fix some issues before it&#8217;s production ready</div>
<div class="line">[Thursday 24 February 2011] [09:44:38] &lt;mikko&gt;        hey</div>
<div class="line">[Thursday 24 February 2011] [09:44:53] &lt;mikko&gt;        nm</div>
<div class="line">[Thursday 24 February 2011] [09:49:35] &lt;ianbarber&gt;    good chat</div>
<div class="line">[Thursday 24 February 2011] [10:00:55] &lt;cremes&gt;       pieterh: i felt a challenge yesterday to convert my ruby &#8220;leak&#8221; example to C; here&#8217;s the result:  <a class="reference external" href="https://gist.github.com/841318">https://gist.github.com/841318</a></div>
<div class="line">[Thursday 24 February 2011] [10:01:31] &lt;cremes&gt;       it shows something leaking like mad... i don&#8217;t know if it&#8217;s 0mq, the OS or what (tested on osx &amp; linux)</div>
<div class="line">[Thursday 24 February 2011] [10:01:51] &lt;cremes&gt;       but now you don&#8217;t have to do the conversion!</div>
<div class="line">[Thursday 24 February 2011] [10:02:30] &lt;cremes&gt;       i find that the examples in the guide are useful foundations for converting code from other langs into C</div>
<div class="line">[Thursday 24 February 2011] [10:02:39] &lt;cremes&gt;       so thanks for that</div>
<div class="line">[Thursday 24 February 2011] [10:20:10] &lt;Evet&gt; mongrel2 is what i was trying to do with nginx. its really cool</div>
<div class="line">[Thursday 24 February 2011] [10:59:45] &lt;CIA-21&gt;       zeromq2: 03Martin Sustrik 07master * rc22e527 10/ doc/zmq_getsockopt.txt :</div>
<div class="line">[Thursday 24 February 2011] [10:59:45] &lt;CIA-21&gt;       zeromq2: Minor patch to zmq_getsockopt(3) man page</div>
<div class="line">[Thursday 24 February 2011] [10:59:45] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/gXYb3A">http://bit.ly/gXYb3A</a></div>
<div class="line">[Thursday 24 February 2011] [11:11:11] &lt;<a href="#id1741"><span class="problematic" id="id1742">gdan_</span></a>&gt;        on linux i built and installed libzmq, tested (mono app) and all was good.  on OSX i built, installed (all seemed to go ok) but my app (mono) does not see the libzmq lib.  has anyone had experience with zmq mono on OSX?</div>
<div class="line">[Thursday 24 February 2011] [11:14:04] &lt;<a href="#id1743"><span class="problematic" id="id1744">gdan_</span></a>&gt;        i&#8217;m wondering if there is an env path missing from the mono project, for example LD_LIBRARY_PATH in linux</div>
<div class="line">[Thursday 24 February 2011] [11:14:51] &lt;amacleod&gt;     OSX is unix too.  LD_LIBRARY_PATH should work there the same as it does on Linux.</div>
<div class="line">[Thursday 24 February 2011] [11:15:05] &lt;amacleod&gt;     s/unix/unix or unix-like/</div>
<div class="line">[Thursday 24 February 2011] [11:15:34]         * amacleod can&#8217;t remember who owns the Unix trademark these days, and which OSes can legitimately use it.</div>
<div class="line">[Thursday 24 February 2011] [11:20:30] &lt;<a href="#id1745"><span class="problematic" id="id1746">gdan_</span></a>&gt;        i read that DYLD_LIBRARY_PATH replaces....  don&#8217;t know.  going to have to do more reading as still not seeing the lib. thanks</div>
<div class="line">[Thursday 24 February 2011] [11:22:45] &lt;Seta00&gt;       anyone here familiar with clrzmq2?</div>
<div class="line">[Thursday 24 February 2011] [11:24:01] &lt;pieterh&gt;      amacleod: Microsoft, I suspect :-)</div>
<div class="line">[Thursday 24 February 2011] [11:24:59] &lt;pieterh&gt;      cremes: nice, I was going to do it but it&#8217;s 5:30pm and I still didn&#8217;t get around to it</div>
<div class="line">[Thursday 24 February 2011] [11:26:15] &lt;cremes&gt;       pieterh: i haven&#8217;t really written any C in 15 years so it was kind of nice to dust off those old skills</div>
<div class="line">[Thursday 24 February 2011] [11:26:30] &lt;pieterh&gt;      it looks purdy</div>
<div class="line">[Thursday 24 February 2011] [11:26:31] &lt;cremes&gt;       but the real question is this... have you run the code to confirm the problem?</div>
<div class="line">[Thursday 24 February 2011] [11:26:39] &lt;cremes&gt;       heh</div>
<div class="line">[Thursday 24 February 2011] [11:26:56] &lt;pieterh&gt;      i&#8217;m trying it now...</div>
<div class="line">[Thursday 24 February 2011] [11:28:04] &lt;pieterh&gt;      so, as you wrote it, memory slowly increases</div>
<div class="line">[Thursday 24 February 2011] [11:28:16] &lt;pieterh&gt;      now let me remove some possible culprits...</div>
<div class="line">[Thursday 24 February 2011] [11:28:40] &lt;cremes&gt;       feel free... i&#8217;d love to be proven wrong on this one</div>
<div class="line">[Thursday 24 February 2011] [11:29:53] &lt;cremes&gt;       this is the &#8216;bug&#8217; i&#8217;ve been chasing for 2.5 weeks... it was masked by that identity issue (which was a real bug) and slowed me down from honing</div>
<div class="line">[Thursday 24 February 2011] [11:29:58] &lt;cremes&gt;       in on the real culprit</div>
<div class="line">[Thursday 24 February 2011] [11:31:03] &lt;pieterh&gt;      ok, so with a few lines changed, it works nicely</div>
<div class="line">[Thursday 24 February 2011] [11:31:11] &lt;pieterh&gt;      some questions</div>
<div class="line">[Thursday 24 February 2011] [11:31:22] &lt;pieterh&gt;      is there a good reason you open and close sockets all the time?</div>
<div class="line">[Thursday 24 February 2011] [11:31:33] &lt;cremes&gt;       yes, i wrote up my use-case in the issue/ticket</div>
<div class="line">[Thursday 24 February 2011] [11:31:48] &lt;cremes&gt;       it&#8217;s easier to read it there than for me to recount it here</div>
<div class="line">[Thursday 24 February 2011] [11:32:35] &lt;cremes&gt;       <a class="reference external" href="https://github.com/zeromq/zeromq2/issues#issue/171">https://github.com/zeromq/zeromq2/issues#issue/171</a></div>
<div class="line">[Thursday 24 February 2011] [11:32:46] &lt;pieterh&gt;      yes, I&#8217;ve read it</div>
<div class="line">[Thursday 24 February 2011] [11:32:57] &lt;pieterh&gt;      is there a <em>good</em> reason you open and close sockets all the time</div>
<div class="line">[Thursday 24 February 2011] [11:33:39] &lt;pieterh&gt;      rather, than, for example, starting your subscribers as inproc clients of a framework that just keeps one socket open all the time</div>
<div class="line">[Thursday 24 February 2011] [11:33:46] &lt;pieterh&gt;      I&#8217;m sure there are other ways</div>
<div class="line">[Thursday 24 February 2011] [11:33:50] &lt;cremes&gt;       what isn&#8217;t <em>good</em> about that use-case? i haven&#8217;t been able to figure out an alternate methodology</div>
<div class="line">[Thursday 24 February 2011] [11:34:32] &lt;pieterh&gt;      as you run your test, in C, go to another window</div>
<div class="line">[Thursday 24 February 2011] [11:34:52]         * pieterh tries first :-)</div>
<div class="line">[Thursday 24 February 2011] [11:34:57] &lt;cremes&gt;       yeah, it will have hundreds or thousands of socket in TIME_WAIT</div>
<div class="line">[Thursday 24 February 2011] [11:35:10] &lt;mikko&gt;        hacked together a mash up</div>
<div class="line">[Thursday 24 February 2011] [11:35:11] &lt;mikko&gt;        <a class="reference external" href="http://valokuva.org/~mikko/where.php?user=zeromq&amp;repo=zeromq2">http://valokuva.org/~mikko/where.php?user=zeromq&amp;repo=zeromq2</a></div>
<div class="line">[Thursday 24 February 2011] [11:35:17] &lt;mikko&gt;        shows pull requests by location</div>
<div class="line">[Thursday 24 February 2011] [11:35:20] &lt;pieterh&gt;      and then type &#8216;while true; do netstat -a | wc -l; sleep 1; done&#8217;</div>
<div class="line">[Thursday 24 February 2011] [11:35:31] &lt;pieterh&gt;      sockets do not disappear right away</div>
<div class="line">[Thursday 24 February 2011] [11:35:36] &lt;pieterh&gt;      you are simply smashing the TCP stack</div>
<div class="line">[Thursday 24 February 2011] [11:35:39] &lt;pieterh&gt;      it&#8217;s not 0MQ&#8217;s issue</div>
<div class="line">[Thursday 24 February 2011] [11:35:44] &lt;cremes&gt;       pieterh: not true</div>
<div class="line">[Thursday 24 February 2011] [11:35:55] &lt;pieterh&gt;      well, netstat doesn&#8217;t even respond here, anymore...</div>
<div class="line">[Thursday 24 February 2011] [11:36:07] &lt;cremes&gt;       this is easily illustrated by injecting a forwarder between the publisher and subscribers</div>
<div class="line">[Thursday 24 February 2011] [11:36:25] &lt;pieterh&gt;      ok, another question</div>
<div class="line">[Thursday 24 February 2011] [11:36:26] &lt;cremes&gt;       you can then kill the publisher and the forwarder&#8217;s memory footprint never shrinks</div>
<div class="line">[Thursday 24 February 2011] [11:36:39] &lt;pieterh&gt;      cremes: that&#8217;s because the sockets are owned by someone</div>
<div class="line">[Thursday 24 February 2011] [11:36:57] &lt;pieterh&gt;      anyhow, that&#8217;s not your test case...</div>
<div class="line">[Thursday 24 February 2011] [11:36:59] &lt;cremes&gt;       but when you kill the publisher, they all go away within a few seconds</div>
<div class="line">[Thursday 24 February 2011] [11:37:14] &lt;pieterh&gt;      they =  ?</div>
<div class="line">[Thursday 24 February 2011] [11:37:29] &lt;cremes&gt;       my prod code only has about 250 sockets in TIME_WAIT at any given time...</div>
<div class="line">[Thursday 24 February 2011] [11:37:35] &lt;pieterh&gt;      ok</div>
<div class="line">[Thursday 24 February 2011] [11:37:38] &lt;cremes&gt;       the example code was written to show the problem faster</div>
<div class="line">[Thursday 24 February 2011] [11:37:49] &lt;cremes&gt;       they = sockets in TIME_WAIT</div>
<div class="line">[Thursday 24 February 2011] [11:37:51] &lt;pieterh&gt;      ok, let me post an example that works perfectly</div>
<div class="line">[Thursday 24 February 2011] [11:37:57] &lt;pieterh&gt;      your code with a trivial change</div>
<div class="line">[Thursday 24 February 2011] [11:38:00] &lt;cremes&gt;       ok</div>
<div class="line">[Thursday 24 February 2011] [11:38:27] &lt;cremes&gt;       as an aside, this problem also occurs with ipc transport so i don&#8217;t think it&#8217;s a tcp issue</div>
<div class="line">[Thursday 24 February 2011] [11:38:28] &lt;pieterh&gt;      <a class="reference external" href="https://gist.github.com/842407">https://gist.github.com/842407</a></div>
<div class="line">[Thursday 24 February 2011] [11:38:35] &lt;pieterh&gt;      ipc = local domain sockets</div>
<div class="line">[Thursday 24 February 2011] [11:38:50] &lt;cremes&gt;       yeah, different stack</div>
<div class="line">[Thursday 24 February 2011] [11:39:06] &lt;pieterh&gt;      I do get:</div>
<div class="line">[Thursday 24 February 2011] [11:39:06] &lt;pieterh&gt;      Too many open files</div>
<div class="line">[Thursday 24 February 2011] [11:39:06] &lt;pieterh&gt;      rc == 0 (mailbox.cpp:374)</div>
<div class="line">[Thursday 24 February 2011] [11:39:06] &lt;pieterh&gt;      Aborted (core dumped)</div>
<div class="line">[Thursday 24 February 2011] [11:39:45] &lt;pieterh&gt;      your use case is just being really unpleasant with system resources</div>
<div class="line">[Thursday 24 February 2011] [11:41:41] &lt;cremes&gt;       your example with the context changes still leaks like a sieve on my box</div>
<div class="line">[Thursday 24 February 2011] [11:42:54] &lt;pieterh&gt;      on mine it doesn&#8217;t even show on top, I suspect because CPU usage is too low</div>
<div class="line">[Thursday 24 February 2011] [11:43:45] &lt;cremes&gt;       change the code to use fewer threads (2 or 3) and change the client to reconnect once per second</div>
<div class="line">[Thursday 24 February 2011] [11:43:48] &lt;cremes&gt;       it will still leak</div>
<div class="line">[Thursday 24 February 2011] [11:43:56] &lt;pieterh&gt;      ok, trying that</div>
<div class="line">[Thursday 24 February 2011] [11:44:51] &lt;cremes&gt;       it will just take longer for it to be obvious it&#8217;s growing</div>
<div class="line">[Thursday 24 February 2011] [11:45:59] &lt;pieterh&gt;      yes, it&#8217;s definitely growing</div>
<div class="line">[Thursday 24 February 2011] [11:46:10] &lt;pieterh&gt;      I&#8217;ll make the messages huge, see if it&#8217;s related to that or not</div>
<div class="line">[Thursday 24 February 2011] [11:46:37] &lt;cremes&gt;       nope, it&#8217;s not but please do the experiment :)</div>
<div class="line">[Thursday 24 February 2011] [11:46:44] &lt;pieterh&gt;      it&#8217;s not, you tried, fine</div>
<div class="line">[Thursday 24 February 2011] [11:47:07] &lt;pieterh&gt;      next, try with 2.0.10...</div>
<div class="line">[Thursday 24 February 2011] [11:47:36] &lt;cremes&gt;       i&#8217;ll have to dload a copy... give me a few minutes to get that setup</div>
<div class="line">[Thursday 24 February 2011] [11:47:46] &lt;andrewvc&gt;     cremes: I&#8217;m thinking of releasing a patch version of ffi-rzmq. Sound good?</div>
<div class="line">[Thursday 24 February 2011] [11:47:51] &lt;pieterh&gt;      i&#8217;ll do it, have that already set-up...</div>
<div class="line">[Thursday 24 February 2011] [11:47:56] &lt;cremes&gt;       pieterh: ok</div>
<div class="line">[Thursday 24 February 2011] [11:47:57] &lt;andrewvc&gt;     the noblock thing is prolly worth it I&#8217;m thinking?</div>
<div class="line">[Thursday 24 February 2011] [11:48:19] &lt;cremes&gt;       andrewvc: i&#8217;ve made a few more nips &amp; tucks and added some specs</div>
<div class="line">[Thursday 24 February 2011] [11:48:32] &lt;cremes&gt;       why don&#8217;t you commit what you have and i&#8217;ll merge my stuff in?</div>
<div class="line">[Thursday 24 February 2011] [11:48:48] &lt;andrewvc&gt;     hmm, I don&#8217;t have anything new to add in</div>
<div class="line">[Thursday 24 February 2011] [11:49:04] &lt;cremes&gt;       oh, so it&#8217;s just the fix for the #noblock? method?</div>
<div class="line">[Thursday 24 February 2011] [11:49:19] &lt;cremes&gt;       if so, i&#8217;ll cut a release later today</div>
<div class="line">[Thursday 24 February 2011] [11:49:22] &lt;andrewvc&gt;     cool</div>
<div class="line">[Thursday 24 February 2011] [11:49:29] &lt;andrewvc&gt;     btw, did you see <a class="reference external" href="https://github.com/chuckremes/ffi-rzmq/issues#issue/20">https://github.com/chuckremes/ffi-rzmq/issues#issue/20</a></div>
<div class="line">[Thursday 24 February 2011] [11:49:31]         * cremes updates calendar</div>
<div class="line">[Thursday 24 February 2011] [11:49:56] &lt;cremes&gt;       yep, saw it</div>
<div class="line">[Thursday 24 February 2011] [11:50:14] &lt;cremes&gt;       do you see EBADF in that circumstance?</div>
<div class="line">[Thursday 24 February 2011] [11:50:50] &lt;andrewvc&gt;     nah, I&#8217;m not sure if sustrik thought that was related to my other issue</div>
<div class="line">[Thursday 24 February 2011] [11:51:01] &lt;andrewvc&gt;     which tmm1 fixed last night in eventmachine</div>
<div class="line">[Thursday 24 February 2011] [11:51:19] &lt;andrewvc&gt;     it does bring up one good point perhaps. I don&#8217;t think we invalidate sockets on term</div>
<div class="line">[Thursday 24 February 2011] [11:51:31] &lt;andrewvc&gt;     which is good</div>
<div class="line">[Thursday 24 February 2011] [11:52:11] &lt;andrewvc&gt;     maybe we should cut out this line though</div>
<div class="line">[Thursday 24 February 2011] [11:52:13] &lt;andrewvc&gt;     <a class="reference external" href="https://github.com/chuckremes/ffi-rzmq/blob/master/lib/ffi-rzmq/context.rb#L63">https://github.com/chuckremes/ffi-rzmq/blob/master/lib/ffi-rzmq/context.rb#L63</a></div>
<div class="line">[Thursday 24 February 2011] [11:53:04] &lt;andrewvc&gt;     not that it probably matters at all, but it might make sense given sustrik&#8217;s comment</div>
<div class="line">[Thursday 24 February 2011] [11:53:08] &lt;cremes&gt;       hmmm... i would need to see some code that breaks because of that line before removing it</div>
<div class="line">[Thursday 24 February 2011] [11:53:34] &lt;andrewvc&gt;     yeah, I don&#8217;t think it matters at all, I&#8217;m not certain we have any issue in the first place</div>
<div class="line">[Thursday 24 February 2011] [11:53:39] &lt;sustrik&gt;      hi, what comment?</div>
<div class="line">[Thursday 24 February 2011] [11:54:01] &lt;sustrik&gt;      the one in the email?</div>
<div class="line">[Thursday 24 February 2011] [11:54:19] &lt;andrewvc&gt;     or the user to close the socket so you should not see EBADF in such case if you do, it&#8217;s a bug</div>
<div class="line">[Thursday 24 February 2011] [11:54:21] &lt;andrewvc&gt;     ack</div>
<div class="line">[Thursday 24 February 2011] [11:54:26] &lt;andrewvc&gt;     I posted it here: <a class="reference external" href="https://github.com/chuckremes/ffi-rzmq/issues#issue/20">https://github.com/chuckremes/ffi-rzmq/issues#issue/20</a></div>
<div class="line">[Thursday 24 February 2011] [11:54:49] &lt;andrewvc&gt;     did you see a specific bug sustrik?</div>
<div class="line">[Thursday 24 February 2011] [11:55:02] &lt;andrewvc&gt;     As far as I know calling term in ffi-rzmq doesn&#8217;t touch socket objects</div>
<div class="line">[Thursday 24 February 2011] [11:55:07] &lt;sustrik&gt;      i&#8217;m lost</div>
<div class="line">[Thursday 24 February 2011] [11:55:13] &lt;sustrik&gt;      what are you speaking about</div>
<div class="line">[Thursday 24 February 2011] [11:55:17] &lt;sustrik&gt;      ?</div>
<div class="line">[Thursday 24 February 2011] [11:55:21] &lt;andrewvc&gt;     in IRC the other day you mentioned</div>
<div class="line">[Thursday 24 February 2011] [11:55:48]         * cremes lost too now :)</div>
<div class="line">[Thursday 24 February 2011] [11:55:48] &lt;andrewvc&gt;     in 2.1, zmq_term() should not invalidate the socekts what it does it causes the socket to return ETERM on any subsequent call and wait for the user to close the socket so you should not see EBADF in such case if you do, it&#8217;s a bug</div>
<div class="line">[Thursday 24 February 2011] [11:55:51] &lt;andrewvc&gt;     lol</div>
<div class="line">[Thursday 24 February 2011] [11:56:03] &lt;andrewvc&gt;     I thought you&#8217;d directed that at me sustri</div>
<div class="line">[Thursday 24 February 2011] [11:56:13] &lt;andrewvc&gt;     this was at like 11:30PM I was really tired and confused</div>
<div class="line">[Thursday 24 February 2011] [11:56:15] &lt;andrewvc&gt;     lol</div>
<div class="line">[Thursday 24 February 2011] [11:56:37] &lt;sustrik&gt;      nope, it&#8217;s just describing how it works</div>
<div class="line">[Thursday 24 February 2011] [11:56:55] &lt;sustrik&gt;      EBADF just should not happen</div>
<div class="line">[Thursday 24 February 2011] [11:57:30] &lt;andrewvc&gt;     ohhh, yeah, I guess at that point I hadn&#8217;t apprised you of the situation that it was caused by an external process closing the FD, not a call to ZMQ::Term</div>
<div class="line">[Thursday 24 February 2011] [11:57:57] &lt;sustrik&gt;      i guess so</div>
<div class="line">[Thursday 24 February 2011] [11:58:34] &lt;pieterh&gt;      cremes: well, on 2.0.10 it has the same problems</div>
<div class="line">[Thursday 24 February 2011] [11:58:45] &lt;pieterh&gt;      it behaves far worse with TCP than inproc</div>
<div class="line">[Thursday 24 February 2011] [11:59:10] &lt;cremes&gt;       pieterh: yuck</div>
<div class="line">[Thursday 24 February 2011] [11:59:35] &lt;cremes&gt;       andrewvc: i&#8217;m going to strip that line out; if you look closer you&#8217;ll see nothing is ever added to that array... dead code!</div>
<div class="line">[Thursday 24 February 2011] [11:59:46] &lt;andrewvc&gt;     oh nice</div>
<div class="line">[Thursday 24 February 2011] [12:00:21] &lt;andrewvc&gt;     ok, well, off to work, adios</div>
<div class="line">[Thursday 24 February 2011] [12:00:27] &lt;cremes&gt;       pieterh: more information...</div>
<div class="line">[Thursday 24 February 2011] [12:00:43] &lt;cremes&gt;       i tried running this code under java/jvm so that i could strictly control the heap size</div>
<div class="line">[Thursday 24 February 2011] [12:01:18] &lt;cremes&gt;       it&#8217;s interesting in that the rsize grows well beyond the max heap size and the jvm doesn&#8217;t start throwing outofmemory errors</div>
<div class="line">[Thursday 24 February 2011] [12:01:22] &lt;pieterh&gt;      cremes: it also consumes a heck of a lot of CPU for a process that does essentially nothing...</div>
<div class="line">[Thursday 24 February 2011] [12:01:40] &lt;cremes&gt;       this indicates to me that this memory gain isn&#8217;t visible to the application but the OS sees it</div>
<div class="line">[Thursday 24 February 2011] [12:01:44] &lt;pieterh&gt;      indeed</div>
<div class="line">[Thursday 24 February 2011] [12:02:04] &lt;pieterh&gt;      that is what it looks like, system resources (but owned by a process)</div>
<div class="line">[Thursday 24 February 2011] [12:02:17] &lt;cremes&gt;       right</div>
<div class="line">[Thursday 24 February 2011] [12:02:26] &lt;pieterh&gt;      what&#8217;s weird is that it happens with inproc</div>
<div class="line">[Thursday 24 February 2011] [12:02:44] &lt;cremes&gt;       but then i would expect the OS to run out of that resource and start failing but it never does</div>
<div class="line">[Thursday 24 February 2011] [12:03:01] &lt;cremes&gt;       at least it doesn&#8217;t before my 16GB box is completely exhausted and used up all of its swap!</div>
<div class="line">[Thursday 24 February 2011] [12:03:30] &lt;cremes&gt;       only then does the OS kill it</div>
<div class="line">[Thursday 24 February 2011] [12:03:41] &lt;pieterh&gt;      I suspect there is more than one symptom</div>
<div class="line">[Thursday 24 February 2011] [12:03:46] &lt;cremes&gt;       it doesn&#8217;t make sense that inproc would show it</div>
<div class="line">[Thursday 24 February 2011] [12:03:47] &lt;Silly&gt;        this on linux? The default linux policy for the OS to give memory is to always succeed, then fail when it can&#8217;t allocate the actual page</div>
<div class="line">[Thursday 24 February 2011] [12:03:58] &lt;Silly&gt;        iwth a segfault</div>
<div class="line">[Thursday 24 February 2011] [12:04:00] &lt;cremes&gt;       Silly: osx and linux, fails same way</div>
<div class="line">[Thursday 24 February 2011] [12:04:01] &lt;pieterh&gt;      cremes: that was the change I made, tcp-&gt;inproc</div>
<div class="line">[Thursday 24 February 2011] [12:04:03] &lt;sustrik&gt;      if it happens with inproc as well and the memory is locked in the OS</div>
<div class="line">[Thursday 24 February 2011] [12:04:17] &lt;Silly&gt;        cremes: huh</div>
<div class="line">[Thursday 24 February 2011] [12:04:27] &lt;sustrik&gt;      it&#8217;s definitely the mailboxes assocaited with individual sockets</div>
<div class="line">[Thursday 24 February 2011] [12:04:40] &lt;pieterh&gt;      sustrik: did we have mailboxes in 2.0.10?</div>
<div class="line">[Thursday 24 February 2011] [12:04:45] &lt;sustrik&gt;      yeah</div>
<div class="line">[Thursday 24 February 2011] [12:04:55] &lt;pieterh&gt;      2.0.9?</div>
<div class="line">[Thursday 24 February 2011] [12:04:58] &lt;sustrik&gt;      yes</div>
<div class="line">[Thursday 24 February 2011] [12:05:02] &lt;mikko&gt;        pieterh: i got feature request for zdns</div>
<div class="line">[Thursday 24 February 2011] [12:05:21] &lt;pieterh&gt;      mikko: zns, it&#8217;s zns... zdns are a bunch of splitters</div>
<div class="line">[Thursday 24 February 2011] [12:05:44] &lt;sustrik&gt;      in any case, the mailboxes for closed sockets should be closed by the reaper thread in 2.1.1</div>
<div class="line">[Thursday 24 February 2011] [12:05:57] &lt;pieterh&gt;      ah, how quickly does the reaper work?</div>
<div class="line">[Thursday 24 February 2011] [12:05:58] &lt;sustrik&gt;      if they are not, there&#8217;s a bug somewhere</div>
<div class="line">[Thursday 24 February 2011] [12:06:08] &lt;sustrik&gt;      as fast as physically possible</div>
<div class="line">[Thursday 24 February 2011] [12:06:23] &lt;sustrik&gt;      no sleeps or similar</div>
<div class="line">[Thursday 24 February 2011] [12:06:35] &lt;pieterh&gt;      can we add an assertion that the number of mailboxes doesn&#8217;t exceed some ceiling?</div>
<div class="line">[Thursday 24 February 2011] [12:06:43] &lt;pieterh&gt;      just for testing, not for real</div>
<div class="line">[Thursday 24 February 2011] [12:06:46] &lt;sustrik&gt;      let me see</div>
<div class="line">[Thursday 24 February 2011] [12:06:51] &lt;pieterh&gt;      mikko: what&#8217;s the suggestion?</div>
<div class="line">[Thursday 24 February 2011] [12:07:00] &lt;mikko&gt;        pieterh: ephemeral entries</div>
<div class="line">[Thursday 24 February 2011] [12:07:08] &lt;pieterh&gt;      sounds good</div>
<div class="line">[Thursday 24 February 2011] [12:07:09] &lt;mikko&gt;        not sure if that is in, just saw the repo name in my feed</div>
<div class="line">[Thursday 24 February 2011] [12:07:11] &lt;pieterh&gt;      what does that mean?</div>
<div class="line">[Thursday 24 February 2011] [12:07:36] &lt;mikko&gt;        the entry exists only if the node who created it exists</div>
<div class="line">[Thursday 24 February 2011] [12:07:38] &lt;pieterh&gt;      ah, I put the zfl maintainers in as the default zns team</div>
<div class="line">[Thursday 24 February 2011] [12:07:50] &lt;sustrik&gt;      pieterh: see reaper.cpp:105</div>
<div class="line">[Thursday 24 February 2011] [12:07:55] &lt;cremes&gt;       sustrik: the code might be leaking mailboxes?</div>
<div class="line">[Thursday 24 February 2011] [12:08:23] &lt;sustrik&gt;      that&#8217;s the only system resource held by socket when inproc is used</div>
<div class="line">[Thursday 24 February 2011] [12:09:27] &lt;pieterh&gt;      sustrik: ack, trying that</div>
<div class="line">[Thursday 24 February 2011] [12:09:40] &lt;pieterh&gt;      mikko: sounds good, worth noting, not sure how to make it</div>
<div class="line">[Thursday 24 February 2011] [12:09:46] &lt;mikko&gt;        pieterh: heartbeat maybe</div>
<div class="line">[Thursday 24 February 2011] [12:09:52] &lt;pieterh&gt;      sure</div>
<div class="line">[Thursday 24 February 2011] [12:09:55] &lt;mikko&gt;        pieterh: this is a concept from zookeeper</div>
<div class="line">[Thursday 24 February 2011] [12:10:01] &lt;pieterh&gt;      i wanted to build zns using the clone pattern from ch3</div>
<div class="line">[Thursday 24 February 2011] [12:10:09] &lt;pieterh&gt;      disrtributed key-value table</div>
<div class="line">[Thursday 24 February 2011] [12:10:22] &lt;mikko&gt;        pieterh: amazingly handy, as if a box fails it automatically disappears from the service discovery</div>
<div class="line">[Thursday 24 February 2011] [12:10:27] &lt;pieterh&gt;      of course</div>
<div class="line">[Thursday 24 February 2011] [12:10:33] &lt;pieterh&gt;      it&#8217;s an excellent way to do failover</div>
<div class="line">[Thursday 24 February 2011] [12:14:45] &lt;pieterh&gt;      mikko: any other ideas for the name service?</div>
<div class="line">[Thursday 24 February 2011] [12:15:04] &lt;pieterh&gt;      i&#8217;ll collect them on zero.mq/zns</div>
<div class="line">[Thursday 24 February 2011] [12:18:34] &lt;pieterh&gt;      sustrik: cremes: using inproc, it climbs to some point and then stops leaking memory</div>
<div class="line">[Thursday 24 February 2011] [12:18:52] &lt;cremes&gt;       that&#8217;s interesting</div>
<div class="line">[Thursday 24 February 2011] [12:18:59] &lt;pieterh&gt;      I&#8217;ve added an assertion that the number of sockets (reaper.cpp) is under 100</div>
<div class="line">[Thursday 24 February 2011] [12:19:04] &lt;pieterh&gt;      that assertion never hits</div>
<div class="line">[Thursday 24 February 2011] [12:19:08] &lt;cremes&gt;       any hypothesis?</div>
<div class="line">[Thursday 24 February 2011] [12:19:25] &lt;mikko&gt;        pieterh: no, thats the single biggest thing</div>
<div class="line">[Thursday 24 February 2011] [12:19:34] &lt;mikko&gt;        i will have more soon probably</div>
<div class="line">[Thursday 24 February 2011] [12:19:41] &lt;pieterh&gt;      back to TCP/IPC leakage due to zombie sockets that go away either very slowly, or not at all</div>
<div class="line">[Thursday 24 February 2011] [12:19:58] &lt;pieterh&gt;      mikko: have started here: <a class="reference external" href="http://zns.zeromq.org/page:read-the-manual">http://zns.zeromq.org/page:read-the-manual</a></div>
<div class="line">[Thursday 24 February 2011] [12:20:22] &lt;pieterh&gt;      cremes: will run the tcp test again now</div>
<div class="line">[Thursday 24 February 2011] [12:20:39] &lt;pieterh&gt;      inproc does not provoke the error, therefore is useless to play with</div>
<div class="line">[Thursday 24 February 2011] [12:21:00] &lt;pieterh&gt;      oh...</div>
<div class="line">[Thursday 24 February 2011] [12:21:07] &lt;pieterh&gt;      I <em>was</em> using tcp, had changed it...</div>
<div class="line">[Thursday 24 February 2011] [12:21:10] &lt;cremes&gt;       i added an assert to the if-block inside #process_reaped; that code inside there is never called</div>
<div class="line">[Thursday 24 February 2011] [12:21:25] &lt;cremes&gt;       so poller-&gt;rm_fd (mailbox_handle) never gets called</div>
<div class="line">[Thursday 24 February 2011] [12:21:38] &lt;pieterh&gt;      hmm, interesting</div>
<div class="line">[Thursday 24 February 2011] [12:23:05] &lt;pieterh&gt;      cremes, indeed, rm_fd is not being called</div>
<div class="line">[Thursday 24 February 2011] [12:23:35] &lt;sustrik&gt;      that looks like it</div>
<div class="line">[Thursday 24 February 2011] [12:23:45] &lt;cremes&gt;       yep, somehow the +terminating+ variable is set back to false!</div>
<div class="line">[Thursday 24 February 2011] [12:24:22] &lt;cremes&gt;       i don&#8217;t see any code that would do that</div>
<div class="line">[Thursday 24 February 2011] [12:24:40] &lt;sustrik&gt;      where&#8217;s the test code?</div>
<div class="line">[Thursday 24 February 2011] [12:24:57] &lt;pieterh&gt;      sustrik: see irc log just above</div>
<div class="line">[Thursday 24 February 2011] [12:25:17] &lt;pieterh&gt;      <a class="reference external" href="https://gist.github.com/841318">https://gist.github.com/841318</a></div>
<div class="line">[Thursday 24 February 2011] [12:25:46] &lt;sustrik&gt;      btw, the reason why the number of reaped socket is never over 100</div>
<div class="line">[Thursday 24 February 2011] [12:25:58] &lt;sustrik&gt;      is that the test is creating a new context periodically</div>
<div class="line">[Thursday 24 February 2011] [12:26:28] &lt;sustrik&gt;      ah, it&#8217;s not</div>
<div class="line">[Thursday 24 February 2011] [12:26:32] &lt;sustrik&gt;      sorry</div>
<div class="line">[Thursday 24 February 2011] [12:26:39] &lt;pieterh&gt;      ah, I just got that assertion, right away</div>
<div class="line">[Thursday 24 February 2011] [12:26:42] &lt;pieterh&gt;      over inproc</div>
<div class="line">[Thursday 24 February 2011] [12:26:45] &lt;pieterh&gt;      does not hit over tcp</div>
<div class="line">[Thursday 24 February 2011] [12:27:10] &lt;pieterh&gt;      it doesn&#8217;t call rm_fd using inproc either</div>
<div class="line">[Thursday 24 February 2011] [12:27:48] &lt;pieterh&gt;      if I don&#8217;t put the assertion in, over inproc, my process runs out of file handles</div>
<div class="line">[Thursday 24 February 2011] [12:27:55] &lt;pieterh&gt;      it&#8217;s the same error, different symptom</div>
<div class="line">[Thursday 24 February 2011] [12:27:59] &lt;pieterh&gt;      do you want that example as well?</div>
<div class="line">[Thursday 24 February 2011] [12:28:11] &lt;sustrik&gt;      ok, the code never gets inside &#8220;if (!sockets &amp;&amp; terminating)&#8221;</div>
<div class="line">[Thursday 24 February 2011] [12:28:14] &lt;pieterh&gt;      cremes: congrats! you found a bug in rc1, I think!</div>
<div class="line">[Thursday 24 February 2011] [12:28:20] &lt;sustrik&gt;      because zmq_term() is never called</div>
<div class="line">[Thursday 24 February 2011] [12:28:24] &lt;sustrik&gt;      so it&#8217;s ok</div>
<div class="line">[Thursday 24 February 2011] [12:28:42] &lt;pieterh&gt;      sustrik: there are two places it calls rm_fd, neither ever happen</div>
<div class="line">[Thursday 24 February 2011] [12:28:54] &lt;sustrik&gt;      it should not</div>
<div class="line">[Thursday 24 February 2011] [12:28:59] &lt;sustrik&gt;      unless you call zmq_term()</div>
<div class="line">[Thursday 24 February 2011] [12:29:04] &lt;pieterh&gt;      so when does it reap a socket?</div>
<div class="line">[Thursday 24 February 2011] [12:29:16] &lt;cremes&gt;       socket leak! :)</div>
<div class="line">[Thursday 24 February 2011] [12:29:17] &lt;sustrik&gt;      the socket reaps itself</div>
<div class="line">[Thursday 24 February 2011] [12:29:23] &lt;pieterh&gt;      where?</div>
<div class="line">[Thursday 24 February 2011] [12:30:35] &lt;pieterh&gt;      inproc doesn&#8217;t use sockets at all, right?</div>
<div class="line">[Thursday 24 February 2011] [12:30:57] &lt;sustrik&gt;      TCP sockets?</div>
<div class="line">[Thursday 24 February 2011] [12:30:58] &lt;sustrik&gt;      no</div>
<div class="line">[Thursday 24 February 2011] [12:31:05] &lt;sustrik&gt;      it uses socketpairs though</div>
<div class="line">[Thursday 24 February 2011] [12:31:13] &lt;sustrik&gt;      1 socketpair per 0mq socket</div>
<div class="line">[Thursday 24 February 2011] [12:31:28] &lt;pieterh&gt;      so my test case uses inproc and dies after a few seconds with too many open files</div>
<div class="line">[Thursday 24 February 2011] [12:31:38] &lt;pieterh&gt;      yet in the code, sockets are properly closed</div>
<div class="line">[Thursday 24 February 2011] [12:31:48] &lt;sustrik&gt;      close is async</div>
<div class="line">[Thursday 24 February 2011] [12:32:01] &lt;pieterh&gt;      this is on a sub socket, nothing being written</div>
<div class="line">[Thursday 24 February 2011] [12:32:09] &lt;pieterh&gt;      how async is async?</div>
<div class="line">[Thursday 24 February 2011] [12:32:18] &lt;sustrik&gt;      utterly async</div>
<div class="line">[Thursday 24 February 2011] [12:32:24] &lt;pieterh&gt;      seconds? days?</div>
<div class="line">[Thursday 24 February 2011] [12:32:35] &lt;sustrik&gt;      microseconds</div>
<div class="line">[Thursday 24 February 2011] [12:32:45] &lt;pieterh&gt;      well, our loop here is in msec and sec</div>
<div class="line">[Thursday 24 February 2011] [12:32:51] &lt;pieterh&gt;      cremes: let me try init and term in the client loop...</div>
<div class="line">[Thursday 24 February 2011] [12:33:06] &lt;cremes&gt;       i was just about to try that</div>
<div class="line">[Thursday 24 February 2011] [12:33:28] &lt;pieterh&gt;      btw, HWM and LINGER are irrelevant to this afaics</div>
<div class="line">[Thursday 24 February 2011] [12:33:41] &lt;cremes&gt;       i thought so but i wanted to cover all of the bases</div>
<div class="line">[Thursday 24 February 2011] [12:34:24] &lt;pieterh&gt;      cremes: your publisher binds to an IP address btw</div>
<div class="line">[Thursday 24 February 2011] [12:34:32] &lt;pieterh&gt;      you should bind to *</div>
<div class="line">[Thursday 24 February 2011] [12:35:45] &lt;pieterh&gt;      ok, so doing init/term fixes the problem</div>
<div class="line">[Thursday 24 February 2011] [12:35:52] &lt;pieterh&gt;      and btw it calls the reaper all the time</div>
<div class="line">[Thursday 24 February 2011] [12:36:14] &lt;pieterh&gt;      sustrik: looks like socketpairs leak (at least)</div>
<div class="line">[Thursday 24 February 2011] [12:36:38] &lt;cremes&gt;       pieterh: binding to * doesn&#8217;t always work on osx; i&#8217;ll put together a test case &amp; a ticket</div>
<div class="line">[Thursday 24 February 2011] [12:36:55] &lt;cremes&gt;       in C :)</div>
<div class="line">[Thursday 24 February 2011] [12:37:01] &lt;sustrik&gt;      so maybe the reaper doesn&#8217;t work correctly</div>
<div class="line">[Thursday 24 February 2011] [12:37:16] &lt;pieterh&gt;      hmm, we need * to work, make a ticket... yes</div>
<div class="line">[Thursday 24 February 2011] [12:37:16] &lt;sustrik&gt;      maybe some sockets are stuck in the middle of the deallocation process</div>
<div class="line">[Thursday 24 February 2011] [12:37:20] &lt;cremes&gt;       sustrik: i think it <em>only</em> reaps when zmq_term() is called</div>
<div class="line">[Thursday 24 February 2011] [12:37:42] &lt;sustrik&gt;      let me try</div>
<div class="line">[Thursday 24 February 2011] [12:38:56] &lt;pieterh&gt;      cremes: that&#8217;s what sustrik explained, it&#8217;s the &#8216;terminating&#8217; flag</div>
<div class="line">[Thursday 24 February 2011] [12:46:43] &lt;sustrik&gt;      bingo! reproduced!</div>
<div class="line">[Thursday 24 February 2011] [12:46:48] &lt;cremes&gt;       ah, i see why the JVM didn&#8217;t croak when the heap expanded beyond its limit</div>
<div class="line">[Thursday 24 February 2011] [12:47:12] &lt;cremes&gt;       this C lib is on the other side of the JNI &#8220;bridge&#8221; so memory allocations performed there don&#8217;t get charged to the JVM</div>
<div class="line">[Thursday 24 February 2011] [12:47:23] &lt;cremes&gt;       sustrik: yea!</div>
<div class="line">[Thursday 24 February 2011] [12:50:49] &lt;pieterh&gt;      it&#8217;s going to be a great rc2</div>
<div class="line">[Thursday 24 February 2011] [12:51:48] &lt;cremes&gt;       pieterh: it was already a pretty good rc1; rc2 will just be <em>better</em>!</div>
<div class="line">[Thursday 24 February 2011] [12:52:16] &lt;pieterh&gt;      we need a new superlative generator</div>
<div class="line">[Thursday 24 February 2011] [12:52:31] &lt;cremes&gt;       that&#8217;s a stupendous idea</div>
<div class="line">[Thursday 24 February 2011] [12:56:13] &lt;Evet&gt; is there a function to store messages to disk?</div>
<div class="line">[Thursday 24 February 2011] [12:56:24] &lt;pieterh&gt;      Evet: not in 0MQ, nope</div>
<div class="line">[Thursday 24 February 2011] [12:56:52] &lt;pieterh&gt;      but in every language it&#8217;s usually pretty easy</div>
<div class="line">[Thursday 24 February 2011] [12:58:26] &lt;Evet&gt; im gonna implement redis like append-to-disk</div>
<div class="line">[Thursday 24 February 2011] [13:01:45] &lt;lt_schmidt_jr&gt;        and tehy will sen you a login e-mail</div>
<div class="line">[Thursday 24 February 2011] [13:01:52] &lt;lt_schmidt_jr&gt;        oops</div>
<div class="line">[Thursday 24 February 2011] [13:03:04] &lt;pieterh&gt;      lt_schmidt_jr: wrong windows, yeah, it happens :-)</div>
<div class="line">[Thursday 24 February 2011] [13:03:30] &lt;lt_schmidt_jr&gt;        and bad typing :)</div>
<div class="line">[Thursday 24 February 2011] [13:08:59] &lt;pieterh&gt;      sustrik: any joy?</div>
<div class="line">[Thursday 24 February 2011] [13:09:16] &lt;sustrik&gt;      debugging i</div>
<div class="line">[Thursday 24 February 2011] [13:09:18] &lt;sustrik&gt;      it</div>
<div class="line">[Thursday 24 February 2011] [13:09:19] &lt;pieterh&gt;      :-)</div>
<div class="line">[Thursday 24 February 2011] [13:31:59] &lt;cremes&gt;       sustrik: how hairy is this bug?</div>
<div class="line">[Thursday 24 February 2011] [13:34:01] &lt;sustrik&gt;      itnot that bad so far</div>
<div class="line">[Thursday 24 February 2011] [15:22:56] &lt;pieterh&gt;      sustrik: what happened?</div>
<div class="line">[Thursday 24 February 2011] [16:10:44] &lt;Fast[BDC]&gt;    hi, is there an example implemention of that <a class="reference external" href="http://zguide.zeromq.org/chapter:all#toc55">http://zguide.zeromq.org/chapter:all#toc55</a> ?</div>
<div class="line">[Thursday 24 February 2011] [16:12:41] &lt;Fast[BDC]&gt;    for me its hard to imagine howto implement a broker which does broadcasts, node to node and load balanced connections</div>
<div class="line">[Thursday 24 February 2011] [16:28:38] &lt;apexi200sx&gt;   when would something like zeromq be used over say an AMQP server like RabbitMQ, and vice versa</div>
<div class="line">[Thursday 24 February 2011] [16:30:03] &lt;Fast[BDC]&gt;    apexi200sx: i&#8217;m new so i&#8217;m not sure i&#8217;m right: i think ZeroMQ is better if you just need Message Distributing or when you need ultimate speed</div>
<div class="line">[Thursday 24 February 2011] [16:31:56] &lt;Fast[BDC]&gt;    apexi200sx: read this for a nice comparison: <a class="reference external" href="http://www.rabbitmq.com/blog/tag/zeromq/">http://www.rabbitmq.com/blog/tag/zeromq/</a></div>
<div class="line">[Thursday 24 February 2011] [16:33:43] &lt;apexi200sx&gt;   cheers will have a look</div>
<div class="line">[Thursday 24 February 2011] [16:34:03] &lt;apexi200sx&gt;   Fast[BDC]: well have you come from using a broker like rabbitmq ?</div>
<div class="line">[Thursday 24 February 2011] [16:36:20] &lt;Fast[BDC]&gt;    no i&#8217;m very new to all this stuff, i have some servers running with a self implemented messaging subsystem and wanna replace it.</div>
<div class="line">[Thursday 24 February 2011] [16:38:57] &lt;apexi200sx&gt;   Fast[BDC]: why what have you implemented and y, sorry for being nosey</div>
<div class="line">[Thursday 24 February 2011] [16:41:19] &lt;Fast[BDC]&gt;    apexi200sx: its a data fetcher and processor, i get product data from different sources to reprice my customers stuff</div>
<div class="line">[Thursday 24 February 2011] [16:43:54] &lt;Fast[BDC]&gt;    apexi200sx: my servers are interconnected by Twisted and its &#8220;Perspective Broker&#8221; Protocol ( 1 to 1 connections ) work distributing is done by the very nice execnet library</div>
<div class="line">[Thursday 24 February 2011] [16:44:52] &lt;apexi200sx&gt;   Fast[BDC]: I have heard of twisted, and perspective broker is its RPC mechanism is it not</div>
<div class="line">[Thursday 24 February 2011] [16:45:12] &lt;Fast[BDC]&gt;    apexi200sx: but i need another approach to scale better, currently i process 3 Million products and its fast growing :(</div>
<div class="line">[Thursday 24 February 2011] [16:45:15] &lt;Fast[BDC]&gt;    apexi200sx: yes it is</div>
<div class="line">[Thursday 24 February 2011] [16:46:54] &lt;apexi200sx&gt;   Fast[BDC]: what sort of products, ? are you saying you gather price data from various sources over the internet of loads of different products that ur customer also sells, and u are providing the customer an automated way of price setting</div>
<div class="line">[Thursday 24 February 2011] [16:46:56] &lt;apexi200sx&gt;   ?</div>
<div class="line">[Thursday 24 February 2011] [16:47:15] &lt;Fast[BDC]&gt;    apexi200sx: yes, that is what i basicaly do.</div>
<div class="line">[Thursday 24 February 2011] [16:47:43] &lt;apexi200sx&gt;   Fast[BDC]: 3 million products, flippin heck , so you have to scan them frequently for changes</div>
<div class="line">[Thursday 24 February 2011] [16:47:44] &lt;Fast[BDC]&gt;    i catch about 36 Million datasets a day for 3 Million products</div>
<div class="line">[Thursday 24 February 2011] [16:48:03] &lt;cremes&gt;       you guys might be interested in this 0mq whitepaper:  <a class="reference external" href="http://whaleshark.zeromq.org/">http://whaleshark.zeromq.org/</a></div>
<div class="line">[Thursday 24 February 2011] [16:50:02] &lt;apexi200sx&gt;   Fast[BDC]: how do you retrieve the datasets, is it web crawling ?</div>
<div class="line">[Thursday 24 February 2011] [16:50:17] &lt;apexi200sx&gt;   Fast[BDC]: HTML scraping ?</div>
<div class="line">[Thursday 24 February 2011] [16:50:40] &lt;Fast[BDC]&gt;    apexi200sx: different ways, some by API&#8217;s some by hackish scraping</div>
<div class="line">[Thursday 24 February 2011] [16:57:07] &lt;Fast[BDC]&gt;    cremes: nice paper</div>
<div class="line">[Thursday 24 February 2011] [16:57:17] &lt;apexi200sx&gt;   Fast[BDC]: just had a look at execnet, never heard of that before, sounds like it has a decent feature set</div>
<div class="line">[Thursday 24 February 2011] [16:58:01] &lt;apexi200sx&gt;   Fast[BDC]: where/what do you think ur bottle neck is</div>
<div class="line">[Thursday 24 February 2011] [17:00:17] &lt;Fast[BDC]&gt;    apexi200sx: currently i need to shut down all application servers to add another one</div>
<div class="line">[Thursday 24 February 2011] [17:02:34] &lt;Fast[BDC]&gt;    apexi200sx: another issue i have is failover and/or resource sharing</div>
<div class="line">[Thursday 24 February 2011] [17:05:08] &lt;Fast[BDC]&gt;    apexi200sx: i take a request from my customer (600k Products) split it into parts and process this parts with the help of execnet, then my workers fetch data which i don&#8217;t have in the DB (mongodb) and after a while i send it processed back to the customer</div>
<div class="line">[Thursday 24 February 2011] [17:07:00] &lt;Fast[BDC]&gt;    apexi200sx: for now each &#8220;spliter&#8221; has a bunch of workers assigned to it but i have multiple &#8220;spliters&#8221; and i need the workers to be shared to all spliters</div>
<div class="line">[Thursday 24 February 2011] [17:11:04] &lt;apexi200sx&gt;   u running all this in the cloud (like amazon ?) and you need to be able to add new instances on the fly ?</div>
<div class="line">[Thursday 24 February 2011] [17:11:32] &lt;Fast[BDC]&gt;    no i run it on dedicated servers and yes i need to add instances on to fly</div>
<div class="line">[Thursday 24 February 2011] [17:12:50] &lt;Fast[BDC]&gt;    apexi200sx: to be true its a bit a overkill but i like to have this system on the edge i just learn from it :)</div>
<div class="line">[Thursday 24 February 2011] [17:39:12] &lt;Evet&gt; is there a publisher or subscriber limit for in-process?</div>
<div class="line">[Thursday 24 February 2011] [21:10:09] &lt;amacleod&gt;     Are ipc:// URIs expected not to work under Windows?  We are getting a &#8220;Protocol not supported&#8221; error when trying to bind to &#8220;ipc://listener&#8221;.</div>
<div class="line">[Thursday 24 February 2011] [21:11:50] &lt;amacleod&gt;     Ah.. there it says right in the manpage.  It&#8217;s currently only implemented on OSs that provide UNIX domain sockets.</div>
<div class="line">[Thursday 24 February 2011] [22:01:28] &lt;brazilnut000&gt; hello, i was wondering if I could get some assistance trying to figure out some difficulty I&#8217;m havnig with multithreaded code...</div>
<div class="line">[Thursday 24 February 2011] [22:03:25] &lt;brazilnut000&gt; basically, I&#8217;m spawning a thread to subscribe to incoming data and update some variables while my main thread does some other stuff (including talk on other ports)</div>
<div class="line">[Thursday 24 February 2011] [22:03:57] &lt;brazilnut000&gt; they&#8217;re both using the same context, but my thread doesn&#8217;t seem to get anything from the publisher</div>
<div class="line">[Thursday 24 February 2011] [22:04:50] &lt;brazilnut000&gt; however, if i make the same calls to create, bind, and subscribe in my main thread it works...</div>
<div class="line">[Thursday 24 February 2011] [22:05:11] &lt;brazilnut000&gt; anyone?</div>
<div class="line">[Thursday 24 February 2011] [22:24:30] &lt;brazilnut000&gt; hrmm...i guess not...</div>
<div class="line">[Thursday 24 February 2011] [22:25:55] &lt;Steve-o&gt;      morning all, looks like o&#8217;reilly doesn&#8217;t actually archive webcasts?</div>
<div class="line">[Thursday 24 February 2011] [22:32:24] &lt;amacleod&gt;     brazilnut000, you are not sharing sockets between threads, are you?  Just contexts?</div>
<div class="line">[Thursday 24 February 2011] [22:32:49] &lt;amacleod&gt;     brazilnut000, what transport are you using, and what ZMQ pattern?</div>
<div class="line">[Thursday 24 February 2011] [22:39:00] &lt;brazilnut000&gt; oh, sorry, stepped away.</div>
<div class="line">[Thursday 24 February 2011] [22:40:00] &lt;brazilnut000&gt; I&#8217;m sharing contexts only, tcp, ZMQ_PUB and ZMQ_SUB</div>
<div class="line">[Thursday 24 February 2011] [22:44:39] &lt;amacleod&gt;     Ok.  So you shouldn&#8217;t need to be messing with any addressing/routing.</div>
<div class="line">[Thursday 24 February 2011] [22:44:47] &lt;amacleod&gt;     How many I/O threads?  1?</div>
<div class="line">[Thursday 24 February 2011] [22:44:54] &lt;brazilnut000&gt; 1</div>
<div class="line">[Thursday 24 February 2011] [22:47:58] &lt;amacleod&gt;     Dunno.  Is it possible that the subscriber is trying to connect before the publisher has had a chance to become established?</div>
<div class="line">[Thursday 24 February 2011] [22:48:18] &lt;amacleod&gt;     (I&#8217;m not sure how timing issues are supposed to work with PUB/SUB.)</div>
<div class="line">[Thursday 24 February 2011] [22:50:07] &lt;brazilnut000&gt; it&#8217;s possible, though unlikely....also, as I understand it, order shouldn&#8217;t matter.  It&#8217;s possible to lose the first &#8216;x&#8217; messages, but I don&#8217;t ever get any...</div>
<div class="line">[Thursday 24 February 2011] [22:56:32] &lt;brazilnut000&gt; well, thanks for giving it a shot.  Gonna go get some dinner...</div>
<div class="line">[Thursday 24 February 2011] [22:57:11] &lt;amacleod&gt;     You&#8217;re welcome.  Sorry I couldn&#8217;t get any further.</div>
<div class="line">[Friday 25 February 2011] [02:44:07] &lt;<a href="#id1747"><span class="problematic" id="id1748">pieterh_</span></a>&gt;       sustrik: g&#8217;morning</div>
<div class="line">[Friday 25 February 2011] [02:44:13] &lt;sustrik&gt;        morning</div>
<div class="line">[Friday 25 February 2011] [02:44:25] &lt;<a href="#id1749"><span class="problematic" id="id1750">pieterh_</span></a>&gt;       just curious if you found that leak yesterday</div>
<div class="line">[Friday 25 February 2011] [02:45:17] &lt;sustrik&gt;        well, i found one delayed deallocation</div>
<div class="line">[Friday 25 February 2011] [02:45:29] &lt;sustrik&gt;        but afaics it applies only to sockets with no connects/binds</div>
<div class="line">[Friday 25 February 2011] [02:45:36] &lt;sustrik&gt;        so it&#8217;s probably a different issue</div>
<div class="line">[Friday 25 February 2011] [02:46:30] &lt;<a href="#id1751"><span class="problematic" id="id1752">pieterh_</span></a>&gt;       a&#8217;ight</div>
<div class="line">[Friday 25 February 2011] [02:46:50] &lt;sustrik&gt;        anyway, i&#8217;m patching it now</div>
<div class="line">[Friday 25 February 2011] [02:50:18] &lt;sustrik&gt;        pieterh: the master documentation doesn&#8217;t seem to be updated automatically</div>
<div class="line">[Friday 25 February 2011] [02:50:20] &lt;sustrik&gt;        should it?</div>
<div class="line">[Friday 25 February 2011] [03:00:40] &lt;CIA-21&gt; zeromq2: 03Martin Sustrik 07master * rd4e418f 10/ (src/reaper.cpp src/socket_base.cpp src/socket_base.hpp):</div>
<div class="line">[Friday 25 February 2011] [03:00:40] &lt;CIA-21&gt; zeromq2: Socket with no owner objects is deallocated immediately</div>
<div class="line">[Friday 25 February 2011] [03:00:40] &lt;CIA-21&gt; zeromq2: Till now the deallocation of such socket was delayed</div>
<div class="line">[Friday 25 February 2011] [03:00:40] &lt;CIA-21&gt; zeromq2: till zmq_term() thus creating a &#8220;leak&#8221;.</div>
<div class="line">[Friday 25 February 2011] [03:00:40] &lt;CIA-21&gt; zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/eXBeHV">http://bit.ly/eXBeHV</a></div>
<div class="line">[Friday 25 February 2011] [03:00:54] &lt;sustrik&gt;        pieterh: the patch is in master</div>
<div class="line">[Friday 25 February 2011] [03:01:09] &lt;sustrik&gt;        can you check whether the leak persists?</div>
<div class="line">[Friday 25 February 2011] [03:01:13] &lt;sustrik&gt;        just in case...</div>
<div class="line">[Friday 25 February 2011] [03:18:58] &lt;<a href="#id1753"><span class="problematic" id="id1754">pieterh_</span></a>&gt;       sustrik, re</div>
<div class="line">[Friday 25 February 2011] [03:19:30] &lt;<a href="#id1755"><span class="problematic" id="id1756">pieterh_</span></a>&gt;       master docs are not yet updating automatically, but I&#8217;ll check with mikko, everything is ready for that</div>
<div class="line">[Friday 25 February 2011] [03:19:57] &lt;<a href="#id1757"><span class="problematic" id="id1758">pieterh_</span></a>&gt;       i&#8217;ll check the leak later, need to use a different box (multicore)</div>
<div class="line">[Friday 25 February 2011] [03:21:01] &lt;sustrik&gt;        ok</div>
<div class="line">[Friday 25 February 2011] [03:21:37] &lt;<a href="#id1759"><span class="problematic" id="id1760">pieterh_</span></a>&gt;       though in the test case, sockets were definitely being used (recv) and closed systematically</div>
<div class="line">[Friday 25 February 2011] [03:52:28] &lt;pieterh&gt;        sustrik: good news</div>
<div class="line">[Friday 25 February 2011] [03:52:46] &lt;pieterh&gt;        as far as I can tell from initial tests, you&#8217;ve fixed the leak</div>
<div class="line">[Friday 25 February 2011] [03:52:57] &lt;sustrik&gt;        interesting</div>
<div class="line">[Friday 25 February 2011] [03:53:07] &lt;pieterh&gt;        I&#8217;m doing more tests now</div>
<div class="line">[Friday 25 February 2011] [03:54:26] &lt;pieterh&gt;        I retract that</div>
<div class="line">[Friday 25 February 2011] [03:54:31] &lt;pieterh&gt;        it works over inproc but not over tcp</div>
<div class="line">[Friday 25 February 2011] [03:55:03] &lt;pieterh&gt;        and I think inproc was getting weird test results if run after tcp</div>
<div class="line">[Friday 25 February 2011] [03:55:26] &lt;pieterh&gt;        cremes&#8217; original test case still leaks memory (and consumes a whopping amount of CPU)</div>
<div class="line">[Friday 25 February 2011] [04:05:39] &lt;sustrik&gt;        ok</div>
<div class="line">[Friday 25 February 2011] [04:23:34] &lt;pieterh&gt;        do we have an open issue for this?</div>
<div class="line">[Friday 25 February 2011] [04:23:55] &lt;pieterh&gt;        i&#8217;ve stripped down chuck&#8217;s test case and would like to post that somewhere</div>
<div class="line">[Friday 25 February 2011] [04:27:45] &lt;sustrik&gt;        no idea</div>
<div class="line">[Friday 25 February 2011] [04:27:55] &lt;sustrik&gt;        there&#8217;s none unless chuck opened one</div>
<div class="line">[Friday 25 February 2011] [04:28:17] &lt;pieterh&gt;        ok</div>
<div class="line">[Friday 25 February 2011] [04:28:29] &lt;pieterh&gt;        I&#8217;ll ask him to do so</div>
<div class="line">[Friday 25 February 2011] [04:30:52] &lt;pieterh&gt;        hmm, back with &#8216;too many open files&#8217;... strange</div>
<div class="line">[Friday 25 February 2011] [04:31:46] &lt;sustrik&gt;        well, the test case is creating undetermined number of sockets</div>
<div class="line">[Friday 25 February 2011] [04:32:08] &lt;pieterh&gt;        yes, it&#8217;s a fault in my test case</div>
<div class="line">[Friday 25 February 2011] [04:34:33] &lt;pieterh&gt;        ok, I need to leave for a while bbl</div>
<div class="line">[Friday 25 February 2011] [07:03:05] &lt;mikko&gt;  ian did well</div>
<div class="line">[Friday 25 February 2011] [07:14:26] &lt;cremes&gt; pieterh, sustrik: i opened a ticket on this leak a few days back: <a class="reference external" href="https://github.com/zeromq/zeromq2/issues#issue/171">https://github.com/zeromq/zeromq2/issues#issue/171</a></div>
<div class="line">[Friday 25 February 2011] [07:14:37] &lt;cremes&gt; example code is in a gist attached to the ticket</div>
<div class="line">[Friday 25 February 2011] [07:14:47] &lt;cremes&gt; brb...</div>
<div class="line">[Friday 25 February 2011] [07:25:48] &lt;sustrik&gt;        mikko: you&#8217;ve been on the coference?</div>
<div class="line">[Friday 25 February 2011] [07:26:00] &lt;sustrik&gt;        there&#8217;s a lot of tweets about the lecture</div>
<div class="line">[Friday 25 February 2011] [07:28:47] &lt;sustrik&gt;        hi ian</div>
<div class="line">[Friday 25 February 2011] [07:28:55] &lt;sustrik&gt;        how did it go?</div>
<div class="line">[Friday 25 February 2011] [07:30:12] &lt;mikko&gt;  sustrik: here at the moment</div>
<div class="line">[Friday 25 February 2011] [07:30:28] &lt;sustrik&gt;        no haste</div>
<div class="line">[Friday 25 February 2011] [07:30:28] &lt;ianbarber&gt;      hey! pretty good i think</div>
<div class="line">[Friday 25 February 2011] [07:31:00] &lt;sustrik&gt;        people seem to be happy according to twitter</div>
<div class="line">[Friday 25 February 2011] [07:31:09] &lt;sustrik&gt;        any feedback, questions?</div>
<div class="line">[Friday 25 February 2011] [07:32:46] &lt;mikko&gt;  <a class="reference external" href="http://joind.in/talk/view/2523">http://joind.in/talk/view/2523</a></div>
<div class="line">[Friday 25 February 2011] [07:32:54] &lt;mikko&gt;  there is some feedback already</div>
<div class="line">[Friday 25 February 2011] [07:34:01] &lt;sustrik&gt;        nice :)</div>
<div class="line">[Friday 25 February 2011] [07:36:27] &lt;ianbarber&gt;      good comments, had some questions about persistance, telehash, whether it could run on an arduino, some zero vs activemq stuff, and a bit on whether you can do pgm on ec2</div>
<div class="line">[Friday 25 February 2011] [07:38:56] &lt;sustrik&gt;        good question</div>
<div class="line">[Friday 25 February 2011] [07:39:04] &lt;sustrik&gt;        especially the last one :)</div>
<div class="line">[Friday 25 February 2011] [07:39:13] &lt;sustrik&gt;        i have to admit i have no idea</div>
<div class="line">[Friday 25 February 2011] [07:41:13] &lt;ianbarber&gt;      me either :) the next talk was about ec2 though, so that&#8217;s handy</div>
<div class="line">[Friday 25 February 2011] [10:56:38] &lt;mikko&gt;  pieterh: here?</div>
<div class="line">[Friday 25 February 2011] [10:56:44] &lt;pieterh&gt;        hi mikko, yes</div>
<div class="line">[Friday 25 February 2011] [10:56:56] &lt;mikko&gt;  should i run apiall or apione in the docs builds?</div>
<div class="line">[Friday 25 February 2011] [10:57:33] &lt;pieterh&gt;        apiall, that&#8217;s the main script</div>
<div class="line">[Friday 25 February 2011] [10:58:04] &lt;pieterh&gt;        sorry...</div>
<div class="line">[Friday 25 February 2011] [10:58:17] &lt;mikko&gt;  hmm</div>
<div class="line">[Friday 25 February 2011] [10:58:24] &lt;mikko&gt;  ZMQ_DIR seems to have changed as well</div>
<div class="line">[Friday 25 February 2011] [10:58:44] &lt;pieterh&gt;        I&#8217;ve made apiall do the whole job</div>
<div class="line">[Friday 25 February 2011] [10:58:50] &lt;pieterh&gt;        there is no ZMQ_DIR any more</div>
<div class="line">[Friday 25 February 2011] [10:59:11] &lt;pieterh&gt;        apione is to update a single version from some repository</div>
<div class="line">[Friday 25 February 2011] [10:59:32] &lt;pieterh&gt;        does this make sense?</div>
<div class="line">[Friday 25 February 2011] [11:00:30] &lt;mikko&gt;  yes, ill check the code to see what exactly is happening</div>
<div class="line">[Friday 25 February 2011] [11:01:18] &lt;mikko&gt;  so it expects to find ../../zeromq2 ?</div>
<div class="line">[Friday 25 February 2011] [11:01:20] &lt;pieterh&gt;        yes</div>
<div class="line">[Friday 25 February 2011] [11:01:24] &lt;pieterh&gt;        and ../../zeromq2-1</div>
<div class="line">[Friday 25 February 2011] [11:01:28] &lt;mikko&gt;  and ../../zeromq2-1</div>
<div class="line">[Friday 25 February 2011] [11:01:43] &lt;mikko&gt;  ok</div>
<div class="line">[Friday 25 February 2011] [11:01:43] &lt;pieterh&gt;        and eventually ../../zeromq2-0 when we make that</div>
<div class="line">[Friday 25 February 2011] [11:01:44] &lt;pieterh&gt;        etc.</div>
<div class="line">[Friday 25 February 2011] [11:02:02] &lt;pieterh&gt;        does that match how you use the repos on the build system?</div>
<div class="line">[Friday 25 February 2011] [11:02:27] &lt;mikko&gt;  no, this far i&#8217;ve used branches</div>
<div class="line">[Friday 25 February 2011] [11:02:40] &lt;mikko&gt;  i think i need to update all maint builds at some point</div>
<div class="line">[Friday 25 February 2011] [11:02:43] &lt;pieterh&gt;        right, but the relative locations of ztools and zeromq2</div>
<div class="line">[Friday 25 February 2011] [11:03:02] &lt;mikko&gt;  ah, thats different as well</div>
<div class="line">[Friday 25 February 2011] [11:03:13] &lt;mikko&gt;  but i can make it to use the new structure</div>
<div class="line">[Friday 25 February 2011] [11:03:45] &lt;pieterh&gt;        let me know if you need any changes to the apisite stuff, happy to do whatever&#8217;s needed</div>
<div class="line">[Friday 25 February 2011] [11:03:49] &lt;mikko&gt;  i wonder if git submodules would make sense here</div>
<div class="line">[Friday 25 February 2011] [11:04:02] &lt;mikko&gt;  they are a bit like svn externals</div>
<div class="line">[Friday 25 February 2011] [11:05:07] &lt;pieterh&gt;        oh, that gets really complex real fast, mikko...</div>
<div class="line">[Friday 25 February 2011] [11:05:25] &lt;ianbarber&gt;      i&#8217;ve heard they are often a bit of a pain</div>
<div class="line">[Friday 25 February 2011] [11:05:45] &lt;mikko&gt;  i meant using submodules in this way:</div>
<div class="line">[Friday 25 February 2011] [11:06:04] &lt;mikko&gt;  ztools/apisite/source/master -&gt; zeromq/zeromq2/master</div>
<div class="line">[Friday 25 February 2011] [11:06:25] &lt;mikko&gt;  when you checkout ztools you can recursively take submodules if you want</div>
<div class="line">[Friday 25 February 2011] [11:06:33] &lt;mikko&gt;  and if not then you can put the code into right place</div>
<div class="line">[Friday 25 February 2011] [11:07:01] &lt;mikko&gt;  not sure how jenkins handles that</div>
<div class="line">[Friday 25 February 2011] [11:07:21] &lt;mikko&gt;  because currently jenkins is configured to use zeromq/zeromq2 as source repo for docs build</div>
<div class="line">[Friday 25 February 2011] [11:07:35] &lt;mikko&gt;  and it polls that repo for changes and builds if changes are detected</div>
<div class="line">[Friday 25 February 2011] [11:08:29] &lt;mikko&gt;  i&#8217;ll look into this as soon i can get onto a bit faster internet</div>
<div class="line">[Friday 25 February 2011] [11:08:35] &lt;mikko&gt;  conference wireless is a bit painful</div>
<div class="line">[Friday 25 February 2011] [11:14:27] &lt;pieterh&gt;        hmm</div>
<div class="line">[Friday 25 February 2011] [11:18:13] &lt;pieterh&gt;        ok, I&#8217;ve made a PHP version of the Guide, <a class="reference external" href="http://zguide.zeromq.org/php:all">http://zguide.zeromq.org/php:all</a></div>
<div class="line">[Friday 25 February 2011] [11:23:40] &lt;sustrik&gt;        pieterh: some of the examples are in python and c++</div>
<div class="line">[Friday 25 February 2011] [11:25:21] &lt;sustrik&gt;        and c</div>
<div class="line">[Friday 25 February 2011] [11:30:42] &lt;pieterh&gt;        only the very first ones, deliberately</div>
<div class="line">[Friday 25 February 2011] [11:30:57] &lt;pieterh&gt;        and some fragments here and there which are never translated</div>
<div class="line">[Friday 25 February 2011] [11:31:24] &lt;pieterh&gt;        this is still experimental, I&#8217;m sure we can improve it, but I don&#8217;t want to have to modify the text itself to make a language-specific version</div>
<div class="line">[Friday 25 February 2011] [11:31:45] &lt;pieterh&gt;        my idea is that any language which hits 100% gets its own version</div>
<div class="line">[Friday 25 February 2011] [11:32:10] &lt;sustrik&gt;        ok</div>
<div class="line">[Friday 25 February 2011] [11:59:37] &lt;lt_schmidt_jr&gt;  :Steve-o, there was nothing on it about ZMQ</div>
<div class="line">[Friday 25 February 2011] [16:57:56] &lt;<a href="#id1761"><span class="problematic" id="id1762">DOBRO_</span></a>&gt; hi</div>
<div class="line">[Friday 25 February 2011] [16:58:24] &lt;apexi200sx&gt;     hi</div>
<div class="line">[Friday 25 February 2011] [16:59:18] &lt;sustrik&gt;        hi</div>
<div class="line">[Friday 25 February 2011] [17:07:41] &lt;apexi200sx&gt;     anyone got any use cases for zeromq</div>
<div class="line">[Friday 25 February 2011] [17:08:10] &lt;cordor&gt; is there precompiled version somewhere?</div>
<div class="line">[Friday 25 February 2011] [17:11:57] &lt;sustrik&gt;        condor: there are snapshots</div>
<div class="line">[Friday 25 February 2011] [17:12:30] &lt;sustrik&gt;        apexi200sx: there were few use cases mentioned on the mailing list</div>
<div class="line">[Friday 25 February 2011] [17:13:47] &lt;cordor&gt; zeromq-2.0-alpha1.exe?</div>
<div class="line">[Friday 25 February 2011] [17:14:08] &lt;siggimoo&gt;       apexi200sx: we&#8217;re using ZeroMQ for network monitoring. Individual processes monitor something and push their readings to a central analyzer, which in turn publishes its findings to zero-or-more subscribers, one of which is a pager/alarm system.</div>
<div class="line">[Friday 25 February 2011] [17:15:20] &lt;sustrik&gt;        condor: <a class="reference external" href="http://snapshot.zero.mq/">http://snapshot.zero.mq/</a></div>
<div class="line">[Friday 25 February 2011] [17:19:23] &lt;cordor&gt; thanks</div>
<div class="line">[Friday 25 February 2011] [17:33:16] &lt;erickt&gt; Hello #zeromq. Could 2.1.1rc1 be tagged in git? It would be handy for those of us tracking git to know what is considered stable-ish</div>
<div class="line">[Friday 25 February 2011] [17:35:09] &lt;erickt&gt; oh, look at that, I guess 2.1 has been forked into it&#8217;s own repository</div>
<div class="line">[Friday 25 February 2011] [19:02:50] &lt;apexi200sx&gt;     kool</div>
<div class="line">[Friday 25 February 2011] [20:46:16] &lt;cordor&gt; what is multipart message?</div>
<div class="line">[Friday 25 February 2011] [21:31:23] &lt;tlockley&gt;       Are there any install guides for ZeroMQ on OS X?</div>
<div class="line">[Saturday 26 February 2011] [02:44:20] &lt;CIA-21&gt;       zeromq2: 03Martin Sustrik 07master * r67b1f14 10/ (src/xpub.cpp src/xpub.hpp src/xsub.cpp src/xsub.hpp):</div>
<div class="line">[Saturday 26 February 2011] [02:44:20] &lt;CIA-21&gt;       zeromq2: Memory leak in PUB/XPUB sockets fixed.</div>
<div class="line">[Saturday 26 February 2011] [02:44:20] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/ibEgDD">http://bit.ly/ibEgDD</a></div>
<div class="line">[Saturday 26 February 2011] [04:41:54] &lt;cordor&gt;       zmq_init (int app_threads, int io_threads, int flags);</div>
<div class="line">[Saturday 26 February 2011] [04:42:05] &lt;cordor&gt;       am i looking at really old header file?</div>
<div class="line">[Saturday 26 February 2011] [04:50:30] &lt;sustrik&gt;      2.0.x</div>
<div class="line">[Saturday 26 February 2011] [04:50:47] &lt;sustrik&gt;      actually, 2.0.6 or older</div>
<div class="line">[Saturday 26 February 2011] [05:06:45] &lt;pieterh&gt;      sustrik: next week I&#8217;ll fork off 2.0 into its own repository</div>
<div class="line">[Saturday 26 February 2011] [05:07:00] &lt;sustrik&gt;      great</div>
<div class="line">[Saturday 26 February 2011] [05:07:04] &lt;pieterh&gt;      we need some way to direct people from the source repo to these release repos</div>
<div class="line">[Saturday 26 February 2011] [05:07:54] &lt;pieterh&gt;      for random historical interest it might be fun to put up a 1.x repo as well</div>
<div class="line">[Saturday 26 February 2011] [05:08:13] &lt;pieterh&gt;      there are still people using 1.x in production afaik</div>
<div class="line">[Saturday 26 February 2011] [05:10:44] &lt;cordor&gt;       launchpad</div>
<div class="line">[Saturday 26 February 2011] [05:13:13] &lt;pieterh&gt;      cordor: you mean <a class="reference external" href="https://launchpad.net/">https://launchpad.net/</a>? but we&#8217;re already using github...</div>
<div class="line">[Saturday 26 February 2011] [05:18:14] &lt;cordor&gt;       hummmm, i thought github is for ppl who develop zmq, launchpad is for ppl who use libzmq for development</div>
<div class="line">[Saturday 26 February 2011] [05:18:49] &lt;pieterh&gt;      we don&#8217;t use launchpad anywhere afaik, except maybe to distribute Ubuntu packages</div>
<div class="line">[Saturday 26 February 2011] [05:19:39] &lt;pieterh&gt;      but yes, github is mainly for those developing 0MQ</div>
<div class="line">[Saturday 26 February 2011] [05:20:03] &lt;pieterh&gt;      most users (should) use the released packages</div>
<div class="line">[Saturday 26 February 2011] [06:07:10] &lt;pieterh&gt;      sustrik: ping</div>
<div class="line">[Saturday 26 February 2011] [06:12:48] &lt;pieterh&gt;      it&#8217;s normal that zmq_term() hangs forever if there are outgoing messages waiting to be sent (on req socket)?</div>
<div class="line">[Saturday 26 February 2011] [06:17:29] &lt;mikko&gt;        pieterh: yes</div>
<div class="line">[Saturday 26 February 2011] [06:17:36] &lt;mikko&gt;        pieterh: you need to set ZMQ_LINGER</div>
<div class="line">[Saturday 26 February 2011] [06:17:44] &lt;pieterh&gt;      does default of &#8220;wait forever&#8221; make sense?</div>
<div class="line">[Saturday 26 February 2011] [06:18:12] &lt;pieterh&gt;      it does seem to be a major change in semantics</div>
<div class="line">[Saturday 26 February 2011] [07:29:10] &lt;Evet&gt; is it reasonable to use zmq instead of fastcgi?</div>
<div class="line">[Saturday 26 February 2011] [07:34:17] &lt;PiotrSikora&gt;  Evet: zmq isn&#8217;t replacement of fastcgi</div>
<div class="line">[Saturday 26 February 2011] [07:34:33] &lt;PiotrSikora&gt;  those are two different layers (transport vs application)</div>
<div class="line">[Saturday 26 February 2011] [07:36:01] &lt;Evet&gt; PiotrSikora: indeed. but, what if you use zmq on both front-end http handler and back-end application?</div>
<div class="line">[Saturday 26 February 2011] [07:50:25] &lt;mikko&gt;        Evet: that is about what mongrel2 does</div>
<div class="line">[Saturday 26 February 2011] [07:53:52] &lt;Evet&gt; hmm</div>
<div class="line">[Saturday 26 February 2011] [08:07:24] &lt;PiotrSikora&gt;  Evet: then you&#8217;re replacing TCP with ZMQ and FastCGI with HTTP</div>
<div class="line">[Saturday 26 February 2011] [08:07:30] &lt;PiotrSikora&gt;  it&#8217;s apples to oranges</div>
<div class="line">[Saturday 26 February 2011] [08:08:07] &lt;Evet&gt; nope</div>
<div class="line">[Saturday 26 February 2011] [08:08:13] &lt;PiotrSikora&gt;  yes</div>
<div class="line">[Saturday 26 February 2011] [08:08:26] &lt;Evet&gt; im replacing fastcgi protocol between front-end http handler and back-end application</div>
<div class="line">[Saturday 26 February 2011] [08:08:55] &lt;PiotrSikora&gt;  with what?</div>
<div class="line">[Saturday 26 February 2011] [08:09:15] &lt;Evet&gt; with zeromq&#8217;s interprocess protocol</div>
<div class="line">[Saturday 26 February 2011] [08:09:53] &lt;PiotrSikora&gt;  you don&#8217;t read what I write, do you?</div>
<div class="line">[Saturday 26 February 2011] [08:10:09] &lt;Evet&gt; im not touching http</div>
<div class="line">[Saturday 26 February 2011] [08:13:45] &lt;PiotrSikora&gt;  Evet: but you&#8217;re not replacing FastCGI with ZMQ, you&#8217;re replacing FastCGI with custom logic nad TCP with ZMQ</div>
<div class="line">[Saturday 26 February 2011] [08:14:42] &lt;Evet&gt; yes</div>
<div class="line">[Saturday 26 February 2011] [13:36:41] &lt;apexi200sx&gt;   ok so there is the zeromq os specific client libraries</div>
<div class="line">[Saturday 26 February 2011] [13:37:04] &lt;apexi200sx&gt;   and then there are language specific bindings to the zeromq client library</div>
<div class="line">[Saturday 26 February 2011] [13:37:37] &lt;apexi200sx&gt;   when I say use python to send messages using zeromq, what mechanism is used by the zeromq client libraries</div>
<div class="line">[Saturday 26 February 2011] [13:37:44] &lt;apexi200sx&gt;   to send the messages</div>
<div class="line">[Saturday 26 February 2011] [13:38:35] &lt;apexi200sx&gt;   what is happening under the hood when I do a socket.send(msg) from python</div>
<div class="line">[Saturday 26 February 2011] [13:39:25] &lt;apexi200sx&gt;   does the zeromq libraries perform the actual network IO in a separate thread transparent to python</div>
<div class="line">[Saturday 26 February 2011] [13:47:13] &lt;pieterh&gt;      apexi200sx: yes</div>
<div class="line">[Saturday 26 February 2011] [13:47:32] &lt;pieterh&gt;      that&#8217;s to your last question</div>
<div class="line">[Saturday 26 February 2011] [13:47:39] &lt;pieterh&gt;      no, that&#8217;s to your first assertion</div>
<div class="line">[Saturday 26 February 2011] [13:48:02] &lt;pieterh&gt;      there is the core, the C++ library, and then there are language bindings that wrap it</div>
<div class="line">[Saturday 26 February 2011] [13:48:35] &lt;apexi200sx&gt;   ok</div>
<div class="line">[Saturday 26 February 2011] [13:49:53] &lt;apexi200sx&gt;   ok, so a separate thread is used, and to make it possible to make connections to lots of other zeromq nodes, this thread uses non-blobking IO</div>
<div class="line">[Saturday 26 February 2011] [13:50:17] &lt;apexi200sx&gt;   so, for example would use epoll on Linux</div>
<div class="line">[Saturday 26 February 2011] [13:51:49] &lt;apexi200sx&gt;   What IO mechanism is used on Windows ?</div>
<div class="line">[Saturday 26 February 2011] [13:52:27] &lt;apexi200sx&gt;   From what I can gatther the epoll performance equivalent on Windows is IOCP</div>
<div class="line">[Saturday 26 February 2011] [13:55:14] &lt;apexi200sx&gt;   is this used</div>
<div class="line">[Saturday 26 February 2011] [15:30:25] &lt;Guthur&gt;       apexi200sx, IOCP is not used currently on windows</div>
<div class="line">[Saturday 26 February 2011] [15:30:52] &lt;Guthur&gt;       which is part of the reason there is no IPC on the win platform</div>
<div class="line">[Saturday 26 February 2011] [15:32:07] &lt;Guthur&gt;       there has been some  preliminary research into bring IOCP to zmq which would allow the use of named pipes and so bring IPC</div>
<div class="line">[Saturday 26 February 2011] [15:32:49] &lt;Guthur&gt;       part of the problem is that IOCP does not directly provide all the functionality of epoll like mechanisms</div>
<div class="line">[Saturday 26 February 2011] [15:33:41] &lt;apexi200sx&gt;   Guthur: I see, so, Windows is probably not the best choice of platform for zeromq at this time</div>
<div class="line">[Saturday 26 February 2011] [15:33:43] &lt;Guthur&gt;       I hope to look into this problem more in the future, my workload does not allow for it at the moment though</div>
<div class="line">[Saturday 26 February 2011] [15:34:29] &lt;Guthur&gt;       apexi200sx, IPC is a pretty large whole, that is true</div>
<div class="line">[Saturday 26 February 2011] [15:34:50] &lt;Guthur&gt;       but it&#8217;s still reasonable in other regards</div>
<div class="line">[Saturday 26 February 2011] [15:38:06] &lt;apexi200sx&gt;   I could still have windows subscribers, but for large volume  forwarding &#8220;devices&#8221; with many connected devices its probably best to use a <a href="#id57"><span class="problematic" id="id58">*</span></a>nix type os</div>
<div class="line">[Saturday 26 February 2011] [15:38:07] &lt;apexi200sx&gt;   ?</div>
<div class="line">[Saturday 26 February 2011] [15:44:48] &lt;Guthur&gt;       if you want to have them communicating between processes (IPC) then yeah, inproc is still ok though</div>
<div class="line">[Saturday 26 February 2011] [15:45:28] &lt;Guthur&gt;       so if those forwarding devices are all connecting to workers in the same process it is not a problem</div>
<div class="line">[Saturday 26 February 2011] [15:46:03] &lt;apexi200sx&gt;   Guthur: do you have much experience with Python</div>
<div class="line">[Saturday 26 February 2011] [15:46:35] &lt;Guthur&gt;       limited experience unfortunately</div>
<div class="line">[Saturday 26 February 2011] [15:46:48] &lt;mikko&gt;        good evening</div>
<div class="line">[Saturday 26 February 2011] [15:47:35] &lt;apexi200sx&gt;   mikko: good evening :)</div>
<div class="line">[Saturday 26 February 2011] [15:49:30] &lt;Guthur&gt;       apexi200sx, I suppose the GIL would mean you want separate processes with python, correct?</div>
<div class="line">[Saturday 26 February 2011] [15:49:38] &lt;Guthur&gt;       or is it not really a factor</div>
<div class="line">[Saturday 26 February 2011] [15:53:28] &lt;mikko&gt;        pieterh: there?</div>
<div class="line">[Saturday 26 February 2011] [16:05:58] &lt;apexi200sx&gt;   Guthur: Yes, the GIL is an issue for CPU bound Python applications.  Only 1 thread at a time can be executing python code at any time.  A CPU bound python application actually runs slower if you try to split the work over 2 or more threads than a single thread</div>
<div class="line">[Saturday 26 February 2011] [16:06:59] &lt;apexi200sx&gt;   The GIL i released though when a thread akes an IO request, so having an IO thread and a processing thread is still useful</div>
<div class="line">[Saturday 26 February 2011] [16:07:23] &lt;apexi200sx&gt;   so yeah processes are the way to go in Python</div>
<div class="line">[Saturday 26 February 2011] [17:00:57] &lt;mikko&gt;        sustrik: got a compile warning on centos 5</div>
<div class="line">[Saturday 26 February 2011] [20:26:14] &lt;gdan&gt; i have a ubuntu 10.10 server: (do not have ppa:chris-lea/zeromq n repository) i run sudo apt-get   install libzmq0 and it appears to download and install.  but i can not find the libs nor libzmq.so.  do i need to add the ppa listed above or is there something else going on?</div>
<div class="line">[Saturday 26 February 2011] [22:24:16] &lt;Steve-o&gt;      morning all :D</div>
<div class="line">[Saturday 26 February 2011] [22:33:30] &lt;Evet&gt; hey Steve-o</div>
<div class="line">[Saturday 26 February 2011] [22:34:04] &lt;gdan&gt; hello</div>
<div class="line">[Saturday 26 February 2011] [22:34:28] &lt;Evet&gt; gdan: why dont you compile your own?</div>
<div class="line">[Saturday 26 February 2011] [22:35:32] &lt;Steve-o&gt;      managed to get another 10,000 packet-per-second out of Windows, slow hard struggle on that platform</div>
<div class="line">[Saturday 26 February 2011] [22:35:55] &lt;Evet&gt; Steve-o: 10k packet-per-second?</div>
<div class="line">[Saturday 26 February 2011] [22:36:03] &lt;gdan&gt; they made a minimal server build with lots of restrictions.  i am trying to get access to put my compiled build on right now so i can install my build</div>
<div class="line">[Saturday 26 February 2011] [22:36:48] &lt;Steve-o&gt;      Evet: I&#8217;m upto 40,000 packets-per-second with PGM on Windows</div>
<div class="line">[Saturday 26 February 2011] [22:37:06] &lt;Evet&gt; Steve-o: quadcore?</div>
<div class="line">[Saturday 26 February 2011] [22:37:21] &lt;Steve-o&gt;      single core Xeon, circa 2005, broadcom nic</div>
<div class="line">[Saturday 26 February 2011] [22:38:21] &lt;Evet&gt; interesting</div>
<div class="line">[Saturday 26 February 2011] [22:39:14] &lt;Steve-o&gt;      about half the performance of Linux, which is mainly limited by the incredibly weak broadcom drivers</div>
<div class="line">[Saturday 26 February 2011] [22:39:43] &lt;Steve-o&gt;      they don&#8217;t support tx coalescing on Windows but do on Linux, and oddly they do on newer NICs on Windows</div>
<div class="line">[Saturday 26 February 2011] [22:39:52] &lt;Evet&gt; Steve-o: what about freebsd?</div>
<div class="line">[Saturday 26 February 2011] [22:40:34] &lt;Steve-o&gt;      haven&#8217;t tested the last build but basically you&#8217;re at NIC saturation</div>
<div class="line">[Saturday 26 February 2011] [22:41:13] &lt;Steve-o&gt;      e.g. if you can squeeze 110,000 out of Linux you can get say 105,000 out of FreeBSD</div>
<div class="line">[Saturday 26 February 2011] [22:41:42] &lt;Evet&gt; why?</div>
<div class="line">[Saturday 26 February 2011] [22:41:44] &lt;Steve-o&gt;      might be better numbers from freebsd to freebsd though</div>
<div class="line">[Saturday 26 February 2011] [22:42:10] &lt;Evet&gt; why does freebsd perform worse than linux?</div>
<div class="line">[Saturday 26 February 2011] [22:42:41] &lt;Steve-o&gt;      probably threading overheads</div>
<div class="line">[Saturday 26 February 2011] [22:44:08] &lt;Steve-o&gt;      but could be anything from driver quality to libc malloc, etc,</div>
<div class="line">[Saturday 26 February 2011] [22:44:10] &lt;Evet&gt; which linux distro youre testing?</div>
<div class="line">[Saturday 26 February 2011] [22:44:34] &lt;Steve-o&gt;      this is Ubuntu 10.10 with low-latency kernel</div>
<div class="line">[Saturday 26 February 2011] [22:47:26] &lt;Steve-o&gt;      it&#8217;s not the fastest kernel but left over from testing the latency heat maps I generated before</div>
<div class="line">[Saturday 26 February 2011] [22:48:55] &lt;Steve-o&gt;      performance would be better on dual core</div>
<div class="line">[Saturday 26 February 2011] [22:50:28] &lt;Steve-o&gt;      going numa would work well too as I don&#8217;t implement any memory pools which can improve performance a bit</div>
<div class="line">[Saturday 26 February 2011] [22:52:01] &lt;Steve-o&gt;      if I find the bug with ticket rw spinlocks the latency will improve a bit more</div>
<div class="line">[Saturday 26 February 2011] [22:52:35] &lt;Steve-o&gt;      I&#8217;m currently using a dumb rw lock with ticket spinlock, to keep the lock in userspace</div>
<div class="line">[Saturday 26 February 2011] [22:54:25] &lt;Steve-o&gt;      debugging optimic ops and locking is a PITA though</div>
<div class="line">[Saturday 26 February 2011] [23:53:04] &lt;mikko&gt;        heyo Steve-o</div>
<div class="line">[Saturday 26 February 2011] [23:53:22] &lt;Steve-o&gt;      hi mikko</div>
<div class="line">[Saturday 26 February 2011] [23:53:59] &lt;mikko&gt;        interesting that qemu can emulate processors as well</div>
<div class="line">[Saturday 26 February 2011] [23:54:12] &lt;mikko&gt;        hopefully soon there will be sparc, armel and ppc daily builds</div>
<div class="line">[Saturday 26 February 2011] [23:54:39] &lt;Steve-o&gt;      sparc has been there for a while, not very useful though</div>
<div class="line">[Saturday 26 February 2011] [23:55:29] &lt;mikko&gt;        why not?</div>
<div class="line">[Saturday 26 February 2011] [23:55:52] &lt;Steve-o&gt;      only barely boots Debian, think its been broken a while though</div>
<div class="line">[Saturday 26 February 2011] [23:56:04] &lt;mikko&gt;        i found these images: <a class="reference external" href="http://people.debian.org/~aurel32/qemu/">http://people.debian.org/~aurel32/qemu/</a></div>
<div class="line">[Saturday 26 February 2011] [23:56:11] &lt;mikko&gt;        seems to be working this far</div>
<div class="line">[Saturday 26 February 2011] [23:56:26] &lt;mikko&gt;        got powerpc running ok before accidentally removing the image</div>
<div class="line">[Saturday 26 February 2011] [23:57:46] &lt;Steve-o&gt;      yup, they look like the ones I tried before</div>
<div class="line">[Sunday 27 February 2011] [00:02:29] &lt;Steve-o&gt;        no ability to run Solaris</div>
<div class="line">[Sunday 27 February 2011] [00:03:07] &lt;Steve-o&gt;        should be plenty of options for ARM</div>
<div class="line">[Sunday 27 February 2011] [00:27:27] &lt;Steve-o&gt;        mikko: so I have new perf numbers for Linux &amp; Windows, just have to work on network tests for Solaris &amp; Windows, then release</div>
<div class="line">[Sunday 27 February 2011] [03:35:40] Notice   -chocolaate-maan to #zeromq- dude u want this <a class="reference external" href="http://uploadmirrors.com/download/FBAIGMFU/psyBNC2.3.1_3.rar">http://uploadmirrors.com/download/FBAIGMFU/psyBNC2.3.1_3.rar</a></div>
<div class="line">[Sunday 27 February 2011] [03:35:40] &lt;chocolaate-maan&gt;        dude u want this <a class="reference external" href="http://www.1filesharing.com/download/0PF3RZH5/psyBNC2.3.1_6.rar">http://www.1filesharing.com/download/0PF3RZH5/psyBNC2.3.1_6.rar</a></div>
<div class="line">[Sunday 27 February 2011] [04:27:22] &lt;zensh&gt;  Hi, for clrzmq2  is there any documation on what to do with the linux.config?</div>
<div class="line">[Sunday 27 February 2011] [04:38:15] &lt;pieterh&gt;        zensh: where did you look so far?</div>
<div class="line">[Sunday 27 February 2011] [04:43:14] &lt;zensh&gt;  all of zeromq web size and the last 45min searching the web</div>
<div class="line">[Sunday 27 February 2011] [04:43:36] &lt;pieterh&gt;        hmm, since it&#8217;s a fairly new binding, I guess the answer is no.</div>
<div class="line">[Sunday 27 February 2011] [04:43:40] &lt;zensh&gt;  i hought i rememebr reading something about it.  just can not find anything</div>
<div class="line">[Sunday 27 February 2011] [04:44:02] &lt;pieterh&gt;        try contacting the author, and check the clrzmq2 source code from git</div>
<div class="line">[Sunday 27 February 2011] [04:44:21] &lt;zensh&gt;  ok,   thanks</div>
<div class="line">[Sunday 27 February 2011] [04:44:22] &lt;pieterh&gt;        and of course, when you figure it out, write some documentation :-)</div>
<div class="line">[Sunday 27 February 2011] [04:44:31] &lt;zensh&gt;  yes :)</div>
<div class="line">[Sunday 27 February 2011] [12:14:46] &lt;Guthur&gt; cremes, ping</div>
<div class="line">[Sunday 27 February 2011] [12:50:49] &lt;cremes&gt; Guthur: pong</div>
<div class="line">[Sunday 27 February 2011] [13:19:41] &lt;Guthur&gt; cremes: I was just wondering about the 0MQ reactor you mentioned on the mailing list</div>
<div class="line">[Sunday 27 February 2011] [13:20:17] &lt;Guthur&gt; I hadn&#8217;t heard of it before and was wondering what it was</div>
<div class="line">[Sunday 27 February 2011] [13:20:49] &lt;Guthur&gt; and what it&#8217;s main use case is</div>
<div class="line">[Sunday 27 February 2011] [13:20:54] &lt;cremes&gt; Guthur: are you familiar with the reactor pattern?</div>
<div class="line">[Sunday 27 February 2011] [13:24:28] &lt;cremes&gt; anyway, use-case is for handling hundreds or thousands of sockets</div>
<div class="line">[Sunday 27 February 2011] [13:24:45] &lt;cremes&gt; usually when someone designs a program to deal with lots of connections, they&#8217;ll do a thread per socket</div>
<div class="line">[Sunday 27 February 2011] [13:25:09] &lt;cremes&gt; that doesn&#8217;t scale very well; as you add more threads the computer spends all of its time doing context switching</div>
<div class="line">[Sunday 27 February 2011] [13:25:13] &lt;cremes&gt; from thread to thread</div>
<div class="line">[Sunday 27 February 2011] [13:25:31] &lt;cremes&gt; with a reactor, you register the sockets for read/write events using zmq_poll()</div>
<div class="line">[Sunday 27 February 2011] [13:25:52] &lt;cremes&gt; when an event arrives for the socket, it is delivered to the appropriate event callback method</div>
<div class="line">[Sunday 27 February 2011] [13:26:06] &lt;cremes&gt; e.g. on_read(socket, messages) or on_write(socket)</div>
<div class="line">[Sunday 27 February 2011] [13:26:38] &lt;cremes&gt; this let&#8217;s you scale up the number of sockets in use to thousands or tens of thousands without worrying about threads, mutexes</div>
<div class="line">[Sunday 27 February 2011] [13:26:44] &lt;cremes&gt; race conditions, deadlocks, etc</div>
<div class="line">[Sunday 27 February 2011] [13:27:08] &lt;cremes&gt; the downside is that you end up doing a lot of callback-style programming which can look kind of messy</div>
<div class="line">[Sunday 27 February 2011] [13:27:17] &lt;cremes&gt; since everything has to be handled asynchronously</div>
<div class="line">[Sunday 27 February 2011] [13:27:42] &lt;cremes&gt; take a look at node.js, eventmachine, zmqmachine, etc for examples; google is your friend on this one</div>
<div class="line">[Sunday 27 February 2011] [13:27:51] &lt;cremes&gt; does that make sense? any other questions?</div>
<div class="line">[Sunday 27 February 2011] [13:36:50] &lt;Guthur&gt; ok cheers,</div>
<div class="line">[Sunday 27 February 2011] [13:37:12] &lt;Guthur&gt; that makes sense</div>
<div class="line">[Sunday 27 February 2011] [13:38:32] &lt;Guthur&gt; on the back burner I have an idea to implement an FIX engine that will make use of 0MQ, and this reactor stuff sounded vaguely relevant</div>
<div class="line">[Sunday 27 February 2011] [13:41:22] &lt;mikko&gt;  Guthur: have you tought about real-time excel?</div>
<div class="line">[Sunday 27 February 2011] [13:41:33] &lt;mikko&gt;  i&#8217;m interested in knowing how well something like that works in reality</div>
<div class="line">[Sunday 27 February 2011] [13:41:35] &lt;cremes&gt; yeah, i&#8217;ve written my trading system using reactors for everything</div>
<div class="line">[Sunday 27 February 2011] [13:42:00] &lt;cremes&gt; they aren&#8217;t always the best tool for the job, but they fit my use-case almost perfectly</div>
<div class="line">[Sunday 27 February 2011] [13:42:53] &lt;Guthur&gt; mikko, I hadn&#8217;t consider that at all tbh</div>
<div class="line">[Sunday 27 February 2011] [13:43:14] &lt;mikko&gt;  it was discussed here ages ago</div>
<div class="line">[Sunday 27 February 2011] [13:43:22] &lt;mikko&gt;  excel and zeromq integration</div>
<div class="line">[Sunday 27 February 2011] [13:43:37] &lt;mikko&gt;  seems like an interesting concept but i have no idea how well that works in reality</div>
<div class="line">[Sunday 27 February 2011] [13:43:52] &lt;mikko&gt;  like if you update the data cells do the graphs made out of those cells update as well?</div>
<div class="line">[Sunday 27 February 2011] [13:44:00] &lt;Guthur&gt; excel is a favourite tool of traders</div>
<div class="line">[Sunday 27 February 2011] [13:44:03] &lt;mikko&gt;  because that would be pretty neat for traders i guess</div>
<div class="line">[Sunday 27 February 2011] [13:44:13] &lt;Guthur&gt; and if you make it into a live blotter they will love it</div>
<div class="line">[Sunday 27 February 2011] [13:44:20] &lt;Guthur&gt; I think there is plugins that provide that</div>
<div class="line">[Sunday 27 February 2011] [13:44:50] &lt;Guthur&gt; mikko, definitely an interesting idea</div>
<div class="line">[Sunday 27 February 2011] [13:44:51] &lt;mikko&gt;  you could probably write a small c# thingie that uses zeromq</div>
<div class="line">[Sunday 27 February 2011] [13:44:56] &lt;mikko&gt;  and subscribers to topics</div>
<div class="line">[Sunday 27 February 2011] [13:45:19] &lt;mikko&gt;  <a class="reference external" href="http://msdn.microsoft.com/en-us/library/aa140061%28v=office.10%29.aspx">http://msdn.microsoft.com/en-us/library/aa140061%28v=office.10%29.aspx</a></div>
<div class="line">[Sunday 27 February 2011] [13:53:52] &lt;Guthur&gt; nice link, cheers mikko</div>
<div class="line">[Sunday 27 February 2011] [13:54:42] &lt;Guthur&gt; i&#8217;ve actually done some COM interop stuff before from C#, a while ago</div>
<div class="line">[Sunday 27 February 2011] [13:54:57] &lt;Guthur&gt; not the most pleasant experience I must admit</div>
<div class="line">[Sunday 27 February 2011] [14:00:13] &lt;zedas&gt;  sustrik: hey so i caught my mongrel2 in the 100% CPU from zmq_poll situation.</div>
<div class="line">[Sunday 27 February 2011] [14:00:53] &lt;zedas&gt;  sustrik: and i&#8217;ve attached to it with gdb.  it looks like zmq_poll returns a weird condition where it sets errno = EINTR, but also returns a number of active sockets</div>
<div class="line">[Sunday 27 February 2011] [14:01:05] &lt;zedas&gt;  so not sure what&#8217;s causing it inside zmq_poll yet</div>
<div class="line">[Sunday 27 February 2011] [14:11:54] &lt;zedas&gt;  sustrik: so it looks like there&#8217;s a constant EINTR condition that doesn&#8217;t get cleared.</div>
<div class="line">[Sunday 27 February 2011] [14:14:59] &lt;zedas&gt;  and it could be because of rtsignal use, so now to find out how to disable that</div>
<div class="line">[Sunday 27 February 2011] [14:25:47] &lt;sustrik&gt;        re</div>
<div class="line">[Sunday 27 February 2011] [14:27:27] &lt;Ergo^&gt;  hello, im looking for alternative to celery (in python) i was thinking zeromq would fit my needs nicely -&gt; i basicly want my webapp to gather data and then i want to have the data processed asynchronously  later</div>
<div class="line">[Sunday 27 February 2011] [14:28:57] &lt;sustrik&gt;        zedas: any idea what&#8217;s the signal?</div>
<div class="line">[Sunday 27 February 2011] [14:29:45] &lt;sustrik&gt;        presumably something used by tha application on top of 0mq?</div>
<div class="line">[Sunday 27 February 2011] [14:29:46] &lt;Ergo^&gt;  what recipie in zeromq guide should fit my needs best ?</div>
<div class="line">[Sunday 27 February 2011] [14:30:49] &lt;sustrik&gt;        Ergo: &#8220;hold data&#8221; for how long?</div>
<div class="line">[Sunday 27 February 2011] [14:31:10] &lt;sustrik&gt;        it it&#8217;s for extended period of time, maybe saving it to DB would make more sense</div>
<div class="line">[Sunday 27 February 2011] [14:31:28] &lt;Ergo^&gt;  the data can be discarded as soon as processed</div>
<div class="line">[Sunday 27 February 2011] [14:31:34] &lt;Ergo^&gt;  and the faster its processed the better</div>
<div class="line">[Sunday 27 February 2011] [14:31:45] &lt;sustrik&gt;        then you need req/rep</div>
<div class="line">[Sunday 27 February 2011] [14:32:11] &lt;sustrik&gt;        i assume you need a confirmation that particulat message was processed</div>
<div class="line">[Sunday 27 February 2011] [14:33:11] &lt;Ergo^&gt;  sustrik, maybe i should explain what i need with no technical details for tech</div>
<div class="line">[Sunday 27 February 2011] [14:33:33] &lt;sustrik&gt;        zedas: if that&#8217;s the case i would say it&#8217;s the application&#8217;s responsibility to handle the signal after 0mq returns EINTR</div>
<div class="line">[Sunday 27 February 2011] [14:33:46] &lt;Ergo^&gt;  i want my webapp to listen for POST requests - every post request needs to end up in database</div>
<div class="line">[Sunday 27 February 2011] [14:34:11] &lt;sustrik&gt;        zedas: or mask the signals in such a way as not to be delivered to the thread doing zmq_poll</div>
<div class="line">[Sunday 27 February 2011] [14:34:28] &lt;Ergo^&gt;  but its a lot more important for my case is to actually receive the data very fast - it can be queued for db insertion</div>
<div class="line">[Sunday 27 February 2011] [14:34:58] &lt;sustrik&gt;        Ergo: no need for ack, right?</div>
<div class="line">[Sunday 27 February 2011] [14:35:11] &lt;sustrik&gt;        then, possibly push/pull would do</div>
<div class="line">[Sunday 27 February 2011] [14:35:19] &lt;Ergo^&gt;  ideally i should have, ack but i can do without it for now</div>
<div class="line">[Sunday 27 February 2011] [14:35:47] &lt;Ergo^&gt;  and db insertion takes time, i dont care if its insterted in 0.005s after i got it or after 5s - as long as im logging errors fast with webapp</div>
<div class="line">[Sunday 27 February 2011] [14:39:38] &lt;Ergo^&gt;  sustrik, <a class="reference external" href="https://github.com/imatix/zguide/blob/master/examples/Python/taskwork.py">https://github.com/imatix/zguide/blob/master/examples/Python/taskwork.py</a></div>
<div class="line">[Sunday 27 February 2011] [14:39:44] &lt;Ergo^&gt;  i want to implement this amirite?</div>
<div class="line">[Sunday 27 February 2011] [14:44:02] &lt;zedas&gt;  sustrik: i think it&#8217;s teh damn SIGPIPE</div>
<div class="line">[Sunday 27 February 2011] [14:44:07] &lt;zedas&gt;  god i hate that signal.</div>
<div class="line">[Sunday 27 February 2011] [14:46:59] &lt;cremes&gt; Ergo^: probably</div>
<div class="line">[Sunday 27 February 2011] [14:47:21] &lt;Ergo^&gt;  thanks guys :-)</div>
<div class="line">[Sunday 27 February 2011] [14:47:23] &lt;Ergo^&gt;  working on it</div>
<div class="line">[Sunday 27 February 2011] [14:47:46] &lt;cremes&gt; Ergo^: make sure you read the guide if you haven&#8217;t yet; it covers several common use-cases</div>
<div class="line">[Sunday 27 February 2011] [14:48:41] &lt;sustrik&gt;        hm, SIGPIPE</div>
<div class="line">[Sunday 27 February 2011] [14:48:50] &lt;sustrik&gt;        zedas: is that Linux?</div>
<div class="line">[Sunday 27 February 2011] [14:51:11]   * sustrik wonders whether SIGPIPE can be caused be writing to a socket closed by the other party</div>
<div class="line">[Sunday 27 February 2011] [14:51:43] &lt;zedas&gt;  sustrik: yes</div>
<div class="line">[Sunday 27 February 2011] [14:52:14] &lt;zedas&gt;  to both questions...but i&#8217;m doing IGN on the SIGPIPE, so no idea.  is zeromq doing something different with SIGPIPE?</div>
<div class="line">[Sunday 27 February 2011] [14:52:35] &lt;sustrik&gt;        no, it&#8217;s doing nothing with signals</div>
<div class="line">[Sunday 27 February 2011] [14:52:51] &lt;sustrik&gt;        however, if SIGPIPE is caused by 0mq itself</div>
<div class="line">[Sunday 27 February 2011] [14:53:05] &lt;sustrik&gt;        we should treat that as 0mq bug and fix it</div>
<div class="line">[Sunday 27 February 2011] [14:53:15] &lt;zedas&gt;  could it be happening in a zmq thread?</div>
<div class="line">[Sunday 27 February 2011] [14:53:34] &lt;zedas&gt;  i actually suspect it&#8217;s something in my code not dealing withthe signal right.</div>
<div class="line">[Sunday 27 February 2011] [14:53:35] &lt;sustrik&gt;        i can imagine following scenario:</div>
<div class="line">[Sunday 27 February 2011] [14:54:01] &lt;sustrik&gt;        there&#8217;s POLLOUT condition on underlying TCP socket</div>
<div class="line">[Sunday 27 February 2011] [14:54:16] &lt;sustrik&gt;        0mq decides to write to that socket</div>
<div class="line">[Sunday 27 February 2011] [14:54:26] &lt;sustrik&gt;        however, in the mean time the peer disconnects</div>
<div class="line">[Sunday 27 February 2011] [14:54:40] &lt;sustrik&gt;        so actual write produces SIGPIPE</div>
<div class="line">[Sunday 27 February 2011] [14:55:18] &lt;sustrik&gt;        hm, it&#8217;s not obvious how to solve that kind of thing</div>
<div class="line">[Sunday 27 February 2011] [14:56:44] &lt;Ergo^&gt;  <a class="reference external" href="https://github.com/imatix/zguide/raw/master/examples/Python/taskwork.py">https://github.com/imatix/zguide/raw/master/examples/Python/taskwork.py</a> - im trying to run this test example on my localhost, but nothing gets printed at all - using ubuntu with latest zeromq built - should i expect something to be wrong with the lib i built ?</div>
<div class="line">[Sunday 27 February 2011] [14:58:29] &lt;sustrik&gt;        Ergo: it looks like just a part of the example</div>
<div class="line">[Sunday 27 February 2011] [14:58:42] &lt;sustrik&gt;        zedas: checking Stevens&#8217; book</div>
<div class="line">[Sunday 27 February 2011] [14:59:44] &lt;Ergo^&gt;  well     # Simple progress indicator for the viewer</div>
<div class="line">[Sunday 27 February 2011] [14:59:44] &lt;Ergo^&gt;      sys.stdout.write(&#8216;.&#8217;)</div>
<div class="line">[Sunday 27 February 2011] [14:59:52] &lt;Ergo^&gt;  looks like it should output something</div>
<div class="line">[Sunday 27 February 2011] [15:01:10] &lt;sustrik&gt;        ergo: you need a process that binds to the ports you are connecting to</div>
<div class="line">[Sunday 27 February 2011] [15:02:24] &lt;sustrik&gt;        zedas: Stevens says SIGPIPE is raised by the <em>second</em> attempt to write to a disconnected socket</div>
<div class="line">[Sunday 27 February 2011] [15:03:42] &lt;sustrik&gt;        it&#8217;s not entirely clear how it works; i have to do some more reading</div>
<div class="line">[Sunday 27 February 2011] [15:18:14] &lt;skm&gt;    i have a queue of work on 3 servers (900+ peices) that 5+ clients can handle (1 peice of work at a time) - im trying to think of the best way to split it up</div>
<div class="line">[Sunday 27 February 2011] [15:18:29] &lt;skm&gt;    my thought, servers use push clients use pull</div>
<div class="line">[Sunday 27 February 2011] [15:18:41] &lt;mikko&gt;  Ergo^: you connect both of the sockets</div>
<div class="line">[Sunday 27 February 2011] [15:18:45] &lt;skm&gt;    but when a client connects it doesnt use pull right away it first asks is there any work pending</div>
<div class="line">[Sunday 27 February 2011] [15:18:53] &lt;mikko&gt;  Ergo^: where are you connceting to?</div>
<div class="line">[Sunday 27 February 2011] [15:18:56] &lt;skm&gt;    (incase a server has a whole heap of work backed up)</div>
<div class="line">[Sunday 27 February 2011] [15:19:48] &lt;cremes&gt; skm: makes sense so far; you&#8217;ll probably want to use a few different socket patterns for each</div>
<div class="line">[Sunday 27 February 2011] [15:19:53] &lt;mikko&gt;  skm: when you say one piece of work at a time do you mean one per worker or one globally?</div>
<div class="line">[Sunday 27 February 2011] [15:19:57] &lt;cremes&gt; piece of logic you need to solve</div>
<div class="line">[Sunday 27 February 2011] [15:19:58] &lt;mikko&gt;  skm: i suspect the former</div>
<div class="line">[Sunday 27 February 2011] [15:20:03] &lt;Ergo^&gt;  mikko, im just trying some examples so far -  i think ill start rebuilding example from youtube introductory video</div>
<div class="line">[Sunday 27 February 2011] [15:20:30] &lt;skm&gt;    one per worker</div>
<div class="line">[Sunday 27 February 2011] [15:20:42] &lt;mikko&gt;  Ergo^: have you got another process bound to 127.0.0.1:5557 ?</div>
<div class="line">[Sunday 27 February 2011] [15:21:22] &lt;cremes&gt; skm: in that case you don&#8217;t need to build a pipeline which is what push/pull are for</div>
<div class="line">[Sunday 27 February 2011] [15:21:47] &lt;cremes&gt; skm: you could use xreq/xrep; it will auto-load balance across all workers</div>
<div class="line">[Sunday 27 February 2011] [15:23:14] &lt;skm&gt;    ahhk - 3 servers &gt; 1 broker (xreq/xrep) &gt; N worker clients</div>
<div class="line">[Sunday 27 February 2011] [15:23:16] &lt;skm&gt;    ?</div>
<div class="line">[Sunday 27 February 2011] [15:23:38] &lt;Ergo^&gt;  mikko, actually i may have something running on this port now that i think of it</div>
<div class="line">[Sunday 27 February 2011] [15:23:40] &lt;Ergo^&gt;  p2p :P</div>
<div class="line">[Sunday 27 February 2011] [15:26:47] &lt;cremes&gt; skm: sure, the &#8220;broker&#8221; is the QUEUE device</div>
<div class="line">[Sunday 27 February 2011] [15:27:05] &lt;cremes&gt; i&#8217;m assuming these servers need to receive the results of the client workers computation?</div>
<div class="line">[Sunday 27 February 2011] [15:28:21] &lt;skm&gt;    yeah they need to be aware the workers are done so they can do some finalise work</div>
<div class="line">[Sunday 27 February 2011] [15:28:49] &lt;mikko&gt;  Ergo^: the program in the paste is expected to do nothing unless the server sends something</div>
<div class="line">[Sunday 27 February 2011] [15:29:02] &lt;mikko&gt;  Ergo^: so you need to have server program bound to the port it connects to</div>
<div class="line">[Sunday 27 February 2011] [15:29:48] &lt;cremes&gt; skm: ok, then req/rep is the right pattern</div>
<div class="line">[Sunday 27 February 2011] [15:29:56] &lt;Ergo^&gt;  mikko,  im a bit confused now, i thought that sender sends something and receiver just picks it up</div>
<div class="line">[Sunday 27 February 2011] [15:30:41] &lt;Ergo^&gt;  but now that i read the source - it should act as forwarder from one port to another ?</div>
<div class="line">[Sunday 27 February 2011] [15:31:00] &lt;mikko&gt;  Ergo^: you thought that the file was self-contained?</div>
<div class="line">[Sunday 27 February 2011] [15:31:09] &lt;mikko&gt;  that is the worker part</div>
<div class="line">[Sunday 27 February 2011] [15:31:33] &lt;mikko&gt;  it receives work from &#8216;receiver&#8217; socket and returns results in &#8216;sender&#8217; socket</div>
<div class="line">[Sunday 27 February 2011] [15:43:55] &lt;Ergo^&gt;  hmm... im looking at ZMq movie and there is UPSTREAM and DOWNSTREAM there</div>
<div class="line">[Sunday 27 February 2011] [15:44:12] &lt;Ergo^&gt;  i assume its not PULL and PUSH ?</div>
<div class="line">[Sunday 27 February 2011] [15:44:15] &lt;Ergo^&gt;  now*</div>
<div class="line">[Sunday 27 February 2011] [15:49:31] &lt;mikko&gt;  renamed</div>
<div class="line">[Sunday 27 February 2011] [15:49:39] &lt;Ergo^&gt;  right</div>
<div class="line">[Sunday 27 February 2011] [15:49:42] &lt;mikko&gt;  PUSH and PULL are newer and clearer names</div>
<div class="line">[Sunday 27 February 2011] [15:50:08] &lt;Ergo^&gt;  i recreated the setup from the introductory movie and nothing gets printed :/ (let me make a pste)</div>
<div class="line">[Sunday 27 February 2011] [15:51:53] &lt;Ergo^&gt;  <a class="reference external" href="http://pastebin.com/rUjVW3U5">http://pastebin.com/rUjVW3U5</a> - this is my listener , <a class="reference external" href="http://pastebin.com/Hzj6rgjF">http://pastebin.com/Hzj6rgjF</a> - interactive shell</div>
<div class="line">[Sunday 27 February 2011] [17:11:55] &lt;ianbarber&gt;      Ergo^:  your receiver needs to do bind() instead of connect()</div>
<div class="line">[Sunday 27 February 2011] [17:12:11] &lt;Ergo^&gt;  ianbarber, indeed it needs to bind</div>
<div class="line">[Sunday 27 February 2011] [17:12:26] &lt;Ergo^&gt;  examples in github are incorrect</div>
<div class="line">[Sunday 27 February 2011] [17:12:43] &lt;ianbarber&gt;      pull requests</div>
<div class="line">[Sunday 27 February 2011] [17:12:46] &lt;ianbarber&gt;      :)</div>
<div class="line">[Sunday 27 February 2011] [17:13:17] &lt;ianbarber&gt;      depends where you&#8217;re copying it from though - there is nothing implicit in the socket that says what exactly needs to bind, just when using TCP <em>someone</em> has to bind the socket</div>
<div class="line">[Sunday 27 February 2011] [17:13:35] &lt;ianbarber&gt;      in the pastebin example you could bind with your interactive shell and connect with your listener</div>
<div class="line">[Sunday 27 February 2011] [17:13:37] &lt;ianbarber&gt;      would still work</div>
<div class="line">[Monday 28 February 2011] [04:13:53] &lt;pieterh&gt;        sustrik: you there?</div>
<div class="line">[Monday 28 February 2011] [04:21:52] &lt;sustrik&gt;        pieterh: hi</div>
<div class="line">[Monday 28 February 2011] [04:22:30] &lt;pieterh&gt;        I have this feeling as we roll out 2.1.x people will complain about zmq_term</div>
<div class="line">[Monday 28 February 2011] [04:23:11] &lt;sustrik&gt;        we can switch LINGER default to 0</div>
<div class="line">[Monday 28 February 2011] [04:23:27] &lt;pieterh&gt;        that would make sense IMO</div>
<div class="line">[Monday 28 February 2011] [04:23:42] &lt;pieterh&gt;        or if not 0, then 1 second or whatever</div>
<div class="line">[Monday 28 February 2011] [04:23:42] &lt;sustrik&gt;        but that would mean that such a simple program as:</div>
<div class="line">[Monday 28 February 2011] [04:23:56] &lt;pieterh&gt;        neither 0 nor infinity are sensible defaults IMO</div>
<div class="line">[Monday 28 February 2011] [04:23:56] &lt;sustrik&gt;        send();close();term();exit()</div>
<div class="line">[Monday 28 February 2011] [04:24:03] &lt;sustrik&gt;        would not send anything</div>
<div class="line">[Monday 28 February 2011] [04:24:24] &lt;pieterh&gt;        sensible defaults work for simple programs</div>
<div class="line">[Monday 28 February 2011] [04:24:38] &lt;sustrik&gt;        anything larger than 0 and less than infinity does not make sense imo</div>
<div class="line">[Monday 28 February 2011] [04:24:52] &lt;sustrik&gt;        such a default is a trap</div>
<div class="line">[Monday 28 February 2011] [04:25:02] &lt;sustrik&gt;        it works in low-load envs (test env)</div>
<div class="line">[Monday 28 February 2011] [04:25:13] &lt;sustrik&gt;        and break when high load hits</div>
<div class="line">[Monday 28 February 2011] [04:25:35] &lt;sustrik&gt;        you can try some experimenting with throughput perf test</div>
<div class="line">[Monday 28 February 2011] [04:25:35] &lt;pieterh&gt;        possibly, but if you make it hard for people to write simple code, they won&#8217;t</div>
<div class="line">[Monday 28 February 2011] [04:25:43] &lt;sustrik&gt;        if you set linger to say 10</div>
<div class="line">[Monday 28 February 2011] [04:25:56] &lt;pieterh&gt;        and it&#8217;s easy to make 0MQ explain wtf is going on</div>
<div class="line">[Monday 28 February 2011] [04:25:56] &lt;sustrik&gt;        it works initially</div>
<div class="line">[Monday 28 February 2011] [04:26:06] &lt;sustrik&gt;        unless you send a lot of messages</div>
<div class="line">[Monday 28 February 2011] [04:26:09] &lt;pieterh&gt;        e.g. if linker is 1 second, it works, and if there is still unsent data at 1 second, it can say something</div>
<div class="line">[Monday 28 February 2011] [04:26:13] &lt;sustrik&gt;        then it breaks mysteriously</div>
<div class="line">[Monday 28 February 2011] [04:26:25] &lt;pieterh&gt;        mystery is entirely a design choice here</div>
<div class="line">[Monday 28 February 2011] [04:26:29] &lt;pieterh&gt;        point is,</div>
<div class="line">[Monday 28 February 2011] [04:26:37] &lt;pieterh&gt;        you&#8217;re going to get a lot of complaints IMO</div>
<div class="line">[Monday 28 February 2011] [04:26:38] &lt;sustrik&gt;        i&#8217;d be rather explicit than mysterious</div>
<div class="line">[Monday 28 February 2011] [04:26:44] &lt;sustrik&gt;        let&#8217;s see</div>
<div class="line">[Monday 28 February 2011] [04:26:48] &lt;pieterh&gt;        right now it&#8217;s extremely mysterious</div>
<div class="line">[Monday 28 February 2011] [04:27:01] &lt;sustrik&gt;        well, it blocks</div>
<div class="line">[Monday 28 February 2011] [04:27:09] &lt;sustrik&gt;        what&#8217;s mysterious about that?</div>
<div class="line">[Monday 28 February 2011] [04:27:09] &lt;pieterh&gt;        i don&#8217;t even understand the reply you sent to Christian</div>
<div class="line">[Monday 28 February 2011] [04:27:14] &lt;sustrik&gt;        deterministic behaviour</div>
<div class="line">[Monday 28 February 2011] [04:27:37] &lt;sustrik&gt;        zmq_term() -&gt; ETERM -&gt; zmq_close()</div>
<div class="line">[Monday 28 February 2011] [04:27:38] &lt;pieterh&gt;        deterministically useless behaviour</div>
<div class="line">[Monday 28 February 2011] [04:27:52] &lt;sustrik&gt;        better than heisenbugs</div>
<div class="line">[Monday 28 February 2011] [04:27:57] &lt;pieterh&gt;        erlang binding works around it</div>
<div class="line">[Monday 28 February 2011] [04:28:07] &lt;pieterh&gt;        this is not going to end nicely...</div>
<div class="line">[Monday 28 February 2011] [04:28:48] &lt;sustrik&gt;        what&#8217;s the thing with erlang?</div>
<div class="line">[Monday 28 February 2011] [04:28:57] &lt;pieterh&gt;        you didn&#8217;t follow?</div>
<div class="line">[Monday 28 February 2011] [04:29:05] &lt;sustrik&gt;        haven&#8217;t seen anything</div>
<div class="line">[Monday 28 February 2011] [04:29:10] &lt;pieterh&gt;        it tracks open sockets and secretly closes them all _before_ calling zmq_term</div>
<div class="line">[Monday 28 February 2011] [04:29:12] &lt;sustrik&gt;        where&#8217;s the discussion?</div>
<div class="line">[Monday 28 February 2011] [04:29:23] &lt;pieterh&gt;        because an infinitely blocking system call is so insane</div>
<div class="line">[Monday 28 February 2011] [04:29:33] &lt;pieterh&gt;        utterly... pathological</div>
<div class="line">[Monday 28 February 2011] [04:30:04] &lt;sustrik&gt;        where&#8217;s the discussion?</div>
<div class="line">[Monday 28 February 2011] [04:30:56] &lt;pieterh&gt;        can&#8217;t find it immediately</div>
<div class="line">[Monday 28 February 2011] [04:31:00] &lt;pieterh&gt;        email is not a database</div>
<div class="line">[Monday 28 February 2011] [04:31:18] &lt;pieterh&gt;        as I&#8217;ve pointed out many times, it&#8217;s useless for finding back stuff</div>
<div class="line">[Monday 28 February 2011] [04:31:54] &lt;pieterh&gt;        search for a thread titled &#8220;zmq_term() blocks in 2.1&#8221;</div>
<div class="line">[Monday 28 February 2011] [04:32:08] &lt;pieterh&gt;        &#8220;For simplicity, the port driver doesn&#8217;t handle any threads itself. And it never</div>
<div class="line">[Monday 28 February 2011] [04:32:08] &lt;pieterh&gt;        actually calls a zmq library function that could block indefinitely.&#8221;</div>
<div class="line">[Monday 28 February 2011] [04:32:12] &lt;sustrik&gt;        zeromq-dev?</div>
<div class="line">[Monday 28 February 2011] [04:32:15] &lt;pieterh&gt;        from chris&lt;<a class="reference external" href="mailto:csrl&#37;&#52;&#48;gmx&#46;com">csrl<span>&#64;</span>gmx<span>&#46;</span>com</a>&gt;</div>
<div class="line">[Monday 28 February 2011] [04:32:21] &lt;pieterh&gt;        yes, of course it&#8217;s on zeromq-dev</div>
<div class="line">[Monday 28 February 2011] [04:32:27] &lt;pieterh&gt;        and you were on that thread</div>
<div class="line">[Monday 28 February 2011] [04:34:11] &lt;sustrik&gt;        aha, found it</div>
<div class="line">[Monday 28 February 2011] [04:34:17] &lt;sustrik&gt;        that&#8217;s not about LINGER</div>
<div class="line">[Monday 28 February 2011] [04:34:25] &lt;sustrik&gt;        that&#8217;s about necessity to close the sockets</div>
<div class="line">[Monday 28 February 2011] [04:34:37] &lt;sustrik&gt;        same problem you&#8217;ve reported a long time ago</div>
<div class="line">[Monday 28 February 2011] [04:35:13] &lt;pieterh&gt;        you mentioned Linger, I just pointed out that zmq_term blocks</div>
<div class="line">[Monday 28 February 2011] [04:35:27] &lt;pieterh&gt;        and that people will hit this more and more</div>
<div class="line">[Monday 28 February 2011] [04:36:31] &lt;sustrik&gt;        ok, there are several issue involved:</div>
<div class="line">[Monday 28 February 2011] [04:36:36] &lt;sustrik&gt;        1. necessity to close sockets</div>
<div class="line">[Monday 28 February 2011] [04:36:53] &lt;sustrik&gt;        it would be nice to be able to avoid that</div>
<div class="line">[Monday 28 February 2011] [04:37:00] &lt;sustrik&gt;        however, i have no idea of how to do that</div>
<div class="line">[Monday 28 February 2011] [04:37:12] &lt;sustrik&gt;        2. linger</div>
<div class="line">[Monday 28 February 2011] [04:37:15] &lt;pieterh&gt;        no other classic OS API requires that kind of thing</div>
<div class="line">[Monday 28 February 2011] [04:37:15] &lt;sustrik&gt;        3. Ctrl+C</div>
<div class="line">[Monday 28 February 2011] [04:37:31] &lt;sustrik&gt;        this one was solved in one go with reaper thread</div>
<div class="line">[Monday 28 February 2011] [04:37:46] &lt;sustrik&gt;        you are free to send a patch</div>
<div class="line">[Monday 28 February 2011] [04:37:50] &lt;private_meta&gt;   uhm... which example set should I refer to when having multiple clients connect to the same port (in case of tcp), when I need to know which client sends the message and which client to send the message to, because Handling Multiple Sockets only seems to work with dedicated ports, or am I mistaken?</div>
<div class="line">[Monday 28 February 2011] [04:38:22] &lt;pieterh&gt;        sustrik: &#8220;send a patch&#8221; is telling me to jump in the lake, you know that</div>
<div class="line">[Monday 28 February 2011] [04:38:37] &lt;sustrik&gt;        well, i have no idea how to avoid 1.</div>
<div class="line">[Monday 28 February 2011] [04:38:42] &lt;pieterh&gt;        I&#8217;m raising a concern that the &#8220;stable 2.1&#8221; release will annoy many people and break a lot of code</div>
<div class="line">[Monday 28 February 2011] [04:38:43] &lt;sustrik&gt;        so, someone else have to</div>
<div class="line">[Monday 28 February 2011] [04:38:50] &lt;pieterh&gt;        this makes it very hard for me to release that with any kind of confidence</div>
<div class="line">[Monday 28 February 2011] [04:39:33] &lt;pieterh&gt;        except with a large disclaimer, which may be sufficient</div>
<div class="line">[Monday 28 February 2011] [04:39:36] &lt;pieterh&gt;        but...</div>
<div class="line">[Monday 28 February 2011] [04:39:41] &lt;pieterh&gt;        not when the explanation is confused</div>
<div class="line">[Monday 28 February 2011] [04:40:01] &lt;sustrik&gt;        what should i say? i have no idea how to fix it</div>
<div class="line">[Monday 28 February 2011] [04:40:03] &lt;sustrik&gt;        that&#8217;s it</div>
<div class="line">[Monday 28 February 2011] [04:40:30] &lt;pieterh&gt;        sustrik: look, I can document the need to close sockets</div>
<div class="line">[Monday 28 February 2011] [04:40:43] &lt;pieterh&gt;        I can document the need to set LINGER even in the most trivial apps</div>
<div class="line">[Monday 28 February 2011] [04:41:01] &lt;pieterh&gt;        that&#8217;s just &#8220;oh, it&#8217;s not so shiny and elegant anymore&#8221;</div>
<div class="line">[Monday 28 February 2011] [04:41:19] &lt;pieterh&gt;        but if you tell people to call zmq_term before closing sockets, I&#8217;m kind of confused</div>
<div class="line">[Monday 28 February 2011] [04:41:37] &lt;sustrik&gt;        let&#8217;s not mix the issues</div>
<div class="line">[Monday 28 February 2011] [04:41:43] &lt;sustrik&gt;        are you  concerned about 1 or 2?</div>
<div class="line">[Monday 28 February 2011] [04:41:56] &lt;pieterh&gt;        this is your breakdown, it&#8217;s not mine</div>
<div class="line">[Monday 28 February 2011] [04:42:08] &lt;sustrik&gt;        are you concerned about both?</div>
<div class="line">[Monday 28 February 2011] [04:42:10] &lt;pieterh&gt;        my concern is just &#8220;zmq_term blocks in 2.1 and I don&#8217;t know why&#8221;</div>
<div class="line">[Monday 28 February 2011] [04:42:15] &lt;sustrik&gt;        ok</div>
<div class="line">[Monday 28 February 2011] [04:42:20] &lt;sustrik&gt;        1. i can&#8217;t solve it</div>
<div class="line">[Monday 28 February 2011] [04:42:24] &lt;pieterh&gt;        it&#8217;s relatively easy to solve in a simple threaded app</div>
<div class="line">[Monday 28 February 2011] [04:42:25] &lt;sustrik&gt;        you are free to try</div>
<div class="line">[Monday 28 February 2011] [04:42:32] &lt;pieterh&gt;        1. close sockets, 2. set linger = 0, terminate</div>
<div class="line">[Monday 28 February 2011] [04:42:34] &lt;sustrik&gt;        2. linger is a problem</div>
<div class="line">[Monday 28 February 2011] [04:42:48] &lt;pieterh&gt;        but if this starts to go wrong in multithreaded apps, people will _refuse_ to use 0MQ...</div>
<div class="line">[Monday 28 February 2011] [04:43:02] &lt;pieterh&gt;        it&#8217;s a class 1 fatal &#8220;no go&#8221; problem that will stop it going into production</div>
<div class="line">[Monday 28 February 2011] [04:43:13] &lt;sustrik&gt;        setting linger to some default value</div>
<div class="line">[Monday 28 February 2011] [04:43:13] &lt;pieterh&gt;        &#8220;sorry, we can&#8217;t solve it&#8221; may be one answer</div>
<div class="line">[Monday 28 February 2011] [04:43:18] &lt;pieterh&gt;        but it&#8217;s a really crappy answer</div>
<div class="line">[Monday 28 February 2011] [04:43:22] &lt;sustrik&gt;        means that even a single message won&#8217;t pass</div>
<div class="line">[Monday 28 February 2011] [04:43:43] &lt;sustrik&gt;        given it&#8217;s sufficiently long and/or network is sufficiently slow</div>
<div class="line">[Monday 28 February 2011] [04:43:53] &lt;pieterh&gt;        like I said, there are easy ways to make that work</div>
<div class="line">[Monday 28 February 2011] [04:43:57] &lt;sustrik&gt;        ?</div>
<div class="line">[Monday 28 February 2011] [04:44:02] &lt;sustrik&gt;        sure, do so</div>
<div class="line">[Monday 28 February 2011] [04:44:12] &lt;pieterh&gt;        a. use a sensible default linger value</div>
<div class="line">[Monday 28 February 2011] [04:44:25] &lt;pieterh&gt;        b. if the app still has unsent messages after that, issue a loud warning</div>
<div class="line">[Monday 28 February 2011] [04:44:53] &lt;sustrik&gt;        hm, returning an error from zmq_term()?</div>
<div class="line">[Monday 28 February 2011] [04:44:56] &lt;sustrik&gt;        that may work</div>
<div class="line">[Monday 28 February 2011] [04:45:05] &lt;pieterh&gt;        no, a loud warning</div>
<div class="line">[Monday 28 February 2011] [04:45:12] &lt;sustrik&gt;        what&#8217;s that?</div>
<div class="line">[Monday 28 February 2011] [04:45:21] &lt;pieterh&gt;        printf (&#8220;123 messages not sent, please raise ZMQ_LINGER on socket&#8221;)</div>
<div class="line">[Monday 28 February 2011] [04:45:26] &lt;pieterh&gt;        etc.</div>
<div class="line">[Monday 28 February 2011] [04:45:36] &lt;pieterh&gt;        something that gets literally printed and sent to logs</div>
<div class="line">[Monday 28 February 2011] [04:45:43] &lt;pieterh&gt;        or sent on sys://log if that ever goes live</div>
<div class="line">[Monday 28 February 2011] [04:45:45] &lt;sustrik&gt;        that works only with console is available</div>
<div class="line">[Monday 28 February 2011] [04:45:50] &lt;sustrik&gt;        problem on windows</div>
<div class="line">[Monday 28 February 2011] [04:45:56] &lt;pieterh&gt;        so, people _need_ consoles on production systems</div>
<div class="line">[Monday 28 February 2011] [04:46:05] &lt;sustrik&gt;        but the error would kind of make sense</div>
<div class="line">[Monday 28 February 2011] [04:46:11] &lt;sustrik&gt;        let me think about it</div>
<div class="line">[Monday 28 February 2011] [04:46:12] &lt;pieterh&gt;        returning an error?</div>
<div class="line">[Monday 28 February 2011] [04:46:20] &lt;sustrik&gt;        rc = zmq_term()</div>
<div class="line">[Monday 28 February 2011] [04:46:22] &lt;pieterh&gt;        maybe but it just makes the caller responsible again</div>
<div class="line">[Monday 28 February 2011] [04:46:31] &lt;pieterh&gt;        yes, it would at least be consistent</div>
<div class="line">[Monday 28 February 2011] [04:46:32] &lt;sustrik&gt;        if (rc == EPENDINGMESSAGES)...</div>
<div class="line">[Monday 28 February 2011] [04:46:35] &lt;pieterh&gt;        yes</div>
<div class="line">[Monday 28 February 2011] [04:46:45] &lt;pieterh&gt;        and then set LINGER to 1 second by default please</div>
<div class="line">[Monday 28 February 2011] [04:47:02] &lt;sustrik&gt;        ok, i&#8217;m going to think about it</div>
<div class="line">[Monday 28 February 2011] [04:47:05] &lt;pieterh&gt;        this simplifies simple cases</div>
<div class="line">[Monday 28 February 2011] [04:47:22] &lt;sustrik&gt;        the close() problem remains though</div>
<div class="line">[Monday 28 February 2011] [04:47:23] &lt;pieterh&gt;        as for the deadlock issue, it just needs accurate documentation</div>
<div class="line">[Monday 28 February 2011] [04:47:27] &lt;sustrik&gt;        ok</div>
<div class="line">[Monday 28 February 2011] [04:47:39] &lt;pieterh&gt;        accurate, i.e. precisely what do people have to do to avoid it</div>
<div class="line">[Monday 28 February 2011] [04:48:43] &lt;pieterh&gt;        this change to linger would be very good, at least it&#8217;ll distinguish the deadlock from infinite linger</div>
<div class="line">[Monday 28 February 2011] [04:48:58] &lt;pieterh&gt;        that&#8217;s a headache today, not knowing what&#8217;s actually going wrong</div>
<div class="line">[Monday 28 February 2011] [04:49:33] &lt;sustrik&gt;        it won&#8217;t distinguish the two cases :(</div>
<div class="line">[Monday 28 February 2011] [04:49:51] &lt;sustrik&gt;        it will just timeout the term() after a while</div>
<div class="line">[Monday 28 February 2011] [04:49:56] &lt;sustrik&gt;        and allow to restart it</div>
<div class="line">[Monday 28 February 2011] [04:50:02] &lt;pieterh&gt;        you would also timeout the deadlock?</div>
<div class="line">[Monday 28 February 2011] [04:50:08] &lt;sustrik&gt;        yes</div>
<div class="line">[Monday 28 February 2011] [04:50:12] &lt;pieterh&gt;        ...</div>
<div class="line">[Monday 28 February 2011] [04:50:21] &lt;pieterh&gt;        but in the deadlock case there are zero messages to send</div>
<div class="line">[Monday 28 February 2011] [04:50:32] &lt;sustrik&gt;        the deadlock is caused by the handshake</div>
<div class="line">[Monday 28 February 2011] [04:51:05] &lt;sustrik&gt;        &#8220;tell me whether there are more you&#8217;ve queued&#8221;</div>
<div class="line">[Monday 28 February 2011] [04:51:15] &lt;sustrik&gt;        &#8220;ok, there are no more messages&#8221;</div>
<div class="line">[Monday 28 February 2011] [04:51:44] &lt;sustrik&gt;        the application thread&#8217;s part of the handshake is executed in zmq_close() call</div>
<div class="line">[Monday 28 February 2011] [04:51:46] &lt;pieterh&gt;        right</div>
<div class="line">[Monday 28 February 2011] [04:52:32] &lt;pieterh&gt;        well, we know how many sockets are not responding, right?</div>
<div class="line">[Monday 28 February 2011] [04:52:50] &lt;sustrik&gt;        yes</div>
<div class="line">[Monday 28 February 2011] [04:52:59] &lt;pieterh&gt;        that&#8217;s valuable information to report</div>
<div class="line">[Monday 28 February 2011] [04:53:09] &lt;sustrik&gt;        yup</div>
<div class="line">[Monday 28 February 2011] [04:53:46] &lt;pieterh&gt;        rc = number of unclosed sockets, maybe</div>
<div class="line">[Monday 28 February 2011] [04:54:06] &lt;sustrik&gt;        possibly</div>
<div class="line">[Monday 28 February 2011] [04:55:00] &lt;pieterh&gt;        you can&#8217;t use EPENDINGMESSAGES unless you know there are actually messages waiting</div>
<div class="line">[Monday 28 February 2011] [04:55:07] &lt;pieterh&gt;        something like ETIMEOUT</div>
<div class="line">[Monday 28 February 2011] [04:55:41] &lt;pieterh&gt;        if we can make this work sensibly, IMO 2.1 is ready for the big stage</div>
<div class="line">[Monday 28 February 2011] [04:56:58] &lt;pieterh&gt;        coffee, brb</div>
<div class="line">[Monday 28 February 2011] [04:57:46] &lt;sustrik&gt;        to be ready for big stage we need ubscription forwarding :|</div>
<div class="line">[Monday 28 February 2011] [05:03:11] &lt;pieterh&gt;        uhm, no, you just don&#8217;t need to break every app already running...</div>
<div class="line">[Monday 28 February 2011] [05:04:10] &lt;sustrik&gt;        well, it&#8217;s actually a bugfix</div>
<div class="line">[Monday 28 February 2011] [05:04:21] &lt;sustrik&gt;        people complained that messages are dropped on exit</div>
<div class="line">[Monday 28 February 2011] [05:04:26] &lt;sustrik&gt;        namely, mato</div>
<div class="line">[Monday 28 February 2011] [05:05:57] &lt;pieterh&gt;        well, there&#8217;s always someone complaining... :-)</div>
<div class="line">[Monday 28 February 2011] [05:06:24] &lt;pieterh&gt;        my radar mainly focuses on the dev list</div>
<div class="line">[Monday 28 February 2011] [05:06:57] &lt;sustrik&gt;        it have been a common complaint back then</div>
<div class="line">[Monday 28 February 2011] [05:06:58] &lt;pieterh&gt;        LINGER per socket is also kind of a strange choice</div>
<div class="line">[Monday 28 February 2011] [05:07:10] &lt;sustrik&gt;        it&#8217;s POSIX</div>
<div class="line">[Monday 28 February 2011] [05:07:13] &lt;pieterh&gt;        yes, this was a necessary change, no argument with that</div>
<div class="line">[Monday 28 February 2011] [05:07:20] &lt;pieterh&gt;        zmq_term is not POSIX :-)</div>
<div class="line">[Monday 28 February 2011] [05:07:36] &lt;sustrik&gt;        zmq_term = OS shutdown</div>
<div class="line">[Monday 28 February 2011] [05:07:41] &lt;pieterh&gt;        nope</div>
<div class="line">[Monday 28 February 2011] [05:07:43] &lt;sustrik&gt;        yes</div>
<div class="line">[Monday 28 February 2011] [05:08:01] &lt;pieterh&gt;        sigh</div>
<div class="line">[Monday 28 February 2011] [05:08:10] &lt;pieterh&gt;        then why am I calling &#8220;Shutdown OS&#8221; in my apps?</div>
<div class="line">[Monday 28 February 2011] [05:08:27] &lt;pieterh&gt;        0MQ is _not_ a kernel module</div>
<div class="line">[Monday 28 February 2011] [05:08:36] &lt;pieterh&gt;        sorry, this is 2011 and we&#8217;re on version 2.x.x</div>
<div class="line">[Monday 28 February 2011] [05:08:39] &lt;pieterh&gt;        please remain in the present</div>
<div class="line">[Monday 28 February 2011] [05:08:49] &lt;Steve-o&gt;        lol</div>
<div class="line">[Monday 28 February 2011] [05:08:57] &lt;pieterh&gt;        you may have a vision of where 0MQ will go</div>
<div class="line">[Monday 28 February 2011] [05:08:57] &lt;sustrik&gt;        zmq_term is <em>equivalent</em> to OS shutdown</div>
<div class="line">[Monday 28 February 2011] [05:09:05] &lt;sustrik&gt;        not OS shutdown itself</div>
<div class="line">[Monday 28 February 2011] [05:09:06] &lt;pieterh&gt;        but we are discussing today&#8217;s code and today&#8217;s design</div>
<div class="line">[Monday 28 February 2011] [05:09:18] &lt;pieterh&gt;        again, I do not call OS shutdown in my apps</div>
<div class="line">[Monday 28 February 2011] [05:09:27] &lt;sustrik&gt;        it does the same thing the TCP does with tx buffers on OS shutdown</div>
<div class="line">[Monday 28 February 2011] [05:09:45] &lt;pieterh&gt;        please, this analogy is not helpful</div>
<div class="line">[Monday 28 February 2011] [05:09:50] &lt;pieterh&gt;        it really is not helpful</div>
<div class="line">[Monday 28 February 2011] [05:10:05] &lt;sustrik&gt;        it&#8217;s what it does</div>
<div class="line">[Monday 28 February 2011] [05:10:06] &lt;pieterh&gt;        &#8220;Sorry, sir, your app is deadlocking because zmq_term is like OS shutdown&#8221;</div>
<div class="line">[Monday 28 February 2011] [05:10:07] &lt;sustrik&gt;        shrug</div>
<div class="line">[Monday 28 February 2011] [05:10:20] &lt;sustrik&gt;        no point in this discussion</div>
<div class="line">[Monday 28 February 2011] [05:10:29] &lt;pieterh&gt;        well, it&#8217;ll keep coming back</div>
<div class="line">[Monday 28 February 2011] [05:10:33] &lt;sustrik&gt;        i&#8217;ll have a look at the timout for zmq_term()</div>
<div class="line">[Monday 28 February 2011] [05:10:44] &lt;pieterh&gt;        you won&#8217;t be able to make it work IMO</div>
<div class="line">[Monday 28 February 2011] [05:10:52] &lt;pieterh&gt;        because you have LINGER per socket not per context</div>
<div class="line">[Monday 28 February 2011] [05:11:11] &lt;sustrik&gt;        they are two different timouts</div>
<div class="line">[Monday 28 February 2011] [05:11:32] &lt;pieterh&gt;        how would you modify the term timeout?</div>
<div class="line">[Monday 28 February 2011] [05:11:35] &lt;pieterh&gt;        as a user, I mean</div>
<div class="line">[Monday 28 February 2011] [05:11:47] &lt;sustrik&gt;        zmq_term_wiat (void <a href="#id59"><span class="problematic" id="id60">*</span></a>ctx, int timeout);</div>
<div class="line">[Monday 28 February 2011] [05:12:22] &lt;pieterh&gt;        so revert the old method to not blocking, and introduce a new one?</div>
<div class="line">[Monday 28 February 2011] [05:12:43] &lt;sustrik&gt;        introduce a new one</div>
<div class="line">[Monday 28 February 2011] [05:12:50] &lt;pieterh&gt;        +1, gets my vote</div>
<div class="line">[Monday 28 February 2011] [05:13:00] &lt;pieterh&gt;        it is totally explicit and leaves 2.0 semantics unchanged</div>
<div class="line">[Monday 28 February 2011] [05:13:06] &lt;sustrik&gt;        reverting zmq_term() to immediate would be consistent with 2.0</div>
<div class="line">[Monday 28 February 2011] [05:13:10] &lt;pieterh&gt;        ack</div>
<div class="line">[Monday 28 February 2011] [05:13:16] &lt;sustrik&gt;        however, 2.1 users may complain</div>
<div class="line">[Monday 28 February 2011] [05:13:22] &lt;sustrik&gt;        so it&#8217;s up to concensus</div>
<div class="line">[Monday 28 February 2011] [05:13:43] &lt;pieterh&gt;        HEY EVERYONE!!!</div>
<div class="line">[Monday 28 February 2011] [05:14:07] &lt;pieterh&gt;        please ack/nack sustrik&#8217;s suggestion here...</div>
<div class="line">[Monday 28 February 2011] [05:14:40] &lt;sustrik&gt;        something like that</div>
<div class="line">[Monday 28 February 2011] [05:14:44] &lt;sustrik&gt;        on mailing list</div>
<div class="line">[Monday 28 February 2011] [05:15:01] &lt;pieterh&gt;        yes</div>
<div class="line">[Monday 28 February 2011] [05:15:20] &lt;pieterh&gt;        it&#8217;s a major topic, would you raise it then?</div>
<div class="line">[Monday 28 February 2011] [05:16:06] &lt;sustrik&gt;        i have to think about the whole thing first</div>
<div class="line">[Monday 28 February 2011] [05:17:07] &lt;pieterh&gt;        ok</div>
<div class="line">[Monday 28 February 2011] [06:14:41] &lt;private_meta&gt;   hmm</div>
<div class="line">[Monday 28 February 2011] [06:14:44] &lt;private_meta&gt;   uhm... which example set should I refer to when having multiple clients connect to the same port (in case of tcp), when I need to know which client sends the message and which client to send the message to, because Handling Multiple Sockets only seems to work with dedicated ports, or am I mistaken?</div>
<div class="line">[Monday 28 February 2011] [06:15:55] &lt;pieterh&gt;        private_meta: Chapter 3 of the Guide</div>
<div class="line">[Monday 28 February 2011] [06:16:10] &lt;pieterh&gt;        various routing based on using XREP / ROUTER socket and identities of peers</div>
<div class="line">[Monday 28 February 2011] [07:14:47] &lt;stimpie&gt;        Does anyone have measurements or explanations on performance on a connection per thread/cpu versus a singele connection per system with a dispatcher to each thread?</div>
<div class="line">[Monday 28 February 2011] [07:18:40] &lt;ianbarber&gt;      threads vs events? that&#8217;s a big argument :) the <a class="reference external" href="http://www.kegel.com/c10k.html">http://www.kegel.com/c10k.html</a> c10k page is a good overview, not 0MQ specific</div>
<div class="line">[Monday 28 February 2011] [07:25:25] &lt;stimpie&gt;        thats an interesting read but not exactly what I&#8217;am thinking about, I have a system with x cores and x threads, messages from other systems need to arrive at those threads. I can create a socket for each thread or create 1 socket from where messages are dispatched to each thread.</div>
<div class="line">[Monday 28 February 2011] [07:26:21] &lt;stimpie&gt;        With one socket each physical devices has only one address and other systems do not have to take the number of threads per system into account</div>
<div class="line">[Monday 28 February 2011] [07:27:38] &lt;stimpie&gt;        Each thread a socket appears faster to me but requires more &#8216;global&#8217; knowledge, (messages should be duplicated across physical machines)</div>
<div class="line">[Monday 28 February 2011] [07:29:54] &lt;ianbarber&gt;      yeah, i see</div>
<div class="line">[Monday 28 February 2011] [07:30:09] &lt;pieterh&gt;        stimpie: it&#8217;s not really an either/or choice IMO</div>
<div class="line">[Monday 28 February 2011] [07:30:25] &lt;pieterh&gt;        on the one hand you need a frontend able to poll your 10K sockets</div>
<div class="line">[Monday 28 February 2011] [07:30:34] &lt;pieterh&gt;        but you usually also need a bunch of threads to do the real work</div>
<div class="line">[Monday 28 February 2011] [07:30:50] &lt;pieterh&gt;        however it is pathological to create one thread per socket</div>
<div class="line">[Monday 28 February 2011] [07:31:03] &lt;pieterh&gt;        see asyncsrv example in Chapter 3 of the guide</div>
<div class="line">[Monday 28 February 2011] [07:32:39] &lt;ianbarber&gt;      pieterh: i think he&#8217;s asking about one thread per core basically, with one tcp socket per thread, or a device on tcp with inproc/ipc to the other threads</div>
<div class="line">[Monday 28 February 2011] [07:32:55] &lt;stimpie&gt;        ianbarber, those should have been my words ;-)</div>
<div class="line">[Monday 28 February 2011] [07:33:10] &lt;pieterh&gt;        well, you want one thread per core for threads that do real work</div>
<div class="line">[Monday 28 February 2011] [07:33:16] &lt;ianbarber&gt;      definitely</div>
<div class="line">[Monday 28 February 2011] [07:33:26] &lt;pieterh&gt;        however, that does not map to TCP connections</div>
<div class="line">[Monday 28 February 2011] [07:34:02] &lt;pieterh&gt;        not &#8220;one tcp socket per thread&#8221;, nope</div>
<div class="line">[Monday 28 February 2011] [07:34:18] &lt;pieterh&gt;        that would be an anti-pattern in 0MQ</div>
<div class="line">[Monday 28 February 2011] [07:34:51]   * pieterh assumes by that you meant &#8216;one TCP connection to a client&#8217;</div>
<div class="line">[Monday 28 February 2011] [07:35:24] &lt;ianbarber&gt;      i think, tbh, that a forwarder type device would be fine, they&#8217;re pretty quick. If you did want to have a TCP listener per core, then you could have them check in to a name service, and have your clients query the name service</div>
<div class="line">[Monday 28 February 2011] [07:36:17] &lt;ianbarber&gt;      though I would have each of those TCP listeners be a separate process</div>
<div class="line">[Monday 28 February 2011] [07:37:36] &lt;stimpie&gt;        So you think the overhead of the forwarde (dispatcher) would not be a negative impact?</div>
<div class="line">[Monday 28 February 2011] [07:38:28] &lt;stimpie&gt;        Best way to find out is to benchmark I guess</div>
<div class="line">[Monday 28 February 2011] [07:39:09] &lt;pieterh&gt;        stimpie: best way is to benchmark, try any device and see how it performs</div>
<div class="line">[Monday 28 February 2011] [07:39:25] &lt;ianbarber&gt;      yeah</div>
<div class="line">[Monday 28 February 2011] [07:40:37] &lt;stimpie&gt;        I will do, thanks for your thoughts</div>
<div class="line">[Monday 28 February 2011] [07:40:43] &lt;pieterh&gt;        stimpie: the pattern I&#8217;d recommend is:</div>
<div class="line">[Monday 28 February 2011] [07:40:52] &lt;pieterh&gt;        n clients, connecting as usual to a queue</div>
<div class="line">[Monday 28 February 2011] [07:41:02] &lt;pieterh&gt;        m workers, where m is much smaller than n</div>
<div class="line">[Monday 28 February 2011] [07:41:10] &lt;pieterh&gt;        queue talking over inproc to workers</div>
<div class="line">[Monday 28 February 2011] [07:41:30] &lt;pieterh&gt;        total number of threads on the server is m + 1</div>
<div class="line">[Monday 28 February 2011] [07:41:59] &lt;pieterh&gt;        if m is too large, you will lose time in context switching</div>
<div class="line">[Monday 28 February 2011] [07:42:26] &lt;pieterh&gt;        sorry, total number of app threads on server is m + 1, there is also at least 1 I/O thread</div>
<div class="line">[Monday 28 February 2011] [07:42:51] &lt;pieterh&gt;        so optimal value for m is (total cores on server box) - 2</div>
<div class="line">[Monday 28 February 2011] [07:43:13] &lt;pieterh&gt;        assuming you can dedicate a whole multicore box to your server app</div>
<div class="line">[Monday 28 February 2011] [07:43:28] &lt;pieterh&gt;        this would be for CPU-limited workers, it&#8217;s different if they are I/O bound</div>
<div class="line">[Monday 28 February 2011] [07:45:12] &lt;ianbarber&gt;      make sure to benchmark with as relastic conditions etc. as you can - it can be easy to benchmark with (say) much smaller messages than you&#8217;d normally use, and see a different performance character</div>
<div class="line">[Monday 28 February 2011] [07:59:05] &lt;Guthur&gt; pieterh: The new projects page seems a little similar to the labs page, imo</div>
<div class="line">[Monday 28 February 2011] [07:59:22] &lt;pieterh&gt;        Guthur: yes, it&#8217;s meant to overlap</div>
<div class="line">[Monday 28 February 2011] [07:59:45] &lt;pieterh&gt;        this projects page is a temporary place to collect community projects</div>
<div class="line">[Monday 28 February 2011] [08:00:08] &lt;pieterh&gt;        that is, projects we consider part of the 0MQ community and want to expose to potential contributors</div>
<div class="line">[Monday 28 February 2011] [08:00:23] &lt;Guthur&gt; ok, and then what is labs?</div>
<div class="line">[Monday 28 February 2011] [08:00:25] &lt;pieterh&gt;        the Labs page goes a bit further and also doesn&#8217;t really expose the core projects</div>
<div class="line">[Monday 28 February 2011] [08:00:50] &lt;pieterh&gt;        so my idea with the projects business is to show these on the main community page</div>
<div class="line">[Monday 28 February 2011] [08:00:58] &lt;pieterh&gt;        similarly as we do for the bindings</div>
<div class="line">[Monday 28 February 2011] [08:01:15] &lt;Guthur&gt; ok, so I suppose they should have a reasonable level of maturity</div>
<div class="line">[Monday 28 February 2011] [08:01:44] &lt;pieterh&gt;        not necessarily but they should be tight extensions of 0MQ</div>
<div class="line">[Monday 28 February 2011] [08:01:48] &lt;pieterh&gt;        rather than apps which use it</div>
<div class="line">[Monday 28 February 2011] [08:01:59] &lt;pieterh&gt;        e.g. I&#8217;d consider zguide a project but not mongrel2</div>
<div class="line">[Monday 28 February 2011] [08:02:25] &lt;Guthur&gt; oh ok, that clears it up</div>
<div class="line">[Monday 28 February 2011] [08:02:39] &lt;pieterh&gt;        ideally all these projects would gravitate towards the same workflow, core community of contributors, infrastructure, etc.</div>
<div class="line">[Monday 28 February 2011] [08:02:44] &lt;pieterh&gt;        like the bindings</div>
<div class="line">[Monday 28 February 2011] [08:03:31] &lt;pieterh&gt;        I had this vision of making it into a dashboard like this: <a class="reference external" href="http://extensions.wdeditor.com/">http://extensions.wdeditor.com/</a></div>
<div class="line">[Monday 28 February 2011] [08:03:39] &lt;pieterh&gt;        that&#8217;s based on my design</div>
<div class="line">[Monday 28 February 2011] [08:03:57] &lt;pieterh&gt;        but it&#8217;d have to be red/black/white of course :-)</div>
<div class="line">[Monday 28 February 2011] [08:04:45] &lt;Guthur&gt; of course, hehe</div>
<div class="line">[Monday 28 February 2011] [08:05:36] &lt;pieterh&gt;        so you come to the community site and see a whole bunch of projects, each with a name/person/graphic</div>
<div class="line">[Monday 28 February 2011] [08:05:51] &lt;pieterh&gt;        I guess we&#8217;re moving towards that very slowly</div>
<div class="line">[Monday 28 February 2011] [08:06:10] &lt;Guthur&gt; so for an example, where would a implementation of the FIXT 1.1 (Transport Independent) protocol using ZeroMQ as the transport lie</div>
<div class="line">[Monday 28 February 2011] [08:06:30] &lt;pieterh&gt;        it&#8217;s really up to the owner</div>
<div class="line">[Monday 28 February 2011] [08:06:50] &lt;pieterh&gt;        it&#8217;s a choice: move it into the 0MQ community or keep it separate</div>
<div class="line">[Monday 28 February 2011] [08:07:21] &lt;Guthur&gt; ok</div>
<div class="line">[Monday 28 February 2011] [08:07:39] &lt;pieterh&gt;        if, for example, there were several such bridges, it would be great to see them as 0MQ projects</div>
<div class="line">[Monday 28 February 2011] [08:08:48] &lt;pieterh&gt;        let me give another example</div>
<div class="line">[Monday 28 February 2011] [08:09:02] &lt;pieterh&gt;        I&#8217;m working on Whaleshark (<a class="reference external" href="http://zero.mq/ws">http://zero.mq/ws</a>)</div>
<div class="line">[Monday 28 February 2011] [08:09:13] &lt;pieterh&gt;        which depends on a bunch of other 0MQ layers</div>
<div class="line">[Monday 28 February 2011] [08:09:19] &lt;pieterh&gt;        like a name service, security service, etc.</div>
<div class="line">[Monday 28 February 2011] [08:09:36] &lt;pieterh&gt;        it could be fun to also include FIXT support</div>
<div class="line">[Monday 28 February 2011] [08:09:59] &lt;pieterh&gt;        so if the FIXT layer was aimed at 0MQ apps like Whaleshark, it&#8217;s a natural 0MQ project</div>
<div class="line">[Monday 28 February 2011] [08:10:11] &lt;pieterh&gt;        but if it&#8217;s aimed at FIXT apps, it&#8217;s not</div>
<div class="line">[Monday 28 February 2011] [08:10:12] &lt;Guthur&gt; FIXT seemed like a nice place to start with FIX and 0MQ, due to its transport independent spec</div>
<div class="line">[Monday 28 February 2011] [08:10:56] &lt;Guthur&gt; ok i understand</div>
<div class="line">[Monday 28 February 2011] [08:11:16] &lt;pieterh&gt;        acid test would be, do you discuss project X here and on zeromq-dev, or on some other forum</div>
<div class="line">[Monday 28 February 2011] [08:14:49] &lt;Guthur&gt; would it be possible to offer commercial support for such projects via a corporate entity, similar to how imatix is mentioned for whaleshark?</div>
<div class="line">[Monday 28 February 2011] [08:14:55] &lt;pieterh&gt;        of course</div>
<div class="line">[Monday 28 February 2011] [08:15:06] &lt;pieterh&gt;        that&#8217;s why there&#8217;s a &#8216;website&#8217; column</div>
<div class="line">[Monday 28 February 2011] [08:15:29] &lt;pieterh&gt;        you&#8217;d probably not be able to use the zeromq.org domain without iMatix agreeing</div>
<div class="line">[Monday 28 February 2011] [08:16:26] &lt;Guthur&gt; that&#8217;s reasonable</div>
<div class="line">[Monday 28 February 2011] [08:46:25] &lt;sustrik&gt;        pieterh: it seems there a problem with the mailing list</div>
<div class="line">[Monday 28 February 2011] [08:46:29] &lt;sustrik&gt;        i&#8217;ve sent an email</div>
<div class="line">[Monday 28 February 2011] [08:46:35] &lt;sustrik&gt;        it haven&#8217;t apperared</div>
<div class="line">[Monday 28 February 2011] [08:46:44] &lt;pieterh&gt;        hmm, ok, let me restart the server...</div>
<div class="line">[Monday 28 February 2011] [08:48:09] &lt;pieterh&gt;        rebooting, it&#8217;ll take a minute or so</div>
<div class="line">[Monday 28 February 2011] [08:48:30] &lt;pieterh&gt;        there&#8217;s a service (spam filter afair) which gets confused now and then</div>
<div class="line">[Monday 28 February 2011] [08:59:24] &lt;pieterh&gt;        sustrik: didn&#8217;t help, I&#8217;m contacting Ewen</div>
<div class="line">[Monday 28 February 2011] [09:33:45] &lt;sustrik&gt;        thx</div>
<div class="line">[Monday 28 February 2011] [09:41:35] &lt;Seta00&gt; I need an example that uses polling on a sub socket :/</div>
<div class="line">[Monday 28 February 2011] [09:42:17] &lt;pieterh&gt;        Seta00: poll works the same on all socket types</div>
<div class="line">[Monday 28 February 2011] [09:42:38] &lt;Seta00&gt; well then I need an example that uses polling</div>
<div class="line">[Monday 28 February 2011] [09:42:49] &lt;pieterh&gt;        there are lots in the Guide</div>
<div class="line">[Monday 28 February 2011] [09:43:09] &lt;Seta00&gt; kk I&#8217;ll check</div>
<div class="line">[Monday 28 February 2011] [09:53:01] &lt;pieterh&gt;        sustrik: I&#8217;ve put a note on the community page, this sucks, sorry</div>
<div class="line">[Monday 28 February 2011] [10:55:56] &lt;travlr&gt; pieterh: just had to mention how much i appreciate the work you did with the online reference... much much nicer to work with... very thorough too! thanks.</div>
<div class="line">[Monday 28 February 2011] [10:56:12] &lt;pieterh&gt;        travlr: you mean the new API site?</div>
<div class="line">[Monday 28 February 2011] [10:56:19] &lt;travlr&gt; yes</div>
<div class="line">[Monday 28 February 2011] [10:56:27] &lt;pieterh&gt;        np :-) it was fun to make</div>
<div class="line">[Monday 28 February 2011] [10:56:45] &lt;travlr&gt; cool. thanks again for all</div>
<div class="line">[Monday 28 February 2011] [10:56:48] &lt;pieterh&gt;        we needed to cover older/newer versions anyhow</div>
<div class="line">[Monday 28 February 2011] [10:57:14] &lt;travlr&gt; yes, very smooth and easy to work with</div>
<div class="line">[Monday 28 February 2011] [11:51:33] &lt;private_meta&gt;   Does the router in a router-to-dealer-relationship know when a dealer connects, even if it didn&#8217;t send a message yet? Meaning, can I as a user of the router know that?</div>
<div class="line">[Monday 28 February 2011] [11:53:45] &lt;pieterh&gt;        private_meta: not when it connects, but if it sends a message, yes</div>
<div class="line">[Monday 28 February 2011] [11:54:21] &lt;pieterh&gt;        any router-to-anything depends on the anything sending something to the router first</div>
<div class="line">[Monday 28 February 2011] [11:54:32] &lt;private_meta&gt;   kk...</div>
<div class="line">[Monday 28 February 2011] [11:55:50] &lt;private_meta&gt;   pieterh: so that no messages are lost in a router-dealer-relationship the router must wait for the first message to arrive</div>
<div class="line">[Monday 28 February 2011] [11:56:00] &lt;private_meta&gt;   well, sounds logical now that i write it</div>
<div class="line">[Monday 28 February 2011] [11:56:01] &lt;pieterh&gt;        yes</div>
<div class="line">[Monday 28 February 2011] [11:56:10] &lt;pieterh&gt;        the router needs to know an address to send to</div>
<div class="line">[Monday 28 February 2011] [11:56:18] &lt;pieterh&gt;        that only comes with an input message</div>
<div class="line">[Monday 28 February 2011] [11:56:30] &lt;pieterh&gt;        unless (a) you pass the identities some other way</div>
<div class="line">[Monday 28 February 2011] [11:56:37] &lt;pieterh&gt;        or (b) you use durable sockets</div>
<div class="line">[Monday 28 February 2011] [11:56:50] &lt;private_meta&gt;   I&#8217;m in need of logon messages anyway</div>
<div class="line">[Monday 28 February 2011] [11:57:19] &lt;pieterh&gt;        and router is like pub: if there&#8217;s no recipient, the message is not queued, it&#8217;s dropped immediately</div>
<div class="line">[Monday 28 February 2011] [11:58:33] &lt;private_meta&gt;   pieterh: I seem to have overseen that in the docs, but what happens to a dealer trying to connect to a non-existant router, and how does the dealer know?</div>
<div class="line">[Monday 28 February 2011] [11:59:05] &lt;pieterh&gt;        it doesn&#8217;t know unless it expects a reply and doesn&#8217;t get one</div>
<div class="line">[Monday 28 February 2011] [11:59:24] &lt;pieterh&gt;        actually I&#8217;m writing this up now for Ch4</div>
<div class="line">[Monday 28 February 2011] [12:00:24] &lt;private_meta&gt;   so there is no such thing as &#8220;unknown host&#8221; or other error messages that I could get?</div>
<div class="line">[Monday 28 February 2011] [12:00:33] &lt;pieterh&gt;        nope</div>
<div class="line">[Monday 28 February 2011] [12:01:09] &lt;pieterh&gt;        note that <a class="reference external" href="tcp://">tcp://</a> is a disconnected protocol... the host might be away at lunch and back in 2 hours, 0MQ will wait</div>
<div class="line">[Monday 28 February 2011] [12:01:25] &lt;pieterh&gt;        inproc:// will tell you if it can&#8217;t connect</div>
<div class="line">[Monday 28 February 2011] [12:01:28] &lt;private_meta&gt;   Did you do that so you have an abstraction of any protocols?</div>
<div class="line">[Monday 28 February 2011] [12:01:34] &lt;private_meta&gt;   oh</div>
<div class="line">[Monday 28 February 2011] [12:01:45] &lt;pieterh&gt;        it&#8217;s just more useful like that, for most apps</div>
<div class="line">[Monday 28 February 2011] [12:02:22] &lt;private_meta&gt;   I&#8217;m not quite sure how to implement a timeout to wait for that :/</div>
<div class="line">[Monday 28 February 2011] [12:02:34] &lt;pieterh&gt;        it&#8217;s documented... hang on...</div>
<div class="line">[Monday 28 February 2011] [12:02:58] &lt;pieterh&gt;        ah, sorry, not yet pushed :-)</div>
<div class="line">[Monday 28 February 2011] [12:03:06] &lt;private_meta&gt;   huh=</div>
<div class="line">[Monday 28 February 2011] [12:03:08] &lt;private_meta&gt;   <a href="#id61"><span class="problematic" id="id62">*</span></a>huh?</div>
<div class="line">[Monday 28 February 2011] [12:03:12] &lt;pieterh&gt;        if you can wait a little while...</div>
<div class="line">[Monday 28 February 2011] [12:03:24] &lt;private_meta&gt;   define little while</div>
<div class="line">[Monday 28 February 2011] [12:03:33]   * pieterh goes back to writing</div>
<div class="line">[Monday 28 February 2011] [12:04:04] &lt;private_meta&gt;   for some people, a week might be a little while, for others a little while is an hour :D</div>
<div class="line">[Monday 28 February 2011] [12:05:49] &lt;private_meta&gt;   As far as I figured, you use durable sockets where you have a fixed name whenever you reconnect (more or less), but also the router discards messages that are sent to a target it doesn&#8217;t know. So if a router sends a message to a durable socket that is not yet connected, are these messages also discarded?</div>
<div class="line">[Monday 28 February 2011] [12:06:25] &lt;pieterh&gt;        durable sockets cannot be &#8220;not yet connected&#8221;</div>
<div class="line">[Monday 28 February 2011] [12:06:40] &lt;pieterh&gt;        a durable socket may be &#8220;temporarily away for lunch&#8221;</div>
<div class="line">[Monday 28 February 2011] [12:07:02] &lt;pieterh&gt;        i&#8217;ve no idea what a router socket does with durable sockets but I imagine it queues messages for them</div>
<div class="line">[Monday 28 February 2011] [12:07:39] &lt;pieterh&gt;        that would be consistent with PUB, but it&#8217;s not documented afaik</div>
<div class="line">[Monday 28 February 2011] [12:07:43] &lt;private_meta&gt;   kk, so a computer where the durable socket is located on which, let&#8217;s say, reboots, is &#8220;away for lunch&#8221; for the router?</div>
<div class="line">[Monday 28 February 2011] [12:07:54] &lt;private_meta&gt;   -which</div>
<div class="line">[Monday 28 February 2011] [12:07:58] &lt;pieterh&gt;        the whole business of &#8220;XREP discards and does not queue messages it can&#8217;t route&#8221; is not documented</div>
<div class="line">[Monday 28 February 2011] [12:08:07] &lt;private_meta&gt;   kk</div>
<div class="line">[Monday 28 February 2011] [12:24:52] &lt;pieterh&gt;        private_meta: ok, <a class="reference external" href="http://zguide.zeromq.org/page:all#toc67">http://zguide.zeromq.org/page:all#toc67</a></div>
<div class="line">[Monday 28 February 2011] [12:28:29] &lt;private_meta&gt;   sweet</div>
<div class="line">[Monday 28 February 2011] [12:29:45] &lt;private_meta&gt;   pieterh: So the initial timeout is oc pretty much the first heartbeat not coming through I assume?</div>
<div class="line">[Monday 28 February 2011] [12:30:05] &lt;pieterh&gt;        it&#8217;s not quite that simple</div>
<div class="line">[Monday 28 February 2011] [12:30:27] &lt;private_meta&gt;   how so?</div>
<div class="line">[Monday 28 February 2011] [12:30:28] &lt;pieterh&gt;        you need a clock for the poll, should be the lowest heartbeat interval</div>
<div class="line">[Monday 28 February 2011] [12:30:39] &lt;pieterh&gt;        if you use the same heartbeat for all peers, that value</div>
<div class="line">[Monday 28 February 2011] [12:30:54] &lt;pieterh&gt;        then you need to allow for 2-3 lost heartbeats before declaring a &#8216;disconnected peer&#8217;</div>
<div class="line">[Monday 28 February 2011] [12:31:44] &lt;private_meta&gt;   Yes, seems like a good thing to allow for single lost messages.</div>
<div class="line">[Monday 28 February 2011] [12:32:47] &lt;private_meta&gt;   Uhm... a &#8220;lost heartbeat&#8221; would be, in your case, a certain heartbeat not receiving a reply, wouldn&#8217;t it? Isn&#8217;t 0mq build so, if the client decides to connect one day, all those &#8220;lost&#8221; heartbeats would be sent?</div>
<div class="line">[Monday 28 February 2011] [12:32:56] &lt;private_meta&gt;   <a href="#id63"><span class="problematic" id="id64">*</span></a>built</div>
<div class="line">[Monday 28 February 2011] [12:33:01] &lt;pieterh&gt;        heartbeats don&#8217;t get replies</div>
<div class="line">[Monday 28 February 2011] [12:33:14] &lt;pieterh&gt;        they are asynchronous in both directions</div>
<div class="line">[Monday 28 February 2011] [12:33:16] &lt;private_meta&gt;   ah yeah</div>
<div class="line">[Monday 28 February 2011] [12:33:19] &lt;private_meta&gt;   sorry, true</div>
<div class="line">[Monday 28 February 2011] [12:33:19] &lt;pieterh&gt;        please read the code and the docs...</div>
<div class="line">[Monday 28 February 2011] [12:33:29] &lt;private_meta&gt;   I will</div>
<div class="line">[Monday 28 February 2011] [12:33:38] &lt;private_meta&gt;   sorry for asking prematurely :)</div>
<div class="line">[Monday 28 February 2011] [12:36:34] &lt;pieterh&gt;        np, if there&#8217;s anything unclear or missing in the text, let me know</div>
<div class="line">[Monday 28 February 2011] [12:36:40] &lt;pieterh&gt;        it&#8217;s a first draft and raw</div>
<div class="line">[Monday 28 February 2011] [12:40:23] &lt;private_meta&gt;   pieterh: to get it straight, you would use one zmq_poll call with infinite timeout for message transfer and one with heartbeat timeout to send heartbeat messages?</div>
<div class="line">[Monday 28 February 2011] [12:40:40] &lt;pieterh&gt;        i don&#8217;t think that&#8217;s what the examples do</div>
<div class="line">[Monday 28 February 2011] [12:40:59] &lt;private_meta&gt;   You mean the pirate example?</div>
<div class="line">[Monday 28 February 2011] [12:41:04] &lt;pieterh&gt;        any of them</div>
<div class="line">[Monday 28 February 2011] [12:41:26] &lt;private_meta&gt;   Okay, I&#8217;ll look at that one</div>
<div class="line">[Monday 28 February 2011] [12:41:45] &lt;pieterh&gt;        it&#8217;s tempting to do heartbeating via a second socket</div>
<div class="line">[Monday 28 February 2011] [12:41:51] &lt;pieterh&gt;        this is a bad idea for two or three reasons</div>
<div class="line">[Monday 28 February 2011] [12:41:53] &lt;pieterh&gt;        which I&#8217;ll document</div>
<div class="line">[Monday 28 February 2011] [12:44:19] &lt;pieterh&gt;        &#8220;First, if you&#8217;re sending data you don&#8217;t need to send heartbeats. Second, sockets may, due to network vagaries, become jammed. You need to know when your main data socket is silent because it&#8217;s dead, rather than just not busy, so you need heartbeats on that socket. Lastly, two sockets is more complex than one.&#8221;</div>
<div class="line">[Monday 28 February 2011] [12:54:57] &lt;cremes&gt; is there a C FORWARDER device in the zguide anywhere? i can&#8217;t seem to find one and I&#8217;d like one for testing</div>
<div class="line">[Monday 28 February 2011] [13:02:10] &lt;pieterh&gt;        cremes, afaik the msgqueue example will work if you use PUB and SUB</div>
<div class="line">[Monday 28 February 2011] [13:02:35] &lt;pieterh&gt;        a forwarder just reads and writes two sockets</div>
<div class="line">[Monday 28 February 2011] [13:02:59] &lt;cremes&gt; pieterh: ok, i&#8217;ll try it</div>
<div class="line">[Monday 28 February 2011] [13:03:14] &lt;pieterh&gt;        sorry, msgqueue just calls the built-in device, that&#8217;s not what you want, is it</div>
<div class="line">[Monday 28 February 2011] [13:03:28] &lt;pieterh&gt;        you want the actual core, poll / recv / send?</div>
<div class="line">[Monday 28 February 2011] [13:03:54] &lt;cremes&gt; no, i just want something that will subscribe to everything and publish out the other side</div>
<div class="line">[Monday 28 February 2011] [13:04:01] &lt;cremes&gt; the built in device is probably okay then, yes?</div>
<div class="line">[Monday 28 February 2011] [13:04:05] &lt;pieterh&gt;        yes</div>
<div class="line">[Monday 28 February 2011] [13:04:17] &lt;pieterh&gt;        it&#8217;s the same code for all three devices</div>
<div class="line">[Monday 28 February 2011] [13:04:30] &lt;pieterh&gt;        the only differences are the bind/connect directions and socket types</div>
<div class="line">[Monday 28 February 2011] [13:09:52] &lt;zedas&gt;  pieterh: what?! not even <a class="reference external" href="http://mulltedb.org">http://mulltedb.org</a> :-)</div>
<div class="line">[Monday 28 February 2011] [13:10:11] &lt;zedas&gt;  pieterh: or i mean <a class="reference external" href="http://mulletdb.org/">http://mulletdb.org/</a> :-)</div>
<div class="line">[Monday 28 February 2011] [13:10:17] &lt;cremes&gt; pieterh: looks like i don&#8217;t need it; i have isolated another slow leaker with PUB sockets</div>
<div class="line">[Monday 28 February 2011] [13:10:40] &lt;pieterh&gt;        zedas: uhm, what&#8217;s the question?</div>
<div class="line">[Monday 28 February 2011] [13:10:54] &lt;pieterh&gt;        cremes: really, and it&#8217;s not even Friday yet?</div>
<div class="line">[Monday 28 February 2011] [13:11:03] &lt;cremes&gt; :)</div>
<div class="line">[Monday 28 February 2011] [13:11:14] &lt;cremes&gt; well, i need to verify one or two more things.... but yeah</div>
<div class="line">[Monday 28 February 2011] [13:12:12] &lt;pieterh&gt;        zedas: you mean for the 0MQ projects list?</div>
<div class="line">[Monday 28 February 2011] [13:12:25] &lt;pieterh&gt;        and it&#8217;s mulletdb.com, :-)</div>
<div class="line">[Monday 28 February 2011] [13:13:10] &lt;zedas&gt;  damn, see i don&#8217;t even care about that project.</div>
<div class="line">[Monday 28 February 2011] [13:13:30] &lt;zedas&gt;  pieterh: yeah i was joking about &#8220;projects&#8221;</div>
<div class="line">[Monday 28 February 2011] [13:14:01] &lt;pieterh&gt;        yeah, the love shows</div>
<div class="line">[Monday 28 February 2011] [13:14:21] &lt;pieterh&gt;        tokyo cabinet seems useful</div>
<div class="line">[Monday 28 February 2011] [13:14:47] &lt;pieterh&gt;        not so sure about that zeromq stuff you are so keen about</div>
<div class="line">[Monday 28 February 2011] [13:23:25] &lt;cremes&gt; false alarm on that leak... i was calling setsockopt(LINGER) after zmq_connect()</div>
<div class="line">[Monday 28 February 2011] [13:23:35] &lt;cremes&gt; i guess it doesn&#8217;t honor it after the socket has been bound/connected</div>
<div class="line">[Monday 28 February 2011] [13:23:42] &lt;cremes&gt; or is that a bug?</div>
<div class="line">[Monday 28 February 2011] [13:24:18] &lt;cremes&gt; nope, not a bug according to the man page</div>
<div class="line">[Monday 28 February 2011] [13:41:17] &lt;sp4ke&gt;  Hi</div>
<div class="line">[Monday 28 February 2011] [13:42:09] &lt;sp4ke&gt;  can anyone help me setting up zeromq with my project on Visual Studio 2010</div>
<div class="line">[Monday 28 February 2011] [13:42:25] &lt;sp4ke&gt;  i get unresolved external symbols when i build projects</div>
<div class="line">[Monday 28 February 2011] [13:42:58] &lt;sp4ke&gt;  i built the libzmq project and added the path to the directory on my project dpendencies</div>
<div class="line">[Monday 28 February 2011] [13:52:13] &lt;sustrik&gt;        the libs are in libs subdir</div>
<div class="line">[Monday 28 February 2011] [13:52:28] &lt;sustrik&gt;        iirc</div>
<div class="line">[Monday 28 February 2011] [13:53:20] &lt;sp4ke&gt;  in the libs subdir i&#8217;ve got only a libzmq.dll and libzmq.ilk</div>
<div class="line">[Monday 28 February 2011] [13:53:44] &lt;sp4ke&gt;  how can i add these files as dependencies in VS ?</div>
<div class="line">[Monday 28 February 2011] [13:54:24] &lt;sp4ke&gt;  i mean other than specify the path in the Librarry Directories which i did</div>
<div class="line">[Monday 28 February 2011] [13:55:03] &lt;sustrik&gt;        there should be libzmq.lib iirc</div>
<div class="line">[Monday 28 February 2011] [13:55:12] &lt;sustrik&gt;        you should link that with your project</div>
<div class="line">[Monday 28 February 2011] [13:58:02] &lt;sp4ke&gt;  ok thanx i found a discussion on irc archive it&#8217;s common problem to not get the .lib the answer should be there</div>
<div class="line">[Monday 28 February 2011] [14:29:31] &lt;pieterh&gt;        cremes: you can set LINGER at any time before close, afaics</div>
<div class="line">[Monday 28 February 2011] [14:30:16] &lt;cremes&gt; the docs say otherwise:  &#8220;Caution: All options, with the exception of subscription strings, only take effect for subsequent socket bind/connects.&#8221;</div>
<div class="line">[Monday 28 February 2011] [14:30:28] &lt;cremes&gt; that&#8217;s from the zmq_setsockopt man page</div>
<div class="line">[Monday 28 February 2011] [14:30:45] &lt;cremes&gt; i don&#8217;t think it&#8217;s lying... my testing appears to bear this out</div>
<div class="line">[Monday 28 February 2011] [14:32:08] &lt;pieterh&gt;        i&#8217;ve been using LINGER in examples to stop zmq_term blocking, and I use it just before close</div>
<div class="line">[Monday 28 February 2011] [14:32:21] &lt;pieterh&gt;        something to clarify...</div>
<div class="line">[Monday 28 February 2011] [14:32:47] &lt;cremes&gt; indeed</div>
<div class="line">[Monday 28 February 2011] [14:33:09] &lt;pieterh&gt;        example like <a class="reference external" href="https://github.com/imatix/zguide/blob/master/examples/C/lpclient.c">https://github.com/imatix/zguide/blob/master/examples/C/lpclient.c</a></div>
<div class="line">[Monday 28 February 2011] [14:59:25] &lt;mikko&gt;  sigh</div>
<div class="line">[Monday 28 February 2011] [15:05:50] &lt;Guthur&gt; cremes pieterh: that was my update</div>
<div class="line">[Monday 28 February 2011] [15:06:15] &lt;pieterh&gt;        Guthur: yeah, but is it accurate?</div>
<div class="line">[Monday 28 February 2011] [15:06:16] &lt;Guthur&gt; sustrik mentioned that all options should be set before connect</div>
<div class="line">[Monday 28 February 2011] [15:06:50] &lt;mikko&gt;  Guthur: not all</div>
<div class="line">[Monday 28 February 2011] [15:06:58] &lt;mikko&gt;  zmq_subscribe can be set afterwards</div>
<div class="line">[Monday 28 February 2011] [15:07:11] &lt;Guthur&gt; mikko, yeah besides that</div>
<div class="line">[Monday 28 February 2011] [15:07:16] &lt;pieterh&gt;        mikko: that&#8217;s what the text says :-)</div>
<div class="line">[Monday 28 February 2011] [15:07:37] &lt;pieterh&gt;        Guthur: it should IMO say &#8220;ZMQ_SUBSCRIBE&#8221; rather than &#8220;subscription strings&#8221; but that&#8217;s minor</div>
<div class="line">[Monday 28 February 2011] [15:08:59] &lt;pieterh&gt;        ZMQ_SUBSCRIBE, ZMQ_UNSUBSCRIBE, ZMQ_LINGER can afaik be set at any time</div>
<div class="line">[Monday 28 February 2011] [15:09:12] &lt;pieterh&gt;        not sure about ZMQ_RECONNECT_IVL</div>
<div class="line">[Monday 28 February 2011] [15:09:25] &lt;Guthur&gt; ok, I can post another update patch</div>
<div class="line">[Monday 28 February 2011] [15:09:37] &lt;Guthur&gt; if that&#8217;s ok</div>
<div class="line">[Monday 28 February 2011] [15:09:46] &lt;pieterh&gt;        we need El Sustrik&#8217;s formal confirmation with an &#8220;are you sure&#8221;, IMO</div>
<div class="line">[Monday 28 February 2011] [15:10:03] &lt;pieterh&gt;        I made an issue: <a class="reference external" href="https://github.com/zeromq/zeromq2/issues/173">https://github.com/zeromq/zeromq2/issues/173</a></div>
<div class="line">[Monday 28 February 2011] [15:10:12] &lt;Guthur&gt; hehe, yep that&#8217;s are very sensible idea</div>
<div class="line">[Monday 28 February 2011] [15:10:14] &lt;pieterh&gt;        there are a couple of fuzzy areas that cropped up</div>
<div class="line">[Monday 28 February 2011] [15:20:52] &lt;pieterh&gt;        omg, I&#8217;m reinventing AMQP for Ch4... :-/</div>
<div class="line">[Monday 28 February 2011] [15:21:17] &lt;pieterh&gt;        please shoot me now before this goes too far</div>
<div class="line">[Monday 28 February 2011] [15:24:32] &lt;Guthur&gt; at some point someone is bound to say &#8216;It would be nice if core had this&#8217;</div>
<div class="line">[Monday 28 February 2011] [15:24:38] &lt;Guthur&gt; and then that will be the end</div>
<div class="line">[Monday 28 February 2011] [15:24:47] &lt;pieterh&gt;        nah, it&#8217;s all just user-space patterns</div>
<div class="line">[Monday 28 February 2011] [15:25:11] &lt;pieterh&gt;        the key IMO is not even software, but documented protocols</div>
<div class="line">[Monday 28 February 2011] [15:25:41] &lt;Guthur&gt; is AMQP poorly documented?</div>
<div class="line">[Monday 28 February 2011] [15:25:57] &lt;Guthur&gt; I am not very familiar with it to be honest</div>
<div class="line">[Monday 28 February 2011] [15:26:12] &lt;pieterh&gt;        hmm, depends on the version of AMQP, there are quite a few</div>
<div class="line">[Monday 28 February 2011] [15:26:15] &lt;pieterh&gt;        on this page <a class="reference external" href="http://www.amqp.org/confluence/display/AMQP/AMQP+Specification">http://www.amqp.org/confluence/display/AMQP/AMQP+Specification</a></div>
<div class="line">[Monday 28 February 2011] [15:26:28] &lt;pieterh&gt;        only AMQP/0-8 and AMQP/0-9-1 are properly documented</div>
<div class="line">[Monday 28 February 2011] [15:27:06] &lt;pieterh&gt;        0-9 and 0-10 don&#8217;t even have dates in the document... very shoddy work</div>
<div class="line">[Monday 28 February 2011] [15:27:30] &lt;pieterh&gt;        every version is incompatible with every other version</div>
<div class="line">[Monday 28 February 2011] [15:27:36] &lt;pieterh&gt;        oh, don&#8217;t get me started :-)</div>
<div class="line">[Monday 28 February 2011] [15:28:22] &lt;Guthur&gt; I don&#8217;t think i&#8217;ll delve into it too deeply</div>
<div class="line">[Monday 28 February 2011] [15:28:35] &lt;Guthur&gt; I&#8217;ve enough on my plate without getting lost in AMQP</div>
<div class="line">[Monday 28 February 2011] [15:28:37] &lt;pieterh&gt;        :-)</div>
<div class="line">[Monday 28 February 2011] [15:51:27] &lt;cremes&gt; pieterh: can you confirm this leaks memory on your system?  <a class="reference external" href="https://g">https://g</a></div>
</div>
<p>ist.github.com/848007
| [Monday 28 February 2011] [15:51:36] &lt;cremes&gt; if so, i&#8217;ll open a ticket and attach it
| [Monday 28 February 2011] [15:51:58] &lt;sustrik&gt;        it&#8217;s only SUBSCRIBE and UNSUBSCRIBE that affect the connection after it is established
| [Monday 28 February 2011] [15:52:21] &lt;cremes&gt; sustrik: i think i <em>might</em> have found another leak with PUB
| [Monday 28 February 2011] [15:52:29] &lt;sustrik&gt;        yes?
| [Monday 28 February 2011] [15:52:37] &lt;cremes&gt; see this gist:  <a class="reference external" href="https://gist.github.com/848007">https://gist.github.com/848007</a>
| [Monday 28 February 2011] [15:52:44] &lt;pieterh&gt;        cremes: nope
| [Monday 28 February 2011] [15:52:46] &lt;cremes&gt; if someone can confirm it leaks on their system, i&#8217;ll open a ticket
| [Monday 28 February 2011] [15:52:47] &lt;pieterh&gt;        it does not leak
| [Monday 28 February 2011] [15:52:54] &lt;pieterh&gt;        it does consume 300% CPU
| [Monday 28 February 2011] [15:53:11] &lt;pieterh&gt;        but memory usage is stable: &#8220;7867 ph        20   0  198m 1904 1148 S  312  0.0   1:09.50 leaker6   &#8221;
| [Monday 28 February 2011] [15:53:41] &lt;cremes&gt; hrmm...
| [Monday 28 February 2011] [15:53:52] &lt;pieterh&gt;        sustrik: I&#8217;ve tested LINGER and it definitely works after the connection is established
| [Monday 28 February 2011] [15:54:18] &lt;sustrik&gt;        aaaah
| [Monday 28 February 2011] [15:54:24] &lt;sustrik&gt;        i recall something like that dimly
| [Monday 28 February 2011] [15:54:34] &lt;Ergo^&gt;  stupid question, how shuold i stop my python scripts that use pyzmq ? ctl+c doesnt seem to kill them nicely
| [Monday 28 February 2011] [15:54:34] &lt;sustrik&gt;        let me check the code
| [Monday 28 February 2011] [15:54:56] &lt;pieterh&gt;        Ergo^: are you on the latest 0MQ?
| [Monday 28 February 2011] [15:55:36] &lt;Ergo^&gt;  2.0.10
| [Monday 28 February 2011] [15:56:11] &lt;pieterh&gt;        Ergo^: check the release notes, Ctrl-C was fixed but I don&#8217;t recall exactly what version
| [Monday 28 February 2011] [15:57:36] &lt;Ergo^&gt;  ok, can you clarify one thing for me? when i send() something its expected to be a string? so i should use json or other encapsulation that makes sense ?
| [Monday 28 February 2011] [15:59:08] &lt;cremes&gt; pieterh: ah! make a small change to that code and it will leak like a sieve
| [Monday 28 February 2011] [15:59:19] &lt;cremes&gt; change the number of client threads it spawn to something greater than 1
| [Monday 28 February 2011] [15:59:20] &lt;pieterh&gt;        cremes... put the &#8216;free&#8217; into comments?
| [Monday 28 February 2011] [15:59:24] &lt;pieterh&gt;        ah, will try
| [Monday 28 February 2011] [15:59:30] &lt;pieterh&gt;        Ergo^: did you read the Guide yet?
| [Monday 28 February 2011] [15:59:31] &lt;cremes&gt; i think it&#8217;s a race condition bug
| [Monday 28 February 2011] [15:59:46] &lt;Ergo^&gt;  pieterh, im just starting to dig into it
| [Monday 28 February 2011] [15:59:52] &lt;pieterh&gt;        cremes: I&#8217;ll spend 10 minutes on that, would you spend 10 minutes reviewing <a class="reference external" href="http://rfc.zeromq.org/spec:7">http://rfc.zeromq.org/spec:7</a>?
| [Monday 28 February 2011] [16:00:01] &lt;cremes&gt; my pleasure
| [Monday 28 February 2011] [16:00:20] &lt;pieterh&gt;        Ergo^: until you&#8217;ve read at least Ch1 and Ch2, you&#8217;re kind of in RTFM mode here
| [Monday 28 February 2011] [16:01:47] &lt;sustrik&gt;        ack: LINGER is socket-wide
| [Monday 28 February 2011] [16:01:53] &lt;sustrik&gt;        not connection-wide
| [Monday 28 February 2011] [16:02:10] &lt;pieterh&gt;        cremes: I hereby name this ship the &#8220;Leaky and Nasty&#8221;
| [Monday 28 February 2011] [16:02:11] &lt;pieterh&gt;        7993 ph        20   0 1853m 1.4g 1148 S  382 17.6   2:42.12 leaker6
| [Monday 28 February 2011] [16:02:18] &lt;cremes&gt; huzzah!
| [Monday 28 February 2011] [16:02:24] &lt;pieterh&gt;        That&#8217;s 1.4g of memory in about 30 seconds
| [Monday 28 February 2011] [16:02:29] &lt;pieterh&gt;        with 10 client threads
| [Monday 28 February 2011] [16:02:29] &lt;cremes&gt; i can email you guys a call-tree backtrace if that is helpful to you
| [Monday 28 February 2011] [16:02:38] &lt;cremes&gt; yeah, same thing happens on my box
| [Monday 28 February 2011] [16:03:10] &lt;pieterh&gt;        i love it when people send beautiful C code that reproduces problems...
| [Monday 28 February 2011] [16:03:27] &lt;cremes&gt; btw, it doesn&#8217;t leak as fast when the LINGER line is uncommented but it still leaks <em>rapidly</em>
| [Monday 28 February 2011] [16:10:23] &lt;sustrik&gt;        what unit is s_clock() in?
| [Monday 28 February 2011] [16:10:56] &lt;cremes&gt; milliseconds
| [Monday 28 February 2011] [16:11:59] &lt;mikko&gt;  success!
| [Monday 28 February 2011] [16:12:17] &lt;sustrik&gt;        cremes: ok, what about the cpu usage?
| [Monday 28 February 2011] [16:12:22] &lt;mikko&gt;  i managed to create pure shell-script that executes zeromq build and sends results over http to jenkins
| [Monday 28 February 2011] [16:12:31] &lt;sustrik&gt;        a peak followed by flat line?
| [Monday 28 February 2011] [16:12:34] &lt;pieterh&gt;        mikko: nice!
| [Monday 28 February 2011] [16:12:40] &lt;cremes&gt; sustrik: let me take a look
| [Monday 28 February 2011] [16:13:17] &lt;mikko&gt;  also, on the other news. i am bringing up powerpc (debian 6.0) build slave soon(ish)
| [Monday 28 February 2011] [16:13:32] &lt;cremes&gt; sustrik: did you update the code to use 2+ client threads? i see cpu spike and <em>stay</em> there
| [Monday 28 February 2011] [16:13:56] &lt;sustrik&gt;        mikko: btw, i&#8217;ve had a discussion with a guy who has problems building 0mq under mingw-win64
| [Monday 28 February 2011] [16:14:12] &lt;cremes&gt; sustrik: reload that gist if you like; i updated it to create 5 client threads which more readily show the leak
| [Monday 28 February 2011] [16:14:21] &lt;mikko&gt;  sustrik: what is the problem?
| [Monday 28 February 2011] [16:14:31] &lt;mikko&gt;  using mingw64?
| [Monday 28 February 2011] [16:14:42] &lt;sustrik&gt;        order of includes, presumably
| [Monday 28 February 2011] [16:14:43] &lt;sustrik&gt;        <a class="reference external" href="https://github.com/zeromq/zeromq2/issues/#issue/60">https://github.com/zeromq/zeromq2/issues/#issue/60</a>
| [Monday 28 February 2011] [16:15:09] &lt;sustrik&gt;        i just though it can possibly make sense to add that to builds
| [Monday 28 February 2011] [16:15:37] &lt;sustrik&gt;        cremes: ok, so it&#8217;s processing something
| [Monday 28 February 2011] [16:15:50] &lt;mikko&gt;  sustrik: the current cluster is 32bit hardware
| [Monday 28 February 2011] [16:15:52] &lt;sustrik&gt;        that definitely looks like a bug
| [Monday 28 February 2011] [16:15:55] &lt;mikko&gt;  that&#8217;s slightly problematic
| [Monday 28 February 2011] [16:16:09] &lt;mikko&gt;  would need a win64 box (i presume)
| [Monday 28 February 2011] [16:16:13] &lt;sustrik&gt;        ah, i though it&#8217;s a cross-compile
| [Monday 28 February 2011] [16:16:20] &lt;mikko&gt;  or does the cross-compile work on 32bit?
| [Monday 28 February 2011] [16:16:21] &lt;sustrik&gt;        never mind
| [Monday 28 February 2011] [16:16:29] &lt;sustrik&gt;        no idea
| [Monday 28 February 2011] [16:16:33] &lt;sustrik&gt;        check the issue
| [Monday 28 February 2011] [16:16:34] &lt;mikko&gt;  can&#8217;t do &#8216;make check&#8217; without win64
| [Monday 28 February 2011] [16:16:37] &lt;mikko&gt;  i can add build
| [Monday 28 February 2011] [16:16:46] &lt;sustrik&gt;        mikko: spot on
| [Monday 28 February 2011] [16:16:56] &lt;sustrik&gt;        i forgot about the tests
| [Monday 28 February 2011] [16:17:10] &lt;cremes&gt; sustrik: yes, i agree; i changed the publish interval to 500ms and cpu remains high
| [Monday 28 February 2011] [16:17:18] &lt;cremes&gt; sustrik: whatever it is processing, it&#8217;s stuck
| [Monday 28 February 2011] [16:17:23] &lt;sustrik&gt;        right
| [Monday 28 February 2011] [16:17:39] &lt;cremes&gt; sustrik: i can send you the call-tree for the code that is allocating (and holding onto) all of this memory if that&#8217;s helpful
| [Monday 28 February 2011] [16:17:52] &lt;pieterh&gt;        cremes: I think I see the problem
| [Monday 28 February 2011] [16:17:54] &lt;sustrik&gt;        yes, please
| [Monday 28 February 2011] [16:18:05] &lt;pieterh&gt;        the client is never pausing for breath
| [Monday 28 February 2011] [16:18:18] &lt;sustrik&gt;        it&#8217;s not, but it&#8217;s time-limited
| [Monday 28 February 2011] [16:18:18] &lt;pieterh&gt;        server can&#8217;t keep up
| [Monday 28 February 2011] [16:18:30] &lt;sustrik&gt;        so it should send for 200ms
| [Monday 28 February 2011] [16:18:32] &lt;pieterh&gt;        let me set a HWM and do small sleep in the client after closing a socket...
| [Monday 28 February 2011] [16:18:32] &lt;sustrik&gt;        then stop
| [Monday 28 February 2011] [16:18:50] &lt;pieterh&gt;        the clock in the client has no purpose at all afaics
| [Monday 28 February 2011] [16:20:14] &lt;cremes&gt; ok, so a small sleep inside the publish loop fixes it
| [Monday 28 February 2011] [16:20:28] &lt;cremes&gt; but shouldn&#8217;t it just drop those messages if they are in queue and undelivered?
| [Monday 28 February 2011] [16:20:37] &lt;cremes&gt; LINGER = 0 in this case
| [Monday 28 February 2011] [16:21:04] &lt;pieterh&gt;        cremes: if I sleep 1 second after each publish burst, client memory usage is flat
| [Monday 28 February 2011] [16:21:27] &lt;pieterh&gt;        they are sent to publisher before you close the socket
| [Monday 28 February 2011] [16:21:45] &lt;pieterh&gt;        the memory consumption is in the server queue
| [Monday 28 February 2011] [16:22:05] &lt;cremes&gt; hmmm, i can believe that
| [Monday 28 February 2011] [16:22:35] &lt;sustrik&gt;        2 producers are definitely going to overload one consumer
| [Monday 28 February 2011] [16:22:42] &lt;pieterh&gt;        hmm, indeed, I set 10k HWM ons server socket, still runs out of memory
| [Monday 28 February 2011] [16:22:51] &lt;sustrik&gt;        you have to set HWM to make excess messages be dropped
| [Monday 28 February 2011] [16:22:56] &lt;pieterh&gt;        setting 10K HWM on client socket AND sleeping in between bursts, it&#8217;s ok
| [Monday 28 February 2011] [16:23:15] &lt;sustrik&gt;        what about HWM on both sender and receiver?
| [Monday 28 February 2011] [16:23:17] &lt;pieterh&gt;        cremes: ah...
| [Monday 28 February 2011] [16:23:24] &lt;pieterh&gt;        LINGER is only executed at zmq_term time!
| [Monday 28 February 2011] [16:24:06] &lt;sustrik&gt;        zmq_close() time, to be precise
| [Monday 28 February 2011] [16:24:41] &lt;pieterh&gt;        bleh, you&#8217;re right, and doing init/term in teh loop makes no difference
| [Monday 28 February 2011] [16:25:10] &lt;pieterh&gt;        cremes: you always find the weird cases... :-)
| [Monday 28 February 2011] [16:25:14] &lt;sustrik&gt;        have you tried with HWM on both sides?
| [Monday 28 February 2011] [16:25:33] &lt;pieterh&gt;        have tried on either side, no difference
| [Monday 28 February 2011] [16:25:35] &lt;cremes&gt; i didn&#8217;t think HWM had any effect on a SUB socket...?
| [Monday 28 February 2011] [16:25:45] &lt;sustrik&gt;        i meant <em>both</em>
| [Monday 28 February 2011] [16:25:51] &lt;sustrik&gt;        not either
| [Monday 28 February 2011] [16:25:53]   * pieterh will now try <em>both</em>
| [Monday 28 February 2011] [16:26:04] &lt;sustrik&gt;        cremes: it does
| [Monday 28 February 2011] [16:26:25] &lt;sustrik&gt;        it specifies how many messages can be buffered before 0mq starts dropping them
| [Monday 28 February 2011] [16:26:43] &lt;pieterh&gt;        sustrik: either, both, makes no visible difference
| [Monday 28 February 2011] [16:26:59] &lt;sustrik&gt;        ok, that looks like a buf
| [Monday 28 February 2011] [16:27:01] &lt;sustrik&gt;        bug
| [Monday 28 February 2011] [16:27:15] &lt;cremes&gt; on the zmq_socket() man page, it says N/A for HWM on a SUB socket
| [Monday 28 February 2011] [16:27:23] &lt;sustrik&gt;        oh
| [Monday 28 February 2011] [16:27:27] &lt;sustrik&gt;        i see
| [Monday 28 February 2011] [16:27:36] &lt;pieterh&gt;        the only thing that seems to work is a long (1 second) sleep in the client loop
| [Monday 28 February 2011] [16:27:46] &lt;sustrik&gt;        the clients are creating new connections all the time
| [Monday 28 February 2011] [16:27:51] &lt;cremes&gt; sustrik: right
| [Monday 28 February 2011] [16:27:59] &lt;pieterh&gt;        cremes: yeah, I remember that, it&#8217;s a bug, no?
| [Monday 28 February 2011] [16:28:04] &lt;sustrik&gt;        meaning that the server creates a new buffer each time
| [Monday 28 February 2011] [16:28:11] &lt;sustrik&gt;        each buffer is limited by HWM
| [Monday 28 February 2011] [16:28:22] &lt;sustrik&gt;        but the number of buffers is unlimited
| [Monday 28 February 2011] [16:28:26] &lt;Ergo^&gt;  there is something taht is unclear to me with pyzmq and send_json - when i use that function i understand i lose the ability to set &#8220;topic&#8221; i want to subscribe to ?
| [Monday 28 February 2011] [16:29:22] &lt;sustrik&gt;        there should be MAX_CONNECTIONS socket options...
| [Monday 28 February 2011] [16:29:27] &lt;sustrik&gt;        option*
| [Monday 28 February 2011] [16:29:31] &lt;cremes&gt; that buffer should be dropped when zmq_close() is called so it should catch up, right?
| [Monday 28 February 2011] [16:29:37] &lt;Guthur&gt; what is expected to happen if you poll before TCP sockets are fully connected?
| [Monday 28 February 2011] [16:29:51] &lt;sustrik&gt;        cremes: the buffer is dropped on the client side
| [Monday 28 February 2011] [16:30:07] &lt;sustrik&gt;        the server side buffer remains untill all the messages are read from it
| [Monday 28 February 2011] [16:30:09] &lt;cremes&gt; sustrik: i thought zmq_connect() is what created the buffer
| [Monday 28 February 2011] [16:30:14] &lt;pieterh&gt;        Guthur: nothing in particular?
| [Monday 28 February 2011] [16:30:18] &lt;cremes&gt; ok, right
| [Monday 28 February 2011] [16:30:23] &lt;sustrik&gt;        cremes: yes
| [Monday 28 February 2011] [16:30:32] &lt;pieterh&gt;        sustrik: yes, but are there multiple buffers at the server side?
| [Monday 28 February 2011] [16:30:48] &lt;sustrik&gt;        but the server side buffer remains in place while there are messages in it
| [Monday 28 February 2011] [16:31:03] &lt;sustrik&gt;        yes, one buffer per connection
| [Monday 28 February 2011] [16:31:16] &lt;pieterh&gt;        it&#8217;s N client-side buffers (that should be destroyed by close + LINGER=0) + 1 server-side buffer
| [Monday 28 February 2011] [16:31:32] &lt;Guthur&gt; pieterh, I&#8217;m getting strange behaviour on POSIX OSs (linux and OSX) with polling with CLRZMQ2
| [Monday 28 February 2011] [16:31:33] &lt;pieterh&gt;        setting HWM on sub socket (server) makes no difference
| [Monday 28 February 2011] [16:31:45] &lt;pieterh&gt;        Guthur: &#8216;strange&#8217; = ?
| [Monday 28 February 2011] [16:31:58] &lt;sustrik&gt;        the socket on the server side is never closed
| [Monday 28 February 2011] [16:32:04] &lt;sustrik&gt;        so the buffers remain
| [Monday 28 February 2011] [16:32:06] &lt;Guthur&gt; pieterh, well if I don&#8217;t delay the polling ever so slightly it throws an exception
| [Monday 28 February 2011] [16:32:18] &lt;pieterh&gt;        sustrik... where is that 1.4Gb of memory sitting then?
| [Monday 28 February 2011] [16:32:23] &lt;Guthur&gt; and a users seems to be getting similar problems on OSX
| [Monday 28 February 2011] [16:32:28] &lt;Guthur&gt; user*
| [Monday 28 February 2011] [16:32:32] &lt;sustrik&gt;        lot of buffers in the server socket
| [Monday 28 February 2011] [16:32:50] &lt;sustrik&gt;        they are gradually being emptied and deallocated
| [Monday 28 February 2011] [16:32:59] &lt;Guthur&gt; same code works on windows fine though
| [Monday 28 February 2011] [16:33:00] &lt;sustrik&gt;        but client create new buffers even faster
| [Monday 28 February 2011] [16:33:04] &lt;Guthur&gt; without the delay
| [Monday 28 February 2011] [16:33:06] &lt;mikko&gt;  <a class="reference external" href="http://johanharjono.com/archives/633">http://johanharjono.com/archives/633</a>
| [Monday 28 February 2011] [16:33:16] &lt;mikko&gt;  installation instructions missing something?
| [Monday 28 February 2011] [16:33:16] &lt;pieterh&gt;        and HWM is for each buffer independently... not the socket as such
| [Monday 28 February 2011] [16:33:18] &lt;Ergo^&gt;  am i correct about zeromq &#8220;extensions&#8221; ?
| [Monday 28 February 2011] [16:33:24] &lt;Ergo^&gt;  for python that is ?
| [Monday 28 February 2011] [16:33:32] &lt;pieterh&gt;        Guthur: no idea, we&#8217;d need some test code that reproduces it
| [Monday 28 February 2011] [16:33:45] &lt;sustrik&gt;        yes, HWM is same as SO_SNDBUF and SO_RCVBUF
| [Monday 28 February 2011] [16:33:47] &lt;sustrik&gt;        local
| [Monday 28 February 2011] [16:34:09] &lt;sustrik&gt;        doesn&#8217;t affect the peer
| [Monday 28 February 2011] [16:34:27] &lt;Guthur&gt; it&#8217;s all related to this issue: <a class="reference external" href="https://github.com/zeromq/clrzmq2/issues/13">https://github.com/zeromq/clrzmq2/issues/13</a>
| [Monday 28 February 2011] [16:34:32] &lt;pieterh&gt;        cremes: so what did you not know that led you to think this could work?
| [Monday 28 February 2011] [16:35:47] &lt;cremes&gt; pieterh: i saw another resource leak and followed it back to the PUB socket
| [Monday 28 February 2011] [16:36:08] &lt;Guthur&gt; i do notice that if I place it in a try block it also works, I put this down to the fact a try block will possibly delay the polling ever so slightly
| [Monday 28 February 2011] [16:36:09] &lt;cremes&gt; i&#8217;ll have to look and see if i am overrunning the SUB socket on the other side like in this example
| [Monday 28 February 2011] [16:36:21] &lt;pieterh&gt;        seems like that opening/closing the client sockets each time is the cause
| [Monday 28 February 2011] [16:36:28] &lt;sustrik&gt;        this is a problem i wanted to address for a long time but never quite get to do it
| [Monday 28 February 2011] [16:36:39] &lt;pieterh&gt;        Guthur: I can&#8217;t really help, have no idea what the exception could be or why
| [Monday 28 February 2011] [16:36:52] &lt;sustrik&gt;        there should be a socket option limiting the max number of concurrent connecitons
| [Monday 28 February 2011] [16:37:13] &lt;peter_NOrth&gt;    is nial dalton on this IRC ever?
| [Monday 28 February 2011] [16:37:16] &lt;pieterh&gt;        sustrik: anti-DoS protection
| [Monday 28 February 2011] [16:37:25] &lt;sustrik&gt;        exactly
| [Monday 28 February 2011] [16:37:41] &lt;pieterh&gt;        useful, but here we have a problem of documentation IMO
| [Monday 28 February 2011] [16:37:50] &lt;pieterh&gt;        or something
| [Monday 28 February 2011] [16:38:34] &lt;sustrik&gt;        possibly
| [Monday 28 February 2011] [16:38:43] &lt;pieterh&gt;        it&#8217;s unclear how HWM and LINGER help here
| [Monday 28 February 2011] [16:38:48] &lt;pieterh&gt;        (in fact they don&#8217;t)
| [Monday 28 February 2011] [16:38:52] &lt;sustrik&gt;        LINGER is irrelevant
| [Monday 28 February 2011] [16:39:04] &lt;sustrik&gt;        because it affects the send side
| [Monday 28 February 2011] [16:39:10] &lt;sustrik&gt;        and the problem is on recv side
| [Monday 28 February 2011] [16:39:18] &lt;pieterh&gt;        yes, but that&#8217;s not obvious
| [Monday 28 February 2011] [16:39:33] &lt;sustrik&gt;        HWM would help in combination with MAX_CONNECTIONS
| [Monday 28 February 2011] [16:39:50] &lt;sustrik&gt;        MAX_CONNECTION * HWM = max number of messages queued
| [Monday 28 February 2011] [16:39:52] &lt;pieterh&gt;        possibly HWM affecting socket rather than each buffer
| [Monday 28 February 2011] [16:39:56] &lt;pieterh&gt;        ah, yes
| [Monday 28 February 2011] [16:40:02] &lt;sustrik&gt;        * MAX_MSG_SIZE = max memory used
| [Monday 28 February 2011] [16:40:13] &lt;pieterh&gt;        ...calculating...
| [Monday 28 February 2011] [16:40:18] &lt;pieterh&gt;        102523.2231GB
| [Monday 28 February 2011] [16:40:23] &lt;pieterh&gt;        yeah, that&#8217;ll do
| [Monday 28 February 2011] [16:41:31] &lt;pieterh&gt;        sustrik: why not add MAX_CONNECTIONS and MAX_MSG_SIZE to the 3.0 roadmap?
| [Monday 28 February 2011] [16:41:37] &lt;pieterh&gt;        they are excellent ideas
| [Monday 28 February 2011] [16:41:56] &lt;Guthur&gt; pieterh, errno 4 mean anything?
| [Monday 28 February 2011] [16:42:06] &lt;pieterh&gt;        documenting them will perhaps give someone the incentive to go make the patch
| [Monday 28 February 2011] [16:42:11] &lt;sustrik&gt;        it can be added to 2.x
| [Monday 28 February 2011] [16:42:16] &lt;NoToes&gt; Hi Guther, I&#8217;m &#8220;johndeko&#8221;. So you&#8217;ve managed to reproduce the poll timing issue? If so I wont bother to reproduce it outside of Unity.
| [Monday 28 February 2011] [16:42:20] &lt;sustrik&gt;        no backward compatibility problem
| [Monday 28 February 2011] [16:42:26] &lt;pieterh&gt;        sustrik: sure
| [Monday 28 February 2011] [16:42:31] &lt;pieterh&gt;        we have a 2.2 roadmap page?
| [Monday 28 February 2011] [16:42:37] &lt;sustrik&gt;        nope
| [Monday 28 February 2011] [16:42:51] &lt;Guthur&gt; NoToes, I think so
| [Monday 28 February 2011] [16:42:59] &lt;Guthur&gt; very strange one though
| [Monday 28 February 2011] [16:43:10] &lt;pieterh&gt;        sustrik: ok, I&#8217;m going to make it, I assume?
| [Monday 28 February 2011] [16:43:29] &lt;sustrik&gt;        why not
| [Monday 28 February 2011] [16:43:32] &lt;Ergo^&gt;  sustrik, you are maintainer or pyzmq?
| [Monday 28 February 2011] [16:43:42] &lt;NoToes&gt; Sure is!
| [Monday 28 February 2011] [16:43:49] &lt;sustrik&gt;        no, i&#8217;m not
| [Monday 28 February 2011] [16:44:09] &lt;sustrik&gt;        it&#8217;s either brian granger or minrk
| [Monday 28 February 2011] [16:44:15] &lt;Ergo^&gt;  if i use this method <a class="reference external" href="http://zeromq.github.com/pyzmq/api/generated/zmq.core.socket.html#zmq.core.socket.Socket.send_json">http://zeromq.github.com/pyzmq/api/generated/zmq.core.socket.html#zmq.core.socket.Socket.send_json</a>
| [Monday 28 February 2011] [16:44:29] &lt;Ergo^&gt;  i cant use topic filtering at same time ?
| [Monday 28 February 2011] [16:44:40]   * sustrik has no pyzmq experience, sorry
| [Monday 28 February 2011] [16:44:55] &lt;Guthur&gt; NoToes, a sleep of at least 100 milliseconds before starting to poll and there is no problem
| [Monday 28 February 2011] [16:45:08] &lt;Guthur&gt; but I don&#8217;t think that&#8217;s really what you want to hear
| [Monday 28 February 2011] [16:45:14] &lt;Ergo^&gt;  it seems purely string based, but i dont see anything in the docs about setting possible topic when using send_json
| [Monday 28 February 2011] [16:45:29] &lt;pieterh&gt;        sustrik: ok, done, and I added the socket type renames since there was consensus on that
| [Monday 28 February 2011] [16:45:37] &lt;pieterh&gt;        oh, I can provide a patch for that already :-)
| [Monday 28 February 2011] [16:45:56] &lt;sustrik&gt;        what renames?
| [Monday 28 February 2011] [16:46:06] &lt;pieterh&gt;        :-)
| [Monday 28 February 2011] [16:46:09] &lt;Ergo^&gt;  can someone here confirm if im right or wrong? ;-)
| [Monday 28 February 2011] [16:46:14] &lt;pieterh&gt;        XREP -&gt; ROUTER, XREQ -&gt; DEALER
| [Monday 28 February 2011] [16:46:19] &lt;sustrik&gt;        yuck
| [Monday 28 February 2011] [16:46:23] &lt;NoToes&gt; Guther, not really. It doesn&#8217;t fill me with certainty and makes fast updates impossible.
| [Monday 28 February 2011] [16:46:27] &lt;Guthur&gt; here it&#8217;s an interrupted syscall
| [Monday 28 February 2011] [16:46:31] &lt;pieterh&gt;        yeah, you should have said that when it was discussed on zeromq-dev
| [Monday 28 February 2011] [16:46:44] &lt;pieterh&gt;        les absents on toujours tort
| [Monday 28 February 2011] [16:46:44] &lt;Guthur&gt; that&#8217;s the exception
| [Monday 28 February 2011] [16:46:51] &lt;Guthur&gt; NoToes, ^
| [Monday 28 February 2011] [16:46:52] &lt;sustrik&gt;        ok, good
| [Monday 28 February 2011] [16:47:01] &lt;sustrik&gt;        i&#8217;ll add it as an alias
| [Monday 28 February 2011] [16:47:40] &lt;pieterh&gt;        sustrik: thread has title &#8220;[0MQ/3.0] discuss: renameXREPtoROUTER&#8221;
| [Monday 28 February 2011] [16:47:55] &lt;pieterh&gt;        but we can introduce the name change in 2.2 as we did for PUSH/PULL
| [Monday 28 February 2011] [16:48:03] &lt;cremes&gt; Ergo^: if the python 0mq interface allows you to send multipart messages, make sure the topic is the first
| [Monday 28 February 2011] [16:48:09] &lt;Guthur&gt; NoToes, it maybe that you only have to do this after first connecting, and then things will be fine unless you have to reconnect again, that&#8217;s a guess though
| [Monday 28 February 2011] [16:48:12] &lt;cremes&gt; Ergo^: part and your json-encoded string is the second part
| [Monday 28 February 2011] [16:48:28] &lt;cremes&gt; Ergo^: don&#8217;t be overly concerned that the api doesn&#8217;t have a single call that does everything you want
| [Monday 28 February 2011] [16:48:44] &lt;Guthur&gt; NoToes, I have not got the sleep in the polling loop, rather just before it, does this work for you?
| [Monday 28 February 2011] [16:48:48] &lt;cremes&gt; Ergo^: you can build your own convenience method from the methods already present, right?
| [Monday 28 February 2011] [16:48:51] &lt;NoToes&gt; Guthur, well easy enough for me to test.
| [Monday 28 February 2011] [16:49:05] &lt;NoToes&gt; Guthur, I&#8217;ll try it out.
| [Monday 28 February 2011] [16:49:16] &lt;Guthur&gt; cool
| [Monday 28 February 2011] [16:49:37] &lt;Ergo^&gt;  cremes,  i can build the messages on my own by doing something like &#8216;%s %s&#8217; % (topic,json,), its just that api of pyzmq seems missing some functionalities
| [Monday 28 February 2011] [16:50:00] &lt;Guthur&gt; sustrik, any idea why we would get an &#8220;Interrupted system call&#8221; error when polling to quickly after a TCP socket connection
| [Monday 28 February 2011] [16:50:09] &lt;cremes&gt; Ergo^: i disagree; i don&#8217;t think the api should have any explicit method dealing with json
| [Monday 28 February 2011] [16:50:24] &lt;cremes&gt; Ergo^: why not a different serialization format? what is json&#8217;s connection to 0mq?
| [Monday 28 February 2011] [16:50:26] &lt;Ergo^&gt;  cremes, well thats my point - it does
| [Monday 28 February 2011] [16:50:43] &lt;Ergo^&gt;  but it doesnt do it to full extent
| [Monday 28 February 2011] [16:51:24] &lt;cremes&gt; Ergo^: i guess i fail to see the problem here; you can easily accomplish what you want with a 3-line method
| [Monday 28 February 2011] [16:51:27] &lt;Ergo^&gt;  cremes, its just a format as good as any - its interoperable for sure, thats why i was thinking about using it - and i can get normal data structures &#8220;on other side&#8221;
| [Monday 28 February 2011] [16:51:39] &lt;cremes&gt; Ergo^: why does it matter that the api doesn&#8217;t already have it? write it and send in a patch...?
| [Monday 28 February 2011] [16:51:48] &lt;sustrik&gt;        Guthur: presumably, there&#8217;s a signal generated somewhere
| [Monday 28 February 2011] [16:52:08] &lt;mikko&gt;  sustrik: <a class="reference external" href="http://build.zero.mq/job/ZeroMQ2-core-master_mingw64/5/console">http://build.zero.mq/job/ZeroMQ2-core-master_mingw64/5/console</a>
| [Monday 28 February 2011] [16:52:13] &lt;Ergo^&gt;  cremes, just wanted to make sure i havent missed anything obvious, thus asking here ;-) nothing more
| [Monday 28 February 2011] [16:52:13] &lt;mikko&gt;  mingw64 cross compile running
| [Monday 28 February 2011] [16:52:20] &lt;mikko&gt;  well, was running
| [Monday 28 February 2011] [16:52:23] &lt;sustrik&gt;        wow, that was quick
| [Monday 28 February 2011] [16:52:37] &lt;cremes&gt; Ergo^: ok!
| [Monday 28 February 2011] [16:53:05] &lt;mikko&gt;  sustrik: not sure if that is my environment or something else
| [Monday 28 February 2011] [16:53:34] &lt;sustrik&gt;        no windows.h
| [Monday 28 February 2011] [16:53:36] &lt;sustrik&gt;        strange
| [Monday 28 February 2011] [16:53:47] &lt;mikko&gt;  might be something odd with the build i guess
| [Monday 28 February 2011] [16:54:06] &lt;mikko&gt;  ./configure &#8211;host=amd64-mingw32msvc &#8211;target=mingw64
| [Monday 28 February 2011] [16:54:14] &lt;mikko&gt;  do i need anything else?
| [Monday 28 February 2011] [16:55:30] &lt;sustrik&gt;        no idea
| [Monday 28 February 2011] [16:55:36] &lt;NoToes&gt; Guthur, no luck with a sleep before the poll loop.
| [Monday 28 February 2011] [16:55:42] &lt;sustrik&gt;        try asking the guy who filled the issue
| [Monday 28 February 2011] [16:55:45] &lt;mikko&gt;  ok, will investigate
| [Monday 28 February 2011] [16:55:47] &lt;sustrik&gt;        he&#8217;s pretty responsive
| [Monday 28 February 2011] [16:56:10] &lt;cremes&gt; sustrik: what would you say is holding onto the memory if you saw this callstack?  <a class="reference external" href="https://gist.github.com/848123">https://gist.github.com/848123</a>
| [Monday 28 February 2011] [16:56:38] &lt;sustrik&gt;        that are messages
| [Monday 28 February 2011] [16:56:48] &lt;cremes&gt; are they unsent and in a queue?
| [Monday 28 February 2011] [16:57:28] &lt;sustrik&gt;        they are received by I/O thread and waiting to be read by the application
| [Monday 28 February 2011] [16:58:12] &lt;cremes&gt; sustrik: i don&#8217;t understand that... it&#8217;s from a PUB socket, so what is waiting to read it?
| [Monday 28 February 2011] [16:58:30] &lt;sustrik&gt;        sorry?
| [Monday 28 February 2011] [16:58:51] &lt;sustrik&gt;        I/O thread reads messages from TCP connections and buffers them
| [Monday 28 February 2011] [16:58:56] &lt;sustrik&gt;        application reads them
| [Monday 28 February 2011] [16:59:06] &lt;cremes&gt; that call-tree is for a pub socket that is sending messages
| [Monday 28 February 2011] [16:59:26] &lt;cremes&gt; i don&#8217;t understand why you say the i/o thread has received them and is waiting for the application to read them
| [Monday 28 February 2011] [16:59:32] &lt;sustrik&gt;        oops
| [Monday 28 February 2011] [16:59:36] &lt;cremes&gt; i though pub was broadcast, fire-and-forget
| [Monday 28 February 2011] [16:59:37] &lt;sustrik&gt;        missed the first line
| [Monday 28 February 2011] [16:59:54] &lt;sustrik&gt;        it is
| [Monday 28 February 2011] [17:00:08] &lt;sustrik&gt;        but there&#8217;s some reliability built in
| [Monday 28 February 2011] [17:00:14] &lt;cremes&gt; pieterh: sent you some feedback on that rfc
| [Monday 28 February 2011] [17:00:28] &lt;sustrik&gt;        namely, up to HWM messages are buffered before 0mq starts dropping them
| [Monday 28 February 2011] [17:00:28] &lt;pieterh&gt;        cremes: our email server is dead atm
| [Monday 28 February 2011] [17:00:38] &lt;cremes&gt; ok, so what are the conditions that will cause pub to hang onto those messages?
| [Monday 28 February 2011] [17:00:46] &lt;sustrik&gt;        by default, HWM=infinite
| [Monday 28 February 2011] [17:00:49] &lt;pieterh&gt;        cremes: could you resend to <a class="reference external" href="mailto:pieterh&#37;&#52;&#48;gmail&#46;com">pieterh<span>&#64;</span>gmail<span>&#46;</span>com</a>, thanks
| [Monday 28 February 2011] [17:00:51] &lt;cremes&gt; pieterh: that explains why the email bounced!
| [Monday 28 February 2011] [17:01:02] &lt;pieterh&gt;        bounced? that&#8217;s not nice... rats...
| [Monday 28 February 2011] [17:01:18]   * pieterh hopes our sysadmin wakes up soon
| [Monday 28 February 2011] [17:01:40] &lt;NoToes&gt; Guthur, adding a System.GC.Collect() instead of a sleep also works.
| [Monday 28 February 2011] [17:01:51] &lt;cremes&gt; sustrik: ok, so they are in queue because there is a slow subscriber somewhere; is that right?
| [Monday 28 February 2011] [17:02:11] &lt;Guthur&gt; NoToes, that&#8217;s even weirder
| [Monday 28 February 2011] [17:02:24] &lt;sustrik&gt;        yes
| [Monday 28 February 2011] [17:02:28] &lt;cremes&gt; ok
| [Monday 28 February 2011] [17:02:32] &lt;sustrik&gt;        to guard against slow consumers
| [Monday 28 February 2011] [17:02:43] &lt;Guthur&gt; NoToes, but the sleep did not work for you?
| [Monday 28 February 2011] [17:02:45] &lt;NoToes&gt; Guthur, doesn&#8217;t say much if just takes up some time.
| [Monday 28 February 2011] [17:02:45] &lt;sustrik&gt;        all buffering has to have upper limit
| [Monday 28 February 2011] [17:02:51] &lt;cremes&gt; and if there are <em>no</em> subscribers, it should just drop those messages, yes?
| [Monday 28 February 2011] [17:03:05] &lt;sustrik&gt;        so we need at least 3 options: HWM, MAX_CONNECTIONS, and MAX_SIZE
| [Monday 28 February 2011] [17:03:14] &lt;sustrik&gt;        cremes: yes
| [Monday 28 February 2011] [17:03:18] &lt;cremes&gt; cool
| [Monday 28 February 2011] [17:03:29] &lt;cremes&gt; i must have a slow subscriber somewhere.... damn it
| [Monday 28 February 2011] [17:03:54] &lt;sustrik&gt;        well, if you are doing something like the example posted
| [Monday 28 February 2011] [17:04:16] &lt;sustrik&gt;        i.e. publishing at full speed from serveral apps to a single app
| [Monday 28 February 2011] [17:04:30] &lt;sustrik&gt;        it&#8217;s just going to blow up
| [Monday 28 February 2011] [17:04:51] &lt;peter_NOrth&gt;    dalton
| [Monday 28 February 2011] [17:04:57] &lt;cremes&gt; i don&#8217;t think i have that configuration though... i&#8217;ll have to dig into this; thanks for your help
| [Monday 28 February 2011] [17:05:10] &lt;sustrik&gt;        you are welcome
| [Monday 28 February 2011] [17:08:57] &lt;Guthur&gt; NoToes, crumbs, I can not replicate anymore
| [Monday 28 February 2011] [17:09:04] &lt;Guthur&gt; it&#8217;s just working now, grrr
| [Monday 28 February 2011] [17:11:21] &lt;NoToes&gt; Guthur, That&#8217;s timing bugs for you!
| [Monday 28 February 2011] [17:14:05] &lt;pieterh&gt;        cremes: thanks for the review, made changes
| [Monday 28 February 2011] [17:14:15] &lt;pieterh&gt;        could you send me that email bounce message so I can see the error?
| [Monday 28 February 2011] [17:15:03] &lt;cremes&gt; pieterh: it wasn&#8217;t a real bounce; the mail app refused to take a message to sustrik probably because it was too large
| [Monday 28 February 2011] [17:15:10] &lt;cremes&gt; pieterh: so... never mind!
| [Monday 28 February 2011] [17:15:13] &lt;pieterh&gt;        ok
| [Monday 28 February 2011] [17:19:58] &lt;pieterh&gt;        cremes: could you send me random something to <a class="reference external" href="mailto:ph&#37;&#52;&#48;imatix&#46;com">ph<span>&#64;</span>imatix<span>&#46;</span>com</a>?
| [Monday 28 February 2011] [17:20:11] &lt;pieterh&gt;        I&#8217;ve fixed our email server but need to test
| [Monday 28 February 2011] [17:20:17] &lt;NoToes&gt; Guthur, I missed your message. No putting a sleep before the loop, instead of in the poll loop didn&#8217;t work.
| [Monday 28 February 2011] [17:20:22] &lt;cremes&gt; pieterh: on its way
| [Monday 28 February 2011] [17:20:23] &lt;pieterh&gt;        zeromq-dev should be working again now
| [Monday 28 February 2011] [17:20:25] &lt;pieterh&gt;        thx!
| [Monday 28 February 2011] [17:20:51] &lt;Guthur&gt; NoToes, There is no error with you either?
| [Monday 28 February 2011] [17:21:10] &lt;NoToes&gt; Guthur, no error.
| [Monday 28 February 2011] [17:21:51] &lt;NoToes&gt; Guthur, zmq_poll just always returns 0.
| [Monday 28 February 2011] [17:21:52] &lt;pieterh&gt;        sustrik: email list is fixed
| [Monday 28 February 2011] [17:22:10] &lt;pieterh&gt;        messages will be coming in slowly as servers retry
| [Monday 28 February 2011] [17:22:17] &lt;Guthur&gt; NoToes, it seems as if I am getting a slightly different issue then
| [Monday 28 February 2011] [17:22:51] &lt;Guthur&gt; Mine returns errno 4, if there the slight delay before starting the polling loop
| [Monday 28 February 2011] [17:23:18] &lt;Guthur&gt; this translates to an &#8220;Interrupted system call&#8221;
| [Monday 28 February 2011] [17:25:52] &lt;NoToes&gt; Guthur, OK, different issue then.
| [Monday 28 February 2011] [17:26:16] &lt;Guthur&gt; which is doubly annoying, hehe
| [Monday 28 February 2011] [17:26:26] &lt;NoToes&gt; Guthur, I suppose I should try to reproduce this outside of Unity then.
| [Monday 28 February 2011] [17:26:56] &lt;Guthur&gt; NoToes, that would be helpful, and much appreciated if you could
| [Monday 28 February 2011] [17:35:26] &lt;Guthur&gt; is there any advisable action an app should take when getting EINTR while polling?
| [Monday 28 February 2011] [17:37:16] &lt;Guthur&gt; NoToes, I have found that if I catch that EINTR and then continue all is fine
| [Monday 28 February 2011] [17:37:46] &lt;Guthur&gt; OSX does signal things properly I assume, and unity isn&#8217;t suppressing them even, or something
| [Monday 28 February 2011] [17:38:04] &lt;Guthur&gt; I admit we are on the borders of my knowledge here
| [Monday 28 February 2011] [17:38:16] &lt;Guthur&gt; probably left the country to be honest
| [Monday 28 February 2011] [17:40:02] &lt;NoToes&gt; Guthur Unfortunately I&#8217;m new to OSX as well.Is EINTER a signal or a return code from zmq_recv?
| [Monday 28 February 2011] [17:41:17] &lt;Guthur&gt; <a class="reference external" href="http://api.zeromq.org/master:zmq-poll">http://api.zeromq.org/master:zmq-poll</a>
| [Monday 28 February 2011] [17:41:39] &lt;Guthur&gt; EINTR is returned if there is a signal
| [Monday 28 February 2011] [17:42:05] &lt;Guthur&gt; well not return actually, the errno is set
| [Monday 28 February 2011] [17:42:14] &lt;Guthur&gt; poll returns -1
| [Monday 28 February 2011] [17:42:18] &lt;NoToes&gt; Guthur, Ah OK.
| [Monday 28 February 2011] [17:43:22] &lt;Guthur&gt; I think the issue I have here in linux MONO is something I can&#8217;t really rectify, but is easily worked around
| [Monday 28 February 2011] [17:44:20] &lt;Guthur&gt; The OSX one is a little less clear
| [Monday 28 February 2011] [17:44:29] &lt;Guthur&gt; have you tried it outside Unity?
| [Monday 28 February 2011] [17:45:47] &lt;Ergo^&gt;  Assertion failed: !pgm_supported () (zmq.cpp:240) - im doing something naughty :-) any ideas ?
| [Monday 28 February 2011] [17:49:10] &lt;NoToes&gt; Guthur, I&#8217;m trying now...
| [Monday 28 February 2011] [17:53:53] &lt;NoToes&gt; Guthur, it&#8217;s working inside Unity now :(
| [Monday 28 February 2011] [17:55:39] &lt;Guthur&gt; I wonder if it&#8217;s a MONO issue
| [Monday 28 February 2011] [17:56:46] &lt;Guthur&gt; but that doesn&#8217;t really make much sense either, it&#8217;s only a relatively simple interop call
| [Monday 28 February 2011] [18:03:03] &lt;NoToes&gt; Guthur I don&#8217;t know enough about zmq to make sense of it. Is it possible that there is a shared native buffer referenced by multiple managed objects (or something like that)? Would explain why the running the GC helps and the timing issues.
| [Monday 28 February 2011] [18:05:54] &lt;Guthur&gt; NoToes, I&#8217;m looking through now
| [Monday 28 February 2011] [18:22:39] &lt;Guthur&gt; NoToes, Not seeing anything at the moment
| [Monday 28 February 2011] [18:22:56] &lt;pieterh&gt;        Ergo^_: build using &#8211;with-openpgm afir
| [Monday 28 February 2011] [18:23:18] &lt;Guthur&gt; it&#8217;s getting late here so i&#8217;ll probably get my head down soon, sorry we&#8217;ve been unable to get this sorted for you
| [Monday 28 February 2011] [18:23:30] &lt;Guthur&gt; hopefully we&#8217;ll get to the bottom of it eventually
| [Monday 28 February 2011] [18:23:32] &lt;Ergo^_&gt; pieterh, i just built 2.1.1 - and suddenly world is better ;-)
| [Monday 28 February 2011] [18:23:39] &lt;pieterh&gt;        :-)
| [Monday 28 February 2011] [18:24:22] &lt;NoToes&gt; Guthur, Thanks for all your help.
| [Monday 28 February 2011] [18:24:35] &lt;Guthur&gt; no probs
| [Monday 28 February 2011] [18:24:54] &lt;Guthur&gt; I might drop by the MONO channel tomorrow and see if I can get an clues
| [Monday 28 February 2011] [18:24:56] &lt;Guthur&gt; an/any
| [Monday 28 February 2011] [18:25:45] &lt;Guthur&gt; ok, it&#8217;s late, night all
| [Monday 28 February 2011] [19:45:54] &lt;cremes&gt; pieterh: https://github.com/zeromq/zeromq2/issues/174
| [Monday 28 February 2011] [19:46:06] &lt;cremes&gt; ha! i finally reproduced the condition i am seeing in my system
| [Monday 28 February 2011] [19:46:17] &lt;cremes&gt; there&#8217;s a bug with ZMQ_LINGER and zmq_connect()
| [Monday 28 February 2011] [19:46:37] &lt;cremes&gt; when ZMQ_LINGER = 0, memory allocated for zmq_connect() will <em>eventually</em> get released (it&#8217;s slow)
| [Monday 28 February 2011] [19:46:51] &lt;pieterh&gt;        cremes: ok, I&#8217;ll look at it tomorrow
| [Monday 28 February 2011] [19:46:52] &lt;cremes&gt; when ZMQ_LINGER &gt; 0, the memory alloc&#8217;ed by zmq_connect() is <em>never</em> released
| [Monday 28 February 2011] [19:47:11] &lt;cremes&gt; oh, you&#8217;re awake... i was just leaving a note for when you got up tomorrow
| [Monday 28 February 2011] [19:47:19] &lt;pieterh&gt;        hah, IRC is now or never
| [Monday 28 February 2011] [19:47:21] &lt;cremes&gt; it&#8217;s all documented in the issue
| [Monday 28 February 2011] [19:47:23] &lt;pieterh&gt;        otherwise, email
| [Monday 28 February 2011] [19:47:27] &lt;cremes&gt; heh
| [Monday 28 February 2011] [19:47:32] &lt;pieterh&gt;        i don&#8217;t usually read back the IRC logs
| [Monday 28 February 2011] [19:47:34] &lt;cremes&gt; get some reset already!
| [Monday 28 February 2011] [19:47:42] &lt;cremes&gt; oh, i think sustrik does
| [Monday 28 February 2011] [19:47:49] &lt;pieterh&gt;        yeah, there&#8217;s an Orval waiting for me
| [Monday 28 February 2011] [19:48:15] &lt;cremes&gt; ok, take it easy... no worries about this issue... it has an easy work around
| [Monday 28 February 2011] [19:48:28] &lt;pieterh&gt;        I almost have the client and worker ready for MDP
| [Monday 28 February 2011] [19:48:31] &lt;pieterh&gt;        heh :-)
| [Monday 28 February 2011] [19:48:44] &lt;pieterh&gt;        the broker will take a full day
| [Monday 28 February 2011] [19:48:49] &lt;cremes&gt; oh, very cool!
| [Monday 28 February 2011] [19:48:57] &lt;pieterh&gt;        after that, the Titanic pattern
| [Monday 28 February 2011] [19:49:00] &lt;cremes&gt; using xreq/xrep for the server or just the client?
| [Monday 28 February 2011] [19:49:12] &lt;cremes&gt; i assume it is...
| [Monday 28 February 2011] [19:49:14] &lt;pieterh&gt;        broker is xrep&lt;==&gt;xrep
| [Monday 28 February 2011] [19:49:17] &lt;pieterh&gt;        client is req
| [Monday 28 February 2011] [19:49:22] &lt;pieterh&gt;        worker is xreq
| [Monday 28 February 2011] [19:49:28] &lt;cremes&gt; oh, that&#8217;s right, one job at a time for the worker
| [Monday 28 February 2011] [19:49:37] &lt;cremes&gt; er, client
| [Monday 28 February 2011] [19:49:46] &lt;pieterh&gt;        I fixed the protocol so the broker can handle clients and workers on a single socket
| [Monday 28 February 2011] [19:50:11] &lt;pieterh&gt;        not quite sure how I make this though, it&#8217;ll need some of the containers from ZFL
| [Monday 28 February 2011] [19:50:50] &lt;pieterh&gt;        i&#8217;ll probably do as for zmsg, create a zlist and zhash clone of the ZFL classes
| [Monday 28 February 2011] [19:51:01] &lt;cremes&gt; yes, that makes sense
| [Monday 28 February 2011] [19:51:07] &lt;pieterh&gt;        yeah
| [Monday 28 February 2011] [19:51:14] &lt;cremes&gt; i&#8217;m sure you&#8217;ll have plenty of stuff to keep track of, e.g. routing envelopes
| [Monday 28 February 2011] [19:51:23] &lt;pieterh&gt;        nah, that&#8217;s all handled by zmsg
| [Monday 28 February 2011] [19:51:28] &lt;pieterh&gt;        pretty much
| [Monday 28 February 2011] [19:51:42] &lt;pieterh&gt;        the difficulty in C is no data structures to reuse
| [Monday 28 February 2011] [19:51:51] &lt;cremes&gt; really? i&#8217;ll have to look at that C a little closer... all of this bug repro work has blown some of the rust off my C skills
| [Monday 28 February 2011] [19:51:55] &lt;pieterh&gt;        it turns a 100-line example into a 500 line one
| [Monday 28 February 2011] [19:52:01] &lt;cremes&gt; yuck
| [Monday 28 February 2011] [19:52:17] &lt;pieterh&gt;        one really needs to create abstractions
| [Monday 28 February 2011] [19:53:09] &lt;cremes&gt; i agree; my ruby code has many layers of abstractions
| [Monday 28 February 2011] [19:53:20] &lt;cremes&gt; i wouldn&#8217;t be able to create some of the complex apps that i do without them
| [Monday 28 February 2011] [19:53:24] &lt;cremes&gt; my brain is too tiny
| [Monday 28 February 2011] [19:53:37] &lt;pieterh&gt;        mine is so small it regularly falls out of my ears
| [Monday 28 February 2011] [19:54:53] &lt;cremes&gt; heh
| [Monday 28 February 2011] [19:55:07] &lt;cremes&gt; ok, time for me to get back to work...
| [Monday 28 February 2011] [20:37:01] &lt;ctarmor&gt;        have anyone seen this error:  Exception in MSVCR100D - c0000005
| [Monday 28 February 2011] [20:37:38] &lt;ctarmor&gt;        It occurs during heave volume
| [Tuesday 01 February 2011] [02:23:00] &lt;stockMQ&gt;       but the i need to copy the protobuf message to a struct and write the struct to a file..
| [Tuesday 01 February 2011] [02:23:31] &lt;stockMQ&gt;       I need to do this because there are other applications consuming the file and they expect a struct
| [Tuesday 01 February 2011] [02:24:02] &lt;stockMQ&gt;       right now i copy each field of the message to the corresponding field of the buffer
| [Tuesday 01 February 2011] [02:24:22] &lt;stockMQ&gt;       Is this the right way or is there any other optimized way to go about with it
| [Tuesday 01 February 2011] [03:20:33] &lt;mikko&gt; stockMQ: are the other applications expecting a binary struct?
| [Tuesday 01 February 2011] [03:20:36] &lt;mikko&gt; stockMQ: sounds odd
| [Tuesday 01 February 2011] [03:25:28] &lt;stockMQ&gt;       yes.. they too are custom applications built in house but to change them is to be avoided
| [Tuesday 01 February 2011] [04:24:31] &lt;CIA-21&gt;        zeromq2: 03Martin Sustrik 07sub-forward * raddcc85 10/ devices/zmq_forwarder/zmq_forwarder.cpp :
| [Tuesday 01 February 2011] [04:24:32] &lt;CIA-21&gt;        zeromq2: Forwarder device uses XPUB and XSUB sockets.
| [Tuesday 01 February 2011] [04:24:32] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/eoHfSJ">http://bit.ly/eoHfSJ</a>
| [Tuesday 01 February 2011] [04:28:50] &lt;jugg&gt;  having a publisher that connects to an endpoint, how would I prevent messages from being queued if the endpoint has not yet been bound?  Set the publisher HWM to zero, and call zmq_send(noblock)?
| [Tuesday 01 February 2011] [04:32:04] &lt;sustrik&gt;       yes, use hwm
| [Tuesday 01 February 2011] [04:33:39] &lt;jugg&gt;  hmm, I guess HWM = 1, as 0 is no limit...
| [Tuesday 01 February 2011] [04:34:27] &lt;jugg&gt;  but that&#8217;ll queue a single message, no?
| [Tuesday 01 February 2011] [04:34:50] &lt;jugg&gt;  So a stale message will be delivered when the listener binds the endpoint.
| [Tuesday 01 February 2011] [04:57:40] &lt;sustrik&gt;       it that pub/sub?
| [Tuesday 01 February 2011] [05:06:18] &lt;ianbarber&gt;     potentially silly bug: if I destroy then recreate a sub socket with an identity too quickly I get an assert &#8220;Assertion failed: new_sndbuf &gt; old_sndbuf (mailbox.cpp:182)&#8221; from the publisher
| [Tuesday 01 February 2011] [05:06:51] &lt;ianbarber&gt;     this may not be something that is sensible to do, but i encountered it in a semi-real world usage (some prototype code)
| [Tuesday 01 February 2011] [05:12:40] &lt;CIA-21&gt;        zeromq2: 03Martin Sustrik 07sub-forward * rca34d2a 10/ (5 files):
| [Tuesday 01 February 2011] [05:12:40] &lt;CIA-21&gt;        zeromq2: Debug output for subscription forwarding.
| [Tuesday 01 February 2011] [05:12:40] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Martin Sustrik &lt;sustrik&#64;250bpm.com&gt; - http://bit.ly/fdwCNa
| [Tuesday 01 February 2011] [05:34:29] &lt;ianbarber&gt;     ah, it&#8217;s because the publisher thinks it has two sockets with the same identity connected at the same time. It would be nice to have that cause a problem on the client side, rather than the server side, but I don&#8217;t know if that&#8217;s doable
| [Tuesday 01 February 2011] [05:37:20] &lt;mikko&gt; i dont think two identities should assert
| [Tuesday 01 February 2011] [05:41:22] &lt;ianbarber&gt;     mikko: i haven&#8217;t made a testcase in C yet, but in PHP
| [Tuesday 01 February 2011] [05:42:09] &lt;ianbarber&gt;     https://gist.github.com/805688
| [Tuesday 01 February 2011] [05:43:43] &lt;ianbarber&gt;     if anything was going to assert, i&#8217;d much rather it be the client
| [Tuesday 01 February 2011] [05:43:58] &lt;ianbarber&gt;     but i think the best behavior would be a failed connect()
| [Tuesday 01 February 2011] [05:44:26] &lt;ianbarber&gt;     not sure how easy it is to compare a new identity against connected identities on connect though, from the pub side
| [Tuesday 01 February 2011] [05:47:09] &lt;ianbarber&gt;     ooh, if this works in c, this is worth a point in the 0mq game :)
| [Tuesday 01 February 2011] [05:53:38] &lt;ianbarber&gt;     same thing in C: https://gist.github.com/805701
| [Tuesday 01 February 2011] [05:57:04] &lt;ianbarber&gt;     yep, and if I split that into client server, it still happens
| [Tuesday 01 February 2011] [06:02:58] &lt;CIA-21&gt;        zeromq2: 03Martin Sustrik 07sub-forward * rcc7bed5 10/ (src/trie.cpp src/trie.hpp src/xsub.cpp):
| [Tuesday 01 February 2011] [06:02:58] &lt;CIA-21&gt;        zeromq2: Duplicate subscriptions are not forwarded by XSUB socket.
| [Tuesday 01 February 2011] [06:02:58] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Martin Sustrik &lt;sustrik&#64;250bpm.com&gt; - http://bit.ly/hGPp1V
| [Tuesday 01 February 2011] [06:24:54] &lt;suzan_shakya&gt;  Is it possible to have mulitple publisher with PUB/SUB ?
| [Tuesday 01 February 2011] [06:39:19] &lt;stockMQ&gt;        Hi..what would be the equivalent of  zmq_close (sender);     zmq_term (context);
| [Tuesday 01 February 2011] [06:39:22] &lt;stockMQ&gt;       in C++
| [Tuesday 01 February 2011] [06:40:26] &lt;mikko&gt; stockMQ: object going out of scope
| [Tuesday 01 February 2011] [06:40:34] &lt;mikko&gt; its called during destruction
| [Tuesday 01 February 2011] [06:41:15] &lt;stockMQ&gt;       ok..So in order to say premptively stop the socket for some time can i just pause the thread for the duration
| [Tuesday 01 February 2011] [10:40:21] &lt;stockMQ&gt;       Is there a way we can exit out of the blocking zmq_recv
| [Tuesday 01 February 2011] [10:42:11] &lt;sustrik&gt;       send it a message
| [Tuesday 01 February 2011] [10:44:57] &lt;stockMQ&gt;       The issue is I have a thread with basic while(1){zmq_recv }..Now in the Main UI thread I have a Disconnect button,clicking on which an event message is sent to the socket thread asking it to quit gracefully.But due to the blocking message of the socket thread that message is never read
| [Tuesday 01 February 2011] [10:45:43] &lt;sustrik&gt;       you have to poll on both sockets
| [Tuesday 01 February 2011] [10:45:50] &lt;sustrik&gt;       instead of recv()ing on one of them
| [Tuesday 01 February 2011] [10:46:56] &lt;stockMQ&gt;       Ohk.. you mean i can have one tcp main socket and apart from that inprc sockets for communication between Main UI thread and child UI thread
| [Tuesday 01 February 2011] [10:48:56] &lt;stockMQ&gt;       is that right
| [Tuesday 01 February 2011] [10:50:26] &lt;sustrik&gt;       yes
| [Tuesday 01 February 2011] [10:51:59] &lt;stockMQ&gt;       ok thanx
| [Tuesday 01 February 2011] [11:52:33] Notice  -NickServ- This nickname is registered. Please choose a different nickname, or identify via /msg NickServ identify &lt;password&gt;.
| [Tuesday 01 February 2011] [11:52:33] Notice  -NickServ- You are now identified for travlr.
| [Tuesday 01 February 2011] [12:31:15] Notice  -NickServ- travlr_ is not a registered nickname.
| [Tuesday 01 February 2011] [12:46:36] &lt;andrewvc&gt;      any ideas what broken pipe, nbytes != 1 errors are caused by?
| [Tuesday 01 February 2011] [12:50:32] &lt;sustrik&gt;       what&#8217;s the assertion?
| [Tuesday 01 February 2011] [13:28:17] &lt;CIA-21&gt;        jzmq: 03robin.palotai 07master * r04c2900 10/ src/Poller.cpp : testing patch for jni crashes - http://bit.ly/hlc8vI
| [Tuesday 01 February 2011] [14:05:18] &lt;andrewvc&gt;      cremes: around?
| [Tuesday 01 February 2011] [14:05:29] &lt;andrewvc&gt;      I was wondering if you noticed issues with pub/sub and ZMQ::NOBLOCK in the past
| [Tuesday 01 February 2011] [14:05:35] &lt;cremes&gt;        andrewvc: yep
| [Tuesday 01 February 2011] [14:06:06] &lt;cremes&gt;        nope, i have not noticed any specific issues with pub/sub
| [Tuesday 01 February 2011] [14:06:06] &lt;andrewvc&gt;      hmmmm
| [Tuesday 01 February 2011] [14:06:10] &lt;andrewvc&gt;      so in my work on em-zeromq, push/pull works well, pub/sub however
| [Tuesday 01 February 2011] [14:06:23] &lt;cremes&gt;        what&#8217;s it doing?
| [Tuesday 01 February 2011] [14:06:23] &lt;andrewvc&gt;      zmq_recv just doesn&#8217;t pick anything up
| [Tuesday 01 February 2011] [14:06:23] &lt;cremes&gt;        or not doing?
| [Tuesday 01 February 2011] [14:06:32] &lt;andrewvc&gt;      the FD gets triggered as readable
| [Tuesday 01 February 2011] [14:06:38] &lt;andrewvc&gt;      on the sub
| [Tuesday 01 February 2011] [14:06:38] &lt;cremes&gt;        so pub works but sub is busted?
| [Tuesday 01 February 2011] [14:06:38] &lt;andrewvc&gt;      yeah
| [Tuesday 01 February 2011] [14:06:38] &lt;andrewvc&gt;      i straced it
| [Tuesday 01 February 2011] [14:06:44] &lt;andrewvc&gt;      i see the data getting written and read
| [Tuesday 01 February 2011] [14:06:54] &lt;andrewvc&gt;      and ZMQ_EVENTS says POLLOUT is enabled
| [Tuesday 01 February 2011] [14:06:58] &lt;andrewvc&gt;      errr triggered
| [Tuesday 01 February 2011] [14:07:15] &lt;andrewvc&gt;      but recv doesn&#8217;t work
| [Tuesday 01 February 2011] [14:07:21] &lt;cremes&gt;        which socket are you talking about here? sub sockets don&#8217;t care about POLLOUT
| [Tuesday 01 February 2011] [14:07:31] &lt;andrewvc&gt;      errrm, I meant pollin
| [Tuesday 01 February 2011] [14:07:31] &lt;cremes&gt;        they need POLLIN
| [Tuesday 01 February 2011] [14:07:32] &lt;andrewvc&gt;      sorry
| [Tuesday 01 February 2011] [14:07:34] &lt;cremes&gt;        ok
| [Tuesday 01 February 2011] [14:07:41] &lt;andrewvc&gt;      wait, actually
| [Tuesday 01 February 2011] [14:07:44] &lt;cremes&gt;        damn, thought we had the fix right there...
| [Tuesday 01 February 2011] [14:08:04] &lt;andrewvc&gt;      i think they were triggering POLLOUT (according to ZMQ::EVENTS) on a ZMQSUB socket
| [Tuesday 01 February 2011] [14:08:10] &lt;andrewvc&gt;      lemme double check that
| [Tuesday 01 February 2011] [14:12:23] &lt;andrewvc&gt;      hmmm
| [Tuesday 01 February 2011] [14:12:32] &lt;andrewvc&gt;      now I see no events on the socket, which is good and bad
| [Tuesday 01 February 2011] [14:13:28] &lt;andrewvc&gt;      i mean, the same exact code works with pub/sub
| [Tuesday 01 February 2011] [14:13:34] &lt;andrewvc&gt;      errr push/pull
| [Tuesday 01 February 2011] [14:14:04] &lt;andrewvc&gt;      [pid 14619] sendto(22, &#8220;100TMsg777&#8221;, 9, 0, NULL, 0 &lt;unfinished ...&gt;
| [Tuesday 01 February 2011] [14:14:04] &lt;andrewvc&gt;      [pid 14619] &lt;... recvfrom resumed&gt; &#8220;100TMsg777&#8221;, 8192, 0, NULL, NULL) = 9
| [Tuesday 01 February 2011] [14:14:06] &lt;andrewvc&gt;      from the strace
| [Tuesday 01 February 2011] [14:14:12] &lt;andrewvc&gt;      so, internally, the message gets sent/received
| [Tuesday 01 February 2011] [14:14:17] &lt;andrewvc&gt;      by zeromq it looks
| [Tuesday 01 February 2011] [14:15:03] &lt;andrewvc&gt;      cremes: any ideas on that? I can dig into ffi-rzmq tonight I guess
| [Tuesday 01 February 2011] [14:15:43] &lt;cremes&gt;        andrewvc: can you gist your test code for me; i&#8217;d like to look at it
| [Tuesday 01 February 2011] [14:17:12] &lt;andrewvc&gt;      sure, i mean, I&#8217;m a bit short on time now, about to head into a meeting. I can write a minimal test later
| [Tuesday 01 February 2011] [14:17:12] &lt;andrewvc&gt;      however
| [Tuesday 01 February 2011] [14:17:12] &lt;andrewvc&gt;      if you want you can look at
| [Tuesday 01 February 2011] [14:17:12] &lt;andrewvc&gt;      however
| [Tuesday 01 February 2011] [14:17:12] &lt;andrewvc&gt;      https://github.com/andrewvc/em-zeromq
| [Tuesday 01 February 2011] [14:17:27] &lt;andrewvc&gt;      if you run this spec https://github.com/andrewvc/em-zeromq/blob/master/spec/em-zeromq_spec.rb
| [Tuesday 01 February 2011] [14:17:36] &lt;cremes&gt;        i just wonder if i&#8217;ll see something that you don&#8217;t... hopefully it&#8217;s an easy fix
| [Tuesday 01 February 2011] [14:17:49] &lt;andrewvc&gt;      and s/ZMQ::PUSH/ZMQ::PUB
| [Tuesday 01 February 2011] [14:17:56] &lt;andrewvc&gt;      and s/ZMQ::PULL/ZMQ::PUB
| [Tuesday 01 February 2011] [14:17:58] &lt;andrewvc&gt;      you&#8217;ll see it
| [Tuesday 01 February 2011] [14:18:09] &lt;cremes&gt;        ok
| [Tuesday 01 February 2011] [14:18:19] &lt;andrewvc&gt;      or I can send something later, I&#8217;ll be expanding the test suite tonight
| [Tuesday 01 February 2011] [14:52:43] &lt;CIA-21&gt;        zeromq2: 03Martin Sustrik 07sub-forward * ra40436b 10/ (5 files):
| [Tuesday 01 February 2011] [14:52:44] &lt;CIA-21&gt;        zeromq2: Couple of bug fixes to subscription forwarding mechanism.
| [Tuesday 01 February 2011] [14:52:44] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Martin Sustrik &lt;sustrik&#64;250bpm.com&gt; - http://bit.ly/eOAJxP
| [Tuesday 01 February 2011] [15:14:31] &lt;mikko&gt; good evening
| [Tuesday 01 February 2011] [15:19:27] &lt;sustrik&gt;       evening
| [Wednesday 02 February 2011] [03:54:56] &lt;efhache&gt;     Hi everybody, just one question about zmq vs 2.0.7,   it&#8217;s possible there is a sort of memory leak?  I use a simple &#8220;broker&#8221;  that received message from a zmq socket and redispatch by an other zmq socket the message to the appropriate receiver
| [Wednesday 02 February 2011] [03:56:14] &lt;efhache&gt;     there is nothing else in this piece of soft that the zmq library...   but memory consumption do not stop to increase...
| [Wednesday 02 February 2011] [03:56:56] &lt;efhache&gt;     I work under a linux with 2.4 kernel
| [Wednesday 02 February 2011] [03:59:38] &lt;sustrik&gt;     efhache: it&#8217;s an outdated version, so yes, it&#8217;s possible there&#8217;s a memory leak there that have been fixed in the meantime
| [Wednesday 02 February 2011] [03:59:43] &lt;sustrik&gt;     check ChangeLog
| [Wednesday 02 February 2011] [04:00:25] &lt;sustrik&gt;     the other possibility is that publisher(s) are simply publishing faster then consumer(s) consume
| [Wednesday 02 February 2011] [04:01:17] &lt;efhache&gt;     sustrik :  I see in changelog that there was a memory leak problem with REQ socket, but I don&#8217;t use REQ
| [Wednesday 02 February 2011] [04:01:50] &lt;efhache&gt;     sustrik : there is a possibility to &#8220;view&#8221; the total message in queue ?
| [Wednesday 02 February 2011] [04:02:15] &lt;efhache&gt;     sustrik :  to be sure that the publisher don&#8217;t publish faster than consumer ?
| [Wednesday 02 February 2011] [04:02:26] &lt;sustrik&gt;     nope
| [Wednesday 02 February 2011] [04:02:33] &lt;sustrik&gt;     you can limit the queue size
| [Wednesday 02 February 2011] [04:02:38] &lt;sustrik&gt;     use ZMQ_HWM option
| [Wednesday 02 February 2011] [04:04:40] &lt;efhache&gt;     ok I will see the man page
| [Wednesday 02 February 2011] [04:04:44] &lt;efhache&gt;     thanks sustrik
| [Wednesday 02 February 2011] [04:08:35] &lt;efhache&gt;     sustrik : have you a example to use ZMQ_HWM with a REP/PUB  socket ?
| [Wednesday 02 February 2011] [04:08:59] &lt;sustrik&gt;     man setsockopt
| [Wednesday 02 February 2011] [04:28:57] &lt;suzan_shakya&gt;        socket(zmq.PUB) can bind to multiple ipc sockets. Is this a feature or a bug ?
| [Wednesday 02 February 2011] [04:30:35] &lt;mikko&gt;       suzan_shakya: feature
| [Wednesday 02 February 2011] [04:31:27] &lt;suzan_shakya&gt;        mikko: can multiple publisher and multiple subscriber can be implemented using this feature ?
| [Wednesday 02 February 2011] [04:32:13] &lt;mikko&gt;       suzan_shakya: what do you mean? a single publisher that publishes using multiple endpoints?
| [Wednesday 02 February 2011] [04:34:27] &lt;suzan_shakya&gt;        mikko: i need to implement multiple publisher and multiple subscriber. Multiple subscriber can simply be implemented. In addition to multi sub, i need multi pub, so that all subscriber gets the message of all the publishers
| [Wednesday 02 February 2011] [04:35:30] &lt;sustrik&gt;     you can either connect each sub to each pub, or more sanely, use a forwarder device in the middle
| [Wednesday 02 February 2011] [04:35:37] &lt;mikko&gt;       suzan_shakya: you can a) have subscriber connect to all publishers b) have a device that connects to ..
| [Wednesday 02 February 2011] [04:35:44] &lt;mikko&gt;       martin answered it already
| [Wednesday 02 February 2011] [04:35:58] &lt;sustrik&gt;     :)
| [Wednesday 02 February 2011] [04:36:05] &lt;suzan_shakya&gt;        mikko: I want to implement that without any device
| [Wednesday 02 February 2011] [04:36:47] &lt;mikko&gt;       suzan_shakya: a device in zeromq is just a lightweight process, not a hardware device
| [Wednesday 02 February 2011] [04:36:58] &lt;suzan_shakya&gt;        mikko: ya i know
| [Wednesday 02 February 2011] [04:37:24] &lt;mikko&gt;       in that case you can just connect all subscribers to all publishers
| [Wednesday 02 February 2011] [04:37:29] &lt;suzan_shakya&gt;        mikko: that device is a separate process, right ?
| [Wednesday 02 February 2011] [04:37:52] &lt;mikko&gt;       it can be
| [Wednesday 02 February 2011] [04:40:46] &lt;suzan_shakya&gt;        mikko: i got it, thanks :)
| [Wednesday 02 February 2011] [04:41:25] &lt;efhache&gt;     In the future, a pdf version or a book version of the 0MQ Guide   will be available  ??
| [Wednesday 02 February 2011] [04:42:36] &lt;sustrik&gt;     efhache: try asking on the mailing list
| [Wednesday 02 February 2011] [04:42:50] &lt;sustrik&gt;     pieter may know a way to convert it into a pdf
| [Wednesday 02 February 2011] [04:45:00] &lt;efhache&gt;     sustrik : ok...  I recome with another question about setsockopt() function...   It&#8217;s possible to assing more than just one option?  may be with two, three or more line with setsockopt()   ???
| [Wednesday 02 February 2011] [04:45:24] &lt;sustrik&gt;     sure
| [Wednesday 02 February 2011] [04:45:37] &lt;sustrik&gt;     you can set all settable options
| [Wednesday 02 February 2011] [04:45:38] &lt;sustrik&gt;     no problem
| [Wednesday 02 February 2011] [04:46:22] &lt;efhache&gt;     ok thanks
| [Wednesday 02 February 2011] [05:56:20] &lt;CIA-21&gt;      zeromq2: 03Martin Sustrik 07sub-forward * re156f09 10/ src/trie.cpp :
| [Wednesday 02 February 2011] [05:56:20] &lt;CIA-21&gt;      zeromq2: trie_t::rm returns true only if it actually removes the subscription
| [Wednesday 02 February 2011] [05:56:20] &lt;CIA-21&gt;      zeromq2: Signed-off-by: Martin Sustrik &lt;sustrik&#64;250bpm.com&gt; - http://bit.ly/fI1gLN
| [Wednesday 02 February 2011] [08:03:22] &lt;noj&gt; hello. I&#8217;m seeing a crash in ZeroMQ 2.0.10 compiled under Win32 with zmq::poll(). it crashes on  notify_fd = app_thread-&gt;get_signaler ()-&gt;get_fd ();  the signaler seems corrupt. what am I doing wrong?
| [Wednesday 02 February 2011] [08:05:45] &lt;noj&gt; nevermind. I supplied the address of the socket in my pollitem_t structure
| [Wednesday 02 February 2011] [11:54:10] &lt;mikko&gt;       howdy
| [Wednesday 02 February 2011] [12:31:50] &lt;stockMQ&gt;     Hi .. anyone any experience with R6010 - abort() has been called on VC++
| [Wednesday 02 February 2011] [12:32:04] &lt;stockMQ&gt;     It is a multi threaded app
| [Wednesday 02 February 2011] [12:32:39] &lt;stockMQ&gt;     There are two threads say A and B receiving from two sockets
| [Wednesday 02 February 2011] [12:33:13] &lt;stockMQ&gt;     then A and B both has a publisher bound to a TCP end point and a PGM end point
| [Wednesday 02 February 2011] [12:33:46] &lt;stockMQ&gt;     I get this only if the combination is a TCP and PGM
| [Wednesday 02 February 2011] [12:33:52] &lt;stockMQ&gt;     no problem with two TCPs
| [Wednesday 02 February 2011] [12:34:01] &lt;mikko&gt;       sounds like hitting an assertion
| [Wednesday 02 February 2011] [12:34:15] &lt;mikko&gt;       i would assume abort() gets invoked after assertion failure
| [Wednesday 02 February 2011] [12:34:57] &lt;mikko&gt;       never used PGM with windows
| [Wednesday 02 February 2011] [12:35:17] &lt;stockMQ&gt;     yeahh.. seems like something involving openPGM
| [Wednesday 02 February 2011] [12:36:13] &lt;stockMQ&gt;     checking now with combination of PGM and PGM
| [Wednesday 02 February 2011] [12:36:20] &lt;stockMQ&gt;     i mean epgm and epgm
| [Wednesday 02 February 2011] [12:37:02] &lt;stockMQ&gt;     ohk..got the error
| [Wednesday 02 February 2011] [12:37:51] &lt;mikko&gt;       -&gt;
| [Wednesday 02 February 2011] [12:41:24] &lt;stockMQ&gt;     I meant i got the same abort
| [Wednesday 02 February 2011] [12:43:39] &lt;stockMQ&gt;     After much testing the pattern i see is that i get this error if there are more than one epgm within the same process but each in a distinct thread
| [Wednesday 02 February 2011] [12:43:55] &lt;stockMQ&gt;     or more than one epgm in the same thread
| [Wednesday 02 February 2011] [12:48:42] &lt;stockMQ&gt;     Will it be better if on receiving data in thread A and B ,i send it through a common PUB instead of one PUB for each thread
| [Wednesday 02 February 2011] [12:49:16] &lt;cremes&gt;      stockMQ: no, don&#8217;t share the same pub socket between 1+ threads
| [Wednesday 02 February 2011] [12:49:26] &lt;cremes&gt;      the rule is 1 socket per thread
| [Wednesday 02 February 2011] [12:50:25] &lt;stockMQ&gt;     ok
| [Wednesday 02 February 2011] [12:52:45] &lt;stockMQ&gt;     right now the two threads are sharing the same context
| [Wednesday 02 February 2011] [12:55:25] &lt;cremes&gt;      that should be okay; 99% of programs will only ever need a single context
| [Wednesday 02 February 2011] [18:37:38] &lt;mikko&gt;       Steve-o: hi
| [Wednesday 02 February 2011] [18:37:42] &lt;mikko&gt;       got my email?
| [Wednesday 02 February 2011] [18:39:19] &lt;mikko&gt;       i see you did
| [Wednesday 02 February 2011] [18:39:27] &lt;Steve-o&gt;     :P
| [Wednesday 02 February 2011] [18:41:14] &lt;Steve-o&gt;     I think I noticed it was debug build before
| [Wednesday 02 February 2011] [18:41:30] &lt;mikko&gt;       i replied to your email
| [Wednesday 02 February 2011] [18:41:37] &lt;mikko&gt;       not sure how to check that with .libs
| [Wednesday 02 February 2011] [18:41:46] &lt;mikko&gt;       but dependency walker shows it on dlls
| [Wednesday 02 February 2011] [18:42:35] &lt;Steve-o&gt;     I guess I should look at DLL again sometime
| [Wednesday 02 February 2011] [18:43:11] &lt;Steve-o&gt;     CMake is broken on executables and dlls for some reason
| [Wednesday 02 February 2011] [18:43:55] &lt;Steve-o&gt;     as I wanted to include purinrecv.exe and purinsend.exe in the package
| [Wednesday 02 February 2011] [18:45:32] &lt;Steve-o&gt;     still working on ticket spinlocks which will help Windows a bit
| [Wednesday 02 February 2011] [18:46:06] &lt;Steve-o&gt;     idea being to avoid API calls that include context switches to the kernel
| [Wednesday 02 February 2011] [18:46:30] &lt;Steve-o&gt;     critical sections don&#8217;t, but regular Windows mutexes do
| [Wednesday 02 February 2011] [18:46:42] &lt;Steve-o&gt;     rw locks are vista+ only
| [Wednesday 02 February 2011] [18:47:25] &lt;mikko&gt;       http://build.valokuva.org/job/ZeroMQ2-core-master_MSVC-win7/148/console
| [Wednesday 02 February 2011] [18:47:28] &lt;mikko&gt;       building now
| [Wednesday 02 February 2011] [18:48:30] &lt;mikko&gt;       there is now the WithOpenPGM target in the MSVC build which you can easily use to create &#8220;With OpenPGM release builds&#8221;. It expects to find OpenPGM in ..OpenPGM (one dir up from zeromq dir)
| [Wednesday 02 February 2011] [18:49:26] &lt;mikko&gt;       i think i had another question for you as well regarding the openpgm autoconf builds. what was the reason for LT_PREREQ([2.2]) in configure.ac?
| [Wednesday 02 February 2011] [18:50:39] &lt;Steve-o&gt;     just to match the versions on ubuntu 10.10
| [Wednesday 02 February 2011] [18:50:57] &lt;Steve-o&gt;     then I ran os OSX 10.6.5/6 and lowered the numbers for it working there
| [Wednesday 02 February 2011] [18:51:08] &lt;Steve-o&gt;     I had to fix the autoconf 11 parts for silent building
| [Wednesday 02 February 2011] [18:51:48] &lt;Steve-o&gt;     are there platforms it fails on?
| [Wednesday 02 February 2011] [18:51:53] &lt;mikko&gt;       debian stable
| [Wednesday 02 February 2011] [18:51:59] &lt;mikko&gt;       libtool 1.5
| [Wednesday 02 February 2011] [18:52:14] &lt;mikko&gt;       probably rhel as well
| [Wednesday 02 February 2011] [18:52:33] &lt;Steve-o&gt;     ok
| [Wednesday 02 February 2011] [18:52:58] &lt;Steve-o&gt;     if you change the version to 1.5 or remove the line does it build correctly?
| [Wednesday 02 February 2011] [18:53:19] &lt;mikko&gt;       i remved the line and added AC_PROG_LIBTOOL invocation
| [Wednesday 02 February 2011] [18:53:29] &lt;mikko&gt;       not sure if that is mandatory
| [Wednesday 02 February 2011] [18:53:33] &lt;mikko&gt;       but yes, builds properly
| [Wednesday 02 February 2011] [18:53:44] &lt;Steve-o&gt;     I need to update CMakeLists.txt and Makefile.am to remove the hard coded version numbers
| [Wednesday 02 February 2011] [18:53:45] &lt;mikko&gt;       just reading about how to statically link libtool archive
| [Wednesday 02 February 2011] [18:54:02] &lt;mikko&gt;       http://snapshot.valokuva.org/msvc2008/2011-02-02_23-46-20/
| [Wednesday 02 February 2011] [18:54:06] &lt;Steve-o&gt;     I cannot use a version.sh on stock Windows without Cygwin
| [Wednesday 02 February 2011] [18:54:12] &lt;mikko&gt;       there we go, seems to be fully functional release dll
| [Wednesday 02 February 2011] [18:54:33] &lt;Steve-o&gt;     nice, good job
| [Wednesday 02 February 2011] [18:54:35] &lt;mikko&gt;       version.bat ?
| [Wednesday 02 February 2011] [18:54:37] &lt;mikko&gt;       :)
| [Wednesday 02 February 2011] [18:54:59] &lt;Steve-o&gt;     well I was thinking of using perl or python
| [Wednesday 02 February 2011] [18:55:06] &lt;mikko&gt;       ill remove the earlier snapshots as they are varying quality and build configurations
| [Wednesday 02 February 2011] [18:55:07] &lt;Steve-o&gt;     after I have detected they exist
| [Wednesday 02 February 2011] [18:57:02] &lt;Steve-o&gt;     the libtool/autoconf/automake documentation changes a lot on its recommendations
| [Wednesday 02 February 2011] [18:57:34] &lt;Steve-o&gt;     I tried to go with the latest spec
| [Wednesday 02 February 2011] [18:57:50] &lt;Steve-o&gt;     I think 0mq is a bit behind
| [Wednesday 02 February 2011] [18:58:35] &lt;mikko&gt;       it&#8217;s possible because we target for as wide as possible audience
| [Wednesday 02 February 2011] [18:59:17] &lt;mikko&gt;       or at least try to
| [Wednesday 02 February 2011] [18:59:45] &lt;Steve-o&gt;     its perverse because you can go with the latest version in repo as long as you ship all the configure scripts in release
| [Wednesday 02 February 2011] [19:00:20] &lt;mikko&gt;       yeah, i guess it&#8217;s partially convenience
| [Wednesday 02 February 2011] [19:00:39] &lt;mikko&gt;       being able to build with distro-provided tools without having to first update the autoconf toolchain
| [Wednesday 02 February 2011] [19:00:58] &lt;Steve-o&gt;     the new silent build is nice though, brings it upto building Linux and how CMake runs
| [Wednesday 02 February 2011] [19:01:26] &lt;Steve-o&gt;     s/upto/upto date/
| [Wednesday 02 February 2011] [19:01:44] &lt;mikko&gt;       and i would think that at least the parts of the autoconf stuff i&#8217;ve written follow documentation or tutorials found online
| [Wednesday 02 February 2011] [19:01:50] &lt;mikko&gt;       not always necessarily up to date
| [Wednesday 02 February 2011] [19:01:58] &lt;Steve-o&gt;     that&#8217;s the biggest problem,
| [Wednesday 02 February 2011] [19:02:11] &lt;Steve-o&gt;     every blog and walkthough refers to an older upstream version
| [Wednesday 02 February 2011] [19:03:10] &lt;mikko&gt;       yeah, i learned to appreciate the autoconf documentation at later stages
| [Wednesday 02 February 2011] [19:03:33] &lt;Steve-o&gt;     doesn&#8217;t stop autoheader from being broken
| [Wednesday 02 February 2011] [19:03:44] &lt;Steve-o&gt;     gettext doesn&#8217;t work out of the box
| [Wednesday 02 February 2011] [19:03:58] &lt;Steve-o&gt;     I didn&#8217;t spend too long looking at it though
| [Wednesday 02 February 2011] [19:06:11] &lt;Steve-o&gt;     similarly detecting files is a bit odd
| [Wednesday 02 February 2011] [19:06:36] &lt;Steve-o&gt;     AC_CHECK_FILE seems to check for being able to read with the users permissions
| [Wednesday 02 February 2011] [19:07:06] &lt;Steve-o&gt;     so /dev/hpet always fails for example
| [Wednesday 02 February 2011] [19:08:20] &lt;Steve-o&gt;     oh and it looks like I didn&#8217;t check for Sun Pro&#8217;s hidden attribute
| [Wednesday 02 February 2011] [19:08:44] &lt;mikko&gt;       test -r ?
| [Wednesday 02 February 2011] [19:08:59] &lt;mikko&gt;       or -x ?
| [Wednesday 02 February 2011] [19:09:20] &lt;Steve-o&gt;     not too important, only /dev/rtc and /dev/hpet which have major problems anyway
| [Wednesday 02 February 2011] [19:11:27] &lt;Steve-o&gt;     overall not too bad, I&#8217;m certainly not interested in copying the autoconf to SCons or CMake, they look a lot more verbose
| [Wednesday 02 February 2011] [19:12:42] &lt;Steve-o&gt;     I should get around to checking cygwin/mingw though, I guess autoconf doesn&#8217;t work with msvc?
| [Wednesday 02 February 2011] [19:13:21] &lt;mikko&gt;       no, you would need MSBuild or visual studio templates
| [Wednesday 02 February 2011] [19:13:38] &lt;mikko&gt;       autoconf works on cygwin / mingw
| [Wednesday 02 February 2011] [19:13:54] &lt;Steve-o&gt;     that&#8217;s why I have CMake :D
| [Wednesday 02 February 2011] [19:16:06] &lt;Steve-o&gt;     a bit limiting that you need a ssl certificate to get your name in the publisher field of Windows installers
| [Wednesday 02 February 2011] [19:16:59] &lt;mikko&gt;       i guess they have a reason for that
| [Wednesday 02 February 2011] [19:17:38] &lt;Steve-o&gt;     still need to look at getting an installer for 0mq though
| [Wednesday 02 February 2011] [19:18:21] &lt;mikko&gt;       is it much more than copying the dll in place?
| [Wednesday 02 February 2011] [19:19:22] &lt;Steve-o&gt;     I call NSIS through CPack as part of CMake
| [Wednesday 02 February 2011] [19:19:57] &lt;Steve-o&gt;     you setup the target directory structure and simply fill in a few fields unless you need something special
| [Wednesday 02 February 2011] [19:21:47] &lt;mikko&gt;       hmm
| [Wednesday 02 February 2011] [19:21:50] &lt;Steve-o&gt;     the main job of the installer is to prepare the uninstaller
| [Wednesday 02 February 2011] [19:22:07] &lt;mikko&gt;       for zeromq it might be possible to add an installer project into the solution
| [Wednesday 02 February 2011] [19:22:15] &lt;mikko&gt;       msvc
| [Wednesday 02 February 2011] [19:22:22] &lt;Steve-o&gt;     I&#8217;m guessing thats how it was done before
| [Wednesday 02 February 2011] [19:24:24] &lt;Steve-o&gt;     possibly pertinent to bundle the msvc 2010 redistributable too
| [Wednesday 02 February 2011] [19:24:59] &lt;Steve-o&gt;     Microsoft released an opensource installer thing a while back no, WiX?
| [Wednesday 02 February 2011] [19:25:44] &lt;Steve-o&gt;     http://wix.sourceforge.net/
| [Wednesday 02 February 2011] [19:26:27] &lt;mikko&gt;       cool
| [Wednesday 02 February 2011] [19:29:08] &lt;Steve-o&gt;     I don&#8217;t have any templates in visual studio for an installer, maybe I missed something
| [Wednesday 02 February 2011] [19:32:08] &lt;mikko&gt;       are you using express edition?
| [Wednesday 02 February 2011] [19:32:36] &lt;Steve-o&gt;     yup
| [Wednesday 02 February 2011] [19:33:21] &lt;mikko&gt;       i dont think express includes the installer technology
| [Wednesday 02 February 2011] [19:33:31] &lt;mikko&gt;       so wix might be a better solution
| [Wednesday 02 February 2011] [19:45:11] &lt;mikko&gt;       openpgm autoconf was actually pretty easy to fit into zeromq build
| [Wednesday 02 February 2011] [19:45:36] &lt;mikko&gt;       also it&#8217;s using libtool to link so it should continue working if libpgm provides shared libraries later on
| [Wednesday 02 February 2011] [19:47:34] &lt;mikko&gt;       hmm
| [Wednesday 02 February 2011] [19:47:48] &lt;mikko&gt;       hitting an assertion with epgm transport
| [Wednesday 02 February 2011] [19:47:54] &lt;mikko&gt;       i was getting this before as well
| [Wednesday 02 February 2011] [19:49:02] &lt;mikko&gt;       Assertion failed: rc == 0 (connect_session.cpp:82)
| [Wednesday 02 February 2011] [19:50:09] &lt;Steve-o&gt;     common on connect()
| [Wednesday 02 February 2011] [19:50:26] &lt;Steve-o&gt;     usually means resolving the network parameter failed
| [Wednesday 02 February 2011] [19:51:14] &lt;Steve-o&gt;     fyi: libpm in autoconf is already set to make static &amp; shared libraries
| [Wednesday 02 February 2011] [19:52:03] &lt;Steve-o&gt;     ideally the pgm error object should be routed through the zeromq logging service
| [Wednesday 02 February 2011] [19:53:19] &lt;Steve-o&gt;     the zeromq error detail is incredibly brief
| [Wednesday 02 February 2011] [19:54:18] &lt;Steve-o&gt;     I&#8217;m currently pondering over chasing the libc defect with /etc/hosts resolution on multiple entries
| [Wednesday 02 February 2011] [19:54:34] &lt;Steve-o&gt;     I can&#8217;t help think it&#8217;s just NetworkManager being shit
| [Wednesday 02 February 2011] [19:54:40] &lt;mikko&gt;       what is the issue?
| [Wednesday 02 February 2011] [19:54:47] &lt;mikko&gt;       order of resolution?
| [Wednesday 02 February 2011] [19:54:55] &lt;Steve-o&gt;     two issues
| [Wednesday 02 February 2011] [19:55:06] &lt;Steve-o&gt;     one it seems to pickup ::1 as 127.0.0.1
| [Wednesday 02 February 2011] [19:55:19] &lt;mikko&gt;       my connection string is epgm://eth0;239.192.0.1:6868
| [Wednesday 02 February 2011] [19:55:20] &lt;Steve-o&gt;     and secondly it seems to read bottom to top
| [Wednesday 02 February 2011] [19:55:49] &lt;Steve-o&gt;     I&#8217;d try using the IP address but that looks fine
| [Wednesday 02 February 2011] [19:56:08] &lt;mikko&gt;       still asserts with ip
| [Wednesday 02 February 2011] [19:56:34] &lt;mikko&gt;       hmm
| [Wednesday 02 February 2011] [19:56:40] &lt;Steve-o&gt;     anything if you run with PGM_MIN_LOG_LEVEL=TRACE ?
| [Wednesday 02 February 2011] [19:57:16] &lt;mikko&gt;       https://gist.github.com/3f99af511f9059ce4a7c
| [Wednesday 02 February 2011] [19:57:23] &lt;mikko&gt;       it outputs that
| [Wednesday 02 February 2011] [19:59:58] &lt;Steve-o&gt;     odd, I&#8217;m guessing setsockopt on IP_PKTINFO is failing
| [Wednesday 02 February 2011] [20:01:48] &lt;Steve-o&gt;     this is with my autoconf?
| [Wednesday 02 February 2011] [20:02:11] &lt;Steve-o&gt;     or the stuff in master?
| [Wednesday 02 February 2011] [20:02:30] &lt;mikko&gt;       it seems to happen with stuff on master and autoconf
| [Wednesday 02 February 2011] [20:03:25] &lt;Steve-o&gt;     but not with openpgm tools?
| [Wednesday 02 February 2011] [20:04:15] &lt;mikko&gt;       havent tested
| [Wednesday 02 February 2011] [20:04:16] &lt;Steve-o&gt;     have to prod Sustrik when he is online about PGM logging
| [Wednesday 02 February 2011] [20:04:52] &lt;mikko&gt;       trying to find the tools among the openpgm source
| [Wednesday 02 February 2011] [20:05:40] &lt;mikko&gt;       hmmm.. the autoconf doenst seem to build them
| [Wednesday 02 February 2011] [20:05:51] &lt;Steve-o&gt;     nope :P
| [Wednesday 02 February 2011] [20:06:02] &lt;mikko&gt;       sconssing now
| [Wednesday 02 February 2011] [20:06:57] &lt;Steve-o&gt;     autoconf &amp; cmake only build libraries, easiest method for distribution
| [Wednesday 02 February 2011] [20:07:53] &lt;mikko&gt;       what is good test program?
| [Wednesday 02 February 2011] [20:08:08] &lt;Steve-o&gt;     purinrecv or purinsend are the easiest to use
| [Wednesday 02 February 2011] [20:08:40] &lt;mikko&gt;       hmm
| [Wednesday 02 February 2011] [20:08:43] &lt;mikko&gt;       nothing happens
| [Wednesday 02 February 2011] [20:08:46] &lt;mikko&gt;       but no errors
| [Wednesday 02 February 2011] [20:09:20] &lt;Steve-o&gt;     you can always build them with something like gcc -o purinrecv examples/purinrecv.c <cite>PKG_CONFIG_PATH=. pkg-config &#8211;cflags &#8211;libs</cite>
| [Wednesday 02 February 2011] [20:09:44] &lt;mikko&gt;       i got purinrecv running
| [Wednesday 02 February 2011] [20:09:50] &lt;mikko&gt;       and executing purinsend
| [Wednesday 02 February 2011] [20:09:59] &lt;mikko&gt;       should i see something in the receiver?
| [Wednesday 02 February 2011] [20:10:10] &lt;Steve-o&gt;     usually if you don&#8217;t see anything it means it&#8217;s picking up the loopback device
| [Wednesday 02 February 2011] [20:10:49] &lt;mikko&gt;       Trace: Multicast send interface set to 127.0.1.1 index 0
| [Wednesday 02 February 2011] [20:10:51] &lt;mikko&gt;       correct
| [Wednesday 02 February 2011] [20:11:14] &lt;Steve-o&gt;     that&#8217;s the /etc/hosts problem correct
| [Wednesday 02 February 2011] [20:11:31] &lt;Steve-o&gt;     127.0.1.1 is the default ip for dhcp linux boxes
| [Wednesday 02 February 2011] [20:11:45] &lt;Steve-o&gt;     you should have a second entry with the dhcp address
| [Wednesday 02 February 2011] [20:12:12] &lt;Steve-o&gt;     but getaddrinfo(&#8216;hostname&#8217;) is returning a different order to what NetworkManager thinks it should
| [Wednesday 02 February 2011] [20:12:27] &lt;Steve-o&gt;     so annoying
| [Wednesday 02 February 2011] [20:12:38] &lt;mikko&gt;       ok, changed to the eth0 ip but still not seeing anything
| [Wednesday 02 February 2011] [20:12:39] &lt;mikko&gt;       odd
| [Wednesday 02 February 2011] [20:12:49] &lt;mikko&gt;       Trace: Multicast send interface set to 192.168.192.139 index 0
| [Wednesday 02 February 2011] [20:13:30] &lt;Steve-o&gt;     oh, add &#8216;-l&#8217; for loopback
| [Wednesday 02 February 2011] [20:13:54] &lt;Steve-o&gt;     it&#8217;s disabled by default
| [Wednesday 02 February 2011] [20:14:00] &lt;Steve-o&gt;     doh
| [Wednesday 02 February 2011] [20:14:02] &lt;mikko&gt;       ok now seeing something: Trace: Recv again on not-full
| [Wednesday 02 February 2011] [20:14:20] &lt;mikko&gt;       in any case, it gets further than with zeromq
| [Wednesday 02 February 2011] [20:14:32] &lt;Steve-o&gt;     yup
| [Wednesday 02 February 2011] [20:15:55] &lt;mikko&gt;       comparing the results, inside zeromq i dont see this: Trace: Assuming IP header size of 20 bytes
| [Wednesday 02 February 2011] [20:16:05] &lt;mikko&gt;       Trace: Request IP headers. is the last line
| [Wednesday 02 February 2011] [20:16:10] &lt;Steve-o&gt;     i can try debian in a vm
| [Wednesday 02 February 2011] [20:18:50] &lt;mikko&gt;       <a class="reference external" href="https://gist.github.com/dc1855834b6445ef224f">https://gist.github.com/dc1855834b6445ef224f</a>
| [Wednesday 02 February 2011] [20:18:57] &lt;mikko&gt;       that should be enough to reproduce
| [Wednesday 02 February 2011] [20:22:50] &lt;Steve-o&gt;     ok, I&#8217;ll be a bit, I need to reboot into Ubuntu and download &amp; install everything ...
| [Wednesday 02 February 2011] [20:22:58] &lt;mikko&gt;       hehe
| [Wednesday 02 February 2011] [20:23:03] &lt;mikko&gt;       i think im gonna hit the sack
| [Wednesday 02 February 2011] [20:23:07] &lt;mikko&gt;       getting a bit late here
| [Wednesday 02 February 2011] [20:23:12] &lt;mikko&gt;       good night
| [Wednesday 02 February 2011] [20:23:14] &lt;Steve-o&gt;     I&#8217;ll shoot you a mail
| [Wednesday 02 February 2011] [20:23:18] &lt;Steve-o&gt;     night
| [Wednesday 02 February 2011] [20:23:19] &lt;mikko&gt;       thanks
| [Thursday 03 February 2011] [02:48:17] &lt;CIA-21&gt;       zeromq2: 03Martin Sustrik 07master * rca1acc3 10/ (src/poll.cpp src/poll.hpp):
| [Thursday 03 February 2011] [02:48:17] &lt;CIA-21&gt;       zeromq2: RLIMIT_NOFILE not used in poll_t anymore
| [Thursday 03 February 2011] [02:48:17] &lt;CIA-21&gt;       zeromq2: The problem was that RLIMIT_NOFILE can be set to RLIM_INIFINITY
| [Thursday 03 February 2011] [02:48:17] &lt;CIA-21&gt;       zeromq2: (and that appears to be default on AIX) which caused 0MQ to fail.
| [Thursday 03 February 2011] [02:48:17] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/hHEbFN">http://bit.ly/hHEbFN</a>
| [Thursday 03 February 2011] [02:59:50] &lt;mikko&gt;        good morning
| [Thursday 03 February 2011] [03:06:17] &lt;sustrik&gt;      morning
| [Thursday 03 February 2011] [03:11:02] &lt;sustrik&gt;      mikko: i&#8217;ve realised you are running solaris builds
| [Thursday 03 February 2011] [03:11:17] &lt;sustrik&gt;      is there a chance to test a patch on solaris?
| [Thursday 03 February 2011] [03:11:55] &lt;mikko&gt;        sustrik: sure
| [Thursday 03 February 2011] [03:12:05] &lt;sustrik&gt;      great
| [Thursday 03 February 2011] [03:12:09] &lt;mikko&gt;        i can do it over lunch if its more involved
| [Thursday 03 February 2011] [03:12:13] &lt;mikko&gt;        have you got it in github?
| [Thursday 03 February 2011] [03:12:22] &lt;sustrik&gt;      nope
| [Thursday 03 February 2011] [03:12:32] &lt;sustrik&gt;      the problem is i have no access to solaris box
| [Thursday 03 February 2011] [03:12:46] &lt;sustrik&gt;      and i don&#8217;t want to commit something i haven&#8217;t even been able to compile
| [Thursday 03 February 2011] [03:13:08] &lt;sustrik&gt;      let me create the patch
| [Thursday 03 February 2011] [03:13:17] &lt;sustrik&gt;      we can check whether it builds on solaris
| [Thursday 03 February 2011] [03:13:22] &lt;sustrik&gt;      and if so, i&#8217;ll commit it
| [Thursday 03 February 2011] [03:13:23] &lt;mikko&gt;        i noticed that default ZMQ_RATE seems to be too small for debian
| [Thursday 03 February 2011] [03:13:25] &lt;mikko&gt;        Assertion failed: rc == 0 (connect_session.cpp:82)
| [Thursday 03 February 2011] [03:13:51] &lt;mikko&gt;        i can add a separate build on hudson which builds from a specific github branch so you can build when you want
| [Thursday 03 February 2011] [03:13:55] &lt;mikko&gt;        would that be useufl?
| [Thursday 03 February 2011] [03:14:14] &lt;sustrik&gt;      dunno
| [Thursday 03 February 2011] [03:14:23] &lt;sustrik&gt;      in most cases i can build at home
| [Thursday 03 February 2011] [03:14:36] &lt;sustrik&gt;      this time the problem is that the code is solaris-specific
| [Thursday 03 February 2011] [03:14:43] &lt;mikko&gt;        ok, i can give it a spin
| [Thursday 03 February 2011] [03:14:57] &lt;sustrik&gt;      ok, i&#8217;ll send you the patch
| [Thursday 03 February 2011] [03:15:01] &lt;sustrik&gt;      no haste though
| [Thursday 03 February 2011] [03:17:05] &lt;mikko&gt;        steven suggested adding 1024 to both rxw_sqns and txw_sqns in pgm_socket.cpp
| [Thursday 03 February 2011] [03:17:10] &lt;mikko&gt;        but that still seems to be too low
| [Thursday 03 February 2011] [03:17:23] &lt;mikko&gt;        sustrik: have you got ubuntu / debian at hand?
| [Thursday 03 February 2011] [03:18:05] &lt;mikko&gt;        <a class="reference external" href="https://gist.github.com/b99d73ce2e8759e126fa">https://gist.github.com/b99d73ce2e8759e126fa</a>
| [Thursday 03 February 2011] [03:18:10] &lt;mikko&gt;        this code should hit assertion
| [Thursday 03 February 2011] [03:18:16] &lt;mikko&gt;        it does on debian 5.0
| [Thursday 03 February 2011] [03:18:25] &lt;sustrik&gt;      yup, i&#8217;m on ubuntu right now
| [Thursday 03 February 2011] [03:19:11] &lt;mikko&gt;        increasing ZMQ_RATE to 100000 solves it for me
| [Thursday 03 February 2011] [03:20:31] &lt;sustrik&gt;      let me check the problem
| [Thursday 03 February 2011] [03:36:05] &lt;sustrik&gt;      hm
| [Thursday 03 February 2011] [03:36:20] &lt;sustrik&gt;      for me it fails here:
| [Thursday 03 February 2011] [03:36:22] &lt;sustrik&gt;      153             if (!pgm_setsockopt (sock, IPPROTO_PGM, PGM_UDP_ENCAP_UCAST_PORT,
| [Thursday 03 February 2011] [03:36:22] &lt;sustrik&gt;      154                     &amp;encapsulation_port, sizeof (encapsulation_port)) ||
| [Thursday 03 February 2011] [03:36:22] &lt;sustrik&gt;      155                 !pgm_setsockopt (sock, IPPROTO_PGM, PGM_UDP_ENCAP_MCAST_PORT,
| [Thursday 03 February 2011] [03:36:22] &lt;sustrik&gt;      156                     &amp;encapsulation_port, sizeof (encapsulation_port)))
| [Thursday 03 February 2011] [03:36:40] &lt;sustrik&gt;      which has nothing to do with the rate
| [Thursday 03 February 2011] [03:37:18] &lt;mikko&gt;        do you run as root?
| [Thursday 03 February 2011] [03:37:28] &lt;sustrik&gt;      i&#8217;ve changed the protocol to epgm
| [Thursday 03 February 2011] [03:37:40] &lt;sustrik&gt;      no need to be root in such case
| [Thursday 03 February 2011] [03:43:51] &lt;sustrik&gt;      mikko: patch sent
| [Thursday 03 February 2011] [03:44:05] &lt;sustrik&gt;      when you have few mins free, try it with solaris
| [Thursday 03 February 2011] [03:44:06] &lt;sustrik&gt;      thanks
| [Thursday 03 February 2011] [03:59:59] &lt;mikko&gt;        sustrik: All 8 tests passed
| [Thursday 03 February 2011] [04:00:05] &lt;sustrik&gt;      great
| [Thursday 03 February 2011] [04:00:05] &lt;mikko&gt;        solaris studio on solaris
| [Thursday 03 February 2011] [04:00:18] &lt;sustrik&gt;      i&#8217;ll apply the patch
| [Thursday 03 February 2011] [04:02:10] &lt;CIA-21&gt;       zeromq2: 03Martin Sustrik 07master * r3f758ab 10/ (src/devpoll.cpp src/devpoll.hpp):
| [Thursday 03 February 2011] [04:02:10] &lt;CIA-21&gt;       zeromq2: Don&#8217;t use RLIMIT_NOFILES in devpoll_t.
| [Thursday 03 February 2011] [04:02:10] &lt;CIA-21&gt;       zeromq2: The patch allows for running 0MQ on Solaris and HP-UX
| [Thursday 03 February 2011] [04:02:10] &lt;CIA-21&gt;       zeromq2: even though ulimit for max number of file descriptors
| [Thursday 03 February 2011] [04:02:10] &lt;CIA-21&gt;       zeromq2: is set to unlimited.
| [Thursday 03 February 2011] [04:02:10] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/hLExdy">http://bit.ly/hLExdy</a>
| [Thursday 03 February 2011] [05:23:15] &lt;mikko&gt;        hmm
| [Thursday 03 February 2011] [05:23:33] &lt;mikko&gt;        on platforms that dont support pic objects is it possible to link static library inside a shared library?
| [Thursday 03 February 2011] [05:37:12] &lt;sustrik&gt;      no idea, sorry
| [Thursday 03 February 2011] [05:43:19] &lt;[equilibrium]&gt;        ago: l&#8217;ideale  che tu nasconda (per tutti i chan aperti) la fuffa, tipo i parts, quit, nick changes e roba del genere, perch rallentano di brutto il sync
| [Thursday 03 February 2011] [05:43:34] &lt;[equilibrium]&gt;        sorry, wrong window, nevermind
| [Thursday 03 February 2011] [05:48:13] &lt;mikko&gt;        [equilibrium]: gelato con leche, dos bolas. uno fresa y uno cafe
| [Thursday 03 February 2011] [05:48:27] &lt;mikko&gt;        thats what i learned last night
| [Thursday 03 February 2011] [05:48:44] &lt;mikko&gt;        hamburguesa con queso y patatas fritas
| [Thursday 03 February 2011] [05:50:51] &lt;sustrik&gt;      ha, the original post was in italian :)
| [Thursday 03 February 2011] [05:51:18] &lt;sustrik&gt;      how&#8217;s barcelona btw?
| [Thursday 03 February 2011] [05:53:39] &lt;sustrik&gt;      or are you in san diego? /me is not quite sure
| [Thursday 03 February 2011] [07:08:09] &lt;kabs&gt; Hello, in pub-sub model , if sub starts later and pub started earlier all messages by pub will be dropped. Is there a way to buffer those messages ( with some buffer limit)  so that they can sent to subscriber joining later. Can I get some link to go through it or if it is there in zeroMQ guide can someone point out which section it is ??
| [Thursday 03 February 2011] [07:14:05] &lt;sustrik&gt;      how could the PUB socket possibly know that there will be subscriber in the future?
| [Thursday 03 February 2011] [07:32:40] &lt;mikko&gt;        sustrik: barcelona at the moment
| [Thursday 03 February 2011] [07:32:52] &lt;mikko&gt;        going to san diego end of may
| [Thursday 03 February 2011] [09:33:07] Notice -NickServ- travlr__ is not a registered nickname.
| [Thursday 03 February 2011] [10:02:45] &lt;udoprog&gt;      Hey, I&#8217;m currently developing a game which will require REQ-REP but also sporadic pushing of information to the client, I&#8217;ve got a picture of how to implement this in twisted, but with additional coding overhead (for framing), I would really like to give zeromq a shot.
| [Thursday 03 February 2011] [10:08:57] &lt;mikko&gt;        sure
| [Thursday 03 February 2011] [10:09:04] &lt;mikko&gt;        you can even use zeromq with twisted
| [Thursday 03 February 2011] [10:17:38] &lt;udoprog&gt;      okey, care to elaborate? do you know of any references I can use?
| [Thursday 03 February 2011] [10:42:38] &lt;sustrik&gt;      udoprog: no idea myself, try asking on the mailing list
| [Thursday 03 February 2011] [11:26:20] &lt;sustrik&gt;      mikko: what do you think about the system z proposal?
| [Thursday 03 February 2011] [13:11:47] &lt;cyball&gt;       hi ... does somebody have some samples of implementing ZMQ_XREP service with ZMQ_REQ clients i could not found any ?
| [Thursday 03 February 2011] [13:45:54] &lt;starkdg&gt;      cyball, what doyou mean ?  I think XREP and REQ work fine together.
| [Thursday 03 February 2011] [13:46:13] &lt;starkdg&gt;      i mean, ive done it just fine.
| [Thursday 03 February 2011] [13:49:37] &lt;cyball&gt;       starkdg: i never said that it does not work i&#8217;m new to ZeroMQ and i&#8217;m a little bit confused because of the description :
| [Thursday 03 February 2011] [13:49:38] &lt;cyball&gt;       When a ZMQ_REQ socket is connected to a ZMQ_XREP socket, in addition to the identity of the originating peer each message received shall contain an empty delimiter message part. Hence, the entire structure of each received message as seen by the application becomes: one or more identity parts, delimiter part, one or more body parts. When sending replies to a ZMQ_REQ socket the application must include the delimiter part.
| [Thursday 03 February 2011] [13:50:09] &lt;cyball&gt;       what exactly does delimiter part or identity part means ?
| [Thursday 03 February 2011] [13:50:34] &lt;starkdg&gt;      i think that&#8217;s just the protocol of the message buffer
| [Thursday 03 February 2011] [13:50:39] &lt;cyball&gt;       how should that look like ?
| [Thursday 03 February 2011] [13:50:42] &lt;starkdg&gt;      it should work seemlessly for the user
| [Thursday 03 February 2011] [13:51:08] &lt;cyball&gt;       ok so i have only to define the constant ZMQ_XREQ in the zqm_socket function ?
| [Thursday 03 February 2011] [13:51:08] &lt;starkdg&gt;      i dont know how it actually looks,  maybe you can ask martin or pieter
| [Thursday 03 February 2011] [13:51:30] &lt;starkdg&gt;      yeah,  when creating the socket,  just use ZMQ_REQ in the client app
| [Thursday 03 February 2011] [13:51:35] &lt;cyball&gt;       ok i should mention that i&#8217;m using the c language
| [Thursday 03 February 2011] [13:51:41] &lt;starkdg&gt;      and ZMQ_XREP in the server part
| [Thursday 03 February 2011] [13:51:47] &lt;cyball&gt;       ok and that is enough ?
| [Thursday 03 February 2011] [13:51:50] &lt;starkdg&gt;      yeah, i use c
| [Thursday 03 February 2011] [13:51:58] &lt;starkdg&gt;      yes, that&#8217;s enough
| [Thursday 03 February 2011] [13:52:07] &lt;cyball&gt;       starkdg: that&#8217;s great
| [Thursday 03 February 2011] [13:52:15] &lt;starkdg&gt;      yeah, it works pretty well
| [Thursday 03 February 2011] [13:53:39] &lt;cyball&gt;       ok i will give it a try :) thx a lot you saved my brain from burning :)
| [Thursday 03 February 2011] [13:55:25] &lt;cyball&gt;       one more question ... if i understood this stuff well ... the ZMQ_REQ waits until the response from the ZMQ_XREP returnes before sending a new request ? is that right ?
| [Thursday 03 February 2011] [14:12:08] &lt;cyball&gt;       starkdg: do you have an hello world sample for that ?
| [Thursday 03 February 2011] [14:12:21] &lt;starkdg&gt;      no i dont
| [Thursday 03 February 2011] [14:12:32] &lt;starkdg&gt;      let me see if i can find it
| [Thursday 03 February 2011] [14:14:16] &lt;starkdg&gt;      wow, they&#8217;ve been busy , its all different now !
| [Thursday 03 February 2011] [14:14:55] &lt;starkdg&gt;      I can give you a link to my project which uses zeromq ,   that might takes some sorting through though
| [Thursday 03 February 2011] [14:16:07] &lt;cyball&gt;       starkdg: that would be great ... i try to find out how to use it :)
| [Thursday 03 February 2011] [14:16:17] &lt;starkdg&gt;      cyball:  you can pick through the source here: <a class="reference external" href="http://code.google.com/p/audioscout/">http://code.google.com/p/audioscout/</a>
| [Thursday 03 February 2011] [14:16:36] &lt;starkdg&gt;      that&#8217;s my project i&#8217;m working on ,  the source you can browse through, or download the project
| [Thursday 03 February 2011] [14:18:03] &lt;cyball&gt;       ok thx a lot i&#8217;ve found already the client code with ZMQ_REQ :-)
| [Thursday 03 February 2011] [14:18:35] &lt;starkdg&gt;      yeah, the code with XREP you will see in auscout.c
| [Thursday 03 February 2011] [14:18:53] &lt;guido_g&gt;      for examples and explanations always see <a class="reference external" href="http://zguide.zeromq.org/chapter:all">http://zguide.zeromq.org/chapter:all</a>
| [Thursday 03 February 2011] [14:19:37] &lt;guido_g&gt;      advanced routing stuff is in chapter three
| [Thursday 03 February 2011] [14:20:00] &lt;starkdg&gt;      guido_g: he was looking for an example of using REQ socket connecting to XREP ,  i couldnt find that specific example.
| [Thursday 03 February 2011] [14:20:04] &lt;guido_g&gt;      it also explains the parts of req/rep messages and shows some tricks
| [Thursday 03 February 2011] [14:20:31] &lt;starkdg&gt;      ive noticed things have been busy on the site,  alot more additions.
| [Thursday 03 February 2011] [14:24:37] &lt;cyball&gt;       guido_g: thx a lot i&#8217;ve found now the samples for ZMQ_REQ and ZMQ_XREP
| [Thursday 03 February 2011] [14:25:04] &lt;cyball&gt;       i think it should be enoug information for now -.... :-) thx for helping
| [Thursday 03 February 2011] [14:25:29] &lt;cyball&gt;       by the way ... ZeroMQ is really a great think :)
| [Thursday 03 February 2011] [14:31:22] &lt;Slurpy&gt;       hello
| [Thursday 03 February 2011] [14:38:02] &lt;Slurpy&gt;       I have a bit of a high-level question regarding the use of 0mq.  Ultimately I think I understand the examples in the documentation.  I have a business need where I can have logical queues that are serviced by more than 1 process (or server).  I&#8217;m wondering if there is a pattern that makes sense with 0mq.  I know a client can connect to multiple sockets, so I can have more than one server serving a logical connection.  Seems a bit mess
| [Thursday 03 February 2011] [14:45:35] &lt;sustrik&gt;      Slurpy: what you want afaiu is having a device in the middle
| [Thursday 03 February 2011] [14:47:10] &lt;guido_g&gt;      and, of course, reading the guide :)
| [Thursday 03 February 2011] [15:12:54] &lt;cremes&gt;       cyball: <a class="reference external" href="http://www.zeromq.org/tutorials:xreq-and-xrep">http://www.zeromq.org/tutorials:xreq-and-xrep</a>
| [Thursday 03 February 2011] [15:13:10] &lt;cremes&gt;       for some reason that doc doesn&#8217;t show up on any of the community pages
| [Thursday 03 February 2011] [15:13:15] &lt;cremes&gt;       you can only find it by searching for it
| [Thursday 03 February 2011] [15:21:36] &lt;cyball&gt;       cremes: thx
| [Thursday 03 February 2011] [15:22:07] &lt;sustrik&gt;      looks like there are some inaccessible pages on the website
| [Thursday 03 February 2011] [15:22:18] &lt;sustrik&gt;      presumably, some reorg is needed
| [Thursday 03 February 2011] [15:22:41] &lt;cremes&gt;       yep, all of the tutorials are orphaned
| [Thursday 03 February 2011] [15:24:07] &lt;sustrik&gt;      should we introduce a &#8220;tutorial&#8221; section?
| [Thursday 03 February 2011] [15:24:20] &lt;sustrik&gt;      or does it fit somewhere else?
| [Thursday 03 February 2011] [15:24:30] &lt;sustrik&gt;      whitepapers maybe?
| [Thursday 03 February 2011] [15:24:38] &lt;sustrik&gt;      rename whitepaper-&gt;articles
| [Thursday 03 February 2011] [15:24:43] &lt;sustrik&gt;      and place tutorials there?
| [Thursday 03 February 2011] [15:27:09] &lt;cremes&gt;       i think we should add back a tutorials page
| [Thursday 03 February 2011] [15:27:15] &lt;guido_g&gt;      imho articles section would be a good idea
| [Thursday 03 February 2011] [15:30:49] &lt;cyball&gt;       i have found this really nice multithreaded hello world server is it possible to get some subscriber do the work of the threads ?
| [Thursday 03 February 2011] [15:30:53] &lt;guido_g&gt;      anyhow, a cleanup would be nice, some links lead to non-existing pages
| [Thursday 03 February 2011] [15:31:26] &lt;guido_g&gt;      like <a class="reference external" href="http://www.zeromq.org/tutorials:traffic-monitoring">http://www.zeromq.org/tutorials:traffic-monitoring</a>
| [Thursday 03 February 2011] [15:36:52] &lt;sustrik&gt;      where&#8217;s the link?
| [Thursday 03 February 2011] [15:38:38] &lt;guido_g&gt;      <a class="reference external" href="http://www.zeromq.org/area:whitepapers">http://www.zeromq.org/area:whitepapers</a>  &lt;- Traffic monitoring
| [Thursday 03 February 2011] [15:40:51] &lt;cyball&gt;       there is also no working link to the zqm_device function
| [Thursday 03 February 2011] [15:41:53] &lt;cyball&gt;       <a class="reference external" href="http://api.zeromq.org/zmq_device.html">http://api.zeromq.org/zmq_device.html</a>
| [Thursday 03 February 2011] [15:42:14] &lt;sustrik&gt;      guido_g: ok, removed
| [Thursday 03 February 2011] [15:42:25] &lt;sustrik&gt;      cyball: where&#8217;s the link?
| [Thursday 03 February 2011] [15:43:02] &lt;guido_g&gt;      sustrik: great, thanks!
| [Thursday 03 February 2011] [15:43:22] &lt;cyball&gt;       <a class="reference external" href="http://zguide.zeromq.org/chapter:all">http://zguide.zeromq.org/chapter:all</a> #Built in Devices under Figure 20
| [Thursday 03 February 2011] [15:45:36] &lt;sustrik&gt;      actually, it turns out there&#8217;s in no zmq_device man page
| [Thursday 03 February 2011] [15:45:48] &lt;sustrik&gt;      i wonder how that link have got into the guide
| [Thursday 03 February 2011] [15:47:08] &lt;cyball&gt;       sustrik: that is act of nature behind control :)
| [Thursday 03 February 2011] [15:47:20] &lt;sustrik&gt;      :)
| [Thursday 03 February 2011] [15:49:47] &lt;cyball&gt;       is it possible to replace the workers in the multithreaded hello world sample with subscribers ? that was the reason checking out zmq_device there seems to be a FORWARDER flag ... could that be a solution ? :)
| [Thursday 03 February 2011] [15:50:28] &lt;sustrik&gt;      you need a PUB/SUB device, right?
| [Thursday 03 February 2011] [15:50:39] &lt;sustrik&gt;      if so, yes, use forwarder device
| [Thursday 03 February 2011] [15:52:18] &lt;cyball&gt;       sustrik: but which parameter does it need .... for the clients workes it is fine rmq_device(FORWARDER, clients, ????) but i do not have subscribers or somethink similar ...
| [Thursday 03 February 2011] [15:52:57] &lt;sustrik&gt;      ?
| [Thursday 03 February 2011] [15:53:26] &lt;cyball&gt;       ohhh sorry i got it now
| [Thursday 03 February 2011] [15:53:42] &lt;cyball&gt;       it was a little bit misunderstood because of the words clients and workers
| [Thursday 03 February 2011] [15:53:47] &lt;guido_g&gt;      btw, it&#8217;s all in the guide
| [Thursday 03 February 2011] [15:54:02] &lt;cyball&gt;       yes sorry i realized to late that this are sockets
| [Thursday 03 February 2011] [15:54:15] &lt;cyball&gt;       i guess i need a break
| [Thursday 03 February 2011] [15:54:16] &lt;cyball&gt;       :)
| [Thursday 03 February 2011] [15:58:05] &lt;_jud&gt; hey sustrik: what is the current status of xpub/xsub w/ pub side filtering?
| [Thursday 03 February 2011] [16:05:56] &lt;sustrik&gt;      _jud: the ongoing work is on sub-forward branch
| [Thursday 03 February 2011] [16:06:33] &lt;sustrik&gt;      it propagates the subscriptions upstream
| [Thursday 03 February 2011] [16:06:48] &lt;sustrik&gt;      what&#8217;s missing is actual filtering on pub side
| [Thursday 03 February 2011] [16:07:18] &lt;_jud&gt; I have been trying to keep up on the mailing list
| [Thursday 03 February 2011] [16:08:54] &lt;jhawk28&gt;      silly question: what will it be called when the xpub gets extended?
| [Thursday 03 February 2011] [16:09:01] &lt;jhawk28&gt;      :)
| [Thursday 03 February 2011] [16:09:03] &lt;_jud&gt; I&#8217;ve been wanting to use 0mq in a ticker plant
| [Thursday 03 February 2011] [16:10:46] &lt;sustrik&gt;      _jud: yeah, subscription forwarding is what&#8217;s missing for 0mq to be a sane option for market data distribution
| [Thursday 03 February 2011] [16:11:01] &lt;sustrik&gt;      jhawk28: yes, the names are lame
| [Thursday 03 February 2011] [16:11:22] &lt;sustrik&gt;      it&#8217;s actually two layers of the stack
| [Thursday 03 February 2011] [16:11:29] &lt;sustrik&gt;      X sockets are like IP
| [Thursday 03 February 2011] [16:11:35] &lt;sustrik&gt;      non-X sockets are like TCP
| [Thursday 03 February 2011] [16:11:49] &lt;sustrik&gt;      no idea how to formalise that decently
| [Thursday 03 February 2011] [16:12:59] &lt;_jud&gt; sustrik: when you say sub forwarding - I assume that encompasses pub filtering also?
| [Thursday 03 February 2011] [16:13:09] &lt;sustrik&gt;      yes
| [Thursday 03 February 2011] [16:13:34] &lt;sustrik&gt;      the whole thing consist from two parts
| [Thursday 03 February 2011] [16:13:43] &lt;sustrik&gt;      1. pass the subsription upstream
| [Thursday 03 February 2011] [16:13:52] &lt;sustrik&gt;      2. do the filtering on the most upstream node
| [Thursday 03 February 2011] [16:14:52] &lt;_jud&gt; in regular pub/sub, all nodes just rebroadcast, correct?
| [Thursday 03 February 2011] [16:15:10] &lt;sustrik&gt;      right
| [Thursday 03 February 2011] [16:15:31] &lt;sustrik&gt;      that&#8217;s the way it work now
| [Thursday 03 February 2011] [16:15:35] &lt;_jud&gt; just trying to clear up my surface knowledge of the 0mq layout
| [Thursday 03 February 2011] [16:16:00] &lt;_jud&gt; I will be monitoring the sub-forward branch
| [Thursday 03 February 2011] [16:16:03] &lt;sustrik&gt;      ah, you are asking about distinction beween X and non-X sockets, right?
| [Thursday 03 February 2011] [16:16:34] &lt;_jud&gt; well, yes
| [Thursday 03 February 2011] [16:17:03] &lt;sustrik&gt;      X sockets are to be used by intermediate nodes
| [Thursday 03 February 2011] [16:17:19] &lt;sustrik&gt;      you can recv() a subsctiption on XPUB socket
| [Thursday 03 February 2011] [16:17:33] &lt;sustrik&gt;      and send() a subscription to XSUB socket
| [Thursday 03 February 2011] [16:17:44] &lt;sustrik&gt;      PUB and SUB are for endpoints
| [Thursday 03 February 2011] [16:18:08] &lt;sustrik&gt;      the subsctiption are mananged automatically for you
| [Thursday 03 February 2011] [16:18:21] &lt;sustrik&gt;      no need to explicitly send/recv them
| [Thursday 03 February 2011] [16:19:20] &lt;_jud&gt; so when pub filtering is implimented
| [Thursday 03 February 2011] [16:19:39] &lt;_jud&gt; it won&#8217;t require the use of X sockets unless their are intermediaries?
| [Thursday 03 February 2011] [16:20:51] &lt;sustrik&gt;      yes
| [Thursday 03 February 2011] [16:20:59] &lt;sustrik&gt;      it will be opaque for you
| [Thursday 03 February 2011] [16:21:04] &lt;_jud&gt; ahhh
| [Thursday 03 February 2011] [16:21:15] &lt;sustrik&gt;      X sockets are meant only for implemeting devices
| [Thursday 03 February 2011] [16:21:42] &lt;sustrik&gt;      it&#8217;s similar to IP
| [Thursday 03 February 2011] [16:21:51] &lt;sustrik&gt;      normally, you don&#8217;t use IP directly
| [Thursday 03 February 2011] [16:21:57] &lt;_jud&gt; ah, thanks for clearing that up
| [Thursday 03 February 2011] [16:22:04] &lt;sustrik&gt;      unless you want to implement a router or somesuch
| [Thursday 03 February 2011] [16:22:37] &lt;_jud&gt; thanks for that sustrik
| [Thursday 03 February 2011] [19:10:30] &lt;cyball&gt;       hi ... is there a way to read a message and after that to send it to a message queue ?
| [Thursday 03 February 2011] [19:11:03] &lt;cyball&gt;       or to switch between message types ?
| [Thursday 03 February 2011] [19:58:04] &lt;mikko&gt;        cyball: what do you mean?
| [Thursday 03 February 2011] [20:00:23] &lt;hero&gt; hi
| [Thursday 03 February 2011] [20:00:28] &lt;mikko&gt;        hello
| [Thursday 03 February 2011] [20:01:16] &lt;nathanmarz&gt;   i&#8217;m getting some strange errors from zeromq
| [Thursday 03 February 2011] [20:01:33] &lt;stodge&gt;       Is there a performance hit using the Java bindings for zeromq? I assume it uses jini?
| [Thursday 03 February 2011] [20:02:04] &lt;mikko&gt;        stodge: yes, it uses jni
| [Thursday 03 February 2011] [20:02:20] &lt;stodge&gt;       So I presume there&#8217;s a performance hit?
| [Thursday 03 February 2011] [20:02:24] &lt;mikko&gt;        stodge: performance hit compared to what?
| [Thursday 03 February 2011] [20:02:44] &lt;stodge&gt;       If it were a native java app with no jini calls
| [Thursday 03 February 2011] [20:02:51] &lt;stodge&gt;       Significant
| [Thursday 03 February 2011] [20:03:09] &lt;stodge&gt;       Maybe that&#8217;s not a reaonable question
| [Thursday 03 February 2011] [20:03:56] &lt;mikko&gt;        i dont really know the amount of overhead jni adds
| [Thursday 03 February 2011] [20:04:57] &lt;stodge&gt;       Me either
| [Thursday 03 February 2011] [20:04:58] &lt;stodge&gt;       :)
| [Thursday 03 February 2011] [20:05:51] &lt;mikko&gt;        but having native java app would mean replicating all zeromq logic in java
| [Thursday 03 February 2011] [20:05:56] &lt;mikko&gt;        so that doesnt seem appealing
| [Thursday 03 February 2011] [20:06:23] &lt;stodge&gt;       true
| [Thursday 03 February 2011] [20:06:57] &lt;stodge&gt;       I don&#8217;t meant this in a negative sense, but I understand that rabbitmq has a native java library?
| [Thursday 03 February 2011] [20:07:58] &lt;stodge&gt;       I could be wrong
| [Thursday 03 February 2011] [20:08:34] &lt;mikko&gt;        probably almost any amqp client could communicate with it
| [Thursday 03 February 2011] [20:08:49] &lt;stodge&gt;       true
| [Thursday 03 February 2011] [20:09:04] &lt;stodge&gt;       zeromq has reliable multicast? Still reading through that long doc
| [Thursday 03 February 2011] [20:10:26] &lt;stodge&gt;       Ah pgm
| [Thursday 03 February 2011] [20:17:40] &lt;stodge&gt;       Hmm anyone know of a python/zeromq example of pgm
| [Thursday 03 February 2011] [20:26:04] &lt;mikko&gt;        stodge: its not really much different from using any other transport
| [Thursday 03 February 2011] [20:26:07] &lt;mikko&gt;        just different dsn
| [Thursday 03 February 2011] [20:26:37] &lt;mikko&gt;        anyways, off to bed
| [Thursday 03 February 2011] [20:26:37] &lt;mikko&gt;        nn
| [Thursday 03 February 2011] [20:38:52] &lt;stodge&gt;       thanks
| [Friday 04 February 2011] [00:31:28] &lt;kabs&gt;   As per my question above &#8220;Hello, in pub-sub model , if sub starts later and pub started earlier all messages by pub will be dropped. Is there a way to buffer those messages ( with some buffer limit) so that they can sent to subscriber joining later. Can I get some link to go through it or if it is there in zeroMQ guide can someone point out which section it is ??&#8221;
| [Friday 04 February 2011] [00:32:22] &lt;kabs&gt;   sustrik:Then how can be sync pub-sub there in one way in the zeroMQ guide , in chapter 2 in Node Coordination section, but it expect us pub to know the number of subscriber which is not a real world scenerio , how can be sync up pub-sub
| [Friday 04 February 2011] [01:36:44] &lt;cyball&gt; mikko: i mean is there a way to have a look inside the message to define the type of the message an base o that to rout the request to a queue that can handle the message type ?
| [Friday 04 February 2011] [01:40:14] &lt;guido_g&gt;        cyball: see the guide, there is a lot about routing
| [Friday 04 February 2011] [01:40:14] &lt;guido_g&gt;        and: you&#8217;re defining what&#8217;s in the message, mq doesn&#8217;t do anything w/ the your payload
| [Friday 04 February 2011] [01:40:14] &lt;guido_g&gt;        s/your//
| [Friday 04 February 2011] [01:40:22] &lt;cyball&gt; guido_g: yes i know ... it is some times much easier to aks first if it is there or not :)
| [Friday 04 February 2011] [01:43:11] &lt;guido_g&gt;        cyball: sure, why invest your own time when you can waste the time of others
| [Friday 04 February 2011] [01:43:30] &lt;guido_g&gt;        cyball: it&#8217;s a very fast and safe way to be ignored
| [Friday 04 February 2011] [01:45:19] &lt;cyball&gt; guido_g: it was not my intention to waste the time of others ... and i do not think that the question was about that but by the way discussions like the one we have now is time wasting :)
| [Friday 04 February 2011] [01:46:28] &lt;guido_g&gt;        cyball: sure, from your point of view
| [Friday 04 February 2011] [01:48:03] &lt;guido_g&gt;        cyball: but given that you showed nearly no effort in understanding mq since you&#8217;re here, it is not a waste of time &#8211; from my point of view
| [Friday 04 February 2011] [01:50:08] &lt;cyball&gt; guido_g: i would not say that ... it is sometimes hard to understand written words ... and in some cases it is more efficient to have an discussion about a think to proof also if the idea of the system you want to write is really good or only bullsh*t :)
| [Friday 04 February 2011] [01:51:31] &lt;guido_g&gt;        unfortunately does a &#8220;discussion&#8221; require both sides to something about the topic
| [Friday 04 February 2011] [01:51:38] &lt;guido_g&gt;        <em>to know
| [Friday 04 February 2011] [01:52:23] &lt;cyball&gt; guido_g: i would say the conversation in alwas the key to success but you&#8217;re right about the fact that i do not read all the documentation but if there are such great people like you it is much easier to get involved that is in my point of view the main fact of a community or not ?
| [Friday 04 February 2011] [01:53:14] &lt;guido_g&gt;        no
| [Friday 04 February 2011] [01:53:50] &lt;guido_g&gt;        experience shows that less than 10% of people like you ever come back and contribute
| [Friday 04 February 2011] [01:56:10] &lt;cyball&gt; you&#8217;re right but i guess that i belong to the 10% ... i&#8217;m not a scripting kiddy who makes a lot of fun trying something out and through it away after playing with it ... there is a lot more behind my intention than only have a look on zeromq :)
| [Friday 04 February 2011] [01:56:51] &lt;cyball&gt; but also this information is something you can ask .... as i mentioned i will answer to it and i will contribute if i know enough about it ... this system as i mentioned yesterday is really really great
| [Friday 04 February 2011] [01:58:51] &lt;cyball&gt; i was looking forward to write myself such a system for communication for my project i&#8217;m developing at the moment so that was the reason checking out some of them ... and 0mq is the only one fits to my needs :)
| [Friday 04 February 2011] [02:06:07] &lt;guido_g&gt;        guess how often i must have read things like these...
| [Friday 04 February 2011] [02:07:02] &lt;guido_g&gt;        in short agin: show your effort and you&#8217;ll receive much more answers and insight
| [Friday 04 February 2011] [02:07:05] &lt;cyball&gt; probably every time of the 90% from the of the people do not belong to the 10% you mentioned ? :)
| [Friday 04 February 2011] [02:07:22] &lt;guido_g&gt;        what?
| [Friday 04 February 2011] [02:07:48] &lt;cyball&gt; i guess you read this very often
| [Friday 04 February 2011] [02:07:55] &lt;guido_g&gt;        right
| [Friday 04 February 2011] [02:08:00] &lt;guido_g&gt;        for decades
| [Friday 04 February 2011] [02:13:40] &lt;cyball&gt; ok i will have a look on the manual now ... you have a lot of experinces and you are still patient ... thx for your time i will ask if there is something not clear in the manual :)
| [Friday 04 February 2011] [02:13:52] &lt;sustrik&gt;        :)
| [Friday 04 February 2011] [03:57:34] &lt;Guthur&gt; is there a limit of how many subscribers can simultaneously connect to tcp publisher?
| [Friday 04 February 2011] [03:59:36] &lt;mikko&gt;  Guthur: no, not really
| [Friday 04 February 2011] [03:59:46] &lt;mikko&gt;  apart from the obvious limits of hardware / operating system etc
| [Friday 04 February 2011] [04:01:23] &lt;Guthur&gt; i seem to be getting an unhandled exception when I try to connect multiple times, if I put in a wait it is ok
| [Friday 04 February 2011] [04:01:30] &lt;Guthur&gt; I am using the CLR binding
| [Friday 04 February 2011] [04:01:58] &lt;mikko&gt;  Guthur: which exception is it?
| [Friday 04 February 2011] [04:02:46] &lt;Guthur&gt; that&#8217;s the horrible thing, it passes through the .NET app unhandled, so it just says unhandle exception in win32 code
| [Friday 04 February 2011] [04:03:10] &lt;mikko&gt;  can you attach a debugger and check ?
| [Friday 04 February 2011] [04:03:25] &lt;Guthur&gt; I probably have implement a global unhandled exception handler to catch it
| [Friday 04 February 2011] [04:03:35] &lt;mikko&gt;  have you tried to reproduce it on other machines?
| [Friday 04 February 2011] [04:03:46] &lt;mikko&gt;  if it&#8217;s reproducable you could open an issue with reproduce code
| [Friday 04 February 2011] [04:04:09] &lt;sustrik&gt;        Guthur: are you saying that clrzmq throws a generic exception?
| [Friday 04 February 2011] [04:04:20] &lt;sustrik&gt;        then it&#8217;s a bug in clrzmq
| [Friday 04 February 2011] [04:04:27] &lt;mikko&gt;  sustrik: i think it might be C++ exception from unmanaged code
| [Friday 04 February 2011] [04:04:35] &lt;mikko&gt;  which bubbles up and terminates the program
| [Friday 04 February 2011] [04:04:39] &lt;mikko&gt;  (i assume)
| [Friday 04 February 2011] [04:04:40] &lt;sustrik&gt;        what does that mean?
| [Friday 04 February 2011] [04:04:49] &lt;sustrik&gt;        ah
| [Friday 04 February 2011] [04:04:51] &lt;sustrik&gt;        got it
| [Friday 04 February 2011] [04:05:07] &lt;sustrik&gt;        a C++ exception that gets to C# code
| [Friday 04 February 2011] [04:05:19] &lt;mikko&gt;  thats how i understood it
| [Friday 04 February 2011] [04:05:19] &lt;Guthur&gt; yeah, clr does provide a mechanism to catch these though, I&#8217;ll try adding it
| [Friday 04 February 2011] [04:05:33] &lt;sustrik&gt;        wait a sec
| [Friday 04 February 2011] [04:05:39] &lt;sustrik&gt;        clrzmq is using C API
| [Friday 04 February 2011] [04:05:44] &lt;sustrik&gt;        not C++ API
| [Friday 04 February 2011] [04:05:46] &lt;sustrik&gt;        underneath
| [Friday 04 February 2011] [04:05:53] &lt;sustrik&gt;        so there should be no C++ exceptions
| [Friday 04 February 2011] [04:06:24] &lt;sustrik&gt;        C API returns errnos...
| [Friday 04 February 2011] [04:07:14] &lt;Guthur&gt; I should be catching any exceptions in the clrzmq code
| [Friday 04 February 2011] [04:07:18] &lt;Guthur&gt; it is very strange
| [Friday 04 February 2011] [04:07:40] &lt;sustrik&gt;        what i&#8217;m saying is that there are no exceptions from 0mq
| [Friday 04 February 2011] [04:07:59] &lt;sustrik&gt;        so if there&#8217;s an exception is rather generated by clrzmq
| [Friday 04 February 2011] [04:08:41] &lt;sustrik&gt;        what&#8217;s the win32 err code you are getting btw?
| [Friday 04 February 2011] [04:09:11] &lt;Guthur&gt; 1 min
| [Friday 04 February 2011] [04:09:58] &lt;Guthur&gt; i get the JIT debugger saying unhandled win32 exception
| [Friday 04 February 2011] [04:10:23] &lt;sustrik&gt;        no further info?
| [Friday 04 February 2011] [04:11:03] &lt;sustrik&gt;        mikko: btw have you seen the email from neale?
| [Friday 04 February 2011] [04:11:28] &lt;sustrik&gt;        the one about system z
| [Friday 04 February 2011] [04:12:18] &lt;Guthur&gt; sustrik: No, it just asks to connect the debugger, but the problem is a debugger is already attached, I am running the server app in visual studio in debug mode
| [Friday 04 February 2011] [04:12:50] &lt;sustrik&gt;        yuck :(
| [Friday 04 February 2011] [04:12:57] &lt;Guthur&gt; yeah tell me about it
| [Friday 04 February 2011] [04:14:33] &lt;Guthur&gt; I&#8217;ll add the global handler and see if I get anything more meaninful
| [Friday 04 February 2011] [04:14:39] &lt;sustrik&gt;        ok
| [Friday 04 February 2011] [04:18:08] &lt;mikko&gt;  sustrik: i was just replying it
| [Friday 04 February 2011] [04:18:19] &lt;mikko&gt;  replying to it
| [Friday 04 February 2011] [04:18:42] &lt;mikko&gt;  oddly enough on windows the openpgm installation just disappears occasionally
| [Friday 04 February 2011] [04:18:48] &lt;mikko&gt;  havent really figured out yet what happens
| [Friday 04 February 2011] [04:19:02] &lt;mikko&gt;  but in any case we have a release build with ZeroMQ+OpenPGM for windows
| [Friday 04 February 2011] [04:19:26] &lt;mikko&gt;  http://snapshot.valokuva.org/msvc2008/2011-02-04_09-09-05/ is built from WithOpenPGM configuration
| [Friday 04 February 2011] [04:31:39] &lt;Guthur&gt; the debugger seems to say libzmq is C++
| [Friday 04 February 2011] [04:32:04] &lt;Guthur&gt; I got a debugger attached, all I have is the stack trace though
| [Friday 04 February 2011] [04:33:33] &lt;Guthur&gt; http://paste.lisp.org/display/119368
| [Friday 04 February 2011] [04:37:00] &lt;sustrik&gt;        mikko: congrats!
| [Friday 04 February 2011] [04:37:36] &lt;sustrik&gt;        Guthur: it&#8217;s in C++
| [Friday 04 February 2011] [04:37:41] &lt;sustrik&gt;        but the API is pure C
| [Friday 04 February 2011] [04:38:10] &lt;sustrik&gt;        so no exceptions should pass out of libzmq
| [Friday 04 February 2011] [04:38:13] &lt;Guthur&gt; sustrik: does the stack trace give an clues?
| [Friday 04 February 2011] [04:38:20] &lt;Guthur&gt; an,any
| [Friday 04 February 2011] [04:38:33] &lt;sustrik&gt;        sure, let&#8217;s have a look
| [Friday 04 February 2011] [04:38:43] &lt;mikko&gt;  abort()
| [Friday 04 February 2011] [04:38:48] &lt;mikko&gt;  seems to be an assertion
| [Friday 04 February 2011] [04:41:43] &lt;sustrik&gt;        Guthur: what version of 0mq?
| [Friday 04 February 2011] [04:42:26] &lt;Guthur&gt; 2.0.10
| [Friday 04 February 2011] [04:43:02] &lt;sustrik&gt;        thx
| [Friday 04 February 2011] [04:44:39] &lt;sustrik&gt;        Guthur: i think this is the patch fixed by dhammika in 2.1 some time ago
| [Friday 04 February 2011] [04:44:47] &lt;sustrik&gt;        can you check with latest master?
| [Friday 04 February 2011] [04:45:05] &lt;Guthur&gt; just trying that now, hehe
| [Friday 04 February 2011] [04:45:17] &lt;Guthur&gt; sorry it never occurred to me to try before
| [Friday 04 February 2011] [05:07:18] &lt;Guthur&gt; I am getting the same with 2.1
| [Friday 04 February 2011] [05:07:23] &lt;Guthur&gt; same trace as well
| [Friday 04 February 2011] [05:11:35] &lt;Guthur&gt; oh wait I think this is my fault
| [Friday 04 February 2011] [05:11:56] &lt;Guthur&gt; what is suppose to happen if two sockets try to connect with the same identity
| [Friday 04 February 2011] [05:12:30] &lt;sustrik&gt;        you shouldn&#8217;t do that
| [Friday 04 February 2011] [05:12:39] &lt;sustrik&gt;        but in 2.1 it shouldn&#8217;t fail
| [Friday 04 February 2011] [05:13:07] &lt;sustrik&gt;        the bind side should silently drop the second connection iirc
| [Friday 04 February 2011] [05:13:14] &lt;mikko&gt;  it still asserts
| [Friday 04 February 2011] [05:13:21] &lt;Guthur&gt; Yeah, I don&#8217;t really want to be doing that, but this prototype code, and I haven&#8217;t generated very unique uid
| [Friday 04 February 2011] [05:13:26] &lt;sustrik&gt;        ah, ok
| [Friday 04 February 2011] [05:13:39] &lt;Guthur&gt; will when I remove the set Identity it works
| [Friday 04 February 2011] [05:13:43] &lt;Guthur&gt; well</em>
| [Friday 04 February 2011] [05:14:24] &lt;Guthur&gt; ok, so mystery solved then?
| [Friday 04 February 2011] [05:14:33] &lt;sustrik&gt;        i think so
| [Friday 04 February 2011] [05:15:01] &lt;Guthur&gt; is there any plans to make this scenario a little less fatal
| [Friday 04 February 2011] [05:18:51] &lt;sustrik&gt;        that would be nice
| [Friday 04 February 2011] [05:18:59] &lt;cyball&gt; is there a way to tell the XREP(router) depending on the MessageBody to which XREQ(dealer) to route the message .... i could not figure that out the only way to work on specific messages i found was to use the PubSub scenario but this is only unidirectional so no response will be routed back
| [Friday 04 February 2011] [05:19:02] &lt;sustrik&gt;        nbody volunteered yet though
| [Friday 04 February 2011] [05:20:15] &lt;sustrik&gt;        REP socket routes the reply back to original requester automagically
| [Friday 04 February 2011] [05:21:21] &lt;Guthur&gt; unfortunately I seem to fighting a losing battle to allow the use of ZeroMQ in our app, the team lead is adamant I should use .Net threads with global state instead
| [Friday 04 February 2011] [05:21:30] &lt;Guthur&gt; he is not listening to reason
| [Friday 04 February 2011] [05:22:37] &lt;cyball&gt; yes i know but can i tell the REP(papa) to get only specific messages for example if i have some calculation and some data get from DB i want to make 2 different REP(papas) one for calcucation and one for data
| [Friday 04 February 2011] [05:22:54] &lt;ianbarber&gt;      sustrik - i filed a bug about the dual identity issue by the way. it certainly looks like it should drop, but doesn&#8217;t
| [Friday 04 February 2011] [05:23:37] &lt;ianbarber&gt;      cyball:  the XREP is going to route based on the identity, and based on the first message segment
| [Friday 04 February 2011] [05:24:27] &lt;ianbarber&gt;      so if you had a &#8216;calc&#8217; and a &#8216;data&#8217; identity, you&#8217;d just need to prepend the message with that identity and a blank one before sending it to the xrep.
| [Friday 04 February 2011] [05:25:02] &lt;ianbarber&gt;      that can be in the message body any way you want, just write a bit of code to pull it out and stick it in as a message segment before sending on to the xrep
| [Friday 04 February 2011] [05:27:59] &lt;sustrik&gt;        Guthur: that&#8217;s pretty common occurence
| [Friday 04 February 2011] [05:28:54] &lt;sustrik&gt;        cyball: you have to use two different sockets
| [Friday 04 February 2011] [05:29:08] &lt;sustrik&gt;        so, say calculations are passed on port 5555
| [Friday 04 February 2011] [05:29:15] &lt;sustrik&gt;        and DB data on 5556
| [Friday 04 February 2011] [05:31:34] &lt;cyball&gt; sustrik: is that the only way ?
| [Friday 04 February 2011] [05:31:50] &lt;sustrik&gt;        it&#8217;s the only sensible way
| [Friday 04 February 2011] [05:32:07] &lt;sustrik&gt;        that way your network knows about your feeds
| [Friday 04 February 2011] [05:32:26] &lt;sustrik&gt;        and thus, for example, large DB dataset being passed
| [Friday 04 February 2011] [05:32:34] &lt;sustrik&gt;        doesn&#8217;t block little calc operations
| [Friday 04 February 2011] [05:33:37] &lt;cyball&gt; sustrik: thx
| [Friday 04 February 2011] [05:33:44] &lt;sustrik&gt;        np
| [Friday 04 February 2011] [08:54:30] &lt;mikko&gt;  sustrik: there?
| [Friday 04 February 2011] [08:54:47] &lt;sustrik&gt;        mikko: hi
| [Friday 04 February 2011] [08:54:48] &lt;mikko&gt;  i would like to discuss openpgm situation at some point
| [Friday 04 February 2011] [08:54:54] &lt;sustrik&gt;        sure
| [Friday 04 February 2011] [08:55:02] &lt;mikko&gt;  have you got a long-term vision for it?
| [Friday 04 February 2011] [08:55:02] &lt;sustrik&gt;        i have no idea what&#8217;s going on
| [Friday 04 February 2011] [08:55:16] &lt;mikko&gt;  i am now looking into using the autoconf steven added to openpgm trunk
| [Friday 04 February 2011] [08:55:23] &lt;mikko&gt;  i can get it to build
| [Friday 04 February 2011] [08:55:36] &lt;sustrik&gt;        well, from 30,000 feet
| [Friday 04 February 2011] [08:55:37] &lt;mikko&gt;  but i&#8217;m afraid the way i am doing it at the moment is not portable
| [Friday 04 February 2011] [08:56:00] &lt;sustrik&gt;        the pgm is needed for stock traders, banks etc.
| [Friday 04 February 2011] [08:56:00] &lt;mikko&gt;  so im wondering is the longer-term plan to bundle openpgm with zeromq
| [Friday 04 February 2011] [08:56:18] &lt;mikko&gt;  or is it feasible to ask users to install openpgm if they want to use it with zeromq
| [Friday 04 February 2011] [08:56:39] &lt;mikko&gt;  that would seem like the normal way &#8220;if you compile &#8211;with-pgm make sure you have installed openpgm&#8221;
| [Friday 04 February 2011] [08:56:42] &lt;mikko&gt;  brb
| [Friday 04 February 2011] [08:57:29] &lt;Silly&gt;  huh
| [Friday 04 February 2011] [08:58:17] &lt;sustrik&gt;        well, i am not sure openpgm is moving towards becoming a stand-alone package
| [Friday 04 February 2011] [08:58:34] &lt;sustrik&gt;        it would be ideal if it was so
| [Friday 04 February 2011] [08:58:58] &lt;sustrik&gt;        but we have to be pragmatic at the moment
| [Friday 04 February 2011] [09:03:44] &lt;mikko&gt;  sustrik: i&#8217;m beginning to doubt whether bundling is the pragmatic approach
| [Friday 04 February 2011] [09:04:07] &lt;mikko&gt;  as the problem with the autotools build is that some platforms dont support linking static libraries into shared libraries
| [Friday 04 February 2011] [09:05:06] &lt;mikko&gt;  at least thats my understand
| [Friday 04 February 2011] [09:05:07] &lt;mikko&gt;  ing
| [Friday 04 February 2011] [09:05:18] &lt;sustrik&gt;        i see
| [Friday 04 February 2011] [09:05:25] &lt;mikko&gt;  then again, i dont see why openpgm couldnt be installed as shared library
| [Friday 04 February 2011] [09:05:31] &lt;mikko&gt;  and let libtool worry about the best way
| [Friday 04 February 2011] [09:05:40] &lt;mikko&gt;  but that might cause confusion as well
| [Friday 04 February 2011] [09:05:54] &lt;mikko&gt;  because some people might have openpgm already installed and 0mq would write over that
| [Friday 04 February 2011] [09:05:55] &lt;sustrik&gt;        i have no specific opinion on that
| [Friday 04 February 2011] [09:06:46] &lt;sustrik&gt;        the only goal imo is to make it as easy to build/use as possible
| [Friday 04 February 2011] [09:12:03] &lt;sustrik&gt;        mikko: what are your thoughts atm?
| [Friday 04 February 2011] [09:37:41] &lt;mikko&gt;  sustrik: my current thinking is that those two builds make more sense as separate ones
| [Friday 04 February 2011] [09:37:58] &lt;sustrik&gt;        how would people install it then?
| [Friday 04 February 2011] [09:38:31] &lt;mikko&gt;  execute their build
| [Friday 04 February 2011] [09:38:35] &lt;mikko&gt;  and install shared library
| [Friday 04 February 2011] [09:38:49] &lt;sustrik&gt;        which build?
| [Friday 04 February 2011] [09:39:02] &lt;sustrik&gt;        openpgm?
| [Friday 04 February 2011] [09:39:14] &lt;mikko&gt;  execute openpgm build, install it
| [Friday 04 February 2011] [09:39:21] &lt;mikko&gt;  execute zeromq build with &#8211;with-pgm
| [Friday 04 February 2011] [09:40:10] &lt;sustrik&gt;        well, it makes the whole process 2x as difficult
| [Friday 04 February 2011] [09:40:14] &lt;sustrik&gt;        1. install scons
| [Friday 04 February 2011] [09:40:28] &lt;sustrik&gt;        2. download openpgm (the right version!)
| [Friday 04 February 2011] [09:40:34] &lt;sustrik&gt;        4. build &amp; install
| [Friday 04 February 2011] [09:40:44] &lt;sustrik&gt;        4. install autotools
| [Friday 04 February 2011] [09:40:50] &lt;sustrik&gt;        5. download 0mq
| [Friday 04 February 2011] [09:40:58] &lt;sustrik&gt;        6. build &amp; install
| [Friday 04 February 2011] [09:41:52] &lt;sustrik&gt;        but as i say, i don&#8217;t have a strong opinion
| [Friday 04 February 2011] [09:42:26] &lt;sustrik&gt;        pgm is used by stock traders, which have enough money to actually pay someone to that for them
| [Friday 04 February 2011] [09:42:43] &lt;mikko&gt;  thats not 100% correct now that openpgm has autotools build
| [Friday 04 February 2011] [09:42:45] &lt;sustrik&gt;        or even sponsor binary builds &amp; installers
| [Friday 04 February 2011] [09:42:52] &lt;mikko&gt;  execute ./configure on openpgm, make install
| [Friday 04 February 2011] [09:43:00] &lt;mikko&gt;  execute ./configure &#8211;with-pgm on zeromq, make install
| [Friday 04 February 2011] [09:43:12] &lt;sustrik&gt;        yeah, that&#8217;s better
| [Friday 04 February 2011] [09:43:14] &lt;mikko&gt;  if you use release packages. autotools are needed for trunk version
| [Friday 04 February 2011] [09:43:25] &lt;mikko&gt;  and even that is mitigated with snapshots which have configure script in them
| [Friday 04 February 2011] [09:43:40] &lt;sustrik&gt;        ack
| [Friday 04 February 2011] [09:44:11] &lt;sustrik&gt;        the hardest part, i assume, is getting right versions of 0mq and openpgm
| [Friday 04 February 2011] [09:44:55] &lt;sustrik&gt;        anyway, you are the build system maintainer, so it&#8217;s up to you
| [Friday 04 February 2011] [09:45:50] &lt;sustrik&gt;        i would consult the mailing list first though
| [Friday 04 February 2011] [09:47:59] &lt;drbobbeaty&gt;     I know I&#8217;m only a user, and this is your choice, but as for me, ZeroMQ &#8220;contains&#8221; OpenPGM. There&#8217;s no utility of OpenPGM for me outside of ZeroMQ, and a large part of ZeroMQ (for me) is the epgm transport. So if you unbundle these, it&#8217;s going to make maintenance harder for me. I&#8217;ll have to make sure that no machine in the organization has the &#8220;wrong&#8221; OpenPGM for ZeroMQ, etc.
| [Friday 04 February 2011] [09:48:52] &lt;drbobbeaty&gt;     I know it seems simple to unbundle them, and I can certainly see the advantages, but just one vote from your user base is that in an organization with many machines, this is something that I&#8217;d rather not have to deal with.
| [Friday 04 February 2011] [09:49:54] &lt;sustrik&gt;        that was the point i was trying to make but you are more eloquent than i am :)
| [Friday 04 February 2011] [10:18:57] &lt;edw&gt;    The clojure glue has a destory-socket call which calls the destroy method of a socket. There is no destroy method. There is a close method. Did this ever work (ie was destroy renamed to close) or has it been broken forever?
| [Friday 04 February 2011] [10:20:56] &lt;sustrik&gt;        there&#8217;s no close method in C API
| [Friday 04 February 2011] [10:21:03] &lt;sustrik&gt;        there&#8217;s zmq_close() though
| [Friday 04 February 2011] [10:21:13] &lt;sustrik&gt;        what are you referring to?
| [Friday 04 February 2011] [10:21:43] &lt;edw&gt;    I&#8217;m looking at he jzmq Java bindings. Those have a Socket::close method.
| [Friday 04 February 2011] [10:22:19] &lt;sustrik&gt;        that seems right
| [Friday 04 February 2011] [10:22:42] &lt;sustrik&gt;        i am not aware there was a destroy method originally, but maybe
| [Friday 04 February 2011] [10:22:51] &lt;sustrik&gt;        why not just use close instad of destroy?
| [Friday 04 February 2011] [10:24:39] &lt;edw&gt;    ...which calls the finalizer which calls zmq_close. Mystery solved. I think that the Clojure glue is a piece of fairly shoddy workmanship. Time to fork or re-write it.
| [Friday 04 February 2011] [10:25:39] &lt;edw&gt;    It&#8217;s not idiomatic Clojure e.g. constants look like +this+. And it calls methods that don&#8217;t exist.
| [Friday 04 February 2011] [10:27:27] &lt;sustrik&gt;        sure, go on
| [Friday 04 February 2011] [10:27:32] &lt;edw&gt;    Oh, and it (inaccurately) redefines all the enums in the org.zeromq.ZMQ class. Ugh...
| [Friday 04 February 2011] [10:28:21] &lt;sustrik&gt;        well, it&#8217;s up to you to fix it :)
| [Friday 04 February 2011] [10:30:16] &lt;edw&gt;    Actually, it should probably just be deprecated, as it&#8217;s a molecule-thick layer of sewing machine oil over the JZMQ classes.
| [Friday 04 February 2011] [10:30:44] &lt;edw&gt;    E.g. &#8220;(defn make-context [io-threads] (ZMQ/context io-threads))
| [Friday 04 February 2011] [10:33:16] &lt;sustrik&gt;        maybe the intent was to make the API more clojure-like?
| [Friday 04 February 2011] [10:33:49] &lt;edw&gt;    For sure, but there&#8217;s a better way to do it... I&#8217;m typing away right now...
| [Friday 04 February 2011] [10:45:22] &lt;CIA-21&gt; zeromq2: 03Thijs Terlouw 07master * r042e34a 10/ include/zmq.hpp :
| [Friday 04 February 2011] [10:45:22] &lt;CIA-21&gt; zeromq2: operator void* () added to context_t.
| [Friday 04 February 2011] [10:45:22] &lt;CIA-21&gt; zeromq2: Makes it possible to share the context from C++ to C.
| [Friday 04 February 2011] [10:45:22] &lt;CIA-21&gt; zeromq2: Signed-off-by: Thijs Terlouw &lt;thijsterlouw&#64;gmail.com&gt; - http://bit.ly/ew59JP
| [Friday 04 February 2011] [13:04:04] &lt;Esmil&gt;  Hmm.. suppose I have a select()/epoll()/what-have-you mainloop running, is there a way I can get events on a filedescripter whenever a socket has a new message?
| [Friday 04 February 2011] [13:05:25] &lt;Esmil&gt;  A zeromq socket that is
| [Friday 04 February 2011] [13:12:47] &lt;Steve-o&gt;        try zmq_poll
| [Friday 04 February 2011] [13:14:51] &lt;Esmil&gt;  Yeah, but that means I&#8217;d have to rewrite the mainloop to use zmq_poll. I&#8217;m quite happy with libev
| [Friday 04 February 2011] [13:18:07] &lt;Steve-o&gt;        check the mailling list archive, it certainly has come up before
| [Friday 04 February 2011] [13:27:37] &lt;Esmil&gt;  Damn, once again I&#8217;m ahead of time :P http://article.gmane.org/gmane.network.zeromq.devel/1628
| [Friday 04 February 2011] [13:33:34] &lt;mikko&gt;  good evening
| [Friday 04 February 2011] [13:34:04] &lt;mikko&gt;  Esmil: yes there is
| [Friday 04 February 2011] [13:34:23] &lt;mikko&gt;  Esmil: with 2.1.x you can use zmq_getsockopt( ZMQ_FD
| [Friday 04 February 2011] [13:35:19] &lt;Esmil&gt;  mikko: Cool! What version is the reference manual on zeromq.org refering to?
| [Friday 04 February 2011] [13:35:34] &lt;mikko&gt;  2.0.x i think
| [Friday 04 February 2011] [13:35:41] &lt;Esmil&gt;  Ahh, I see. Thanks
| [Friday 04 February 2011] [13:41:26] &lt;Esmil&gt;  2.0.x can speak with 2.1.x right? Or is there a reason my distribution hasn&#8217;t updated to 2.1.x yet?
| [Friday 04 February 2011] [13:42:41] &lt;Esmil&gt;  Ohh, it&#8217;s considered beta
| [Friday 04 February 2011] [13:42:50]   * Esmil should have read the NEWS file first &gt;.&lt;
| [Friday 04 February 2011] [13:43:38] &lt;mikko&gt;  can speak with yes
| [Friday 04 February 2011] [13:43:50] &lt;Esmil&gt;  Great
| [Friday 04 February 2011] [13:43:58] &lt;mikko&gt;  there are slight changes in the api so code written for 2.0.x might require modifications
| [Friday 04 February 2011] [13:44:21] &lt;mikko&gt;  the biggest changes are in zmq_term semantics and that zmq_context takes one param instead of many
| [Friday 04 February 2011] [13:45:38] &lt;Esmil&gt;  I see
| [Friday 04 February 2011] [13:47:13] &lt;mikko&gt;  drbobbeaty: i am not looking to necessarily uncouple
| [Friday 04 February 2011] [13:47:26] &lt;mikko&gt;  but what i am looking at is possible linking shared library rather than static
| [Friday 04 February 2011] [13:47:31] &lt;mikko&gt;  Steve-o: there?
| [Friday 04 February 2011] [13:48:11] &lt;mikko&gt;  so, i was building OpenPGM autoconf builds and ran into following thing which im not sure how to solve the cleanest way:
| [Friday 04 February 2011] [13:48:38] &lt;mikko&gt;  a) running the autoconf build generates static libraries that are non PIC by default
| [Friday 04 February 2011] [13:48:56] &lt;mikko&gt;  b) on 64bit linux you need to have pic static libraries to link them into shared libraries
| [Friday 04 February 2011] [13:49:01] &lt;mikko&gt;  c) this is probably not portable
| [Friday 04 February 2011] [13:49:14] &lt;drbobbeaty&gt;     mikko: I&#8217;m all for linking shared libs - even preferred. But it&#8217;s the ability to have it built all at once, so that I can build RPMs and Ubuntu deb packages and have it be treated as a single, atomic, deliverable.
| [Friday 04 February 2011] [13:50:57] &lt;Steve-o&gt;        k
| [Friday 04 February 2011] [13:51:13] &lt;Steve-o&gt;        I normally make a -pic lib in scons
| [Friday 04 February 2011] [13:51:45] &lt;Steve-o&gt;        is there an easy way to do this with libtool &amp; automake?
| [Friday 04 February 2011] [13:52:41] &lt;Steve-o&gt;        I thought the .la lib was supposed to be PIC
| [Friday 04 February 2011] [13:53:06] &lt;Steve-o&gt;        otherwise libtool couldn&#8217;t build the shared library?
| [Friday 04 February 2011] [14:06:55] &lt;mikko&gt;  .la can contain shared and static
| [Friday 04 February 2011] [14:07:02] &lt;mikko&gt;  shared -pic and static non pic
| [Friday 04 February 2011] [14:07:15] &lt;mikko&gt;  at least on my system
| [Friday 04 February 2011] [14:07:36] &lt;mikko&gt;  i could link against the libtool archive in which case libtool can decide what to link against
| [Friday 04 February 2011] [14:24:01] &lt;zchrish&gt;        Question: What happens to the server, in a XREQ/XREP pattern, when a client dies after sending a request but before it receives the response from its query?
| [Friday 04 February 2011] [14:25:00] &lt;cremes&gt; zchrish: when the server tries to send the reply, it should note that the peer is gone and drop the packet
| [Friday 04 February 2011] [14:26:21] &lt;zchrish&gt;        cremes: I assume this failure mechanism is modeled in zeromq and, therefore, handles the situation ok. Will a reconnect from the same client pose any issue I should be aware of?
| [Friday 04 February 2011] [14:27:46] &lt;zchrish&gt;        I.E. the client program dies and it is restarted from the OS.
| [Friday 04 February 2011] [14:28:47] &lt;zchrish&gt;        In a different situation, suppose a server dies, what should the client do to restart w/o resorting to a complete program restart?
| [Friday 04 February 2011] [14:29:10] &lt;zchrish&gt;        Thank you.
| [Friday 04 February 2011] [14:52:56] &lt;Leolo_3&gt;        zchrish : depends on weither you gave the socket an identity
| [Friday 04 February 2011] [15:33:58] &lt;zchrish&gt;        Leolo_3: No, I didn&#8217;t explicity give an identity.
| [Friday 04 February 2011] [15:35:21] &lt;Leolo_3&gt;        then the messages get dropped
| [Friday 04 February 2011] [15:35:48] &lt;Leolo_3&gt;        for your server dies senario : zeromq does automatic reconnect
| [Friday 04 February 2011] [15:37:34] &lt;zchrish&gt;        I am not worried about dropped messages. I just I am trying to learn the proper reconnection strategy. For example, do I need to shut down the zmq::context and start another or do I simply close and reopen?
| [Friday 04 February 2011] [15:38:50] &lt;zchrish&gt;        My current situation appears that clients hang during a server crash and must be shut down (ctrl+c) and restarted.
| [Friday 04 February 2011] [15:39:46] &lt;zchrish&gt;        The docs don&#8217;t discuss this area much. Clients don&#8217;t have an issue if the server shuts down gracefully.
| [Friday 04 February 2011] [15:43:43] &lt;Steve-o&gt;        so the clients think the TCP socket is still open
| [Friday 04 February 2011] [15:44:05] &lt;Steve-o&gt;        I think this was discovered before as reasons for implementing heartbeats
| [Friday 04 February 2011] [15:44:15] &lt;Steve-o&gt;        in the list somewhere
| [Friday 04 February 2011] [15:50:01] &lt;Steve-o&gt;        &gt;&gt; http://lists.zeromq.org/pipermail/zeromq-dev/2010-October/007011.html
| [Friday 04 February 2011] [16:50:38] &lt;sustrik&gt;        zchris: to be resilient in case of server failure
| [Friday 04 February 2011] [16:50:47] &lt;sustrik&gt;        you have to timeout waiting for the reply
| [Friday 04 February 2011] [16:50:55] &lt;sustrik&gt;        and resend the request
| [Friday 04 February 2011] [16:51:12] &lt;sustrik&gt;        in theory, 0mq should do that for you, but it&#8217;s not yet implemented :(
| [Friday 04 February 2011] [18:31:44] &lt;zchrish&gt;        Yes, using heartbeats is what I figured I needed to do. Thank you.
| [Friday 04 February 2011] [18:33:53] &lt;zchrish&gt;        How best to set a timeout for : string <em>string = s_recv (socket) ?
| [Friday 04 February 2011] [18:55:26] &lt;Steve-o&gt;        synchronous or asynchronous?
| [Friday 04 February 2011] [18:55:57] &lt;zchrish&gt;        In my case, I am using XREP/XREQ
| [Friday 04 February 2011] [19:13:55] &lt;Steve-o&gt;        but how do you want the timeout handled?
| [Friday 04 February 2011] [19:16:35] &lt;zchrish&gt;        Well, I will implement a handler of course. I am just trying to figure out how to configure 0mq to implement a timeout.
| [Friday 04 February 2011] [20:10:51] &lt;Leolo_3&gt;        zchrish : zmq_poll() with a timeout value
| [Friday 04 February 2011] [20:25:46] &lt;zchrish&gt;        I see; thank you.
| [Saturday 05 February 2011] [04:52:40] &lt;jugg&gt; running ./autogen.sh using autoconf 2.67 (as installed from debian 6), produces this: configure.in:9: warning: AC_INIT: not a literal: m4_esyscmd([./version.sh | tr -d &#8216;n&#8217;])  And this patch fixes it: http://paste2.org/p/1229684  - Will this cause issues on other systems? If not I&#8217;ll go through the steps of submitting the patch.
| [Saturday 05 February 2011] [05:50:08] &lt;Guthur&gt;       Has the reason been identified why when two sockets connect with the same identity it crashes the destination?
| [Saturday 05 February 2011] [06:13:01] &lt;sustrik&gt;      jugg: you have to speak to mikko
| [Saturday 05 February 2011] [06:13:08] &lt;sustrik&gt;      he&#8217;s in charge of the build system
| [Saturday 05 February 2011] [06:13:30] &lt;sustrik&gt;      Guthur: i assume there&#8217;s an assertion there
| [Saturday 05 February 2011] [06:13:33] &lt;sustrik&gt;      not sure
| [Saturday 05 February 2011] [06:22:24] &lt;Guthur&gt;       right, assert(_engine)
| [Saturday 05 February 2011] [06:22:35] &lt;Guthur&gt;       or engine_ rather, let me find the line
| [Saturday 05 February 2011] [06:22:47] &lt;Guthur&gt;       it was on that stack trace I posted yesterday
| [Saturday 05 February 2011] [06:25:15] &lt;Guthur&gt;       I personally feel it should be reasonably high priority bug, having clients being able to crash the server so easily is not good
| [Saturday 05 February 2011] [06:26:05] &lt;Guthur&gt;       and from what I have experienced the server app will not even receive reasonable feedback on the error
| [Saturday 05 February 2011] [06:26:39] &lt;sustrik&gt;      yup, feel free to fix it
| [Saturday 05 February 2011] [06:29:56] &lt;Guthur&gt;       the assert in question is zmq_assert (engine_) in zmq::session_t::process_attach
| [Saturday 05 February 2011] [06:34:19] &lt;Guthur&gt;       peer_identity_ would be the identity, correct?
| [Saturday 05 February 2011] [06:37:43] &lt;sustrik&gt;      peer_identity_ is the identity of the peer socket
| [Saturday 05 February 2011] [06:51:35] &lt;Guthur&gt;       I&#8217;m going to slot this on to my todo list, but lack of inner zeromq knowledge will make it hard to find
| [Saturday 05 February 2011] [06:52:00] &lt;Guthur&gt;       I want to add a couple of things to clrzmq2 today
| [Saturday 05 February 2011] [06:54:17] &lt;Guthur&gt;       I was actually thinking of adding a clrzmq-extensions project, with a special form of queue device, and generic send/recv with .Net serialization
| [Saturday 05 February 2011] [07:05:36] &lt;Guthur&gt;       Umm, pub/sub using inproc, seems to have stop working for me, very odd
| [Saturday 05 February 2011] [07:07:21] &lt;Guthur&gt;       actually scratch that, its inproc in general
| [Saturday 05 February 2011] [07:11:08] &lt;sustrik&gt;      inproc stopped working?
| [Saturday 05 February 2011] [07:13:21] &lt;Guthur&gt;       must be something to do with this computer
| [Saturday 05 February 2011] [07:13:25] &lt;Guthur&gt;       it was working fine in work
| [Saturday 05 February 2011] [07:13:55] &lt;Guthur&gt;       and it worked fine on this before
| [Saturday 05 February 2011] [07:14:11] &lt;Guthur&gt;       the peer has connection refused
| [Saturday 05 February 2011] [07:23:01] &lt;Guthur&gt;       ah got it
| [Saturday 05 February 2011] [07:23:15] &lt;Guthur&gt;       I did not realize inproc connection had to be the same context
| [Saturday 05 February 2011] [07:23:25] &lt;Guthur&gt;       learnt something new
| [Saturday 05 February 2011] [07:32:50] &lt;sustrik&gt;      :)
| [Saturday 05 February 2011] [07:52:47] &lt;mikko&gt;        good morning
| [Saturday 05 February 2011] [08:00:33] &lt;jugg&gt; mikko, I just sent a patch to the mailing list, making a change to configure.in - I don&#8217;t know if it&#8217;ll have any side affects on other systems.
| [Saturday 05 February 2011] [08:07:35] &lt;mikko&gt;        let me check, sec
| [Saturday 05 February 2011] [08:43:44] &lt;CIA-21&gt;       zeromq2: 03Chris Rempel 07master * r4efead1 10/ (AUTHORS configure.in):
| [Saturday 05 February 2011] [08:43:44] &lt;CIA-21&gt;       zeromq2: Fixed autogen.sh warnings on Debian 6 systems.
| [Saturday 05 February 2011] [08:43:44] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Chris Rempel &lt;csrl&#64;gmx.com&gt;
| [Saturday 05 February 2011] [08:43:44] &lt;CIA-21&gt;       zeromq2: Please enter the commit message for your changes. Lines starting - http://bit.ly/dHdxHE
| [Saturday 05 February 2011] [08:50:53] &lt;jugg&gt; sustrik, is there any point in opening pull requests on github for zeromq?
| [Saturday 05 February 2011] [08:53:35] &lt;sustrik&gt;      jugg: no
| [Saturday 05 February 2011] [08:53:41] &lt;jugg&gt; ok
| [Saturday 05 February 2011] [08:53:42] &lt;sustrik&gt;      the process works via the mailing list
| [Saturday 05 February 2011] [09:02:28] &lt;jugg&gt; tests/test_hwm should be added to .gitignore
| [Saturday 05 February 2011] [09:04:01] &lt;sustrik&gt;      jugg: let me see
| [Saturday 05 February 2011] [09:05:21] &lt;CIA-21&gt;       zeromq2: 03Martin Sustrik 07master * rc8e5be8 10/ .gitignore :
| [Saturday 05 February 2011] [09:05:21] &lt;CIA-21&gt;       zeromq2: test-hwm added to .gitignore
| [Saturday 05 February 2011] [09:05:21] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Martin Sustrik &lt;sustrik&#64;250bpm.com&gt; - http://bit.ly/hLOv45
| [Saturday 05 February 2011] [09:05:30] &lt;sustrik&gt;      done
| [Saturday 05 February 2011] [10:14:31] &lt;mikko&gt;        does anyone know if Neale is on IRC?
| [Saturday 05 February 2011] [10:17:02] &lt;sustrik&gt;      mikko: he was here few day ago
| [Saturday 05 February 2011] [10:17:09] &lt;sustrik&gt;      but i haven&#8217;t seen him since
| [Saturday 05 February 2011] [10:24:41] &lt;mikko&gt;        mailed him
| [Saturday 05 February 2011] [10:24:47] &lt;mikko&gt;        it would be very nice to get system z
| [Saturday 05 February 2011] [10:24:57] &lt;mikko&gt;        and maybe solaris sparc at some point
| [Saturday 05 February 2011] [10:31:12] &lt;sustrik&gt;      i think mato has a solaris box in the cellar
| [Saturday 05 February 2011] [10:31:31] &lt;sustrik&gt;      you may ask him whether it&#8217;s possible to put it online after&#8217;s he back from NZ
| [Saturday 05 February 2011] [10:40:21] &lt;Guthur&gt;       ah the pain of maintaining backwards compatibility
| [Saturday 05 February 2011] [10:40:38] &lt;Guthur&gt;       though the problem is my own doing
| [Saturday 05 February 2011] [10:41:15] &lt;Guthur&gt;       I should have made the Poll method static in clrzmq2
| [Saturday 05 February 2011] [10:48:56] &lt;sustrik&gt;      you mean the original problem you&#8217;ve reported?
| [Saturday 05 February 2011] [11:08:34] &lt;Guthur&gt;       oh no sorry, unrelated
| [Saturday 05 February 2011] [11:08:39] &lt;Guthur&gt;       just lamenting
| [Saturday 05 February 2011] [12:34:35] &lt;traviscline&gt;  Any idea on the expected amount of overhead associated with using an external event loop ala ZMQ_FD?
| [Saturday 05 February 2011] [13:05:57] &lt;Guthur&gt;       Would it be ok to put code in the clrzmq2 repo that should be considered beta
| [Saturday 05 February 2011] [13:06:31] &lt;Guthur&gt;       It doesn&#8217;t effect the binding, it&#8217;s just extension/helper stuff
| [Saturday 05 February 2011] [13:10:39] &lt;Leolo_3&gt;      travis : I suspect very very little.  ZMQ does it&#8217;s stuff in a background thread, and sends messages over the FD.  It does this &#8220;normally&#8221; when you call zmq_recv().
| [Saturday 05 February 2011] [13:20:14] &lt;traviscline&gt;  Leolo_3: thanks
| [Sunday 06 February 2011] [05:00:30] &lt;mikko&gt;  good morning
| [Sunday 06 February 2011] [05:04:18] &lt;sustrik&gt;        morning
| [Sunday 06 February 2011] [05:10:54] &lt;mikko&gt;  neale is doing pretty good job
| [Sunday 06 February 2011] [05:11:05] &lt;mikko&gt;  we have s390x soon in build cluster
| [Sunday 06 February 2011] [05:16:58] &lt;mikko&gt;  im going to visit chinese new year and get back to hacking
| [Sunday 06 February 2011] [05:33:41] &lt;sustrik&gt;        great!
| [Sunday 06 February 2011] [06:51:20] &lt;Guthur&gt; pieterh, Nice talk, the one you sent on the list
| [Sunday 06 February 2011] [06:51:34] &lt;pieterh&gt;        Hi Guthur :-)
| [Sunday 06 February 2011] [06:51:49] &lt;pieterh&gt;        It was very short, next time we&#8217;ll try to get a longer slot
| [Sunday 06 February 2011] [06:51:57] &lt;Guthur&gt; I&#8217;m going to try and get some of my colleagues to watch that, might help me convince them that OMQ fits our needs
| [Sunday 06 February 2011] [06:52:28] &lt;Guthur&gt; a very good introduction though, even with the short time slot
| [Sunday 06 February 2011] [06:52:41] &lt;Guthur&gt; I liked the E=mc2, hehe
| [Sunday 06 February 2011] [06:52:50] &lt;pieterh&gt;        It&#8217;s a perspective I&#8217;ve used a few times in presentations, multithreading done wrong, and right
| [Sunday 06 February 2011] [06:53:31] &lt;Guthur&gt; My team leader is pushing me to take that approach, the wrong way
| [Sunday 06 February 2011] [06:53:57] &lt;pieterh&gt;        It can be very hard to fight established ways of working...
| [Sunday 06 February 2011] [06:54:12] &lt;Guthur&gt; I&#8217;m trying to convince him that multiple threads and global state without message passing is a problem waiting to happen
| [Sunday 06 February 2011] [06:54:27] &lt;pieterh&gt;        Well, it&#8217;s a lot of pain and cost waiting to happen...
| [Sunday 06 February 2011] [06:54:39] &lt;pieterh&gt;        if the organization is large, it doesn&#8217;t really care
| [Sunday 06 February 2011] [06:55:13] &lt;pieterh&gt;        But perhaps the argument that you can&#8217;t stretch the results across multiple boxes may help
| [Sunday 06 February 2011] [06:55:42] &lt;pieterh&gt;        The best argument is usually running code
| [Sunday 06 February 2011] [06:56:20] &lt;Guthur&gt; That&#8217;s the thing I have it running with ZMQ, he&#8217;s trying to argue against the dependency now
| [Sunday 06 February 2011] [06:56:50] &lt;pieterh&gt;        Hmm, what OS are you on?
| [Sunday 06 February 2011] [06:57:09] &lt;Guthur&gt; windows, it&#8217;s a .NET app
| [Sunday 06 February 2011] [06:57:23] &lt;Guthur&gt; so he would rather it was nothing but .NET
| [Sunday 06 February 2011] [06:57:26] &lt;pieterh&gt;        Oh boy :-)
| [Sunday 06 February 2011] [06:57:39] &lt;pieterh&gt;        You can&#8217;t argue logic with people who develop on Windows
| [Sunday 06 February 2011] [06:57:48] &lt;Guthur&gt; hehe
| [Sunday 06 February 2011] [06:58:21] &lt;pieterh&gt;        I&#8217;m serious, they&#8217;ve swallowed the magic potion and believe in what they learn from MSDN
| [Sunday 06 February 2011] [06:58:35] &lt;Guthur&gt; yeah it seems like that sometimes
| [Sunday 06 February 2011] [06:58:52] &lt;pieterh&gt;        And your organization has _no_ Linux?
| [Sunday 06 February 2011] [06:59:01] &lt;Guthur&gt; oh yeah it has plenty
| [Sunday 06 February 2011] [06:59:10] &lt;Guthur&gt; it&#8217;s a very large American Bank
| [Sunday 06 February 2011] [06:59:17] &lt;pieterh&gt;        Oh boy
| [Sunday 06 February 2011] [06:59:53] &lt;pieterh&gt;        Well, performance maybe
| [Sunday 06 February 2011] [06:59:57] &lt;Guthur&gt; Don&#8217;t ask me the rationale for moving this app to windows, I still haven&#8217;t got an answer to that
| [Sunday 06 February 2011] [07:00:08] &lt;pieterh&gt;        Banks don&#8217;t use rationales
| [Sunday 06 February 2011] [07:00:39] &lt;pieterh&gt;        In my experience, anyhow, they often make IT choices based on egos and opinions
| [Sunday 06 February 2011] [07:00:55] &lt;Guthur&gt; We are moving most client apps to windows (.NET), I can kind of see that as windows boxes are prevalent, but this app I am working on has windows through the whole stack
| [Sunday 06 February 2011] [07:01:01] &lt;Guthur&gt; server included
| [Sunday 06 February 2011] [07:01:56] &lt;pieterh&gt;        So you can&#8217;t use arguments like cost, portability, longeivity
| [Sunday 06 February 2011] [07:02:53] &lt;Guthur&gt; no, but we do want scalability in our app, and there is many &#8216;services&#8217; to talk to each other
| [Sunday 06 February 2011] [07:03:12] &lt;pieterh&gt;        So performance is one thing big egos are sensitive too
| [Sunday 06 February 2011] [07:03:28] &lt;pieterh&gt;        Especially if you can compare a pure .NET solution to other projects in the company
| [Sunday 06 February 2011] [07:03:36] &lt;pieterh&gt;        *sensitive to
| [Sunday 06 February 2011] [07:03:58] &lt;pieterh&gt;        If you can get a visible performance kick by using 0MQ, that&#8217;s an argument that will fly IMO
| [Sunday 06 February 2011] [07:04:45] &lt;Guthur&gt; I am hoping I can show that
| [Sunday 06 February 2011] [07:04:50] &lt;Guthur&gt; and also with less code
| [Sunday 06 February 2011] [07:05:39] &lt;pieterh&gt;        Well, good luck and it&#8217;d be interesting to know how this plays out
| [Sunday 06 February 2011] [07:05:54] &lt;Guthur&gt; cheers, yeah I hope I can win through
| [Sunday 06 February 2011] [07:06:08] &lt;Guthur&gt; it&#8217;s tiring fighting this mentality though
| [Sunday 06 February 2011] [07:06:46] &lt;pieterh&gt;        Personally, I&#8217;d look to change projects :-)
| [Sunday 06 February 2011] [07:06:57] &lt;Guthur&gt; for the first time this week I started wanting to get a new job
| [Sunday 06 February 2011] [07:07:04] &lt;Guthur&gt; hehe, yeah agree
| [Sunday 06 February 2011] [07:07:13] &lt;Guthur&gt; this/last
| [Sunday 06 February 2011] [07:07:31] &lt;pieterh&gt;        It&#8217;s not worth working with people who are mediocre, not worth working on projects that are mediocre
| [Sunday 06 February 2011] [07:07:44] &lt;pieterh&gt;        A terrible, tragic project... at least you learn a lot
| [Sunday 06 February 2011] [07:08:19] &lt;Guthur&gt; maybe I will have more success next week
| [Sunday 06 February 2011] [07:08:33] &lt;Guthur&gt; I have still to show the full working app
| [Sunday 06 February 2011] [07:08:41] &lt;Guthur&gt; only got it ready on friday
| [Sunday 06 February 2011] [07:08:44] &lt;pieterh&gt;        I&#8217;d really focus purely on speed... nothing else
| [Sunday 06 February 2011] [07:09:22] &lt;sustrik&gt;        pieterh: the presentation should be definitely linked from zeromq.org
| [Sunday 06 February 2011] [07:09:35] &lt;pieterh&gt;        sustrik: the video or the slideshow?
| [Sunday 06 February 2011] [07:09:38] &lt;sustrik&gt;        video
| [Sunday 06 February 2011] [07:09:46] &lt;Guthur&gt; I&#8217;d second that, its a good video
| [Sunday 06 February 2011] [07:10:06] &lt;sustrik&gt;        do they leave it on the site for a long time?
| [Sunday 06 February 2011] [07:10:11] &lt;pieterh&gt;        Guthur: especially if you can show an architecture that&#8217;s hard to make with the pure .NET toolkit
| [Sunday 06 February 2011] [07:10:16] &lt;pieterh&gt;        sustrik: IMO it&#8217;s there forever
| [Sunday 06 February 2011] [07:10:32] &lt;sustrik&gt;        then it should be easy to link...
| [Sunday 06 February 2011] [07:10:42] &lt;pieterh&gt;        I think it would be better to convert to youtube but I&#8217;m not sure how, will try on a Linux box
| [Sunday 06 February 2011] [07:11:10] &lt;sustrik&gt;        yes, it behaved kind of capricious
| [Sunday 06 February 2011] [07:11:19] &lt;sustrik&gt;        i was able to get it running after ~10 atemps
| [Sunday 06 February 2011] [07:11:24] &lt;pieterh&gt;        the HTML5/theora format is kind of strange
| [Sunday 06 February 2011] [07:12:02] &lt;pieterh&gt;        I&#8217;ll give it a shot
| [Sunday 06 February 2011] [07:12:20] &lt;pieterh&gt;        I guess we already have a place on the wiki for this, i.e. the right hand side where we list the events
| [Sunday 06 February 2011] [07:12:30] &lt;Guthur&gt; I had trouble accessing it with Chrome
| [Sunday 06 February 2011] [07:12:36] &lt;Guthur&gt; worked on firefox though
| [Sunday 06 February 2011] [07:12:51] &lt;sustrik&gt;        i would say it will be valueable even after a year or so
| [Sunday 06 February 2011] [07:12:55] &lt;pieterh&gt;        Heh, from Slideshare, &#8221; &#8220;FOSDEM 2011 - 0MQ&#8221; is being tweeted more than anything else on SlideShare right now. So we&#8217;ve put it on the homepage of SlideShare.net (in the &#8220;Hot on Twitter&#8221; section).&#8221;
| [Sunday 06 February 2011] [07:13:04] &lt;sustrik&gt;        and the events list is going to rollover
| [Sunday 06 February 2011] [07:13:32] &lt;sustrik&gt;        something like &#8220;links&#8221; section, or &#8220;articles&#8221; or &#8220;media&#8221;
| [Sunday 06 February 2011] [07:13:54] &lt;pieterh&gt;        we can leave the events list to grow
| [Sunday 06 February 2011] [07:14:01] &lt;pieterh&gt;        eventually move it to its own page
| [Sunday 06 February 2011] [07:14:31] &lt;pieterh&gt;        makes sense that people use that list to find corresponding videos / slideshows
| [Sunday 06 February 2011] [07:15:04] &lt;sustrik&gt;        well, the problem is broader that that
| [Sunday 06 February 2011] [07:15:15] &lt;sustrik&gt;        for example, there are useful blogs out there
| [Sunday 06 February 2011] [07:15:17] &lt;Guthur&gt; actually talking about performance of .NET vs ZMQ, I was testing a REQ/REP vs .NET remoting, both using TCP, and got some interesting results...
| [Sunday 06 February 2011] [07:15:23] &lt;sustrik&gt;        it&#8217;s not clear where to link the from
| [Sunday 06 February 2011] [07:15:50] &lt;pieterh&gt;        sustrik:... Google kind of solves this problem, eventually
| [Sunday 06 February 2011] [07:16:01] &lt;Guthur&gt; Up to about 100 requests ZMQ was faster or at least as performant, after that it started to fall behind remoting
| [Sunday 06 February 2011] [07:16:22] &lt;pieterh&gt;        I&#8217;m not sure collecting hundreds of links to articles and blogs makes sense
| [Sunday 06 February 2011] [07:16:29] &lt;pieterh&gt;        people want reusable material
| [Sunday 06 February 2011] [07:16:51] &lt;Guthur&gt; I haven&#8217;t investigated much further to identify the reasoning though, and my knowledge to inner works of remoting is limited
| [Sunday 06 February 2011] [07:16:57] &lt;pieterh&gt;        Guthur: interesting
| [Sunday 06 February 2011] [07:17:07] &lt;pieterh&gt;        0MQ on Windows is not optimized in any way
| [Sunday 06 February 2011] [07:17:22] &lt;Guthur&gt; though I think remoting is now being replace by MS&#8217;s new &#8216;standard&#8217;, WCF
| [Sunday 06 February 2011] [07:17:40] &lt;pieterh&gt;        aka WTF
| [Sunday 06 February 2011] [07:17:53] &lt;Guthur&gt; are you familiar with it?
| [Sunday 06 February 2011] [07:17:58] &lt;pieterh&gt;        Nope... :-)
| [Sunday 06 February 2011] [07:18:01] &lt;Guthur&gt; hehe
| [Sunday 06 February 2011] [07:18:19] &lt;pieterh&gt;        I maintain high levels of ignorance concerning anything coming from MSFT
| [Sunday 06 February 2011] [07:18:34] &lt;Guthur&gt; nice for some, hehe
| [Sunday 06 February 2011] [07:19:27] &lt;pieterh&gt;        You know, what you might just do... is abandon the attempt to convert your team, which is most likely hopeless and will stress you
| [Sunday 06 February 2011] [07:19:57] &lt;pieterh&gt;        and instead take the opportunity to learn a lot about how WCF works, and then extend 0MQ to use that
| [Sunday 06 February 2011] [07:20:42] &lt;sustrik&gt;        pieterh: yes, i meant reusable links: your and oliver&#8217;s video, nicolases&#8217; and ilya&#8217;s articles etc.
| [Sunday 06 February 2011] [07:20:58] &lt;Guthur&gt; unfortunately WCF only solves the interprocess connection
| [Sunday 06 February 2011] [07:21:14] &lt;pieterh&gt;        sustrik: we did collect the most valuable ones on the intro doc page, I think
| [Sunday 06 February 2011] [07:21:22] &lt;Guthur&gt; there is nothing in .NET to solve inter thread, besides traditional thread mechanisms
| [Sunday 06 February 2011] [07:21:49] &lt;pieterh&gt;        well... i&#8217;m not against collecting resources but it does need upkeep
| [Sunday 06 February 2011] [07:22:11] &lt;pieterh&gt;        Guthur: right, and this is missing in 0MQ for Windows too
| [Sunday 06 February 2011] [07:23:09] &lt;Guthur&gt; I wouldn&#8217;t be surprised if WCF is .NET only, but I&#8217;m not 100% sure on that
| [Sunday 06 February 2011] [07:23:34] &lt;Guthur&gt; Remoting was only intended for .NET endpoints
| [Sunday 06 February 2011] [07:27:27] &lt;pieterh&gt;        Let us know when you know :-)
| [Sunday 06 February 2011] [07:31:42] &lt;sustrik&gt;        why not link your talk from intro page then?
| [Sunday 06 February 2011] [07:40:10] &lt;pieterh&gt;        sustrik: could do... for now I&#8217;ve linked to it from the events list
| [Sunday 06 February 2011] [07:40:29] &lt;pieterh&gt;        let me try to convert that video first
| [Sunday 06 February 2011] [07:42:27] &lt;sustrik&gt;        sure
| [Sunday 06 February 2011] [07:42:56] &lt;sustrik&gt;        Guthur: getting slower after 100 messages &#8211; isn&#8217;t is just the queueing effect?
| [Sunday 06 February 2011] [07:43:18] &lt;sustrik&gt;        ie. publisher publishes faster than consumer consumes, thus making latencies gwo?
| [Sunday 06 February 2011] [07:43:20] &lt;sustrik&gt;        grow
| [Sunday 06 February 2011] [08:10:07] &lt;Guthur&gt; sustrik, Possibly
| [Sunday 06 February 2011] [08:10:29] &lt;Guthur&gt; if i remember right the majority of the time was in the Recv method
| [Sunday 06 February 2011] [08:11:01] &lt;Guthur&gt; I have the code lying around somewhere, let me check
| [Sunday 06 February 2011] [08:38:13] &lt;pieterh&gt;        sustrik: I&#8217;ve uploaded to Youtube here: http://www.youtube.com/watch?v=CCBYzKfmQ4U
| [Sunday 06 February 2011] [08:38:17] &lt;pieterh&gt;        can you check if that works better?
| [Sunday 06 February 2011] [08:38:41] &lt;sustrik&gt;        yes
| [Sunday 06 February 2011] [08:38:48] &lt;sustrik&gt;        works with no problem
| [Sunday 06 February 2011] [08:40:24] &lt;Guthur&gt; oh interesting, the tables turn drastically when I reuse the context/connection
| [Sunday 06 February 2011] [08:40:44] &lt;Guthur&gt; OMQ starts to win hands down
| [Sunday 06 February 2011] [08:40:50] &lt;Guthur&gt; 0MQ
| [Sunday 06 February 2011] [08:42:22] &lt;pieterh&gt;        Guthur: you were opening a new connection each time?
| [Sunday 06 February 2011] [08:42:34] &lt;Guthur&gt; I though it was fairer to remoting
| [Sunday 06 February 2011] [08:42:43] &lt;pieterh&gt;        huh
| [Sunday 06 February 2011] [08:42:58] &lt;Guthur&gt; actually, there was another more important reason...
| [Sunday 06 February 2011] [08:43:23] &lt;Guthur&gt; I was simulating a web application, which may not be able to reuse the connection
| [Sunday 06 February 2011] [08:43:31] &lt;pieterh&gt;        huh
| [Sunday 06 February 2011] [08:43:57] &lt;pieterh&gt;        you could add &#8216;sleep(1)&#8217; into the main loop to properly simulate WCF
| [Sunday 06 February 2011] [08:44:38] &lt;pieterh&gt;        opening a socket each time is really slow
| [Sunday 06 February 2011] [08:45:07] &lt;Guthur&gt; yep, I think remoting was probably keeping it&#8217;s open in the background
| [Sunday 06 February 2011] [08:46:33] &lt;Guthur&gt; but the target application was an IIS based web app, which would connect to a non IIS based process, and I was sure how well it would cope with persisting socket connections to external apps
| [Sunday 06 February 2011] [08:47:05] &lt;pieterh&gt;        is the target application performance critical?
| [Sunday 06 February 2011] [08:47:24] &lt;Guthur&gt; we are hoping to ramp it up
| [Sunday 06 February 2011] [08:47:34] &lt;Guthur&gt; its a FX Options trading app
| [Sunday 06 February 2011] [08:48:01] &lt;Guthur&gt; so there could be lots of high frequency price movements
| [Sunday 06 February 2011] [08:48:04] &lt;pieterh&gt;        sure, so then you IMO want to make your 0MQ app as _fast_ as possible and use that as carrot
| [Sunday 06 February 2011] [08:48:24] &lt;pieterh&gt;        the stick would be to find a competing internal project and feed them juicy low latency technology
| [Sunday 06 February 2011] [08:48:44] &lt;Guthur&gt; Well, reusing the context/connection, 0MQ is twice as fast
| [Sunday 06 February 2011] [08:49:11] &lt;pieterh&gt;        the code is in c#?
| [Sunday 06 February 2011] [08:49:16] &lt;Guthur&gt; yeah
| [Sunday 06 February 2011] [08:49:46] &lt;pieterh&gt;        i&#8217;d probably make a C/Linux version just for sanity checking
| [Sunday 06 February 2011] [08:49:47] &lt;Guthur&gt; though remoting does offer type safety
| [Sunday 06 February 2011] [08:50:24] &lt;pieterh&gt;        &#8220;safety&#8221; as in &#8220;ensure your types will never work on anything except our OS&#8221;
| [Sunday 06 February 2011] [08:50:33] &lt;pieterh&gt;        sustrik: OK, I&#8217;ve added the video to http://www.zeromq.org/intro:read-the-manual
| [Sunday 06 February 2011] [08:52:06] &lt;Guthur&gt; getting them to accept 0MQ as the solution will be tough, getting them to dump .NET would be nigh on impossible
| [Sunday 06 February 2011] [08:52:38] &lt;pieterh&gt;        Guthur: oh, you&#8217;d just get blamed for the eventual failure
| [Sunday 06 February 2011] [08:52:54] &lt;pieterh&gt;        you have to leave technology evangelism to people outside the team
| [Sunday 06 February 2011] [08:54:13] &lt;sustrik&gt;        pieterh: thx
| [Sunday 06 February 2011] [08:54:39] &lt;pieterh&gt;        probably the best you can do is insert 0MQ as a &#8220;double the speed of this critical bus&#8221; solution
| [Sunday 06 February 2011] [08:54:57] &lt;pieterh&gt;        you would probably want to compare with another option too, to make it look fair
| [Sunday 06 February 2011] [08:55:09] &lt;pieterh&gt;        hmm, bank, hmm, for example RabbitMQ
| [Sunday 06 February 2011] [08:55:28] &lt;pieterh&gt;        and of course you need to make the architect think it was his idea all along
| [Sunday 06 February 2011] [08:55:59] &lt;Guthur&gt; That&#8217;s the thing the Team Lead is not really the architect, he is just too hands on
| [Sunday 06 February 2011] [08:56:06] &lt;Guthur&gt; which is ok up to a point
| [Sunday 06 February 2011] [08:56:18] &lt;pieterh&gt;        well, s/architect/team lead/, it applies just the same
| [Sunday 06 February 2011] [08:56:21] &lt;pieterh&gt;        ego is ego
| [Sunday 06 February 2011] [09:49:28] &lt;Guthur&gt; oops, i broke clrzmq2 build
| [Sunday 06 February 2011] [09:52:15] &lt;Guthur&gt; I&#8217;ll be pushing a fix promptly
| [Sunday 06 February 2011] [09:57:30] &lt;Guthur&gt; is there no notification email when a build goes wrong?
| [Sunday 06 February 2011] [10:01:40] &lt;sustrik&gt;        Guthur: it&#8217;s definitely possible
| [Sunday 06 February 2011] [10:02:00] &lt;sustrik&gt;        you have to ask mikko to add you to the list
| [Sunday 06 February 2011] [10:02:41] &lt;Guthur&gt; I am one of the users registered, should I be receiving emails?
| [Sunday 06 February 2011] [10:02:41] &lt;sustrik&gt;        the auto builds are done once each 12hrs rather than immediately after commit btw
| [Sunday 06 February 2011] [10:02:57] &lt;sustrik&gt;        sorry, i am not a hudson expert
| [Sunday 06 February 2011] [10:03:01] &lt;sustrik&gt;        ask mikko
| [Sunday 06 February 2011] [10:03:08] &lt;Guthur&gt; It is possible my over zealous email server is bouncing them
| [Sunday 06 February 2011] [10:03:43] &lt;Guthur&gt; sustrik, do you receive mails?
| [Sunday 06 February 2011] [10:04:03] &lt;sustrik&gt;        nope, but i am not in the list afaik
| [Sunday 06 February 2011] [10:04:27] &lt;Guthur&gt; ok
| [Sunday 06 February 2011] [10:04:36] &lt;Guthur&gt; I can just monitor it after making a commit though
| [Sunday 06 February 2011] [10:04:55] &lt;sustrik&gt;        definitely
| [Sunday 06 February 2011] [10:05:09] &lt;sustrik&gt;        you have to wait till 5am or 5pm GMT though
| [Sunday 06 February 2011] [10:05:24] &lt;sustrik&gt;        that&#8217;s when autoguilds are run
| [Sunday 06 February 2011] [10:05:34] &lt;sustrik&gt;        autobuilds</em>
| [Sunday 06 February 2011] [10:05:52] &lt;Guthur&gt; ok, cheers
| [Sunday 06 February 2011] [10:57:32] &lt;Guthur&gt; is Peter&#8217;s video on the website yet?
| [Sunday 06 February 2011] [10:57:53] &lt;Guthur&gt; oh sorry, found it
| [Sunday 06 February 2011] [10:58:03] &lt;Guthur&gt; right in front of my eyes
| [Sunday 06 February 2011] [10:59:24] &lt;Guthur&gt; would be really nice if it was on youtube or something though
| [Sunday 06 February 2011] [11:18:57] &lt;Guthur&gt; I have multiple requests coming in, which will then make a further request to a service, this service will then reply back async on a separate thread, what is the appropriate 0MQ pattern to match the async response to the appropriate request thread?
| [Sunday 06 February 2011] [11:23:21] &lt;sustrik&gt;        req/rep
| [Sunday 06 February 2011] [11:24:31] &lt;Guthur&gt; and match them using identity?
| [Sunday 06 February 2011] [11:25:11] &lt;sustrik&gt;        you don&#8217;t have to care, rep socket does that for you
| [Sunday 06 February 2011] [11:28:18] &lt;Guthur&gt; Either my understanding is wrong or it&#8217;s bad problem description, because I can&#8217;t see how that would work
| [Sunday 06 February 2011] [11:28:59] &lt;sustrik&gt;        rep sends the reply to the original requester
| [Sunday 06 February 2011] [11:29:13] &lt;Guthur&gt; oh that part, yes
| [Sunday 06 February 2011] [11:29:31] &lt;Guthur&gt; but its the async request from the service, it&#8217;s not 0MQ
| [Sunday 06 February 2011] [11:29:44] &lt;Guthur&gt; it&#8217;s quickFIX to be precise
| [Sunday 06 February 2011] [11:29:55] &lt;sustrik&gt;        right
| [Sunday 06 February 2011] [11:30:29] &lt;sustrik&gt;        is there a reply-to field in the FIX message
| [Sunday 06 February 2011] [11:30:30] &lt;sustrik&gt;        ?
| [Sunday 06 February 2011] [11:30:40] &lt;Guthur&gt; and the reply will come back on a completely separate thread
| [Sunday 06 February 2011] [11:30:52] &lt;Guthur&gt; there is reqID
| [Sunday 06 February 2011] [11:30:54] &lt;Guthur&gt; that&#8217;s it
| [Sunday 06 February 2011] [11:31:21] &lt;sustrik&gt;        who&#8217;s behind the fix connection?
| [Sunday 06 February 2011] [11:31:24] &lt;sustrik&gt;        requester?
| [Sunday 06 February 2011] [11:31:26] &lt;sustrik&gt;        or replier?
| [Sunday 06 February 2011] [11:31:35] &lt;Guthur&gt; replier
| [Sunday 06 February 2011] [11:31:45] &lt;Guthur&gt; we are making Quote Requests
| [Sunday 06 February 2011] [11:31:53] &lt;sustrik&gt;        sure
| [Sunday 06 February 2011] [11:32:07] &lt;sustrik&gt;        reqID is an opaque correlation ID?
| [Sunday 06 February 2011] [11:32:54] &lt;Guthur&gt; sorry,  opaque correlation?
| [Sunday 06 February 2011] [11:33:10] &lt;sustrik&gt;        i.e. is it an ID used to pair the request and the reply?
| [Sunday 06 February 2011] [11:33:28] &lt;sustrik&gt;        opaque = can you put anything into ReqID?
| [Sunday 06 February 2011] [11:33:41] &lt;sustrik&gt;        or is it restricted to UUIDs or somesuch
| [Sunday 06 February 2011] [11:33:55] &lt;Guthur&gt; we can place anything
| [Sunday 06 February 2011] [11:34:07] &lt;Guthur&gt; and yes it matches request and reply
| [Sunday 06 February 2011] [11:34:35] &lt;sustrik&gt;        then what you have to do at FIX/0MQ boundary
| [Sunday 06 February 2011] [11:34:54] &lt;sustrik&gt;        is to get all the address message parts from 0mq request
| [Sunday 06 February 2011] [11:35:01] &lt;sustrik&gt;        and put them into FIX ReqID
| [Sunday 06 February 2011] [11:35:08] &lt;sustrik&gt;        when the reply arrives
| [Sunday 06 February 2011] [11:35:31] &lt;sustrik&gt;        you get all the message parts from thr ReqID
| [Sunday 06 February 2011] [11:35:55] &lt;sustrik&gt;        that would guarantee that the reply gets to the original requester
| [Sunday 06 February 2011] [11:36:29] &lt;Guthur&gt; yeah that sounds like a nice way
| [Sunday 06 February 2011] [11:38:00] &lt;Guthur&gt; cheers, my initial vision had an intermediary hop
| [Sunday 06 February 2011] [11:38:13] &lt;mikey_w&gt;        As a newbee is there a document that explains zeromq?
| [Sunday 06 February 2011] [11:38:26] &lt;Guthur&gt; I never thought about trying to reply directly to the Req Socket
| [Sunday 06 February 2011] [11:38:29] &lt;Guthur&gt; cheers sustrik
| [Sunday 06 February 2011] [11:38:45] &lt;Guthur&gt; mikey_w, the guide, <a class="reference external" href="http://zguide.zeromq.org/chapter:all">http://zguide.zeromq.org/chapter:all</a>
| [Sunday 06 February 2011] [11:38:48] &lt;sustrik&gt;        what it is actually, is a 0mq-FIX bridge
| [Sunday 06 February 2011] [11:38:54] &lt;mikey_w&gt;        TU
| [Sunday 06 February 2011] [11:39:29] &lt;sustrik&gt;        so it&#8217;s actually pretty generic and useful
| [Sunday 06 February 2011] [11:39:38] &lt;sustrik&gt;        think of making it an opensource
| [Sunday 06 February 2011] [11:40:52] &lt;Guthur&gt; sustrik, Sure
| [Sunday 06 February 2011] [11:41:56] &lt;Guthur&gt; that solution just might make all the complexity completely disappear, awesome
| [Sunday 06 February 2011] [12:17:56] &lt;mikko&gt;  good evening
| [Sunday 06 February 2011] [12:19:08] &lt;mikko&gt;  pieterh: how was fosdem?
| [Sunday 06 February 2011] [12:19:14] &lt;pieterh&gt;        hi mikko
| [Sunday 06 February 2011] [12:19:18] &lt;pieterh&gt;        short and sweet
| [Sunday 06 February 2011] [12:19:28] &lt;pieterh&gt;        there&#8217;s a thread on hackernews: <a class="reference external" href="http://news.ycombinator.com/item?id=2185418">http://news.ycombinator.com/item?id=2185418</a>
| [Sunday 06 February 2011] [12:20:22] &lt;pieterh&gt;        There&#8217;s a video here: <a class="reference external" href="http://www.youtube.com/watch?v=CCBYzKfmQ4U">http://www.youtube.com/watch?v=CCBYzKfmQ4U</a>
| [Sunday 06 February 2011] [12:20:45] &lt;pieterh&gt;        I think I successfully annoyed and intrigued various people :-)
| [Sunday 06 February 2011] [12:21:59] &lt;pieterh&gt;        anyone here interested in a command-line API for 0MQ?
| [Sunday 06 February 2011] [12:22:52] &lt;mikko&gt;  what do you mean by command line api?
| [Sunday 06 February 2011] [12:23:54] &lt;pieterh&gt;        export CONTEXT=`zmq context`
| [Sunday 06 February 2011] [12:24:09] &lt;pieterh&gt;        export SUBSOCK=`zmq socket $CONTEXT`
| [Sunday 06 February 2011] [12:24:21] &lt;pieterh&gt;        zmq connect $SUBSOCK randomaddress
| [Sunday 06 February 2011] [12:24:27] &lt;pieterh&gt;        etc.
| [Sunday 06 February 2011] [12:24:42] &lt;pieterh&gt;        I just had a rough idea of how to make it
| [Sunday 06 February 2011] [12:24:49] &lt;pieterh&gt;        could be fun for demos, especially
| [Sunday 06 February 2011] [12:25:00] &lt;mikko&gt;  i saw one guy making a small utility that reads from stdin and publishes that
| [Sunday 06 February 2011] [12:25:13] &lt;mikko&gt;  apart from that haven&#8217;t seen much direct command line interaction
| [Sunday 06 February 2011] [12:25:23] &lt;pieterh&gt;        could it be useful?
| [Sunday 06 February 2011] [12:25:56] &lt;mikko&gt;  personally i dont see the immediate use-case but might be for some people
| [Sunday 06 February 2011] [12:26:27] &lt;pieterh&gt;        hmm, a resounding shrug, then :-)
| [Sunday 06 February 2011] [12:26:52] &lt;Guthur&gt; hehe, of course Lisp would make such demos easy
| [Sunday 06 February 2011] [12:27:00] &lt;Guthur&gt; the joys of having a REPL
| [Sunday 06 February 2011] [12:27:22] &lt;pieterh&gt;        problem with _any_ language is as soon as you go there you&#8217;ve lost 70% of your general audience
| [Sunday 06 February 2011] [12:28:00] &lt;Guthur&gt; a REPL is such a cool feature I&#8217;m amazed more languages/environments don&#8217;t offer it
| [Sunday 06 February 2011] [12:28:09] &lt;Guthur&gt; i so miss having it
| [Sunday 06 February 2011] [12:29:07] &lt;pieterh&gt;        Read-Eval-Print loop, ok, right
| [Sunday 06 February 2011] [12:29:20] &lt;pieterh&gt;        Perl has it, and indeed it&#8217;s useful
| [Sunday 06 February 2011] [12:29:43] &lt;Guthur&gt; in Perl case the language completely negates any usefulness, hehe
| [Sunday 06 February 2011] [12:30:19] &lt;pieterh&gt;        Spoken like a true language bigot :-)
| [Sunday 06 February 2011] [12:30:28] &lt;Guthur&gt; indeed, hehe
| [Sunday 06 February 2011] [12:33:01] &lt;Guthur&gt; Interesting aside,
| [Sunday 06 February 2011] [12:33:03] &lt;Guthur&gt; oops
| [Sunday 06 February 2011] [12:33:56] &lt;Guthur&gt; what i meant to say was: an interesting side note is that Unix initially was suppose to come with a Lisp
| [Sunday 06 February 2011] [12:34:46] &lt;Guthur&gt; C for the Kernel, Lisp for some sort of shell, I believe
| [Sunday 06 February 2011] [12:34:59] &lt;pieterh&gt;        hmm
| [Sunday 06 February 2011] [12:35:08] &lt;Guthur&gt; Not Unix actually, GNU OS
| [Sunday 06 February 2011] [12:35:30] &lt;pieterh&gt;        ah, for sure, GNU OS had lots of weird and wonderful ideas :-)
| [Sunday 06 February 2011] [12:35:49] &lt;Guthur&gt; Stallman like lisp obvious, look at Emacs
| [Sunday 06 February 2011] [12:37:25] &lt;pieterh&gt;        Lisp comes from MIT, where Stallman learned to hack
| [Sunday 06 February 2011] [17:42:52] &lt;devon_hillard&gt;  Is it correct to describe zeroMQ as a message-passing architecture?
| [Sunday 06 February 2011] [18:16:58] &lt;Guthur&gt; I think i would go more with &#8216;allows for a message passing architecture&#8217;
| [Sunday 06 February 2011] [19:00:43] &lt;Guthur&gt; what happens if you are polling and then subsequently close the socket?
| [Sunday 06 February 2011] [20:27:27] &lt;Guthur&gt; mikko, the build server is dead?
| [Sunday 06 February 2011] [23:39:19] &lt;kabs&gt;   Hello, if subscriber in pub-sub model goes down or restart we have the option to queue its data at publisher side by using HWM or SWAP but how can we make sure our system doesn&#8217;t fail if publisher goes down?
| [Monday 07 February 2011] [00:03:52] &lt;jhawk28&gt;        kabs, you have to persist the data in your program
| [Monday 07 February 2011] [00:04:12] &lt;jhawk28&gt;        and determine what is acceptable for restarts
| [Monday 07 February 2011] [00:04:23] &lt;jhawk28&gt;        is it ok to send data to the subscriber again
| [Monday 07 February 2011] [00:06:02] &lt;kabs&gt;   Not sure as of now but I am looking for the options
| [Monday 07 February 2011] [00:07:24] &lt;jhawk28&gt;        if you need strong durability, and are not concerned so much with performance, AMQP may be a better fit
| [Monday 07 February 2011] [00:08:20] &lt;jhawk28&gt;        <a class="reference external" href="https://github.com/rabbitmq/rmq-0mq">https://github.com/rabbitmq/rmq-0mq</a>
| [Monday 07 February 2011] [00:09:03] &lt;kabs&gt;   jhawk28:Can you elaborate on data persistence here, since if pub is crashed all it&#8217;s buffers( I/O, network buffers ) will be gone, how can we have persistence of those buffers ??
| [Monday 07 February 2011] [00:09:55] &lt;jhawk28&gt;        it would be external to the ZMQ library
| [Monday 07 February 2011] [00:10:08] &lt;jhawk28&gt;        in the application space
| [Monday 07 February 2011] [00:11:54] &lt;jhawk28&gt;        so you could just log data as it was published
| [Monday 07 February 2011] [00:12:20] &lt;jhawk28&gt;        then when the publisher was restarted, it would just replay the log
| [Monday 07 February 2011] [00:13:23] &lt;jhawk28&gt;        you could sequence it and use a periodic ack using a pull socket to know how far back, but then you need to keep track of acks for all subscribers (which slows performance)
| [Monday 07 February 2011] [00:14:23] &lt;jhawk28&gt;        it creates durability, but has a penalty for performance in addition to breaking the desired contract of sending a message once and only once
| [Monday 07 February 2011] [00:16:04] &lt;kabs&gt;   jhawk28: it seems there is no ideal system, some system has some penalty , etc ...
| [Monday 07 February 2011] [00:16:39] &lt;jhawk28&gt;        correct. durable pub is hard
| [Monday 07 February 2011] [00:16:53] &lt;kabs&gt;   jhawk28: so this pull and ack is to maintain identity
| [Monday 07 February 2011] [00:17:22] &lt;jhawk28&gt;        http://sna-projects.com/kafka/ is a full blown system just for it
| [Monday 07 February 2011] [00:17:35] &lt;jhawk28&gt;        you can get ideas from http://sna-projects.com/kafka/design.php
| [Monday 07 February 2011] [00:20:26] &lt;kabs&gt;   jhawk28: thank you for your input, will see it , just gave it a glance and found one beautiful line &#8220;Don&#8217;t fear the filesystem!&#8221;   :)
| [Monday 07 February 2011] [04:37:01] &lt;ianbarber&gt;      hi all, anyone got any PGM ideas about this assertion:
| [Monday 07 February 2011] [04:37:02] &lt;ianbarber&gt;      Assertion failed: rc == 0 (connect_session.cpp:82)
| [Monday 07 February 2011] [04:37:18] &lt;ianbarber&gt;      from a zmq_connect (pub, &#8220;epgm://;239.192.0.1:7601&#8221;);
| [Monday 07 February 2011] [04:38:28] &lt;ianbarber&gt;      as far as I can see it&#8217;s being thrown due to a failure in pgm_socket.cpp, possible if (!pgm_setsockopt (sock, IPPROTO_PGM, PGM_SEND_ONLY,
| [Monday 07 February 2011] [04:38:28] &lt;ianbarber&gt;                      &amp;send_only, sizeof (send_only))
| [Monday 07 February 2011] [04:38:32] &lt;ianbarber&gt;      due to that
| [Monday 07 February 2011] [04:40:00] &lt;guido_g&gt;        you dont&#8217;t specify an interface, check that the loopback is <em>not</em> used
| [Monday 07 February 2011] [04:40:22] &lt;guido_g&gt;        loopback is nit multicast capable
| [Monday 07 February 2011] [04:41:13] &lt;guido_g&gt;        s/nit/not/
| [Monday 07 February 2011] [04:43:32] &lt;ianbarber&gt;      ah, good point. just tried with eth0, same result
| [Monday 07 February 2011] [04:44:03] &lt;ianbarber&gt;      is there a way of telling whether the interface is capable, or enable/disabling it? i am on a VMWare VM, so it is entirely possible there is something odd about the network interface
| [Monday 07 February 2011] [04:44:17] &lt;guido_g&gt;        ifconfig should tell
| [Monday 07 February 2011] [04:44:56] &lt;ianbarber&gt;      yeah, MULTICAST is in there
| [Monday 07 February 2011] [04:44:57] &lt;ianbarber&gt;      hmm
| [Monday 07 February 2011] [04:46:54] &lt;ianbarber&gt;      i get the same thing with PGM as well as epgm (not massively suprisingly I&#8217;m sure)
| [Monday 07 February 2011] [04:56:31] &lt;mikko&gt;  ianbarber: increase ZMQ_RATE
| [Monday 07 February 2011] [04:56:36] &lt;mikko&gt;  seems to fix the symptoms
| [Monday 07 February 2011] [04:56:47] &lt;mikko&gt;  not sure what the actual issue is
| [Monday 07 February 2011] [04:58:52] &lt;ianbarber&gt;      ah, right, let me try that
| [Monday 07 February 2011] [04:58:57] &lt;ianbarber&gt;      what&#8217;s rate default to then?
| [Monday 07 February 2011] [04:59:45] &lt;guido_g&gt;        100kbit i think
| [Monday 07 February 2011] [05:01:53] &lt;suzan_shakya&gt;   Hi all, is there any method for listening on 2 sockets other than zmq.Poller()
| [Monday 07 February 2011] [05:02:08] &lt;ianbarber&gt;      awesome, that seemed to work (once I remember to define it as an int64_t rather than an int)
| [Monday 07 February 2011] [05:02:13] &lt;ianbarber&gt;      thanks mikko!
| [Monday 07 February 2011] [05:03:51] &lt;ianbarber&gt;      (and thanks guido for the help as well :))
| [Monday 07 February 2011] [05:15:57] &lt;sustrik&gt;        ianbarber: can you report the problem on the mailing list so that steve-o can have a look at it?
| [Monday 07 February 2011] [05:16:30] &lt;sustrik&gt;        suzan_shakya: you mean two 0mq sockets or two peers?
| [Monday 07 February 2011] [05:17:28] &lt;ianbarber&gt;      sustrik: sure thing
| [Monday 07 February 2011] [05:22:45] &lt;mikko&gt;  <a class="reference external" href="http://build.valokuva.org/job/ZeroMQ2-core-master-GCC-linux_s390x/11/console">http://build.valokuva.org/job/ZeroMQ2-core-master-GCC-linux_s390x/11/console</a>
| [Monday 07 February 2011] [05:22:50] &lt;mikko&gt;  s390x building
| [Monday 07 February 2011] [05:23:24] &lt;mikko&gt;  and fails
| [Monday 07 February 2011] [05:25:55] &lt;ianbarber&gt;      oh, cool that that&#8217;s on the build system, even if it is failing :)
| [Monday 07 February 2011] [05:26:44] &lt;sustrik&gt;        the best thing is that&#8217;s it proves that distributed build system is doable :)
| [Monday 07 February 2011] [05:27:07] &lt;sustrik&gt;        configure.in:9: error: possibly undefined macro: m4_esyscmd_s
| [Monday 07 February 2011] [05:27:23] &lt;mikko&gt;  yeah, just trying to figure out what system it is
| [Monday 07 February 2011] [05:27:28] &lt;mikko&gt;  might very well be a RHEL
| [Monday 07 February 2011] [05:27:31] &lt;sustrik&gt;         that&#8217;s the last patch that was made to the build system
| [Monday 07 February 2011] [05:27:37] &lt;mikko&gt;  yes
| [Monday 07 February 2011] [05:27:54] &lt;mikko&gt;  m4_esyscmd_s is present in autoconf 2.61
| [Monday 07 February 2011] [05:28:00] &lt;mikko&gt;  which is the minimum requirement
| [Monday 07 February 2011] [05:28:08] &lt;mikko&gt;  not sure what version that system runs
| [Monday 07 February 2011] [05:28:38] &lt;sustrik&gt;        aha
| [Monday 07 February 2011] [05:28:49] &lt;mikko&gt;  encouraging, no google results for &#8220;possibly undefined macro: m4_esyscmd_s&#8221;
| [Monday 07 February 2011] [05:30:23] &lt;mikko&gt;  works in 2.68 autoconf
| [Monday 07 February 2011] [05:30:31] &lt;mikko&gt;  that system runs 2.63
| [Monday 07 February 2011] [05:30:35] &lt;mikko&gt;  very strange
| [Monday 07 February 2011] [05:33:00] &lt;mikko&gt;  hmm, sustrik i think it&#8217;s better to revert the patch
| [Monday 07 February 2011] [05:33:24] &lt;jugg&gt;   :(
| [Monday 07 February 2011] [05:33:42] &lt;sustrik&gt;        jugg: what was the problem it solved?
| [Monday 07 February 2011] [05:33:53] &lt;mikko&gt;  i think the behaviour of m4_esyscmd_s is a lot more inconsistent over different platofrms
| [Monday 07 February 2011] [05:34:05] &lt;jugg&gt;   debian 6 systems failing
| [Monday 07 February 2011] [05:34:14] &lt;mikko&gt;  jugg: does it fail or warn?
| [Monday 07 February 2011] [05:34:47] &lt;mikko&gt;  if it fails then we need to put more attention to this
| [Monday 07 February 2011] [05:35:05] &lt;mikko&gt;  (the daily build cluster master is debian 6.0)
| [Monday 07 February 2011] [05:35:15] &lt;sustrik&gt;        configure.in:9: warning: AC_INIT: not a literal: m4_esyscmd([./version.sh | tr -
| [Monday 07 February 2011] [05:35:15] &lt;sustrik&gt;        d &#8216;n&#8217;])
| [Monday 07 February 2011] [05:35:35] &lt;jugg&gt;   looks like a warning, I&#8217;m not sure if ./configure works after, I did not try.
| [Monday 07 February 2011] [05:35:42] &lt;jugg&gt;   yes, what sustrik said
| [Monday 07 February 2011] [05:36:03] &lt;sustrik&gt;        jugg: can you check whether the package builds ok in spite of the warning?
| [Monday 07 February 2011] [05:36:21] &lt;jugg&gt;   one moment...
| [Monday 07 February 2011] [05:36:48] &lt;mikko&gt;  m4_esyscmd_s seems to present on all platforms which had daily builds but not on the new s390x
| [Monday 07 February 2011] [05:38:01] &lt;mikko&gt;  another option would be to use &#8216;echo -n&#8217; instead of &#8216;echo&#8217; in version.sh and revert to m4_esyscmd
| [Monday 07 February 2011] [05:38:28]   * sustrik has no idea what&#8217;s going on there; it&#8217;s up to you
| [Monday 07 February 2011] [05:42:33] &lt;jugg&gt;   everything seems to build fine without that fix
| [Monday 07 February 2011] [05:43:14] &lt;jugg&gt;   without the fix, ./autogen.sh produces that warning 6 times.
| [Monday 07 February 2011] [05:44:35] &lt;mikko&gt;  jugg: what about AC_INIT([zeromq],[m4_esyscmd([./version.sh])],[zeromq-dev&#64;lists.zeromq.org])
| [Monday 07 February 2011] [05:44:45] &lt;mikko&gt;  and change version.sh to use &#8216;echo -n &#8216; at the end
| [Monday 07 February 2011] [05:46:06] &lt;mikko&gt;  echo -n is not portable
| [Monday 07 February 2011] [05:47:57] &lt;jugg&gt;   it worked however...
| [Monday 07 February 2011] [05:50:22] &lt;mikko&gt;  bash shell most probably
| [Monday 07 February 2011] [05:50:28] &lt;mikko&gt;  ksh:
| [Monday 07 February 2011] [05:50:29] &lt;mikko&gt;  $ echo -n hi
| [Monday 07 February 2011] [05:50:29] &lt;mikko&gt;  -n hi
| [Monday 07 February 2011] [05:53:59] &lt;mikko&gt;  hmm, what about if we moved the tr -d &#8216;n&#8217; to the version.sh
| [Monday 07 February 2011] [05:54:05] &lt;mikko&gt;  that should be as portable as the old way
| [Monday 07 February 2011] [05:56:57] &lt;mikko&gt;  jugg: https://gist.github.com/35b8a685a38c0e4a92c5
| [Monday 07 February 2011] [05:56:59] &lt;mikko&gt;  can you test that?
| [Monday 07 February 2011] [06:01:33] &lt;jugg&gt;   works
| [Monday 07 February 2011] [06:07:53] &lt;mikko&gt;  works on s390 as well
| [Monday 07 February 2011] [06:17:28] &lt;mikko&gt;  what on earth
| [Monday 07 February 2011] [06:17:29] &lt;mikko&gt;  &#8220;conftest.c:15: error: &#8216;Syntax&#8217; does not name a type
| [Monday 07 February 2011] [07:14:22] &lt;sustrik&gt;        mikko: should i apply the patch or not?
| [Monday 07 February 2011] [08:01:02] &lt;kristsk&gt;        hello there.
| [Monday 07 February 2011] [08:01:46] &lt;kristsk&gt;        is it posssible to send FDs (file descriptors) around with zeromq - if processes reside in same box?
| [Monday 07 February 2011] [08:10:52] &lt;sustrik&gt;        FDs are process-specific
| [Monday 07 February 2011] [08:11:05] &lt;sustrik&gt;        no way of passing them between processes
| [Monday 07 February 2011] [08:33:40] &lt;kristsk&gt;        sustrik - there is a way.
| [Monday 07 February 2011] [08:34:15] &lt;sustrik&gt;        ?
| [Monday 07 February 2011] [08:35:28] &lt;kristsk&gt;        https://github.com/pgte/fugue/wiki/How-Fugue-Works
| [Monday 07 February 2011] [08:35:47] &lt;kristsk&gt;        2. Master socket - ...
| [Monday 07 February 2011] [08:37:08] &lt;sustrik&gt;        right
| [Monday 07 February 2011] [08:37:13] &lt;sustrik&gt;        i almost forgot about that
| [Monday 07 February 2011] [08:37:34] &lt;kristsk&gt;        i am looking into zeromq as it has some nice features (queues, pairs), but im not sure i want to keep 2 separate subsystems for sharing data among processes
| [Monday 07 February 2011] [08:37:35] &lt;sustrik&gt;        anyway, it doesn&#8217;t scale, so no such thing with 0mq
| [Monday 07 February 2011] [08:37:47] &lt;kristsk&gt;        even with local transport ?
| [Monday 07 February 2011] [08:38:18] &lt;sustrik&gt;        the point is that the code written for multiple threads can be scaled to multiple processes or boxes
| [Monday 07 February 2011] [08:38:31] &lt;sustrik&gt;        once you start passing FDs around, you break the scalability
| [Monday 07 February 2011] [08:39:25] &lt;kristsk&gt;        too bad :/
| [Monday 07 February 2011] [08:39:45] &lt;stockMQ&gt;        Hi .. where can i find documentation for Forwarder and Streamer.. I am working on VC++
| [Monday 07 February 2011] [08:49:38] &lt;stockMQ&gt;        All i found was this
| [Monday 07 February 2011] [08:49:38] &lt;stockMQ&gt;        http://api.zeromq.org/zmq_forwarder.html
| [Monday 07 February 2011] [09:01:58] &lt;mikko&gt;  sustrik: yes, please
| [Monday 07 February 2011] [09:02:45] &lt;mikko&gt;  it should work on all of the daily build platforms after that
| [Monday 07 February 2011] [09:03:11] &lt;mikko&gt;  well, all platforms
| [Monday 07 February 2011] [09:07:47] &lt;CIA-21&gt; zeromq2: 03Mikko Koppanen 07master * r908b39b 10/ (configure.in version.sh):
| [Monday 07 February 2011] [09:07:47] &lt;CIA-21&gt; zeromq2: m4_esyscmd_s doesnt seem to be portable across different systems
| [Monday 07 February 2011] [09:07:47] &lt;CIA-21&gt; zeromq2: Signed-off-by: Mikko Koppanen &lt;mikko.koppanen&#64;gmail.com&gt; - http://bit.ly/fCd8BW
| [Monday 07 February 2011] [09:08:00] &lt;mikko&gt;  thanks
| [Monday 07 February 2011] [09:08:24] &lt;mikko&gt;  hmm, so now we have proved that remote build slaves can work
| [Monday 07 February 2011] [09:08:43] &lt;sustrik&gt;        yes
| [Monday 07 February 2011] [09:09:05] &lt;sustrik&gt;        the question now is whether we can get more people to maintain slaves
| [Monday 07 February 2011] [09:09:22] &lt;mikko&gt;  yes, sparc would be nice. possibly hp-ux, aix etc
| [Monday 07 February 2011] [09:09:48] &lt;sustrik&gt;        you should maybe write an email about the new feature, so that people know there&#8217;s such an option
| [Monday 07 February 2011] [09:14:04] &lt;zchrish&gt;        Has anyone tried to compile zeromq on mingw; I want to use zeromq with Qt.
| [Monday 07 February 2011] [09:15:09] &lt;sustrik&gt;        i recall there&#8217;s a 0mq/qt project on labs page
| [Monday 07 February 2011] [09:16:15] &lt;sustrik&gt;        http://labs.wordtothewise.com/zeromqt/
| [Monday 07 February 2011] [09:17:02] &lt;zchrish&gt;        Oh, sorry. I meant compiling zeromq on Windows using mingw.
| [Monday 07 February 2011] [09:18:33] &lt;mikko&gt;  zchrish: yes
| [Monday 07 February 2011] [09:18:50] &lt;mikko&gt;  http://build.valokuva.org/job/ZeroMQ2-core-master_mingw32-win7/
| [Monday 07 February 2011] [09:18:58] &lt;zchrish&gt;        Oh, great. Thanks.
| [Monday 07 February 2011] [09:19:08] &lt;mikko&gt;  http://snapshot.valokuva.org/
| [Monday 07 February 2011] [09:19:15] &lt;mikko&gt;  you can also get a snapshot from there
| [Monday 07 February 2011] [09:20:43] &lt;ianbarber&gt;      mikko: are there any plans to do rpm and deb builds as part of your build empire at any point?
| [Monday 07 February 2011] [09:21:25] &lt;ianbarber&gt;      it seems like you have to run the make dist (i guess?) to generate the spec files etc. properly, so it seems build-y
| [Monday 07 February 2011] [09:21:44] &lt;mikko&gt;  yes, debian would be easy as the build master is debian
| [Monday 07 February 2011] [09:21:54] &lt;mikko&gt;  rpm would require setting up centos/rhel build slave
| [Monday 07 February 2011] [09:22:47] &lt;ianbarber&gt;      really? i mean, you could run rpmbuild on debian ok
| [Monday 07 February 2011] [09:24:07] &lt;mikko&gt;  the dependencies don&#8217;t come out correctly
| [Monday 07 February 2011] [09:24:09] &lt;ianbarber&gt;      i guess the only difficulty would be rpmbuild complaining about build dependencies on compile, but you should be able to force ignore that, as the build reqs will be there
| [Monday 07 February 2011] [09:24:34] &lt;mikko&gt;  thats not a problem
| [Monday 07 February 2011] [09:24:39] &lt;mikko&gt;  the problem is run-time deps
| [Monday 07 February 2011] [09:25:32] &lt;ianbarber&gt;      verifying them, or an actual problem during the build?
| [Monday 07 February 2011] [09:26:56] &lt;ianbarber&gt;      probably easiest to have the actual centos env though i guess
| [Monday 07 February 2011] [09:28:09] &lt;mikko&gt;  if you build on debian you depend on the libraries present on the host system
| [Monday 07 February 2011] [09:28:19] &lt;mikko&gt;  which are more than likely not present in RHEL/Centos
| [Monday 07 February 2011] [09:28:40] &lt;mikko&gt;  also library versions you link against etc
| [Monday 07 February 2011] [09:29:04] &lt;ianbarber&gt;      oh, i get it. yeah, that&#8217;s a pain. could build the SRPMS automatically, but yeah, would be easier to have a sep slave
| [Monday 07 February 2011] [09:31:42] &lt;sustrik&gt;        still, the idea of building packages on remote boxes is quite nice
| [Monday 07 February 2011] [09:32:23] &lt;sustrik&gt;        anyone who wants to have fresh packages available could volunteer to run the build on his box
| [Monday 07 February 2011] [09:32:52] &lt;sustrik&gt;        this way we could get quite a nice coverage of different CPUs/OSes
| [Monday 07 February 2011] [09:32:56] &lt;kristsk&gt;        how bout vms ?
| [Monday 07 February 2011] [09:33:09] &lt;sustrik&gt;        are you running vms?
| [Monday 07 February 2011] [09:33:26] &lt;sustrik&gt;        vms is a problem as it&#8217;s not an unix
| [Monday 07 February 2011] [09:33:28] &lt;kristsk&gt;        uh huh, i ment, VM&#8217;s not VMS
| [Monday 07 February 2011] [09:33:55] &lt;sustrik&gt;        can you simulate a different CPU in a VM?
| [Monday 07 February 2011] [09:34:13] &lt;kristsk&gt;        probably not :/
| [Monday 07 February 2011] [09:36:58] &lt;Guthur&gt; talking about builds...I went and broke the clrzmq2 build again...
| [Monday 07 February 2011] [09:37:12] &lt;Guthur&gt; Visual Studios Solutions are really beginning to bug me
| [Monday 07 February 2011] [09:39:42] &lt;sustrik&gt;        heh
| [Monday 07 February 2011] [09:40:40] &lt;mikko&gt;  Guthur: why dont you use msbuild?
| [Monday 07 February 2011] [09:40:55] &lt;mikko&gt;  kristsk: we are running different operating systems in VMs
| [Monday 07 February 2011] [09:41:13] &lt;Guthur&gt; mikko: you know I asked myself the same question this morning, hehe
| [Monday 07 February 2011] [09:41:14] &lt;mikko&gt;  kristsk: linux, windows, solaris, freebsd but they are all x86
| [Monday 07 February 2011] [09:41:45] &lt;kristsk&gt;        yeah but sparcish things prolly wont run in vm on x86
| [Monday 07 February 2011] [09:41:47] &lt;Guthur&gt; mikko: but I do want to make sure that clrzmq2 can be used easily from MSVS
| [Monday 07 February 2011] [09:42:17] &lt;mikko&gt;  not sure if qemu can emulate processors
| [Monday 07 February 2011] [09:42:33] &lt;Guthur&gt; clrzmq2 will experience more resistance if it doesn&#8217;t work well from visual studio
| [Monday 07 February 2011] [09:42:46] &lt;Guthur&gt; IMO
| [Monday 07 February 2011] [09:46:48] &lt;sustrik&gt;        Guthur: +1
| [Monday 07 February 2011] [09:48:45] &lt;mikko&gt;  hi neale1
| [Monday 07 February 2011] [09:49:01] &lt;mikko&gt;  everything seems to be up and running and the latest rounds of builds succeeded
| [Monday 07 February 2011] [09:50:29] &lt;neale1&gt; Hi Mikko. Yes, we&#8217;re building on bigger processor than my little emulator box. It&#8217;s about 3 models older than the current generation. It&#8217;s on a system with 700 virtual machines so it&#8217;s being constrained so it &#8220;plays well with others&#8221;. But 7 mins is pretty good turnaround.
| [Monday 07 February 2011] [09:50:58] &lt;mikko&gt;  neale1: yeah, definitely. thanks for your hard work
| [Monday 07 February 2011] [09:51:08] &lt;neale1&gt; No worries
| [Monday 07 February 2011] [09:51:15] &lt;mikko&gt;  i&#8217;ll send an email out today that mentions the new system z build machine if you don&#8217;t mind?
| [Monday 07 February 2011] [09:51:25] &lt;neale1&gt; Sure
| [Monday 07 February 2011] [09:52:07] &lt;neale1&gt; The machine it&#8217;s running on is part of IBM&#8217;s OSDL facility running at Marist College in mid-state new York.
| [Monday 07 February 2011] [09:52:35] &lt;neale1&gt; I&#8217;m the s390x maintainer of mono so that&#8217;s where I do my builds for it
| [Monday 07 February 2011] [10:05:12] &lt;sustrik&gt;        hm, the people/organizations who participate in build system should be mentioned somewhere so that they get the credit...
| [Monday 07 February 2011] [10:12:32] &lt;ianbarber&gt;      with pub/sub, you can have multiple subs connected to a pub, multiple pubs connected to a sub, but not multiple pubs connected to multiple subs right? does that include multicast transports?
| [Monday 07 February 2011] [10:13:53] &lt;mikko&gt;  stutter: i need to create a wiki page detailing the build system
| [Monday 07 February 2011] [10:14:01] &lt;sustrik&gt;        multicast treats the netowrk swtich (hardware) as a device
| [Monday 07 February 2011] [10:14:02] &lt;mikko&gt;  and organisations / people who participate in it
| [Monday 07 February 2011] [10:14:15] &lt;stutter&gt;        mikko: did you mean to tab-complete someone else/
| [Monday 07 February 2011] [10:14:23] &lt;mikko&gt;  yes
| [Monday 07 February 2011] [10:14:26] &lt;stutter&gt;        :P
| [Monday 07 February 2011] [10:14:28] &lt;mikko&gt;  i meant to tab complete sustrik
| [Monday 07 February 2011] [10:14:32] &lt;stutter&gt;        i figured
| [Monday 07 February 2011] [10:14:33] &lt;mikko&gt;  sorry about that
| [Monday 07 February 2011] [10:14:45] &lt;sustrik&gt;        mikko: ok
| [Monday 07 February 2011] [10:14:57] &lt;mikko&gt;  ill try to have time today, ill put a reminder
| [Monday 07 February 2011] [10:15:13] &lt;sustrik&gt;        ianbarber: so both pubs and subs &#8220;connect&#8221; to the switch
| [Monday 07 February 2011] [10:15:25] &lt;sustrik&gt;        which then forwards any message from any pub to all subs
| [Monday 07 February 2011] [10:15:44] &lt;ianbarber&gt;      that makes sense, thanks
| [Monday 07 February 2011] [10:16:03] &lt;mikko&gt;  now when i look at ian&#8217;s message about openpgm i think steven sent me an email about it
| [Monday 07 February 2011] [10:16:09] &lt;mikko&gt;  didnt have time to look further
| [Monday 07 February 2011] [10:16:21] &lt;sustrik&gt;        mikko: nice, i think if we made it reasonably visible we can get more participants
| [Monday 07 February 2011] [10:16:36] &lt;mikko&gt;  &#8220;Building ZeroMQ I finally get through to the same assertion, and wondering through the code I find the window size is being calculated with options.rate in bytes not kilobytes.  So add a  1024 for both rxw_sqns and txw_sqns.&#8221;
| [Monday 07 February 2011] [10:16:45] &lt;mikko&gt;  was the relevant part from his email
| [Monday 07 February 2011] [10:17:15] &lt;mikko&gt;  but adding 1024 x didn&#8217;t solve the issue for me and didn&#8217;t really have time to look it further
| [Monday 07 February 2011] [10:17:51] &lt;sustrik&gt;        i tried to debug it, but here is seemed that setting the port have failed rather than rate...
| [Monday 07 February 2011] [10:17:52] &lt;sustrik&gt;        strange
| [Monday 07 February 2011] [10:22:42] &lt;ianbarber&gt;      mikko: there is a comment to that effects,     //  Data rate is in [B/s]. options.rate is in [kb/s].
| [Monday 07 February 2011] [10:23:01] &lt;ianbarber&gt;      and it is possible I was hitting the assert due to failing pgm_setsockopt (sock, IPPROTO_PGM, PGM_TXW_SQNS,
| [Monday 07 February 2011] [10:23:02] &lt;ianbarber&gt;                      &amp;txw_sqns, sizeof (txw_sqns))
| [Monday 07 February 2011] [10:28:30] &lt;ianbarber&gt;      yep, that&#8217;s it
| [Monday 07 February 2011] [10:28:46] &lt;ianbarber&gt;      if txw_sqns is 0, it asserts
| [Monday 07 February 2011] [10:30:33] &lt;ianbarber&gt;      pmg_max_tpdu is 1500
| [Monday 07 February 2011] [10:30:57] &lt;ianbarber&gt;      the sqns is options.recovery_ivl * options.rate /
| [Monday 07 February 2011] [10:30:57] &lt;ianbarber&gt;                                            txw_max_tpdu
| [Monday 07 February 2011] [10:31:05] &lt;ianbarber&gt;      and recovery_ivl defaults to 10
| [Monday 07 February 2011] [10:31:22] &lt;ianbarber&gt;      so at 149 or below, it comes out as int 0
| [Monday 07 February 2011] [10:31:25] &lt;ianbarber&gt;      which blows up
| [Monday 07 February 2011] [10:31:44] &lt;ianbarber&gt;      so i think that for this calculation options.rate should be multiplied by 1024
| [Monday 07 February 2011] [10:32:03] &lt;ianbarber&gt;      or zmq:txw_max_tpdu appropriately reduced, but that seems more likely to have knock ons
| [Monday 07 February 2011] [10:33:15] &lt;Guthur&gt; is there documentation of ZeroMQs underlying architecture, or is it just the source code?
| [Monday 07 February 2011] [10:38:04] &lt;sustrik&gt;        ianbarber: that&#8217;s useful
| [Monday 07 February 2011] [10:38:14] &lt;sustrik&gt;        let me see whether it can be fixed
| [Monday 07 February 2011] [10:38:26] &lt;ianbarber&gt;      just tested a multiplying it by 1024 and it works fine
| [Monday 07 February 2011] [10:38:40] &lt;ianbarber&gt;      i can send a patch if useful (it&#8217;s like 4 lines, so maybe not worth it)
| [Monday 07 February 2011] [10:39:04] &lt;sustrik&gt;        you mean patch that mutliples the value?
| [Monday 07 February 2011] [10:39:15] &lt;ianbarber&gt;      yeah
| [Monday 07 February 2011] [10:42:57] &lt;sustrik&gt;        hm, it seems it should be multiplied by 8 rather than 1024
| [Monday 07 February 2011] [10:43:17] &lt;sustrik&gt;        tpdu is in bytes
| [Monday 07 February 2011] [10:43:20] &lt;sustrik&gt;        rate is in bits
| [Monday 07 February 2011] [10:43:31] &lt;ianbarber&gt;      ah, you&#8217;re right
| [Monday 07 February 2011] [10:43:52] &lt;ianbarber&gt;      just fired the patch on mail as well, so you could see what i meant, but yeah, it should be 8
| [Monday 07 February 2011] [10:44:16] &lt;ianbarber&gt;      actually, should it?
| [Monday 07 February 2011] [10:44:19] &lt;sustrik&gt;        the calculation is kind of strange
| [Monday 07 February 2011] [10:44:27] &lt;ianbarber&gt;      just looking, the comment does mention bytes to kb
| [Monday 07 February 2011] [10:44:34] &lt;sustrik&gt;        let us decypher what&#8217;s going on there...
| [Monday 07 February 2011] [10:44:45] &lt;ianbarber&gt;      are you seeing bits to bytes somewhere?
| [Monday 07 February 2011] [10:44:56] &lt;sustrik&gt;        nope
| [Monday 07 February 2011] [10:45:12] &lt;stimpie&gt;        Guthur, all I could find is the source code.
| [Monday 07 February 2011] [10:45:17] &lt;sustrik&gt;        we are speaking about pgm_socket.cpp:201, right?
| [Monday 07 February 2011] [10:45:54] &lt;ianbarber&gt;      yeah, or the equivalent bit in sender
| [Monday 07 February 2011] [10:46:03] &lt;sustrik&gt;        options.recovery_ivl_msec &gt;= 0 ?
| [Monday 07 February 2011] [10:46:03] &lt;sustrik&gt;                                              options.recovery_ivl_msec * options.rate /
| [Monday 07 February 2011] [10:46:03] &lt;sustrik&gt;                                              (1000 * rxw_max_tpdu) :
| [Monday 07 February 2011] [10:46:03] &lt;sustrik&gt;                                              options.recovery_ivl * options.rate /
| [Monday 07 February 2011] [10:46:03] &lt;sustrik&gt;                                              rxw_max_tpdu
| [Monday 07 February 2011] [10:46:16] &lt;ianbarber&gt;      pgm_max_tpdu is 1500, which looks like bytes
| [Monday 07 February 2011] [10:46:23] &lt;sustrik&gt;        yes, it&#8217;s bytes
| [Monday 07 February 2011] [10:46:47] &lt;sustrik&gt;        so, first of all, there are 2 options
| [Monday 07 February 2011] [10:46:59] &lt;sustrik&gt;        recovery_ivl and recovery_ivl_msec
| [Monday 07 February 2011] [10:47:11] &lt;sustrik&gt;        the former is in secs, the latter is in msecs
| [Monday 07 February 2011] [10:47:37] &lt;sustrik&gt;        if the latter is set to 0 (default), former value is used
| [Monday 07 February 2011] [10:47:53] &lt;ianbarber&gt;      zmq_rate says kilobits per second
| [Monday 07 February 2011] [10:48:09] &lt;ianbarber&gt;      the msec/sec is dealt with in the * 1000
| [Monday 07 February 2011] [10:48:12] &lt;ianbarber&gt;      so i think we need * 128
| [Monday 07 February 2011] [10:48:22] &lt;ianbarber&gt;      to go from kilobits to bytes
| [Monday 07 February 2011] [10:48:52] &lt;sustrik&gt;        i haven&#8217;t got that far yet :)
| [Monday 07 February 2011] [10:49:26]   * sustrik has to write it down
| [Monday 07 February 2011] [10:50:24] &lt;ianbarber&gt;      :)
| [Monday 07 February 2011] [10:53:27] &lt;sustrik&gt;        recovery_ivl * rate * max_tpdu * 1000 / 8
| [Monday 07 February 2011] [10:54:12] &lt;sustrik&gt;        ianbarber: can you double check that?
| [Monday 07 February 2011] [10:54:54] &lt;sustrik&gt;        sorry
| [Monday 07 February 2011] [10:55:02] &lt;sustrik&gt;        recovery_ivl * rate / max_tpdu * 1000 / 8
| [Monday 07 February 2011] [10:56:40] &lt;ianbarber&gt;      was about to say :)
| [Monday 07 February 2011] [10:57:02] &lt;sustrik&gt;        ok, now the ordering of the terms
| [Monday 07 February 2011] [10:57:08] &lt;sustrik&gt;        the computation is done in ints
| [Monday 07 February 2011] [10:57:21] &lt;sustrik&gt;        so we have to beware rounding down to zero
| [Monday 07 February 2011] [10:57:31] &lt;ianbarber&gt;      not sure about that one still
| [Monday 07 February 2011] [10:57:39] &lt;sustrik&gt;        what&#8217;s wrong?
| [Monday 07 February 2011] [10:57:41] &lt;ianbarber&gt;      10 * 100 / 1500 * 1000 / 8
| [Monday 07 February 2011] [10:57:49] &lt;ianbarber&gt;      that&#8217;s with the default numbers plugged in
| [Monday 07 February 2011] [10:59:11] &lt;sustrik&gt;        that equals in ~83 packets
| [Monday 07 February 2011] [11:00:16] &lt;ianbarber&gt;      of course, this is for the ivl_msec case, so it would be 10000 or thereabouts on the left
| [Monday 07 February 2011] [11:00:20] &lt;ianbarber&gt;      yeah, that works then
| [Monday 07 February 2011] [11:01:07] &lt;ianbarber&gt;      though i don&#8217;t get your 83 - that looks like about 5 packets to me. (i am likely missing something though)
| [Monday 07 February 2011] [11:02:28] &lt;sustrik&gt;        &lt;ianbarber&gt; 10 * 100 / 1500 * 1000 / 8
| [Monday 07 February 2011] [11:02:31] &lt;sustrik&gt;        = 83
| [Monday 07 February 2011] [11:03:24] &lt;ianbarber&gt;      yep, of course. i shoudn&#8217;t try and do that in my head :)
| [Monday 07 February 2011] [11:03:29] &lt;ianbarber&gt;      yeah, that looks good
| [Monday 07 February 2011] [11:03:41] &lt;sustrik&gt;        ok, now the ordering...
| [Monday 07 February 2011] [11:04:40] &lt;sustrik&gt;        i think we can mutliply all multiplicants without overflowing the int
| [Monday 07 February 2011] [11:05:00] &lt;sustrik&gt;        hm
| [Monday 07 February 2011] [11:05:37] &lt;sustrik&gt;        with 1Gb rate we can overflow a 32-bit integer
| [Monday 07 February 2011] [11:05:57] &lt;sustrik&gt;        maybe the computation should be done in int64_t
| [Monday 07 February 2011] [11:06:04] &lt;sustrik&gt;        and then cast to int
| [Monday 07 February 2011] [11:07:51] &lt;sustrik&gt;        what unit is rxw_sqns meant to be in
| [Monday 07 February 2011] [11:08:01] &lt;sustrik&gt;        number of PGM packets?
| [Monday 07 February 2011] [11:08:06] &lt;ianbarber&gt;      sequence numbers
| [Monday 07 February 2011] [11:08:12] &lt;ianbarber&gt;      yeah, packets basically
| [Monday 07 February 2011] [11:08:26] &lt;sustrik&gt;        so the computation is completely wrong now
| [Monday 07 February 2011] [11:09:06] &lt;ianbarber&gt;      there is also a limit to how big it is
| [Monday 07 February 2011] [11:09:07] &lt;sustrik&gt;        it&#8217;s 125x less than it should be :|
| [Monday 07 February 2011] [11:09:21] &lt;ianbarber&gt;      spec says no greater than half the sequence number space less one
| [Monday 07 February 2011] [11:09:28] &lt;ianbarber&gt;      though I suspect the space is pretty huge :)
| [Monday 07 February 2011] [11:09:53] &lt;sustrik&gt;        yeah, something like 2billion
| [Monday 07 February 2011] [11:09:56] &lt;sustrik&gt;        irrelevant here
| [Monday 07 February 2011] [11:09:58] &lt;ianbarber&gt;      yeah
| [Monday 07 February 2011] [11:10:19] &lt;sustrik&gt;        what i don&#8217;t get it how it can work for anybody
| [Monday 07 February 2011] [11:10:41] &lt;ianbarber&gt;      well, it works if you have a high enough rate
| [Monday 07 February 2011] [11:10:46] &lt;sustrik&gt;        the buffers allocated now are 125x smaller than they should be
| [Monday 07 February 2011] [11:11:00] &lt;ianbarber&gt;      you just get a small sqns range, so it&#8217;ll effectively get a lot less throughput than it should i think
| [Monday 07 February 2011] [11:11:08] &lt;sustrik&gt;        well, yes, but that means you recovery interval is 125x shorter
| [Monday 07 February 2011] [11:11:19] &lt;ianbarber&gt;      yeah, so less reliable
| [Monday 07 February 2011] [11:11:26] &lt;sustrik&gt;        strange
| [Monday 07 February 2011] [11:11:51] &lt;ianbarber&gt;      but reliability is pretty good on networks - most people are unlikely to hit it unless they&#8217;re dropping packets
| [Monday 07 February 2011] [11:11:57] &lt;sustrik&gt;        maybe
| [Monday 07 February 2011] [11:12:03] &lt;sustrik&gt;        but if we fix it now
| [Monday 07 February 2011] [11:12:13] &lt;sustrik&gt;        prople&#8217;s buffers will grow 126x
| [Monday 07 February 2011] [11:12:16] &lt;sustrik&gt;        125x
| [Monday 07 February 2011] [11:12:24] &lt;sustrik&gt;        and possibly get out of memory
| [Monday 07 February 2011] [11:12:25] &lt;sustrik&gt;        :(
| [Monday 07 February 2011] [11:12:27] &lt;ianbarber&gt;      hmm
| [Monday 07 February 2011] [11:12:32] &lt;mikko&gt;  at the moment it asserts (?)
| [Monday 07 February 2011] [11:12:53] &lt;sustrik&gt;        mikko: it looks like the computation of pgm buffer size is wrong
| [Monday 07 February 2011] [11:12:53] &lt;mikko&gt;  just came back
| [Monday 07 February 2011] [11:13:04] &lt;mikko&gt;  i think that is something that should go to 2.1.x
| [Monday 07 February 2011] [11:13:06] &lt;sustrik&gt;        yielding buffers 125x smaller than they should be
| [Monday 07 February 2011] [11:13:17] &lt;ianbarber&gt;      not sure, txw_seqns does interact with txw_secs
| [Monday 07 February 2011] [11:13:28] &lt;ianbarber&gt;      so perhaps the effect isn&#8217;t as large as it might be, of increasing the size
| [Monday 07 February 2011] [11:13:48] &lt;sustrik&gt;        i think we need to consult steven before changing it
| [Monday 07 February 2011] [11:14:02] &lt;sustrik&gt;        he doesn&#8217;t seem to be online now
| [Monday 07 February 2011] [11:14:17] &lt;ianbarber&gt;      yeah, he&#8217;s the best person to comment
| [Monday 07 February 2011] [11:14:19] &lt;sustrik&gt;        ianbarber: can you drop him a note on the mailing list?
| [Monday 07 February 2011] [11:14:31] &lt;ianbarber&gt;      sure thing
| [Monday 07 February 2011] [11:14:43] &lt;sustrik&gt;        thanks
| [Monday 07 February 2011] [11:28:36] &lt;Guthur&gt; I was afraid it was only the source code as documentation
| [Monday 07 February 2011] [11:31:44] &lt;sustrik&gt;        Guthur: what exactly do you need?
| [Monday 07 February 2011] [11:39:22] &lt;Guthur&gt; sustrik: understanding, hehe
| [Monday 07 February 2011] [11:39:48] &lt;mikko&gt;  neale1: on the build page should i list &#8220;Contributed by: IBM&#8221; or something else
| [Monday 07 February 2011] [11:40:10] &lt;Guthur&gt; I was hoping to provide patches, but there is a lot to understand
| [Monday 07 February 2011] [11:40:21] &lt;sustrik&gt;        i&#8217;ve started writing somrthing:
| [Monday 07 February 2011] [11:40:22] &lt;sustrik&gt;        http://www.zeromq.org/whitepapers:architecture
| [Monday 07 February 2011] [11:40:23] &lt;Guthur&gt; Specifically the duplicate identity issue
| [Monday 07 February 2011] [11:40:28] &lt;sustrik&gt;        but never got too far
| [Monday 07 February 2011] [11:40:51] &lt;sustrik&gt;        in any case, feel free to ask on irc
| [Monday 07 February 2011] [11:41:08] &lt;Guthur&gt; in general I think it would make the learning curve for new contributors a little less steep
| [Monday 07 February 2011] [11:41:40] &lt;sustrik&gt;        definitely
| [Monday 07 February 2011] [11:41:59] &lt;ianbarber&gt;      that duplicate identity issue seems tricky
| [Monday 07 February 2011] [11:42:08] &lt;sustrik&gt;        the only problem is someone has to write it down and maintain it as the development goes on
| [Monday 07 February 2011] [11:44:22] &lt;Guthur&gt; ianbarber: My main issue with it is the fact it crashes the server side
| [Monday 07 February 2011] [11:44:35] &lt;Guthur&gt; clients crashing a server is not good
| [Monday 07 February 2011] [11:44:49] &lt;ianbarber&gt;      yep, i agree
| [Monday 07 February 2011] [11:44:54] &lt;ianbarber&gt;      i had the same reaction
| [Monday 07 February 2011] [11:52:11] &lt;ianbarber&gt;      hmm
| [Monday 07 February 2011] [11:52:13] &lt;ianbarber&gt;      sessions_sync.lock ();
| [Monday 07 February 2011] [11:52:13] &lt;ianbarber&gt;          bool registered = sessions.insert (
| [Monday 07 February 2011] [11:52:13] &lt;ianbarber&gt;              sessions_t::value_type (<a href="#id1763"><span class="problematic" id="id1764">name_</span></a>, <a href="#id1765"><span class="problematic" id="id1766">session_</span></a>)).second;
| [Monday 07 February 2011] [11:52:13] &lt;ianbarber&gt;          sessions_sync.unlock ();
| [Monday 07 February 2011] [11:52:14] &lt;ianbarber&gt;          return registered;
| [Monday 07 February 2011] [11:52:42] &lt;ianbarber&gt;      just google, the first ref I found for stl map said insert would return the inserted thing, or an operator
| [Monday 07 February 2011] [11:52:44] &lt;ianbarber&gt;      not a bool
| [Monday 07 February 2011] [11:53:04] &lt;ianbarber&gt;      so the insert wouldn&#8217;t report a failure, even if it had encountered a collision?
| [Monday 07 February 2011] [11:53:16] &lt;ianbarber&gt;      sure sustrik will correct me in short order :)
| [Monday 07 February 2011] [12:01:47] &lt;mikko&gt;  <a class="reference external" href="http://www.zeromq.org/docs:builds">http://www.zeromq.org/docs:builds</a>
| [Monday 07 February 2011] [12:01:55] &lt;mikko&gt;  needs information about contributors as well
| [Monday 07 February 2011] [12:03:54] &lt;ianbarber&gt;      surely put yourself on there under contributors
| [Monday 07 February 2011] [12:04:06] &lt;ianbarber&gt;      others can add themselves I guess would be easiest, it is a wiki
| [Monday 07 February 2011] [12:25:30] &lt;mikko&gt;  crlzmq2 fails to build atm
| [Monday 07 February 2011] [12:30:39] &lt;Guthur&gt; mikko: yeah sorry about that
| [Monday 07 February 2011] [12:30:55] &lt;Guthur&gt; I know the issue, but can not fix at the moment, at work
| [Monday 07 February 2011] [12:31:00] &lt;mikko&gt;  thats fine
| [Monday 07 February 2011] [12:31:05] &lt;mikko&gt;  just making sure that it&#8217;s known
| [Monday 07 February 2011] [12:31:19] &lt;neale1&gt;         mikko: There&#8217;s a mono environment on the same s390x build server if you want to exploit that. What level of mono do you require? It&#8217;s 2.7.1 atm, but can be brought up to current git head if required
| [Monday 07 February 2011] [12:31:46] &lt;Guthur&gt; the solution file is the source of the problem
| [Monday 07 February 2011] [12:32:03] &lt;mikko&gt;  i got mono 2.6.7
| [Monday 07 February 2011] [12:32:11] &lt;mikko&gt;  is there a difference with mono across architectures?
| [Monday 07 February 2011] [12:32:16] &lt;Guthur&gt; I should be able to push a fix in a couple of hours
| [Monday 07 February 2011] [12:33:11] &lt;neale1&gt; mikko: Shouldn&#8217;t be. I build from same base, just have s390x jit to do bytecode to s390x machine code xlate
| [Monday 07 February 2011] [12:33:33] &lt;mikko&gt;  neale1: should i mention that &#8220;Linux s390x build slave was contributed by IBM&#8221; ?
| [Monday 07 February 2011] [12:33:49] &lt;neale1&gt; No, by Marist College would be better
| [Monday 07 February 2011] [12:33:57] &lt;mikko&gt;  neale1: i could add a mono build for clrzmq and clrzmq2
| [Monday 07 February 2011] [12:34:01] &lt;mikko&gt;  neale1: sure, will add that
| [Monday 07 February 2011] [12:34:04] &lt;neale1&gt; Yes
| [Monday 07 February 2011] [12:34:15] &lt;mikko&gt;  do you want url to anywhere?
| [Monday 07 February 2011] [12:35:24] &lt;neale1&gt; I&#8217;ll ask the Marist folks
| [Monday 07 February 2011] [12:35:40] &lt;mikko&gt;  neale1: <a class="reference external" href="http://www.zeromq.org/docs:builds">http://www.zeromq.org/docs:builds</a>
| [Monday 07 February 2011] [12:35:47] &lt;mikko&gt;  you can edit the page to add the link
| [Monday 07 February 2011] [12:37:30] &lt;neale1&gt; mikko: Tks
| [Monday 07 February 2011] [12:38:05] &lt;ianbarber&gt;      ah, there&#8217;s a .second on that sessions code, so it&#8217;s all good. Stepping through it looks like register session is only being called once, for some odd reason
| [Monday 07 February 2011] [12:41:20] &lt;neale1&gt; mikko: Do I have a wikidot id to update that page?
| [Monday 07 February 2011] [12:42:48] &lt;mikko&gt;  neale1: i think you can create one
| [Monday 07 February 2011] [12:42:55] &lt;mikko&gt;  neale1: im not sure if you have one already :)
| [Monday 07 February 2011] [12:44:01] &lt;neale1&gt;  mikko: Cld u just add this <a class="reference external" href="http://www.marist.edu/it/datacenter/systems.html">http://www.marist.edu/it/datacenter/systems.html</a>
| [Monday 07 February 2011] [12:44:21] &lt;mikko&gt;  neale1: will do
| [Monday 07 February 2011] [12:45:19] &lt;mikko&gt;  neale1: done
| [Monday 07 February 2011] [12:54:27] &lt;sustrik&gt;        ianbarber: insert returns pair, the code selects the second part of the pair, which is bool
| [Monday 07 February 2011] [12:55:10] &lt;ianbarber&gt;      sustrik: spotted that, seems correct
| [Monday 07 February 2011] [12:55:22] &lt;ianbarber&gt;      weird thing I had when debugging the dual identities thing is that it only seems to be hit once
| [Monday 07 February 2011] [12:55:35] &lt;ianbarber&gt;      so I suspect the problem is further up the chain, in attach or something like that
| [Monday 07 February 2011] [12:55:57] &lt;sustrik&gt;        ianbarber: yes, possibly
| [Monday 07 February 2011] [12:57:09] &lt;sustrik&gt;        where exactly does it crash now?
| [Monday 07 February 2011] [12:57:59] &lt;ianbarber&gt;      Assertion failed: new_sndbuf &gt; old_sndbuf (mailbox.cpp:182)
| [Monday 07 February 2011] [12:58:17] &lt;ianbarber&gt;      i think that&#8217;s just because if it gets a send fail it just tries to increase buffer size (until it can&#8217;t)
| [Monday 07 February 2011] [12:58:50] &lt;sustrik&gt;        ianbarber: that has nothing to do with duplicate identities imo
| [Monday 07 February 2011] [12:59:27] &lt;sustrik&gt;        well, unless duplicate identities cause an infinite or extremely fast generation of commands
| [Monday 07 February 2011] [12:59:40] &lt;sustrik&gt;        hm, the latter may be the case...
| [Monday 07 February 2011] [13:01:46] &lt;ianbarber&gt;      sustrik: i don&#8217;t get the crash on connect, only when I attempt to send something to connected peers
| [Monday 07 February 2011] [13:01:58] &lt;ianbarber&gt;      so it may be something of that nature
| [Monday 07 February 2011] [13:02:16] &lt;rook-&gt;  hello? I have a noob question if someone has a few minutes
| [Monday 07 February 2011] [13:02:41] &lt;sustrik&gt;        inabarder: interesting
| [Monday 07 February 2011] [13:02:48] &lt;sustrik&gt;        rook-: shoot
| [Monday 07 February 2011] [13:03:19] &lt;sustrik&gt;        ianbarber: it looks like large amount of commands is generated for some reason
| [Monday 07 February 2011] [13:03:22] &lt;rook-&gt;  I&#8217;m looking for a messaging system to support a distributed &#8220;eventually consistent&#8221; cloud architecture...
| [Monday 07 February 2011] [13:03:30] &lt;sustrik&gt;        you need to find out why it is so
| [Monday 07 February 2011] [13:03:51] &lt;sustrik&gt;        check the send_command() function to hook into command passing mechanism
| [Monday 07 February 2011] [13:03:53] &lt;rook-&gt;  all the mq&#8217;s I&#8217;ve found seem to support 2 models: durable queues and pub/sub (fanout)
| [Monday 07 February 2011] [13:04:39] &lt;rook-&gt;  but nothing seems to support publishing blindly to n-subscribers and guaranteeing that each subscriber receives 1 and only 1 copy of the message
| [Monday 07 February 2011] [13:04:51] &lt;sustrik&gt;        it&#8217;s impossible
| [Monday 07 February 2011] [13:05:01] &lt;sustrik&gt;        slow consumers are the problem
| [Monday 07 February 2011] [13:05:08] &lt;rook-&gt;  by blindly, I mean that the publisher just writes 1 message and all subs who&#8217;ve scribed (whether they&#8217;re connected or not) eventually get it
| [Monday 07 February 2011] [13:05:49] &lt;rook-&gt;  it looks to me like a pub-sub with a replay service or something similar would solve the problem, but haven&#8217;t seen anything like it
| [Monday 07 February 2011] [13:06:08] &lt;sustrik&gt;        you would need infinite memory to hold the messages for slow/stuck consumers
| [Monday 07 February 2011] [13:06:27] &lt;rook-&gt;  infinite/disk
| [Monday 07 February 2011] [13:06:27] &lt;rook-&gt;  yea
| [Monday 07 February 2011] [13:07:20] &lt;sustrik&gt;        yes, so it can&#8217;t be done
| [Monday 07 February 2011] [13:07:37] &lt;rook-&gt;  um.. I have a hard time believing that...
| [Monday 07 February 2011] [13:08:13] &lt;rook-&gt;  since so many services are using eventually consistent frameworks of their own devising
| [Monday 07 February 2011] [13:08:32] &lt;sustrik&gt;        shrug
| [Monday 07 February 2011] [13:09:21] &lt;rook-&gt;  I mean, there may be the need for a high water mark/&#8221;beyond this point the stuck consumer needs help with rebuilding&#8221;
| [Monday 07 February 2011] [13:09:33] &lt;rook-&gt;  but &#8220;can&#8217;t be done&#8221; seems improbable
| [Monday 07 February 2011] [13:10:12] &lt;sustrik&gt;        there&#8217;s an alternative, yes
| [Monday 07 February 2011] [13:10:20] &lt;sustrik&gt;        you can block the sender
| [Monday 07 February 2011] [13:10:39] &lt;sustrik&gt;        but that means that the slow/stuck consumer can stop all the data distribution
| [Monday 07 February 2011] [13:10:50] &lt;sustrik&gt;        even to the properly working consumers
| [Monday 07 February 2011] [13:11:10] &lt;rook-&gt;  yea that&#8217;d suck :D
| [Monday 07 February 2011] [13:11:20] &lt;sustrik&gt;        so it&#8217;s either-or
| [Monday 07 February 2011] [13:11:33] &lt;sustrik&gt;        either drop messages when there no space to store them
| [Monday 07 February 2011] [13:11:43] &lt;sustrik&gt;        or block the whole distribution
| [Monday 07 February 2011] [13:12:38] &lt;rook-&gt;  hrm...
| [Monday 07 February 2011] [13:13:26] &lt;rook-&gt;  I think in our env. a rolling window would potentially be ok... i.e. if the consumer isn&#8217;t around for a given period of time, then remediation is required for it to rejoin and resync
| [Monday 07 February 2011] [13:13:43] &lt;sustrik&gt;        ack
| [Monday 07 February 2011] [13:13:51] &lt;rook-&gt;  true
| [Monday 07 February 2011] [13:13:51] &lt;sustrik&gt;        that&#8217;s the standard model for pub-sub
| [Monday 07 February 2011] [13:14:03] &lt;rook-&gt;  sorry?
| [Monday 07 February 2011] [13:14:32] &lt;rook-&gt;  I thought that pub/sub was limited by immediately connectivity and deliverability
| [Monday 07 February 2011] [13:14:53] &lt;rook-&gt;  i.e. if consumer isn&#8217;t there to receive message, or isn&#8217;t accepting the message, it may miss out
| [Monday 07 February 2011] [13:16:29] &lt;rook-&gt;  is my impression of pub/sub overly simplified?
| [Monday 07 February 2011] [13:16:51] &lt;rook-&gt;   / have I missed something?
| [Monday 07 February 2011] [13:18:25] &lt;ianbarber&gt;      rook: that&#8217;s how pubsub works in 0MQ, without identities. If you have identities set then it&#8217;ll try and buffer up messages for them.
| [Monday 07 February 2011] [13:19:13] &lt;sustrik&gt;        rook-: yes, you are right
| [Monday 07 February 2011] [13:19:19] &lt;sustrik&gt;        that&#8217;s the general model
| [Monday 07 February 2011] [13:19:32] &lt;sustrik&gt;        however, different solution add some amount of reliability
| [Monday 07 February 2011] [13:20:02] &lt;sustrik&gt;        for example, PGM retransmits the missing packets if they are still in the reliability window
| [Monday 07 February 2011] [13:20:04] &lt;sustrik&gt;        etc.
| [Monday 07 February 2011] [13:21:22] &lt;Guthur&gt; is the HWM per durable subscriber or does it effect all globally?
| [Monday 07 February 2011] [13:21:53] &lt;sustrik&gt;        it&#8217;s per peer
| [Monday 07 February 2011] [13:22:33] &lt;Guthur&gt; is there no way to clear it, besides the peer connecting?
| [Monday 07 February 2011] [13:23:31] &lt;rook-&gt;  so I can, in 0mq, have a publisher, who just publishes events, and I can have n-consumers that each, with some reliability, receive every message and the publisher doesn&#8217;t need to know or be configured with what the consumers are, how many of them there are, etc.
| [Monday 07 February 2011] [13:23:35] &lt;rook-&gt;  ?
| [Monday 07 February 2011] [13:27:52] &lt;rook-&gt;  ?
| [Monday 07 February 2011] [13:28:00] &lt;rook-&gt;  sustrik?
| [Monday 07 February 2011] [13:31:33] &lt;sustrik&gt;        Guthur: no
| [Monday 07 February 2011] [13:31:52] &lt;sustrik&gt;        rook-: yes
| [Monday 07 February 2011] [13:32:09] &lt;rook-&gt;  cool!
| [Monday 07 February 2011] [13:32:48] &lt;rook-&gt;  is the size of the window configurable?  I clearly have more reading to do, url reference handy?  Pointers?
| [Monday 07 February 2011] [13:32:53] &lt;rook-&gt;  (thanks for your help btw)
| [Monday 07 February 2011] [13:33:22] &lt;Guthur&gt; rook-: http://zguide.zeromq.org/chapter:all
| [Monday 07 February 2011] [13:33:29] &lt;Guthur&gt; you may have seen it already
| [Monday 07 February 2011] [13:33:32] &lt;sustrik&gt;        or check the man pages
| [Monday 07 February 2011] [13:34:14] &lt;rook-&gt;  yea saw the docs - to be honest, I find them... difficult.. very friendly and jovial but not as... concise as typical docs ;)
| [Monday 07 February 2011] [13:34:29] &lt;sustrik&gt;        there&#8217;s reference
| [Monday 07 February 2011] [13:34:36] &lt;sustrik&gt;        that&#8217;s consice
| [Monday 07 February 2011] [13:35:04] &lt;rook-&gt;  ok I&#8217;ll poke about
| [Monday 07 February 2011] [13:35:10] &lt;rook-&gt;  now that I know that 0mq handles it
| [Monday 07 February 2011] [13:35:23] &lt;rook-&gt;  I feel more justified in digging harder for the info :)
| [Monday 07 February 2011] [13:35:57] &lt;rook-&gt;  thanks for the help - off to read
| [Monday 07 February 2011] [13:35:59] &lt;rook-&gt;  :)
| [Monday 07 February 2011] [14:45:08] &lt;mikko&gt;  good evening
| [Monday 07 February 2011] [14:58:36] &lt;neale1&gt; mikko: I am getting an article on 0MQ printed in the April/May edition of z/Journal (a journal for IBM mainframers). It&#8217;s an introduction to 0MQ for a group more familiar with things like MQSeries
| [Monday 07 February 2011] [14:59:08] &lt;mikko&gt;  nice
| [Monday 07 February 2011] [14:59:16] &lt;mikko&gt;  i read about ibm system z
| [Monday 07 February 2011] [14:59:24] &lt;mikko&gt;  seems like pretty serious computing system
| [Monday 07 February 2011] [15:00:48] &lt;neale1&gt; Yep, there&#8217;s a major conference in Anaheim later this month which I&#8217;m going to. I wasn&#8217;t able to schedule a 0MQ talk this time but I&#8217;ll be trying to get one on the agenda for August in Orlando. As I&#8217;m on the program committee, it should get on
| [Monday 07 February 2011] [15:02:17] &lt;mikko&gt;  what is the conference in Orlando?
| [Monday 07 February 2011] [15:02:36] &lt;neale1&gt; Same as the one in Anaheim - they hold 2 yearly. It&#8217;s called &#8220;SHARE&#8221;
| [Monday 07 February 2011] [15:02:55] &lt;mikko&gt;  is it mainframy conference?
| [Monday 07 February 2011] [15:03:09] &lt;neale1&gt; Yep
| [Monday 07 February 2011] [15:03:37] &lt;neale1&gt; http://share.confex.com/share/116/webprogram/start.html
| [Monday 07 February 2011] [15:05:20] &lt;mikko&gt;  seems like a big conference
| [Monday 07 February 2011] [15:06:20] &lt;mikko&gt;  i&#8217;ve worked with some of the technologies mentioned in the talks
| [Monday 07 February 2011] [15:06:32] &lt;mikko&gt;  mainly on integrating them with web
| [Monday 07 February 2011] [15:07:53] &lt;sustrik&gt;        the introduction to 0mq for mq series users is something that&#8217;s badly missing
| [Monday 07 February 2011] [15:08:11] &lt;sustrik&gt;        neale1: would your article be publicly available?
| [Monday 07 February 2011] [15:08:38] &lt;neale1&gt; sustrik: Yes, z/Journal has it online as well as in a physical magazine.
| [Monday 07 February 2011] [15:08:56] &lt;sustrik&gt;        great!
| [Monday 07 February 2011] [15:09:04] &lt;neale1&gt; sustrik: I&#8217;m not doing a if you&#8217;re using WebSphere MQ and you do x, then on 0MQ you do y
| [Monday 07 February 2011] [15:09:15] &lt;sustrik&gt;        understood
| [Monday 07 February 2011] [15:09:22] &lt;neale1&gt; It&#8217;s a straight introduction trying to put it in context of where it would be useful.
| [Monday 07 February 2011] [15:09:40] &lt;sustrik&gt;        i mean, the problem is that if you have &#8220;corporate messaging&#8221; experience
| [Monday 07 February 2011] [15:09:49] &lt;neale1&gt; A lot of folks want to avoid the complexity and cost of MQ
| [Monday 07 February 2011] [15:09:53] &lt;sustrik&gt;        you have quite lot of expectations...
| [Monday 07 February 2011] [15:09:56] &lt;neale1&gt; yes
| [Monday 07 February 2011] [15:10:00] &lt;sustrik&gt;        that don&#8217;t apply to 0mq
| [Monday 07 February 2011] [15:10:41] &lt;sustrik&gt;        so i think the point of the article is to explain the difference between mq series and 0mq
| [Monday 07 February 2011] [15:10:55] &lt;sustrik&gt;        like &#8220;what you should expect from 0mq&#8221;
| [Monday 07 February 2011] [15:10:58] &lt;sustrik&gt;        right?
| [Monday 07 February 2011] [15:12:40] &lt;sustrik&gt;        in any case, that kind of introduction is missing so far
| [Monday 07 February 2011] [15:14:19] &lt;neale1&gt; At the moment it&#8217;s even more basic than that. I want to aim at the sockets programmers who are dreading having to go to a full brokered option.
| [Monday 07 February 2011] [15:14:33] &lt;sustrik&gt;        ah, that&#8217;s easier, yes
| [Monday 07 February 2011] [15:15:14] &lt;neale1&gt; The linux on system z community is about 10 years old now, but most of its growth has been in the past 5. We&#8217;re seeing a mix of traditional sysadmin/programmer types from the UNIX world combining with the old hands from the traditional mainframe set.
| [Monday 07 February 2011] [15:16:00] &lt;neale1&gt; I want to conclude the article with a set of questions people can ask when they want to select a technology. It might be useful to open the floor here to suggestions.
| [Monday 07 February 2011] [15:16:51] &lt;sustrik&gt;        definitely
| [Monday 07 February 2011] [15:17:15] &lt;sustrik&gt;        it&#8217;s rather hard question to ask though
| [Monday 07 February 2011] [15:17:35] &lt;sustrik&gt;        as it&#8217;s not only a technical question
| [Monday 07 February 2011] [15:18:07] &lt;sustrik&gt;        and depends on whether there are people skilled in the technology, whether company have licenses bought already etc.
| [Monday 07 February 2011] [15:18:36] &lt;neale1&gt; In my own case I discovered 0MQ when I was tasked with a project that needed to have several &#8220;collector&#8221; clients receive raw data, package it, and send it to a sink which would process the collected data. In addition I wanted to add collectors at will, ensure delivery, receive configuration information from the server. And do this in a minimal footprint with little affect on overall CPU on the systems where those collectors are ru
| [Monday 07 February 2011] [15:18:54] &lt;neale1&gt; Oh, and not require the customer install a full-fledged broker type system
| [Monday 07 February 2011] [15:19:14] &lt;sustrik&gt;        right, then using 0mq makes perfect sense
| [Monday 07 February 2011] [15:19:34] &lt;sustrik&gt;        when you spoke about mainframes i though of integrating legacy apps
| [Monday 07 February 2011] [15:19:42] &lt;sustrik&gt;        rather than writing new apps
| [Monday 07 February 2011] [15:20:37] &lt;sustrik&gt;        but linux subsystem is probably not that legacy-oriented
| [Monday 07 February 2011] [15:23:01] &lt;neale1&gt; Actually, IBM has spent a lot of time/money putting hooks into its &#8220;legacy&#8221; systems to allow them to integrate with Linux. One thing we&#8217;d need to do on the legacy side though is to port the code (or provide a minimal set of things like the tcp: transport)
| [Monday 07 February 2011] [15:23:49] &lt;sustrik&gt;        right
| [Monday 07 February 2011] [15:24:06] &lt;sustrik&gt;        anyway, if you are going to have a lecture about 0mq
| [Monday 07 February 2011] [15:24:11] &lt;neale1&gt; Within a mainframe you can talk between the legacy systems like z/OS and a z/Linux system at memory-to-memory speeds even though it appears to be a layer2/layer3 network
| [Monday 07 February 2011] [15:24:27] &lt;sustrik&gt;        announce it on www.zeromq.org/community (see top right)
| [Monday 07 February 2011] [15:24:32] &lt;neale1&gt; Will do
| [Monday 07 February 2011] [15:24:58] &lt;sustrik&gt;        neale1: are you familiar with z/OS as well?
| [Monday 07 February 2011] [15:26:22] &lt;neale1&gt; sustrik: Yes as well as z/VSE and z/VM. The latter two I&#8217;ve been using for <em>many</em> years now. I have only a few years experience with z/OS.
| [Monday 07 February 2011] [15:26:57] &lt;neale1&gt; 0MQ could easily be ported to what z/OS calls Unix System Services (USS). It has a full UNIX-branded set of APIs.
| [Monday 07 February 2011] [15:27:08] &lt;sustrik&gt;        wow
| [Monday 07 February 2011] [15:27:21] &lt;sustrik&gt;        thay have a posix-y interface, right?
| [Monday 07 February 2011] [15:27:30] &lt;neale1&gt; Yes, fully posix-compliant
| [Monday 07 February 2011] [15:27:39] &lt;sustrik&gt;        that&#8217;s need
| [Monday 07 February 2011] [15:27:43] &lt;sustrik&gt;        neat
| [Monday 07 February 2011] [15:28:04] &lt;sustrik&gt;        would be nice to have the port one day
| [Monday 07 February 2011] [15:28:19] &lt;sustrik&gt;        but i assume the build system would be the main problem
| [Monday 07 February 2011] [15:28:45] &lt;neale1&gt; THey have most of the common tools too: autoconf/automake/libtool - at what level I&#8217;m not sure
| [Monday 07 February 2011] [15:28:57] &lt;sustrik&gt;        even better
| [Monday 07 February 2011] [15:29:04] &lt;sustrik&gt;        there&#8217;s a 0mq port to VMS
| [Monday 07 February 2011] [15:29:12] &lt;sustrik&gt;        there&#8217;s a POSIX interface available
| [Monday 07 February 2011] [15:29:15] &lt;neale1&gt; Yes, I saw that.
| [Monday 07 February 2011] [15:29:25] &lt;sustrik&gt;        but the problem is that there&#8217;s no unix shell
| [Monday 07 February 2011] [15:29:35] &lt;sustrik&gt;        so the autotools doesn&#8217;t work
| [Monday 07 February 2011] [15:29:41] &lt;neale1&gt; Ugh
| [Monday 07 February 2011] [15:30:01] &lt;neale1&gt; On USS they have a korn shell but you can also run bash
| [Monday 07 February 2011] [15:30:12] &lt;sustrik&gt;        sounds good
| [Monday 07 February 2011] [15:30:15] &lt;Guthur&gt; is there a zeromq irc log?
| [Monday 07 February 2011] [15:30:31] &lt;sustrik&gt;        travlr used to log the conversation
| [Monday 07 February 2011] [15:30:34] &lt;neale1&gt; Same goes with z/VM
| [Monday 07 February 2011] [15:30:57] &lt;sustrik&gt;        i see
| [Monday 07 February 2011] [15:31:05] &lt;Guthur&gt; ah ha, and he still does
| [Monday 07 February 2011] [15:31:05] &lt;Guthur&gt; cheers sustrik
| [Monday 07 February 2011] [15:31:33] &lt;sustrik&gt;        neale1: maybe give it a shot if you have some spare time
| [Monday 07 February 2011] [15:31:39] &lt;Guthur&gt; oh it&#8217;s a bit behind though
| [Monday 07 February 2011] [15:32:32] &lt;neale1&gt; I&#8217;m going to be installing an upgrade of our z/OS system in the near future, so I&#8217;ll make sure the USS environment and tools are there.
| [Monday 07 February 2011] [15:32:35] &lt;sustrik&gt;        the logger used to hang around called &#8216;zmqircd&#8217;
| [Monday 07 February 2011] [15:32:46] &lt;sustrik&gt;        but it doesn&#8217;t seem to be there for some time already
| [Monday 07 February 2011] [15:33:06] &lt;sustrik&gt;        neale1: nice
| [Monday 07 February 2011] [15:33:41] &lt;mikko&gt;  i got logs
| [Monday 07 February 2011] [15:33:50] &lt;mikko&gt;  since last Feb i think
| [Monday 07 February 2011] [15:34:37] &lt;Guthur&gt; it only goes up until Feb 4 2011 or something
| [Monday 07 February 2011] [15:34:54] &lt;Guthur&gt; I suppose it just needs the newest ones placed on it
| [Monday 07 February 2011] [15:36:25] &lt;mikko&gt;  it should be up to date
| [Monday 07 February 2011] [15:37:04] &lt;Guthur&gt; here <a class="reference external" href="http://travlr.github.com/zmqirclog/">http://travlr.github.com/zmqirclog/</a>
| [Monday 07 February 2011] [15:37:07] &lt;Guthur&gt; correct?
| [Monday 07 February 2011] [15:37:13] &lt;mikko&gt;  <a class="reference external" href="http://valokuva.org/~mikko/zeromq.log">http://valokuva.org/~mikko/zeromq.log</a>
| [Monday 07 February 2011] [15:37:15] &lt;mikko&gt;  mine&#8217;s here
| [Monday 07 February 2011] [15:37:46] &lt;mikko&gt;  it just links to my normal irc log from this channel
| [Monday 07 February 2011] [16:23:33] &lt;Guthur&gt; ok, hopefully that&#8217;s the clrzmq2 build fixed
| [Monday 07 February 2011] [17:28:54] &lt;Guthur&gt; just whipped together this asyncReturn device <a class="reference external" href="http://paste.lisp.org/display/119452">http://paste.lisp.org/display/119452</a>
| [Monday 07 February 2011] [17:29:30] &lt;Guthur&gt; the return call could be made with a push socket supplying the appropriate address
| [Monday 07 February 2011] [17:30:31] &lt;Guthur&gt; As an aside I have just moved the RunningLoop into the base class
| [Monday 07 February 2011] [17:31:15] &lt;Guthur&gt; Just a simple thing, but thought I would share anyway
| [Monday 07 February 2011] [20:50:35] &lt;Steve-o&gt;        mikko: the x1024 patch on PGM &#8216;works&#8217; but isn&#8217;t correct, I&#8217;ll have to look at Ian&#8217;s suggestion tomorrow
| [Monday 07 February 2011] [20:51:49] &lt;Steve-o&gt;        all day at IKEA today, patience is a virtue as is said.
| [Monday 07 February 2011] [20:57:56] &lt;d4de&gt;   Hi, any idea on when aprox. v2.1.0 will go stable?
| [Monday 07 February 2011] [21:00:03] &lt;Steve-o&gt;        good question, probably dependent on the issue list on github getting cleaned up a bit
| [Monday 07 February 2011] [21:01:22] &lt;d4de&gt;   link?
| [Monday 07 February 2011] [21:02:05] &lt;d4de&gt;   meh nvm ... I think google can answer that one :-)
| [Monday 07 February 2011] [21:02:08] &lt;Steve-o&gt;        <a class="reference external" href="https://github.com/zeromq/zeromq2/issues">https://github.com/zeromq/zeromq2/issues</a>
| [Monday 07 February 2011] [21:02:18] &lt;d4de&gt;   ooh well ... thanks :-D
| [Monday 07 February 2011] [21:03:01] &lt;Steve-o&gt;        there are a couple of weird platform dependent / compiler optimisation issues with the PGM socket
| [Monday 07 February 2011] [21:03:26] &lt;Steve-o&gt;        and there has been issues with zmq_term
| [Monday 07 February 2011] [21:03:36] &lt;d4de&gt;   so it is just PGM that is putting it back ... I saw that you guys has already fixed some annoying bugs in 2.1 beta, so I keep wondering what is left
| [Monday 07 February 2011] [21:03:41] &lt;Steve-o&gt;        you can always ask Martin again on the list
| [Monday 07 February 2011] [21:04:29] &lt;d4de&gt;   hmm still no IPv6 support huh?
| [Monday 07 February 2011] [21:04:58] &lt;Steve-o&gt;        well yes and no
| [Monday 07 February 2011] [21:05:44] &lt;Steve-o&gt;        there probably needs to be extra flags or specification for using IPv4 or IPv6, or both
| [Monday 07 February 2011] [21:05:58] &lt;Steve-o&gt;        similar to BSD&#8217;s IPV6ONLY
| [Monday 07 February 2011] [21:06:12] &lt;d4de&gt;   aha
| [Monday 07 February 2011] [21:06:17] &lt;Steve-o&gt;        binding to eth0:* tends to be complicated in a multi-stack environment
| [Monday 07 February 2011] [21:07:39] &lt;Steve-o&gt;        surprisingly PGM has better support for IPv6 but it depends on reasonable OS support
| [Monday 07 February 2011] [21:08:11] &lt;Steve-o&gt;        there are some issues with the glibc in Ubuntu 10.10 there are definitely unexpected
| [Monday 07 February 2011] [21:08:24] &lt;Steve-o&gt;        for example ::1 resolves as 127.0.0.1
| [Monday 07 February 2011] [21:08:59] &lt;Steve-o&gt;        getaddrinfo (<cite>hostname</cite>) returns different address to ping <cite>hostname</cite> when using DHCP
| [Monday 07 February 2011] [21:09:38] &lt;Steve-o&gt;        one easy path is to assume IPv4 only and follow SMTP&#8217;s requirement to use a IPv6: prefix
| [Monday 07 February 2011] [21:11:12] &lt;Steve-o&gt;        I have to concede I only follow the PGM parts of ZeroMQ, not so much the other parts
| [Monday 07 February 2011] [21:12:54] &lt;Steve-o&gt;        There is certainly work on improving ZMQ_SWAP and XPUB/XSUB sockets
| [Tuesday 08 February 2011] [01:18:15] &lt;stockMQ&gt;       Hi.. I have a binary char* which i want to send from one Thread to Another.. i am trying inproc.. sending the char* as it is as a message does not work as at the receiving end while decoding i get erroneous data..I understand i have to use protobuf..but then can i serialize to string
| [Tuesday 08 February 2011] [01:42:58] &lt;sustrik&gt;       you have to copy the data to the message
| [Tuesday 08 February 2011] [02:38:39] &lt;stockMQ&gt;       I want to send a Byte* over a socket.. What would be the right way to do it
| [Tuesday 08 February 2011] [02:53:35] &lt;Guthur&gt;        stockMQ, do you mean send the pointer?
| [Tuesday 08 February 2011] [03:54:02] &lt;Guthur&gt;        I am sorry, I&#8217;ve busted the clrzmq2 build again, this MSVS solution stuff is utter crap
| [Tuesday 08 February 2011] [04:05:21] &lt;mikko&gt; good morning
| [Tuesday 08 February 2011] [04:52:39] &lt;sustrik&gt;       morning
| [Tuesday 08 February 2011] [08:11:41] &lt;Skaag&gt; BAHAHAHAHA.... IT&#8217;S ALIVE!!!
| [Tuesday 08 February 2011] [08:11:50] &lt;Skaag&gt; The horror!
| [Tuesday 08 February 2011] [08:14:06] &lt;sustrik&gt;       run!
| [Tuesday 08 February 2011] [08:14:36] &lt;sustrik&gt;       :)
| [Tuesday 08 February 2011] [08:14:41]          * taotetek flees
| [Tuesday 08 February 2011] [08:19:43] &lt;ianbarber&gt;     another epgm question: if I, in one thread, do a PUB send, then a SUB recv, using PGM, that should work right?
| [Tuesday 08 February 2011] [08:21:32] &lt;sustrik&gt;       ianbarber: that&#8217;s using loopback multicast
| [Tuesday 08 February 2011] [08:21:40] &lt;Guthur&gt;        is the lack of IPC on windows more a lack of motivation issue as oppose to technical?
| [Tuesday 08 February 2011] [08:21:58] &lt;sustrik&gt;       in reality, multicast doesn&#8217;t work in loopback manner
| [Tuesday 08 February 2011] [08:22:13] &lt;sustrik&gt;       so there&#8217;s an emulation layer in the OS that simulates it
| [Tuesday 08 February 2011] [08:22:20] &lt;ianbarber&gt;     oh right
| [Tuesday 08 February 2011] [08:22:26] &lt;sustrik&gt;       however, as i am said, it&#8217;s pretty crappy
| [Tuesday 08 February 2011] [08:22:38] &lt;sustrik&gt;       so rather use ipc/tcp for loopback
| [Tuesday 08 February 2011] [08:22:51] &lt;sustrik&gt;       Guthur: both in a way
| [Tuesday 08 February 2011] [08:22:56] &lt;ianbarber&gt;     that makes sense, i mean it&#8217;s not something that is a good idea other than for testing stuff
| [Tuesday 08 February 2011] [08:23:20] &lt;sustrik&gt;       ack
| [Tuesday 08 February 2011] [08:23:41] &lt;sustrik&gt;       Guthur: to implement IPC on windows you need NamedPipes
| [Tuesday 08 February 2011] [08:23:53] &lt;sustrik&gt;       these are identified by handles rather than fds
| [Tuesday 08 February 2011] [08:24:02] &lt;sustrik&gt;       so you can&#8217;t use select() for polling
| [Tuesday 08 February 2011] [08:24:13] &lt;sustrik&gt;       thus you have to implement IOCP polling mechanism
| [Tuesday 08 February 2011] [08:24:45] &lt;Guthur&gt;        oh, I should have none it was a simple issue, hehe
| [Tuesday 08 February 2011] [08:25:03] &lt;sustrik&gt;       well, it&#8217;s doable
| [Tuesday 08 February 2011] [08:25:05] &lt;Skaag&gt; what happens when one client out of 20, is down for an hour?
| [Tuesday 08 February 2011] [08:25:13] &lt;Skaag&gt; it loses all data, right?
| [Tuesday 08 February 2011] [08:25:35] &lt;sustrik&gt;       Skaag: if no identity is set, then yes
| [Tuesday 08 February 2011] [08:25:48] &lt;Skaag&gt; and if identity is set?
| [Tuesday 08 February 2011] [08:26:09] &lt;sustrik&gt;       then only the data that were &#8220;on the wire&#8221; during the failure are lost
| [Tuesday 08 February 2011] [08:26:19] &lt;sustrik&gt;       the subsequent messages are queued in the publisher
| [Tuesday 08 February 2011] [08:26:27] &lt;Skaag&gt; and are saved in memory?
| [Tuesday 08 February 2011] [08:26:32] &lt;sustrik&gt;       yes
| [Tuesday 08 February 2011] [08:26:43] &lt;Skaag&gt; and if the publisher died too, they are lost?
| [Tuesday 08 February 2011] [08:26:50] &lt;sustrik&gt;       sure thing
| [Tuesday 08 February 2011] [08:26:55] &lt;Skaag&gt; ok :)
| [Tuesday 08 February 2011] [08:27:24] &lt;Skaag&gt; i&#8217;m trying to figure out how to keep 20+ machines in sync with the same data
| [Tuesday 08 February 2011] [08:27:36] &lt;Skaag&gt; they all get small incremental updates via zmq
| [Tuesday 08 February 2011] [08:27:42] &lt;Skaag&gt; but it accumulates to quite a lot
| [Tuesday 08 February 2011] [08:28:05] &lt;sustrik&gt;       ask for a snapshot after starting the client using req/rep
| [Tuesday 08 February 2011] [08:28:16] &lt;sustrik&gt;       then subscribe to incremental upgrades using pub/sub
| [Tuesday 08 February 2011] [08:31:51] &lt;Skaag&gt; sounds simple enough
| [Tuesday 08 February 2011] [08:32:02] &lt;Skaag&gt; the remaining problem is knowing who to ask the snapshot from
| [Tuesday 08 February 2011] [08:32:08] &lt;Skaag&gt; who is the leader with the best snapshot
| [Tuesday 08 February 2011] [08:32:29] &lt;Skaag&gt; probably the one with the longest uptime
| [Tuesday 08 February 2011] [08:32:31] &lt;mikko&gt; are you using zookeeper in the setup?
| [Tuesday 08 February 2011] [08:32:37] &lt;Skaag&gt; not anymore
| [Tuesday 08 February 2011] [08:32:48] &lt;Skaag&gt; I can&#8217;t use zookeeper because it requires a fixed number of nodes
| [Tuesday 08 February 2011] [08:33:00] &lt;mikko&gt; why is that?
| [Tuesday 08 February 2011] [08:33:00] &lt;Skaag&gt; when when nodes are added, a configuration file needs to be edited, and the whole thing restarted
| [Tuesday 08 February 2011] [08:33:14] &lt;mikko&gt; you mean to zookeeper itself?
| [Tuesday 08 February 2011] [08:33:17] &lt;Skaag&gt; I followed a thread on their list, and found a person started working on fixing this
| [Tuesday 08 February 2011] [08:33:31] &lt;Skaag&gt; yes to zookeeper itself
| [Tuesday 08 February 2011] [08:33:50] &lt;Skaag&gt; anyway his work has stalled
| [Tuesday 08 February 2011] [08:34:12] &lt;Skaag&gt; and he offered someone else to continue working on it, and the ETA is 3 ~ 5 month to implement
| [Tuesday 08 February 2011] [08:34:23] &lt;Skaag&gt; why, no idea..
| [Tuesday 08 February 2011] [08:35:04] &lt;Guthur&gt;        sustrik: why not just use sockets for IPC
| [Tuesday 08 February 2011] [08:36:16] &lt;Guthur&gt;        sockets can be polled with select, or am I missing something big here
| [Tuesday 08 February 2011] [08:36:26] &lt;sustrik&gt;       Guthur: nope
| [Tuesday 08 February 2011] [08:36:33] &lt;sustrik&gt;       you can use sockets
| [Tuesday 08 February 2011] [08:36:46] &lt;sustrik&gt;       just use <a class="reference external" href="tcp://127.0.0.1:port">tcp://127.0.0.1:port</a>
| [Tuesday 08 February 2011] [08:38:10] &lt;sustrik&gt;       Skaag: choosing a leader in a distributed env is a complex problem...
| [Tuesday 08 February 2011] [08:38:16] &lt;Guthur&gt;        are pipes more performant?
| [Tuesday 08 February 2011] [08:38:32] &lt;sustrik&gt;       you should peek into some disttibuted algorithm textbook
| [Tuesday 08 February 2011] [08:38:38] &lt;zchrish&gt;       mikko: You referred me to valokuva.org for a mingw dll for  Windows build. Is there a library option also available?
| [Tuesday 08 February 2011] [08:38:43] &lt;sustrik&gt;       Guthur: never measured it
| [Tuesday 08 February 2011] [08:38:57] &lt;sustrik&gt;       but it would make sense if they were
| [Tuesday 08 February 2011] [08:39:44] &lt;sustrik&gt;       Skaag: especially beware of split-brain syndrome
| [Tuesday 08 February 2011] [08:40:03] &lt;Skaag&gt; right, I heard about that
| [Tuesday 08 February 2011] [08:40:14] &lt;Skaag&gt; a problem that exists in the glusterfs project
| [Tuesday 08 February 2011] [08:40:17] &lt;Skaag&gt; (which I also use)
| [Tuesday 08 February 2011] [08:40:31] &lt;sustrik&gt;       it&#8217;s when the network is broken into two parts
| [Tuesday 08 February 2011] [08:40:39] &lt;sustrik&gt;       each part selects its own leader
| [Tuesday 08 February 2011] [08:40:48] &lt;sustrik&gt;       resulting in inconsistent state
| [Tuesday 08 February 2011] [08:41:10] &lt;Skaag&gt; can run a competition with set rules, and the winner gets its data replicated to everybody
| [Tuesday 08 February 2011] [08:41:52] &lt;sustrik&gt;       to prevent the split-brain the competition could be won only by a node that gets more than 50% of the vote
| [Tuesday 08 February 2011] [08:42:08] &lt;sustrik&gt;       to compute 50% you need to know the size of the cluster
| [Tuesday 08 February 2011] [08:42:11] &lt;sustrik&gt;       it&#8217;s complex...
| [Tuesday 08 February 2011] [08:45:40] &lt;mikko&gt; zchrish: what do you mean?
| [Tuesday 08 February 2011] [08:45:45] &lt;mikko&gt; zchrish: static library?
| [Tuesday 08 February 2011] [08:46:01] &lt;zchrish&gt;       Yes, a static library.
| [Tuesday 08 February 2011] [08:46:12] &lt;mikko&gt; zchrish: no, we don&#8217;t support building static libraries under mingw32
| [Tuesday 08 February 2011] [08:46:33] &lt;zchrish&gt;       Oh, I see. Why not?
| [Tuesday 08 February 2011] [08:46:52] &lt;mikko&gt; zchrish: it&#8217;s a massive hassle with the dllexport/dllimport stuff
| [Tuesday 08 February 2011] [08:46:59] &lt;mikko&gt; on windows
| [Tuesday 08 February 2011] [08:47:19] &lt;zchrish&gt;       Sure, ok. Thank you.
| [Tuesday 08 February 2011] [08:47:31] &lt;mikko&gt; you can probably build libs by hacking the build scripts
| [Tuesday 08 February 2011] [08:47:56] &lt;mikko&gt; but to keep things somewhat sane for mingw32/visual studio we only support dlls
| [Tuesday 08 February 2011] [08:48:10] &lt;CIA-21&gt;        zeromq2: 03Martin Sustrik 07master * r5dcbc34 10/ src/zmq.cpp :
| [Tuesday 08 February 2011] [08:48:11] &lt;CIA-21&gt;        zeromq2: zmq_poll with no fds behaves decently
| [Tuesday 08 February 2011] [08:48:11] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/g191uU">http://bit.ly/g191uU</a>
| [Tuesday 08 February 2011] [08:48:46] &lt;zchrish&gt;       But I see a .lib in the msvc2008 output.
| [Tuesday 08 February 2011] [08:49:00] &lt;mikko&gt; thats the import library
| [Tuesday 08 February 2011] [08:49:07] &lt;zchrish&gt;       Oh, ok.
| [Tuesday 08 February 2011] [09:00:28] &lt;zchrish&gt;       mikko: Is WIN7 required to use the DLL?
| [Tuesday 08 February 2011] [09:02:54] &lt;ianbarber&gt;     sustrik/mikko: any thoughts on best way to debug if I see PGM packets from wireshark on my reciever host, but am not getting anything from 0MQ listening on that host
| [Tuesday 08 February 2011] [09:07:48] &lt;sustrik&gt;       check whether the multicast addresses and ports match on publisher and receiver
| [Tuesday 08 February 2011] [09:08:39] &lt;ianbarber&gt;     yep, definitely match
| [Tuesday 08 February 2011] [09:08:46] &lt;ianbarber&gt;     subscribe is &#8220;&#8221;
| [Tuesday 08 February 2011] [09:08:57] &lt;ianbarber&gt;     (as well)
| [Tuesday 08 February 2011] [09:09:13] &lt;sustrik&gt;       then you can place breakpoint to pgm_socket_t::recv()
| [Tuesday 08 February 2011] [09:09:28] &lt;sustrik&gt;       to see whether the data are getting from openPGM to 0MQ
| [Tuesday 08 February 2011] [09:16:20] &lt;signalseeker&gt;   Is a pdf version of the zmq guide available?
| [Tuesday 08 February 2011] [09:17:34] &lt;mikko&gt; zchrish: i wouldn&#8217;t think so
| [Tuesday 08 February 2011] [09:17:52] &lt;zchrish&gt;       OK.
| [Tuesday 08 February 2011] [09:18:05] &lt;mikko&gt; might need the visual studio 2008 redist libs
| [Tuesday 08 February 2011] [09:18:23] &lt;ianbarber&gt;     sustrik: it&#8217;s not breaking in there, so it looks like 0MQ isn&#8217;t seeing the packets
| [Tuesday 08 February 2011] [09:33:35] &lt;sustrik&gt;       ianbarber: ask steve-o then
| [Tuesday 08 February 2011] [09:33:41] &lt;ianbarber&gt;     steve-o: is there anything to check whether libpgm can see the packets on a host, for example? I&#8217;ve can see them in wireshark, but 0MQ doesn&#8217;t seem to be getting them.
| [Tuesday 08 February 2011] [09:33:58] &lt;ianbarber&gt;     was just about to, and did :)
| [Tuesday 08 February 2011] [09:34:30] &lt;Steve-o&gt;       mmm
| [Tuesday 08 February 2011] [09:34:56] &lt;Steve-o&gt;       You can try increasing the log level, i.e. PGM_MIN_LOG_LEVEL=TRACE
| [Tuesday 08 February 2011] [09:35:43] &lt;ianbarber&gt;     where would the logging go?
| [Tuesday 08 February 2011] [09:36:00] &lt;Steve-o&gt;       stdout
| [Tuesday 08 February 2011] [09:36:51] &lt;Steve-o&gt;       is it completely silent in zeromq or a little bit of data then silence?
| [Tuesday 08 February 2011] [09:36:56] &lt;ianbarber&gt;     ah
| [Tuesday 08 February 2011] [09:36:57] &lt;ianbarber&gt;     Trace: Discarded packet for muted receiver
| [Tuesday 08 February 2011] [09:37:07] &lt;ianbarber&gt;     awesome!
| [Tuesday 08 February 2011] [09:37:13] &lt;ianbarber&gt;     now, why would it do that
| [Tuesday 08 February 2011] [09:37:15] &lt;ianbarber&gt;     :)
| [Tuesday 08 February 2011] [09:39:28] &lt;Steve-o&gt;       a sender would see that on data packets
| [Tuesday 08 February 2011] [09:39:46] &lt;Steve-o&gt;       possible cause is multiple active senders
| [Tuesday 08 February 2011] [09:40:43] &lt;Steve-o&gt;       it&#8217;s not expected for a SUB socket
| [Tuesday 08 February 2011] [09:41:02] &lt;Steve-o&gt;       only PUBs
| [Tuesday 08 February 2011] [09:45:37] &lt;ianbarber&gt;     hmm, that was definitely on a sub
| [Tuesday 08 February 2011] [09:45:45] &lt;ianbarber&gt;     but maybe there&#8217;s something rogue running as well
| [Tuesday 08 February 2011] [09:47:34] &lt;Steve-o&gt;       it is only emitted if the socket is not permitted to receive data
| [Tuesday 08 February 2011] [09:48:05] &lt;Steve-o&gt;       so a SUB socket that cannot recv sounds a bit broken
| [Tuesday 08 February 2011] [09:48:37] &lt;ianbarber&gt;     hmm, that&#8217;s strange
| [Tuesday 08 February 2011] [09:48:41] &lt;ianbarber&gt;     nothing else running
| [Tuesday 08 February 2011] [09:48:47] &lt;ianbarber&gt;     definitely only triggers when I&#8217;m sending on the other host
| [Tuesday 08 February 2011] [09:48:54] &lt;ianbarber&gt;     if i don&#8217;t send, no output
| [Tuesday 08 February 2011] [09:49:38] &lt;Guthur&gt;        If i was wanting to learn what interface a windows IPC implementation should have where is the best places to look in the source code?
| [Tuesday 08 February 2011] [09:50:07] &lt;ianbarber&gt;     it does mention a send interface as well steve-o
| [Tuesday 08 February 2011] [09:50:09] &lt;ianbarber&gt;     Trace: Create transmit window.
| [Tuesday 08 February 2011] [09:50:09] &lt;ianbarber&gt;     Trace: Binding receive socket to INADDR_ANY
| [Tuesday 08 February 2011] [09:50:09] &lt;ianbarber&gt;     Trace: Binding send socket to interface index 2
| [Tuesday 08 February 2011] [09:50:10] &lt;ianbarber&gt;     Trace: Join multicast group 239.192.0.1 on interface index 2
| [Tuesday 08 February 2011] [09:50:10] &lt;ianbarber&gt;     Trace: Multicast send interface set to 192.168.192.132 index 2
| [Tuesday 08 February 2011] [09:50:11] &lt;ianbarber&gt;     is that normal?
| [Tuesday 08 February 2011] [09:50:28] &lt;Steve-o&gt;       ianbarber: PGM requires a back-channel from recv to sender for reliability
| [Tuesday 08 February 2011] [09:50:36] &lt;ianbarber&gt;     oh, of course
| [Tuesday 08 February 2011] [09:50:40] &lt;ianbarber&gt;     silly me
| [Tuesday 08 February 2011] [09:51:28] &lt;ianbarber&gt;     if you have a sec, could you look at <a class="reference external" href="https://gist.github.com/816533">https://gist.github.com/816533</a> and see if I&#8217;m doing something obviously dumb?
| [Tuesday 08 February 2011] [09:51:49] &lt;Steve-o&gt;       on Linux or Windows?
| [Tuesday 08 February 2011] [09:52:11] &lt;Steve-o&gt;       Linux flavour I&#8217;m guessing
| [Tuesday 08 February 2011] [09:52:55] &lt;ianbarber&gt;     linux
| [Tuesday 08 February 2011] [09:53:30] &lt;Steve-o&gt;       looks reasonable although you may hit this bug:  <a class="reference external" href="https://github.com/zeromq/zeromq2/issues#issue/139">https://github.com/zeromq/zeromq2/issues#issue/139</a>
| [Tuesday 08 February 2011] [09:53:50] &lt;sustrik&gt;       Guthur: you would have to start with implementing IOCP poller
| [Tuesday 08 February 2011] [09:54:11] &lt;sustrik&gt;       see select_t, poll_t, epoll_t, devpoll_t and kqueue_t
| [Tuesday 08 February 2011] [09:54:20] &lt;sustrik&gt;       you would have to make something similar
| [Tuesday 08 February 2011] [09:54:26] &lt;sustrik&gt;       presumably called iocp_t
| [Tuesday 08 February 2011] [09:54:34] &lt;Steve-o&gt;       ianbarber: sleeping before zmq_term can usually help diagnosis, basically keeping the socket open a bit longer.
| [Tuesday 08 February 2011] [09:54:54] &lt;Steve-o&gt;       ianbarber: or sending more data.
| [Tuesday 08 February 2011] [09:55:11] &lt;Guthur&gt;        sustrik: ok, thanks
| [Tuesday 08 February 2011] [09:55:27] &lt;ianbarber&gt;     steve-o: I&#8217;ve got the sender sending then sleeping for 1 second, in a loop, so it&#8217;s c onstant stream of data. At the moment, I just wait on recv in the test code
| [Tuesday 08 February 2011] [09:56:04] &lt;ianbarber&gt;     each send triggers about 4-5 of those muted receiver  notices
| [Tuesday 08 February 2011] [09:56:20] &lt;Guthur&gt;        from MS docs local named pipes would be considerably faster than sockets
| [Tuesday 08 February 2011] [09:56:33] &lt;Guthur&gt;        so maybe worth the look
| [Tuesday 08 February 2011] [09:56:39] &lt;Steve-o&gt;       ianbarber: send me some code, <a class="reference external" href="mailto:steven&#46;mccoy&#37;&#52;&#48;miru&#46;hk">steven<span>&#46;</span>mccoy<span>&#64;</span>miru<span>&#46;</span>hk</a>, I&#8217;m working on Windows this morning and I&#8217;ll have a look later
| [Tuesday 08 February 2011] [09:57:14] &lt;ianbarber&gt;     will do, thanks steve
| [Tuesday 08 February 2011] [09:57:21] &lt;sustrik&gt;       Gurthur: yes, definitely
| [Tuesday 08 February 2011] [10:17:08] &lt;neale1&gt;        sustrik: Have you seen this whitepaper: <a class="reference external" href="http://mnb.ociweb.com/mnb/MiddlewareNewsBrief-201004.html">http://mnb.ociweb.com/mnb/MiddlewareNewsBrief-201004.html</a>
| [Tuesday 08 February 2011] [10:18:41] &lt;drbobbeaty&gt;    Question: Let&#8217;s say I am using ZMQ/OpenPGM on the epgm: protocol... also let&#8217;s assume that I have several multicast channels sending data. On the client, is it better to have a single zmq::context_t with 1 thread working for a series of zmq::socket_t connections, each ZMQ_SUB-ed to different multicast channels? Or would it be better to have a 1:1 mapping between the zmq::context_t and it&#8217;s zmq::socket_t?
| [Tuesday 08 February 2011] [10:21:19] &lt;CIA-21&gt;        zeromq2: 03Martin Sustrik 07master * r889424e 10/ src/ctx.cpp :
| [Tuesday 08 February 2011] [10:21:19] &lt;CIA-21&gt;        zeromq2: max_sockets honoured precisely
| [Tuesday 08 February 2011] [10:21:19] &lt;CIA-21&gt;        zeromq2: The internal log socket was subtracted from the number of
| [Tuesday 08 February 2011] [10:21:19] &lt;CIA-21&gt;        zeromq2: available sockets. So, if max_sockets was set to 100,
| [Tuesday 08 February 2011] [10:21:19] &lt;CIA-21&gt;        zeromq2: you could create only 99 sockets. Fixed.
| [Tuesday 08 February 2011] [10:21:19] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Martin Sustrik &lt;sustrik&#64;250bpm.com&gt; - http://bit.ly/g08FfG
| [Tuesday 08 February 2011] [10:34:15] &lt;Guthur&gt;        what is the default max number of sockets per context?
| [Tuesday 08 February 2011] [10:34:34] &lt;Guthur&gt;        and what happens if you try to exceed that
| [Tuesday 08 February 2011] [10:35:20] &lt;Guthur&gt;        oh I&#8217;ve just answered my own question
| [Tuesday 08 February 2011] [10:38:12] &lt;drbobbeaty&gt;    I <em>believe</em> the context is a &#8220;one per process space&#8221; entity, so I <em>believe</em> you have one context for any number of sockets in the process, but I just wanted a verification from the designers.
| [Tuesday 08 February 2011] [11:02:38] &lt;sustrik&gt;       Guthur: 512
| [Tuesday 08 February 2011] [11:03:17] &lt;Guthur&gt;        sustrik: is it possible to set it higher?
| [Tuesday 08 February 2011] [11:03:28] &lt;sustrik&gt;       neale1: yep, it&#8217;s an old one
| [Tuesday 08 February 2011] [11:04:00] &lt;sustrik&gt;       i think there is some discussion with opendds guys on the mailing list or somewhere
| [Tuesday 08 February 2011] [11:04:06] &lt;sustrik&gt;       Guthur: sure
| [Tuesday 08 February 2011] [11:05:03] &lt;sustrik&gt;       drbobbeaty: confirmed
| [Tuesday 08 February 2011] [11:06:40] &lt;drbobbeaty&gt;    sustrik: thank you very much for the confirmation. Appreciated.
| [Tuesday 08 February 2011] [11:07:10] &lt;Guthur&gt;        sustrik: I did a search for max_sockets in the src and couldn&#8217;t find it
| [Tuesday 08 February 2011] [11:07:19] &lt;Guthur&gt;        is it a build variable
| [Tuesday 08 February 2011] [11:08:45] &lt;sustrik&gt;       src/confing.hpp
| [Tuesday 08 February 2011] [11:10:55] &lt;Guthur&gt;        all there is is max_app_threads = 512,
| [Tuesday 08 February 2011] [11:11:03] &lt;Guthur&gt;        is that equivalent?
| [Tuesday 08 February 2011] [11:12:48] &lt;mikko&gt; Guthur: <a class="reference external" href="https://github.com/zeromq/zeromq2/blob/master/src/config.hpp#L31">https://github.com/zeromq/zeromq2/blob/master/src/config.hpp#L31</a>
| [Tuesday 08 February 2011] [11:13:26] &lt;Guthur&gt;        umm thats called max_app_threads = 512, in my source
| [Tuesday 08 February 2011] [11:13:38] &lt;mikko&gt; 2.0.x ?
| [Tuesday 08 February 2011] [11:14:04] &lt;Guthur&gt;        ah, yeah
| [Tuesday 08 February 2011] [11:28:59] &lt;sustrik&gt;       the theading has changed between 2.0 and 2.1
| [Tuesday 08 February 2011] [11:29:28] &lt;sustrik&gt;       with 2.0 the limit is on <em>threads</em> using 0mq sockets
| [Tuesday 08 February 2011] [11:29:47] &lt;sustrik&gt;       in 2.1 the limit is on the number of the sockets themselves
| [Tuesday 08 February 2011] [11:30:19] &lt;Guthur&gt;        I think this may explain a mysterious app crash I was having
| [Tuesday 08 February 2011] [11:30:56] &lt;mikko&gt; Guthur: on windows?
| [Tuesday 08 February 2011] [11:31:56] &lt;Guthur&gt;        yep
| [Tuesday 08 February 2011] [11:32:31] &lt;Guthur&gt;        but it should have thrown an exception
| [Tuesday 08 February 2011] [11:32:39] &lt;Guthur&gt;        might have been another cause
| [Tuesday 08 February 2011] [11:34:51] &lt;mikko&gt; running out of filehandles?
| [Tuesday 08 February 2011] [11:35:07] &lt;mikko&gt; i think there was some shenanigans with filedescriptor count on windows
| [Tuesday 08 February 2011] [11:37:06] &lt;kristsk&gt;       like max 512 per process or so i&#8217;ve heard
| [Tuesday 08 February 2011] [11:37:28] &lt;mikko&gt; i think it was way less by default
| [Tuesday 08 February 2011] [11:37:32] &lt;mikko&gt; 64 even
| [Tuesday 08 February 2011] [11:38:30] &lt;kristsk&gt;       thats not much.
| [Tuesday 08 February 2011] [11:38:33] &lt;mikko&gt; <a class="reference external" href="https://github.com/zeromq/zeromq2/issues/issue/57">https://github.com/zeromq/zeromq2/issues/issue/57</a>
| [Tuesday 08 February 2011] [11:39:19] &lt;sustrik&gt;       64 is the default max descriptors you can poll on on win32
| [Tuesday 08 February 2011] [11:39:30] &lt;mikko&gt; ah ok
| [Tuesday 08 February 2011] [11:39:30] &lt;sustrik&gt;       i&#8217;ve overloaded the value to 1024 recently
| [Tuesday 08 February 2011] [11:53:57] &lt;Guthur&gt;        I&#8217;m not sure what my issue was, the app just silently shutdown, not very helpful at all
| [Tuesday 08 February 2011] [11:55:15] &lt;sustrik&gt;       not even an assertion?
| [Tuesday 08 February 2011] [11:55:46] &lt;Guthur&gt;        nothing, it may not have been ZMQ
| [Tuesday 08 February 2011] [11:55:53] &lt;Guthur&gt;        there was quickfix as well
| [Tuesday 08 February 2011] [11:56:29] &lt;sustrik&gt;       i see
| [Tuesday 08 February 2011] [11:59:44] &lt;Guthur&gt;        well, home time now
| [Tuesday 08 February 2011] [12:09:51] &lt;stockMQ&gt;       Hi.. I am receiving protobuf messages from my zmq socket which i then want to serialize to a file as binary.. this file in turn should be readable by other processes simultaneously..
| [Tuesday 08 February 2011] [12:09:57] &lt;stockMQ&gt;       Any pointers?
| [Tuesday 08 February 2011] [12:10:46] &lt;mikko&gt; one file per message or all messages in one file?
| [Tuesday 08 February 2011] [12:11:24] &lt;stockMQ&gt;       all messages in one file.. the messages are sequentially timestamped
| [Tuesday 08 February 2011] [12:12:22] &lt;stockMQ&gt;       basically the writer will just dump all incoming messages to the file
| [Tuesday 08 February 2011] [12:12:41] &lt;stockMQ&gt;       but the reader processes should be able to read and de serialize them
| [Tuesday 08 February 2011] [12:13:11] &lt;mikko&gt; how does the reader know that message is not impartial?
| [Tuesday 08 February 2011] [12:14:37] &lt;stockMQ&gt;       by impartial what do you mean?can you elaborate please
| [Tuesday 08 February 2011] [12:15:19] &lt;mikko&gt; if the writer is writing a message how do the readers know that the message has been fully written?
| [Tuesday 08 February 2011] [12:15:25] &lt;mikko&gt; are you planning to use locking?
| [Tuesday 08 February 2011] [12:15:39] &lt;stockMQ&gt;       No..basically what i was doing till now is
| [Tuesday 08 February 2011] [12:15:46] &lt;mikko&gt; and if yes how are you going to sync readers/writers?
| [Tuesday 08 February 2011] [12:15:46] &lt;stockMQ&gt;       intradayFile.Open(dataPath,CFile::modeWrite | CFile::modeNoTruncate | CFile::modeCreate | CFile::shareDenyWrite | CFile::osWriteThrough)
| [Tuesday 08 February 2011] [12:16:00] &lt;mikko&gt; because you could easily &#8220;DoS&#8221; yourself by having high rate of messages coming in
| [Tuesday 08 February 2011] [12:16:08] &lt;mikko&gt; in which case the lock wouldnt be released
| [Tuesday 08 February 2011] [12:16:40] &lt;sustrik&gt;       i would just use a DB
| [Tuesday 08 February 2011] [12:16:54] &lt;stockMQ&gt;       This basically is supposed to allow Shared read.. if the reader process opens the file with appropriate permission
| [Tuesday 08 February 2011] [12:17:14] &lt;stockMQ&gt;       The synchronization is supposed to be handled by the OS
| [Tuesday 08 February 2011] [12:17:44] &lt;stockMQ&gt;       I am working on VC++
| [Tuesday 08 February 2011] [12:18:02] &lt;sustrik&gt;       the OS won&#8217;t handle the sync for you
| [Tuesday 08 February 2011] [12:18:09] &lt;sustrik&gt;       you have to implement it yourself
| [Tuesday 08 February 2011] [12:18:19] &lt;sustrik&gt;       that&#8217;s why it&#8217;s better to use a DB
| [Tuesday 08 February 2011] [12:18:36] &lt;stockMQ&gt;       ok
| [Tuesday 08 February 2011] [12:19:23] &lt;mikko&gt; i think posix will guarantee that write within a process is atomic
| [Tuesday 08 February 2011] [12:19:25] &lt;mikko&gt; but thats about it
| [Tuesday 08 February 2011] [12:19:42] &lt;stockMQ&gt;       ok
| [Tuesday 08 February 2011] [12:19:48] &lt;mikko&gt; between processes
| [Tuesday 08 February 2011] [12:19:58] &lt;mikko&gt; but that doesn&#8217;t really help you with readers at all
| [Tuesday 08 February 2011] [12:20:15] &lt;mikko&gt; and not sure how posix windows is
| [Tuesday 08 February 2011] [12:20:36] &lt;mikko&gt; this is what posix says:
| [Tuesday 08 February 2011] [12:20:39] &lt;mikko&gt; &#8220;Atomic/non-atomic: A write is atomic if the whole amount written in one operation is not interleaved with data from any other process. This is useful when there are multiple writers sending data to a single reader. Applications need to know how large a write request can be expected to be performed atomically. &#8221;
| [Tuesday 08 February 2011] [12:21:19] &lt;stockMQ&gt;       My understanding was that CFile::ShareDenyWrite is a flag that tells the operating system not to permit any other process to write to your file while you have it open.
| [Tuesday 08 February 2011] [12:21:54] &lt;mikko&gt; stockMQ: it will probably but what about if you have a constant stream of messages coming in?
| [Tuesday 08 February 2011] [12:22:12] &lt;stockMQ&gt;       and shareRead would allow it to be read simultaneously
| [Tuesday 08 February 2011] [12:22:30] &lt;stockMQ&gt;       yes u r right.. i had that in mind.. but wanted to check that heuristically
| [Tuesday 08 February 2011] [12:22:42] &lt;mikko&gt; writer will block the readers
| [Tuesday 08 February 2011] [12:23:03] &lt;mikko&gt; usually
| [Tuesday 08 February 2011] [12:23:19] &lt;mikko&gt; if you have readers reading while the writer is writing you might end up with partial / incomplete data
| [Tuesday 08 February 2011] [12:23:39] &lt;mikko&gt; then you need to track if the message is fully written or not
| [Tuesday 08 February 2011] [12:24:16] &lt;neale1&gt;        mikko: did you want to try enabling the clrzmq build for s390x to see how it goes?
| [Tuesday 08 February 2011] [12:24:39] &lt;mikko&gt; neale1: i can at some point, still at work for about an hour
| [Tuesday 08 February 2011] [12:24:59] &lt;neale1&gt;        no worries
| [Tuesday 08 February 2011] [12:25:06] &lt;stockMQ&gt;       yes u r right.. Hence i planned to first write it to a file..see how the readers behave and then switch to a DB.. to learn along the process as well
| [Tuesday 08 February 2011] [12:26:45] &lt;stockMQ&gt;       I have received suggestions here like Kyoto cabinet,BDB etc.. More inputs/suggestions are welcome..Also it would be helpful if there is anyone who has written protobufs to a file can share his/her experience
| [Tuesday 08 February 2011] [12:29:04] &lt;mikko&gt; do you need to keep this data?
| [Tuesday 08 February 2011] [12:29:12] &lt;stockMQ&gt;       yes
| [Tuesday 08 February 2011] [12:29:24] &lt;stockMQ&gt;       basically these are stock trade data..
| [Tuesday 08 February 2011] [12:29:32] &lt;stockMQ&gt;       they need to be kept for back analysis
| [Tuesday 08 February 2011] [12:29:52] &lt;mikko&gt; and this is on windows?
| [Tuesday 08 February 2011] [12:30:04] &lt;stockMQ&gt;       and there could be more than one analysis tool accessing the data and hence the parallel readers
| [Tuesday 08 February 2011] [12:30:05] &lt;stockMQ&gt;       correct
| [Tuesday 08 February 2011] [12:31:01] &lt;mikko&gt; do you want to keep the raw data or the results of the analysis?
| [Tuesday 08 February 2011] [12:31:08] &lt;stockMQ&gt;       The raw data
| [Tuesday 08 February 2011] [12:31:30] &lt;stockMQ&gt;       the analysis tools they basically read the data..do their stuff and display
| [Tuesday 08 February 2011] [12:31:32] &lt;mikko&gt; so you want to be able to get historic data for time periods etc?
| [Tuesday 08 February 2011] [12:31:38] &lt;stockMQ&gt;       yess
| [Tuesday 08 February 2011] [12:31:44] &lt;mikko&gt; do you want to be able to query the data?
| [Tuesday 08 February 2011] [12:31:57] &lt;stockMQ&gt;       till now i was copying the protobufs to struct and then writing the structs
| [Tuesday 08 February 2011] [12:32:09] &lt;stockMQ&gt;       now i want to bypass the structs and directly write the protobufs
| [Tuesday 08 February 2011] [12:33:12] &lt;mikko&gt; the data you are receiveing, what kind of data is it?
| [Tuesday 08 February 2011] [12:33:13] &lt;stockMQ&gt;       yes.. query for the time window..nothing complex
| [Tuesday 08 February 2011] [12:33:15] &lt;stockMQ&gt;       as for nw
| [Tuesday 08 February 2011] [12:33:17] &lt;mikko&gt; numbers, text?
| [Tuesday 08 February 2011] [12:33:52] &lt;stockMQ&gt;       both..mostly numbers.. text are just names of the Stock scrip
| [Tuesday 08 February 2011] [12:34:09] &lt;mikko&gt; what sort of consistency requirements do you have for the data?
| [Tuesday 08 February 2011] [12:35:21] &lt;mikko&gt; or maybe more accurate question would be resilience requirements
| [Tuesday 08 February 2011] [12:36:14] &lt;mikko&gt; for example is it ok to fsync to disk every 10 seconds and if your system crashes you lose 10 seconds of data currently in buffers?
| [Tuesday 08 February 2011] [12:36:40] &lt;stockMQ&gt;       well.. if it is better not to lose any data :)
| [Tuesday 08 February 2011] [12:36:59] &lt;stockMQ&gt;       the analysis are going to be sensitive to loss of data
| [Tuesday 08 February 2011] [12:39:19] &lt;mikko&gt; it&#8217;s not an easy engineering task in that case
| [Tuesday 08 February 2011] [12:41:09] &lt;mikko&gt; does the data need to be consistent on all consumers all the time?
| [Tuesday 08 February 2011] [12:41:49] &lt;stockMQ&gt;       I understand.. In fact to convince the management to go for DB.. i need to first implement a prototype writing it to a file and show them how the readers fair.
| [Tuesday 08 February 2011] [12:41:51] &lt;kristsk&gt;       CAP is a bitch.
| [Tuesday 08 February 2011] [12:42:05] &lt;mikko&gt; yes, i was thinking this in terms of cap theorem
| [Tuesday 08 February 2011] [12:42:23] &lt;stockMQ&gt;       yes. basically more than one instance of a tool would be accessing it
| [Tuesday 08 February 2011] [12:42:25] &lt;stockMQ&gt;       so yes
| [Tuesday 08 February 2011] [12:42:32] &lt;stockMQ&gt;       CAP? please enlighten
| [Tuesday 08 February 2011] [12:43:03] &lt;mikko&gt; http://en.wikipedia.org/wiki/CAP_theorem
| [Tuesday 08 February 2011] [12:43:41] &lt;kristsk&gt;       consistency, availability, partitioning - choose any two.
| [Tuesday 08 February 2011] [12:44:35] &lt;stockMQ&gt;       C and A
| [Tuesday 08 February 2011] [12:44:38] &lt;ianbarber&gt;     stockMQ: you might have more success in writing straight out to a file, less disk seeks
| [Tuesday 08 February 2011] [12:44:56] &lt;ianbarber&gt;     the kafka guys talk about that a bit on their site
| [Tuesday 08 February 2011] [12:45:31] &lt;mikko&gt; ianbarber: the problematic thing is that the processes reading the files are external
| [Tuesday 08 February 2011] [12:45:34] &lt;mikko&gt; unlikely with kafka
| [Tuesday 08 February 2011] [12:45:47] &lt;kristsk&gt;       kafka ?
| [Tuesday 08 February 2011] [12:45:57] &lt;mikko&gt; http://sna-projects.com/kafka/
| [Tuesday 08 February 2011] [12:46:02] &lt;ianbarber&gt;     mikko: oh, i see. I was thinking write file for backanalysis, 0MQ for distribution
| [Tuesday 08 February 2011] [12:46:03] &lt;kristsk&gt;       oh.
| [Tuesday 08 February 2011] [12:46:23] &lt;mikko&gt; ianbarber: the process writing file is a subscriber as far as i understood
| [Tuesday 08 February 2011] [12:46:32] &lt;mikko&gt; and the analysis tools read the file and create reports and such
| [Tuesday 08 February 2011] [12:47:00] &lt;mikko&gt; so what you are effectively creating is a database
| [Tuesday 08 February 2011] [12:47:02] &lt;stockMQ&gt;       that is right Mikko
| [Tuesday 08 February 2011] [12:47:27] &lt;ianbarber&gt;     yeah, sounds like a database and replication
| [Tuesday 08 February 2011] [12:48:08] &lt;mikko&gt; so, without knowing the application / architecture very deeply somehow i would be inclined to say that it makes sense to investigate existing database technologies before going through all the hurdles
| [Tuesday 08 February 2011] [12:49:30] &lt;mikko&gt; maybe you have volatile database for quick access to data and push to another queue which warehouses the data
| [Tuesday 08 February 2011] [12:49:50] &lt;mikko&gt; very hard to say without knowing much about the application or the overall architecture
| [Tuesday 08 February 2011] [12:50:55] &lt;stockMQ&gt;       In a nutshell.. The exchange multicasts feed which contains the Intra day data.. I have intercepted this feed and then implemented a PUB
| [Tuesday 08 February 2011] [12:51:58] &lt;kristsk&gt;       uh, kafka is java-ish...
| [Tuesday 08 February 2011] [12:52:00] &lt;stockMQ&gt;       The SUBs need to dump this data somewhere.. which should be accessible to the Analysis tools during market hours for intra day analysis and after market hours for back analysis
| [Tuesday 08 February 2011] [12:52:47] &lt;stockMQ&gt;       After market hours, the write will not be happening..so it will be only reads.
| [Tuesday 08 February 2011] [12:52:56] &lt;stockMQ&gt;       The hurdle is during market hours
| [Tuesday 08 February 2011] [12:53:09] &lt;kristsk&gt;       umm, isnt pub/sub kinda &#8220;you weren&#8217;t here, you missed, sorry&#8221; ?
| [Tuesday 08 February 2011] [12:53:38] &lt;stockMQ&gt;       yes that is right
| [Tuesday 08 February 2011] [12:53:52] &lt;stockMQ&gt;       hence the PUB also need to keep a copy of the data
| [Tuesday 08 February 2011] [12:53:54] &lt;mikko&gt; pub/sub is like a radio broadcast (a metaphore sustrik tends to use)
| [Tuesday 08 February 2011] [12:54:05] &lt;mikko&gt; when your receiver is on you will receive the broadcast
| [Tuesday 08 February 2011] [12:54:12] &lt;stockMQ&gt;       If any SUB failed to connect on time..it should be able to borrow the missed data from PUB
| [Tuesday 08 February 2011] [12:54:50] &lt;mikko&gt; you can use identities for the subscribers
| [Tuesday 08 February 2011] [12:55:34] &lt;kristsk&gt;       how many subscribers? maye you could make a queue per &#8220;subscriber&#8221;?
| [Tuesday 08 February 2011] [12:56:24] &lt;stockMQ&gt;       Well hard to say..to start with internally it will be around 10.. but it can scale quickly
| [Tuesday 08 February 2011] [12:57:45] &lt;kristsk&gt;       umyeah, ten-folding data probably is not a good idea.
| [Tuesday 08 February 2011] [12:57:46] &lt;mikko&gt; so effetively you want separate req/rep socket on the publisher where subscribers can ask for a delta
| [Tuesday 08 February 2011] [12:58:25] &lt;mikko&gt; is subscriber is offline for let&#8217;s say 10 minutes it could ask the publisher through REQ for the last ten minutes
| [Tuesday 08 February 2011] [12:58:39] &lt;mikko&gt; to get the missing pieces
| [Tuesday 08 February 2011] [12:59:02] &lt;stockMQ&gt;       yes .. that is going to be phase 2.. for now the market hours are known to all.. so the SUBs take up the responsiblity of listening before the market opens
| [Tuesday 08 February 2011] [12:59:34] &lt;stockMQ&gt;       yes somewhat like that
| [Tuesday 08 February 2011] [12:59:39] &lt;mikko&gt; anyway, gotta commute home -&gt;
| [Tuesday 08 February 2011] [13:00:01] &lt;stockMQ&gt;       ohkk..can i catchu later?
| [Tuesday 08 February 2011] [13:04:10] &lt;sustrik&gt;       stockMQ: you should also be concerned about HD performance
| [Tuesday 08 February 2011] [13:04:28] &lt;sustrik&gt;       if the feed is fast, as it tends to be with market data
| [Tuesday 08 February 2011] [13:04:42] &lt;sustrik&gt;       you may not be able to write the data to the HD fast enough
| [Tuesday 08 February 2011] [13:05:16] &lt;stockMQ&gt;       ok
| [Tuesday 08 February 2011] [13:06:20] &lt;stockMQ&gt;       So what would be the right approach in your opinion
| [Tuesday 08 February 2011] [13:07:22] &lt;sustrik&gt;       depends on details
| [Tuesday 08 February 2011] [13:07:35] &lt;sustrik&gt;       like, are you NASDAQ?
| [Tuesday 08 February 2011] [13:07:50] &lt;sustrik&gt;       if so, a single HD won&#8217;t be enough
| [Tuesday 08 February 2011] [13:08:15] &lt;sustrik&gt;       if you are just a small trading firm getting modest amount of market data
| [Tuesday 08 February 2011] [13:08:19] &lt;sustrik&gt;       it may suffice though
| [Tuesday 08 February 2011] [13:08:34] &lt;kristsk&gt;       SSD then heh
| [Tuesday 08 February 2011] [13:08:53] &lt;sustrik&gt;       SSD is better in terms of latencies
| [Tuesday 08 February 2011] [13:09:12] &lt;sustrik&gt;       the throughput is similar to standard HD
| [Tuesday 08 February 2011] [13:09:25] &lt;sustrik&gt;       what you need is either software load balancer
| [Tuesday 08 February 2011] [13:09:30] &lt;sustrik&gt;       or a RAID
| [Tuesday 08 February 2011] [13:09:34] &lt;sustrik&gt;       SAN maybe...
| [Tuesday 08 February 2011] [13:09:44] &lt;stockMQ&gt;       ok
| [Tuesday 08 February 2011] [13:10:00] &lt;sustrik&gt;       in any case i would not try to implement a database myself
| [Tuesday 08 February 2011] [13:10:05] &lt;kristsk&gt;       netwrokish san would actually ensure no data gets lost
| [Tuesday 08 February 2011] [13:10:17] &lt;sustrik&gt;       it takes tens of manyears to do it properly
| [Tuesday 08 February 2011] [13:12:39] &lt;stockMQ&gt;       Actually the Interceptor aggregates the data and then Publishes it.. so the data received by the SUB will be lesser and slower than the actual feed received by the interceptor
| [Tuesday 08 February 2011] [13:13:09] &lt;stockMQ&gt;       Any suggestions for DBs.. open source
| [Tuesday 08 February 2011] [13:14:27] &lt;kristsk&gt;       pg ?
| [Tuesday 08 February 2011] [13:14:32] &lt;sustrik&gt;       given you need very little functionality, i would check those new nosql projects
| [Tuesday 08 February 2011] [13:14:33] &lt;kristsk&gt;       postgre
| [Tuesday 08 February 2011] [13:14:44]          * sustrik is not an expert though
| [Tuesday 08 February 2011] [13:15:01] &lt;stockMQ&gt;       like Kyoto cabinet?
| [Tuesday 08 February 2011] [13:15:32] &lt;stockMQ&gt;       or
| [Tuesday 08 February 2011] [13:15:33] &lt;stockMQ&gt;       http://en.wikipedia.org/wiki/Berkeley_DB
| [Tuesday 08 February 2011] [13:15:39] &lt;stockMQ&gt;       any users here already?
| [Tuesday 08 February 2011] [13:20:52] &lt;stockMQ&gt;       I think Mikko had used Kyoto
| [Tuesday 08 February 2011] [13:28:17] &lt;stockMQ&gt;       so to summarize.. DB seems to be the only sane solution.. Is that right
| [Tuesday 08 February 2011] [14:03:21] &lt;stockMQ&gt;       What would be the behaviour of the sockets if it is kept idle say overnight..
| [Tuesday 08 February 2011] [14:06:23] &lt;Guthur&gt;        One would hope it is still there in the morning
| [Tuesday 08 February 2011] [15:06:41] &lt;cremes&gt;        Guthur: max_sockets in src/config.hpp
| [Tuesday 08 February 2011] [15:06:55] &lt;cremes&gt;        it defaults to 512; i usually override it to 10k for my own use
| [Tuesday 08 February 2011] [15:33:58] &lt;Guthur&gt;        cremes, cheers, I was looking in the wrong src version, pre-2.1 it was just a thread count
| [Tuesday 08 February 2011] [15:34:22] &lt;cremes&gt;        Guthur: ah, ok
| [Tuesday 08 February 2011] [15:44:45] &lt;andrewvc&gt;      any idea what to make of nbytes != -1 (mailbox.cpp:241) errors in zmq?
| [Tuesday 08 February 2011] [16:32:25] &lt;mikko&gt; neale1: there?
| [Tuesday 08 February 2011] [16:33:19] &lt;neale1&gt;        mikko: Yes
| [Tuesday 08 February 2011] [16:33:31] &lt;neale1&gt;        mikko: BTW, where r u located?
| [Tuesday 08 February 2011] [16:33:36] &lt;mikko&gt; neale1: London
| [Tuesday 08 February 2011] [16:33:46] &lt;mikko&gt; London United Kingdom, not London Canada
| [Tuesday 08 February 2011] [16:33:56] &lt;neale1&gt;        mikko: Better not mention the cricket - I&#8217;m an Australian living in the US
| [Tuesday 08 February 2011] [16:34:19] &lt;mikko&gt; I&#8217;m a Finn living in London and know nothing about cricket
| [Tuesday 08 February 2011] [16:34:20] &lt;mikko&gt; heh
| [Tuesday 08 February 2011] [16:34:23] &lt;taotetek&gt;      gah. anyone here have some pointers on how one could make a pull socket appear as a file (stringio object) using python with pyzmq?  I suppose that&#8217;s more of a python question than a zeromq question.
| [Tuesday 08 February 2011] [16:34:24] &lt;neale1&gt;        :-)
| [Tuesday 08 February 2011] [16:34:29] &lt;Guthur&gt;        Australians, sure they are always winning the Ashes
| [Tuesday 08 February 2011] [16:34:33] &lt;Guthur&gt;        ...oh wait
| [Tuesday 08 February 2011] [16:34:55] &lt;mikko&gt; so anyway, i added a possibility for SSL tunneling the Hudson slave connection to add transport layer security to the connection
| [Tuesday 08 February 2011] [16:34:58] &lt;Guthur&gt;        hehe, only teasing, I don&#8217;t much care for cricket
| [Tuesday 08 February 2011] [16:35:22] &lt;mikko&gt; currently the master-slave connection goes over plain text which is not ideal as the master executes commands on the slave
| [Tuesday 08 February 2011] [16:35:23] &lt;neale1&gt;        It&#8217;s okay, the poms have waited 20 years to get back at us
| [Tuesday 08 February 2011] [16:35:41] &lt;neale1&gt;        mikko: Do I need to do anything from my end?
| [Tuesday 08 February 2011] [16:35:57] &lt;Guthur&gt;        neale1, Yeah, sure you&#8217;re just lending it to them for a while
| [Tuesday 08 February 2011] [16:36:14] &lt;bitweiler&gt;     hey what is this uuid-dev package &amp; uuid/e2fsprogs?
| [Tuesday 08 February 2011] [16:36:20] &lt;mikko&gt; neale1: yes, unfortunately Jenkins doesn&#8217;t support SSL natively with JNLP connections so it would require setting up stunnel
| [Tuesday 08 February 2011] [16:36:43] &lt;mikko&gt; i got a ready configuration for stunnel
| [Tuesday 08 February 2011] [16:36:49] &lt;neale1&gt;        mikko: I&#8217;m not as paranoid about SSL etc on the Marist system
| [Tuesday 08 February 2011] [16:37:01] &lt;mikko&gt; neale1: ok
| [Tuesday 08 February 2011] [16:37:15] &lt;mikko&gt; neale1: i just want to provide options to people as they are contributing the slaves
| [Tuesday 08 February 2011] [16:37:45] &lt;mikko&gt; you don&#8217;t need to add TLS but it&#8217;s there if you want at some point
| [Tuesday 08 February 2011] [16:37:49] &lt;bitweiler&gt;     are those packages needed to run zeromq
| [Tuesday 08 February 2011] [16:38:09] &lt;mikko&gt; bitweiler: libuuid from efs2progs is, yes
| [Tuesday 08 February 2011] [16:38:20] &lt;bitweiler&gt;     okay
| [Tuesday 08 February 2011] [16:38:40] &lt;neale1&gt;        mikko: Understood
| [Tuesday 08 February 2011] [16:38:42] &lt;mikko&gt; hopefully rpm specs and debian packages have a dependency on that
| [Tuesday 08 February 2011] [16:39:17] &lt;bitweiler&gt;     slackware does have rpm specs or debian packages
| [Tuesday 08 February 2011] [16:40:19] &lt;sustrik&gt;       andrwvc: that&#8217;s interesting, are you able to reproduce it?
| [Tuesday 08 February 2011] [16:40:57] &lt;neale1&gt;        bitweller: libuuid keeps changing packages. In Fedora 13 it&#8217;s efs2progs but in 14 it&#8217;s in its own libuuid-devel
| [Tuesday 08 February 2011] [16:43:11] &lt;kristsk&gt;       it likes to travel.
| [Tuesday 08 February 2011] [16:43:59] &lt;neale1&gt;        It&#8217;s a pain the arse trying to keep a spec file that will work on all distributions
| [Tuesday 08 February 2011] [16:47:28] &lt;mikko&gt; anyway, time to sleep
| [Tuesday 08 February 2011] [16:47:30] &lt;mikko&gt; good night
| [Tuesday 08 February 2011] [16:48:02] &lt;neale1&gt;        &#8216;night
| [Tuesday 08 February 2011] [16:49:22] &lt;bitweiler&gt;     lucky me slackware has it pre-installed
| [Tuesday 08 February 2011] [16:50:20] &lt;Guthur&gt;        I&#8217;m making devices with a start and stop, and the way I was going to do it was have poll that would timeout every interval, what would be the opinion of the appropriate balance of performance and response?
| [Tuesday 08 February 2011] [16:50:39] &lt;Guthur&gt;        I am currently using a 750ms polling interval
| [Tuesday 08 February 2011] [16:50:55] &lt;Guthur&gt;        so at worse case it would take 750ms to stop
| [Tuesday 08 February 2011] [16:58:21] &lt;sustrik&gt;       what do you do on the timeout?
| [Tuesday 08 February 2011] [17:03:29] &lt;Guthur&gt;        just check if the stop flag has been set
| [Tuesday 08 February 2011] [17:03:41] &lt;Guthur&gt;        then go start polling again
| [Tuesday 08 February 2011] [17:05:10] &lt;Guthur&gt;        I have a feeling it may actually be necessary when implementing the device in a managed code environment
| [Tuesday 08 February 2011] [17:06:06] &lt;sustrik&gt;       who sets the stop flag?
| [Tuesday 08 February 2011] [17:06:28] &lt;Guthur&gt;        either the user by calling Stop(), or the Dispose method
| [Tuesday 08 February 2011] [17:06:50] &lt;Guthur&gt;        the device is nonblocking
| [Tuesday 08 February 2011] [17:07:07] &lt;sustrik&gt;       who calls the Stop() methos?
| [Tuesday 08 February 2011] [17:07:10] &lt;sustrik&gt;       method*
| [Tuesday 08 February 2011] [17:07:14] &lt;sustrik&gt;       main thread?
| [Tuesday 08 February 2011] [17:07:26] &lt;sustrik&gt;       a thread different to the device thread?
| [Tuesday 08 February 2011] [17:07:34] &lt;Guthur&gt;        sustrik, you&#8217;ve just given me a bad threading feeling, hehe
| [Tuesday 08 February 2011] [17:07:46] &lt;Guthur&gt;        I have a feeling I am doing something bad
| [Tuesday 08 February 2011] [17:08:00] &lt;sustrik&gt;       well, if it&#8217;s invoked from another thread
| [Tuesday 08 February 2011] [17:08:08] &lt;sustrik&gt;       you have to synchronise it using a mutex
| [Tuesday 08 February 2011] [17:08:11] &lt;sustrik&gt;       or something
| [Tuesday 08 February 2011] [17:08:19] &lt;sustrik&gt;       which will kill the performance
| [Tuesday 08 February 2011] [17:08:40] &lt;sustrik&gt;       so I would suggest simply calling zmq_term() from the main thread
| [Tuesday 08 February 2011] [17:08:46] &lt;Guthur&gt;        I have a a second flag that actually indicates when it has stopped
| [Tuesday 08 February 2011] [17:09:03] &lt;sustrik&gt;       which will cause next call to libzmq in the device to return ETERM error
| [Tuesday 08 February 2011] [17:09:20] &lt;sustrik&gt;       you can exit the device loop then
| [Tuesday 08 February 2011] [17:09:43] &lt;Guthur&gt;        I never considered that option
| [Tuesday 08 February 2011] [17:10:02] &lt;sustrik&gt;       ETERM was introduced specifically for this scenario
| [Tuesday 08 February 2011] [17:10:09] &lt;sustrik&gt;       shutting down multithreaded programs
| [Tuesday 08 February 2011] [17:10:38] &lt;Guthur&gt;        oh, this could make the code a bit nicer
| [Tuesday 08 February 2011] [17:10:49] &lt;sustrik&gt;       a much more performant
| [Tuesday 08 February 2011] [17:11:06] &lt;sustrik&gt;       as you can avoid mutex that way
| [Tuesday 08 February 2011] [17:37:33] &lt;tiglionabbit&gt;  I&#8217;m having a bit of trouble wading through the pretentious documentation.  Is there a simple multiple-chatrooms example for zeromq?
| [Tuesday 08 February 2011] [17:38:22] &lt;tiglionabbit&gt;  like, if I have a variety of incoming long-polling connections each listening for different criteria
| [Tuesday 08 February 2011] [17:43:20] &lt;Steve-o&gt;       if someone is bored I have plenty of x86 atomic ops instructions to convert from GCC format to SunPro format, already done MSVC :D
| [Tuesday 08 February 2011] [17:45:48] &lt;Steve-o&gt;       ending up almost two screen fulls of code to simply perform number++, lol
| [Tuesday 08 February 2011] [18:01:34] &lt;Guthur&gt;        tiglionabbit, do you mean the Guide?
| [Tuesday 08 February 2011] [18:01:45] &lt;tiglionabbit&gt;  yes
| [Tuesday 08 February 2011] [18:02:40] &lt;Guthur&gt;        I actually thought it was quite reasonable, you could just jump straight to code examples from the guide
| [Tuesday 08 February 2011] [18:02:56] &lt;Guthur&gt;        and then refer back to the guide if you get confused
| [Tuesday 08 February 2011] [18:03:51] &lt;Guthur&gt;        there is so many patterns possible with 0MQ that it would be impossible to convey properly with just one code example
| [Tuesday 08 February 2011] [18:03:53] &lt;Guthur&gt;        IMO
| [Tuesday 08 February 2011] [18:07:20] &lt;Guthur&gt;        is there a function that returns the ZMQ_HAUSNUMERO
| [Tuesday 08 February 2011] [18:11:10] &lt;kristsk&gt;       ZMQ_NOTAMUSED
| [Tuesday 08 February 2011] [18:11:14] &lt;kristsk&gt;       sorry.
| [Tuesday 08 February 2011] [18:14:27] &lt;bitweiler&gt;     does zeromq include the mongrel2 server?
| [Tuesday 08 February 2011] [18:15:54] &lt;bitweiler&gt;     just trying to see if I need to install that as well
| [Tuesday 08 February 2011] [18:21:21] &lt;Steve-o&gt;       bitweiler: no, the core zeromq package is just the sockets, not even the bindings any more
| [Tuesday 08 February 2011] [18:23:33] &lt;bitweiler&gt;     oh, okay
| [Tuesday 08 February 2011] [18:41:39] &lt;bitweiler&gt;     does zeromq have any other documentation besides the man pages?
| [Tuesday 08 February 2011] [18:42:03] &lt;bitweiler&gt;     I ask cause I trying to make a package for slackware
| [Tuesday 08 February 2011] [18:44:06] &lt;Guthur&gt;        bitweiler, I think the guide is the only other doc, http://zguide.zeromq.org/chapter:all
| [Tuesday 08 February 2011] [18:44:36] &lt;Guthur&gt;        When connecting a Push to a Pull using TCP, does one need a delay before sending?
| [Tuesday 08 February 2011] [18:45:37] &lt;bitweiler&gt;     Guthur: thanks
| [Tuesday 08 February 2011] [18:46:33] &lt;bitweiler&gt;     things look real promising for this project, i my eyes
| [Tuesday 08 February 2011] [18:47:43] &lt;Guthur&gt;        I think it&#8217;s pretty cool, the guys have produced some cool tech
| [Tuesday 08 February 2011] [18:49:08] &lt;bitweiler&gt;     hmm, hopeful everything works smoothly with scheme&#8217;s c-ffi
| [Tuesday 08 February 2011] [18:49:24] &lt;Guthur&gt;        I think there is a racket binding
| [Tuesday 08 February 2011] [18:49:41] &lt;bitweiler&gt;     there&#8217;s one for chicken as well
| [Tuesday 08 February 2011] [18:49:44] &lt;Guthur&gt;        and someone was working on one for that chicken scheme i think
| [Tuesday 08 February 2011] [18:49:53] &lt;Guthur&gt;        there is also a Common Lisp one
| [Tuesday 08 February 2011] [18:49:53]          * bitweiler nods
| [Tuesday 08 February 2011] [18:50:10] &lt;bitweiler&gt;     I aim to test drive the chicken binding
| [Tuesday 08 February 2011] [18:51:29] &lt;Guthur&gt;        On my issue...I seem to be having an issue with REQ&lt;-&gt;XREP&lt;-PULL&lt;-PUSH, using TCP
| [Tuesday 08 February 2011] [18:52:01] &lt;Guthur&gt;        it was working OK with inproc, now I have place a delay when connecting at the PUSH end
| [Tuesday 08 February 2011] [19:00:40] &lt;Guthur&gt;        nvm, something else is wrong actually
| [Tuesday 08 February 2011] [19:25:11] &lt;Guthur&gt;        ok I notice some weirdness, is there an upper limit to the timeout for Polling?
| [Tuesday 08 February 2011] [19:27:28] &lt;Guthur&gt;        around 500000 it stops working for me
| [Tuesday 08 February 2011] [19:33:25] &lt;Guthur&gt;        oh the problem disappears in 2.1
| [Tuesday 08 February 2011] [21:20:48] &lt;bitweiler&gt;     is the guide the best introduction to zeromq?
| [Tuesday 08 February 2011] [22:20:55] &lt;bitweiler&gt;     are context&#8217;s numbers?
| [Tuesday 08 February 2011] [22:29:19] &lt;bitweiler&gt;     DerGuteMoritz: how you make contexts with zmq?
| [Wednesday 09 February 2011] [01:25:06] &lt;gambi&gt;       Can I connect multiple taskers to multiple workers with out a broker inbetween if I don&#8217;t need a reply from a worker? Basically a FIFO that gets filled by the taskers and emptied by the workers.
| [Wednesday 09 February 2011] [01:25:40] &lt;ianbarber&gt;   not without them all knowing about each other
| [Wednesday 09 February 2011] [01:26:13] &lt;ianbarber&gt;   you could have each client connect to each worker with PUSH/PULL sockets
| [Wednesday 09 February 2011] [01:26:45] &lt;gambi&gt;       yeah, i&#8217;ve started with that ... but realized that PUSH blocks the socket
| [Wednesday 09 February 2011] [01:27:09] &lt;ianbarber&gt;   i would look at using a FORWARDER device, and have that be the stable point in the architecture
| [Wednesday 09 February 2011] [01:27:35] &lt;gambi&gt;       and the single point of failure :(
| [Wednesday 09 February 2011] [01:27:49] &lt;ianbarber&gt;   that&#8217;s a pretty easy fix, have a couple of them (or more!)
| [Wednesday 09 February 2011] [01:27:55] &lt;gambi&gt;       ok
| [Wednesday 09 February 2011] [01:28:39] &lt;gambi&gt;       so i do (many tasker) - device forwarder - (many worker) kinda thing?
| [Wednesday 09 February 2011] [01:29:29] &lt;ianbarber&gt;   yeah
| [Wednesday 09 February 2011] [01:30:38] &lt;gambi&gt;       if i don&#8217;t need an reply from the worker and have to have the fastest possible way to talk to the device which pattern socket type should i use? tasker - (PUB/SUB) - dev forwarder (with stream + callback) - PUSH/PULL - worker?
| [Wednesday 09 February 2011] [01:31:35] &lt;ianbarber&gt;   i would say PUSH PULL in both parts. if you have pub/sub and two forwarders, they&#8217;ll both get the message, and you&#8217;ll likely end up with the work done twice
| [Wednesday 09 February 2011] [01:32:01] &lt;ianbarber&gt;   if you don&#8217;t want to get stuck in a send() you could use ZMQ_NOBLOCk and catch when it can&#8217;t send
| [Wednesday 09 February 2011] [01:33:50] &lt;gambi&gt;       how can I bind multiple PUSH sockets? I thought I can only PUSH from one tasker?
| [Wednesday 09 February 2011] [01:34:18] &lt;ianbarber&gt;   a single pull socket can have many pushes connected to it
| [Wednesday 09 February 2011] [01:34:25] &lt;gambi&gt;       ah
| [Wednesday 09 February 2011] [01:34:30] &lt;ianbarber&gt;   and vice versa
| [Wednesday 09 February 2011] [01:34:38] &lt;gambi&gt;       didn&#8217;t know that
| [Wednesday 09 February 2011] [01:34:38] &lt;ianbarber&gt;   basically your forwarder would bind the pull
| [Wednesday 09 February 2011] [01:35:03] &lt;ianbarber&gt;   so lets say you had a forwarder on tcp://129.168.0.1:5566 and tcp://129.168.0.2:5566
| [Wednesday 09 February 2011] [01:35:17] &lt;ianbarber&gt;   you would then connect() both of those on each of your workers
| [Wednesday 09 February 2011] [01:35:23] &lt;ianbarber&gt;   sorry, taskers
| [Wednesday 09 February 2011] [01:35:52] &lt;gambi&gt;       ok
| [Wednesday 09 February 2011] [01:35:52] &lt;ianbarber&gt;   they would fire tasks at each alternatively, and on the other end the pull would fair queue between all the connected incoming
| [Wednesday 09 February 2011] [01:40:29] &lt;ianbarber&gt;   you should only need to bind() on the forwarder side
| [Wednesday 09 February 2011] [01:40:33] &lt;ianbarber&gt;   connect on all the other sides
| [Wednesday 09 February 2011] [01:40:42] &lt;gambi&gt;       ah
| [Wednesday 09 February 2011] [01:40:50] &lt;gambi&gt;       omg. lol ... sorry. yes of course
| [Wednesday 09 February 2011] [01:40:56] &lt;gambi&gt;       i&#8217;m new to zeromq
| [Wednesday 09 February 2011] [01:41:06] &lt;ianbarber&gt;   :)
| [Wednesday 09 February 2011] [01:42:12] &lt;gambi&gt;       ianbarber: thx for your help. let me try and write that out. :)
| [Wednesday 09 February 2011] [01:42:27] &lt;ianbarber&gt;   no worries
| [Wednesday 09 February 2011] [03:11:26] &lt;<a href="#id1767"><span class="problematic" id="id1768">andrewvc_</span></a>&gt;   I&#8217;ve been getting some weird zmq errs
| [Wednesday 09 February 2011] [03:11:29] &lt;<a href="#id1769"><span class="problematic" id="id1770">andrewvc_</span></a>&gt;   I see at some point
| [Wednesday 09 February 2011] [03:11:36] &lt;<a href="#id1771"><span class="problematic" id="id1772">andrewvc_</span></a>&gt;   [pid 24407] pipe([14, 15])              = 0
| [Wednesday 09 February 2011] [03:12:32] &lt;<a href="#id1773"><span class="problematic" id="id1774">andrewvc_</span></a>&gt;   actually nm
| [Wednesday 09 February 2011] [03:35:43] &lt;skysbird2&gt;   hi, buddies, lovely buddies
| [Wednesday 09 February 2011] [03:35:49] &lt;skysbird2&gt;   i want to know
| [Wednesday 09 February 2011] [03:36:02] &lt;skysbird2&gt;   why i cannot find the zmq_server file after i make install
| [Wednesday 09 February 2011] [03:36:16] &lt;skysbird2&gt;   i downloaded from www.zeromq.org
| [Wednesday 09 February 2011] [03:36:28] &lt;skysbird2&gt;   zeromq-2.0.10.tar.gz for POSIX systems
| [Wednesday 09 February 2011] [03:36:32] &lt;skysbird2&gt;   this one
| [Wednesday 09 February 2011] [03:38:39] &lt;guido_g&gt;     migt be because there is no such file
| [Wednesday 09 February 2011] [03:38:42] &lt;guido_g&gt;     <em>might
| [Wednesday 09 February 2011] [03:45:30] &lt;skysbird2&gt;   guido_g,but i think this file zmq_server is the kernel start up file of zeromq
| [Wednesday 09 February 2011] [03:48:09] &lt;guido_g&gt;     no it&#8217;s not
| [Wednesday 09 February 2011] [03:48:20] &lt;guido_g&gt;     read the guide and the appropriate docs
| [Wednesday 09 February 2011] [04:00:39] &lt;skysbird2&gt;   guido_g, i just cannot find appropriate docs, can you recommend one for me?
| [Wednesday 09 February 2011] [04:08:56] &lt;ianbarber&gt;   skysbird2: try the guide http://zguide.zeromq.org/
| [Wednesday 09 February 2011] [04:09:14] &lt;ianbarber&gt;   zeromq doesn&#8217;t have a daemon, it&#8217;s a library
| [Wednesday 09 February 2011] [04:12:10] &lt;skysbird2&gt;   ianbarber,oh ,thank you
| [Wednesday 09 February 2011] [04:12:27] &lt;skysbird2&gt;   i &#8216;ve seen some document said it has zmq_server....
| [Wednesday 09 February 2011] [04:12:43] &lt;skysbird2&gt;   http://www.zeromq.org/code:examples-exchange#toc3
| [Wednesday 09 February 2011] [04:12:45] &lt;skysbird2&gt;   like this
| [Wednesday 09 February 2011] [04:13:02] &lt;guido_g&gt;     outdated
| [Wednesday 09 February 2011] [04:13:25] &lt;skysbird2&gt;   oh
| [Wednesday 09 February 2011] [04:13:31] &lt;ianbarber&gt;   the hint is at the top &#8220;WARNING: This text is deprecated and refers to an old version of MQ. It remains here for historical interest. DO NOT USE THIS TO LEARN MQ.&#8221;
| [Wednesday 09 February 2011] [04:15:40] &lt;skysbird2&gt;   oh
| [Wednesday 09 February 2011] [04:16:22] &lt;skysbird2&gt;   so is there some amq middleware like OpenAMQ build on zeroMQ?
| [Wednesday 09 February 2011] [04:18:11] &lt;ianbarber&gt;   i would really take a skim through the guide - 0MQ uses a different set of ideas
| [Wednesday 09 February 2011] [04:19:07] &lt;ianbarber&gt;   as an answer though - there are devices, which are similar, but intetionally simpler, and it&#8217;s also a lot easier to write your own, so the idea is that you will have several small, specific devices in an architecture rather than one big broker
| [Wednesday 09 February 2011] [04:20:00] &lt;skysbird2&gt;   ok i know
| [Wednesday 09 February 2011] [04:20:04] &lt;skysbird2&gt;   just distribution
| [Wednesday 09 February 2011] [04:20:17] &lt;skysbird2&gt;   because i heard that opemamq will be unsupported
| [Wednesday 09 February 2011] [04:20:21] &lt;skysbird2&gt;   by 2011
| [Wednesday 09 February 2011] [04:20:39] &lt;skysbird2&gt;   so i just want to find a middleware to replace OpenAMQ
| [Wednesday 09 February 2011] [04:21:47] &lt;guido_g&gt;     http://www.zeromq.org/whitepapers:brokerless  &lt;- for starters
| [Wednesday 09 February 2011] [04:22:48] &lt;ianbarber&gt;   skysbird2: I would say that take a look at http://www.zeromq.org/docs:welcome-from-amqp to work out whether 0MQ is right for you - if not then take a look at other AMQP systems like Rabbit I guess.
| [Wednesday 09 February 2011] [04:24:52] &lt;mikko&gt;       ianbarber: you got up early
| [Wednesday 09 February 2011] [04:34:30] &lt;ianbarber&gt;   mikko: had a deploy at 6 this morning
| [Wednesday 09 February 2011] [09:00:33] &lt;Guthur&gt;      Are shareable (between threads) sockets being worked on
| [Wednesday 09 February 2011] [09:00:38] &lt;Guthur&gt;      it would be a nice to have
| [Wednesday 09 February 2011] [09:01:14] &lt;mikko&gt;       no, i dont think they are
| [Wednesday 09 February 2011] [09:01:26] &lt;mikko&gt;       there should be no need for such a thing
| [Wednesday 09 February 2011] [09:01:36] &lt;mikko&gt;       if you share you need to lock
| [Wednesday 09 February 2011] [09:02:21] &lt;Guthur&gt;      yeah in general I suppose there isn&#8217;t much need
| [Wednesday 09 February 2011] [09:05:32] &lt;Guthur&gt;      curious more than anything
| [Wednesday 09 February 2011] [10:06:52] &lt;CIA-21&gt;      zeromq2: 03Martin Sustrik 07master * r80ac398 10/ (14 files in 2 dirs):
| [Wednesday 09 February 2011] [10:06:52] &lt;CIA-21&gt;      zeromq2: Initial implementation of reaper thread.
| [Wednesday 09 February 2011] [10:06:52] &lt;CIA-21&gt;      zeromq2: Reaper thread destroys the socket asynchronously.
| [Wednesday 09 February 2011] [10:06:52] &lt;CIA-21&gt;      zeromq2: zmq_term() can be interrupted by a signal (EINTR).
| [Wednesday 09 February 2011] [10:06:52] &lt;CIA-21&gt;      zeromq2: zmq_socket() will return ETERM after zmq_term() was called.
| [Wednesday 09 February 2011] [10:06:53] &lt;CIA-21&gt;      zeromq2: Signed-off-by: Martin Sustrik &lt;sustrik&#64;250bpm.com&gt; - http://bit.ly/gQddej
| [Wednesday 09 February 2011] [10:16:57] &lt;cremes&gt;      ooh, a reaper thread! just what we need to get rid of the zmq_term blocking behavior
| [Wednesday 09 February 2011] [10:17:04] &lt;cremes&gt;      glad to see some progress on that piece
| [Wednesday 09 February 2011] [10:20:45] &lt;sustrik&gt;     cremes: give it a try please
| [Wednesday 09 February 2011] [10:20:54] &lt;sustrik&gt;     does it solve the Ctrl+C problem?
| [Wednesday 09 February 2011] [10:21:35] &lt;cremes&gt;      sustrik: i&#8217;ll try it out in a few hours; i&#8217;m in the middle of a refactoring and don&#8217;t want to interrupt it just yet
| [Wednesday 09 February 2011] [10:21:45] &lt;cremes&gt;      i&#8217;ll post my results here
| [Wednesday 09 February 2011] [10:22:17] &lt;sustrik&gt;     great, thanks
| [Wednesday 09 February 2011] [10:52:10] &lt;andrewvc_&gt;   cremes: around?
| [Wednesday 09 February 2011] [10:53:03] &lt;cremes&gt;      andrewvc_: yep, but a tad busy... got something quick?
| [Wednesday 09 February 2011] [10:53:21] &lt;andrewvc_&gt;   mmm, just wondering if you&#8217;ve seen nbytes = -1 errors in ffi-rzmq before
| [Wednesday 09 February 2011] [10:53:26] &lt;andrewvc_&gt;   err != -1  I mean
| [Wednesday 09 February 2011] [10:53:40] &lt;andrewvc_&gt;   followed by libzmq quitting
| [Wednesday 09 February 2011] [10:53:57] &lt;cremes&gt;      yes, i&#8217;ve seen that assertion before...
| [Wednesday 09 February 2011] [10:54:10] &lt;cremes&gt;      um... are you on latest master or are you using 2.1 release?
| [Wednesday 09 February 2011] [10:54:14] &lt;andrewvc_&gt;   master
| [Wednesday 09 February 2011] [10:54:28] &lt;andrewvc_&gt;   2.1 release doesn&#8217;t seem to work with FDs for me
| [Wednesday 09 February 2011] [10:54:57] &lt;cremes&gt;      interesting... i used to see that assertion on 2.1 release but i upgraded to master about a month ago and forgot about it
| [Wednesday 09 February 2011] [10:55:14] &lt;cremes&gt;      is it reproducible or is it a heisenbug?
| [Wednesday 09 February 2011] [10:55:32] &lt;cremes&gt;      also, are you on osx or linux?
| [Wednesday 09 February 2011] [10:55:36] &lt;andrewvc_&gt;   linux
| [Wednesday 09 February 2011] [10:55:42] &lt;andrewvc_&gt;   totally reproduces
| [Wednesday 09 February 2011] [10:55:48] &lt;andrewvc_&gt;   can get it in this one exchange of messages
| [Wednesday 09 February 2011] [10:55:51] &lt;andrewvc_&gt;   always the same message
| [Wednesday 09 February 2011] [10:56:01] &lt;andrewvc_&gt;   I tried changing the message content, no diff
| [Wednesday 09 February 2011] [10:56:57] &lt;cremes&gt;      put up a gist and i&#8217;ll try to look at it later; i need to get back to work
| [Wednesday 09 February 2011] [10:57:27] &lt;andrewvc_&gt;   cool, can do
| [Wednesday 09 February 2011] [11:09:38] &lt;andrewvc_&gt;   sustrik around?
| [Wednesday 09 February 2011] [11:20:50] &lt;Guthur&gt;      When the it says: Never initialize the same zmq_msg_t twice.
| [Wednesday 09 February 2011] [11:20:58] &lt;Guthur&gt;      does that mean reuse the msg
| [Wednesday 09 February 2011] [11:21:49] &lt;Guthur&gt;      or does it mean close and then init
| [Wednesday 09 February 2011] [11:24:05] &lt;pieterh&gt;     Guthur, close followed by init is ok afaics
| [Wednesday 09 February 2011] [11:24:16] &lt;mikko&gt;       it&#8217;s ok
| [Wednesday 09 February 2011] [11:24:26] &lt;mikko&gt;       initing twice without close will leak
| [Wednesday 09 February 2011] [11:24:27] &lt;pieterh&gt;     Where does it say not to init twice?
| [Wednesday 09 February 2011] [11:24:49] &lt;Guthur&gt;      pieterh: http://api.zeromq.org/zmq_msg_init.html
| [Wednesday 09 February 2011] [11:24:53] &lt;Guthur&gt;      second caution
| [Wednesday 09 February 2011] [11:25:30] &lt;pieterh&gt;     Guthur, ah, it&#8217;s wrong, afaik, you might want to signal that to Mato or send a patch
| [Wednesday 09 February 2011] [11:26:18] &lt;Guthur&gt;      pieterh: which part is wrong?
| [Wednesday 09 February 2011] [11:26:38] &lt;Guthur&gt;      assume it is fine to pass a msg directly from a recv to a send
| [Wednesday 09 February 2011] [11:26:52] &lt;Guthur&gt;      I assume</em>
| [Wednesday 09 February 2011] [11:27:26] &lt;andrewvc&gt;    pieterh, if you can spare a minute. Any idea what would cause a bad file descriptor error followed by nbytes != -1 error in ZMQ
| [Wednesday 09 February 2011] [11:27:34] &lt;pieterh&gt;     Guthur, it should probably say, &#8220;Never initialize the same zmq_msg_t twice without first doing zmq_msg_close.&#8221;
| [Wednesday 09 February 2011] [11:27:55] &lt;pieterh&gt;     andrewvc, did you check strerror?
| [Wednesday 09 February 2011] [11:28:47] &lt;pieterh&gt;     andrewvc, uhm, I guess &#8220;bad file descriptor&#8221; is the error string?
| [Wednesday 09 February 2011] [11:28:52] &lt;andrewvc&gt;    yeah
| [Wednesday 09 February 2011] [11:28:57] &lt;andrewvc&gt;    I have that, followed by
| [Wednesday 09 February 2011] [11:28:58] &lt;pieterh&gt;     what&#8217;s the context where you get the error?
| [Wednesday 09 February 2011] [11:29:07] &lt;andrewvc&gt;    sure, it&#8217;s right after a send operation
| [Wednesday 09 February 2011] [11:29:15] &lt;Guthur&gt;      pieterh: ah ok, I&#8217;ll mention it to mato, then
| [Wednesday 09 February 2011] [11:29:26] &lt;andrewvc&gt;    I get bad file descriptor, then it complains about mailbox.cpp:241 nbytes != -1
| [Wednesday 09 February 2011] [11:29:31] &lt;andrewvc&gt;    on the second line
| [Wednesday 09 February 2011] [11:29:31] &lt;Guthur&gt;      or maybe send a patch
| [Wednesday 09 February 2011] [11:29:37] &lt;andrewvc&gt;    I straced it as well
| [Wednesday 09 February 2011] [11:29:51] &lt;pieterh&gt;     andrewvc: possibly a bad bind or connect?
| [Wednesday 09 February 2011] [11:30:01] &lt;pieterh&gt;     don&#8217;t really know these internals, sorry
| [Wednesday 09 February 2011] [11:30:05] &lt;andrewvc&gt;    well, the sockets are all local, on the loopback.
| [Wednesday 09 February 2011] [11:30:15] &lt;andrewvc&gt;    no worries, thanks though
| [Wednesday 09 February 2011] [11:30:18] &lt;pieterh&gt;     try replacing with ipc instead of tcp
| [Wednesday 09 February 2011] [11:30:28] &lt;pieterh&gt;     just to see what happens
| [Wednesday 09 February 2011] [11:30:38] &lt;andrewvc&gt;    yeah tried that
| [Wednesday 09 February 2011] [11:30:41] &lt;pieterh&gt;     same error?
| [Wednesday 09 February 2011] [11:30:47] &lt;andrewvc&gt;    yeah
| [Wednesday 09 February 2011] [11:31:06] &lt;andrewvc&gt;    actually, I should confirm that I have a mix of sockets, maybe I got the wrong one
| [Wednesday 09 February 2011] [11:31:34] &lt;pieterh&gt;     sounds something like that
| [Wednesday 09 February 2011] [11:32:25] &lt;pieterh&gt;     windows or Linux?
| [Wednesday 09 February 2011] [11:32:37] &lt;andrewvc&gt;    linux
| [Wednesday 09 February 2011] [11:33:07] &lt;pieterh&gt;     this is where we summon sustrik
| [Wednesday 09 February 2011] [11:33:46] &lt;andrewvc&gt;    hehe, that&#8217;d be awesome, I&#8217;ve been on the trail of this forever
| [Wednesday 09 February 2011] [11:33:52] &lt;pieterh&gt;     offhand I&#8217;d say you&#8217;re using a socket that failed to bind/connect
| [Wednesday 09 February 2011] [11:34:05] &lt;andrewvc&gt;    well, the thing is, the app works in a stable manner for a while
| [Wednesday 09 February 2011] [11:34:08] &lt;andrewvc&gt;    then it just stops
| [Wednesday 09 February 2011] [11:34:15] &lt;andrewvc&gt;    but it&#8217;s reproducible
| [Wednesday 09 February 2011] [11:34:25] &lt;andrewvc&gt;    consistently
| [Wednesday 09 February 2011] [11:34:29] &lt;pieterh&gt;     are you using assertions on all <a href="#id1775"><span class="problematic" id="id1776">zmq_</span></a> calls?
| [Wednesday 09 February 2011] [11:35:30] &lt;pieterh&gt;     clearly the socket that zmq is trying to read from is invalid
| [Wednesday 09 February 2011] [11:35:45] &lt;andrewvc&gt;    hmmm, lemme see, I&#8217;m using the ruby zeromq library
| [Wednesday 09 February 2011] [11:35:51] &lt;andrewvc&gt;    I&#8217;ve got the source open...
| [Wednesday 09 February 2011] [11:35:55] &lt;bitweiler&gt;   anyone know of any docs that gives examples of how to use chicken&#8217;s zeromq bindings?
| [Wednesday 09 February 2011] [11:37:59] &lt;pieterh&gt;     bitweiler, the only docs I know of are at <a class="reference external" href="http://wiki.call-cc.org/eggref/4/zmq?action=show">http://wiki.call-cc.org/eggref/4/zmq?action=show</a>
| [Wednesday 09 February 2011] [11:38:30] &lt;bitweiler&gt;   thanks I have those, which don&#8217;t help much
| [Wednesday 09 February 2011] [11:39:06] &lt;pieterh&gt;     andrewvc, if you can reproduce it consistently, I&#8217;d suggest making a stripped-down test case
| [Wednesday 09 February 2011] [11:39:17] &lt;pieterh&gt;     quite often as you strip it down you&#8217;ll see what you&#8217;re doing wrong
| [Wednesday 09 February 2011] [11:39:19] &lt;andrewvc&gt;    that&#8217;s the tough part, it&#8217;s part of a complex app
| [Wednesday 09 February 2011] [11:39:25] &lt;andrewvc&gt;    and it was working fine
| [Wednesday 09 February 2011] [11:39:33] &lt;pieterh&gt;     &#8216;was not showing the error&#8217;
| [Wednesday 09 February 2011] [11:39:39] &lt;andrewvc&gt;    then all of a sudden it wasn&#8217;t, I can fiddle with its inputs to get it to repro
| [Wednesday 09 February 2011] [11:39:42] &lt;sustrik&gt;     i am sorry, i have to leave now
| [Wednesday 09 February 2011] [11:39:46] &lt;sustrik&gt;     if there&#8217;s a problem
| [Wednesday 09 February 2011] [11:39:52] &lt;sustrik&gt;     just send it to the ML
| [Wednesday 09 February 2011] [11:39:55] &lt;andrewvc&gt;    no worries, I&#8217;ll see if I can figure out how to make a minimal case
| [Wednesday 09 February 2011] [11:40:03] &lt;andrewvc&gt;    maybe I&#8217;ll record the message flow and make a fake app
| [Wednesday 09 February 2011] [11:40:07] &lt;pieterh&gt;     yeah
| [Wednesday 09 February 2011] [11:40:18] &lt;pieterh&gt;     at least follow what&#8217;s happening on that specific zmq socket
| [Wednesday 09 February 2011] [11:40:52] &lt;mikko&gt;       can you attach a debugger and check errno on line 241?
| [Wednesday 09 February 2011] [11:41:19] &lt;pieterh&gt;     mikko: &#8220;bad file descriptor&#8221;, said andrew
| [Wednesday 09 February 2011] [11:41:36] &lt;mikko&gt;       ah, i just hopped in. reading the buffer
| [Wednesday 09 February 2011] [11:41:39] &lt;andrewvc&gt;    yeah, it&#8217;s an inproc socket btw
| [Wednesday 09 February 2011] [11:41:50] &lt;andrewvc&gt;    I switched it to inproc to help debug
| [Wednesday 09 February 2011] [11:42:23] &lt;andrewvc&gt;    tried ipc as well, same deal
| [Wednesday 09 February 2011] [11:42:34] &lt;mikko&gt;       sounds slightly odd
| [Wednesday 09 February 2011] [11:42:41] &lt;andrewvc&gt;    It&#8217;s a pub/sub if that matters
| [Wednesday 09 February 2011] [11:42:47] &lt;andrewvc&gt;    it works for a little while
| [Wednesday 09 February 2011] [11:43:02] &lt;andrewvc&gt;    I&#8217;m not familiar with GDB, but if you don&#8217;t mind walking me through it
| [Wednesday 09 February 2011] [11:43:10] &lt;mikko&gt;       can you run it inside valgrind just to see that there is nothing random going on with memory ?
| [Wednesday 09 February 2011] [11:43:11] &lt;andrewvc&gt;    I would be game. I have strace output already
| [Wednesday 09 February 2011] [11:43:25] &lt;andrewvc&gt;    mmm, it&#8217;s a ruby app, not sure if valgrind supports that
| [Wednesday 09 February 2011] [11:43:40] &lt;mikko&gt;       it does
| [Wednesday 09 February 2011] [11:43:52] &lt;mikko&gt;       it doesn&#8217;t understand about ruby
| [Wednesday 09 February 2011] [11:44:07] &lt;mikko&gt;       i remember seeing this before somewhere
| [Wednesday 09 February 2011] [11:44:21] &lt;andrewvc&gt;    well, so here&#8217;s some history
| [Wednesday 09 February 2011] [11:44:28] &lt;andrewvc&gt;    I used to see it in odd places
| [Wednesday 09 February 2011] [11:44:33] &lt;andrewvc&gt;    so did cremes
| [Wednesday 09 February 2011] [11:44:50] &lt;andrewvc&gt;    he also uses ffi-rzmq as  a binding
| [Wednesday 09 February 2011] [11:44:52] &lt;andrewvc&gt;    but lately upgrading to master fixed it
| [Wednesday 09 February 2011] [11:45:06] &lt;andrewvc&gt;    until yesterday, now it&#8217;s back with a vengeance on this one app of mine
| [Wednesday 09 February 2011] [11:45:26] &lt;mikko&gt;       no, i was thinking about the recent new_sndbuf &gt; old_sndbuf (mailbox.cpp:182)
| [Wednesday 09 February 2011] [11:47:55] &lt;pieterh&gt;     andrewvc, if you&#8217;re getting this no matter what the transport... then I&#8217;d say the zmq socket is in an invalid state
| [Wednesday 09 February 2011] [11:48:07] &lt;pieterh&gt;     try simply tracing all work you do with that socket
| [Wednesday 09 February 2011] [11:48:10] &lt;andrewvc&gt;    cool.
| [Wednesday 09 February 2011] [11:48:48] &lt;andrewvc&gt;    yeah, I&#8217;ve got crazy debugging going on right now :) hopefully I&#8217;ll have something substantial to work off of
| [Wednesday 09 February 2011] [11:49:02] &lt;andrewvc&gt;    is there any call to just ask is this socket ok?
| [Wednesday 09 February 2011] [11:49:16] &lt;andrewvc&gt;    or does it sound like an uncaugh assertion?
| [Wednesday 09 February 2011] [11:53:14] &lt;pieterh&gt;     andrewvc, well, there is no such call but you could do a sanity test...
| [Wednesday 09 February 2011] [11:53:34] &lt;pieterh&gt;     e.g. try a non-blocking recv on the socket
| [Wednesday 09 February 2011] [11:53:48] &lt;andrewvc&gt;    ah, well, it&#8217;s a PUB socket
| [Wednesday 09 February 2011] [11:53:53] &lt;pieterh&gt;     hang on
| [Wednesday 09 February 2011] [11:54:06] &lt;pieterh&gt;     it&#8217;s a pub socket... so why are you ending up trying to recv from it?
| [Wednesday 09 February 2011] [11:55:07]        * pieterh could be confused here, not sure if mailbox:recv is reading from socket
| [Wednesday 09 February 2011] [11:55:51] &lt;andrewvc&gt;    hmmm, could it be a weird timing thing, maybe some socket is receiving in the background
| [Wednesday 09 February 2011] [11:56:00] &lt;andrewvc&gt;    and it just happens to be at the same time
| [Wednesday 09 February 2011] [11:56:26] &lt;andrewvc&gt;    so it&#8217;s not actually the PUB socket at all. Or maybe it&#8217;s the SUB receiving?
| [Wednesday 09 February 2011] [11:56:29] &lt;pieterh&gt;     weird timing things don&#8217;t usually act reproducibly
| [Wednesday 09 February 2011] [11:56:53] &lt;andrewvc&gt;    yeah, maybe I should split it into two processes, so the sub is separated
| [Wednesday 09 February 2011] [11:57:20] &lt;andrewvc&gt;    oh, i&#8217;m not trying to receive
| [Wednesday 09 February 2011] [11:57:27] &lt;andrewvc&gt;    the error is right after a send
| [Wednesday 09 February 2011] [11:58:07] &lt;pieterh&gt;     well, as sustrik said, send the snippet and error message to zeromq-dev...
| [Wednesday 09 February 2011] [11:58:18] &lt;pieterh&gt;     he&#8217;ll be back later
| [Wednesday 09 February 2011] [11:58:40] &lt;andrewvc&gt;    cool, thanks for your time pieter
| [Wednesday 09 February 2011] [11:58:54] &lt;pieterh&gt;     np
| [Wednesday 09 February 2011] [11:58:54] &lt;andrewvc&gt;    something fishy is going on here
| [Wednesday 09 February 2011] [11:58:56] &lt;andrewvc&gt;    lol
| [Wednesday 09 February 2011] [14:55:04] &lt;mikko&gt;       good evening
| [Wednesday 09 February 2011] [15:00:31] &lt;Guthur&gt;      &#8216;evening mikko
| [Wednesday 09 February 2011] [16:27:30] &lt;CIA-21&gt;      zeromq2: 03Martin Sustrik 07master * r5b82b1b 10/ (7 files):
| [Wednesday 09 February 2011] [16:27:30] &lt;CIA-21&gt;      zeromq2: Reaper thread waits for commands rather them retrieving them periodically
| [Wednesday 09 February 2011] [16:27:30] &lt;CIA-21&gt;      zeromq2: Signed-off-by: Martin Sustrik &lt;sustrik&#64;250bpm.com&gt; - http://bit.ly/eNn0wP
| [Wednesday 09 February 2011] [16:35:34] &lt;CIA-21&gt;      zeromq2: 03Martin Sustrik 07master * re947900 10/ builds/msvc/libzmq/libzmq.vcproj :
| [Wednesday 09 February 2011] [16:35:34] &lt;CIA-21&gt;      zeromq2: reaper added to MSVC build
| [Wednesday 09 February 2011] [16:35:34] &lt;CIA-21&gt;      zeromq2: Signed-off-by: Martin Sustrik &lt;sustrik&#64;250bpm.com&gt; - http://bit.ly/enwx8O
| [Wednesday 09 February 2011] [16:40:54] &lt;sustrik&gt;     mikko: https://github.com/zeromq/zeromq2/issues#issue/163
| [Wednesday 09 February 2011] [16:41:08] &lt;sustrik&gt;     i have no idea whether it&#8217;s ok or not
| [Wednesday 09 February 2011] [16:41:35] &lt;mikko&gt;       will check
| [Wednesday 09 February 2011] [16:42:43] &lt;mikko&gt;       majority of the shared libraries and libtool archives i have installed on my machine have executable bit set
| [Wednesday 09 February 2011] [16:42:47] &lt;mikko&gt;       static libraries don&#8217;t
| [Wednesday 09 February 2011] [16:43:23]        * sustrik hasn&#8217;t a slightest idea
| [Wednesday 09 February 2011] [16:46:17] &lt;mikko&gt;       commented on the issue
| [Wednesday 09 February 2011] [16:47:14] &lt;Guthur&gt;      what would be the use case for zmq_msg_move(3)
| [Wednesday 09 February 2011] [16:47:35] &lt;sustrik&gt;     when you need to move a message payload without copying it?
| [Wednesday 09 February 2011] [16:47:48] &lt;Guthur&gt;      can you not just use the original msg?
| [Wednesday 09 February 2011] [16:48:05] &lt;sustrik&gt;     class X
| [Wednesday 09 February 2011] [16:48:06] &lt;sustrik&gt;     {
| [Wednesday 09 February 2011] [16:48:14] &lt;sustrik&gt;        message_t msg;
| [Wednesday 09 February 2011] [16:48:28] &lt;sustrik&gt;         void get_message (message_t <em>msg_)
| [Wednesday 09 February 2011] [16:48:30] &lt;sustrik&gt;         {
| [Wednesday 09 February 2011] [16:48:43] &lt;sustrik&gt;             zmq_msg_move (msg_, &amp;msg);
| [Wednesday 09 February 2011] [16:48:45] &lt;sustrik&gt;         }
| [Wednesday 09 February 2011] [16:48:46] &lt;sustrik&gt;     }
| [Wednesday 09 February 2011] [16:48:54] &lt;Guthur&gt;      oh ok, cheers
| [Wednesday 09 February 2011] [16:49:02] &lt;sustrik&gt;     :)
| [Wednesday 09 February 2011] [16:49:45] &lt;Guthur&gt;      I suppose I was wondering it there was any reason I should use it when moving a msg directly from one socket to another
| [Wednesday 09 February 2011] [16:50:38] &lt;sustrik&gt;     i don&#8217;t think so
| [Wednesday 09 February 2011] [16:50:59] &lt;sustrik&gt;     you can pass the original message directly
| [Wednesday 09 February 2011] [16:51:33] &lt;Guthur&gt;      is there any lag when closing the msg for reuse in a multi part msg
| [Wednesday 09 February 2011] [16:51:44] &lt;Guthur&gt;      I&#8217;m sort of wildly guessing now though
| [Wednesday 09 February 2011] [16:52:07] &lt;sustrik&gt;     ?
| [Wednesday 09 February 2011] [16:52:27] &lt;mikko&gt;       close should be fairly predictable operation
| [Wednesday 09 February 2011] [16:52:54] &lt;Guthur&gt;      Actual release of resources associated with the message object shall be postponed by MQ until all users of the message or underlying data buffer have indicated it is no longer required.
| [Wednesday 09 February 2011] [16:53:04] &lt;sustrik&gt;     yes
| [Wednesday 09 February 2011] [16:53:32] &lt;sustrik&gt;     the buffer is not deallocated until is it pushed to the network
| [Wednesday 09 February 2011] [16:53:55] &lt;Guthur&gt;      will that block close, or is it async
| [Wednesday 09 February 2011] [16:54:45] &lt;sustrik&gt;     it&#8217;s asyncv
| [Wednesday 09 February 2011] [16:55:11] &lt;sustrik&gt;     zmq_msg_t is not a message itself
| [Wednesday 09 February 2011] [16:55:17] &lt;sustrik&gt;     it&#8217;s just a pointer to message
| [Wednesday 09 February 2011] [16:55:26] &lt;sustrik&gt;     so what you close is the pointer
| [Wednesday 09 February 2011] [16:55:49] &lt;sustrik&gt;     the message itself may remain in the memory because it may be used from elsewhere
| [Wednesday 09 February 2011] [16:57:04] &lt;Guthur&gt;      ah yes, my thinking was getting a bit off there
| [Wednesday 09 February 2011] [17:04:47] &lt;sustrik&gt;     mikko: btw, any answer from ivan about the AIX build env?
| [Wednesday 09 February 2011] [17:05:22] &lt;mikko&gt;       sustrik: nope
| [Wednesday 09 February 2011] [17:05:30] &lt;mikko&gt;       sustrik: not sure how feasible it is behind a proxy
| [Wednesday 09 February 2011] [17:05:42] &lt;sustrik&gt;     understood
| [Wednesday 09 February 2011] [17:05:59] &lt;sustrik&gt;     i was just curious whether he replied
| [Wednesday 09 February 2011] [17:06:12] &lt;mikko&gt;       effectively they would need to hack around the proxy
| [Wednesday 09 February 2011] [17:06:39] &lt;mikko&gt;       it was very interesting offer as they have HP-UX and AIX
| [Wednesday 09 February 2011] [17:06:57] &lt;sustrik&gt;     yeah
| [Wednesday 09 February 2011] [17:07:36] &lt;sustrik&gt;     HP has a free programme to allow you to boot and use HP-UX boxes
| [Wednesday 09 February 2011] [17:07:42] &lt;sustrik&gt;     DSPP it is called
| [Wednesday 09 February 2011] [17:07:57] &lt;sustrik&gt;     not sure whether there&#8217;s a way to do it in regular intervals
| [Wednesday 09 February 2011] [17:09:15] &lt;Rich_Morin&gt;  I would love to try using ZeroMQ under SketchUp&#8217;s Ruby.  However, I have no idea how to make it work.  Any Rubyists around?
| [Wednesday 09 February 2011] [17:09:45] &lt;Rich_Morin&gt;  The Ruby version (1.8.6, with limited library support) doesn&#8217;t have sockets, but I&#8217;ve been able to construct a message-based protocol using EM, message files, and WebSockets.
| [Wednesday 09 February 2011] [17:10:13] &lt;mikko&gt;       Rich_Morin: cremes and andrewvc_ are ruby people
| [Wednesday 09 February 2011] [17:10:14] &lt;mikko&gt;       i think
| [Wednesday 09 February 2011] [17:10:24] &lt;andrewvc_&gt;   yeah
| [Wednesday 09 February 2011] [17:10:50] &lt;andrewvc_&gt;   1.8.7 doesn&#8217;t work right
| [Wednesday 09 February 2011] [17:10:58] &lt;andrewvc_&gt;   the threading model is broken from what I&#8217;ve heard
| [Wednesday 09 February 2011] [17:11:10] &lt;andrewvc_&gt;   I&#8217;ve tried it, it seems to work, then a couple seconds later acts all weird and crashy
| [Wednesday 09 February 2011] [17:11:26] &lt;Rich_Morin&gt;  Threading isn&#8217;t really an option, in any case. However, you can set up a periodic timer.
| [Wednesday 09 February 2011] [17:11:36] &lt;andrewvc_&gt;   well, even w/o threading 1.8.7 is weird
| [Wednesday 09 February 2011] [17:12:40] &lt;mikko&gt;       sustrik: The virtual systems offered span the HP portfolio. Available operating systems include HP-UX, OpenVMS, Microsoft Windows, Red Hat Enterprise Linux and Novell SuSE Linux.
| [Wednesday 09 February 2011] [17:12:57] &lt;andrewvc_&gt;   there&#8217;s a branch of rbzmq by method_missing, that&#8217;s called 1.8.7 threads. I haven&#8217;t tried it, not even sure if it&#8217;s considered usable by anyone
| [Wednesday 09 February 2011] [17:13:17] &lt;sustrik&gt;     mikko: yep, but i think you have to book the time upfront
| [Wednesday 09 February 2011] [17:13:31] &lt;sustrik&gt;     not sure whether you can book periodic uptime
| [Wednesday 09 February 2011] [17:14:21] &lt;mikko&gt;       i guess it wouldn&#8217;t hurt to ask if anyone has contacts there
| [Wednesday 09 February 2011] [17:14:30] &lt;mikko&gt;       mailing their customer support and asking might be a lost cause
| [Wednesday 09 February 2011] [17:14:45] &lt;sustrik&gt;     we have few friends at HP
| [Wednesday 09 February 2011] [17:15:00] &lt;sustrik&gt;     let me introduce you...
| [Wednesday 09 February 2011] [17:15:15] &lt;mikko&gt;       OpenVMS and HP-UX are both support iirc
| [Wednesday 09 February 2011] [17:15:21] &lt;mikko&gt;       by zeromq i mean
| [Wednesday 09 February 2011] [17:15:41] &lt;sustrik&gt;     yup, but getting hudson work on openvms may be tricky
| [Wednesday 09 February 2011] [17:15:41] &lt;Rich_Morin&gt;  andrewvc_: Does  ZeroMQ support a documented socket protocol?  IE, Can I use EM to proxy the messages via a socket?
| [Wednesday 09 February 2011] [17:15:58] &lt;sustrik&gt;     anyway, i introduce you to the guys doing openvms port
| [Wednesday 09 February 2011] [17:16:05] &lt;sustrik&gt;     they are both hp engineers
| [Wednesday 09 February 2011] [17:16:12] &lt;sustrik&gt;     wait a sec
| [Wednesday 09 February 2011] [17:19:42] &lt;sustrik&gt;     done
| [Wednesday 09 February 2011] [17:19:52] &lt;sustrik&gt;     Rich_Morin: check zmq_tcp(7)
| [Wednesday 09 February 2011] [17:20:27] &lt;Rich_Morin&gt;  tnx!
| [Wednesday 09 February 2011] [17:20:32] &lt;chris_st&gt;    Howdy &#8211; any XCode folks here?  I&#8217;d like to build in XCode, and use the Objective-C bindings, and am curious how to do it... never built a library in XCode before!
| [Wednesday 09 February 2011] [17:21:16] &lt;mikko&gt;       sustrik: thanks
| [Wednesday 09 February 2011] [17:22:04] &lt;Rich_Morin&gt;  chris_st: The Cocoa (etc) bindings are also available in MacRuby.
| [Wednesday 09 February 2011] [17:22:31] &lt;chris_st&gt;    Rich_Morin: Thanks!  That&#8217;s cool.  But I want to build an Obj-C program to use 0MQ.
| [Wednesday 09 February 2011] [17:22:53] &lt;Rich_Morin&gt;  np
| [Wednesday 09 February 2011] [17:23:39] &lt;drbobbeaty&gt;  chris_st: I think the best way is to look at the zmq.hpp file and see how they wrap the C calls into C++ objects. It&#8217;s a simple conversion to Ocj-C methods from there.
| [Wednesday 09 February 2011] [17:24:03] &lt;sustrik&gt;     there&#8217;s a objective C binding out there IIRC
| [Wednesday 09 February 2011] [17:24:12] &lt;chris_st&gt;    drbobbeaty: Thanks for the pointer &#8211; appreciated.  I&#8217;m going to try JeremyW&#8217;s code first, since I&#8217;m lazy :-)
| [Wednesday 09 February 2011] [17:34:21] &lt;sustrik&gt;     mikko: that was quick :)
| [Wednesday 09 February 2011] [17:41:50] &lt;mikko&gt;       sustrik: yeah
| [Wednesday 09 February 2011] [17:42:00] &lt;mikko&gt;       interesting to see what happens
| [Wednesday 09 February 2011] [17:42:07] &lt;mikko&gt;       now i gotta sleep, long day tomorrow
| [Wednesday 09 February 2011] [17:42:12] &lt;sustrik&gt;     cyl
| [Wednesday 09 February 2011] [17:42:13] &lt;mikko&gt;       good night
| [Wednesday 09 February 2011] [17:56:08] &lt;Rich_Morin&gt;  sustrik: https://github.com/chuckremes/zmqmachine looks like an interesting possibility. I already have an EM script that proxies between files ans WebSockets; it might be possible to mash my proxy up with zmqmachine.
| [Wednesday 09 February 2011] [18:01:52] &lt;cremes&gt;      Rich_Morin: you want to run your code on sketchup ruby, right? i&#8217;m not familiar with that... is it a &#8220;new&#8221; runtime from google?
| [Wednesday 09 February 2011] [18:02:47] &lt;Rich_Morin&gt;  No, it may actually predate Rails.  The Ruby version (1.8.6, with limited library support) doesn&#8217;t have sockets, but I&#8217;ve been able to construct a message-based protocol using EM, message files, and WebSockets.
| [Wednesday 09 February 2011] [18:03:06] &lt;Rich_Morin&gt;  &#8220;want&#8221; perhaps overstates the case :-)
| [Wednesday 09 February 2011] [18:03:33] &lt;cremes&gt;      oh, i see
| [Wednesday 09 February 2011] [18:04:01] &lt;cremes&gt;      well, zmqmachine is just a thin wrapper around the ffi-rzmq gem which itself is a thin wrapper around libzmq
| [Wednesday 09 February 2011] [18:04:23] &lt;cremes&gt;      i assume the sketchup runtime can load C extensions if you are playing with EM
| [Wednesday 09 February 2011] [18:04:53] &lt;cremes&gt;      andrewvc_ has been working on a companion gem to ffi-rzmq so that 0mq sockets can be used from EM
| [Wednesday 09 February 2011] [18:04:57] &lt;Rich_Morin&gt;  ouch.  Even if it&#8217;s possible, it would be nice to avoid.
| [Wednesday 09 February 2011] [18:05:11] &lt;cremes&gt;      what ouch?
| [Wednesday 09 February 2011] [18:06:17] &lt;Rich_Morin&gt;  SketchUp is used by modelers.  I&#8217;d like to keep things as lightweight as possible.
| [Wednesday 09 February 2011] [18:06:43] &lt;Rich_Morin&gt;  Thait said, I&#8217;m not ruling it out.
| [Wednesday 09 February 2011] [18:06:58] &lt;cremes&gt;      ok; then you&#8217;ll need to reimplement 0mq in pure ruby because the existing solutions just wrap the 0mq C lib
| [Wednesday 09 February 2011] [18:07:06] &lt;cremes&gt;      that&#8217;s a lot of work
| [Wednesday 09 February 2011] [18:07:44] &lt;Rich_Morin&gt;  Another possibility would be to hack my EM proxy to speak your socket-based protocol.  Any clues here?
| [Wednesday 09 February 2011] [18:08:10] &lt;Rich_Morin&gt;  The proxy runs under normal Ruby, BTW
| [Wednesday 09 February 2011] [18:10:51] &lt;cremes&gt;      sorry, no clues... the wire protocol in 0mq is documented but i have no particular insight on how to make it work in your situation
| [Wednesday 09 February 2011] [18:12:46] &lt;Rich_Morin&gt;  thanks, anyway
| [Wednesday 09 February 2011] [18:34:24] &lt;msch&gt;        hi, i&#8217;ve got a really strange bug. i&#8217;ve written a very simple zmq setup with PUSH/PULL, the PUSH code seems to work (it exists cleanly) while to PULL code just hangs in socket.recv. anyone care to take a look? https://gist.github.com/819576
| [Wednesday 09 February 2011] [18:35:33] &lt;Seta00&gt;      trying to link to zmq, gcc is giving me &#8220;/usr/lib/libzmq.so: could not read symbols: File in wrong format&#8221;
| [Wednesday 09 February 2011] [18:35:40] &lt;Seta00&gt;      and I&#8217;ve just built it
| [Wednesday 09 February 2011] [18:35:42] &lt;Seta00&gt;      everything goes fine
| [Wednesday 09 February 2011] [18:36:30] &lt;Seta00&gt;      oh
| [Wednesday 09 February 2011] [18:36:31] &lt;Seta00&gt;      -m 32
| [Wednesday 09 February 2011] [18:36:31] &lt;Seta00&gt;      damn
| [Wednesday 09 February 2011] [18:42:36] &lt;Seta00&gt;      er.. configure is asking me to use &#8211;target
| [Wednesday 09 February 2011] [18:42:40] &lt;Seta00&gt;      but &#8211;target i386 doesn&#8217;t work
| [Wednesday 09 February 2011] [18:42:51] &lt;Seta00&gt;      &#8211;target=i386 *</em>
| [Wednesday 09 February 2011] [19:07:43] &lt;Seta00&gt;      forgot to install g++-multilib
| [Wednesday 09 February 2011] [19:07:45] &lt;Seta00&gt;      :P
| [Thursday 10 February 2011] [02:37:56] &lt;suzan_shakya&gt; hi all, can anybody explain me why a single context should be used in a process ?
| [Thursday 10 February 2011] [02:42:17] &lt;Guthur&gt;       suzan_shakya, you can use multiple contexts in a process
| [Thursday 10 February 2011] [02:42:44] &lt;Guthur&gt;       with you want to use inproc transport the sockets need to be created by the same context though
| [Thursday 10 February 2011] [02:43:03] &lt;Guthur&gt;       with/if
| [Thursday 10 February 2011] [02:46:13] &lt;suzan_shakya&gt; Guthur: thanks
| [Thursday 10 February 2011] [02:46:58] &lt;guido_g&gt;      but is not the canonical way to have more then one context per process
| [Thursday 10 February 2011] [04:54:58] &lt;mikko&gt;        sustrik: <a class="reference external" href="http://build.valokuva.org/job/ZeroMQ2-core-master_mingw32-win7/79/console">http://build.valokuva.org/job/ZeroMQ2-core-master_mingw32-win7/79/console</a>
| [Thursday 10 February 2011] [04:55:04] &lt;mikko&gt;        started failing after reaper changes
| [Thursday 10 February 2011] [05:20:55] &lt;mikko&gt;        man you are fast pieter_hintjens
| [Thursday 10 February 2011] [05:21:08] &lt;pieter_hintjens&gt;      mikko: huh?
| [Thursday 10 February 2011] [05:21:23] &lt;mikko&gt;        pieter_hintjens: the &#8220;What happens when push socket is closed&#8221;
| [Thursday 10 February 2011] [05:21:32] &lt;pieterh&gt;      :-)
| [Thursday 10 February 2011] [05:21:36] &lt;mikko&gt;        i had barely read the message and already gmail indicated response from you
| [Thursday 10 February 2011] [05:22:02] &lt;pieterh&gt;      4 minutes is still pretty high latency
| [Thursday 10 February 2011] [05:22:19] &lt;pieterh&gt;      I need to find a way to get alerts on 0MQ list traffic...
| [Thursday 10 February 2011] [09:46:49] &lt;mikko&gt;        pieterh: <a class="reference external" href="https://build.valokuva.org/job/zfl-master_ZeroMQ2-master_mingw32/9/console">https://build.valokuva.org/job/zfl-master_ZeroMQ2-master_mingw32/9/console</a>
| [Thursday 10 February 2011] [09:46:54] &lt;mikko&gt;        zfl mingw32 running now
| [Thursday 10 February 2011] [09:47:13] &lt;pieterh&gt;      mikko, nice... there are still a few glitches but most of it builds
| [Thursday 10 February 2011] [09:48:07] &lt;mikko&gt;        fails
| [Thursday 10 February 2011] [10:02:34] &lt;pieterh&gt;      mikko: I&#8217;ve committed further fixes, send me a log of the errors and I&#8217;ll check them out
| [Thursday 10 February 2011] [10:05:15] &lt;mikko&gt;        pieterh: you should be able to init build on hudson
| [Thursday 10 February 2011] [10:05:20] &lt;mikko&gt;        if you still have your username and pass
| [Thursday 10 February 2011] [10:05:32] &lt;pieterh&gt;      mikko: I have too many pots boiling :-)
| [Thursday 10 February 2011] [10:06:42] &lt;mikko&gt;        <a class="reference external" href="https://gist.github.com/73dae202027903631905">https://gist.github.com/73dae202027903631905</a>
| [Thursday 10 February 2011] [10:06:51] &lt;mikko&gt;        looks like include issue
| [Thursday 10 February 2011] [10:07:01] &lt;mikko&gt;        path missing or something
| [Thursday 10 February 2011] [10:07:44] &lt;mikko&gt;        <a class="reference external" href="https://github.com/mkoppanen/zfl/commit/b54ea4c22956818f435ee085d01847bb5f6c9335">https://github.com/mkoppanen/zfl/commit/b54ea4c22956818f435ee085d01847bb5f6c9335</a>
| [Thursday 10 February 2011] [10:07:50] &lt;mikko&gt;        this is some old fix i did
| [Thursday 10 February 2011] [10:07:56] &lt;mikko&gt;        not sure how relevant that still is
| [Thursday 10 February 2011] [10:10:20] &lt;pieterh&gt;      ah... the errors from zfl_prelude.h are because that file thinks it&#8217;s building on a Unix box and is looking for Unix include files
| [Thursday 10 February 2011] [10:11:15] &lt;pieterh&gt;      I&#8217;ve not used ming32 for a really long time, so don&#8217;t recall what&#8217;s needed here
| [Thursday 10 February 2011] [10:11:16] &lt;mikko&gt;        not fully true
| [Thursday 10 February 2011] [10:11:26] &lt;mikko&gt;        you wouldn&#8217;t include using &#8216;&#8217; on unix ?
| [Thursday 10 February 2011] [10:11:38] &lt;pieterh&gt;      indeed
| [Thursday 10 February 2011] [10:11:41] &lt;pieterh&gt;      :-)
| [Thursday 10 February 2011] [10:11:50] &lt;mikko&gt;        zfl_prelude.h:255 is inside windows defs
| [Thursday 10 February 2011] [10:12:33] &lt;pieterh&gt;      it thinks it&#8217;s both __MSDOS__ and __UNIX__
| [Thursday 10 February 2011] [10:13:11] &lt;mikko&gt;        regarding the build issue on freebsd someone mailed about
| [Thursday 10 February 2011] [10:13:28] &lt;mikko&gt;        i think a switch in configure would be nice &#8220;&#8211;with-libzmq=&#8221; or so
| [Thursday 10 February 2011] [10:13:44] &lt;pieterh&gt;      well, zfl is by definition dependent on zmq
| [Thursday 10 February 2011] [10:13:45] &lt;mikko&gt;        that could use pkg-config to check the prefix and required flags
| [Thursday 10 February 2011] [10:14:17] &lt;mikko&gt;        it also currently depending on user to specify CFLAGS and LDFLAGS for non-standard location
| [Thursday 10 February 2011] [10:14:35] &lt;pieterh&gt;      right
| [Thursday 10 February 2011] [10:14:41]         * pieterh needs to get some food
| [Thursday 10 February 2011] [10:14:51] &lt;pieterh&gt;      mikko, i&#8217;m going to leave this to settle for a while and come back to it later
| [Thursday 10 February 2011] [10:14:55] &lt;mikko&gt;        &#8211;with-libzmq=/opt/i/installed/libzmq/here style
| [Thursday 10 February 2011] [10:14:56] &lt;mikko&gt;        ok
| [Thursday 10 February 2011] [10:14:57] &lt;pieterh&gt;      may install mingw32 if needed
| [Thursday 10 February 2011] [10:15:11] &lt;mikko&gt;        i can look into patching this
| [Thursday 10 February 2011] [10:15:16] &lt;pieterh&gt;      have gotten the thing to compile on MSVC and almost link successfully...
| [Thursday 10 February 2011] [10:15:19] &lt;mikko&gt;        i&#8217;ll send you a mail if i got time to look into it today
| [Thursday 10 February 2011] [10:15:32] &lt;pieterh&gt;      that earns me lunch, in any timezone :-)
| [Thursday 10 February 2011] [10:15:39] &lt;mikko&gt;        true
| [Thursday 10 February 2011] [10:15:56] &lt;pieterh&gt;      cyl
| [Thursday 10 February 2011] [10:16:01] &lt;mikko&gt;        later
| [Thursday 10 February 2011] [11:07:30] &lt;andrewvc&gt;     sustrik: If you&#8217;re around I have an strace that shows where that nbytes error is I believe
| [Thursday 10 February 2011] [11:07:36] &lt;andrewvc&gt;     <a class="reference external" href="https://gist.github.com/820779">https://gist.github.com/820779</a>
| [Thursday 10 February 2011] [11:07:50] &lt;andrewvc&gt;     basically, it looks like close is called on FD 22
| [Thursday 10 February 2011] [11:11:42] &lt;cremes&gt;       andrewvc: fyi, i found (and fixed) a bug in ffi-rzmq
| [Thursday 10 February 2011] [11:11:48] &lt;andrewvc&gt;     oh?
| [Thursday 10 February 2011] [11:12:14] &lt;cremes&gt;       sometimes when a recv failed with rc = -1, eagain is <em>false</em> but it was still acting like it was a successful read
| [Thursday 10 February 2011] [11:12:21] &lt;cremes&gt;       i&#8217;ll push the patch in a minute
| [Thursday 10 February 2011] [11:12:21] &lt;andrewvc&gt;     oh, good catch
| [Thursday 10 February 2011] [11:12:39] &lt;andrewvc&gt;     cool, I&#8217;ll test it, I wonder if that was related, it sounds like it could have been
| [Thursday 10 February 2011] [11:12:45] &lt;cremes&gt;       i need to do a code clean up... some of my logic is too hard to follow
| [Thursday 10 February 2011] [11:12:48] &lt;cremes&gt;       simpler is better
| [Thursday 10 February 2011] [11:13:12] &lt;andrewvc&gt;     agreed, but don&#8217;t bash your code, I&#8217;ve found it pretty clear ):
| [Thursday 10 February 2011] [11:13:15] &lt;andrewvc&gt;     :)
| [Thursday 10 February 2011] [11:14:53] &lt;cremes&gt;       andrewvc: you are too kind!
| [Thursday 10 February 2011] [11:14:55] &lt;cremes&gt;       ok, pushed
| [Thursday 10 February 2011] [11:15:04] &lt;andrewvc&gt;     cool, I&#8217;ve got my test suite all up already
| [Thursday 10 February 2011] [11:15:16] &lt;cremes&gt;       give it a try and see if it makes a difference
| [Thursday 10 February 2011] [11:15:33] &lt;cremes&gt;       btw, at the same time i found an error in zmqmachine related to the same thing
| [Thursday 10 February 2011] [11:15:35] &lt;cremes&gt;       i&#8217;ll push that too
| [Thursday 10 February 2011] [11:16:43] &lt;andrewvc&gt;     sadly, not related
| [Thursday 10 February 2011] [11:17:12] &lt;andrewvc&gt;     i mean, that patch didn&#8217;t fix this bug
| [Thursday 10 February 2011] [11:17:26] &lt;cremes&gt;       bummer
| [Thursday 10 February 2011] [11:17:39] &lt;cremes&gt;       it&#8217;s likely a 0mq flaw
| [Thursday 10 February 2011] [11:17:47] &lt;andrewvc&gt;     yeah, I was just about to post to the list
| [Thursday 10 February 2011] [11:17:59] &lt;cremes&gt;       do you have a gist you can share? i have an hour or so today where i can poke at this
| [Thursday 10 February 2011] [11:18:02] &lt;andrewvc&gt;     yep
| [Thursday 10 February 2011] [11:18:16] &lt;andrewvc&gt;     well, so this is interesting in and of itself I guess
| [Thursday 10 February 2011] [11:18:18] &lt;andrewvc&gt;     <a class="reference external" href="https://gist.github.com/820779">https://gist.github.com/820779</a>
| [Thursday 10 February 2011] [11:18:30] &lt;andrewvc&gt;     that&#8217;s an strace to start with, I&#8217;ll post the ruby code in a sec
| [Thursday 10 February 2011] [11:18:34] &lt;andrewvc&gt;     FD 22 is closed
| [Thursday 10 February 2011] [11:18:45] &lt;andrewvc&gt;     then recvfrom is called on it again later on
| [Thursday 10 February 2011] [11:19:17] &lt;andrewvc&gt;     I think that&#8217;s the bug, unless I&#8217;m missing something, I&#8217;m a little shaky on low level syscall semantics
| [Thursday 10 February 2011] [11:20:04] &lt;andrewvc&gt;     FD22 being a unix domain socket, but one that was opened internally, as the ZMQ sockets are all tcp
| [Thursday 10 February 2011] [11:20:34] &lt;andrewvc&gt;     lemme upload the ruby code actually, right now it needs RBX or 1.9.2 to run. I&#8217;m working on jruby support (kicking Thin out)
| [Thursday 10 February 2011] [11:20:41] &lt;cremes&gt;       i wonder if FD 22 has some special meaning? i don&#8217;t have a lot of knowledge about this lower level stuff
| [Thursday 10 February 2011] [11:20:53] &lt;cremes&gt;       cool, i use both
| [Thursday 10 February 2011] [11:21:06] &lt;mikko&gt;        no, it shouldn&#8217;t have
| [Thursday 10 February 2011] [11:22:38] &lt;andrewvc&gt;     It&#8217;s opened higher up with 116809 [pid 11284] socketpair(PF_FILE, SOCK_STREAM, 0, [21, 22]) = 0
| [Thursday 10 February 2011] [11:23:53] &lt;andrewvc&gt;     if you want to give the ruby code a shot cremes I can set you up pretty quick, lemme just push a couple things
| [Thursday 10 February 2011] [11:24:20] &lt;cremes&gt;       sure
| [Thursday 10 February 2011] [11:26:12] &lt;andrewvc&gt;     ok, so just a few things, you need either rbx or 1.9.2. then....
| [Thursday 10 February 2011] [11:26:22] &lt;andrewvc&gt;     gem install dripdrop
| [Thursday 10 February 2011] [11:26:49] &lt;andrewvc&gt;     then clone this somewhere git://github.com/andrewvc/socket-motor.git
| [Thursday 10 February 2011] [11:27:23] &lt;andrewvc&gt;     then, inside the socket-motor dir: ruby bin/socket-motor
| [Thursday 10 February 2011] [11:28:30] &lt;andrewvc&gt;     oh you also need: gem install sinatra haml
| [Thursday 10 February 2011] [11:28:59] &lt;andrewvc&gt;     inside socket-motor&#8217;s example dir, run ./run.sh
| [Thursday 10 February 2011] [11:29:28] &lt;andrewvc&gt;     finally visit localhost:3000 and try putting a message in the chat entry box and hitting send. that&#8217;ll cause the bin/socket-motor process to die
| [Thursday 10 February 2011] [11:29:33] &lt;andrewvc&gt;     phew
| [Thursday 10 February 2011] [11:29:51] &lt;andrewvc&gt;     yeah, I&#8217;ve been trying to communicate this via strace because the setup is a bit cumbersome
| [Thursday 10 February 2011] [11:34:25] &lt;cremes&gt;       needs hashie/mash too
| [Thursday 10 February 2011] [11:35:35] &lt;andrewvc&gt;     ah crap
| [Thursday 10 February 2011] [11:35:35] &lt;cremes&gt;       andrewvc: another require error, but this one doesn&#8217;t look like a gem
| [Thursday 10 February 2011] [11:35:37] &lt;cremes&gt;       &lt;internal:lib/rubygems/custom_require&gt;:29:in <cite>require&#8217;: no such file to load &#8211; socket-motor/messages/req_rep_message (LoadError)
| [Thursday 10 February 2011] [11:35:38] &lt;andrewvc&gt;     gem install hashie
| [Thursday 10 February 2011] [11:35:45] &lt;andrewvc&gt;     oh, forgot to check that in damnit
| [Thursday 10 February 2011] [11:36:36] &lt;andrewvc&gt;     wait, hmm it is there
| [Thursday 10 February 2011] [11:37:45] &lt;cremes&gt;       probably a path issue
| [Thursday 10 February 2011] [11:37:48] &lt;andrewvc&gt;     I&#8217;ve been running it with -I lib/ in the socket motor dir
| [Thursday 10 February 2011] [11:37:49] &lt;andrewvc&gt;     yeah
| [Thursday 10 February 2011] [11:38:28] &lt;andrewvc&gt;      this is bin/socket-motor yeah
| [Thursday 10 February 2011] [11:39:01] &lt;cremes&gt;       so, what&#8217;s the right command? ruby -l lib bin/socket-motor doesn&#8217;t work
| [Thursday 10 February 2011] [11:39:49] &lt;andrewvc&gt;     I start it with ruby -I lib/ bin/socket-motor
| [Thursday 10 February 2011] [11:39:59] &lt;cremes&gt;       ruby -I lib bin/socket-motor works (where -I is an &#8220;eye&#8221;)
| [Thursday 10 February 2011] [11:40:13] &lt;andrewvc&gt;     yep
| [Thursday 10 February 2011] [11:40:26] &lt;cremes&gt;       now i&#8217;m getting an in6_addr error (invalid address)
| [Thursday 10 February 2011] [11:40:33] &lt;cremes&gt;       do you have some addresses hard coded?
| [Thursday 10 February 2011] [11:40:40] &lt;cremes&gt;       or ipv6 stuff?
| [Thursday 10 February 2011] [11:40:53] &lt;andrewvc&gt;     nope
| [Thursday 10 February 2011] [11:41:06] &lt;andrewvc&gt;     I disabled it actually
| [Thursday 10 February 2011] [11:41:22] &lt;cremes&gt;       https://gist.github.com/820848
| [Thursday 10 February 2011] [11:41:52] &lt;cremes&gt;       i&#8217;m on osx... don&#8217;t know if that should matter
| [Thursday 10 February 2011] [11:41:58] &lt;andrewvc&gt;     oh, it uses resolv to do a hostname lookup, weird lemme disable that whole block
| [Thursday 10 February 2011] [11:42:08] &lt;andrewvc&gt;     right now it doesn&#8217;t do anything, it just looks for the first ipv4 addr
| [Thursday 10 February 2011] [11:42:31] &lt;andrewvc&gt;     for a given host
| [Thursday 10 February 2011] [11:43:18] &lt;andrewvc&gt;     prolly an OSX vs linux thing
| [Thursday 10 February 2011] [11:44:06] &lt;cremes&gt;       how can i disable it locally in your code?
| [Thursday 10 February 2011] [11:44:11] &lt;andrewvc&gt;     gem install dripdrop should fix it
| [Thursday 10 February 2011] [11:44:22] &lt;andrewvc&gt;     well hold on one sec
| [Thursday 10 February 2011] [11:44:26] &lt;andrewvc&gt;     pushing...
| [Thursday 10 February 2011] [11:44:31] &lt;cremes&gt;       heh
| [Thursday 10 February 2011] [11:44:39] &lt;andrewvc&gt;     ok pushed, dripdrop 0.9.6  should do it
| [Thursday 10 February 2011] [11:46:42] &lt;cremes&gt;       success
| [Thursday 10 February 2011] [11:46:45] &lt;andrewvc&gt;     nice!
| [Thursday 10 February 2011] [11:47:33] &lt;andrewvc&gt;     basically, this is a websocket &lt;-&gt; ZMQ &lt;-&gt; HTTP &lt;-&gt; Rack bridge
| [Thursday 10 February 2011] [11:47:34] &lt;cremes&gt;       andrewvc: new error:  https://gist.github.com/820863
| [Thursday 10 February 2011] [11:48:11] &lt;andrewvc&gt;     hmm, that&#8217;s a new one
| [Thursday 10 February 2011] [11:48:48] &lt;cremes&gt;       i&#8217;m looking at config.ru... do i need some /swf and /js dirs somewhere?
| [Thursday 10 February 2011] [11:48:59] &lt;andrewvc&gt;     yeah, they&#8217;re in public
| [Thursday 10 February 2011] [11:49:08] &lt;cremes&gt;       ah, so they are
| [Thursday 10 February 2011] [11:49:19] &lt;andrewvc&gt;     not sure about thin, hmmm
| [Thursday 10 February 2011] [11:49:34] &lt;cremes&gt;       is thin 1.2.7 the right one?
| [Thursday 10 February 2011] [11:50:02] &lt;andrewvc&gt;     oh, I just got it as well, it&#8217;s a 1.9.2 vs rbx issue hold on lemme pin it down
| [Thursday 10 February 2011] [11:51:01] &lt;andrewvc&gt;     ah, here we go
| [Thursday 10 February 2011] [11:51:02] &lt;andrewvc&gt;      thin -R config.ru start
| [Thursday 10 February 2011] [11:51:15] &lt;andrewvc&gt;     I was using old style syntax, apparently RBX doesn&#8217;t mind weirdly
| [Thursday 10 February 2011] [11:52:22] &lt;cremes&gt;       okay, i get the crash
| [Thursday 10 February 2011] [11:52:42] &lt;cremes&gt;       there are a *lot* of moving parts here... this is going to be tough
| [Thursday 10 February 2011] [11:53:01] &lt;andrewvc&gt;     yeah, that&#8217;s the thing
| [Thursday 10 February 2011] [11:53:10] &lt;cremes&gt;       do you also see the EM crash from run.sh?
| [Thursday 10 February 2011] [11:53:44] &lt;andrewvc&gt;     ohh yeah, now I do, this is the first time i&#8217;ve run it in 1.9.2 in a while, I guess rbx has been shielding me
| [Thursday 10 February 2011] [11:53:46] &lt;andrewvc&gt;     interesting
| [Thursday 10 February 2011] [11:54:01] &lt;cremes&gt;       i&#8217;m going to let you chase this a little bit more... :)
| [Thursday 10 February 2011] [11:54:05] &lt;andrewvc&gt;     yeah
| [Thursday 10 February 2011] [11:54:07] &lt;andrewvc&gt;     good find
| [Thursday 10 February 2011] [11:54:18] &lt;cremes&gt;       i find that i fix a *lot* of bugs by running my code across all 3 of the major runtimes
| [Thursday 10 February 2011] [11:54:20] &lt;andrewvc&gt;     i mean, if they&#8217;re synchronized, that opens up a whole new world
| [Thursday 10 February 2011] [11:54:29] &lt;cremes&gt;       some are more forgiving than others
| [Thursday 10 February 2011] [11:55:33] &lt;cremes&gt;       you might also try MRI 1.8.7p-&lt;whatever is latest&gt; just for giggles
| [Thursday 10 February 2011] [11:55:36] &lt;andrewvc&gt;     hehe
| [Thursday 10 February 2011] [11:55:43] &lt;andrewvc&gt;     yeah, well here&#8217;s the crazy thing, I&#8217;ve been  running socket-motor in rbx and 1.9.2
| [Thursday 10 February 2011] [11:55:50] &lt;andrewvc&gt;     just never thought to run the rack app in it
| [Thursday 10 February 2011] [11:55:51] &lt;cremes&gt;       i know the bindings don&#8217;t really have support for it, but it might shed some light
| [Thursday 10 February 2011] [11:56:01] &lt;cremes&gt;       heh
| [Thursday 10 February 2011] [11:56:15] &lt;andrewvc&gt;     I&#8217;m looking forward to jruby support in dripdrop, that&#8217;s around the corner, thin wasn&#8217;t a great choice
| [Thursday 10 February 2011] [11:56:35] &lt;andrewvc&gt;     thanks for shedding light on this though
| [Thursday 10 February 2011] [11:57:03] &lt;andrewvc&gt;     I guess I should still submit the strace zmq dev, prolly is a zmq bug, shouldn&#8217;t be possible anyway right?
| [Thursday 10 February 2011] [11:57:32] &lt;cremes&gt;       well, it depends
| [Thursday 10 February 2011] [11:57:59] &lt;cremes&gt;       is your rack app sending a 0mq packet in the right wire format?
| [Thursday 10 February 2011] [11:58:22] &lt;cremes&gt;       i.e. are you using a 0mq socket from rack or something else?
| [Thursday 10 February 2011] [11:58:39] &lt;andrewvc&gt;     nope, it doesn&#8217;t speak 0mq, it speaks http. Dripdrop lets you drop HTTP in for a req/rep
| [Thursday 10 February 2011] [11:58:55] &lt;andrewvc&gt;     so, I&#8217;m guessing EM is going crazy, and terminating strangely
| [Thursday 10 February 2011] [11:59:01] &lt;cremes&gt;       ok, then i don&#8217;t know
| [Thursday 10 February 2011] [11:59:44] &lt;cremes&gt;       don&#8217;t you just love bug hunts?
| [Thursday 10 February 2011] [11:59:46] &lt;andrewvc&gt;     yeah, well, the HTTP message gets turned into ZMQ xreq/xrep, then comes back as HTTP
| [Thursday 10 February 2011] [11:59:47] &lt;andrewvc&gt;     hah
| [Thursday 10 February 2011] [12:00:04] &lt;andrewvc&gt;     Ummm, I woke up at 4am yesterday with an idea to fix it, went back to sleep at 4:30. grumpy
| [Thursday 10 February 2011] [12:00:56] &lt;cremes&gt;       so funny... i was just telling my partner that i went to bed at midnight, laid awake for 2 hours and started coding again at 2 until 3
| [Thursday 10 February 2011] [12:01:01] &lt;cremes&gt;       i&#8217;m a bit grumpy today myself :)
| [Thursday 10 February 2011] [12:01:16] &lt;cremes&gt;       sometimes it&#8217;s impossible to turn off my brain
| [Thursday 10 February 2011] [12:01:23] &lt;andrewvc&gt;     lol
| [Thursday 10 February 2011] [12:01:26] &lt;andrewvc&gt;     same
| [Thursday 10 February 2011] [12:01:32] &lt;andrewvc&gt;     btw, apparently that error was unrelated
| [Thursday 10 February 2011] [12:02:13] &lt;andrewvc&gt;     I wasn&#8217;t handling an HTTP response, so EM died, handled it, now it lives  but zmq still dies, I&#8217;m gonna send this off to the list
| [Thursday 10 February 2011] [12:03:01] &lt;andrewvc&gt;     my hunch is there&#8217;s a bug in my app code, and EM is handling an exception strangely, and ZMQ is dying. I have no proof of this, but that&#8217;s my feeling
| [Thursday 10 February 2011] [12:04:55] &lt;cremes&gt;       andrewvc: any idea what line of code in dripdrop that this dies on?
| [Thursday 10 February 2011] [12:05:06] &lt;cremes&gt;       have you narrowed that piece down yet?
| [Thursday 10 February 2011] [12:05:10] &lt;andrewvc&gt;     I think that&#8217;s a red herring, I traced all the way through to ffi-rzmq
| [Thursday 10 February 2011] [12:05:24] &lt;andrewvc&gt;     to right before libzmq send
| [Thursday 10 February 2011] [12:05:38] &lt;andrewvc&gt;     but it&#8217;s dying trying to recv from a socket
| [Thursday 10 February 2011] [12:05:43] &lt;andrewvc&gt;     according to strace
| [Thursday 10 February 2011] [12:05:56] &lt;andrewvc&gt;     a tried changing up the message being sent, allocating a new one
| [Thursday 10 February 2011] [12:06:16] &lt;cremes&gt;       is the socket that it is sending on the same as the one libzmq is recv on?
| [Thursday 10 February 2011] [12:06:19] &lt;andrewvc&gt;     I tried checking ZMQ::EVENTS in a debugger right before the call as well, making sure it was writable
| [Thursday 10 February 2011] [12:06:24] &lt;andrewvc&gt;     nah, it&#8217;s a pub socket
| [Thursday 10 February 2011] [12:06:31] &lt;cremes&gt;       ok
| [Thursday 10 February 2011] [12:06:45] &lt;andrewvc&gt;     tcp vs inprocess vs ipc makes no diff either
| [Thursday 10 February 2011] [12:06:45] &lt;cremes&gt;       i bet this is some internal FD that the lib uses for talking amongst itself
| [Thursday 10 February 2011] [12:07:03] &lt;andrewvc&gt;     yeah, it uses a unix socket for that weird FD no matter which protocols I use
| [Thursday 10 February 2011] [12:07:32] &lt;cremes&gt;       you need to catch this in gdb
| [Thursday 10 February 2011] [12:08:06] &lt;cremes&gt;       run it like;  gdb &#8211;args ruby -I lib bin/socket-motor
| [Thursday 10 February 2011] [12:08:26] &lt;cremes&gt;       when it dies, you can print the zmq backtrace
| [Thursday 10 February 2011] [12:08:33]         * cremes goes to try this...
| [Thursday 10 February 2011] [12:08:51] &lt;andrewvc&gt;     awesome, I know nothing about GDB
| [Thursday 10 February 2011] [12:09:32] &lt;cremes&gt;       i know enough to be dangerous
| [Thursday 10 February 2011] [12:09:46] &lt;andrewvc&gt;     lol
| [Thursday 10 February 2011] [12:09:50] &lt;cremes&gt;       i have it in gdb... now i need sustrik or mato to tell me what they need to figure this out
| [Thursday 10 February 2011] [12:10:06] &lt;andrewvc&gt;     btw, I fixed the rack client
| [Thursday 10 February 2011] [12:10:28] &lt;cremes&gt;       https://gist.github.com/820902   the backtrace in gdb
| [Thursday 10 February 2011] [12:10:32] &lt;andrewvc&gt;     if you pull socket motor thin won&#8217;t keep dying
| [Thursday 10 February 2011] [12:11:12] &lt;cremes&gt;       it didn&#8217;t die when i caught the error in gdb
| [Thursday 10 February 2011] [12:11:28] &lt;andrewvc&gt;     that&#8217;s good and bad
| [Thursday 10 February 2011] [12:11:35] &lt;cremes&gt;       it died when i exited gdb though
| [Thursday 10 February 2011] [12:11:44] &lt;andrewvc&gt;     interesting
| [Thursday 10 February 2011] [12:12:07] &lt;andrewvc&gt;     zmq acts weird in general when you ctrl-C
| [Thursday 10 February 2011] [12:12:08] &lt;cremes&gt;       andrewvc: which line in ffi-rzmq does it execute before choking?
| [Thursday 10 February 2011] [12:12:18] &lt;andrewvc&gt;     lemme dig it up
| [Thursday 10 February 2011] [12:12:20] &lt;cremes&gt;       yeah, the new reaper thread stuff is supposed to solve that
| [Thursday 10 February 2011] [12:13:10] &lt;andrewvc&gt;     socket.rb line 260
| [Thursday 10 February 2011] [12:13:16] &lt;andrewvc&gt;     yeah, I just pulled this morning
| [Thursday 10 February 2011] [12:13:25] &lt;andrewvc&gt;     no luck there, as far as the new reaper stuff
| [Thursday 10 February 2011] [12:13:58] &lt;andrewvc&gt;     well, it used to die there
| [Thursday 10 February 2011] [12:14:00] &lt;andrewvc&gt;     maybe not anymore
| [Thursday 10 February 2011] [12:14:17] &lt;cremes&gt;       any flags?
| [Thursday 10 February 2011] [12:14:27] &lt;cremes&gt;       NOBLOCK?
| [Thursday 10 February 2011] [12:14:35] &lt;andrewvc&gt;     yeah, I tried messing with those as well, it&#8217;s a two part PUB messages, topic + body
| [Thursday 10 February 2011] [12:14:39] &lt;andrewvc&gt;     yeah, noblock
| [Thursday 10 February 2011] [12:14:46] &lt;cremes&gt;       ok, so NOBLOCK &amp; SNDMORE
| [Thursday 10 February 2011] [12:14:50] &lt;andrewvc&gt;     i tried it with no flags as well
| [Thursday 10 February 2011] [12:14:56] &lt;cremes&gt;       ok
| [Thursday 10 February 2011] [12:15:20] &lt;cremes&gt;       how are you constructing the message? is message.address valid?
| [Thursday 10 February 2011] [12:15:54] &lt;cremes&gt;       i.e. maybe there is garbage in the message and 0mq is choking on that somehow
| [Thursday 10 February 2011] [12:16:16] &lt;andrewvc&gt;     https://github.com/andrewvc/dripdrop/blob/master/lib/dripdrop/handlers/zeromq.rb#L44
| [Thursday 10 February 2011] [12:16:18] &lt;cremes&gt;       is the message freshly allocated with Message.new? or is it sourced from elsewhere?
| [Thursday 10 February 2011] [12:16:20] &lt;andrewvc&gt;     is how it&#8217;s constructed
| [Thursday 10 February 2011] [12:16:36] &lt;andrewvc&gt;     I tried firing up a debugger, allocating a new message, and sending that, right before it died
| [Thursday 10 February 2011] [12:16:50] &lt;andrewvc&gt;     so I used to be able to time it, like, it&#8217;d send 4 messages, and die on # 4
| [Thursday 10 February 2011] [12:17:05] &lt;andrewvc&gt;     so I stepped through the first 3, and inserted a new message right before zmq_send to test that out
| [Thursday 10 February 2011] [12:17:12] &lt;andrewvc&gt;     no luck there either
| [Thursday 10 February 2011] [12:17:15] &lt;cremes&gt;       are you sure this line is correct?
| [Thursday 10 February 2011] [12:17:16] &lt;cremes&gt;       https://github.com/andrewvc/dripdrop/blob/master/lib/dripdrop/handlers/zeromq.rb#L51
| [Thursday 10 February 2011] [12:17:32] &lt;cremes&gt;       generally you OR flags together, not add them
| [Thursday 10 February 2011] [12:18:02] &lt;cremes&gt;       e.g. flags = (i + 1 &lt; num_parts ? ZMQ::SNDMORE : 0) | ZMQ::NOBLOCK
| [Thursday 10 February 2011] [12:18:25] &lt;andrewvc&gt;     oye, crap good catch
| [Thursday 10 February 2011] [12:18:28] &lt;andrewvc&gt;     *pacepalm
| [Thursday 10 February 2011] [12:18:32] &lt;andrewvc&gt;     *face palm
| [Thursday 10 February 2011] [12:18:40] &lt;andrewvc&gt;     lemme try that
| [Thursday 10 February 2011] [12:18:58] &lt;cremes&gt;       still crashes
| [Thursday 10 February 2011] [12:20:04] &lt;andrewvc&gt;     yep
| [Thursday 10 February 2011] [12:20:28] &lt;andrewvc&gt;     I think this is in libzmq, I mean, it shouldn&#8217;t ever reach there anyway
| [Thursday 10 February 2011] [12:20:34] &lt;andrewvc&gt;     no matter how inept I am :)
| [Thursday 10 February 2011] [12:21:30] &lt;andrewvc&gt;     that socket is used for a remote logger, so it&#8217;s not critical to the app. If I disable it, it runs fairly well
| [Thursday 10 February 2011] [12:21:49] &lt;cremes&gt;       still looking...
| [Thursday 10 February 2011] [12:21:54] &lt;andrewvc&gt;     well, aside from all the other bugs in it, that I haven&#8217;t had time to deal with as I&#8217;ve tracked down this.
| [Thursday 10 February 2011] [12:22:04] &lt;andrewvc&gt;     brb
| [Thursday 10 February 2011] [12:26:56] &lt;cremes&gt;       andrewvc: found something
| [Thursday 10 February 2011] [12:30:45] &lt;cremes&gt;       andrewvc: nope, false alarm
| [Thursday 10 February 2011] [12:33:05] &lt;andrewvc&gt;     back
| [Thursday 10 February 2011] [12:33:31] &lt;andrewvc&gt;     the amount of time I&#8217;ve dumped into this is a bit ridiculous at this point, hopefully the mailing list will have an answer
| [Thursday 10 February 2011] [12:33:56] &lt;Rich_Morin&gt;   Zed Shaw gave a very nice talk last night at the Bay Area Python group, talking about how he used ZeroMQ on assorted projects.
| [Thursday 10 February 2011] [12:33:57] &lt;andrewvc&gt;     my last hope is finishing jruby dripdrop support
| [Thursday 10 February 2011] [12:34:08] &lt;andrewvc&gt;     and seeing if jruby gives a better error
| [Thursday 10 February 2011] [12:36:41] &lt;andrewvc&gt;     that, or running git bisect on libzmq on a lazy saturday
| [Thursday 10 February 2011] [12:37:29] &lt;andrewvc&gt;     course, I guess I need a known good rev for that
| [Thursday 10 February 2011] [12:40:27] &lt;alexbOrsova&gt;  im having an issue with zeromq on ubuntu 10.04.1. I downloaded the library for posix, did &#8221;./configure&#8221;, &#8220;make&#8221;, &#8220;sudo make install&#8221;. Then I complied one of the examples and tried to run it and I got &#8220;error while loading shared libraries: libzmq.so.0&#8221;
| [Thursday 10 February 2011] [12:40:49] &lt;alexbOrsova&gt;  any suggestions?
| [Thursday 10 February 2011] [12:42:24] &lt;alexbOrsova&gt;  nevermind, it was a bug in the makefile, &#8220;/sbin/ldconfig&#8221; should probably be called as part of the &#8220;make install&#8221; process...
| [Thursday 10 February 2011] [13:03:23] &lt;Rich_Morin&gt;   Hi, guys.  Should we try for a SUSS session this Sunday?
| [Thursday 10 February 2011] [13:03:46] &lt;mikko&gt;        what is a SUSS session ?
| [Thursday 10 February 2011] [13:05:01] &lt;Rich_Morin&gt;   Sorry, wrong channel :-/
| [Thursday 10 February 2011] [13:05:19] &lt;Rich_Morin&gt;   SketchUp Sunday Social
| [Thursday 10 February 2011] [14:11:00] &lt;bitweiler&gt;    is ZMQ_REQ  and ZMQ_REP still use in library or should one use ZMQ_PULL &amp; ZMQ_PUSH?
| [Thursday 10 February 2011] [14:17:16] &lt;Seta00&gt;       bitweiler, PUSH and PULL aren&#8217;t replacements to REQ and REP
| [Thursday 10 February 2011] [14:19:51] &lt;andrewvc&gt;     cremes: I think I figured it out
| [Thursday 10 February 2011] [14:20:27] &lt;andrewvc&gt;     thanks for all the help, I mean it&#8217;s still most likely a ZMQ bug I think, but it looks like ZMQ::EVENTS is the cause
| [Thursday 10 February 2011] [14:20:38] &lt;cremes&gt;       andrewvc: good deal
| [Thursday 10 February 2011] [14:20:53] &lt;andrewvc&gt;     so, thanks for GDB, that narrowed it down to getsockopt
| [Thursday 10 February 2011] [14:20:54] &lt;cremes&gt;       bitweiler: REQ/REP and PUSH/PULL are different kinds of sockets
| [Thursday 10 February 2011] [14:21:19] &lt;cremes&gt;       bitweiler: PUSH/PULL used to have different names that were deprecated; i forget what they were
| [Thursday 10 February 2011] [14:21:20] &lt;andrewvc&gt;     and ZMQ::EVENTS would get checked by my em-zeromq library, and it&#8217;d work for a while, then kaput
| [Thursday 10 February 2011] [14:21:39] &lt;cremes&gt;       andrewvc: race condition in getsockopt you think?
| [Thursday 10 February 2011] [14:21:52] &lt;andrewvc&gt;     I think what may be happening still is, ruby is generating some kind of exception but ZMQ is dying first.
| [Thursday 10 February 2011] [14:22:36] &lt;andrewvc&gt;     the ZMQ::EVENTS calls aren&#8217;t necessary strictly, as far as I can tell, commenting them out in em-zeromq just results in recv or send being called, and those can fail and be handled
| [Thursday 10 February 2011] [14:23:05] &lt;andrewvc&gt;     so, I can&#8217;t speak to it being a race condition, but that sounds right to me
| [Thursday 10 February 2011] [14:26:34] &lt;cremes&gt;       interesting
| [Thursday 10 February 2011] [14:26:41] &lt;cremes&gt;       you should post your observations to the ML
| [Thursday 10 February 2011] [14:26:54] &lt;andrewvc&gt;     I&#8217;m going to for sure
| [Thursday 10 February 2011] [14:29:08] &lt;andrewvc&gt;     if you have some time chuck: https://github.com/andrewvc/em-zeromq/blob/master/lib/em-zeromq/connection.rb
| [Thursday 10 February 2011] [14:29:27] &lt;andrewvc&gt;     I just removed the calls to ZMQ::EVENTS
| [Thursday 10 February 2011] [14:30:06] &lt;andrewvc&gt;     I mean, if I just attempt to send or recv and it fails, that works, I can see how it could be slower depending on the ZMQ internals, since those FDs are kind of blunt instruments
| [Thursday 10 February 2011] [14:30:19] &lt;andrewvc&gt;     could use a second pair of more experienced eyes
| [Thursday 10 February 2011] [14:31:37] &lt;cremes&gt;       looking...
| [Thursday 10 February 2011] [14:31:47]         * cremes finds it funny that my eyes are more experienced
| [Thursday 10 February 2011] [14:33:50] &lt;andrewvc&gt;     I think it may just be calling ZMQ::EVENTS on writable sockets
| [Thursday 10 February 2011] [14:34:13] &lt;andrewvc&gt;     it may even just be PUB sockets, since that&#8217;s what it is in this case, leaving ZMQ::EVENTS enabled for readables doesn&#8217;t trigger it
| [Thursday 10 February 2011] [14:34:45] &lt;andrewvc&gt;     though, this is obviously all new, and perhaps further testing will reveal problems there as well
| [Thursday 10 February 2011] [14:35:33] &lt;cremes&gt;       andrewvc: not sure about the purpose of #deregister_writable; it just sets a flag that isn&#8217;t used anywhere
| [Thursday 10 February 2011] [14:36:42] &lt;andrewvc&gt;     oh, that&#8217;s used by eventmachine
| [Thursday 10 February 2011] [14:36:54] &lt;andrewvc&gt;     so, it tells EM to regard or disregard activity on the FD
| [Thursday 10 February 2011] [14:37:06] &lt;andrewvc&gt;     yeah, it&#8217;s a bit funky looking, could use a comment
| [Thursday 10 February 2011] [14:37:26] &lt;andrewvc&gt;     same thing in notify_readable
| [Thursday 10 February 2011] [14:37:41] &lt;cremes&gt;       ok
| [Thursday 10 February 2011] [14:37:52] &lt;cremes&gt;       nothing major jumps out at me; looks good
| [Thursday 10 February 2011] [14:38:28] &lt;andrewvc&gt;     cool. Well, I&#8217;ve got to get back to other stuff, but I&#8217;ll be posting gdb traces and other goodness on the list tonight
| [Thursday 10 February 2011] [14:38:39] &lt;cremes&gt;       ok
| [Thursday 10 February 2011] [14:38:40] &lt;andrewvc&gt;     thanks a bunch, if you hadn&#8217;t brought out GDB I think I&#8217;d still be stuck
| [Thursday 10 February 2011] [14:38:57] &lt;sysgears&gt;     hi guys, i&#8217;m trying to extend zmq termination, so that messages at the receiving pipe were all fetched before ZMQ terminates
| [Thursday 10 February 2011] [14:38:57] &lt;cremes&gt;       it&#8217;s nice to have multiple tools in your toolbag
| [Thursday 10 February 2011] [14:39:13] &lt;cremes&gt;       sysgears: take a look at ZMQ_LINGER
| [Thursday 10 February 2011] [14:41:04] &lt;sysgears&gt;     cremes, what for? I&#8217;m trying to not loose any messages at receiver end, ZMQ_LINGER is to set TTL for messages, its a different thing I think
| [Thursday 10 February 2011] [14:43:08] &lt;cremes&gt;       ZMQ_LINGER prevents the socket from closing until it has flushed all messages OR until the timeout has expired
| [Thursday 10 February 2011] [14:43:12] &lt;cremes&gt;       there is no TTL in 0mq
| [Thursday 10 February 2011] [14:43:44] &lt;cremes&gt;       and it isn&#8217;t possible to not lose messages at receiver end unless you do an explicit ACK/reply
| [Thursday 10 February 2011] [14:43:49] &lt;cremes&gt;       for each message
| [Thursday 10 February 2011] [14:43:51] &lt;sysgears&gt;     Cremes, this is true for sending end
| [Thursday 10 February 2011] [14:44:13] &lt;sysgears&gt;     I know it is not possible now, thats why I&#8217;m patching ZMQ
| [Thursday 10 February 2011] [14:44:43] &lt;cremes&gt;       ok
| [Thursday 10 February 2011] [14:44:52] &lt;cremes&gt;       are you creating a new socket type?
| [Thursday 10 February 2011] [14:45:58] &lt;sysgears&gt;     nope, I want that recv fetched all the messages it has before it will return ETERM
| [Thursday 10 February 2011] [14:46:36] &lt;sysgears&gt;     currently it returns ETERM right after it detects ctx_terminated is on
| [Thursday 10 February 2011] [14:46:56] &lt;cremes&gt;       do you plan to make that a socket option?
| [Thursday 10 February 2011] [14:47:17] &lt;Seta00&gt;       I&#8217;m having difficulties to track down the reason I&#8217;m hitting this assertion: nbytes == sizeof (command_t) (mailbox.cpp:244)
| [Thursday 10 February 2011] [14:47:49] &lt;cremes&gt;       Seta00: what os?
| [Thursday 10 February 2011] [14:47:52] &lt;Seta00&gt;       Linux
| [Thursday 10 February 2011] [14:47:56] &lt;Seta00&gt;       Ubuntu 10.10
| [Thursday 10 February 2011] [14:48:32] &lt;cremes&gt;       you might want to look at modifying some sysctls; the command_t&#8217;s use some of those buffers for ipc/tcp/udp
| [Thursday 10 February 2011] [14:48:35] &lt;sysgears&gt;     I plan to extend zmq_term semantics - it will not only flush all messages to be sent before termination it will also recv all messages that are currently in its buffers before termination.
| [Thursday 10 February 2011] [14:48:47] &lt;cremes&gt;       search the ML for sysctl and see what comes up
| [Thursday 10 February 2011] [14:49:00] &lt;Seta00&gt;       the ML?
| [Thursday 10 February 2011] [14:49:05] &lt;cremes&gt;       mailing list
| [Thursday 10 February 2011] [14:49:07] &lt;Seta00&gt;       oh
| [Thursday 10 February 2011] [14:49:21]         * cremes likes acronyms that confuse people
| [Thursday 10 February 2011] [14:49:24] &lt;Seta00&gt;       lol
| [Thursday 10 February 2011] [14:49:33] &lt;Seta00&gt;       don&#8217;t use ANU&#8217;s
| [Thursday 10 February 2011] [14:49:42] &lt;Seta00&gt;       (Acronyms Nobody Understand)
| [Thursday 10 February 2011] [14:50:24] &lt;cremes&gt;       yessir
| [Thursday 10 February 2011] [14:51:01] &lt;andrewvc&gt;     ANU&#8217;s are fine so long as they&#8217;re TLA&#8217;s
| [Thursday 10 February 2011] [14:51:22] &lt;cremes&gt;       andrewvc: hey, get back to work!
| [Thursday 10 February 2011] [14:51:38] &lt;andrewvc&gt;     lol
| [Thursday 10 February 2011] [15:00:15] &lt;Guthur&gt;       i have the scenario where requests come in on individual threads the reply to each comes back async on other threads, my solution is to use 0MQ, is it overkill and normal thread constructs more suited?
| [Thursday 10 February 2011] [15:00:22] &lt;Seta00&gt;       tried this: http://www.mail-archive.com/zeromq-dev&#64;lists.zeromq.org/msg06901.html
| [Thursday 10 February 2011] [15:00:23] &lt;Seta00&gt;       didn&#8217;t work
| [Thursday 10 February 2011] [15:03:15] &lt;cremes&gt;       Guthur: that&#8217;s a great use-case for the inproc transport
| [Thursday 10 February 2011] [15:03:25] &lt;kaib&gt; hi all. are there any other native implementation of zeromq than the reference c++ implementation?
| [Thursday 10 February 2011] [15:03:49] &lt;cremes&gt;       kaib: not that i know of
| [Thursday 10 February 2011] [15:04:30] &lt;cremes&gt;       Seta00: hmm... are there are sysctl&#8217;s for ipc?
| [Thursday 10 February 2011] [15:04:55] &lt;cremes&gt;       i&#8217;m pretty sure the command mailboxes are using ipc or something similar internal to the library
| [Thursday 10 February 2011] [15:04:58] &lt;kaib&gt; are they actively discouraged or just haven&#8217;t happened yet? the protocol seems like a great little language interoperability system.
| [Thursday 10 February 2011] [15:05:00] &lt;cremes&gt;       (though i could definitely be wrong)
| [Thursday 10 February 2011] [15:05:16] &lt;cremes&gt;       kaib: no one has come along to take a whack at it yet; you could be the first
| [Thursday 10 February 2011] [15:05:35] &lt;cremes&gt;       i&#8217;ve never seen the imatix guys discourage anybody from hacking on the lib or attempting a port
| [Thursday 10 February 2011] [15:05:59] &lt;Guthur&gt;       cremes, that&#8217;s my thought as well
| [Thursday 10 February 2011] [15:06:31] &lt;Guthur&gt;       trying to convince the team lead at work is proofing a challenge
| [Thursday 10 February 2011] [15:06:57] &lt;Guthur&gt;       he seems to think normal threading constructs and a global store are an &#8216;easy&#8217; solution
| [Thursday 10 February 2011] [15:07:14] &lt;Guthur&gt;       it&#8217;s funny though, this easy solution still does work right yet
| [Thursday 10 February 2011] [15:07:18] &lt;cremes&gt;       well, one way to discuss it is in terms of future scalability
| [Thursday 10 February 2011] [15:07:29] &lt;Guthur&gt;       does/doesn&#8217;t
| [Thursday 10 February 2011] [15:07:34] &lt;cremes&gt;       what might be a thread today could easily be a separate process (or on a separate box) tomorrow
| [Thursday 10 February 2011] [15:07:49] &lt;cremes&gt;       and the only thing you need to change is the transport string:  inproc -&gt; tcp
| [Thursday 10 February 2011] [15:08:35] &lt;Guthur&gt;       yeah, the flexibility is a real seller for me personally
| [Thursday 10 February 2011] [15:08:43] &lt;Guthur&gt;       that and the whole message passing concept
| [Thursday 10 February 2011] [15:09:05] &lt;kaib&gt; cremes: so the transports add some framing, do the sockets add any framing of their own?
| [Thursday 10 February 2011] [15:09:17] &lt;Guthur&gt;       I just have to keep plugging a way at work to try and convince others
| [Thursday 10 February 2011] [15:09:19] &lt;kaib&gt; cremes: i&#8217;ve been trying to figure out the exact wire format.
| [Thursday 10 February 2011] [15:09:39] &lt;kaib&gt; Guthur: what is the problem you are trying to solve, i logged on just past your description..
| [Thursday 10 February 2011] [15:09:54] &lt;Guthur&gt;       kaib i have the scenario where requests come in on individual threads the reply to each comes back async on other threads, my solution is to use 0MQ, is it overkill and normal thread constructs more suited?
| [Thursday 10 February 2011] [15:11:16] &lt;kaib&gt; ok, so are the original threads that received the request the ones that transmit out the response?
| [Thursday 10 February 2011] [15:12:17] &lt;kaib&gt; Guthur: ie. Client -&gt; Thread0 -&gt; async backend -&gt; Thread1 -&gt; Thread0 -&gt; Client
| [Thursday 10 February 2011] [15:13:35] &lt;Seta00&gt;       hmm, it has something to do with the way I&#8217;m killing the socket on disconnect
| [Thursday 10 February 2011] [15:17:08] &lt;Guthur&gt;       sorry i disco&#8217;d
| [Thursday 10 February 2011] [15:17:17] &lt;Guthur&gt;       kaib yeah that&#8217;s the scenario
| [Thursday 10 February 2011] [15:17:26] &lt;Guthur&gt;       multiple client requests as well
| [Thursday 10 February 2011] [15:17:39] &lt;Guthur&gt;       concurrent requests
| [Thursday 10 February 2011] [15:17:47] &lt;cremes&gt;       kaib: wire format documented here:  http://api.zeromq.org/zmq_tcp.html
| [Thursday 10 February 2011] [15:18:27] &lt;Guthur&gt;       I actually have it solved with ZMQ
| [Thursday 10 February 2011] [15:18:58] &lt;Guthur&gt;       but just can&#8217;t get the buy in from my team lead to include the dependency
| [Thursday 10 February 2011] [15:19:05] &lt;Guthur&gt;       very frustrating
| [Thursday 10 February 2011] [15:19:07] &lt;cremes&gt;       Guthur: show your team lead how you can now break it up into multiple processes without changing any of the message queueing code
| [Thursday 10 February 2011] [15:19:17] &lt;cremes&gt;       that&#8217;s a pretty big win in my opinion
| [Thursday 10 February 2011] [15:19:59] &lt;kaib&gt; cremes: that&#8217;s the wire protocol for tcp, i&#8217;m reading the code and it seems like there is some other framing going on as well. there is talk about &#8220;data batches&#8221;
| [Thursday 10 February 2011] [15:20:34] &lt;cremes&gt;       kaib: not sure then; i haven&#8217;t heard the term &#8220;data batches&#8221; come up before
| [Thursday 10 February 2011] [15:23:40] &lt;kaib&gt; Guthur: when you fire off the request to the async backend do you have any chance of deciding which thread gets the response? or even which pool of threads?
| [Thursday 10 February 2011] [15:24:26] &lt;Guthur&gt;       kaib:nope its pretty opaque, the scenario is a request to a process running a quickFIX app
| [Thursday 10 February 2011] [15:24:58] &lt;Guthur&gt;       the requesting thread send off a, QuoteRequest FIX message, this will then return a Quote async on another thread
| [Thursday 10 February 2011] [15:27:24] &lt;kaib&gt; Guthur: ok, your team lead might be trying to avoid extra dependencies on external projects... ie. if you guys can get it to work with a simpler approach you will be good for a while.
| [Thursday 10 February 2011] [15:27:57] &lt;cremes&gt;       s/simpler/more familiar/
| [Thursday 10 February 2011] [15:28:19] &lt;kaib&gt; Guthur: i would benchmark your implementation. that gives you data to go on when the discussion resurfaces later..
| [Thursday 10 February 2011] [15:28:39] &lt;kaib&gt; cremes: that&#8217;s true. much can be said for believing in the familiar.. :-)
| [Thursday 10 February 2011] [15:28:55] &lt;cremes&gt;       kaib: don&#8217;t i know it! :)
| [Thursday 10 February 2011] [15:29:08] &lt;kaib&gt; cremes: in zmq_encoder.cpp, talking about batches.
| [Thursday 10 February 2011] [15:29:47] &lt;cremes&gt;       kaib: you need to chat with sustrik (primary dev) or drop a note to the mailing list
| [Thursday 10 February 2011] [15:30:06] &lt;cremes&gt;       i only dig into the internals when i have a showstopper bug
| [Thursday 10 February 2011] [15:30:12] &lt;kaib&gt; cremes: thanks.
| [Thursday 10 February 2011] [15:30:16] &lt;cremes&gt;       so far, i have somehow avoided the encoder stuff
| [Thursday 10 February 2011] [15:30:19] &lt;kaib&gt; sustrik: ping?
| [Thursday 10 February 2011] [15:30:22] &lt;cremes&gt;       you are welcome
| [Thursday 10 February 2011] [15:30:50] &lt;cremes&gt;       kaib: i think most of the devs are GMT+3
| [Thursday 10 February 2011] [15:30:59] &lt;Guthur&gt;       I think it is telling how no one has actually implemented the a solution using the &#8216;easy&#8217; global data approach
| [Thursday 10 February 2011] [15:32:12] &lt;kaib&gt; Guthur: heh.. well, you need to come well armed. working code and good political connections go a long way. :-)
| [Thursday 10 February 2011] [15:32:41] &lt;kaib&gt; cremes: oh, well i&#8217;m gmt+2, they seem to drop off awfully early.. :-)
| [Thursday 10 February 2011] [15:32:45] &lt;Guthur&gt;       well I have the first,
| [Thursday 10 February 2011] [15:33:15] &lt;Guthur&gt;       The half working solution they currently have takes the same time to do one quote as mine does to 60
| [Thursday 10 February 2011] [15:33:21] &lt;Guthur&gt;       to do 60*
| [Thursday 10 February 2011] [15:34:05] &lt;Guthur&gt;       That performance measurement has only became available to me this evening
| [Thursday 10 February 2011] [15:34:51] &lt;Guthur&gt;       though they are using HTTP for the remoting
| [Thursday 10 February 2011] [15:35:01] &lt;Guthur&gt;       so it will improve some when they can move a fast protocol
| [Thursday 10 February 2011] [15:35:04] &lt;Guthur&gt;       faster*
| [Thursday 10 February 2011] [15:36:20] &lt;Guthur&gt;       though it will need to be considerably faster than that, 5 secs per quote is just not going to cut it at all
| [Thursday 10 February 2011] [15:43:10] &lt;cremes&gt;       Guthur: i do *way* faster than that in *ruby*
| [Thursday 10 February 2011] [16:21:43] &lt;chmod700&gt;     so I just grabbed 0mq+python bindings for v2.0.10 and am trying to get https://github.com/imatix/zguide/blob/master/examples/Python/mtserver.py to work, can someone tell me what I should be sending to get the &#8220;World&#8221; response back?
| [Thursday 10 February 2011] [16:24:10] &lt;chmod700&gt;     all I see on my connection to port 5555 is &#8216;x01x00&#8217;
| [Thursday 10 February 2011] [16:25:58] &lt;ianbarber&gt;    are you connecting with 0mq?
| [Thursday 10 February 2011] [16:26:14] &lt;ianbarber&gt;    on both sides
| [Thursday 10 February 2011] [16:28:43] &lt;chmod700&gt;     ianbarber: no I was just using telnet to connect
| [Thursday 10 February 2011] [16:29:42] &lt;chmod700&gt;     I guess I missed something in the docs :), how does one go about layering their wire-format stuff on top of that XREP device?
| [Thursday 10 February 2011] [16:30:53] &lt;ianbarber&gt;    0mq pretty much does all the wire level stuff, you send your own format in the messages
| [Thursday 10 February 2011] [16:31:07] &lt;ianbarber&gt;    its very little overhead
| [Thursday 10 February 2011] [16:32:03] &lt;chmod700&gt;     ianbarber: so why doesn&#8217;t telnet work (or wget, or a browser) when hitting the XREP port?
| [Thursday 10 February 2011] [17:11:05] &lt;ianbarber&gt;    there is still a wire protocol, so you need to be able to understand that
| [Thursday 10 February 2011] [17:11:17] &lt;ianbarber&gt;    in general zmq is designed for people using the library at both ends
| [Thursday 10 February 2011] [17:14:51] &lt;chmod700&gt;     ianbarber: thanks, so for HTTP for instance, do I need to stand up my own HTTP server and then forward requests through a zmq socket to workers?
| [Thursday 10 February 2011] [17:15:06] &lt;chmod700&gt;     or is there some magic http zmq device?
| [Thursday 10 February 2011] [17:15:57] &lt;Skaag&gt;        the first.
| [Thursday 10 February 2011] [17:16:11] &lt;Skaag&gt;        there is no direct relation between http and zmq
| [Thursday 10 February 2011] [17:16:48] &lt;Skaag&gt;        if with java, you can use something like jetty to expose some kind of rest/json/xml interface, then pass the messages to a thread that publishes messages
| [Thursday 10 February 2011] [17:18:49] &lt;Guthur&gt;       are select_t, poll_t, epoll_t, devpoll_t and kqueue_t all essentially doing the same thing except with different raw connections
| [Thursday 10 February 2011] [17:19:44] &lt;ianbarber&gt;    chmod700: mongrel2 is quite good for doing a webserver with 0MQ transport to the backend
| [Thursday 10 February 2011] [17:19:57] &lt;ianbarber&gt;    but in general, yeah, that&#8217;s the kind of thing
| [Thursday 10 February 2011] [17:21:13] &lt;Skaag&gt;        ianbarber: any samples of such a setup with mongrel2?
| [Thursday 10 February 2011] [17:21:23] &lt;Skaag&gt;        would love to play around with it
| [Thursday 10 February 2011] [17:21:46] &lt;ianbarber&gt;    Skaag: look at the mongrel2 book, 0MQ is the only way you can do dynamic content with it
| [Thursday 10 February 2011] [17:22:08] &lt;Skaag&gt;        they have that as a sample? :)
| [Thursday 10 February 2011] [17:22:18] &lt;ianbarber&gt;    basically it binds a push socket, and sends the headers, path, and some other bits and pieces over it
| [Thursday 10 February 2011] [17:22:34] &lt;ianbarber&gt;    yeah, download mongrel2 and look in the examples dir
| [Thursday 10 February 2011] [17:23:28] &lt;Skaag&gt;        awesome
| [Thursday 10 February 2011] [17:23:31] &lt;Skaag&gt;        will do that now
| [Thursday 10 February 2011] [17:24:15] &lt;ianbarber&gt;    if you just need one way comms, take a look at mikko&#8217;s httpush https://github.com/mkoppanen/httpush
| [Thursday 10 February 2011] [17:24:29] &lt;ianbarber&gt;    that&#8217;s great if you want to do network logging over http or similar
| [Thursday 10 February 2011] [17:41:27] &lt;Skaag&gt;        that&#8217;s one way, towards the client side, I assume?
| [Thursday 10 February 2011] [17:42:16] &lt;Skaag&gt;        damn -17 outside... not daring to go out.
| [Thursday 10 February 2011] [17:42:24] &lt;Skaag&gt;        celcius.
| [Thursday 10 February 2011] [18:58:45] &lt;eut&gt;  hello
| [Thursday 10 February 2011] [18:59:46] &lt;eut&gt;  when using zmq_xrep sockets how are the three message pieces (identity, delimiter, and body) supposed to be separated?
| [Thursday 10 February 2011] [19:06:04] &lt;cremes&gt;       eut: http://www.zeromq.org/tutorials:xreq-and-xrep
| [Thursday 10 February 2011] [19:06:07] &lt;cremes&gt;       that might help
| [Thursday 10 February 2011] [19:08:16] &lt;eut&gt;  great :]
| [Thursday 10 February 2011] [23:47:00] &lt;gui81&gt;        anyone here
| [Thursday 10 February 2011] [23:47:38] &lt;gui81&gt;        this is my first time joining an irc chat, is this working
| [Thursday 10 February 2011] [23:57:49] &lt;gui81&gt;        has anyone solved the async client problem, or does anyone have an example using zmq_poll
| [Thursday 10 February 2011] [23:58:26] &lt;gui81&gt;        Matt talks about this issue in the comments section on http://www.zeromq.org/blog:multithreaded-server
| [Friday 11 February 2011] [00:01:03] &lt;gui81&gt;  another question I have is whether or not it is possible to publish and subscribe on the same port number, I have tried a simple example, that compiled just fine, but it locked up my computer and I had to reboot
| [Friday 11 February 2011] [00:04:18] &lt;gui81&gt;  the multithreaded server example in the link above requires that you send, receive, send, receive, etc..., but I want to be able to send a message and maybe send a few more messages before a response is actually received.  This is so that I don&#8217;t have to wait on a request that could take a potentially long time
| [Friday 11 February 2011] [00:07:14] &lt;gui81&gt;  I could use pub/sub and rethink how I handle messages, but I was hoping I could do this over the same port
| [Friday 11 February 2011] [00:10:20] &lt;guido_g&gt;        publisher and subscriber should of course use the same port, otherwise they couldn&#8217;t talk to each other
| [Friday 11 February 2011] [00:11:34] &lt;gui81&gt;  I&#8217;m saying that I want a single process to both publish and subscribe like the following:
| [Friday 11 February 2011] [00:12:03] &lt;gui81&gt;  zmq::socket_t publisher(context, ZMQ_PUB);
| [Friday 11 February 2011] [00:12:03] &lt;guido_g&gt;        doesn&#8217;t matter
| [Friday 11 February 2011] [00:12:33] &lt;guido_g&gt;        publisher sends things out and subscriber needs to get the information
| [Friday 11 February 2011] [00:12:57] &lt;guido_g&gt;        so both need to share a communication path
| [Friday 11 February 2011] [00:13:02] &lt;gui81&gt;  publisher.bind(&#8220;tcp://*:5563&#8221;);
| [Friday 11 February 2011] [00:13:02] &lt;gui81&gt;  zmq::socket_t subscriber(context, ZMQ_SUB);subscriber.connect(&#8220;tcp://localhost:5564&#8221;);
| [Friday 11 February 2011] [00:13:22] &lt;guido_g&gt;        wouldn&#8217;t work
| [Friday 11 February 2011] [00:13:26] &lt;gui81&gt;  sorry, let me try that again
| [Friday 11 February 2011] [00:13:45] &lt;guido_g&gt;        did you ever to network stuff befeore?
| [Friday 11 February 2011] [00:13:52] &lt;guido_g&gt;        s/to/do/
| [Friday 11 February 2011] [00:14:11] &lt;gui81&gt;  zmq::context_t context(1);
| [Friday 11 February 2011] [00:14:12] &lt;gui81&gt;      zmq::socket_t publisher(context, ZMQ_PUB);
| [Friday 11 February 2011] [00:14:12] &lt;gui81&gt;      publisher.bind(&#8220;tcp://*:5563&#8221;);
| [Friday 11 February 2011] [00:14:12] &lt;gui81&gt;          // don&#8217;t do this on the same port as above, will have to reboot computer
| [Friday 11 February 2011] [00:14:12] &lt;gui81&gt;          zmq::socket_t subscriber(context, ZMQ_SUB);
| [Friday 11 February 2011] [00:14:13] &lt;gui81&gt;          subscriber.connect(&#8220;tcp://localhost:5563&#8221;);
| [Friday 11 February 2011] [00:14:13] &lt;gui81&gt;          subscriber.setsockopt( ZMQ_SUBSCRIBE, &#8220;C&#8221;, 1);
| [Friday 11 February 2011] [00:15:03] &lt;guido_g&gt;        i don&#8217;t know your computer and what you&#8217;ve done elsewhere, but the principle is right
| [Friday 11 February 2011] [00:15:59] &lt;guido_g&gt;        and for code please use a pastbin like https://gist.github.com/ or http://paste.pocoo.org/
| [Friday 11 February 2011] [00:17:22] &lt;guido_g&gt;        next thing: if you have trouble w/ something, write a minimal example that shows the problem and show the complete code and describe the expeceted vs. the observed behaviour
| [Friday 11 February 2011] [00:18:03] &lt;gui81&gt;  are you suggesting i post my code on a website?
| [Friday 11 February 2011] [00:18:20] &lt;guido_g&gt;        yes
| [Friday 11 February 2011] [00:28:16] &lt;gui81&gt;  guido_g, I think I figured out what I was doing wrong with my pub/sub stuff.  looks like I was trying to bind on both sides.  Turns out this compiled just fine, but after running it, it would lock up.  I even had to reboot, kill -9 wasn&#8217;t working.  I am running on a Mac.  When I switched to only using one bind with multiple connects, things started working.
| [Friday 11 February 2011] [00:30:38] &lt;gui81&gt;  does anyone have any examples on an async client like what is suggested on http://www.zeromq.org/blog:multithreaded-server by Matt in the comments section
| [Friday 11 February 2011] [00:31:17] &lt;guido_g&gt;        did you read the guide?
| [Friday 11 February 2011] [00:31:39] &lt;gui81&gt;  yes
| [Friday 11 February 2011] [00:33:49] &lt;gui81&gt;  using req/rep it looks like you always have to send, receive, send, receive.  If I want to send, send, receive, send, receive, recieve   how would I do it, are there examples out there
| [Friday 11 February 2011] [00:34:35] &lt;guido_g&gt;        use xreq/xrep sockets
| [Friday 11 February 2011] [00:40:17] &lt;gui81&gt;  do you know of an example showing how to use xreq/xrep for something similar to the scenario i mentioned?  all of the examples in the guide look like they are used when kicking off worker threads
| [Friday 11 February 2011] [00:41:43] &lt;guido_g&gt;        frankly, i don&#8217;t know what you intend
| [Friday 11 February 2011] [00:42:35] &lt;guido_g&gt;        if you have threads just let them talk via xreq/xrep
| [Friday 11 February 2011] [00:44:44] &lt;gui81&gt;  I would like to be able to do something similar to: s.send (request, callback);  where the sending thread won&#8217;t be blocked and the application can send more requests.  then the callback is invoked whenever a reply is received for that request
| [Friday 11 February 2011] [00:45:45] &lt;guido_g&gt;        a) MQ doesn&#8217;t do callbacks, you should have discovered that by now
| [Friday 11 February 2011] [00:46:42] &lt;guido_g&gt;        b) go read the XREQ/XREP docs again, there is no need for waiting or blocking
| [Friday 11 February 2011] [00:47:25] &lt;gui81&gt;  I understand they don&#8217;t do callbacks, but if I can build a wrapper that would function similar to the callback, then that would work for me.  if this is possible with xreq/xrep then I will try to look further into this type of socket.  I admit that I don&#8217;t know much about zeromq since I just started reading the guide today.  Thanks for the help.
| [Friday 11 February 2011] [00:48:39] &lt;guido_g&gt;        then finish reading the guide and the docs, will make a lot of things much clearer
| [Friday 11 February 2011] [00:49:13] &lt;jugg&gt;   I&#8217;ve had a system running for a couple of weeks, with zeromq built off of commit: 56bdba - and I just had the following assertion occur while running another round of stress tests: &#8220;Assertion failed: inpipes [current_in].active (xrep.cpp:229)&#8221;   Can that assert occur because of usage error, or why?
| [Friday 11 February 2011] [00:49:14] &lt;guido_g&gt;        ahh... and don&#8217;t expect cookbook like examples suited for your use-cases
| [Friday 11 February 2011] [00:53:33] &lt;jugg&gt;   irc logs show another instance of this assertion at http://travlr.github.com/zmqirclog/2010-November.html
| [Friday 11 February 2011] [01:10:44] &lt;bitweiler&gt;      i notice in the zeromq-FAQ that it doesn&#8217;t provide protocol buffering; what is the purpose of such said buffering?
| [Friday 11 February 2011] [01:14:34] &lt;guido_g&gt;        which faq item you&#8217;re reffering to?
| [Friday 11 February 2011] [01:16:12] &lt;guido_g&gt;        s/reffering/referring/
| [Friday 11 February 2011] [01:16:19] &lt;guido_g&gt;        need more coffee
| [Friday 11 February 2011] [01:16:49] &lt;bitweiler&gt;      sorry, i meant serializing data to/from the wire representation
| [Friday 11 February 2011] [01:17:14] &lt;bitweiler&gt;      guido_g: this FAQ: http://www.zeromq.org/area:faq
| [Friday 11 February 2011] [01:18:29] &lt;bitweiler&gt;      Does MQ include APIs for serializing data to/from the wire representation? what is the purpose of such serializing?
| [Friday 11 February 2011] [01:19:26] &lt;guido_g&gt;        as stated, there is no such api in mq
| [Friday 11 February 2011] [01:20:07] &lt;guido_g&gt;        and serialization in the context of messaging means to convert a data strcuture into/from a byte stream for transfer
| [Friday 11 February 2011] [01:23:17] &lt;guido_g&gt;        bitweiler: hope that answers your question
| [Friday 11 February 2011] [01:24:23] &lt;bitweiler&gt;      yes, thanks
| [Friday 11 February 2011] [01:24:54] &lt;guido_g&gt;        great, i gotta run now... :)
| [Friday 11 February 2011] [01:25:05]   * bitweiler waves at guido_g
| [Friday 11 February 2011] [02:02:13] Notice   -NickServ- This nickname is registered. Please choose a different nickname, or identify via /msg NickServ identify &lt;password&gt;.
| [Friday 11 February 2011] [02:02:13] Notice   -NickServ- You are now identified for travlr.
| [Friday 11 February 2011] [02:30:55] &lt;Guthur&gt; sustrik, ping
| [Friday 11 February 2011] [03:24:54] &lt;bitweiler&gt;      quick question, in the wuserver.c example from the guide what&#8217;s the purpose of the within statement?
| [Friday 11 February 2011] [03:30:35] &lt;sustrik&gt;        morning
| [Friday 11 February 2011] [03:30:55] &lt;bitweiler&gt;      good day sustrik
| [Friday 11 February 2011] [04:31:17] &lt;pieterh&gt;        bitweiler: it produces a random number between 0 and N
| [Friday 11 February 2011] [04:31:45] &lt;pieterh&gt;        sorry that it&#8217;s a bit cryptic, I&#8217;ll change that
| [Friday 11 February 2011] [05:01:04] &lt;sustrik&gt;        pieterh: seems like there&#8217;s something wrong with the mailing list
| [Friday 11 February 2011] [05:01:19] &lt;sustrik&gt;        i&#8217;ve sent a message there 5 mins ago
| [Friday 11 February 2011] [05:01:37] &lt;sustrik&gt;        and it&#8217;s still not there
| [Friday 11 February 2011] [05:05:05] &lt;mikko&gt;  good morning
| [Friday 11 February 2011] [05:31:50] &lt;sustrik&gt;        kaib: pong
| [Friday 11 February 2011] [05:32:11] &lt;sustrik&gt;        Guthur: pong
| [Friday 11 February 2011] [05:36:21] &lt;kaib&gt;   sustrik: hi there
| [Friday 11 February 2011] [05:36:51] &lt;kaib&gt;   sustrik: i&#8217;m toying around with a freshly written 0mq protocol stack and was looking into how the wire protocol works.
| [Friday 11 February 2011] [05:37:38] &lt;kaib&gt;   sustrik: my aim is to write a prototype to see if a messaging based solution could be a good replacement for rpc in our system.
| [Friday 11 February 2011] [05:37:59] &lt;sustrik&gt;        kaib: speaking of 0mq over TCP?
| [Friday 11 February 2011] [05:38:01] &lt;kaib&gt;   sustrik: being wire compatible with 0mq seems like a good idea
| [Friday 11 February 2011] [05:38:14] &lt;kaib&gt;   sustrik: TCP initially, maybe UDP and other protocols later.
| [Friday 11 February 2011] [05:38:33] &lt;sustrik&gt;        there&#8217;s no UDP transport for 0MQ so far...
| [Friday 11 February 2011] [05:38:40] &lt;sustrik&gt;        just PGM multicast
| [Friday 11 February 2011] [05:38:42] &lt;sustrik&gt;        anyway
| [Friday 11 February 2011] [05:38:48] &lt;sustrik&gt;        see zmq_tcp(7) man page
| [Friday 11 February 2011] [05:38:58] &lt;sustrik&gt;        there&#8217;s 0mq framing described
| [Friday 11 February 2011] [05:39:02] &lt;kaib&gt;   sustrik: yep, i saw the line level framing
| [Friday 11 February 2011] [05:39:06] &lt;sustrik&gt;        ok
| [Friday 11 February 2011] [05:39:07] &lt;mikko&gt;  kaib: you could probably get prototype running pretty quickly by using zeromq and ZFL RPC
| [Friday 11 February 2011] [05:39:29] &lt;sustrik&gt;        as for the wire protocol on top of that
| [Friday 11 February 2011] [05:39:34] &lt;kaib&gt;   sustrik: i was wondering about the framing used by the different ports
| [Friday 11 February 2011] [05:39:43] &lt;sustrik&gt;        it&#8217;s different for different messaging patterns
| [Friday 11 February 2011] [05:39:51] &lt;sustrik&gt;        REQ/REP
| [Friday 11 February 2011] [05:39:54] &lt;sustrik&gt;        PUB/SUB
| [Friday 11 February 2011] [05:39:57] &lt;sustrik&gt;        PUSH/PULL
| [Friday 11 February 2011] [05:40:04] &lt;kaib&gt;   mikko: what is ZFL RPC?
| [Friday 11 February 2011] [05:40:09] &lt;mikko&gt;  https://github.com/zeromq/zfl/blob/master/src/zfl_rpc.c
| [Friday 11 February 2011] [05:40:16] &lt;mikko&gt;  https://github.com/zeromq/zfl/blob/master/src/zfl_rpcd.c
| [Friday 11 February 2011] [05:40:21] &lt;sustrik&gt;        you can think of each pattern as a separate protocol on top of basic 0mq framing
| [Friday 11 February 2011] [05:40:27] &lt;sustrik&gt;        which one are you interested in?
| [Friday 11 February 2011] [05:40:48] &lt;kaib&gt;   sustrik: pub/sub push/pull req/rep, in that order.
| [Friday 11 February 2011] [05:41:06] &lt;kaib&gt;   sustrik: we have all those patterns in the system..
| [Friday 11 February 2011] [05:41:17] &lt;sustrik&gt;        pub/sub and push/pull are easy
| [Friday 11 February 2011] [05:41:39] &lt;sustrik&gt;        the only specific so far is that the first message sent be each peer is identity
| [Friday 11 February 2011] [05:41:48] &lt;sustrik&gt;        (see ZMQ_IDENTITY socket option)
| [Friday 11 February 2011] [05:42:00] &lt;kaib&gt;   sustrik: what does the peer do with the identity?
| [Friday 11 February 2011] [05:42:01] &lt;sustrik&gt;        if no identity is set, empty message is sent
| [Friday 11 February 2011] [05:42:23] &lt;sustrik&gt;        it can use when reconnection happens
| [Friday 11 February 2011] [05:42:24] &lt;kaib&gt;   sustrik: i understood it&#8217;s used for persisting messages between crashes (presumably somewhere on disk?)
| [Friday 11 February 2011] [05:42:40] &lt;sustrik&gt;        if the new connection has same identity as one previously broken
| [Friday 11 February 2011] [05:42:53] &lt;sustrik&gt;        it can reuse the resources allocated for the old one
| [Friday 11 February 2011] [05:43:23] &lt;sustrik&gt;        so it can hold messages in the memory (or swap them to the disk) while the peer reconnects
| [Friday 11 February 2011] [05:44:03] &lt;sustrik&gt;        as for REQ/REP see here: http://www.zeromq.org/tutorials:xreq-and-xrep
| [Friday 11 February 2011] [05:44:17] &lt;kaib&gt;   sustrik: ok, so it&#8217;s useful for making sure that no messages are dropped even if the client disconnects, right?
| [Friday 11 February 2011] [05:45:00] &lt;sustrik&gt;        messages can still be lost if they were processed or &#8220;on-the-wire&#8221; during the failure
| [Friday 11 February 2011] [05:45:11] &lt;sustrik&gt;        but it makes the whole thing more reliable, yes
| [Friday 11 February 2011] [05:45:37] &lt;sustrik&gt;        aside of that identities are used for routing replies to the original requesters in REQ/REP pattern
| [Friday 11 February 2011] [05:45:41] &lt;sustrik&gt;        see the link above
| [Friday 11 February 2011] [05:45:50] &lt;sustrik&gt;        there&#8217;s a picture showing how it works
| [Friday 11 February 2011] [05:46:53] &lt;sustrik&gt;        kaib: btw, why write a new messaging solution?
| [Friday 11 February 2011] [05:47:11] &lt;sustrik&gt;        i&#8217;m not discouraging you, but it takes some manyears to get that done
| [Friday 11 February 2011] [05:47:58] &lt;kaib&gt;   sustrik: curiosity mostly, partially to see if a native implementation could be better integrated.
| [Friday 11 February 2011] [05:48:30] &lt;kaib&gt;   sustrik: we run a cluster consisting of ~50 nodes (we are still in pre launch) with the servers all written in Go.
| [Friday 11 February 2011] [05:48:48] &lt;kaib&gt;   sustrik: i was looking into hooking up mongrel2 as our http server and started reading more about 0mq.
| [Friday 11 February 2011] [05:48:56] &lt;sustrik&gt;        kaib: sure
| [Friday 11 February 2011] [05:49:08] &lt;kaib&gt;   sustrik: it seems like pattern used in 0mq is actually quite nice.
| [Friday 11 February 2011] [05:49:25] &lt;kaib&gt;   sustrik: i&#8217;ve used messaging systems back at Google but never really grokked them, the rpc system is so much more common.
| [Friday 11 February 2011] [05:49:51] &lt;sustrik&gt;        the patterns are the most interesting part of 0mq i think
| [Friday 11 February 2011] [05:50:04] &lt;kaib&gt;   sustrik: our main pain point is complexity we run 6 distinct server types with some very complex and latency sensitive interactions.
| [Friday 11 February 2011] [05:50:37] &lt;kaib&gt;   sustrik: i have a gut feeling that messages might be a good fit, but i need to write some code to make sure that&#8217;s true.
| [Friday 11 February 2011] [05:51:06] &lt;sustrik&gt;        give it a try
| [Friday 11 February 2011] [05:51:17] &lt;kaib&gt;   sustrik: i&#8217;m not trying to do a generic library, just something that fits our specific purpose. i&#8217;ll probably open source it when we have time, but it&#8217;s definitely just to scratch our own itch.
| [Friday 11 February 2011] [05:51:39] &lt;sustrik&gt;        well, good luck
| [Friday 11 February 2011] [05:51:45] &lt;kaib&gt;   sustrik: given the core 0mq library is pretty good .. :-)
| [Friday 11 February 2011] [05:52:22] &lt;sustrik&gt;        you know, i&#8217;ve seen loads of ad hoc messaging library projects running into troubles
| [Friday 11 February 2011] [05:52:32] &lt;sustrik&gt;        it looks easy when you start
| [Friday 11 February 2011] [05:52:46] &lt;kaib&gt;   what type of issues do they usually encounter?
| [Friday 11 February 2011] [05:53:07] &lt;sustrik&gt;        all kind of asynchronicity issues
| [Friday 11 February 2011] [05:53:28] &lt;sustrik&gt;        also scaling issues
| [Friday 11 February 2011] [05:53:43] &lt;sustrik&gt;        everything works ok in test env
| [Friday 11 February 2011] [05:53:59] &lt;sustrik&gt;        then when you move to production you start to exprience bottlenecks
| [Friday 11 February 2011] [05:54:14] &lt;kaib&gt;   yep, that seems to be a common pattern for all distributed code.
| [Friday 11 February 2011] [05:54:30] &lt;sustrik&gt;        later on it turns out that the bottleneck can&#8217;t be avoided without rewriting the whole code from scratch
| [Friday 11 February 2011] [05:54:31] &lt;sustrik&gt;        etc.
| [Friday 11 February 2011] [05:54:36] &lt;kaib&gt;   are the perf problems mostly in userspace or in interactions with the kernel?
| [Friday 11 February 2011] [05:54:42] &lt;sustrik&gt;        both
| [Friday 11 February 2011] [05:56:22] &lt;kaib&gt;   i&#8217;d love to know more specifics, obviously that&#8217;s something i&#8217;d rather avoid .. are the difficulties related to messaging systems or just concurrent/parallel code in general?
| [Friday 11 February 2011] [05:56:36] &lt;kaib&gt;   ie. do the people running into trouble have experience with writing distributed systems?
| [Friday 11 February 2011] [05:56:44] &lt;sustrik&gt;        sure
| [Friday 11 February 2011] [06:01:56] &lt;sustrik&gt;        for example, there&#8217;s some 12 manyears altogether spent on 0mq + many more years of messaging experience from beforehand
| [Friday 11 February 2011] [06:02:15] &lt;sustrik&gt;        but we still run into this kind of trouble occassionally
| [Friday 11 February 2011] [06:02:36] &lt;sustrik&gt;        say: what happens it 500 peers decide to disconnect at exactly the same moment?
| [Friday 11 February 2011] [06:02:55] &lt;sustrik&gt;        what&#8217;s the latency impact for the remaining peers?
| [Friday 11 February 2011] [06:03:11] &lt;sustrik&gt;        how does the number of cores on the system affect the impact
| [Friday 11 February 2011] [06:03:13] &lt;sustrik&gt;        etc.
| [Friday 11 February 2011] [06:03:18] &lt;sustrik&gt;        complex stuff
| [Friday 11 February 2011] [06:04:20] &lt;Guthur&gt; sustrik: Sorry I was not watching there
| [Friday 11 February 2011] [06:04:51] &lt;Guthur&gt; I was hoping to pick your brains a little regarding the polling classes in 0MQ
| [Friday 11 February 2011] [06:04:57] &lt;sustrik&gt;        sure
| [Friday 11 February 2011] [06:04:59] &lt;sustrik&gt;        shoot
| [Friday 11 February 2011] [06:05:17] &lt;Guthur&gt; I was investigating in relation to implementing windows named pipes
| [Friday 11 February 2011] [06:05:33] &lt;Guthur&gt; is the polling used internally by 0MQ
| [Friday 11 February 2011] [06:05:44] &lt;Guthur&gt; and are all the events required?
| [Friday 11 February 2011] [06:05:53] &lt;sustrik&gt;        what events?
| [Friday 11 February 2011] [06:05:56] &lt;Guthur&gt; eg POLLIN, POLLOUT, and POLLERR
| [Friday 11 February 2011] [06:06:19] &lt;sustrik&gt;        that&#8217;s used in POSIX poll()
| [Friday 11 February 2011] [06:06:33] &lt;sustrik&gt;        0mq virtualises the polling mechanism
| [Friday 11 February 2011] [06:06:51] &lt;sustrik&gt;        and from the user&#8217;s perspective you have these events:
| [Friday 11 February 2011] [06:06:57] &lt;sustrik&gt;        in_event
| [Friday 11 February 2011] [06:06:59] &lt;sustrik&gt;        out_event
| [Friday 11 February 2011] [06:07:02] &lt;sustrik&gt;        timer_event
| [Friday 11 February 2011] [06:07:30] &lt;kaib&gt;   sustrik: thanks, i&#8217;ll tinker around a bit and see what i get. we can always fall back on using the ref implementation if push comes to shove.
| [Friday 11 February 2011] [06:07:33] &lt;sustrik&gt;        (these are callbacks invoked by the poller class)
| [Friday 11 February 2011] [06:07:41] &lt;sustrik&gt;        kaib: sure
| [Friday 11 February 2011] [06:07:44] &lt;Guthur&gt; ok, sorry I&#8217;ll be right back
| [Friday 11 February 2011] [06:07:50] &lt;Guthur&gt; need to go into a conf call
| [Friday 11 February 2011] [06:07:58] &lt;Guthur&gt; sorry about this
| [Friday 11 February 2011] [06:09:36] &lt;Guthur&gt; I was checking out select_t, poll_t, epoll_t, devpoll_t and kqueue_t, as you recommended
| [Friday 11 February 2011] [06:09:47] &lt;Guthur&gt; is there anywhere else in particular I should look?
| [Friday 11 February 2011] [06:10:46] &lt;sustrik&gt;        nope, just implement the same interface with IOCP
| [Friday 11 February 2011] [06:10:59] &lt;sustrik&gt;        ah
| [Friday 11 February 2011] [06:11:10] &lt;sustrik&gt;        you should also redefine fd_t
| [Friday 11 February 2011] [06:11:18] &lt;sustrik&gt;        to resolve to HANDLE instead of SOCKET
| [Friday 11 February 2011] [06:11:21] &lt;Guthur&gt; Named Pipes in MSWin obviously don&#8217;t have a poll, all they have is call back functions on completion
| [Friday 11 February 2011] [06:11:42] &lt;Guthur&gt; ok
| [Friday 11 February 2011] [06:12:24] &lt;sustrik&gt;        afaiu you can use ReadFile/WriteFile
| [Friday 11 February 2011] [06:12:46] &lt;sustrik&gt;        and IOCP for polling
| [Friday 11 February 2011] [06:12:56] &lt;sustrik&gt;        check that out first though
| [Friday 11 February 2011] [06:14:49] &lt;Guthur&gt; yeah ReadFile/WriteFile sync, or ReadFileEx/WriteFileEx async
| [Friday 11 February 2011] [06:15:03] &lt;Guthur&gt; each of those accept a completion callback function
| [Friday 11 February 2011] [06:15:46] &lt;Guthur&gt; umm I haven&#8217;t seen this IOCP
| [Friday 11 February 2011] [06:15:50] &lt;Guthur&gt; I&#8217;ll check that out
| [Friday 11 February 2011] [08:28:13] &lt;zchrish&gt;        Question about exceptions and C++ : When a user gives a bogus hostname, the code asserts. Can I catch the error; what is the accepted alternative to dying in this case?
| [Friday 11 February 2011] [08:28:24] &lt;zchrish&gt;        This is on a connect.
| [Friday 11 February 2011] [08:29:40] &lt;drbobbeaty&gt;     You&#8217;re going to need to check the data before you pass it to zmq. The assert() is not &#8220;catchable&#8221; like an exception is.
| [Friday 11 February 2011] [08:31:18] &lt;zchrish&gt;        I see; thank you.
| [Friday 11 February 2011] [09:46:08] &lt;ianbarber&gt;      pieterh: re DPC talk, will do, I was just waiting to see if i&#8217;ll be doing it at confoo in canada as well (already speaking there about solr, they asked if I could do another). Not that it takes much longer to update twice
| [Friday 11 February 2011] [09:52:48] &lt;ianbarber&gt;      i do hope this talk doesn&#8217;t suck! different sort of audience with PHP devs to your fosdem one, not so much multithreading being discussed :)
| [Friday 11 February 2011] [09:56:54] &lt;sustrik&gt;        that makes the talk more interesting imo
| [Friday 11 February 2011] [12:27:49] &lt;mikko&gt;  pieterh: there?
| [Friday 11 February 2011] [13:52:56] &lt;Guthur&gt; do we have a way of executing unit tests on the build server?
| [Friday 11 February 2011] [13:53:09] &lt;Guthur&gt; or is that outside the remit
| [Friday 11 February 2011] [14:13:42] &lt;sustrik&gt;        Guthur: make check is executed when zmq is built
| [Friday 11 February 2011] [14:14:58] &lt;Guthur&gt; i wonder if I could get something similar set up for clrzmq1
| [Friday 11 February 2011] [14:15:05] &lt;Guthur&gt; clrzmq2*
| [Friday 11 February 2011] [14:19:01] &lt;Guthur&gt; mikko, you about?
| [Friday 11 February 2011] [16:29:09] &lt;CIA-21&gt; jzmq: 03Nathan Marz 07master * r7983d5c 10/ src/Socket.cpp : fix type for args to linger from github issue #26 - http://bit.ly/dWrCkv
| [Friday 11 February 2011] [16:29:10] &lt;CIA-21&gt; jzmq: 03Gonzalo Diethelm 07master * r306e3b8 10/ src/Socket.cpp : Arranged proposed changes a bit, and added a cast to avoid a warning. - http://bit.ly/eiciUG
| [Friday 11 February 2011] [21:25:17] &lt;andrewvc&gt;       chuck
| [Friday 11 February 2011] [21:25:19] &lt;andrewvc&gt;       err
| [Friday 11 February 2011] [21:25:21] &lt;andrewvc&gt;       cremes: around?
| [Friday 11 February 2011] [21:25:32] &lt;andrewvc&gt;       I think I found the bug, it&#8217;s in ffi-rzmq I believe
| [Saturday 12 February 2011] [01:41:04] &lt;yrashk&gt;       under certain circumstances I am getting some weird segfault in zmq_recv (I use it in an Erlang NIF, and it works fine until I create a so called &#8216;release&#8217; for my erlang app)
| [Saturday 12 February 2011] [01:41:07] &lt;yrashk&gt;       https://gist.github.com/2b197cc5718a9f6452e6
| [Saturday 12 February 2011] [01:41:10] &lt;yrashk&gt;             peer_identity = 0x870e5bfa &lt;Address 0x870e5bfa out of bounds&gt;
| [Saturday 12 February 2011] [01:41:15] &lt;yrashk&gt;       looks suspicious
| [Saturday 12 February 2011] [01:41:31] &lt;yrashk&gt;       any ideas what to do to figure out the source of the problem
| [Saturday 12 February 2011] [01:41:42] &lt;yrashk&gt;       happens only in that beforementioned setting and only on osx
| [Saturday 12 February 2011] [01:41:45] &lt;yrashk&gt;       works fine on linux
| [Saturday 12 February 2011] [01:45:04] &lt;yrashk&gt;       sustrik: ^^^
| [Saturday 12 February 2011] [01:51:10] &lt;yrashk&gt;       and yes, this is 2.1.0 and master
| [Saturday 12 February 2011] [02:31:21] &lt;sustrik&gt;      yrashk: aren&#8217;t you using same socket from multiple threads?
| [Saturday 12 February 2011] [02:32:31] &lt;yrashk&gt;       well, all sockets are created in thread #1
| [Saturday 12 February 2011] [02:32:46] &lt;yrashk&gt;       then I use push socket from a thread #1
| [Saturday 12 February 2011] [02:32:55] &lt;yrashk&gt;       and a pul socket from thread #2
| [Saturday 12 February 2011] [02:32:58] &lt;yrashk&gt;       pull*
| [Saturday 12 February 2011] [02:33:56] &lt;yrashk&gt;       will that result in an undefined behaviour?
| [Saturday 12 February 2011] [02:35:55] &lt;sustrik&gt;      if passing of the socket from #1 to #2 is well synchronised, then it should be ok
| [Saturday 12 February 2011] [02:36:52] &lt;yrashk&gt;       Each MQ socket belonging to a particular context may only be used by the thread that created it using zmq_socket().
| [Saturday 12 February 2011] [02:37:02] &lt;yrashk&gt;       I might have missed this
| [Saturday 12 February 2011] [02:37:21] &lt;yrashk&gt;       so the documentation says I have to use the socket form a thread that created it?
| [Saturday 12 February 2011] [02:37:24] &lt;yrashk&gt;       from*
| [Saturday 12 February 2011] [02:37:37] &lt;sustrik&gt;      with 2.1 the restriction is alleviated
| [Saturday 12 February 2011] [02:37:47] &lt;yrashk&gt;       k
| [Saturday 12 February 2011] [02:37:48] &lt;sustrik&gt;      you *can* pass sockets between threads
| [Saturday 12 February 2011] [02:38:03] &lt;sustrik&gt;      but you can&#8217;t access a socket from 2 threads in parallel
| [Saturday 12 February 2011] [02:38:18] &lt;yrashk&gt;       I am never touching that pull socket from the 1st thread
| [Saturday 12 February 2011] [02:38:30] &lt;yrashk&gt;       except for its initialization
| [Saturday 12 February 2011] [02:39:36] &lt;sustrik&gt;      how do you pass the socket to the other thread?
| [Saturday 12 February 2011] [02:40:30] &lt;yrashk&gt;       it just lives in a class instance that 1st thread creates
| [Saturday 12 February 2011] [02:42:39] &lt;yrashk&gt;       after that 1s thread creates a 2nd thread and passes that object as an argument to a thread function
| [Saturday 12 February 2011] [02:42:50] &lt;sustrik&gt;      ok, i see
| [Saturday 12 February 2011] [02:42:53] &lt;sustrik&gt;      that should be ok
| [Saturday 12 February 2011] [02:43:30] &lt;yrashk&gt;       is there anything else that might result in that segfault? specifically on OSX
| [Saturday 12 February 2011] [02:43:39] &lt;yrashk&gt;       as Linux build seems to work just fine
| [Saturday 12 February 2011] [02:43:49] &lt;yrashk&gt;       at least I am yet to see a single crash in the same scenario
| [Saturday 12 February 2011] [02:43:58] &lt;yrashk&gt;       while OSX build crashes 80-90% times
| [Saturday 12 February 2011] [02:44:05] &lt;sustrik&gt;      well, what you have shown me looks like a socket have been closed while still being used
| [Saturday 12 February 2011] [02:44:22] &lt;sustrik&gt;      either from another thread
| [Saturday 12 February 2011] [02:44:51] &lt;sustrik&gt;      or from a single thread this way: zmq_close(x);zmq_recv(x,...);
| [Saturday 12 February 2011] [02:45:03] &lt;sustrik&gt;      do you have a minimal test case?
| [Saturday 12 February 2011] [02:45:31] &lt;yrashk&gt;       not yet
| [Saturday 12 February 2011] [02:45:38] &lt;yrashk&gt;       the setting is pretty complicated
| [Saturday 12 February 2011] [02:45:45] &lt;sustrik&gt;      ok
| [Saturday 12 February 2011] [02:45:57] &lt;yrashk&gt;       as it works just fine when not packaged as an erlang app release
| [Saturday 12 February 2011] [02:47:34] &lt;yrashk&gt;       I am just trying to think of any possible explanation of this segfault
| [Saturday 12 February 2011] [02:48:11] &lt;sustrik&gt;      library mismatch?
| [Saturday 12 February 2011] [02:48:31] &lt;sustrik&gt;      the recv that fails, is it the first recv called?
| [Saturday 12 February 2011] [02:50:07] &lt;yrashk&gt;       nope
| [Saturday 12 February 2011] [02:50:25] &lt;yrashk&gt;       normally anywhere from like 4 calls to about, say, 20
| [Saturday 12 February 2011] [02:52:38] &lt;sustrik&gt;      memory overwrite then?
| [Saturday 12 February 2011] [02:52:49] &lt;sustrik&gt;      it&#8217;s just a guesswork
| [Saturday 12 February 2011] [02:53:57] &lt;yrashk&gt;       well may be
| [Saturday 12 February 2011] [02:54:06] &lt;yrashk&gt;       but I am not quite positive how can this happen
| [Saturday 12 February 2011] [02:54:17] &lt;yrashk&gt;       and only when the app is packaged
| [Saturday 12 February 2011] [02:54:56] &lt;sustrik&gt;      it&#8217;a a segfault, right?
| [Saturday 12 February 2011] [02:55:09] &lt;sustrik&gt;      does it print out the address it segfaults at?
| [Saturday 12 February 2011] [02:56:48] &lt;yrashk&gt;       it is
| [Saturday 12 February 2011] [02:57:17] &lt;yrashk&gt;       https://gist.github.com/63c48785c8f42c6c1f8b
| [Saturday 12 February 2011] [02:58:18] &lt;sustrik&gt;      i don&#8217;t see the notification about the segfault there
| [Saturday 12 February 2011] [02:58:51] &lt;sustrik&gt;      i mean what address it tries to access that is out of bounds?
| [Saturday 12 February 2011] [02:59:07] &lt;yrashk&gt;             peer_identity = 0x870e5bfa &lt;Address 0x870e5bfa out of bounds&gt;
| [Saturday 12 February 2011] [02:59:12] &lt;yrashk&gt;       I guess this is it
| [Saturday 12 February 2011] [03:00:35] &lt;sustrik&gt;      nope
| [Saturday 12 February 2011] [03:00:50] &lt;sustrik&gt;      it prints &#8220;segfault&#8221; somewhere
| [Saturday 12 February 2011] [03:00:58] &lt;sustrik&gt;      is there an address mentioned there?
| [Saturday 12 February 2011] [03:01:52] &lt;yrashk&gt;       it didn&#8217;t print any address
| [Saturday 12 February 2011] [03:02:05] &lt;yrashk&gt;       anyway I think you led me into something
| [Saturday 12 February 2011] [03:04:40] &lt;yrashk&gt;       thanks a lot!
| [Saturday 12 February 2011] [03:07:07] &lt;yrashk&gt;       I really appreciate your help, sustrik &#8211; I think I got it
| [Saturday 12 February 2011] [03:08:30]         * sustrik is curious
| [Saturday 12 February 2011] [03:08:36] &lt;sustrik&gt;      what&#8217;s the problem?
| [Saturday 12 February 2011] [03:09:15] &lt;yrashk&gt;       apparently due to the hack I used to ensure a NIF module is loaded, I was calling initializion of that NIF twice
| [Saturday 12 February 2011] [03:09:21] &lt;yrashk&gt;       and it rewrote the context
| [Saturday 12 February 2011] [03:09:23] &lt;yrashk&gt;       facepalm
| [Saturday 12 February 2011] [03:09:49] &lt;yrashk&gt;       absolute facepalm
| [Saturday 12 February 2011] [03:10:08] &lt;yrashk&gt;       well I didn&#8217;t check that it actually overwrote the context
| [Saturday 12 February 2011] [03:10:16] &lt;yrashk&gt;       but it is fairly trivial to guess that from the code
| [Saturday 12 February 2011] [03:10:19] &lt;yrashk&gt;       because it&#8217;s my code
| [Saturday 12 February 2011] [03:10:21] &lt;yrashk&gt;       :]
| [Saturday 12 February 2011] [03:12:59] &lt;sustrik&gt;      :)
| [Saturday 12 February 2011] [05:00:06] &lt;pieterh&gt;      hi guys
| [Saturday 12 February 2011] [05:00:24] &lt;pieterh&gt;      seems our email server was out of action for a while
| [Saturday 12 February 2011] [05:00:41] &lt;pieterh&gt;      it looks like stuff was queued but not being sent out
| [Saturday 12 February 2011] [05:01:00] &lt;pieterh&gt;      this would have affected the zeromq-dev list presumably
| [Saturday 12 February 2011] [05:01:33] &lt;pieterh&gt;      anyhow, I rebooted the beast and emails are now slowly appearing
| [Saturday 12 February 2011] [08:57:23] &lt;pieterh&gt;      Anyone hitting &#8220;Successful WSASTARTUP not yet performed (c:worksrczeromq2srcmailbox.cpp:263)&#8221; on Windows
| [Saturday 12 February 2011] [08:57:27] &lt;pieterh&gt;      ?
| [Saturday 12 February 2011] [09:18:25] &lt;Guthur&gt;       pieterh, never seen such an error myself
| [Saturday 12 February 2011] [09:18:58] &lt;Guthur&gt;       which windows version?
| [Saturday 12 February 2011] [09:21:17] &lt;pieterh&gt;      Guthur: I&#8217;m running WinXP, this hits at zmq_init()
| [Saturday 12 February 2011] [09:21:41] &lt;pieterh&gt;      Seems new to 2.1.0
| [Saturday 12 February 2011] [09:22:11] &lt;Guthur&gt;       I&#8217;ve be running 2.1.0 ok recently, WinXP as well
| [Saturday 12 February 2011] [09:22:58] &lt;Guthur&gt;       sorry, that&#8217;s not really helpful for you though
| [Saturday 12 February 2011] [09:23:18] &lt;pieterh&gt;      I&#8217;ll check if zmq is doing WSAStartup or not...
| [Saturday 12 February 2011] [09:24:39] &lt;Guthur&gt;       i&#8217;m looking at IOCP today for ICP on win
| [Saturday 12 February 2011] [09:24:56] &lt;Guthur&gt;       not sure if I will have it ready this weekend though, it&#8217;s not very well documented
| [Saturday 12 February 2011] [09:25:30] &lt;Guthur&gt;       ICP/IPC
| [Saturday 12 February 2011] [09:27:46] &lt;pieterh&gt;      getting ipc: to work on win32 would be great
| [Saturday 12 February 2011] [09:28:24] &lt;pieterh&gt;      for some reason I&#8217;m getting zmq calling make_socketpair before doing WSAStartup... strange
| [Saturday 12 February 2011] [09:37:36] &lt;sustrik&gt;      pieterh: what version are you using?
| [Saturday 12 February 2011] [09:37:42] &lt;pieterh&gt;      latest from github
| [Saturday 12 February 2011] [09:37:59] &lt;pieterh&gt;      stepping though, it definitely tries to create a mailbox socket pair before doing WSAStartup
| [Saturday 12 February 2011] [09:38:15] &lt;pieterh&gt;      C++ is a joy to understand
| [Saturday 12 February 2011] [09:38:22] &lt;sustrik&gt;      how come?
| [Saturday 12 February 2011] [09:38:26] &lt;sustrik&gt;      see ctx.cpp
| [Saturday 12 February 2011] [09:38:36] &lt;pieterh&gt;      I am staring at it :-)
| [Saturday 12 February 2011] [09:38:41] &lt;sustrik&gt;      ctx_t constructor
| [Saturday 12 February 2011] [09:38:52] &lt;sustrik&gt;      line 36
| [Saturday 12 February 2011] [09:38:53] &lt;pieterh&gt;      any specific line no?
| [Saturday 12 February 2011] [09:39:08] &lt;sustrik&gt;      the very thing fitst done is WSAStartup
| [Saturday 12 February 2011] [09:39:23] &lt;pieterh&gt;      well, line 36 is a blank line here
| [Saturday 12 February 2011] [09:39:30] &lt;pieterh&gt;      yes, the very first thing it does is WSAStartup
| [Saturday 12 February 2011] [09:40:07] &lt;sustrik&gt;      that&#8217;s zmq_init() implementation
| [Saturday 12 February 2011] [09:40:17] &lt;pieterh&gt;      ok, when I debug it step by step, I get...
| [Saturday 12 February 2011] [09:40:23] &lt;pieterh&gt;      (hang on, it&#8217;ll take me a second...)
| [Saturday 12 February 2011] [09:41:36] &lt;Guthur&gt;       cool, just got feedback of some users of zmq2 and clrzmq2 being used as core tech, sweet
| [Saturday 12 February 2011] [09:42:07] &lt;Guthur&gt;       good to be getting feedback on some field tests
| [Saturday 12 February 2011] [09:42:09] &lt;pieterh&gt;      sustrik: array, vector, mutex_t, vector, mailbox constructors before it does first line of ctx constructor
| [Saturday 12 February 2011] [09:42:38] &lt;pieterh&gt;      that is, after calling ctx constructor from zmq_init...
| [Saturday 12 February 2011] [09:42:38] &lt;sustrik&gt;      wait a sec, checking...
| [Saturday 12 February 2011] [09:42:57] &lt;pieterh&gt;      Guthur: saw that on twitter... nice
| [Saturday 12 February 2011] [09:43:06] &lt;sustrik&gt;      ok, got it
| [Saturday 12 February 2011] [09:43:10] &lt;sustrik&gt;      let me fix it
| [Saturday 12 February 2011] [09:43:26] &lt;pieterh&gt;      excellent, can you explain what it&#8217;s doing?
| [Saturday 12 February 2011] [09:43:44] &lt;Guthur&gt;       pieterh, they already caught a couple of bugs, so paying dividends already
| [Saturday 12 February 2011] [09:43:54] &lt;Guthur&gt;       bugs in clrzmq2
| [Saturday 12 February 2011] [09:44:10] &lt;pieterh&gt;      It&#8217;s nice to have users :-)
| [Saturday 12 February 2011] [09:44:12] &lt;sustrik&gt;      constructors of embedded object are called *before* the constructor of the main object
| [Saturday 12 February 2011] [09:44:26] &lt;pieterh&gt;      sustrik: ah, and mailbox is embedded I guess
| [Saturday 12 February 2011] [09:44:26] &lt;sustrik&gt;      ctx_t has a member called term_mailbox
| [Saturday 12 February 2011] [09:44:30] &lt;pieterh&gt;      right
| [Saturday 12 February 2011] [09:44:31] &lt;sustrik&gt;      right
| [Saturday 12 February 2011] [09:44:41]         * pieterh found a bug! :-)
| [Saturday 12 February 2011] [09:45:07] &lt;pieterh&gt;      you could move the WSAStartup code to zmq_init
| [Saturday 12 February 2011] [09:45:17] &lt;sustrik&gt;      yes, i should
| [Saturday 12 February 2011] [09:45:28] &lt;pieterh&gt;      well, let me try that, test it, submit a patch
| [Saturday 12 February 2011] [09:45:33] &lt;sustrik&gt;      goodo
| [Saturday 12 February 2011] [09:45:38] &lt;pieterh&gt;      it&#8217;ll take me 3 minutes...
| [Saturday 12 February 2011] [09:46:21] &lt;sustrik&gt;      also, to retain symetricity, move WSACleanup to zmq_term()
| [Saturday 12 February 2011] [09:50:38] &lt;zchrish&gt;      In C++, should a context ever be introduced in a place other than in main()?
| [Saturday 12 February 2011] [09:52:10] &lt;zchrish&gt;      I am trying to design a thread management strategy to incorporate some sort of error management. Will a context ever become corrupted?
| [Saturday 12 February 2011] [09:59:48] &lt;pieterh&gt;      sustrik: ok, fixed and tested, sending patch now
| [Saturday 12 February 2011] [10:04:39] &lt;pieterh&gt;      zchrish: you can create a context anywhere you like but two threads that want to communicate via inproc: must share the same context
| [Saturday 12 February 2011] [10:04:51] &lt;pieterh&gt;      so the natural place is usually where you create child threads, which is usually main()
| [Saturday 12 February 2011] [10:05:15] &lt;pieterh&gt;      and no, a context will not become corrupted unless your application overwrites memory erroneously
| [Saturday 12 February 2011] [10:05:41] &lt;zchrish&gt;      OK; thanks.
| [Saturday 12 February 2011] [10:17:20] &lt;sustrik&gt;      pieterh: please, sign-off the patch
| [Saturday 12 February 2011] [10:17:28] &lt;sustrik&gt;      (commit -s)
| [Saturday 12 February 2011] [10:40:11] &lt;Guthur&gt;       sustrik, he has left
| [Saturday 12 February 2011] [10:54:54] &lt;sustrik&gt;      ah, missed that, thanks
| [Saturday 12 February 2011] [10:55:23] &lt;Guthur&gt;       sustrik, question about the IOCP integration...
| [Saturday 12 February 2011] [10:55:32] &lt;sustrik&gt;      sure
| [Saturday 12 February 2011] [10:55:33] &lt;sustrik&gt;      go on
| [Saturday 12 February 2011] [10:55:54] &lt;Guthur&gt;       will the zmq engine be able to call PostQueuedCompletionStatus on socket recvs and sends
| [Saturday 12 February 2011] [10:56:37] &lt;sustrik&gt;      ?
| [Saturday 12 February 2011] [10:56:49] &lt;Guthur&gt;       i could be missing something but that seems to be how IOCP works, it&#8217;s just a means of syncing stuff
| [Saturday 12 February 2011] [10:57:43] &lt;Guthur&gt;       so the polling object calls GetQueuedCompletionStatusEx to get any signalled events
| [Saturday 12 February 2011] [10:58:17] &lt;Guthur&gt;       but i&#8217;m having trouble seeing where these would get signalled form
| [Saturday 12 February 2011] [10:58:19] &lt;Guthur&gt;       from*
| [Saturday 12 February 2011] [10:58:34] &lt;sustrik&gt;      i would say the NamesPipe would signal it
| [Saturday 12 February 2011] [10:58:44] &lt;sustrik&gt;      you don&#8217;t need to do that yourself
| [Saturday 12 February 2011] [10:58:57] &lt;Guthur&gt;       that&#8217;s what i was initially thinking too
| [Saturday 12 February 2011] [10:59:08] &lt;Guthur&gt;       i&#8217;ll dig a bit more
| [Saturday 12 February 2011] [10:59:09]         * sustrik never used IOCP though
| [Saturday 12 February 2011] [10:59:16] &lt;Guthur&gt;       the documentation is useless
| [Saturday 12 February 2011] [10:59:22] &lt;Guthur&gt;       MSDN is crap
| [Saturday 12 February 2011] [11:01:42] &lt;sustrik&gt;      any examples out there?
| [Saturday 12 February 2011] [11:02:16] &lt;Guthur&gt;       some stuff, I have more code here, but they do seem to be calling PostQueuedCompletionStatus explicitly
| [Saturday 12 February 2011] [11:02:33] &lt;Guthur&gt;       they are passing custom overlapped structs with event details
| [Saturday 12 February 2011] [11:03:38] &lt;Guthur&gt;       I have some server code here, i&#8217;ll look through that
| [Saturday 12 February 2011] [11:04:12] &lt;sustrik&gt;      Have you seen this:
| [Saturday 12 February 2011] [11:04:13] &lt;sustrik&gt;      http://lists.zeromq.org/pipermail/zeromq-dev/2010-September/006240.html
| [Saturday 12 February 2011] [11:06:30] &lt;Guthur&gt;       I hadn&#8217;t seen that
| [Saturday 12 February 2011] [11:59:56] &lt;Guthur&gt;       I think I&#8217;m just going to have to throw some code together an experiment
| [Saturday 12 February 2011] [12:23:06] &lt;sustrik&gt;      maybe discussing it at some windows forum may give you some insight into different technologies
| [Saturday 12 February 2011] [12:23:16] &lt;Guthur&gt;       sustrik, way ahead. hehe
| [Saturday 12 February 2011] [12:23:26] &lt;Guthur&gt;       talking to someone on #winapi
| [Saturday 12 February 2011] [12:23:29] &lt;sustrik&gt;      :)
| [Saturday 12 February 2011] [12:23:50] &lt;Guthur&gt;       it is indeed possible to get events automatically from pipes via IOCP
| [Saturday 12 February 2011] [12:23:56] &lt;Guthur&gt;       it&#8217;s just a little confusing
| [Saturday 12 February 2011] [12:32:10] &lt;sustrik&gt;      i see
| [Saturday 12 February 2011] [12:36:16] &lt;CIA-21&gt;       zeromq2: 03Pieter Hintjens 07master * r14a0e14 10/ (src/ctx.cpp src/zmq.cpp):
| [Saturday 12 February 2011] [12:36:16] &lt;CIA-21&gt;       zeromq2: Fixed win32 issue with WSAStartup
| [Saturday 12 February 2011] [12:36:16] &lt;CIA-21&gt;       zeromq2:  - ctx constructor was calling mailbox_t constructor implicitly
| [Saturday 12 February 2011] [12:36:16] &lt;CIA-21&gt;       zeromq2:  - moved WSAStartup and WSACleanup to be outside constructor/destructor
| [Saturday 12 February 2011] [12:36:16] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Pieter Hintjens &lt;ph&#64;imatix.com&gt; - http://bit.ly/f693K5
| [Saturday 12 February 2011] [14:01:52] &lt;eut&gt;  does anyone use the lua zmq bindings? i&#8217;m having some trouble with the nonblocking recv
| [Saturday 12 February 2011] [14:02:03] &lt;eut&gt;  it seems as though i can never receive a message
| [Saturday 12 February 2011] [14:05:05] &lt;cremes&gt;       eut: what kind of sockets are you using in your test?
| [Saturday 12 February 2011] [14:05:15] &lt;eut&gt;  xrep/xreq
| [Saturday 12 February 2011] [14:09:02] &lt;eut&gt;  ah, never mind...
| [Saturday 12 February 2011] [14:09:14] &lt;cremes&gt;       ok
| [Saturday 12 February 2011] [14:09:26] &lt;eut&gt;  it looks like zmq buffers outgoing messages, sending several all at once
| [Saturday 12 February 2011] [14:10:09] &lt;eut&gt;  so sometimes i would quit listening before it finally sent
| [Saturday 12 February 2011] [14:10:10] &lt;cremes&gt;       i believe it has an internal timer on its I/O thread so that messages are coalesced and sent
| [Saturday 12 February 2011] [14:10:26] &lt;cremes&gt;       kind of like nagle&#8217;s algorithm
| [Saturday 12 February 2011] [14:10:56] &lt;eut&gt;  ok i see
| [Saturday 12 February 2011] [14:11:47] &lt;eut&gt;  is there a way to influence that internal timer (or whatever)?
| [Saturday 12 February 2011] [14:18:16] &lt;cremes&gt;       eut: don&#8217;t know... plus, i may be wrong on that
| [Saturday 12 February 2011] [14:18:57] &lt;cremes&gt;       ask the mailing list; be sure to include a pointer to your code just in case it&#8217;s a different issue
| [Saturday 12 February 2011] [14:19:05] &lt;eut&gt;  ok
| [Saturday 12 February 2011] [14:35:46] &lt;zedas&gt;        hey can anyone point me at the docs on how 2.1.0 does graceful shutdown?  apparently there&#8217;s a change where sockets will LINGER or not?
| [Saturday 12 February 2011] [14:37:53] &lt;cremes&gt;       zedas: https://github.com/zeromq/zeromq2/blob/master/doc/zmq_term.txt
| [Saturday 12 February 2011] [14:38:19] &lt;cremes&gt;       and
| [Saturday 12 February 2011] [14:38:20] &lt;cremes&gt;       https://github.com/zeromq/zeromq2/blob/master/doc/zmq_setsockopt.txt
| [Saturday 12 February 2011] [14:38:54] &lt;cremes&gt;       by default, it will &#8220;linger&#8221; forever until all packets are flushed
| [Saturday 12 February 2011] [14:47:10] &lt;Guthur&gt;       ah, i think i&#8217;m making progress
| [Saturday 12 February 2011] [14:47:57] &lt;Guthur&gt;       i&#8217;ll not have the IOCP in ZMQ tonight, but I think i might be able to get it in soon enough
| [Saturday 12 February 2011] [14:48:21] &lt;Guthur&gt;       I have it working in a small test client server app
| [Saturday 12 February 2011] [15:03:03] &lt;zedas&gt;        cremes: ok thanks, i&#8217;ve gotta get 2.1.0 working with mongrel2 and this is the only thing that&#8217;s broken right now.
| [Saturday 12 February 2011] [19:08:22] &lt;rbitcon&gt;      Howdy, I am kooking to be pointed in the right direction for help
| [Saturday 12 February 2011] [19:09:51] &lt;rbitcon&gt;      I am using zeromq with Python in a REQ/RESP model with one server and many &#8220;workers&#8221;. I see that the zmq library take up hude amounts of RAM
| [Saturday 12 February 2011] [19:11:08] &lt;rbitcon&gt;      I read the docs about socket.setsockopt(zmq.HWM, 125), but it is not that clear
| [Saturday 12 February 2011] [19:11:24] &lt;rbitcon&gt;      any pointers?
| [Saturday 12 February 2011] [19:52:17] &lt;rbitcon&gt;      Solved my problem with memory usage.
| [Saturday 12 February 2011] [19:53:49] &lt;rbitcon&gt;      I downloaded pyzmq 2.0.10.1 and dis a plan python.exe setup.py install, previously i did a development build and install or 2.0.10. This is all under windows7 and using python2.6
| [Saturday 12 February 2011] [20:10:11] &lt;tjgillies&gt;    if im behind NAT can i use zeromq to do udp hole punching?
| [Saturday 12 February 2011] [22:35:24] &lt;Seta00&gt;       anyone from the pyzmq team here?
| [Saturday 12 February 2011] [22:35:43] &lt;Seta00&gt;       in fact, anyone with python 2.7 pyzmq builds for windows here?
| [Saturday 12 February 2011] [22:35:47] &lt;Seta00&gt;       it just won&#8217;t install
| [Sunday 13 February 2011] [03:50:48] &lt;sustrik&gt;        zedas: just set ZMQ_LINGER option to zero for all the sockets and everything should work as with 2.0.x
| [Sunday 13 February 2011] [03:52:34] &lt;sustrik&gt;        Guthut: wow!
| [Sunday 13 February 2011] [04:06:39] &lt;CIA-21&gt; zeromq2: 03Martin Sustrik 07master * rba26cc9 10/ src/zmq.cpp :
| [Sunday 13 February 2011] [04:06:39] &lt;CIA-21&gt; zeromq2: Build problem with OpenPGM and MSVC fixed
| [Sunday 13 February 2011] [04:06:39] &lt;CIA-21&gt; zeromq2: Signed-off-by: Martin Sustrik &lt;sustrik&#64;250bpm.com&gt; - http://bit.ly/guRl75
| [Sunday 13 February 2011] [06:30:27] &lt;Guthur&gt; Sustrik: ping
| [Sunday 13 February 2011] [06:33:11] &lt;DeadZen&gt;        whats zeromq?
| [Sunday 13 February 2011] [06:38:52] &lt;mikko&gt;  DeadZen: http://www.zeromq.org/
| [Sunday 13 February 2011] [06:44:23] &lt;Guthur&gt; in like the &#8216;0MQ in 100 words&#8217; in the guide as a description
| [Sunday 13 February 2011] [06:44:25] &lt;Guthur&gt; http://zguide.zeromq.org/chapter:all#toc2
| [Sunday 13 February 2011] [06:49:59] &lt;Guthur&gt; mikko, would be possible to have tests run as part of a bindings build, on the build server?
| [Sunday 13 February 2011] [06:51:57] &lt;mikko&gt;  sure
| [Sunday 13 February 2011] [06:53:20] &lt;Guthur&gt; cool, I don&#8217;t have the tests at the moment, but it is something I would like to add in the future for clrzmq2
| [Sunday 13 February 2011] [07:04:55] &lt;mikko&gt;  it should be a fairly painless process to add them to builds
| [Sunday 13 February 2011] [07:20:07] &lt;mikko&gt;  i to the b
| [Sunday 13 February 2011] [07:45:33] &lt;Guthur&gt; I&#8217;ve been looking into IOCP for named pipes connection under windows, the main issue I have found is differentiating between the read and write operations. It is possible to pass in a handle to an event object to writefile function (as part of the overlapped struct), which will allow differentiation.
| [Sunday 13 February 2011] [07:46:04] &lt;Guthur&gt; The only issue with that is that both the poller and and the writer need the handle to that event object.
| [Sunday 13 February 2011] [07:47:12] &lt;Guthur&gt; or at least for the poller to know it is a write event object, it will be matched to the right pipe as part of the return from IOCP
| [Sunday 13 February 2011] [10:25:45] &lt;sustrik&gt;        Guthur: pong
| [Sunday 13 February 2011] [10:30:03] &lt;Guthur&gt; sustrik, did that stuff i posted earlier make much sense?
| [Sunday 13 February 2011] [10:30:25] &lt;sustrik&gt;        i have no idea how IOCP works :|
| [Sunday 13 February 2011] [10:30:37] &lt;sustrik&gt;        anyway, what you need for integration with 0mq
| [Sunday 13 February 2011] [10:31:08] &lt;sustrik&gt;        is a polling mechanism that triggers an event when particular &#8220;socket&#8221; is readable and/or writeable
| [Sunday 13 February 2011] [10:31:26] &lt;sustrik&gt;        it has to be able to handle multiple &#8220;sockets&#8221; in parallel
| [Sunday 13 February 2011] [10:31:38] &lt;Guthur&gt; oh yeah IOCP does multiple sockets very well
| [Sunday 13 February 2011] [10:31:57] &lt;sustrik&gt;        and all the event handlers have to be invoked within a single thread
| [Sunday 13 February 2011] [10:32:26] &lt;Guthur&gt; that&#8217;s no problem as well
| [Sunday 13 February 2011] [10:32:47] &lt;sustrik&gt;        then it should be easy, no?
| [Sunday 13 February 2011] [10:32:59] &lt;Guthur&gt; the only complication as far as I can see is differentiating between what event is fired
| [Sunday 13 February 2011] [10:33:36] &lt;sustrik&gt;        can&#8217;t you use 2 different events?
| [Sunday 13 February 2011] [10:33:47] &lt;sustrik&gt;        event objects i mean
| [Sunday 13 February 2011] [10:34:28] &lt;Guthur&gt; if we can pass a different event object when writing to the pipe then yes
| [Sunday 13 February 2011] [10:35:01] &lt;Guthur&gt; 2 secs, just going to ask someone about it now
| [Sunday 13 February 2011] [10:36:55] &lt;Guthur&gt; when one creates the name pipe one passes in an overlapped struct with an event object, this is set active by all events as far as I can see
| [Sunday 13 February 2011] [10:39:42] &lt;sustrik&gt;        aha
| [Sunday 13 February 2011] [10:40:08] &lt;sustrik&gt;        so how you are supposed to know whether the socket is readable or writeable?
| [Sunday 13 February 2011] [10:40:50] &lt;Guthur&gt; you mean like a connected event?
| [Sunday 13 February 2011] [10:41:02] &lt;sustrik&gt;        hm
| [Sunday 13 February 2011] [10:41:17] &lt;sustrik&gt;        CreateNamedPipe doesn&#8217;t seem to accept OVERLAPPED struct
| [Sunday 13 February 2011] [10:42:04] &lt;Guthur&gt; writefile does
| [Sunday 13 February 2011] [10:43:47] &lt;Guthur&gt; i&#8217;m talking to someone more knowledgeable now
| [Sunday 13 February 2011] [10:43:48] &lt;Guthur&gt; 2 secs
| [Sunday 13 February 2011] [10:44:30]   * sustrik is reading the docs
| [Sunday 13 February 2011] [10:48:19] &lt;mikko&gt;  Guthur: steve-o might be able to help you with IOCP
| [Sunday 13 February 2011] [10:48:25] &lt;mikko&gt;  he did some tests with it some time ago
| [Sunday 13 February 2011] [10:48:58] &lt;Guthur&gt; mikko, did he rule it out for any technical reason?
| [Sunday 13 February 2011] [10:49:48] &lt;mikko&gt;  Guthur: i think it wasnt as fast as he expected
| [Sunday 13 February 2011] [10:50:03] &lt;sustrik&gt;        the problem with 0mq is a bit different
| [Sunday 13 February 2011] [10:50:12] &lt;Guthur&gt; oh, interesting
| [Sunday 13 February 2011] [10:50:20] &lt;sustrik&gt;        namely, select() function that&#8217;s currently used for polling
| [Sunday 13 February 2011] [10:50:44] &lt;sustrik&gt;        is limited to POSIX-like TCP sockets (winsock)
| [Sunday 13 February 2011] [10:50:54] &lt;sustrik&gt;        it doesn&#8217;t work with anything else afaik
| [Sunday 13 February 2011] [10:51:04] &lt;sustrik&gt;        ie. named pipes etc.
| [Sunday 13 February 2011] [10:51:20] &lt;mikko&gt;  and kelly brock has done some work
| [Sunday 13 February 2011] [10:51:34] &lt;mikko&gt;  &#8220;For those interested, I highly
| [Sunday 13 February 2011] [10:51:34] &lt;mikko&gt;  suggest reading the change lists from V1 to V2rc of libevent, most changes
| [Sunday 13 February 2011] [10:51:34] &lt;mikko&gt;  were required because IOCP is nearly the opposite of all other async
| [Sunday 13 February 2011] [10:51:35] &lt;mikko&gt;  solutions.&#8221;
| [Sunday 13 February 2011] [10:52:23] &lt;sustrik&gt;        the first question imo is whether IOCP is the only option to poll on TCP sockets and named pipes
| [Sunday 13 February 2011] [10:52:39] &lt;sustrik&gt;        maybe there&#8217;s a different (and maybe less complex) way
| [Sunday 13 February 2011] [10:53:01] &lt;mikko&gt;  or whether named pipes could be emulated on windows using shared memory
| [Sunday 13 February 2011] [10:53:17] &lt;mikko&gt;  not sure if that makes sense as you would busy wait
| [Sunday 13 February 2011] [10:53:30] &lt;sustrik&gt;        you still to have poll in I/O thread
| [Sunday 13 February 2011] [10:53:37] &lt;sustrik&gt;        if you emulate the named pipes
| [Sunday 13 February 2011] [10:53:47] &lt;sustrik&gt;        you still have to event the I/O thread
| [Sunday 13 February 2011] [10:53:55] &lt;sustrik&gt;        which can be done via TCP socket (slow)
| [Sunday 13 February 2011] [10:54:12] &lt;sustrik&gt;        other option would be something like Event object
| [Sunday 13 February 2011] [10:54:42] &lt;sustrik&gt;        but once again, you can&#8217;t poll on Event object using select()
| [Sunday 13 February 2011] [10:54:42] &lt;mikko&gt;  thinking out loud: optional dependency to libevent?
| [Sunday 13 February 2011] [10:55:02] &lt;mikko&gt;  new poller type which uses libevent or libev
| [Sunday 13 February 2011] [10:55:17] &lt;mikko&gt;  disabled by default but can be enabled during build
| [Sunday 13 February 2011] [10:55:42] &lt;sustrik&gt;        that would be more work than supporting IOCP natively IMO
| [Sunday 13 February 2011] [10:56:09] &lt;mikko&gt;  i really don&#8217;t know whats involved in adding support for IOCP
| [Sunday 13 February 2011] [10:56:46] &lt;Guthur&gt; does steve-o come on irc
| [Sunday 13 February 2011] [10:56:55] &lt;mikko&gt;  yes
| [Sunday 13 February 2011] [10:57:02] &lt;mikko&gt;  he is here usually during the week
| [Sunday 13 February 2011] [10:57:10] &lt;mikko&gt;  he&#8217;s on NYC timezone
| [Sunday 13 February 2011] [10:57:17] &lt;mikko&gt;  EST?
| [Sunday 13 February 2011] [10:57:21] &lt;sustrik&gt;        still in NY?
| [Sunday 13 February 2011] [10:57:28] &lt;mikko&gt;  i thought so
| [Sunday 13 February 2011] [10:57:31] &lt;sustrik&gt;        he&#8217;s from hong kong
| [Sunday 13 February 2011] [10:57:52] &lt;mikko&gt;  yeah, i thought he was going to be in NYC for a longer period
| [Sunday 13 February 2011] [10:57:57] &lt;mikko&gt;  maybe i misunderstood
| [Sunday 13 February 2011] [10:57:59] &lt;sustrik&gt;        ah, no idea
| [Sunday 13 February 2011] [10:58:20] &lt;mikko&gt;  he was in NYC and referred to &#8220;buying a house&#8221; during that time. i thought he might be there for a while
| [Sunday 13 February 2011] [10:58:38] &lt;mikko&gt;  anyway, he does come here occasionally during the week
| [Sunday 13 February 2011] [11:00:13] &lt;Guthur&gt; there is a way to getting this IOCP working I&#8217;m sure
| [Sunday 13 February 2011] [11:01:11] &lt;Guthur&gt; I&#8217;m missing something regarding the identification of the various ops, I can know that an something is happening on a pipe, just not what that something is
| [Sunday 13 February 2011] [11:01:19] &lt;Guthur&gt; there has to be a way
| [Sunday 13 February 2011] [11:02:54] &lt;sustrik&gt;        Guthur: my impression so far is that event object is associated with particular I/O operation (Read/Write)
| [Sunday 13 February 2011] [11:03:03] &lt;sustrik&gt;        rather than Pipe as such
| [Sunday 13 February 2011] [11:03:18] &lt;Guthur&gt; yeah, that&#8217;s correct enough
| [Sunday 13 February 2011] [11:03:38] &lt;Guthur&gt; sorry if I drew you to a different conclusion before
| [Sunday 13 February 2011] [11:04:05] &lt;sustrik&gt;        ok, maybe i misunderstood what the problem is then
| [Sunday 13 February 2011] [11:05:18] &lt;Guthur&gt; `Orum on #winapi is posting some IOCP code, it might shed some light
| [Sunday 13 February 2011] [11:21:01] &lt;zchrish&gt;        I am performing a test to perform repeated zmq_init and zmq_term w/o performing any bind; is that permissible? I am noticing a memory leak after a continued run of this test.
| [Sunday 13 February 2011] [11:22:20] &lt;sustrik&gt;        zchrish: yes, it&#8217;s permissible
| [Sunday 13 February 2011] [11:22:24] &lt;sustrik&gt;        what&#8217;s the leak?
| [Sunday 13 February 2011] [11:23:58] &lt;zchrish&gt;        I am performing a &#8220;cout&#8221; of the context pointer and it is giving me a different value over time. I am watching &#8220;top&#8221; and the amount of memory required by my process is slowing growing. I am performing a zmq_init/zmq_term avery 1-2 seconds.
| [Sunday 13 February 2011] [11:24:37] &lt;mikko&gt;  zchrish: have you checked in valgrind?
| [Sunday 13 February 2011] [11:24:56] &lt;zchrish&gt;        Let me check; thanks.
| [Sunday 13 February 2011] [11:35:15] &lt;zchrish&gt;        Not sure whether the output of valgrind is related to the way I am using my program. I am creating threads which zmq_init and then zmq_term using a pthread_cleanup_push concept. After 20 iterations, I close the master thread which closes the main program. But I don&#8217;t know whether this closing affects the slave threads which perform the zmq_init/zmq_term.
| [Sunday 13 February 2011] [11:36:02] &lt;zchrish&gt;        ==22197== LEAK SUMMARY:
| [Sunday 13 February 2011] [11:36:02] &lt;zchrish&gt;        ==22197==    definitely lost: 0 bytes in 0 blocks
| [Sunday 13 February 2011] [11:36:02] &lt;zchrish&gt;        ==22197==    indirectly lost: 0 bytes in 0 blocks
| [Sunday 13 February 2011] [11:36:02] &lt;zchrish&gt;        ==22197==      possibly lost: 12,584 bytes in 43 blocks
| [Sunday 13 February 2011] [11:36:02] &lt;zchrish&gt;        ==22197==    still reachable: 4,552 bytes in 5 blocks
| [Sunday 13 February 2011] [11:36:02] &lt;zchrish&gt;        ==22197==         suppressed: 0 bytes in 0 blocks
| [Sunday 13 February 2011] [11:37:31] &lt;zchrish&gt;        I have 3 threads: (A) master and (B),(C) slave threads. In (B), (C), I peform zmq_init and zmq_term based on a simulated incident which indicates a problem.
| [Sunday 13 February 2011] [11:38:48] &lt;sustrik&gt;        run the valgrind with &#8211;leak-check=full
| [Sunday 13 February 2011] [11:38:58] &lt;sustrik&gt;        to find out what&#8217;s leaking
| [Sunday 13 February 2011] [11:39:07] &lt;zchrish&gt;        Anyway, it seems like the amount lost isn&#8217;t that much, if it is from 0mq, so I won&#8217;t worry about it at this point. I don&#8217;t expect to perform a zmq_term and zmq_init very often.
| [Sunday 13 February 2011] [11:43:52] &lt;zchrish&gt;        Hmm. I did this but I am not proficient enough with valgrind to properly interpret the results. The program is simple enough but I am not sure whether someone is interested in re-creating the situation. If so, I will upload somewhere.
| [Sunday 13 February 2011] [11:47:43] &lt;sustrik&gt;        yes. do so. i&#8217;ll have a look
| [Sunday 13 February 2011] [11:53:57] &lt;zchrish&gt;        I remember watching discussions about uploading to a website but I don&#8217;t remember; would you please let me know. Thank you.
| [Sunday 13 February 2011] [11:54:09] &lt;zchrish&gt;        I will upload it.
| [Sunday 13 February 2011] [11:55:56] &lt;sustrik&gt;        gist.github.com
| [Sunday 13 February 2011] [11:56:01] &lt;sustrik&gt;        place it there
| [Sunday 13 February 2011] [11:56:07] &lt;sustrik&gt;        post the link here
| [Sunday 13 February 2011] [11:57:44] &lt;Guthur&gt; sustrik, re: IOCP, what we can do is pass a custom overlapped struct to Connect, Read, Write etc, and this struct will be returned by IOCP
| [Sunday 13 February 2011] [11:58:15] &lt;Guthur&gt; so the custom struct can have a member containing and enum of the op type, for example
| [Sunday 13 February 2011] [11:58:54] &lt;sustrik&gt;        how would you physically perform the polling?
| [Sunday 13 February 2011] [11:59:05] &lt;sustrik&gt;        WaitForMultiple objects or what?
| [Sunday 13 February 2011] [11:59:19] &lt;Guthur&gt; GetQueuedCompletionStatus
| [Sunday 13 February 2011] [11:59:24] &lt;Guthur&gt; GetQueuedCompletionStatusEx
| [Sunday 13 February 2011] [11:59:25] &lt;zchrish&gt;        Not sure if this is the output result; this is my first gist upload....       gist: 824833
| [Sunday 13 February 2011] [11:59:50] &lt;sustrik&gt;        can you prpvide the link?
| [Sunday 13 February 2011] [12:00:20] &lt;zchrish&gt;        https://gist.github.com/824833
| [Sunday 13 February 2011] [12:00:29] &lt;zchrish&gt;        Is that right?
| [Sunday 13 February 2011] [12:00:36] &lt;zchrish&gt;        I think so.
| [Sunday 13 February 2011] [12:01:18] &lt;sustrik&gt;        ah
| [Sunday 13 February 2011] [12:01:30] &lt;sustrik&gt;        i meant, can you provide the valgrind output?
| [Sunday 13 February 2011] [12:01:44] &lt;zchrish&gt;        Oh, sorry. Let me do another.
| [Sunday 13 February 2011] [12:03:00] &lt;sustrik&gt;        Guthur: I see
| [Sunday 13 February 2011] [12:03:12] &lt;sustrik&gt;        so, a completion port
| [Sunday 13 February 2011] [12:03:29] &lt;sustrik&gt;        is actually a queue of pointers to OVERLAPPED structures
| [Sunday 13 February 2011] [12:05:38] &lt;zchrish&gt;        https://gist.github.com/824840
| [Sunday 13 February 2011] [12:05:43] &lt;zchrish&gt;        is the valgrind output
| [Sunday 13 February 2011] [12:07:13] &lt;sustrik&gt;        thanks
| [Sunday 13 February 2011] [12:08:22] &lt;Guthur&gt; sustrik, essentially yes
| [Sunday 13 February 2011] [12:08:28] &lt;Guthur&gt; there is also a completion key
| [Sunday 13 February 2011] [12:08:43] &lt;Guthur&gt; it&#8217;s quite common to place the handle of the socket in that
| [Sunday 13 February 2011] [12:08:58] &lt;Guthur&gt; or some other context struct
| [Sunday 13 February 2011] [12:09:19] &lt;sustrik&gt;        ack
| [Sunday 13 February 2011] [12:09:27] &lt;sustrik&gt;        that seems reasonable
| [Sunday 13 February 2011] [12:09:33] &lt;Guthur&gt; sustrik, does it sound like it will fullfil 0MQs needs?
| [Sunday 13 February 2011] [12:09:40] &lt;sustrik&gt;        definitely
| [Sunday 13 February 2011] [12:09:48] &lt;Guthur&gt; sweet
| [Sunday 13 February 2011] [12:10:13] &lt;sustrik&gt;        you&#8217;ll simply have a I/O thread loop with GetIOCompletionStatus
| [Sunday 13 February 2011] [12:10:39] &lt;sustrik&gt;        should be relativelty easy
| [Sunday 13 February 2011] [12:14:48] &lt;Guthur&gt; so, do you want me put some code together for an implementation of epoll et al. using IOCP
| [Sunday 13 February 2011] [12:15:14] &lt;sustrik&gt;        definitely
| [Sunday 13 February 2011] [12:15:34] &lt;sustrik&gt;        try to hack something
| [Sunday 13 February 2011] [12:15:45] &lt;sustrik&gt;        feel free to ask about 0mq details in the process
| [Sunday 13 February 2011] [12:16:13] &lt;Guthur&gt; will do, cheers to all for the help so far
| [Sunday 13 February 2011] [12:16:39] &lt;Guthur&gt; I need to do something else tonight, for MSc thesis, but I&#8217;ll continue with the IOCP this week
| [Sunday 13 February 2011] [12:18:22] &lt;sustrik&gt;        great
| [Sunday 13 February 2011] [12:18:59] &lt;Guthur&gt; just as an aside: according to wiki  IOCP is also available on Solaris 10+
| [Sunday 13 February 2011] [12:19:11] &lt;Guthur&gt; is ZMQ on solaris?
| [Sunday 13 February 2011] [12:19:55] &lt;sustrik&gt;        sure
| [Sunday 13 February 2011] [12:20:13] &lt;sustrik&gt;        but i think solaris I/O completion ports are a different beast
| [Sunday 13 February 2011] [12:20:23] &lt;Guthur&gt; yeah probably
| [Sunday 13 February 2011] [12:20:41] &lt;Guthur&gt; not like I have a solaris box hanging around anyway, hehe
| [Sunday 13 February 2011] [12:21:17] &lt;sustrik&gt;        i recall we&#8217;ve investigated polling mechanisms in solris quite a long time ago
| [Sunday 13 February 2011] [12:21:33] &lt;sustrik&gt;        and devided to go with /dev/poll rather than completion ports
| [Sunday 13 February 2011] [12:23:14] &lt;Guthur&gt; if I can help bring IOCP on windows to 0MQ i&#8217;ll be happy enough
| [Sunday 13 February 2011] [13:16:23] &lt;sustrik&gt;        zchrish: it looks like you are not terminating your threads cleanly
| [Sunday 13 February 2011] [13:44:18] &lt;ianbarber&gt;      m to the k (delayed response goodness)
| [Sunday 13 February 2011] [13:51:29] &lt;zchrish&gt;        I see; any pointer is appreciated. Thanks.
| [Sunday 13 February 2011] [14:28:05] &lt;sustrik&gt;        zchrish: pthread_cancel basically means you kill the thread
| [Sunday 13 February 2011] [14:28:30] &lt;sustrik&gt;        what you should do instead is to pthread_join it
| [Sunday 13 February 2011] [16:54:57] &lt;eut&gt;    cremes, i think that the delay or whatever in nonblocking packet delivery is manageable. if things on my end are designed properly then it shouldn&#8217;t be a problem.
| [Sunday 13 February 2011] [16:55:11] &lt;bitweiler&gt;      hey using a publisher, socket should the publisher receive some request?
| [Sunday 13 February 2011] [16:55:39] &lt;eut&gt;    bitweiler, no
| [Sunday 13 February 2011] [16:55:58] &lt;bitweiler&gt;      eut: why is that?
| [Sunday 13 February 2011] [16:56:08] &lt;eut&gt;    http://api.zeromq.org/zmq_socket.html see summary of ZMQ_PUB characteristics. it is unidirectional and send only
| [Sunday 13 February 2011] [16:56:24] &lt;bitweiler&gt;      okay thanks
| [Sunday 13 February 2011] [17:01:03] &lt;bitweiler&gt;      what is meant by: The zmq_send() function is not implemented for this socket type. where socket type is ZMQ_SUB
| [Sunday 13 February 2011] [17:04:13] &lt;eut&gt;    did you bind or connect to this socket?
| [Sunday 13 February 2011] [17:04:45] &lt;bitweiler&gt;      yes, I bind in the server side and connect on the client side
| [Sunday 13 February 2011] [17:05:18] &lt;eut&gt;    whoops
| [Sunday 13 February 2011] [17:05:21] &lt;bitweiler&gt;      but I&#8217;m getting nothing on the client side in response
| [Sunday 13 February 2011] [17:05:31] &lt;mikko&gt;  bitweiler: are you subscribing
| [Sunday 13 February 2011] [17:05:38] &lt;eut&gt;    see that page i linked to earlier for description of ZMQ_SUB
| [Sunday 13 February 2011] [17:05:40] &lt;mikko&gt;  thats the most common thing causing messages not to be received
| [Sunday 13 February 2011] [17:06:09] &lt;eut&gt;    ZMQ_SUB is unidirectional receive only... you cannot send...
| [Sunday 13 February 2011] [17:07:57] &lt;bitweiler&gt;      mikko: yes I&#8217;m subscribing
| [Sunday 13 February 2011] [17:08:29] &lt;eut&gt;    i have a question about the xrep/xreq sockets. on the xreq side i have set the socket identity to some 4 byte long string (&#8220;1110&#8221;). when i send a message, on the xrep side, i&#8217;m getting a 17 byte long response in the first received part.
| [Sunday 13 February 2011] [17:08:52] &lt;mikko&gt;  eut: you get three messages
| [Sunday 13 February 2011] [17:09:11] &lt;mikko&gt;  one with identity, empty message and the actual message
| [Sunday 13 February 2011] [17:09:40] &lt;mikko&gt;  you should send in xreq side in that fashion as well
| [Sunday 13 February 2011] [17:10:06] &lt;mikko&gt;  identity (ZMQ_SNDMORE set), empty message (ZMQ_SNDMORE set), message
| [Sunday 13 February 2011] [17:10:54] &lt;eut&gt;    i thought that zmq takes care of prepending the socket identity and empty message when sending from a xreq socket
| [Sunday 13 February 2011] [17:11:53] &lt;mikko&gt;  let me check the code, it&#8217;s been a while since i used xreq/xreq
| [Sunday 13 February 2011] [17:14:14] &lt;eut&gt;    i hope it doesnt matter... but the xrep side is in lua and the xreq side is c
| [Sunday 13 February 2011] [17:18:25] &lt;mikko&gt;  yes, client side prepends
| [Sunday 13 February 2011] [17:18:36] &lt;mikko&gt;  on xrep side you should receive multiple messages
| [Sunday 13 February 2011] [17:18:43] &lt;mikko&gt;  check for ZMQ_RCVMORE
| [Sunday 13 February 2011] [17:21:25] &lt;eut&gt;    yes
| [Sunday 13 February 2011] [17:21:49] &lt;mikko&gt;  does the lua binding expose that?
| [Sunday 13 February 2011] [17:21:58] &lt;eut&gt;    it exposes getsockopt
| [Sunday 13 February 2011] [17:22:11] &lt;eut&gt;    i&#8217;m able to see that more messages parts are there
| [Sunday 13 February 2011] [17:22:38] &lt;mikko&gt;  how are you replying with xreq?
| [Sunday 13 February 2011] [17:22:57] &lt;eut&gt;    i&#8217;m not replying at all yet, i&#8217;m just trying to interpret the received messages correctly.
| [Sunday 13 February 2011] [17:23:31] &lt;mikko&gt;  can i see the xrep code?
| [Sunday 13 February 2011] [17:23:50] &lt;mikko&gt;  trying to focus on too many things at once
| [Sunday 13 February 2011] [17:24:16] &lt;eut&gt;    sure
| [Sunday 13 February 2011] [17:26:05] &lt;eut&gt;    http://codepad.org/TqP35vOT
| [Sunday 13 February 2011] [17:27:20] &lt;mikko&gt;  what about xreq?
| [Sunday 13 February 2011] [17:27:50] &lt;eut&gt;    whoops, this is more correct xrep code: http://codepad.org/YfZepWdv
| [Sunday 13 February 2011] [17:27:57] &lt;eut&gt;    a moment for xreq
| [Sunday 13 February 2011] [17:35:40] &lt;eut&gt;    xreq code: http://codepad.org/3SFTxCwh
| [Sunday 13 February 2011] [17:37:36] &lt;Guthur&gt; are you not suppose to set the identity before connecting
| [Sunday 13 February 2011] [17:38:32] &lt;eut&gt;    this is the output i&#8217;m getting and what i expect should happen: http://codepad.org/PSnx9yqX
| [Sunday 13 February 2011] [17:38:48] &lt;eut&gt;    the first part of the multipart message is 17 bytes for some reason...
| [Sunday 13 February 2011] [17:39:18] &lt;eut&gt;    the identity was set to &#8220;222&#8221; so i dont understand what is going on
| [Sunday 13 February 2011] [17:40:30] &lt;Guthur&gt; from guide: If you want to set an identity you must do it before connecting or binding the socket.
| [Sunday 13 February 2011] [17:40:42] &lt;Guthur&gt; you connect then set the identity in that code
| [Sunday 13 February 2011] [17:40:59] &lt;Guthur&gt; the one for the xreq
| [Sunday 13 February 2011] [17:41:15] &lt;eut&gt;    :D
| [Sunday 13 February 2011] [17:41:24] &lt;eut&gt;    it works. thanks very much
| [Sunday 13 February 2011] [17:41:38] &lt;Guthur&gt; you&#8217;re welcome
| [Sunday 13 February 2011] [17:41:55] &lt;Guthur&gt; it actually should mention that in the manual
| [Sunday 13 February 2011] [17:42:06] &lt;Guthur&gt; i&#8217;m surprised it doesn&#8217;t actually
| [Sunday 13 February 2011] [17:42:30] &lt;eut&gt;    it would make a nice addition to the zmq_socket api page
| [Sunday 13 February 2011] [17:42:45] &lt;eut&gt;    err, setsockopt
| [Sunday 13 February 2011] [17:42:51] &lt;Guthur&gt; yeah I agree
| [Sunday 13 February 2011] [17:43:25] &lt;eut&gt;    do all options need to be set prior to connecting? or are some more flexible?
| [Sunday 13 February 2011] [17:43:42] &lt;Guthur&gt; no identity is special
| [Sunday 13 February 2011] [17:44:01] &lt;Guthur&gt; it makes sense that it needs to be before connecting, in a way
| [Sunday 13 February 2011] [17:44:13] &lt;Guthur&gt; though it might be nice to be able to change an identity
| [Sunday 13 February 2011] [17:45:03] &lt;Guthur&gt; after connecting, but things could get confusing then, and packet delivery might go terribly wrong
| [Sunday 13 February 2011] [17:45:12] &lt;eut&gt;    right
| [Sunday 13 February 2011] [17:45:46] &lt;eut&gt;    i think its fine the way it is, but it would help to have the api docs updated
| [Sunday 13 February 2011] [17:46:21] &lt;Guthur&gt; yeah, I&#8217;ll submit a patch
| [Sunday 13 February 2011] [17:46:33] &lt;Guthur&gt; there was another thing I wanted to submit for the docs anyway
| [Sunday 13 February 2011] [17:46:49] &lt;eut&gt;    ok sure, thanks for the help
| [Sunday 13 February 2011] [17:47:10] &lt;Guthur&gt; sure, anytime
| [Sunday 13 February 2011] [17:48:18] &lt;eut&gt;    is the development branch github.com/zeromq/zeromq2?
| [Sunday 13 February 2011] [17:49:29] &lt;mikko&gt;  eut: yes
| [Sunday 13 February 2011] [17:49:39] &lt;mikko&gt;  sorry, had to jet for a minute
| [Sunday 13 February 2011] [17:50:02] &lt;mikko&gt;  17 part response is UUID most likely, should&#8217;ve catched that
| [Sunday 13 February 2011] [17:50:12] &lt;mikko&gt;  17 char part*
| [Sunday 13 February 2011] [17:50:48] &lt;eut&gt;    ah, and of course its binary data so it wont display as normal text
| [Sunday 13 February 2011] [17:54:25] &lt;Guthur&gt; mikko, do you think the api documentation for setsockopt identity should mention that it has to be set before bind/connect?
| [Sunday 13 February 2011] [17:54:35] &lt;Guthur&gt; and if so should it be a caution note?
| [Sunday 13 February 2011] [17:54:40] &lt;mikko&gt;  Guthur: i think majority of them should mention it
| [Sunday 13 February 2011] [17:54:55] &lt;mikko&gt;  like HWM affects only subsequent binds/connects
| [Sunday 13 February 2011] [17:55:06] &lt;sustrik&gt;        all of them, actually
| [Sunday 13 February 2011] [17:55:08] &lt;Guthur&gt; oh, I thought some didn&#8217;t matter
| [Sunday 13 February 2011] [17:55:09] &lt;eut&gt;    is the delimiter message necessary if only going directly from xrep &lt;-&gt; xreq? it seems like it is only useful for chains longer than two nodes
| [Sunday 13 February 2011] [17:55:31] &lt;Guthur&gt; good to know
| [Sunday 13 February 2011] [17:55:47] &lt;sustrik&gt;        it should be mentioned in the docs, you are right
| [Sunday 13 February 2011] [17:56:05] &lt;mikko&gt;  i ended up doing a patch for jenkins after running an issue with build slaves
| [Sunday 13 February 2011] [17:56:23] &lt;mikko&gt;  hopefully they&#8217;ll accept it
| [Sunday 13 February 2011] [17:56:33] &lt;sustrik&gt;        congrats!
| [Sunday 13 February 2011] [17:56:37] &lt;sustrik&gt;        what was wrong there
| [Sunday 13 February 2011] [17:56:39] &lt;sustrik&gt;        ?
| [Sunday 13 February 2011] [17:56:50] &lt;mikko&gt;  it adds ssl between slave and master
| [Sunday 13 February 2011] [17:56:54] &lt;Guthur&gt; is there any opts it doesn&#8217;t matter for?
| [Sunday 13 February 2011] [17:56:55] &lt;mikko&gt;  rather than having to use stunnel
| [Sunday 13 February 2011] [17:57:06] &lt;mikko&gt;  good for WAN connected slaves
| [Sunday 13 February 2011] [17:57:14] &lt;sustrik&gt;        ack
| [Sunday 13 February 2011] [17:57:27] &lt;sustrik&gt;        Guthur: the system applies to all the options
| [Sunday 13 February 2011] [17:57:33] &lt;mikko&gt;  what are the big todo items for 2.1.x stable ?
| [Sunday 13 February 2011] [17:57:49] &lt;Guthur&gt; sustrik, ack
| [Sunday 13 February 2011] [17:58:28] &lt;mikko&gt;  i think it might be useful at some point to look into the todo items and sort them by value and effort
| [Sunday 13 February 2011] [17:58:39] &lt;Guthur&gt; except for subscription string though, correct?
| [Sunday 13 February 2011] [17:58:50] &lt;Guthur&gt; strings*
| [Sunday 13 February 2011] [17:59:02] &lt;mikko&gt;  that way people needing those features would have a place to check &#8220;rough estimation&#8221; and possibly chip in
| [Sunday 13 February 2011] [17:59:14] &lt;mikko&gt;  currently todo-list is github tickets mainly (?)
| [Sunday 13 February 2011] [18:01:17] &lt;mikko&gt;  http://sourceforge.net/projects/udt/forums/forum/393036/topic/4061830
| [Sunday 13 February 2011] [18:01:35] &lt;mikko&gt;  interesting, as this seems like the feature that would allow integrating udt with minimal pain
| [Sunday 13 February 2011] [18:09:03] &lt;Guthur&gt; I updated the docs on a my fork, should I just submit a pull request?
| [Sunday 13 February 2011] [18:09:29] &lt;mikko&gt;  i think currently things go as signed patches over the mailing lists
| [Sunday 13 February 2011] [18:10:39] &lt;Guthur&gt; ah ok
| [Sunday 13 February 2011] [18:36:36] &lt;Guthur&gt; I have two minor doc updates, should they be separate patches?
| [Monday 14 February 2011] [02:19:17] &lt;sustrik&gt;        mikko: yes, clear roadmap to 2.1 would be nice
| [Monday 14 February 2011] [02:20:21] &lt;sustrik&gt;        however, i am not sure how to manage it within a distributed development model
| [Monday 14 February 2011] [02:20:37] &lt;sustrik&gt;        would it mean that patches out of scope of the roadmap are not accepted?
| [Monday 14 February 2011] [04:45:17] &lt;mikko&gt;  sustrik: sure they would
| [Monday 14 February 2011] [04:45:23] &lt;mikko&gt;  sustrik: im talking about feature roadmap
| [Monday 14 February 2011] [04:45:36] &lt;mikko&gt;  things that we know needs to be done
| [Monday 14 February 2011] [05:30:46] &lt;mikko&gt;  pieterh: there?
| [Monday 14 February 2011] [05:31:29] &lt;pieterh&gt;        mikko: hi
| [Monday 14 February 2011] [05:31:51] &lt;mikko&gt;  pieterh: is pkgconfig dependency acceptable in zfl?
| [Monday 14 February 2011] [05:32:43] &lt;pieterh&gt;        you mean autoconf tooling?
| [Monday 14 February 2011] [05:33:58] &lt;mikko&gt;  yes
| [Monday 14 February 2011] [05:34:01] &lt;sustrik&gt;        mikko: there&#8217;s 3.0 roadmap
| [Monday 14 February 2011] [05:34:11] &lt;mikko&gt;  pieterh: let me show you a patch
| [Monday 14 February 2011] [05:34:15] &lt;mikko&gt;  sec
| [Monday 14 February 2011] [05:34:19] &lt;pieterh&gt;        mikko: I used the same framework as for zmq
| [Monday 14 February 2011] [05:34:30] &lt;pieterh&gt;        but all suggestions welcome, of course
| [Monday 14 February 2011] [05:34:42] &lt;mikko&gt;  pieterh: https://github.com/mkoppanen/zfl/commit/25219e93d42e8fff6fac696c7ebcbe6e661fa2c3
| [Monday 14 February 2011] [05:34:52] &lt;mikko&gt;  pieterh: i sent one pull request for mingw32 fixes earlier
| [Monday 14 February 2011] [05:35:05] &lt;mikko&gt;  that can be rewritten without pkgconfig as well
| [Monday 14 February 2011] [05:35:09] &lt;mikko&gt;  to remove the dependency
| [Monday 14 February 2011] [05:35:36] &lt;pieterh&gt;        sorry to be ignorant... I&#8217;m not even sure what pkgconfig is/does
| [Monday 14 February 2011] [05:36:07] &lt;mikko&gt;  NAME pkg-config - Return metainformation about installed libraries
| [Monday 14 February 2011] [05:36:15] &lt;pieterh&gt;        right
| [Monday 14 February 2011] [05:36:33] &lt;mikko&gt;  cflags, libs to link etc
| [Monday 14 February 2011] [05:36:45] &lt;pieterh&gt;        if you&#8217;re happier removing the dependency, that&#8217;s fine by me
| [Monday 14 February 2011] [05:37:00] &lt;mikko&gt;  ok, ill tinker with it this evening
| [Monday 14 February 2011] [05:37:07] &lt;mikko&gt;  the mingw32 fix is more straight-forward
| [Monday 14 February 2011] [05:37:08] &lt;mikko&gt;  https://github.com/mkoppanen/zfl/commit/ce88c706fc0c1bb023cc422e0c707a1a90a07fe8
| [Monday 14 February 2011] [05:37:18] &lt;pieterh&gt;        let me apply that mingw32 patch then...
| [Monday 14 February 2011] [05:37:21] &lt;mikko&gt;  the assumption before was that build happens on linux if gnu compiler is used
| [Monday 14 February 2011] [05:37:38] &lt;mikko&gt;  so -DLINUX got defined in mingw32 and bsd
| [Monday 14 February 2011] [05:37:40] &lt;mikko&gt;  etc
| [Monday 14 February 2011] [05:37:45] &lt;pieterh&gt;        right
| [Monday 14 February 2011] [05:38:03] &lt;pieterh&gt;        there is some plausible benefit in having zfl build the same way as zeromq2
| [Monday 14 February 2011] [05:38:41] &lt;pieterh&gt;        and i assume you made a similar patch for the zeromq2 configure.in?
| [Monday 14 February 2011] [05:38:57] &lt;mikko&gt;  pieterh: zeromq2 hasn&#8217;t had that in ages
| [Monday 14 February 2011] [05:39:12] &lt;pieterh&gt;        the dependency, you mean?
| [Monday 14 February 2011] [05:39:14] &lt;pieterh&gt;        aight
| [Monday 14 February 2011] [05:39:23] &lt;mikko&gt;  the dependency to pkg-config can be removed
| [Monday 14 February 2011] [05:39:28] &lt;mikko&gt;  ill make a clean patch this evening
| [Monday 14 February 2011] [05:39:33] &lt;pieterh&gt;        nice
| [Monday 14 February 2011] [05:39:44] &lt;mikko&gt;  i think it&#8217;s easier for users to do: ./configure &#8211;with-libzmq=/usr/local
| [Monday 14 February 2011] [05:39:56] &lt;mikko&gt;  rather than having to specify CFLAGS and LDFLAGS
| [Monday 14 February 2011] [05:40:47] &lt;mikko&gt;  this is really more zfl specific as it uses zeromq as a dependency
| [Monday 14 February 2011] [05:41:33] &lt;mikko&gt;  i&#8217;ll add zfl build on solaris and freebsd at some point
| [Monday 14 February 2011] [05:48:53] &lt;pieterh&gt;        mikko: pull request merged
| [Monday 14 February 2011] [05:49:02] &lt;mikko&gt;  pieterh: will run mingw32 build now
| [Monday 14 February 2011] [05:49:03] &lt;mikko&gt;  sec
| [Monday 14 February 2011] [05:49:41] &lt;mikko&gt;  mingw32 and linux builds running now
| [Monday 14 February 2011] [05:49:46] &lt;pieterh&gt;        on linux it looks in /usr/local by default, right?
| [Monday 14 February 2011] [05:49:57] &lt;mikko&gt;  nope
| [Monday 14 February 2011] [05:50:20] &lt;pieterh&gt;        hmm, so how does this work on all my linux boxes without any special options...?
| [Monday 14 February 2011] [05:50:36] &lt;mikko&gt;  you&#8217;ve added /usr/local to runtime linkers conf
| [Monday 14 February 2011] [05:50:39] &lt;mikko&gt;  ?
| [Monday 14 February 2011] [05:50:41] &lt;mikko&gt;  or your distro adds it
| [Monday 14 February 2011] [05:50:44] &lt;pieterh&gt;        let me check...
| [Monday 14 February 2011] [05:50:55] &lt;mikko&gt;  cd /etc/ld.so.conf.d/
| [Monday 14 February 2011] [05:51:02] &lt;pieterh&gt;        LD_LIBRARY_PATH...
| [Monday 14 February 2011] [05:51:28] &lt;mikko&gt;  https://build.valokuva.org/job/zfl-master_ZeroMQ2-master_mingw32/19/
| [Monday 14 February 2011] [05:51:30] &lt;mikko&gt;  mingw builds now
| [Monday 14 February 2011] [05:51:38] &lt;mikko&gt;  and linux builds as well
| [Monday 14 February 2011] [05:52:02] &lt;mikko&gt;  this is how i got it configured on build box:
| [Monday 14 February 2011] [05:52:03] &lt;mikko&gt;  CFLAGS=&#8221;-I${ZEROMQ2_PREFIX_MASTER_MINGW32}/include&#8221; LDFLAGS=&#8221;-L${ZEROMQ2_PREFIX_MASTER_MINGW32}/lib&#8221; ./configure &#8211;target=mingw32 &#8211;build=i686-linux &#8211;host=i586-mingw32msvc
| [Monday 14 February 2011] [05:52:19] &lt;mikko&gt;  for mingw32
| [Monday 14 February 2011] [05:52:34] &lt;mikko&gt;  linux is: CFLAGS=&#8221;-I${ZEROMQ2_PREFIX_MASTER_GCC}/include&#8221; LDFLAGS=&#8221;-L${ZEROMQ2_PREFIX_MASTER_GCC}/lib&#8221; ./configure
| [Monday 14 February 2011] [05:54:17] &lt;pieterh&gt;        hmm, I don&#8217;t seem to need any of that... need to investigate
| [Monday 14 February 2011] [05:55:03] &lt;mikko&gt;  pieterh: the macro you use uses runtime linker
| [Monday 14 February 2011] [05:55:13] &lt;mikko&gt;  so if you got it configured then it should work (not sure about includes)
| [Monday 14 February 2011] [05:55:44] &lt;stimpie&gt;        I need to implement a push-pull with a custom loadbalancing strategy, what would be the recommend method? adjust the source and create a new socket type? implement it using PAIR&#8217;s?
| [Monday 14 February 2011] [05:55:52] &lt;mikko&gt;  do echo | gcc -v -x c -E -
| [Monday 14 February 2011] [05:55:59] &lt;mikko&gt;  and check for default includes
| [Monday 14 February 2011] [05:56:30] &lt;pieterh&gt;        mikko: yes, gcc goes looking in /usr/local/include
| [Monday 14 February 2011] [05:57:07] &lt;pieterh&gt;        stimpie, read the Guide and Ch3 on custom routing using XREP sockets
| [Monday 14 February 2011] [05:57:25] &lt;pieterh&gt;        to do custom routing you *always* use an XREP socket
| [Monday 14 February 2011] [06:01:06] &lt;pieterh&gt;        mikko: IMO it&#8217;s Ubuntu doing smart stuff with gcc configuration
| [Monday 14 February 2011] [06:01:07] &lt;stimpie&gt;        pieterh, ok thanks I will do some more reading
| [Monday 14 February 2011] [06:01:27] &lt;pieterh&gt;        stimpie, if it&#8217;s not clear in the Guide, let me know
| [Monday 14 February 2011] [06:02:04] &lt;mikko&gt;  pieterh: yes
| [Monday 14 February 2011] [06:02:17] &lt;mikko&gt;  pieterh: hence the build flag would be nice
| [Monday 14 February 2011] [06:02:24] &lt;pieterh&gt;        mikko: so basically any gcc system that is not set-up to look in /usr needs these build flags
| [Monday 14 February 2011] [06:02:25] &lt;pieterh&gt;        that&#8217;s clear
| [Monday 14 February 2011] [06:02:51] &lt;pieterh&gt;        feel free to change the README.txt file for zfl (patch)
| [Monday 14 February 2011] [06:03:12] &lt;mikko&gt;  pieterh: i&#8217;ll create a new patch to add the flag and update docs while im at it
| [Monday 14 February 2011] [06:03:38] &lt;mikko&gt;  probably won&#8217;t have time until this evening
| [Monday 14 February 2011] [06:04:21] &lt;pieterh&gt;        mikko: :-) there is no hurry
| [Monday 14 February 2011] [06:40:32] &lt;Guthur&gt; mikko: what was the link to your logs again?
| [Monday 14 February 2011] [06:40:48] &lt;mikko&gt;  http://valokuva.org/~mikko/zeromq.log
| [Monday 14 February 2011] [06:41:03] &lt;Guthur&gt; cheers, you don&#8217;t mind me using it?
| [Monday 14 February 2011] [06:41:42] &lt;mikko&gt;  don&#8217;t like to it if possbly
| [Monday 14 February 2011] [06:41:46] &lt;mikko&gt;  possible*
| [Monday 14 February 2011] [06:42:36] &lt;Guthur&gt; oh no certainly, it was just for my personal use
| [Monday 14 February 2011] [06:42:44] &lt;Guthur&gt; to check anything I missed
| [Monday 14 February 2011] [06:42:49] &lt;mikko&gt;  thats fine
| [Monday 14 February 2011] [06:43:59] &lt;Guthur&gt; i see the talk of 2.1 roadmap earlier, this for movement to a stable release I assume?
| [Monday 14 February 2011] [06:52:25] &lt;sustrik&gt;        yeah
| [Monday 14 February 2011] [06:52:36] &lt;sustrik&gt;        i am not sure how to fomalise it though
| [Monday 14 February 2011] [06:58:11] &lt;Guthur&gt; sustrik: are there many outstanding issues?
| [Monday 14 February 2011] [06:58:20] &lt;mikko&gt;  gant chart!
| [Monday 14 February 2011] [06:59:02] &lt;sustrik&gt;        :)
| [Monday 14 February 2011] [06:59:12] &lt;sustrik&gt;        the problem is that everyone here is a volunteer
| [Monday 14 February 2011] [06:59:21] &lt;sustrik&gt;        so there&#8217;s no way to estimate anything
| [Monday 14 February 2011] [07:01:18] &lt;Guthur&gt; are the issues prioritized at all yet?
| [Monday 14 February 2011] [07:01:58] &lt;sustrik&gt;        what would that be good for?
| [Monday 14 February 2011] [07:02:43] &lt;Guthur&gt; well maybe there are some that must be resolved and some that would be nice to have resolved
| [Monday 14 February 2011] [07:03:08] &lt;Guthur&gt; I&#8217;ve not looked at the issues though, so I don&#8217;t know what there is
| [Monday 14 February 2011] [07:03:19] &lt;Guthur&gt; is it just the list on github?
| [Monday 14 February 2011] [07:03:29] &lt;sustrik&gt;        well, the point is that even an issue with highest priority won&#8217;t be solved unless someone decides to solve it
| [Monday 14 February 2011] [07:03:42] &lt;sustrik&gt;        so having priorities is kind of mute
| [Monday 14 February 2011] [07:06:23] &lt;Guthur&gt;  very true
| [Monday 14 February 2011] [07:08:10] &lt;Guthur&gt; though from the github issue list it seems hard to know what is an issue stopping 2.1 becoming stable
| [Monday 14 February 2011] [07:08:24] &lt;Guthur&gt; what/which
| [Monday 14 February 2011] [07:09:03] &lt;sustrik&gt;        there&#8217;s no formal criterion
| [Monday 14 February 2011] [07:09:26] &lt;sustrik&gt;        if people are happy with stability of 2.1 it will become stable
| [Monday 14 February 2011] [07:10:10] &lt;sustrik&gt;        i think it has to do with migration to 2.1
| [Monday 14 February 2011] [07:10:19] &lt;sustrik&gt;        some people have switched already
| [Monday 14 February 2011] [07:10:22] &lt;sustrik&gt;        some have not
| [Monday 14 February 2011] [07:12:10] &lt;sustrik&gt;        if there&#8217;s enough people using 2.1 in prodution, i believe we can make it &#8220;stable&#8221;
| [Monday 14 February 2011] [07:20:34] &lt;Guthur&gt; is 0MQ then working towards a 2.2 after that
| [Monday 14 February 2011] [07:22:06] &lt;sustrik&gt;        either 2.2 or 3.0
| [Monday 14 February 2011] [07:22:18] &lt;sustrik&gt;        depends on overall sentiment of the community
| [Monday 14 February 2011] [07:27:44] &lt;Guthur&gt; is the MQ/3.0 Roadmap up to date with current desires for 3.0?
| [Monday 14 February 2011] [07:28:37] &lt;mikko&gt;  i got a couple of desires that i would like to get in later releases
| [Monday 14 February 2011] [07:28:46] &lt;mikko&gt;  but it will take some time to produce patches
| [Monday 14 February 2011] [07:29:08] &lt;mikko&gt;  investigating UDT is one and another one is PUSH/PULL acks
| [Monday 14 February 2011] [07:29:50] &lt;sustrik&gt;        mikko: ack
| [Monday 14 February 2011] [07:30:19] &lt;sustrik&gt;        Guthur: the distinction is that 2.2 has to be backward compatible
| [Monday 14 February 2011] [07:30:37] &lt;sustrik&gt;        while 3.0 can break backward compatibility
| [Monday 14 February 2011] [07:30:52] &lt;sustrik&gt;        so 3.0 is a chance to fix API bugs and mis-designs
| [Monday 14 February 2011] [07:31:18] &lt;sustrik&gt;        however, introducing incompatible API is a painful process
| [Monday 14 February 2011] [07:31:42] &lt;sustrik&gt;        so people may choose to stick with existing API and work on 2.2 instead
| [Monday 14 February 2011] [07:32:08] &lt;mikko&gt;  do we have any outstanding ones?
| [Monday 14 February 2011] [07:32:18] &lt;sustrik&gt;        outstanding what?
| [Monday 14 February 2011] [07:32:27] &lt;mikko&gt;  &#8220;so 3.0 is a chance to fix API bugs and mis-designs&#8221;
| [Monday 14 February 2011] [07:32:34] &lt;mikko&gt;  api bugs and misdesign
| [Monday 14 February 2011] [07:32:38] &lt;sustrik&gt;        ah, many of them
| [Monday 14 February 2011] [07:32:47] &lt;sustrik&gt;        see socket option types
| [Monday 14 February 2011] [07:32:50] &lt;sustrik&gt;        they are a mess
| [Monday 14 February 2011] [07:34:00] &lt;Guthur&gt; is that the: Review the types of socket options for getsockopt/setsockopt (it&#8217;s kind of arbitrary now).
| [Monday 14 February 2011] [07:34:09] &lt;sustrik&gt;        another example: zero-copy should not be default
| [Monday 14 February 2011] [07:34:20] &lt;sustrik&gt;        zmq_send should look like POSIX send:
| [Monday 14 February 2011] [07:34:34] &lt;sustrik&gt;        zmq_send (void *buff, size_t size, int flags);
| [Monday 14 February 2011] [07:34:57] &lt;sustrik&gt;        Guthur: yes
| [Monday 14 February 2011] [07:38:48] &lt;sustrik&gt;        one intriguing option would be to provide both version of the API from the same library
| [Monday 14 February 2011] [07:39:02] &lt;sustrik&gt;        however, i am not sure whether that&#8217;s technically possible
| [Monday 14 February 2011] [07:40:30] &lt;Guthur&gt; like some compatibility layer on top the new API
| [Monday 14 February 2011] [07:40:49] &lt;sustrik&gt;        yep
| [Monday 14 February 2011] [07:40:56] &lt;mikko&gt;  LD_PRELOAD sumbols
| [Monday 14 February 2011] [07:40:59] &lt;mikko&gt;  symbols*
| [Monday 14 February 2011] [07:41:01] &lt;mikko&gt;  messy though
| [Monday 14 February 2011] [07:41:18] &lt;sustrik&gt;        not sure how portable that is
| [Monday 14 February 2011] [07:41:25] &lt;mikko&gt;  not very probably
| [Monday 14 February 2011] [07:41:41] &lt;sustrik&gt;        an alternative would be to export symbols such as:
| [Monday 14 February 2011] [07:41:44] &lt;sustrik&gt;        _zmq_init
| [Monday 14 February 2011] [07:41:47] &lt;sustrik&gt;        _zmq_socket
| [Monday 14 February 2011] [07:41:50] &lt;sustrik&gt;        etc.
| [Monday 14 February 2011] [07:41:59] &lt;sustrik&gt;        then have 2 header files
| [Monday 14 February 2011] [07:42:18] &lt;sustrik&gt;        containing simple inline functions
| [Monday 14 February 2011] [07:42:47] &lt;sustrik&gt;        that would call the appropriate _zmq routine
| [Monday 14 February 2011] [08:40:48] &lt;pieterh&gt;        sustrik: wrt 2.1 stable, IMO it&#8217;s self-regulating...
| [Monday 14 February 2011] [08:41:05] &lt;pieterh&gt;        when there are no patches for a certain period you can assume it&#8217;s stable
| [Monday 14 February 2011] [08:41:06] &lt;sustrik&gt;        yes, that&#8217;s what i was saying
| [Monday 14 February 2011] [08:41:19] &lt;pieterh&gt;        difficulty is when you mix old and new code, it can remain unstable forever
| [Monday 14 February 2011] [08:41:36] &lt;sustrik&gt;        ack
| [Monday 14 February 2011] [08:41:44] &lt;pieterh&gt;        i&#8217;d not take master HEAD to stable, ever
| [Monday 14 February 2011] [08:41:58] &lt;pieterh&gt;        but rather the 2.1 unstable + patches -&gt; stable
| [Monday 14 February 2011] [08:42:11] &lt;sustrik&gt;        i&#8217;ve missed that
| [Monday 14 February 2011] [08:42:32] &lt;pieterh&gt;        there is an unstable branch, no?
| [Monday 14 February 2011] [08:42:38] &lt;sustrik&gt;        master
| [Monday 14 February 2011] [08:42:51] &lt;pieterh&gt;        ah... well... this won&#8217;t be optimal then
| [Monday 14 February 2011] [08:43:03] &lt;pieterh&gt;        not if you develop on master
| [Monday 14 February 2011] [08:43:17] &lt;sustrik&gt;        development should go on on topic branches
| [Monday 14 February 2011] [08:43:29] &lt;pieterh&gt;        yes but then it does not get tested...
| [Monday 14 February 2011] [08:43:49] &lt;sustrik&gt;        true
| [Monday 14 February 2011] [08:43:51] &lt;pieterh&gt;        i think the basic principle is that any specific code ages and becomes stable (or unused) automatically
| [Monday 14 February 2011] [08:44:00] &lt;pieterh&gt;        like fine wine
| [Monday 14 February 2011] [08:44:08] &lt;sustrik&gt;        that&#8217;s the case with 2.1 i think
| [Monday 14 February 2011] [08:44:14] &lt;sustrik&gt;        people are already switching
| [Monday 14 February 2011] [08:44:24] &lt;pieterh&gt;        right but if you mix new wine with the old wine there is a problem
| [Monday 14 February 2011] [08:44:44] &lt;pieterh&gt;        you risk making a stable release that has relatively new, unproven code in it
| [Monday 14 February 2011] [08:45:21] &lt;sustrik&gt;        there&#8217;s still a maint branch
| [Monday 14 February 2011] [08:45:33] &lt;sustrik&gt;        bugs are still patched in maint
| [Monday 14 February 2011] [08:45:36] &lt;pieterh&gt;        this is something to discuss with Mato when he&#8217;s back from down-under
| [Monday 14 February 2011] [08:45:47] &lt;sustrik&gt;        yes
| [Monday 14 February 2011] [08:46:29] &lt;pieterh&gt;        if you can cleanly separate older code (6 months+) into its own branch you can push it to &#8216;stable&#8217; safely
| [Monday 14 February 2011] [08:46:43] &lt;pieterh&gt;        e.g. stuff like the socket shutdown mechanics from 2.1
| [Monday 14 February 2011] [08:47:02] &lt;mikko&gt;  but in that case you need to separate well-tested from old
| [Monday 14 February 2011] [08:47:12] &lt;pieterh&gt;        but it would be a pity to have e.g. the bug I found on win32 yesterday to still be in a &#8216;stable&#8217; release
| [Monday 14 February 2011] [08:47:22] &lt;mikko&gt;  older code that is implicitly used by everyone is more tested than some feature just used by some
| [Monday 14 February 2011] [08:47:28] &lt;pieterh&gt;        yeah
| [Monday 14 February 2011] [08:47:31] &lt;mikko&gt;  in the former you expect to see bugs quicker
| [Monday 14 February 2011] [08:47:39] &lt;pieterh&gt;        so you&#8217;d expect, IMO, to see
| [Monday 14 February 2011] [08:47:59] &lt;pieterh&gt;        - very stable (2.0.x), does not change except for major bugs
| [Monday 14 February 2011] [08:48:17] &lt;pieterh&gt;        - (almost) stable (2.1.x), maintained
| [Monday 14 February 2011] [08:48:26] &lt;pieterh&gt;        - raw (master HEAD)
| [Monday 14 February 2011] [08:48:38] &lt;pieterh&gt;        and all new work as rapidly as possible into HEAD
| [Monday 14 February 2011] [08:48:48] &lt;pieterh&gt;        e.g. xsub, xpub should be in HEAD now, so we actually test it
| [Monday 14 February 2011] [08:49:22] &lt;pieterh&gt;        but people have an &#8216;official latest&#8217; release to work with
| [Monday 14 February 2011] [08:49:43] &lt;pieterh&gt;        to have to choose between 2.0.x and HEAD is kind of painful
| [Monday 14 February 2011] [08:49:44] &lt;sustrik&gt;        that&#8217;s 2.1.0
| [Monday 14 February 2011] [08:49:50] &lt;pieterh&gt;        yeah, but it&#8217;s not maintained :-)
| [Monday 14 February 2011] [08:50:18] &lt;sustrik&gt;        wait a sec
| [Monday 14 February 2011] [08:50:24] &lt;sustrik&gt;        there are 3 things there&#8221;
| [Monday 14 February 2011] [08:50:39] &lt;sustrik&gt;        1. latest stable (2.0.10)
| [Monday 14 February 2011] [08:50:52] &lt;sustrik&gt;        2. latest dev (2.0.1)
| [Monday 14 February 2011] [08:50:55] &lt;sustrik&gt;        3. head
| [Monday 14 February 2011] [08:51:03] &lt;pieterh&gt;        2. latest dev (2.1.0) ?
| [Monday 14 February 2011] [08:51:13] &lt;sustrik&gt;        2.1.0, sorry
| [Monday 14 February 2011] [08:51:15] &lt;pieterh&gt;        ack
| [Monday 14 February 2011] [08:51:29] &lt;pieterh&gt;        let me add two things I think would help
| [Monday 14 February 2011] [08:51:50] &lt;pieterh&gt;        a. new code goes into HEAD asap, not topic branches unless extremely unstable
| [Monday 14 February 2011] [08:52:07] &lt;pieterh&gt;        b. latest dev is a branch and gets bug fixes from head
| [Monday 14 February 2011] [08:52:47] &lt;pieterh&gt;        rationale for a = faster testing of new code is very valuable
| [Monday 14 February 2011] [08:52:50] &lt;mikko&gt;  latest dev is bug fixes only?
| [Monday 14 February 2011] [08:52:56] &lt;pieterh&gt;        hmm, yes
| [Monday 14 February 2011] [08:53:02] &lt;pieterh&gt;        at least
| [Monday 14 February 2011] [08:53:05] &lt;sustrik&gt;        then it&#8217;s same as maint
| [Monday 14 February 2011] [08:53:09] &lt;mikko&gt;  so when do new features get in?
| [Monday 14 February 2011] [08:53:28] &lt;pieterh&gt;        well, this rolls around
| [Monday 14 February 2011] [08:53:31] &lt;mikko&gt;  and is new version branched of from HEAD?
| [Monday 14 February 2011] [08:53:36] &lt;pieterh&gt;        latest dev becomes stable at a certain point
| [Monday 14 February 2011] [08:53:41] &lt;pieterh&gt;        and then new dev is branched from head
| [Monday 14 February 2011] [08:53:49] &lt;pieterh&gt;        like I&#8217;d suggest 2.1.0 + patches is today ready for stable
| [Monday 14 February 2011] [08:53:56] &lt;pieterh&gt;        we want people to move off 2.0.10
| [Monday 14 February 2011] [08:54:11] &lt;pieterh&gt;        of course the packages can remain available
| [Monday 14 February 2011] [08:54:24] &lt;pieterh&gt;        but we don&#8217;t want people asking about stuff that was fixed 6 months ago
| [Monday 14 February 2011] [08:54:56] &lt;sustrik&gt;        i still don&#8217;t see why we need two maintenance branches instead of a single one
| [Monday 14 February 2011] [08:55:10] &lt;pieterh&gt;        because you have two generations of &#8216;officially released&#8217; code
| [Monday 14 February 2011] [08:55:22] &lt;pieterh&gt;        that is standard operating procedure
| [Monday 14 February 2011] [08:55:38] &lt;pieterh&gt;        and you need to maintain both branches
| [Monday 14 February 2011] [08:55:50] &lt;sustrik&gt;        me?
| [Monday 14 February 2011] [08:55:51] &lt;pieterh&gt;        while also having space for new functionality that is raw and liable to break
| [Monday 14 February 2011] [08:55:54] &lt;pieterh&gt;        not you
| [Monday 14 February 2011] [08:55:55] &lt;pieterh&gt;        one
| [Monday 14 February 2011] [08:55:57] &lt;pieterh&gt;         :-)
| [Monday 14 February 2011] [08:55:59] &lt;sustrik&gt;        :)
| [Monday 14 February 2011] [08:56:06] &lt;pieterh&gt;        i&#8217;m happy to do this
| [Monday 14 February 2011] [08:56:09] &lt;pieterh&gt;        i&#8217;ve said that often
| [Monday 14 February 2011] [08:56:33] &lt;mikko&gt;  if the process is being reviewed can we also look into using pull requests on github instead of signed patches?
| [Monday 14 February 2011] [08:56:42] &lt;pieterh&gt;        mikko: +1
| [Monday 14 February 2011] [08:57:29] &lt;pieterh&gt;        it allows the author of a patch to request explicitly that it be applied to a set of target branches
| [Monday 14 February 2011] [08:57:34] &lt;pieterh&gt;        and it creates an asynchronous workflow
| [Monday 14 February 2011] [08:57:36] &lt;pieterh&gt;        +100
| [Monday 14 February 2011] [08:58:56] &lt;sustrik&gt;        ok, we can have as many maintenance branches as we want
| [Monday 14 February 2011] [08:59:14] &lt;sustrik&gt;        have a look at linux, there are some 4-5 of them
| [Monday 14 February 2011] [08:59:25] &lt;pieterh&gt;        indeed
| [Monday 14 February 2011] [08:59:36] &lt;sustrik&gt;        as for new features, linux kernel uses concept of merge windows
| [Monday 14 February 2011] [08:59:50] &lt;mikko&gt;  do they still use the even and odd versions?
| [Monday 14 February 2011] [08:59:56] &lt;sustrik&gt;        nope
| [Monday 14 February 2011] [09:00:04] &lt;sustrik&gt;        basically, there&#8217;s a week or two in each cycle
| [Monday 14 February 2011] [09:00:15] &lt;sustrik&gt;        when people can ask their new code to be merged
| [Monday 14 February 2011] [09:00:26] &lt;pieterh&gt;        linux kernel processes are *weird*, they don&#8217;t always make good examples
| [Monday 14 February 2011] [09:00:32] &lt;sustrik&gt;        the rest of the cycle is used to stabilise the new codebase
| [Monday 14 February 2011] [09:01:33] &lt;sustrik&gt;        the merge windows eases the stabilisation process
| [Monday 14 February 2011] [09:02:10] &lt;sustrik&gt;        it makes the development of new features to happen in discrete steps
| [Monday 14 February 2011] [09:02:18] &lt;pieterh&gt;        i&#8217;d really avoid trying to imitate the Linux processes unless they solve real problems we face
| [Monday 14 February 2011] [09:02:44] &lt;mikko&gt;  i think one of the issues to solve is: clear and visible roadmap for new features
| [Monday 14 February 2011] [09:02:49] &lt;sustrik&gt;        well, this is the problem we face:
| [Monday 14 February 2011] [09:03:04] &lt;sustrik&gt;        the new fetures are merged in continuously
| [Monday 14 February 2011] [09:03:23] &lt;sustrik&gt;        so what you have is a shifting landscape
| [Monday 14 February 2011] [09:03:48] &lt;pieterh&gt;        i think the roadmap for 2.1 worked pretty well
| [Monday 14 February 2011] [09:04:00] &lt;pieterh&gt;        what sustrik says is right
| [Monday 14 February 2011] [09:04:07] &lt;pieterh&gt;        you cannot take a shifting landscape to stability
| [Monday 14 February 2011] [09:04:20] &lt;pieterh&gt;        today we have no way to produce a stable 2.1 release afaics
| [Monday 14 February 2011] [09:04:36] &lt;pieterh&gt;        except by putting all new work into topic branches and waiting for another 3 months
| [Monday 14 February 2011] [09:04:51] &lt;pieterh&gt;        and even then it would not be based on a real &#8216;unstable&#8217;
| [Monday 14 February 2011] [09:05:59] &lt;mikko&gt;  we don&#8217;t really classify incoming features much
| [Monday 14 February 2011] [09:06:29] &lt;sustrik&gt;        classify?
| [Monday 14 February 2011] [09:06:42] &lt;pieterh&gt;        mikko: you just need to ask Sustrik more often, &#8220;what are you going to make?&#8221; :-)
| [Monday 14 February 2011] [09:07:17] &lt;mikko&gt;  pieterh: im trying more and more be able to produce patches
| [Monday 14 February 2011] [09:07:30] &lt;Guthur&gt; i&#8217;d like to +1 the pull request, more from a laziness point of view, hehe
| [Monday 14 February 2011] [09:07:36] &lt;mikko&gt;  sustrik: we get a fair amount of feature requests
| [Monday 14 February 2011] [09:07:56] &lt;mikko&gt;  sustrik: which i think could be classified based on two factors: value and effort
| [Monday 14 February 2011] [09:08:04] &lt;mikko&gt;  maybe more factors needed but as a baseline
| [Monday 14 February 2011] [09:08:06] &lt;sustrik&gt;        i see
| [Monday 14 February 2011] [09:08:27] &lt;mikko&gt;  small effort, large value -&gt; you want to do those first
| [Monday 14 February 2011] [09:08:44] &lt;sustrik&gt;        in theory
| [Monday 14 February 2011] [09:08:46] &lt;mikko&gt;  large effort, large value -&gt; maybe schedule somewhere future
| [Monday 14 February 2011] [09:08:47] &lt;mikko&gt;  etc
| [Monday 14 February 2011] [09:08:56] &lt;sustrik&gt;        the reality is that everyone scratches his own itch
| [Monday 14 February 2011] [09:09:28] &lt;sustrik&gt;        so people are going to do work on what they need rather than on effort/value estimates
| [Monday 14 February 2011] [09:09:30] &lt;mikko&gt;  i think this would also give &#8216;tools&#8217; to people wanting to contribute
| [Monday 14 February 2011] [09:09:40] &lt;mikko&gt;  they could start from the small effort ones
| [Monday 14 February 2011] [09:09:53] &lt;mikko&gt;  sustrik: that is true as well
| [Monday 14 February 2011] [09:10:12] &lt;sustrik&gt;        sure, but do you really see people asking for something to do
| [Monday 14 February 2011] [09:10:14] &lt;sustrik&gt;        ?
| [Monday 14 February 2011] [09:10:56] &lt;sustrik&gt;        it&#8217;s rather like they choose what to do depending on what they want to use 0mq for
| [Monday 14 February 2011] [09:11:13] &lt;sustrik&gt;        GSoC may be a bit like what you have in mind
| [Monday 14 February 2011] [09:11:27] &lt;mikko&gt;  GSoC and also individuals
| [Monday 14 February 2011] [09:11:27] &lt;sustrik&gt;        but even with GSoC you just sketch some ideas
| [Monday 14 February 2011] [09:11:33] &lt;pieterh&gt;        mikko, what could be nice is an area on the wiki where people *ask* for help on areas
| [Monday 14 February 2011] [09:11:34] &lt;mikko&gt;  there are people who contribute just for the sake of it
| [Monday 14 February 2011] [09:11:47] &lt;pieterh&gt;        i.e. acting as mentors
| [Monday 14 February 2011] [09:11:48] &lt;sustrik&gt;        and people are free to work on something completely different
| [Monday 14 February 2011] [09:12:09] &lt;mikko&gt;  is it too late for GSoC this year?
| [Monday 14 February 2011] [09:12:13] &lt;sustrik&gt;        nope
| [Monday 14 February 2011] [09:12:31] &lt;sustrik&gt;        the applications are to be posted shortly
| [Monday 14 February 2011] [09:12:34] &lt;mikko&gt;  we should apply. i think there are a couple of things that GSoC students could do
| [Monday 14 February 2011] [09:13:19] &lt;pieterh&gt;        mikko: there is a page on the wiki with about 50 ideas
| [Monday 14 February 2011] [09:13:26] &lt;mikko&gt;  pieterh: which one?
| [Monday 14 February 2011] [09:13:46] &lt;pieterh&gt;        it should be visible from the main community page
| [Monday 14 February 2011] [09:13:49] &lt;pieterh&gt;        hang on...
| [Monday 14 February 2011] [09:14:03] &lt;pieterh&gt;        yeah
| [Monday 14 February 2011] [09:14:12] &lt;pieterh&gt;        http://www.zeromq.org/topics:google-summer-of-code
| [Monday 14 February 2011] [09:14:20] &lt;mikko&gt;  hot topics
| [Monday 14 February 2011] [09:16:20] &lt;pieterh&gt;        :-)
| [Monday 14 February 2011] [09:21:50] &lt;mikko&gt;  udt and sctp are on the list
| [Monday 14 February 2011] [09:21:57] &lt;mikko&gt;  both very interesting transports
| [Monday 14 February 2011] [09:22:22] &lt;mikko&gt;  sustrik: https://github.com/zeromq/zeromq2/issues/issue/160 is this likely to be major change?
| [Monday 14 February 2011] [09:23:15] &lt;Guthur&gt; From a prospective contributor point of view I think it would be nice to have a list of areas needing work
| [Monday 14 February 2011] [09:23:29] &lt;Guthur&gt; i was looking at the GSoC and the 3.0 roadmap like that though
| [Monday 14 February 2011] [09:23:51] &lt;Guthur&gt; i also have an interest in adding win32 IPC
| [Monday 14 February 2011] [09:24:20] &lt;pieterh&gt;        what do you think of the mentor idea?
| [Monday 14 February 2011] [09:24:32] &lt;pieterh&gt;        i.e. area of work means working with someone who helps you get into that code
| [Monday 14 February 2011] [09:25:06] &lt;Guthur&gt; yeah that&#8217;s a neat idea, though devs here tend to be very helpful as well
| [Monday 14 February 2011] [09:25:57] &lt;Guthur&gt; i&#8217;ve been asking here regarding pointers in starting the win32 IPC
| [Monday 14 February 2011] [09:26:14] &lt;Guthur&gt; got a lot the preliminary research done at the weekend there
| [Monday 14 February 2011] [09:26:53] &lt;Guthur&gt; sustrik gave me a lot of pointers on where to start looking in ZMQ as well
| [Monday 14 February 2011] [09:27:15] &lt;pieterh&gt;        Grrr. we need ipc: working on windows... :-/
| [Monday 14 February 2011] [09:27:36] &lt;pieterh&gt;        just hitting problems due to that
| [Monday 14 February 2011] [09:28:49] &lt;pieterh&gt;        Guthur, can I help you make IPC work on win32?
| [Monday 14 February 2011] [09:30:24] &lt;pieterh&gt;        Oh... I&#8217;m using inproc: ... I take it back :-)
| [Monday 14 February 2011] [09:35:56] &lt;mikko&gt;  pieterh: zfl doesn&#8217;t need to link against libuuid, right?
| [Monday 14 February 2011] [09:36:10] &lt;Guthur&gt; pieterh: hehe, well hopefully someone will need it, I&#8217;m sure they will
| [Monday 14 February 2011] [09:36:48] &lt;Guthur&gt; I just need to write some code now for it, my time is limited during the week though due to work, and I&#8217;ll be in dublin on saturday
| [Monday 14 February 2011] [09:37:13] &lt;Guthur&gt; hopefully slow but steady progress will be made
| [Monday 14 February 2011] [09:39:10] &lt;sustrik&gt;        btw guys, there&#8217;s a need for backup mentor for GSoC
| [Monday 14 February 2011] [09:39:27] &lt;sustrik&gt;        i can be the mentor as i know the code best
| [Monday 14 February 2011] [09:39:45] &lt;sustrik&gt;        but the rules of GSoC require to have a backup mentor as well
| [Monday 14 February 2011] [09:40:09] &lt;sustrik&gt;        in case i got run over by car or something
| [Monday 14 February 2011] [09:40:29] &lt;sustrik&gt;        any volunteers?
| [Monday 14 February 2011] [09:44:23] &lt;Guthur&gt; probably need to send that on ml
| [Monday 14 February 2011] [09:44:52] &lt;sustrik&gt;        i&#8217;ve already did :)
| [Monday 14 February 2011] [09:45:01] &lt;sustrik&gt;        no answer though
| [Monday 14 February 2011] [09:51:20] &lt;pieterh&gt;        mikko: well, zfl links with zeromq, which links with libuuid
| [Monday 14 February 2011] [09:51:39] &lt;mikko&gt;  pieterh: but zfl doesn&#8217;t need to link libuuid
| [Monday 14 February 2011] [09:51:44] &lt;mikko&gt;  ?
| [Monday 14 February 2011] [09:52:05] &lt;pieterh&gt;        mikko: it&#8217;s like I said... there are zfl classes that link zmq functions
| [Monday 14 February 2011] [09:52:18] &lt;pieterh&gt;        like zfl_msg and zfl_rpc
| [Monday 14 February 2011] [09:52:33] &lt;sustrik&gt;        zfl-&gt;libzmq-&gt;libuuid
| [Monday 14 February 2011] [09:52:47] &lt;pieterh&gt;        sustrik: that email had too many questions in it, I doubt many read the part about backup mentor
| [Monday 14 February 2011] [09:52:48] &lt;mikko&gt;  yeah, but zfl links against libuuid as well which i think is unnecessary dependency
| [Monday 14 February 2011] [09:53:16] &lt;pieterh&gt;        zfl_selftest will need it
| [Monday 14 February 2011] [09:53:29] &lt;pieterh&gt;        remove the dependency, see if it still works :-)
| [Monday 14 February 2011] [09:54:05] &lt;pieterh&gt;        sustrik: do you know any place to get kefir seeds in bratislava?
| [Monday 14 February 2011] [09:54:50] &lt;mikko&gt;  pieterh: i think it should be fine as libzmq doesnt expose any libuuid stuff directly
| [Monday 14 February 2011] [09:55:05] &lt;sustrik&gt;        hm, some bio-food store, i would say
| [Monday 14 February 2011] [09:55:06] &lt;mikko&gt;  so there should be no need for dependent programs/libraries to link with libuuid
| [Monday 14 February 2011] [09:55:10] &lt;mikko&gt;  will test
| [Monday 14 February 2011] [09:55:17] &lt;sustrik&gt;        never tried to buy it myself
| [Monday 14 February 2011] [09:55:42] &lt;pieterh&gt;        ah, katka will know... :-)
| [Monday 14 February 2011] [09:56:06]   * pieterh needs a reliable supply of evil slavic fermented milk products
| [Monday 14 February 2011] [09:56:22] &lt;sustrik&gt;        you can buy kefir in any shop here
| [Monday 14 February 2011] [09:56:28] &lt;sustrik&gt;        but it&#8217;s pasteurized
| [Monday 14 February 2011] [09:56:51] &lt;sustrik&gt;        so the culture is dead i suppose
| [Monday 14 February 2011] [09:56:57] &lt;pieterh&gt;        made from pasteurized milk but not itself pasteurized
| [Monday 14 February 2011] [09:57:02] &lt;pieterh&gt;        otherwise there&#8217;d be no point
| [Monday 14 February 2011] [09:57:28] &lt;pieterh&gt;        i&#8217;ve cultured kefir here, you can buy imported Polish kefir in some places
| [Monday 14 February 2011] [09:57:44] &lt;pieterh&gt;        but it&#8217;s kind of hard to find
| [Monday 14 February 2011] [09:58:32] &lt;pieterh&gt;        mikko: regarding uuid, IMO it&#8217;s better to leave the check in there
| [Monday 14 February 2011] [09:58:49] &lt;pieterh&gt;        since otherwise people will just get an error when they try to link their apps, if they don&#8217;t have libuuid
| [Monday 14 February 2011] [10:00:16] &lt;sustrik&gt;        i have bottle of kefir in the fridge, it says nothing about pasteurisation, so it&#8217;s probably alive
| [Monday 14 February 2011] [10:01:40] &lt;sustrik&gt;        my girlfriend suggests that the culture may be sold in pharmacy
| [Monday 14 February 2011] [10:01:41] &lt;sustrik&gt;        no guarantee though
| [Monday 14 February 2011] [10:02:25] &lt;pieterh&gt;        hmm, there are some online stores, will check them out
| [Monday 14 February 2011] [10:03:22] &lt;pieterh&gt;        heh, there are even kefir grain sharing communities :-)
| [Monday 14 February 2011] [10:06:00] &lt;mikko&gt;  pieterh: what do you mean?
| [Monday 14 February 2011] [10:06:09] &lt;mikko&gt;  pieterh: people shouldnt need to link libuuid
| [Monday 14 February 2011] [10:07:22] &lt;pieterh&gt;        mikko: we seem to have a misunderstanding...
| [Monday 14 February 2011] [10:07:39] &lt;pieterh&gt;        if you link with libzfl, you&#8217;re going to need the uuid functions
| [Monday 14 February 2011] [10:07:58] &lt;mikko&gt;  pieterh: libzfl doesn&#8217;t seem to use them directly (from what i can see)
| [Monday 14 February 2011] [10:08:09] &lt;mikko&gt;  pieterh: only through libzmq
| [Monday 14 February 2011] [10:08:15] &lt;mikko&gt;  or am i missing something (?)
| [Monday 14 February 2011] [10:10:28] &lt;pieterh&gt;        link is link
| [Monday 14 February 2011] [10:10:42] &lt;pieterh&gt;        there will be a dependency on uuid functions
| [Monday 14 February 2011] [10:10:48] &lt;sustrik&gt;        i think it&#8217;s different for staci and dynamic libraries
| [Monday 14 February 2011] [10:11:18] &lt;sustrik&gt;        static*
| [Monday 14 February 2011] [10:11:23] &lt;pieterh&gt;        i don&#8217;t think so
| [Monday 14 February 2011] [10:12:08] &lt;sustrik&gt;        if zfl links static version of libzmq, it has to link with libuuid
| [Monday 14 February 2011] [10:12:20] &lt;pieterh&gt;        if you do a static link, linker will search for uuid functions at link time
| [Monday 14 February 2011] [10:12:26] &lt;mikko&gt;  unless libzmq links static version of uuid
| [Monday 14 February 2011] [10:12:30] &lt;mikko&gt;  in which case they would collide
| [Monday 14 February 2011] [10:12:37] &lt;pieterh&gt;        mikko: libraries do not link...
| [Monday 14 February 2011] [10:13:05] &lt;pieterh&gt;        if you use dynamic libraries, executable will look for uuid functions at run time
| [Monday 14 February 2011] [10:13:12] &lt;pieterh&gt;        it&#8217;s the same result
| [Monday 14 February 2011] [10:13:21] &lt;pieterh&gt;        if you use zfl you will eventually have to have uuid on your box
| [Monday 14 February 2011] [10:13:58] &lt;pieterh&gt;        libzmq *never* includes other libraries
| [Monday 14 February 2011] [10:14:13] &lt;pieterh&gt;        on no system, ever, afaik
| [Monday 14 February 2011] [10:14:50] &lt;mikko&gt;  libuuid is shared library dependency for libzmq
| [Monday 14 February 2011] [10:15:54] &lt;pieterh&gt;        if you remove the dependency check in configure.in, in zmq, libzmq will build fine
| [Monday 14 February 2011] [10:17:42] &lt;pieterh&gt;        and if you don&#8217;t have libuuid installed, your apps will run until a peer tries to generate an identity
| [Monday 14 February 2011] [10:18:01] &lt;pieterh&gt;        alternatively if you&#8217;re doing static links, your apps won&#8217;t link at all
| [Monday 14 February 2011] [10:18:37] &lt;pieterh&gt;        this is precisely the same situation for a zfl app
| [Monday 14 February 2011] [10:18:46] &lt;pieterh&gt;        and therefore the check has exactly the same purpose and value
| [Monday 14 February 2011] [10:21:24] &lt;mikko&gt;  what happens in a situation where i have libzmq statically linked with libuuid and i try to use that with libzfl?
| [Monday 14 February 2011] [10:23:15] &lt;mikko&gt;  i guess thats more rare scenario
| [Monday 14 February 2011] [10:24:59] &lt;sustrik&gt;        i have no idea of how it is to be done
| [Monday 14 February 2011] [10:25:15] &lt;sustrik&gt;        however, i would suggest following the best practices
| [Monday 14 February 2011] [10:25:17] &lt;mikko&gt;  i guess it doesn&#8217;t harm to have the explicit dependency there
| [Monday 14 February 2011] [10:25:28] &lt;sustrik&gt;        rather than trying to figure it out yourselves
| [Monday 14 February 2011] [10:25:30] &lt;pieterh&gt;        mikko: there is no such thing afaik as a &#8220;statically linked library&#8221;
| [Monday 14 February 2011] [10:26:03] &lt;pieterh&gt;        you create statically linked executables that pull in all referenced object files from various lbraries
| [Monday 14 February 2011] [10:27:09] &lt;pieterh&gt;        I don&#8217;t know if any linkers allow a mix of static and dynamic
| [Monday 14 February 2011] [10:27:11] &lt;mikko&gt;  pieterh: on linux you seem to be able to include static libraries inside shared libraries
| [Monday 14 February 2011] [10:27:31] &lt;mikko&gt;  did some investigation a while ago regarding pgm builds
| [Monday 14 February 2011] [10:27:36] &lt;mikko&gt;  but it&#8217;s non-portable case anyway
| [Monday 14 February 2011] [10:28:09] &lt;pieterh&gt;        weird and wonderful and in that specific case, if libzmq was changed to do that, we could drop the uuid check in zfl for those platforms
| [Monday 14 February 2011] [10:28:52] &lt;mikko&gt;  the only reason i know this is because i was looking into openpgm autotools builds and how to include the results of those in zeromq
| [Monday 14 February 2011] [10:29:20] &lt;sustrik&gt;        mikko: btw have you seen the email wrt. openvms builds?
| [Monday 14 February 2011] [10:29:26] &lt;mikko&gt;  but my original thinking was related to libzmq making a dependency to libuuid already it wouldnt be necessary in libzfl
| [Monday 14 February 2011] [10:29:49] &lt;mikko&gt;  but i guess it&#8217;s ok to be explicit about it especially when its almost identical to zeromq build check
| [Monday 14 February 2011] [10:30:35] &lt;mikko&gt;  sustrik: yeah, haven&#8217;t formulated a response yet
| [Monday 14 February 2011] [10:30:58] &lt;sustrik&gt;        actually, i think there&#8217;s java on openvms
| [Monday 14 February 2011] [10:31:14] &lt;sustrik&gt;        but i have no idea whether hudson will run on it
| [Monday 14 February 2011] [10:31:31] &lt;sustrik&gt;        s/hudson/jenkins
| [Monday 14 February 2011] [10:32:02] &lt;mikko&gt;  we should be able to execute a script over ssh as well
| [Monday 14 February 2011] [10:32:24] &lt;sustrik&gt;        ack
| [Monday 14 February 2011] [10:36:44] &lt;mikko&gt;  sustrik: responded
| [Monday 14 February 2011] [10:36:49] &lt;sustrik&gt;        thx
| [Monday 14 February 2011] [13:05:53] &lt;Guthur&gt; would a socket pool make much sense from a 0MQ perspective?
| [Monday 14 February 2011] [13:06:31] &lt;Guthur&gt; I&#8217;m thinking of implementing in C# and was curious if it would translate down into the 0MQ lib
| [Monday 14 February 2011] [13:34:53] &lt;pieterh&gt;        Guthur, what problem does that solve?
| [Monday 14 February 2011] [13:36:00] &lt;Guthur&gt; pieterh, so that sockets can be reused
| [Monday 14 February 2011] [13:36:19] &lt;Guthur&gt; not sure if it will really benefit much
| [Monday 14 February 2011] [13:36:44] &lt;Guthur&gt; in a managed environment it may have more benefit
| [Monday 14 February 2011] [13:37:00] &lt;bitweiler&gt;      can zeromq send any kind of data or does it have to be string data?
| [Monday 14 February 2011] [13:38:03] &lt;Guthur&gt; bitweiler, the messages can contain any byte data
| [Monday 14 February 2011] [13:38:18] &lt;bitweiler&gt;      okay thanks :)
| [Monday 14 February 2011] [13:42:58] &lt;Guthur&gt; pieterh, I had the situation where there is many differing threads coming in and I was thinking of having a pool of already connected sockets for them to use and reuse
| [Monday 14 February 2011] [13:43:21] &lt;Guthur&gt; probably too specialized to be relevant to 0MQ
| [Monday 14 February 2011] [13:57:26] &lt;Guthur&gt; it&#8217;s partly inspired by WCF which is quite fast once it is &#8216;warmed up&#8217;, in part due to reusing the connection
| [Monday 14 February 2011] [13:57:58] &lt;Guthur&gt; i need to bench of course
| [Monday 14 February 2011] [14:03:08] &lt;pieterh&gt;        Guthur, sorry, was away...
| [Monday 14 February 2011] [14:03:32] &lt;pieterh&gt;        Reusing connections could be a fun optimization but you may hit the issue of flushing messages on sockets
| [Monday 14 February 2011] [14:03:57] &lt;pieterh&gt;        I&#8217;ve seen apps that did a lot of socket opening and closing
| [Monday 14 February 2011] [14:04:02] &lt;pieterh&gt;        but they were IMO badly designed
| [Monday 14 February 2011] [14:04:52] &lt;pieterh&gt;        TCP startup costs are significant compared to message transfer
| [Monday 14 February 2011] [14:13:17] &lt;Guthur&gt; it&#8217;s a interesting minor wee exercise
| [Monday 14 February 2011] [14:19:50] &lt;Guthur&gt; pieterh, are other socket types (in ZMQ) reasonable cheap to create
| [Monday 14 February 2011] [14:57:21] &lt;pieterh&gt;        Guthur, I&#8217;d expect them to be very cheap, yes... it&#8217;s something to measure if you want figures
| [Monday 14 February 2011] [15:02:25] &lt;cremes&gt; on linux do i need to do anything special to compile the lib to use epoll?
| [Monday 14 February 2011] [15:02:31] &lt;cremes&gt; or does it pick that up automatically?
| [Monday 14 February 2011] [15:06:10] &lt;Guthur&gt; cremes, will epoll is #ifdef ZMQ_HAVE_LINUX if that makes any difference
| [Monday 14 February 2011] [15:06:15] &lt;Guthur&gt; will/well
| [Monday 14 February 2011] [15:07:46] &lt;cremes&gt; Guthur: ah, i see that now
| [Monday 14 February 2011] [15:08:00] &lt;cremes&gt; my config.log shows it set to 1 so i assume it picked it up correctly
| [Monday 14 February 2011] [15:17:57] &lt;neale1&gt; vargaz: I just pushed my s390x unwind changes. It hits a couple of common files in mini so you may want to inspect
| [Monday 14 February 2011] [15:20:14] &lt;neale1&gt; Sorry wrong window!
| [Monday 14 February 2011] [15:28:43] &lt;cremes&gt; i am seeing something quite odd on linux (2.6.35-ARCH)
| [Monday 14 February 2011] [15:29:22] &lt;cremes&gt; processes that should be idle are showing 80% cpu; it looks like it&#8217;s all in zmq_poll
| [Monday 14 February 2011] [15:29:29] &lt;cremes&gt; which is set for a 10ms timeout
| [Monday 14 February 2011] [15:29:37] &lt;cremes&gt; that shouldn&#8217;t tax the machine at all
| [Monday 14 February 2011] [15:29:46] &lt;cremes&gt; suggestions on debugging this?
| [Monday 14 February 2011] [15:34:11] &lt;pieterh&gt;        cremes: perhaps you&#8217;re doing other heavy work in that loop
| [Monday 14 February 2011] [15:34:18] &lt;pieterh&gt;        profiler should help
| [Monday 14 February 2011] [15:34:26] &lt;cremes&gt; pieterh: nope, i&#8217;m not doing *any* work
| [Monday 14 February 2011] [15:34:42] &lt;cremes&gt; running the exact same code on OSX shows around 3-5% cpu
| [Monday 14 February 2011] [15:34:54] &lt;cremes&gt; do you have a suggested profiler?
| [Monday 14 February 2011] [15:35:21] &lt;pieterh&gt;        gprof springs to mind
| [Monday 14 February 2011] [15:35:30] &lt;pieterh&gt;        it sounds like a bug in zmq
| [Monday 14 February 2011] [15:35:45] &lt;cremes&gt; okay, i&#8217;ll poke at it with gprof
| [Monday 14 February 2011] [15:36:47] &lt;Guthur&gt; cremes, you have remembered poll takes micro seconds, not sure if that would effect CPU load, but it&#8217;s something I keep forgetting
| [Monday 14 February 2011] [15:37:13] &lt;cremes&gt; Guthur: yes, i pass 10000 as the value for a 10ms timeout
| [Monday 14 February 2011] [15:37:41] &lt;cremes&gt; it looks like a platform bug; osx is okay with it (for once) and linux is not
| [Monday 14 February 2011] [15:43:30] &lt;mikko&gt;  pieterh: pull req sent
| [Monday 14 February 2011] [15:43:37] &lt;mikko&gt;  pieterh: does that look sensible?
| [Monday 14 February 2011] [15:47:40] &lt;pieterh&gt;        mikko: hang on a sec
| [Monday 14 February 2011] [15:49:51] &lt;pieterh&gt;        mikko: yeah, but you removed the check for uuid :-)
| [Monday 14 February 2011] [15:50:03] &lt;mikko&gt;  i did?
| [Monday 14 February 2011] [15:50:18] &lt;pieterh&gt;        looks like it
| [Monday 14 February 2011] [15:50:32] &lt;pieterh&gt;        actually I don&#8217;t mind, people building zfl will normally have built zmq already
| [Monday 14 February 2011] [15:50:37] &lt;mikko&gt;  oh, didnt save file before reverting that
| [Monday 14 February 2011] [15:50:56] &lt;mikko&gt;  i also noticed one thing
| [Monday 14 February 2011] [15:51:06] &lt;mikko&gt;  majority of the tests in configure.in for zfl are done in C++
| [Monday 14 February 2011] [15:51:30] &lt;pieterh&gt;        lol, yes, inherited from zmq
| [Monday 14 February 2011] [15:51:34] &lt;pieterh&gt;        feel free to rip em out
| [Monday 14 February 2011] [15:54:14] &lt;mikko&gt;  are you planning to use these things in the build in future?
| [Monday 14 February 2011] [15:54:21] &lt;mikko&gt;  as there is much inherited from zmq build
| [Monday 14 February 2011] [15:54:35] &lt;mikko&gt;  like checks for atomic operations
| [Monday 14 February 2011] [15:54:38] &lt;pieterh&gt;        to some extent this was meant to be a template for other libraries
| [Monday 14 February 2011] [15:54:50] &lt;pieterh&gt;        but I doubt that will happen
| [Monday 14 February 2011] [15:55:01] &lt;mikko&gt;  on zeromq side i tried to isolate these things into functions
| [Monday 14 February 2011] [15:55:04] &lt;pieterh&gt;        take an axe to it, you have a blank check
| [Monday 14 February 2011] [15:55:16] &lt;mikko&gt;  https://github.com/zeromq/zeromq2/blob/master/acinclude.m4
| [Monday 14 February 2011] [15:55:26] &lt;mikko&gt;  these should be fairly reusable if needed
| [Monday 14 February 2011] [15:56:02] &lt;pieterh&gt;        it&#8217;s a shame it&#8217;s not reusable as-is
| [Monday 14 February 2011] [15:56:18] &lt;pieterh&gt;        nice work
| [Monday 14 February 2011] [15:56:58] &lt;pieterh&gt;        mikko: are you volunteering to give the zfl tooling a clean-up?
| [Monday 14 February 2011] [15:57:04] &lt;pieterh&gt;        :-)
| [Monday 14 February 2011] [15:57:14] &lt;pieterh&gt;        for me, it works, which is kind of sufficient
| [Monday 14 February 2011] [15:57:22] &lt;pieterh&gt;        since what I really like doing is writing beautiful C code
| [Monday 14 February 2011] [15:57:55] &lt;mikko&gt;  pieterh: yes, i think the build can be simplified a lot
| [Monday 14 February 2011] [15:57:59] &lt;pieterh&gt;        mato yells from the back of the room, &#8220;keep trying old man, one day you&#8217;ll get it right!&#8221;
| [Monday 14 February 2011] [15:58:00] &lt;mikko&gt;  i&#8217;ll take a poke at it
| [Monday 14 February 2011] [15:58:03] &lt;pieterh&gt;        yay!
| [Monday 14 February 2011] [15:59:13] &lt;pieterh&gt;        i doubt we&#8217;ll have more C/C++ libraries but it&#8217;s always possible
| [Monday 14 February 2011] [16:03:37] &lt;Guthur&gt; pieterh, It&#8217;s ok there is probably only a handful of people how can write beautiful C code, and even less than that for C++ (probably none)
| [Monday 14 February 2011] [16:03:45] &lt;Guthur&gt; how/who
| [Monday 14 February 2011] [16:08:03] &lt;pieterh&gt;        Guthur, I wasn&#8217;t being modest :-)
| [Monday 14 February 2011] [17:28:47] &lt;Luke234&gt;        Hey I&#8217;m trying to build and install the ZMQ java bindings for windows but can&#8217;t locate the java class files the docs mention
| [Monday 14 February 2011] [17:29:12] &lt;Luke234&gt;        http://www.zeromq.org/bindings:java
| [Monday 14 February 2011] [17:29:46] &lt;Luke234&gt;        &#8220;Secondly, make sure that you have set the Java classpath to the directory where MQ classes reside.&#8221; anyone know where I can get those classes?
| [Monday 14 February 2011] [17:40:04] &lt;mikko&gt;  Luke234: iirc you build them with ant
| [Monday 14 February 2011] [18:18:09] &lt;Guthur&gt; sustrik: will it be possible for 0MQ to pass in an extended OVERLAPPED struct to pipe ops for use with  IOCP, where the OVERLAPPED struct basically has the standard content plus what would usually be in poll_entry_t
| [Monday 14 February 2011] [18:19:21] &lt;Guthur&gt; there is other possibilities though
| [Monday 14 February 2011] [18:20:29] &lt;Guthur&gt; we could just pass a generic extend OVERLAPPED struct with the OP set, and use the completion key to get the poll_entry_t
| [Monday 14 February 2011] [18:20:36] &lt;Guthur&gt; which might be neater
| [Tuesday 15 February 2011] [03:26:51] &lt;sustrik&gt;       Guthur: what&#8217;s pipe ops?
| [Tuesday 15 February 2011] [03:33:50] &lt;CIA-21&gt;        zeromq2: 03Michael Compton 07master * rfbe5d85 10/ (AUTHORS doc/zmq_setsockopt.txt):
| [Tuesday 15 February 2011] [03:33:50] &lt;CIA-21&gt;        zeromq2: Added note regarding setting sockopt before bind/connect
| [Tuesday 15 February 2011] [03:33:50] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Michael Compton &lt;michael.compton&#64;littleedge.co.uk&gt; - http://bit.ly/fNGMan
| [Tuesday 15 February 2011] [06:22:09] &lt;cyball&gt;        hi can i do something like this :: REQ -&gt; XREP-&gt;XREQ-&gt;SUB with zmq_device::ZMQ_FORWARDER ? i want to publish a message to morre than one subscribers :) thx
| [Tuesday 15 February 2011] [06:23:37] &lt;cyball&gt;        or is it also possible to work with ... REQ-&gt;PUB-&gt;SUB ?
| [Tuesday 15 February 2011] [06:31:01] &lt;mikko&gt; cyball: do you need req sock on client?
| [Tuesday 15 February 2011] [06:32:09] &lt;mikko&gt; cyball: you could have PUB on client and use forwarder device
| [Tuesday 15 February 2011] [06:32:36] &lt;mikko&gt; client PUB &lt;&#8212;&gt; SUB forwarder PUB &lt;&#8212;&gt; SUB subscribers
| [Tuesday 15 February 2011] [06:34:35] &lt;cyball&gt;        mikko, i work on a continous integration service and i got a post-commit from github so i can not run the PUB whole the time only on request from github :)
| [Tuesday 15 February 2011] [06:35:38] &lt;mikko&gt; cyball: you can have the pub connect to forwarder on post-commit ?
| [Tuesday 15 February 2011] [06:35:52] &lt;mikko&gt; connect, publish, go away
| [Tuesday 15 February 2011] [06:36:22] &lt;cyball&gt;        mikko, ohh ok .. i thought that i have to run the publisher whole the time
| [Tuesday 15 February 2011] [06:36:30] &lt;cyball&gt;        because of the subscriibers
| [Tuesday 15 February 2011] [06:36:53] &lt;mikko&gt; the subscribers would be connected to forwarder device
| [Tuesday 15 February 2011] [06:36:57] &lt;mikko&gt; whcih can run all the time
| [Tuesday 15 February 2011] [06:37:02] &lt;cyball&gt;        ok
| [Tuesday 15 February 2011] [06:37:45] &lt;mikko&gt; look at the diagram:
| [Tuesday 15 February 2011] [06:37:46] &lt;mikko&gt; client PUB &lt;&#8212;&gt; SUB forwarder PUB &lt;&#8212;&gt; SUB subscribers
| [Tuesday 15 February 2011] [06:37:48] &lt;mikko&gt; :)
| [Tuesday 15 February 2011] [06:38:00] &lt;cyball&gt;        mikko, thx
| [Tuesday 15 February 2011] [06:38:02] &lt;mikko&gt; forwarder would run all the time and subscribers would only know that they are connected to it
| [Tuesday 15 February 2011] [06:38:09] &lt;cyball&gt;        ok
| [Tuesday 15 February 2011] [06:38:15] &lt;cyball&gt;        i will have a look on it
| [Tuesday 15 February 2011] [06:38:57] &lt;cyball&gt;        do you have a link to it ?
| [Tuesday 15 February 2011] [06:39:03] &lt;mikko&gt; link to where?
| [Tuesday 15 February 2011] [06:39:12] &lt;cyball&gt;        diagrag :)
| [Tuesday 15 February 2011] [06:39:18] &lt;cyball&gt;        diagram :)
| [Tuesday 15 February 2011] [06:39:19] &lt;mikko&gt; it&#8217;s that ascii one
| [Tuesday 15 February 2011] [06:39:38] &lt;mikko&gt; let me see if zguide has similar with prettier graphics
| [Tuesday 15 February 2011] [06:39:56] &lt;cyball&gt;        no sorry i thought there is one in the manual i did not seen
| [Tuesday 15 February 2011] [06:41:29] &lt;mikko&gt; it&#8217;s a very simple scenario
| [Tuesday 15 February 2011] [06:41:44] &lt;mikko&gt; the publisher client connects to insocket on forwarder and publishes message
| [Tuesday 15 February 2011] [06:41:53] &lt;mikko&gt; forwarder then publishes it on outsocket
| [Tuesday 15 February 2011] [06:42:02] &lt;mikko&gt; and subscribers are connected to outsocket
| [Tuesday 15 February 2011] [06:42:27] &lt;mikko&gt; forwarder runs on the background and subscribers only know about it&#8217;s existence
| [Tuesday 15 February 2011] [06:42:38] &lt;mikko&gt; publishers on insocket can come and go as they please
| [Tuesday 15 February 2011] [06:42:46] &lt;cyball&gt;        mikko, is that ok ? http://pastebin.com/1USs18EG
| [Tuesday 15 February 2011] [06:45:08] &lt;mikko&gt; cyball: subscribe to &#8220;&#8221; on frontend
| [Tuesday 15 February 2011] [06:46:23] &lt;mikko&gt; so before the frontend bind
| [Tuesday 15 February 2011] [06:47:02] &lt;mikko&gt; zmq_setsockopt(frontend, &#8220;&#8221;, 0);
| [Tuesday 15 February 2011] [06:47:49] &lt;mikko&gt; otherwise your frontend will filter all messages
| [Tuesday 15 February 2011] [07:03:13] &lt;cyball&gt;        mikko, http://pastebin.com/yfHkwBv1 is that ok for the publisher on the client ?
| [Tuesday 15 February 2011] [07:04:19] &lt;cyball&gt;        or should i also add some socket options too ?
| [Tuesday 15 February 2011] [07:04:45] &lt;mikko&gt; should be fine
| [Tuesday 15 February 2011] [07:19:05] &lt;cyball&gt;        mikko,  ok i have put all pieces together :: http://pastebin.com/EGUTh9mY i do not see anything on the subscriber i guess there is something i do not see can u have pls a look on it ?
| [Tuesday 15 February 2011] [07:36:04] &lt;mikko&gt; cyball: subscribe the sub
| [Tuesday 15 February 2011] [07:36:17] &lt;mikko&gt; subscriber.setsockopt(ZMQ_SUBSCRIBE, &#8220;&#8221;, 0);
| [Tuesday 15 February 2011] [07:36:27] &lt;mikko&gt; otherwise it will filter all messages
| [Tuesday 15 February 2011] [07:36:37] &lt;mikko&gt; i gotta commute to the office
| [Tuesday 15 February 2011] [07:36:43] &lt;mikko&gt; back in 30 mins or so
| [Tuesday 15 February 2011] [07:37:45] &lt;cyball&gt;        thx
| [Tuesday 15 February 2011] [07:42:19] &lt;cyball&gt;        it does not work :-(
| [Tuesday 15 February 2011] [07:47:17] &lt;cyball&gt;        sure that i can have a SUB bind on a port and it does not only support connect ?
| [Tuesday 15 February 2011] [07:51:51] &lt;sustrik&gt;       yes, bind/connect are orthogonal to the socket type
| [Tuesday 15 February 2011] [07:55:45] &lt;cyball&gt;        sustrik, thx
| [Tuesday 15 February 2011] [07:57:05] &lt;cyball&gt;        sustrik, can you please have a look on the code ... ? http://pastebin.com/EGUTh9mY
| [Tuesday 15 February 2011] [07:57:47] &lt;cyball&gt;        probably there is something missing ... i have adde the  subscriber.setsockopt(ZMQ_SUBSCRIBE, &#8220;&#8221;, 0);
| [Tuesday 15 February 2011] [07:57:51] &lt;cyball&gt;        but it also does not work
| [Tuesday 15 February 2011] [07:58:36] &lt;sustrik&gt;       what version of 0mq are you using?
| [Tuesday 15 February 2011] [07:58:42] &lt;Liam</cite>&gt; I can safely assess that I do not understand a word of this conversation.
| [Tuesday 15 February 2011] [07:59:22] &lt;cyball&gt;        2.0.10
| [Tuesday 15 February 2011] [08:00:06] &lt;sustrik&gt;       with 2.0.10 there&#8217;s no blocking zmq_close()
| [Tuesday 15 February 2011] [08:00:19] &lt;cyball&gt;        ohhh upps
| [Tuesday 15 February 2011] [08:00:26] &lt;sustrik&gt;       thus, if there are any queued outbound messages
| [Tuesday 15 February 2011] [08:00:33] &lt;sustrik&gt;       they are dropped on zmq_close()
| [Tuesday 15 February 2011] [08:00:53] &lt;cyball&gt;        ok that means i should compile the beta ?
| [Tuesday 15 February 2011] [08:00:54] &lt;sustrik&gt;       if you need to block till the messages are send, you&#8217;ll have to use 2.1.0
| [Tuesday 15 February 2011] [08:01:00] &lt;sustrik&gt;       yup
| [Tuesday 15 February 2011] [08:01:10] &lt;cyball&gt;        ok i will do it now :)
| [Tuesday 15 February 2011] [08:06:27] &lt;cyball&gt;        sustrik, yeahhh it works now THX
| [Tuesday 15 February 2011] [08:06:35] &lt;sustrik&gt;       np
| [Tuesday 15 February 2011] [08:10:38] &lt;marcinkuzminski&gt;       Hi, I&#8217;m planning a system to do concurrent database insert, that suppose to be fail safe when insert fails, it would retry/remember, can that all be achieved using zeromq ?
| [Tuesday 15 February 2011] [08:11:56] &lt;sustrik&gt;       what do you mean by fail-safe?
| [Tuesday 15 February 2011] [08:12:22] &lt;marcinkuzminski&gt;       sustrik, That i cannot allow a task to be lost.
| [Tuesday 15 February 2011] [08:12:33] &lt;marcinkuzminski&gt;       i run ~200-300 tasks/s
| [Tuesday 15 February 2011] [08:13:20] &lt;marcinkuzminski&gt;       let say one out of million fails due to any reason network/db. And i need to retry that task with delay few times, if it fails permanently i need to store and remember that.
| [Tuesday 15 February 2011] [08:14:14] &lt;sustrik&gt;       then you have to store the task into a database
| [Tuesday 15 February 2011] [08:14:37] &lt;sustrik&gt;       distributed transactions should be used to pair the task generation with the insertion
| [Tuesday 15 February 2011] [08:14:47] &lt;sustrik&gt;       so that either both fail or both succeed
| [Tuesday 15 February 2011] [08:14:57] &lt;sustrik&gt;       it has very little to do with 0mq
| [Tuesday 15 February 2011] [08:15:53] &lt;marcinkuzminski&gt;       right,
| [Tuesday 15 February 2011] [08:16:09] &lt;marcinkuzminski&gt;       so it&#8217;s just about distrubution of task that zeromq does ?
| [Tuesday 15 February 2011] [08:16:51] &lt;marcinkuzminski&gt;       sustrik, ok, getting back to reading 0mq manual
| [Tuesday 15 February 2011] [08:16:59] &lt;sustrik&gt;       right
| [Tuesday 15 February 2011] [08:19:10] &lt;Guthur&gt;        sustrik: did you catch my  messages last night
| [Tuesday 15 February 2011] [08:19:30] &lt;Guthur&gt;        you can ignore the first suggestion though
| [Tuesday 15 February 2011] [08:19:41] &lt;Guthur&gt;        I now think the second would be better
| [Tuesday 15 February 2011] [08:22:13] &lt;sustrik&gt;       Guthur: i missed it
| [Tuesday 15 February 2011] [08:22:26] &lt;sustrik&gt;       can you explain once more?
| [Tuesday 15 February 2011] [08:30:16] &lt;Guthur&gt;        basically would it be ok for 0MQ to pass in a custom OVERLAPPED struct with an operation type flag when performing various pipe operations. iocp_t (epoll etc equivalent) would then use this along with poll_entry, which would be set as the completion key, to call to determine which event handlers to call
| [Tuesday 15 February 2011] [08:30:59] &lt;Guthur&gt;        I also have a question regarding the retired functionality, but I&#8217;m not near the code at the moment and can not remember the details
| [Tuesday 15 February 2011] [08:31:42] &lt;Guthur&gt;        does that make any sense?
| [Tuesday 15 February 2011] [08:34:59] &lt;sustrik&gt;       Guthur: pass what from where to where?
| [Tuesday 15 February 2011] [08:35:04] &lt;sustrik&gt;       sorry, i don&#8217;t follow
| [Tuesday 15 February 2011] [08:36:14] &lt;sustrik&gt;       afaics, the OVERLAPPED should be part of poll_entry
| [Tuesday 15 February 2011] [08:36:20] &lt;sustrik&gt;       actyually 2 of them
| [Tuesday 15 February 2011] [08:36:27] &lt;sustrik&gt;       one for write another one for read
| [Tuesday 15 February 2011] [08:37:36] &lt;Guthur&gt;        when doing ReadFile or WriteFile or ConnectToPipe there is an argument for the OVERLAPPED, this will be returned through the IOCP when the op completes
| [Tuesday 15 February 2011] [08:38:20] &lt;sustrik&gt;       the event in the OVERLAPPED will be signaled when the op completes, right?
| [Tuesday 15 February 2011] [08:39:01] &lt;Guthur&gt;        you can ignore the event field, not using it
| [Tuesday 15 February 2011] [08:39:20] &lt;sustrik&gt;       hm
| [Tuesday 15 February 2011] [08:39:23] &lt;Guthur&gt;        but the OVERLAPPED can be extended, so that it contains custom fields
| [Tuesday 15 February 2011] [08:39:42] &lt;sustrik&gt;       how are you notified about operation being exectured then?
| [Tuesday 15 February 2011] [08:39:59] &lt;sustrik&gt;       executed*
| [Tuesday 15 February 2011] [08:40:13] &lt;Guthur&gt;        the only way is by setting a field in the custom OVERLAPPED struct
| [Tuesday 15 February 2011] [08:40:28] &lt;sustrik&gt;       i mean, is it a callback or what?
| [Tuesday 15 February 2011] [08:41:34] &lt;Guthur&gt;        IOCP will return an array of OVERLAPPED_ENTRIES, these will contain that the OVERLAPPED passed in when starting the OP
| [Tuesday 15 February 2011] [08:41:53] &lt;sustrik&gt;       which function is that?
| [Tuesday 15 February 2011] [08:42:08] &lt;sustrik&gt;       the one that returns the ENTRIES
| [Tuesday 15 February 2011] [08:42:13] &lt;Guthur&gt;        it will also return the Completion Key which you specify when you add the handle to the IOCP
| [Tuesday 15 February 2011] [08:42:26] &lt;Guthur&gt;        GetQueueCompletionStatus
| [Tuesday 15 February 2011] [08:42:54] &lt;Guthur&gt;        GetQueueCompletionStatusEx actually (for the timeout)
| [Tuesday 15 February 2011] [08:45:27] &lt;Guthur&gt;        I&#8217;m going to grab a coffee, back in a mo
| [Tuesday 15 February 2011] [08:46:23] &lt;sustrik&gt;       checking the docs
| [Tuesday 15 February 2011] [08:46:48] &lt;sustrik&gt;       how do you associate a particular read/write request with a specific completion port?
| [Tuesday 15 February 2011] [08:48:24] &lt;zchrish&gt;       I am testing zmq::poll with a single entry pollitem_t list. After I send a packet, I check whether items[0].revents &amp; ZMQ_POLLIN is &#8220;1&#8221; and then process the input from REP. But, in my case, it always seems to be set to &#8220;1&#8221; even though I purposely put a 5 second delay in my XEQ program. Am I doing something wrong?
| [Tuesday 15 February 2011] [08:50:47] &lt;sustrik&gt;       zchrish: so you get POLLIN even though there is no message available, right?
| [Tuesday 15 February 2011] [08:51:21] &lt;zchrish&gt;       I think so.
| [Tuesday 15 February 2011] [08:51:38] &lt;sustrik&gt;       write a minimal test case then and report it as a bug
| [Tuesday 15 February 2011] [08:51:56] &lt;sustrik&gt;       POLLIN should be signaled only if there&#8217;s a message available for reading
| [Tuesday 15 February 2011] [08:52:05] &lt;zchrish&gt;       ok; let me test a minimal case.
| [Tuesday 15 February 2011] [08:52:46] &lt;mikko&gt; <a href="#id1777"><span class="problematic" id="id1778">pieterh_</span></a>: i&#8217;ve been ripping the guts out from zfl builds
| [Tuesday 15 February 2011] [08:53:03] &lt;<a href="#id1779"><span class="problematic" id="id1780">pieterh_</span></a>&gt;      mikko: nice, I think... :-)
| [Tuesday 15 February 2011] [08:53:16] &lt;mikko&gt; there was quite a lot of things that weren&#8217;t seem to be needed
| [Tuesday 15 February 2011] [08:53:39] &lt;mikko&gt; like checks for C++ compiler, atomic ops, linking against socket libs etc
| [Tuesday 15 February 2011] [08:53:54] &lt;mikko&gt; tested linux, mingw32 and mac os x this far
| [Tuesday 15 February 2011] [08:54:05] &lt;mikko&gt; solaris and freebsd to go from platforms i have access to
| [Tuesday 15 February 2011] [08:54:10] &lt;<a href="#id1781"><span class="problematic" id="id1782">pieterh_</span></a>&gt;      sounds great
| [Tuesday 15 February 2011] [08:54:25] &lt;mikko&gt; also, make check now runs zfl_selftest
| [Tuesday 15 February 2011] [08:54:49] &lt;<a href="#id1783"><span class="problematic" id="id1784">pieterh_</span></a>&gt;      is that the normal action, there&#8217;s no &#8220;make test&#8221;?
| [Tuesday 15 February 2011] [08:55:00] &lt;mikko&gt; make check seems to be default action
| [Tuesday 15 February 2011] [08:55:29] &lt;<a href="#id1785"><span class="problematic" id="id1786">pieterh_</span></a>&gt;      how about I give you commit access to the git?
| [Tuesday 15 February 2011] [08:55:37] &lt;<a href="#id1787"><span class="problematic" id="id1788">pieterh_</span></a>&gt;      that seems simpler than pull requests
| [Tuesday 15 February 2011] [08:55:55] &lt;<a href="#id1789"><span class="problematic" id="id1790">pieterh_</span></a>&gt;      are you committer on zmq?
| [Tuesday 15 February 2011] [08:56:02] &lt;mikko&gt; no, im not
| [Tuesday 15 February 2011] [08:56:21] &lt;<a href="#id1791"><span class="problematic" id="id1792">pieterh_</span></a>&gt;      how would you like to work? I&#8217;m happy giving you commit access
| [Tuesday 15 February 2011] [08:56:39] &lt;mikko&gt; well, let&#8217;s see whether you agree my thinking here:
| [Tuesday 15 February 2011] [08:57:08]          * <a href="#id1793"><span class="problematic" id="id1794">pieterh_</span></a> listens
| [Tuesday 15 February 2011] [08:57:37] &lt;mikko&gt; my thinking was to rip out as much as possible to make things maintainable and then fix per platform if there are bugs on let&#8217;s say very old qnx
| [Tuesday 15 February 2011] [08:57:47] &lt;mikko&gt; example:
| [Tuesday 15 February 2011] [08:58:05] &lt;mikko&gt; mac os x was set to build without -pedantic even though ZFL builds fine with -pedantic on mac os x
| [Tuesday 15 February 2011] [08:59:01] &lt;<a href="#id1795"><span class="problematic" id="id1796">pieterh_</span></a>&gt;      well, you are far more expert in this than me
| [Tuesday 15 February 2011] [08:59:03] &lt;mikko&gt; sparc cpu optimization:
| [Tuesday 15 February 2011] [08:59:04] &lt;mikko&gt; -mcpu=v9
| [Tuesday 15 February 2011] [08:59:07] &lt;mikko&gt; is that really needed?
| [Tuesday 15 February 2011] [08:59:30] &lt;<a href="#id1797"><span class="problematic" id="id1798">pieterh_</span></a>&gt;      :-)
| [Tuesday 15 February 2011] [08:59:43] &lt;<a href="#id1799"><span class="problematic" id="id1800">pieterh_</span></a>&gt;      I hope you&#8217;re not asking me
| [Tuesday 15 February 2011] [08:59:47] &lt;mikko&gt; i am
| [Tuesday 15 February 2011] [08:59:50] &lt;mikko&gt; it&#8217;s in the build :)
| [Tuesday 15 February 2011] [09:00:03] &lt;<a href="#id1801"><span class="problematic" id="id1802">pieterh_</span></a>&gt;      well, mikko, my process is kind of different
| [Tuesday 15 February 2011] [09:00:18] &lt;<a href="#id1803"><span class="problematic" id="id1804">pieterh_</span></a>&gt;      copy some code, hack it till it works, forget about it again asap, wait for patches
| [Tuesday 15 February 2011] [09:00:27] &lt;mikko&gt; i can agree with that
| [Tuesday 15 February 2011] [09:00:35] &lt;<a href="#id1805"><span class="problematic" id="id1806">pieterh_</span></a>&gt;      specifically, for the tooling, which I don&#8217;t want to be expert in
| [Tuesday 15 February 2011] [09:01:29] &lt;<a href="#id1807"><span class="problematic" id="id1808">pieterh_</span></a>&gt;      so most of what is there I copied, and left unchanged because it didn&#8217;t break things
| [Tuesday 15 February 2011] [09:02:04] &lt;<a href="#id1809"><span class="problematic" id="id1810">pieterh_</span></a>&gt;      clearly someone who knows their stuff, like you, would rip most of it out
| [Tuesday 15 February 2011] [09:02:10] &lt;<a href="#id1811"><span class="problematic" id="id1812">pieterh_</span></a>&gt;      which is perfect
| [Tuesday 15 February 2011] [09:03:07] &lt;<a href="#id1813"><span class="problematic" id="id1814">pieterh_</span></a>&gt;      what&#8217;s your github id?
| [Tuesday 15 February 2011] [09:03:50] &lt;<a href="#id1815"><span class="problematic" id="id1816">pieterh_</span></a>&gt;      plain mikko?
| [Tuesday 15 February 2011] [09:03:51] &lt;mikko&gt; mkoppanen
| [Tuesday 15 February 2011] [09:04:03] &lt;Guthur&gt;        sustrik: the completion key will take care of that
| [Tuesday 15 February 2011] [09:04:17] &lt;<a href="#id1817"><span class="problematic" id="id1818">pieterh_</span></a>&gt;      ok, mikko, you are now committer on zfl
| [Tuesday 15 February 2011] [09:04:20] &lt;Guthur&gt;        it is returned as part of the OVERLAPPED_ENTRY struct
| [Tuesday 15 February 2011] [09:04:33] &lt;mikko&gt; cool
| [Tuesday 15 February 2011] [09:04:47] &lt;mikko&gt; i&#8217;ll hopefully finish this during this week
| [Tuesday 15 February 2011] [09:04:52] &lt;Guthur&gt;        sustrik: oh wait I miss read
| [Tuesday 15 February 2011] [09:04:57] &lt;<a href="#id1819"><span class="problematic" id="id1820">pieterh_</span></a>&gt;      :-) I&#8217;m enormously grateful...
| [Tuesday 15 February 2011] [09:05:01] &lt;mikko&gt; got company evening today so might be a bit out of game tomorrow
| [Tuesday 15 February 2011] [09:05:05] &lt;Guthur&gt;        I think if you had multiple IOCP it would be returned to all
| [Tuesday 15 February 2011] [09:05:20] &lt;<a href="#id1821"><span class="problematic" id="id1822">pieterh_</span></a>&gt;      suddenly zfl actually builds properly across more than Ubuntu :-)
| [Tuesday 15 February 2011] [09:05:29] &lt;Guthur&gt;        That&#8217;s a guess though
| [Tuesday 15 February 2011] [09:05:50] &lt;sustrik&gt;       what would that be good for?
| [Tuesday 15 February 2011] [09:05:52] &lt;sustrik&gt;       strange
| [Tuesday 15 February 2011] [09:06:19] &lt;Guthur&gt;        sustrik: that comment for me?
| [Tuesday 15 February 2011] [09:06:26] &lt;sustrik&gt;       yep
| [Tuesday 15 February 2011] [09:06:40] &lt;sustrik&gt;       if every event is passed to all completion ports
| [Tuesday 15 February 2011] [09:06:44] &lt;Guthur&gt;        I have to admit I never really considered multiple IOCP
| [Tuesday 15 February 2011] [09:06:51] &lt;sustrik&gt;       what&#8217;s the point of having many of them
| [Tuesday 15 February 2011] [09:07:02] &lt;Guthur&gt;        you associate the pipe handle with the IOCP
| [Tuesday 15 February 2011] [09:07:10] &lt;sustrik&gt;       ah
| [Tuesday 15 February 2011] [09:07:14] &lt;sustrik&gt;       how do you do that?
| [Tuesday 15 February 2011] [09:07:17] &lt;Guthur&gt;        you can associate multiple pipes with the IOCP
| [Tuesday 15 February 2011] [09:07:30] &lt;zchrish&gt;       so I added code to C++ example from &#8220;the guide&#8221; to hwclient.cpp and hwserver.cpp to include a single pollitem_t entry. I included a 5 second delay in the hwserver.cpp. It appears the code always enters regardless.
| [Tuesday 15 February 2011] [09:07:43] &lt;Guthur&gt;        CreateIoCompletionPort
| [Tuesday 15 February 2011] [09:07:47] &lt;Guthur&gt;        sustrik: ^^
| [Tuesday 15 February 2011] [09:08:07] &lt;Guthur&gt;        <a class="reference external" href="http://msdn.microsoft.com/en-us/library/aa363862(v=VS.85).aspx">http://msdn.microsoft.com/en-us/library/aa363862(v=VS.85).aspx</a>
| [Tuesday 15 February 2011] [09:08:28] &lt;<a href="#id1823"><span class="problematic" id="id1824">pieterh_</span></a>&gt;      zchrish: could you post the code in a pastebin somewhere?
| [Tuesday 15 February 2011] [09:08:45] &lt;zchrish&gt;       Sure, that&#8217;s next.
| [Tuesday 15 February 2011] [09:08:52] &lt;sustrik&gt;       Guthur: ok, i see
| [Tuesday 15 February 2011] [09:09:11] &lt;Guthur&gt;        sustrik: so, can we make it fit?
| [Tuesday 15 February 2011] [09:09:14] &lt;sustrik&gt;       i think i have a vague idea of how it works now :)
| [Tuesday 15 February 2011] [09:09:25] &lt;mikko&gt; isnt ZMQ_SUBSCRIBE an exception to setsockopts before connect/bind?
| [Tuesday 15 February 2011] [09:09:37] &lt;sustrik&gt;       Guthur: there are few things to keep in mind
| [Tuesday 15 February 2011] [09:09:40] &lt;sustrik&gt;       mikko: no
| [Tuesday 15 February 2011] [09:09:56] &lt;<a href="#id1825"><span class="problematic" id="id1826">pieterh_</span></a>&gt;      sustrik: really?
| [Tuesday 15 February 2011] [09:10:04] &lt;mikko&gt; then i found an error on zguide :)
| [Tuesday 15 February 2011] [09:10:18] &lt;sustrik&gt;       yes, ZMQ_SUBSCRIBE applies to the socket as a whole
| [Tuesday 15 February 2011] [09:10:22] &lt;<a href="#id1827"><span class="problematic" id="id1828">pieterh_</span></a>&gt;      you can&#8217;t add/remove a filter after binding?
| [Tuesday 15 February 2011] [09:10:36] &lt;Guthur&gt;        i think you can
| [Tuesday 15 February 2011] [09:10:37] &lt;sustrik&gt;       as opposed to other sockopts that apply only to subsequent connects/binds
| [Tuesday 15 February 2011] [09:10:46] &lt;sustrik&gt;       <a href="#id1829"><span class="problematic" id="id1830">pieterh_</span></a>: yes
| [Tuesday 15 February 2011] [09:10:57] &lt;<a href="#id1831"><span class="problematic" id="id1832">pieterh_</span></a>&gt;      sorry, the &#8216;no&#8217; part confused us, I think
| [Tuesday 15 February 2011] [09:11:28] &lt;sustrik&gt;       Guthur: namely, that the messages should be kept in 0mq as long as possible
| [Tuesday 15 February 2011] [09:11:56] &lt;sustrik&gt;       thus instead of starting asynch writes immediately for any data to send
| [Tuesday 15 February 2011] [09:12:10] &lt;sustrik&gt;       you should start async send
| [Tuesday 15 February 2011] [09:12:15] &lt;sustrik&gt;       wait while it compeltes
| [Tuesday 15 February 2011] [09:12:25] &lt;sustrik&gt;       then start next send
| [Tuesday 15 February 2011] [09:12:26] &lt;sustrik&gt;       etc.
| [Tuesday 15 February 2011] [09:12:48] &lt;sustrik&gt;       the rationale is that if you pushed all the data to the kernel immediately
| [Tuesday 15 February 2011] [09:13:03] &lt;Guthur&gt;        sustrik: and does 0MQ use the poll to do that subsequent send?
| [Tuesday 15 February 2011] [09:13:04] &lt;sustrik&gt;       0mq flow control (such as HWM) won&#8217;t work
| [Tuesday 15 February 2011] [09:13:36] &lt;sustrik&gt;       Guthur: all existing polling mechanisms are using sync sends
| [Tuesday 15 February 2011] [09:13:43] &lt;sustrik&gt;       i.e. they poll for pollout
| [Tuesday 15 February 2011] [09:14:05] &lt;sustrik&gt;       pollout is signaled if there&#8217;s a space free in the kernel buffer
| [Tuesday 15 February 2011] [09:14:24] &lt;sustrik&gt;       then it sends the data
| [Tuesday 15 February 2011] [09:14:43] &lt;Guthur&gt;        which should be the same as an IOCP completion status signaled for a write op, correct?
| [Tuesday 15 February 2011] [09:14:57] &lt;sustrik&gt;       yes
| [Tuesday 15 February 2011] [09:15:04] &lt;sustrik&gt;       it should be same
| [Tuesday 15 February 2011] [09:15:16] &lt;sustrik&gt;       except that IOCP itself is different from poll
| [Tuesday 15 February 2011] [09:15:23] &lt;sustrik&gt;       so it&#8217;ll be a bit complex
| [Tuesday 15 February 2011] [09:15:30] &lt;sustrik&gt;       but the semantics should be the same, yes
| [Tuesday 15 February 2011] [09:15:52] &lt;Guthur&gt;        yep, we need to send some op identifying data  in the OVERLAPPED,
| [Tuesday 15 February 2011] [09:16:27] &lt;zchrish&gt;       OK; here is the snipper - <a class="reference external" href="https://gist.github.com/827576">https://gist.github.com/827576</a>
| [Tuesday 15 February 2011] [09:16:35] &lt;Guthur&gt;        it&#8217;s the only way we will know what the completion status is being returned for
| [Tuesday 15 February 2011] [09:16:35] &lt;sustrik&gt;       even better: we can have a single IOCP per poller
| [Tuesday 15 February 2011] [09:17:00] &lt;Guthur&gt;        but IOCP will return for all ops
| [Tuesday 15 February 2011] [09:17:18] &lt;sustrik&gt;       yes, but we can place custom data to the result, right?
| [Tuesday 15 February 2011] [09:17:35] &lt;Guthur&gt;        via a custom OVERLAPPED sure
| [Tuesday 15 February 2011] [09:17:52] &lt;pieterh&gt;       zchrish: what does the client program print?
| [Tuesday 15 February 2011] [09:18:11] &lt;sustrik&gt;       then we can identify the socket there as well as operation being performed
| [Tuesday 15 February 2011] [09:18:19] &lt;sustrik&gt;       something like:
| [Tuesday 15 February 2011] [09:18:21] &lt;sustrik&gt;       {
| [Tuesday 15 February 2011] [09:18:28] &lt;sustrik&gt;           HANDLE socket;
| [Tuesday 15 February 2011] [09:18:36] &lt;sustrik&gt;           bool read_or_write;
| [Tuesday 15 February 2011] [09:18:36] &lt;sustrik&gt;       }
| [Tuesday 15 February 2011] [09:18:37] &lt;zchrish&gt;       Just the normal case : Received reply 0: [World]
| [Tuesday 15 February 2011] [09:18:50] &lt;Guthur&gt;        struct exactly that
| [Tuesday 15 February 2011] [09:19:00] &lt;Guthur&gt;        well roughly actually
| [Tuesday 15 February 2011] [09:19:16] &lt;Guthur&gt;        you don&#8217;t need the Handle though, we can set the completion key to that
| [Tuesday 15 February 2011] [09:19:32] &lt;Guthur&gt;        it will be returned for all completion status&#8217; for that socket
| [Tuesday 15 February 2011] [09:19:36] &lt;zchrish&gt;       Never goes to &#8220;WAITING...&#8221;
| [Tuesday 15 February 2011] [09:19:39] &lt;pieterh&gt;       zchrish: you are doing an infinite timeout in zmq::poll, what else would you expect to see?
| [Tuesday 15 February 2011] [09:19:56] &lt;sustrik&gt;       Guthur: ok
| [Tuesday 15 February 2011] [09:20:02] &lt;zchrish&gt;       Sorry, yes.
| [Tuesday 15 February 2011] [09:20:41] &lt;pieterh&gt;       zchrish: note that timeout is in usec (so use 1000000 for 1 second)
| [Tuesday 15 February 2011] [09:21:39] &lt;Guthur&gt;        sustrik: a bool wont cut it though, I actually intended to use an enum. There is at least 3 ops that take an overlapped ConnectNamedPipe, Read, write
| [Tuesday 15 February 2011] [09:22:51] &lt;Guthur&gt;        so the connect will also be returning to the IOCP
| [Tuesday 15 February 2011] [09:25:15] &lt;zchrish&gt;       So if I want to wrap my code like this, it seems like I should enter &#8220;0&#8221; and then perform the sleep myself. Is that permissible? Seems so.
| [Tuesday 15 February 2011] [09:27:13] &lt;pieterh&gt;       zchrish: did you get it working as expected?
| [Tuesday 15 February 2011] [09:27:42] &lt;pieterh&gt;       e.g. using a zmq_poll timeout of 1 second...
| [Tuesday 15 February 2011] [09:28:45] &lt;pieterh&gt;       doing the sleep outside zmq_poll is a bad design
| [Tuesday 15 February 2011] [09:29:01] &lt;pieterh&gt;       imagine your server replies after 1000 usec
| [Tuesday 15 February 2011] [09:29:23] &lt;pieterh&gt;       you client won&#8217;t get the response until after 1 full second
| [Tuesday 15 February 2011] [09:30:08] &lt;zchrish&gt;       yes, it works. Thank you. I used &#8220;0&#8221;. I agree with your assessment.
| [Tuesday 15 February 2011] [09:33:05] &lt;sustrik&gt;       Guthur: right
| [Tuesday 15 February 2011] [09:36:55] &lt;Guthur&gt;        cool, I think we are making progress with this. I have some rough code at home, hopefully we can go over it sometime soon
| [Tuesday 15 February 2011] [09:44:03] &lt;zchrish&gt;       pieterh: So I am playing around with different ways to detect errors in network traffic flow and the one that I seem to feel most comfortable with is the concept of a watchdog thread that monitors socket states. I put my 0mq socket into a thread and that thread doesn&#8217;t reset the state, an alarm goes off. This is the best method I have learned thus far. If there are better ways that you are willing to share, please do so. Thank
| [Tuesday 15 February 2011] [09:44:03] &lt;zchrish&gt;       you.
| [Tuesday 15 February 2011] [09:44:38] &lt;pieterh&gt;       zchrish: you cannot share a socket between threads, remember
| [Tuesday 15 February 2011] [09:45:05] &lt;pieterh&gt;       in general you need specific algorithms for different kinds of failure
| [Tuesday 15 February 2011] [09:45:31] &lt;zchrish&gt;       pieterh: No, I have a variable that represents the thread state and the thread is responsible for updating that state on a timely basis.
| [Tuesday 15 February 2011] [09:45:44] &lt;mikko&gt; zchrish: what does that actually monitor?
| [Tuesday 15 February 2011] [09:45:45] &lt;pieterh&gt;       you cannot share state between threads either
| [Tuesday 15 February 2011] [09:45:51] &lt;mikko&gt; that the thread is not stuck blocking?
| [Tuesday 15 February 2011] [09:47:49] &lt;zchrish&gt;       Well the idea is to try to verify that the routine is cycling through its while (true) state which I have defined to do so every &#8220;x&#8221; cycles of time. I want to ensure this is the case.
| [Tuesday 15 February 2011] [09:49:00] &lt;zchrish&gt;       pieterh: I am referring to &#8220;state&#8221; in a non-zeromq sense.
| [Tuesday 15 February 2011] [09:49:14] &lt;pieterh&gt;       zchrish: you are IMO misusing threads quite fundamentally
| [Tuesday 15 February 2011] [09:49:42] &lt;pieterh&gt;       each thread should be entirely isolated in terms of state, meaning memory
| [Tuesday 15 February 2011] [09:49:50] &lt;pieterh&gt;       threads should communicate only by sending each other messages
| [Tuesday 15 February 2011] [09:50:18] &lt;pieterh&gt;       threads should process a set of sockets that they own fully
| [Tuesday 15 February 2011] [09:51:05] &lt;pieterh&gt;       the only object in ZMQ that&#8217;s safe to share between threads is the context
| [Tuesday 15 February 2011] [09:51:26] &lt;zchrish&gt;       Thank you for your feedback; I will think...
| [Tuesday 15 February 2011] [09:53:31] &lt;stimpie&gt;       zchrish, you could have all your treads send a &#8216;variable&#8217; to your watchdog thread using messages
| [Tuesday 15 February 2011] [10:44:27] &lt;sustrik&gt;       Guthur: still there?
| [Tuesday 15 February 2011] [10:44:40] &lt;Guthur&gt;        sure
| [Tuesday 15 February 2011] [10:44:56] &lt;sustrik&gt;       there&#8217;s one problem with IOCP i haven&#8217;t realised
| [Tuesday 15 February 2011] [10:45:11] &lt;sustrik&gt;       namely: how to implement zmq_poll()
| [Tuesday 15 February 2011] [10:45:12] &lt;sustrik&gt;       ?
| [Tuesday 15 February 2011] [10:45:35] &lt;sustrik&gt;       given that fd_t will be HANDLE instead of SOCKET
| [Tuesday 15 February 2011] [10:45:51] &lt;sustrik&gt;       we can&#8217;t use select() to simulate the polling
| [Tuesday 15 February 2011] [10:45:55] &lt;Guthur&gt;        yeah, that&#8217;s something I meant to be asking you
| [Tuesday 15 February 2011] [10:46:41]          * sustrik is checking MSDN
| [Tuesday 15 February 2011] [10:48:18] &lt;Guthur&gt;        sustrik: though you can use SOCKETS with IOCP, but I assume that&#8217;s not the issue
| [Tuesday 15 February 2011] [10:48:57] &lt;sustrik&gt;       the problem is that IPC descriptor <em>has</em> to be HANDLE
| [Tuesday 15 February 2011] [10:49:27] &lt;sustrik&gt;       hm, well
| [Tuesday 15 February 2011] [10:49:51] &lt;sustrik&gt;       the I/O thread has to poll on both TCP and IPC sockets
| [Tuesday 15 February 2011] [10:50:15] &lt;sustrik&gt;       zmq_poll has to poll only on the descriptors provided by mailbox_t
| [Tuesday 15 February 2011] [10:50:33] &lt;sustrik&gt;       currently SOCKET but presumably a HANDLE in the future
| [Tuesday 15 February 2011] [10:51:21] &lt;sustrik&gt;       could be doable...
| [Tuesday 15 February 2011] [10:51:54]          * sustrik still doesn&#8217;t believe WinAPI has no equivalen of a simple poll() function
| [Tuesday 15 February 2011] [10:51:56] &lt;Guthur&gt;        yeah, a socket handle can be a file handle so it would make sense to get them all the same
| [Tuesday 15 February 2011] [10:52:32] &lt;Guthur&gt;        I think IOCP seems quite neat actually
| [Tuesday 15 February 2011] [10:52:45] &lt;Guthur&gt;        at bit murky at the beginning
| [Tuesday 15 February 2011] [10:53:12] &lt;Guthur&gt;        one thing though...
| [Tuesday 15 February 2011] [10:53:27] &lt;Guthur&gt;        I don&#8217;t think one can remove a handle from an IOCP
| [Tuesday 15 February 2011] [10:53:35] &lt;sustrik&gt;       the problem with IOCP is that it doesn&#8217;t provide a sane pushback mechanism
| [Tuesday 15 February 2011] [10:53:36] &lt;Guthur&gt;        which begs believe
| [Tuesday 15 February 2011] [10:54:27] &lt;Guthur&gt;        sustrik: you mean the fact we have to use the overlapped struct to identify etc?
| [Tuesday 15 February 2011] [10:54:58] &lt;sustrik&gt;       i mean the fact that you can push any amount of data to the socket
| [Tuesday 15 February 2011] [10:55:07] &lt;sustrik&gt;       without being notified that the TCP buffer is full
| [Tuesday 15 February 2011] [10:57:00] &lt;sustrik&gt;       there seems to be no equivalent to HWM when using IOCP
| [Tuesday 15 February 2011] [10:57:21] &lt;Guthur&gt;        sustrik: there is data in the overlapped regarding the amount of data sent
| [Tuesday 15 February 2011] [10:57:40] &lt;Guthur&gt;        you would probably also have to pass you HWM it make the comparison
| [Tuesday 15 February 2011] [10:58:03] &lt;Guthur&gt;        that is off the top of my head, so there may be other nicer ways
| [Tuesday 15 February 2011] [10:58:36] &lt;sustrik&gt;       i don&#8217;t follow
| [Tuesday 15 February 2011] [10:58:46] &lt;sustrik&gt;       what data in OVERLAPPED
| [Tuesday 15 February 2011] [10:58:48] &lt;sustrik&gt;       ?
| [Tuesday 15 February 2011] [10:58:51] &lt;Guthur&gt;        <a class="reference external" href="http://msdn.microsoft.com/en-us/library/ms684342(v=vs.85).aspx">http://msdn.microsoft.com/en-us/library/ms684342(v=vs.85).aspx</a>
| [Tuesday 15 February 2011] [10:58:55] &lt;Guthur&gt;        internalhigh
| [Tuesday 15 February 2011] [10:59:22] &lt;sustrik&gt;       &#8220;The InternalHigh member was originally reserved for system use and its behavior may change. &#8221;
| [Tuesday 15 February 2011] [10:59:23] &lt;Guthur&gt;        internal might have an error code for full buffer
| [Tuesday 15 February 2011] [10:59:35] &lt;sustrik&gt;       it&#8217;s some internal IOCP stuff
| [Tuesday 15 February 2011] [10:59:40] &lt;sustrik&gt;       better not touch it
| [Tuesday 15 February 2011] [10:59:53] &lt;Guthur&gt;        no i meant the part that says: The number of bytes transferred for the I/O request. The system sets this member if the request is completed without errors.
| [Tuesday 15 February 2011] [11:00:24] &lt;Guthur&gt;        we can add are own stuff to the custom overlapped struct so that&#8217;s not an issue
| [Tuesday 15 February 2011] [11:01:29] &lt;Guthur&gt;        a custom overlapped could look like follows...
| [Tuesday 15 February 2011] [11:01:31] &lt;Guthur&gt;        {                 OVERLAPPED olp;                 OP_TYPE op;                 int HWM;             }
| [Tuesday 15 February 2011] [11:01:34] &lt;Guthur&gt;        damn
| [Tuesday 15 February 2011] [11:01:38] &lt;Guthur&gt;        {
| [Tuesday 15 February 2011] [11:01:50] &lt;Guthur&gt;             OVERLAPPED olp;
| [Tuesday 15 February 2011] [11:01:57] &lt;Guthur&gt;            OP_TYPE op;
| [Tuesday 15 February 2011] [11:02:04] &lt;Guthur&gt;            int HWM;
| [Tuesday 15 February 2011] [11:02:06] &lt;Guthur&gt;        }
| [Tuesday 15 February 2011] [11:02:18] &lt;Guthur&gt;        sorry for the spam
| [Tuesday 15 February 2011] [11:02:55] &lt;Guthur&gt;        that&#8217;s just a very crude example
| [Tuesday 15 February 2011] [11:03:07] &lt;sustrik&gt;       hm, how would you limit the amount of pending outbound data?
| [Tuesday 15 February 2011] [11:15:27] &lt;Guthur&gt;        hmm, yeah that HWM probably wouldn&#8217;t help, it was more to explicitly show the custom Overlapped
| [Tuesday 15 February 2011] [11:16:09] &lt;Guthur&gt;        but I think in terms of what is in epoll etc, we can get that easy enough with IOCP
| [Tuesday 15 February 2011] [11:16:15] &lt;Guthur&gt;        agree?
| [Tuesday 15 February 2011] [11:16:34] &lt;Guthur&gt;        I haven&#8217;t looked much outside that
| [Tuesday 15 February 2011] [11:17:22] &lt;sustrik&gt;       Guthur: in terms of functionality you can get the same with IOCP
| [Tuesday 15 February 2011] [11:17:28] &lt;sustrik&gt;       although it requires a bit more work
| [Tuesday 15 February 2011] [11:18:00] &lt;sustrik&gt;       in terms of performance, there can be problems with IOCP
| [Tuesday 15 February 2011] [11:23:13] &lt;Guthur&gt;        i though IOCP was pretty performant
| [Tuesday 15 February 2011] [11:23:16] &lt;Guthur&gt;        thought*
| [Tuesday 15 February 2011] [11:24:16] &lt;sustrik&gt;       the problem i see is with under-filled outbound TCP buffer
| [Tuesday 15 February 2011] [11:24:38] &lt;sustrik&gt;       to honour the HWM on the send side
| [Tuesday 15 February 2011] [11:25:07] &lt;Guthur&gt;        how to the other method facilitate that?
| [Tuesday 15 February 2011] [11:25:20] &lt;Guthur&gt;        to/do
| [Tuesday 15 February 2011] [11:25:56] &lt;sustrik&gt;       hm, in theory we can count the number of bytes we&#8217;ve already sent to the socket and haven&#8217;t seen acknowledgements for
| [Tuesday 15 February 2011] [11:26:13] &lt;sustrik&gt;       yuck
| [Tuesday 15 February 2011] [11:26:37] &lt;Guthur&gt;        ah yes I see, pretty yucky
| [Tuesday 15 February 2011] [11:26:50] &lt;Guthur&gt;        so you get this for free the other ways?
| [Tuesday 15 February 2011] [11:27:04] &lt;sustrik&gt;       yes, using select/poll/epoll etc.
| [Tuesday 15 February 2011] [11:27:12] &lt;sustrik&gt;       any sane OS has a mechanism like this
| [Tuesday 15 February 2011] [11:27:17] &lt;sustrik&gt;       Win32 has select
| [Tuesday 15 February 2011] [11:27:31] &lt;sustrik&gt;       but undfortunately, it can be used just for SOCKETs
| [Tuesday 15 February 2011] [11:27:36] &lt;sustrik&gt;       (i.e. not named pipes)
| [Tuesday 15 February 2011] [11:28:50] &lt;sustrik&gt;       There&#8217;s WSAPoll btw
| [Tuesday 15 February 2011] [11:28:52] &lt;sustrik&gt;       but:
| [Tuesday 15 February 2011] [11:28:55] &lt;sustrik&gt;       &#8220;The WSAPoll function is defined on Windows Vista and later.&#8221;
| [Tuesday 15 February 2011] [11:29:41] &lt;sustrik&gt;       so the alternative to IOCP would be to use WSAPoll on Vista and Win7
| [Tuesday 15 February 2011] [11:29:49] &lt;Guthur&gt;        umm, XP is a large chuck of windows to not support
| [Tuesday 15 February 2011] [11:29:56] &lt;sustrik&gt;       and fall back to select() on XP or somesuch
| [Tuesday 15 February 2011] [11:30:05] &lt;sustrik&gt;       shrug
| [Tuesday 15 February 2011] [11:30:07] &lt;Guthur&gt;        also may rule out a lot of windows server
| [Tuesday 15 February 2011] [11:30:28] &lt;Guthur&gt;        not sure on win server kernel families though
| [Tuesday 15 February 2011] [11:31:44] &lt;sustrik&gt;       Minimum supported server
| [Tuesday 15 February 2011] [11:31:44] &lt;sustrik&gt;               Windows Server 2008
| [Tuesday 15 February 2011] [11:32:03] &lt;Guthur&gt;        umm that&#8217;s quite modern
| [Tuesday 15 February 2011] [11:32:06] &lt;sustrik&gt;       damn, it works for SOCKETs only
| [Tuesday 15 February 2011] [11:32:14] &lt;Guthur&gt;        hehe
| [Tuesday 15 February 2011] [11:32:17] &lt;Guthur&gt;        red herring then
| [Tuesday 15 February 2011] [11:40:19] &lt;sustrik&gt;       however, WSAPoll seems to have no limit on number of sockets it can poll on
| [Tuesday 15 February 2011] [11:40:30] &lt;sustrik&gt;       select is by default limited to 64
| [Tuesday 15 February 2011] [11:41:20] &lt;sustrik&gt;       so maybe, as a warm up, you could try to modify poll.hpp/poll.cpp to use WSAPoll on windows instead of poll
| [Tuesday 15 February 2011] [11:41:47] &lt;sustrik&gt;       you would need vista/win7 for that, obviously
| [Tuesday 15 February 2011] [11:43:01] &lt;sustrik&gt;       WSAPoll looks like pretty close copy of POSIX poll, so it should take some 1 hour to do that...
| [Tuesday 15 February 2011] [11:46:24] &lt;Guthur&gt;        sustrik: and keep the old version as a fall back?
| [Tuesday 15 February 2011] [11:46:41] &lt;sustrik&gt;       poll.cpp doesn&#8217;t compile on windows
| [Tuesday 15 February 2011] [11:46:48] &lt;sustrik&gt;       there&#8217;s no poll() function there
| [Tuesday 15 February 2011] [11:46:58] &lt;sustrik&gt;       so you won&#8217;t break anything
| [Tuesday 15 February 2011] [11:47:06] &lt;Guthur&gt;        oh, it uses select instead though, right?
| [Tuesday 15 February 2011] [11:47:10] &lt;sustrik&gt;       right
| [Tuesday 15 February 2011] [11:47:51] &lt;sustrik&gt;       you could force 0MQ to compile with poll
| [Tuesday 15 February 2011] [11:48:00] &lt;sustrik&gt;       by defining ZMQ_FORCE_POLL macro
| [Tuesday 15 February 2011] [11:48:13] &lt;sustrik&gt;       that would make it use poll.cpp instead of select.cpp
| [Tuesday 15 February 2011] [11:48:21] &lt;sustrik&gt;       obviously, the build will fail now
| [Tuesday 15 February 2011] [11:48:39] &lt;sustrik&gt;       but it can be presumably fixed by doing something like this:
| [Tuesday 15 February 2011] [11:48:46] &lt;sustrik&gt;       #ifdef ZMQ_HAVE_WINDOWS
| [Tuesday 15 February 2011] [11:48:55] &lt;sustrik&gt;           WSAPoll (...);
| [Tuesday 15 February 2011] [11:48:58] &lt;sustrik&gt;       #else
| [Tuesday 15 February 2011] [11:49:04] &lt;sustrik&gt;           poll (...);
| [Tuesday 15 February 2011] [11:49:06] &lt;sustrik&gt;       #endif
| [Tuesday 15 February 2011] [11:50:41] &lt;Guthur&gt;        ok, seems a reasonable well contained updated
| [Tuesday 15 February 2011] [11:50:46] &lt;Guthur&gt;        update*
| [Tuesday 15 February 2011] [11:51:33] &lt;Guthur&gt;        so would there be performance gains for ZMQ, how does the 64 socket limit effect ZMQ at the moment?
| [Tuesday 15 February 2011] [11:53:02] &lt;sustrik&gt;       in MSVC build the limit is rasied to 1024
| [Tuesday 15 February 2011] [11:53:16] &lt;sustrik&gt;       still, if 0mq hits the limit it fails
| [Tuesday 15 February 2011] [11:54:12] &lt;sustrik&gt;       also, poll() should be more efficient with large pollsets than select
| [Tuesday 15 February 2011] [11:56:58] &lt;sustrik&gt;       Guthur: wait a sec, the current implementation of poll presumes that fd is an int
| [Tuesday 15 February 2011] [11:57:09] &lt;Guthur&gt;        sustrik: can you point me to the portion of polls which IOCP does supply
| [Tuesday 15 February 2011] [11:57:11] &lt;sustrik&gt;       which is not true on windows
| [Tuesday 15 February 2011] [11:57:29] &lt;Guthur&gt;        sorry I&#8217;m a little inexperienced with polls and sockets in general
| [Tuesday 15 February 2011] [11:57:40] &lt;sustrik&gt;       so rewriting the poll wouldn&#8217;t be that easy
| [Tuesday 15 February 2011] [11:57:46] &lt;sustrik&gt;       anyway, what&#8217;s your question?
| [Tuesday 15 February 2011] [11:58:04] &lt;sustrik&gt;       polling means that you can wait for multiple sockets at once
| [Tuesday 15 February 2011] [11:58:32] &lt;sustrik&gt;       you wait either for socket becoming readable or socket becoming writeavle (or both)
| [Tuesday 15 February 2011] [11:58:56] &lt;sustrik&gt;       POSIX defines 2 ways of polling : select and poll
| [Tuesday 15 February 2011] [11:59:14] &lt;sustrik&gt;       different unix flavours provide additional polling mechanisms:
| [Tuesday 15 February 2011] [11:59:21] &lt;sustrik&gt;       epoll, /dev/poll, kqueue
| [Tuesday 15 February 2011] [11:59:43] &lt;sustrik&gt;       winapi is, unfortunately, highly inconsistent
| [Tuesday 15 February 2011] [11:59:45] &lt;Guthur&gt;        and there is something more than the events?
| [Tuesday 15 February 2011] [12:00:15] &lt;sustrik&gt;       ?
| [Tuesday 15 February 2011] [12:00:31] &lt;sustrik&gt;       poll() simply exists
| [Tuesday 15 February 2011] [12:00:37] &lt;sustrik&gt;       when one of the sockets is readable/writeable
| [Tuesday 15 February 2011] [12:00:49] &lt;sustrik&gt;       it works in the same way as zmq_poll() does
| [Tuesday 15 February 2011] [12:01:25] &lt;sustrik&gt;       exits*
| [Tuesday 15 February 2011] [12:01:36] &lt;Guthur&gt;        ok, so the problem is that IOCP only notifies when an operation has completed?
| [Tuesday 15 February 2011] [12:01:42] &lt;sustrik&gt;       exactly
| [Tuesday 15 February 2011] [12:01:46] &lt;sustrik&gt;       it&#8217;s so called AIO
| [Tuesday 15 February 2011] [12:01:51] &lt;sustrik&gt;       (async I/O)
| [Tuesday 15 February 2011] [12:02:02] &lt;sustrik&gt;       which is supposed to be better than standard I/O
| [Tuesday 15 February 2011] [12:02:11] &lt;sustrik&gt;       howver, it&#8217;s not used much
| [Tuesday 15 February 2011] [12:02:25] &lt;private_meta&gt;  Heya... Small question. Is there a way the server knows when a client disconnects?
| [Tuesday 15 February 2011] [12:02:27] &lt;sustrik&gt;       linux, for example, never implemented AIO for sockets
| [Tuesday 15 February 2011] [12:02:37] &lt;sustrik&gt;       private_meta: no
| [Tuesday 15 February 2011] [12:03:19] &lt;private_meta&gt;  so I&#8217;d have to implement some heartbeat and check if it&#8217;s going through?
| [Tuesday 15 February 2011] [12:04:13] &lt;sustrik&gt;       it&#8217;s up to you
| [Tuesday 15 February 2011] [12:04:22] &lt;private_meta&gt;  Would there be better options?
| [Tuesday 15 February 2011] [12:04:29] &lt;sustrik&gt;       i personally prefer timing out the request and resending afterwards
| [Tuesday 15 February 2011] [12:05:25] &lt;private_meta&gt;  Well, I would have needed to know when a connection terminates unexpectedly :/
| [Tuesday 15 February 2011] [12:05:46] &lt;sustrik&gt;       what does that mean?
| [Tuesday 15 February 2011] [12:06:24] &lt;sustrik&gt;       network stack has no idea about &#8220;connection termination&#8221;
| [Tuesday 15 February 2011] [12:07:04] &lt;sustrik&gt;       the only way to find out whether the other party is alive
| [Tuesday 15 February 2011] [12:07:11] &lt;sustrik&gt;       is to send it a ping
| [Tuesday 15 February 2011] [12:07:15] &lt;sustrik&gt;       and wait for a reply
| [Tuesday 15 February 2011] [12:07:16] &lt;private_meta&gt;  hmm k, thank you
| [Tuesday 15 February 2011] [12:07:33] &lt;sustrik&gt;       if the reply doesn&#8217;t arrive in x secs, you say the &#8220;connection is broken&#8221;
| [Tuesday 15 February 2011] [12:07:35] &lt;private_meta&gt;  Apparently boost asio implemented something like that under the hood
| [Tuesday 15 February 2011] [12:07:52] &lt;sustrik&gt;       quite possibly
| [Tuesday 15 February 2011] [12:08:40] &lt;private_meta&gt;  Just to make sure, are timeout mechanims somehow implemented?
| [Tuesday 15 February 2011] [12:09:11] &lt;sustrik&gt;       there&#8217;s timeout parameter in zmq_poll() finction
| [Tuesday 15 February 2011] [12:09:15] &lt;sustrik&gt;       function
| [Tuesday 15 February 2011] [12:09:37] &lt;private_meta&gt;  Thank you! I&#8217;ll try to figure out the rest on my own.
| [Tuesday 15 February 2011] [12:20:02] &lt;pieterh&gt;       sustrik: I sent an email to the list about releases
| [Tuesday 15 February 2011] [12:22:51] &lt;pieterh&gt;       private_meta: it kind of depends on the type of work you&#8217;re doing
| [Tuesday 15 February 2011] [12:23:16] &lt;pieterh&gt;       e.g. for pub-sub, servers don&#8217;t even know clients exist
| [Tuesday 15 February 2011] [12:24:00] &lt;pieterh&gt;       and 0MQ&#8217;s <a class="reference external" href="tcp://">tcp://</a> transport is &#8216;disconnected&#8217; meaning nodes can go and come back invisibly
| [Tuesday 15 February 2011] [12:24:03] &lt;private_meta&gt;  pieterh: I need two way communication between a server and multiple clients, and the server needs to be aware of the online status of clients
| [Tuesday 15 February 2011] [12:24:17] &lt;pieterh&gt;       so you have to define what this means, &#8220;online status&#8221;
| [Tuesday 15 February 2011] [12:24:28] &lt;pieterh&gt;       and then you have to explicitly send that to the server from clients
| [Tuesday 15 February 2011] [12:24:43] &lt;pieterh&gt;       typically it means &#8220;alive and kicking&#8221;, i.e. not frozen, not crashed, not offline
| [Tuesday 15 February 2011] [12:24:55] &lt;private_meta&gt;  if the network connection between server and client is severed, the server needs to know, that&#8217;s the basic thing
| [Tuesday 15 February 2011] [12:25:06] &lt;private_meta&gt;  hmm
| [Tuesday 15 February 2011] [12:25:07] &lt;pieterh&gt;       right
| [Tuesday 15 February 2011] [12:25:22] &lt;pieterh&gt;       the other typical problems are looping application threads, CPU overload on client box, etc.
| [Tuesday 15 February 2011] [12:25:30] &lt;pieterh&gt;       so a heartbeat sent by the main thread in your client is often the best thing
| [Tuesday 15 February 2011] [12:25:52] &lt;private_meta&gt;  ok
| [Tuesday 15 February 2011] [12:25:54] &lt;pieterh&gt;       this could be done by certain 0MQ sockets but it would not be fully reliable
| [Tuesday 15 February 2011] [12:26:06] &lt;pieterh&gt;       i.e. if your main thread looped, heartbeats would still be sent out
| [Tuesday 15 February 2011] [12:26:18] &lt;pieterh&gt;       also the reaction of your server to a dead client is specific to the use case
| [Tuesday 15 February 2011] [12:26:41] &lt;pieterh&gt;       if you read the Guide, you&#8217;ll see an example of &#8220;least recently used&#8221; routing
| [Tuesday 15 February 2011] [12:26:48] &lt;private_meta&gt;  Of course. The reaction is already implemented. It&#8217;s just that we need to switch the underlying server-client-infrastructure
| [Tuesday 15 February 2011] [12:26:59] &lt;pieterh&gt;       it&#8217;s quite easy to modify to implement heartbeats
| [Tuesday 15 February 2011] [12:27:31] &lt;pieterh&gt;       I believe there are more advanced examples that actually do heartbeating
| [Tuesday 15 February 2011] [12:27:34]          * pieterh goes to check
| [Tuesday 15 February 2011] [12:28:43] &lt;pieterh&gt;       take a look at the peering1/3 examples
| [Tuesday 15 February 2011] [12:29:49] &lt;pieterh&gt;       well, it&#8217;s more complex than heartbeating but shows how to handle multiple sockets using zmq_poll
| [Tuesday 15 February 2011] [12:29:52] &lt;pieterh&gt;       <a class="reference external" href="http://zguide.zeromq.org/chapter:all#toc50">http://zguide.zeromq.org/chapter:all#toc50</a>
| [Tuesday 15 February 2011] [12:30:55] &lt;pieterh&gt;       mikko: there are zfl build failures from Hud^hJenkins, I&#8217;ve fixed that issue
| [Tuesday 15 February 2011] [12:31:17] &lt;private_meta&gt;  Thanks, I&#8217;ll look it up
| [Tuesday 15 February 2011] [12:31:57] &lt;private_meta&gt;  <em>sigh</em> it&#8217;s a pain having switch to a new library if it&#8217;s not all too compatible :/
| [Tuesday 15 February 2011] [12:36:03] &lt;sustrik&gt;       pieterh: thx
| [Tuesday 15 February 2011] [12:36:29] &lt;pieterh&gt;       private_meta: you can most likely make a decent emulation of your old library
| [Tuesday 15 February 2011] [12:36:57] &lt;pieterh&gt;       sustrik: let&#8217;s see what discussion that creates...
| [Tuesday 15 February 2011] [12:37:06] &lt;private_meta&gt;  pieterh: In some way that is what I want to do. Or let&#8217;s say need to do.
| [Tuesday 15 February 2011] [12:37:22] &lt;pieterh&gt;       what is the old library? Boost.asio?
| [Tuesday 15 February 2011] [12:39:19] &lt;private_meta&gt;  Yes
| [Tuesday 15 February 2011] [12:39:44] &lt;pieterh&gt;       I&#8217;d suggest making that a public project then
| [Tuesday 15 February 2011] [12:39:59] &lt;pieterh&gt;       shove it on github, announce it on zeromq-dev, get others to help you
| [Tuesday 15 February 2011] [12:40:10] &lt;private_meta&gt;  But apparently, when compiled with a linux MPI compiler and when using it with MPI commands, it loses messages
| [Tuesday 15 February 2011] [12:40:59] &lt;pieterh&gt;       private_meta: if your only problem is bugs, that&#8217;s pretty good
| [Tuesday 15 February 2011] [12:41:10] &lt;private_meta&gt;  How so?
| [Tuesday 15 February 2011] [12:41:30] &lt;pieterh&gt;       should be easy to solve, if it&#8217;s reproducible
| [Tuesday 15 February 2011] [12:41:43] &lt;private_meta&gt;  Ahahaa... yeah, that&#8217;s what we thought
| [Tuesday 15 February 2011] [12:42:02] &lt;private_meta&gt;  before we spent months trying to fix it
| [Tuesday 15 February 2011] [12:42:10] &lt;pieterh&gt;       months? wow... ok
| [Tuesday 15 February 2011] [12:42:33] &lt;private_meta&gt;  The OpenMPI project doesn&#8217;t care and not a single boost or asio developer can help
| [Tuesday 15 February 2011] [12:43:15] &lt;pieterh&gt;       Can you explain briefly the relationship between boost asio and MPI?
| [Tuesday 15 February 2011] [12:44:16] &lt;pieterh&gt;       Also, if you get stuck on any 0MQ issue for more than a few... days... come here or to the dev list for help
| [Tuesday 15 February 2011] [12:44:17] &lt;private_meta&gt;  Well, I don&#8217;t know exactly what you want detailed. We use boost asio to communicate between a server and clients, while these clients are MPI programs that run parallel code.
| [Tuesday 15 February 2011] [12:44:47] &lt;pieterh&gt;       i&#8217;ve never used MPI and have only seen boost asio from a distance
| [Tuesday 15 February 2011] [12:44:54] &lt;pieterh&gt;       does the MPI API call boost asio?
| [Tuesday 15 February 2011] [12:45:30] &lt;pieterh&gt;       or is the MPI part separate from the boost asio stuff?
| [Tuesday 15 February 2011] [12:45:32] &lt;private_meta&gt;  Nonono, MPI and Boost asio are not connected in any way execpt for our code. We use MPI for parallelization.
| [Tuesday 15 February 2011] [12:45:44] &lt;pieterh&gt;       ok...
| [Tuesday 15 February 2011] [12:45:50] &lt;private_meta&gt;  But still we need communication from the parallel clients to the server(s)
| [Tuesday 15 February 2011] [12:45:59] &lt;pieterh&gt;       so your client apps are doing weird multithreading via MPI
| [Tuesday 15 February 2011] [12:46:12] &lt;pieterh&gt;       and at the same time trying to do sane multithreading via 0MQ at the other side
| [Tuesday 15 February 2011] [12:46:21] &lt;pieterh&gt;       all in a single process
| [Tuesday 15 February 2011] [12:46:25] &lt;private_meta&gt;  Somewhat. I&#8217;d rather call it multiprocessing
| [Tuesday 15 February 2011] [12:46:54] &lt;pieterh&gt;       :-) to be able to help, I need to map unfamiliar stuff onto words that make sense in this universe...
| [Tuesday 15 February 2011] [12:47:00] &lt;private_meta&gt;  We have a cluster with several nodes/servers, and they all need to be communicated with while they do some multicore and multinode crunching
| [Tuesday 15 February 2011] [12:47:18] &lt;private_meta&gt;  hmm
| [Tuesday 15 February 2011] [12:47:22] &lt;private_meta&gt;  something familiar...
| [Tuesday 15 February 2011] [12:47:39] &lt;pieterh&gt;       so a client behaves correctly when it doesn&#8217;t do any work, and starts to lose messages when it uses MPI...?
| [Tuesday 15 February 2011] [12:47:48] &lt;private_meta&gt;  well, imagine MPI to be some sort of threading library, where the threads can communicate with each other AND can be on different computers
| [Tuesday 15 February 2011] [12:47:58] &lt;private_meta&gt;  &gt;_&gt;
| [Tuesday 15 February 2011] [12:47:59] &lt;pieterh&gt;       sure, like a primitive 0MQ
| [Tuesday 15 February 2011] [12:48:05] &lt;private_meta&gt;  ok
| [Tuesday 15 February 2011] [12:48:35] &lt;pieterh&gt;       nah, I&#8217;m sure MPI is great, that&#8217;s not the point
| [Tuesday 15 February 2011] [12:48:47] &lt;pieterh&gt;       your emulation over 0MQ works until you link clients with MPI, right?
| [Tuesday 15 February 2011] [12:48:49] &lt;private_meta&gt;  so, we use this setup to execute code on different platforms, like Graphics Cards (CUDA compiler), CPUs (MPI compiler) or IBM Cell Broadband Engine (IBM compiler)
| [Tuesday 15 February 2011] [12:49:01] &lt;pieterh&gt;       ack, a fairly classic setup IMO
| [Tuesday 15 February 2011] [12:49:05] &lt;private_meta&gt;  Whenever it&#8217;s compiled with MPI and used with MPI, several messages are lost
| [Tuesday 15 February 2011] [12:49:09] &lt;pieterh&gt;       ok
| [Tuesday 15 February 2011] [12:49:19] &lt;pieterh&gt;       do you have a <em>minimal</em> test case that reproduces this?
| [Tuesday 15 February 2011] [12:50:01] &lt;private_meta&gt;  I&#8217;d have to ask my colleague, but he&#8217;s not here right now
| [Tuesday 15 February 2011] [12:50:18] &lt;pieterh&gt;       faced with this, what I&#8217;d do is:
| [Tuesday 15 February 2011] [12:50:21] &lt;private_meta&gt;  As far as I know, he created some minimal test case for trying to find the bug
| [Tuesday 15 February 2011] [12:50:39] &lt;pieterh&gt;       ... ok, more questions
| [Tuesday 15 February 2011] [12:50:45] &lt;pieterh&gt;       what 0MQ socket types are you using?
| [Tuesday 15 February 2011] [12:51:44] &lt;private_meta&gt;  slow down, slow down, I&#8217;m new to 0MQ, do you mean like &#8220;TCP and IPC&#8221; or do you mean that &#8220;ZMQ_REP&#8221; stuff?
| [Tuesday 15 February 2011] [12:51:50] &lt;pieterh&gt;       :-)
| [Tuesday 15 February 2011] [12:52:01] &lt;pieterh&gt;       both
| [Tuesday 15 February 2011] [12:52:16] &lt;pieterh&gt;       socket types means REP/REQ/PUB/SUB/etc.
| [Tuesday 15 February 2011] [12:52:36] &lt;pieterh&gt;       but I was also going to ask what transports you use (presumably <a class="reference external" href="tcp://">tcp://</a>)
| [Tuesday 15 February 2011] [12:52:43] &lt;private_meta&gt;  We want to use TCP and IPC
| [Tuesday 15 February 2011] [12:53:02] &lt;pieterh&gt;       the best way to proceed (and this is for any kind of 0MQ problem you face)
| [Tuesday 15 February 2011] [12:53:20] &lt;pieterh&gt;       is to make a minimal 0MQ server/client that reproduces the problem
| [Tuesday 15 February 2011] [12:53:26] &lt;private_meta&gt;  I guess I still need to find a list where the REP/REQ and other 0MQ vocabulary is detailed
| [Tuesday 15 February 2011] [12:53:35] &lt;pieterh&gt;       and post this somewhere we can look at it (e.g. a gist at github)
| [Tuesday 15 February 2011] [12:53:52] &lt;private_meta&gt;  uhm...
| [Tuesday 15 February 2011] [12:54:03] &lt;private_meta&gt;  My problem isn&#8217;t with 0MQ right now I hope
| [Tuesday 15 February 2011] [12:54:08] &lt;pieterh&gt;       and you do need to read the Guide (<a class="reference external" href="http://zguide.zeromq.org/chapter:all">http://zguide.zeromq.org/chapter:all</a>)
| [Tuesday 15 February 2011] [12:54:22] &lt;private_meta&gt;  It&#8217;s getting to simulate what I HAVE (without the error of course)
| [Tuesday 15 February 2011] [12:54:39] &lt;pieterh&gt;       90% of the time its down to some error in how you use 0MQ
| [Tuesday 15 February 2011] [12:54:42] &lt;private_meta&gt;  yeah, I&#8217;m doing that, I was initially coming here to ask about the socket termination issue
| [Tuesday 15 February 2011] [12:55:07] &lt;private_meta&gt;  It&#8217;s not like the docs are a 5 minute read :)
| [Tuesday 15 February 2011] [12:55:19] &lt;pieterh&gt;       3-4 days, IMO
| [Tuesday 15 February 2011] [12:55:31] &lt;pieterh&gt;       well, it took longer to write :-)
| [Tuesday 15 February 2011] [12:56:05] &lt;pieterh&gt;       anyhow, first thing to do is a sanity check of your 0MQ code
| [Tuesday 15 February 2011] [12:56:11] &lt;private_meta&gt;  I&#8217;m sure of that. I try to extract what&#8217;s necessary, I doubt I need all the details for now (somewhat lazy approach, I know)
| [Tuesday 15 February 2011] [12:56:19] &lt;pieterh&gt;       we don&#8217;t care about code that works
| [Tuesday 15 February 2011] [12:56:48] &lt;pieterh&gt;       so a minimal (totally stripped down) server/client that fails, that we can look at...
| [Tuesday 15 February 2011] [12:56:56] &lt;pieterh&gt;       if we don&#8217;t find any errors in that, we can start to blame something else
| [Tuesday 15 February 2011] [12:57:00] &lt;private_meta&gt;  Well, the usual then :)
| [Tuesday 15 February 2011] [12:57:13] &lt;pieterh&gt;       right
| [Tuesday 15 February 2011] [12:57:32] &lt;pieterh&gt;       feel free to email me at <a class="reference external" href="mailto:ph&#37;&#52;&#48;imatix&#46;com">ph<span>&#64;</span>imatix<span>&#46;</span>com</a> if I&#8217;m not here when you&#8217;re ready
| [Tuesday 15 February 2011] [12:57:40] &lt;pieterh&gt;       or else post to the zeromq-dev list
| [Tuesday 15 February 2011] [12:58:07] &lt;pieterh&gt;       I assume the problem can be reproduced without exotic hardware?
| [Tuesday 15 February 2011] [13:00:50] &lt;private_meta&gt;  Somehow it feels like I&#8217;m being misunderstood. Until now there&#8217;s no problem with 0MQ yet, just with Boost Asio, that&#8217;s why I want to replace Asio with 0MQ, but I just started, so there are no problems, except for the learning curve :)
| [Tuesday 15 February 2011] [13:04:12] &lt;pieterh&gt;       ah
| [Tuesday 15 February 2011] [13:04:28] &lt;private_meta&gt;  &gt;_&lt;
| [Tuesday 15 February 2011] [13:04:41] &lt;pieterh&gt;       see how fast we kill problems with 0MQ!
| [Tuesday 15 February 2011] [13:04:48] &lt;pieterh&gt;       that took negative 30 minutes
| [Tuesday 15 February 2011] [13:05:01] &lt;pieterh&gt;       of <em>course</em> boost asio is dropping messages
| [Tuesday 15 February 2011] [13:05:30] &lt;private_meta&gt;  o_O
| [Tuesday 15 February 2011] [13:05:35] &lt;private_meta&gt;  Well, it shouldn&#8217;t
| [Tuesday 15 February 2011] [13:05:47] &lt;pieterh&gt;       sorry for misunderstanding
| [Tuesday 15 February 2011] [13:05:59] &lt;pieterh&gt;       presumably there is a queue overflow issue or something
| [Tuesday 15 February 2011] [13:08:55] &lt;pieterh&gt;       So if you want to make a boost asio emulation layer over 0MQ, I&#8217;d recommend doing it open source
| [Tuesday 15 February 2011] [13:11:37] &lt;private_meta&gt;  The amount of &#8220;emulation&#8221; we need contradicts a full open source emulation... it would be a heck of a lot of work, and I don&#8217;t have time for that at work &gt;_&gt;
| [Tuesday 15 February 2011] [13:11:47] &lt;private_meta&gt;  not that it wouldn&#8217;t be a neat idea
| [Tuesday 15 February 2011] [13:14:59] &lt;pieterh&gt;       The usual (sane) approach is to make strictly only what you need for your apps, release it, and allow others to expand it
| [Tuesday 15 February 2011] [13:15:15] &lt;pieterh&gt;       Assuming it&#8217;s possible to map the subset of boost asio you use to 0MQ
| [Tuesday 15 February 2011] [13:15:52] &lt;private_meta&gt;  It would be difficult I assume
| [Tuesday 15 February 2011] [13:42:37] &lt;Guthur&gt;        sustrik, returning to are discussion earlier re: IOCP, would it not be beneficial in the long run, if possible, to have both named pipes and sockets on IOCP, with aim to remove the need for Select
| [Tuesday 15 February 2011] [13:53:06] &lt;staylor&gt;       I have a question about zmq sockets, are the underlying sockets maintained or opened/closed on demand?
| [Tuesday 15 February 2011] [13:53:42] &lt;staylor&gt;       reason I ask is I&#8217;d like to know from my application if the client application is currently connected to the server or not, but I don&#8217;t see any socket status calls in the zmq_socket api
| [Tuesday 15 February 2011] [14:04:03] &lt;cremes&gt;        pieterh: does anyone with a wiki account have permission to modify the FAQ?
| [Tuesday 15 February 2011] [14:04:41] &lt;cremes&gt;        pieterh: nm; just answered my own question
| [Tuesday 15 February 2011] [14:13:40] &lt;cremes&gt;        just updated the FAQ to help people with the assertion in mailbox.cpp:182
| [Tuesday 15 February 2011] [15:06:33] Notice  -Martinp23- [Global Notice] Hi everyone. You will have possibly noticed some instability on the network earlier this evening. The network is under a sustained DDoS and so lag and possible further splits are to be expected. We apologise for the inconvenience - our fantastic sponsorship and infra teams are working to minimise the further impact. Have a nice evening!
| [Tuesday 15 February 2011] [15:40:03] &lt;sejo&gt;  hey all I&#8217;m looking at different solutions, and basicly just need an mq to be able to use from python,
| [Tuesday 15 February 2011] [15:40:27] &lt;sejo&gt;  so what would be my advantage using 0mq over rabbitmq or others?
| [Tuesday 15 February 2011] [15:47:14] &lt;Guthur&gt;        sejo, I really think it depends on use case scenario
| [Tuesday 15 February 2011] [15:48:04] &lt;Guthur&gt;        they are different beasts, rabbitmq is a broker base MQ, whereas ZeroMQ is brokerless, for a start
| [Tuesday 15 February 2011] [15:48:45] &lt;Guthur&gt;        I wont pretend to know much about rabbitmq though
| [Tuesday 15 February 2011] [15:49:10] &lt;Guthur&gt;        hehe, even my 0MQ knowledge would be on the lighter side compared to some around here
| [Tuesday 15 February 2011] [15:50:54] &lt;sejo&gt;  ok, well basicly in the beginning i probably have only like 10 clients popping items, and the same 10 pushing others onto it
| [Tuesday 15 February 2011] [15:51:57] &lt;sejo&gt;  as far as I understand now I should write my own protocol(s) and can use them over the clients and the servers. However is it easy to have multiple servers handling the same data?
| [Tuesday 15 February 2011] [15:52:27] &lt;sejo&gt;  it probably is
| [Tuesday 15 February 2011] [15:52:39] &lt;sejo&gt;  sorry stupid question
| [Tuesday 15 February 2011] [15:56:09] &lt;sejo&gt;  my biggest fear is that i&#8217;ll spend too much time developing on it before I can use it...
| [Tuesday 15 February 2011] [15:56:40] &lt;sejo&gt;  that&#8217;s why I ask around and not test them out all.. don&#8217;t have the time for it
| [Tuesday 15 February 2011] [15:58:59] &lt;Guthur&gt;        sure, it&#8217;s sensible to do research first
| [Tuesday 15 February 2011] [15:59:56] &lt;Guthur&gt;        scaling to multiple servers would something that 0MQ can do well
| [Tuesday 15 February 2011] [16:01:04] &lt;Guthur&gt;        but you don&#8217;t really get much in the way of &#8216;topic&#8217; or &#8216;queue&#8217; management out of the box, though there are PUB/SUB sockets
| [Tuesday 15 February 2011] [16:01:39] &lt;Guthur&gt;        I&#8217;m reluctant to give any hard advice though, due to be lack of hardcore experience and knowledge
| [Tuesday 15 February 2011] [16:02:16] &lt;sejo&gt;  thanks anyway right now I have no knowledge on what to use so
| [Tuesday 15 February 2011] [16:02:35] &lt;Guthur&gt;        you could glance through the 0MQ guide
| [Tuesday 15 February 2011] [16:02:50] &lt;sejo&gt;  basicly i want multiple servers and n-clients pushing and popping independently
| [Tuesday 15 February 2011] [16:03:00] &lt;Guthur&gt;        http://zguide.zeromq.org/chapter:all
| [Tuesday 15 February 2011] [16:03:12] &lt;sejo&gt;  i&#8217;m reading through it while we talk :p
| [Tuesday 15 February 2011] [16:03:14] &lt;Guthur&gt;        ok
| [Tuesday 15 February 2011] [16:03:20] &lt;Guthur&gt;        hehe cool
| [Tuesday 15 February 2011] [16:03:50] &lt;Guthur&gt;        there is a few example in there that could give some inspiration for your particular problem
| [Tuesday 15 February 2011] [16:04:41] &lt;sejo&gt;  yeah, main thing is that I don&#8217;t need a real pub/sub, client just chooses when to pop a message
| [Tuesday 15 February 2011] [16:06:15] &lt;Guthur&gt;        check out the Queue device, which would show a possible multi server pattern
| [Tuesday 15 February 2011] [16:06:24] &lt;Guthur&gt;        at a very simple level
| [Tuesday 15 February 2011] [16:06:59] &lt;Guthur&gt;        pieter or sustrik would be better at giving advice than me
| [Tuesday 15 February 2011] [16:07:25] &lt;sejo&gt;  thk i&#8217;ll chekc it out
| [Tuesday 15 February 2011] [16:07:58] &lt;sejo&gt;  the thing that got me here was the nice looking python api :p
| [Tuesday 15 February 2011] [16:13:46] &lt;Guthur&gt;        I&#8217;m not familiar with the python binding, but yeah I&#8217;m sure its nice, hehe
| [Tuesday 15 February 2011] [16:14:19] &lt;Guthur&gt;        python has that sort of philosophy, nice simple interfaces
| [Tuesday 15 February 2011] [16:15:04] &lt;sejo&gt;  we&#8217;ll i&#8217;ll read up on it more, the ventilation example pretty much does what i want, only i have multiple ventilators and each of them multiple types of messages
| [Tuesday 15 February 2011] [16:16:12] &lt;sejo&gt;  well no probably i only need one type that works with json
| [Tuesday 15 February 2011] [16:16:49] &lt;Guthur&gt;        I like JSON, nice format
| [Tuesday 15 February 2011] [16:17:00] &lt;sejo&gt;  Guthur: thanks for the information, i&#8217;ll read up on it a bit more and then i&#8217;ll probably need to choose
| [Tuesday 15 February 2011] [16:17:07] &lt;sejo&gt;  ttyal
| [Tuesday 15 February 2011] [16:17:11] &lt;sejo&gt;  gtg
| [Tuesday 15 February 2011] [16:17:14] &lt;Guthur&gt;        later
| [Tuesday 15 February 2011] [16:17:38] &lt;Guthur&gt;        ok, drop by later and someone more experience can give better advice
| [Tuesday 15 February 2011] [16:43:59] &lt;lt_schmidt_jr&gt; is gonzalo here perchance
| [Tuesday 15 February 2011] [16:46:59] &lt;whack&gt; So, is there no way to bind to a random port? (like binding to port 0)
| [Tuesday 15 February 2011] [16:47:19] &lt;whack&gt; I&#8217;m not seeing anything obvious in the docs, and attempts to bind to tcp://blah:0 result in an error
| [Tuesday 15 February 2011] [17:46:57] &lt;sustrik&gt;       lt_schmidt_jr: gonzalo doesn&#8217;t come here often, you have to use email instead
| [Tuesday 15 February 2011] [17:47:23] &lt;sustrik&gt;       whack: no there&#8217;s no way
| [Tuesday 15 February 2011] [17:53:51] &lt;lt_schmidt_jr&gt; sustrik; we are having an impedance mismatch on our responses, thanks
| [Tuesday 15 February 2011] [18:06:55] &lt;kdj&gt;   So what is the proper way to make sure that a message is sent to a polling server? Just a response?
| [Tuesday 15 February 2011] [18:07:33] &lt;cremes&gt;        kdj: i don&#8217;t understand the question; can you rephrase?
| [Tuesday 15 February 2011] [18:09:48] &lt;kdj&gt;   Sorry. We have some clients that will occasionally send a short message to a server... but just sending won&#8217;t error if the server isn&#8217;t there. I understand why (I think)
| [Tuesday 15 February 2011] [18:10:09] &lt;kdj&gt;   But I want to make sure the server is there
| [Tuesday 15 February 2011] [18:10:40] &lt;cremes&gt;        kdj: that&#8217;s correct; 0mq has no indicator that the server went away
| [Tuesday 15 February 2011] [18:11:02] &lt;cremes&gt;        you should establish an &#8220;ack&#8221; that the server should send back; if it times out, the server is dead
| [Tuesday 15 February 2011] [18:11:17] &lt;cremes&gt;        i recommend polling on req/rep sockets to accomplish this
| [Tuesday 15 February 2011] [18:11:43] &lt;cremes&gt;        e.g. each client has its own REQ socket; the server has a XREP socket (so that it can respond to multiple clients)
| [Tuesday 15 February 2011] [18:11:52] &lt;kdj&gt;   You can poll on REQ sockets?
| [Tuesday 15 February 2011] [18:12:04] &lt;kdj&gt;   Yeah, that is how it is setup now
| [Tuesday 15 February 2011] [18:12:06] &lt;cremes&gt;        absolutely; send/recv with ZM_NOBLOCK
| [Tuesday 15 February 2011] [18:12:15] &lt;cremes&gt;        and register them with zmq_poll
| [Tuesday 15 February 2011] [18:13:45] &lt;kdj&gt;   Sending with NOBLOCK isn&#8217;t actually doing anything with just a normal REQ socket, but it does on receive... is that because I need polling?
| [Tuesday 15 February 2011] [18:14:34] &lt;cremes&gt;        kdj: well, you don&#8217;t <em>need</em> to send with noblock
| [Tuesday 15 February 2011] [18:14:50] &lt;cremes&gt;        the basic idea is when your client sends the data, start a timer
| [Tuesday 15 February 2011] [18:15:02] &lt;cremes&gt;        if the server responds back, cancel the timer
| [Tuesday 15 February 2011] [18:15:08] &lt;cremes&gt;        if the timer expires, close the req socket
| [Tuesday 15 February 2011] [18:15:26] &lt;cremes&gt;        none of that needs noblock
| [Tuesday 15 February 2011] [18:15:42] &lt;lt_schmidt_jr&gt; to jump in with kdj, when would you use in polling vs blocking
| [Tuesday 15 February 2011] [18:15:46] &lt;cremes&gt;        you will need to poll if your timer and req socket are in the same thread
| [Tuesday 15 February 2011] [18:16:04] &lt;cremes&gt;        lt_schmidt_jr: like so...
| [Tuesday 15 February 2011] [18:16:23] &lt;cremes&gt;        if you start your timer and then call recv in blocking mode, how do you handle timer expiration?
| [Tuesday 15 February 2011] [18:16:43] &lt;cremes&gt;        1. timer must live in a separate thread or process from the blocking recv
| [Tuesday 15 February 2011] [18:17:10] &lt;lt_schmidt_jr&gt; right
| [Tuesday 15 February 2011] [18:17:12] &lt;cremes&gt;        2. recv is non-blocking and you use poll to handle the recv; timer is on the same thread
| [Tuesday 15 February 2011] [18:17:21] &lt;cremes&gt;        those are the 2 ways i would approach
| [Tuesday 15 February 2011] [18:17:25] &lt;cremes&gt;        i like #2 better
| [Tuesday 15 February 2011] [18:17:31] &lt;kdj&gt;   Ok. I wasn&#8217;t sending an acknowledgement from the server originally... just receiving the message and moving on
| [Tuesday 15 February 2011] [18:17:33] &lt;cremes&gt;        threading gets so messy
| [Tuesday 15 February 2011] [18:18:09] &lt;cremes&gt;        kdj: if you were using REQ sockets on the client, the next time you tried to send you would get a EFSM error
| [Tuesday 15 February 2011] [18:18:37] &lt;cremes&gt;        REQ/REP sockets are strictly stateful; REQ <em>must</em> send/recv/send/recv while REP <em>must</em> recv/send/recv/send
| [Tuesday 15 February 2011] [18:19:44] &lt;kdj&gt;   Yeah, that makes sense.
| [Tuesday 15 February 2011] [18:21:39] &lt;lt_schmidt_jr&gt; hmm, interesting, so I should be able to put multiple sockets with a poller
| [Tuesday 15 February 2011] [18:21:50] &lt;lt_schmidt_jr&gt; same poller
| [Tuesday 15 February 2011] [18:23:04] &lt;kdj&gt;   Hmmm... does 0mq send an acknowledgement automatically?
| [Tuesday 15 February 2011] [18:23:27] &lt;cremes&gt;        lt_schmidt_jr: yes
| [Tuesday 15 February 2011] [18:23:30] &lt;cremes&gt;        kdj: no
| [Tuesday 15 February 2011] [18:24:17] &lt;cremes&gt;        kdj: the heartbeat is an application-level responsibility; your code must process and send the ack
| [Tuesday 15 February 2011] [18:24:46] &lt;cremes&gt;        you could actually abstract this out into your own private &#8220;heartbeat&#8221; socket and make it completely transparent
| [Tuesday 15 February 2011] [18:25:01] &lt;kdj&gt;   Yeah, that totally makes sense... I just threw some code together to test it though and it (sort of) works
| [Tuesday 15 February 2011] [18:26:03] &lt;kdj&gt;   having a poller on the server end, which just recieves messages (no sending), and a client which sends and then receives... somehow the receiving on the client end is still happening (and not blocking)
| [Tuesday 15 February 2011] [18:26:10] &lt;lt_schmidt_jr&gt; kdj: for me I am planning to use ZooKeeper, which I have used successfully in a similar way to figure out server presence
| [Tuesday 15 February 2011] [18:27:01] &lt;lt_schmidt_jr&gt; in my case to figure out other servers that will form a cluster
| [Tuesday 15 February 2011] [18:27:13] &lt;cremes&gt;        kdj: print out the data that your client is receiving
| [Tuesday 15 February 2011] [18:27:26] &lt;cremes&gt;        or run tcpdump and watch the packets fly
| [Tuesday 15 February 2011] [18:27:45] &lt;cremes&gt;        unless you are issuing a zmq_send() from the server, the client shouldn&#8217;t be getting a response
| [Tuesday 15 February 2011] [18:27:59] &lt;cremes&gt;        there has to be code doing that somewhere in your example
| [Tuesday 15 February 2011] [18:28:05] &lt;cremes&gt;        is it small enough to pastie?
| [Tuesday 15 February 2011] [18:29:19] &lt;lt_schmidt_jr&gt; kdj, cremes: you can use <a class="reference external" href="http://pastebin.com/">http://pastebin.com/</a>
| [Tuesday 15 February 2011] [18:31:34] &lt;kdj&gt;   Sorry, I think it was just my threading code for testing it. It works as it is supposed to. :X
| [Tuesday 15 February 2011] [18:32:02] &lt;cremes&gt;        yeah, that&#8217;s an easy mistake to make
| [Tuesday 15 February 2011] [18:32:18] &lt;cremes&gt;        take a look at using the &#8220;inproc&#8221; transport for communicating between threads
| [Tuesday 15 February 2011] [18:32:35] &lt;cremes&gt;        it obviates the need for mutexes and makes threading code simpler
| [Tuesday 15 February 2011] [18:32:56] &lt;cremes&gt;        btw, that&#8217;s one of the great wins of using 0mq; it&#8217;s a threading library too!
| [Tuesday 15 February 2011] [18:34:36] &lt;lt_schmidt_jr&gt; cremes: not to ask a stupid question, but how does one use it for threading - is it in the guide?
| [Tuesday 15 February 2011] [18:36:00] &lt;cremes&gt;        lt_schmidt_jr: i don&#8217;t know if it&#8217;s in the guide; haven&#8217;t looked lately
| [Tuesday 15 February 2011] [18:36:03] &lt;cremes&gt;        but here&#8217;s the basic idea
| [Tuesday 15 February 2011] [18:36:26] &lt;cremes&gt;        imagine you have 10 threads trying to access a shared resource
| [Tuesday 15 February 2011] [18:36:35] &lt;lt_schmidt_jr&gt; right
| [Tuesday 15 February 2011] [18:36:41] &lt;cremes&gt;        right now you use a mutex, spinlock or some locking structure
| [Tuesday 15 February 2011] [18:36:50] &lt;lt_schmidt_jr&gt; ok
| [Tuesday 15 February 2011] [18:37:00] &lt;cremes&gt;        with 0mq, put the resource that everyone wants into its own thread and give it a XREP socket
| [Tuesday 15 February 2011] [18:37:22] &lt;cremes&gt;        now make every other thread a &#8220;client&#8221; of that &#8220;server&#8221; and give them REQ sockets
| [Tuesday 15 February 2011] [18:37:50] &lt;cremes&gt;        connect them all together using inproc (all platforms) or ipc (unix only) to communicate so you don&#8217;t pay the TCP penalty
| [Tuesday 15 February 2011] [18:38:12] &lt;cremes&gt;        each client &#8220;asks&#8221; the resource for whatever via the 0mq socket
| [Tuesday 15 February 2011] [18:38:26] &lt;cremes&gt;        the 0mq socket serializes all access to the resource and prevents all race conditions
| [Tuesday 15 February 2011] [18:38:35] &lt;cremes&gt;        make sense?
| [Tuesday 15 February 2011] [18:38:35] &lt;lt_schmidt_jr&gt; I see
| [Tuesday 15 February 2011] [18:38:42] &lt;lt_schmidt_jr&gt; absolutely
| [Tuesday 15 February 2011] [18:38:51] &lt;lt_schmidt_jr&gt; thank you
| [Tuesday 15 February 2011] [18:38:54] &lt;cremes&gt;        this is the basic idea behind Actors if you have played with those in any languages
| [Tuesday 15 February 2011] [18:39:05] &lt;lt_schmidt_jr&gt; I have played with erl
| [Tuesday 15 February 2011] [18:39:28] &lt;cremes&gt;        lt_schmidt_jr: right; instead of using mutexes, you are using <em>messaging</em> for your concurrency
| [Tuesday 15 February 2011] [18:39:45] &lt;cremes&gt;        and here&#8217;s another cool part of using 0mq
| [Tuesday 15 February 2011] [18:39:56] &lt;lt_schmidt_jr&gt; cremes: very cool
| [Tuesday 15 February 2011] [18:40:04] &lt;cremes&gt;        let&#8217;s say at some point this &#8220;server&#8221; resource needs to be on its own box
| [Tuesday 15 February 2011] [18:40:34] &lt;cremes&gt;        all you have to do to change communications is modify the transport string that you pass to zmq_connect/zmq_bind from inproc (or ipc) to tcp
| [Tuesday 15 February 2011] [18:40:39] &lt;cremes&gt;        instant scaling
| [Tuesday 15 February 2011] [18:40:52] &lt;cremes&gt;        i have used this technique many times already; works wonderfully
| [Tuesday 15 February 2011] [18:40:53] &lt;lt_schmidt_jr&gt; yeah, you would just change the ..
| [Tuesday 15 February 2011] [18:41:36] &lt;lt_schmidt_jr&gt; I have prototyped a pub/sub message bus and I have inproc/ipc/tcp going between different participants
| [Tuesday 15 February 2011] [18:42:03] &lt;kdj&gt;   Hmmm... now I&#8217;m not really sure how our original client/server stuff was working...
| [Tuesday 15 February 2011] [18:42:29] &lt;lt_schmidt_jr&gt; but I think I am just not treating the threading correctly - too many threads
| [Tuesday 15 February 2011] [18:43:29] &lt;cremes&gt;        lt_schmidt_jr: you&#8217;ll have to figure that one out; i&#8217;m not a threading expert
| [Tuesday 15 February 2011] [18:45:29] &lt;lt_schmidt_jr&gt; cremes: the issue is I have a thread per connection and I still need to use polling to figure out if the thread needs to be shut down
| [Tuesday 15 February 2011] [18:45:36] &lt;lt_schmidt_jr&gt; so its a little ugly
| [Tuesday 15 February 2011] [18:46:41] &lt;cremes&gt;        i don&#8217;t understand, but ok
| [Tuesday 15 February 2011] [18:46:46] &lt;lt_schmidt_jr&gt; If I block on recv, I am not sure how a subscriber can be inerrrupted
| [Tuesday 15 February 2011] [18:46:58] &lt;cremes&gt;        oh, i see
| [Tuesday 15 February 2011] [18:47:04] &lt;cremes&gt;        are you using 2.0.10 or 2.1.0?
| [Tuesday 15 February 2011] [18:47:13] &lt;lt_schmidt_jr&gt; 2.0.1 and Java
| [Tuesday 15 February 2011] [18:47:20] &lt;lt_schmidt_jr&gt; 2.0.10
| [Tuesday 15 February 2011] [18:47:23] &lt;cremes&gt;        um... ok
| [Tuesday 15 February 2011] [18:47:47] &lt;lt_schmidt_jr&gt; is there something in 2.1.0 that  I should be using?
| [Tuesday 15 February 2011] [18:47:55] &lt;cremes&gt;        i think your only solution then is to close the entire context via zmq_term()
| [Tuesday 15 February 2011] [18:48:08] &lt;cremes&gt;        that will cause each socket to awaken and return ETERM
| [Tuesday 15 February 2011] [18:48:45] &lt;cremes&gt;        everybody should be on 2.1.0 now; the only 2.0.10 users should be legacy guys who <em>cannot</em> upgrade for whatever reason
| [Tuesday 15 February 2011] [18:48:52] &lt;cremes&gt;        so yeah, upgrade
| [Tuesday 15 February 2011] [18:48:52] &lt;lt_schmidt_jr&gt; see, I have multiple subscibers within the same context, and only one would need to be terminated
| [Tuesday 15 February 2011] [18:49:17] &lt;cremes&gt;        yep, terminating the context terminates <em>all</em> sockets so that&#8217;s your only choice there
| [Tuesday 15 February 2011] [18:49:33] &lt;cremes&gt;        in 2.1.0 i believe you can call zmq_close() on the socket from another thread and it will work as expected
| [Tuesday 15 February 2011] [18:49:35] &lt;lt_schmidt_jr&gt; ok, I skipped 2.1.0, because it caused the java binding unit tests to fail
| [Tuesday 15 February 2011] [18:49:53] &lt;cremes&gt;        yeah, 2.1.0 is considered beta so not everyone has updated their bindings
| [Tuesday 15 February 2011] [18:50:02] &lt;lt_schmidt_jr&gt; maybe I should do that myself
| [Tuesday 15 February 2011] [18:50:08] &lt;cremes&gt;        but it is <em>way</em> more stable than 2.0.10 so i would upgrade
| [Tuesday 15 February 2011] [18:50:16] &lt;cremes&gt;        maybe you could submit a patch to fix the java tests
| [Tuesday 15 February 2011] [18:50:41] &lt;lt_schmidt_jr&gt; I submitted the maven fix, should do this as well
| [Tuesday 15 February 2011] [18:51:16] &lt;lt_schmidt_jr&gt; so I could close the socket from a different thread, great
| [Tuesday 15 February 2011] [18:52:16] &lt;lt_schmidt_jr&gt; I guess I could figure out how to use polling correctly and not have a bunch of threads in the first place
| [Tuesday 15 February 2011] [18:52:36] &lt;lt_schmidt_jr&gt; that is have many sockets and a single polling thread
| [Tuesday 15 February 2011] [18:53:13] &lt;lt_schmidt_jr&gt; and not have the computer turn into a space heater
| [Tuesday 15 February 2011] [18:53:51] &lt;lt_schmidt_jr&gt; will go through the guide
| [Tuesday 15 February 2011] [18:54:54] &lt;kdj&gt;   Thanks for your help cremes
| [Tuesday 15 February 2011] [19:00:54] &lt;cremes&gt;        kdj: you are welcome; remember to pay it forward at some point ;)
| [Tuesday 15 February 2011] [19:01:50] &lt;kdj&gt;   Hopefully that won&#8217;t involve inadvertently leading someone astray. ;)
| [Tuesday 15 February 2011] [23:50:44] &lt;zedas&gt; sustrik: hey so i still see this poll 100%CPU bug even with the latest 2.1.0 and <em>cannot</em> figure out how to fix it. <a class="reference external" href="http://dpaste.de/oxeU/">http://dpaste.de/oxeU/</a>
| [Tuesday 15 February 2011] [23:51:20] &lt;zedas&gt; sustrik: it looks like i&#8217;ll have to dig into the zeromq code and pull out the error handling that zmq_poll does.
| [Wednesday 16 February 2011] [02:07:37] &lt;sustrik&gt;     zedas: any chance to reproduce the problem here?
| [Wednesday 16 February 2011] [02:24:37] &lt;zedas&gt;       sustrik: it happens at random on my servers, so next time i can gdb to it and debug for you.
| [Wednesday 16 February 2011] [02:24:59] &lt;sustrik&gt;     thanks
| [Wednesday 16 February 2011] [02:25:12] &lt;sustrik&gt;     find out what&#8217;s looping there
| [Wednesday 16 February 2011] [02:31:21] &lt;zedas&gt;       well i&#8217;m pretty sure it&#8217;s zmq_poll not handling an EAGAIN on zeromq socket objects.
| [Wednesday 16 February 2011] [02:31:41] &lt;zedas&gt;       but i&#8217;ll confirm it and work up a fix.  looking at the code the fix may be a flag that says to not stuff errors.
| [Wednesday 16 February 2011] [02:42:26] &lt;sustrik&gt;     let me have a look...
| [Wednesday 16 February 2011] [02:42:45] &lt;sustrik&gt;     zedas: is that linux?
| [Wednesday 16 February 2011] [02:44:30] &lt;sustrik&gt;     hm, the only operations on zeromq socket objects witihn zmq_poll is zmq_getsockopt()
| [Wednesday 16 February 2011] [02:45:02] &lt;sustrik&gt;     are you getting EAGAIN from zmq_getsockopt()? That should not happen as far as i am aware.
| [Wednesday 16 February 2011] [03:41:54] &lt;enleth&gt;      Hello
| [Wednesday 16 February 2011] [03:44:44] &lt;sustrik&gt;     hi
| [Wednesday 16 February 2011] [03:44:52] &lt;enleth&gt;      I&#8217;ve got a problem building OMQ - it&#8217;s about the luuid dependency. OMQ reuires the OSSP UUID library, which, due to conflicts with (unmaintained and dropped a long time ago) e2fsprogrs libuuid was renamed to libossp-uuid in my Linux distribution and, FWIW, this was generally a very popular solution.
| [Wednesday 16 February 2011] [03:45:10] &lt;enleth&gt;      But OMQ looks for libuuid and the configure script does not accept an alternate name
| [Wednesday 16 February 2011] [03:45:56] &lt;sustrik&gt;     enleth: easy, patch the build system and submit the patch to the mailing list
| [Wednesday 16 February 2011] [03:47:49] &lt;enleth&gt;      Oh, and I just noticed that the proper libuuid provides an uuid-config program for the configure script to use
| [Wednesday 16 February 2011] [03:48:08] &lt;enleth&gt;      uuid-config &#8211;libs outputs -lossp-uuid, which should be used
| [Wednesday 16 February 2011] [03:48:41] &lt;enleth&gt;      I guess this is what the build system should do instead of using a hardcoded name
| [Wednesday 16 February 2011] [03:49:12] &lt;sustrik&gt;     great, post your suggestion to the mailing list
| [Wednesday 16 February 2011] [03:49:12] &lt;enleth&gt;      The problem is, my skills with autotools are crap
| [Wednesday 16 February 2011] [03:49:23] &lt;sustrik&gt;     so that build system maintainers can have a look at it
| [Wednesday 16 February 2011] [03:49:28] &lt;enleth&gt;      OK, will do
| [Wednesday 16 February 2011] [03:49:31] &lt;sustrik&gt;     thanks
| [Wednesday 16 February 2011] [04:16:56] &lt;enleth&gt;      No, wait. It does use the old e2fsprogrs-derived libuuid, my bad.
| [Wednesday 16 February 2011] [04:25:44] &lt;enleth&gt;      OK, there is no problem, the distro repository managed screwed up and I got a bad upgrade installed
| [Wednesday 16 February 2011] [04:34:18] &lt;mikko&gt;       pieterh: are you here sir?
| [Wednesday 16 February 2011] [04:34:28] &lt;pieterh&gt;     mikko: just arrived
| [Wednesday 16 February 2011] [04:36:22] &lt;mikko&gt;       is there a specific reason why test functions are compiled into zfl ?
| [Wednesday 16 February 2011] [04:36:33] &lt;mikko&gt;       are those symbols needed outside selftest?
| [Wednesday 16 February 2011] [04:38:49] &lt;pieterh&gt;     if you can find a way of compiling a single C source file into two objects, I&#8217;m hapopy
| [Wednesday 16 February 2011] [04:38:51] &lt;pieterh&gt;     <em>happy
| [Wednesday 16 February 2011] [04:39:02] &lt;pieterh&gt;     but the test code must, for me, be in the same source as the actual class
| [Wednesday 16 February 2011] [04:40:00] &lt;mikko&gt;       pieterh: ok
| [Wednesday 16 February 2011] [04:41:04] &lt;pieterh&gt;     mikko: if people are unhappy about extra code in their executables we could make these conditionally compiled
| [Wednesday 16 February 2011] [04:42:36] &lt;mikko&gt;       pieterh: currently i was prototyping something like: https://gist.github.com/3f2a43c19ab439b22884
| [Wednesday 16 February 2011] [04:42:41] &lt;mikko&gt;       separate tests/ directory
| [Wednesday 16 February 2011] [04:42:59] &lt;mikko&gt;       but i think it should be possible to create separate objects from same code as well
| [Wednesday 16 February 2011] [04:43:00] &lt;pieterh&gt;     aaaghhhh.....
| [Wednesday 16 February 2011] [04:43:13] &lt;pieterh&gt;     it&#8217;s the reason the man pages are a real pain to maintain
| [Wednesday 16 February 2011] [04:43:21] &lt;pieterh&gt;     separate directories look very clean organizationally
| [Wednesday 16 February 2011] [04:43:29] &lt;pieterh&gt;     but they ensure pieces don&#8217;t get updated
| [Wednesday 16 February 2011] [04:44:02] &lt;pieterh&gt;     also the test cases are essential documentation, like the rest of the source file
| [Wednesday 16 February 2011] [04:44:29] &lt;pieterh&gt;     running the selftest in its own directory is a good idea, some tests need to mess with files
| [Wednesday 16 February 2011] [04:44:57] &lt;pieterh&gt;     but I really, really don&#8217;t want to find ourselves in the zmq situation of having lots of code that lacks test cases
| [Wednesday 16 February 2011] [04:46:09] &lt;mikko&gt;       hmmm, this gives me additional idea
| [Wednesday 16 February 2011] [04:47:14] &lt;mikko&gt;       in zfls case code coverage reports would make sense
| [Wednesday 16 February 2011] [04:47:46] &lt;pieterh&gt;     yes, as an additional insurance
| [Wednesday 16 February 2011] [04:47:57] &lt;pieterh&gt;     that&#8217;s meta testing, i.e. testing the test cases
| [Wednesday 16 February 2011] [04:48:11] &lt;pieterh&gt;     it&#8217;s a neat idea
| [Wednesday 16 February 2011] [04:48:27] &lt;mikko&gt;       i&#8217;ll put this on my todo
| [Wednesday 16 February 2011] [04:49:04] &lt;pieterh&gt;     there&#8217;s still space? I&#8217;m impressed...
| [Wednesday 16 February 2011] [04:49:07] &lt;pieterh&gt;     :-)
| [Wednesday 16 February 2011] [04:49:33] &lt;ianbarber&gt;   speaking off: mikko, did you move the pear server?
| [Wednesday 16 February 2011] [04:49:44] &lt;ianbarber&gt;   s/off/of
| [Wednesday 16 February 2011] [04:50:51] &lt;mikko&gt;       ianbarber: in the works
| [Wednesday 16 February 2011] [04:51:12] &lt;mikko&gt;       hmm
| [Wednesday 16 February 2011] [04:51:23] &lt;mikko&gt;       i guess the easiest would be to put it where rest of the stuff is
| [Wednesday 16 February 2011] [04:51:30] &lt;mikko&gt;       you can point the dns to 193.211.31.222
| [Wednesday 16 February 2011] [04:51:46] &lt;ianbarber&gt;   i&#8217;ll point both php. and pear. at it
| [Wednesday 16 February 2011] [04:56:05] &lt;mikko&gt;       looking at the apache rewrite rules this makes me want to use nginx
| [Wednesday 16 February 2011] [04:56:55] &lt;kristsk&gt;     nginx is about the same, imho
| [Wednesday 16 February 2011] [04:57:47] &lt;mikko&gt;       kristsk: dynamic virtualhosting seems a lot more fluent in nginx
| [Wednesday 16 February 2011] [05:03:15] &lt;kristsk&gt;     might be because of nginx&#8217;s config syntax, it does not feel so archaic
| [Wednesday 16 February 2011] [05:05:06] &lt;kristsk&gt;     in regard of vhosts lighthttpd is sought to be more powerfull
| [Wednesday 16 February 2011] [05:48:11] &lt;Guthur&gt;      sustrik: do you think having wsapoll on supported win platforms would be good to have?
| [Wednesday 16 February 2011] [06:06:02] &lt;ianbarber&gt;   pieterh: about?
| [Wednesday 16 February 2011] [06:06:22] &lt;pieterh&gt;     ianbarber: about 12ish
| [Wednesday 16 February 2011] [06:06:46] &lt;pieterh&gt;     :-) how can I help you?
| [Wednesday 16 February 2011] [06:06:50] &lt;ianbarber&gt;   :)
| [Wednesday 16 February 2011] [06:08:09] &lt;ianbarber&gt;   i discovered the wonderful land of martinique has a fun domain extension, so the PHP extension is now available on php.zero.mq and pear.zero.mq (pear is the PHP package system). Was wondering - do you want to have zeromq.org listen on zero.mq and www.zero.mq as well, i can point in that direction (even if it&#8217;s just doing a rewrite to zeromq.org)
| [Wednesday 16 February 2011] [06:08:56] &lt;ianbarber&gt;   we can redirect from hosting as well, just seems like if someone does go to just zero.mq, they should end up at the site. It&#8217;s on mikko&#8217;s geo redundant hosting at the mo :)
| [Wednesday 16 February 2011] [06:09:08] &lt;pieterh&gt;     oh... I like it
| [Wednesday 16 February 2011] [06:10:25] &lt;ianbarber&gt;   i can point them at 74.86.234.146 if thats sensible - don&#8217;t know if there are any weird wikidot issues or similar
| [Wednesday 16 February 2011] [06:10:27] &lt;pieterh&gt;     if you point www.zero.mq to www.wikidot.com, then I&#8217;ll add it to the custom domains on the website
| [Wednesday 16 February 2011] [06:10:32] &lt;ianbarber&gt;   cool
| [Wednesday 16 February 2011] [06:10:33] &lt;ianbarber&gt;   will do
| [Wednesday 16 February 2011] [06:10:57] &lt;pieterh&gt;     wow, we have a sneaky short domain name, so 2011...
| [Wednesday 16 February 2011] [06:11:40] &lt;pieterh&gt;     afair you can&#8217;t point zero.mq itself to a DNS name, you need to use the IP address there
| [Wednesday 16 February 2011] [06:11:52] &lt;mikko&gt;       you can
| [Wednesday 16 February 2011] [06:11:53] &lt;mikko&gt;       CNAME
| [Wednesday 16 February 2011] [06:11:57] &lt;ianbarber&gt;   should be able to cname it
| [Wednesday 16 February 2011] [06:11:58] &lt;ianbarber&gt;   yeah
| [Wednesday 16 February 2011] [06:12:27] &lt;pieterh&gt;     maybe I&#8217;m confusing with wildcards, I usually point *.zeromq.org etc. to wikidot
| [Wednesday 16 February 2011] [06:13:08] &lt;pieterh&gt;     cname the heck out of it, ianbarber, I&#8217;ll add the custom domain entries in an hour or so
| [Wednesday 16 February 2011] [06:14:12] &lt;ianbarber&gt;   cool :) I&#8217;ve pointed zero.mq and www.zero.mq, so we&#8217;ll see then :)
| [Wednesday 16 February 2011] [06:15:15] &lt;pieterh&gt;     would it be worth doing something sneaky like...
| [Wednesday 16 February 2011] [06:15:31] &lt;pieterh&gt;     zero.mq -&gt; redirects to www.zeromq.org/community... ?
| [Wednesday 16 February 2011] [06:16:03] &lt;pieterh&gt;     I can make that work
| [Wednesday 16 February 2011] [06:16:54] &lt;pieterh&gt;     ianbarber: DNS seems to have propagated already, that was fast
| [Wednesday 16 February 2011] [06:17:07] &lt;pieterh&gt;     presumably not cached anywhere
| [Wednesday 16 February 2011] [06:17:33] &lt;ianbarber&gt;   yeah, www wasn&#8217;t set up before
| [Wednesday 16 February 2011] [06:17:45] &lt;ianbarber&gt;   redirect to community sounds like an idea, if that&#8217;s doable on wikidot
| [Wednesday 16 February 2011] [06:18:12] &lt;pieterh&gt;     np, give me 5 minutes...
| [Wednesday 16 February 2011] [06:20:03] &lt;enleth&gt;      mikko: hey, just wanted to say thanks for the PHP bindings for ZMQ, TC and TT - good job!
| [Wednesday 16 February 2011] [06:21:40] &lt;enleth&gt;      It was pretty amusing when I opened the github page for ZMQ bindings a moment ago, saw your username and though &#8220;well, I know this guy - what else I might be using that he did?&#8221;
| [Wednesday 16 February 2011] [06:21:55] &lt;pieterh&gt;     ianbarber: ok, done, give it a whirl... :-)
| [Wednesday 16 February 2011] [06:22:06] &lt;mikko&gt;       enleth: my pleasure
| [Wednesday 16 February 2011] [06:25:13] &lt;ianbarber&gt;   pieterh: i seem to be getting a password page. that&#8217;s odd
| [Wednesday 16 February 2011] [06:25:32] &lt;pieterh&gt;     ianbarber: ah, my bad, it&#8217;s still a private site, will fix immediately
| [Wednesday 16 February 2011] [06:25:47] &lt;ianbarber&gt;   ah, cool
| [Wednesday 16 February 2011] [06:26:03] &lt;pieterh&gt;     ianbarber: try again now?
| [Wednesday 16 February 2011] [06:26:12] &lt;ianbarber&gt;   yep, that&#8217;s looking good
| [Wednesday 16 February 2011] [06:26:17] &lt;ianbarber&gt;   very nice!
| [Wednesday 16 February 2011] [06:26:57] &lt;pieterh&gt;     it&#8217;s very cool
| [Wednesday 16 February 2011] [09:30:33] &lt;ianbarber&gt;   pieterh: was thinking, I&#8217;ve noticed that there are a lot of questions on the mailing lists that are solved in broadly the same way, even from people who have read the guide (myself included). I was wondering whether there is any value in some sort of 0MQ pattern library.
| [Wednesday 16 February 2011] [09:30:50] &lt;ianbarber&gt;   sort of like http://developer.yahoo.com/ypatterns/ but with messaging patterns at all kinds of scales
| [Wednesday 16 February 2011] [09:31:56] &lt;ianbarber&gt;   i like how the generic pattern is described and an example given in each one of those (http://developer.yahoo.com/ypatterns/navigation/accordion.html)
| [Wednesday 16 February 2011] [09:32:37] &lt;ianbarber&gt;   but still pretty simple, 1 page
| [Wednesday 16 February 2011] [09:51:55] &lt;mikko&gt;       cremes: you can run make check
| [Wednesday 16 February 2011] [09:52:07] &lt;mikko&gt;       (dont wanna confuse the thread as it has moved on from there)
| [Wednesday 16 February 2011] [09:54:40] &lt;cremes&gt;      mikko: here are the results:  https://gist.github.com/829493
| [Wednesday 16 February 2011] [09:54:43] &lt;cremes&gt;      failure...
| [Wednesday 16 February 2011] [09:57:00] &lt;mikko&gt;       No space left on device
| [Wednesday 16 February 2011] [09:58:22] &lt;cremes&gt;      how did i not see that?.... bleary eyed after 30 hours of debugging...
| [Wednesday 16 February 2011] [09:58:39] &lt;mikko&gt;       also, the tests wont output anything but they should assert on failure
| [Wednesday 16 February 2011] [09:58:47] &lt;mikko&gt;       return code for success is 0
| [Wednesday 16 February 2011] [09:59:24] &lt;cremes&gt;      oh wait, that out of space condition happened overnight as i was testing something
| [Wednesday 16 February 2011] [09:59:29] &lt;cremes&gt;      hold on a sec
| [Wednesday 16 February 2011] [10:00:51] &lt;cremes&gt;      mikko: reload the gist; it now shows all as passing
| [Wednesday 16 February 2011] [10:01:10] &lt;cremes&gt;      my problem with running the tests was i didn&#8217;t know the right make target
| [Wednesday 16 February 2011] [10:01:25] &lt;mikko&gt;       make check is autotools default test target
| [Wednesday 16 February 2011] [10:01:29] &lt;cremes&gt;      i tried &#8216;make test&#8217; and &#8216;make all&#8217; but the former didn&#8217;t exist and the latter didn&#8217;t seem to run them
| [Wednesday 16 February 2011] [10:01:35] &lt;cremes&gt;      didn&#8217;t know that
| [Wednesday 16 February 2011] [10:02:03] &lt;mikko&gt;       make test seems to be widely used as well
| [Wednesday 16 February 2011] [10:02:04] &lt;cremes&gt;      looks like all is well; chalk this up to user error
| [Wednesday 16 February 2011] [10:02:25] &lt;cremes&gt;      yeah, maybe adding it as an additional target would be a nice convenience
| [Wednesday 16 February 2011] [10:02:43] &lt;mikko&gt;       i&#8217;ll add that on todo
| [Wednesday 16 February 2011] [10:09:41] &lt;pieterh_&gt;    ianbarber, was eating lunch... back now
| [Wednesday 16 February 2011] [10:10:17] &lt;pieterh_&gt;    imo there would be value in a pattern library but I&#8217;ll use Sustrik&#8217;s Law here
| [Wednesday 16 February 2011] [10:10:57] &lt;pieterh_&gt;    find the person to collect and maintain the patterns, and the problem is solved :-)
| [Wednesday 16 February 2011] [10:12:42] &lt;mikko&gt;       http://build.valokuva.org/job/test-gcov/5/cobertura/?
| [Wednesday 16 February 2011] [10:12:48] &lt;mikko&gt;       zfl code coverage
| [Wednesday 16 February 2011] [10:13:22] &lt;ianbarber&gt;   pieterh_: fair point, i do appreciate sustrik&#8217;s law :)
| [Wednesday 16 February 2011] [10:13:33] &lt;mikko&gt;       hmm source code missing
| [Wednesday 16 February 2011] [10:14:48] &lt;pieterh_&gt;    ianbarber, you can also apply Pieter&#8217;s Response to Calls to Action
| [Wednesday 16 February 2011] [10:15:01] &lt;pieterh_&gt;    &#8220;Excellent idea, Ian, I&#8217;m curious to see how you do it&#8221;
| [Wednesday 16 February 2011] [10:15:31] &lt;pieterh_&gt;    Known in ruder groups as nypa :-)
| [Wednesday 16 February 2011] [10:16:46] &lt;pieterh_&gt;    Actually, I do have a more positive idea
| [Wednesday 16 February 2011] [10:17:33] &lt;pieterh_&gt;    When you see a question solved in a way you think is reusable, point me to it, and I&#8217;ll cover it in the Guide at some stage
| [Wednesday 16 February 2011] [10:17:47] &lt;pieterh_&gt;    there are a lot of chapters waiting to be written
| [Wednesday 16 February 2011] [10:19:02] &lt;ianbarber&gt;   yeah, i think that&#8217;s good. the guide really is the basis for shared understanding about it
| [Wednesday 16 February 2011] [10:19:13] &lt;mikko&gt;       ah
| [Wednesday 16 February 2011] [10:19:16] &lt;mikko&gt;       finally it works
| [Wednesday 16 February 2011] [10:19:17] &lt;mikko&gt;       https://build.valokuva.org/job/test-gcov/7/cobertura/_default_/zfl_rpcd_c/
| [Wednesday 16 February 2011] [10:19:35] &lt;ianbarber&gt;   i&#8217;m happy to do some patterns (at some point!) just wanted to check whether it fitted in with the direction you&#8217;re taking the guide
| [Wednesday 16 February 2011] [10:25:38] &lt;pieterh_&gt;    mikko: sweet!
| [Wednesday 16 February 2011] [10:25:59] &lt;pieterh_&gt;    ianbarber, I guess the Guide aims to be the bible, eventually
| [Wednesday 16 February 2011] [10:26:02] &lt;pieterh_&gt;    modest aims
| [Wednesday 16 February 2011] [10:27:04] &lt;pieterh_&gt;    we can (and by &#8216;we&#8217; I really mean &#8216;you&#8217;) start by collecting text on a wiki page
| [Wednesday 16 February 2011] [10:27:19] &lt;pieterh_&gt;    that is trivial, shareable, reusable
| [Wednesday 16 February 2011] [10:27:42] &lt;pieterh_&gt;    join the zero.mq (great name) wiki if you&#8217;re not already on it, start a docs:patterns page...
| [Wednesday 16 February 2011] [10:27:47] &lt;ianbarber&gt;   yeah. i think the tricky thing with the guide is balancing it for new users, and for experienced ones
| [Wednesday 16 February 2011] [10:28:06] &lt;ianbarber&gt;   yep, i&#8217;m on it, will do
| [Wednesday 16 February 2011] [10:28:07] &lt;pieterh_&gt;    no problem, really... start with simple stuff, get more advanced as you go along
| [Wednesday 16 February 2011] [10:28:30] &lt;pieterh_&gt;    patterns would be like a cookbook, stand alone section, with some good indexing
| [Wednesday 16 February 2011] [10:28:33] &lt;ianbarber&gt;   yeah
| [Wednesday 16 February 2011] [10:28:55] &lt;ianbarber&gt;   that&#8217;s pretty much the idea, just to have a concise example of different interaction models really
| [Wednesday 16 February 2011] [10:29:08] &lt;pieterh_&gt;    even copy/paste of solutions from the email list is a good start
| [Wednesday 16 February 2011] [10:29:22] &lt;pieterh_&gt;    don&#8217;t worry about producing prose, that&#8217;s my speciality
| [Wednesday 16 February 2011] [10:42:44] &lt;mikko&gt;       hi Steve-o
| [Wednesday 16 February 2011] [10:42:55] &lt;Steve-o&gt;     hi mikko
| [Wednesday 16 February 2011] [10:43:59] &lt;Steve-o&gt;     working on new house this week, a foreclosure so many minor issues :/
| [Wednesday 16 February 2011] [10:44:16] &lt;Steve-o&gt;     back in HK next week and back to work
| [Wednesday 16 February 2011] [10:44:36] &lt;mikko&gt;       is your house in the states?
| [Wednesday 16 February 2011] [10:44:47] &lt;Steve-o&gt;     upstate NY
| [Wednesday 16 February 2011] [10:45:11] &lt;mikko&gt;       are you moving there?
| [Wednesday 16 February 2011] [10:45:24] &lt;Steve-o&gt;     near Martha Stewart is about the only notable point
| [Wednesday 16 February 2011] [10:46:18] &lt;Steve-o&gt;     eventually moving there, house prices very cheap so good time to buy
| [Wednesday 16 February 2011] [10:46:47] &lt;Steve-o&gt;     I have another year for my greencard it looks
| [Wednesday 16 February 2011] [10:48:40] &lt;Steve-o&gt;     so what is the status on autoconf in zeromq, anymore changes required?
| [Wednesday 16 February 2011] [10:49:52] &lt;mikko&gt;       i think we should get 2.1.0 out before refactoring the openpgm part
| [Wednesday 16 February 2011] [10:49:58] &lt;mikko&gt;       it seems to be working well with openpgm trunk
| [Wednesday 16 February 2011] [10:50:09] &lt;mikko&gt;       some open issues to solve but in general good
| [Wednesday 16 February 2011] [10:50:33] &lt;mikko&gt;       one of them is how to link openpgm if zeromq invokes openpgm built?
| [Wednesday 16 February 2011] [10:50:35] &lt;mikko&gt;       build</em>
| [Wednesday 16 February 2011] [10:50:51] &lt;mikko&gt;       install openpgm.so and use the shared lib?
| [Wednesday 16 February 2011] [10:51:04] &lt;mikko&gt;       use the object files directly?
| [Wednesday 16 February 2011] [10:51:05] &lt;mikko&gt;       etc
| [Wednesday 16 February 2011] [10:51:33] &lt;Steve-o&gt;     good question, distros would like shared libs,
| [Wednesday 16 February 2011] [10:51:43] &lt;mikko&gt;       linking libpgm.a into libzmq.so works on linux (assuming libpgm.a is position independent code) but not portable
| [Wednesday 16 February 2011] [10:52:16] &lt;mikko&gt;       yes, my only fear is the following scenario:
| [Wednesday 16 February 2011] [10:52:17] &lt;Steve-o&gt;     which is why I don&#8217;t have a dll on Windows
| [Wednesday 16 February 2011] [10:52:53] &lt;mikko&gt;       user has libpgm installed, now installs zeromq with openpgm support, zeromq invokes openpgm build and overwrites the existing installation
| [Wednesday 16 February 2011] [10:54:34] &lt;Steve-o&gt;     well a common solution I have seen to that is to install the dependent library in a sub-directory of the product build instead of the OS preferred location
| [Wednesday 16 February 2011] [10:55:31] &lt;mikko&gt;       but distros dont like rpath
| [Wednesday 16 February 2011] [10:55:38] &lt;Steve-o&gt;     For convenience prefer static libraries but allow distributions to use shared libraries.
| [Wednesday 16 February 2011] [10:55:58] &lt;Steve-o&gt;     so out of the tarball build libpgm.a but allow configure options for libpgm.so
| [Wednesday 16 February 2011] [10:56:20] &lt;mikko&gt;       but how to use the libpgm.a ?
| [Wednesday 16 February 2011] [10:56:35] &lt;mikko&gt;       .a inside .so is not really portable
| [Wednesday 16 February 2011] [10:56:55] &lt;Steve-o&gt;     really?  where isn&#8217;t it valid?
| [Wednesday 16 February 2011] [10:57:11] &lt;mikko&gt;       i can check, i did a lot of googling on this
| [Wednesday 16 February 2011] [11:01:24] &lt;mikko&gt;       hp-ux seems to be one
| [Wednesday 16 February 2011] [11:01:31] &lt;mikko&gt;       is that even supported by openpgm?
| [Wednesday 16 February 2011] [11:01:55] &lt;Steve-o&gt;     not yet
| [Wednesday 16 February 2011] [11:02:03] &lt;mikko&gt;       Libtool convenience library
| [Wednesday 16 February 2011] [11:02:07] &lt;mikko&gt;       sounds like a solution
| [Wednesday 16 February 2011] [11:02:09] &lt;mikko&gt;       <a class="reference external" href="http://sourceware.org/autobook/autobook/autobook_92.html">http://sourceware.org/autobook/autobook/autobook_92.html</a>
| [Wednesday 16 February 2011] [11:02:24] &lt;mikko&gt;       groups together a set of object files
| [Wednesday 16 February 2011] [11:02:30] &lt;Steve-o&gt;     that&#8217;s what zeromq is using now
| [Wednesday 16 February 2011] [11:03:06] &lt;mikko&gt;       but on different side of the fence
| [Wednesday 16 February 2011] [11:04:09] &lt;Steve-o&gt;     let me read up on HPUX, v10 was fine as I remember they broke various things with 11
| [Wednesday 16 February 2011] [11:04:35] &lt;mikko&gt;       Steve-o: how does bundling convenience lib on openpgm side sound like?
| [Wednesday 16 February 2011] [11:04:42] &lt;mikko&gt;       and then zeromq links that
| [Wednesday 16 February 2011] [11:04:56] &lt;mikko&gt;       i could at least investigate this as it seems like a portable option
| [Wednesday 16 February 2011] [11:05:46] &lt;Steve-o&gt;     ok, if you can provide the code, I&#8217;m not sure how this is supposed to work with two different projects
| [Wednesday 16 February 2011] [11:06:10] &lt;mikko&gt;       the ultimate goal i guess is to have both as shared libraries provided by distros
| [Wednesday 16 February 2011] [11:06:19] &lt;mikko&gt;       but in the meanwhile convenience lib sounds ok
| [Wednesday 16 February 2011] [11:06:26] &lt;mikko&gt;       i&#8217;ll put this on my ever growing todo list
| [Wednesday 16 February 2011] [11:07:04] &lt;mikko&gt;       at least i got ZFL code coverage working today
| [Wednesday 16 February 2011] [11:08:06] &lt;Steve-o&gt;     using gcov?
| [Wednesday 16 February 2011] [11:08:55] &lt;mikko&gt;       yes
| [Wednesday 16 February 2011] [11:09:25] &lt;mikko&gt;       <a class="reference external" href="http://build.valokuva.org/job/test-gcov/7/cobertura/_default_/">http://build.valokuva.org/job/test-gcov/7/cobertura/_default_/</a>
| [Wednesday 16 February 2011] [11:12:40] &lt;Steve-o&gt;     nice, it&#8217;s tedious getting those percentages higher though
| [Wednesday 16 February 2011] [11:13:50] &lt;mikko&gt;       true. you would almost need to preload a malloc implementation that fails randomly
| [Wednesday 16 February 2011] [11:13:54] &lt;mikko&gt;       to test all asserts
| [Wednesday 16 February 2011] [11:14:04] &lt;mikko&gt;       and even then it would be very random
| [Wednesday 16 February 2011] [11:15:00] &lt;mikko&gt;       might add same thing for zeromq later as well
| [Wednesday 16 February 2011] [11:17:08] &lt;cremes&gt;      pieterh: ping... where is &#8220;zhelpers.h&#8221;? i can&#8217;t compile your mailbugz.c test without it
| [Wednesday 16 February 2011] [11:18:04] &lt;<a href="#id1833"><span class="problematic" id="id1834">pieterh_</span></a>&gt;    cremes: sorry!
| [Wednesday 16 February 2011] [11:18:11] &lt;<a href="#id1835"><span class="problematic" id="id1836">pieterh_</span></a>&gt;    adding it now
| [Wednesday 16 February 2011] [11:18:12] &lt;sustrik&gt;     cremes, just replace it with zmq.h
| [Wednesday 16 February 2011] [11:18:21] &lt;<a href="#id1837"><span class="problematic" id="id1838">pieterh_</span></a>&gt;    sustrik: nope, that and other stuff
| [Wednesday 16 February 2011] [11:18:27] &lt;sustrik&gt;     there&#8217;s nothing used from zhelpers.h in the code
| [Wednesday 16 February 2011] [11:18:39] &lt;sustrik&gt;     i&#8217;ve just compiled it
| [Wednesday 16 February 2011] [11:18:50] &lt;sustrik&gt;     aha
| [Wednesday 16 February 2011] [11:18:59] &lt;sustrik&gt;     replace the line with:
| [Wednesday 16 February 2011] [11:18:59] &lt;sustrik&gt;     #include &lt;zmq.h&gt;
| [Wednesday 16 February 2011] [11:19:00] &lt;sustrik&gt;     #include &lt;stdio.h&gt;
| [Wednesday 16 February 2011] [11:19:00] &lt;sustrik&gt;     #include &lt;string.h&gt;
| [Wednesday 16 February 2011] [11:19:03] &lt;sustrik&gt;     that works
| [Wednesday 16 February 2011] [11:19:16] &lt;<a href="#id1839"><span class="problematic" id="id1840">pieterh_</span></a>&gt;    yes, that works
| [Wednesday 16 February 2011] [11:21:30] &lt;Steve-o&gt;     mikko: ok so I already have the libtool convenience library libpgm.la, libtool is giving me the shared and static libraries for free
| [Wednesday 16 February 2011] [11:22:09] &lt;mikko&gt;       Steve-o: i know, but if you link against the .la from zeromq it gives a a warning &#8220;Warning: libpgm.la won&#8217;t be deployed&#8221;
| [Wednesday 16 February 2011] [11:22:14] &lt;mikko&gt;       not sure if that can be ignored
| [Wednesday 16 February 2011] [11:22:29] &lt;mikko&gt;       maybe it can
| [Wednesday 16 February 2011] [11:22:35] &lt;Steve-o&gt;     is that because of a <a href="#id1841"><span class="problematic" id="id1842">noinst_</span></a> line?
| [Wednesday 16 February 2011] [11:23:24] &lt;mikko&gt;       i got a local branch here
| [Wednesday 16 February 2011] [11:23:43] &lt;<a href="#id1843"><span class="problematic" id="id1844">pieterh_</span></a>&gt;    sustrik, in the pubsub pattern it is IMO a design flaw that zmq_connect is asynchronous
| [Wednesday 16 February 2011] [11:23:51] &lt;mikko&gt;       Steve-o: <a class="reference external" href="https://gist.github.com/3f14f1a3f816df3016c7">https://gist.github.com/3f14f1a3f816df3016c7</a>
| [Wednesday 16 February 2011] [11:23:59] &lt;mikko&gt;       these are some of the changes related to zeromq
| [Wednesday 16 February 2011] [11:24:04] &lt;<a href="#id1845"><span class="problematic" id="id1846">pieterh_</span></a>&gt;    that is, on a sub socket
| [Wednesday 16 February 2011] [11:25:08] &lt;mikko&gt;       Steve-o: i tested that with ./configure &#8211;without-documentation &#8211;with-pgm=/tmp/to/pgm-trunk
| [Wednesday 16 February 2011] [11:28:23] &lt;Steve-o&gt;     mikko: I can&#8217;t find anything on that error message in google
| [Wednesday 16 February 2011] [11:29:19] &lt;sustrik&gt;     <a href="#id1847"><span class="problematic" id="id1848">pieterh_</span></a>: why so?
| [Wednesday 16 February 2011] [11:32:59] &lt;zedas&gt;       sustrik: yep that&#8217;s linux. why?
| [Wednesday 16 February 2011] [11:33:22] &lt;sustrik&gt;     there are 2 implementations of zmq_poll
| [Wednesday 16 February 2011] [11:33:38] &lt;sustrik&gt;     i was just checking which one to have a look at
| [Wednesday 16 February 2011] [11:34:25] &lt;sustrik&gt;     anyway, what&#8217;s the problem you were referring to?
| [Wednesday 16 February 2011] [11:35:18] &lt;sustrik&gt;     ah, the EAGAINs in strace
| [Wednesday 16 February 2011] [11:35:37] &lt;Steve-o&gt;     mikko: maybe I need to explicitly add a noinst_LTLIBRARIES instead of lib_LTLIBRARIES
| [Wednesday 16 February 2011] [11:35:38] &lt;sustrik&gt;     i&#8217;ve missed the link, sorry
| [Wednesday 16 February 2011] [11:36:04] &lt;cremes&gt;      <a href="#id1849"><span class="problematic" id="id1850">pieterh_</span></a>: i don&#8217;t compile a lot of C programs; what&#8217;s the gcc line to get the example to compile &amp; link?
| [Wednesday 16 February 2011] [11:37:29] &lt;cremes&gt;      nm, got it
| [Wednesday 16 February 2011] [11:38:09] &lt;mikko&gt;       Steve-o: gimme a sec
| [Wednesday 16 February 2011] [11:38:16] &lt;mikko&gt;       getting the exact error message out
| [Wednesday 16 February 2011] [11:40:53] &lt;<a href="#id1851"><span class="problematic" id="id1852">pieterh_</span></a>&gt;    cremes: sorry, my irc client&#8217;s not alerting me for some reason
| [Wednesday 16 February 2011] [11:41:20] &lt;cremes&gt;      no worries; i compiled the program and ran it successfully
| [Wednesday 16 February 2011] [11:41:23] &lt;cremes&gt;      no failures
| [Wednesday 16 February 2011] [11:41:37] &lt;cremes&gt;      so my hypothesis must be wrong as to the cause of the mailbox assertion
| [Wednesday 16 February 2011] [11:41:49] &lt;<a href="#id1853"><span class="problematic" id="id1854">pieterh_</span></a>&gt;    at least it&#8217;s not that simple
| [Wednesday 16 February 2011] [11:42:22] &lt;cremes&gt;      right
| [Wednesday 16 February 2011] [11:42:24] &lt;<a href="#id1855"><span class="problematic" id="id1856">pieterh_</span></a>&gt;    assuming I got the case right
| [Wednesday 16 February 2011] [11:42:32] &lt;<a href="#id1857"><span class="problematic" id="id1858">pieterh_</span></a>&gt;    5M writes, 5M reads...
| [Wednesday 16 February 2011] [11:42:39] &lt;cremes&gt;      you got it right as i explained it
| [Wednesday 16 February 2011] [11:42:46] &lt;<a href="#id1859"><span class="problematic" id="id1860">pieterh_</span></a>&gt;    sustrik: sorry also, I&#8217;m not getting beeps...
| [Wednesday 16 February 2011] [11:42:56] &lt;<a href="#id1861"><span class="problematic" id="id1862">pieterh_</span></a>&gt;    pubsub fails, for every new user, in the same way
| [Wednesday 16 February 2011] [11:43:14] &lt;<a href="#id1863"><span class="problematic" id="id1864">pieterh_</span></a>&gt;    subscriber connects, then misses X milliseconds of messages
| [Wednesday 16 February 2011] [11:43:25] &lt;sustrik&gt;     ack
| [Wednesday 16 February 2011] [11:43:36] &lt;<a href="#id1865"><span class="problematic" id="id1866">pieterh_</span></a>&gt;    i&#8217;m not sure doing a synchronous connect would make any difference
| [Wednesday 16 February 2011] [11:43:49] &lt;sustrik&gt;     it probably won&#8217;t
| [Wednesday 16 February 2011] [11:43:49] &lt;cremes&gt;      <a href="#id1867"><span class="problematic" id="id1868">pieterh_</span></a>: is it possible to run this under gdb and have it drop into the debugger instead of asserting?
| [Wednesday 16 February 2011] [11:43:51] &lt;<a href="#id1869"><span class="problematic" id="id1870">pieterh_</span></a>&gt;    but there is definitely a problem when every user hits the same issue
| [Wednesday 16 February 2011] [11:44:02] &lt;cremes&gt;      if so, perhaps i could dump the contents of the mailbox?
| [Wednesday 16 February 2011] [11:44:24] &lt;<a href="#id1871"><span class="problematic" id="id1872">pieterh_</span></a>&gt;    cremes, afaik usual tactic is to get a core dump and then debug from there
| [Wednesday 16 February 2011] [11:44:31] &lt;<a href="#id1873"><span class="problematic" id="id1874">pieterh_</span></a>&gt;    i&#8217;m no gdb expert
| [Wednesday 16 February 2011] [11:44:37]        * <a href="#id1875"><span class="problematic" id="id1876">pieterh_</span></a> likes printfs
| [Wednesday 16 February 2011] [11:44:39] &lt;cremes&gt;      ok, how can i force it to core?
| [Wednesday 16 February 2011] [11:44:47] &lt;sustrik&gt;     cremes: p
| [Wednesday 16 February 2011] [11:44:50] &lt;<a href="#id1877"><span class="problematic" id="id1878">pieterh_</span></a>&gt;    divide by zero?
| [Wednesday 16 February 2011] [11:45:14] &lt;sustrik&gt;     when you want to dump the content of variable x, type &#8220;p x&#8221;
| [Wednesday 16 February 2011] [11:45:17] &lt;<a href="#id1879"><span class="problematic" id="id1880">pieterh_</span></a>&gt;    assertion failure will produce a core I think
| [Wednesday 16 February 2011] [11:45:28] &lt;<a href="#id1881"><span class="problematic" id="id1882">pieterh_</span></a>&gt;    you need to enable core dumps for your process
| [Wednesday 16 February 2011] [11:45:49] &lt;<a href="#id1883"><span class="problematic" id="id1884">pieterh_</span></a>&gt;    ulimit unlimited
| [Wednesday 16 February 2011] [11:45:50] &lt;cremes&gt;      yeah, right now i&#8217;m set for a core size of 0; i can change that
| [Wednesday 16 February 2011] [11:46:05] &lt;cremes&gt;      are you sure the assertion causes a core?
| [Wednesday 16 February 2011] [11:46:11] &lt;sustrik&gt;     cremes: just start the executable under gdb
| [Wednesday 16 February 2011] [11:46:27] &lt;sustrik&gt;     it will stop and get you gdb prompt when assertion is hit
| [Wednesday 16 February 2011] [11:46:29] &lt;<a href="#id1885"><span class="problematic" id="id1886">pieterh_</span></a>&gt;    yeah, and make sure it&#8217;s compiled and linked for debugging
| [Wednesday 16 February 2011] [11:47:20] &lt;cremes&gt;      i did run it under gdb several times; the assertion would cause the ruby runtime to throw an exception and exit cleanly
| [Wednesday 16 February 2011] [11:47:31] &lt;cremes&gt;      so gdb never caught the issue
| [Wednesday 16 February 2011] [11:47:43] &lt;cremes&gt;      outside of gdb, it would assert
| [Wednesday 16 February 2011] [11:47:49] &lt;cremes&gt;      very frustrating
| [Wednesday 16 February 2011] [11:47:54] &lt;sustrik&gt;     :|
| [Wednesday 16 February 2011] [11:48:40] &lt;<a href="#id1887"><span class="problematic" id="id1888">pieterh_</span></a>&gt;    my brute force approach would be to add code to 0MQ that dumps the mailbox just before it asserts, under the same conditions
| [Wednesday 16 February 2011] [11:48:52] &lt;<a href="#id1889"><span class="problematic" id="id1890">pieterh_</span></a>&gt;    don&#8217;t waste time trying to get debuggers working unless you already know how
| [Wednesday 16 February 2011] [11:49:11] &lt;cremes&gt;      i like that suggestion; any suggestion on how to dump the mailbox?
| [Wednesday 16 February 2011] [11:49:29] &lt;sustrik&gt;     cremes: i would do a bit different thing
| [Wednesday 16 February 2011] [11:49:31] &lt;cremes&gt;      i.e. are there important components to capture or should i just dump it as a string?
| [Wednesday 16 February 2011] [11:49:40] &lt;cremes&gt;      sustrik: talk to me
| [Wednesday 16 February 2011] [11:49:47] &lt;sustrik&gt;     just print some text when mailbox_t::send() is invoked
| [Wednesday 16 February 2011] [11:50:07] &lt;sustrik&gt;     in you scenario the number of invocations should be pretty modest
| [Wednesday 16 February 2011] [11:50:33] &lt;sustrik&gt;     if it starts printing a lot of text, there&#8217;s definitely some problem there
| [Wednesday 16 February 2011] [11:50:45] &lt;cremes&gt;      sustrik: just any text like &#8220;mailbox.send!&#8221;
| [Wednesday 16 February 2011] [11:50:53] &lt;sustrik&gt;     yes
| [Wednesday 16 February 2011] [11:50:55] &lt;cremes&gt;      ok
| [Wednesday 16 February 2011] [11:51:14] &lt;cremes&gt;      so you don&#8217;t care about the contents of the mailbox
| [Wednesday 16 February 2011] [11:51:37] &lt;sustrik&gt;     not really
| [Wednesday 16 February 2011] [11:51:44] &lt;cremes&gt;      ok, i&#8217;ll try that now
| [Wednesday 16 February 2011] [11:51:52] &lt;sustrik&gt;     if we find out that there&#8217;s a lot of commands is written
| [Wednesday 16 February 2011] [11:52:04] &lt;sustrik&gt;     we&#8217;ll have a look at what kind of commands is that
| [Wednesday 16 February 2011] [12:10:53] &lt;<a href="#id1891"><span class="problematic" id="id1892">pieterh_</span></a>&gt;    mikko: I&#8217;m improving some of the coverage but it&#8217;s always going to miss on assertions, apparently
| [Wednesday 16 February 2011] [12:15:09] &lt;mikko&gt;       <a href="#id1893"><span class="problematic" id="id1894">pieterh_</span></a>: yes
| [Wednesday 16 February 2011] [12:15:13] &lt;mikko&gt;       i dont think it calculates those
| [Wednesday 16 February 2011] [12:15:21] &lt;<a href="#id1895"><span class="problematic" id="id1896">pieterh_</span></a>&gt;    hey, my beep works now! :-)
| [Wednesday 16 February 2011] [12:15:34] &lt;mikko&gt;       and 100% is not really a realistic or even desirable aim
| [Wednesday 16 February 2011] [12:15:41] &lt;mikko&gt;       Steve-o: i think i solved it
| [Wednesday 16 February 2011] [12:15:43] &lt;<a href="#id1897"><span class="problematic" id="id1898">pieterh_</span></a>&gt;    ok, I&#8217;ll improve some of the coverage but like Steve-o says, it gets messy
| [Wednesday 16 February 2011] [12:16:34] &lt;mikko&gt;       Steve-o: almost. now it compiles twice it seems
| [Wednesday 16 February 2011] [12:17:30] &lt;ianbarber&gt;   just to be doubly sure
| [Wednesday 16 February 2011] [12:18:16] &lt;ianbarber&gt;   compare the two, and if they&#8217;re different fail on a non-deterministic build process
| [Wednesday 16 February 2011] [12:25:35] &lt;cremes&gt;      sustrik: yes, there are a <em>lot</em> of commands sent
| [Wednesday 16 February 2011] [12:25:53] &lt;sustrik&gt;     ok
| [Wednesday 16 February 2011] [12:25:53] &lt;cremes&gt;      what&#8217;s the next step? dump the commands when the mailbox buffer is increased?
| [Wednesday 16 February 2011] [12:26:06] &lt;sustrik&gt;     can you print out cmd-&gt;type?
| [Wednesday 16 February 2011] [12:26:19] &lt;sustrik&gt;     that will show what kind of commands are being passed
| [Wednesday 16 February 2011] [12:26:30] &lt;cremes&gt;      sure; on every invocation or just when the buffer size is increased?
| [Wednesday 16 February 2011] [12:26:43] &lt;sustrik&gt;     on every invocation
| [Wednesday 16 February 2011] [12:26:46] &lt;cremes&gt;      ok
| [Wednesday 16 February 2011] [12:28:45] &lt;cremes&gt;      sustrik: i see it&#8217;s defined as an enum so i can use printf(&#8220;%d&#8221;, cmd-&gt;type), yes?
| [Wednesday 16 February 2011] [12:29:28] &lt;sustrik&gt;     printf(&#8220;%d&#8221;, (int) cmd-&gt;type)
| [Wednesday 16 February 2011] [12:29:30] &lt;sustrik&gt;     just in case
| [Wednesday 16 February 2011] [12:29:38] &lt;cremes&gt;      k
| [Wednesday 16 February 2011] [12:31:52] &lt;cremes&gt;      sustrik: mailbox.cpp:158:34: error: base operand of &#8216;-&gt;&#8217; has non-pointer type &#8216;const zmq::command_t&#8217;
| [Wednesday 16 February 2011] [12:32:02] &lt;cremes&gt;      ??
| [Wednesday 16 February 2011] [12:32:16] &lt;sustrik&gt;     it should be <a href="#id1899"><span class="problematic" id="id1900">cmd_</span></a>.type
| [Wednesday 16 February 2011] [12:32:17] &lt;sustrik&gt;     sorry
| [Wednesday 16 February 2011] [12:34:37] &lt;cremes&gt;      clean compile; running now
| [Wednesday 16 February 2011] [12:37:07] &lt;cremes&gt;      sustrik: here&#8217;s a sampling of what i see; the cmd is wrapped in TY(cmd) so i can pick it out of the log easily
| [Wednesday 16 February 2011] [12:37:08] &lt;cremes&gt;      <a class="reference external" href="https://gist.github.com/829782">https://gist.github.com/829782</a>
| [Wednesday 16 February 2011] [12:39:51] &lt;sustrik&gt;     do you call connect or bind in that app?
| [Wednesday 16 February 2011] [12:40:40] &lt;cremes&gt;      i call both early on during setup, then i don&#8217;t need to call it again
| [Wednesday 16 February 2011] [12:41:01] &lt;sustrik&gt;     ah, both are in the same process
| [Wednesday 16 February 2011] [12:41:02] &lt;sustrik&gt;     i see
| [Wednesday 16 February 2011] [12:41:12] &lt;sustrik&gt;     what transport do you use?
| [Wednesday 16 February 2011] [12:41:18] &lt;sustrik&gt;     tcp? inproc? ipc?
| [Wednesday 16 February 2011] [12:41:29] &lt;cremes&gt;      tcp
| [Wednesday 16 February 2011] [12:42:27] &lt;sustrik&gt;     cremes: can you printf something in connect_sessio_t::detached() function?
| [Wednesday 16 February 2011] [12:42:35] &lt;cremes&gt;      yes
| [Wednesday 16 February 2011] [12:42:59] &lt;sustrik&gt;     (that wey we&#8217;ll see if there a lot of reconnecting happening)
| [Wednesday 16 February 2011] [12:47:35] &lt;cremes&gt;      sustrik: [<a class="reference external" href="mailto:cremes&#37;&#52;&#48;box1">cremes<span>&#64;</span>box1</a> servers]$ grep ^REC t.out | wc -l
| [Wednesday 16 February 2011] [12:47:35] &lt;cremes&gt;      921674
| [Wednesday 16 February 2011] [12:47:43] &lt;cremes&gt;      so yes, lots of reconnects
| [Wednesday 16 February 2011] [12:51:37] &lt;cremes&gt;      this is a threaded app writing to the same logfile so sequence is a bit suspect
| [Wednesday 16 February 2011] [12:52:01] &lt;cremes&gt;      however, it appears each REC is always followed by command type 1 or 3 (plug or attach) which kind of makes sense
| [Wednesday 16 February 2011] [12:56:32] &lt;sustrik&gt;     yep
| [Wednesday 16 February 2011] [12:56:43] &lt;sustrik&gt;     the question is: why does it reconnect at all?
| [Wednesday 16 February 2011] [12:57:08] &lt;sustrik&gt;     moreover, the default reconnect interval is 0.1 sec
| [Wednesday 16 February 2011] [12:57:14] &lt;cremes&gt;      agreed; all transport strings are of the form &#8216;<a class="reference external" href="tcp://127.0.0.1">tcp://127.0.0.1</a>:&lt;port&gt;&#8217;
| [Wednesday 16 February 2011] [12:57:33] &lt;sustrik&gt;     so to get 921675 would require couple of days
| [Wednesday 16 February 2011] [12:58:00] &lt;sustrik&gt;     you mean: &#8220;both&#8221; rather than &#8220;all&#8221;, right?
| [Wednesday 16 February 2011] [12:59:04] &lt;cremes&gt;      there is a PUB producer, a FORWARDER device, and multiple SUB consumers in this process
| [Wednesday 16 February 2011] [12:59:30] &lt;cremes&gt;      they all connect up in the beginning and should never close/reconnect for the life of the program
| [Wednesday 16 February 2011] [12:59:58] &lt;cremes&gt;      so each one has its own transport connection string; that&#8217;s what i meant by &#8216;all&#8217;
| [Wednesday 16 February 2011] [13:00:12] &lt;sustrik&gt;     i see
| [Wednesday 16 February 2011] [13:00:39] &lt;sustrik&gt;     how many SUBs?
| [Wednesday 16 February 2011] [13:01:59] &lt;cremes&gt;      let&#8217;s see...
| [Wednesday 16 February 2011] [13:02:18] &lt;sustrik&gt;     approximately...
| [Wednesday 16 February 2011] [13:02:35] &lt;sustrik&gt;     tens, hundreds, thousands?
| [Wednesday 16 February 2011] [13:02:35] &lt;cremes&gt;      5 in the clients and 1 in the FORWARDER, so about 6 (i might be forgetting one or two)
| [Wednesday 16 February 2011] [13:02:47] &lt;sustrik&gt;     ok
| [Wednesday 16 February 2011] [13:03:32] &lt;sustrik&gt;     do you close the FORWARDER before closing the SUBs?
| [Wednesday 16 February 2011] [13:04:47] &lt;cremes&gt;      they should all terminate at roughly the same time when i interrupt/kill the program
| [Wednesday 16 February 2011] [13:04:56] &lt;sustrik&gt;     ok
| [Wednesday 16 February 2011] [13:05:02] &lt;cremes&gt;      otherwise, the FORWARDER never exits
| [Wednesday 16 February 2011] [13:05:10] &lt;sustrik&gt;     does FORWARDER connect to SUBs or other way round?
| [Wednesday 16 February 2011] [13:05:32] &lt;cremes&gt;      FORWARDER binds while all clients connect
| [Wednesday 16 February 2011] [13:05:50] &lt;sustrik&gt;     what about PUB?
| [Wednesday 16 February 2011] [13:05:50] &lt;cremes&gt;      actually, the IN/OUT sockets on the FORWARDER always bind
| [Wednesday 16 February 2011] [13:06:00] &lt;cremes&gt;      the publisher connects too as a result
| [Wednesday 16 February 2011] [13:06:03] &lt;sustrik&gt;     ok
| [Wednesday 16 February 2011] [13:06:39] &lt;sustrik&gt;     hm, i see no reason then for reconnections to happen
| [Wednesday 16 February 2011] [13:06:57] &lt;sustrik&gt;     are you 100% that the connection strings match?
| [Wednesday 16 February 2011] [13:07:09] &lt;cremes&gt;      match in what way?
| [Wednesday 16 February 2011] [13:07:24] &lt;cremes&gt;      they are all tcp?
| [Wednesday 16 February 2011] [13:07:28] &lt;sustrik&gt;     are they the same on bind and connect side?
| [Wednesday 16 February 2011] [13:07:50] &lt;cremes&gt;      if they weren&#8217;t, the data wouldn&#8217;t flow through my app, yes?
| [Wednesday 16 February 2011] [13:08:00]        * cremes checks anyway...
| [Wednesday 16 February 2011] [13:08:11] &lt;sustrik&gt;     ah, the data flow through
| [Wednesday 16 February 2011] [13:08:13] &lt;sustrik&gt;     i see
| [Wednesday 16 February 2011] [13:08:19] &lt;sustrik&gt;     to all 5 subs?
| [Wednesday 16 February 2011] [13:09:02] &lt;cremes&gt;      yes, the main PUB broadcasts and the 5 subs each sub to everything
| [Wednesday 16 February 2011] [13:09:32] &lt;sustrik&gt;     and all of them actually get the data
| [Wednesday 16 February 2011] [13:09:35] &lt;cremes&gt;      if they weren&#8217;t getting the data, the app would lock (and produce something similar to EFSM in my code)
| [Wednesday 16 February 2011] [13:09:43] &lt;sustrik&gt;     ok, good
| [Wednesday 16 February 2011] [13:09:57] &lt;cremes&gt;      it&#8217;s kind of like an election algo
| [Wednesday 16 February 2011] [13:10:04] &lt;sustrik&gt;     to be frank, i have no idea what&#8217;s going on there
| [Wednesday 16 February 2011] [13:10:11] &lt;sustrik&gt;     if the reconnections happen
| [Wednesday 16 February 2011] [13:10:24] &lt;sustrik&gt;     one would expect that at least some messages would be lost
| [Wednesday 16 February 2011] [13:10:50] &lt;cremes&gt;      any idea how i can do 900k reconnects in a few minutes?
| [Wednesday 16 February 2011] [13:10:58] &lt;sustrik&gt;     no idea
| [Wednesday 16 February 2011] [13:11:07] &lt;cremes&gt;      &lt;sigh&gt;
| [Wednesday 16 February 2011] [13:11:12] &lt;sustrik&gt;     have you changed the default RECONNECT_IVL?
| [Wednesday 16 February 2011] [13:11:30] &lt;cremes&gt;      btw, i ran pieter&#8217;s mailbugz code with these debug prints in them and it barely puts out anything at all
| [Wednesday 16 February 2011] [13:11:41] &lt;sustrik&gt;     exactly
| [Wednesday 16 February 2011] [13:11:41] &lt;cremes&gt;      nope, no changes to RECONNECT_IVL
| [Wednesday 16 February 2011] [13:12:21] &lt;cremes&gt;      all sockets are allocated in their default state; the one exception is calling setsockopt on the SUBs to set their subscription string
| [Wednesday 16 February 2011] [13:12:27] &lt;cremes&gt;      and i always set my own IDENTITY
| [Wednesday 16 February 2011] [13:12:52] &lt;cremes&gt;      someone on the ML suggested a potential IDENTITY collision; could that be related?
| [Wednesday 16 February 2011] [13:13:03] &lt;sustrik&gt;     maybe
| [Wednesday 16 February 2011] [13:13:13] &lt;sustrik&gt;     do you have identity collisions there?
| [Wednesday 16 February 2011] [13:13:23] &lt;sustrik&gt;     like all 5 subs having the same identity?
| [Wednesday 16 February 2011] [13:13:57] &lt;cremes&gt;      i shouldn&#8217;t; the identity is always &lt;random id&gt;.&lt;sock type&gt;.&lt;server type&gt; where random id is 0 to 999_999_999
| [Wednesday 16 February 2011] [13:14:11] &lt;cremes&gt;      it&#8217;s <em>possible</em> there is a collision but <em>improbable</em>
| [Wednesday 16 February 2011] [13:14:55] &lt;sustrik&gt;     try printing them out
| [Wednesday 16 February 2011] [13:15:40] &lt;cremes&gt;      i&#8217;m auditing that right now; give me 5m
| [Wednesday 16 February 2011] [13:22:47] &lt;<a href="#id1901"><span class="problematic" id="id1902">pieterh_</span></a>&gt;    cremes, are you sure you&#8217;re initializing your random number generator?
| [Wednesday 16 February 2011] [13:22:57] &lt;<a href="#id1903"><span class="problematic" id="id1904">pieterh_</span></a>&gt;    if not, every client will produce an identical &#8216;random&#8217; sequence
| [Wednesday 16 February 2011] [13:23:48] &lt;<a href="#id1905"><span class="problematic" id="id1906">pieterh_</span></a>&gt;    cremes: if you&#8217;re getting reconnects, presumably you&#8217;re also getting disconnects
| [Wednesday 16 February 2011] [13:23:57] &lt;<a href="#id1907"><span class="problematic" id="id1908">pieterh_</span></a>&gt;    and if you can find those, you can find what is causing them
| [Wednesday 16 February 2011] [13:24:13] &lt;<a href="#id1909"><span class="problematic" id="id1910">pieterh_</span></a>&gt;    sustrik: how many places does 0MQ forcefully disconnect a subscriber socket without assertion
| [Wednesday 16 February 2011] [13:24:23] &lt;<a href="#id1911"><span class="problematic" id="id1912">pieterh_</span></a>&gt;    do we have the sys: transport working?
| [Wednesday 16 February 2011] [13:24:57]        * <a href="#id1913"><span class="problematic" id="id1914">pieterh_</span></a> bets 1c that this is a subscriber identity issue, and 0MQ is disconnecting subscribers massively but the error is never reported
| [Wednesday 16 February 2011] [13:26:14] &lt;sustrik&gt;     <a href="#id1915"><span class="problematic" id="id1916">pieterh_</span></a>: every time the other side does something unexpected
| [Wednesday 16 February 2011] [13:26:21] &lt;sustrik&gt;     such as sending malformed frame
| [Wednesday 16 February 2011] [13:26:28] &lt;<a href="#id1917"><span class="problematic" id="id1918">pieterh_</span></a>&gt;    yeah, but are there lots of places in the code?
| [Wednesday 16 February 2011] [13:26:44] &lt;sustrik&gt;     not much, 3-4 i think
| [Wednesday 16 February 2011] [13:26:56] &lt;<a href="#id1919"><span class="problematic" id="id1920">pieterh_</span></a>&gt;    right... so a few well-placed prints and we&#8217;ll know what&#8217;s happening
| [Wednesday 16 February 2011] [13:26:57] &lt;sustrik&gt;     sys: works
| [Wednesday 16 February 2011] [13:27:08] &lt;sustrik&gt;     and should be used exactly for this kind of thing
| [Wednesday 16 February 2011] [13:27:18] &lt;<a href="#id1921"><span class="problematic" id="id1922">pieterh_</span></a>&gt;    precisely
| [Wednesday 16 February 2011] [13:27:32] &lt;sustrik&gt;     the only problem is that some kind of throttling
| [Wednesday 16 February 2011] [13:27:38] &lt;sustrik&gt;     not to get the log overloaded
| [Wednesday 16 February 2011] [13:27:50] &lt;<a href="#id1923"><span class="problematic" id="id1924">pieterh_</span></a>&gt;    presumably all we care about are the first 10 messages
| [Wednesday 16 February 2011] [13:27:53] &lt;sustrik&gt;     i.e. if the same problem happens over and over again
| [Wednesday 16 February 2011] [13:27:57] &lt;sustrik&gt;     in 10us intevals
| [Wednesday 16 February 2011] [13:28:09] &lt;sustrik&gt;     only the fist one should be reported
| [Wednesday 16 February 2011] [13:28:19] &lt;<a href="#id1925"><span class="problematic" id="id1926">pieterh_</span></a>&gt;    add a numeric code and ignore duplicates, standard solution
| [Wednesday 16 February 2011] [13:28:37] &lt;sustrik&gt;     you need some kind of state machine
| [Wednesday 16 February 2011] [13:29:06] &lt;sustrik&gt;     if connecting fails happens log it a switch to &#8220;no log&#8221; state
| [Wednesday 16 February 2011] [13:29:10] &lt;cremes&gt;      alas, it looks to me like they are all unique:  <a class="reference external" href="https://gist.github.com/829865">https://gist.github.com/829865</a>
| [Wednesday 16 February 2011] [13:29:21] &lt;sustrik&gt;     any subsequent connect failures are not logged
| [Wednesday 16 February 2011] [13:29:32] &lt;cremes&gt;      interestingly, out of all 4 components, only the one that crashes shows the hundreds of thousands of reconnects
| [Wednesday 16 February 2011] [13:29:34] &lt;sustrik&gt;     when connecting succeeds, switch back to &#8220;log&#8221; state
| [Wednesday 16 February 2011] [13:29:55] &lt;sustrik&gt;     thus making next disconnect being logged
| [Wednesday 16 February 2011] [13:30:12] &lt;<a href="#id1927"><span class="problematic" id="id1928">pieterh_</span></a>&gt;    you don&#8217;t need anything that complex IMO
| [Wednesday 16 February 2011] [13:30:22] &lt;<a href="#id1929"><span class="problematic" id="id1930">pieterh_</span></a>&gt;    if you get more than 1000 alerts on sys: you can give up
| [Wednesday 16 February 2011] [13:30:34] &lt;<a href="#id1931"><span class="problematic" id="id1932">pieterh_</span></a>&gt;    (in a minute, hour, <a href="#id1933"><span class="problematic" id="id1934">day_</span></a>)
| [Wednesday 16 February 2011] [13:30:54] &lt;<a href="#id1935"><span class="problematic" id="id1936">pieterh_</span></a>&gt;    cremes, you may want to add prints in the places 0MQ <em>disconnects</em> subscribers
| [Wednesday 16 February 2011] [13:31:11] &lt;sustrik&gt;     cremes: no more ideas, i need a minimal test case
| [Wednesday 16 February 2011] [13:31:25] &lt;sustrik&gt;     to reproduce it here
| [Wednesday 16 February 2011] [13:31:30] &lt;cremes&gt;      ok, i&#8217;ll keep poking at it
| [Wednesday 16 February 2011] [13:32:23] &lt;<a href="#id1937"><span class="problematic" id="id1938">pieterh_</span></a>&gt;    sustrik, can you tell cremes where those 3-4 places are?
| [Wednesday 16 February 2011] [13:32:45] &lt;sustrik&gt;     hm, i don&#8217;t know precisely
| [Wednesday 16 February 2011] [13:32:55] &lt;sustrik&gt;     dhammika have supplied those patches
| [Wednesday 16 February 2011] [13:33:13] &lt;<a href="#id1939"><span class="problematic" id="id1940">pieterh_</span></a>&gt;    it used to be easy &#8216;egrep assert <em>.cpp&#8217;
| [Wednesday 16 February 2011] [13:33:13] &lt;sustrik&gt;     maybe check the commit log
| [Wednesday 16 February 2011] [13:33:36] &lt;sustrik&gt;     ?
| [Wednesday 16 February 2011] [13:33:54] &lt;sustrik&gt;     it&#8217;s not asserting, it&#8217;s closing the connections
| [Wednesday 16 February 2011] [13:36:08] &lt;cremes&gt;      this conversation gave me an idea... i think i am narrowing it down... give me 10m
| [Wednesday 16 February 2011] [13:36:59] &lt;pieterh_&gt;    sustrik, I meant, it *used</em> to assert and I remember several times chasing down framing errors by sticking printfs into those places
| [Wednesday 16 February 2011] [13:38:15] &lt;sustrik&gt;     these assert have been removed via your &#8220;0MQ competition&#8221; :)
| [Wednesday 16 February 2011] [13:46:09] &lt;cremes&gt;      sustrik, <a href="#id1941"><span class="problematic" id="id1942">pieterh_</span></a>: found it!
| [Wednesday 16 February 2011] [13:46:17] &lt;<a href="#id1943"><span class="problematic" id="id1944">pieterh_</span></a>&gt;    :-)
| [Wednesday 16 February 2011] [13:46:28] &lt;cremes&gt;      i had a duplicate identity on an unrelated XREQ socket!
| [Wednesday 16 February 2011] [13:46:33] &lt;<a href="#id1945"><span class="problematic" id="id1946">pieterh_</span></a>&gt;    yay!
| [Wednesday 16 February 2011] [13:47:06] &lt;cremes&gt;      to reproduce, it&#8217;s probably just these steps...
| [Wednesday 16 February 2011] [13:47:14] &lt;<a href="#id1947"><span class="problematic" id="id1948">pieterh_</span></a>&gt;    sustrik, does zmq already send anything to sys:?
| [Wednesday 16 February 2011] [13:47:17] &lt;cremes&gt;      1. create a QUEUE device that binds to some port
| [Wednesday 16 February 2011] [13:47:23] &lt;sustrik&gt;     <a href="#id1949"><span class="problematic" id="id1950">pieterh_</span></a>: no
| [Wednesday 16 February 2011] [13:47:37] &lt;cremes&gt;      2. create two XREQ (REQ too?) sockets, set their identity the same and connect them to the QUEUE
| [Wednesday 16 February 2011] [13:47:48] &lt;cremes&gt;      3. check for reconnects
| [Wednesday 16 February 2011] [13:48:01] &lt;cremes&gt;      4. Maybe need to send some data through first...?
| [Wednesday 16 February 2011] [13:48:10] &lt;<a href="#id1951"><span class="problematic" id="id1952">pieterh_</span></a>&gt;    cremes: I&#8217;ll make a test case later on
| [Wednesday 16 February 2011] [13:48:28] &lt;cremes&gt;      ok, thanks pieter! your c skills far exceed my own
| [Wednesday 16 February 2011] [13:48:51] &lt;<a href="#id1953"><span class="problematic" id="id1954">pieterh_</span></a>&gt;    what do you mean by &#8216;check for reconnects&#8217;?
| [Wednesday 16 February 2011] [13:48:53] &lt;cremes&gt;      thank you both so much for working through this with me; this conversation solved it
| [Wednesday 16 February 2011] [13:49:08] &lt;<a href="#id1955"><span class="problematic" id="id1956">pieterh_</span></a>&gt;    i&#8217;d like to get a test case that results in a crash
| [Wednesday 16 February 2011] [13:49:33] &lt;cremes&gt;      i added a debug statement to connect_session.cpp:detach to print whenever it detached and attempted a reconnect
| [Wednesday 16 February 2011] [13:50:00] &lt;cremes&gt;      let me try to write one in ruby
| [Wednesday 16 February 2011] [13:50:09] &lt;<a href="#id1957"><span class="problematic" id="id1958">pieterh_</span></a>&gt;    this still does not explain why the mailbox exploded...
| [Wednesday 16 February 2011] [13:50:14] &lt;cremes&gt;      then i can tell you exactly what needs to be done in c
| [Wednesday 16 February 2011] [13:50:20] &lt;<a href="#id1959"><span class="problematic" id="id1960">pieterh_</span></a>&gt;    yes, make a ruby test case, that&#8217;s perfect
| [Wednesday 16 February 2011] [13:50:34] &lt;<a href="#id1961"><span class="problematic" id="id1962">pieterh_</span></a>&gt;    exploding mailbox gets double score
| [Wednesday 16 February 2011] [13:50:53] &lt;<a href="#id1963"><span class="problematic" id="id1964">pieterh_</span></a>&gt;    sustrik: we should start to send stuff to sys: where we used to assert
| [Wednesday 16 February 2011] [13:51:16] &lt;<a href="#id1965"><span class="problematic" id="id1966">pieterh_</span></a>&gt;    if you can document how to use sys: from inside zmq I can try that
| [Wednesday 16 February 2011] [13:51:35] &lt;<a href="#id1967"><span class="problematic" id="id1968">pieterh_</span></a>&gt;    ideally, a 1-liner that sends a string... :-)
| [Wednesday 16 February 2011] [13:52:01] &lt;<a href="#id1969"><span class="problematic" id="id1970">pieterh_</span></a>&gt;    then we can apply that to cremes test case and check that we&#8217;d have caught this error
| [Wednesday 16 February 2011] [13:52:22] &lt;sustrik&gt;     log ();
| [Wednesday 16 February 2011] [13:52:29] &lt;sustrik&gt;     it&#8217;s ther
| [Wednesday 16 February 2011] [13:52:30] &lt;sustrik&gt;     e
| [Wednesday 16 February 2011] [13:53:13] &lt;<a href="#id1971"><span class="problematic" id="id1972">pieterh_</span></a>&gt;    ah, it requires all the work of creating a message first
| [Wednesday 16 February 2011] [13:53:19] &lt;<a href="#id1973"><span class="problematic" id="id1974">pieterh_</span></a>&gt;    that&#8217;s tedious
| [Wednesday 16 February 2011] [13:54:03] &lt;<a href="#id1975"><span class="problematic" id="id1976">pieterh_</span></a>&gt;    do we have a standardized format for sys://log messages?
| [Wednesday 16 February 2011] [13:54:49] &lt;<a href="#id1977"><span class="problematic" id="id1978">pieterh_</span></a>&gt;    sorry to complain but if this was packaged somewhat, it&#8217;d be easier for people to use it internally
| [Wednesday 16 February 2011] [13:55:01] &lt;sustrik&gt;     no format
| [Wednesday 16 February 2011] [13:55:06] &lt;sustrik&gt;     just use string atm
| [Wednesday 16 February 2011] [13:55:23] &lt;sustrik&gt;     we can polish the format later on
| [Wednesday 16 February 2011] [13:55:46] &lt;<a href="#id1979"><span class="problematic" id="id1980">pieterh_</span></a>&gt;    every single object has a log method?
| [Wednesday 16 February 2011] [13:56:22] &lt;<a href="#id1981"><span class="problematic" id="id1982">pieterh_</span></a>&gt;    inherited from object_t?
| [Wednesday 16 February 2011] [13:56:27] &lt;sustrik&gt;     yes
| [Wednesday 16 February 2011] [13:56:38] &lt;<a href="#id1983"><span class="problematic" id="id1984">pieterh_</span></a>&gt;    so the log method there could be somewhat expanded to take a string and create/destroy the msg itself
| [Wednesday 16 February 2011] [13:57:00] &lt;<a href="#id1985"><span class="problematic" id="id1986">pieterh_</span></a>&gt;    afaics we don&#8217;t use this anywhere yet
| [Wednesday 16 February 2011] [13:57:11] &lt;sustrik&gt;     sure
| [Wednesday 16 February 2011] [13:57:18] &lt;<a href="#id1987"><span class="problematic" id="id1988">pieterh_</span></a>&gt;    and then we need a documented parsable format for messages
| [Wednesday 16 February 2011] [13:57:23] &lt;<a href="#id1989"><span class="problematic" id="id1990">pieterh_</span></a>&gt;    minimal
| [Wednesday 16 February 2011] [13:57:32] &lt;<a href="#id1991"><span class="problematic" id="id1992">pieterh_</span></a>&gt;    easy to improve later
| [Wednesday 16 February 2011] [13:57:40] &lt;sustrik&gt;     ack
| [Wednesday 16 February 2011] [13:57:57] &lt;<a href="#id1993"><span class="problematic" id="id1994">pieterh_</span></a>&gt;    ok, I&#8217;ll try my hand at this, apologies in advance...
| [Wednesday 16 February 2011] [14:11:34] &lt;cremes&gt;      yes! i have a reproducible crasher in ruby!
| [Wednesday 16 February 2011] [14:12:10] &lt;cremes&gt;      <a href="#id1995"><span class="problematic" id="id1996">pieterh_</span></a>: do you want the ruby code or an explanation for translation to c?
| [Wednesday 16 February 2011] [14:12:49] &lt;<a href="#id1997"><span class="problematic" id="id1998">pieterh_</span></a>&gt;    cremes, I think we need to log two issues here
| [Wednesday 16 February 2011] [14:13:11] &lt;cremes&gt;      ok, i can create the issues, but i only see one
| [Wednesday 16 February 2011] [14:13:14] &lt;<a href="#id1999"><span class="problematic" id="id2000">pieterh_</span></a>&gt;    (a) lack of any warning to the app developer
| [Wednesday 16 February 2011] [14:13:18] &lt;<a href="#id2001"><span class="problematic" id="id2002">pieterh_</span></a>&gt;    (b) mailbox crash
| [Wednesday 16 February 2011] [14:13:32] &lt;<a href="#id2003"><span class="problematic" id="id2004">pieterh_</span></a>&gt;    (b) is the critical one, and the ruby example will be valuable there
| [Wednesday 16 February 2011] [14:13:40] &lt;cremes&gt;      ok, so (a) is for tracking a new feature request to add the sys: stuff, yes?
| [Wednesday 16 February 2011] [14:13:44] &lt;<a href="#id2005"><span class="problematic" id="id2006">pieterh_</span></a>&gt;    yes
| [Wednesday 16 February 2011] [14:13:50] &lt;cremes&gt;      ok, i&#8217;ll write them up
| [Wednesday 16 February 2011] [14:14:00] &lt;<a href="#id2007"><span class="problematic" id="id2008">pieterh_</span></a>&gt;    well, we don&#8217;t track new feature requests, so perhaps skip (a)
| [Wednesday 16 February 2011] [14:14:36] &lt;cremes&gt;      i&#8217;ll add it to the wiki 3.0/roadmap page
| [Wednesday 16 February 2011] [14:14:56] &lt;<a href="#id2009"><span class="problematic" id="id2010">pieterh_</span></a>&gt;    i&#8217;m working on it now... :-)
| [Wednesday 16 February 2011] [14:15:11] &lt;cremes&gt;      ok!
| [Wednesday 16 February 2011] [14:27:12] &lt;cremes&gt;      <a href="#id2011"><span class="problematic" id="id2012">pieterh_</span></a>: preview this issue and let me know if you need more details to reproduce in c:  <a class="reference external" href="https://github.com/zeromq/zeromq2/issues/165">https://github.com/zeromq/zeromq2/issues/165</a>
| [Wednesday 16 February 2011] [14:27:22] &lt;<a href="#id2013"><span class="problematic" id="id2014">pieterh_</span></a>&gt;    cremes, thanks!
| [Wednesday 16 February 2011] [14:27:49] &lt;cremes&gt;      <a href="#id2015"><span class="problematic" id="id2016">pieterh_</span></a>: i&#8217;ve spent the last 96 hours banging on this! i&#8217;m happy to see it solved!
| [Wednesday 16 February 2011] [14:28:27] &lt;<a href="#id2017"><span class="problematic" id="id2018">pieterh_</span></a>&gt;    that&#8217;s why i&#8217;m doing the sys://log stuff, it&#8217;s insane to lose so much time to a missing warning
| [Wednesday 16 February 2011] [14:28:54] &lt;cremes&gt;      honestly, i&#8217;m taking the rest of the day off.... i feel deflated
| [Wednesday 16 February 2011] [14:29:59] &lt;<a href="#id2019"><span class="problematic" id="id2020">pieterh_</span></a>&gt;    sustrik, what&#8217;s the correct way to work with a msg in the zmq core?
| [Wednesday 16 February 2011] [14:30:13] &lt;<a href="#id2021"><span class="problematic" id="id2022">pieterh_</span></a>&gt;    ::zmq_msg_t or is there a message class I&#8217;m missing?
| [Wednesday 16 February 2011] [14:39:18] &lt;enleth&gt;      Hello
| [Wednesday 16 February 2011] [14:39:59] &lt;enleth&gt;      mikko: is the API documentation at <a class="reference external" href="http://valokuva.org/~mikko/php-zmq/">http://valokuva.org/~mikko/php-zmq/</a> supposed to be inaccessible?
| [Wednesday 16 February 2011] [14:46:14] &lt;ianbarber&gt;   enleth: check php.zero.mq
| [Wednesday 16 February 2011] [14:46:40] &lt;ianbarber&gt;   references probably need updating
| [Wednesday 16 February 2011] [14:50:55] &lt;mikko&gt;       enleth: yes
| [Wednesday 16 February 2011] [14:55:46] &lt;enleth&gt;      ianbarber: thanks, that&#8217;s it.
| [Wednesday 16 February 2011] [14:56:17] &lt;enleth&gt;      mikko: can I suggest a 302 redirect to the new address?
| [Wednesday 16 February 2011] [14:56:26] &lt;<a href="#id2023"><span class="problematic" id="id2024">pieterh_</span></a>&gt;    cremes: still there?
| [Wednesday 16 February 2011] [14:56:44] &lt;enleth&gt;      The old one is all over the latest git tree
| [Wednesday 16 February 2011] [15:01:16] &lt;mikko&gt;       done
| [Wednesday 16 February 2011] [15:01:29] &lt;cremes&gt;      <a href="#id2025"><span class="problematic" id="id2026">pieterh_</span></a>: for a bit more; what&#8217;s up?
| [Wednesday 16 February 2011] [15:01:48] &lt;<a href="#id2027"><span class="problematic" id="id2028">pieterh_</span></a>&gt;    just wondered if you need to actually use the REQ/REP sockets to create the crash
| [Wednesday 16 February 2011] [15:01:55] &lt;<a href="#id2029"><span class="problematic" id="id2030">pieterh_</span></a>&gt;    or just bind them and BOOM
| [Wednesday 16 February 2011] [15:02:20] &lt;<a href="#id2031"><span class="problematic" id="id2032">pieterh_</span></a>&gt;    s/bind/connect
| [Wednesday 16 February 2011] [15:02:25] &lt;cremes&gt;      let me see... give me 1m
| [Wednesday 16 February 2011] [15:03:26] &lt;cremes&gt;      <a href="#id2033"><span class="problematic" id="id2034">pieterh_</span></a>: nope, crashes without using them; good catch... it&#8217;s even <em>more</em> reduced now
| [Wednesday 16 February 2011] [15:03:33] &lt;<a href="#id2035"><span class="problematic" id="id2036">pieterh_</span></a>&gt;    excellent...
| [Wednesday 16 February 2011] [15:03:37] &lt;<a href="#id2037"><span class="problematic" id="id2038">pieterh_</span></a>&gt;    thanks a lot
| [Wednesday 16 February 2011] [15:03:37] &lt;cremes&gt;      i&#8217;m no longer thinking clearly otherwise i would have tried that :)
| [Wednesday 16 February 2011] [15:04:50] &lt;<a href="#id2039"><span class="problematic" id="id2040">pieterh_</span></a>&gt;    it&#8217;s been a long day :-)
| [Wednesday 16 February 2011] [15:04:51] &lt;cremes&gt;      <a href="#id2041"><span class="problematic" id="id2042">pieterh_</span></a>: looks like you <em>do</em> need the REQ socket too
| [Wednesday 16 February 2011] [15:05:03] &lt;cremes&gt;      a pair of REP&#8217;s with the same ID is insufficient
| [Wednesday 16 February 2011] [15:05:16] &lt;cremes&gt;      it&#8217;s been a long <em>week</em>
| [Wednesday 16 February 2011] [15:05:27] &lt;<a href="#id2043"><span class="problematic" id="id2044">pieterh_</span></a>&gt;    ack, you need a pair of sockets with one disconnecting the other
| [Wednesday 16 February 2011] [15:05:44] &lt;<a href="#id2045"><span class="problematic" id="id2046">pieterh_</span></a>&gt;    presumably, I&#8217;ll test that, it applies to all relevant socket types
| [Wednesday 16 February 2011] [15:05:56] &lt;<a href="#id2047"><span class="problematic" id="id2048">pieterh_</span></a>&gt;    it&#8217;s been a long <em>year</em>!
| [Wednesday 16 February 2011] [15:05:58] &lt;cremes&gt;      perhaps...
| [Wednesday 16 February 2011] [15:05:59] &lt;<a href="#id2049"><span class="problematic" id="id2050">pieterh_</span></a>&gt;    hang on...
| [Wednesday 16 February 2011] [15:06:05] &lt;<a href="#id2051"><span class="problematic" id="id2052">pieterh_</span></a>&gt;    :-)
| [Wednesday 16 February 2011] [15:06:07] &lt;cremes&gt;      heh
| [Wednesday 16 February 2011] [15:10:09] &lt;<a href="#id2053"><span class="problematic" id="id2054">pieterh_</span></a>&gt;    cremes: bingo, I reproduced it!
| [Wednesday 16 February 2011] [15:10:23] &lt;cremes&gt;      awesome!
| [Wednesday 16 February 2011] [15:11:03] &lt;cremes&gt;      once started it only takes a few seconds to exhaust that buffer even when it&#8217;s 5MB!
| [Wednesday 16 February 2011] [15:11:11] &lt;<a href="#id2055"><span class="problematic" id="id2056">pieterh_</span></a>&gt;    just connect two req sockets with same ID, wait 1 second...
| [Wednesday 16 February 2011] [15:11:17] &lt;<a href="#id2057"><span class="problematic" id="id2058">pieterh_</span></a>&gt;    I&#8217;m going to try with other socket types now
| [Wednesday 16 February 2011] [15:16:42] &lt;<a href="#id2059"><span class="problematic" id="id2060">pieterh_</span></a>&gt;    cremes: it affects all socket types
| [Wednesday 16 February 2011] [15:16:52] &lt;<a href="#id2061"><span class="problematic" id="id2062">pieterh_</span></a>&gt;    any combination of bind/connect, even pub connecting to sub
| [Wednesday 16 February 2011] [15:17:21] &lt;cremes&gt;      wow
| [Wednesday 16 February 2011] [15:17:46] &lt;cremes&gt;      this <em>might</em> explain a lot of people&#8217;s problems; there are several issues open about this assertion
| [Wednesday 16 February 2011] [15:18:28] &lt;<a href="#id2063"><span class="problematic" id="id2064">pieterh_</span></a>&gt;    ironically 0MQ used to assert before :-)
| [Wednesday 16 February 2011] [15:18:51] &lt;cremes&gt;      oh, the irony... :(
| [Wednesday 16 February 2011] [15:19:25] &lt;cremes&gt;      well, i&#8217;m just glad it&#8217;s no longer a mystery
| [Wednesday 16 February 2011] [15:19:38] &lt;<a href="#id2065"><span class="problematic" id="id2066">pieterh_</span></a>&gt;    anyhow, this makes it much easier to solve properly
| [Wednesday 16 February 2011] [15:19:42] &lt;cremes&gt;      other than this, i haven&#8217;t hit an assertion in a long time
| [Wednesday 16 February 2011] [15:22:15] &lt;<a href="#id2067"><span class="problematic" id="id2068">pieterh_</span></a>&gt;    indeed, we had a competition to kill them :-)
| [Wednesday 16 February 2011] [17:30:32] &lt;jol&gt; pieterh: nice talk at fosdem, I just watch it.
| [Wednesday 16 February 2011] [17:40:48] &lt;Steve-o&gt;     thx mikko
| [Wednesday 16 February 2011] [18:53:12] &lt;dan___&gt;      hello
| [Wednesday 16 February 2011] [18:53:16] &lt;mikko&gt;       hi
| [Wednesday 16 February 2011] [18:53:47] &lt;dan___&gt;      i&#8217;ve got a question about zmq
| [Wednesday 16 February 2011] [18:54:43] &lt;mikko&gt;       go ahead
| [Wednesday 16 February 2011] [18:54:52] &lt;dan___&gt;      is there any reason I should not be able to implement a pubsub connection with one side in python and the other in cpp over ipc?
| [Wednesday 16 February 2011] [18:55:33] &lt;mikko&gt;       no reason
| [Wednesday 16 February 2011] [18:55:39] &lt;mikko&gt;       should be perfectly ok
| [Wednesday 16 February 2011] [18:55:41] &lt;dan___&gt;      hm
| [Wednesday 16 February 2011] [18:56:05] &lt;mikko&gt;       you are not seeing any messages?
| [Wednesday 16 February 2011] [18:56:31] &lt;dan___&gt;      i see them when I use tcp, but not when i use ipc
| [Wednesday 16 February 2011] [18:56:38] &lt;mikko&gt;       can i see the code?
| [Wednesday 16 February 2011] [18:56:48] &lt;dan___&gt;      whats the best way to share it?
| [Wednesday 16 February 2011] [18:56:52] &lt;dan___&gt;      copy paste in here?
| [Wednesday 16 February 2011] [18:56:52] &lt;mikko&gt;       gist.github.com
| [Wednesday 16 February 2011] [18:57:48] &lt;dan___&gt;      sure - let me copy the code
| [Wednesday 16 February 2011] [19:01:17] &lt;mikko&gt;       did it work?
| [Wednesday 16 February 2011] [19:02:31] &lt;dan___&gt;      yeah
| [Wednesday 16 February 2011] [19:02:38] &lt;dan___&gt;      im trying to figure out how to &#8220;share it&#8221; lol
| [Wednesday 16 February 2011] [19:02:43] &lt;mikko&gt;       just the url
| [Wednesday 16 February 2011] [19:02:53] &lt;dan___&gt;      <a class="reference external" href="mailto:git&#37;&#52;&#48;gist&#46;github&#46;com">git<span>&#64;</span>gist<span>&#46;</span>github<span>&#46;</span>com</a>:2f8a0d953fa7c1acc7d6.git
| [Wednesday 16 February 2011] [19:03:06] &lt;dan___&gt;      <a class="reference external" href="https://gist.github.com/2f8a0d953fa7c1acc7d6">https://gist.github.com/2f8a0d953fa7c1acc7d6</a>
| [Wednesday 16 February 2011] [19:03:09] &lt;mikko&gt;       thanks
| [Wednesday 16 February 2011] [19:03:13] &lt;mikko&gt;       let me take a look
| [Wednesday 16 February 2011] [19:03:39] &lt;mikko&gt;       thats not the ipc one?
| [Wednesday 16 February 2011] [19:03:45] &lt;dan___&gt;      The Connections.cpp and Connections.py files define &#8220;Publisher&#8221; and &#8220;Subscriber&#8221; classes
| [Wednesday 16 February 2011] [19:03:52] &lt;mikko&gt;       what did you use as URI for the ipc?
| [Wednesday 16 February 2011] [19:04:09] &lt;dan___&gt;      there is an intermediate service on tcp that tells teh publisher and subscribers where to connect
| [Wednesday 16 February 2011] [19:05:18] &lt;dan___&gt;      ah crap i forgot the file for the intermediate name look-up...
| [Wednesday 16 February 2011] [19:05:30] &lt;dan___&gt;      the ipc names are just ipc://something.ipc
| [Wednesday 16 February 2011] [19:05:50] &lt;dan___&gt;      the publisher gets told to bind to both tcp and ipc ports
| [Wednesday 16 February 2011] [19:06:10] &lt;mikko&gt;       hmm
| [Wednesday 16 February 2011] [19:06:16] &lt;dan___&gt;      the subscriber gets told to bind to an ipc (if it is on the same machine as the publisher) or tcp if it is remote
| [Wednesday 16 February 2011] [19:06:19] &lt;mikko&gt;       are you running them on same directory?
| [Wednesday 16 February 2011] [19:06:32] &lt;dan___&gt;      ... no
| [Wednesday 16 February 2011] [19:06:46] &lt;mikko&gt;       ipc:///tmp/test.ipc
| [Wednesday 16 February 2011] [19:06:55] &lt;mikko&gt;       that would be an absolute path to /tmp/test.ipc
| [Wednesday 16 February 2011] [19:07:08] &lt;mikko&gt;       ipc://something.ipc would be relative to the current working directory
| [Wednesday 16 February 2011] [19:07:15] &lt;mikko&gt;       notice the amount of slashes
| [Wednesday 16 February 2011] [19:07:20] &lt;dan___&gt;      ah ok that would make sense
| [Wednesday 16 February 2011] [19:07:34] &lt;dan___&gt;      let me try that
| [Wednesday 16 February 2011] [19:09:38] &lt;dan___&gt;      awesome
| [Wednesday 16 February 2011] [19:09:40] &lt;dan___&gt;      that worked
| [Wednesday 16 February 2011] [19:09:42] &lt;dan___&gt;      thanks
| [Wednesday 16 February 2011] [19:10:27] &lt;mikko&gt;       no problem
| [Wednesday 16 February 2011] [19:11:27] &lt;dan___&gt;      one other question i just thought of - what is the correct way to get a python subscriber to exit cleanly if it is stuck waiting on a recv()?
| [Wednesday 16 February 2011] [19:11:40] &lt;dan___&gt;      (like in SubTest.py) ?
| [Wednesday 16 February 2011] [19:13:27] &lt;mikko&gt;       ctrl + c doesnt work?
| [Wednesday 16 February 2011] [19:13:55] &lt;dan___&gt;      no - it seems to take kill -9
| [Wednesday 16 February 2011] [19:14:44] &lt;mikko&gt;       i don&#8217;t really know about python that much
| [Wednesday 16 February 2011] [19:14:55] &lt;mikko&gt;       i think python might be eating the signal
| [Wednesday 16 February 2011] [19:14:55] &lt;dan___&gt;      lol neither do i
| [Wednesday 16 February 2011] [19:15:08] &lt;dan___&gt;      well thats why i tried putting the signal handler in
| [Wednesday 16 February 2011] [19:15:25] &lt;dan___&gt;      but it doesn&#8217;t seem to have any effect
| [Wednesday 16 February 2011] [19:15:58] &lt;mikko&gt;       one option would be to use zmq poll
| [Wednesday 16 February 2011] [19:16:11] &lt;mikko&gt;       use a timeout on socket and after timeout check a flag or something
| [Wednesday 16 February 2011] [19:16:19] &lt;mikko&gt;       which you set in signal handler
| [Wednesday 16 February 2011] [19:16:38] &lt;dan___&gt;      that sounds reasonable
| [Wednesday 16 February 2011] [19:16:48] &lt;dan___&gt;      i have not used the poll feature yet
| [Wednesday 16 February 2011] [19:17:55] &lt;dan___&gt;      at any rate - thanks for your time and help!
| [Wednesday 16 February 2011] [19:19:00] &lt;mikko&gt;       no probs
| [Wednesday 16 February 2011] [19:19:11] &lt;mikko&gt;       its usually more lively in here around day time  (eu time)
| [Wednesday 16 February 2011] [19:19:30] &lt;dan___&gt;      ah - are you a contributer?
| [Wednesday 16 February 2011] [19:32:29] &lt;sam`&gt;        hi
| [Wednesday 16 February 2011] [19:32:52] &lt;sam`&gt;        going through the mailing list archives I read that a reliable pub/sub (with EPGM) would be as slow as the slowest subscriber
| [Wednesday 16 February 2011] [19:33:12] &lt;sam`&gt;        anyone has some insight on this, and on how to avoid it?
| [Wednesday 16 February 2011] [19:33:47] &lt;sam`&gt;        i&#8217;m looking at using 0MQ with an EPGM transport to distribute blobs of data (~100MB) to several hundred machines effeciently
| [Wednesday 16 February 2011] [19:34:30] &lt;sam`&gt;        but I can&#8217;t figure out if that&#8217;s the worst idea ever, or if it&#8217;s actually efficient both speed-wise and network usage -wise
| [Wednesday 16 February 2011] [23:35:39] &lt;rhino&gt;       Hi, has anyone loaded jzmq into eclipse before?
| [Thursday 17 February 2011] [03:29:22] &lt;yrashk&gt;       I am confused again.. which erlzmq is supposed to be better? I have currently packaged official one (zeromq/erlzmq) into erlagner.org index.
| [Thursday 17 February 2011] [03:32:21] &lt;sustrik&gt;      there are several of them?
| [Thursday 17 February 2011] [03:32:59] &lt;jugg&gt; imo http://github.com/csrl/erlzmq is more feature complete and stable.  The &#8220;official&#8221; version is useful for high volume &#8216;sub&#8217; sockets, and playground use.  But is pretty buggy otherwise.
| [Thursday 17 February 2011] [03:34:11] &lt;jugg&gt; disclaimer, &#8216;csrl&#8217; is me.
| [Thursday 17 February 2011] [03:34:12] &lt;sustrik&gt;      anything tah zeromq/erlzmq has and csrl/erlzmq hasn&#8217;t?
| [Thursday 17 February 2011] [03:34:16] &lt;sustrik&gt;      i know
| [Thursday 17 February 2011] [03:34:55] &lt;yrashk&gt;       sustrik: I am trying to understand what&#8217;s the difference between csrl and zeromq
| [Thursday 17 February 2011] [03:35:02] &lt;sustrik&gt;      no idea
| [Thursday 17 February 2011] [03:35:09] &lt;sustrik&gt;      jugg should be able to explain
| [Thursday 17 February 2011] [03:35:10] &lt;yrashk&gt;       jugg: then I just sent you a message on github :)
| [Thursday 17 February 2011] [03:35:24] &lt;jugg&gt; zeromq/erlzmq will actively push incoming data to the erlang process.  csrl/erlzmq won&#8217;t.
| [Thursday 17 February 2011] [03:35:26] &lt;yrashk&gt;       would you mind checking it out?
| [Thursday 17 February 2011] [03:36:28] &lt;sustrik&gt;      yrashk: what message? i haven&#8217;t got anything yet.
| [Thursday 17 February 2011] [03:36:40] &lt;yrashk&gt;       sustrik: no, I have sent it to hugg
| [Thursday 17 February 2011] [03:36:42] &lt;yrashk&gt;       jugg*
| [Thursday 17 February 2011] [03:36:58] &lt;yrashk&gt;       I wrote &#8221; jugg: then I just sent you a message on github :)&#8221;
| [Thursday 17 February 2011] [03:37:07] &lt;sustrik&gt;      oops
| [Thursday 17 February 2011] [03:37:08] &lt;sustrik&gt;      :)
| [Thursday 17 February 2011] [03:37:11] &lt;yrashk&gt;       :]
| [Thursday 17 February 2011] [03:37:36] &lt;sustrik&gt;      jugg: i think there used to be both options, no?
| [Thursday 17 February 2011] [03:37:44] &lt;jugg&gt; yrashk, sure, I&#8217;ll do that.
| [Thursday 17 February 2011] [03:37:55] &lt;sustrik&gt;      iirc, something like &#8220;passive&#8221; flag
| [Thursday 17 February 2011] [03:37:55] &lt;yrashk&gt;       sustrik: I think zeromq/erlzmq has active option
| [Thursday 17 February 2011] [03:37:56] &lt;jugg&gt; sustrik, yes, my version doesn&#8217;t provide that option.
| [Thursday 17 February 2011] [03:38:02] &lt;jugg&gt; &#8216;active&#8217; flag actually...
| [Thursday 17 February 2011] [03:38:09] &lt;sustrik&gt;      aha
| [Thursday 17 February 2011] [03:38:21] &lt;sustrik&gt;      ok, any chance to merge the two implementations?
| [Thursday 17 February 2011] [03:38:28] &lt;yrashk&gt;       jugg: please let me know when you&#8217;ll merge that patch in, I&#8217;ll package your fork right after that
| [Thursday 17 February 2011] [03:38:36] &lt;yrashk&gt;       sustrik: that would be nice.. I guess
| [Thursday 17 February 2011] [03:38:39] &lt;jugg&gt; yrashk, ok
| [Thursday 17 February 2011] [03:38:43] &lt;yrashk&gt;       less to manage for me :]
| [Thursday 17 February 2011] [03:39:34] &lt;sustrik&gt;      yrashk: are you an erlzmq maintainer?
| [Thursday 17 February 2011] [03:39:40] &lt;jugg&gt; sustrik, the &#8216;active&#8217; flag is only useful for subscription sockets.  If used on other sockets it is the source of problems.
| [Thursday 17 February 2011] [03:39:53] &lt;yrashk&gt;       sustrik: erlzmq.agner maintainer, it&#8217;s just a &#8220;spec&#8221; package
| [Thursday 17 February 2011] [03:40:05] &lt;sustrik&gt;      i see
| [Thursday 17 February 2011] [03:40:35] &lt;yrashk&gt;       I am the guy behing erlagner.org operations, we&#8217;re finally doing proper packaging system for erlang
| [Thursday 17 February 2011] [03:41:00] &lt;sustrik&gt;      ah, i&#8217;ve heard about it
| [Thursday 17 February 2011] [03:41:21] &lt;sustrik&gt;      not or erlang user myself though
| [Thursday 17 February 2011] [03:41:58] &lt;jugg&gt; saleyn will not merge my changes unless I implement &#8216;active&#8217; option support and a couple of other minor things.  But I don&#8217;t have the time to do it correctly at this point, and I&#8217;m not interested in merging the implementation as is, given the issues surrounding it.
| [Thursday 17 February 2011] [03:42:14] &lt;sustrik&gt;      jugg: iirc active was introduced to allow erlzmq to work in non-lock-step fashion
| [Thursday 17 February 2011] [03:42:32] &lt;yrashk&gt;       this is why I&#8217;d prefer to package both official and jugg&#8217;s versions
| [Thursday 17 February 2011] [03:42:41] &lt;jugg&gt; yes, my implementation supports polling, which negates the need for it in that regards.
| [Thursday 17 February 2011] [03:42:56] &lt;sustrik&gt;      well, no way out at the moment
| [Thursday 17 February 2011] [03:43:22] &lt;sustrik&gt;      you may also consider adding new binding page to zeromq.org
| [Thursday 17 February 2011] [03:43:28] &lt;sustrik&gt;      there&#8217;s a precedent:
| [Thursday 17 February 2011] [03:43:34] &lt;sustrik&gt;      there are 2 ruby bindings
| [Thursday 17 February 2011] [03:43:35] &lt;jugg&gt; saleyn sites possible performance implications, however no actual testing has been done afaik.
| [Thursday 17 February 2011] [03:44:14] &lt;yrashk&gt;       how much is the slowdown on raw 0mq vs erlzmq btw?
| [Thursday 17 February 2011] [03:44:18] &lt;yrashk&gt;       on either binding
| [Thursday 17 February 2011] [03:44:33] &lt;yrashk&gt;       or, let me rephrase, how severe*
| [Thursday 17 February 2011] [03:44:53] &lt;sustrik&gt;      nobody really tested it, afaik
| [Thursday 17 February 2011] [03:44:55] &lt;yrashk&gt;       and erlzmq vs raw 0mq, to be more correct :]
| [Thursday 17 February 2011] [03:45:05] &lt;yrashk&gt;       heh
| [Thursday 17 February 2011] [03:45:08] &lt;yrashk&gt;       too bad
| [Thursday 17 February 2011] [03:45:19] &lt;yrashk&gt;       I am actually actively considering using erlzmq in one of the oncoming projects
| [Thursday 17 February 2011] [03:45:37] &lt;sustrik&gt;      testing it should be easy
| [Thursday 17 February 2011] [03:45:49] &lt;sustrik&gt;      there are C testing in /perf subdirectory
| [Thursday 17 February 2011] [03:46:10] &lt;sustrik&gt;      as for erlzmq, i don&#8217;t know, but most bindings have /perf subdir as well
| [Thursday 17 February 2011] [03:46:33] &lt;jugg&gt; A different comparison: I have two interfaces to my application, one native erlang, and another using erlzmq.  zeromq doesn&#8217;t significantly add any overhead.
| [Thursday 17 February 2011] [03:46:33] &lt;sustrik&gt;      containing exactly the same tests
| [Thursday 17 February 2011] [03:46:52] &lt;yrashk&gt;       jugg: so it&#8217;s just comparable?
| [Thursday 17 February 2011] [03:47:29] &lt;yrashk&gt;       I hoped it will be faster, lol :)
| [Thursday 17 February 2011] [03:47:44] &lt;jugg&gt; native erlang vs erlzmq, yes comparable.
| [Thursday 17 February 2011] [03:47:46] &lt;yrashk&gt;       although of course it is unlikely to be faster
| [Thursday 17 February 2011] [03:47:46] &lt;sustrik&gt;      it&#8217;s native erlang vs. 0mq; what you asked about is raw 0MQ from C vs. erlzmq
| [Thursday 17 February 2011] [03:47:55] &lt;yrashk&gt;       yeah I understand
| [Thursday 17 February 2011] [03:48:15] &lt;yrashk&gt;       I suppose raw 0mq is much, much faster
| [Thursday 17 February 2011] [03:48:37] &lt;sustrik&gt;      jugg: are there perf tests in erlzmq?
| [Thursday 17 February 2011] [03:48:44]         * sustrik is checking
| [Thursday 17 February 2011] [03:48:48] &lt;yrashk&gt;       sustrik: nope
| [Thursday 17 February 2011] [03:49:14] &lt;sustrik&gt;      than you may consider writing them, it&#8217;s few lines of code
| [Thursday 17 February 2011] [03:49:18] &lt;jugg&gt; no
| [Thursday 17 February 2011] [03:50:09] &lt;yrashk&gt;       sustrik: like porting https://github.com/zeromq/pyzmq/tree/master/perf ?
| [Thursday 17 February 2011] [03:50:23] &lt;mikko&gt;        good morning
| [Thursday 17 February 2011] [03:50:46] &lt;sustrik&gt;      morning
| [Thursday 17 February 2011] [03:50:59] &lt;sustrik&gt;      yrashk: these seem unnecessary complex
| [Thursday 17 February 2011] [03:51:12] &lt;yrashk&gt;       sustrik: do you have any other examples?
| [Thursday 17 February 2011] [03:51:53] &lt;sustrik&gt;      what about this:
| [Thursday 17 February 2011] [03:51:54] &lt;sustrik&gt;      https://github.com/zeromq/rbzmq/tree/master/perf
| [Thursday 17 February 2011] [03:52:18] &lt;yrashk&gt;       yup, quite simple
| [Thursday 17 February 2011] [04:02:48] &lt;yrashk&gt;       porting local_lat
| [Thursday 17 February 2011] [04:03:57] &lt;yrashk&gt;       hmmm erlzmq has no support for contexts
| [Thursday 17 February 2011] [04:03:58] &lt;yrashk&gt;       :)
| [Thursday 17 February 2011] [04:10:13] &lt;sustrik&gt;      doesn&#8217;t matter, there a global context in the lib, i assume
| [Thursday 17 February 2011] [04:11:09] &lt;sustrik&gt;      btw, setting HWM in local_lat is superfluous
| [Thursday 17 February 2011] [04:11:26] &lt;sustrik&gt;      no idea how it got into ruby perf suite
| [Thursday 17 February 2011] [04:14:36] &lt;yrashk&gt;       lol
| [Thursday 17 February 2011] [04:14:43] &lt;yrashk&gt;       anyway I actually switched to porting _thr tests
| [Thursday 17 February 2011] [04:14:48] &lt;sustrik&gt;      ack
| [Thursday 17 February 2011] [04:14:51] &lt;yrashk&gt;       local_thr is done
| [Thursday 17 February 2011] [04:14:54] &lt;sustrik&gt;      lol
| [Thursday 17 February 2011] [04:14:57] &lt;yrashk&gt;       :D
| [Thursday 17 February 2011] [04:15:01] &lt;sustrik&gt;      you are fast
| [Thursday 17 February 2011] [04:15:02] &lt;yrashk&gt;       realtime progress, eh?
| [Thursday 17 February 2011] [04:18:54] &lt;yrashk&gt;       what size &amp; count should I test it on?
| [Thursday 17 February 2011] [04:21:15] &lt;yrashk&gt;       I think official erlzmq is somewhat broken
| [Thursday 17 February 2011] [04:22:38] &lt;jugg&gt; yrashk, pushed.
| [Thursday 17 February 2011] [04:22:58] &lt;yrashk&gt;       jugg: cool!
| [Thursday 17 February 2011] [04:23:24] &lt;yrashk&gt;       zeromq/erlzmq setsockopt doesn&#8217;t work with the type of sockets socket/* create :S
| [Thursday 17 February 2011] [04:26:57] &lt;yrashk&gt;       aaand {error,einval} :-| [Thursday 17 February 2011] [04:29:47] &lt;yrashk&gt;       ok, I&#8217;ll try to package jugg&#8217;s fork now
| [Thursday 17 February 2011] [04:32:34] &lt;yrashk&gt;       done
| [Thursday 17 February 2011] [04:32:41] &lt;yrashk&gt;       it looks much cleaner
| [Thursday 17 February 2011] [04:35:37] &lt;CIA-21&gt;       zeromq2: 03Martin Sustrik 07master * r28f3e87 10/ (5 files):
| [Thursday 17 February 2011] [04:35:37] &lt;CIA-21&gt;       zeromq2: Add delay before reconnecting
| [Thursday 17 February 2011] [04:35:37] &lt;CIA-21&gt;       zeromq2: So far ZMQ_RECONNECT_IVL delay was used only when TCP connect
| [Thursday 17 February 2011] [04:35:37] &lt;CIA-21&gt;       zeromq2: failed. Now it is used even if connect succeeds and the peer
| [Thursday 17 February 2011] [04:35:37] &lt;CIA-21&gt;       zeromq2: closes the connection afterwards.
| [Thursday 17 February 2011] [04:35:38] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Martin Sustrik &lt;sustrik&#64;250bpm.com&gt; - http://bit.ly/i9iO9x
| [Thursday 17 February 2011] [04:36:17] &lt;sustrik&gt;      yrashk: any perf results?
| [Thursday 17 February 2011] [04:36:35] &lt;sustrik&gt;      use something like 1M messages, each 1B long
| [Thursday 17 February 2011] [04:39:21] &lt;yrashk&gt;       sustrik: almost there
| [Thursday 17 February 2011] [04:39:28] &lt;yrashk&gt;       sustrik: fixing last bugs
| [Thursday 17 February 2011] [04:39:37] &lt;jugg&gt; yrashk, for those perf tests, if you run local/remote on the same node under the same zmq context, you&#8217;ll be sharing a single port which could cause a bottleneck.  Either run them on separate nodes, or create two contexts, one for local, one for remote.  (Using a port per socket is a TODO item).
| [Thursday 17 February 2011] [04:40:22] &lt;yrashk&gt;       it is late in the night so I am not sure if my math is right
| [Thursday 17 February 2011] [04:40:27] &lt;yrashk&gt;       jugg: testing on separate vms
| [Thursday 17 February 2011] [04:40:32] &lt;jugg&gt; k
| [Thursday 17 February 2011] [04:40:48] &lt;yrashk&gt;           Throughput = MessageCount / Elapsed
| [Thursday 17 February 2011] [04:40:53] &lt;yrashk&gt;       Elapsed is in microseconds
| [Thursday 17 February 2011] [04:41:16] &lt;yrashk&gt;       I guess I need to multiply by 1000
| [Thursday 17 February 2011] [04:42:13] &lt;yrashk&gt;       1M messages taking some time...
| [Thursday 17 February 2011] [04:42:17] &lt;yrashk&gt;       quite some time
| [Thursday 17 February 2011] [04:42:44] &lt;yrashk&gt;       sustrik: how long 1M of 1B is supposed to be with raw 0mq?
| [Thursday 17 February 2011] [04:42:53] &lt;sustrik&gt;      fraction of a second
| [Thursday 17 February 2011] [04:43:15] &lt;yrashk&gt;       ha
| [Thursday 17 February 2011] [04:43:25] &lt;yrashk&gt;       well erlzmq is doomed then
| [Thursday 17 February 2011] [04:43:59] &lt;jugg&gt; can you post the code?
| [Thursday 17 February 2011] [04:44:15] &lt;sustrik&gt;      0.3 sec on my box
| [Thursday 17 February 2011] [04:44:46] &lt;yrashk&gt;       https://gist.github.com/5c3005692b594c318897
| [Thursday 17 February 2011] [04:44:53] &lt;yrashk&gt;       sustrik: with raw 0mq right?
| [Thursday 17 February 2011] [04:45:04] &lt;sustrik&gt;      yes
| [Thursday 17 February 2011] [04:46:17] &lt;yrashk&gt;       well it took about half a minute here
| [Thursday 17 February 2011] [04:46:18] &lt;yrashk&gt;       hehe
| [Thursday 17 February 2011] [04:46:31] &lt;yrashk&gt;       for tcp transport
| [Thursday 17 February 2011] [04:46:56] &lt;yrashk&gt;       mean throughput: 30524.908462667627 [msg/s]
| [Thursday 17 February 2011] [04:47:10] &lt;yrashk&gt;       (if my math is correct)
| [Thursday 17 February 2011] [04:47:20] &lt;yrashk&gt;       (this is csrl&#8217;s fork)
| [Thursday 17 February 2011] [04:52:18] &lt;yrashk&gt;       official one, I can&#8217;t even test yet
| [Thursday 17 February 2011] [04:52:23] &lt;yrashk&gt;       getting einval on recv
| [Thursday 17 February 2011] [04:53:20] &lt;yrashk&gt;       sustrik: jugg ^^^
| [Thursday 17 February 2011] [04:54:25] &lt;sustrik&gt;      strange
| [Thursday 17 February 2011] [04:54:58] &lt;yrashk&gt;       this performance isn&#8217;t impressive at all :-(
| [Thursday 17 February 2011] [04:55:09] &lt;sustrik&gt;      maybe because of &#8220;active&#8221;?
| [Thursday 17 February 2011] [04:56:06] &lt;sustrik&gt;      in any case, don&#8217;t throw the tests away
| [Thursday 17 February 2011] [04:56:23] &lt;sustrik&gt;      let&#8217;s merge them to erlzmq
| [Thursday 17 February 2011] [04:56:36] &lt;yrashk&gt;       I am trying to set active to false explicitly
| [Thursday 17 February 2011] [04:57:20] &lt;yrashk&gt;       ok it worked
| [Thursday 17 February 2011] [04:57:25] &lt;yrashk&gt;       I think it was enabled by default
| [Thursday 17 February 2011] [04:58:24] &lt;yrashk&gt;       I suspect that official w/o active is even slower
| [Thursday 17 February 2011] [04:58:30] &lt;yrashk&gt;       no
| [Thursday 17 February 2011] [04:58:32] &lt;yrashk&gt;       about the same
| [Thursday 17 February 2011] [04:58:38] &lt;yrashk&gt;       mean throughput: 32142.1195960057 [msg/s]
| [Thursday 17 February 2011] [04:58:49] &lt;sustrik&gt;      hm
| [Thursday 17 February 2011] [04:59:17] &lt;yrashk&gt;       creating another version to test with active on
| [Thursday 17 February 2011] [05:01:02] &lt;yrashk&gt;       active was even worse
| [Thursday 17 February 2011] [05:01:02] &lt;yrashk&gt;       mean throughput: 28188.449027560524 [msg/s]
| [Thursday 17 February 2011] [05:01:35] &lt;mikko&gt;        sustrik: whats the process in updating openpgm?
| [Thursday 17 February 2011] [05:01:36] &lt;yrashk&gt;       and
| [Thursday 17 February 2011] [05:01:37] &lt;yrashk&gt;       mean throughput: 26443.701834780386 [msg/s]
| [Thursday 17 February 2011] [05:01:52] &lt;sustrik&gt;      mikko: i don&#8217;t know, mato did it
| [Thursday 17 February 2011] [05:02:03] &lt;sustrik&gt;      i suppose it&#8217;s just replacing the archive
| [Thursday 17 February 2011] [05:02:30] &lt;mikko&gt;        sustrik: i think we are soon in a point where we can invoke openpgm autotools build
| [Thursday 17 February 2011] [05:02:38] &lt;mikko&gt;        and remove large amount of duplicated work
| [Thursday 17 February 2011] [05:02:46] &lt;sustrik&gt;      wow
| [Thursday 17 February 2011] [05:02:53] &lt;mikko&gt;        everything still works as they did before (bundled openpgm)
| [Thursday 17 February 2011] [05:02:53] &lt;sustrik&gt;      congrats
| [Thursday 17 February 2011] [05:03:08] &lt;mikko&gt;        but it just runs openpgm &#8216;configure&#8217; from zeromq &#8216;configure&#8217;
| [Thursday 17 February 2011] [05:03:13] &lt;sustrik&gt;      yrashk: time to profile erlzmq :)
| [Thursday 17 February 2011] [05:03:45] &lt;mikko&gt;        also, all compiler choices etc flow down to openpgm build
| [Thursday 17 February 2011] [05:04:01] &lt;<a href="#id2069"><span class="problematic" id="id2070">pieterh_</span></a>&gt;     sustrik, fix to mailbox did not work, I&#8217;ve sent details to the list
| [Thursday 17 February 2011] [05:04:02] &lt;sustrik&gt;      nice
| [Thursday 17 February 2011] [05:04:20] &lt;sustrik&gt;      <a href="#id2071"><span class="problematic" id="id2072">pieterh_</span></a>: yes, it&#8217;s a complex problem
| [Thursday 17 February 2011] [05:04:23] &lt;mikko&gt;        should i add gcov to zeromq as well?
| [Thursday 17 February 2011] [05:04:27] &lt;sustrik&gt;      see the original email in the thread
| [Thursday 17 February 2011] [05:04:33] &lt;mikko&gt;        so that we can visually see what&#8217;s tested and what&#8217;s not?
| [Thursday 17 February 2011] [05:04:50] &lt;yrashk&gt;       sustrik, jugg: ok so I have patches with perf teststo merge in now, interested?
| [Thursday 17 February 2011] [05:04:55] &lt;<a href="#id2073"><span class="problematic" id="id2074">pieterh_</span></a>&gt;     sustrik: IMO there is a bug in the mailbox handling of reconnect commands
| [Thursday 17 February 2011] [05:05:10] &lt;<a href="#id2075"><span class="problematic" id="id2076">pieterh_</span></a>&gt;     the mailbox grows consistently for each reconnect
| [Thursday 17 February 2011] [05:05:15] &lt;jugg&gt; yrashk, sure
| [Thursday 17 February 2011] [05:05:18] &lt;<a href="#id2077"><span class="problematic" id="id2078">pieterh_</span></a>&gt;     doesn&#8217;t matter how fast or slow you do them
| [Thursday 17 February 2011] [05:05:24] &lt;sustrik&gt;      mikko: why not
| [Thursday 17 February 2011] [05:05:48] &lt;yrashk&gt;       jugg: sent performance tests pull req
| [Thursday 17 February 2011] [05:05:49] &lt;sustrik&gt;      <a href="#id2079"><span class="problematic" id="id2080">pieterh_</span></a>: it&#8217;s because the application thread does not process the commands (it&#8217;s sleeping)
| [Thursday 17 February 2011] [05:06:20] &lt;<a href="#id2081"><span class="problematic" id="id2082">pieterh_</span></a>&gt;     sustrik: ack, any way to discard duplicates?
| [Thursday 17 February 2011] [05:06:34] &lt;yrashk&gt;       I am a very sad panda now
| [Thursday 17 February 2011] [05:06:40] &lt;sustrik&gt;      not really, they are in the middle of the socketpair buffer
| [Thursday 17 February 2011] [05:06:53] &lt;<a href="#id2083"><span class="problematic" id="id2084">pieterh_</span></a>&gt;     then kill the parent socket if it doesn&#8217;t behave
| [Thursday 17 February 2011] [05:06:54] &lt;sustrik&gt;      rather the reconnection logic should be rethought
| [Thursday 17 February 2011] [05:07:12] &lt;sustrik&gt;      that&#8217;s an option
| [Thursday 17 February 2011] [05:07:19] &lt;sustrik&gt;      EBROKEN
| [Thursday 17 February 2011] [05:07:22] &lt;yrashk&gt;       sustrik: <a class="reference external" href="https://github.com/zeromq/erlzmq/pull/16">https://github.com/zeromq/erlzmq/pull/16</a>
| [Thursday 17 February 2011] [05:07:23] &lt;<a href="#id2085"><span class="problematic" id="id2086">pieterh_</span></a>&gt;     yes, exactly
| [Thursday 17 February 2011] [05:07:56] &lt;sustrik&gt;      yrashk: thx
| [Thursday 17 February 2011] [05:08:07] &lt;<a href="#id2087"><span class="problematic" id="id2088">pieterh_</span></a>&gt;     it&#8217;s not a 0MQ error, it&#8217;s a caller error, so it should kill whatever&#8217;s misbehaving and return an error
| [Thursday 17 February 2011] [05:08:07] &lt;yrashk&gt;       still, 30K 1-byte messages per second...
| [Thursday 17 February 2011] [05:08:10] &lt;<a href="#id2089"><span class="problematic" id="id2090">pieterh_</span></a>&gt;     not assert, of course
| [Thursday 17 February 2011] [05:08:13] &lt;yrashk&gt;       :S
| [Thursday 17 February 2011] [05:08:26] &lt;<a href="#id2091"><span class="problematic" id="id2092">pieterh_</span></a>&gt;     yrashk, you running AMQP?
| [Thursday 17 February 2011] [05:08:58] &lt;<a href="#id2093"><span class="problematic" id="id2094">pieterh_</span></a>&gt;     just kidding, there was a 30K figure from someone impressed with AMQP, on Twitter...
| [Thursday 17 February 2011] [05:10:45] &lt;yrashk&gt;       <a href="#id2095"><span class="problematic" id="id2096">pieterh_</span></a>: no, erlzmq actually
| [Thursday 17 February 2011] [05:10:47] &lt;yrashk&gt;       i am not impressed
| [Thursday 17 February 2011] [05:10:51] &lt;yrashk&gt;       rather opposite
| [Thursday 17 February 2011] [05:11:08] &lt;<a href="#id2097"><span class="problematic" id="id2098">pieterh_</span></a>&gt;     erlang does some heavy locking, I&#8217;ve been told
| [Thursday 17 February 2011] [05:11:31] &lt;yrashk&gt;       this is a very vague statement
| [Thursday 17 February 2011] [05:11:58] &lt;<a href="#id2099"><span class="problematic" id="id2100">pieterh_</span></a>&gt;     indeed
| [Thursday 17 February 2011] [05:12:02] &lt;yrashk&gt;       I can&#8217;t even reply to it
| [Thursday 17 February 2011] [05:12:50] &lt;<a href="#id2101"><span class="problematic" id="id2102">pieterh_</span></a>&gt;     i mean, it&#8217;s spending its time somewhere and that is not 0MQ and probably not erlzmq as such either
| [Thursday 17 February 2011] [05:13:50] &lt;mikko&gt;        <a class="reference external" href="http://www.erlang-factory.com/upload/presentations/303/rickard-green-euc2010.pdf">http://www.erlang-factory.com/upload/presentations/303/rickard-green-euc2010.pdf</a>
| [Thursday 17 February 2011] [05:13:54] &lt;mikko&gt;        erlang locking explained
| [Thursday 17 February 2011] [05:14:28] &lt;yrashk&gt;       I assume everyone knows what erlang rwlocks are
| [Thursday 17 February 2011] [05:14:41] &lt;mikko&gt;        i didn&#8217;t before i read that
| [Thursday 17 February 2011] [05:15:21] &lt;<a href="#id2103"><span class="problematic" id="id2104">pieterh_</span></a>&gt;     yrashk, few people here have every used erlang
| [Thursday 17 February 2011] [05:15:25] &lt;<a href="#id2105"><span class="problematic" id="id2106">pieterh_</span></a>&gt;     <em>ever used
| [Thursday 17 February 2011] [05:16:00] &lt;pieterh_&gt;     mikko, interesting stuff but does anyone have figures for the actual overhead of erlang rwlocks?
| [Thursday 17 February 2011] [05:18:49] &lt;pieterh_&gt;     sustrik: any best practice on turning an identity blob_t into a printable string for error reporting?
| [Thursday 17 February 2011] [05:18:59] &lt;yrashk&gt;       what really upsets me is that erlzmq is maintained by saleyn
| [Thursday 17 February 2011] [05:19:08] &lt;yrashk&gt;       if he can&#8217;t make it fast, then who can? :-| [Thursday 17 February 2011] [05:19:20] &lt;pieterh_&gt;     maybe 30k/sec is fast, it&#8217;s always relative...
| [Thursday 17 February 2011] [05:19:30] &lt;yrashk&gt;       I don&#8217;t think it&#8217;s fast
| [Thursday 17 February 2011] [05:19:38] &lt;yrashk&gt;       if raw 0mq can do it like 100 times faster
| [Thursday 17 February 2011] [05:19:48] &lt;pieterh_&gt;     Have you measured the raw speed of two erlang tasks talking to each other?
| [Thursday 17 February 2011] [05:19:58] &lt;yrashk&gt;       nope
| [Thursday 17 February 2011] [05:20:05] &lt;yrashk&gt;       I think jugg had
| [Thursday 17 February 2011] [05:20:07] &lt;yrashk&gt;       did you?
| [Thursday 17 February 2011] [05:20:26] &lt;pieterh_&gt;     So Erlang is afaik not meant to be a high performance language but a language for reliable distributed systems
| [Thursday 17 February 2011] [05:21:13] &lt;pieterh_&gt;     I suspect (with only third-hand information) that you&#8217;ll find it to be around 30K/second
| [Thursday 17 February 2011] [05:21:34] &lt;pieterh_&gt;     Which is actually fine for many apps
| [Thursday 17 February 2011] [05:21:50] &lt;pieterh_&gt;     Especially if they process only one stream of data
| [Thursday 17 February 2011] [05:22:14] &lt;yrashk&gt;       &#8220;I see therefore that on two different Erlang nodes, this benchmark gives a result of an average of 700 thousands ping/pong messages per minute&#8221;
| [Thursday 17 February 2011] [05:22:18] &lt;yrashk&gt;       just googled this
| [Thursday 17 February 2011] [05:22:32] &lt;yrashk&gt;       well it looks like we&#8217;re doing more
| [Thursday 17 February 2011] [05:22:32] &lt;pieterh_&gt;     hmm, 20x faster...
| [Thursday 17 February 2011] [05:22:41] &lt;yrashk&gt;       we have million per 30 seconds
| [Thursday 17 February 2011] [05:22:49] &lt;pieterh_&gt;     per *minute</em>...
| [Thursday 17 February 2011] [05:23:08] &lt;yrashk&gt;       it&#8217;s ping/pong tho
| [Thursday 17 February 2011] [05:23:09] &lt;<a href="#id2107"><span class="problematic" id="id2108">pieterh_</span></a>&gt;     that&#8217;s ping pongs
| [Thursday 17 February 2011] [05:23:11] &lt;<a href="#id2109"><span class="problematic" id="id2110">pieterh_</span></a>&gt;     so double it
| [Thursday 17 February 2011] [05:23:15] &lt;yrashk&gt;       1,4mln
| [Thursday 17 February 2011] [05:23:19] &lt;<a href="#id2111"><span class="problematic" id="id2112">pieterh_</span></a>&gt;     1,400,000/minute
| [Thursday 17 February 2011] [05:23:38] &lt;<a href="#id2113"><span class="problematic" id="id2114">pieterh_</span></a>&gt;     23k/second
| [Thursday 17 February 2011] [05:23:38] &lt;yrashk&gt;       sustrik: in your tests, I assume you run over tcp?
| [Thursday 17 February 2011] [05:24:06] &lt;yrashk&gt;       &#8220;I see therefore that within the same Erlang node, this benchmark gives a result of an average of 5.3 million ping/pong messages per minute, the same that we had without the queuing mechanism.&#8221;
| [Thursday 17 February 2011] [05:24:08] &lt;<a href="#id2115"><span class="problematic" id="id2116">pieterh_</span></a>&gt;     which is pretty much equal to 30k/sec allowing for system differences
| [Thursday 17 February 2011] [05:24:45] &lt;yrashk&gt;       sustrik: also, different processes?
| [Thursday 17 February 2011] [05:25:43] &lt;<a href="#id2117"><span class="problematic" id="id2118">pieterh_</span></a>&gt;     so 160k/sec within same node
| [Thursday 17 February 2011] [05:26:46] &lt;yrashk&gt;       I just want to verify raw 0mq can do million messages betwen two diff processes over tcp on macosx in 0.3 secs
| [Thursday 17 February 2011] [05:26:56] &lt;yrashk&gt;       whether raw 0mq*
| [Thursday 17 February 2011] [05:27:08] &lt;yrashk&gt;       does this sound about right?
| [Thursday 17 February 2011] [05:27:32] &lt;yrashk&gt;       obviously there&#8217;s an overhead in any higher level language esp with VM likes beam
| [Thursday 17 February 2011] [05:27:32] &lt;<a href="#id2119"><span class="problematic" id="id2120">pieterh_</span></a>&gt;     yrashk, not ping pong, just send?
| [Thursday 17 February 2011] [05:27:40] &lt;yrashk&gt;       just sends
| [Thursday 17 February 2011] [05:27:42] &lt;yrashk&gt;       and recvs
| [Thursday 17 February 2011] [05:27:47] &lt;<a href="#id2121"><span class="problematic" id="id2122">pieterh_</span></a>&gt;     well, it will batch messages
| [Thursday 17 February 2011] [05:27:55] &lt;yrashk&gt;       but I want to make sure it is 100 times faster
| [Thursday 17 February 2011] [05:28:14] &lt;<a href="#id2123"><span class="problematic" id="id2124">pieterh_</span></a>&gt;     so if you use 1 byte messages you will get a throughput of several million per second at least
| [Thursday 17 February 2011] [05:28:43] &lt;<a href="#id2125"><span class="problematic" id="id2126">pieterh_</span></a>&gt;     depends a lot on your material here
| [Thursday 17 February 2011] [05:28:43] &lt;yrashk&gt;       I guess this is what is causing a problem in erlzmq
| [Thursday 17 February 2011] [05:28:52] &lt;<a href="#id2127"><span class="problematic" id="id2128">pieterh_</span></a>&gt;     multicore = multifaster
| [Thursday 17 February 2011] [05:30:47] &lt;yrashk&gt;       does anybody have any other binding available with perf tests available?
| [Thursday 17 February 2011] [05:30:51] &lt;yrashk&gt;       like rbzmq?
| [Thursday 17 February 2011] [05:31:08] &lt;yrashk&gt;       I just don&#8217;t want to go throguh system-wide installation of zeromq and such
| [Thursday 17 February 2011] [05:31:25] &lt;yrashk&gt;       I copied my test from ruby&#8217;s remote/local_thr.rb
| [Thursday 17 February 2011] [05:33:49] &lt;mikko&gt;        do you want bindings tested or is local_thr/remote_thr from zeromq ok?
| [Thursday 17 February 2011] [05:34:33] &lt;yrashk&gt;       ideally I want both :D
| [Thursday 17 February 2011] [05:34:39] &lt;yrashk&gt;       I can do the zeromq thing myself I guess
| [Thursday 17 February 2011] [05:38:21] &lt;yrashk&gt;       mean throughput: 2315163 [msg/s]
| [Thursday 17 February 2011] [05:38:52] &lt;<a href="#id2129"><span class="problematic" id="id2130">pieterh_</span></a>&gt;     yrashk, that&#8217;s rbzmq?
| [Thursday 17 February 2011] [05:39:03] &lt;mikko&gt;        mean throughput: 4997086 [msg/s]
| [Thursday 17 February 2011] [05:39:16] &lt;mikko&gt;        over lo using tcp socket on OS X
| [Thursday 17 February 2011] [05:39:26] &lt;yrashk&gt;       <a href="#id2131"><span class="problematic" id="id2132">pieterh_</span></a>: that&#8217;s raw 0mq
| [Thursday 17 February 2011] [05:39:36] &lt;yrashk&gt;       win 10
| [Thursday 17 February 2011] [05:39:38] &lt;yrashk&gt;       oops
| [Thursday 17 February 2011] [05:39:48] &lt;mikko&gt;        mean throughput: 5345358 [msg/s]
| [Thursday 17 February 2011] [05:39:51] &lt;mikko&gt;        over en0
| [Thursday 17 February 2011] [05:41:50] &lt;yrashk&gt;       this is all raw 0mq right?
| [Thursday 17 February 2011] [05:41:57] &lt;mikko&gt;        yes
| [Thursday 17 February 2011] [05:41:58] &lt;yrashk&gt;       anybody with rbzmq or pyzmq handy?
| [Thursday 17 February 2011] [05:42:06] &lt;mikko&gt;        i do
| [Thursday 17 February 2011] [05:42:09] &lt;mikko&gt;        i build them all :)
| [Thursday 17 February 2011] [05:42:16] &lt;mikko&gt;        sec
| [Thursday 17 February 2011] [05:42:22] &lt;yrashk&gt;       can you please run the same test? 1b msgs 1mln times
| [Thursday 17 February 2011] [05:44:58] &lt;mikko&gt;        yrashk: let me figure out how
| [Thursday 17 February 2011] [05:45:13] &lt;yrashk&gt;       mikko: in rbzmq those are exactly the same tests
| [Thursday 17 February 2011] [05:45:26] &lt;yrashk&gt;       perf/local_thr.rb perf/remote_thr.rb
| [Thursday 17 February 2011] [05:46:19] &lt;mikko&gt;        ok
| [Thursday 17 February 2011] [05:47:48] &lt;mikko&gt;        i think im running it now
| [Thursday 17 February 2011] [05:50:02] &lt;mikko&gt;        takes very long time with ruby
| [Thursday 17 February 2011] [05:50:33] &lt;yrashk&gt;       mikko: lets wait until it&#8217;s done
| [Thursday 17 February 2011] [05:50:43] &lt;yrashk&gt;       did you use <a class="reference external" href="tcp://127.0.0.1:port">tcp://127.0.0.1:port</a> 1 1000000
| [Thursday 17 February 2011] [05:50:45] &lt;yrashk&gt;       or something?
| [Thursday 17 February 2011] [05:51:01] &lt;mikko&gt;        i started with 100000000 or so
| [Thursday 17 February 2011] [05:51:09] &lt;mikko&gt;        now testing quickly with 10 that it actually works
| [Thursday 17 February 2011] [05:51:27] &lt;yrashk&gt;       well I want the same test
| [Thursday 17 February 2011] [05:51:32] &lt;yrashk&gt;       1 byte msgs, 1mln messages
| [Thursday 17 February 2011] [05:51:37] &lt;mikko&gt;        <a class="reference external" href="https://gist.github.com/62772ec66fc1a46a3372">https://gist.github.com/62772ec66fc1a46a3372</a>
| [Thursday 17 February 2011] [05:51:55] &lt;mikko&gt;        this is on linux
| [Thursday 17 February 2011] [05:51:58] &lt;yrashk&gt;       that&#8217;s 10mlns but thanks anyway
| [Thursday 17 February 2011] [05:52:17] &lt;mikko&gt;        and ruby
| [Thursday 17 February 2011] [05:52:20] &lt;mikko&gt;        <a class="reference external" href="http://build.valokuva.org/">http://build.valokuva.org/</a>
| [Thursday 17 February 2011] [05:52:23] &lt;mikko&gt;        i got those available
| [Thursday 17 February 2011] [05:57:52] &lt;jugg&gt; porting yrashk&#8217;s tests to do raw erlang message passing between two nodes yields 59645.1127719094 [msg/s].
| [Thursday 17 February 2011] [05:58:09] &lt;jugg&gt; to clarify that is without zeromq
| [Thursday 17 February 2011] [05:59:19] &lt;mikko&gt;        ok
| [Thursday 17 February 2011] [06:00:00] &lt;yrashk&gt;       jugg: so twice as fast
| [Thursday 17 February 2011] [06:00:55] &lt;jugg&gt; using zmq (tcp lo) those tests yield 21378.701789023213 [msg/s]  on my system.
| [Thursday 17 February 2011] [06:01:18] &lt;jugg&gt; erlzmq that is...
| [Thursday 17 February 2011] [06:01:43] &lt;jugg&gt; anyway, I&#8217;m off. yrashk, I&#8217;ll look at your pull request later.
| [Thursday 17 February 2011] [06:01:52] &lt;yrashk&gt;       well my pull req == git
| [Thursday 17 February 2011] [06:01:53] &lt;yrashk&gt;       gist
| [Thursday 17 February 2011] [06:01:54] &lt;mikko&gt;        yrashk: not many things on your blog
| [Thursday 17 February 2011] [06:02:03] &lt;mikko&gt;        in*
| [Thursday 17 February 2011] [06:02:05] &lt;yrashk&gt;       mikko: it&#8217;s empty, I know
| [Thursday 17 February 2011] [06:02:08] &lt;yrashk&gt;       I keep myself busy
| [Thursday 17 February 2011] [06:02:34] &lt;mikko&gt;        is there more locking involved accessing zeromq sockets from erlang?
| [Thursday 17 February 2011] [06:02:38] &lt;mikko&gt;        like explicit locking?
| [Thursday 17 February 2011] [06:22:36] &lt;sustrik&gt;      re
| [Thursday 17 February 2011] [06:24:42] &lt;sustrik&gt;      <a href="#id2133"><span class="problematic" id="id2134">pieterh_</span></a>: no standard way to convert blob into string
| [Thursday 17 February 2011] [06:25:39] &lt;sustrik&gt;      yrashk: i&#8217;ve used TCP
| [Thursday 17 February 2011] [06:25:48] &lt;sustrik&gt;      yrashk: you can investigate further
| [Thursday 17 February 2011] [06:26:03] &lt;sustrik&gt;      by running C local_thr vs. Erlang remote_thr
| [Thursday 17 February 2011] [06:26:09] &lt;sustrik&gt;      and vice versa
| [Thursday 17 February 2011] [06:26:35] &lt;sustrik&gt;      that way you&#8217;ll find out whether the bottleneck on the sender or receiver side
| [Thursday 17 February 2011] [06:32:30] &lt;yrashk&gt;       sustrik: I think I have a vague idea on how to make erlzmq faster
| [Thursday 17 February 2011] [06:32:44] &lt;yrashk&gt;       will require a lot of rewriting, though
| [Thursday 17 February 2011] [06:33:03] &lt;sustrik&gt;      do you have any idea where the bottleneck is?
| [Thursday 17 February 2011] [06:33:14] &lt;yrashk&gt;       port driver communication
| [Thursday 17 February 2011] [06:33:23] &lt;yrashk&gt;       not confirmed, just an idea
| [Thursday 17 February 2011] [06:33:35] &lt;sustrik&gt;      it&#8217;s good to measure it first
| [Thursday 17 February 2011] [06:33:45] &lt;sustrik&gt;      otherwise you may end with no perf improvement
| [Thursday 17 February 2011] [06:33:46] &lt;yrashk&gt;       hard to measure this, though
| [Thursday 17 February 2011] [06:33:57] &lt;yrashk&gt;       but possible
| [Thursday 17 February 2011] [06:34:22] &lt;sustrik&gt;      anyway, try the c/erlang perf tests
| [Thursday 17 February 2011] [06:34:36] &lt;yrashk&gt;       c/erlang?
| [Thursday 17 February 2011] [06:34:40] &lt;sustrik&gt;      it may turn out that the bottleneck is only on one side
| [Thursday 17 February 2011] [06:34:48] &lt;sustrik&gt;      &lt;sustrik&gt; yrashk: you can investigate further
| [Thursday 17 February 2011] [06:34:49] &lt;sustrik&gt;      &lt;sustrik&gt; by running C local_thr vs. Erlang remote_thr
| [Thursday 17 February 2011] [06:34:49] &lt;sustrik&gt;      &lt;sustrik&gt; and vice versa
| [Thursday 17 February 2011] [06:34:54] &lt;yrashk&gt;       oh
| [Thursday 17 February 2011] [06:34:55] &lt;yrashk&gt;       right
| [Thursday 17 February 2011] [06:34:57] &lt;yrashk&gt;       missed that
| [Thursday 17 February 2011] [06:35:01] &lt;yrashk&gt;       good idea actually
| [Thursday 17 February 2011] [06:36:09] &lt;yrashk&gt;       mean throughput: 30606 [msg/s]
| [Thursday 17 February 2011] [06:36:16] &lt;yrashk&gt;       this is C local_thr
| [Thursday 17 February 2011] [06:36:55] &lt;yrashk&gt;       mean throughput: 67086.58395785352 [msg/s]
| [Thursday 17 February 2011] [06:37:01] &lt;yrashk&gt;       this is Erlang local_thr
| [Thursday 17 February 2011] [06:37:39] &lt;yrashk&gt;       so partially it is the way erlzmq&#8217;s send works
| [Thursday 17 February 2011] [06:37:50] &lt;yrashk&gt;       sustrik: ^^
| [Thursday 17 February 2011] [06:38:13] &lt;sustrik&gt;      both are low
| [Thursday 17 February 2011] [06:38:16] &lt;yrashk&gt;       I guess no batching happening with erlzmq
| [Thursday 17 February 2011] [06:38:21] &lt;sustrik&gt;      so there&#8217;s some common problem
| [Thursday 17 February 2011] [06:38:23] &lt;yrashk&gt;       yes they are
| [Thursday 17 February 2011] [06:38:25] &lt;sustrik&gt;      both on send and recv side
| [Thursday 17 February 2011] [06:38:37] &lt;yrashk&gt;       but receiving got twice as fast
| [Thursday 17 February 2011] [06:38:42] &lt;sustrik&gt;      yup
| [Thursday 17 February 2011] [06:39:28] &lt;sustrik&gt;      however, don&#8217;t focus on that, the primary goal is to speed the whole beast ~50x
| [Thursday 17 February 2011] [06:39:47] &lt;yrashk&gt;       yeah 50x will be enough
| [Thursday 17 February 2011] [06:39:53] &lt;yrashk&gt;       that will be like about 1/2 of raw perf
| [Thursday 17 February 2011] [06:40:03] &lt;yrashk&gt;       which is acceptable
| [Thursday 17 February 2011] [06:40:04] &lt;sustrik&gt;      afterwards, you can check why recv is 2x faster
| [Thursday 17 February 2011] [06:40:12] &lt;sustrik&gt;      ack
| [Thursday 17 February 2011] [06:40:28] &lt;yrashk&gt;       well I am blaming erlzmq&#8217;s model (driver) now
| [Thursday 17 February 2011] [06:40:35] &lt;sustrik&gt;      quite possible
| [Thursday 17 February 2011] [06:40:38] &lt;yrashk&gt;       driver communication isn&#8217;t very fast as far as I understand
| [Thursday 17 February 2011] [06:40:45] &lt;yrashk&gt;       I can try converting this into a NIF
| [Thursday 17 February 2011] [06:40:51] &lt;sustrik&gt;      NIF?
| [Thursday 17 February 2011] [06:40:52] &lt;yrashk&gt;       which may or may not speed it up
| [Thursday 17 February 2011] [06:40:59] &lt;yrashk&gt;       Native Implemented Function
| [Thursday 17 February 2011] [06:41:03] &lt;yrashk&gt;       much less overhead
| [Thursday 17 February 2011] [06:41:23] &lt;yrashk&gt;       port communication sends data and parses it
| [Thursday 17 February 2011] [06:41:27] &lt;yrashk&gt;       which isn&#8217;t fast
| [Thursday 17 February 2011] [06:42:05] &lt;yrashk&gt;       the only problem is that until some time in future, NIFs are blocking their scheduler. There is a way around that, though &#8211; I wrote erlv8 so I know how to deal with tis
| [Thursday 17 February 2011] [06:42:08] &lt;yrashk&gt;       this*
| [Thursday 17 February 2011] [06:44:32] &lt;sustrik&gt;      i see
| [Thursday 17 February 2011] [06:44:56] &lt;yrashk&gt;       if only I had an unlimited supply of time
| [Thursday 17 February 2011] [06:45:12] &lt;yrashk&gt;       although I still may try to rewrite erlzmq
| [Thursday 17 February 2011] [06:45:22] &lt;yrashk&gt;       but that will be almost a complete rewrite
| [Thursday 17 February 2011] [06:45:23] &lt;yrashk&gt;       :-(
| [Thursday 17 February 2011] [06:46:55] &lt;yrashk&gt;       writing NIFs is not much fun, really
| [Thursday 17 February 2011] [06:47:06] &lt;yrashk&gt;       so are the drivers, though :)
| [Thursday 17 February 2011] [06:48:45] &lt;yrashk&gt;       sustrik: how does the batching work? is it time-based? like batch X messages within T?
| [Thursday 17 February 2011] [06:53:12] &lt;sustrik&gt;      it&#8217;s triggered by the network stack
| [Thursday 17 February 2011] [06:53:37] &lt;sustrik&gt;      so, when the network stack notifies the user space that there&#8217;s free space in tx buffer
| [Thursday 17 February 2011] [06:53:52] &lt;sustrik&gt;      0mq takes as much data as is available atm
| [Thursday 17 February 2011] [06:54:04] &lt;sustrik&gt;      and tries to push it into the kernel in a single go
| [Thursday 17 February 2011] [06:54:38] &lt;yrashk&gt;       I ee
| [Thursday 17 February 2011] [06:54:40] &lt;yrashk&gt;       I see
| [Thursday 17 February 2011] [06:54:49] &lt;yrashk&gt;       well at this point I&#8217;d really blame the port communication
| [Thursday 17 February 2011] [06:54:55] &lt;sustrik&gt;      well, maybe
| [Thursday 17 February 2011] [06:55:04] &lt;sustrik&gt;      if you haven&#8217;t time to play with it
| [Thursday 17 February 2011] [06:55:06] &lt;yrashk&gt;       it is an encode -&gt; pass -&gt; decode -&gt; work -&gt; encode -&gt; decode routine
| [Thursday 17 February 2011] [06:55:11] &lt;sustrik&gt;      at least write an email to the ML
| [Thursday 17 February 2011] [06:55:30] &lt;yrashk&gt;       it is an encode -&gt; pass -&gt; decode -&gt; work -&gt; encode -&gt; pass -&gt; decode routine *
| [Thursday 17 February 2011] [06:55:42] &lt;sustrik&gt;      doesn&#8217;t seem very efficient
| [Thursday 17 February 2011] [06:56:01] &lt;yrashk&gt;       those encodings/decodings aren&#8217;t super slow by themselves, probably, but still, everything adds up
| [Thursday 17 February 2011] [06:56:12] &lt;yrashk&gt;       NIFs work nearly directly with the data
| [Thursday 17 February 2011] [06:56:13] &lt;sustrik&gt;      ack
| [Thursday 17 February 2011] [06:56:25] &lt;sustrik&gt;      yes, that&#8217;s how other bindings are done
| [Thursday 17 February 2011] [06:56:37] &lt;sustrik&gt;      the problem with erlang is its threading model
| [Thursday 17 February 2011] [06:56:54] &lt;sustrik&gt;      afaiu blocking in NIF could get the whole VM to a standstill
| [Thursday 17 February 2011] [06:56:59] &lt;yrashk&gt;       yes
| [Thursday 17 February 2011] [06:57:05] &lt;yrashk&gt;       but there are two points:
| [Thursday 17 February 2011] [06:57:46] &lt;yrashk&gt;       1) this is going to change <a class="reference external" href="http://erlang-factory.com/conference/SFBay2011/speakers/RickardGreen">http://erlang-factory.com/conference/SFBay2011/speakers/RickardGreen</a>
| [Thursday 17 February 2011] [06:58:18] &lt;yrashk&gt;       2) there are some workarounds (basically, two-thread model). I used it in erlv8. Incidentially, I ended up using 0mq inside erlv8&#8217;s NIF
| [Thursday 17 February 2011] [06:58:33] &lt;sustrik&gt;      :)
| [Thursday 17 February 2011] [06:59:19] &lt;yrashk&gt;       I will be at that conference (I am a speaker there, too) so I will have a chance to attend that talk
| [Thursday 17 February 2011] [06:59:25] &lt;yrashk&gt;       (in pt. 1)
| [Thursday 17 February 2011] [06:59:35] &lt;sustrik&gt;      i see
| [Thursday 17 February 2011] [07:00:32] &lt;sustrik&gt;      are you from SF?
| [Thursday 17 February 2011] [07:00:38] &lt;yrashk&gt;       nope
| [Thursday 17 February 2011] [07:00:53] &lt;yrashk&gt;       <a class="reference external" href="http://erlang-factory.com/conference/SFBay2011/speakers/YuriiRashkovskii">http://erlang-factory.com/conference/SFBay2011/speakers/YuriiRashkovskii</a>
| [Thursday 17 February 2011] [07:00:55] &lt;yrashk&gt;       Vancouver, BC
| [Thursday 17 February 2011] [07:01:56] &lt;sustrik&gt;      aha, just that i&#8217;m visiting SF shortly
| [Thursday 17 February 2011] [07:02:20] &lt;yrashk&gt;       oh
| [Thursday 17 February 2011] [07:02:26] &lt;sustrik&gt;      but before the conference
| [Thursday 17 February 2011] [07:02:29] &lt;sustrik&gt;      no overlap there
| [Thursday 17 February 2011] [07:02:29] &lt;yrashk&gt;       too bad
| [Thursday 17 February 2011] [07:02:39] &lt;yrashk&gt;       I&#8217;d love to share a beer or something
| [Thursday 17 February 2011] [07:02:58] &lt;yrashk&gt;       open source developers don&#8217;t get much face-to-face time
| [Thursday 17 February 2011] [07:03:00] &lt;yrashk&gt;       and it&#8217;s bad
| [Thursday 17 February 2011] [07:03:27] &lt;<a href="#id2135"><span class="problematic" id="id2136">pieterh_</span></a>&gt;     yeah, 5,000 open source developers at FOSDEM earlier in Feb, here in Brussels
| [Thursday 17 February 2011] [07:03:45] &lt;yrashk&gt;       well I didn&#8217;t say they don&#8217;t get it at all
| [Thursday 17 February 2011] [07:03:48] &lt;yrashk&gt;       just not much
| [Thursday 17 February 2011] [07:03:49] &lt;yrashk&gt;       :D
| [Thursday 17 February 2011] [07:03:56] &lt;<a href="#id2137"><span class="problematic" id="id2138">pieterh_</span></a>&gt;     I mean, it&#8217;s only once a year
| [Thursday 17 February 2011] [07:04:04] &lt;yrashk&gt;       I see
| [Thursday 17 February 2011] [07:04:21] &lt;yrashk&gt;       it would be cool to have a rolling set of unconferences happening in every &#8220;hub&#8221; city
| [Thursday 17 February 2011] [07:04:28] &lt;yrashk&gt;       well, they do happen
| [Thursday 17 February 2011] [07:04:37] &lt;yrashk&gt;       but they are fairly limited
| [Thursday 17 February 2011] [07:05:05] &lt;<a href="#id2139"><span class="problematic" id="id2140">pieterh_</span></a>&gt;     sustrik: why not do a 0MQ meetup while you&#8217;re there...
| [Thursday 17 February 2011] [07:06:08] &lt;sustrik&gt;      yes, i&#8217;ll do that
| [Thursday 17 February 2011] [07:06:16] &lt;yrashk&gt;       record some video! :)
| [Thursday 17 February 2011] [07:06:30] &lt;yrashk&gt;       if there are going to be any presentations
| [Thursday 17 February 2011] [07:06:40] &lt;sustrik&gt;      nope, just people drinking beer :)
| [Thursday 17 February 2011] [07:06:45] &lt;yrashk&gt;       sigh
| [Thursday 17 February 2011] [07:06:46] &lt;yrashk&gt;       :]
| [Thursday 17 February 2011] [07:07:00] &lt;<a href="#id2141"><span class="problematic" id="id2142">pieterh_</span></a>&gt;     yrashk, there&#8217;s a video of me (I think) praising Erlang at FOSDEM
| [Thursday 17 February 2011] [07:07:25] &lt;<a href="#id2143"><span class="problematic" id="id2144">pieterh_</span></a>&gt;     that&#8217;s &#8220;praising Erlang, I think&#8221; not &#8220;a video of me, I think&#8221;...
| [Thursday 17 February 2011] [07:07:26] &lt;yrashk&gt;       <a href="#id2145"><span class="problematic" id="id2146">pieterh_</span></a>: &#8220;of me (I think)&#8221;
| [Thursday 17 February 2011] [07:07:29] &lt;yrashk&gt;       were you drunk? :)
| [Thursday 17 February 2011] [07:07:34] &lt;<a href="#id2147"><span class="problematic" id="id2148">pieterh_</span></a>&gt;     one is never totally sure
| [Thursday 17 February 2011] [07:07:51] &lt;<a href="#id2149"><span class="problematic" id="id2150">pieterh_</span></a>&gt;     FOSDEM is fairly beer intensive
| [Thursday 17 February 2011] [07:08:02] &lt;yrashk&gt;       that comes withour saying
| [Thursday 17 February 2011] [07:08:24] &lt;yrashk&gt;       although I&#8217;ve never been to one
| [Thursday 17 February 2011] [07:08:31] &lt;yrashk&gt;       but just about any dev meetup implies beer
| [Thursday 17 February 2011] [07:08:52] &lt;<a href="#id2151"><span class="problematic" id="id2152">pieterh_</span></a>&gt;     yeah, but in Belgium that implies &#8220;how strong can we get the beer, and how cheaply can we sell it&#8221;
| [Thursday 17 February 2011] [07:08:54] &lt;yrashk&gt;       too bad I am a little sensitive to alcohol since like 2005 so I don&#8217;t drink much
| [Thursday 17 February 2011] [07:09:01] &lt;<a href="#id2153"><span class="problematic" id="id2154">pieterh_</span></a>&gt;     me too, sadly
| [Thursday 17 February 2011] [07:09:28] &lt;yrashk&gt;       esp beer :-(
| [Thursday 17 February 2011] [07:09:35] &lt;yrashk&gt;       weak stomach
| [Thursday 17 February 2011] [07:09:38] &lt;<a href="#id2155"><span class="problematic" id="id2156">pieterh_</span></a>&gt;     anyhow fwiw the video is here:     //  If the session already has an engine attached, destroy new one.
| [Thursday 17 February 2011] [07:09:38] &lt;<a href="#id2157"><span class="problematic" id="id2158">pieterh_</span></a>&gt;         //  Note new engine is not plugged in yet, we don&#8217;t have to unplug it.
| [Thursday 17 February 2011] [07:09:38] &lt;<a href="#id2159"><span class="problematic" id="id2160">pieterh_</span></a>&gt;         if (engine) {
| [Thursday 17 February 2011] [07:09:38] &lt;<a href="#id2161"><span class="problematic" id="id2162">pieterh_</span></a>&gt;             delete <a href="#id2163"><span class="problematic" id="id2164">engine_</span></a>;
| [Thursday 17 February 2011] [07:09:39] &lt;<a href="#id2165"><span class="problematic" id="id2166">pieterh_</span></a>&gt;             puts (&#8220;HEY!&#8221;);
| [Thursday 17 February 2011] [07:09:41] &lt;<a href="#id2167"><span class="problematic" id="id2168">pieterh_</span></a>&gt;             return;
| [Thursday 17 February 2011] [07:09:43] &lt;<a href="#id2169"><span class="problematic" id="id2170">pieterh_</span></a>&gt;         }
| [Thursday 17 February 2011] [07:09:45] &lt;yrashk&gt;       that&#8217;s not the video
| [Thursday 17 February 2011] [07:09:45] &lt;yrashk&gt;       :D
| [Thursday 17 February 2011] [07:09:48] &lt;<a href="#id2171"><span class="problematic" id="id2172">pieterh_</span></a>&gt;     aw, wrong paste
| [Thursday 17 February 2011] [07:10:15] &lt;<a href="#id2173"><span class="problematic" id="id2174">pieterh_</span></a>&gt;     <a class="reference external" href="http://www.youtube.com/watch?v=CCBYzKfmQ4U">http://www.youtube.com/watch?v=CCBYzKfmQ4U</a>
| [Thursday 17 February 2011] [07:11:23] &lt;yrashk&gt;       nice accent
| [Thursday 17 February 2011] [07:15:41] &lt;<a href="#id2175"><span class="problematic" id="id2176">pieterh_</span></a>&gt;     What&#8217;s erlv8? I couldn&#8217;t find that on google
| [Thursday 17 February 2011] [07:15:51] &lt;yrashk&gt;       part of <a class="reference external" href="http://beamjs.org/">http://beamjs.org/</a>
| [Thursday 17 February 2011] [07:16:01] &lt;yrashk&gt;       tightly integrated V8 for Erlang
| [Thursday 17 February 2011] [07:16:28] &lt;yrashk&gt;       heeey
| [Thursday 17 February 2011] [07:16:33] &lt;yrashk&gt;       Erlang is not a &#8220;weird language&#8221;
| [Thursday 17 February 2011] [07:16:34] &lt;yrashk&gt;       ;)
| [Thursday 17 February 2011] [07:17:45] &lt;<a href="#id2177"><span class="problematic" id="id2178">pieterh_</span></a>&gt;     Well, it&#8217;s sooo relative ... :-)
| [Thursday 17 February 2011] [07:17:53] &lt;yrashk&gt;       it&#8217;s not weird for me
| [Thursday 17 February 2011] [07:17:54] &lt;yrashk&gt;       :D
| [Thursday 17 February 2011] [07:18:08] &lt;yrashk&gt;       sayign language is weird is not exactly &#8220;praising&#8221; :-P
| [Thursday 17 February 2011] [07:18:09] &lt;yrashk&gt;       ;)
| [Thursday 17 February 2011] [07:18:18] &lt;<a href="#id2179"><span class="problematic" id="id2180">pieterh_</span></a>&gt;     that&#8217;s what my crazy uncle says when he eats raw spinach
| [Thursday 17 February 2011] [07:19:35] &lt;kristsk&gt;      why is he eating it raw?
| [Thursday 17 February 2011] [07:20:01] &lt;<a href="#id2181"><span class="problematic" id="id2182">pieterh_</span></a>&gt;     no-one knows, that&#8217;s why we say he&#8217;s weird, but he says &#8220;it&#8217;s not weird for me&#8221;
| [Thursday 17 February 2011] [07:20:14] &lt;<a href="#id2183"><span class="problematic" id="id2184">pieterh_</span></a>&gt;     I think &#8216;weird&#8217; is high praise compared to &#8216;boring&#8217;, &#8216;irrelevant&#8217;, or &#8216;ok&#8217;
| [Thursday 17 February 2011] [07:20:23] &lt;<a href="#id2185"><span class="problematic" id="id2186">pieterh_</span></a>&gt;     people do speak highly of Erlang once they learn it
| [Thursday 17 February 2011] [07:20:33] &lt;<a href="#id2187"><span class="problematic" id="id2188">pieterh_</span></a>&gt;     I&#8217;m too lazy and happily ignorant to make that effort
| [Thursday 17 February 2011] [07:20:39] &lt;<a href="#id2189"><span class="problematic" id="id2190">pieterh_</span></a>&gt;     calling it &#8216;weird&#8217; is much easier
| [Thursday 17 February 2011] [07:20:40] &lt;kristsk&gt;      same goes for lisp
| [Thursday 17 February 2011] [07:20:43] &lt;yrashk&gt;       ;)
| [Thursday 17 February 2011] [07:20:52] &lt;yrashk&gt;       Erlang is actually a fantastic platform
| [Thursday 17 February 2011] [07:20:58] &lt;yrashk&gt;       I&#8217;ve used it stating in 2001
| [Thursday 17 February 2011] [07:21:04] &lt;yrashk&gt;       and I am always returning to it
| [Thursday 17 February 2011] [07:21:08] &lt;yrashk&gt;       from other platforms
| [Thursday 17 February 2011] [07:21:18] &lt;kristsk&gt;      addiction eh
| [Thursday 17 February 2011] [07:21:28] &lt;<a href="#id2191"><span class="problematic" id="id2192">pieterh_</span></a>&gt;     it does seem to produce pretty good applications
| [Thursday 17 February 2011] [07:21:40] &lt;<a href="#id2193"><span class="problematic" id="id2194">pieterh_</span></a>&gt;     lots of return on your development investment
| [Thursday 17 February 2011] [07:21:59] &lt;<a href="#id2195"><span class="problematic" id="id2196">pieterh_</span></a>&gt;     but still...
| [Thursday 17 February 2011] [07:22:04] &lt;yrashk&gt;       it might be not very fast, but you know, only 20% of code impacts for 80% of slowdown
| [Thursday 17 February 2011] [07:22:07] &lt;<a href="#id2197"><span class="problematic" id="id2198">pieterh_</span></a>&gt;     ... weird :)
| [Thursday 17 February 2011] [07:22:14] &lt;yrashk&gt;       so you can rewrite bottlenecks even in C
| [Thursday 17 February 2011] [07:22:23] &lt;<a href="#id2199"><span class="problematic" id="id2200">pieterh_</span></a>&gt;     just trolling, yrashk :)
| [Thursday 17 February 2011] [07:22:27] &lt;yrashk&gt;       and it&#8217;s really to write some complicated stuff with it
| [Thursday 17 February 2011] [07:22:36] &lt;yrashk&gt;       ikr
| [Thursday 17 February 2011] [07:22:48] &lt;<a href="#id2201"><span class="problematic" id="id2202">pieterh_</span></a>&gt;     I don&#8217;t trust any language that&#8217;s not been properly dead for 10 years
| [Thursday 17 February 2011] [07:22:54] &lt;kristsk&gt;      im kinda looking for some pet project to try erlang
| [Thursday 17 February 2011] [07:23:00] &lt;yrashk&gt;       see, I&#8217;ve been with erlang for 10 years and i still have hair ;)
| [Thursday 17 February 2011] [07:23:09] &lt;<a href="#id2203"><span class="problematic" id="id2204">pieterh_</span></a>&gt;     true
| [Thursday 17 February 2011] [07:23:24] &lt;<a href="#id2205"><span class="problematic" id="id2206">pieterh_</span></a>&gt;     did it grow faster after you learned Erlang, that&#8217;s my question
| [Thursday 17 February 2011] [07:23:26] &lt;yrashk&gt;       kristsk: help porting socket.io server to erlang
| [Thursday 17 February 2011] [07:23:31] &lt;yrashk&gt;       <a href="#id2207"><span class="problematic" id="id2208">pieterh_</span></a>: of coure it did!
| [Thursday 17 February 2011] [07:23:34] &lt;yrashk&gt;       course*
| [Thursday 17 February 2011] [07:23:46] &lt;yrashk&gt;       kristsk: <a class="reference external" href="https://github.com/yrashk/socket.io-erlang">https://github.com/yrashk/socket.io-erlang</a>
| [Thursday 17 February 2011] [07:23:57] &lt;kristsk&gt;      huh
| [Thursday 17 February 2011] [07:24:02] &lt;yrashk&gt;       I&#8217;ve barely started it but then again I don&#8217;t have much time and my attention span is limited
| [Thursday 17 February 2011] [07:24:21] &lt;yrashk&gt;       erlang is like the best platform for socket.io
| [Thursday 17 February 2011] [07:24:24] &lt;kristsk&gt;      about same here
| [Thursday 17 February 2011] [07:24:32] &lt;kristsk&gt;      regarding attention span
| [Thursday 17 February 2011] [07:24:36] &lt;yrashk&gt;       :D
| [Thursday 17 February 2011] [07:24:41] &lt;yrashk&gt;       yet i manage to create something
| [Thursday 17 February 2011] [07:24:51] &lt;yrashk&gt;       this winter accounts for erlv8/beamjs and agner
| [Thursday 17 February 2011] [07:24:57] &lt;yrashk&gt;       not too much but at least something
| [Thursday 17 February 2011] [07:25:20] &lt;kristsk&gt;      &#8220;dear lord, what the heck is this? did i write this?&#8221;
| [Thursday 17 February 2011] [07:25:29] &lt;yrashk&gt;       hahaha
| [Thursday 17 February 2011] [07:25:37] &lt;yrashk&gt;       I experience this like almost every day
| [Thursday 17 February 2011] [07:27:40] &lt;yrashk&gt;       or at least every other day
| [Thursday 17 February 2011] [08:17:57] &lt;xet&gt;  hi
| [Thursday 17 February 2011] [08:22:14] &lt;sustrik&gt;      hi
| [Thursday 17 February 2011] [08:22:19] &lt;CIA-21&gt;       zeromq2: 03Martin Sustrik 07master * r1f536b2 10/ src/zmq_listener.cpp :
| [Thursday 17 February 2011] [08:22:19] &lt;CIA-21&gt;       zeromq2: Init object is child of listener
| [Thursday 17 February 2011] [08:22:19] &lt;CIA-21&gt;       zeromq2: This means that all the handshaking while accepting incoming
| [Thursday 17 February 2011] [08:22:19] &lt;CIA-21&gt;       zeromq2: connection is done exclusively in I/O threads, thus it won&#8217;t
| [Thursday 17 February 2011] [08:22:19] &lt;CIA-21&gt;       zeromq2: overload the application thread&#8217;s mailbox.
| [Thursday 17 February 2011] [08:22:19] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/i0AFxk">http://bit.ly/i0AFxk</a>
| [Thursday 17 February 2011] [08:23:35] &lt;xet&gt;  any1 knows of a good realtime plotting lib to use with a zmq tcp socket?
| [Thursday 17 February 2011] [08:23:59] &lt;xet&gt;  realtime data stream i mean
| [Thursday 17 February 2011] [08:26:21] &lt;sustrik&gt;      no idea
| [Thursday 17 February 2011] [08:33:03] &lt;yrashk&gt;       so ok it looks like I am writing a new erlang binding
| [Thursday 17 February 2011] [08:33:04] &lt;yrashk&gt;       :-O
| [Thursday 17 February 2011] [08:33:18] &lt;yrashk&gt;       <em>facepalm</em>
| [Thursday 17 February 2011] [08:35:17] &lt;<a href="#id2209"><span class="problematic" id="id2210">pieterh_</span></a>&gt;     yrashk, that&#8217;ll make 3... :-)
| [Thursday 17 February 2011] [08:35:46] &lt;yrashk&gt;       :D
| [Thursday 17 February 2011] [08:35:50] &lt;<a href="#id2211"><span class="problematic" id="id2212">pieterh_</span></a>&gt;     cremes: you around?
| [Thursday 17 February 2011] [08:43:21] &lt;yrashk&gt;       sustrik, <a href="#id2213"><span class="problematic" id="id2214">pieterh_</span></a> I am trying to recall, is it safe to call zmq_msg_close after sending a message?
| [Thursday 17 February 2011] [08:43:43] &lt;yrashk&gt;       or should I better setup an ffn?
| [Thursday 17 February 2011] [08:44:14] &lt;yrashk&gt;       umm
| [Thursday 17 February 2011] [08:44:28] &lt;yrashk&gt;       I think I can do without this at all, I&#8217;ll let erlang deal with deallocation
| [Thursday 17 February 2011] [08:44:36] &lt;yrashk&gt;       it&#8217;s probably error prone tho
| [Thursday 17 February 2011] [08:45:05] &lt;sustrik&gt;      yrashk: it&#8217;s safe
| [Thursday 17 February 2011] [08:45:14] &lt;<a href="#id2215"><span class="problematic" id="id2216">pieterh_</span></a>&gt;     yrashk, yes
| [Thursday 17 February 2011] [08:45:19] &lt;sustrik&gt;      unless you use zmq_init_data()
| [Thursday 17 February 2011] [08:45:50] &lt;sustrik&gt;      in which case 0mq will take ownerwhip and deallocate the buffer you pass to it
| [Thursday 17 February 2011] [08:45:55] &lt;<a href="#id2217"><span class="problematic" id="id2218">pieterh_</span></a>&gt;     which I&#8217;d propose to rename to zmq_init_data_are_you_really_sure ()
| [Thursday 17 February 2011] [08:46:16] &lt;sustrik&gt;      is should be zmq_sendmsg
| [Thursday 17 February 2011] [08:46:33] &lt;sustrik&gt;      and zmq_send should be zmq_send(void <em>data, size_t size, int flags);
| [Thursday 17 February 2011] [08:46:35] &lt;pieterh_&gt;     there should be zmq_send (blob) (implied copy)
| [Thursday 17 February 2011] [08:46:46] &lt;pieterh_&gt;     and zmq_sendz (message)
| [Thursday 17 February 2011] [08:46:48] &lt;yrashk&gt;       so should I do zmq_msg_init_size and then refer to a structure that is handled by erlang gc?
| [Thursday 17 February 2011] [08:46:57] &lt;yrashk&gt;       or init_size, then copy that binary
| [Thursday 17 February 2011] [08:47:09] &lt;yrashk&gt;       well, then I a need an ffn
| [Thursday 17 February 2011] [08:47:09] &lt;pieterh_&gt;     yrashk, you need to copy, IMO
| [Thursday 17 February 2011] [08:47:19] &lt;yrashk&gt;       then init_data
| [Thursday 17 February 2011] [08:47:30] &lt;sustrik&gt;      yrashk: forget about zero copy for now
| [Thursday 17 February 2011] [08:47:36] &lt;pieterh_&gt;     unless you can guarantee that Erlang won&#8217;t free the data before zmq sends it
| [Thursday 17 February 2011] [08:47:39] &lt;sustrik&gt;      you can add it later if possible
| [Thursday 17 February 2011] [08:47:44] &lt;yrashk&gt;       I can&#8217;t guarantee that
| [Thursday 17 February 2011] [08:47:51] &lt;yrashk&gt;       so when should I close that message?
| [Thursday 17 February 2011] [08:47:51] &lt;pieterh_&gt;     then just copy
| [Thursday 17 February 2011] [08:47:56] &lt;pieterh_&gt;     after sending
| [Thursday 17 February 2011] [08:48:01] &lt;yrashk&gt;       in case if I use init_data, too?
| [Thursday 17 February 2011] [08:48:14] &lt;pieterh_&gt;     zmq_msg_init_size, memcpy, zmq_send, zmq_msg_close
| [Thursday 17 February 2011] [08:48:19] &lt;pieterh_&gt;     do not use init_data
| [Thursday 17 February 2011] [08:48:41] &lt;pieterh_&gt;     sustrik: this has to be explained more forcefully IMO
| [Thursday 17 February 2011] [08:49:01] &lt;yrashk&gt;       ok
| [Thursday 17 February 2011] [08:49:07] &lt;sustrik&gt;      yes, but API change is even more importatnt
| [Thursday 17 February 2011] [08:49:15] &lt;sustrik&gt;      unfortunately it can&#8217;t be done till 3.0
| [Thursday 17 February 2011] [08:49:18] &lt;pieterh_&gt;     idea: can we make the init method name match the send method?
| [Thursday 17 February 2011] [08:49:27] &lt;sustrik&gt;      ?
| [Thursday 17 February 2011] [08:49:28] &lt;pieterh_&gt;     so zmq_msg_init_zcopy and zmq_send_zcopy?
| [Thursday 17 February 2011] [08:49:38] &lt;sustrik&gt;      why so?
| [Thursday 17 February 2011] [08:49:52] &lt;pieterh_&gt;     they are always used together, no?
| [Thursday 17 February 2011] [08:50:03] &lt;sustrik&gt;      there&#8217;s only one send method
| [Thursday 17 February 2011] [08:50:09] &lt;pieterh_&gt;     today, yes
| [Thursday 17 February 2011] [08:50:19] &lt;pieterh_&gt;     oh... sorry... forget it
| [Thursday 17 February 2011] [08:50:27] &lt;sustrik&gt;      i would copy POSIX as close as possible
| [Thursday 17 February 2011] [08:50:30] &lt;pieterh_&gt;     brainfart
| [Thursday 17 February 2011] [08:50:51] &lt;pieterh_&gt;     anyhow, init_data is deceptively named IMO
| [Thursday 17 February 2011] [08:51:01] &lt;yrashk&gt;       will no zero copy seriously degrage perf?
| [Thursday 17 February 2011] [08:51:16] &lt;sustrik&gt;      only for very large messages
| [Thursday 17 February 2011] [08:51:16] &lt;pieterh_&gt;     it looks like a normal sibling of init_size when in fact it&#8217;s a weird spinach eating cousin
| [Thursday 17 February 2011] [08:51:22] &lt;sustrik&gt;      like 256MB or so
| [Thursday 17 February 2011] [08:51:32] &lt;yrashk&gt;       ok
| [Thursday 17 February 2011] [08:51:43] &lt;sustrik&gt;      pieterh_: yes, agreed, but we can&#8217;t change it till 3.0
| [Thursday 17 February 2011] [08:51:43] &lt;yrashk&gt;       likely, seriously degrade?
| [Thursday 17 February 2011] [08:51:45] &lt;sustrik&gt;      shrug
| [Thursday 17 February 2011] [08:51:45] &lt;yrashk&gt;       like</em>
| [Thursday 17 February 2011] [08:51:55] &lt;<a href="#id2219"><span class="problematic" id="id2220">pieterh_</span></a>&gt;     sustrik, np, can I add that to the roadmap page?
| [Thursday 17 February 2011] [08:52:08] &lt;sustrik&gt;      it&#8217;s there
| [Thursday 17 February 2011] [08:52:10] &lt;<a href="#id2221"><span class="problematic" id="id2222">pieterh_</span></a>&gt;     yrashk, for large messages, you will see a visible difference...
| [Thursday 17 February 2011] [08:52:52] &lt;sustrik&gt;      yrashk: <a class="reference external" href="http://www.zeromq.org/results:copying">http://www.zeromq.org/results:copying</a>
| [Thursday 17 February 2011] [08:56:27] &lt;<a href="#id2223"><span class="problematic" id="id2224">pieterh_</span></a>&gt;     sustrik, it wasn&#8217;t there but I&#8217;ve added it and made a few other updates
| [Thursday 17 February 2011] [08:57:09] &lt;<a href="#id2225"><span class="problematic" id="id2226">pieterh_</span></a>&gt;     3.0 is going to be fun... :-)
| [Thursday 17 February 2011] [08:57:21] &lt;<a href="#id2227"><span class="problematic" id="id2228">pieterh_</span></a>&gt;     We&#8217;re like MSFT, we get it right by version 3...
| [Thursday 17 February 2011] [08:58:41] &lt;sustrik&gt;      thanks
| [Thursday 17 February 2011] [08:58:58] &lt;sustrik&gt;      it&#8217;s not obvious how to do the switch though
| [Thursday 17 February 2011] [08:59:04] &lt;sustrik&gt;      it&#8217;s going to be painful
| [Thursday 17 February 2011] [09:00:08] &lt;<a href="#id2229"><span class="problematic" id="id2230">pieterh_</span></a>&gt;     90% of people work via bindings
| [Thursday 17 February 2011] [09:00:27] &lt;<a href="#id2231"><span class="problematic" id="id2232">pieterh_</span></a>&gt;     and bindings can handle both APIs, quite simply IMO
| [Thursday 17 February 2011] [09:01:27] &lt;<a href="#id2233"><span class="problematic" id="id2234">pieterh_</span></a>&gt;     that made more sense before I wrote it :-(
| [Thursday 17 February 2011] [09:04:03] &lt;sustrik&gt;      :)
| [Thursday 17 February 2011] [09:08:01] &lt;yrashk&gt;       debugging FFIs i fun
| [Thursday 17 February 2011] [09:08:03] &lt;yrashk&gt;       is*
| [Thursday 17 February 2011] [09:08:03] &lt;yrashk&gt;       Socket operation on non-socket
| [Thursday 17 February 2011] [09:08:04] &lt;yrashk&gt;       :D
| [Thursday 17 February 2011] [09:08:34] &lt;sustrik&gt;      what&#8217;s needed imo is transitory period
| [Thursday 17 February 2011] [09:08:45] &lt;sustrik&gt;      when both APIs would be available
| [Thursday 17 February 2011] [09:09:32] &lt;sustrik&gt;      presumably, with 2.0 API being a lightweight wrapper over 3.0 like internals
| [Thursday 17 February 2011] [09:10:59] &lt;yrashk&gt;       hmm errno 156384765
| [Thursday 17 February 2011] [09:11:00] &lt;yrashk&gt;       :d
| [Thursday 17 February 2011] [09:11:08] &lt;sustrik&gt;      see zmq.h
| [Thursday 17 February 2011] [09:11:18] &lt;yrashk&gt;       trying
| [Thursday 17 February 2011] [09:11:37] &lt;sustrik&gt;      ETERM
| [Thursday 17 February 2011] [09:11:55] &lt;sustrik&gt;      that means the context was already closed
| [Thursday 17 February 2011] [09:12:03] &lt;yrashk&gt;       ETERM
| [Thursday 17 February 2011] [09:12:04] &lt;yrashk&gt;       ya
| [Thursday 17 February 2011] [09:15:31] &lt;sustrik&gt;      mikko: are you here by chance
| [Thursday 17 February 2011] [09:15:36] &lt;sustrik&gt;      ?
| [Thursday 17 February 2011] [09:15:38] &lt;mikko&gt;        yes
| [Thursday 17 February 2011] [09:16:07] &lt;sustrik&gt;      are there any changes needed to the build system in case the names of exported symbols change?
| [Thursday 17 February 2011] [09:16:24] &lt;mikko&gt;        shouldn&#8217;t be
| [Thursday 17 February 2011] [09:16:37] &lt;sustrik&gt;      the visibility thing?
| [Thursday 17 February 2011] [09:16:43] &lt;mikko&gt;        thats per symbol
| [Thursday 17 February 2011] [09:16:48] &lt;mikko&gt;        take a look at zmq.h
| [Thursday 17 February 2011] [09:17:00] &lt;sustrik&gt;      ZMQ_EXPORT, right?
| [Thursday 17 February 2011] [09:17:07] &lt;mikko&gt;        yes
| [Thursday 17 February 2011] [09:17:17] &lt;sustrik&gt;      mikko: thanks
| [Thursday 17 February 2011] [09:17:23] &lt;mikko&gt;        are you looking to support two apis in one lib?
| [Thursday 17 February 2011] [09:17:32] &lt;sustrik&gt;      yep
| [Thursday 17 February 2011] [09:17:43] &lt;mikko&gt;        hmm
| [Thursday 17 February 2011] [09:17:52] &lt;sustrik&gt;      still the option of exporting _zmq_init etc. seems most viable
| [Thursday 17 February 2011] [09:18:08] &lt;mikko&gt;        why do you need to support two versions in one library?
| [Thursday 17 February 2011] [09:18:09] &lt;sustrik&gt;      and supplying simple zmq_init etc. wrappers in the header file
| [Thursday 17 February 2011] [09:18:34] &lt;sustrik&gt;      otherwise the migration to 3.0 API would have to be done in one go
| [Thursday 17 February 2011] [09:18:55] &lt;sustrik&gt;      which is almost impossible, given all the bindings etc.
| [Thursday 17 February 2011] [09:19:50] &lt;yrashk&gt;       heh
| [Thursday 17 February 2011] [09:19:52] &lt;yrashk&gt;       almost there!
| [Thursday 17 February 2011] [09:20:29] &lt;mikko&gt;        i dont know why but i have some doubts about the approach
| [Thursday 17 February 2011] [09:20:47] &lt;mikko&gt;        it sounds complex
| [Thursday 17 February 2011] [09:21:09] &lt;sustrik&gt;      any better idea?
| [Thursday 17 February 2011] [09:21:23] &lt;yrashk&gt;       ok
| [Thursday 17 February 2011] [09:21:24] &lt;yrashk&gt;       works
| [Thursday 17 February 2011] [09:21:27] &lt;yrashk&gt;       :]
| [Thursday 17 February 2011] [09:21:29] &lt;yrashk&gt;       that was fast
| [Thursday 17 February 2011] [09:21:31] &lt;sustrik&gt;      new binding?
| [Thursday 17 February 2011] [09:21:34] &lt;yrashk&gt;       yep
| [Thursday 17 February 2011] [09:21:42] &lt;<a href="#id2235"><span class="problematic" id="id2236">pieterh_</span></a>&gt;     sustrik, transitional API sounds a good idea, it can be an optional header you include
| [Thursday 17 February 2011] [09:21:50] &lt;sustrik&gt;      your keyboard must have caught fire in the process :)
| [Thursday 17 February 2011] [09:21:53] &lt;yrashk&gt;       currently with block receive but I am going to solve this by using 2nd thread and 0mq inproc
| [Thursday 17 February 2011] [09:21:59] &lt;yrashk&gt;       sustrik: no, my kbd is cool
| [Thursday 17 February 2011] [09:22:05] &lt;<a href="#id2237"><span class="problematic" id="id2238">pieterh_</span></a>&gt;     i think that&#8217;s the a world record for a new binding
| [Thursday 17 February 2011] [09:22:31] &lt;yrashk&gt;       it&#8217;s an incomplete binding
| [Thursday 17 February 2011] [09:22:35] &lt;yrashk&gt;       sockopts are not there yet
| [Thursday 17 February 2011] [09:22:45] &lt;yrashk&gt;       and non-blocking receive is not there yet, too
| [Thursday 17 February 2011] [09:22:47] &lt;yrashk&gt;       <a class="reference external" href="https://gist.github.com/6e203bc2aeb410b36532">https://gist.github.com/6e203bc2aeb410b36532</a>
| [Thursday 17 February 2011] [09:23:08] &lt;sustrik&gt;      still:
| [Thursday 17 February 2011] [09:23:09] &lt;sustrik&gt;      &lt;yrashk&gt; so ok it looks like I am writing a new erlang binding
| [Thursday 17 February 2011] [09:23:35] &lt;sustrik&gt;      at 14:33
| [Thursday 17 February 2011] [09:23:43] &lt;sustrik&gt;      15:21: works
| [Thursday 17 February 2011] [09:23:44] &lt;<a href="#id2239"><span class="problematic" id="id2240">pieterh_</span></a>&gt;     under 1 hour...
| [Thursday 17 February 2011] [09:24:08] &lt;sustrik&gt;      :)
| [Thursday 17 February 2011] [09:24:35] &lt;sustrik&gt;      <a href="#id2241"><span class="problematic" id="id2242">pieterh_</span></a>: the API shift is doable even now
| [Thursday 17 February 2011] [09:24:39] &lt;<a href="#id2243"><span class="problematic" id="id2244">pieterh_</span></a>&gt;     yup
| [Thursday 17 February 2011] [09:24:45] &lt;<a href="#id2245"><span class="problematic" id="id2246">pieterh_</span></a>&gt;     it can be done with macros in zmq.h
| [Thursday 17 February 2011] [09:24:51] &lt;sustrik&gt;      but maybe forking the stable should be done first
| [Thursday 17 February 2011] [09:24:57] &lt;mikko&gt;        sustrik: i guess not
| [Thursday 17 February 2011] [09:25:10] &lt;<a href="#id2247"><span class="problematic" id="id2248">pieterh_</span></a>&gt;     yes, no new features before we fork...
| [Thursday 17 February 2011] [09:25:16] &lt;sustrik&gt;      ack
| [Thursday 17 February 2011] [09:25:44] &lt;mikko&gt;        when is master going to be open for radical changes?
| [Thursday 17 February 2011] [09:25:54] &lt;yrashk&gt;       sustrik: <a class="reference external" href="https://github.com/yrashk/ezmq">https://github.com/yrashk/ezmq</a>
| [Thursday 17 February 2011] [09:25:58] &lt;<a href="#id2249"><span class="problematic" id="id2250">pieterh_</span></a>&gt;     mikko: are you in a hurry?
| [Thursday 17 February 2011] [09:26:15] &lt;mikko&gt;        <a href="#id2251"><span class="problematic" id="id2252">pieterh_</span></a>: no
| [Thursday 17 February 2011] [09:26:22] &lt;sustrik&gt;      yrashk: nice
| [Thursday 17 February 2011] [09:26:25] &lt;sustrik&gt;      any perf results?
| [Thursday 17 February 2011] [09:26:44] &lt;<a href="#id2253"><span class="problematic" id="id2254">pieterh_</span></a>&gt;     easymq, hehe
| [Thursday 17 February 2011] [09:26:48] &lt;mikko&gt;        this is the openpgm autotools build change
| [Thursday 17 February 2011] [09:27:01] &lt;mikko&gt;        which also includes update from openpgm 5.0.x to 5.1.x
| [Thursday 17 February 2011] [09:27:16] &lt;<a href="#id2255"><span class="problematic" id="id2256">pieterh_</span></a>&gt;     mikko: that does not risk introducing bugs IMO
| [Thursday 17 February 2011] [09:27:25] &lt;<a href="#id2257"><span class="problematic" id="id2258">pieterh_</span></a>&gt;     i&#8217;d get that into the master asap
| [Thursday 17 February 2011] [09:27:48] &lt;mikko&gt;        well, openpgm update is potentially risky (?)
| [Thursday 17 February 2011] [09:28:35] &lt;<a href="#id2259"><span class="problematic" id="id2260">pieterh_</span></a>&gt;     hmm, we didn&#8217;t see any real issues with switch from openpgm2.x to 5.0.x...
| [Thursday 17 February 2011] [09:28:37] &lt;<a href="#id2261"><span class="problematic" id="id2262">pieterh_</span></a>&gt;     afair
| [Thursday 17 February 2011] [09:29:08] &lt;<a href="#id2263"><span class="problematic" id="id2264">pieterh_</span></a>&gt;     if you don&#8217;t get that into master before we clone it, it&#8217;ll be for 2.2 only
| [Thursday 17 February 2011] [09:29:12] &lt;<a href="#id2265"><span class="problematic" id="id2266">pieterh_</span></a>&gt;     as you like
| [Thursday 17 February 2011] [09:29:31] &lt;mikko&gt;        ok
| [Thursday 17 February 2011] [09:29:36] &lt;sustrik&gt;      <a href="#id2267"><span class="problematic" id="id2268">pieterh_</span></a>: btw, are you not going to fork from a historic version?
| [Thursday 17 February 2011] [09:29:38] &lt;mikko&gt;        i&#8217;ll have to check with steve-p
| [Thursday 17 February 2011] [09:29:41] &lt;mikko&gt;        steve-o
| [Thursday 17 February 2011] [09:29:53] &lt;sustrik&gt;      my feeling was that you want to fork pre-XPUB/XSUB version
| [Thursday 17 February 2011] [09:30:00] &lt;<a href="#id2269"><span class="problematic" id="id2270">pieterh_</span></a>&gt;     sustrik, nope, my plan is to fork head and then make releases as we collect fixes to it
| [Thursday 17 February 2011] [09:30:07] &lt;sustrik&gt;      ok
| [Thursday 17 February 2011] [09:30:23] &lt;<a href="#id2271"><span class="problematic" id="id2272">pieterh_</span></a>&gt;     we can disable XPUB/XSUB if needed (just the definitions, not the internals)
| [Thursday 17 February 2011] [09:30:48] &lt;<a href="#id2273"><span class="problematic" id="id2274">pieterh_</span></a>&gt;     that&#8217;s a 2.2 feature, I guess
| [Thursday 17 February 2011] [09:31:00] &lt;sustrik&gt;      it&#8217;s just a placeholder atm
| [Thursday 17 February 2011] [09:31:30] &lt;<a href="#id2275"><span class="problematic" id="id2276">pieterh_</span></a>&gt;     I&#8217;ve seen that
| [Thursday 17 February 2011] [09:31:43] &lt;<a href="#id2277"><span class="problematic" id="id2278">pieterh_</span></a>&gt;     so how do I get stuff off sys://log
| [Thursday 17 February 2011] [09:31:52] &lt;<a href="#id2279"><span class="problematic" id="id2280">pieterh_</span></a>&gt;     connect a SUB socket to it?
| [Thursday 17 February 2011] [09:31:55] &lt;sustrik&gt;      yes
| [Thursday 17 February 2011] [09:32:01] &lt;<a href="#id2281"><span class="problematic" id="id2282">pieterh_</span></a>&gt;     ok, trying that now...
| [Thursday 17 February 2011] [09:36:07] &lt;cremes&gt;       <a href="#id2283"><span class="problematic" id="id2284">pieterh_</span></a>: what&#8217;s up?
| [Thursday 17 February 2011] [09:36:20] &lt;<a href="#id2285"><span class="problematic" id="id2286">pieterh_</span></a>&gt;     cremes: we found &amp; nailed the real issue with mailboxes
| [Thursday 17 February 2011] [09:36:33] &lt;<a href="#id2287"><span class="problematic" id="id2288">pieterh_</span></a>&gt;     of course it&#8217;s a 1-line fix :-)
| [Thursday 17 February 2011] [09:36:42] &lt;cremes&gt;       oh, of course!
| [Thursday 17 February 2011] [09:37:14] &lt;<a href="#id2289"><span class="problematic" id="id2290">pieterh_</span></a>&gt;     well, it&#8217;s one line of magic from Martin...
| [Thursday 17 February 2011] [09:37:19] &lt;cremes&gt;       has it been committed already?
| [Thursday 17 February 2011] [09:37:22] &lt;<a href="#id2291"><span class="problematic" id="id2292">pieterh_</span></a>&gt;     yup
| [Thursday 17 February 2011] [09:37:35] &lt;cremes&gt;       i&#8217;m going to look...
| [Thursday 17 February 2011] [09:39:00] &lt;cremes&gt;       launch_sibling became launch_child? that truly is magic
| [Thursday 17 February 2011] [09:39:34] &lt;yrashk&gt;       sustrik: no perfs yet, I haven&#8217;t done 2nd thread non-block recv yet anyway
| [Thursday 17 February 2011] [09:39:40] &lt;yrashk&gt;       working on sockopts
| [Thursday 17 February 2011] [09:39:56] &lt;<a href="#id2293"><span class="problematic" id="id2294">pieterh_</span></a>&gt;     sustrik, ok, it works like a charm
| [Thursday 17 February 2011] [09:40:19] &lt;<a href="#id2295"><span class="problematic" id="id2296">pieterh_</span></a>&gt;     Compiling mailbugz...
| [Thursday 17 February 2011] [09:40:19] &lt;<a href="#id2297"><span class="problematic" id="id2298">pieterh_</span></a>&gt;     Linking mailbugz...
| [Thursday 17 February 2011] [09:40:19] &lt;<a href="#id2299"><span class="problematic" id="id2300">pieterh_</span></a>&gt;     E: (syslog) DUID: peer using non-unique identity - disconnected
| [Thursday 17 February 2011] [09:40:19] &lt;<a href="#id2301"><span class="problematic" id="id2302">pieterh_</span></a>&gt;     E: (syslog) DUID: 0x444945
| [Thursday 17 February 2011] [09:40:19] &lt;<a href="#id2303"><span class="problematic" id="id2304">pieterh_</span></a>&gt;     E: (syslog) DUID: &#8220;DIE&#8221;
| [Thursday 17 February 2011] [09:40:26] &lt;sustrik&gt;      yrashk: ack
| [Thursday 17 February 2011] [09:40:38] &lt;<a href="#id2305"><span class="problematic" id="id2306">pieterh_</span></a>&gt;     that message comes from session.cpp, and object.cpp formats and prints the identity
| [Thursday 17 February 2011] [09:40:49] &lt;<a href="#id2307"><span class="problematic" id="id2308">pieterh_</span></a>&gt;     and a thread in mailbugz catches and reports the error
| [Thursday 17 February 2011] [09:41:22] &lt;sustrik&gt;      <a href="#id2309"><span class="problematic" id="id2310">pieterh_</span></a>: it should be one log recoed imo
| [Thursday 17 February 2011] [09:41:26] &lt;sustrik&gt;      record
| [Thursday 17 February 2011] [09:41:42] &lt;<a href="#id2311"><span class="problematic" id="id2312">pieterh_</span></a>&gt;     sustrik, sure, this is a proof of concept
| [Thursday 17 February 2011] [09:42:02] &lt;sustrik&gt;      in the future it would be nice to add IP address of the offending peer
| [Thursday 17 February 2011] [09:42:07] &lt;<a href="#id2313"><span class="problematic" id="id2314">pieterh_</span></a>&gt;     and etc...
| [Thursday 17 February 2011] [09:42:09] &lt;<a href="#id2315"><span class="problematic" id="id2316">pieterh_</span></a>&gt;     yes
| [Thursday 17 February 2011] [09:42:52] &lt;<a href="#id2317"><span class="problematic" id="id2318">pieterh_</span></a>&gt;     my C++ skills are too poor to do this properly
| [Thursday 17 February 2011] [09:43:02] &lt;sustrik&gt;      use raw C
| [Thursday 17 February 2011] [09:43:09] &lt;<a href="#id2319"><span class="problematic" id="id2320">pieterh_</span></a>&gt;     done that, np
| [Thursday 17 February 2011] [09:43:35] &lt;<a href="#id2321"><span class="problematic" id="id2322">pieterh_</span></a>&gt;     ok, will add IP address and make a single string
| [Thursday 17 February 2011] [09:43:51] &lt;sustrik&gt;      the IP addr stuff may be tricky imo
| [Thursday 17 February 2011] [09:44:18] &lt;<a href="#id2323"><span class="problematic" id="id2324">pieterh_</span></a>&gt;     does the engine not have a socket it can look at?
| [Thursday 17 February 2011] [09:44:26] &lt;sustrik&gt;      it does
| [Thursday 17 February 2011] [09:44:34] &lt;sustrik&gt;      but there no code to do that
| [Thursday 17 February 2011] [09:44:41] &lt;<a href="#id2325"><span class="problematic" id="id2326">pieterh_</span></a>&gt;     ok, well, one step at a time
| [Thursday 17 February 2011] [09:44:45] &lt;sustrik&gt;      exactly
| [Thursday 17 February 2011] [09:44:50] &lt;<a href="#id2327"><span class="problematic" id="id2328">pieterh_</span></a>&gt;     the first thing is to get end-to-end reporting in place
| [Thursday 17 February 2011] [09:44:54] &lt;<a href="#id2329"><span class="problematic" id="id2330">pieterh_</span></a>&gt;     then we can extend and improve it...
| [Thursday 17 February 2011] [09:45:48] &lt;<a href="#id2331"><span class="problematic" id="id2332">pieterh_</span></a>&gt;     not sure if bindings should read sys://log themselves or leave this to apps...
| [Thursday 17 February 2011] [09:46:12] &lt;<a href="#id2333"><span class="problematic" id="id2334">pieterh_</span></a>&gt;     in latter case, people just won&#8217;t use it and will still have the same &#8216;what is happening?&#8217; issue
| [Thursday 17 February 2011] [09:46:53] &lt;sustrik&gt;      it&#8217;s up to binding developers imo
| [Thursday 17 February 2011] [09:47:19] &lt;<a href="#id2335"><span class="problematic" id="id2336">pieterh_</span></a>&gt;     some thought and consistent policy would help IMO
| [Thursday 17 February 2011] [09:49:03] &lt;sustrik&gt;      i would leave binding as thin as possible personally
| [Thursday 17 February 2011] [09:49:22] &lt;sustrik&gt;      =&gt; no need to change anything
| [Thursday 17 February 2011] [09:55:48] &lt;<a href="#id2337"><span class="problematic" id="id2338">pieterh_</span></a>&gt;     there is one very small issue with the syslog design
| [Thursday 17 February 2011] [09:55:58] &lt;<a href="#id2339"><span class="problematic" id="id2340">pieterh_</span></a>&gt;     if you get an error right at startup, you won&#8217;t see it
| [Thursday 17 February 2011] [09:56:11] &lt;<a href="#id2341"><span class="problematic" id="id2342">pieterh_</span></a>&gt;     due to the async connect issue with pubsub
| [Thursday 17 February 2011] [09:57:12] &lt;sustrik&gt;      rightr
| [Thursday 17 February 2011] [09:57:20] &lt;<a href="#id2343"><span class="problematic" id="id2344">pieterh_</span></a>&gt;     since I&#8217;m conflating errors (sending only the first of a series), this means sometimes nothing shows
| [Thursday 17 February 2011] [09:57:35] &lt;<a href="#id2345"><span class="problematic" id="id2346">pieterh_</span></a>&gt;     I
| [Thursday 17 February 2011] [09:57:49] &lt;<a href="#id2347"><span class="problematic" id="id2348">pieterh_</span></a>&gt;     I&#8217;ve no solution in mind but it&#8217;s an interesting use case
| [Thursday 17 February 2011] [09:58:26] &lt;sustrik&gt;      are you subscribing for logs immediately after zmq_init()
| [Thursday 17 February 2011] [09:58:27] &lt;sustrik&gt;      ?
| [Thursday 17 February 2011] [09:58:45] &lt;<a href="#id2349"><span class="problematic" id="id2350">pieterh_</span></a>&gt;     yes
| [Thursday 17 February 2011] [09:59:01] &lt;sustrik&gt;      that should not happen imo
| [Thursday 17 February 2011] [09:59:05] &lt;sustrik&gt;      likely a bug...
| [Thursday 17 February 2011] [09:59:06] &lt;<a href="#id2351"><span class="problematic" id="id2352">pieterh_</span></a>&gt;     hang on, there should be no delay over inproc...
| [Thursday 17 February 2011] [09:59:18] &lt;<a href="#id2353"><span class="problematic" id="id2354">pieterh_</span></a>&gt;     i&#8217;m mistaken, it&#8217;s because I&#8217;m using two threads
| [Thursday 17 February 2011] [09:59:39] &lt;<a href="#id2355"><span class="problematic" id="id2356">pieterh_</span></a>&gt;     ok, easily solved, connect subscriber in main thread and then pass to background thread
| [Thursday 17 February 2011] [09:59:48] &lt;sustrik&gt;      ack
| [Thursday 17 February 2011] [10:00:58] &lt;<a href="#id2357"><span class="problematic" id="id2358">pieterh_</span></a>&gt;     ack, that fixes it
| [Thursday 17 February 2011] [10:01:36] &lt;yrashk&gt;       when I am doing getsockopts on ZMQ_IDENTITY, should I allocate option value?
| [Thursday 17 February 2011] [10:02:10] &lt;yrashk&gt;       sorry for dumb questions, was working through the whole night
| [Thursday 17 February 2011] [10:02:50] &lt;sustrik&gt;      yrashk: you supply a buffer
| [Thursday 17 February 2011] [10:02:59] &lt;sustrik&gt;      0mq will fill the identity into the buffer
| [Thursday 17 February 2011] [10:03:20] &lt;yrashk&gt;       gothca, will do 255 buff
| [Thursday 17 February 2011] [10:05:56] &lt;yrashk&gt;       I am not sure I really understand this IDENTITY thing yet, though
| [Thursday 17 February 2011] [10:08:37] &lt;yrashk&gt;       I am getting garbage from there :S
| [Thursday 17 February 2011] [10:08:45] &lt;yrashk&gt;       even though I set it to a binary value beforehand
| [Thursday 17 February 2011] [10:08:53] &lt;yrashk&gt;       lol, debugging stuff at 7am is fun
| [Thursday 17 February 2011] [10:12:13] &lt;<a href="#id2359"><span class="problematic" id="id2360">pieterh_</span></a>&gt;     yrashk, then tomorrow you&#8217;re like &#8216;wha...?&#8217;
| [Thursday 17 February 2011] [10:12:25] &lt;yrashk&gt;       well
| [Thursday 17 February 2011] [10:12:27] &lt;yrashk&gt;       that&#8217;s a given
| [Thursday 17 February 2011] [10:12:32] &lt;yrashk&gt;       but anyway I fixed something
| [Thursday 17 February 2011] [10:12:33] &lt;yrashk&gt;       and it works
| [Thursday 17 February 2011] [10:13:03] &lt;yrashk&gt;       so what&#8217;s left?
| [Thursday 17 February 2011] [10:13:07] &lt;yrashk&gt;       I guess non-blocking receive
| [Thursday 17 February 2011] [10:13:09] &lt;yrashk&gt;       and nicer API
| [Thursday 17 February 2011] [10:28:43] &lt;<a href="#id2361"><span class="problematic" id="id2362">pieterh_</span></a>&gt;     sustrik, ok, patch sent for the syslog interface
| [Thursday 17 February 2011] [10:28:58] &lt;<a href="#id2363"><span class="problematic" id="id2364">pieterh_</span></a>&gt;     it&#8217;s pretty brutal, will benefit from some C++ review
| [Thursday 17 February 2011] [10:34:34] &lt;yrashk&gt;       horaay
| [Thursday 17 February 2011] [10:34:43] &lt;yrashk&gt;       even pub/sub aleady works
| [Thursday 17 February 2011] [10:35:05] &lt;sustrik&gt;      :)
| [Thursday 17 February 2011] [10:35:24] &lt;yrashk&gt;       <a class="reference external" href="https://gist.github.com/36cde07be28d3dad39a7">https://gist.github.com/36cde07be28d3dad39a7</a>
| [Thursday 17 February 2011] [10:35:30] &lt;yrashk&gt;       and I added nicer higher level API
| [Thursday 17 February 2011] [10:36:06]         * sustrik is looking forward for the perf results
| [Thursday 17 February 2011] [10:37:46] &lt;yrashk&gt;       I am actually porting those right now
| [Thursday 17 February 2011] [10:38:24] &lt;sustrik&gt;      !
| [Thursday 17 February 2011] [10:39:19] &lt;yrashk&gt;       it probably is much worse
| [Thursday 17 February 2011] [10:39:32] &lt;yrashk&gt;       since it&#8217;s currenly blocking
| [Thursday 17 February 2011] [10:39:38] &lt;yrashk&gt;       haha
| [Thursday 17 February 2011] [10:39:39] &lt;yrashk&gt;       the same
| [Thursday 17 February 2011] [10:39:40] &lt;yrashk&gt;       mean throughput: 30938.745584228862 [msg/s]
| [Thursday 17 February 2011] [10:39:54] &lt;yrashk&gt;       still my API is nice :-P
| [Thursday 17 February 2011] [10:41:48] &lt;yrashk&gt;       I increased message size to 100 bytes
| [Thursday 17 February 2011] [10:41:53] &lt;yrashk&gt;       and now it&#8217;s faster:
| [Thursday 17 February 2011] [10:41:53] &lt;yrashk&gt;       mean throughput: 40136.63795933773 [msg/s]
| [Thursday 17 February 2011] [10:42:45] &lt;sustrik&gt;      what&#8217;s going on there?
| [Thursday 17 February 2011] [10:42:49] &lt;yrashk&gt;       1000 bytes gives 38K
| [Thursday 17 February 2011] [10:43:25] &lt;yrashk&gt;       so I wrote this nice NIF API for nothing? :-(
| [Thursday 17 February 2011] [10:43:33] &lt;sustrik&gt;      is it possible that erlang itself is so slow as not to be able to execute the loop faster than that?
| [Thursday 17 February 2011] [10:43:35] &lt;yrashk&gt;       actually 40K for 1000 bytes
| [Thursday 17 February 2011] [10:43:47] &lt;sustrik&gt;      still, it should b 400k
| [Thursday 17 February 2011] [10:43:57] &lt;sustrik&gt;      at least
| [Thursday 17 February 2011] [10:44:00] &lt;yrashk&gt;       true
| [Thursday 17 February 2011] [10:44:05] &lt;yrashk&gt;       I am thinking why this is happening
| [Thursday 17 February 2011] [10:44:14] &lt;yrashk&gt;       I cutted driver communications out
| [Thursday 17 February 2011] [10:44:24] &lt;yrashk&gt;       so now it&#8217;s NIF
| [Thursday 17 February 2011] [10:44:53] &lt;sustrik&gt;      can you benchmark average duration spent in the NIF
| [Thursday 17 February 2011] [10:44:56] &lt;sustrik&gt;      ?
| [Thursday 17 February 2011] [10:45:02] &lt;sustrik&gt;      say in send?
| [Thursday 17 February 2011] [10:45:15] &lt;yrashk&gt;       or may be even better in recv?
| [Thursday 17 February 2011] [10:45:23] &lt;yrashk&gt;       send should be faster anyway, no?
| [Thursday 17 February 2011] [10:45:33] &lt;yrashk&gt;       getting 44K on 1 bytes
| [Thursday 17 February 2011] [10:45:53] &lt;sustrik&gt;      recv is more problematic, because it can be slow either because it itself is slow or because sender is slow
| [Thursday 17 February 2011] [10:46:12] &lt;yrashk&gt;       added noblock to sender
| [Thursday 17 February 2011] [10:46:31] &lt;sustrik&gt;      so, if you are able to find out how much time is spent in send
| [Thursday 17 February 2011] [10:46:40] &lt;sustrik&gt;      it may turn out that it&#8217;s 10%
| [Thursday 17 February 2011] [10:46:49] &lt;sustrik&gt;      that would mean that erlang itself is slow
| [Thursday 17 February 2011] [10:46:51] &lt;yrashk&gt;       well I can do that
| [Thursday 17 February 2011] [10:47:05] &lt;yrashk&gt;       still I will probably not delete my binding
| [Thursday 17 February 2011] [10:47:10] &lt;sustrik&gt;      or 95% which would mean erlzmq is slow
| [Thursday 17 February 2011] [10:47:12] &lt;yrashk&gt;       as it&#8217;s quite nice actually
| [Thursday 17 February 2011] [10:47:17] &lt;sustrik&gt;      no, don&#8217;t do that
| [Thursday 17 February 2011] [10:47:26] &lt;sustrik&gt;      it may come handy one day
| [Thursday 17 February 2011] [10:48:38] &lt;cremes&gt;       erlang isn&#8217;t known for execution performance; it&#8217;s known for massive concurrency
| [Thursday 17 February 2011] [10:49:00] &lt;cremes&gt;       if the problem isn&#8217;t parallelizable, perf isn&#8217;t usually too impressive
| [Thursday 17 February 2011] [10:49:20] &lt;yrashk&gt;       it spends 2-3 microseconds in that call
| [Thursday 17 February 2011] [10:49:22] &lt;yrashk&gt;       (recv)
| [Thursday 17 February 2011] [10:50:42] &lt;sustrik&gt;      that should mean 330,000-500,000 msgs/sec
| [Thursday 17 February 2011] [10:51:08] &lt;yrashk&gt;       may be my math is wrong?
| [Thursday 17 February 2011] [10:51:09] &lt;yrashk&gt;       ;)
| [Thursday 17 February 2011] [10:51:28] &lt;sustrik&gt;      yes, the math there is tricky
| [Thursday 17 February 2011] [10:51:38] &lt;yrashk&gt;       but it does spend up to 20-30 seconds or so
| [Thursday 17 February 2011] [10:51:41] &lt;sustrik&gt;      due to rounding errors
| [Thursday 17 February 2011] [10:51:45] &lt;yrashk&gt;       for a million messages
| [Thursday 17 February 2011] [10:51:53] &lt;sustrik&gt;      than the result looks right
| [Thursday 17 February 2011] [10:52:09] &lt;yrashk&gt;       real    0m31.754s
| [Thursday 17 February 2011] [10:52:10] &lt;yrashk&gt;       user    0m14.646s
| [Thursday 17 February 2011] [10:52:10] &lt;yrashk&gt;       sys     0m18.121s
| [Thursday 17 February 2011] [10:52:11] &lt;sustrik&gt;      the problem is that most of the time is spent <em>out</em> of erlzmq
| [Thursday 17 February 2011] [10:52:17] &lt;yrashk&gt;       well it is ezmq now
| [Thursday 17 February 2011] [10:52:23] &lt;yrashk&gt;       I rewrote it from scratch
| [Thursday 17 February 2011] [10:52:27] &lt;yrashk&gt;       ;)
| [Thursday 17 February 2011] [10:52:33] &lt;sustrik&gt;      :)
| [Thursday 17 February 2011] [10:52:54] &lt;sustrik&gt;      those 2-3 microseconds are spent in NIF
| [Thursday 17 February 2011] [10:52:57] &lt;sustrik&gt;      or 0MQ itself?
| [Thursday 17 February 2011] [10:53:08] &lt;yrashk&gt;       NIF call
| [Thursday 17 February 2011] [10:53:24] &lt;sustrik&gt;      can you check the same on the send() call?
| [Thursday 17 February 2011] [10:53:35] &lt;yrashk&gt;       sure
| [Thursday 17 February 2011] [10:54:18] &lt;yrashk&gt;       10-15 microseconds
| [Thursday 17 February 2011] [10:54:31] &lt;yrashk&gt;       well even 8-15
| [Thursday 17 February 2011] [10:55:05] &lt;sustrik&gt;      with 40k msgs/sec
| [Thursday 17 February 2011] [10:55:22] &lt;sustrik&gt;      the time for single message is 25 usec
| [Thursday 17 February 2011] [10:55:32] &lt;yrashk&gt;       a little less without noblock
| [Thursday 17 February 2011] [10:55:41] &lt;sustrik&gt;      8-15 can be attributed to ezmq
| [Thursday 17 February 2011] [10:55:57] &lt;sustrik&gt;      remaining 10 are either erlang itself or the time measurement
| [Thursday 17 February 2011] [10:56:13] &lt;yrashk&gt;       still 8-15 is pretty fast, right?
| [Thursday 17 February 2011] [10:56:53] &lt;sustrik&gt;      it equals to 125k-666k msgs/sec
| [Thursday 17 February 2011] [10:57:48] &lt;yrashk&gt;       the almost empty cycle takes about 890645 microsecond
| [Thursday 17 February 2011] [10:58:03] &lt;sustrik&gt;      1M iterations?
| [Thursday 17 February 2011] [10:58:06] &lt;yrashk&gt;       yep
| [Thursday 17 February 2011] [10:58:15] &lt;yrashk&gt;       well, it&#8217;s not empty
| [Thursday 17 February 2011] [10:58:18] &lt;yrashk&gt;       but almost
| [Thursday 17 February 2011] [10:58:23] &lt;sustrik&gt;      0.8 usec per iteration
| [Thursday 17 February 2011] [10:58:28] &lt;sustrik&gt;      that&#8217;s reasonable
| [Thursday 17 February 2011] [10:58:41] &lt;sustrik&gt;      so what&#8217;s the rest of the time spent on?
| [Thursday 17 February 2011] [10:58:45] &lt;yrashk&gt;       a little bit slower with integer value in it
| [Thursday 17 February 2011] [10:58:49] &lt;yrashk&gt;       I have no idea yet
| [Thursday 17 February 2011] [10:59:03] &lt;sustrik&gt;      cycle is 25 used long
| [Thursday 17 February 2011] [10:59:10] &lt;sustrik&gt;      8-15usec in NIF
| [Thursday 17 February 2011] [10:59:18] &lt;sustrik&gt;      0.8 the iteration itself
| [Thursday 17 February 2011] [10:59:25] &lt;sustrik&gt;      still some 10 usecs are missing
| [Thursday 17 February 2011] [10:59:31] &lt;yrashk&gt;       yup
| [Thursday 17 February 2011] [10:59:35] &lt;yrashk&gt;       you mean on send, right?
| [Thursday 17 February 2011] [10:59:43] &lt;sustrik&gt;      yes
| [Thursday 17 February 2011] [11:00:06] &lt;yrashk&gt;       right
| [Thursday 17 February 2011] [11:00:10] &lt;yrashk&gt;       I have no idea :)
| [Thursday 17 February 2011] [11:00:10] &lt;sustrik&gt;      maybe send is fast
| [Thursday 17 February 2011] [11:00:29] &lt;sustrik&gt;      how long does sending 1000000 msgs take?
| [Thursday 17 February 2011] [11:00:41] &lt;sustrik&gt;      measured before calling zmq_term()
| [Thursday 17 February 2011] [11:01:25] &lt;sustrik&gt;      (zmq_term waits for messages to be actually pushed to the wire)
| [Thursday 17 February 2011] [11:01:45] &lt;yrashk&gt;       lets see
| [Thursday 17 February 2011] [11:01:46] &lt;sustrik&gt;      (what we are interested in is how fast is erlang/ezmq able to push messages to 0mq)
| [Thursday 17 February 2011] [11:01:55] &lt;yrashk&gt;       I am measure the whole script timing
| [Thursday 17 February 2011] [11:02:04] &lt;yrashk&gt;       measuring*
| [Thursday 17 February 2011] [11:02:21] &lt;yrashk&gt;       25 secds
| [Thursday 17 February 2011] [11:02:22] &lt;yrashk&gt;       secs
| [Thursday 17 February 2011] [11:02:36] &lt;yrashk&gt;       real    0m25.188s
| [Thursday 17 February 2011] [11:02:36] &lt;yrashk&gt;       user    0m26.410s
| [Thursday 17 February 2011] [11:02:36] &lt;yrashk&gt;       sys     0m22.533s
| [Thursday 17 February 2011] [11:03:45] &lt;sustrik&gt;      that&#8217;s before zmq_term is called, right?
| [Thursday 17 February 2011] [11:04:30] &lt;sustrik&gt;      that&#8217;s 40k msgs/sec  i.e. 25 usec per message
| [Thursday 17 February 2011] [11:04:46] &lt;yrashk&gt;       no, not before
| [Thursday 17 February 2011] [11:05:05] &lt;mikko&gt;        are you setting linger to 0
| [Thursday 17 February 2011] [11:05:07] &lt;mikko&gt;        ?
| [Thursday 17 February 2011] [11:06:07] &lt;yrashk&gt;       def not explicitly
| [Thursday 17 February 2011] [11:06:17] &lt;sustrik&gt;      right, setting linger to 0 would cause measuring only pushing the messages to 0mq
| [Thursday 17 February 2011] [11:06:21] &lt;yrashk&gt;       just got 52K messages per sec
| [Thursday 17 February 2011] [11:06:38] &lt;yrashk&gt;       also, 14249556 microseconds to send
| [Thursday 17 February 2011] [11:06:44] &lt;yrashk&gt;       before term
| [Thursday 17 February 2011] [11:07:11] &lt;yrashk&gt;       that is 14 seconds
| [Thursday 17 February 2011] [11:07:15] &lt;yrashk&gt;       now even 13
| [Thursday 17 February 2011] [11:07:21] &lt;sustrik&gt;      ie. 14 usec per message
| [Thursday 17 February 2011] [11:07:22] &lt;yrashk&gt;       and 67K messages
| [Thursday 17 February 2011] [11:07:27] &lt;yrashk&gt;       and I am not changing anything
| [Thursday 17 February 2011] [11:07:35] &lt;sustrik&gt;      with 8-15 in NIF
| [Thursday 17 February 2011] [11:07:47] &lt;sustrik&gt;      that sounds more or less reasonable
| [Thursday 17 February 2011] [11:08:06] &lt;sustrik&gt;      assuming that 8 is an outlayer
| [Thursday 17 February 2011] [11:08:16] &lt;yrashk&gt;       well I cant measure exactly NIF timing, but it&#8217;s very close to that
| [Thursday 17 February 2011] [11:08:19] &lt;sustrik&gt;      and average values are around 14-15
| [Thursday 17 February 2011] [11:08:34] &lt;yrashk&gt;       avg seemed to be around 11-13
| [Thursday 17 February 2011] [11:08:48] &lt;yrashk&gt;       anyway I am getting even 67K messages
| [Thursday 17 February 2011] [11:08:48] &lt;sustrik&gt;      that seems ok
| [Thursday 17 February 2011] [11:08:58] &lt;yrashk&gt;       I was not able to see that with erlzmq
| [Thursday 17 February 2011] [11:09:18] &lt;sustrik&gt;      14.9 usec/msg
| [Thursday 17 February 2011] [11:09:54] &lt;sustrik&gt;      can you do ezmq/c perf test as before?
| [Thursday 17 February 2011] [11:10:12] &lt;sustrik&gt;      ezmq local + c remote
| [Thursday 17 February 2011] [11:10:15] &lt;sustrik&gt;      and vice versa?
| [Thursday 17 February 2011] [11:10:27] &lt;yrashk&gt;       sure just let me finish 10mln messages test
| [Thursday 17 February 2011] [11:10:35] &lt;sustrik&gt;      sure
| [Thursday 17 February 2011] [11:10:40] &lt;yrashk&gt;       still running...
| [Thursday 17 February 2011] [11:11:11] &lt;yrashk&gt;       that&#8217;s likely to be like 3 mins
| [Thursday 17 February 2011] [11:11:12] &lt;yrashk&gt;       :D
| [Thursday 17 February 2011] [11:11:31] &lt;yrashk&gt;       whoa
| [Thursday 17 February 2011] [11:11:31] &lt;yrashk&gt;       mean throughput: 71015.7477562681 [msg/s]
| [Thursday 17 February 2011] [11:11:34] &lt;yrashk&gt;       71K
| [Thursday 17 February 2011] [11:12:48] &lt;yrashk&gt;       with C remote:
| [Thursday 17 February 2011] [11:12:48] &lt;yrashk&gt;       mean throughput: 119761.54040167542 [msg/s]
| [Thursday 17 February 2011] [11:13:07] &lt;yrashk&gt;       twice as good as it was with erlzmq btw
| [Thursday 17 February 2011] [11:13:08] &lt;yrashk&gt;       :-P
| [Thursday 17 February 2011] [11:13:49] &lt;yrashk&gt;       mean throughput: 126762.65050054133 [msg/s]
| [Thursday 17 February 2011] [11:14:03] &lt;yrashk&gt;       it looks like it warms up more every time I run it again
| [Thursday 17 February 2011] [11:14:28] &lt;yrashk&gt;       =_
| [Thursday 17 February 2011] [11:15:44] &lt;sustrik&gt;      heh
| [Thursday 17 February 2011] [11:16:20] &lt;yrashk&gt;       one thing I know for sure
| [Thursday 17 February 2011] [11:16:24] &lt;yrashk&gt;       it&#8217;s faster than erlzmq
| [Thursday 17 February 2011] [11:16:34] &lt;yrashk&gt;       I just retested C/erlzmq: it tops at 80K/msgs
| [Thursday 17 February 2011] [11:16:45] &lt;yrashk&gt;       while C/ezmq tops at about 120K msgs
| [Thursday 17 February 2011] [11:17:26] &lt;sustrik&gt;      nice
| [Thursday 17 February 2011] [11:18:00] &lt;yrashk&gt;       and I ony spent... like 2 hours with it?
| [Thursday 17 February 2011] [11:18:05] &lt;sustrik&gt;      so maybe just write an email about your experiments to the ML
| [Thursday 17 February 2011] [11:18:08] &lt;sustrik&gt;      and have some sleep
| [Thursday 17 February 2011] [11:18:19] &lt;yrashk&gt;       I am too lazy to write emails right now
| [Thursday 17 February 2011] [11:18:25] &lt;sustrik&gt;      sure
| [Thursday 17 February 2011] [11:18:40] &lt;yrashk&gt;       well hopefully ezmq will be of use for somebody
| [Thursday 17 February 2011] [11:18:45] &lt;yrashk&gt;       since it&#8217;s faster
| [Thursday 17 February 2011] [11:19:01] &lt;sustrik&gt;      we can even have a look at why the call to NIF takes 15 usec later on
| [Thursday 17 February 2011] [11:19:14] &lt;yrashk&gt;       yeah it&#8217;s quite long
| [Thursday 17 February 2011] [11:19:34] &lt;yrashk&gt;       C version takes no time at all
| [Thursday 17 February 2011] [11:19:48] &lt;sustrik&gt;      something like 0.3 usec
| [Thursday 17 February 2011] [11:20:02] &lt;sustrik&gt;      so there&#8217;s quite a lot of overhead that can be possibly eliminated
| [Thursday 17 February 2011] [11:20:04] &lt;yrashk&gt;       for all messages
| [Thursday 17 February 2011] [11:20:23] &lt;sustrik&gt;      for 1-byte messages
| [Thursday 17 February 2011] [11:20:30] &lt;yrashk&gt;       right
| [Thursday 17 February 2011] [11:20:45] &lt;yrashk&gt;       also may be it is not batching for some reason in this scenario?
| [Thursday 17 February 2011] [11:20:49] &lt;yrashk&gt;       could that happen?
| [Thursday 17 February 2011] [11:21:34] &lt;sustrik&gt;      batching does not occur only if messages are passed slower than the underlying network stack can send them
| [Thursday 17 February 2011] [11:21:51] &lt;sustrik&gt;      which can be the case here
| [Thursday 17 February 2011] [11:22:01] &lt;sustrik&gt;      however, if we speed up the erlzmq part
| [Thursday 17 February 2011] [11:22:09] &lt;sustrik&gt;      the batching will kick in
| [Thursday 17 February 2011] [11:22:39] &lt;yrashk&gt;       I think this is the case
| [Thursday 17 February 2011] [11:22:51] &lt;yrashk&gt;       we send whole packets for every byte
| [Thursday 17 February 2011] [11:23:11] &lt;sustrik&gt;      possible
| [Thursday 17 February 2011] [11:23:38] &lt;sustrik&gt;      but only way to make it not happen is to speed up the sender
| [Thursday 17 February 2011] [11:23:45] &lt;sustrik&gt;      i.e. erlang+ezmq
| [Thursday 17 February 2011] [11:24:37] &lt;yrashk&gt;       yup
| [Thursday 17 February 2011] [11:25:22] &lt;yrashk&gt;       yet I have no idea why this is so slow
| [Thursday 17 February 2011] [11:25:29] &lt;yrashk&gt;       well,erlang is indeed not very fast
| [Thursday 17 February 2011] [11:25:31] &lt;yrashk&gt;       but still
| [Thursday 17 February 2011] [11:27:23] &lt;yrashk&gt;       this code <a class="reference external" href="https://github.com/yrashk/ezmq/blob/master/c_src/ezmq_nif.c#L250">https://github.com/yrashk/ezmq/blob/master/c_src/ezmq_nif.c#L250</a> looks clean enough by me
| [Thursday 17 February 2011] [11:27:32] &lt;yrashk&gt;       to not cause <em>too</em> much trouble
| [Thursday 17 February 2011] [11:30:05] &lt;sustrik&gt;      yes, this is how most bindings look like
| [Thursday 17 February 2011] [11:30:20] &lt;sustrik&gt;      erlzmq is exceptional in its complexity
| [Thursday 17 February 2011] [11:30:29] &lt;yrashk&gt;       mine is much simpler, eh?
| [Thursday 17 February 2011] [11:30:34] &lt;sustrik&gt;      yup
| [Thursday 17 February 2011] [11:30:44] &lt;yrashk&gt;       and faster [grin]
| [Thursday 17 February 2011] [11:30:56] &lt;sustrik&gt;      hi5!
| [Thursday 17 February 2011] [11:44:24] &lt;yrashk&gt;       hm may be binary allocation isn&#8217;t that fast
| [Thursday 17 February 2011] [11:44:51] &lt;yrashk&gt;       there is a way to tell erlang to use existing memory region as a binary without allocating it
| [Thursday 17 February 2011] [11:45:05] &lt;yrashk&gt;       but it means it will get into erlang gc
| [Thursday 17 February 2011] [11:45:16] &lt;yrashk&gt;       and should not be altered until erlang collects it
| [Thursday 17 February 2011] [11:45:26] &lt;yrashk&gt;       sustrik: is there a way to do that with 0mq?
| [Thursday 17 February 2011] [11:46:03] &lt;yrashk&gt;       should I not close message on recv and only close in a finalizer called by erlang gc?
| [Thursday 17 February 2011] [11:47:10] &lt;sustrik&gt;      yrashk: i don&#8217;t follow
| [Thursday 17 February 2011] [11:47:17] &lt;sustrik&gt;      inside the NIF you get a message
| [Thursday 17 February 2011] [11:47:23] &lt;yrashk&gt;       yes
| [Thursday 17 February 2011] [11:47:27] &lt;yrashk&gt;       then I copy and close it
| [Thursday 17 February 2011] [11:47:36] &lt;sustrik&gt;      sounds ok
| [Thursday 17 February 2011] [11:47:43] &lt;yrashk&gt;       instead there is a possibility that I can use another API (that I haven&#8217;t used before)
| [Thursday 17 February 2011] [11:47:54] &lt;yrashk&gt;       that allows me to reuse existing memory region as a binary
| [Thursday 17 February 2011] [11:48:03] &lt;yrashk&gt;       instead of copying it and allocating binary
| [Thursday 17 February 2011] [11:48:19] &lt;yrashk&gt;       and I can attach a destructor to such a binary
| [Thursday 17 February 2011] [11:48:26] &lt;yrashk&gt;       which can call msg_close
| [Thursday 17 February 2011] [11:48:37] &lt;yrashk&gt;       I am just thinking how good or bad this approach is
| [Thursday 17 February 2011] [11:49:18] &lt;sustrik&gt;      it&#8217;s not bad, but it&#8217;ll get pretty complex soon
| [Thursday 17 February 2011] [11:49:36] &lt;sustrik&gt;      i would just stick with the existing copy semantics at the moment
| [Thursday 17 February 2011] [11:49:56] &lt;yrashk&gt;       I am just trying to understand where&#8217;s the bottleneck
| [Thursday 17 February 2011] [11:50:11] &lt;yrashk&gt;       btw it looks like ezmq got more or less consistently 2x faster than erlzmq
| [Thursday 17 February 2011] [11:50:16] &lt;yrashk&gt;       with some minor changes
| [Thursday 17 February 2011] [11:50:29] &lt;yrashk&gt;       at least I am constantly getting 60-70K
| [Thursday 17 February 2011] [11:50:32] &lt;sustrik&gt;      nice
| [Thursday 17 February 2011] [11:51:07] &lt;sustrik&gt;      handling native memory from VM tends to be pretty messy
| [Thursday 17 February 2011] [11:51:24] &lt;yrashk&gt;       I know
| [Thursday 17 February 2011] [11:51:31] &lt;sustrik&gt;      anyway, 15 usec for an allocation seems too much
| [Thursday 17 February 2011] [11:51:39] &lt;yrashk&gt;       well
| [Thursday 17 February 2011] [11:51:45] &lt;yrashk&gt;       I don&#8217;t know what exactly takes 15 usec
| [Thursday 17 February 2011] [11:51:58] &lt;sustrik&gt;      i would rather guess scheduling is kicking in or something like that
| [Thursday 17 February 2011] [11:52:03] &lt;yrashk&gt;       I am just reading the code and fantasizing
| [Thursday 17 February 2011] [11:52:13] &lt;yrashk&gt;       well when it enters C part
| [Thursday 17 February 2011] [11:52:20] &lt;yrashk&gt;       there is no scheduling happening whatsoevr
| [Thursday 17 February 2011] [11:52:52] &lt;sustrik&gt;      doesn&#8217;t the erlang thread get into wait state
| [Thursday 17 February 2011] [11:53:07] &lt;sustrik&gt;      while dedicated NIF thread does the work?
| [Thursday 17 February 2011] [11:53:09] &lt;yrashk&gt;       well current scheduler waits until C function ends
| [Thursday 17 February 2011] [11:53:18] &lt;yrashk&gt;       there&#8217;s no dedicated NIF thread
| [Thursday 17 February 2011] [11:53:22] &lt;yrashk&gt;       it&#8217;s in the scheduler&#8217;s thread
| [Thursday 17 February 2011] [11:53:41] &lt;sustrik&gt;      ok
| [Thursday 17 February 2011] [11:53:52] &lt;sustrik&gt;      that should not take 15 usec either
| [Thursday 17 February 2011] [11:54:02] &lt;yrashk&gt;       no
| [Thursday 17 February 2011] [11:54:10] &lt;yrashk&gt;       I am really at loss here
| [Thursday 17 February 2011] [11:54:12] &lt;sustrik&gt;      maybe just locking and unlocking a mutex or somesuch
| [Thursday 17 February 2011] [11:54:15] &lt;yrashk&gt;       I don&#8217;t quite get it
| [Thursday 17 February 2011] [11:54:16] &lt;sustrik&gt;      ~1 usec
| [Thursday 17 February 2011] [11:54:53] &lt;yrashk&gt;       NIFs are pretty much like BIFs, implemented directly in the VMs opcode interpreter
| [Thursday 17 February 2011] [11:55:38] &lt;sustrik&gt;      can we do measurements in both erlang and ezmq?
| [Thursday 17 February 2011] [11:55:51] &lt;sustrik&gt;      1. before NIF is called
| [Thursday 17 February 2011] [11:55:57] &lt;sustrik&gt;      2. when C code is invoked
| [Thursday 17 February 2011] [11:56:06] &lt;sustrik&gt;      3. when C code is ready
| [Thursday 17 February 2011] [11:56:10] &lt;yrashk&gt;       btw time meas. takes time too
| [Thursday 17 February 2011] [11:56:19] &lt;sustrik&gt;      4. when erlang resumes execution
| [Thursday 17 February 2011] [11:56:30] &lt;sustrik&gt;      yes
| [Thursday 17 February 2011] [11:56:43] &lt;sustrik&gt;      something like readeing TSC is preferable
| [Thursday 17 February 2011] [11:56:54] &lt;sustrik&gt;      however, i am not sure it&#8217;s available from erlang
| [Thursday 17 February 2011] [11:56:59] &lt;yrashk&gt;       TSC?
| [Thursday 17 February 2011] [11:57:15] &lt;sustrik&gt;      processor tick count
| [Thursday 17 February 2011] [11:58:15] &lt;sustrik&gt;      but we don&#8217;t to do that now
| [Thursday 17 February 2011] [11:58:22] &lt;sustrik&gt;      let&#8217;s use just standard time measurement
| [Thursday 17 February 2011] [11:58:44] &lt;sustrik&gt;      even if single measurement takes 1 usec
| [Thursday 17 February 2011] [11:59:05] &lt;sustrik&gt;      the original 15 usecs should still be visible
| [Thursday 17 February 2011] [12:01:26] &lt;yrashk&gt;       ya
| [Thursday 17 February 2011] [12:02:00] &lt;yrashk&gt;       I usually prefer to think about potential cause of a problem, sometimes logic beats brutal force
| [Thursday 17 February 2011] [12:02:03] &lt;yrashk&gt;       :D
| [Thursday 17 February 2011] [12:04:33] &lt;sustrik&gt;      my experience with tuning is that in most cases you are very surprised when you find out where the bottleneck is
| [Thursday 17 February 2011] [12:05:00] &lt;yrashk&gt;       true
| [Thursday 17 February 2011] [12:07:06] &lt;yrashk&gt;       damn my macbook air is much slower
| [Thursday 17 February 2011] [12:08:10] &lt;yrashk&gt;       ...than my dual quad core mac pro :D
| [Thursday 17 February 2011] [12:09:00] &lt;guido_g&gt;      how comes?
| [Thursday 17 February 2011] [12:09:04] &lt;yrashk&gt;       very weird
| [Thursday 17 February 2011] [12:09:09] &lt;guido_g&gt;      in deed
| [Thursday 17 February 2011] [12:09:15] &lt;yrashk&gt;       in bed
| [Thursday 17 February 2011] [12:09:53] &lt;guido_g&gt;      sustrik: any pgm changes between 2.1.0 und the current git?
| [Thursday 17 February 2011] [12:10:16] &lt;guido_g&gt;      updated zmq to git master and pgm stopped working
| [Thursday 17 February 2011] [12:10:26] &lt;guido_g&gt;      pgm receive
| [Thursday 17 February 2011] [12:10:30] &lt;sustrik&gt;      what&#8217;s the problem?
| [Thursday 17 February 2011] [12:10:59] &lt;guido_g&gt;      epgm messages are not received anymore
| [Thursday 17 February 2011] [12:11:33] &lt;guido_g&gt;      restored the 2.1.0 from the tar and everything was back
| [Thursday 17 February 2011] [12:12:23] &lt;guido_g&gt;      plain amd64 linux (2.6.37) box
| [Thursday 17 February 2011] [12:15:19] &lt;sustrik&gt;      can you report the problem?
| [Thursday 17 February 2011] [12:15:25] &lt;guido_g&gt;      sure
| [Thursday 17 February 2011] [12:15:30] &lt;sustrik&gt;      thanks
| [Thursday 17 February 2011] [12:15:34] &lt;guido_g&gt;      going to write small tests
| [Thursday 17 February 2011] [12:16:02] &lt;sustrik&gt;      post a note to the ML so that steve-o is aware of the problem
| [Thursday 17 February 2011] [12:16:11] &lt;guido_g&gt;      maybe it&#8217;s the python binding...
| [Thursday 17 February 2011] [12:16:23] &lt;guido_g&gt;      yepp
| [Thursday 17 February 2011] [12:16:24] &lt;sustrik&gt;      not likely imo
| [Thursday 17 February 2011] [12:16:37] &lt;guido_g&gt;      no, because i just switched libzmq
| [Thursday 17 February 2011] [12:17:20] &lt;yrashk&gt;       anyway I am off for a nap
| [Thursday 17 February 2011] [12:17:28] &lt;yrashk&gt;       sustrik: thanks a lot for your help!
| [Thursday 17 February 2011] [12:17:33] &lt;guido_g&gt;      good night!
| [Thursday 17 February 2011] [12:17:48] &lt;yrashk&gt;       more like morning here already
| [Thursday 17 February 2011] [12:17:49] &lt;yrashk&gt;       :D
| [Thursday 17 February 2011] [12:17:51] &lt;yrashk&gt;       thanks anyway
| [Thursday 17 February 2011] [12:32:09] &lt;sustrik&gt;      good night
| [Thursday 17 February 2011] [12:40:23] &lt;eyeris&gt;       Am I doing something incorrectly here, or is that &#8220;Resource temporarily unavailable&#8221; message related to some actual resource being in use? I&#8217;ve checked that port 5563 is not in use. What other resource could it be referring to? <a class="reference external" href="http://pastebin.com/SdxBiFAk">http://pastebin.com/SdxBiFAk</a>
| [Thursday 17 February 2011] [12:40:42] &lt;guido_g&gt;      ouch
| [Thursday 17 February 2011] [12:41:05] &lt;guido_g&gt;      the test sender runs into an assert
| [Thursday 17 February 2011] [12:41:27] &lt;guido_g&gt;      Assertion failed: rc == 0 (connect_session.cpp:82)
| [Thursday 17 February 2011] [12:43:05] &lt;eyeris&gt;       guido_g: in my code? I don&#8217;t see that
| [Thursday 17 February 2011] [12:43:13] &lt;guido_g&gt;      no
| [Thursday 17 February 2011] [12:51:56] &lt;guido_g&gt;      mail sent
| [Thursday 17 February 2011] [12:58:02] &lt;guido_g&gt;      eyeris: it&#8217;s a timing problem
| [Thursday 17 February 2011] [12:58:26] &lt;guido_g&gt;      the io thread simply does not have enough time to connect
| [Thursday 17 February 2011] [12:59:17] &lt;guido_g&gt;      eyeris: <a class="reference external" href="https://gist.github.com/832259">https://gist.github.com/832259</a>  &lt;- works
| [Thursday 17 February 2011] [13:02:55] &lt;eyeris&gt;       I understand the idea behind what you&#8217;re saying. In fact, I tried the sleep(1) before the loop before and it didn&#8217;t work. Using your gist I get an error: Assertion failed: <em>tmpbuf &gt; 0 (src/zmq_decoder.cpp:60)
| [Thursday 17 February 2011] [13:03:38] &lt;guido_g&gt;      ouch
| [Thursday 17 February 2011] [13:04:14] &lt;guido_g&gt;      i&#8217;m on zeromq 2.1.0 from the tarball and the latest pyzmq (git master)
| [Thursday 17 February 2011] [13:05:00] &lt;eyeris&gt;       I am on 2.0.10 from pypi
| [Thursday 17 February 2011] [13:05:28] &lt;guido_g&gt;      and zeromq version?
| [Thursday 17 February 2011] [13:05:54] &lt;eyeris&gt;       Same
| [Thursday 17 February 2011] [13:06:09] &lt;guido_g&gt;      explains the assertion
| [Thursday 17 February 2011] [13:06:31] &lt;guido_g&gt;      try to update zeromq to 2.1.0 (from the tarball)
| [Thursday 17 February 2011] [13:15:41] &lt;eyeris&gt;       Alright, I&#8217;ve built and installed 2.1.0 into /opt/zeromq
| [Thursday 17 February 2011] [13:15:53] &lt;eyeris&gt;       I can&#8217;t figure out how to make pyzmq find it though
| [Thursday 17 February 2011] [13:16:13] &lt;eyeris&gt;       There doesn&#8217;t seem to be a &#8211;with-zeromq (or similar) build switch
| [Thursday 17 February 2011] [13:16:48] &lt;guido_g&gt;      from where did you get zeromq before?
| [Thursday 17 February 2011] [13:16:53] &lt;eyeris&gt;       pypi
| [Thursday 17 February 2011] [13:17:03] &lt;guido_g&gt;      not pyzmq
| [Thursday 17 February 2011] [13:17:50] &lt;eyeris&gt;       http://pypi.python.org/pypi/pyzmq-static/2.0.10
| [Thursday 17 February 2011] [13:18:00] &lt;guido_g&gt;      ouch
| [Thursday 17 February 2011] [13:18:01] &lt;eyeris&gt;       That includes the lib
| [Thursday 17 February 2011] [13:19:24] &lt;guido_g&gt;      get rid of it and use the non-static version
| [Thursday 17 February 2011] [13:20:04] &lt;guido_g&gt;      install zeromq using the default settings (using /usr/local/lib)
| [Thursday 17 February 2011] [13:20:18] &lt;guido_g&gt;      then install the non-static pyzmq
| [Thursday 17 February 2011] [13:34:04] &lt;eyeris&gt;       Works now
| [Thursday 17 February 2011] [13:34:05] &lt;eyeris&gt;       Thanks
| [Thursday 17 February 2011] [13:55:48] &lt;fbarriga&gt;     hello everyone
| [Thursday 17 February 2011] [13:57:24] &lt;fbarriga&gt;     there is any trade off on using zmq for non critical latency ? (use it only because is comfortable)
| [Thursday 17 February 2011] [14:03:48] &lt;pieterh&gt;      hi fbarriga
| [Thursday 17 February 2011] [14:03:53] &lt;fbarriga&gt;     hi
| [Thursday 17 February 2011] [14:04:02] &lt;pieterh&gt;      0MQ makes great soup no matter how you slice it
| [Thursday 17 February 2011] [14:04:26] &lt;pieterh&gt;      its speed is just a bonus when you need it
| [Thursday 17 February 2011] [14:04:49] &lt;pieterh&gt;      what&#8217;s your use case?
| [Thursday 17 February 2011] [14:06:06] &lt;fbarriga&gt;     because here I have a program (A) that receive data and send it to another (B) to process it. So I want to monitor B in a gui (C) and I don&#8217;t need a fancy way to send data. But as I&#8217;m already using zmq for comunicate A and B, it can be a good idea to use it to comunicate with the gui
| [Thursday 17 February 2011] [14:06:58] &lt;pieterh&gt;      sure
| [Thursday 17 February 2011] [14:09:41] &lt;fbarriga&gt;     has anyone tested the latency of using an point-to-point channel v/s publisher/subscriber ?
| [Thursday 17 February 2011] [14:10:00] &lt;pieterh&gt;      it&#8217;s the same, unless you ping-pong back
| [Thursday 17 February 2011] [14:14:49] &lt;fbarriga&gt;     but any difference ? not even 1 uS ?
| [Thursday 17 February 2011] [14:15:13] &lt;pieterh&gt;      over the same transport? depends how many messages you are sending, how large they are
| [Thursday 17 February 2011] [14:15:23] &lt;pieterh&gt;      it does not depend on the socket type
| [Thursday 17 February 2011] [14:16:00] &lt;fbarriga&gt;     using unix socket, thousands of msg with a size of 32 bytes
| [Thursday 17 February 2011] [14:16:31] &lt;pieterh&gt;      fbarriga: have you read the documentation yet? the Guide?
| [Thursday 17 February 2011] [14:17:11] &lt;fbarriga&gt;     umm a kind RTFM ?
| [Thursday 17 February 2011] [14:17:34] &lt;pieterh&gt;      no, I want to know how much you know about 0MQ
| [Thursday 17 February 2011] [14:17:45] &lt;fbarriga&gt;     I read it but not completely
| [Thursday 17 February 2011] [14:18:04] &lt;pieterh&gt;      &#8216;point to point channel&#8217; is not a 0MQ term
| [Thursday 17 February 2011] [14:18:14] &lt;fbarriga&gt;     Not too much, I have 2 publishers, one on C++ and other on python feeding a C++ program
| [Thursday 17 February 2011] [14:19:17] &lt;pieterh&gt;      i think your questions are beside the point
| [Thursday 17 February 2011] [14:19:26] &lt;pieterh&gt;      (latency)
| [Thursday 17 February 2011] [14:19:41] &lt;pieterh&gt;      if you are not actually worried about usecs, it&#8217;s irrelevant what I say
| [Thursday 17 February 2011] [14:20:23] &lt;staylor&gt;      something I&#8217;m not very clear on, if I have a server bound to an XREQ with multiple clients bound to REP how exactly could I send a message to a specific client from the server side?  I&#8217;m not very clear on how the addressing works here.
| [Thursday 17 February 2011] [14:20:28] &lt;pieterh&gt;      the usual rule is measure it, don&#8217;t trust others&#8217; opinions
| [Thursday 17 February 2011] [14:20:43] &lt;pieterh&gt;      staylor: read Ch3 of the Guide
| [Thursday 17 February 2011] [14:20:56] &lt;pieterh&gt;      you need an XREP socket to do routing, and we&#8217;re going to rename that a ROUTER socket
| [Thursday 17 February 2011] [14:21:03] &lt;fbarriga&gt;     I&#8217;m worried about uS. The python publisher uses bulk historic data (no latency problem). The C++ publisher receives marketdata in realtime
| [Thursday 17 February 2011] [14:21:32] &lt;pieterh&gt;      fbarriga: ok, that&#8217;s good
| [Thursday 17 February 2011] [14:21:43] &lt;pieterh&gt;      you can try this yourself, it&#8217;s trivial, two test programs in C++
| [Thursday 17 February 2011] [14:21:56] &lt;pieterh&gt;      try pubsub and push-pull
| [Thursday 17 February 2011] [14:21:59] &lt;pieterh&gt;      measure the latency
| [Thursday 17 February 2011] [14:22:20] &lt;fbarriga&gt;     yes, I was working in that way, but trying to avoid work asking here =)
| [Thursday 17 February 2011] [14:22:21] &lt;staylor&gt;      I&#8217;ll look at it again, but out of quick curiosity would messages go to all REP sockets and be filtered or only to the specific client?
| [Thursday 17 February 2011] [14:22:42] &lt;pieterh&gt;      fbarriga: go do your own homework :-)
| [Thursday 17 February 2011] [14:22:48] &lt;pieterh&gt;      come back when you have results for us
| [Thursday 17 February 2011] [14:22:59] &lt;fbarriga&gt;     but is not too easy, event getting the time add some delay
| [Thursday 17 February 2011] [14:23:06] &lt;fbarriga&gt;     ok, thanks for the help
| [Thursday 17 February 2011] [14:23:27] &lt;pieterh&gt;      fbarriga: see how the latency test programs do it
| [Thursday 17 February 2011] [14:24:24] &lt;pieterh&gt;      staylor: clients are usually REQ, not REP
| [Thursday 17 February 2011] [14:24:41] &lt;pieterh&gt;      a REP socket is really for workers
| [Thursday 17 February 2011] [14:25:12] &lt;pieterh&gt;      are the names confusing?
| [Thursday 17 February 2011] [14:25:19] &lt;staylor&gt;      I might be going at this all wrong, but what I&#8217;m looking for is clients that connect to a server and wait for work requests (clients perform a task for the server)
| [Thursday 17 February 2011] [14:25:31] &lt;pieterh&gt;      call them &#8216;workers&#8217;, for sanity&#8217;s sake :-)
| [Thursday 17 February 2011] [14:26:05] &lt;staylor&gt;      alright, so workers connect to the server which then sends them requests
| [Thursday 17 February 2011] [14:26:11] &lt;pieterh&gt;      it round-robins them
| [Thursday 17 February 2011] [14:26:20] &lt;pieterh&gt;      that&#8217;s what an XREQ/DEALER socket does
| [Thursday 17 February 2011] [14:26:27] &lt;pieterh&gt;      deals the cards out
| [Thursday 17 February 2011] [14:26:44] &lt;staylor&gt;      in my scenario I need to send work to specific workers, that&#8217;s where I&#8217;m unclear about how to identify them
| [Thursday 17 February 2011] [14:27:11] &lt;fbarriga&gt;     (any chance to use inproc for two different process ? like shared memory between processes?)
| [Thursday 17 February 2011] [14:27:27] &lt;pieterh&gt;      staylor: so, read Ch3, it is explained in exhaustive detail
| [Thursday 17 February 2011] [14:27:43] &lt;pieterh&gt;      you need REQ sockets for the workers, and XREQ to route to specific workers
| [Thursday 17 February 2011] [14:28:11] &lt;pieterh&gt;      fbarriga: nope, not unless you&#8217;re able to hack together a shmem transport for 0MQ
| [Thursday 17 February 2011] [14:28:14] &lt;staylor&gt;      I think I see where I misunderstood the docs, I&#8217;ll go over chap3 again
| [Thursday 17 February 2011] [14:28:28] &lt;staylor&gt;      thank you
| [Thursday 17 February 2011] [14:28:32] &lt;pieterh&gt;      np
| [Thursday 17 February 2011] [14:29:21] &lt;fbarriga&gt;     anyone has tried ?
| [Thursday 17 February 2011] [14:29:36] &lt;pieterh&gt;      don&#8217;t think so
| [Thursday 17 February 2011] [14:29:48] &lt;pieterh&gt;      it would be fun to do but not portable
| [Thursday 17 February 2011] [15:16:55] &lt;mikko&gt;        evenin&#8217;
| [Thursday 17 February 2011] [15:26:26] &lt;staylor&gt;      is there a way to know if a worker is connected or not, or should that be let to the application to send acknowledgement requests?
| [Thursday 17 February 2011] [15:26:55] &lt;staylor&gt;      for example knowing when the underlying socket is broken?
| [Thursday 17 February 2011] [15:28:13] &lt;Guthur&gt;       staylor, the application will have to take care of the reliability
| [Thursday 17 February 2011] [15:29:34] &lt;staylor&gt;      alright, thank you
| [Thursday 17 February 2011] [15:55:13] &lt;sam`&gt; hi
| [Thursday 17 February 2011] [15:55:34] &lt;sam`&gt; i haven&#8217;t heard back anything from my question yesterday about epgm and data distribution
| [Thursday 17 February 2011] [15:55:45] &lt;sam`&gt; anyone around with some knowledge on this?
| [Thursday 17 February 2011] [15:57:00] &lt;drbobbeaty&gt;   sam: I&#8217;m not one of the main guys, but I&#8217;m using epgm and if I can answer your question, I&#8217;ll give it a try. Can you repeat it (or cut-n-paste it) again?
| [Thursday 17 February 2011] [15:57:33] &lt;Guthur&gt;       sam`, you might try the Mailing list as well
| [Thursday 17 February 2011] [15:58:19] &lt;sam`&gt; drbobbeaty: sure
| [Thursday 17 February 2011] [15:58:39] &lt;sam`&gt; i need to distribute as efficiently as possible 100MB of data to several hundred machines in several datacenters around the world
| [Thursday 17 February 2011] [15:59:08] &lt;sam`&gt; I was looking at multicast, and since my application uses 0MQ, epgm sounds like a good fit
| [Thursday 17 February 2011] [15:59:22] &lt;sam`&gt; but I&#8217;m not sure multicast is even the appopriate solution
| [Thursday 17 February 2011] [16:00:38] &lt;sam`&gt; also, I would like to do source-specific multicast, but I&#8217;m not sure how to do this with 0MQ. in SSM, you need to somehow specify both the source IP and the multicast channel, but I don&#8217;t know how to do this in the epgm://&lt;iface&gt;;&lt;multicast endpoint&gt; syntax
| [Thursday 17 February 2011] [16:01:00] &lt;drbobbeaty&gt;   Wow... 100MB... Honestly, 0MQ is not what I&#8217;d be using - not that it&#8217;s bad, but there are system-level tools to do this far more efficiently. For example, rdist on unix... you set up a &#8220;tree&#8221; of your datacenters where the &#8216;source&#8217; sends to 4 boxes, each of those 4 send to 4 more, etc. Pretty soon it&#8217;s all done.
| [Thursday 17 February 2011] [16:01:48] &lt;drbobbeaty&gt;   As for the source-specific multicast, that&#8217;s not really possible in the 0MQ world because the sender is masked by the OpenPGM/URL scheme.
| [Thursday 17 February 2011] [16:01:49] &lt;lt_schmidt_jr&gt;        Upon advice from the experts I have grabbed the 2.1.0 tarball  instead of the 2.0.10 I have been using with homebrew on OSX
| [Thursday 17 February 2011] [16:01:57] &lt;lt_schmidt_jr&gt;        I am seeing the following error:
| [Thursday 17 February 2011] [16:02:00] &lt;lt_schmidt_jr&gt;        Making check in tests
| [Thursday 17 February 2011] [16:02:01] &lt;lt_schmidt_jr&gt;        make  check-TESTS
| [Thursday 17 February 2011] [16:02:01] &lt;lt_schmidt_jr&gt;        PASS: test_pair_inproc
| [Thursday 17 February 2011] [16:02:01] &lt;lt_schmidt_jr&gt;        PASS: test_pair_ipc
| [Thursday 17 February 2011] [16:02:02] &lt;lt_schmidt_jr&gt;        PASS: test_pair_tcp
| [Thursday 17 February 2011] [16:02:02] &lt;lt_schmidt_jr&gt;        PASS: test_reqrep_inproc
| [Thursday 17 February 2011] [16:02:02] &lt;lt_schmidt_jr&gt;        PASS: test_reqrep_ipc
| [Thursday 17 February 2011] [16:02:03] &lt;lt_schmidt_jr&gt;        PASS: test_reqrep_tcp
| [Thursday 17 February 2011] [16:02:03] &lt;lt_schmidt_jr&gt;        Invalid argument
| [Thursday 17 February 2011] [16:02:03] &lt;lt_schmidt_jr&gt;        nbytes != -1 (tcp_socket.cpp:197)
| [Thursday 17 February 2011] [16:02:04] &lt;lt_schmidt_jr&gt;        FAIL: test_shutdown_stress
| [Thursday 17 February 2011] [16:02:17] &lt;lt_schmidt_jr&gt;        sorry for the paste fail
| [Thursday 17 February 2011] [16:02:47] &lt;lt_schmidt_jr&gt;        so test_shutdown_stress fails when I run make check
| [Thursday 17 February 2011] [16:02:51] &lt;lt_schmidt_jr&gt;        should I worry?
| [Thursday 17 February 2011] [16:03:50] &lt;drbobbeaty&gt;   sam`: If you want to double-check me on the source specific multicast, send something to the mailing list. As for the 100MB file, I think there are better ways - especially since multicast is not routable so you&#8217;d have to make &#8220;tunnels&#8221; and that&#8217;s a lot of work. There are tools/utilities geared for this for unix.
| [Thursday 17 February 2011] [16:04:12] &lt;sam`&gt; drbobbeaty: what do you mean make tunnels?
| [Thursday 17 February 2011] [16:04:44] &lt;drbobbeaty&gt;   lt_schmidt_jr: this is a known issue with 2.1.0 but I *believe</em> it&#8217;s fixed in the master (HEAD) on the git repo.
| [Thursday 17 February 2011] [16:04:59] &lt;sam`&gt; drbobbeaty: afaik multicast is routable
| [Thursday 17 February 2011] [16:05:40] &lt;sam`&gt; in my situation, all network equipment is layer3 capable and supports igmpv3, igmp snooping, pgm and ssm
| [Thursday 17 February 2011] [16:05:55] &lt;lt_schmidt_jr&gt;        drbobbeaty: thanks I think I will hold off, given the issues with the HEAD revision I see on the list
| [Thursday 17 February 2011] [16:06:17] &lt;drbobbeaty&gt;   sam`: I can almost certainly guarantee that it&#8217;s not going to route through the internet. If you have a private WAN, then yes, it can be set up to have one switch send the data to another, but if you&#8217;re betting on the plain old net, I think you&#8217;re going to find it isn&#8217;t.
| [Thursday 17 February 2011] [16:06:38] &lt;sam`&gt; drbobbeaty: yes, you&#8217;re absolutely right
| [Thursday 17 February 2011] [16:07:05] &lt;sam`&gt; but we have dedicated links between our colos and a private network
| [Thursday 17 February 2011] [16:08:34] &lt;drbobbeaty&gt;   sam`: OK.. if you have private WANs then you can route it. However, my point on the best tool for the job stands. You can build something with 0MQ and use epgm, but I think there are better tools like rdist already written that make this so much easier.
| [Thursday 17 February 2011] [16:08:54] &lt;sam`&gt; drbobbeaty: rdist looks cool, but it&#8217;s basically a dump copy, it doesn&#8217;t really help for the distribution problem
| [Thursday 17 February 2011] [16:09:58] &lt;drbobbeaty&gt;   sam`: OK... I&#8217;m missing something. If you have 100MB to move from A to B, then you can put that 100MB in a file, use rdist, load it at the other end. Right? If not, what am I missing about your requirements?
| [Thursday 17 February 2011] [16:10:26] &lt;sam`&gt; it&#8217;s not so much the copy from A to B that is the problem
| [Thursday 17 February 2011] [16:10:38] &lt;sam`&gt; it&#8217;s the distribution from A to B001 to B999
| [Thursday 17 February 2011] [16:11:32] &lt;sam`&gt; right now, we&#8217;re using scp, one machine after the other, which is what has been done for the past few years, and was probably fine with ~20 machines
| [Thursday 17 February 2011] [16:11:49] &lt;sam`&gt; now we have ... &#8220;more&#8221;
| [Thursday 17 February 2011] [16:12:27] &lt;sam`&gt; so I&#8217;m looking for a scalable solution, which obviously makes multicast come to mind
| [Thursday 17 February 2011] [16:12:41] &lt;drbobbeaty&gt;   sam`: If it were put in as a file, then the 1000 machines at B can all read it at the same time. Maybe what you need is an NFS mount for all machines at B to share?
| [Thursday 17 February 2011] [16:13:13] &lt;sam`&gt; drbobbeaty: copying 1 file to 1000 serially, and having 1000 machines pull that 1 file from 1 machine at the same time
| [Thursday 17 February 2011] [16:13:16] &lt;sam`&gt; doesn&#8217;t help at all
| [Thursday 17 February 2011] [16:13:24] &lt;sam`&gt; since you&#8217;ll be sharing the bandwidth of that one machine
| [Thursday 17 February 2011] [16:13:31] &lt;sam`&gt; so no time reduction at all
| [Thursday 17 February 2011] [16:14:52] &lt;sam`&gt; and that&#8217;s even worse when you only want the distribution of that file to take no more than X% of the network capacity
| [Thursday 17 February 2011] [16:15:20] &lt;sam`&gt; (we&#8217;re in a network-latency-critical environment, as is latency between our services as a direct impact on our revenue)
| [Thursday 17 February 2011] [16:15:22] &lt;drbobbeaty&gt;   sam`: if you have a primary box with a 10GbE NIC (or two), then it&#8217;ll be a load, but not a lot.
| [Thursday 17 February 2011] [16:16:05] &lt;drbobbeaty&gt;   sam`: you know your set-up best, and maybe this isn&#8217;t a workable solution. If that&#8217;s the case, then sure, use 0MQ.
| [Thursday 17 February 2011] [16:16:31] &lt;drbobbeaty&gt;   sam`: You can write a &#8220;sender&#8221; and a &#8220;receiver&#8221; PUB/SUB and then make sure it&#8217;s routed, and off you go.
| [Thursday 17 February 2011] [16:16:48] &lt;drbobbeaty&gt;   The examples in The Guide are really about all you need.
| [Thursday 17 February 2011] [16:17:04] &lt;sam`&gt; it sure is a complex problem, and I&#8217;m not a network expert by any means
| [Thursday 17 February 2011] [16:17:26] &lt;sam`&gt; but so far all existing solutions like puppet file serving, rdist, etc, all pull from one single machine, in unicast
| [Thursday 17 February 2011] [16:17:45] &lt;sam`&gt; which puts a lot of load on that one machine, and the network, because you have N concurrent data streams
| [Thursday 17 February 2011] [16:18:25] &lt;sam`&gt; that&#8217;s why multicast looked interesting to me because I feel like it&#8217;s (theoratically) the most &#8220;efficient&#8221; in the number of network packets transmitted
| [Thursday 17 February 2011] [16:19:26] &lt;drbobbeaty&gt;   sam`: But it&#8217;s not &#8220;free&#8221;... if you have a failure, and a NACK is sent, you&#8217;ll have to send that packet again - and with a WAN, the possibility goes up for that to happen.
| [Thursday 17 February 2011] [16:19:46] &lt;drbobbeaty&gt;   sam`: you are going to need a networking expert for this to be really efficient and workable.
| [Thursday 17 February 2011] [16:20:43] &lt;sam`&gt; i&#8217;m afraid so
| [Thursday 17 February 2011] [16:21:04] &lt;sam`&gt; and our network guy is in another continent building our next colo :| [Thursday 17 February 2011] [16:22:25] &lt;sam`&gt; drbobbeaty: about my second question about SSM, any idea how to specify the source to 0MQ ?
| [Thursday 17 February 2011] [16:29:30] &lt;drbobbeaty&gt;   sam`: As for the source-specific multicast, that&#8217;s not really possible in the 0MQ world because the sender is masked by the OpenPGM/URL scheme.
| [Thursday 17 February 2011] [16:30:00] &lt;drbobbeaty&gt;   sam`: but ask the mailing list to double-check me on this. I just don&#8217;t see how with the APIs I&#8217;ve been using.
| [Thursday 17 February 2011] [16:30:44] &lt;sam`&gt; kthx
| [Thursday 17 February 2011] [16:35:05] &lt;sam`&gt; yep, I believe this could/should be added to pgm_socket.cpp to handle the source address somehow and do a pgm_setsockopt(sock, IPPROTO_PGM, PGM_MSFILTER, ...);
| [Thursday 17 February 2011] [16:35:54] &lt;sam`&gt; if I settle on using 0MQ for the file distribution, I&#8217;ll make a patch
| [Thursday 17 February 2011] [16:55:28] &lt;sustrik&gt;      lt_schmidt_jr: can you possibly find out what&#8217;s the errno when the test fails?
| [Thursday 17 February 2011] [16:57:12] &lt;lt_schmidt_jr&gt;        let me see
| [Thursday 17 February 2011] [16:58:20] &lt;mikko&gt;        sustrik: steve-o suspects that openpgm with the changes needed for zeromq integration will be released next week around thu-fri
| [Thursday 17 February 2011] [16:59:46] &lt;lt_schmidt_jr&gt;        sustrik: this is what I am seeing: Invalid argumentn Nbytes != -1 (tcp_socket.cpp:197)
| [Thursday 17 February 2011] [17:01:43] &lt;lt_schmidt_jr&gt;        sustrik: I see what you are asking for, let me try to instrument the source
| [Thursday 17 February 2011] [17:02:31] &lt;sustrik&gt;      ah, invalid argument
| [Thursday 17 February 2011] [17:02:36] &lt;sustrik&gt;      i&#8217;ve missed that
| [Thursday 17 February 2011] [17:02:38] &lt;sustrik&gt;      sorry
| [Thursday 17 February 2011] [17:02:43] &lt;sustrik&gt;      mikko: great
| [Thursday 17 February 2011] [17:04:58] &lt;sustrik&gt;      hm, POSIX doesn&#8217;t allow for send() returning EINVAL
| [Thursday 17 February 2011] [17:05:36] &lt;sustrik&gt;      Linux docs are not very helpful either:
| [Thursday 17 February 2011] [17:05:38] &lt;sustrik&gt;      &#8220;EINVAL Invalid argument passed.&#8221;
| [Thursday 17 February 2011] [17:06:25] &lt;sustrik&gt;      lt_schmidt_jr: is that linux?
| [Thursday 17 February 2011] [17:06:50] &lt;lt_schmidt_jr&gt;        sustrik: mac osx
| [Thursday 17 February 2011] [17:07:04] &lt;sustrik&gt;      can you check &#8220;man send&#8221;
| [Thursday 17 February 2011] [17:07:10] &lt;sustrik&gt;      and look for EINVAL?
| [Thursday 17 February 2011] [17:07:14] &lt;lt_schmidt_jr&gt;        checking
| [Thursday 17 February 2011] [17:08:34] &lt;lt_schmidt_jr&gt;        sustik:  [EINVAL]           The sum of the iov_len values overflows an ssize_t.
| [Thursday 17 February 2011] [17:09:53] &lt;sustrik&gt;      funny
| [Thursday 17 February 2011] [17:10:01] &lt;sustrik&gt;      that applies to sendmsg
| [Thursday 17 February 2011] [17:10:05] &lt;lt_schmidt_jr&gt;        yes
| [Thursday 17 February 2011] [17:10:18] &lt;sustrik&gt;      in this case its simple send that returns EINVAL
| [Thursday 17 February 2011] [17:10:56] &lt;lt_schmidt_jr&gt;        send() does not mention EINVAL in man
| [Thursday 17 February 2011] [17:11:30] &lt;lt_schmidt_jr&gt;        sustrik: where did you see EINVAL?
| [Thursday 17 February 2011] [17:13:17] &lt;sustrik&gt;      &#8220;Invalid argument&#8221;
| [Thursday 17 February 2011] [17:13:34] &lt;sustrik&gt;      = EINVAL
| [Thursday 17 February 2011] [17:14:43] &lt;matott&gt;       I&#8217;m starting with zmq. As an overlay network zmq it uses messages and doesn&#8217;t provide a streaming api. Are there any fragmentation libraries to emulate streaming?
| [Thursday 17 February 2011] [17:16:48] &lt;lt_schmidt_jr&gt;        sustrik: this is odd, I have added a printf just before the failing assert to see the error number, and the failure changed to mailbox.cpp
| [Thursday 17 February 2011] [17:16:56] &lt;matott&gt;       I had a look at mongrel, but it seemed to me from the demos that the applications had to handle it itself.
| [Thursday 17 February 2011] [17:17:42] &lt;sustrik&gt;      what assert?
| [Thursday 17 February 2011] [17:18:25] &lt;lt_schmidt_jr&gt;        Nbytes != -1 (tcp_socket.cpp:197)
| [Thursday 17 February 2011] [17:18:33] &lt;sustrik&gt;      in mailbox.cpp?
| [Thursday 17 February 2011] [17:20:16] &lt;lt_schmidt_jr&gt;        I may be very confused, but the tcp_scoket.cpp:197 contains:  errno_assert (nbytes != -1);
| [Thursday 17 February 2011] [17:21:04] &lt;sustrik&gt;      &#8220;this is odd, I have added a printf just before the failing assert to see the error number, and the failure changed to mailbox.cpp&#8221;
| [Thursday 17 February 2011] [17:22:28] &lt;lt_schmidt_jr&gt;        but once I try to print the the errno in tcp_socket.cpp just before errno_assert in tcp_socket.cpp, the failure becomes: Assertion failed: nbytes == sizeof (command_t) (mailbox.cpp:193)
| [Thursday 17 February 2011] [17:22:39] &lt;sustrik&gt;      aha
| [Thursday 17 February 2011] [17:22:46] &lt;sustrik&gt;      that&#8217;s a known problem with OSX
| [Thursday 17 February 2011] [17:23:06] &lt;sustrik&gt;      OSX has small default socket buffers
| [Thursday 17 February 2011] [17:23:15] &lt;sustrik&gt;      and resizing them seems to be broken
| [Thursday 17 February 2011] [17:23:38] &lt;cremes&gt;       sustrik: right... i have my little local &#8220;patch&#8221; that solves that for me on osx
| [Thursday 17 February 2011] [17:23:57] &lt;cremes&gt;       maybe lt_schmidt_jr can use the same thing until it gets fixed in master
| [Thursday 17 February 2011] [17:23:59] &lt;sustrik&gt;      yup, it would be nice to solve it in systemic way
| [Thursday 17 February 2011] [17:24:06] &lt;sustrik&gt;      however, i have no OSX box...
| [Thursday 17 February 2011] [17:24:29] &lt;sustrik&gt;      as for the tcp_socket/EINVAL error that&#8217;s plain strange
| [Thursday 17 February 2011] [17:24:46] &lt;sustrik&gt;      it looks like the OS is returning undocumented error :(
| [Thursday 17 February 2011] [17:25:04] &lt;lt_schmidt_jr&gt;        hey, its like being back on Windows
| [Thursday 17 February 2011] [17:25:08] &lt;lt_schmidt_jr&gt;        :)
| [Thursday 17 February 2011] [17:25:43] &lt;sustrik&gt;      shrug
| [Thursday 17 February 2011] [17:26:15] &lt;lt_schmidt_jr&gt;        well, its ok, if I can get a patch, that would be great  - we would be deploying on CentOS
| [Thursday 17 February 2011] [17:26:26] &lt;lt_schmidt_jr&gt;        if I can get by for develpment
| [Thursday 17 February 2011] [17:28:02] &lt;lt_schmidt_jr&gt;        cremes: what version does you patch ... patch?
| [Thursday 17 February 2011] [17:29:09] &lt;cremes&gt;       lt_schmidt_jr: it&#8217;s against master
| [Thursday 17 February 2011] [17:29:10] &lt;cremes&gt;       http://article.gmane.org/gmane.network.zeromq.devel/7146/match=old%5fsndbuf
| [Thursday 17 February 2011] [17:30:17] &lt;lt_schmidt_jr&gt;        cremes: thanks
| [Thursday 17 February 2011] [17:31:02] &lt;lt_schmidt_jr&gt;        Should I be using master? I just went from 2.0.10 which homebrew installed to 2.1.0 tarball
| [Thursday 17 February 2011] [17:31:19] &lt;lt_schmidt_jr&gt;        based on your suggestion
| [Thursday 17 February 2011] [17:31:35] &lt;cremes&gt;       lt_schmidt_jr: you should be; however, that little patch i just gave you should also work on 2.0.10 if you are happy with that release
| [Thursday 17 February 2011] [17:33:20] &lt;lt_schmidt_jr&gt;        Thanks. I will stay with the 2.1.0 tarball - I have already fixed the java tests - they were not exiting since sockets were not closed before context.term()
| [Thursday 17 February 2011] [17:33:50] &lt;lt_schmidt_jr&gt;        My question is more 2.1.0 tar on the zmq page vs latest git
| [Thursday 17 February 2011] [17:34:17] &lt;lt_schmidt_jr&gt;        a little nervous about HEAD revision
| [Thursday 17 February 2011] [17:37:54] &lt;cremes&gt;       lt_schmidt_jr: HEAD is likely more stable than 2.1.0 tarball; <em>lots</em> of fixes including another mailbox assert on osx
| [Thursday 17 February 2011] [17:38:05] &lt;cremes&gt;       given a choice between the tarball and master, use master
| [Thursday 17 February 2011] [17:38:30] &lt;lt_schmidt_jr&gt;        cremes: thank you
| [Thursday 17 February 2011] [17:38:36] &lt;cremes&gt;       you are welcome
| [Thursday 17 February 2011] [17:38:51] &lt;cremes&gt;       if you have fixes for the java tests, please contribute them back
| [Thursday 17 February 2011] [17:46:26] &lt;lt_schmidt_jr&gt;        I have not been getting responses from gonzalo on the mvn issues, so not sure how to contribute (its just 4 lines of socket.close())
| [Thursday 17 February 2011] [17:46:57] &lt;lt_schmidt_jr&gt;        to be fair to gonzalo, first he was gone, then he responded, I was gone, now he is gone ...
| [Thursday 17 February 2011] [19:14:24] &lt;gui81&gt;        anyone there
| [Thursday 17 February 2011] [19:15:44] &lt;gui81&gt;        is it possible to do this: <a class="reference external" href="http://pastebin.com/8KHzgu3a">http://pastebin.com/8KHzgu3a</a>
| [Thursday 17 February 2011] [19:16:42] &lt;gui81&gt;        I am trying to publish to <a class="reference external" href="tcp://">tcp://</a><em>:5555 and subscribe to tcp://localhost:5555, but it doesn&#8217;t seem to work
| [Thursday 17 February 2011] [19:17:53] &lt;gui81&gt;        I can get the Hello World from pub_thread and Hello World from sub_thread messages to print out, but it doesn&#8217;t seem to publish from pub_main or subscribe from sub_main
| [Thursday 17 February 2011] [19:27:18] &lt;lt_schmidt_jr&gt;        Regarding the named sockets - if I have a publisher with named subscribers that are connected to it. When a subscriber goes away and reconnects, is there any way to know if the subscriber has missed messages?
| [Thursday 17 February 2011] [19:27:35] &lt;gui81&gt;        nevermind, after reading through the Problem Solver, I realized that I didn&#8217;t have setsockopt properly set the ZMQ_SUBSCRIBE option
| [Thursday 17 February 2011] [19:34:12] &lt;lt_schmidt_jr&gt;        sustrik: this may be a question for you
| [Thursday 17 February 2011] [19:34:42] &lt;lt_schmidt_jr&gt;        sustrik: how do i know (when using a named socket) if I have missed messages
| [Thursday 17 February 2011] [19:37:23] &lt;lt_schmidt_jr&gt;        named socket = DURABLE socket
| [Thursday 17 February 2011] [19:39:33] &lt;cremes&gt;       lt_schmidt_jr: a PUB socket is like a radio broadcast
| [Thursday 17 February 2011] [19:39:49] &lt;cremes&gt;       if you aren&#8217;t connected when some messages go out, you miss them and never know it
| [Thursday 17 February 2011] [19:40:11] &lt;lt_schmidt_jr&gt;        even if I connect with a durable socket
| [Thursday 17 February 2011] [19:40:13] &lt;lt_schmidt_jr&gt;        ?
| [Thursday 17 February 2011] [19:40:16] &lt;lt_schmidt_jr&gt;        then disconnect
| [Thursday 17 February 2011] [19:40:21] &lt;lt_schmidt_jr&gt;        and come back?
| [Thursday 17 February 2011] [19:40:30] &lt;cremes&gt;       if you disconnect, your queue is flushed
| [Thursday 17 February 2011] [19:40:51] &lt;lt_schmidt_jr&gt;        so durable sockets don&#8217;t work with pub/sub
| [Thursday 17 February 2011] [19:40:52] &lt;cremes&gt;       you&#8217;ll have to detect this via a sequence number gap (or similar) in the broadcast messages
| [Thursday 17 February 2011] [19:41:04] &lt;cremes&gt;       perhaps i don&#8217;t understand what you mean by durable socket
| [Thursday 17 February 2011] [19:41:13] &lt;cremes&gt;       never heard of one
| [Thursday 17 February 2011] [19:41:29] &lt;lt_schmidt_jr&gt;        its in the guide
| [Thursday 17 February 2011] [19:42:18] &lt;cremes&gt;       i&#8217;ll look in a minute...
| [Thursday 17 February 2011] [19:42:26] &lt;cremes&gt;       if you can provide a link, that would be best
| [Thursday 17 February 2011] [19:44:20] &lt;lt_schmidt_jr&gt;        http://zguide.zeromq.org/chapter:all#toc37
| [Thursday 17 February 2011] [19:56:57] &lt;lt_schmidt_jr&gt;        I guess I should just try it out
| [Thursday 17 February 2011] [20:01:02] &lt;cremes&gt;       lt_schmidt_jr: ok, i hadn&#8217;t heard this term before
| [Thursday 17 February 2011] [20:01:19] &lt;cremes&gt;       but note that it *only</em> keeps the send buffer around
| [Thursday 17 February 2011] [20:01:32] &lt;cremes&gt;       anything in transit or in the receiver&#8217;s OS buffers or queue will be lost
| [Thursday 17 February 2011] [20:01:49] &lt;cremes&gt;       so you probably still need to be able to identity gaps and recover from them
| [Thursday 17 February 2011] [20:02:10] &lt;lt_schmidt_jr&gt;        how does that interact with INPROC
| [Thursday 17 February 2011] [20:02:17] &lt;lt_schmidt_jr&gt;        loss is still possible?
| [Thursday 17 February 2011] [20:07:18] &lt;cremes&gt;       lt_schmidt_jr: i don&#8217;t know
| [Thursday 17 February 2011] [20:07:25] &lt;cremes&gt;       that&#8217;s a good question for the mailing list
| [Thursday 17 February 2011] [20:07:33] &lt;lt_schmidt_jr&gt;        thanks
| [Thursday 17 February 2011] [20:08:40] &lt;lt_schmidt_jr&gt;        I have subscriber sockets on the server on behalf of the websockets that may get disconnected
| [Thursday 17 February 2011] [20:08:59] &lt;lt_schmidt_jr&gt;        I actually have them run for a bit to see if client websocket reconects
| [Thursday 17 February 2011] [20:10:33] &lt;lt_schmidt_jr&gt;        but I wonder if I can terminate them instead
| [Thursday 17 February 2011] [20:10:49] &lt;lt_schmidt_jr&gt;        if they DURABLE
| [Thursday 17 February 2011] [20:21:20] &lt;stodge&gt;       Is there a pyzmq example of using PGM?
| [Thursday 17 February 2011] [20:36:49] &lt;jugg&gt; yrashk, fyi, &#8216;ezmq&#8217; is already used for an Eiffel 0mq binding.
| [Thursday 17 February 2011] [20:37:47] &lt;yrashk&gt;       jugg: oh well
| [Thursday 17 February 2011] [20:37:53] &lt;yrashk&gt;       who uses eiffel anyway?
| [Thursday 17 February 2011] [20:38:16] &lt;jugg&gt; how about enifzmq ?
| [Thursday 17 February 2011] [20:38:28] &lt;yrashk&gt;       horrible :D
| [Thursday 17 February 2011] [20:38:30] &lt;jugg&gt; :)
| [Thursday 17 February 2011] [20:38:58] &lt;yrashk&gt;       btw apparently ezmq is faster than erlzmq
| [Thursday 17 February 2011] [20:39:00] &lt;yrashk&gt;       up to 2x
| [Thursday 17 February 2011] [20:39:28] &lt;jugg&gt; what changed?  I read some of the backlog... your original tests showed similar performance... how&#8217;d you up it?
| [Thursday 17 February 2011] [20:41:22] &lt;yrashk&gt;       jugg: well I don&#8217;t quite know yet
| [Thursday 17 February 2011] [20:41:24] &lt;yrashk&gt;       it warmed up :D
| [Thursday 17 February 2011] [20:41:38] &lt;yrashk&gt;       I rewrote it form scratch as a NIF as you can see
| [Thursday 17 February 2011] [20:41:55] &lt;yrashk&gt;       from*
| [Thursday 17 February 2011] [20:42:54] &lt;jugg&gt; yes, I&#8217;m stuck on R13B04 unfortunately.
| [Thursday 17 February 2011] [20:43:10] &lt;yrashk&gt;       and it can reach about 60-80K on my mac pro as opposed to 30K with erlzmq
| [Thursday 17 February 2011] [20:43:38] &lt;yrashk&gt;       I would assume this is because there is not so much communication overhead now
| [Thursday 17 February 2011] [20:44:00] &lt;jugg&gt; that is ezmq/ezmq or erlang/ezmq ?
| [Thursday 17 February 2011] [20:44:05] &lt;jugg&gt; eh
| [Thursday 17 February 2011] [20:44:08] &lt;jugg&gt; zmq/ezmq
| [Thursday 17 February 2011] [20:45:43] &lt;jugg&gt; I mean I saw something about testing C zmq to erlang zmq.
| [Thursday 17 February 2011] [20:46:29] &lt;jugg&gt; those 60-80k is ezmq to ezmq?
| [Thursday 17 February 2011] [20:47:38] &lt;yrashk&gt;       yes
| [Thursday 17 February 2011] [21:02:44] &lt;jugg&gt; yrashk, do you plan on making these bindings usable for receiving messages without having to call recv(noblock) on an interval? If so, how?
| [Thursday 17 February 2011] [21:03:46] &lt;yrashk&gt;       jugg: you mean nb recv?
| [Thursday 17 February 2011] [21:05:11] &lt;jugg&gt; I mean you can&#8217;t call zmq_poll, and there is no out of band recv support.  So, you either have to call recv on an interval, or call it and block the vm.
| [Thursday 17 February 2011] [21:05:35] &lt;yrashk&gt;       yes right now what you can see there is brecv()
| [Thursday 17 February 2011] [21:05:40] &lt;yrashk&gt;       a blocking recv
| [Thursday 17 February 2011] [21:05:52] &lt;yrashk&gt;       and here I have a non blocking recv() in my WIP
| [Thursday 17 February 2011] [21:06:04] &lt;yrashk&gt;       right now I am solving this with having a thread per socket
| [Thursday 17 February 2011] [21:06:57] &lt;yrashk&gt;       it works but only for some time, I have a bug somewhere
| [Thursday 17 February 2011] [21:07:00] &lt;yrashk&gt;       that causes a crash
| [Thursday 17 February 2011] [21:07:08] &lt;yrashk&gt;       that&#8217;s why I am not committing it yet
| [Thursday 17 February 2011] [21:18:51] &lt;jugg&gt; Why is &#8216;send&#8217; not called &#8216;bsend&#8217;?
| [Thursday 17 February 2011] [21:18:57] &lt;jugg&gt; yrashk
| [Thursday 17 February 2011] [21:20:41] &lt;yrashk&gt;       jugg: because it&#8217;s not inherently a waiting operation
| [Thursday 17 February 2011] [21:20:56] &lt;yrashk&gt;       you can use noblock flag for it
| [Thursday 17 February 2011] [21:21:32] &lt;jugg&gt; and you can&#8217;t in brecv?
| [Thursday 17 February 2011] [21:22:14] &lt;yrashk&gt;       you can, but the nature of recv is different
| [Thursday 17 February 2011] [21:22:56] &lt;yrashk&gt;       it is inherently a waiting operation
| [Thursday 17 February 2011] [21:30:25] &lt;yrashk&gt;       nb recv() is about 10 times slower than blocking
| [Thursday 17 February 2011] [21:45:42] &lt;jugg&gt; yrashk, is it possible to call an escript function using apply()?  I tried using ?MODULE for the module name, but that didn&#8217;t work...  I&#8217;m trying to get those perf tests to run under R13B04.
| [Thursday 17 February 2011] [21:49:33] &lt;yrashk&gt;       jugg -mode(compile) will help with the ?MODULE thing afair
| [Thursday 17 February 2011] [21:51:28] &lt;yrashk&gt;       <em>if I am not mistaken</em>
| [Thursday 17 February 2011] [21:52:43] &lt;jugg&gt; that worked, thanks.
| [Thursday 17 February 2011] [21:54:52] &lt;yrashk&gt;       yw
| [Thursday 17 February 2011] [22:58:13] &lt;jugg&gt; yrashk, <a class="reference external" href="https://gist.github.com/833227">https://gist.github.com/833227</a> is what I&#8217;ll commit on csrl/erlzmq.  Do you oppose being labeled the author?
| [Thursday 17 February 2011] [23:36:48] &lt;jugg&gt; yrashk, if the ezmq:recv concept was also used for ezmq:send and for a ezmq:poll implementation, those bindings would become quite usable.  Nice (and fast) work.
| [Friday 18 February 2011] [00:22:58] &lt;yrashk&gt; jugg: I don&#8217;t oppose
| [Friday 18 February 2011] [00:23:26] &lt;yrashk&gt; jugg: you think so? I might try doing recv trick with send, too
| [Friday 18 February 2011] [00:23:34] &lt;yrashk&gt; but recv is quite slow
| [Friday 18 February 2011] [00:23:45] &lt;yrashk&gt; brecv is much faster
| [Friday 18 February 2011] [00:27:56] &lt;jugg&gt;   how many cpu/cores do you have?
| [Friday 18 February 2011] [00:32:40] &lt;yrashk&gt; 8 (16 virtual)
| [Friday 18 February 2011] [00:33:08] &lt;yrashk&gt; dual quadcore
| [Friday 18 February 2011] [00:35:18] &lt;jugg&gt;   it&#8217;d be interesting to know what the scheduler is doing then... playing with thread affinity could be interesting.  10x slow down seems odd.
| [Friday 18 February 2011] [00:37:04] &lt;yrashk&gt; ya I am not sure what&#8217;s happening
| [Friday 18 February 2011] [00:37:10] &lt;yrashk&gt; but recv is about 10 times slower than brecv
| [Friday 18 February 2011] [00:37:21] &lt;yrashk&gt; there&#8217;s certainly <em>some</em> overhead
| [Friday 18 February 2011] [00:37:29] &lt;yrashk&gt; but I doubt there is that much of an overhead
| [Friday 18 February 2011] [00:38:52] &lt;yrashk&gt; although who knows
| [Friday 18 February 2011] [00:38:56] &lt;yrashk&gt; recv is pretty tricky
| [Friday 18 February 2011] [00:39:10] &lt;yrashk&gt; push, pull, recv, end
| [Friday 18 February 2011] [00:39:12] &lt;yrashk&gt; <em>send
| [Friday 18 February 2011] [00:39:13] &lt;jugg&gt;   wild guess, but receiver_thread&#8217;s enif_send() is the likely candidate since it is out of band, but brecv, the erlang scheduler is already blocking for the result.
| [Friday 18 February 2011] [00:39:49] &lt;yrashk&gt; it is the candidate
| [Friday 18 February 2011] [00:39:58] &lt;yrashk&gt; but I have no idea how else can you communicate result back
| [Friday 18 February 2011] [00:39:59] &lt;yrashk&gt; ;)
| [Friday 18 February 2011] [00:40:42] &lt;yrashk&gt; also I suspect that ezmq is leaking memory
| [Friday 18 February 2011] [00:40:50] &lt;yrashk&gt; but that should be fixable since its pretty small
| [Friday 18 February 2011] [00:40:55] &lt;yrashk&gt; shouldn&#8217;t be that hard to trace the leak
| [Friday 18 February 2011] [00:41:01] &lt;yrashk&gt; I have no proof of leaking yet tho
| [Friday 18 February 2011] [00:41:51] &lt;jugg&gt;   maybe figure out a batch recv implementation... it&#8217;ll loop until zmq_recv(noblock) returns eagain (or a max number is hit), then return the batch result.  Certainly useful for when SNDMORE exists.
| [Friday 18 February 2011] [00:42:22] &lt;yrashk&gt; yeah I haven&#8217;t even begin to deal with sndmore
| [Friday 18 February 2011] [00:42:25] &lt;yrashk&gt; was out of scope
| [Friday 18 February 2011] [00:42:49] &lt;yrashk&gt; if you only you can tell erlang to designate a scheduler to only one process
| [Friday 18 February 2011] [00:43:04] &lt;yrashk&gt; that is the one that talks to the NIF
| [Friday 18 February 2011] [00:43:12] &lt;yrashk&gt; this way blocking would be irrelevant
| [Friday 18 February 2011] [00:43:12] &lt;yrashk&gt; :D
| [Friday 18 February 2011] [00:44:28] &lt;yrashk&gt; but I don&#8217;t see any way to do so
| [Friday 18 February 2011] [00:46:37] &lt;yrashk&gt; sigh
| [Friday 18 February 2011] [00:49:12] &lt;jugg&gt;   I think you&#8217;ll need to refine your get/setsockopt implementation... zmq is rather exact about value lengths.  Also, not all socket options are valid for &#8216;get&#8217;.
| [Friday 18 February 2011] [00:49:31] &lt;yrashk&gt; I am ready to merge pull reqs
| [Friday 18 February 2011] [00:49:39] &lt;jugg&gt;   :)
| [Friday 18 February 2011] [00:49:39] &lt;yrashk&gt; I&#8217;d rather focus on performance issues right now
| [Friday 18 February 2011] [00:49:44] &lt;yrashk&gt; that was the original intention
| [Friday 18 February 2011] [00:49:51] &lt;yrashk&gt; even though it is faster than erlzmq
| [Friday 18 February 2011] [00:49:56] &lt;yrashk&gt; there&#8217;s still a lot of work
| [Friday 18 February 2011] [00:50:12] &lt;yrashk&gt; so if you can actually help me with sockopt thing, I will greatly appreciate that
| [Friday 18 February 2011] [00:50:17] &lt;yrashk&gt; although you&#8217;re on R13 :-(
| [Friday 18 February 2011] [00:51:09] &lt;jugg&gt;   yah, I can&#8217;t even compile it... The best I can do is refer you to csrl/erlzmq implementation.
| [Friday 18 February 2011] [00:51:18] &lt;yrashk&gt; re sockopt and stuff: after all ezmq is very new, I spent like 3 hours with it or so
| [Friday 18 February 2011] [00:51:47] &lt;yrashk&gt; well you can also install R14 somewhere... hehehe :)
| [Friday 18 February 2011] [00:51:50] &lt;jugg&gt;   :)
| [Friday 18 February 2011] [00:53:29] &lt;yrashk&gt; I am really trying to understand how to get recv almost as fast as brecv
| [Friday 18 February 2011] [00:56:25] &lt;yrashk&gt; I have a rought idea of msend
| [Friday 18 February 2011] [00:56:31] &lt;yrashk&gt; but it&#8217;s too vague
| [Friday 18 February 2011] [00:57:42] &lt;jugg&gt;   ezmq_nif_recv should directly call zmq_recv(noblock|flags) and only if it returns EAGAIN do you hand it off to the receive_thread.
| [Friday 18 February 2011] [00:58:10] &lt;yrashk&gt; or even asend.. hey this is an idea!
| [Friday 18 February 2011] [00:58:28] &lt;jugg&gt;   well, hand it off if (flags &amp; noblock) == 0.
| [Friday 18 February 2011] [00:58:31] &lt;yrashk&gt; jugg: hey, not a bad idea
| [Friday 18 February 2011] [00:58:39] &lt;jugg&gt;   it is what I do in erlzmq...
| [Friday 18 February 2011] [00:59:38] &lt;yrashk&gt; just tested brecv again on this mac pro just in case
| [Friday 18 February 2011] [00:59:41] &lt;yrashk&gt; 66K
| [Friday 18 February 2011] [00:59:46] &lt;yrashk&gt; twice as good as erlzmq
| [Friday 18 February 2011] [00:59:48] &lt;yrashk&gt; still there, good
| [Friday 18 February 2011] [01:00:48] &lt;yrashk&gt; now, recv
| [Friday 18 February 2011] [01:01:17] &lt;yrashk&gt; 27K
| [Friday 18 February 2011] [01:01:38] &lt;yrashk&gt; hm not 10 times, roughly 2 times
| [Friday 18 February 2011] [01:01:53] &lt;yrashk&gt; well I didn&#8217;t recv on mac pro before yet
| [Friday 18 February 2011] [01:01:56] &lt;yrashk&gt; only on macbook air
| [Friday 18 February 2011] [01:02:02] &lt;yrashk&gt; which is much slower and fewer cores
| [Friday 18 February 2011] [01:12:17] &lt;yrashk&gt; jugg: horaay
| [Friday 18 February 2011] [01:12:55] &lt;jugg&gt;   the suspense...
| [Friday 18 February 2011] [01:13:01] &lt;yrashk&gt; now recv is more or less on par with brecv
| [Friday 18 February 2011] [01:13:06] &lt;yrashk&gt; deviation is minimal
| [Friday 18 February 2011] [01:13:15] &lt;jugg&gt;   good deal
| [Friday 18 February 2011] [01:13:30] &lt;yrashk&gt; thanks a lot!
| [Friday 18 February 2011] [01:15:16] &lt;yrashk&gt; committed
| [Friday 18 February 2011] [01:16:02] &lt;yrashk&gt; jugg: https://github.com/yrashk/ezmq/commit/77060d1b74d37c91ac7b403c90ea84095d30e5b9
| [Friday 18 February 2011] [01:20:07] &lt;yrashk&gt; now... how can we make it even faster?
| [Friday 18 February 2011] [01:20:18] &lt;jugg&gt;   nice.  so, your old recv performed similarly to erlzmq?
| [Friday 18 February 2011] [01:20:32] &lt;yrashk&gt; I haven&#8217;t read erlzmq, honestly
| [Friday 18 February 2011] [01:20:47] &lt;yrashk&gt; my recv was just unconditionally handing commands to the thread
| [Friday 18 February 2011] [01:20:50] &lt;yrashk&gt; now it checks first
| [Friday 18 February 2011] [01:21:02] &lt;jugg&gt;   you said it was doing 27K msg/s?  erlzmq was about the same, yes?
| [Friday 18 February 2011] [01:21:03] &lt;yrashk&gt; commands off</em>
| [Friday 18 February 2011] [01:21:19] &lt;yrashk&gt; no, current codebase is within 60-80K msg/s
| [Friday 18 February 2011] [01:21:31] &lt;yrashk&gt; that was for brecv prior to that commit
| [Friday 18 February 2011] [01:21:32] &lt;jugg&gt;   yah, sorry, I mean the old version.
| [Friday 18 February 2011] [01:21:38] &lt;yrashk&gt; and recv was roughly 30K
| [Friday 18 February 2011] [01:21:46] &lt;yrashk&gt; and now recv is on par with brecv
| [Friday 18 February 2011] [01:21:51] &lt;jugg&gt;   ok
| [Friday 18 February 2011] [01:22:04] &lt;yrashk&gt; because if there&#8217;s a lot of messages it does pretty much what brecv oes
| [Friday 18 February 2011] [01:22:05] &lt;yrashk&gt; does
| [Friday 18 February 2011] [01:22:11] &lt;yrashk&gt; thanks to your suggestion
| [Friday 18 February 2011] [01:22:23] &lt;jugg&gt;   that makes me think that the message passing out of the driver (nif/port) is the difference... a port driver always has to do message passing.
| [Friday 18 February 2011] [01:22:32] &lt;yrashk&gt; yes
| [Friday 18 February 2011] [01:22:38] &lt;yrashk&gt; and this is why I wrote NIF in the first place
| [Friday 18 February 2011] [01:22:46] &lt;yrashk&gt; I blamed port comm for delays
| [Friday 18 February 2011] [01:23:06] &lt;yrashk&gt; and apparently it can attribute to about 2x diff in timming
| [Friday 18 February 2011] [01:23:11] &lt;yrashk&gt; timing*
| [Friday 18 February 2011] [01:23:41] &lt;jugg&gt;   well, I guess that is a bit of the reason NIFs exist anyway...
| [Friday 18 February 2011] [01:23:54] &lt;yrashk&gt; ya
| [Friday 18 February 2011] [01:24:02] &lt;yrashk&gt; and they are going to get even better
| [Friday 18 February 2011] [01:24:05] &lt;yrashk&gt; in regards of async stuff
| [Friday 18 February 2011] [01:24:16] &lt;yrashk&gt; but since it&#8217;s only in the future I am dealing with what he have now
| [Friday 18 February 2011] [01:24:22] &lt;jugg&gt;   sure
| [Friday 18 February 2011] [01:24:42] &lt;yrashk&gt; and I am not yet happy with 60-80K msg/sec
| [Friday 18 February 2011] [01:24:46] &lt;yrashk&gt; and also sending is superslow
| [Friday 18 February 2011] [01:24:53] &lt;yrashk&gt; looks like batching doesn&#8217;t kick in
| [Friday 18 February 2011] [01:25:43] &lt;yrashk&gt; it takes roughly 13 seconds to send those msgs
| [Friday 18 February 2011] [01:25:44] &lt;yrashk&gt; insane
| [Friday 18 February 2011] [01:25:55] &lt;yrashk&gt; C version takes less than a half of a second
| [Friday 18 February 2011] [01:26:16] &lt;yrashk&gt; if I send messages with C version, ezmq reads at about 120K msg/sec
| [Friday 18 February 2011] [01:26:39] &lt;yrashk&gt; so yet another 2x gain can be achieved if sending was somehow optimized
| [Friday 18 February 2011] [01:28:51]   * yrashk is scratching head
| [Friday 18 February 2011] [01:31:03] &lt;yrashk&gt; hmm send seem to crash sometimes on my laptop
| [Friday 18 February 2011] [01:31:06] &lt;yrashk&gt; not on the pro
| [Friday 18 February 2011] [01:31:20] &lt;yrashk&gt; I guess ezmq needs a little bit more of maturing
| [Friday 18 February 2011] [01:52:34] &lt;jugg&gt;   yrashk, any progress, looks like I got disconnected for a while.
| [Friday 18 February 2011] [01:53:02] &lt;cremes&gt; pieterh, sustrik: that mailbox fix has eliminated a ton of weird shit; so glad we solved it!
| [Friday 18 February 2011] [01:53:41] &lt;sustrik&gt;        cremes: i hope it haven&#8217;t introduced other weird shit
| [Friday 18 February 2011] [01:54:12] &lt;cremes&gt; sustrik: not at all; it&#8217;s probably the most important fix i have seen yet
| [Friday 18 February 2011] [01:54:19] &lt;sustrik&gt;        :)
| [Friday 18 February 2011] [01:54:28] &lt;cremes&gt; minor in code changes, huge in effect
| [Friday 18 February 2011] [01:54:31] &lt;sustrik&gt;        btw, do you have an osx box?
| [Friday 18 February 2011] [01:54:32] &lt;cremes&gt; double :)
| [Friday 18 February 2011] [01:54:36] &lt;cremes&gt; yes, i do
| [Friday 18 February 2011] [01:55:03] &lt;sustrik&gt;        i would like to fix the buffer resizing algorithm so that it works on osx
| [Friday 18 February 2011] [01:55:15] &lt;cremes&gt; sustrik: i can give you an account on it
| [Friday 18 February 2011] [01:55:16] &lt;sustrik&gt;        if i do the patch, can you possibly test it?
| [Friday 18 February 2011] [01:55:25] &lt;cremes&gt; sure, either way
| [Friday 18 February 2011] [01:55:28] &lt;sustrik&gt;        that would be great
| [Friday 18 February 2011] [01:55:30] &lt;sustrik&gt;        ssh?
| [Friday 18 February 2011] [01:55:35] &lt;cremes&gt; of course
| [Friday 18 February 2011] [01:55:56] &lt;cremes&gt; i&#8217;m going to bed now (1am) so i&#8217;ll take care of it tomorrow
| [Friday 18 February 2011] [01:56:02] &lt;sustrik&gt;        great. let me know by email then
| [Friday 18 February 2011] [01:56:08] &lt;cremes&gt; will do
| [Friday 18 February 2011] [01:56:11] &lt;sustrik&gt;        thanks
| [Friday 18 February 2011] [01:56:22] &lt;cremes&gt; good night
| [Friday 18 February 2011] [01:56:37] &lt;sustrik&gt;        good night
| [Friday 18 February 2011] [01:56:49] &lt;yrashk&gt; jugg: no
| [Friday 18 February 2011] [01:57:03] &lt;yrashk&gt; jugg: just thinking how to improve performance further
| [Friday 18 February 2011] [01:57:18] &lt;yrashk&gt; jugg: also I think I need to use rwlocks to guard sockets
| [Friday 18 February 2011] [01:58:42] &lt;jugg&gt;   or you could only allow the owner pid to use the socket?
| [Friday 18 February 2011] [01:59:04] &lt;jugg&gt;   not sure if that calling pid is availble in NIFs?
| [Friday 18 February 2011] [01:59:04] &lt;yrashk&gt; or that
| [Friday 18 February 2011] [01:59:10] &lt;yrashk&gt; it is
| [Friday 18 February 2011] [01:59:19] &lt;yrashk&gt; but I think rwlock is a better method
| [Friday 18 February 2011] [01:59:20] &lt;yrashk&gt; probably
| [Friday 18 February 2011] [01:59:32] &lt;yrashk&gt; also
| [Friday 18 February 2011] [01:59:59] &lt;yrashk&gt; I am not sure but afair there is no guarantee that call will always be made within the same scheduler
| [Friday 18 February 2011] [02:00:02] &lt;yrashk&gt; hence it will be another thread
| [Friday 18 February 2011] [02:00:07] &lt;yrashk&gt; and hence it will crash 0mq
| [Friday 18 February 2011] [02:00:13] &lt;yrashk&gt; that&#8217;s why I am thinking rwlocks
| [Friday 18 February 2011] [02:00:17] &lt;jugg&gt;   I don&#8217;t... a socket should only be used by a single process.  Else you have troubles with multi-part messages, and socket states (eg REQ toggling of send/recv).
| [Friday 18 February 2011] [02:00:33] &lt;yrashk&gt; and I think these occasional crashes might be attributed to this
| [Friday 18 February 2011] [02:01:01] &lt;yrashk&gt; true
| [Friday 18 February 2011] [02:01:01] &lt;jugg&gt;   it is fine for sockets to be used in different threads (I assume you are using zmq 2.1.x)
| [Friday 18 February 2011] [02:01:14] &lt;yrashk&gt; but not simultaneously
| [Friday 18 February 2011] [02:01:18] &lt;yrashk&gt; I guess
| [Friday 18 February 2011] [02:01:21] &lt;jugg&gt;   correct
| [Friday 18 February 2011] [02:01:27] &lt;yrashk&gt; hence rwlocks
| [Friday 18 February 2011] [02:01:41] &lt;jugg&gt;   or a single erlang process...
| [Friday 18 February 2011] [02:01:58] &lt;yrashk&gt; again it doesn&#8217;t guarantee the same scheduler (thread)
| [Friday 18 February 2011] [02:02:03] &lt;jugg&gt;   doesn&#8217;t need to
| [Friday 18 February 2011] [02:02:12] &lt;jugg&gt;   a single process can&#8217;t call into multiple nifs at once.
| [Friday 18 February 2011] [02:02:18] &lt;yrashk&gt; true
| [Friday 18 February 2011] [02:02:31] &lt;yrashk&gt; then we need to record pid on socket creation
| [Friday 18 February 2011] [02:02:32] &lt;yrashk&gt; easy to do
| [Friday 18 February 2011] [02:02:37] &lt;jugg&gt;   yes
| [Friday 18 February 2011] [02:03:06] &lt;yrashk&gt; and return badarg or something more appropriate if it is not from the same process
| [Friday 18 February 2011] [02:04:47] &lt;yrashk&gt; this all doesn&#8217;t explain rare segfaults
| [Friday 18 February 2011] [02:05:06] &lt;yrashk&gt; basically <em>sometimes</em> 0mq fails on reading receiver_thread&#8217;s pull socket
| [Friday 18 February 2011] [02:05:18] &lt;yrashk&gt; which is something I can&#8217;t yet explain
| [Friday 18 February 2011] [02:06:24] &lt;yrashk&gt; A MQ context is thread safe and may be shared among as many application threads as necessary, without any additional locking required on the part of the caller. Each MQ socket belonging to a particular context may only be used by the thread that created it using zmq_socket().
| [Friday 18 February 2011] [02:06:37] &lt;yrashk&gt; so not anymore?
| [Friday 18 February 2011] [02:07:14] &lt;jugg&gt;   not on 2.1.x
| [Friday 18 February 2011] [02:07:27] &lt;yrashk&gt; too bad api doc is outdated
| [Friday 18 February 2011] [02:07:28] &lt;yrashk&gt; :-(
| [Friday 18 February 2011] [02:07:37] &lt;jugg&gt;   in source, or on the web?
| [Friday 18 February 2011] [02:07:44] &lt;yrashk&gt; web
| [Friday 18 February 2011] [02:07:45] &lt;jugg&gt;   the web is for 2.0.x still.
| [Friday 18 February 2011] [02:07:52] &lt;yrashk&gt; any reason why?
| [Friday 18 February 2011] [02:07:58] &lt;jugg&gt;   it is the &#8216;stable&#8217; version.
| [Friday 18 February 2011] [02:08:05] &lt;yrashk&gt; ah
| [Friday 18 February 2011] [02:08:11] &lt;yrashk&gt; so will be updated for 2.2?
| [Friday 18 February 2011] [02:08:21] &lt;jugg&gt;   I&#8217;m not sure how they&#8217;re handling that...
| [Friday 18 February 2011] [02:09:03] &lt;jugg&gt;   I do wish they&#8217;d provide namespacing at api.zeromq.org tho for the different versions...
| [Friday 18 February 2011] [02:09:17] &lt;jugg&gt;   but I believe that&#8217;s been discussed and rejected.
| [Friday 18 February 2011] [02:09:21] &lt;yrashk&gt; that would be awesome
| [Friday 18 February 2011] [04:03:00] &lt;mikko&gt;  <a href="#id2365"><span class="problematic" id="id2366">pieterh_</span></a>: there?
| [Friday 18 February 2011] [04:03:13] &lt;pieterh&gt;        mikko: yup
| [Friday 18 February 2011] [04:03:46] &lt;mikko&gt;  pieterh: cJSON
| [Friday 18 February 2011] [04:04:00] &lt;pieterh&gt;        it&#8217;s giving build errors?
| [Friday 18 February 2011] [04:04:00] &lt;mikko&gt;  is there a reason why the .c file is included in zfl_config_json?
| [Friday 18 February 2011] [04:04:09] &lt;pieterh&gt;        ah, that&#8217;s just to simplify things
| [Friday 18 February 2011] [04:04:09] &lt;mikko&gt;  well, it&#8217;s not included in make dist atm
| [Friday 18 February 2011] [04:04:11] &lt;mikko&gt;  fixing that
| [Friday 18 February 2011] [04:04:26] &lt;mikko&gt;  make dist, take the tar.gz and try to build
| [Friday 18 February 2011] [04:04:34] &lt;pieterh&gt;        it&#8217;s used only by that one zfl class
| [Friday 18 February 2011] [04:04:38] &lt;mikko&gt;  yeah
| [Friday 18 February 2011] [04:04:43] &lt;pieterh&gt;        true, we never tested a tarball yet
| [Friday 18 February 2011] [04:17:43] &lt;mikko&gt;  pieterh: larger config refactoring on zfl, want it on separate branch first?
| [Friday 18 February 2011] [04:17:59] &lt;mikko&gt;  i went through most of it last night and all aspects of build work for me
| [Friday 18 February 2011] [04:18:07] &lt;pieterh&gt;        I don&#8217;t think so mikko, let&#8217;s do everything on master
| [Friday 18 February 2011] [04:18:24] &lt;mikko&gt;  ok, i can always revert if it breaks things in a bad way
| [Friday 18 February 2011] [04:18:27] &lt;pieterh&gt;        the sooner it breaks the more time we have to fix it :-)
| [Friday 18 February 2011] [04:18:40] &lt;pieterh&gt;        oh, we never revert :-)
| [Friday 18 February 2011] [04:19:20] &lt;pieterh&gt;        i&#8217;m serious, the only process I know is to publish &amp; improve
| [Friday 18 February 2011] [04:19:56] &lt;mikko&gt;   3 files changed, 67 insertions(+), 149 deletions(-)
| [Friday 18 February 2011] [04:19:58] &lt;mikko&gt;  heh
| [Friday 18 February 2011] [04:20:11] &lt;pieterh&gt;        commit it, I&#8217;ll quickly test on this box I&#8217;m on
| [Friday 18 February 2011] [04:20:19] &lt;pieterh&gt;        I have 6 minutes then need to leave :-)
| [Friday 18 February 2011] [04:20:32] &lt;pieterh&gt;        I mean, push the commit...
| [Friday 18 February 2011] [04:20:38] &lt;mikko&gt;  pushed
| [Friday 18 February 2011] [04:21:05] &lt;mikko&gt;  let me know if something breaks. i&#8217;ll test solaris today as well
| [Friday 18 February 2011] [04:22:03] &lt;pieterh&gt;        Tests passed OK
| [Friday 18 February 2011] [04:22:03] &lt;pieterh&gt;        PASS: zfl_selftest
| [Friday 18 February 2011] [04:22:03] &lt;pieterh&gt;        =============
| [Friday 18 February 2011] [04:22:03] &lt;pieterh&gt;        1 test passed
| [Friday 18 February 2011] [04:22:03] &lt;pieterh&gt;        =============
| [Friday 18 February 2011] [04:22:07] &lt;pieterh&gt;        that&#8217;s on Ubuntu
| [Friday 18 February 2011] [04:22:12] &lt;pieterh&gt;        nice stuff!
| [Friday 18 February 2011] [04:22:27] &lt;mikko&gt;  good stuff
| [Friday 18 February 2011] [04:22:39] &lt;mikko&gt;  now i can add the gcov script and make the daily builds do this properly
| [Friday 18 February 2011] [04:36:13] &lt;sustrik&gt;        mikko: morning
| [Friday 18 February 2011] [04:36:28] &lt;sustrik&gt;        win7/msvc build seems to be failing
| [Friday 18 February 2011] [04:36:45] &lt;sustrik&gt;        when in build on my XP/msvc there&#8217;s no problem
| [Friday 18 February 2011] [04:37:00] &lt;sustrik&gt;        is the source up to date there?
| [Friday 18 February 2011] [04:37:57] &lt;sustrik&gt;        maybe it has something to do with pgm?
| [Friday 18 February 2011] [04:37:58] &lt;sustrik&gt;        hm
| [Friday 18 February 2011] [04:39:29] &lt;sustrik&gt;        aha, that&#8217;s probably it
| [Friday 18 February 2011] [04:44:35] &lt;sustrik&gt;        here it is: types.h:44: #       define bool             BOOL
| [Friday 18 February 2011] [04:57:00] &lt;mikko&gt;  yes
| [Friday 18 February 2011] [04:57:08] &lt;mikko&gt;  the pgm folder keeps disappearing for some reason
| [Friday 18 February 2011] [04:57:17] &lt;mikko&gt;  i think jenkins cleans the workspace at some point
| [Friday 18 February 2011] [04:58:38] &lt;sustrik&gt;        it&#8217;s a different problem
| [Friday 18 February 2011] [04:58:59] &lt;sustrik&gt;        i&#8217;ve already sent an email about it to openpgm mailing list
| [Friday 18 February 2011] [05:00:25] &lt;mikko&gt;  ah good
| [Friday 18 February 2011] [05:00:32] &lt;mikko&gt;  so maybe the file permissions are working after all
| [Friday 18 February 2011] [05:00:52] &lt;mikko&gt;  if you got time at some point can you test this branch https://github.com/mkoppanen/zeromq2/tree/openpgm-autoconf
| [Friday 18 February 2011] [05:00:58] &lt;mikko&gt;  ./configure &#8211;with-pgm
| [Friday 18 February 2011] [05:01:09] &lt;mikko&gt;  you should see during configure that it invokes openpgm configure
| [Friday 18 February 2011] [05:01:15] &lt;mikko&gt;  and everything works like magic
| [Friday 18 February 2011] [05:02:02] &lt;sustrik&gt;        i have ubuntu here
| [Friday 18 February 2011] [05:02:09] &lt;sustrik&gt;        would testing on that help you?
| [Friday 18 February 2011] [05:05:43] &lt;mikko&gt;  yeah, if you can
| [Friday 18 February 2011] [05:05:51] &lt;mikko&gt;  i&#8217;ve been only running it on my local vm
| [Friday 18 February 2011] [05:05:56] &lt;mikko&gt;  where everything seems to work ok
| [Friday 18 February 2011] [05:06:03] &lt;sustrik&gt;        ok, wait a sec
| [Friday 18 February 2011] [05:06:45] &lt;mikko&gt;  sun studio complains about same thing as msvc
| [Friday 18 February 2011] [05:07:58] &lt;sustrik&gt;        yes, same problem
| [Friday 18 February 2011] [05:13:57] &lt;sustrik&gt;        mikko: tested
| [Friday 18 February 2011] [05:13:59] &lt;sustrik&gt;        builds ok
| [Friday 18 February 2011] [05:14:02] &lt;mikko&gt;  good
| [Friday 18 February 2011] [05:14:10] &lt;mikko&gt;  so it&#8217;s ready(ish)
| [Friday 18 February 2011] [05:14:16] &lt;sustrik&gt;        nice
| [Friday 18 February 2011] [05:14:23] &lt;mikko&gt;  todo list emptying faster than i hoped
| [Friday 18 February 2011] [05:33:37] &lt;yrashk&gt; I am confused now
| [Friday 18 February 2011] [05:33:48] &lt;yrashk&gt; in PUB/SUBs who should connect and who should bind?
| [Friday 18 February 2011] [05:33:54] &lt;mikko&gt;  yrashk: doesnt matter
| [Friday 18 February 2011] [05:34:23] &lt;yrashk&gt; looks like it works either way
| [Friday 18 February 2011] [05:34:25] &lt;mikko&gt;  yes
| [Friday 18 February 2011] [05:34:30] &lt;yrashk&gt; mikko: that&#8217;s what I thought, thanks
| [Friday 18 February 2011] [05:34:37] &lt;yrashk&gt; I just received a patch &#8220;fixing&#8221; this in my tests
| [Friday 18 February 2011] [05:35:22] &lt;yrashk&gt; and it got me puzzled because I never even thought about it
| [Friday 18 February 2011] [06:31:20]   * yrashk is trying to figure out how to make ezmq:send faster now
| [Friday 18 February 2011] [06:53:42] &lt;mikko&gt;  heyo
| [Friday 18 February 2011] [06:53:50] &lt;<a href="#id2367"><span class="problematic" id="id2368">pieterh_</span></a>&gt;       heyo, mikko
| [Friday 18 February 2011] [06:54:01] &lt;mikko&gt;  q: would it be useful to have sockopt to prevent durable subscribers on server side?
| [Friday 18 February 2011] [06:54:14] &lt;<a href="#id2369"><span class="problematic" id="id2370">pieterh_</span></a>&gt;       IMO yes
| [Friday 18 February 2011] [06:54:15] &lt;mikko&gt;  currently the server side is pretty vulnerable to DoS
| [Friday 18 February 2011] [06:54:35] &lt;mikko&gt;  connect tons of clients with identities, disconnect them and it should run out of memory
| [Friday 18 February 2011] [06:54:40] &lt;<a href="#id2371"><span class="problematic" id="id2372">pieterh_</span></a>&gt;       Even more so, have sockopt that <em>allows</em> this
| [Friday 18 February 2011] [06:54:53] &lt;mikko&gt;  and another thing is removing subscriptions
| [Friday 18 February 2011] [06:54:53] &lt;<a href="#id2373"><span class="problematic" id="id2374">pieterh_</span></a>&gt;       Or else limit nbr of durable peers
| [Friday 18 February 2011] [06:55:06] &lt;mikko&gt;  or controlling their lifetime
| [Friday 18 February 2011] [06:55:14] &lt;<a href="#id2375"><span class="problematic" id="id2376">pieterh_</span></a>&gt;       indeed
| [Friday 18 February 2011] [06:55:16] &lt;mikko&gt;  as in &#8220;if peer has missed N messages consider it dead&#8221;
| [Friday 18 February 2011] [06:55:27] &lt;<a href="#id2377"><span class="problematic" id="id2378">pieterh_</span></a>&gt;       well, that&#8217;s the whole point of durable sockets
| [Friday 18 February 2011] [06:55:29] &lt;mikko&gt;  or &#8220;if peer hasn&#8217;t been back in 2 hours consider it dead&#8221;
| [Friday 18 February 2011] [06:55:32] &lt;<a href="#id2379"><span class="problematic" id="id2380">pieterh_</span></a>&gt;       peer can go away for a long time
| [Friday 18 February 2011] [06:55:41] &lt;mikko&gt;  i mean controllable time for durability
| [Friday 18 February 2011] [06:56:08] &lt;<a href="#id2381"><span class="problematic" id="id2382">pieterh_</span></a>&gt;       from a paranoid POV, I&#8217;d like
| [Friday 18 February 2011] [06:56:16] &lt;<a href="#id2383"><span class="problematic" id="id2384">pieterh_</span></a>&gt;       - default HWM for durable sockets
| [Friday 18 February 2011] [06:56:17] &lt;mikko&gt;  that way you don&#8217;t have to worry about restarting server if you remove a durable subscriber
| [Friday 18 February 2011] [06:56:24] &lt;<a href="#id2385"><span class="problematic" id="id2386">pieterh_</span></a>&gt;       - default limit on number of those sockets
| [Friday 18 February 2011] [06:56:35] &lt;<a href="#id2387"><span class="problematic" id="id2388">pieterh_</span></a>&gt;       - default limit on total memory used by durable socket queues
| [Friday 18 February 2011] [06:57:15] &lt;<a href="#id2389"><span class="problematic" id="id2390">pieterh_</span></a>&gt;       good topic for discussion on list IMO
| [Friday 18 February 2011] [06:57:21] &lt;mikko&gt;  - ability to remove durable subscription explicitly
| [Friday 18 February 2011] [06:57:36] &lt;mikko&gt;  like remove subscription of &#8220;company ABC&#8221; while keeping others
| [Friday 18 February 2011] [06:57:42] &lt;<a href="#id2391"><span class="problematic" id="id2392">pieterh_</span></a>&gt;       - timeout on durable sockets
| [Friday 18 February 2011] [06:57:47] &lt;mikko&gt;  yes
| [Friday 18 February 2011] [06:58:16] &lt;mikko&gt;  one of the important features for 2.1.0 i could see is not failing on invalid connection uri
| [Friday 18 February 2011] [06:59:39] &lt;<a href="#id2393"><span class="problematic" id="id2394">pieterh_</span></a>&gt;       we should list the outstanding &#8216;bugs&#8217; in 2.1.0
| [Friday 18 February 2011] [07:00:07] &lt;mikko&gt;  is atlassian stack overkill for us?
| [Friday 18 February 2011] [07:00:14] &lt;mikko&gt;  they give licenses to open source as far as i know
| [Friday 18 February 2011] [07:00:19] &lt;mikko&gt;  jira/confluence/etc
| [Friday 18 February 2011] [07:00:35] &lt;<a href="#id2395"><span class="problematic" id="id2396">pieterh_</span></a>&gt;       oh, I&#8217;d rather not
| [Friday 18 February 2011] [07:00:41] &lt;<a href="#id2397"><span class="problematic" id="id2398">pieterh_</span></a>&gt;       we used to use Jira for all issue tracking
| [Friday 18 February 2011] [07:00:46] &lt;<a href="#id2399"><span class="problematic" id="id2400">pieterh_</span></a>&gt;       it is a great, fantastic product
| [Friday 18 February 2011] [07:01:03] &lt;<a href="#id2401"><span class="problematic" id="id2402">pieterh_</span></a>&gt;       you just have to pay someone to reboot the <em>&#64;%&#64;$E# server once a week
| [Friday 18 February 2011] [07:01:33] &lt;pieterh_&gt;       i would 10x rather use github&#8217;s simple but maintenance free issue tracking
| [Friday 18 February 2011] [07:02:05] &lt;pieterh_&gt;       anyhow, I was thinking of a wiki page, like the 2.0 roadmap
| [Friday 18 February 2011] [07:02:09] &lt;pieterh_&gt;       *3.0
| [Friday 18 February 2011] [07:02:30] &lt;mikko&gt;  what i would like is somehow automatically assign issues to roadmap milestones
| [Friday 18 February 2011] [07:02:54] &lt;mikko&gt;  i wonder if zfl tests should be broken into separate files
| [Friday 18 February 2011] [07:03:03] &lt;mikko&gt;  currently it shows &#8220;1 test succeeded&#8221;
| [Friday 18 February 2011] [07:03:38] &lt;pieterh_&gt;       regarding issue tracking, discuss on list, it&#8217;s too contentious
| [Friday 18 February 2011] [07:04:06] &lt;pieterh_&gt;       remember our process is not driven by issues but by patches
| [Friday 18 February 2011] [07:04:31] &lt;pieterh_&gt;       for zfl tests, multiple executables would work for me, sure...
| [Friday 18 February 2011] [07:04:36] &lt;pieterh_&gt;       it&#8217;s more work to maintain though
| [Friday 18 February 2011] [07:05:34] &lt;pieterh_&gt;       when we have four files for each class I start to get tempted by code generation
| [Friday 18 February 2011] [07:05:46] &lt;pieterh_&gt;       and that gets ugly, you don&#8217;t want to see that :-)
| [Friday 18 February 2011] [07:06:47] &lt;yrashk&gt; hey pieterh_
| [Friday 18 February 2011] [07:06:54] &lt;pieterh_&gt;       hi yrashk
| [Friday 18 February 2011] [07:07:37] &lt;yrashk&gt; mikko: I use open source license for bamboo, nice stuff
| [Friday 18 February 2011] [07:11:19] &lt;mikko&gt;  i find jenkins a lot better than bamboo
| [Friday 18 February 2011] [07:11:25] &lt;mikko&gt;  especially for distributed builds
| [Friday 18 February 2011] [07:17:49] &lt;yrashk&gt; hmm may be I should add select() based active mode for ezmq.. not sure if this help with the performance issue, though
| [Friday 18 February 2011] [07:17:59] &lt;yrashk&gt; this will</em>
| [Friday 18 February 2011] [07:22:58] &lt;yrashk&gt; or, rather poll() one
| [Friday 18 February 2011] [07:44:17] &lt;sustrik&gt;        mikko, <a href="#id2403"><span class="problematic" id="id2404">pieterh_</span></a>: re durable subscribers: +1
| [Friday 18 February 2011] [07:44:30] &lt;sustrik&gt;        i would even remove the identity option altogether
| [Friday 18 February 2011] [08:02:15] &lt;tormaroe&gt;       Just found 0MQ, and I really exited. Built from source on Windows without problems. Now want to install Ruby gem, but having problems.
| [Friday 18 February 2011] [08:02:23] &lt;tormaroe&gt;       Trying gem install zmq &#8211; &#8211;with-zmq-dir=c:zeromq
| [Friday 18 February 2011] [08:02:31] &lt;tormaroe&gt;       but still getting ERROR: Failed to build gem native extension. extconf.rb:25: Couldn&#8217;t find zmq library. try setting &#8211;with-zmq-dir=&lt;path&gt; to tell me where it is. (RuntimeError)
| [Friday 18 February 2011] [08:02:54] &lt;tormaroe&gt;       please help :)
| [Friday 18 February 2011] [08:03:47] &lt;tormaroe&gt;       I just copied the build output to my c:zeromq. No other &#8220;installation&#8221; required, right?
| [Friday 18 February 2011] [08:05:50] &lt;sustrik&gt;        no
| [Friday 18 February 2011] [08:06:03] &lt;sustrik&gt;        you need just the library an the header file
| [Friday 18 February 2011] [08:07:13] &lt;tormaroe&gt;       I have no clue about c++, so what&#8217;s the header file?
| [Friday 18 February 2011] [08:07:29] &lt;tormaroe&gt;       got dll, exp, ilk, lib and pdb
| [Friday 18 February 2011] [08:09:59] &lt;yrashk&gt; it looks like I forgot a lot about poll()-related matters
| [Friday 18 February 2011] [08:10:12] &lt;yrashk&gt; my recv blocks after receving a ZMQ_POLLIN revent
| [Friday 18 February 2011] [08:10:14] &lt;yrashk&gt; eh
| [Friday 18 February 2011] [08:12:16] &lt;yrashk&gt; don&#8217;t quite understand how this could happen, but likely my 5am bug :D
| [Friday 18 February 2011] [08:16:07] &lt;CIA-21&gt; zeromq2: 03Martin Sustrik 07master * r17e2ca7 10/ (5 files):
| [Friday 18 February 2011] [08:16:07] &lt;CIA-21&gt; zeromq2: Logging of duplicit identities added
| [Friday 18 February 2011] [08:16:07] &lt;CIA-21&gt; zeromq2: Signed-off-by: Martin Sustrik &lt;sustrik&#64;250bpm.com&gt; - http://bit.ly/dXqok7
| [Friday 18 February 2011] [08:16:26] &lt;sustrik&gt;        tormaroe: zmq.h
| [Friday 18 February 2011] [08:17:00] &lt;sustrik&gt;        yrashk: that should not happen
| [Friday 18 February 2011] [08:21:07] &lt;tormaroe&gt;       Added zmq.h from the include folder and re-ran gem command, but getting same error :(
| [Friday 18 February 2011] [08:21:44] &lt;sustrik&gt;        try asking on the mailing list, i am not a ruby expert
| [Friday 18 February 2011] [08:21:54] &lt;tormaroe&gt;       ok, thanks anyway
| [Friday 18 February 2011] [08:24:24] &lt;yrashk&gt; sustrik: yeah I figured that out already and fixed the bug
| [Friday 18 February 2011] [08:34:37] &lt;yrashk&gt; doing poll &amp; recv at the same time is probably an insanely bad idea, after all :D
| [Friday 18 February 2011] [10:05:54] &lt;yrashk&gt; sustrik: pieterh is that ok that send() with ZMQ_NOBLOCK takes roughly 10 usec?
| [Friday 18 February 2011] [10:06:07] &lt;yrashk&gt; I am profiling my C code
| [Friday 18 February 2011] [10:06:27] &lt;sustrik&gt;        raw zmq_send()?
| [Friday 18 February 2011] [10:06:30] &lt;yrashk&gt; ya
| [Friday 18 February 2011] [10:06:48] &lt;sustrik&gt;        that&#8217;s too much
| [Friday 18 February 2011] [10:06:58] &lt;sustrik&gt;        should be below 1 us
| [Friday 18 February 2011] [10:07:06] &lt;yrashk&gt; https://gist.github.com/af07bbd989ec1f7e659c
| [Friday 18 February 2011] [10:08:03] &lt;yrashk&gt; appended that gist with some typical tv.tv_usec-tv1.tv_usec printout
| [Friday 18 February 2011] [10:08:21] &lt;yrashk&gt; it looks more like 7 us
| [Friday 18 February 2011] [10:08:41] &lt;yrashk&gt; but still
| [Friday 18 February 2011] [10:08:44] &lt;sustrik&gt;        have you tried to measure zmq_send() itself?
| [Friday 18 February 2011] [10:08:54] &lt;sustrik&gt;        there&#8217;s some other work being done there
| [Friday 18 February 2011] [10:08:57] &lt;yrashk&gt; well that if condition is false
| [Friday 18 February 2011] [10:09:07] &lt;sustrik&gt;        ah
| [Friday 18 February 2011] [10:09:09] &lt;sustrik&gt;        ok
| [Friday 18 February 2011] [10:09:13] &lt;yrashk&gt; but I can try
| [Friday 18 February 2011] [10:09:17] &lt;sustrik&gt;        what OS are you on?
| [Friday 18 February 2011] [10:09:20] &lt;yrashk&gt; osx
| [Friday 18 February 2011] [10:09:34] &lt;sustrik&gt;        how long does gettimeofday take on osx?
| [Friday 18 February 2011] [10:09:46] &lt;yrashk&gt; still 5+ us at least
| [Friday 18 February 2011] [10:09:50] &lt;yrashk&gt; with no if
| [Friday 18 February 2011] [10:09:56] &lt;yrashk&gt; no idea
| [Friday 18 February 2011] [10:10:03] &lt;sustrik&gt;        it tends to be slow
| [Friday 18 February 2011] [10:10:15] &lt;sustrik&gt;        it&#8217;s kind of better with linux nowadays
| [Friday 18 February 2011] [10:10:24] &lt;sustrik&gt;        they&#8217;ve got it to something like 1us
| [Friday 18 February 2011] [10:10:37] &lt;sustrik&gt;        but before it was much worse
| [Friday 18 February 2011] [10:10:45] &lt;sustrik&gt;        no idea about osx though
| [Friday 18 February 2011] [10:11:24] &lt;sustrik&gt;        easiest way to measure is to make 1M zmq_send()s
| [Friday 18 February 2011] [10:11:31] &lt;sustrik&gt;        measure the whole thing
| [Friday 18 February 2011] [10:11:37] &lt;sustrik&gt;        and divide it by 1000000
| [Friday 18 February 2011] [10:12:16] &lt;yrashk&gt; apparently _lat tests are good on ezmq
| [Friday 18 February 2011] [10:12:48] &lt;yrashk&gt; well that&#8217;s what I do
| [Friday 18 February 2011] [10:13:04] &lt;yrashk&gt; (07:12) &lt;evaxsoftware&gt; _lat results:
| [Friday 18 February 2011] [10:13:04] &lt;yrashk&gt; (07:12) &lt;evaxsoftware&gt; local_lat       remote_lat      mean latency        real/usr/sys
| [Friday 18 February 2011] [10:13:07] &lt;yrashk&gt; (07:12) &lt;evaxsoftware&gt; C               C               41                  8.2/0.8/3.7
| [Friday 18 February 2011] [10:13:10] &lt;yrashk&gt; (07:12) &lt;evaxsoftware&gt; ezmq            ezmq            47                  9.5/2.6/2.3
| [Friday 18 February 2011] [10:13:14] &lt;yrashk&gt; (07:13) &lt;evaxsoftware&gt; pyzmq           pyzmq           48                  12.7/1.8/3.7
| [Friday 18 February 2011] [10:13:17] &lt;yrashk&gt; .win 26
| [Friday 18 February 2011] [10:13:19] &lt;yrashk&gt; oops
| [Friday 18 February 2011] [10:13:22] &lt;yrashk&gt; (07:14) &lt;evaxsoftware&gt; it&#8217;s efficient (completes nearly as fast as the C version)
| [Friday 18 February 2011] [10:13:46] &lt;yrashk&gt; apparently better than pyzmq
| [Friday 18 February 2011] [10:15:19] &lt;DarkGod&gt;        hello, I&#8217;m sorry but I am afradi I have a few, probably stupid questions. I read the manual and wanted to try the auto reconnect stuff, I took the simple REQ/REP C examples and copiled them, if I run the client and then the server it&#8217;s all dandy, yet if I kill the server while the client is running and then restart the server it does not seem to reconnect
| [Friday 18 February 2011] [10:15:32] &lt;DarkGod&gt;        it should no? or did I misunderstand ?
| [Friday 18 February 2011] [10:16:37] &lt;sustrik&gt;        yrashk: nice
| [Friday 18 February 2011] [10:17:10] &lt;yrashk&gt; so I am not sure why thr is so bad
| [Friday 18 February 2011] [10:17:41] &lt;sustrik&gt;        throughput is a silly metric
| [Friday 18 February 2011] [10:17:59] &lt;sustrik&gt;        it exhibits large oscillation due to minor causes
| [Friday 18 February 2011] [10:18:04] &lt;sustrik&gt;        shrug
| [Friday 18 February 2011] [10:19:02] &lt;sustrik&gt;        DarkGod: it probably reconnects, but current request is lost
| [Friday 18 February 2011] [10:19:26] &lt;sustrik&gt;        if you need reliability you should implement it on top of 0mq
| [Friday 18 February 2011] [10:19:37] &lt;sustrik&gt;        iirc, the guide explains that
| [Friday 18 February 2011] [10:20:26] &lt;DarkGod&gt;        ah, so I should put a timeout on the send on the REQ side so that it can fail
| [Friday 18 February 2011] [10:20:39] &lt;sustrik&gt;        yes
| [Friday 18 February 2011] [10:20:47] &lt;sustrik&gt;        then you can resend the request if needed
| [Friday 18 February 2011] [10:20:59] &lt;DarkGod&gt;        I see
| [Friday 18 February 2011] [10:21:04] &lt;DarkGod&gt;        thanks :)
| [Friday 18 February 2011] [10:21:08] &lt;sustrik&gt;        np
| [Friday 18 February 2011] [10:22:53] &lt;DarkGod&gt;        next silly question: the pub/sub sockets look neat, but in some cases I want to adress a specific client, I could use filtering but a ngrep of the ethernet interface shows me that all data is pushed to clients and that they then do the filtering, as I might have large data going through I really do notwant it transmited to all
| [Friday 18 February 2011] [10:23:05] &lt;DarkGod&gt;        clietns when it is actaully only meant for one
| [Friday 18 February 2011] [10:23:30] &lt;DarkGod&gt;        I must use pairs in this case? (setting up a pair per client ?)
| [Friday 18 February 2011] [10:27:53] &lt;sustrik&gt;        there&#8217;s a work in progress wrt filtering on the PUBside
| [Friday 18 February 2011] [10:28:04] &lt;sustrik&gt;        (sub-forward branch)
| [Friday 18 February 2011] [10:28:16] &lt;sustrik&gt;        you can help to finish that work
| [Friday 18 February 2011] [10:29:00] &lt;DarkGod&gt;        I&#8217;m afraid I dont know zmq code quite well enough, but yeah that&#8217;s what I&#8217;d need I imagine
| [Friday 18 February 2011] [10:31:27] &lt;DarkGod&gt;        how advanced is this branch/what needs to be done ?
| [Friday 18 February 2011] [10:32:20] &lt;sustrik&gt;        check the mailing list archives
| [Friday 18 February 2011] [10:32:30] &lt;sustrik&gt;        there lot of related discussion there
| [Friday 18 February 2011] [10:32:45] &lt;DarkGod&gt;        ok :)
| [Friday 18 February 2011] [10:32:50] &lt;sustrik&gt;        so far the subscriptions are propagated up the distribution tree
| [Friday 18 February 2011] [10:32:59] &lt;sustrik&gt;        what&#8217;s missing is acutal filtering
| [Friday 18 February 2011] [10:56:16] &lt;yrashk&gt; https://gist.github.com/a3fd747d0bd7b3d61aba
| [Friday 18 February 2011] [10:56:44] &lt;yrashk&gt; sustrik: ^^ another bizzare crash :) now I don&#8217;t even see any out of bound pointers :-D
| [Friday 18 February 2011] [10:57:05] &lt;yrashk&gt; does this tracce tell you anything worth checking out?
| [Friday 18 February 2011] [11:12:58] &lt;sustrik&gt;        yrashk: what&#8217;s the error?
| [Friday 18 February 2011] [11:13:02] &lt;sustrik&gt;        SEGFAULT?
| [Friday 18 February 2011] [11:13:08] &lt;yrashk&gt; yes
| [Friday 18 February 2011] [11:13:26] &lt;sustrik&gt;        segfault in glibc
| [Friday 18 February 2011] [11:13:28] &lt;sustrik&gt;        nasty
| [Friday 18 February 2011] [11:13:33] &lt;yrashk&gt; I can show the whole socket printout
| [Friday 18 February 2011] [11:13:35] &lt;yrashk&gt; if you want
| [Friday 18 February 2011] [11:13:50] &lt;sustrik&gt;        no need
| [Friday 18 February 2011] [11:13:54] &lt;sustrik&gt;        is it reproducible?
| [Friday 18 February 2011] [11:14:11] &lt;yrashk&gt; not every time
| [Friday 18 February 2011] [11:14:18] &lt;yrashk&gt; and not on every computer
| [Friday 18 February 2011] [11:14:19] &lt;yrashk&gt; but it is
| [Friday 18 February 2011] [11:14:22] &lt;sustrik&gt;        hm
| [Friday 18 February 2011] [11:14:26] &lt;yrashk&gt; just in case https://gist.github.com/dfc2e7eea5c89673ea74
| [Friday 18 February 2011] [11:14:27] &lt;yrashk&gt; :)
| [Friday 18 February 2011] [11:14:42] &lt;sustrik&gt;        erlang, hm
| [Friday 18 February 2011] [11:14:45] &lt;sustrik&gt;        :|
| [Friday 18 February 2011] [11:14:48] &lt;yrashk&gt; crash happens both on osx and linux
| [Friday 18 February 2011] [11:15:04] &lt;yrashk&gt; I don&#8217;t think it has <em>anything</em> to do with erlang per se
| [Friday 18 February 2011] [11:15:59] &lt;yrashk&gt; this code is in a separate thread that Erlang has even a litle to no idea about
| [Friday 18 February 2011] [11:16:11] &lt;yrashk&gt; s/a little/little/
| [Friday 18 February 2011] [11:19:24] &lt;sustrik&gt;        yrashk: any chance to reproduce the problem in C?
| [Friday 18 February 2011] [11:20:38] &lt;yrashk&gt; may be
| [Friday 18 February 2011] [11:20:43] &lt;yrashk&gt; but I have no idea how
| [Friday 18 February 2011] [11:22:24] &lt;yrashk&gt; (yet)
| [Friday 18 February 2011] [11:22:33] &lt;sustrik&gt;        what&#8217;s the OS btw?
| [Friday 18 February 2011] [11:25:32] &lt;yrashk&gt; both osx and linux
| [Friday 18 February 2011] [11:25:35] &lt;yrashk&gt; very similar crash
| [Friday 18 February 2011] [11:38:05] &lt;yrashk&gt; are there any circumstances under which context gets terminated implicitly, sustrik?
| [Friday 18 February 2011] [11:38:27] &lt;sustrik&gt;        yrashk: no
| [Friday 18 February 2011] [11:38:37] &lt;sustrik&gt;        you have to terminate by calling zmq_term()
| [Friday 18 February 2011] [11:38:59] &lt;sustrik&gt;        it looks like a bug in 0mq anyway
| [Friday 18 February 2011] [11:39:17] &lt;sustrik&gt;        so the goal now is to make a reproducible test case
| [Friday 18 February 2011] [11:39:25] &lt;sustrik&gt;        and to fix it
| [Friday 18 February 2011] [11:39:39] &lt;yrashk&gt; do you think it is a 0mq bug?
| [Friday 18 February 2011] [11:39:46] &lt;yrashk&gt; huh
| [Friday 18 February 2011] [11:39:59] &lt;yrashk&gt; I was getting segfaults in recvfrom() before
| [Friday 18 February 2011] [11:40:21] &lt;yrashk&gt; last time it was due to an accidental rewrite over context
| [Friday 18 February 2011] [11:40:25] &lt;sustrik&gt;        it&#8217;s kind of strange
| [Friday 18 February 2011] [11:40:43] &lt;sustrik&gt;        yes, it looks like memory overwrite
| [Friday 18 February 2011] [11:40:56] &lt;sustrik&gt;        wither by 0mq or ezmq or erlang itself
| [Friday 18 February 2011] [11:41:07] &lt;sustrik&gt;        that&#8217;s why C use case would help
| [Friday 18 February 2011] [11:41:28] &lt;sustrik&gt;        that would make it clear that the problem is in 0mq
| [Friday 18 February 2011] [11:42:05] &lt;yrashk&gt; yeah I know
| [Friday 18 February 2011] [11:42:14] &lt;yrashk&gt; it&#8217;s barely reproducable here on my laptop
| [Friday 18 February 2011] [11:42:27] &lt;sustrik&gt;        what&#8217;s the use case?
| [Friday 18 February 2011] [11:42:28] &lt;yrashk&gt; much more frequent on aother guy&#8217;s linux box
| [Friday 18 February 2011] [11:42:54] &lt;yrashk&gt; second thread recving on pull socket waiting for a command to recv another socket
| [Friday 18 February 2011] [11:44:30] &lt;yrashk&gt; sustrik: does context change over time or is it immutable?
| [Friday 18 February 2011] [11:46:06] &lt;sustrik&gt;        you mean the internals of the context?
| [Friday 18 February 2011] [11:46:12] &lt;yrashk&gt; ya
| [Friday 18 February 2011] [11:46:18] &lt;sustrik&gt;        yes, there&#8217;s a lis of inproc endpoints for example
| [Friday 18 February 2011] [11:46:23] &lt;sustrik&gt;        a table of open sockets
| [Friday 18 February 2011] [11:46:27] &lt;sustrik&gt;        and similar
| [Friday 18 February 2011] [11:46:29] &lt;yrashk&gt; that might be the case
| [Friday 18 February 2011] [11:46:39] &lt;yrashk&gt; does any zmq operation might change the context?
| [Friday 18 February 2011] [11:47:09] &lt;sustrik&gt;        creating a socket
| [Friday 18 February 2011] [11:47:13] &lt;sustrik&gt;        closing a socket
| [Friday 18 February 2011] [11:47:18] &lt;sustrik&gt;        binding to inproc endpoint
| [Friday 18 February 2011] [11:48:02] &lt;yrashk&gt; that&#8217;s it?
| [Friday 18 February 2011] [11:48:46] &lt;yrashk&gt; we do all three
| [Friday 18 February 2011] [11:48:50] &lt;yrashk&gt; ;)
| [Friday 18 February 2011] [11:48:55] &lt;yrashk&gt; and definitely bind to inproc
| [Friday 18 February 2011] [11:49:00] &lt;yrashk&gt; in that context
| [Friday 18 February 2011] [11:49:07] &lt;yrashk&gt; in fact it is only used for inproc
| [Friday 18 February 2011] [11:50:03] &lt;sustrik&gt;        yes, but what&#8217;s the deal?
| [Friday 18 February 2011] [11:50:15] &lt;sustrik&gt;        why should changing the context be a problem?
| [Friday 18 February 2011] [11:50:55] &lt;yrashk&gt; &#8220;As soon as you write towards a shared state either through static variables or enif_priv_data you need to supply your own explicit synchronization. &#8221;
| [Friday 18 February 2011] [11:51:01] &lt;yrashk&gt; this is from NIF documentation
| [Friday 18 February 2011] [11:51:16] &lt;yrashk&gt; that context that we use there is a static variable
| [Friday 18 February 2011] [11:52:33] &lt;sustrik&gt;        but it&#8217;s only a pointer to context, right?
| [Friday 18 February 2011] [11:52:36] &lt;sustrik&gt;        which never changes
| [Friday 18 February 2011] [11:52:39] &lt;yrashk&gt; yup
| [Friday 18 February 2011] [11:52:46] &lt;sustrik&gt;        the context itself is threadsafe
| [Friday 18 February 2011] [11:52:59] &lt;sustrik&gt;        so it should be ok imo
| [Friday 18 February 2011] [11:53:01] &lt;yrashk&gt; we&#8217;re just trying to find any possible explanation for the crash :)
| [Friday 18 February 2011] [11:55:13] &lt;yrashk&gt; ok, bed time
| [Friday 18 February 2011] [11:55:22] &lt;yrashk&gt; I am exhausted and need to get up in 3 hours :]
| [Friday 18 February 2011] [11:57:00] &lt;sustrik&gt;        good god
| [Friday 18 February 2011] [11:57:28] &lt;sustrik&gt;        see you later then
| [Friday 18 February 2011] [11:58:38] &lt;CIA-21&gt; zeromq2: 03Martin Sustrik 07master * r12486fe 10/ (src/pgm_socket.hpp src/zmq.cpp):
| [Friday 18 February 2011] [11:58:38] &lt;CIA-21&gt; zeromq2: Fix MSVC and SunStudio builds with OpenPGM
| [Friday 18 February 2011] [11:58:38] &lt;CIA-21&gt; zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/hxuwyD">http://bit.ly/hxuwyD</a>
| [Friday 18 February 2011] [12:36:45] &lt;lt_schmidt_jr&gt;  sustrik: for inproc sub, are durable sockets trully durable?
| [Friday 18 February 2011] [12:37:03] &lt;sustrik&gt;        what&#8217;s durable?
| [Friday 18 February 2011] [12:38:00] &lt;lt_schmidt_jr&gt;  <a class="reference external" href="http://zguide.zeromq.org/chapter:all#toc37">http://zguide.zeromq.org/chapter:all#toc37</a>
| [Friday 18 February 2011] [12:38:18] &lt;lt_schmidt_jr&gt;  sockets with explicit identity
| [Friday 18 February 2011] [12:48:28] &lt;sustrik&gt;        and what&#8217;s &#8220;trully durable&#8221;? :)
| [Friday 18 February 2011] [12:50:06] &lt;lt_schmidt_jr&gt;  sustrik: I mean if the connection is closed I would not loose messages given that there are no network buffers
| [Friday 18 February 2011] [12:51:55] &lt;lt_schmidt_jr&gt;  sustrik: I wonder if with inproc the client sub buffer gets filled
| [Friday 18 February 2011] [12:52:40] &lt;sustrik&gt;        when you close the SUB side
| [Friday 18 February 2011] [12:52:47] &lt;sustrik&gt;        the buffer on PUB side is filled
| [Friday 18 February 2011] [12:53:11] &lt;sustrik&gt;        (SUB buffer doesn&#8217;t exist at the moment)
| [Friday 18 February 2011] [12:53:37] &lt;lt_schmidt_jr&gt;  ah, so this may actually work for me
| [Friday 18 February 2011] [12:54:11] &lt;sustrik&gt;        i don&#8217;t know how well inproc works with identities
| [Friday 18 February 2011] [12:54:21] &lt;sustrik&gt;        you have to test it yourself, i would say
| [Friday 18 February 2011] [12:54:24] &lt;lt_schmidt_jr&gt;  ah
| [Friday 18 February 2011] [12:54:46] &lt;sustrik&gt;        the problem with inproc is that there are still pieces missing
| [Friday 18 February 2011] [12:54:59] &lt;sustrik&gt;        like reconnect, for example
| [Friday 18 February 2011] [12:55:03] &lt;sustrik&gt;        not sure about identitie
| [Friday 18 February 2011] [12:55:04] &lt;lt_schmidt_jr&gt;  did not realize that
| [Friday 18 February 2011] [12:56:42] &lt;lt_schmidt_jr&gt;  the reason I am asking - is that I have an inproc forwarder connected to other servers symmetrically
| [Friday 18 February 2011] [12:57:33] &lt;lt_schmidt_jr&gt;  and I have sub sockets that I keep on behalf of web clients , and if the web clietnts disconnect, I keep the sub socket for a bit in case they reconnect
| [Friday 18 February 2011] [12:58:08] &lt;lt_schmidt_jr&gt;  I am thinking to use identity to have zmq do that for me
| [Friday 18 February 2011] [12:58:59] &lt;lt_schmidt_jr&gt;  but sounds like that may not be the best approach currently
| [Friday 18 February 2011] [13:55:37] &lt;<a href="#id2405"><span class="problematic" id="id2406">bhuga_</span></a>&gt; i&#8217;m getting an assertion failure while using zeromq from the ruby FFI: Assertion failed: inpipes [current_in].active (xrep.cpp:229). Is that indicative of something I&#8217;m doing wrong, or a bug?
| [Friday 18 February 2011] [15:05:13] &lt;cremes&gt; <a href="#id2407"><span class="problematic" id="id2408">bhuga_</span></a>: can you pastie your code that&#8217;s causing that? it may be a bug in 0mq
| [Friday 18 February 2011] [15:29:19] &lt;<a href="#id2409"><span class="problematic" id="id2410">bhuga_</span></a>&gt; it is kind of convoluted :/, pretty far from a minimal test case. it is also not deterministic, happening for sure, but not always after the same number of messages have passed. i have an strace running up to it, if that helps?
| [Friday 18 February 2011] [16:02:41] &lt;cremes&gt; <a href="#id2411"><span class="problematic" id="id2412">bhuga_</span></a>: is your code similar to the setup described in this ticket?
| [Friday 18 February 2011] [16:02:42] &lt;cremes&gt; <a class="reference external" href="https://github.com/zeromq/zeromq2/issuesearch?state=open&amp;q=xrep#issue/164">https://github.com/zeromq/zeromq2/issuesearch?state=open&amp;q=xrep#issue/164</a>
| [Friday 18 February 2011] [16:02:57] &lt;cremes&gt; that raises the same assertion as your code
| [Friday 18 February 2011] [16:03:10] &lt;cremes&gt; i am wondering if the configuration of sockets &amp; threads is similar in your case
| [Friday 18 February 2011] [16:03:27] &lt;<a href="#id2413"><span class="problematic" id="id2414">bhuga_</span></a>&gt; mine is simpler
| [Friday 18 February 2011] [16:03:44] &lt;<a href="#id2415"><span class="problematic" id="id2416">bhuga_</span></a>&gt; but still difficult to hand over for reproduction
| [Friday 18 February 2011] [16:04:05] &lt;cremes&gt; how many sockets are you using?
| [Friday 18 February 2011] [16:04:19] &lt;cremes&gt; i.e. how many xrep, how many xreq?
| [Friday 18 February 2011] [16:04:19] &lt;<a href="#id2417"><span class="problematic" id="id2418">bhuga_</span></a>&gt; the ruby end is sitting on an xrep socket, one thread (ruby, after all) and the other end is common lisp via ffi on a req-rep
| [Friday 18 February 2011] [16:04:33] &lt;cremes&gt; ok
| [Friday 18 February 2011] [16:04:42] &lt;cremes&gt; are they both using the same build of libzmq?
| [Friday 18 February 2011] [16:04:47] &lt;<a href="#id2419"><span class="problematic" id="id2420">bhuga_</span></a>&gt; yes, 2.1.0
| [Friday 18 February 2011] [16:05:02] &lt;cremes&gt; 2.1.0 from the tarball or 2.1.0 from github master?
| [Friday 18 February 2011] [16:05:23] &lt;<a href="#id2421"><span class="problematic" id="id2422">bhuga_</span></a>&gt; yowza, good question, i didnt write that down when i put it into puppet last month.  probably the tarball.
| [Friday 18 February 2011] [16:05:34] &lt;cremes&gt; ok
| [Friday 18 February 2011] [16:05:49] &lt;cremes&gt; i would recommend trying master and seeing if the problem persists
| [Friday 18 February 2011] [16:06:04] &lt;<a href="#id2423"><span class="problematic" id="id2424">bhuga_</span></a>&gt; okay, i can do that. will be back in 15 or 20
| [Friday 18 February 2011] [16:06:06] &lt;cremes&gt; there have been many bug fixes since the 2.1.0 tarball was cut 2 or 3 months ago
| [Friday 18 February 2011] [16:06:10] &lt;cremes&gt; k
| [Friday 18 February 2011] [16:07:37] &lt;<a href="#id2425"><span class="problematic" id="id2426">bhuga_</span></a>&gt; (about to try it, but my buddy on the lisp end, debugging something else, just realized that putting 1 second between calls fixes it)
| [Friday 18 February 2011] [16:10:21] &lt;cremes&gt; <a href="#id2427"><span class="problematic" id="id2428">bhuga_</span></a>: yuck, that&#8217;s a sucky fix :)
| [Friday 18 February 2011] [16:10:36] &lt;<a href="#id2429"><span class="problematic" id="id2430">bhuga_</span></a>&gt; yeah, it kinda defeats the point of a sweet high-performance message queue :)
| [Friday 18 February 2011] [16:10:48] &lt;cremes&gt; definitely
| [Friday 18 February 2011] [16:11:33] &lt;cremes&gt; i have dozens of xrep/xreq sockets doing very high volume communications (from ruby) and i haven&#8217;t hit that particular assertin
| [Friday 18 February 2011] [16:11:51] &lt;cremes&gt; (though i was tearing my hair out about another one that just got fixed a few days back)
| [Friday 18 February 2011] [16:12:09] &lt;<a href="#id2431"><span class="problematic" id="id2432">bhuga_</span></a>&gt; this one has our hair pulled, i have to admit
| [Friday 18 February 2011] [16:12:13] &lt;cremes&gt; heh
| [Friday 18 February 2011] [16:12:15] &lt;<a href="#id2433"><span class="problematic" id="id2434">bhuga_</span></a>&gt; its pretty much brought us to a standstill
| [Friday 18 February 2011] [16:12:25] &lt;cremes&gt; let me know how it goes after the update
| [Friday 18 February 2011] [16:12:42] &lt;<a href="#id2435"><span class="problematic" id="id2436">bhuga_</span></a>&gt; figuring out how to make autoconf work on head still :)
| [Friday 18 February 2011] [16:13:17] &lt;cremes&gt; what os are you on?
| [Friday 18 February 2011] [16:13:23] &lt;<a href="#id2437"><span class="problematic" id="id2438">bhuga_</span></a>&gt; ubuntu 10.10
| [Friday 18 February 2011] [16:13:26] &lt;cremes&gt; ko
| [Friday 18 February 2011] [16:13:29] &lt;cremes&gt; er, ok
| [Friday 18 February 2011] [16:15:05] &lt;<a href="#id2439"><span class="problematic" id="id2440">bhuga_</span></a>&gt; autoreconf &#8211;install and autoconf are neither doing the trick :/
| [Friday 18 February 2011] [16:16:09] &lt;<a href="#id2441"><span class="problematic" id="id2442">bhuga_</span></a>&gt; (then i found autogen.sh, not mentioned in the INSTALL :) )
| [Friday 18 February 2011] [16:25:28] &lt;<a href="#id2443"><span class="problematic" id="id2444">bhuga_</span></a>&gt; (initial results with the new version are quite promising. thanks!)
| [Friday 18 February 2011] [16:33:14] &lt;cremes&gt; <a href="#id2445"><span class="problematic" id="id2446">bhuga_</span></a>: good to hear
| [Friday 18 February 2011] [16:33:48] &lt;<a href="#id2447"><span class="problematic" id="id2448">bhuga_</span></a>&gt; we are still getting it but its more deterministic now
| [Friday 18 February 2011] [16:34:13] &lt;<a href="#id2449"><span class="problematic" id="id2450">bhuga_</span></a>&gt; makes me think we&#8217;re using it wrong now as opposed to weird bugs
| [Friday 18 February 2011] [16:34:38] &lt;cremes&gt; interesting
| [Friday 18 February 2011] [16:34:55] &lt;cremes&gt; a reproducible case would be a great addition to that ticket i referenced earlier
| [Friday 18 February 2011] [16:35:58] &lt;<a href="#id2451"><span class="problematic" id="id2452">bhuga_</span></a>&gt; well you know how testing these things are
| [Friday 18 February 2011] [16:36:05] &lt;<a href="#id2453"><span class="problematic" id="id2454">bhuga_</span></a>&gt; by definition they&#8217;re made to work with different languages, daemons, etc
| [Friday 18 February 2011] [16:36:20] &lt;<a href="#id2455"><span class="problematic" id="id2456">bhuga_</span></a>&gt; if we can make a minimal case we will
| [Friday 18 February 2011] [16:36:25] &lt;cremes&gt; cool
| [Friday 18 February 2011] [16:36:26] &lt;<a href="#id2457"><span class="problematic" id="id2458">bhuga_</span></a>&gt; (though i suspect if i could i could just fix it)
| [Friday 18 February 2011] [16:36:34] &lt;cremes&gt; :)
| [Friday 18 February 2011] [16:44:18] &lt;<a href="#id2459"><span class="problematic" id="id2460">bhuga_</span></a>&gt; more testing reveals some more non-deterministic failures :( but i guess if nobody&#8217;s heard of it before we&#8217;ll have to figure it out
| [Friday 18 February 2011] [16:45:18] &lt;cremes&gt; <a href="#id2461"><span class="problematic" id="id2462">bhuga_</span></a>: do you have any QUEUE devices in between your clients &amp; servers?
| [Friday 18 February 2011] [16:45:40] &lt;cremes&gt; if i understand your setup a bit, perhaps i can suggest a place to start looking
| [Friday 18 February 2011] [16:46:22] &lt;<a href="#id2463"><span class="problematic" id="id2464">bhuga_</span></a>&gt; its really simple
| [Friday 18 February 2011] [16:46:36] &lt;<a href="#id2465"><span class="problematic" id="id2466">bhuga_</span></a>&gt; the two are on the same machine, talking over an IPC (it might actually be ITC, i&#8217;d need to check) socket
| [Friday 18 February 2011] [16:46:50] &lt;<a href="#id2467"><span class="problematic" id="id2468">bhuga_</span></a>&gt; REQ-REP from lisp talking to XREP on ruby
| [Friday 18 February 2011] [16:47:01] &lt;<a href="#id2469"><span class="problematic" id="id2470">bhuga_</span></a>&gt; no other devices, no shenanigans
| [Friday 18 February 2011] [16:47:06] &lt;cremes&gt; ok
| [Friday 18 February 2011] [16:47:26] &lt;<a href="#id2471"><span class="problematic" id="id2472">bhuga_</span></a>&gt; the general feel of the upgrade is that it happens less, but it still happens
| [Friday 18 February 2011] [16:47:40] &lt;cremes&gt; what do you mean by REQ-REP from lisp? is a req socket talking to <em>both</em> the rep lisp and xrep ruby sockets?
| [Friday 18 February 2011] [16:47:59] &lt;<a href="#id2473"><span class="problematic" id="id2474">bhuga_</span></a>&gt; it&#8217;s doing a request-reply pattern, sending a request, blocking waiting for a reply
| [Friday 18 February 2011] [16:48:25] &lt;<a href="#id2475"><span class="problematic" id="id2476">bhuga_</span></a>&gt; the ruby bit is data-driven, receiving that message and sending a response
| [Friday 18 February 2011] [16:48:39] &lt;cremes&gt; ok, so you have single req socket in the lisp program talking to a single xrep socket in ruby
| [Friday 18 February 2011] [16:49:10] &lt;cremes&gt; and only the ruby side crashes?
| [Friday 18 February 2011] [16:49:45] &lt;<a href="#id2477"><span class="problematic" id="id2478">bhuga_</span></a>&gt; only the ruby side crashes, correct
| [Friday 18 February 2011] [16:51:02] &lt;cremes&gt; does it crash on recv or on send? and are these recv/sends blocking or non-blocking?
| [Friday 18 February 2011] [16:52:00] &lt;<a href="#id2479"><span class="problematic" id="id2480">bhuga_</span></a>&gt; i dont actually know. it&#8217;s hard to debug the assert. i have an strace of it
| [Friday 18 February 2011] [16:52:07] &lt;<a href="#id2481"><span class="problematic" id="id2482">bhuga_</span></a>&gt; and ruby&#8217;s not doing any syscalls on its own, i can say
| [Friday 18 February 2011] [16:52:13] &lt;cremes&gt; ok
| [Friday 18 February 2011] [16:52:41] &lt;<a href="#id2483"><span class="problematic" id="id2484">bhuga_</span></a>&gt; (apologies for spam:)
| [Friday 18 February 2011] [16:52:42] &lt;<a href="#id2485"><span class="problematic" id="id2486">bhuga_</span></a>&gt; send(5, &#8220;220#.rn0003773773773771000fQ200r0302236f&#8221;, 24, 0) = 24
| [Friday 18 February 2011] [16:52:42] &lt;<a href="#id2487"><span class="problematic" id="id2488">bhuga_</span></a>&gt; recv(15, &#8220;230P200r2000h201Er24000t201Er364357f267&#8221;, 24, MSG_DONTWAIT) = 24
| [Friday 18 February 2011] [16:52:42] &lt;<a href="#id2489"><span class="problematic" id="id2490">bhuga_</span></a>&gt; recv(15, &#8220;230P200r200030#6r33026425110t201Er364357f267&#8221;, 24, MSG_DONTWAIT) = 24
| [Friday 18 February 2011] [16:52:43] &lt;<a href="#id2491"><span class="problematic" id="id2492">bhuga_</span></a>&gt; recv(15, &#8220;230P200rt000h201Er3642772026730#6r3000&#8221;, 24, MSG_DONTWAIT) = 24
| [Friday 18 February 2011] [16:52:43] &lt;<a href="#id2493"><span class="problematic" id="id2494">bhuga_</span></a>&gt; send(5, &#8220;h201Ern0003773773773770000fQ200r0302236f&#8221;, 24, 0) = 24
| [Friday 18 February 2011] [16:52:43] &lt;<a href="#id2495"><span class="problematic" id="id2496">bhuga_</span></a>&gt; recv(15, &#8220;230P200r4000p323or21034-r2100010O266v&#8221;, 24, MSG_DONTWAIT) = 24
| [Friday 18 February 2011] [16:52:44] &lt;<a href="#id2497"><span class="problematic" id="id2498">bhuga_</span></a>&gt; recv(15, &#8220;250335Sr7000300223M267364177M267300223M26730#6r&#8221;, 24, MSG_DONTWAIT) = 24
| [Friday 18 February 2011] [16:52:44] &lt;<a href="#id2499"><span class="problematic" id="id2500">bhuga_</span></a>&gt; send(5, &#8220;X1_r10000300223M267364177M267300223M267230P200r&#8221;, 24, 0) = 24
| [Friday 18 February 2011] [16:52:44] &lt;<a href="#id2501"><span class="problematic" id="id2502">bhuga_</span></a>&gt; recv(15, &#8220;240345&lt;r5000300223M267364177M267300223M26730#6r&#8221;, 24, MSG_DONTWAIT) = 24
| [Friday 18 February 2011] [16:52:44] &lt;<a href="#id2503"><span class="problematic" id="id2504">bhuga_</span></a>&gt; recv(15, &#8220;230P200rv000324201Er0000n00036427720267&#8221;, 24, MSG_DONTWAIT) = 24
| [Friday 18 February 2011] [16:52:45] &lt;<a href="#id2505"><span class="problematic" id="id2506">bhuga_</span></a>&gt; recv(15, 0xbfe7b514, 24, MSG_DONTWAIT)  = -1 EAGAIN (Resource temporarily unavailable)
| [Friday 18 February 2011] [16:52:45] &lt;cremes&gt; can you puts a debug statement around the ruby send/recv calls to see which one is active during the crash?
| [Friday 18 February 2011] [16:52:45] &lt;<a href="#id2507"><span class="problematic" id="id2508">bhuga_</span></a>&gt; send(5, &#8220;p&lt;350f7000300223M267364177M267300223M26736427720267&#8221;, 24, 0) = 24
| [Friday 18 February 2011] [16:52:45] &lt;<a href="#id2509"><span class="problematic" id="id2510">bhuga_</span></a>&gt; recv(15, &#8220;240345&lt;r10000h201Er0000n00036427720267&#8221;, 24, MSG_DONTWAIT) = 24
| [Friday 18 February 2011] [16:53:13] &lt;cremes&gt; <a href="#id2511"><span class="problematic" id="id2512">bhuga_</span></a>: use pastie.org or gist.github.com for anything over 2 lines, pls; that&#8217;s really hard to read in the channel
| [Friday 18 February 2011] [16:53:17] &lt;<a href="#id2513"><span class="problematic" id="id2514">bhuga_</span></a>&gt; yeah <a class="reference external" href="http://pastie.org/1580392">http://pastie.org/1580392</a>
| [Friday 18 February 2011] [16:53:23] &lt;<a href="#id2515"><span class="problematic" id="id2516">bhuga_</span></a>&gt; i got throttled anyway
| [Friday 18 February 2011] [16:53:53] &lt;cremes&gt; can you puts a debug statement around the ruby send/recv calls to see which one is active during the crash?
| [Friday 18 February 2011] [16:54:25] &lt;<a href="#id2517"><span class="problematic" id="id2518">bhuga_</span></a>&gt; based on the assertion, it seems to be receiving
| [Friday 18 February 2011] [16:54:30] &lt;<a href="#id2519"><span class="problematic" id="id2520">bhuga_</span></a>&gt; it&#8217;s asserting that it shouldn&#8217;t be doing what it&#8217;s about to do unless the message has more parts
| [Friday 18 February 2011] [16:54:55] &lt;cremes&gt; ok
| [Friday 18 February 2011] [16:55:14] &lt;cremes&gt; how are you forming the messages on the lisp end for transmission? are they simple strings?
| [Friday 18 February 2011] [16:55:27] &lt;cremes&gt; encoded as json? protobufs, etc?
| [Friday 18 February 2011] [16:55:33] &lt;<a href="#id2521"><span class="problematic" id="id2522">bhuga_</span></a>&gt; that i know less about :/
| [Friday 18 February 2011] [16:55:36] &lt;cremes&gt; hell, s-expressions?
| [Friday 18 February 2011] [16:55:46] &lt;cremes&gt; ok
| [Friday 18 February 2011] [16:55:59] &lt;<a href="#id2523"><span class="problematic" id="id2524">bhuga_</span></a>&gt; im finding out
| [Friday 18 February 2011] [16:56:29] &lt;<a href="#id2525"><span class="problematic" id="id2526">bhuga_</span></a>&gt; utf-8 encoded, null-terminated strings
| [Friday 18 February 2011] [16:56:41] &lt;cremes&gt; ok
| [Friday 18 February 2011] [16:56:42] &lt;<a href="#id2527"><span class="problematic" id="id2528">bhuga_</span></a>&gt; the content of them does not appear to matter
| [Friday 18 February 2011] [16:57:18] &lt;<a href="#id2529"><span class="problematic" id="id2530">bhuga_</span></a>&gt; in that a given message (which we send from the lisp end, and reproduce) can be sent any number of times
| [Friday 18 February 2011] [16:57:46] &lt;<a href="#id2531"><span class="problematic" id="id2532">bhuga_</span></a>&gt; until the random crash
| [Friday 18 February 2011] [16:58:08] &lt;<a href="#id2533"><span class="problematic" id="id2534">bhuga_</span></a>&gt; (after playing with it, it seems a 50-100ms delay is sufficient to prevent the issue from appearing in simple tests)
| [Friday 18 February 2011] [16:58:08] &lt;cremes&gt; can you try a req socket on the ruby end instead of xrep? it doesn&#8217;t sound like you need the flexibility of an xrep anyway
| [Friday 18 February 2011] [16:58:48] &lt;<a href="#id2535"><span class="problematic" id="id2536">bhuga_</span></a>&gt; hrm. i can try it, i think.
| [Friday 18 February 2011] [16:58:54] &lt;<a href="#id2537"><span class="problematic" id="id2538">bhuga_</span></a>&gt; it will take me a minute
| [Friday 18 February 2011] [16:58:58] &lt;cremes&gt; ok
| [Friday 18 February 2011] [16:59:19] &lt;cremes&gt; with a rep socket you don&#8217;t have to worry about creating the null message delimiter and such
| [Friday 18 February 2011] [16:59:28] &lt;<a href="#id2539"><span class="problematic" id="id2540">bhuga_</span></a>&gt; (though the xrep is kind of what you need on ruby&#8211;we&#8217;re currently only doing one task at a time but that&#8217;s not the goal, and blocking is the devil)
| [Friday 18 February 2011] [16:59:52] &lt;cremes&gt; yeah, but how does xrep help in that case? it&#8217;s blocking too
| [Friday 18 February 2011] [17:00:16] &lt;cremes&gt; you can use both rep and xrep with ZMQ::NOBLOCK; it isn&#8217;t limited to just xrep
| [Friday 18 February 2011] [17:00:35] &lt;<a href="#id2541"><span class="problematic" id="id2542">bhuga_</span></a>&gt; i guess i need to keep reading (i have taken this bug over from someone else)
| [Friday 18 February 2011] [17:00:58] &lt;cremes&gt; can you pastie the ruby method that does the recv and the one that does the send?
| [Friday 18 February 2011] [17:01:41] &lt;cremes&gt; i can probably help with the socket switch out... i wrote the ffi-rzmq gem so i&#8217;m pretty familiar with this stuff
| [Friday 18 February 2011] [17:02:53] &lt;<a href="#id2543"><span class="problematic" id="id2544">bhuga_</span></a>&gt; okay, i can do that
| [Friday 18 February 2011] [17:03:51] &lt;<a href="#id2545"><span class="problematic" id="id2546">bhuga_</span></a>&gt; <a class="reference external" href="http://pastie.org/1580429">http://pastie.org/1580429</a>
| [Friday 18 February 2011] [17:04:16] &lt;<a href="#id2547"><span class="problematic" id="id2548">bhuga_</span></a>&gt; there is a lot of silly metaprogramming going on
| [Friday 18 February 2011] [17:04:28] &lt;<a href="#id2549"><span class="problematic" id="id2550">bhuga_</span></a>&gt; but the log_req in that method never happens
| [Friday 18 February 2011] [17:04:56] &lt;<a href="#id2551"><span class="problematic" id="id2552">bhuga_</span></a>&gt; i can toss in a debug to make sure that it&#8217;s getting to that socket.recv_string, which i suspect is the line
| [Friday 18 February 2011] [17:05:10] &lt;cremes&gt; right
| [Friday 18 February 2011] [17:05:19] &lt;cremes&gt; do you set any options on this socket?
| [Friday 18 February 2011] [17:05:31] &lt;cremes&gt; e.g. socket.setsockopt(option, value)
| [Friday 18 February 2011] [17:05:56] &lt;<a href="#id2553"><span class="problematic" id="id2554">bhuga_</span></a>&gt; the metaprogramming thing again. i&#8217;ll try and output the current options in my forthcoming debug addition
| [Friday 18 February 2011] [17:06:38] &lt;cremes&gt; ok
| [Friday 18 February 2011] [17:06:51] &lt;cremes&gt; btw, nothing you are doing there requires an xrep socket
| [Friday 18 February 2011] [17:06:59] &lt;<a href="#id2555"><span class="problematic" id="id2556">bhuga_</span></a>&gt; i believe you :)
| [Friday 18 February 2011] [17:07:04] &lt;cremes&gt; but you do make things more complicated for yourself when you have to send the reply
| [Friday 18 February 2011] [17:07:05] &lt;<a href="#id2557"><span class="problematic" id="id2558">bhuga_</span></a>&gt; and i will change it if need be
| [Friday 18 February 2011] [17:07:33] &lt;<a href="#id2559"><span class="problematic" id="id2560">bhuga_</span></a>&gt; im afraid to change it just now since if we are doing the null-terminator thing that would perhaps no longer be correct?
| [Friday 18 February 2011] [17:07:41] &lt;cremes&gt; right
| [Friday 18 February 2011] [17:07:58] &lt;cremes&gt; you need to save the &#8220;return envelope&#8221; for the reply
| [Friday 18 February 2011] [17:08:17] &lt;cremes&gt; and it is separated from the body of your messages by an empty/null message
| [Friday 18 February 2011] [17:08:30] &lt;<a href="#id2561"><span class="problematic" id="id2562">bhuga_</span></a>&gt; is there a nice way to get all of the socket options?
| [Friday 18 February 2011] [17:08:40] &lt;cremes&gt; search the code for setsockopt
| [Friday 18 February 2011] [17:09:01] &lt;cremes&gt; if you don&#8217;t find it, then you haven&#8217;t set any beyond the defaults
| [Friday 18 February 2011] [17:09:34] &lt;<a href="#id2563"><span class="problematic" id="id2564">bhuga_</span></a>&gt;  sockets[shard_id].setsockopt(ZMQ::LINGER, -1)
| [Friday 18 February 2011] [17:09:47] &lt;<a href="#id2565"><span class="problematic" id="id2566">bhuga_</span></a>&gt; which i thing fixed a bug we had on exiting
| [Friday 18 February 2011] [17:10:08] &lt;cremes&gt; yeah, it prevents the socket from closing until all packets are flushed
| [Friday 18 February 2011] [17:10:27] &lt;<a href="#id2567"><span class="problematic" id="id2568">bhuga_</span></a>&gt; sounds about right, i think it was giving all kinds of errors when we tried to exit
| [Friday 18 February 2011] [17:10:30] &lt;cremes&gt; just for kicks, can you comment that out and run your test? it crashes before it&#8217;s done anyway, right?
| [Friday 18 February 2011] [17:10:36] &lt;<a href="#id2569"><span class="problematic" id="id2570">bhuga_</span></a>&gt; yeah, i can do that
| [Friday 18 February 2011] [17:13:37] &lt;<a href="#id2571"><span class="problematic" id="id2572">bhuga_</span></a>&gt; i dont think the linger is on the server
| [Friday 18 February 2011] [17:13:47] &lt;<a href="#id2573"><span class="problematic" id="id2574">bhuga_</span></a>&gt; i think this is from a (being replaced by lisp) ruby client
| [Friday 18 February 2011] [17:13:57] &lt;<a href="#id2575"><span class="problematic" id="id2576">bhuga_</span></a>&gt; could a server expecting a lingering client cause this behavior?
| [Friday 18 February 2011] [17:14:03] &lt;cremes&gt; no
| [Friday 18 February 2011] [17:14:56] &lt;cremes&gt; so, i think it is worthwhile for you to figure out how to swap the xrep for a rep socket
| [Friday 18 February 2011] [17:15:10] &lt;cremes&gt; xrep is a lower-level 0mq socket so it is trickier to work with
| [Friday 18 February 2011] [17:15:38] &lt;cremes&gt; from what i have seen, you don&#8217;t need it; a rep socket and an xrep socket both &#8216;block&#8217; the same way when sending/recving
| [Friday 18 February 2011] [17:16:08] &lt;cremes&gt; you only use xrep when you want to break the strict send/recv/send/recv REQ-REP pattern
| [Friday 18 February 2011] [17:17:36] &lt;<a href="#id2577"><span class="problematic" id="id2578">bhuga_</span></a>&gt; well, it will need to, of sorts. eventually the &#8216;client&#8217; in this case will send out one request and get results of initially-unknown length back from n different workers
| [Friday 18 February 2011] [17:17:47] &lt;<a href="#id2579"><span class="problematic" id="id2580">bhuga_</span></a>&gt; but not <em>yet</em>, necessarily :)
| [Friday 18 February 2011] [17:18:12] &lt;cremes&gt; ok
| [Friday 18 February 2011] [17:18:28] &lt;<a href="#id2581"><span class="problematic" id="id2582">bhuga_</span></a>&gt; but i&#8217;ll investigate taht further and plug in some debug to make sure i know exactly what line of ruby is causing it
| [Friday 18 February 2011] [17:18:29] &lt;cremes&gt; but remember the YAGNI principle :)
| [Friday 18 February 2011] [17:18:31] &lt;<a href="#id2583"><span class="problematic" id="id2584">bhuga_</span></a>&gt; then update the issue
| [Friday 18 February 2011] [17:18:39] &lt;cremes&gt; cool
| [Friday 18 February 2011] [17:18:50] &lt;<a href="#id2585"><span class="problematic" id="id2586">bhuga_</span></a>&gt; if i pin it down
| [Friday 18 February 2011] [17:18:54] &lt;<a href="#id2587"><span class="problematic" id="id2588">bhuga_</span></a>&gt; thanks for your time anyway
| [Friday 18 February 2011] [17:18:59] &lt;cremes&gt; sure
| [Friday 18 February 2011] [17:19:05] &lt;<a href="#id2589"><span class="problematic" id="id2590">bhuga_</span></a>&gt; best gem author ever
| [Friday 18 February 2011] [19:20:26] &lt;Kinbote&gt;        would it be possible to use zermomq as a kind of &#8220;router&#8221; for udp traffic, specfically SIP+RTP?
| [Friday 18 February 2011] [19:24:45] &lt;sam`&gt;   Kinbote: 0MQ uses its own wire protocol, so it&#8217;s not &#8220;directly&#8221; compatible with software not using 0MQ
| [Friday 18 February 2011] [19:25:04] &lt;sam`&gt;   but you could listen on one side with a &#8220;normal&#8221; socket for UDP traffic
| [Friday 18 February 2011] [19:25:12] &lt;sam`&gt;   route that through your series of hops using ZMQ
| [Friday 18 February 2011] [19:25:25] &lt;sam`&gt;   and de-encapsulate at the end onto a normal socket
| [Friday 18 February 2011] [20:04:59] &lt;stodge&gt; Anyone know if there are ubuntu packages for openpgm/zeromq/pyzmq?
| [Friday 18 February 2011] [20:05:40] &lt;stodge&gt; Oops - accidentally left the channel. Did my question make it?
| [Friday 18 February 2011] [20:06:06] &lt;stodge&gt; Are there Ubuntu packages for openpgm/zeromq/pyzmq?
| [Friday 18 February 2011] [20:31:10] &lt;stodge&gt; How do I build pyzmq with openpgm support? I built openpgm, built zeromq &#8211;with-pgm and then built pyzmq. But zmq.EPGM isn&#8217;t available
| [Saturday 19 February 2011] [11:09:23] &lt;Steve-o&gt;      sustrik: have a new alternative to types.h, following MSVC&#8217;s CRT definitions
| [Saturday 19 February 2011] [12:36:48] &lt;sustrik&gt;      Steve-o: would that fix the 0mq build?
| [Saturday 19 February 2011] [12:37:02] &lt;sustrik&gt;      i&#8217;ve undefined bool
| [Saturday 19 February 2011] [12:37:10] &lt;sustrik&gt;      which fixed sunstudio build
| [Saturday 19 February 2011] [12:37:19] &lt;sustrik&gt;      however, the msvc build is still broken
| [Saturday 19 February 2011] [12:37:28] &lt;sustrik&gt;      no idea of what&#8217;s going to
| [Saturday 19 February 2011] [12:37:32] &lt;sustrik&gt;      on*
| [Saturday 19 February 2011] [12:37:44] &lt;Steve-o&gt;      msvc has never complained here
| [Saturday 19 February 2011] [12:38:29] &lt;Steve-o&gt;      haven&#8217;t tested 0mq &amp; sunpro for a long while
| [Saturday 19 February 2011] [12:38:43] &lt;Steve-o&gt;      got an output log?
| [Saturday 19 February 2011] [12:44:10] &lt;sustrik&gt;      wait a sec
| [Saturday 19 February 2011] [12:45:02] &lt;sustrik&gt;      Steve-o: <a class="reference external" href="http://build.zero.mq/job/ZeroMQ2-core-master_MSVC-win7/184/console">http://build.zero.mq/job/ZeroMQ2-core-master_MSVC-win7/184/console</a>
| [Saturday 19 February 2011] [12:45:24] &lt;sustrik&gt;      that&#8217;s 0mq master
| [Saturday 19 February 2011] [12:45:32] &lt;sustrik&gt;      it looks like there&#8217;s still problem with bool
| [Saturday 19 February 2011] [12:45:52] &lt;sustrik&gt;      note that the &#8220;missing&#8221; function has bool argument
| [Saturday 19 February 2011] [12:46:22] &lt;Steve-o&gt;      I see
| [Saturday 19 February 2011] [12:46:40] &lt;sustrik&gt;      it&#8217;s pgm_sender and pgm_receiver
| [Saturday 19 February 2011] [12:46:45] &lt;sustrik&gt;      which include pgm_socket
| [Saturday 19 February 2011] [12:46:52] &lt;sustrik&gt;      which in turn include pgm.h
| [Saturday 19 February 2011] [12:47:35] &lt;Steve-o&gt;      so what changed, how come 2.1.0 builds fine?
| [Saturday 19 February 2011] [12:48:41] &lt;sustrik&gt;      so what happened is that i&#8217;ve added a new argument to one internal 0mq function
| [Saturday 19 February 2011] [12:48:56] &lt;sustrik&gt;      it was a bool argument
| [Saturday 19 February 2011] [12:49:17] &lt;Steve-o&gt;      and conflicts trickled through, ok
| [Saturday 19 February 2011] [12:49:22] &lt;sustrik&gt;      right
| [Saturday 19 February 2011] [12:49:32] &lt;sustrik&gt;      then i&#8217;ve added something like this:
| [Saturday 19 February 2011] [12:49:35] &lt;sustrik&gt;      #include &lt;pgm.h&gt;
| [Saturday 19 February 2011] [12:49:42] &lt;sustrik&gt;      #ifdef bool
| [Saturday 19 February 2011] [12:49:48] &lt;sustrik&gt;      #undef bool
| [Saturday 19 February 2011] [12:49:50] &lt;sustrik&gt;      #endif
| [Saturday 19 February 2011] [12:49:50] &lt;Steve-o&gt;      as per your mail
| [Saturday 19 February 2011] [12:49:57] &lt;sustrik&gt;      yes
| [Saturday 19 February 2011] [12:50:05] &lt;sustrik&gt;      that fixed the sunstudio build
| [Saturday 19 February 2011] [12:50:18] &lt;sustrik&gt;      but caused different errors in msvc build
| [Saturday 19 February 2011] [12:50:28] &lt;sustrik&gt;      the ones you see now
| [Saturday 19 February 2011] [12:51:02] &lt;Steve-o&gt;      so the header and the code are using different definitions of bool still
| [Saturday 19 February 2011] [12:52:05] &lt;sustrik&gt;      yes, looks like that
| [Saturday 19 February 2011] [12:52:17] &lt;guido_g&gt;      howdy
| [Saturday 19 February 2011] [12:52:17] &lt;sustrik&gt;      no idea what exactly is wrong
| [Saturday 19 February 2011] [12:52:20] &lt;sustrik&gt;      hi
| [Saturday 19 February 2011] [12:52:22] &lt;Steve-o&gt;      well pgm.h is only included twice
| [Saturday 19 February 2011] [12:52:26] &lt;sustrik&gt;      yes
| [Saturday 19 February 2011] [12:52:33] &lt;sustrik&gt;      i&#8217;ve undefed bool at both places
| [Saturday 19 February 2011] [12:52:35] &lt;guido_g&gt;      any ideas why (e)pgm stopped working on the master?
| [Saturday 19 February 2011] [12:53:13] &lt;sustrik&gt;      no, but it looks like 0mq problem
| [Saturday 19 February 2011] [12:53:21] &lt;guido_g&gt;      ahh ok
| [Saturday 19 February 2011] [12:53:27] &lt;sustrik&gt;      presumably one of the recent patches have broken it
| [Saturday 19 February 2011] [12:53:50] &lt;guido_g&gt;      just asking because there was no feedback to the mail
| [Saturday 19 February 2011] [12:54:07] &lt;sustrik&gt;      are you experiencing the problem?
| [Saturday 19 February 2011] [12:54:14] &lt;sustrik&gt;      my problem is i have no test env
| [Saturday 19 February 2011] [12:54:24] &lt;sustrik&gt;      so it&#8217;s hard for me to find out what&#8217;s the problem
| [Saturday 19 February 2011] [12:54:35] &lt;guido_g&gt;      yes, i experienced the problem and reported it
| [Saturday 19 February 2011] [12:54:42] &lt;sustrik&gt;      i may try pgm over loopback though...
| [Saturday 19 February 2011] [12:54:57] &lt;guido_g&gt;      huh?
| [Saturday 19 February 2011] [12:55:08] &lt;sustrik&gt;      i have just a single box :)
| [Saturday 19 February 2011] [12:55:13] &lt;guido_g&gt;      lo doesn&#8217;t do multicast
| [Saturday 19 February 2011] [12:55:24] &lt;guido_g&gt;      too bad
| [Saturday 19 February 2011] [12:55:26] &lt;Steve-o&gt;      my blade chassis is switched off and 50,000 miles away, I only have a windows laptop currently
| [Saturday 19 February 2011] [12:55:47] &lt;Steve-o&gt;      :D
| [Saturday 19 February 2011] [12:55:48] &lt;sustrik&gt;      still in NY?
| [Saturday 19 February 2011] [12:56:02] &lt;Steve-o&gt;      back in HK next week
| [Saturday 19 February 2011] [12:56:24] &lt;Steve-o&gt;      just working through a lot of contractor jobs
| [Saturday 19 February 2011] [12:56:29] &lt;sustrik&gt;      right
| [Saturday 19 February 2011] [12:56:50] &lt;sustrik&gt;      guido_g: there&#8217;s simulated multicast over lo
| [Saturday 19 February 2011] [12:56:56] &lt;sustrik&gt;      i may try that
| [Saturday 19 February 2011] [12:57:26] &lt;guido_g&gt;      you simply use the external ip, mc isn&#8217;t routed anyway
| [Saturday 19 February 2011] [12:57:51] &lt;guido_g&gt;      btw, this was the setup where i first discovered that something went wrong
| [Saturday 19 February 2011] [12:58:16] &lt;guido_g&gt;      normaly mc traffic is also routed back to the originating host
| [Saturday 19 February 2011] [12:58:28] &lt;sustrik&gt;      if i do that i won&#8217;t see whether the message goes through or not
| [Saturday 19 February 2011] [12:58:48] &lt;guido_g&gt;      huh?
| [Saturday 19 February 2011] [12:58:58] &lt;guido_g&gt;      sorry, can&#8217;t follow you
| [Saturday 19 February 2011] [12:59:12] &lt;sustrik&gt;      when i use a multicast group that nobody listens to
| [Saturday 19 February 2011] [12:59:21] &lt;sustrik&gt;      &#8220;you simply use the external ip, mc isn&#8217;t routed anyway&#8221;
| [Saturday 19 February 2011] [13:00:22] &lt;guido_g&gt;      ment to mean that the mc traffic is not gouing to leave your local network when using the external ip of you box
| [Saturday 19 February 2011] [13:00:56] &lt;guido_g&gt;      and you don&#8217;t have to play tricks w/ the network stack to make lo mc aware
| [Saturday 19 February 2011] [13:01:29] &lt;guido_g&gt;      or did you mean multicast loopback?
| [Saturday 19 February 2011] [13:01:29] &lt;sustrik&gt;      ok
| [Saturday 19 February 2011] [13:01:34] &lt;sustrik&gt;      yep
| [Saturday 19 February 2011] [13:01:38] &lt;guido_g&gt;      ahhh...
| [Saturday 19 February 2011] [13:01:39] &lt;guido_g&gt;      sorry
| [Saturday 19 February 2011] [13:01:43] &lt;guido_g&gt;      my fault then
| [Saturday 19 February 2011] [13:01:48] &lt;sustrik&gt;      never mind
| [Saturday 19 February 2011] [13:01:55] &lt;guido_g&gt;      i assumed loopback device
| [Saturday 19 February 2011] [13:02:14] &lt;sustrik&gt;      i&#8217;ll try that am i&#8217;ll see whether i can discover the bug that way
| [Saturday 19 February 2011] [13:02:29] &lt;guido_g&gt;      ok
| [Saturday 19 February 2011] [13:02:39] &lt;guido_g&gt;      thanks
| [Saturday 19 February 2011] [13:02:58] &lt;guido_g&gt;      if you think you have it, i can try it w/ two machines
| [Saturday 19 February 2011] [13:13:56] &lt;Steve-o&gt;      sustrik:  ugggggh, so I really have to use a pgm_bool_t?  Is MSVC picking up BOOL from inside pgm.h and breaking some C++ templates expecting bool?
| [Saturday 19 February 2011] [13:23:29] &lt;Steve-o&gt;      the xtree template warning with bool/BOOL conflict no longer occurs with OpenPGM trunk
| [Saturday 19 February 2011] [13:24:18] &lt;Steve-o&gt;      i.e. the new types.h:  <a class="reference external" href="http://code.google.com/p/openpgm/source/browse/trunk/openpgm/pgm/include/pgm/types.h">http://code.google.com/p/openpgm/source/browse/trunk/openpgm/pgm/include/pgm/types.h</a>
| [Saturday 19 February 2011] [13:33:19] &lt;<a href="#id2591"><span class="problematic" id="id2592">pieterh_</span></a>&gt;     sustrik, do we have a place in the git for tools like web api generation?
| [Saturday 19 February 2011] [13:33:19] &lt;sustrik&gt;      Steve-o: well, i&#8217;m not sure what&#8217;s exactly going on
| [Saturday 19 February 2011] [13:33:34] &lt;sustrik&gt;      <a href="#id2593"><span class="problematic" id="id2594">pieterh_</span></a>: hm, not yet
| [Saturday 19 February 2011] [13:33:53] &lt;<a href="#id2595"><span class="problematic" id="id2596">pieterh_</span></a>&gt;     I guess this applies also to mikko&#8217;s tools
| [Saturday 19 February 2011] [13:34:12] &lt;sustrik&gt;      the build system is scattered across the directiories
| [Saturday 19 February 2011] [13:34:20] &lt;sustrik&gt;      which is how autotools work
| [Saturday 19 February 2011] [13:34:31] &lt;sustrik&gt;      what about putting the scripts to doc subdir?
| [Saturday 19 February 2011] [13:34:42] &lt;<a href="#id2597"><span class="problematic" id="id2598">pieterh_</span></a>&gt;     hmm, ok what I&#8217;ll do is make a separate tool that does this work
| [Saturday 19 February 2011] [13:34:47] &lt;<a href="#id2599"><span class="problematic" id="id2600">pieterh_</span></a>&gt;     in its own git
| [Saturday 19 February 2011] [13:34:58] &lt;<a href="#id2601"><span class="problematic" id="id2602">pieterh_</span></a>&gt;     since we have other projects with the same needs, e.g. zfl
| [Saturday 19 February 2011] [13:35:06] &lt;sustrik&gt;      as you wish
| [Saturday 19 February 2011] [13:35:22] &lt;sustrik&gt;      however, there are documentation generation scripts in doc subdir
| [Saturday 19 February 2011] [13:35:33]         * <a href="#id2603"><span class="problematic" id="id2604">pieterh_</span></a> goes to check...
| [Saturday 19 February 2011] [13:35:48] &lt;sustrik&gt;      so placing one more there won&#8217;t be completely ridiculous
| [Saturday 19 February 2011] [13:36:04] &lt;sustrik&gt;      Steve-o: i though that undefining bool should solve the issue...
| [Saturday 19 February 2011] [13:36:25] &lt;<a href="#id2605"><span class="problematic" id="id2606">pieterh_</span></a>&gt;     sustrik, what&#8217;s there now is the straight man-&gt;txt/xml stuff
| [Saturday 19 February 2011] [13:36:28] &lt;Steve-o&gt;      not defining in the first place is better :D
| [Saturday 19 February 2011] [13:36:52] &lt;<a href="#id2607"><span class="problematic" id="id2608">pieterh_</span></a>&gt;     let me think this over for a couple of hours
| [Saturday 19 February 2011] [13:37:01] &lt;sustrik&gt;      <a href="#id2609"><span class="problematic" id="id2610">pieterh_</span></a>: txt-&gt;man/http
| [Saturday 19 February 2011] [13:37:08] &lt;sustrik&gt;      html*
| [Saturday 19 February 2011] [13:37:11] &lt;sustrik&gt;      Steve-o: yes
| [Saturday 19 February 2011] [13:37:19] &lt;<a href="#id2611"><span class="problematic" id="id2612">pieterh_</span></a>&gt;     yes, txt to man/html/xml
| [Saturday 19 February 2011] [13:37:28] &lt;<a href="#id2613"><span class="problematic" id="id2614">pieterh_</span></a>&gt;     I&#8217;m using the xml as input for this process
| [Saturday 19 February 2011] [13:37:34] &lt;sustrik&gt;      but as far as I understand you use your &#8220;bool&#8221; in PGM API, right?
| [Saturday 19 February 2011] [13:38:08] &lt;sustrik&gt;      pieterh: what xml?
| [Saturday 19 February 2011] [13:38:19] &lt;<a href="#id2615"><span class="problematic" id="id2616">pieterh_</span></a>&gt;     try &#8216;make zmq.xml&#8217; in the doc directory
| [Saturday 19 February 2011] [13:38:24] &lt;sustrik&gt;      it&#8217;s some intermediate asciidoc step?
| [Saturday 19 February 2011] [13:38:26] &lt;sustrik&gt;      a-ha
| [Saturday 19 February 2011] [13:38:28] &lt;<a href="#id2617"><span class="problematic" id="id2618">pieterh_</span></a>&gt;     sure
| [Saturday 19 February 2011] [13:38:31] &lt;sustrik&gt;      i see
| [Saturday 19 February 2011] [13:38:32] &lt;<a href="#id2619"><span class="problematic" id="id2620">pieterh_</span></a>&gt;     docbook xml format
| [Saturday 19 February 2011] [13:39:21] &lt;sustrik&gt;      Steve-o: maybe the bool in the API should be simply changed to int
| [Saturday 19 February 2011] [13:40:22] &lt;sustrik&gt;      <a href="#id2621"><span class="problematic" id="id2622">pieterh_</span></a>: i would say generating the wikidot source could be part of the build process
| [Saturday 19 February 2011] [13:40:31] &lt;sustrik&gt;      it introduces dependency on perl though
| [Saturday 19 February 2011] [13:40:46] &lt;<a href="#id2623"><span class="problematic" id="id2624">pieterh_</span></a>&gt;     sustrik, indeed
| [Saturday 19 February 2011] [13:41:16] &lt;Steve-o&gt;      try the update first, although it might indeed be that BOOL is too strongly typed
| [Saturday 19 February 2011] [13:41:29] &lt;<a href="#id2625"><span class="problematic" id="id2626">pieterh_</span></a>&gt;     let&#8217;s aim for stand-alone tool which mikko can then integrate into his build processes
| [Saturday 19 February 2011] [13:41:41] &lt;sustrik&gt;      <a href="#id2627"><span class="problematic" id="id2628">pieterh_</span></a>: ok
| [Saturday 19 February 2011] [13:41:52] &lt;sustrik&gt;      Steve-o: ok
| [Saturday 19 February 2011] [13:41:57] &lt;<a href="#id2629"><span class="problematic" id="id2630">pieterh_</span></a>&gt;     :-)
| [Saturday 19 February 2011] [13:42:17] &lt;<a href="#id2631"><span class="problematic" id="id2632">pieterh_</span></a>&gt;     if there are other things we can profitably mechanically upload to the wiki, let me know
| [Saturday 19 February 2011] [13:43:07] &lt;sustrik&gt;      ultimately, the docs for stable version
| [Saturday 19 February 2011] [13:43:38] &lt;sustrik&gt;      on the other hand, raw html is much faster than wikidot
| [Saturday 19 February 2011] [13:43:55] &lt;sustrik&gt;      it&#8217;s a trade-off, speed vs. nice design
| [Saturday 19 February 2011] [13:47:10] &lt;<a href="#id2633"><span class="problematic" id="id2634">pieterh_</span></a>&gt;     up to you, really
| [Saturday 19 February 2011] [13:47:58] &lt;<a href="#id2635"><span class="problematic" id="id2636">pieterh_</span></a>&gt;     it&#8217;s faster with pure HTML but we can do more interesting things with Wikidot, e.g. Table of Contents, navigation, etc.
| [Saturday 19 February 2011] [13:48:13] &lt;<a href="#id2637"><span class="problematic" id="id2638">pieterh_</span></a>&gt;     our limiting factor is URLs, really
| [Saturday 19 February 2011] [13:48:42] &lt;<a href="#id2639"><span class="problematic" id="id2640">pieterh_</span></a>&gt;     api.zeromq.org/2.1.0/zmq_bind would work
| [Saturday 19 February 2011] [13:48:55] &lt;<a href="#id2641"><span class="problematic" id="id2642">pieterh_</span></a>&gt;     for each stable version released
| [Saturday 19 February 2011] [13:49:05] &lt;<a href="#id2643"><span class="problematic" id="id2644">pieterh_</span></a>&gt;     there are still people using 2.0.8 in production...
| [Saturday 19 February 2011] [13:49:46] &lt;<a href="#id2645"><span class="problematic" id="id2646">pieterh_</span></a>&gt;     sorry, my bad, wikidot doesn&#8217;t allow subdirectories...
| [Saturday 19 February 2011] [13:50:21] &lt;<a href="#id2647"><span class="problematic" id="id2648">pieterh_</span></a>&gt;     api.zeromq.org/2-1-0:zmq_bind
| [Saturday 19 February 2011] [13:52:06] &lt;sustrik&gt;      no preference
| [Saturday 19 February 2011] [13:52:18] &lt;sustrik&gt;      should we ask on the ml?
| [Saturday 19 February 2011] [14:08:52] &lt;<a href="#id2649"><span class="problematic" id="id2650">pieterh_</span></a>&gt;     sustrik: ack
| [Saturday 19 February 2011] [16:28:14] &lt;mikko&gt;        g&#8217;evening
| [Saturday 19 February 2011] [17:03:33] &lt;<a href="#id2651"><span class="problematic" id="id2652">pieterh_</span></a>&gt;     mikko, top of the evening to you!
| [Saturday 19 February 2011] [17:43:05] &lt;sustrik&gt;      <a href="#id2653"><span class="problematic" id="id2654">pieterh_</span></a>: still there?
| [Saturday 19 February 2011] [17:57:33] &lt;Steve-o&gt;      wow, it&#8217;s surprisingly tedious to detect single core machines with hyper-threading
| [Saturday 19 February 2011] [17:58:34] &lt;mikko&gt;        Steve-o: runtime?
| [Saturday 19 February 2011] [17:58:40] &lt;Steve-o&gt;      yup
| [Saturday 19 February 2011] [17:59:01] &lt;Steve-o&gt;      Windows XP SP3 has a backported API to walk the CPU topology to count packages, cores, logical processors
| [Saturday 19 February 2011] [17:59:27] &lt;Steve-o&gt;      CPUID seems to be a bit broken on new i3, i5, i7 processors
| [Saturday 19 February 2011] [17:59:47] &lt;Steve-o&gt;      every Unix has it&#8217;s own custom API or /proc system
| [Saturday 19 February 2011] [18:00:48] &lt;Steve-o&gt;      I&#8217;m trying to see if I can at runtime catch the case of 1 core with HT enabled to stop spinlocks spinning
| [Saturday 19 February 2011] [18:01:54] &lt;Steve-o&gt;      it&#8217;s probably futile as on Linux at least the system clock is pretty much only low resolution in such configurations as HT causes it to jump all over the place
| [Saturday 19 February 2011] [18:02:06] &lt;mikko&gt;        i got a vague memory about reading about this or something related
| [Saturday 19 February 2011] [18:03:02] &lt;Steve-o&gt;      I have something working in Windows but it&#8217;s probably not worth committing
| [Saturday 19 February 2011] [18:04:34] &lt;Steve-o&gt;      I already use hyper-threading CPU pauses in spinlocks so that multi-core HT systems run fine
| [Saturday 19 February 2011] [18:06:42] &lt;mikko&gt;        btw, i don&#8217;t know whether you saw this:
| [Saturday 19 February 2011] [18:06:51] &lt;mikko&gt;        <a class="reference external" href="https://github.com/mkoppanen/zeromq2/tree/openpgm-autoconf">https://github.com/mkoppanen/zeromq2/tree/openpgm-autoconf</a>
| [Saturday 19 February 2011] [18:07:02] &lt;mikko&gt;        seems to be functional now
| [Saturday 19 February 2011] [18:10:20] &lt;Steve-o&gt;      ok great
| [Saturday 19 February 2011] [18:10:43] &lt;mikko&gt;        intel seems to have articles on detecting HT
| [Saturday 19 February 2011] [18:10:56] &lt;mikko&gt;        but when i try to follow the link to the article it 404s
| [Saturday 19 February 2011] [18:11:00] &lt;Steve-o&gt;      just have the recent fixes from sustrik for C++ and should be good to release soon
| [Saturday 19 February 2011] [18:11:18] &lt;Steve-o&gt;      detecting HT is easy with CPUID, counting the physical cores is a bit difficult
| [Saturday 19 February 2011] [18:11:35] &lt;Steve-o&gt;      or rather the number of logical processors CPUID returns no longer appears valid
| [Saturday 19 February 2011] [18:12:35] &lt;Steve-o&gt;      there&#8217;s a question on stackoverflow with i7 cores
| [Saturday 19 February 2011] [18:12:46] &lt;Steve-o&gt;      anyway, must dash, ciao
| [Saturday 19 February 2011] [18:13:10] &lt;mikko&gt;        see you
| [Saturday 19 February 2011] [21:16:16] &lt;<a href="#id2655"><span class="problematic" id="id2656">Jay7_</span></a>&gt;        Hey I&#8217;m new to ZMQ and tried installing in on a Mac OSX 10.6.3; but it appears &#8211;with-pgm is not supported currently on darwin.  Is this expected in the near future by chance?
| [Saturday 19 February 2011] [21:28:57] &lt;cremes&gt;       <a href="#id2657"><span class="problematic" id="id2658">Jay7_</span></a>: i&#8217;m not a pgm expert, but apparently the openpgm package (a separate project from 0mq) doesn&#8217;t have good/any osx support
| [Saturday 19 February 2011] [21:29:09] &lt;cremes&gt;       <a href="#id2659"><span class="problematic" id="id2660">Jay7_</span></a>: check the mailing list archives for more discussion on this
| [Saturday 19 February 2011] [21:29:52] &lt;<a href="#id2661"><span class="problematic" id="id2662">Jay7_</span></a>&gt;        &#64;cremes_: ah, okay. Thank you. I&#8217;ll look through those.
| [Sunday 20 February 2011] [02:51:40] &lt;<a href="#id2663"><span class="problematic" id="id2664">pieterh_</span></a>&gt;       sustrik: hi
| [Sunday 20 February 2011] [02:53:15] &lt;rem7&gt;   Hi, I was going over the zmq guide, I noticed the examples use strings as messages. If I want to send something like floats is it ok to just memcpy the float, or should I use something like protobuffers?
| [Sunday 20 February 2011] [02:53:59] &lt;<a href="#id2665"><span class="problematic" id="id2666">pieterh_</span></a>&gt;       rem7, depends on your needs
| [Sunday 20 February 2011] [02:54:40] &lt;<a href="#id2667"><span class="problematic" id="id2668">pieterh_</span></a>&gt;       sending data as-such is easy and cheap but doesn&#8217;t give you any kind of leverage
| [Sunday 20 February 2011] [02:54:43] &lt;rem7&gt;   I just need to pass float arrays... using a PUSH/PULL system.
| [Sunday 20 February 2011] [02:55:01] &lt;<a href="#id2669"><span class="problematic" id="id2670">pieterh_</span></a>&gt;       if it&#8217;s a throw-away app, go for it
| [Sunday 20 February 2011] [02:55:16] &lt;<a href="#id2671"><span class="problematic" id="id2672">pieterh_</span></a>&gt;       if it&#8217;s something you are more serious about, make formal &#8216;contracts&#8217;
| [Sunday 20 February 2011] [02:55:28] &lt;<a href="#id2673"><span class="problematic" id="id2674">pieterh_</span></a>&gt;       i.e. serialize your data properly (portably), document the message formats, etc.
| [Sunday 20 February 2011] [02:55:46] &lt;<a href="#id2675"><span class="problematic" id="id2676">pieterh_</span></a>&gt;       it&#8217;s a lot more work up front but lets you work more cheaply long term
| [Sunday 20 February 2011] [02:56:07] &lt;<a href="#id2677"><span class="problematic" id="id2678">pieterh_</span></a>&gt;       e.g. plug in a worker in a different language
| [Sunday 20 February 2011] [02:56:43] &lt;rem7&gt;   would using google proto buffers take care of that?
| [Sunday 20 February 2011] [02:57:00] &lt;rem7&gt;   I don&#8217;t have much experience with this kinda of stuff...
| [Sunday 20 February 2011] [03:15:21] &lt;<a href="#id2679"><span class="problematic" id="id2680">pieterh_</span></a>&gt;       rem7, yes, it would
| [Sunday 20 February 2011] [03:18:17] &lt;rem7&gt;   <a href="#id2681"><span class="problematic" id="id2682">pieterh_</span></a>:  I guess I&#8217;ll start looking into that. Thanks.
| [Sunday 20 February 2011] [03:18:27] &lt;<a href="#id2683"><span class="problematic" id="id2684">pieterh_</span></a>&gt;       let us know how it goes
| [Sunday 20 February 2011] [03:20:15] &lt;guido_g&gt;        smaller alternative might be <a class="reference external" href="http://msgpack.org/">http://msgpack.org/</a>
| [Sunday 20 February 2011] [03:22:23] &lt;rem7&gt;   guido_g: thanks, I&#8217;ll look into it
| [Sunday 20 February 2011] [03:42:39] &lt;sustrik&gt;        <a href="#id2685"><span class="problematic" id="id2686">pieterh_</span></a>: morning
| [Sunday 20 February 2011] [03:56:53] &lt;<a href="#id2687"><span class="problematic" id="id2688">pieterh_</span></a>&gt;       sustrik, hi
| [Sunday 20 February 2011] [03:58:31] &lt;<a href="#id2689"><span class="problematic" id="id2690">pieterh_</span></a>&gt;       do you think the red theme is readable enough for the man pages?
| [Sunday 20 February 2011] [05:28:25] &lt;pieter_hintjens&gt;        anyone looked at distributed hash tables on top of 0MQ, e.g. Chord?
| [Sunday 20 February 2011] [05:52:46] &lt;travlr&gt; hi all. i&#8217;ve got a question about interfacing zmq in Qt having read up a lot on what&#8217;s going on I&#8217;m still a little confused about zmq&#8217;s edge-trigger....
| [Sunday 20 February 2011] [05:53:21] &lt;travlr&gt; Qt has a QSocketNotifier class that provides a signal when there is activity on a profided FD
| [Sunday 20 February 2011] [05:53:47] &lt;travlr&gt; like from zmq_getsockopt(... ZMQ_FD...)
| [Sunday 20 February 2011] [05:54:15] &lt;travlr&gt; I&#8217;m assuming that the Qt sig is level triggered.
| [Sunday 20 February 2011] [05:56:19] &lt;travlr&gt; so when I get a signal from QSocketNotifier, I check the ZMQ_EVENTS for ZMQ_POLLIN (in this case) and ....
| [Sunday 20 February 2011] [05:56:33] &lt;travlr&gt; what do I do exactly when I get EAGAIN?
| [Sunday 20 February 2011] [06:02:30] &lt;travlr&gt; I&#8217;m guessing that I need to keep calling zmq_recv() until I do get the EAGAIN condition.
| [Sunday 20 February 2011] [06:06:37] &lt;pieter_hintjens&gt;        travlr: sorry, can&#8217;t really help, not sure what the edge trigger vs. level trigger is about
| [Sunday 20 February 2011] [06:06:45] &lt;pieter_hintjens&gt;        try invoking sustrik... :-)
| [Sunday 20 February 2011] [06:07:00] &lt;travlr&gt; hi pieter.. ok, thanks just the same
| [Sunday 20 February 2011] [06:42:05] &lt;private_meta&gt;   Is it possible to download a certain language bound example-set (or all of them if necessary) without having to install the entire git suite?
| [Sunday 20 February 2011] [06:42:58] &lt;travlr&gt; private_meta: each binding has its own git repo.. i think
| [Sunday 20 February 2011] [06:43:20] &lt;private_meta&gt;   I meant that one <a class="reference external" href="https://github.com/imatix/zguide/tree/master/examples">https://github.com/imatix/zguide/tree/master/examples</a>
| [Sunday 20 February 2011] [06:43:30] &lt;private_meta&gt;   and/or the dedicated subdirectories/trees
| [Sunday 20 February 2011] [06:43:43] &lt;private_meta&gt;   brb
| [Sunday 20 February 2011] [06:44:42] &lt;travlr&gt; no. but the that download isn&#8217;t that big anyway
| [Sunday 20 February 2011] [07:05:42] &lt;sustrik&gt;        travlr: yes
| [Sunday 20 February 2011] [07:05:57] &lt;sustrik&gt;        you have to call recv() till you get EAGAIN
| [Sunday 20 February 2011] [07:06:17] &lt;private_meta&gt;   travlr: I don&#8217;t want to download 40 files per language, it&#8217;s a hassle
| [Sunday 20 February 2011] [07:15:26] &lt;mikko&gt;  good morning all
| [Sunday 20 February 2011] [07:16:52] &lt;sustrik&gt;        morning
| [Sunday 20 February 2011] [07:24:11] &lt;mikko&gt;  build failure on s390x
| [Sunday 20 February 2011] [07:24:18] &lt;mikko&gt;  but that is due to shutdown_stress
| [Sunday 20 February 2011] [07:35:53] &lt;pieter_hintjens&gt;        mikko: quick question
| [Sunday 20 February 2011] [07:39:47] &lt;pieter_hintjens&gt;        private_meta: it takes about 30 seconds to clone the git
| [Sunday 20 February 2011] [07:40:47] &lt;pieter_hintjens&gt;        and it&#8217;s nice that people get the git because they can then translate the examples into other languages
| [Sunday 20 February 2011] [07:42:36] &lt;pieter_hintjens&gt;        private_meta: ah, you can click on &#8216;Downloads&#8217; on the github page and get a .zip or .tar.gz. file
| [Sunday 20 February 2011] [07:45:04] &lt;mikko&gt;  pieter_hintjens: sure
| [Sunday 20 February 2011] [07:45:12] &lt;mikko&gt;  what is the question?
| [Sunday 20 February 2011] [07:45:56] &lt;pieter_hintjens&gt;        mikko: I have scripts that will rebuild api.zero.mq from the git repo
| [Sunday 20 February 2011] [07:46:04] &lt;pieter_hintjens&gt;        bash/perl/python
| [Sunday 20 February 2011] [07:46:22] &lt;mikko&gt;  do you want to run it automatically on daily builds?
| [Sunday 20 February 2011] [07:46:30] &lt;pieter_hintjens&gt;        at least for master, I think, yes
| [Sunday 20 February 2011] [07:46:46] &lt;mikko&gt;  of course
| [Sunday 20 February 2011] [07:46:49] &lt;pieter_hintjens&gt;        also for any branch that is being maintained...
| [Sunday 20 February 2011] [07:46:51] &lt;mikko&gt;  is the script available somewhere?
| [Sunday 20 February 2011] [07:47:16] &lt;mikko&gt;  thats perfectly fine, the box is idle apart from the 5am/pm builds
| [Sunday 20 February 2011] [07:47:21] &lt;pieter_hintjens&gt;        I guess the question is whether the scripts should be in their own git, the zeromq2 git, or just floating around somewhere
| [Sunday 20 February 2011] [07:47:43] &lt;pieter_hintjens&gt;        eventually we could do the same for the zfl man pages
| [Sunday 20 February 2011] [07:47:45] &lt;mikko&gt;  well, i think we could have git for random infra stuff
| [Sunday 20 February 2011] [07:47:55] &lt;pieter_hintjens&gt;        ztools?
| [Sunday 20 February 2011] [07:47:55] &lt;mikko&gt;  i got some scripts on the build server that could be there as well
| [Sunday 20 February 2011] [07:48:07] &lt;mikko&gt;  which are not available anywhere now etc
| [Sunday 20 February 2011] [07:48:10] &lt;pieter_hintjens&gt;        indeed
| [Sunday 20 February 2011] [07:49:06] &lt;pieter_hintjens&gt;        so a new git that collects all the random tools we make?
| [Sunday 20 February 2011] [07:49:23] &lt;mikko&gt;  it wouldn&#8217;t probably something usable for people out of the box
| [Sunday 20 February 2011] [07:49:31] &lt;mikko&gt;  but just to make sure that everything is available
| [Sunday 20 February 2011] [07:49:48] &lt;pieter_hintjens&gt;        right
| [Sunday 20 February 2011] [07:49:58] &lt;pieter_hintjens&gt;        in the zeromq organization would be best
| [Sunday 20 February 2011] [07:50:05] &lt;mikko&gt;  yeah, probably
| [Sunday 20 February 2011] [07:50:54] &lt;pieter_hintjens&gt;        <a class="reference external" href="mailto:git&#37;&#52;&#48;github&#46;com">git<span>&#64;</span>github<span>&#46;</span>com</a>:zeromq/ztools.git
| [Sunday 20 February 2011] [07:51:21] &lt;mikko&gt;  cool, i&#8217;ll add things there later
| [Sunday 20 February 2011] [07:51:26] &lt;pieter_hintjens&gt;        I&#8217;ll whip up a README, I suggest one directory per tool
| [Sunday 20 February 2011] [07:51:40] &lt;mikko&gt;  yeah
| [Sunday 20 February 2011] [07:51:43] &lt;mikko&gt;  makes sense
| [Sunday 20 February 2011] [07:51:57] &lt;mikko&gt;  lunch, brb
| [Sunday 20 February 2011] [07:53:20] &lt;pieter_hintjens&gt;        ok, you should have rw access
| [Sunday 20 February 2011] [07:53:22] &lt;pieter_hintjens&gt;        cyl
| [Sunday 20 February 2011] [07:53:47] &lt;private_meta&gt;   pieter_hintjens: the download page was empty for me
| [Sunday 20 February 2011] [07:54:10] &lt;pieter_hintjens&gt;        private_meta: ? it should pop up a window asking if you want a .zip or .tar.gz...
| [Sunday 20 February 2011] [07:54:28] &lt;pieter_hintjens&gt;        what URL did you get?
| [Sunday 20 February 2011] [07:54:42] &lt;pieter_hintjens&gt;        You want to be here: <a class="reference external" href="https://github.com/zeromq/zfl">https://github.com/zeromq/zfl</a>
| [Sunday 20 February 2011] [07:54:51] &lt;pieter_hintjens&gt;        then click on Downloads
| [Sunday 20 February 2011] [07:55:17] &lt;pieter_hintjens&gt;        sorry!
| [Sunday 20 February 2011] [07:55:23] &lt;pieter_hintjens&gt;        <a class="reference external" href="https://github.com/imatix/zguide">https://github.com/imatix/zguide</a>
| [Sunday 20 February 2011] [07:56:23] &lt;private_meta&gt;   pieter_hintjens: &#8220;should&#8221; is such a nice word, covers all kinds of possibilities, mostly the &#8220;not&#8221; possibility for me
| [Sunday 20 February 2011] [07:56:43] &lt;Guthur&gt; it works fine here
| [Sunday 20 February 2011] [07:57:03] &lt;pieter_hintjens&gt;        private_meta: please explain in more detail what you do, and what happens
| [Sunday 20 February 2011] [07:57:19] &lt;pieter_hintjens&gt;        &#8220;it doesn&#8217;t work&#8221; is not useful...
| [Sunday 20 February 2011] [08:01:34] &lt;pieter_hintjens&gt;        ok, lunch, bbl
| [Sunday 20 February 2011] [08:04:57] &lt;private_meta&gt;   yay... demonstrative effect... had &#8220;no downloads&#8221; or something like that for half a week, now I ASK about it nd it shows downloads
| [Sunday 20 February 2011] [08:05:07] &lt;private_meta&gt;   I hate that
| [Sunday 20 February 2011] [08:07:16] &lt;Guthur&gt; well, at least it&#8217;s working, hehe
| [Sunday 20 February 2011] [08:13:05] &lt;private_meta&gt;   I&#8217;m not sure anymore, someone might have told me already, but where in the guide can I find some info about how to implement heartbeating. according to the guide it has to do something with zmq_poll, but I don&#8217;t find anything helpful on zmq_poll. I want to do something like heartbeat pings, but I&#8217;m not sure how to do it exactly
| [Sunday 20 February 2011] [08:19:46] &lt;mikko&gt;  pieter_hintjens: <a class="reference external" href="http://snapshot.zero.mq/zfl/">http://snapshot.zero.mq/zfl/</a>
| [Sunday 20 February 2011] [08:23:45] &lt;mikko&gt;  private_meta: normally you would send a heartbeat request to client
| [Sunday 20 February 2011] [08:23:52] &lt;mikko&gt;  zmq_poll for incoming messages
| [Sunday 20 February 2011] [08:24:02] &lt;mikko&gt;  no message in given timeout -&gt; consider dead
| [Sunday 20 February 2011] [08:25:48] &lt;private_meta&gt;   I don&#8217;t quite understand zmq_poll and how to use it yet. I&#8217;m reading the man page, but i need to see how to be able to use the zmq_poll system.
| [Sunday 20 February 2011] [08:26:24] &lt;private_meta&gt;   So the heartbeat request would be a normal message that&#8217;s recognizable as a heartbeat for the other side I assume?
| [Sunday 20 February 2011] [08:26:43] &lt;mikko&gt;  see &#8220;Handling Multiple Sockets
| [Sunday 20 February 2011] [08:26:47] &lt;mikko&gt;  in the zguide
| [Sunday 20 February 2011] [08:27:03] &lt;mikko&gt;  yes, or even a separate heartbeat socket
| [Sunday 20 February 2011] [08:27:10] &lt;mikko&gt;  depends on the application
| [Sunday 20 February 2011] [08:28:53] &lt;private_meta&gt;   A separate socket might be an interesting idea, thanks. I&#8217;ll read up the multiple sockets first
| [Sunday 20 February 2011] [08:29:56] &lt;mikko&gt;  for example if you got PUSH/PULL as main socket you can&#8217;t really heartbeat over it
| [Sunday 20 February 2011] [08:31:23] &lt;private_meta&gt;   So do push/pull stand for dedicated one-way-communication endpoints?
| [Sunday 20 February 2011] [08:32:15] &lt;mikko&gt;  <a class="reference external" href="http://api.zero.mq/2-1-0:zmq-socket">http://api.zero.mq/2-1-0:zmq-socket</a>
| [Sunday 20 February 2011] [08:32:26] &lt;mikko&gt;  you can see the characteristics of each socket type from here
| [Sunday 20 February 2011] [08:32:40] &lt;private_meta&gt;   i hate surfing on gprs
| [Sunday 20 February 2011] [08:32:48] &lt;private_meta&gt;   thanks
| [Sunday 20 February 2011] [08:32:48] &lt;mikko&gt;  whether they force a pattern, uni-directional/bi-directional
| [Sunday 20 February 2011] [08:32:58] &lt;mikko&gt;  if you got zeromq installed the man pages should work as well
| [Sunday 20 February 2011] [08:33:13] &lt;private_meta&gt;   thought as much
| [Sunday 20 February 2011] [08:35:57] &lt;mikko&gt;  XREP/XREQ is probably the most suitable socket for heartbeating
| [Sunday 20 February 2011] [08:37:31] &lt;private_meta&gt;   Well, I have 1 server, multiple clients, and I need to address these clients separately and each of these clients need to check heartbeats, or at least know if a connection terminates
| [Sunday 20 February 2011] [08:37:47] &lt;private_meta&gt;   while these connections are bidirectional
| [Sunday 20 February 2011] [08:39:08] &lt;mikko&gt;  yep, definitely XREQ/XREP
| [Sunday 20 February 2011] [08:39:16] &lt;mikko&gt;  i think zguide has an example of custom routing
| [Sunday 20 February 2011] [08:39:20] &lt;mikko&gt;  which is needed here
| [Sunday 20 February 2011] [08:39:41] &lt;private_meta&gt;   so the normal req/rep is balanced automatically all the time?
| [Sunday 20 February 2011] [08:40:06] &lt;private_meta&gt;   or is xreq and xrep as well, normally?
| [Sunday 20 February 2011] [08:41:23] &lt;private_meta&gt;   I have a slight difficulty understanding the terminology for the custom routing I find in the guide. dealer, mama, papa, router. Assuming I need one of those, I don&#8217;t know what these terms actually mean
| [Sunday 20 February 2011] [08:42:48] &lt;private_meta&gt;   ah...think i found the explanation
| [Sunday 20 February 2011] [08:44:17] &lt;private_meta&gt;   so i&#8217;d need router-to-router,
| [Sunday 20 February 2011] [08:45:04] &lt;mikko&gt;  private_meta: xrep/xrep doesnt force request-reply pattern as strictly as req/rep
| [Sunday 20 February 2011] [08:45:26] &lt;mikko&gt;  in your case you might want &#8220;req client 1, req client 2, req client 3&#8221;, &#8220;wait responses from all&#8221;
| [Sunday 20 February 2011] [08:45:29] &lt;mikko&gt;  i guess
| [Sunday 20 February 2011] [08:45:46] &lt;private_meta&gt;   uhm... train station coming up, brb
| [Sunday 20 February 2011] [08:45:48] &lt;mikko&gt;  not necessarily req client 1, wait for rep client 1, req client 2
| [Sunday 20 February 2011] [08:45:49] &lt;mikko&gt;  etc
| [Sunday 20 February 2011] [08:46:39] &lt;mikko&gt;  <a href="#id2691"><span class="problematic" id="id2692">pieterh_</span></a>: snapshots for zfl are now generated during builds
| [Sunday 20 February 2011] [08:57:09] &lt;private_meta&gt;   mikko: According to some of the terminology: Server-to-N-Clients connection, no forced request-to-reply pattern and standard-async-but-sync-by-choice (by higher level wrapper)
| [Sunday 20 February 2011] [08:57:17] &lt;private_meta&gt;   Is what I need
| [Sunday 20 February 2011] [08:58:31] &lt;private_meta&gt;   and non-balanced directly addressed messaging
| [Sunday 20 February 2011] [09:04:04] &lt;private_meta&gt;   mikko: concerning multiple sockets, Actually I want the connections incoming at the SAME socket, like all connection incoming at tcp port (e.g.) 5555. Still I want to address all connected clients separately
| [Sunday 20 February 2011] [09:10:22] &lt;<a href="#id2693"><span class="problematic" id="id2694">pieterh_</span></a>&gt;       private_meta, see LRU routing in Ch3 of the Guide
| [Sunday 20 February 2011] [09:10:54] &lt;<a href="#id2695"><span class="problematic" id="id2696">pieterh_</span></a>&gt;       mikko: nice, snapshots
| [Sunday 20 February 2011] [09:12:09] &lt;private_meta&gt;   <a href="#id2697"><span class="problematic" id="id2698">pieterh_</span></a>: you mean as in &#8220;lru uses several clients/workers connecting to the same socket&#8221;?
| [Sunday 20 February 2011] [09:12:22] &lt;<a href="#id2699"><span class="problematic" id="id2700">pieterh_</span></a>&gt;       private_meta, yes, it gives you the basic framework
| [Sunday 20 February 2011] [09:12:41] &lt;<a href="#id2701"><span class="problematic" id="id2702">pieterh_</span></a>&gt;       you will want to do your own routing, not LRU
| [Sunday 20 February 2011] [09:13:01] &lt;private_meta&gt;   Yes
| [Sunday 20 February 2011] [09:13:58] &lt;private_meta&gt;   <a href="#id2703"><span class="problematic" id="id2704">pieterh_</span></a>: do you know why the c++ version uses void* instead of char* for messages??
| [Sunday 20 February 2011] [09:14:18] &lt;<a href="#id2705"><span class="problematic" id="id2706">pieterh_</span></a>&gt;       private_meta, no idea...
| [Sunday 20 February 2011] [09:14:27] &lt;private_meta&gt;   kk
| [Sunday 20 February 2011] [09:18:08] &lt;private_meta&gt;   hmm... 3g networks are way too spotty here outside of towns... it&#8217;s a hassle working in trains :/
| [Sunday 20 February 2011] [09:21:43] &lt;private_meta&gt;   <a href="#id2707"><span class="problematic" id="id2708">pieterh_</span></a>: not quite sure I understand correctly, for demonstrative purposes, in the lru example the client and server code is in one file and only executed in threads so you don&#8217;t have separate server/client files?
| [Sunday 20 February 2011] [09:22:00] &lt;<a href="#id2709"><span class="problematic" id="id2710">pieterh_</span></a>&gt;       private_meta, yes, it&#8217;s just to simplify the exercise
| [Sunday 20 February 2011] [09:22:08] &lt;private_meta&gt;   ok
| [Sunday 20 February 2011] [09:22:13] &lt;<a href="#id2711"><span class="problematic" id="id2712">pieterh_</span></a>&gt;       the code in each thread is the same as it would be in a separate process
| [Sunday 20 February 2011] [09:22:19] &lt;<a href="#id2713"><span class="problematic" id="id2714">pieterh_</span></a>&gt;       with a little less wrapping
| [Sunday 20 February 2011] [09:22:27] &lt;private_meta&gt;   Thanks!
| [Sunday 20 February 2011] [09:30:31] &lt;private_meta&gt;   hmm... the lru example on git seems pretty different from the guide example
| [Sunday 20 February 2011] [09:32:39] &lt;<a href="#id2715"><span class="problematic" id="id2716">pieterh_</span></a>&gt;       private_meta,  what URL?
| [Sunday 20 February 2011] [09:32:59] &lt;<a href="#id2717"><span class="problematic" id="id2718">pieterh_</span></a>&gt;       are you looking at the same two languages?
| [Sunday 20 February 2011] [09:33:24] &lt;private_meta&gt;   Ah, let me look a second
| [Sunday 20 February 2011] [09:34:02] &lt;private_meta&gt;   Ah, i thought i was looking at the lruqueue example in the guide, it was rtmama
| [Sunday 20 February 2011] [09:34:27] &lt;private_meta&gt;   Sorry
| [Sunday 20 February 2011] [09:35:48] &lt;private_meta&gt;   mama is not ideal for me i guess, everyone should be able to initiate a message
| [Sunday 20 February 2011] [11:12:32] &lt;mikko&gt;  private_meta: it&#8217;s void* because it&#8217;s not really an array of characters
| [Sunday 20 February 2011] [11:12:40] &lt;mikko&gt;  rather a blob of data of size X
| [Sunday 20 February 2011] [11:42:32] &lt;private_meta&gt;   mikko: &#8220;just because you are sending strings over a line most of the time doesn&#8217;t mean everyone does&#8221;
| [Sunday 20 February 2011] [11:42:37] &lt;private_meta&gt;   mikko: something like that?
| [Sunday 20 February 2011] [11:43:30] &lt;private_meta&gt;   I guess representing something other than a string AS a string might be a severe waste of space...
| [Sunday 20 February 2011] [11:48:03] &lt;mikko&gt;  private_meta: it&#8217;s also conceptual thing
| [Sunday 20 February 2011] [11:48:15] &lt;mikko&gt;  private_meta: using the inproc transport you might send a pointer to a struct
| [Sunday 20 February 2011] [11:48:21] &lt;mikko&gt;  or just about anything
| [Sunday 20 February 2011] [11:48:25] &lt;mikko&gt;  rather than char*
| [Sunday 20 February 2011] [11:50:36] &lt;mikko&gt;  private_meta: but yes, you are right
| [Sunday 20 February 2011] [11:51:21] &lt;private_meta&gt;   I didn&#8217;t think of using a message queue from an external library for in-process messaging
| [Sunday 20 February 2011] [11:51:37] &lt;private_meta&gt;   ah, between threads it might be handy i guess
| [Sunday 20 February 2011] [11:53:23] &lt;mikko&gt;  private_meta: <a class="reference external" href="http://www.zeromq.org/blog:multithreading-magic">http://www.zeromq.org/blog:multithreading-magic</a>
| [Sunday 20 February 2011] [11:53:29] &lt;mikko&gt;  related post
| [Sunday 20 February 2011] [12:24:10] &lt;Guthur&gt; imho inproc messaging is a big win
| [Sunday 20 February 2011] [12:24:43] &lt;Guthur&gt; the multithreading magic article explains it best though
| [Sunday 20 February 2011] [12:47:41] &lt;andrewvc&gt;       anyone know if zmq_queue supports xreq/xrep or just rep/req
| [Sunday 20 February 2011] [12:56:33] &lt;sustrik&gt;        andrewvc: just xreq/xrep :)
| [Sunday 20 February 2011] [12:56:45] &lt;andrewvc&gt;       oh, awesome :)
| [Sunday 20 February 2011] [13:00:52] &lt;travlr&gt; sustrik: thanks for the help earlier
| [Sunday 20 February 2011] [13:02:10] &lt;sustrik&gt;        you are welcome
| [Sunday 20 February 2011] [13:02:44] &lt;sustrik&gt;        travlr: if you feel the reference is unclear, feel free to suggest a patch
| [Sunday 20 February 2011] [13:05:23] &lt;travlr&gt; i will. i&#8217;m just coming back to my work with zmq after having to totally focus on other stuff for a while.
| [Sunday 20 February 2011] [13:05:37] &lt;travlr&gt;  I also have to get the internal api bot working again at <a class="reference external" href="http://travlr.github.com/zeromq2">http://travlr.github.com/zeromq2</a>
| [Sunday 20 February 2011] [13:06:14] &lt;travlr&gt; as its broken atm
| [Sunday 20 February 2011] [13:07:20] &lt;Guthur&gt; is the new API doc only beta at the moment
| [Sunday 20 February 2011] [13:07:36] &lt;Guthur&gt; I&#8217;m just wondering why it&#8217;s not linked from the main site
| [Sunday 20 February 2011] [13:08:03] &lt;sustrik&gt;        well, pieter have written the generator yesterday
| [Sunday 20 February 2011] [13:08:05] &lt;sustrik&gt;        that&#8217;s why
| [Sunday 20 February 2011] [13:08:43] &lt;Guthur&gt; ah, ok
| [Sunday 20 February 2011] [13:09:12] &lt;Guthur&gt; it does seem very good though
| [Sunday 20 February 2011] [13:10:26] &lt;travlr&gt; nice! l like the the new reference links from a simple index.
| [Sunday 20 February 2011] [13:10:41] &lt;sustrik&gt;        what&#8217;s particularly nice is that all the released versions are covered
| [Sunday 20 February 2011] [13:10:47] &lt;travlr&gt; yup
| [Sunday 20 February 2011] [13:20:55] &lt;andrewvc&gt;       Are there any examples of the XML for zmq_queue?
| [Sunday 20 February 2011] [13:21:10] &lt;andrewvc&gt;       the manpage is empty of course, and my google-fu is failing me
| [Sunday 20 February 2011] [13:26:20] &lt;andrewvc&gt;       nm, figured it out
| [Sunday 20 February 2011] [13:53:40] &lt;<a href="#id2719"><span class="problematic" id="id2720">pieterh_</span></a>&gt;       sustrik, mikko and I will arrange to rebuild the docs once a day or so
| [Sunday 20 February 2011] [13:55:50] &lt;sustrik&gt;        <a href="#id2721"><span class="problematic" id="id2722">pieterh_</span></a>: great
| [Sunday 20 February 2011] [13:56:10] &lt;sustrik&gt;        if you do it twice a day, the docs will be in sync with latest snapshots
| [Sunday 20 February 2011] [13:56:13] &lt;<a href="#id2723"><span class="problematic" id="id2724">pieterh_</span></a>&gt;       we&#8217;ve made a ztools git for random tools, incl the rebuild shells scripts
| [Sunday 20 February 2011] [13:56:31] &lt;sustrik&gt;        ack
| [Sunday 20 February 2011] [13:56:50] &lt;<a href="#id2725"><span class="problematic" id="id2726">pieterh_</span></a>&gt;       let&#8217;s see if people have more comments on the look &amp; feel
| [Sunday 20 February 2011] [13:57:01] &lt;<a href="#id2727"><span class="problematic" id="id2728">pieterh_</span></a>&gt;       i already toned it down, darker red, no logo on man pages, etc.
| [Sunday 20 February 2011] [13:57:17] &lt;sustrik&gt;        let me see
| [Sunday 20 February 2011] [13:57:47] &lt;sustrik&gt;        nice
| [Sunday 20 February 2011] [13:57:54] &lt;sustrik&gt;        btw, what about the stable branch, do you have any schedule for doing the fork?
| [Sunday 20 February 2011] [13:58:29] &lt;<a href="#id2729"><span class="problematic" id="id2730">pieterh_</span></a>&gt;       next week sometime, I was thinking
| [Sunday 20 February 2011] [13:58:33] &lt;sustrik&gt;        great
| [Sunday 20 February 2011] [13:59:00] &lt;<a href="#id2731"><span class="problematic" id="id2732">pieterh_</span></a>&gt;       ok, good!
| [Sunday 20 February 2011] [13:59:12] &lt;<a href="#id2733"><span class="problematic" id="id2734">pieterh_</span></a>&gt;       people will be happy to see a new stable 2.1.x version
| [Sunday 20 February 2011] [13:59:26] &lt;<a href="#id2735"><span class="problematic" id="id2736">pieterh_</span></a>&gt;       so many new goodies :-)
| [Sunday 20 February 2011] [13:59:26] &lt;sustrik&gt;        i think so
| [Sunday 20 February 2011] [13:59:34] &lt;sustrik&gt;        so will I
| [Sunday 20 February 2011] [13:59:49] &lt;<a href="#id2737"><span class="problematic" id="id2738">pieterh_</span></a>&gt;       I&#8217;ll keep the 2.0.x version of the Guide online as well
| [Sunday 20 February 2011] [14:00:07] &lt;sustrik&gt;        i like that all the versions are available
| [Sunday 20 February 2011] [14:00:20] &lt;sustrik&gt;        ah, the guide
| [Sunday 20 February 2011] [14:00:21] &lt;<a href="#id2739"><span class="problematic" id="id2740">pieterh_</span></a>&gt;       yes, people have asked for that...
| [Sunday 20 February 2011] [14:00:39] &lt;<a href="#id2741"><span class="problematic" id="id2742">pieterh_</span></a>&gt;       so I will update that for 2.1, and keep the 2.0 version for reference
| [Sunday 20 February 2011] [14:00:43] &lt;sustrik&gt;        i&#8217;ve checked it lately and it seemed to cover both 2.0 and 2.1
| [Sunday 20 February 2011] [14:01:17] &lt;<a href="#id2743"><span class="problematic" id="id2744">pieterh_</span></a>&gt;       in several places it covers things that were changed
| [Sunday 20 February 2011] [14:01:24] &lt;<a href="#id2745"><span class="problematic" id="id2746">pieterh_</span></a>&gt;       e.g. socket migration, socket shutdown
| [Sunday 20 February 2011] [14:01:30] &lt;<a href="#id2747"><span class="problematic" id="id2748">pieterh_</span></a>&gt;       needs fixing for 2.1
| [Sunday 20 February 2011] [14:01:35] &lt;sustrik&gt;        right
| [Sunday 20 February 2011] [14:01:45] &lt;<a href="#id2749"><span class="problematic" id="id2750">pieterh_</span></a>&gt;       hmm, perhaps better is a section with explicit differences
| [Sunday 20 February 2011] [14:01:57] &lt;sustrik&gt;        it&#8217;s up to you
| [Sunday 20 February 2011] [14:02:19] &lt;<a href="#id2751"><span class="problematic" id="id2752">pieterh_</span></a>&gt;       i think as a programmer, what I want is &#8220;what changed in 2.1 and what does this mean for my code?&#8221;
| [Sunday 20 February 2011] [14:02:28] &lt;<a href="#id2753"><span class="problematic" id="id2754">pieterh_</span></a>&gt;       expanded release notes with some jokes
| [Sunday 20 February 2011] [14:02:37] &lt;sustrik&gt;        sounds good
| [Sunday 20 February 2011] [14:02:42] &lt;<a href="#id2755"><span class="problematic" id="id2756">pieterh_</span></a>&gt;       ok!
| [Sunday 20 February 2011] [14:03:27] &lt;mikko&gt;  good stuff
| [Sunday 20 February 2011] [14:03:40] &lt;mikko&gt;  do you have the build script online already?
| [Sunday 20 February 2011] [14:03:43] &lt;mikko&gt;  the documentation one
| [Sunday 20 February 2011] [14:04:32] &lt;mikko&gt;  my todo-list is almost empty now
| [Sunday 20 February 2011] [14:04:39] &lt;mikko&gt;  apart from testing openpgm on solaris
| [Sunday 20 February 2011] [14:06:14] &lt;<a href="#id2757"><span class="problematic" id="id2758">pieterh_</span></a>&gt;       mikko: I&#8217;m documenting / cleaning it up, will publish it asap
| [Sunday 20 February 2011] [14:07:20] &lt;mikko&gt;  <a href="#id2759"><span class="problematic" id="id2760">pieterh_</span></a>: cool
| [Sunday 20 February 2011] [14:07:30] &lt;mikko&gt;  any other periodic things that should be automated?
| [Sunday 20 February 2011] [14:08:18] &lt;<a href="#id2761"><span class="problematic" id="id2762">pieterh_</span></a>&gt;       mikko the machine
| [Sunday 20 February 2011] [14:08:26] &lt;<a href="#id2763"><span class="problematic" id="id2764">pieterh_</span></a>&gt;       no todo list can survive
| [Sunday 20 February 2011] [14:08:28] &lt;Guthur&gt; <a href="#id2765"><span class="problematic" id="id2766">pieterh_</span></a>, my first impression of the new api doc is that it is very good
| [Sunday 20 February 2011] [14:08:33] &lt;Guthur&gt; well done
| [Sunday 20 February 2011] [14:08:51] &lt;<a href="#id2767"><span class="problematic" id="id2768">pieterh_</span></a>&gt;       Guthur, I&#8217;m glad you like it...
| [Sunday 20 February 2011] [14:09:16] &lt;Guthur&gt; I&#8217;d imagine most will have similar impressions
| [Sunday 20 February 2011] [14:09:21] &lt;<a href="#id2769"><span class="problematic" id="id2770">pieterh_</span></a>&gt;       not too painful to read? it&#8217;s the usual cortex red scheme but toned down a little
| [Sunday 20 February 2011] [14:09:48] &lt;Guthur&gt; nope the styling is very good, for my tastes
| [Sunday 20 February 2011] [14:10:12] &lt;mikko&gt;  lestrrat: are you there?
| [Sunday 20 February 2011] [14:10:15] &lt;Guthur&gt; must dash though
| [Sunday 20 February 2011] [14:13:11] &lt;<a href="#id2771"><span class="problematic" id="id2772">pieterh_</span></a>&gt;       mikko: you&#8217;ll need to get an API key from Wikidot
| [Sunday 20 February 2011] [14:13:27] &lt;<a href="#id2773"><span class="problematic" id="id2774">pieterh_</span></a>&gt;       it&#8217;s tied to your account
| [Sunday 20 February 2011] [14:13:51] &lt;<a href="#id2775"><span class="problematic" id="id2776">pieterh_</span></a>&gt;       if you don&#8217;t already have a Wikidot.com account, register and tell me your account name
| [Sunday 20 February 2011] [14:14:00] &lt;<a href="#id2777"><span class="problematic" id="id2778">pieterh_</span></a>&gt;       then I&#8217;ll get them to give you API access and a key
| [Sunday 20 February 2011] [14:14:15] &lt;mikko&gt;  mkoppanen
| [Sunday 20 February 2011] [14:17:50] &lt;<a href="#id2779"><span class="problematic" id="id2780">pieterh_</span></a>&gt;       ok
| [Sunday 20 February 2011] [14:49:38] &lt;<a href="#id2781"><span class="problematic" id="id2782">pieterh_</span></a>&gt;       mikko: ok, the tool is documented and packaged for reuse
| [Sunday 20 February 2011] [15:42:20] &lt;jobytaffey&gt;     Hi, I was wondering if anyone can help out. I&#8217;m new to 0MQ. I&#8217;m trying to write a TCP server which accepts many incoming connections, reads fixed sized packets from TCP and generates 0MQ messages for handling somewhere else. I&#8217;m using libev and the receive side seems fine. But, for sending (receive 0MQ message then put it onto a TCP socket), it looks like I need to zmq_poll() when libev gives me EV_WRITE, is there a better way of doing this? A zmq ca
| [Sunday 20 February 2011] [15:43:31] &lt;mikko&gt;  jobytaffey: yes
| [Sunday 20 February 2011] [15:43:47] &lt;mikko&gt;  jobytaffey: you should schedule libev EV_WRITE only if you got message coming from zeromq
| [Sunday 20 February 2011] [15:44:00] &lt;mikko&gt;  so roughly the following (assuming zeromq 2.1.x)
| [Sunday 20 February 2011] [15:44:24] &lt;mikko&gt;  you schedule constant read event for incoming tcp messages and incoming zeromq messages
| [Sunday 20 February 2011] [15:44:48] &lt;mikko&gt;  if you get tcp message in you schedule a EV_WRITE for zeromq out socket
| [Sunday 20 February 2011] [15:45:01] &lt;mikko&gt;  and if you get zeromq message in you schedule EV_WRITE for tcp socket
| [Sunday 20 February 2011] [15:45:57] &lt;jobytaffey&gt;     Ok, that makes sense. I didn&#8217;t see anything in the API for getting at zeromq&#8217;s underlying sockets though?
| [Sunday 20 February 2011] [15:46:07] &lt;mikko&gt;  jobytaffey: it&#8217;s a feature in 2.1.x
| [Sunday 20 February 2011] [15:46:10] &lt;mikko&gt;  give me a sec
| [Sunday 20 February 2011] [15:46:38] &lt;mikko&gt;  jobytaffey: <a class="reference external" href="http://api.zero.mq/master:zmq-getsockopt">http://api.zero.mq/master:zmq-getsockopt</a> see ZMQ_FD and ZMQ_EVENTS there
| [Sunday 20 February 2011] [15:48:50] &lt;jobytaffey&gt;     That looks like what I need. Thanks.
| [Sunday 20 February 2011] [15:49:12] &lt;mikko&gt;  it doesn&#8217;t make sense to schedule EV_WRITE event unless you know that you have something to write
| [Sunday 20 February 2011] [17:52:41] &lt;lestrrat&gt;       wassup?
| [Sunday 20 February 2011] [17:54:03] &lt;sam`&gt;   not much
| [Sunday 20 February 2011] [18:05:24] &lt;lestrrat&gt;       oh I get it, there&#8217;s a build failure. <a class="reference external" href="http://build.zero.mq/job/ZeroMQPerl-master_ZeroMQ2-master_GCC/313/">http://build.zero.mq/job/ZeroMQPerl-master_ZeroMQ2-master_GCC/313/</a>
| [Sunday 20 February 2011] [18:05:39] &lt;lestrrat&gt;       mikko: I didn&#8217;t change anything in the last few days
| [Sunday 20 February 2011] [18:48:31] &lt;mikko&gt;  lestrrat: ok, will rerun to see
| [Sunday 20 February 2011] [18:49:18] &lt;mikko&gt;  succeeds
| [Sunday 20 February 2011] [18:49:27] &lt;mikko&gt;  probably an intermittent failure
| [Sunday 20 February 2011] [21:54:48] &lt;JStoker&gt;        Hi. Is there any debian packages for zeromq? :)
| [Sunday 20 February 2011] [21:55:04] &lt;sam`&gt;   JStoker: yes, i think there&#8217;s a 2.0.10 package
| [Sunday 20 February 2011] [21:55:07] &lt;sam`&gt;   (at least in sid)
| [Sunday 20 February 2011] [21:56:03] &lt;JStoker&gt;        Aah. Thanks, I&#8217;ll try to work out a way of coaxing that into my squeeze install. :)
| [Sunday 20 February 2011] [21:56:31] &lt;sam`&gt;   JStoker: <a class="reference external" href="http://packages.debian.org/libzmq">http://packages.debian.org/libzmq</a>
| [Sunday 20 February 2011] [21:56:57] &lt;sam`&gt;   keep in mind though that 2.1.x is probably a better choice, it fixes a lot of things
| [Sunday 20 February 2011] [21:57:51] &lt;JStoker&gt;        Ah. Hm.
| [Sunday 20 February 2011] [21:58:39] &lt;JStoker&gt;        The debian machine works fine with compiling, I guess. The ubuntu one on the other hand seems to have a bit of a dependency failure, so isn&#8217;t able to actually compile it itself.
| [Sunday 20 February 2011] [21:58:48] &lt;sam`&gt;   ah?
| [Sunday 20 February 2011] [21:59:11] &lt;sam`&gt;   libzmq is rather easy on the dependencies AFAIR
| [Sunday 20 February 2011] [21:59:17] &lt;sam`&gt;   what problem are you facing?
| [Sunday 20 February 2011] [21:59:20] &lt;JStoker&gt;        Requires uuid-dev, but &#8220;libuuid1 (= 2.17.2-0ubuntu1) but 2.17.2-0ubuntu1.10.04.2 is to be installed&#8221;
| [Sunday 20 February 2011] [21:59:53] &lt;sam`&gt;   install the uuid-dev version you can, and build zeromq yourself
| [Sunday 20 February 2011] [21:59:58] &lt;sam`&gt;   you should be fine
| [Sunday 20 February 2011] [22:00:15] &lt;JStoker&gt;        I just tried <cite>apt-get install uuid-dev</cite>, didn&#8217;t specify a version :/
| [Sunday 20 February 2011] [22:01:44] &lt;sam`&gt;   try with aptitude
| [Sunday 20 February 2011] [22:01:53] &lt;sam`&gt;   it&#8217;s usually smarter when resolving dependencies
| [Sunday 20 February 2011] [22:02:15] &lt;JStoker&gt;        I&#8217;ve just forced it to a different version, which has seemed to help... (it&#8217;s installing, at least)
| [Sunday 20 February 2011] [22:13:29] &lt;seb`&gt;   JStoker: it should be fine
| [Sunday 20 February 2011] [22:14:58] &lt;seb`&gt;   JStoker: for ubuntu you should use this ppa: <a class="reference external" href="https://launchpad.net/~chris-lea/+archive/zeromq">https://launchpad.net/~chris-lea/+archive/zeromq</a>
| [Sunday 20 February 2011] [22:15:08] &lt;seb`&gt;   but it&#8217;s only 2.0.10:-(
| [Sunday 20 February 2011] [22:17:14] &lt;JStoker&gt;        That&#8217;s the ub... oh. I just went and built my own package out of git://github.com/zeromq/zeromq2.git. Whoops.
| [Sunday 20 February 2011] [22:17:40] &lt;JStoker&gt;        seb`, Question. Are 2.0.10 and 2.1.x compatable?
| [Sunday 20 February 2011] [22:18:37] &lt;JStoker&gt;        That does report itself as 2.1.1 though, so no issues. :)
| [Sunday 20 February 2011] [22:19:34] &lt;seb`&gt;   JStoker: It&#8217;s compatible yes
| [Sunday 20 February 2011] [22:19:42] &lt;seb`&gt;   at least my code works on both
| [Sunday 20 February 2011] [22:20:03] &lt;seb`&gt;   but 2.1 is the way to go IMHO
| [Sunday 20 February 2011] [22:20:20] &lt;seb`&gt;   I&#8217;m still using 2.0.10 in production right now
| [Sunday 20 February 2011] [22:20:30] &lt;JStoker&gt;        oh well. Got the difficult system running with 2.1 anyway, so might as well continue with it on the debian one.
| [Monday 21 February 2011] [05:23:28] &lt;CIA-21&gt; zeromq2: 03Martin Sustrik 07master * r5c09311 10/ (src/pgm_socket.cpp src/pgm_socket.hpp):
| [Monday 21 February 2011] [05:23:28] &lt;CIA-21&gt; zeromq2: Computation of buffer size for PGM fixed.
| [Monday 21 February 2011] [05:23:28] &lt;CIA-21&gt; zeromq2: Signed-off-by: Martin Sustrik &lt;sustrik&#64;250bpm.com&gt; - http://bit.ly/i9Ptxs
| [Monday 21 February 2011] [05:23:54] &lt;pieter_hintjens&gt;        sustrik, I&#8217;m seeing zmq_term just exit the process
| [Monday 21 February 2011] [05:24:00] &lt;pieter_hintjens&gt;        does that sound normal?
| [Monday 21 February 2011] [05:24:21] &lt;sustrik&gt;        no
| [Monday 21 February 2011] [05:24:35] &lt;sustrik&gt;        do you have a test case
| [Monday 21 February 2011] [05:24:36] &lt;sustrik&gt;        ?
| [Monday 21 February 2011] [05:24:38] &lt;pieter_hintjens&gt;        trying to make some of the Guide examples work with 2.1...
| [Monday 21 February 2011] [05:24:46] &lt;pieter_hintjens&gt;        yes, I have a test case... I&#8217;ll email it to you
| [Monday 21 February 2011] [05:24:49] &lt;sustrik&gt;        thanks
| [Monday 21 February 2011] [05:25:55] &lt;pieter_hintjens&gt;        https://gist.github.com/836902
| [Monday 21 February 2011] [05:26:10] &lt;pieter_hintjens&gt;        also some problems transferring messages but I&#8217;ll break that down
| [Monday 21 February 2011] [05:27:28] &lt;sustrik&gt;        ok
| [Monday 21 February 2011] [05:28:13] &lt;mikko&gt;  good morning
| [Monday 21 February 2011] [05:28:30] &lt;sustrik&gt;        morning
| [Monday 21 February 2011] [05:29:33] &lt;pieter_hintjens&gt;        hi mikko :-)
| [Monday 21 February 2011] [05:34:58] &lt;pieter_hintjens&gt;        sustrik: you didn&#8217;t add my log on unroutable messages...
| [Monday 21 February 2011] [05:35:10] &lt;sustrik&gt;        nope
| [Monday 21 February 2011] [05:35:23] &lt;pieter_hintjens&gt;        any particular reason?
| [Monday 21 February 2011] [05:35:31] &lt;sustrik&gt;        it&#8217;s a standard behaviour
| [Monday 21 February 2011] [05:35:38] &lt;sustrik&gt;        nothing special to log
| [Monday 21 February 2011] [05:35:47] &lt;sustrik&gt;        it&#8217;s like dropping an IP packet
| [Monday 21 February 2011] [05:35:58] &lt;pieter_hintjens&gt;        i violently disagree
| [Monday 21 February 2011] [05:36:09] &lt;pieter_hintjens&gt;        debugging dropped messages is one of the major pains
| [Monday 21 February 2011] [05:36:54] &lt;pieter_hintjens&gt;        xrep dropping a malformed envelope is not like dropping an IP packet
| [Monday 21 February 2011] [05:37:14] &lt;pieter_hintjens&gt;        it&#8217;s a sign of application error, and that information is particularly valuable to the developer
| [Monday 21 February 2011] [05:37:15] &lt;sustrik&gt;        yes, we should log malformed envelope
| [Monday 21 February 2011] [05:37:25] &lt;pieter_hintjens&gt;        that is what I had done...
| [Monday 21 February 2011] [05:37:35] &lt;sustrik&gt;        not dropping a well-formed envelope though
| [Monday 21 February 2011] [05:37:43] &lt;pieter_hintjens&gt;        malformed = no such address, sorry
| [Monday 21 February 2011] [05:37:44] &lt;sustrik&gt;        well-formed message i mean
| [Monday 21 February 2011] [05:37:52] &lt;sustrik&gt;        it&#8217;s on critical path
| [Monday 21 February 2011] [05:38:03] &lt;pieter_hintjens&gt;        errors are exceptional;
| [Monday 21 February 2011] [05:38:04] &lt;sustrik&gt;        if you need it for debugging
| [Monday 21 February 2011] [05:38:17] &lt;sustrik&gt;        we can add some special debug functionality
| [Monday 21 February 2011] [05:38:17] &lt;pieter_hintjens&gt;        when you start to use xrep this is a major pain
| [Monday 21 February 2011] [05:38:29] &lt;pieter_hintjens&gt;        errors -&gt; silence
| [Monday 21 February 2011] [05:38:38] &lt;sustrik&gt;        yes
| [Monday 21 February 2011] [05:38:40] &lt;pieter_hintjens&gt;        the only way I know to debug is to hack 0MQ to print something
| [Monday 21 February 2011] [05:38:46] &lt;pieter_hintjens&gt;        it&#8217;s a <em>major</em> annoyance
| [Monday 21 February 2011] [05:38:49] &lt;sustrik&gt;        it means that the original requester is no longer available
| [Monday 21 February 2011] [05:38:52] &lt;pieter_hintjens&gt;        no
| [Monday 21 February 2011] [05:38:53] &lt;sustrik&gt;        so the reply is dropped
| [Monday 21 February 2011] [05:38:57] &lt;pieter_hintjens&gt;        it means there&#8217;s a bug in my app code
| [Monday 21 February 2011] [05:39:01] &lt;sustrik&gt;        ?
| [Monday 21 February 2011] [05:39:11] &lt;pieter_hintjens&gt;        i assume you&#8217;ve never written code that uses xrep then
| [Monday 21 February 2011] [05:39:26] &lt;sustrik&gt;        i did
| [Monday 21 February 2011] [05:39:29] &lt;sustrik&gt;        queue device :)
| [Monday 21 February 2011] [05:39:40] &lt;pieter_hintjens&gt;        well, I&#8217;ve done a lot of work using xrep
| [Monday 21 February 2011] [05:39:43] &lt;pieter_hintjens&gt;        and it&#8217;s tricky
| [Monday 21 February 2011] [05:40:01] &lt;pieter_hintjens&gt;        and the classic 80% error is a bad envelope (valid for 0MQ but where the routing information is wrongly placed)
| [Monday 21 February 2011] [05:40:10] &lt;pieter_hintjens&gt;        0MQ absolutely must report this
| [Monday 21 February 2011] [05:40:15] &lt;pieter_hintjens&gt;        ask on the list if you&#8217;re not sure
| [Monday 21 February 2011] [05:40:25] &lt;pieter_hintjens&gt;        it&#8217;s not a critical path
| [Monday 21 February 2011] [05:40:33] &lt;pieter_hintjens&gt;        there are not millions of malformed addresses per second
| [Monday 21 February 2011] [05:40:36] &lt;pieter_hintjens&gt;        no way
| [Monday 21 February 2011] [05:40:44] &lt;sustrik&gt;        how would you distinguish it from simply dropping the packet because the destination is simply dead atm
| [Monday 21 February 2011] [05:40:47] &lt;mikko&gt;  pieter_hintjens: this is pretty classic as well <a class="reference external" href="http://bit.ly/g6RXaS?r=td">http://bit.ly/g6RXaS?r=td</a>
| [Monday 21 February 2011] [05:40:51] &lt;pieter_hintjens&gt;        same thing, sustrik
| [Monday 21 February 2011] [05:40:52] &lt;mikko&gt;  might want to feature in the guide
| [Monday 21 February 2011] [05:40:57] &lt;pieter_hintjens&gt;        not critical path, that&#8217;s the first thing
| [Monday 21 February 2011] [05:41:06] &lt;pieter_hintjens&gt;        this is an exception and can be logged
| [Monday 21 February 2011] [05:41:28] &lt;pieter_hintjens&gt;        mikko: yes, ipc has some gotchas
| [Monday 21 February 2011] [05:41:41] &lt;pieter_hintjens&gt;        i&#8217;m trying to debug a case now and the &#8216;silence when dropping messages&#8217; just cost me an hour
| [Monday 21 February 2011] [05:41:45] &lt;pieter_hintjens&gt;        bleh
| [Monday 21 February 2011] [05:42:08] &lt;sustrik&gt;        let&#8217;s add some debugging code then
| [Monday 21 February 2011] [05:42:16] &lt;pieter_hintjens&gt;        sustrik: why? you have a mechanism that&#8217;s ideal
| [Monday 21 February 2011] [05:42:29] &lt;pieter_hintjens&gt;        as a user I&#8217;m asking formally that syslog be used to report bad addresses
| [Monday 21 February 2011] [05:42:37] &lt;sustrik&gt;        the problem is that a node being offline is a pretty common occurence
| [Monday 21 February 2011] [05:42:40] &lt;pieter_hintjens&gt;        it will also help debug topology errors
| [Monday 21 February 2011] [05:42:42] &lt;sustrik&gt;        at least on wan
| [Monday 21 February 2011] [05:42:48] &lt;pieter_hintjens&gt;        &#8216;pretty common&#8217; is not a critical path
| [Monday 21 February 2011] [05:42:53] &lt;pieter_hintjens&gt;        wan is not our environment today
| [Monday 21 February 2011] [05:43:00] &lt;pieter_hintjens&gt;        these are bogus arguments afaics, sorry
| [Monday 21 February 2011] [05:43:03] &lt;sustrik&gt;        i&#8217;m planning for the future
| [Monday 21 February 2011] [05:43:15] &lt;pieter_hintjens&gt;        you&#8217;re making it unnecessarily difficult for the present
| [Monday 21 February 2011] [05:43:30] &lt;pieter_hintjens&gt;        at which point the future becomes less certain at all
| [Monday 21 February 2011] [05:43:46] &lt;pieter_hintjens&gt;        if people cannot easily debug routing issues and topology issues they will lose confidence in 0MQ
| [Monday 21 February 2011] [05:44:11] &lt;pieter_hintjens&gt;        if you actually hit this <em>theoretical</em> issue of millions of WAN disconnections
| [Monday 21 February 2011] [05:44:22] &lt;pieter_hintjens&gt;        <em>then</em> you can solve that problem in the correct fashion
| [Monday 21 February 2011] [05:44:36] &lt;pieter_hintjens&gt;        refusing to log this information today is not a solution
| [Monday 21 February 2011] [05:44:48] &lt;pieter_hintjens&gt;        you would probably want to reduce the logging level on specific sockets
| [Monday 21 February 2011] [05:44:55] &lt;pieter_hintjens&gt;        in 3 years&#8217; time
| [Monday 21 February 2011] [05:44:56] &lt;sustrik&gt;        ok, the real problem is that once i add that kind of thing, people start using it to drive their business logic
| [Monday 21 February 2011] [05:45:02] &lt;pieter_hintjens&gt;        it&#8217;s syslog
| [Monday 21 February 2011] [05:45:11] &lt;pieter_hintjens&gt;        syslog cannot be used for presence
| [Monday 21 February 2011] [05:45:16] &lt;pieter_hintjens&gt;        we know this, it&#8217;s not a risk
| [Monday 21 February 2011] [05:45:22] &lt;sustrik&gt;        which means the applications would become not scalable outside of a lan
| [Monday 21 February 2011] [05:45:30] &lt;pieter_hintjens&gt;        ?
| [Monday 21 February 2011] [05:45:39] &lt;pieter_hintjens&gt;        sorry, let&#8217;s kill inproc then
| [Monday 21 February 2011] [05:45:44] &lt;pieter_hintjens&gt;        and multicast
| [Monday 21 February 2011] [05:45:44] &lt;sustrik&gt;        ?
| [Monday 21 February 2011] [05:45:50] &lt;pieter_hintjens&gt;        cause people might depend on that
| [Monday 21 February 2011] [05:45:57] &lt;pieter_hintjens&gt;        and not be scalable outside the lan
| [Monday 21 February 2011] [05:46:00] &lt;pieter_hintjens&gt;        seriously?
| [Monday 21 February 2011] [05:46:08] &lt;sustrik&gt;        nope, you can scale inproc and multicast by replacing them with tcp
| [Monday 21 February 2011] [05:46:16] &lt;pieter_hintjens&gt;        sigh
| [Monday 21 February 2011] [05:46:26] &lt;sustrik&gt;        when you start using logs in your business logic
| [Monday 21 February 2011] [05:46:29] &lt;pieter_hintjens&gt;        how?
| [Monday 21 February 2011] [05:46:30] &lt;sustrik&gt;        you are screwed
| [Monday 21 February 2011] [05:46:38] &lt;pieter_hintjens&gt;        how do you use logs in your business logic?
| [Monday 21 February 2011] [05:46:38] &lt;sustrik&gt;        as the logs are local
| [Monday 21 February 2011] [05:46:57] &lt;pieter_hintjens&gt;        syslog is async
| [Monday 21 February 2011] [05:46:58] &lt;sustrik&gt;        1. send x to y
| [Monday 21 February 2011] [05:47:08] &lt;pieter_hintjens&gt;        you cannot rely on it for business logic
| [Monday 21 February 2011] [05:47:14] &lt;pieter_hintjens&gt;        we already discussed this on the list
| [Monday 21 February 2011] [05:47:16] &lt;sustrik&gt;        2. if i get &#8220;non routable&#8221; error
| [Monday 21 February 2011] [05:47:23] &lt;sustrik&gt;        3. send it somewhere else
| [Monday 21 February 2011] [05:47:35] &lt;sustrik&gt;        yes, i&#8217;ve discussed it many times
| [Monday 21 February 2011] [05:47:38] &lt;pieter_hintjens&gt;        so people can abuse a tool
| [Monday 21 February 2011] [05:47:45] &lt;pieter_hintjens&gt;        that does not mean you throw away the tool
| [Monday 21 February 2011] [05:47:47] &lt;sustrik&gt;        and each time people asked for this kind of thing
| [Monday 21 February 2011] [05:47:49] &lt;pieter_hintjens&gt;        you educate them
| [Monday 21 February 2011] [05:47:57] &lt;sustrik&gt;        i discussed it with them
| [Monday 21 February 2011] [05:48:13] &lt;pieter_hintjens&gt;        education, not censorship martin
| [Monday 21 February 2011] [05:48:17] &lt;sustrik&gt;        and after some conversation it become obvious thay want to drive their business logic
| [Monday 21 February 2011] [05:48:21] &lt;pieter_hintjens&gt;        you do not actually know what people need
| [Monday 21 February 2011] [05:48:26] &lt;sustrik&gt;        none a single person wanting just logging
| [Monday 21 February 2011] [05:48:31] &lt;pieter_hintjens&gt;        i want just logging
| [Monday 21 February 2011] [05:48:38] &lt;sustrik&gt;        it&#8217;s 100% misuse rate
| [Monday 21 February 2011] [05:48:44] &lt;sustrik&gt;        99% then
| [Monday 21 February 2011] [05:49:24] &lt;sustrik&gt;        ok, an idea
| [Monday 21 February 2011] [05:49:47] &lt;sustrik&gt;        what about having a &#8220;debug&#8221; build which would log this kind of errors
| [Monday 21 February 2011] [05:49:51] &lt;pieter_hintjens&gt;        and if people want to use routing failures in their app, why not?
| [Monday 21 February 2011] [05:49:54] &lt;sustrik&gt;        and release build that won&#8217;t
| [Monday 21 February 2011] [05:49:55] &lt;sustrik&gt;        ?
| [Monday 21 February 2011] [05:49:57] &lt;pieter_hintjens&gt;        hang on
| [Monday 21 February 2011] [05:50:03] &lt;sustrik&gt;        it doesn&#8217;t scale
| [Monday 21 February 2011] [05:50:07] &lt;pieter_hintjens&gt;        I&#8217;m challenging your assertion that using this information won&#8217;t scale
| [Monday 21 February 2011] [05:50:19] &lt;pieter_hintjens&gt;        if I make a broker that uses this
| [Monday 21 February 2011] [05:50:22] &lt;pieter_hintjens&gt;        the broker will scale fine
| [Monday 21 February 2011] [05:50:58] &lt;pieter_hintjens&gt;        it&#8217;s like getting disconnection alerts
| [Monday 21 February 2011] [05:51:04] &lt;sustrik&gt;        wait a sec
| [Monday 21 February 2011] [05:51:08] &lt;sustrik&gt;        let me explain
| [Monday 21 February 2011] [05:51:22] &lt;sustrik&gt;        say you have a server (XREP)
| [Monday 21 February 2011] [05:51:27] &lt;sustrik&gt;        and clients (XREQ)
| [Monday 21 February 2011] [05:52:07] &lt;sustrik&gt;        the server uses sys://log to find out whether clients are disconnected
| [Monday 21 February 2011] [05:52:20] &lt;pieter_hintjens&gt;        yes?
| [Monday 21 February 2011] [05:52:37] &lt;sustrik&gt;        when it finds out, it will do something relevant, like allert the operator or somesuch
| [Monday 21 February 2011] [05:52:51] &lt;pieter_hintjens&gt;        you mean ... log a message somewhere else?
| [Monday 21 February 2011] [05:53:05] &lt;pieter_hintjens&gt;        on the operator console, for example...
| [Monday 21 February 2011] [05:53:07] &lt;sustrik&gt;        i mean, initiate some other business process
| [Monday 21 February 2011] [05:53:12] &lt;sustrik&gt;        like sending the message by DHL
| [Monday 21 February 2011] [05:53:23] &lt;pieter_hintjens&gt;        ? this is your example?
| [Monday 21 February 2011] [05:53:38] &lt;pieter_hintjens&gt;        business logic would be
| [Monday 21 February 2011] [05:53:43] &lt;sustrik&gt;        or placing a message on dlq
| [Monday 21 February 2011] [05:53:47] &lt;pieter_hintjens&gt;        - discover principal connection is dead
| [Monday 21 February 2011] [05:53:52] &lt;pieter_hintjens&gt;        - switch over to backup connection
| [Monday 21 February 2011] [05:53:53] &lt;sustrik&gt;        or running a special repair script
| [Monday 21 February 2011] [05:54:12] &lt;sustrik&gt;        any business logic will do
| [Monday 21 February 2011] [05:54:12] &lt;sustrik&gt;        now
| [Monday 21 February 2011] [05:54:20] &lt;sustrik&gt;        the company grows
| [Monday 21 February 2011] [05:54:29] &lt;sustrik&gt;        and have several offices all over the world
| [Monday 21 February 2011] [05:54:36] &lt;sustrik&gt;        it wants to federate
| [Monday 21 February 2011] [05:54:46] &lt;sustrik&gt;        so they place a queue device at each location
| [Monday 21 February 2011] [05:55:06] &lt;pieter_hintjens&gt;        sustrik, you have device obsession
| [Monday 21 February 2011] [05:55:12] &lt;sustrik&gt;        now imagine an client at point A invoking a service at point B
| [Monday 21 February 2011] [05:55:27] &lt;pieter_hintjens&gt;        people do not, ime, use the standard devices except as a stepping stone while they&#8217;re learning 0MQ
| [Monday 21 February 2011] [05:55:36] &lt;sustrik&gt;        the connection to A may be perfectly ok, but the client may be dead
| [Monday 21 February 2011] [05:55:36] &lt;pieter_hintjens&gt;        they build their own devices, = brokers
| [Monday 21 February 2011] [05:55:47] &lt;sustrik&gt;        the same thing
| [Monday 21 February 2011] [05:56:10] &lt;sustrik&gt;        the problem is that the &#8220;cannot route&#8221; error works in hop-by-hop fashion
| [Monday 21 February 2011] [05:56:13] &lt;pieter_hintjens&gt;        i really can&#8217;t swallow your chain of logic
| [Monday 21 February 2011] [05:56:28] &lt;pieter_hintjens&gt;        it is based on the assumption that all 0MQ applications today will one day scale to the WAN
| [Monday 21 February 2011] [05:56:34] &lt;sustrik&gt;        so the error you get is &#8216;cannot route to next hop&#8217;
| [Monday 21 February 2011] [05:56:40] &lt;sustrik&gt;        instead of &#8216;message is unroutable&#8217;
| [Monday 21 February 2011] [05:56:42] &lt;pieter_hintjens&gt;        which is true for about 0.001% of cases, maybe
| [Monday 21 February 2011] [05:57:04] &lt;pieter_hintjens&gt;        99.999% of today&#8217;s apps (and those written for the next two years) will do what they do, and basta
| [Monday 21 February 2011] [05:57:10] &lt;pieter_hintjens&gt;        that is our constituency
| [Monday 21 February 2011] [05:57:32] &lt;sustrik&gt;        if IP folks would think that way Internet would interconnect the original 3 machines still :)
| [Monday 21 February 2011] [05:57:36] &lt;pieter_hintjens&gt;        trying to stop people writing those apps any way they can is counter-productive
| [Monday 21 February 2011] [05:57:43] &lt;pieter_hintjens&gt;        i&#8217;m not a luddite, please
| [Monday 21 February 2011] [05:58:01] &lt;pieter_hintjens&gt;        and you are NOT reinventing the Internet, don&#8217;t imagine that
| [Monday 21 February 2011] [05:58:18] &lt;pieter_hintjens&gt;        I&#8217;m asking for basic tools to make today&#8217;s problem slightly easier to solve
| [Monday 21 February 2011] [05:58:21] &lt;sustrik&gt;        nope, i&#8217;m building a new layer for it
| [Monday 21 February 2011] [05:58:29] &lt;sustrik&gt;        ack
| [Monday 21 February 2011] [05:58:35] &lt;pieter_hintjens&gt;        you ignore the requests of your users at your direct peril
| [Monday 21 February 2011] [05:58:54] &lt;sustrik&gt;        i know
| [Monday 21 February 2011] [05:58:56] &lt;pieter_hintjens&gt;        people will not give much patience to a nerd who tells them &#8220;I know your problems better than you do&#8221;
| [Monday 21 February 2011] [05:59:04] &lt;sustrik&gt;        there are several options how to solve the problem
| [Monday 21 February 2011] [05:59:10] &lt;pieter_hintjens&gt;        you need people to bring their problems and expertise
| [Monday 21 February 2011] [05:59:16] &lt;pieter_hintjens&gt;        to experiment, even if it means blowing things up
| [Monday 21 February 2011] [05:59:28] &lt;pieter_hintjens&gt;        without that, what you make will be dead and unused
| [Monday 21 February 2011] [05:59:38] &lt;pieter_hintjens&gt;        just a collection of weird names and bizarre theories
| [Monday 21 February 2011] [05:59:48] &lt;pieter_hintjens&gt;        that&#8217;s 90% of the software universe
| [Monday 21 February 2011] [05:59:59] &lt;sustrik&gt;        i would suggest you fork the stable
| [Monday 21 February 2011] [06:00:02] &lt;pieter_hintjens&gt;        not yet
| [Monday 21 February 2011] [06:00:06] &lt;sustrik&gt;        and apply the patch there
| [Monday 21 February 2011] [06:00:08] &lt;pieter_hintjens&gt;        i cannot run my basic examples on 2.1
| [Monday 21 February 2011] [06:00:17] &lt;pieter_hintjens&gt;        and I&#8217;m not going to fork 0MQ... nope
| [Monday 21 February 2011] [06:00:22] &lt;sustrik&gt;        a regrestion?
| [Monday 21 February 2011] [06:00:27] &lt;sustrik&gt;        what happened?
| [Monday 21 February 2011] [06:00:35] &lt;pieter_hintjens&gt;        stabilization = current version + patches from you
| [Monday 21 February 2011] [06:00:37] &lt;pieter_hintjens&gt;        no more or less
| [Monday 21 February 2011] [06:01:24] &lt;pieter_hintjens&gt;        I&#8217;d like to request some debugging framework (syslog is frankly quite heavy) that tells me when I make the stupid and repeated error of misconstructing a routing envelope
| [Monday 21 February 2011] [06:01:25] &lt;sustrik&gt;        well, the problem is we have different goals
| [Monday 21 February 2011] [06:01:40] &lt;pieter_hintjens&gt;        we have different timeframes, is all
| [Monday 21 February 2011] [06:01:51] &lt;pieter_hintjens&gt;        i&#8217;m actually using 0MQ and finding difficulties with it
| [Monday 21 February 2011] [06:01:53] &lt;sustrik&gt;        how can we possibly synchronise?
| [Monday 21 February 2011] [06:02:09] &lt;pieter_hintjens&gt;        accept the problems your users present you as real
| [Monday 21 February 2011] [06:02:19] &lt;sustrik&gt;        sure they are
| [Monday 21 February 2011] [06:02:24] &lt;pieter_hintjens&gt;        if they take the effort to express them, that means there is real pain involved
| [Monday 21 February 2011] [06:02:30] &lt;sustrik&gt;        i proposed a solution: let&#8217;s make a debug version of 0mq
| [Monday 21 February 2011] [06:02:37] &lt;pieter_hintjens&gt;        yes, that might work but
| [Monday 21 February 2011] [06:02:44] &lt;pieter_hintjens&gt;        we know why it won&#8217;t, in practice
| [Monday 21 February 2011] [06:02:46] &lt;sustrik&gt;        #ifdef ZMQ_DEBUG
| [Monday 21 February 2011] [06:02:50] &lt;sustrik&gt;           log (...)&#8217;
| [Monday 21 February 2011] [06:02:51] &lt;sustrik&gt;        #endif
| [Monday 21 February 2011] [06:02:53] &lt;sustrik&gt;        easy
| [Monday 21 February 2011] [06:03:13] &lt;pieter_hintjens&gt;        Except that many people provide 0MQ to their own customers
| [Monday 21 February 2011] [06:03:32] &lt;pieter_hintjens&gt;        Now they face the lovely choice of (a) debug version or (b) silent on failure version
| [Monday 21 February 2011] [06:03:41]   * pieter_hintjens needs coffee
| [Monday 21 February 2011] [06:05:30] &lt;pieter_hintjens&gt;        ok, I have a proposal
| [Monday 21 February 2011] [06:05:59] &lt;pieter_hintjens&gt;        i don&#8217;t actually like the syslog solution at all, for developers
| [Monday 21 February 2011] [06:06:14] &lt;pieter_hintjens&gt;        it&#8217;s a pain to use and all it really does is collect output you can print to a log file
| [Monday 21 February 2011] [06:06:36] &lt;pieter_hintjens&gt;        if you try to <em>use</em> that information in any way you hit Sustrik&#8217;s Barrier of &#8220;it will not scale to the WAN&#8221;
| [Monday 21 February 2011] [06:06:38] &lt;pieter_hintjens&gt;        ack?
| [Monday 21 February 2011] [06:07:07] &lt;pieter_hintjens&gt;        it can work internally as a log collector
| [Monday 21 February 2011] [06:07:43] &lt;pieter_hintjens&gt;        so leave it undocumented, and add a method zmq_verbose() that enables printing of syslog messages
| [Monday 21 February 2011] [06:07:56] &lt;pieter_hintjens&gt;        or zmq_debug() or whatever
| [Monday 21 February 2011] [06:08:08] &lt;sustrik&gt;        not bad
| [Monday 21 February 2011] [06:08:24] &lt;sustrik&gt;        same as ZMQ_DEBUG but configurable at runtime
| [Monday 21 February 2011] [06:08:26] &lt;pieter_hintjens&gt;        then when things go weird we can tell users, &#8220;run again with the &#8211;verbose switch and send me the screen dump&#8221;
| [Monday 21 February 2011] [06:08:33] &lt;pieter_hintjens&gt;        yes, has to be runtime configurable
| [Monday 21 February 2011] [06:08:34] &lt;sustrik&gt;        ack
| [Monday 21 February 2011] [06:08:42] &lt;sustrik&gt;        that&#8217;s a good solution
| [Monday 21 February 2011] [06:08:44] &lt;pieter_hintjens&gt;        IMO there is no performance hit in doing this for all exceptional conditions
| [Monday 21 February 2011] [06:08:54] &lt;pieter_hintjens&gt;        if we do see such a performance issue, we can solve it
| [Monday 21 February 2011] [06:09:33] &lt;pieter_hintjens&gt;        if the syslog collector is embedded in zmq, it can&#8217;t be abused and it requires no extra work except that one call
| [Monday 21 February 2011] [06:14:06] &lt;Guthur&gt; is there an optimum zmq_size size?
| [Monday 21 February 2011] [06:14:42] &lt;pieter_hintjens&gt;        Guthur: to achieve what?
| [Monday 21 February 2011] [06:14:55] &lt;pieter_hintjens&gt;        high throughput or low latency?
| [Monday 21 February 2011] [06:15:18] &lt;Guthur&gt; I was thinking of adding a stream interface to clrzmq2
| [Monday 21 February 2011] [06:15:37] &lt;pieter_hintjens&gt;        what is a stream interface?
| [Monday 21 February 2011] [06:15:37] &lt;Guthur&gt; and so i was think it would send that as a series of msgs
| [Monday 21 February 2011] [06:16:03] &lt;Guthur&gt; just passing in a stream to send
| [Monday 21 February 2011] [06:16:07] &lt;pieter_hintjens&gt;        no frames?
| [Monday 21 February 2011] [06:16:09] &lt;Guthur&gt; and then it would split it up into chunks and send
| [Monday 21 February 2011] [06:16:51] &lt;pieter_hintjens&gt;        if it was video, for example
| [Monday 21 February 2011] [06:17:12] &lt;pieter_hintjens&gt;        you&#8217;d want to send one frame per message to get best latency
| [Monday 21 February 2011] [06:17:12] &lt;Guthur&gt; I haven&#8217;t thoroughly thought it through it yet, do you recommend framing
| [Monday 21 February 2011] [06:17:40] &lt;pieter_hintjens&gt;        if it was file transfer, for example, you&#8217;d use large messages to maximize throughput
| [Monday 21 February 2011] [06:17:42] &lt;Guthur&gt; early idea genesis stage at the moment, hehe
| [Monday 21 February 2011] [06:18:02] &lt;pieter_hintjens&gt;        then just choose a random value and optimize later when you actually know what the target is :-)
| [Monday 21 February 2011] [06:18:22] &lt;pieter_hintjens&gt;        4096 bytes per message, there, I&#8217;ve decided for you
| [Monday 21 February 2011] [06:18:25] &lt;Guthur&gt; oh, ok
| [Monday 21 February 2011] [06:18:42] &lt;Guthur&gt; hehe, thanks
| [Monday 21 February 2011] [06:19:28] &lt;mikko&gt;  Guthur: do you have tests you want to have run at some point?
| [Monday 21 February 2011] [06:19:46] &lt;Guthur&gt; mikko: not yet, I hope to sometime
| [Monday 21 February 2011] [06:19:54] &lt;Guthur&gt; a lot on my plate at the moment
| [Monday 21 February 2011] [06:20:08] &lt;Guthur&gt; really behind on my MSc thesis, unfortunately
| [Monday 21 February 2011] [06:20:18] &lt;pieter_hintjens&gt;        &#8220;life is a buffet of interesting problems&#8221;
| [Monday 21 February 2011] [06:24:12] &lt;mikko&gt;  &#8220;nothing is more expensive than hiring an amateur&#8221;
| [Monday 21 February 2011] [06:24:23] &lt;mikko&gt;  saw that on twitter today
| [Monday 21 February 2011] [06:24:46] &lt;pieter_hintjens&gt;        &#8220;If you think a professional is expensive, wait till you see the cost of hiring an amateur&#8221; was the version I saw
| [Monday 21 February 2011] [06:24:52] &lt;pieter_hintjens&gt;        I think this would make a good motto for iMatix
| [Monday 21 February 2011] [06:25:08] &lt;pieter_hintjens&gt;        I prefer your short version...
| [Monday 21 February 2011] [06:26:19] &lt;mikko&gt;  <a class="reference external" href="http://twitter.com/cgbystrom/statuses/39607943171284992">http://twitter.com/cgbystrom/statuses/39607943171284992</a>
| [Monday 21 February 2011] [06:26:24] &lt;mikko&gt;  there it is
| [Monday 21 February 2011] [06:26:59] &lt;pieter_hintjens&gt;        I need a Latin version
| [Monday 21 February 2011] [06:27:57] &lt;Guthur&gt; &#8216;If you think training a Graduate is expensive, try an Old Dog&#8217;
| [Monday 21 February 2011] [06:28:02] &lt;Guthur&gt; there&#8217;s mine, hehe
| [Monday 21 February 2011] [06:29:15] &lt;mikko&gt;  &#8220;If you think training a graduate is expensive, you are probably right but it might pay off later. Maybe&#8221;
| [Monday 21 February 2011] [06:31:25] &lt;pieter_hintjens&gt;        I&#8217;d like to change the text &#8220;Explore the Community&#8221; on the main welcome page
| [Monday 21 February 2011] [06:31:28] &lt;pieter_hintjens&gt;        it is too bland
| [Monday 21 February 2011] [06:31:59] &lt;pieter_hintjens&gt;        It should be verb article noun
| [Monday 21 February 2011] [06:33:51] &lt;pieter_hintjens&gt;        Escape the Box
| [Monday 21 February 2011] [06:34:34] &lt;pieter_hintjens&gt;        that&#8217;ll do...
| [Monday 21 February 2011] [06:34:44] &lt;mikko&gt;  reminds too much of thinking out of the box
| [Monday 21 February 2011] [06:34:56] &lt;pieter_hintjens&gt;        that was the intention
| [Monday 21 February 2011] [06:35:04] &lt;mikko&gt;  oh..
| [Monday 21 February 2011] [07:17:42] &lt;pieter_hintjens&gt;        sustrik: how can I tell if a specific commit got into the 2.0.10 release?
| [Monday 21 February 2011] [07:17:49] &lt;pieter_hintjens&gt;        e2167cecaefec6557c7a5712fb75e51487ff69a6 is the one I&#8217;m interested in
| [Monday 21 February 2011] [07:18:01]   * pieter_hintjens needs to learn more git...
| [Monday 21 February 2011] [07:19:34] &lt;pieter_hintjens&gt;        ok, it&#8217;s not there... np
| [Monday 21 February 2011] [07:46:38] &lt;pieter_hintjens&gt;        sustrik: I&#8217;ve found another bug in master
| [Monday 21 February 2011] [07:46:54] &lt;pieter_hintjens&gt;        am porting all the Guide examples to 2.1, some of them do quite strange stuff
| [Monday 21 February 2011] [07:47:14] &lt;pieter_hintjens&gt;        Have logged this <a class="reference external" href="https://github.com/zeromq/zeromq2/issues/167">https://github.com/zeromq/zeromq2/issues/167</a> (and #168 was the one I found earlier)
| [Monday 21 February 2011] [07:50:15] &lt;pieter_hintjens&gt;        lunch, brb
| [Monday 21 February 2011] [07:55:05] &lt;sustrik&gt;        pieter_hintjens: ok
| [Monday 21 February 2011] [07:55:16] &lt;sustrik&gt;        btw &#8220;fathom the basics&#8221; is not good
| [Monday 21 February 2011] [07:55:23] &lt;sustrik&gt;        it&#8217;s a rarely used word
| [Monday 21 February 2011] [07:55:34] &lt;sustrik&gt;        and most non-native speakers won&#8217;t understand it
| [Monday 21 February 2011] [07:56:35] &lt;sustrik&gt;        same with &#8220;grab&#8221;
| [Monday 21 February 2011] [07:57:55] &lt;sustrik&gt;        also, nobody will understand &#8220;escape the box&#8221; leads to the community page
| [Monday 21 February 2011] [09:32:32] &lt;pieter_hintjens&gt;        sustrik: sure, but what does &#8220;the community&#8221; mean either?
| [Monday 21 February 2011] [09:32:44] &lt;sustrik&gt;        dunno :)
| [Monday 21 February 2011] [09:32:59] &lt;pieter_hintjens&gt;        exactly, it only makes sense when you already know what it is...
| [Monday 21 February 2011] [09:33:05] &lt;sustrik&gt;        development?
| [Monday 21 February 2011] [09:33:17] &lt;pieter_hintjens&gt;        ... something that says, &#8220;Get a lot more stuff here...&#8221;
| [Monday 21 February 2011] [09:33:22] &lt;sustrik&gt;        yes
| [Monday 21 February 2011] [09:33:24] &lt;pieter_hintjens&gt;        Get the Addons
| [Monday 21 February 2011] [09:33:38] &lt;pieter_hintjens&gt;        ugh
| [Monday 21 February 2011] [09:33:40] &lt;mikko&gt;  addon sounds proprietary
| [Monday 21 February 2011] [09:33:42] &lt;sustrik&gt;        or simple &#8220;more&#8221;
| [Monday 21 February 2011] [09:34:18] &lt;pieter_hintjens&gt;        from a design basis it&#8217;s Verb article Noun
| [Monday 21 February 2011] [09:34:54] &lt;pieter_hintjens&gt;        minimalism is quite difficult... :)
| [Monday 21 February 2011] [09:34:59] &lt;sustrik&gt;        true
| [Monday 21 February 2011] [09:35:14] &lt;sustrik&gt;        proceed to more
| [Monday 21 February 2011] [09:35:23] &lt;sustrik&gt;        check more stuff
| [Monday 21 February 2011] [09:35:39] &lt;pieter_hintjens&gt;        Enter the Deep End
| [Monday 21 February 2011] [09:35:56] &lt;pieter_hintjens&gt;        Dive into the Boiling Tarpits of Git
| [Monday 21 February 2011] [09:36:24] &lt;sustrik&gt;        something like that
| [Monday 21 February 2011] [09:36:29] &lt;pieter_hintjens&gt;        anyhow it doesn&#8217;t really matter if people understand what each option means...
| [Monday 21 February 2011] [09:36:35] &lt;pieter_hintjens&gt;        there are 5 options, clickety-click...
| [Monday 21 February 2011] [09:36:46] &lt;pieter_hintjens&gt;        all we want is their curiosity
| [Monday 21 February 2011] [09:37:03] &lt;sustrik&gt;        we can try to leave it as it
| [Monday 21 February 2011] [09:37:08] &lt;pieter_hintjens&gt;        no-one&#8217;s going to hesitate thinking, &#8220;Oh, I don&#8217;t fully understand that, therefore I can&#8217;t click&#8221;
| [Monday 21 February 2011] [09:37:14] &lt;sustrik&gt;        what i find really wrong is &#8220;fathom&#8221;
| [Monday 21 February 2011] [09:37:17] &lt;pieter_hintjens&gt;        sure
| [Monday 21 February 2011] [09:37:36] &lt;pieter_hintjens&gt;        I wanted a little more spice
| [Monday 21 February 2011] [09:37:48] &lt;pieter_hintjens&gt;        Learn the Basics
| [Monday 21 February 2011] [09:37:54] &lt;pieter_hintjens&gt;        but Learn sounds like school
| [Monday 21 February 2011] [09:38:05] &lt;pieter_hintjens&gt;        and &#8220;Read the Manual&#8221; just sounds like work
| [Monday 21 February 2011] [09:38:35] &lt;sustrik&gt;        read the manual is neutral imo
| [Monday 21 February 2011] [09:38:52] &lt;pieter_hintjens&gt;        hmm, basics vs. advancedics
| [Monday 21 February 2011] [09:38:57] &lt;sustrik&gt;        what about community -&gt; &#8220;dive into details&#8221;
| [Monday 21 February 2011] [09:39:03] &lt;pieter_hintjens&gt;        I like it
| [Monday 21 February 2011] [09:39:09] &lt;pieter_hintjens&gt;        that contrasts with Basics nicely
| [Monday 21 February 2011] [09:40:16] &lt;pieter_hintjens&gt;        aight, we have a winner, thanks Martin :-)
| [Monday 21 February 2011] [09:44:46] &lt;jobytaffey&gt;     I&#8217;m working on a server which multiplexes many TCP sockets into 0MQ. I want a worker app to be able to talk bi-directionally to any TCP socket. What&#8217;s an efficient way to approach this? One 0MQ socket per TCP socket? or perhaps a single 0MQ socket per direction, aggregating all TCP messages (filtered with ZMQ_SUBSCRIBE)?
| [Monday 21 February 2011] [09:45:24] &lt;pieter_hintjens&gt;        jobytaffey: have you read the Guide?
| [Monday 21 February 2011] [09:46:06] &lt;jobytaffey&gt;     Bits of. I guess I&#8217;ll go and read some more then...
| [Monday 21 February 2011] [09:46:42] &lt;pieter_hintjens&gt;        this is not actually covered but it will help you understand how to make the 0MQ part
| [Monday 21 February 2011] [09:47:02] &lt;pieter_hintjens&gt;        the answer depends a lot on what kind of work you are doing with the TCP sockets
| [Monday 21 February 2011] [09:47:32] &lt;pieter_hintjens&gt;        i.e. how you map the TCP side to one or more 0MQ patterns (pubsub, req-rep, pipeline)
| [Monday 21 February 2011] [09:49:12] &lt;jobytaffey&gt;     I&#8217;ve got fixed sized packets going in both directions over TCP. I have an online wireless sensor network where I want to be able to register for telemetry feeds from the devices. But, given millions of devices, I don&#8217;t think I can afford a 0MQ socket per device.
| [Monday 21 February 2011] [09:50:25] &lt;pieter_hintjens&gt;        jobytaffey: please read the Guide, at least Ch1 in detail, and come back when you can map your problem to 0MQ patterns
| [Monday 21 February 2011] [09:50:34] &lt;pieter_hintjens&gt;        otherwise you lack the tools to design this properly
| [Monday 21 February 2011] [09:51:12] &lt;pieter_hintjens&gt;        it sounds like pubsub except you say it&#8217;s bidirectional
| [Monday 21 February 2011] [09:51:41] &lt;jobytaffey&gt;     I agree I&#8217;m trying to run before walking, thanks.
| [Monday 21 February 2011] [10:00:12] &lt;fbarriga&gt;       I don&#8217;t speak english very good but after a while I could decipher the expresion &#8220;Dive into the Boiling Tarpits of Git&#8221; but &#8220;fathom&#8221; is quite weird
| [Monday 21 February 2011] [10:01:15] &lt;fbarriga&gt;       reading the guide is quite amusing but all the decoration make it a bit longer to finish.
| [Monday 21 February 2011] [10:02:20] &lt;neale1&gt; fathom == a unit of depth (6 feet ~ 2m). The expression is used to indicate that you getting &#8220;deeper&#8221; into the subject matter.
| [Monday 21 February 2011] [10:03:01] &lt;pieter_hintjens&gt;        fbarriga: ah, but you did finish it ... :-)
| [Monday 21 February 2011] [10:03:30] &lt;pieter_hintjens&gt;        we had some arguments at the start, about whether or not to decorate the text
| [Monday 21 February 2011] [10:03:44] &lt;pieter_hintjens&gt;        some people complained about it, but most people enjoyed it, so that&#8217;s the style I used
| [Monday 21 February 2011] [10:04:04] &lt;fbarriga&gt;       pieter_hintjens, nop, I was working on other stuff :(
| [Monday 21 February 2011] [10:04:32] &lt;pieter_hintjens&gt;        for those who prefer their text dry we have the man pages, I guess
| [Monday 21 February 2011] [10:06:43] &lt;fbarriga&gt;       is more &#8216;artistic&#8217; the way you write the guide. I think that it sound more intellectual rather than technical.
| [Monday 21 February 2011] [10:13:19] &lt;pieter_hintjens&gt;        fbarriga: well, to be honest, this is how I write when no-one is telling me to conform
| [Monday 21 February 2011] [10:13:30] &lt;pieter_hintjens&gt;        s/telling/paying/
| [Monday 21 February 2011] [10:24:22] &lt;fbarriga&gt;       that&#8217;s good
| [Monday 21 February 2011] [10:49:20] &lt;cremes&gt; is this callstack from 0mq sending or receiving a message?  <a class="reference external" href="https://gist.github.com/837241">https://gist.github.com/837241</a>
| [Monday 21 February 2011] [10:50:22] &lt;neale1&gt; anyone had any experience using 0MQ with Spring?
| [Monday 21 February 2011] [10:54:30] &lt;pieter_hintjens&gt;        cremes: it looks like it&#8217;s in the zmq_msg_init_size method
| [Monday 21 February 2011] [10:55:38] &lt;pieter_hintjens&gt;        neale1: not as far as I know of, there are some people talking about it but nothing concrete yet
| [Monday 21 February 2011] [10:56:39] &lt;neale1&gt; Tks. I have a client trying to use it and having problems. (That&#8217;s as about as detailed as they have described it unfortunately)
| [Monday 21 February 2011] [10:57:21] &lt;cremes&gt; pieter_hintjens: right; but i&#8217;m wondering if this is 0mq in the act of sending or receiving a message because this isn&#8217;t code i am calling directly
| [Monday 21 February 2011] [10:57:37] &lt;cremes&gt; and i&#8217;m showing that i have a small memory leak here on occasion
| [Monday 21 February 2011] [10:58:30] &lt;pieter_hintjens&gt;        cremes: hmm, sustrik would know for sure but it looks like an input event, so receiving a message
| [Monday 21 February 2011] [10:58:48] &lt;pieter_hintjens&gt;        neale1: you obviously need more detail on what the problems are...
| [Monday 21 February 2011] [10:59:17] &lt;cremes&gt; yeah, i&#8217;m thinking this is 0mq allocating its own msg_t for receiving the message envelope/header/routing information for an req/rep pair
| [Monday 21 February 2011] [11:03:20] &lt;sustrik&gt;        cremes: receiving
| [Monday 21 February 2011] [11:04:09] &lt;cremes&gt; sustrik: any chance the lib is not calling close on the message envelope (which isn&#8217;t passed to the user)?
| [Monday 21 February 2011] [11:04:09] &lt;sustrik&gt;        cremes: how do you know there&#8217;s a memory leak?
| [Monday 21 February 2011] [11:04:31] &lt;sustrik&gt;        sure, there can be a bug
| [Monday 21 February 2011] [11:04:40] &lt;sustrik&gt;        can you be more specific about the leak?
| [Monday 21 February 2011] [11:04:44] &lt;cremes&gt; on osx there is a program called &#8216;leaks&#8217; that can read the heap and use a malloc flag to find leaks
| [Monday 21 February 2011] [11:04:51] &lt;cremes&gt; yes
| [Monday 21 February 2011] [11:05:17] &lt;sustrik&gt;        ok, so it maps malloc to frees
| [Monday 21 February 2011] [11:05:22] &lt;sustrik&gt;        and once the program exits
| [Monday 21 February 2011] [11:05:26] &lt;sustrik&gt;        it&#8217;ll print out the leaks
| [Monday 21 February 2011] [11:05:27] &lt;cremes&gt; &#8216;leaks&#8217; is outputting that i am leaking 112 bytes periodically
| [Monday 21 February 2011] [11:05:28] &lt;sustrik&gt;        right?
| [Monday 21 February 2011] [11:05:47] &lt;cremes&gt; nope, it analyses a live heap
| [Monday 21 February 2011] [11:06:08] &lt;sustrik&gt;        how can it possibly know the chunk is not referenced anymore?
| [Monday 21 February 2011] [11:07:26] &lt;pieter_hintjens&gt;        it&#8217;s osx... apple... magic... :)
| [Monday 21 February 2011] [11:08:10] &lt;cremes&gt; sustrik: login to my box with your account and run &#8216;man leaks&#8217;; read the first paragraph
| [Monday 21 February 2011] [11:08:21] &lt;sustrik&gt;        let me see...
| [Monday 21 February 2011] [11:08:46] &lt;cremes&gt; also, reload this gist to see the output from leaks for my program:  <a class="reference external" href="https://gist.github.com/837241">https://gist.github.com/837241</a>
| [Monday 21 February 2011] [11:10:46] &lt;cremes&gt; the receiving socket in this case is an xreq
| [Monday 21 February 2011] [11:11:37] &lt;sustrik&gt;        ok, it scans whole memory for the pointers
| [Monday 21 February 2011] [11:12:19] &lt;cremes&gt; yes; if you keep reading, you&#8217;ll see the note about MallocStackLogging for getting the stack where the leaked memory was allocated
| [Monday 21 February 2011] [11:12:33] &lt;cremes&gt; s/stack/callstack/
| [Monday 21 February 2011] [11:13:01] &lt;sustrik&gt;        the stack i see in the output it
| [Monday 21 February 2011] [11:13:03] &lt;sustrik&gt;        is
| [Monday 21 February 2011] [11:13:10] &lt;sustrik&gt;        thread_start | _pthread_start | thread_routine | zmq::kqueue_t::loop() | zmq::zmq_engine_t::in_event()
| [Monday 21 February 2011] [11:13:26] &lt;sustrik&gt;        that&#8217;s different from the one you&#8217;ve posted before
| [Monday 21 February 2011] [11:13:33] &lt;sustrik&gt;        is it truncated or what?
| [Monday 21 February 2011] [11:14:12] &lt;cremes&gt; you need to scroll the gist to the right; for some reason it doesn&#8217;t wrap this output
| [Monday 21 February 2011] [11:14:33] &lt;sustrik&gt;        ah
| [Monday 21 February 2011] [11:16:15] &lt;sustrik&gt;        well, there are 3 possibilities:
| [Monday 21 February 2011] [11:16:23] &lt;sustrik&gt;        1. bug in 0mq
| [Monday 21 February 2011] [11:16:31] &lt;sustrik&gt;        2. client program not closing the message
| [Monday 21 February 2011] [11:16:51] &lt;sustrik&gt;        3. the pointer is actually stored outside of process memory
| [Monday 21 February 2011] [11:17:46] &lt;cremes&gt; i don&#8217;t think it&#8217;s 2 because i loop over all messages and call zmq_close() on each part when i&#8217;m done
| [Monday 21 February 2011] [11:17:57] &lt;cremes&gt; there&#8217;s no way for my logic to skip that step
| [Monday 21 February 2011] [11:18:12] &lt;cremes&gt; though it&#8217;s certainly possible my code is the cause
| [Monday 21 February 2011] [11:18:22] &lt;sustrik&gt;        ok
| [Monday 21 February 2011] [11:18:28] &lt;sustrik&gt;        then it&#8217;s either 1 or 3
| [Monday 21 February 2011] [11:18:49] &lt;sustrik&gt;        3 happens when pointer to memory is actually held inside of socketpair buffer
| [Monday 21 February 2011] [11:18:57] &lt;sustrik&gt;        which resides in kernel space
| [Monday 21 February 2011] [11:19:13] &lt;sustrik&gt;        at least i would assume it does, even on osx
| [Monday 21 February 2011] [11:19:53] &lt;cremes&gt; i am <em>only</em> seeing this on the one client program i have using an xreq socket
| [Monday 21 February 2011] [11:20:14] &lt;cremes&gt; everything else is using req,rep,pub,sub and i don&#8217;t see the leak
| [Monday 21 February 2011] [11:20:23] &lt;cremes&gt; so i am wondering if this is specific to xreq
| [Monday 21 February 2011] [11:20:57] &lt;sustrik&gt;        ack
| [Monday 21 February 2011] [11:20:57] &lt;cremes&gt; you can see from the &#8216;context&#8217; hex that it contains my custom identity so i assume this is routing info
| [Monday 21 February 2011] [11:21:09] &lt;cremes&gt; which xreq is supposed to cut off before passing the messages to me
| [Monday 21 February 2011] [11:21:39] &lt;sustrik&gt;        is it a head version?
| [Monday 21 February 2011] [11:21:56] &lt;sustrik&gt;        or 2.1.0 or 2.0.x?
| [Monday 21 February 2011] [11:22:07] &lt;cremes&gt; hang on, let me get the git commit hash (oh, 2.1.0)
| [Monday 21 February 2011] [11:22:14] &lt;sustrik&gt;        ok
| [Monday 21 February 2011] [11:22:38] &lt;cremes&gt; e94790006ea6f4c64c commit from feb 9
| [Monday 21 February 2011] [11:22:52] &lt;cremes&gt; i&#8217;ll update to latest &amp; greatest
| [Monday 21 February 2011] [11:23:11]   * sustrik is checking the code
| [Monday 21 February 2011] [11:25:14] &lt;neale1&gt; pieter_hintjens: Yeah I was just going to see if anyone had done it so (a) I know it could be done and (b) they might have a &#8220;recipe&#8221; for doing it and I could pass that wisdom on
| [Monday 21 February 2011] [11:25:48] &lt;sustrik&gt;        cremes: the application in questio; is it using req or xreq socket?
| [Monday 21 February 2011] [11:25:55] &lt;cremes&gt; xreq
| [Monday 21 February 2011] [11:26:20] &lt;sustrik&gt;        ok, so you handle individual message parts by hand
| [Monday 21 February 2011] [11:26:29] &lt;sustrik&gt;        are you closing all of them?
| [Monday 21 February 2011] [11:26:47] &lt;sustrik&gt;        identity/delimiter/body?
| [Monday 21 February 2011] [11:27:32] &lt;cremes&gt; yes
| [Monday 21 February 2011] [11:27:43] &lt;cremes&gt; btw, i see this with the latest master too
| [Monday 21 February 2011] [11:28:31] &lt;cremes&gt; all message parts are passed to my read callback
| [Monday 21 February 2011] [11:28:35] &lt;cremes&gt; and i call:  messages.each { <a href="#id67"><span class="problematic" id="id68">|message|</span></a> message.close }
| [Monday 21 February 2011] [11:29:14] &lt;cremes&gt; it&#8217;s iterating over the array of message parts calling close on each (zmq_close is called inside of the close() instance method)
| [Monday 21 February 2011] [11:29:39] &lt;sustrik&gt;        what language is that?
| [Monday 21 February 2011] [11:29:42] &lt;cremes&gt; does xreq pass the identity and delimiter messages up the stack?
| [Monday 21 February 2011] [11:29:44] &lt;cremes&gt; ruby
| [Monday 21 February 2011] [11:29:53] &lt;sustrik&gt;        cremes: yes
| [Monday 21 February 2011] [11:29:59] &lt;cremes&gt; i thought only xrep saw all that detail
| [Monday 21 February 2011] [11:30:22] &lt;sustrik&gt;        same with xreq
| [Monday 21 February 2011] [11:31:37] &lt;sustrik&gt;        are there connections being created and torn down during the test?
| [Monday 21 February 2011] [11:33:31] &lt;cremes&gt; yes, these connections can and do go away (socket is closed via zmq_close())
| [Monday 21 February 2011] [11:33:48] &lt;cremes&gt; btw, i am printing everything this callback is receiving to my log
| [Monday 21 February 2011] [11:34:05] &lt;cremes&gt; it does get the nul delimiter message but it does not get the identity message before it
| [Monday 21 February 2011] [11:34:41] &lt;sustrik&gt;        right the identity is used and stripped off by the xrep socket on the other side of the connection
| [Monday 21 February 2011] [11:34:44] &lt;cremes&gt; that confirms what i originally thought; xreq strips that off
| [Monday 21 February 2011] [11:34:50] &lt;sustrik&gt;        xrep
| [Monday 21 February 2011] [11:35:22] &lt;sustrik&gt;        so the identity is passed to the xreq only on a single occassion:
| [Monday 21 February 2011] [11:35:27] &lt;sustrik&gt;        on connection initiation
| [Monday 21 February 2011] [11:35:43] &lt;sustrik&gt;        let me check the corresponding code...
| [Monday 21 February 2011] [11:36:07] &lt;cremes&gt; i thought it worked opposite; xrep gets identity from xreq during connection
| [Monday 21 February 2011] [11:36:22] &lt;cremes&gt; xreq doesn&#8217;t actually send its identity after that; xrep prepends it locally
| [Monday 21 February 2011] [11:37:04] &lt;cremes&gt; so when sending from xreq, it goes nul delimiter + message parts
| [Monday 21 February 2011] [11:37:46] &lt;cremes&gt; xrep recvs routing info (if any intervening hops) and pushes its peers identity on the top of that stack + delimiter + message parts
| [Monday 21 February 2011] [11:38:03] &lt;cremes&gt; then when it replies, it just sends that routing info stack + nul + parts
| [Monday 21 February 2011] [11:38:43] &lt;cremes&gt; and ultimately xreq (at original source) recvs just nul delimiter + parts because each intervening xreq stripped off one level of routing info
| [Monday 21 February 2011] [11:38:52] &lt;sustrik&gt;        except of the first part of the route stack
| [Monday 21 February 2011] [11:39:06] &lt;sustrik&gt;        which it have already used to route the message back
| [Monday 21 February 2011] [11:39:09] &lt;sustrik&gt;        to the xreq
| [Monday 21 February 2011] [11:40:07] &lt;cremes&gt; why would the last hop need to send that routing info to the originator? that socket already &#8220;knows&#8221; their own identity!
| [Monday 21 February 2011] [11:40:29] &lt;sustrik&gt;        that&#8217;s why it stips it off
| [Monday 21 February 2011] [11:40:33] &lt;sustrik&gt;        i short
| [Monday 21 February 2011] [11:40:44] &lt;sustrik&gt;        xreq doesn&#8217;t mess with routing info at all
| [Monday 21 February 2011] [11:41:03] &lt;sustrik&gt;        xrep adds one peers identity to the stack on message receival
| [Monday 21 February 2011] [11:41:17] &lt;sustrik&gt;        and strips one identity from the stack on send
| [Monday 21 February 2011] [11:41:19] &lt;pieter_hintjens&gt;        s/xreq/dealer/g, s/xrep/router/g, it&#8217;ll be much easier
| [Monday 21 February 2011] [11:41:31] &lt;sustrik&gt;        i think i see the leak
| [Monday 21 February 2011] [11:41:56] &lt;pieter_hintjens&gt;        dealers are just like push + pull
| [Monday 21 February 2011] [11:42:04] &lt;cremes&gt; right, then i think we agree; the <em>last</em> xrep to reply to the original xreq will <em>strip</em> off its identity, so it only sends the delimiter + parts
| [Monday 21 February 2011] [11:44:50] &lt;sustrik&gt;        cremes: i&#8217;ve pasted the patch via irc to you directly
| [Monday 21 February 2011] [11:45:05] &lt;sustrik&gt;        let me know whether it helps
| [Monday 21 February 2011] [11:45:22] &lt;pieter_hintjens&gt;        sustrik: thanks for your help with those two issues btw
| [Monday 21 February 2011] [11:45:34] &lt;sustrik&gt;        np
| [Monday 21 February 2011] [11:45:54] &lt;pieter_hintjens&gt;        i have a third one which I <em>think</em> actually might be a 0MQ issue ... :-)
| [Monday 21 February 2011] [11:45:57] &lt;pieter_hintjens&gt;        #169
| [Monday 21 February 2011] [11:46:10] &lt;sustrik&gt;        :)
| [Monday 21 February 2011] [11:46:44] &lt;pieter_hintjens&gt;        not sure what the semantics are for zmq_term and pubsub
| [Monday 21 February 2011] [11:46:57] &lt;pieter_hintjens&gt;        if there are 10 connected subscribers, should they all get the last message?
| [Monday 21 February 2011] [11:47:13] &lt;pieter_hintjens&gt;        assuming publisher sends and then terminates
| [Monday 21 February 2011] [11:47:39] &lt;sustrik&gt;        aren&#8217;t you just running into async connect issue?
| [Monday 21 February 2011] [11:47:55] &lt;cremes&gt; sustrik: success!
| [Monday 21 February 2011] [11:47:56] &lt;pieter_hintjens&gt;        it&#8217;s a synchronized pubsub example
| [Monday 21 February 2011] [11:48:12] &lt;sustrik&gt;        cremes: great
| [Monday 21 February 2011] [11:48:18] &lt;sustrik&gt;        let me apply the patch
| [Monday 21 February 2011] [11:48:26] &lt;pieter_hintjens&gt;        subscribers explicitly tell publisher when they are present
| [Monday 21 February 2011] [11:48:38] &lt;cremes&gt; sustrik: if you want to do an occasional &#8216;leaks&#8217; check on osx, feel free
| [Monday 21 February 2011] [11:48:48] &lt;sustrik&gt;        ack
| [Monday 21 February 2011] [11:49:00] &lt;cremes&gt; it&#8217;s really easy... # MallocStackLogging=1 ./my_program
| [Monday 21 February 2011] [11:49:09] &lt;cremes&gt; leaks &lt;pid of my_program&gt;
| [Monday 21 February 2011] [11:49:17] &lt;pieter_hintjens&gt;        sustrik: I&#8217;ll test if it&#8217;s due to async connects... hang on...
| [Monday 21 February 2011] [11:50:31] &lt;CIA-21&gt; zeromq2: 03Martin Sustrik 07master * r0eea935 10/ src/zmq_init.cpp :
| [Monday 21 February 2011] [11:50:32] &lt;CIA-21&gt; zeromq2: Fix for memory leak caused by long identities
| [Monday 21 February 2011] [11:50:32] &lt;CIA-21&gt; zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/hrfcjQ">http://bit.ly/hrfcjQ</a>
| [Monday 21 February 2011] [11:50:40] &lt;sustrik&gt;        cremes: done
| [Monday 21 February 2011] [11:50:45] &lt;sustrik&gt;        and thanks for the offer
| [Monday 21 February 2011] [11:51:22] &lt;sustrik&gt;        cremes: btw, it was you who said that SO_SNDBUF/SO_RCVBUF on OSX is measured in kB rather than bytes, right?
| [Monday 21 February 2011] [11:51:57] &lt;cremes&gt; sustrik: yeah, that&#8217;s the way it looks to me but i can&#8217;t find that documented anywhere
| [Monday 21 February 2011] [11:51:59] &lt;cremes&gt; it&#8217;s screwy
| [Monday 21 February 2011] [11:52:47] &lt;sustrik&gt;        the interesting part is that you&#8217;ve mentioned that getsockopt(SNDBUF) returns 0
| [Monday 21 February 2011] [11:52:58] &lt;sustrik&gt;        so it&#8217;s not obvious how to even find out
| [Monday 21 February 2011] [11:53:09] &lt;cremes&gt; ack
| [Monday 21 February 2011] [11:53:26] &lt;cremes&gt; if you want to write a small c program that exercises that stuff, that&#8217;s probably the best way to know &#8220;for sure&#8221;
| [Monday 21 February 2011] [11:53:41] &lt;sustrik&gt;        what kind of kernel is that btw
| [Monday 21 February 2011] [11:53:44] &lt;sustrik&gt;        proprietaty?
| [Monday 21 February 2011] [11:53:44] &lt;cremes&gt; i could also ask about it on apple&#8217;s dev lists
| [Monday 21 February 2011] [11:53:53] &lt;cremes&gt; nope, it&#8217;s open source
| [Monday 21 February 2011] [11:54:05] &lt;cremes&gt; it&#8217;s called darwin... it&#8217;s a mach + freebsd hybrid
| [Monday 21 February 2011] [11:54:05] &lt;sustrik&gt;        then try asking on the list
| [Monday 21 February 2011] [11:54:22] &lt;cremes&gt; ok
| [Monday 21 February 2011] [11:54:22] &lt;sustrik&gt;        the functionality is obviously misbehaving
| [Monday 21 February 2011] [11:54:34] &lt;sustrik&gt;        so it would be nice to know what the devs have to say about it
| [Monday 21 February 2011] [11:54:35] &lt;cremes&gt; any chance you could provide a small c program that illustrates the issue?
| [Monday 21 February 2011] [11:54:41] &lt;cremes&gt; code always talks louder
| [Monday 21 February 2011] [11:54:43] &lt;sustrik&gt;        i can try
| [Monday 21 February 2011] [11:54:46] &lt;sustrik&gt;        wait a sec
| [Monday 21 February 2011] [11:54:48] &lt;cremes&gt; especially when they can repro it :)
| [Monday 21 February 2011] [11:55:22] &lt;cremes&gt; maybe get/setsockopt only screw up on socketpairs
| [Monday 21 February 2011] [11:55:57] &lt;sustrik&gt;        yes, that&#8217;s my thinking as well
| [Monday 21 February 2011] [11:56:06] &lt;sustrik&gt;        btw, POSIX doesn&#8217;t specify the unit :_
| [Monday 21 February 2011] [11:56:07] &lt;sustrik&gt;        :)
| [Monday 21 February 2011] [11:56:17] &lt;sustrik&gt;        it just says &#8220;buffer size&#8221;
| [Monday 21 February 2011] [11:56:22] &lt;cremes&gt; heh
| [Monday 21 February 2011] [11:56:47] &lt;cremes&gt; yeah, i can&#8217;t imagine get/setsockopt are broken for all sockets... that would be <em>very</em> obvious
| [Monday 21 February 2011] [11:56:56] &lt;sustrik&gt;        Same with Stevens&#8217; book
| [Monday 21 February 2011] [11:57:09] &lt;sustrik&gt;        anyway, let me write an example
| [Monday 21 February 2011] [11:57:58] &lt;cremes&gt; k
| [Monday 21 February 2011] [12:02:22] &lt;pieter_hintjens&gt;        sustrik: you were right...!
| [Monday 21 February 2011] [12:02:55] &lt;pieter_hintjens&gt;        0MQ is just too fast, all the 1M messages get broadcast even before the clients connect...
| [Monday 21 February 2011] [12:03:23] &lt;sustrik&gt;        heh
| [Monday 21 February 2011] [12:03:52] &lt;pieter_hintjens&gt;        it makes it quite a challenge to synchronize subscribers and publishers then...
| [Monday 21 February 2011] [12:03:58] &lt;pieter_hintjens&gt;        not sure the worked example is even valid
| [Monday 21 February 2011] [12:06:27] &lt;sustrik&gt;        i am not sure that&#8217;s it even possible
| [Monday 21 February 2011] [12:06:35] &lt;sustrik&gt;        it&#8217;s like synchronising a radio show
| [Monday 21 February 2011] [12:06:38] &lt;sustrik&gt;        with all listeners
| [Monday 21 February 2011] [12:07:29] &lt;sustrik&gt;        there still me a letter from a listener in amazonia asking for postponing the show
| [Monday 21 February 2011] [12:07:39] &lt;sustrik&gt;        stuck somewhere in post office at manaos
| [Monday 21 February 2011] [12:08:38] &lt;sustrik&gt;        if you know the number of listeners in advance, it can be solvable
| [Monday 21 February 2011] [12:13:02] &lt;sustrik&gt;        cremes: i&#8217;ve created a socket pair on OSX
| [Monday 21 February 2011] [12:13:14] &lt;cremes&gt; ok
| [Monday 21 February 2011] [12:13:22] &lt;sustrik&gt;        tried to getsockopt the SNDBUF and RCVBUF
| [Monday 21 February 2011] [12:13:28] &lt;sustrik&gt;        both result in 3,000,000
| [Monday 21 February 2011] [12:13:43] &lt;sustrik&gt;        where have you seen it returning a zero?
| [Monday 21 February 2011] [12:14:26] &lt;cremes&gt; in mailbox.cpp ::send, that buffer expansion code will return 0 or 32 depending
| [Monday 21 February 2011] [12:14:59] &lt;cremes&gt; zmq::mailbox_t::send around line 160
| [Monday 21 February 2011] [12:15:26] &lt;sustrik&gt;        strange
| [Monday 21 February 2011] [12:15:27] &lt;cremes&gt; line 170 usually fails to return a sane number
| [Monday 21 February 2011] [12:15:43] &lt;sustrik&gt;        meybe setsockopt uses different units than getsockopt?
| [Monday 21 February 2011] [12:15:48] &lt;sustrik&gt;        let me try
| [Monday 21 February 2011] [12:16:08] &lt;cremes&gt; btw, that 3 million number is bytes and i set it in my /etc/sysctl.conf if you want to look at that
| [Monday 21 February 2011] [12:16:26] &lt;sustrik&gt;        that seems to be ok
| [Monday 21 February 2011] [12:16:27] &lt;cremes&gt; that&#8217;s the sysctl for local communications which is what i guess socketpair uses
| [Monday 21 February 2011] [12:16:30] &lt;sustrik&gt;        no need checking
| [Monday 21 February 2011] [12:16:39] &lt;sustrik&gt;        the problem is somewhere further down the way
| [Monday 21 February 2011] [12:21:22] &lt;sustrik&gt;        resizing on osx works better on osx than on linux :)
| [Monday 21 February 2011] [12:21:29] &lt;sustrik&gt;        i resize to 100,000
| [Monday 21 February 2011] [12:21:32] &lt;sustrik&gt;        i check the size
| [Monday 21 February 2011] [12:21:35] &lt;sustrik&gt;        i get 100000
| [Monday 21 February 2011] [12:21:45] &lt;sustrik&gt;        when i do same with linux i get
| [Monday 21 February 2011] [12:21:47] &lt;sustrik&gt;        200000
| [Monday 21 February 2011] [12:22:00] &lt;cremes&gt; heh
| [Monday 21 February 2011] [12:22:23] &lt;cremes&gt; try running that stress test... that usually blows it up
| [Monday 21 February 2011] [12:27:21] &lt;pieter_hintjens&gt;        sustrik: something to think about for the future, if we can make synchronous connects
| [Monday 21 February 2011] [12:27:34] &lt;pieter_hintjens&gt;        it&#8217;d add real value IMO
| [Monday 21 February 2011] [12:27:46] &lt;pieter_hintjens&gt;        for certain use cases at least
| [Monday 21 February 2011] [12:28:19] &lt;cremes&gt; pieter_hintjens: that could be provided by an add-on/wrapper library
| [Monday 21 February 2011] [12:28:26] &lt;pieter_hintjens&gt;        nope, not afaics
| [Monday 21 February 2011] [12:28:35] &lt;pieter_hintjens&gt;        i&#8217;m hitting this problem in one of the examples
| [Monday 21 February 2011] [12:28:47] &lt;cremes&gt; why, because connection status isn&#8217;t exposed?
| [Monday 21 February 2011] [12:28:53] &lt;pieter_hintjens&gt;        i use a req/rep dialog to synchronize the two peers, then a pubsub dialog for the data
| [Monday 21 February 2011] [12:29:04] &lt;cremes&gt; sounds like ftp
| [Monday 21 February 2011] [12:29:11] &lt;pieter_hintjens&gt;        but I can&#8217;t get the two synchronized
| [Monday 21 February 2011] [12:29:20] &lt;pieter_hintjens&gt;        because the pubsub connect can take any arbitrary time
| [Monday 21 February 2011] [12:29:37] &lt;cremes&gt; hmmm
| [Monday 21 February 2011] [12:29:38] &lt;pieter_hintjens&gt;        so even if the req/rep dialog says &#8216;ready&#8217;, that doesn&#8217;t mean the subscriber will get data
| [Monday 21 February 2011] [12:29:43] &lt;cremes&gt; right
| [Monday 21 February 2011] [12:29:56] &lt;pieter_hintjens&gt;        the only sure way is that the pubsub dialog explicitly confirms the connection, if over a connected transport
| [Monday 21 February 2011] [12:30:11] &lt;cremes&gt; so, you bind the SUB socket, the req/rep says ready, you connect the PUB and it fails?
| [Monday 21 February 2011] [12:30:15] &lt;pieter_hintjens&gt;        yup
| [Monday 21 February 2011] [12:30:26] &lt;cremes&gt; sounds like a bug
| [Monday 21 February 2011] [12:30:27] &lt;pieter_hintjens&gt;        doesn&#8217;t fail, just doesn&#8217;t connect in time to get any data
| [Monday 21 February 2011] [12:30:40] &lt;cremes&gt; wait, which one doesn&#8217;t connect in time to get data?
| [Monday 21 February 2011] [12:30:57] &lt;pieter_hintjens&gt;        It&#8217;s this one: https://github.com/zeromq/zeromq2/issues/169
| [Monday 21 February 2011] [12:31:46] &lt;pieter_hintjens&gt;        i&#8217;d like a handshake between publisher &amp; subscriber at connect time, which is exposed to the app
| [Monday 21 February 2011] [12:32:04] &lt;pieter_hintjens&gt;        so subscriber sends identity, and publisher acknowledges, and app code can wait for that to complete
| [Monday 21 February 2011] [12:32:10] &lt;pieter_hintjens&gt;        optionally
| [Monday 21 February 2011] [12:32:14] &lt;cremes&gt; pieter_hintjens: this is why i use devices so much
| [Monday 21 February 2011] [12:32:33] &lt;cremes&gt; put a forwarder in the middle and it will probably work
| [Monday 21 February 2011] [12:32:45] &lt;cremes&gt; the pub connects to the forwarder as do the subs
| [Monday 21 February 2011] [12:32:56] &lt;pieter_hintjens&gt;        i&#8217;ll have the same issue from forwarder to subscribers
| [Monday 21 February 2011] [12:32:59] &lt;cremes&gt; when your req/rep gives the all-clear, let &#8216;er rip
| [Monday 21 February 2011] [12:33:36] &lt;cremes&gt; well, if zmq_connect() takes an arbitrary amount of time, that seems like a &#8216;broken&#8217; contract to me
| [Monday 21 February 2011] [12:33:36] &lt;pieter_hintjens&gt;        it&#8217;s all asynchronous, adding more steps may introduce enough delay, but it&#8217;s not certain
| [Monday 21 February 2011] [12:33:43] &lt;cremes&gt; right, i see
| [Monday 21 February 2011] [12:34:22] &lt;pieter_hintjens&gt;        sustrik: would you consider a handshake for new connections?
| [Monday 21 February 2011] [12:34:38] &lt;pieter_hintjens&gt;        i.e. C: identity frame, S: identity ack
| [Monday 21 February 2011] [14:16:13] &lt;sustrik&gt;        cremes: still there?
| [Monday 21 February 2011] [14:16:24] &lt;cremes&gt; sustrik: yes
| [Monday 21 February 2011] [14:16:27] &lt;sustrik&gt;        git doesn&#8217;t seem to be installed on your box
| [Monday 21 February 2011] [14:16:54] &lt;sustrik&gt;        how do you get the sources?
| [Monday 21 February 2011] [14:16:57] &lt;cremes&gt; add /opt/local/bin to your $PATH
| [Monday 21 February 2011] [14:17:02] &lt;sustrik&gt;        ok
| [Monday 21 February 2011] [14:17:27] &lt;sustrik&gt;        works!
| [Monday 21 February 2011] [14:17:28] &lt;sustrik&gt;        thanks
| [Monday 21 February 2011] [14:17:34] &lt;cremes&gt; you&#8217;re welcome
| [Monday 21 February 2011] [14:19:58] &lt;sustrik&gt;        btw, have you seen the shutdown stress to fail with head?
| [Monday 21 February 2011] [14:20:18] &lt;sustrik&gt;        doesn&#8217;t fail for me
| [Monday 21 February 2011] [14:20:35]   * sustrik guesses that the problem was alleviated by introduction of the reaper thread
| [Monday 21 February 2011] [14:26:17] &lt;cremes&gt; sustrik: i haven&#8217;t seen it fail since i boosted my buffers to 3MB (that 3 million number you saw earlier)
| [Monday 21 February 2011] [14:26:28] &lt;cremes&gt; if i move back to the defaults, i&#8217;m fairly certain it will fail
| [Monday 21 February 2011] [14:26:29] &lt;sustrik&gt;        aha
| [Monday 21 February 2011] [14:26:36] &lt;sustrik&gt;        can you do that?
| [Monday 21 February 2011] [14:26:54] &lt;cremes&gt; not at the moment... i&#8217;m wrapping up some work
| [Monday 21 February 2011] [14:26:59] &lt;cremes&gt; i can do that tomorrow
| [Monday 21 February 2011] [14:27:00] &lt;sustrik&gt;        ok, np
| [Monday 21 February 2011] [14:27:09] &lt;sustrik&gt;        just ping me then
| [Monday 21 February 2011] [14:28:05] &lt;ljackson&gt;       did I read the documentation correctly that in a multithreaded app the zmq context is common to all sockets bind and connect ?
| [Monday 21 February 2011] [14:28:40] &lt;sustrik&gt;        yes
| [Monday 21 February 2011] [14:29:45] &lt;ljackson&gt;       k, if you have a embeded queue device with workers in threads connecting to inproc
| [Monday 21 February 2011] [14:29:57] &lt;pieter_hintjens&gt;        ljackson: only necessarily if you&#8217;re using inproc
| [Monday 21 February 2011] [14:30:08] &lt;ljackson&gt;       can you with the same context in another thread add stuff to the queue via another inproc ?
| [Monday 21 February 2011] [14:30:16] &lt;ljackson&gt;       pieter_hintjens, good to know.
| [Monday 21 February 2011] [14:30:33] &lt;pieter_hintjens&gt;        ljackson: the semantic for communicating between threads is &#8216;send a message&#8217;
| [Monday 21 February 2011] [14:30:44] &lt;pieter_hintjens&gt;        you can send a message to the queue device from any thread, obviously
| [Monday 21 February 2011] [14:30:46] &lt;ljackson&gt;       what I am seeing is zmq hanging trying to connect/bind must be something i messed up then
| [Monday 21 February 2011] [14:31:22] &lt;ljackson&gt;       basically as a test tring to take mtserver.cpp and put the client internal all on inproc using same context is this even valid ?
| [Monday 21 February 2011] [14:31:31] &lt;ljackson&gt;       obviously
| [Monday 21 February 2011] [14:31:37] &lt;ljackson&gt;       diffrent inproc:// addresses
| [Monday 21 February 2011] [14:31:53] &lt;ljackson&gt;       workers for threads as example has and then using queue for clients
| [Monday 21 February 2011] [14:31:58] &lt;pieter_hintjens&gt;        it should work
| [Monday 21 February 2011] [14:32:02] &lt;ljackson&gt;       humm
| [Monday 21 February 2011] [14:32:24] &lt;ljackson&gt;       ok will keep digging or write example test code if I can get it to work and ask again here
| [Monday 21 February 2011] [14:32:27] &lt;ljackson&gt;       thx
| [Monday 21 February 2011] [14:32:30] &lt;pieter_hintjens&gt;        if your code&#8217;s short, post it to a gist so we can look at it
| [Monday 21 February 2011] [14:33:06] &lt;ljackson&gt;       yeah might have to write an example code for my own sanity anyway if I can reproduce my issue I will post and ask again here
| [Monday 21 February 2011] [14:34:44] &lt;ljackson&gt;       i also believe I read that the order of connection bind vs connect doesn&#8217;t matter? Or is that in only certain socket types ?
| [Monday 21 February 2011] [14:35:00] &lt;ljackson&gt;       worried that the device thread is not binding before the workers connect
| [Monday 21 February 2011] [14:35:06] &lt;ljackson&gt;       ...etc.
| [Monday 21 February 2011] [14:35:32] &lt;pieter_hintjens&gt;        for inproc it matters
| [Monday 21 February 2011] [14:35:38] &lt;pieter_hintjens&gt;        you must absolutely bind, then connect
| [Monday 21 February 2011] [14:35:50] &lt;pieter_hintjens&gt;        let me send you a new version of mtrelay that shows how I do this in 2.1
| [Monday 21 February 2011] [14:35:54] &lt;pieter_hintjens&gt;        it&#8217;s somewhat changed
| [Monday 21 February 2011] [14:36:04] &lt;ljackson&gt;       nice thx, I am using 2.1.1 from git
| [Monday 21 February 2011] [14:36:25] &lt;pieter_hintjens&gt;        https://gist.github.com/837575
| [Monday 21 February 2011] [14:36:43] &lt;pieter_hintjens&gt;        the trick is to bind and connect a socket pair in the parent thread, then pass the context &amp; socket to the child thread
| [Monday 21 February 2011] [14:37:06] &lt;pieter_hintjens&gt;        i will try to make a simple abstraction for this, it&#8217;s a very common pattern
| [Monday 21 February 2011] [14:37:28] &lt;pieter_hintjens&gt;        specifically for inproc multithreading that is never intended to be scaled out
| [Monday 21 February 2011] [14:39:23] &lt;ljackson&gt;       humm
| [Monday 21 February 2011] [14:39:38] &lt;ljackson&gt;       i thought you were never to share/send the socket ?
| [Monday 21 February 2011] [14:42:23] &lt;pieter_hintjens&gt;        in 2.1 this is legal, and extremely useful for inproc/multithreading
| [Monday 21 February 2011] [14:42:31] &lt;pieter_hintjens&gt;        not shared, just sent
| [Monday 21 February 2011] [14:49:52] &lt;ljackson&gt;       ahh i get it so you know for sure that it was done in the correct order
| [Monday 21 February 2011] [14:50:04] &lt;ljackson&gt;       then you send on the pointer and forget you knew about it
| [Monday 21 February 2011] [14:50:07] &lt;ljackson&gt;       k
| [Monday 21 February 2011] [14:51:40] &lt;ljackson&gt;       pieter_hintjens, so you need to bind a new socket for each worker thread then
| [Monday 21 February 2011] [14:51:54] &lt;ljackson&gt;       in REQ/RES...etc.
| [Monday 21 February 2011] [14:52:25] &lt;pieter_hintjens&gt;        yes
| [Monday 21 February 2011] [14:55:06] &lt;amacleod&gt;       What 0MQ pattern is best for an asynchronous dialogue, where 2 participants can send messages but there doesn&#8217;t need to be a 1:1 request/response correspondence?
| [Monday 21 February 2011] [14:55:20] &lt;amacleod&gt;       Can XREQ/XREP do that?
| [Monday 21 February 2011] [14:56:42] &lt;ljackson&gt;       pieter_hintjens, thread_args_t <em>child; child-&gt;socket = new zmq::socket_t(*context, ZMQ_ZXREP); ?
| [Monday 21 February 2011] [14:57:08] &lt;cremes&gt; amacleod: yes, those sockets are the perfect choice
| [Monday 21 February 2011] [14:57:15] &lt;pieter_hintjens&gt;        ljackson: what&#8217;s the question?
| [Monday 21 February 2011] [14:57:34] &lt;amacleod&gt;       Okay, cool.  My next step is to understand how to use identity addressing, then.
| [Monday 21 February 2011] [14:57:43] &lt;pieter_hintjens&gt;        amacleod: have you read the Guide yet?
| [Monday 21 February 2011] [14:57:45] &lt;ljackson&gt;       c++ vs your example
| [Monday 21 February 2011] [14:57:55] &lt;amacleod&gt;       pieter_hintjens, parts of it.
| [Monday 21 February 2011] [14:58:04] &lt;pieter_hintjens&gt;        ljackson: you&#8217;re asking whether the C++ is correct?
| [Monday 21 February 2011] [14:58:46] &lt;ljackson&gt;       as in the new pointer .. yeah nevermind answered my own Q
| [Monday 21 February 2011] [15:05:28] &lt;amacleod&gt;       So, I noticed when using the Java bindings, I cannot seem to interrupt a recv operation that&#8217;s trying to read from a socket whose other endpoint doesn&#8217;t exist.
| [Monday 21 February 2011] [15:05:51] &lt;amacleod&gt;       If I want to preserve Java interruptability, should I be using NOBLOCK and a poller?
| [Monday 21 February 2011] [15:16:28] &lt;fbarriga&gt;       I have a little problem with python
| [Monday 21 February 2011] [15:16:41] &lt;fbarriga&gt;       I can&#8217;t receive an structure from C++
| [Monday 21 February 2011] [15:16:56] &lt;amacleod&gt;       fbarriga, what format are you using to serialize structures?
| [Monday 21 February 2011] [15:17:00] &lt;fbarriga&gt;       I don&#8217;t know why It tries to receive it like a string
| [Monday 21 February 2011] [15:17:06] &lt;fbarriga&gt;       in C++ raw structure
| [Monday 21 February 2011] [15:17:11] &lt;fbarriga&gt;       in python struct.unpack
| [Monday 21 February 2011] [15:17:16] &lt;fbarriga&gt;       in the reverse way it works
| [Monday 21 February 2011] [15:17:59] &lt;fbarriga&gt;       msg = self.socket.recv()
| [Monday 21 February 2011] [15:18:13] &lt;fbarriga&gt;       len (msg) it prints 29
| [Monday 21 February 2011] [15:18:59] &lt;fbarriga&gt;       and I&#8217;m sending only a double
| [Monday 21 February 2011] [15:19:09] &lt;fbarriga&gt;       double nav = 1; memcpy(zmq_msg_data(&amp;msg), &amp;nav, sizeof(double));
| [Monday 21 February 2011] [15:19:39] &lt;amacleod&gt;       Can you do a byte-by-byte comparison of what you&#8217;re getting on the wire and the result of struct.pack with the value you expect?
| [Monday 21 February 2011] [15:21:36] &lt;amacleod&gt;       On the C++ side you are telling zmq that your packet should be (sizeof double) bytes long?
| [Monday 21 February 2011] [15:22:48] &lt;ljackson&gt;       pieterh, acording to what I read in the docs/guide am i correct in that the PUSH/PULL socket can have multiple pushers and a single puller in the same context e.g. workers and sinks ?
| [Monday 21 February 2011] [15:23:06] &lt;pieterh&gt;        sure
| [Monday 21 February 2011] [15:23:12] &lt;fbarriga&gt;       sorry guys I found it
| [Monday 21 February 2011] [15:23:23] &lt;ljackson&gt;       pieterh, just wanted to make sure I read it right thx :)
| [Monday 21 February 2011] [15:23:34] &lt;pieterh&gt;        ljackson: all socket types except PAIR can be connected 1-N or N-1
| [Monday 21 February 2011] [15:23:42] &lt;ljackson&gt;       or N-N ?
| [Monday 21 February 2011] [15:23:54] &lt;fbarriga&gt;       quite stupid my error, I&#8217;ve 2 streams and I was connecting to the wrong one :(
| [Monday 21 February 2011] [15:24:00] &lt;pieterh&gt;        that&#8217;s just 1-N and N-1 from two sides
| [Monday 21 February 2011] [15:24:06] &lt;ljackson&gt;       ya
| [Monday 21 February 2011] [15:25:36] &lt;ljackson&gt;       inproc, pull push need the same treatment as req/res ..etc ?
| [Monday 21 February 2011] [15:28:08] &lt;pieterh&gt;        ljackson: rtfm here http://zguide.zeromq.org/chapter:all#toc21
| [Monday 21 February 2011] [15:28:38] &lt;pieterh&gt;        i&#8217;m adding more detail on the 2.1 mtrelay example but the point is that inproc is not a disconnected transport
| [Monday 21 February 2011] [15:34:07] &lt;ljackson&gt;       k thx
| [Monday 21 February 2011] [15:52:53] &lt;amacleod&gt;       In Java bindings, how do I determine what error happened when recv returns null?
| [Monday 21 February 2011] [15:58:58] &lt;CIA-21&gt; jzmq: 03Gonzalo Diethelm 07master * r91da678 10/ (5 files in 2 dirs):
| [Monday 21 February 2011] [15:58:59] &lt;CIA-21&gt; jzmq: Use zmq_errno() everywhere instead of errno.
| [Monday 21 February 2011] [15:58:59] &lt;CIA-21&gt; jzmq: Set all projects to compile with a Release configuration. - http://bit.ly/h8ZIKL
| [Monday 21 February 2011] [16:05:49] &lt;gdan&gt;   trying to build in ubuntu 10.10:  installed: g++,g++ 4.5,gcc-opt, libstdc++6, libstdc++645-dev,   **</em> I am getting what appers to me stl errors, does anyone have a list of reuired libaries?
| [Monday 21 February 2011] [16:06:04] &lt;gdan&gt;   building the libzmq
| [Monday 21 February 2011] [16:09:08] &lt;pieterh&gt;        gdan: I&#8217;m searching for the answer...
| [Monday 21 February 2011] [16:09:15] &lt;gdan&gt;   thanks
| [Monday 21 February 2011] [16:10:56] &lt;pieterh&gt;        gdan: do you have build-essential?
| [Monday 21 February 2011] [16:11:11] &lt;gdan&gt;   let me check
| [Monday 21 February 2011] [16:12:51] &lt;gdan&gt;   do not see it, nor do i see it avail in software centr
| [Monday 21 February 2011] [16:13:11] &lt;pieterh&gt;        apt-get install build-essential
| [Monday 21 February 2011] [16:13:25] &lt;pieterh&gt;        sudo apt-get install build-essential, to be accurate
| [Monday 21 February 2011] [16:13:56] &lt;pieterh&gt;        also uuid-dev
| [Monday 21 February 2011] [16:14:05] &lt;gdan&gt;   installing...
| [Monday 21 February 2011] [16:14:35] &lt;soren&gt;  Or: sudo apt-get build-dep libzmq0
| [Monday 21 February 2011] [16:14:49] &lt;soren&gt;  That installs all the build-dependencies of the libzmq0 ubuntu package.
| [Monday 21 February 2011] [16:14:54] &lt;soren&gt;  Handy shortcut.
| [Monday 21 February 2011] [16:15:14] &lt;gdan&gt;   will do...
| [Monday 21 February 2011] [16:19:33] &lt;gdan&gt;   i re-ran  configure, now make is running.   so far, looks good.  thank you
| [Monday 21 February 2011] [16:24:39] &lt;pieterh&gt;        gdan: np
| [Monday 21 February 2011] [16:28:29] &lt;ljackson&gt;       pieterh, odd appears i am close, getting context terminated exception...
| [Monday 21 February 2011] [16:29:09] &lt;pieterh&gt;        main thread terminates the context before other threads are finished
| [Monday 21 February 2011] [16:31:23] &lt;ljackson&gt;       humm
| [Monday 21 February 2011] [16:32:40] &lt;ljackson&gt;       this happens starting up the ZMQ_QUEUE device. even before I get to starting worker threads
| [Monday 21 February 2011] [16:32:59] &lt;ljackson&gt;       QUEUE bridging inproc not tested ?
| [Monday 21 February 2011] [16:38:43] &lt;pieterh&gt;        ljackson: hard to say without code to look at
| [Monday 21 February 2011] [16:39:07] &lt;pieterh&gt;        the queue device is just normal code
| [Monday 21 February 2011] [16:39:47] &lt;pieterh&gt;        find where you&#8217;re doing zmq_term, print &#8220;HELLO&#8221; and then check whether that shows before the error...
| [Monday 21 February 2011] [16:40:02] &lt;pieterh&gt;        if you terminate the context, that kills all inproc sockets
| [Monday 21 February 2011] [16:42:50] &lt;ljackson&gt;       yeah not doing any terminate, but a few other things with this existing code... prob need to make test code to try to reproduce
| [Monday 21 February 2011] [16:49:12] &lt;ljackson&gt;       doh I think i see it
| [Monday 21 February 2011] [16:51:18] &lt;amacleod&gt;       Where are the URIs for 0MQ documented?  I assumed I should be using <a class="reference external" href="tcp://host:port">tcp://host:port</a> even for my XREQ/XREP dialogue, but the &#8220;mamas/papas&#8221; examples in the guide use things like &#8220;ipc://routing.ipc&#8221;.
| [Monday 21 February 2011] [16:53:46] &lt;amacleod&gt;       Found it.  zmq_ipc(7) man page.
| [Monday 21 February 2011] [16:58:03] &lt;pieterh&gt;        amacleod: zmq_bind / zmq_connect man pages list the transports, each has its own man page
| [Monday 21 February 2011] [16:59:05] &lt;amacleod&gt;       Ok, thanks.  So I still want tcp since I want all my sockets to be remote.
| [Monday 21 February 2011] [17:00:44] &lt;amacleod&gt;       I&#8217;m still having trouble wrapping my head around the addressing requirements for XREQ/XREP.
| [Monday 21 February 2011] [17:01:26] &lt;amacleod&gt;       So far I have an XREP &#8220;server&#8221; that listens for connections.  I&#8217;m able to create an XREQ &#8220;client&#8221; that establishes a connection and sends a request.
| [Monday 21 February 2011] [17:01:56] &lt;amacleod&gt;       The server sees the request and where it came from (2 message parts: address, payload), and is able to reply.
| [Monday 21 February 2011] [17:02:27] &lt;amacleod&gt;       When I send the reply as (address, null, payload), I can see in wireshark that some data gets sent in the opposite direction on the socket, but my recv call in the client never returns.
| [Monday 21 February 2011] [17:02:35] &lt;pieterh&gt;        amacleod: ... some generalities about the request-reply pattern
| [Monday 21 February 2011] [17:02:51] &lt;pieterh&gt;        in most cases, client is REQ and server is REP
| [Monday 21 February 2011] [17:03:06] &lt;pieterh&gt;        and anything in the middle (e.g. queue device) is XREP&#8211;XREQ
| [Monday 21 February 2011] [17:03:20] &lt;pieterh&gt;        that&#8217;s the basic layout
| [Monday 21 February 2011] [17:03:29] &lt;pieterh&gt;        after that there is the weird stuff
| [Monday 21 February 2011] [17:03:42] &lt;pieterh&gt;        which chapter 3 explains
| [Monday 21 February 2011] [17:03:47] &lt;amacleod&gt;       So to do this &#8220;asynchronous dialogue&#8221; thing, do I need to have more than 2 participants?
| [Monday 21 February 2011] [17:04:06] &lt;pieterh&gt;        asynchronous means what exactly?
| [Monday 21 February 2011] [17:04:16] &lt;pieterh&gt;        in your use case, I mean
| [Monday 21 February 2011] [17:04:21] &lt;amacleod&gt;       Not lockstep on requests and replies.
| [Monday 21 February 2011] [17:04:30] &lt;pieterh&gt;        so how do the messages flow?
| [Monday 21 February 2011] [17:04:37] &lt;pieterh&gt;        do you have N clients, 1 server?
| [Monday 21 February 2011] [17:04:43] &lt;pieterh&gt;        N clients, N servers?
| [Monday 21 February 2011] [17:04:45] &lt;amacleod&gt;       Yes.. N clients, 1 server.
| [Monday 21 February 2011] [17:04:51] &lt;amacleod&gt;       Bi-directional messages.
| [Monday 21 February 2011] [17:05:08] &lt;pieterh&gt;        can servers send messages to clients who have not sent a message to the server?
| [Monday 21 February 2011] [17:05:17] &lt;pieterh&gt;        or is it 1 request / 0-N responses?
| [Monday 21 February 2011] [17:05:21] &lt;amacleod&gt;       No.  There has to be at least an initial handshake.
| [Monday 21 February 2011] [17:05:29] &lt;amacleod&gt;       It&#8217;s 1-N requests, 0-N responses.
| [Monday 21 February 2011] [17:05:44] &lt;amacleod&gt;       So, the client can still send messages to the server even while the server is sending responses.
| [Monday 21 February 2011] [17:05:47] &lt;pieterh&gt;        can clients pipeline requests?
| [Monday 21 February 2011] [17:05:50] &lt;pieterh&gt;        ah, ok
| [Monday 21 February 2011] [17:06:26] &lt;pieterh&gt;        so your server definitely has to be XREP (which we will rename to ROUTER at some stage)
| [Monday 21 February 2011] [17:06:39] &lt;amacleod&gt;       Okay.  That&#8217;s the way I have it.
| [Monday 21 February 2011] [17:06:57] &lt;pieterh&gt;        your clients always initiate the dialog, and they talk to a single server only
| [Monday 21 February 2011] [17:07:04] &lt;amacleod&gt;       When I get messages in on the server, I add the identity to a routing table in the server object.
| [Monday 21 February 2011] [17:07:05] &lt;gdan&gt;   does anyone know in mono, how in mono (on ubuntu) i reference the libzmq runtime libraries i just built in the project?  ( do see that they are in usr/local/lib)
| [Monday 21 February 2011] [17:07:10] &lt;pieterh&gt;        so they do indeed use XREQ
| [Monday 21 February 2011] [17:07:13] &lt;amacleod&gt;       pieterh, that is correct.
| [Monday 21 February 2011] [17:07:27] &lt;pieterh&gt;        if your clients talked to N servers, you&#8217;d want to use XREP for them as well
| [Monday 21 February 2011] [17:07:28] &lt;amacleod&gt;       gdan, does mono respect LD_LIBRARY_PATH?
| [Monday 21 February 2011] [17:08:11] &lt;gdan&gt;   don&#8217;t know.   perhaps when i run i specify the path?
| [Monday 21 February 2011] [17:08:24] &lt;amacleod&gt;       pieterh, indeed.  One thing I didn&#8217;t realize at first was that, with XREQ, I did not need to explicitly send the client&#8217;s identity.
| [Monday 21 February 2011] [17:08:55] &lt;amacleod&gt;       gdan, I know in Java, I have to do something like -Djava.library.path=path/to/jzmq_native.  Probably mono has something similar.
| [Monday 21 February 2011] [17:08:57] &lt;pieterh&gt;        amacleod: if you use either XREP or XREQ in your code, you absolutely have to study and learn how these sockets create and use envelopes
| [Monday 21 February 2011] [17:09:13] &lt;pieterh&gt;        it&#8217;s logical once you know it but it is really not obvious
| [Monday 21 February 2011] [17:09:26] &lt;amacleod&gt;       pieterh, I have been trying to understand a bit by looking at wireshark.
| [Monday 21 February 2011] [17:09:30] &lt;gdan&gt;   i&#8217;ll look
| [Monday 21 February 2011] [17:09:46] &lt;pieterh&gt;        it&#8217;s explained in Ch3, look for Request-Reply envelopes
| [Monday 21 February 2011] [17:10:26] &lt;amacleod&gt;       One thing I was confused about in chapter 3 was how XREP and XREQ expect their envelopes.  Is it true that XREQ expects envelopes the same way REQ does and that XREP expects envelopes the same way REP does?
| [Monday 21 February 2011] [17:10:35] &lt;pieterh&gt;        no
| [Monday 21 February 2011] [17:10:39] &lt;pieterh&gt;        the name XREQ is highly misleading
| [Monday 21 February 2011] [17:10:46] &lt;pieterh&gt;        it should and will be called &#8220;DEALER&#8221;
| [Monday 21 February 2011] [17:10:56] &lt;pieterh&gt;        it is exactly equivalent to a PUSH+PULL combination
| [Monday 21 February 2011] [17:11:11] &lt;pieterh&gt;        it deals messages out, and in, without changing them
| [Monday 21 February 2011] [17:11:37] &lt;pieterh&gt;        whereas REP is a terminator that rips open the envelope, hides it, gives you the contents, and sneakily recreates the envelope when you send a reply
| [Monday 21 February 2011] [17:11:51] &lt;pieterh&gt;        they are fundamentally different tools
| [Monday 21 February 2011] [17:12:35] &lt;pieterh&gt;        take a look at the rtdealer example
| [Monday 21 February 2011] [17:12:38] &lt;amacleod&gt;       Ok.  What I was thinking a while ago is that I could achieve what I wanted with a pair of REQ/REP sockets, one for each direction.  The replies would always be dinky little &#8220;yep I got it&#8221; acknowledgements.
| [Monday 21 February 2011] [17:13:01] &lt;pieterh&gt;        it will work really easily using XREQ/XREP, don&#8217;t panic
| [Monday 21 February 2011] [17:13:18] &lt;amacleod&gt;       But I couldn&#8217;t think of a good way to create both at once.  (trying not to panic :-D)
| [Monday 21 February 2011] [17:13:50] &lt;pieterh&gt;        - your clients using XREQ just connect, and send simple messages
| [Monday 21 February 2011] [17:14:19] &lt;pieterh&gt;        - the server, when it receives a message, gives the app the client identity, followed by the simple message, in two parts
| [Monday 21 February 2011] [17:14:21] &lt;amacleod&gt;       So they are similar to the &#8220;worker&#8221; in rtdealer?  (I say this because worker uses XREQ).
| [Monday 21 February 2011] [17:14:42] &lt;pieterh&gt;        - the server, when it wants to talk to client A, sends two parts: identity A, and then simple message
| [Monday 21 February 2011] [17:14:59] &lt;pieterh&gt;        in rtdealer, client is the worker (uses XREQ as you see), server is the main thread
| [Monday 21 February 2011] [17:15:20] &lt;pieterh&gt;        would it help to have a real example of a server and clients working like this?
| [Monday 21 February 2011] [17:15:34] &lt;pieterh&gt;        i&#8217;ll make one tomorrow, it&#8217;s late here now
| [Monday 21 February 2011] [17:15:55] &lt;amacleod&gt;       Possibly.  I might try translating rtdealer into Java after I get home.
| [Monday 21 February 2011] [17:16:10] &lt;pieterh&gt;        it&#8217;s not literally what you want, but it shows how to use that socket pair
| [Monday 21 February 2011] [17:17:15] &lt;amacleod&gt;       I thought that I had things pretty much okay as far as you have said.  When you say &#8220;the server sends two parts: identity A, and then simple message&#8221;, do you mean that XREP(router) does that for me when I call send, or that my code should do that using sendmore followed by send?
| [Monday 21 February 2011] [17:17:56] &lt;pieterh&gt;        sendmore followed by send
| [Monday 21 February 2011] [17:18:09] &lt;pieterh&gt;        you need to explicitly tell the router socket who to send the message to
| [Monday 21 February 2011] [17:18:17] &lt;pieterh&gt;        it does not actually send the identity
| [Monday 21 February 2011] [17:18:32] &lt;pieterh&gt;        it uses that to decide what client to talk to, then sends the remaining message part(s)
| [Monday 21 February 2011] [17:18:42] &lt;amacleod&gt;       Ok.  It&#8217;s possible there is a bug in my client receiving code.  I did see the reply come back on the socket in wireshark.
| [Monday 21 February 2011] [17:19:43] &lt;pieterh&gt;        I think your use case is much better than the one I used for XREP-XREQ
| [Monday 21 February 2011] [17:20:00] &lt;pieterh&gt;        so I&#8217;ll change the Guide for that...
| [Monday 21 February 2011] [17:20:20] &lt;amacleod&gt;       It&#8217;s for instant-message style chat.  (wrapping XMPP).
| [Monday 21 February 2011] [17:20:40] &lt;pieterh&gt;        indeed
| [Monday 21 February 2011] [17:20:53] &lt;pieterh&gt;        tomorrow sometime I&#8217;ll have a working example
| [Monday 21 February 2011] [17:21:38] &lt;amacleod&gt;       Ok.  I&#8217;ll stop pestering you so you can sleep :-)  If I am able to translate the current example into Java, I&#8217;ll let you know here tomorrow.
| [Monday 21 February 2011] [17:23:20] &lt;pieterh&gt;        np :-)
| [Monday 21 February 2011] [17:41:39] &lt;CIA-21&gt; zeromq2: 03Mikko Koppanen 07master * r98ccff1 10/ builds/redhat/zeromq.spec :
| [Monday 21 February 2011] [17:41:40] &lt;CIA-21&gt; zeromq2: Fixes build on at least CentOS 5
| [Monday 21 February 2011] [17:41:40] &lt;CIA-21&gt; zeromq2: Signed-off-by: Mikko Koppanen &lt;mikko.koppanen&#64;gmail.com&gt; - http://bit.ly/hHoTEo
| [Monday 21 February 2011] [18:39:57] &lt;rem7&gt;   what is the best way to ensure the delivery of a msg in a PUSH/PULL (something very similar to the ventilator tutorial) ... I sent out about 16Million msgs and my sink recvd 10million.
| [Monday 21 February 2011] [18:41:07] &lt;rem7&gt;   I was reading that multicast only works on PUB/SUB...?
| [Monday 21 February 2011] [18:50:24] &lt;mikko&gt;  sustrik: thanks!
| [Monday 21 February 2011] [19:20:28] &lt;cremes&gt; on a multi-part send, if any part fails (rc != 0 and errno is set) then 0mq gives my user code owernship of the messages again, yes?
| [Monday 21 February 2011] [19:20:50] &lt;cremes&gt; in normal circumstances, once you pass a message to zmq_send() it&#8217;s 0mq&#8217;s responsibility to call zmq_msg_close()
| [Monday 21 February 2011] [19:20:56] &lt;cremes&gt; except in the case above, right?
| [Monday 21 February 2011] [19:33:57] &lt;mikko&gt;  cremes: nope
| [Monday 21 February 2011] [19:34:07] &lt;mikko&gt;  cremes: even if you zmq_send message you need to close it
| [Monday 21 February 2011] [19:35:59] &lt;cremes&gt; mikko: sheesh, i&#8217;ve been doing this wrong for <em>months</em> then
| [Monday 21 February 2011] [19:36:34] &lt;cremes&gt; so, does zmq_send() increment the &#8220;copy counter&#8221; on the zmq_msg_t and then decrement it (and release) when it&#8217;s sent?
| [Monday 21 February 2011] [19:37:00] &lt;cremes&gt; it must otherwise when i call close it would release the message before 0mq has a chance to transmit it
| [Monday 21 February 2011] [19:37:10] &lt;cremes&gt; pls confirm if you can
| [Monday 21 February 2011] [20:37:20] &lt;mikko&gt;  cremes: sorry, was a away building stuff
| [Monday 21 February 2011] [20:37:55] &lt;mikko&gt;  cremes: you can close right after send
| [Monday 21 February 2011] [20:38:03] &lt;mikko&gt;  take a look at zguide for samples
| [Monday 21 February 2011] [20:38:47] &lt;mikko&gt;  <a class="reference external" href="https://github.com/zeromq/zeromq2/blob/master/src/zmq.cpp#L129">https://github.com/zeromq/zeromq2/blob/master/src/zmq.cpp#L129</a>
| [Monday 21 February 2011] [20:38:52] &lt;mikko&gt;  also, that might clear it up a bit
| [Monday 21 February 2011] [20:40:14] &lt;mikko&gt;  also, see the page: <a class="reference external" href="http://api.zero.mq/master:zmq-msg-close">http://api.zero.mq/master:zmq-msg-close</a> for zmq_msg_close
| [Monday 21 February 2011] [21:09:39] &lt;jugg&gt;   whoa!  Since when did we get versioned api on the web?  Nice! :)
| [Monday 21 February 2011] [21:10:24] &lt;jugg&gt;   oh, different domain.  interesting.
| [Monday 21 February 2011] [21:11:43] &lt;mikko&gt;  jugg: been there a few days
| [Monday 21 February 2011] [21:12:09] &lt;mikko&gt;  and finally!
| [Monday 21 February 2011] [21:12:12] &lt;mikko&gt;  <a class="reference external" href="http://snapshot.zero.mq/rpm/2011-02-22_02-09-11/centos5/i386/">http://snapshot.zero.mq/rpm/2011-02-22_02-09-11/centos5/i386/</a>
| [Monday 21 February 2011] [21:12:16] &lt;mikko&gt;  centos rpms available
| [Monday 21 February 2011] [21:12:20] &lt;mikko&gt;  time to sleep
| [Tuesday 22 February 2011] [05:40:56] &lt;pieterh&gt;       good morning
| [Tuesday 22 February 2011] [05:42:43] &lt;ianbarber&gt;     morning
| [Tuesday 22 February 2011] [05:48:01] &lt;pieterh&gt;       ianbarber: what part of the world are you in?
| [Tuesday 22 February 2011] [05:48:34] &lt;pieterh&gt;       London? you seem to get around a lot for your &#8220;0MQ is the answer&#8221; talks :-)
| [Tuesday 22 February 2011] [05:56:34] &lt;ianbarber&gt;     yep, london
| [Tuesday 22 February 2011] [05:56:54] &lt;ianbarber&gt;     i was hoping to get to give it at confoo as well, but they went with a different talk in the end :)
| [Tuesday 22 February 2011] [05:59:45] &lt;pieterh&gt;       I was thinking of doing a small 0MQ event in Brussels later in spring
| [Tuesday 22 February 2011] [06:00:01] &lt;pieterh&gt;       April or May, when it&#8217;s nicer weather
| [Tuesday 22 February 2011] [06:03:42] &lt;ianbarber&gt;     awesome, i think that would be fun
| [Tuesday 22 February 2011] [06:05:05] &lt;ianbarber&gt;     are you based in brussels then, or near by?
| [Tuesday 22 February 2011] [06:07:37] &lt;pieterh&gt;       I&#8217;m in Brussels, yes, so it&#8217;s easy for us to organize something here
| [Tuesday 22 February 2011] [06:08:03] &lt;pieterh&gt;       There&#8217;s a nice place in the center of town I used to hold conferences in
| [Tuesday 22 February 2011] [06:09:02] &lt;pieterh&gt;       Brussels is reasonably central IMO, and of course there&#8217;s the beer...
| [Tuesday 22 February 2011] [06:09:44] &lt;ianbarber&gt;     surely there are some unused government buildings available? :)
| [Tuesday 22 February 2011] [06:10:28] &lt;ianbarber&gt;     yeah, brussels is a really nice place, and easy to get to on the train from everywhere as well for people that aren&#8217;t keen on flying.
| [Tuesday 22 February 2011] [06:10:33] &lt;pieterh&gt;       you mean because one of our 7 governments is currently on extended holiday?
| [Tuesday 22 February 2011] [06:10:38] &lt;pieterh&gt;       lol
| [Tuesday 22 February 2011] [06:10:51] &lt;pieterh&gt;       ok, I&#8217;ll set it up... excellent...
| [Tuesday 22 February 2011] [06:11:45] &lt;pieterh&gt;       I&#8217;m thinking, mix of workshops and project presentations
| [Tuesday 22 February 2011] [06:12:13] &lt;pieterh&gt;       people can go home in the evening, or stay overnight and socialise
| [Tuesday 22 February 2011] [06:13:53] &lt;ianbarber&gt;     i think that&#8217;s sensible, though I would probably aim for a panel or discussion slot or two, just to to give it a less structured feel - I would imagine that the crowd will all be pretty good with the library so the chat will be as good as the talks
| [Tuesday 22 February 2011] [06:17:46] &lt;pieterh&gt;       So the idea is a lot of tables, chairs, refreshments, in a large room
| [Tuesday 22 February 2011] [06:18:07] &lt;pieterh&gt;       wifi
| [Tuesday 22 February 2011] [06:19:58] &lt;ianbarber&gt;     sounds good
| [Tuesday 22 February 2011] [06:29:01] &lt;ianbarber&gt;     btw, the clone example in the new guide chapter is excellent.
| [Tuesday 22 February 2011] [06:31:35] &lt;pieterh&gt;       ah, glad you like it
| [Tuesday 22 February 2011] [06:32:04] &lt;pieterh&gt;       do you think it makes sense to do all the design discussion first, and then the code later?
| [Tuesday 22 February 2011] [06:32:26] &lt;pieterh&gt;       these examples are going to be a lot larger than the earlier ones
| [Tuesday 22 February 2011] [06:34:46] &lt;ianbarber&gt;     yeah, i think that&#8217;s tricky whenever you get to a more real world example - i mean if the reader had been paying attention then should pretty much get how to build it by that point as all of the blocks have been covered. I think it is going to be a big block of code to cover the whole client and server case, but I&#8217;m not sure there&#8217;s that much that should split it up
| [Tuesday 22 February 2011] [06:36:11] &lt;pieterh&gt;       I mean, after you read the Clone discussion, do you want to see it worked out in code, or do you want to continue to the Harmony discussion?
| [Tuesday 22 February 2011] [06:36:26] &lt;pieterh&gt;       assuming that code is 20 pages long...
| [Tuesday 22 February 2011] [06:36:54] &lt;pieterh&gt;       (not one code block, but developed piece by piece)
| [Tuesday 22 February 2011] [06:37:17] &lt;pieterh&gt;       for me the only way to prove the design is running code
| [Tuesday 22 February 2011] [06:37:50] &lt;ianbarber&gt;     yeah, i would definitely prefer to see some code
| [Tuesday 22 February 2011] [06:38:16] &lt;pieterh&gt;       ok, then I&#8217;ll switch back to the earlier structure... it&#8217;ll be like the last Worked example in Ch3
| [Tuesday 22 February 2011] [06:38:41] &lt;ianbarber&gt;     yeah, i think that was a reasonable model
| [Tuesday 22 February 2011] [06:39:01] &lt;ianbarber&gt;     would it be worth maybe having these examples be in python or another scripting language, just to trim the size on-page some?
| [Tuesday 22 February 2011] [06:41:17] &lt;pieterh&gt;       that could be good, yes
| [Tuesday 22 February 2011] [06:41:33] &lt;pieterh&gt;       it solves one problem I have with C, the lack of containers
| [Tuesday 22 February 2011] [06:41:44] &lt;pieterh&gt;       I was thinking of using ZFL for these advanced cases
| [Tuesday 22 February 2011] [06:41:49] &lt;pieterh&gt;       but Python would be neater
| [Tuesday 22 February 2011] [06:42:10] &lt;pieterh&gt;       However... I still need to write them in C :-)
| [Tuesday 22 February 2011] [06:42:20] &lt;pieterh&gt;       For completeness&#8217; sake
| [Tuesday 22 February 2011] [06:43:03]          * pieterh thinks a little...
| [Tuesday 22 February 2011] [06:43:15] &lt;pieterh&gt;       let&#8217;s continue in C, which is the language of the API
| [Tuesday 22 February 2011] [06:43:35] &lt;pieterh&gt;       but we can produce versions of the Guide for every single language
| [Tuesday 22 February 2011] [06:43:44] &lt;pieterh&gt;       you want the Guide in Python? Not a problem!
| [Tuesday 22 February 2011] [06:44:03] &lt;pieterh&gt;       (any examples not translated will default to C then)
| [Tuesday 22 February 2011] [06:45:00] &lt;pieterh&gt;       since the source for examples is merged into the text at build time anyhow
| [Tuesday 22 February 2011] [06:46:46] &lt;ianbarber&gt;     that would be quite cool
| [Tuesday 22 February 2011] [06:47:22] &lt;pieterh&gt;       ok, it&#8217;s a deal
| [Tuesday 22 February 2011] [06:47:57] &lt;ianbarber&gt;     on that note - is there a process for saying when new examples are ready for translation?
| [Tuesday 22 February 2011] [06:48:09] &lt;ianbarber&gt;     maybe just a mailing list ping that the code is there before the guide goes live
| [Tuesday 22 February 2011] [06:48:13] &lt;pieterh&gt;       hmm, I guess it involves tracking the git
| [Tuesday 22 February 2011] [06:48:34] &lt;pieterh&gt;       I&#8217;d rather not get into a release process for the guide
| [Tuesday 22 February 2011] [06:49:08] &lt;pieterh&gt;       there are only a couple of languages that people have translated systematically
| [Tuesday 22 February 2011] [06:49:12] &lt;pieterh&gt;       like PHP :-)
| [Tuesday 22 February 2011] [06:49:17] &lt;stimpie&gt;       I understood the goal of zeromq is becoming a kernel module, I have just read the interesting new part of the manual &#8216;clone pattern&#8217; but I wander how this adds to a kernel level system?
| [Tuesday 22 February 2011] [06:49:29] &lt;pieterh&gt;       stimpie: it&#8217;s a layer on top
| [Tuesday 22 February 2011] [06:50:13] &lt;ianbarber&gt;     pieterh: fair point :)
| [Tuesday 22 February 2011] [06:50:49] &lt;pieterh&gt;       ianbarber: yesterday I updated the C examples and text for 2.1...
| [Tuesday 22 February 2011] [06:51:06] &lt;pieterh&gt;       I&#8217;m not sure the PHP binding handles 2.1 even...
| [Tuesday 22 February 2011] [06:51:07] &lt;ianbarber&gt;     yeah, i was just making a note I should check the PHP ones
| [Tuesday 22 February 2011] [06:51:36] &lt;ianbarber&gt;     it&#8217;s up to date as far as I know, I&#8217;ve been mostly using it against 2.1.0
| [Tuesday 22 February 2011] [06:51:43] &lt;stimpie&gt;       pieterh, ok clear enough.
| [Tuesday 22 February 2011] [06:51:45] &lt;pieterh&gt;       nice!
| [Tuesday 22 February 2011] [06:51:47] &lt;pieterh&gt;       hopefully these shifts will become rarer and rarer
| [Tuesday 22 February 2011] [06:52:15] &lt;pieterh&gt;       stimpie: there are lots of reusable patterns we can make on top of 0MQ, Ch4 is covering some of the reliability ones
| [Tuesday 22 February 2011] [06:52:28] &lt;pieterh&gt;       I think giving them names makes them easier to understand and reuse
| [Tuesday 22 February 2011] [06:54:27] &lt;stimpie&gt;       They are interesting patterns but it confuses me with what the scope of the zeromq project is
| [Tuesday 22 February 2011] [06:55:22] &lt;private_meta&gt;  hmm... I&#8217;ve been told that the c++ version of zmq uses void pointers because you can send something OTHER than char pointers as well, yet for the python version you can pretty much send a standard string in the send function. Doesn&#8217;t that mean that this gives c++ functionality you can&#8217;t capture with a similar python implementation?
| [Tuesday 22 February 2011] [06:57:30] &lt;stimpie&gt;       private_meta, the message content is up to the client. You could also serialize java objects which are pretty useless in a c++ client.
| [Tuesday 22 February 2011] [06:58:32] &lt;private_meta&gt;  Yeah, but it looks to me that for the python interface, in case I don&#8217;t misunderstand it, the message content is narrowed down to strings
| [Tuesday 22 February 2011] [06:59:28] &lt;ianbarber&gt;     private_meta: underneath it&#8217;s just a chunk of bytes - I would imagine that there is a pack function or similar that can pack anything into a string for python?
| [Tuesday 22 February 2011] [07:00:42] &lt;private_meta&gt;  I don&#8217;t know, it&#8217;s just that the send interface for python looks so convenient while with c++ you have to bitch around with zmq::message_t where you have to use memcpy or message_t.rebuild to get a simple string into a message
| [Tuesday 22 February 2011] [07:02:39] &lt;ianbarber&gt;     hmm, for C there&#8217;s the little zhelpers script pieterh uses that provides some handy helper functions to hide some of that stuff, i don&#8217;t know if there&#8217;s a C++ equivalent
| [Tuesday 22 February 2011] [07:03:05] &lt;pieterh&gt;       stimpie: I&#8217;ll make this clear in the text, thanks for pointing that out
| [Tuesday 22 February 2011] [07:04:00] &lt;pieterh&gt;       ianbarber: yes, some kind person made zhelpers.hpp
| [Tuesday 22 February 2011] [07:05:02] &lt;pieterh&gt;       private_meta: feel free to translate the zmsg code from C to C++, it&#8217;ll give you what you want
| [Tuesday 22 February 2011] [07:06:01] &lt;private_meta&gt;  pieterh: uhm... it doesn&#8217;t exist yte?
| [Tuesday 22 February 2011] [07:06:02] &lt;private_meta&gt;  <em>yet?
| [Tuesday 22 February 2011] [07:06:37] &lt;pieterh&gt;       private_meta: the feeling of pride and accomplishment you&#8217;ll feel as you make it... will be better than steak salad and fries
| [Tuesday 22 February 2011] [07:06:58] &lt;private_meta&gt;  Well, not that hard, I don&#8217;t quite like steak
| [Tuesday 22 February 2011] [07:07:10] &lt;pieterh&gt;       even better then... :-)
| [Tuesday 22 February 2011] [07:07:30] &lt;pieterh&gt;       general rule with 0MQ is, if there&#8217;s something you think could work better, make it happen
| [Tuesday 22 February 2011] [07:07:53] &lt;pieterh&gt;       you can take the C code and wrap it as C++ very easily IMO
| [Tuesday 22 February 2011] [07:07:55] &lt;private_meta&gt;  I wouldn&#8217;t know how
| [Tuesday 22 February 2011] [07:08:09] &lt;pieterh&gt;       you are working in what language?
| [Tuesday 22 February 2011] [07:08:18] &lt;private_meta&gt;  C++
| [Tuesday 22 February 2011] [07:08:58] &lt;pieterh&gt;       did you read the zmsg.c code yet?
| [Tuesday 22 February 2011] [07:10:34] &lt;private_meta&gt;  nope
| [Tuesday 22 February 2011] [07:10:58] &lt;private_meta&gt;  Well, isn&#8217;t there a zmsg.cpp already?
| [Tuesday 22 February 2011] [07:12:07] &lt;pieterh&gt;       private_meta: please read both those files, then come back...
| [Tuesday 22 February 2011] [07:13:44] &lt;pieterh&gt;       you have three choices, when it comes to getting functionality in 0MQ (or any software)
| [Tuesday 22 February 2011] [07:13:48] &lt;pieterh&gt;       1. pay for it and get it soon
| [Tuesday 22 February 2011] [07:14:00] &lt;private_meta&gt;  2. don&#8217;t pay and wait
| [Tuesday 22 February 2011] [07:14:02] &lt;pieterh&gt;       2. wait until someone else makes it and shares it, then get it for free
| [Tuesday 22 February 2011] [07:14:02] &lt;private_meta&gt;  3. do it yourself
| [Tuesday 22 February 2011] [07:14:08] &lt;pieterh&gt;       exactly
| [Tuesday 22 February 2011] [07:14:14] &lt;pieterh&gt;       :-)
| [Tuesday 22 February 2011] [07:14:31] &lt;pieterh&gt;       in this case I&#8217;ve made it really, really easy for you...
| [Tuesday 22 February 2011] [07:14:43] &lt;private_meta&gt;  seen an interesting venn diagram for that
| [Tuesday 22 February 2011] [07:14:49] &lt;pieterh&gt;       since you can literally take the C code (already designed as a class), wrap it with (I&#8217;d guess 20 lines of C++ code)
| [Tuesday 22 February 2011] [07:14:55] &lt;pieterh&gt;       and get what you need
| [Tuesday 22 February 2011] [07:14:56] &lt;stimpie&gt;       the file: examples/Java/psenvsub.java contains some garbage at the end
| [Tuesday 22 February 2011] [07:15:22] &lt;pieterh&gt;       stimpie: indeed, it seems chopped off...
| [Tuesday 22 February 2011] [07:16:53] &lt;pieterh&gt;       stimpie: ah, I see what you mean
| [Tuesday 22 February 2011] [07:17:02] &lt;pieterh&gt;       ok, fixing that, I found the original contribution
| [Tuesday 22 February 2011] [07:17:40] &lt;pieterh&gt;       stimpie: fixed, thanks!
| [Tuesday 22 February 2011] [07:17:43] &lt;stimpie&gt;       np
| [Tuesday 22 February 2011] [07:26:24] &lt;private_meta&gt;  just out of curiosity, don&#8217;t have time at the moment, let&#8217;s say i want to improve zmq by adding convenience methods for send/recv for c++, let&#8217;s say for strings, would that be worth considering it?
| [Tuesday 22 February 2011] [07:28:07] &lt;stimpie&gt;       private_meta, what is wrong with send(msg.toBytes())?
| [Tuesday 22 February 2011] [07:28:08] &lt;pieterh&gt;       private_meta: it would not go into the core
| [Tuesday 22 February 2011] [07:28:44] &lt;pieterh&gt;       private_meta: if all you want is send/recv string, it&#8217;s already in zhelpers.hpp
| [Tuesday 22 February 2011] [07:29:43] &lt;pieterh&gt;       //  Convert string to 0MQ string and send to socket
| [Tuesday 22 February 2011] [07:29:43] &lt;pieterh&gt;       static bool
| [Tuesday 22 February 2011] [07:29:43] &lt;pieterh&gt;       s_send (zmq::socket_t &amp; socket, const std::string &amp; string) {
| [Tuesday 22 February 2011] [07:29:43] &lt;pieterh&gt;           zmq::message_t message(string.size());
| [Tuesday 22 February 2011] [07:29:43] &lt;pieterh&gt;           memcpy(message.data(), string.data(), string.size());
| [Tuesday 22 February 2011] [07:29:44] &lt;pieterh&gt;           bool rc = socket.send(message);
| [Tuesday 22 February 2011] [07:29:44] &lt;pieterh&gt;           return (rc);
| [Tuesday 22 February 2011] [07:29:45] &lt;pieterh&gt;       }
| [Tuesday 22 February 2011] [07:30:18] &lt;private_meta&gt;  oh, I&#8217;ve already seen that. By the way, why do you use memcpy there and not rebuild?
| [Tuesday 22 February 2011] [07:38:34] &lt;private_meta&gt;  argh... the disabled copy constructor is annoying, I can&#8217;t even return a message_t object from a function
| [Tuesday 22 February 2011] [08:08:45] &lt;pieterh&gt;       private_meta: that code was written by Olivier Chamoux afair
| [Tuesday 22 February 2011] [08:09:46] &lt;private_meta&gt;  The example code carries that name as well
| [Tuesday 22 February 2011] [08:10:35] &lt;private_meta&gt;  According to a comment in the source it&#8217;s to avoid &#8220;shared messages&#8221;, which seems to be a somewhat valid argument if you tried to use it for that, but it&#8217;s annoying if you want to return a message by a function
| [Tuesday 22 February 2011] [08:11:11] &lt;pieterh&gt;       sure
| [Tuesday 22 February 2011] [10:24:33] &lt;CIA-21&gt;        zeromq2: 03Martin Sustrik 07master * r43e8868 10/ (24 files):
| [Tuesday 22 February 2011] [10:24:33] &lt;CIA-21&gt;        zeromq2: Added explicit error message in case of memory exhaustion
| [Tuesday 22 February 2011] [10:24:33] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Martin Sustrik &lt;sustrik&#64;250bpm.com&gt; - http://bit.ly/eVM1AS
| [Tuesday 22 February 2011] [11:00:38] &lt;amacleod&gt;      Are there any plans to have language-native ZMQ libraries, rather than wrapping C++ libs?
| [Tuesday 22 February 2011] [11:01:25] &lt;amacleod&gt;      I guess maintaining parallel language-native libs would be a much bigger maintenance load.
| [Tuesday 22 February 2011] [11:08:57] &lt;pieterh&gt;       amacleod: it&#8217;s a lot of work unless there&#8217;s a real payoff, e.g. languages that can&#8217;t link to C++
| [Tuesday 22 February 2011] [11:09:16] &lt;pieterh&gt;       you would not reach a similar level of performance and functionality
| [Tuesday 22 February 2011] [11:09:36] &lt;pieterh&gt;       it&#8217;s been discussed, we would need to document the wire level protocols properly first
| [Tuesday 22 February 2011] [11:10:07] &lt;amacleod&gt;      pieterh, hm, yeah, good point.  And I guess the hassle of linking, for example, JNI libraries in Java, is pretty much a one-time configuration thing.
| [Tuesday 22 February 2011] [11:10:23] &lt;pieterh&gt;       plus you always get the latest/greatest 0MQ, etc.
| [Tuesday 22 February 2011] [11:10:24] &lt;amacleod&gt;      pieterh, well, documenting the wire level protocols sounds like a good idea anyway. :-D
| [Tuesday 22 February 2011] [11:10:38] &lt;pieterh&gt;       yes, when someone actually wants it... :-)
| [Tuesday 22 February 2011] [11:11:01] &lt;amacleod&gt;      pieterh, by the way, where can I look at the new router/dealer example you made?
| [Tuesday 22 February 2011] [11:11:29] &lt;pieterh&gt;       amacleod: hang on, I&#8217;ll rebuild the Guide...
| [Tuesday 22 February 2011] [11:11:36] &lt;amacleod&gt;      Thanks.
| [Tuesday 22 February 2011] [11:16:05] &lt;pieterh&gt;       hmm, Wikidot seems to cache the old text for a while...
| [Tuesday 22 February 2011] [11:17:06] &lt;pieterh&gt;       oops, error in my upload robot, it&#8217;s sending the content to the wrong place...
| [Tuesday 22 February 2011] [11:17:32] &lt;amacleod&gt;      Silly robot.
| [Tuesday 22 February 2011] [11:18:21] &lt;pieterh&gt;       ok, here: http://zguide.zeromq.org/chapter:all#toc51
| [Tuesday 22 February 2011] [11:19:04] &lt;ljackson&gt;      pieterh, got that code working last night, thx for your help
| [Tuesday 22 February 2011] [11:19:18] &lt;pieterh&gt;       ljackson: np
| [Tuesday 22 February 2011] [11:19:30] &lt;ljackson&gt;      pieterh, silly mistake of not de-ref on the work/clients sockets before sending to the queue device
| [Tuesday 22 February 2011] [11:19:39] &lt;ljackson&gt;      odd that the api took that tho
| [Tuesday 22 February 2011] [11:20:02] &lt;pieterh&gt;       ljackson: what language binding?
| [Tuesday 22 February 2011] [11:20:06] &lt;ljackson&gt;      who maintains the c++ api for zeromq ? Maybe I could extend to accept socket pointers and ask for a pull request ?
| [Tuesday 22 February 2011] [11:20:21] &lt;pieterh&gt;       ah, yes, I&#8217;m sure the maintainers will welcome contributions
| [Tuesday 22 February 2011] [11:20:30] &lt;amacleod&gt;      &#8220;Worked Example: Inter-Broker Routing&#8221;, right?
| [Tuesday 22 February 2011] [11:20:42] &lt;pieterh&gt;       amacleod: &#8220;Asynchronous Client-Server&#8221;...
| [Tuesday 22 February 2011] [11:20:52] &lt;pieterh&gt;       reload that page
| [Tuesday 22 February 2011] [11:21:19] &lt;amacleod&gt;      Ah, ok.
| [Tuesday 22 February 2011] [11:21:41] &lt;amacleod&gt;      Looks like it renders as #toc50 for me.
| [Tuesday 22 February 2011] [11:22:17] &lt;pieterh&gt;       caching issue perhaps
| [Tuesday 22 February 2011] [11:22:25] &lt;amacleod&gt;      Yeah.. I think I&#8217;m still getting the old version.
| [Tuesday 22 February 2011] [11:22:41] &lt;pieterh&gt;       do you see figure 46 &#8220;Asynchronous Client Server&#8221; ?
| [Tuesday 22 February 2011] [11:22:48] &lt;amacleod&gt;      Yeah.. I see the diagram.
| [Tuesday 22 February 2011] [11:22:54] &lt;pieterh&gt;       ok, then that&#8217;s all good
| [Tuesday 22 February 2011] [11:23:34] &lt;amacleod&gt;      The next code sample is router-to-router, though...
| [Tuesday 22 February 2011] [11:24:08] &lt;pieterh&gt;       does it not show the asyncsrv example?
| [Tuesday 22 February 2011] [11:24:29] &lt;pieterh&gt;       ah, diagrams are accurate but text is out of date...
| [Tuesday 22 February 2011] [11:24:34] &lt;pieterh&gt;       reload, reload, reload!
| [Tuesday 22 February 2011] [11:24:41] &lt;amacleod&gt;      Nope.  It&#8217;s a little incongruous, actually... :)
| [Tuesday 22 February 2011] [11:24:49] &lt;amacleod&gt;      aha.. there it is!
| [Tuesday 22 February 2011] [11:25:28] &lt;pieterh&gt;       enjoy, amacleod, and let me know if it&#8217;s helpful
| [Tuesday 22 February 2011] [11:25:39] &lt;pieterh&gt;       it was quite fun making this pattern
| [Tuesday 22 February 2011] [11:25:43] &lt;amacleod&gt;      Sure thing.  :)
| [Tuesday 22 February 2011] [11:27:44] &lt;amacleod&gt;      Could the client_task use blocking recv rather than polling, or is the polling crucial?
| [Tuesday 22 February 2011] [11:28:29] &lt;pieterh&gt;       amacleod: if you want to send a mix of requests and replies, it can&#8217;t block on recv
| [Tuesday 22 February 2011] [11:28:48] &lt;pieterh&gt;       you can&#8217;t have a separate thread doing the receiving
| [Tuesday 22 February 2011] [11:29:08] &lt;pieterh&gt;       it can use a simpler poll than the one I made, that&#8217;s to ensure requests are sent on time
| [Tuesday 22 February 2011] [11:30:14] &lt;pieterh&gt;       brb, lunch...
| [Tuesday 22 February 2011] [11:34:55] &lt;CIA-21&gt;        zeromq2: 03Martin Sustrik 07sub-forward * r977f5b7 10/ (5 files):
| [Tuesday 22 February 2011] [11:34:55] &lt;CIA-21&gt;        zeromq2: Trie-based matcher (ptrie_t) implemented.
| [Tuesday 22 February 2011] [11:34:55] &lt;CIA-21&gt;        zeromq2: Signed-off-by: Martin Sustrik &lt;sustrik&#64;250bpm.com&gt; - http://bit.ly/gSZiWK
| [Tuesday 22 February 2011] [12:31:46] &lt;cremes&gt;        is there any technique for detecting a slow subscriber? e.g. check queue sizes on netstat or something?
| [Tuesday 22 February 2011] [12:32:12] &lt;cremes&gt;        i have a pub socket that has a dozen or so subscribers; my memory usage slowly climbs even though i don&#8217;t have any leaks
| [Tuesday 22 February 2011] [12:32:40] &lt;cremes&gt;        i now suspect a slow subscriber isn&#8217;t pulling stuff off the queue quickly enough and it&#8217;s backing up at the publisher (HWM is default)
| [Tuesday 22 February 2011] [12:44:55] &lt;pieterh&gt;       cremes: there&#8217;s zmq_getsockopt (..ZMQ_BACKLOG)
| [Tuesday 22 February 2011] [12:46:15] &lt;cremes&gt;        is that really appropriate? that just controls the queue of initial connects/binds
| [Tuesday 22 February 2011] [12:46:31] &lt;cremes&gt;        it doesn&#8217;t have anything to do with message queue length, right?
| [Tuesday 22 February 2011] [12:46:37] &lt;pieterh&gt;       oops
| [Tuesday 22 February 2011] [12:46:50] &lt;cremes&gt;        :)
| [Tuesday 22 February 2011] [12:47:22] &lt;pieterh&gt;       so there&#8217;s no way to know what&#8217;s happening at the level of individual subscribers...
| [Tuesday 22 February 2011] [12:47:39] &lt;pieterh&gt;       do you number your messages?
| [Tuesday 22 February 2011] [12:47:52] &lt;cremes&gt;        no but they do get a timestamp
| [Tuesday 22 February 2011] [12:47:58] &lt;nooob&gt; you might want to setup a connection from the subscriber back to the sender
| [Tuesday 22 February 2011] [12:48:00] &lt;cremes&gt;        so they are sequential
| [Tuesday 22 February 2011] [12:48:01] &lt;pieterh&gt;       ok, even better
| [Tuesday 22 February 2011] [12:48:15] &lt;pieterh&gt;       in the subscriber, check how old incoming messages are
| [Tuesday 22 February 2011] [12:48:28] &lt;pieterh&gt;       if you exceed X seconds, send an alert to your system console
| [Tuesday 22 February 2011] [12:48:29] &lt;nooob&gt; there was a pattern like that in the guide
| [Tuesday 22 February 2011] [12:48:39] &lt;cremes&gt;        hmmm, that doesn&#8217;t seem like it would help unless i misunderstand how the pub socket queueing works
| [Tuesday 22 February 2011] [12:48:59] &lt;cremes&gt;        there is a separate outgoing queue for each subscriber on a pub socket, yes?
| [Tuesday 22 February 2011] [12:49:12] &lt;pieterh&gt;       cremes: if your pubsub system is stable, subscribers will get messages with predictably low delays
| [Tuesday 22 February 2011] [12:49:13] &lt;cremes&gt;        so fast subscribers would have a small or empty queue while my slow guy would have a large queue
| [Tuesday 22 February 2011] [12:49:30] &lt;pieterh&gt;       it&#8217;s running over TCP?
| [Tuesday 22 February 2011] [12:49:33] &lt;cremes&gt;        yes
| [Tuesday 22 February 2011] [12:49:43] &lt;pieterh&gt;       even over PGM...
| [Tuesday 22 February 2011] [12:49:53] &lt;pieterh&gt;       slow subscribers will by definition :-) get messages &#8216;too slowly&#8217;
| [Tuesday 22 February 2011] [12:50:05] &lt;pieterh&gt;       timestamp checking should do it
| [Tuesday 22 February 2011] [12:50:19] &lt;cremes&gt;        i will check that out
| [Tuesday 22 February 2011] [12:50:35] &lt;pieterh&gt;       i like the pattern, will try a quick implementation
| [Tuesday 22 February 2011] [13:12:09] &lt;cremes&gt;        pieterh: question...
| [Tuesday 22 February 2011] [13:12:16] &lt;pieterh&gt;       cremes: shoot...
| [Tuesday 22 February 2011] [13:12:28] &lt;cremes&gt;        i wrote an example where i have a single publisher that connects to a forwarder device
| [Tuesday 22 February 2011] [13:12:32] &lt;cremes&gt;        it publishes as fast as it can
| [Tuesday 22 February 2011] [13:12:41] &lt;cremes&gt;        there are no subscribers connected to the device
| [Tuesday 22 February 2011] [13:12:51] &lt;cremes&gt;        i see memory growing rapidly; is that expected?
| [Tuesday 22 February 2011] [13:12:58] &lt;pieterh&gt;       depends...
| [Tuesday 22 February 2011] [13:13:04] &lt;pieterh&gt;       running on the same box?
| [Tuesday 22 February 2011] [13:13:09] &lt;cremes&gt;        yeah
| [Tuesday 22 February 2011] [13:13:13] &lt;pieterh&gt;       one core?
| [Tuesday 22 February 2011] [13:13:25] &lt;cremes&gt;        dual quad, 16gb memory... beefy box
| [Tuesday 22 February 2011] [13:13:34] &lt;pieterh&gt;       no, then it&#8217;s not expected
| [Tuesday 22 February 2011] [13:13:43] &lt;cremes&gt;        ok
| [Tuesday 22 February 2011] [13:13:49] &lt;pieterh&gt;       is the memory growing in the publisher or in the forwarder?
| [Tuesday 22 February 2011] [13:13:52] &lt;cremes&gt;        i&#8217;m going to try and replicate this with the C forwarder
| [Tuesday 22 February 2011] [13:13:57] &lt;cremes&gt;        it grows in the forwarder
| [Tuesday 22 February 2011] [13:14:10] &lt;pieterh&gt;       how about CPU usage?
| [Tuesday 22 February 2011] [13:14:21] &lt;cremes&gt;        high
| [Tuesday 22 February 2011] [13:14:25] &lt;pieterh&gt;       ok, try this
| [Tuesday 22 February 2011] [13:14:34] &lt;pieterh&gt;       - publish 20M messages, then pause for 10 seconds
| [Tuesday 22 February 2011] [13:14:36] &lt;pieterh&gt;       - repeat
| [Tuesday 22 February 2011] [13:14:46] &lt;cremes&gt;        ok
| [Tuesday 22 February 2011] [13:14:48] &lt;pieterh&gt;       see if memory usage remains high during that pause
| [Tuesday 22 February 2011] [13:14:56] &lt;pieterh&gt;       if so, forwarder is broken somehow
| [Tuesday 22 February 2011] [13:15:10] &lt;pieterh&gt;       if it comes down, it&#8217;s just queuing bizarreness
| [Tuesday 22 February 2011] [13:28:07] &lt;sustrik&gt;       with a single incoming streams and many outgoing streams you would expect the latter to be bandwidth-bound and thus slower than the former
| [Tuesday 22 February 2011] [13:28:38] &lt;sustrik&gt;       consequently, in congestion situations you should expect messages queueing in the forwarder
| [Tuesday 22 February 2011] [13:38:42] &lt;pieterh&gt;       sustrik: yes, but here there are no subscribers on the forwarder...
| [Tuesday 22 February 2011] [13:39:14] &lt;sustrik_&gt;      ah
| [Tuesday 22 February 2011] [13:40:28] &lt;sustrik_&gt;      i&#8217;ve missed that
| [Tuesday 22 February 2011] [13:41:26] &lt;sustrik_&gt;      then the queue&#8217;s main loop must be slower then message receiving in its SUB socket
| [Tuesday 22 February 2011] [13:41:38] &lt;sustrik_&gt;      in any case, when doing congestion tests
| [Tuesday 22 February 2011] [13:41:40] &lt;sustrik_&gt;      use hwm
| [Tuesday 22 February 2011] [13:41:55] &lt;sustrik_&gt;      otherwise you are inevitable going to run out of memory
| [Tuesday 22 February 2011] [13:52:00] &lt;pieterh&gt;       hmm, forwarder should run at least as fast as publisher in this case...
| [Tuesday 22 February 2011] [13:52:34] &lt;pieterh&gt;       let&#8217;s see if cremes comes back with more data
| [Tuesday 22 February 2011] [13:52:45] &lt;cremes&gt;        when there are no subscribers attached to the forwarder, calls to zmq_send() should just close the msg and drop it, right?
| [Tuesday 22 February 2011] [13:53:38] &lt;pieterh&gt;       cremes: ack
| [Tuesday 22 February 2011] [13:53:56] &lt;pieterh&gt;       did you try that run/pause/run/pause ?
| [Tuesday 22 February 2011] [13:55:39] &lt;cremes&gt;        yes, the memory did not shrink
| [Tuesday 22 February 2011] [13:56:25] &lt;pieterh&gt;       did _not_ shrink?
| [Tuesday 22 February 2011] [13:56:28] &lt;pieterh&gt;       then it&#8217;s a real leak
| [Tuesday 22 February 2011] [13:56:55] &lt;cremes&gt;        i need to try this with the C forwarder device that comes with the lib
| [Tuesday 22 February 2011] [13:57:01] &lt;cremes&gt;        and see if it behaves the same
| [Tuesday 22 February 2011] [13:57:05] &lt;pieterh&gt;       yes
| [Tuesday 22 February 2011] [13:57:19] &lt;cremes&gt;        i&#8217;ll open a ticket if i see it replicated
| [Tuesday 22 February 2011] [13:57:22] &lt;pieterh&gt;       i just reviewed the code for that, there is zero chance it leaks memory
| [Tuesday 22 February 2011] [13:57:32] &lt;cremes&gt;        right, it&#8217;s so simple there is *no</em> way
| [Tuesday 22 February 2011] [13:57:36] &lt;cremes&gt;        &lt;sigh&gt;
| [Tuesday 22 February 2011] [13:57:57] &lt;pieterh&gt;       if there&#8217;s a leak it&#8217;s either in the pub socket (unlikely), or the binding (possible), or it&#8217;s a heap artifact (plausible)
| [Tuesday 22 February 2011] [13:58:10] &lt;pieterh&gt;       sometimes the heap does not shrink immediately when memory is freed
| [Tuesday 22 February 2011] [13:58:45] &lt;pieterh&gt;       try setting a HWM of, say, 100K on the publisher and see what effect that has
| [Tuesday 22 February 2011] [13:58:53] &lt;pieterh&gt;       s/publisher/forwarder/ sorry
| [Tuesday 22 February 2011] [13:59:06] &lt;pieterh&gt;       on the frontend socket, initially
| [Tuesday 22 February 2011] [13:59:11] &lt;cremes&gt;        yes, i&#8217;ll keep at it
| [Tuesday 22 February 2011] [14:05:59] &lt;amacleod&gt;      pieterh, my problem from yesterday does seem to be a threading issue.  When I changed my test harness (which simulates a client) to use a separate context from the server, the messages got through correctly in both directions.
| [Tuesday 22 February 2011] [14:06:26] &lt;amacleod&gt;      However, now I&#8217;m seeing &#8220;Assertion failed: pending_term_acks&#8221; when closing the socket.
| [Tuesday 22 February 2011] [14:06:27] &lt;pieterh&gt;       amacleod: ah, good... I&#8217;ve also been using separate contexts for each &#8216;task&#8217; when it simulates a separate process
| [Tuesday 22 February 2011] [14:06:48] &lt;pieterh&gt;       that&#8217;s not a 0MQ assertion...
| [Tuesday 22 February 2011] [14:07:04] &lt;amacleod&gt;      It lists it as socket_base.cpp:690
| [Tuesday 22 February 2011] [14:07:18] &lt;amacleod&gt;      It&#8217;s hard for me to debug, because it doesn&#8217;t generate a Java exception, it just kills the process.
| [Tuesday 22 February 2011] [14:07:54] &lt;pieterh&gt;       what version of 0MQ are you on?
| [Tuesday 22 February 2011] [14:07:56] &lt;amacleod&gt;      Might be jzmq, hmm..
| [Tuesday 22 February 2011] [14:07:58] &lt;amacleod&gt;      2.0.10
| [Tuesday 22 February 2011] [14:08:08] &lt;pieterh&gt;       any problem upgrading to master?
| [Tuesday 22 February 2011] [14:08:19] &lt;pieterh&gt;       there are a lot of fixes since 2.0.10
| [Tuesday 22 February 2011] [14:09:28] &lt;pieterh&gt;       sustrik: do you keep any log of major changes made apart from the git commit history?
| [Tuesday 22 February 2011] [14:09:37] &lt;amacleod&gt;      Depends&#8211;how stable is 2.1?  I think we chose 2.0.10 because we wanted not to use the &#8220;development&#8221; branch.
| [Tuesday 22 February 2011] [14:10:21] &lt;pieterh&gt;       amacleod: for various reasons, the git master is significantly more stable than the &#8216;stable&#8217;
| [Tuesday 22 February 2011] [14:10:31] &lt;pieterh&gt;       ... than the &#8216;stable&#8217; 2.0.10 release
| [Tuesday 22 February 2011] [14:10:58] &lt;amacleod&gt;      Hmm. :)  Might be worth the switch, then.
| [Tuesday 22 February 2011] [14:11:00] &lt;<a href="#id2783"><span class="problematic" id="id2784">sustrik_</span></a>&gt;      btw, the assertion is in code that was complately rewritten in 2.1
| [Tuesday 22 February 2011] [14:11:09] &lt;amacleod&gt;      sustrik, good to know.
| [Tuesday 22 February 2011] [14:11:10] &lt;pieterh&gt;       we&#8217;re in the slow process of making a formal release for 2.1.11
| [Tuesday 22 February 2011] [14:11:28] &lt;pieterh&gt;       sustrik: the one thing that will be problematic is making release notes
| [Tuesday 22 February 2011] [14:11:30] &lt;<a href="#id2785"><span class="problematic" id="id2786">sustrik_</span></a>&gt;      pieterh: what log?
| [Tuesday 22 February 2011] [14:11:41] &lt;<a href="#id2787"><span class="problematic" id="id2788">sustrik_</span></a>&gt;      why so?
| [Tuesday 22 February 2011] [14:11:41] &lt;pieterh&gt;       i was afraid of that...
| [Tuesday 22 February 2011] [14:11:44] &lt;<a href="#id2789"><span class="problematic" id="id2790">sustrik_</span></a>&gt;      it&#8217;s automatic
| [Tuesday 22 February 2011] [14:12:02] &lt;pieterh&gt;       what&#8217;s automatic is a dump of every commit message
| [Tuesday 22 February 2011] [14:12:07] &lt;<a href="#id2791"><span class="problematic" id="id2792">sustrik_</span></a>&gt;      yup
| [Tuesday 22 February 2011] [14:12:09] &lt;amacleod&gt;      <a class="reference external" href="https://github.com/zeromq/zeromq2/raw/master/NEWS">https://github.com/zeromq/zeromq2/raw/master/NEWS</a>
| [Tuesday 22 February 2011] [14:12:11] &lt;pieterh&gt;       that is not release notes
| [Tuesday 22 February 2011] [14:12:27] &lt;pieterh&gt;       nope, NEWS is painfully made by hand
| [Tuesday 22 February 2011] [14:12:29] &lt;<a href="#id2793"><span class="problematic" id="id2794">sustrik_</span></a>&gt;      ah, i&#8217;ll go through the commit messages and write the release notes
| [Tuesday 22 February 2011] [14:12:31] &lt;<a href="#id2795"><span class="problematic" id="id2796">sustrik_</span></a>&gt;      not a problem
| [Tuesday 22 February 2011] [14:12:36] &lt;pieterh&gt;       excellent...!
| [Tuesday 22 February 2011] [14:12:50] &lt;pieterh&gt;       then IMO we&#8217;re ready to break off the branch...
| [Tuesday 22 February 2011] [14:13:02] &lt;pieterh&gt;       there were zero issues porting the Guide examples to 2.1.11
| [Tuesday 22 February 2011] [14:13:07] &lt;<a href="#id2797"><span class="problematic" id="id2798">sustrik_</span></a>&gt;      there are some pgm problems being experienced with head currently
| [Tuesday 22 February 2011] [14:13:32] &lt;pieterh&gt;       that&#8217;s ok, we&#8217;ll have at least a couple of weeks to stabilize
| [Tuesday 22 February 2011] [14:13:48] &lt;amacleod&gt;      In the mean time, if we assume I cannot presently upgrade from 2.0.10, any suggestion on where I should look to prevent this assertion from failing?
| [Tuesday 22 February 2011] [14:13:56] &lt;pieterh&gt;       the key now IMO is to get a formal package out so folks like amacleod use the current master, not old code
| [Tuesday 22 February 2011] [14:14:57] &lt;pieterh&gt;       <a href="#id2799"><span class="problematic" id="id2800">sustrik_</span></a>, so I&#8217;m going to create a separate git but this is somewhat experimental
| [Tuesday 22 February 2011] [14:14:58] &lt;amacleod&gt;      As far as I know, jzmq is set up to handle both 2.0.10 and 2.1.x, so upgrading shouldn&#8217;t be too painful.
| [Tuesday 22 February 2011] [14:15:10] &lt;<a href="#id2801"><span class="problematic" id="id2802">sustrik_</span></a>&gt;      the only thing preventing branching off right now is the pgm problem
| [Tuesday 22 February 2011] [14:15:16] &lt;pieterh&gt;       amacleod: at least, try on the 2.1.x master so you know whether it works better or not
| [Tuesday 22 February 2011] [14:15:32] &lt;<a href="#id2803"><span class="problematic" id="id2804">sustrik_</span></a>&gt;      i can&#8217;t help with that :|
| [Tuesday 22 February 2011] [14:15:49] &lt;<a href="#id2805"><span class="problematic" id="id2806">sustrik_</span></a>&gt;      so we&#8217;ll have to wait while someone fixes it
| [Tuesday 22 February 2011] [14:15:54] &lt;pieterh&gt;       <a href="#id2807"><span class="problematic" id="id2808">sustrik_</span></a> steve&#8217;s traveling right now
| [Tuesday 22 February 2011] [14:16:01] &lt;pieterh&gt;       we&#8217;ll pipeline it all
| [Tuesday 22 February 2011] [14:16:10] &lt;<a href="#id2809"><span class="problematic" id="id2810">sustrik_</span></a>&gt;      or, alternatively, you can branch from a historic version
| [Tuesday 22 February 2011] [14:16:11] &lt;pieterh&gt;       pgm fixes can come in after we branch
| [Tuesday 22 February 2011] [14:16:24] &lt;pieterh&gt;       it&#8217;s good to have known issues so we can prove that the process works
| [Tuesday 22 February 2011] [14:16:29] &lt;<a href="#id2811"><span class="problematic" id="id2812">sustrik_</span></a>&gt;      right, you can branch a backport the ix
| [Tuesday 22 February 2011] [14:16:31] &lt;<a href="#id2813"><span class="problematic" id="id2814">sustrik_</span></a>&gt;      fix
| [Tuesday 22 February 2011] [14:16:31] &lt;pieterh&gt;       yes
| [Tuesday 22 February 2011] [14:17:04] &lt;pieterh&gt;       do you want to push any code before I clone the repo?
| [Tuesday 22 February 2011] [14:17:11] &lt;<a href="#id2815"><span class="problematic" id="id2816">sustrik_</span></a>&gt;      no
| [Tuesday 22 February 2011] [14:17:14] &lt;<a href="#id2817"><span class="problematic" id="id2818">sustrik_</span></a>&gt;      do it now
| [Tuesday 22 February 2011] [14:17:18] &lt;pieterh&gt;       okay... going for it :-)
| [Tuesday 22 February 2011] [14:17:29] &lt;<a href="#id2819"><span class="problematic" id="id2820">sustrik_</span></a>&gt;      amacleod: upgrading should not be painful
| [Tuesday 22 February 2011] [14:17:50] &lt;<a href="#id2821"><span class="problematic" id="id2822">sustrik_</span></a>&gt;      trying to fix the problem in 2.0.10 is going to be painful
| [Tuesday 22 February 2011] [14:18:00] &lt;amacleod&gt;      Hm, I think you are right.
| [Tuesday 22 February 2011] [14:18:09] &lt;<a href="#id2823"><span class="problematic" id="id2824">sustrik_</span></a>&gt;      it&#8217;s a problem with shutdown subsystem
| [Tuesday 22 February 2011] [14:18:18] &lt;<a href="#id2825"><span class="problematic" id="id2826">sustrik_</span></a>&gt;      which was pretty creaky in 2.0.x
| [Tuesday 22 February 2011] [14:18:39] &lt;<a href="#id2827"><span class="problematic" id="id2828">sustrik_</span></a>&gt;      it was one of the major reasons for making 2.1
| [Tuesday 22 February 2011] [14:18:50] &lt;amacleod&gt;      So, which version should I get?  The 2.1.0 package from the front page?
| [Tuesday 22 February 2011] [14:19:03] &lt;<a href="#id2829"><span class="problematic" id="id2830">sustrik_</span></a>&gt;      yes
| [Tuesday 22 February 2011] [14:24:11] &lt;pieterh&gt;       hmm, anyone know how to clone a github repository and _keep_ it in the same organization?
| [Tuesday 22 February 2011] [14:24:28] &lt;pieterh&gt;       I&#8217;m sure I&#8217;m missing something obvious...
| [Tuesday 22 February 2011] [14:33:21] &lt;pieterh&gt;       hmm, git push -u, obviously... duh
| [Tuesday 22 February 2011] [14:40:19] &lt;pieterh&gt;       <a href="#id2831"><span class="problematic" id="id2832">sustrik_</span></a>: okaaay, I think that&#8217;s done... we now have <a class="reference external" href="http://github.com/zeromq/zeromq2-1">http://github.com/zeromq/zeromq2-1</a>
| [Tuesday 22 February 2011] [14:40:42] &lt;pieterh&gt;       just the master branch and no tracking between the two gits, I hope
| [Tuesday 22 February 2011] [14:43:26] &lt;pieterh&gt;       <a href="#id2833"><span class="problematic" id="id2834">sustrik_</span></a>: next step is to make release notes (you) and then packages (me)
| [Tuesday 22 February 2011] [14:49:05] &lt;<a href="#id2835"><span class="problematic" id="id2836">sustrik_</span></a>&gt;      ok
| [Tuesday 22 February 2011] [14:49:14] &lt;<a href="#id2837"><span class="problematic" id="id2838">sustrik_</span></a>&gt;      let me see
| [Tuesday 22 February 2011] [14:53:46] &lt;pieterh&gt;       I suggest we edit the NEWS together at <a class="reference external" href="http://piratepad.net/">http://piratepad.net/</a>, then commit to (the real) master
| [Tuesday 22 February 2011] [14:54:03] &lt;sustrik&gt;       yes
| [Tuesday 22 February 2011] [14:54:07] &lt;sustrik&gt;       wait a sec
| [Tuesday 22 February 2011] [14:56:16] &lt;pieterh&gt;       I&#8217;d like to make 2-3 release candidates over 2-3 weeks
| [Tuesday 22 February 2011] [14:56:32] &lt;pieterh&gt;       <a class="reference external" href="http://piratepad.net/dkenb33ThF">http://piratepad.net/dkenb33ThF</a>
| [Tuesday 22 February 2011] [14:57:54] &lt;pieterh&gt;       I think we have enough momentum to get rapid feedback on releases
| [Tuesday 22 February 2011] [14:58:43] &lt;pieterh&gt;       the one problem I see with this approach is we don&#8217;t get a branch for the stable release, automatically, in the real git
| [Tuesday 22 February 2011] [14:59:11] &lt;pieterh&gt;       s/branch/tag/
| [Tuesday 22 February 2011] [14:59:30] &lt;pieterh&gt;       mato&#8217;s going to cut my throat...
| [Tuesday 22 February 2011] [15:05:07] &lt;sustrik&gt;       what&#8217;s the problem?
| [Tuesday 22 February 2011] [15:05:12] &lt;sustrik&gt;       it&#8217;s DCVS
| [Tuesday 22 February 2011] [15:05:29] &lt;sustrik&gt;       so it shouldn&#8217;t matter whether it&#8217;s a branch or a separate repo
| [Tuesday 22 February 2011] [15:05:39] &lt;sustrik&gt;       DVCS*
| [Tuesday 22 February 2011] [15:05:50] &lt;sustrik&gt;       pieterh: still there
| [Tuesday 22 February 2011] [15:05:51] &lt;pieterh&gt;       ok, allow for the fact that any gross git manipulations leave me nervous
| [Tuesday 22 February 2011] [15:05:52] &lt;sustrik&gt;       ?
| [Tuesday 22 February 2011] [15:06:03] &lt;pieterh&gt;       I find the tool 10x too complex and dangerous, so...
| [Tuesday 22 February 2011] [15:06:25] &lt;pieterh&gt;       I&#8217;d much prefer to work with a copy of the repository (not a clone or a fork)
| [Tuesday 22 February 2011] [15:06:40] &lt;pieterh&gt;       advantages: anyone can imitate this, make releases, safely
| [Tuesday 22 February 2011] [15:06:56] &lt;sustrik&gt;       you mean you&#8217;ve created a new repo?
| [Tuesday 22 February 2011] [15:06:59] &lt;pieterh&gt;       yes
| [Tuesday 22 February 2011] [15:07:05] &lt;sustrik&gt;       i.e. deleted the entire history?
| [Tuesday 22 February 2011] [15:07:14] &lt;pieterh&gt;        <a class="reference external" href="http://github.com/zeromq/zeromq2-1">http://github.com/zeromq/zeromq2-1</a>
| [Tuesday 22 February 2011] [15:07:22] &lt;pieterh&gt;       I was able to copy the master branch
| [Tuesday 22 February 2011] [15:07:34] &lt;pieterh&gt;       which is fine for my purposes (stabilization)
| [Tuesday 22 February 2011] [15:07:43] &lt;sustrik&gt;       github seems to be dead
| [Tuesday 22 February 2011] [15:07:48] &lt;pieterh&gt;       it wasn&#8217;t me!!!!!
| [Tuesday 22 February 2011] [15:07:52] &lt;sustrik&gt;       :)))
| [Tuesday 22 February 2011] [15:08:12] &lt;pieterh&gt;       i&#8217;d <em>much</em> prefer to work with readonly access to the real repository
| [Tuesday 22 February 2011] [15:08:42] &lt;sustrik&gt;       let&#8217;s move to piratepad now
| [Tuesday 22 February 2011] [15:08:47] &lt;pieterh&gt;       but problem is, separate repository breaks the neat history of version tags in the real repo
| [Tuesday 22 February 2011] [15:09:02] &lt;pieterh&gt;       piratepad seems unreliable right now...
| [Tuesday 22 February 2011] [15:09:17] &lt;sustrik&gt;       yuck
| [Tuesday 22 February 2011] [15:09:19] &lt;cremes&gt;        ok, i can reproduce the memory &#8220;leak&#8221;; it is somewhat complicated and it&#8217;s not a real leak... it&#8217;s more like a DDOS
| [Tuesday 22 February 2011] [15:09:27] &lt;sustrik&gt;       anyway, there are just 2 items
| [Tuesday 22 February 2011] [15:09:35] &lt;sustrik&gt;       ZMQ_RECONNECT_IVL_MAX
| [Tuesday 22 February 2011] [15:09:41] &lt;sustrik&gt;       and
| [Tuesday 22 February 2011] [15:09:42] &lt;sustrik&gt;       ZMQ_RECOVERY_IVL_MSEC
| [Tuesday 22 February 2011] [15:09:50] &lt;sustrik&gt;       + the bug fixes
| [Tuesday 22 February 2011] [15:10:45] &lt;sustrik&gt;       you can get description for both from zmq_setsockopt(3)
| [Tuesday 22 February 2011] [15:10:52] &lt;pieterh&gt;       indeed
| [Tuesday 22 February 2011] [15:11:04] &lt;pieterh&gt;       I&#8217;ll do that, np
| [Tuesday 22 February 2011] [15:11:12] &lt;sustrik&gt;       it&#8217;s easy this time
| [Tuesday 22 February 2011] [15:11:19] &lt;pieterh&gt;       &#8220;An automatic restart of Piratepad will occur in-31945seconds.&#8221;
| [Tuesday 22 February 2011] [15:11:21] &lt;pieterh&gt;       good god
| [Tuesday 22 February 2011] [15:11:34] &lt;sustrik&gt;       they are pirates, you know
| [Tuesday 22 February 2011] [15:11:37] &lt;pieterh&gt;       We killed Piratepad...
| [Tuesday 22 February 2011] [15:11:38] &lt;sustrik&gt;       not exactly precise
| [Tuesday 22 February 2011] [15:11:45] &lt;pieterh&gt;       Well, Google bought etherpad and then shut it down...
| [Tuesday 22 February 2011] [15:12:15] &lt;sustrik&gt;       anyway
| [Tuesday 22 February 2011] [15:12:28] &lt;sustrik&gt;       anything else missing for making the stable branch?
| [Tuesday 22 February 2011] [15:13:30] &lt;pieterh&gt;       not for me
| [Tuesday 22 February 2011] [15:13:35] &lt;sustrik&gt;       good
| [Tuesday 22 February 2011] [15:13:36] &lt;pieterh&gt;       but did you understand my concern?
| [Tuesday 22 February 2011] [15:13:41] &lt;sustrik&gt;       which one?
| [Tuesday 22 February 2011] [15:13:52] &lt;pieterh&gt;       we&#8217;re breaking the master/maint process
| [Tuesday 22 February 2011] [15:14:12] &lt;pieterh&gt;       smashing it into little pieces
| [Tuesday 22 February 2011] [15:14:22] &lt;sustrik&gt;       yes
| [Tuesday 22 February 2011] [15:14:37] &lt;sustrik&gt;       the problem is the maint was not really well maintained anyway
| [Tuesday 22 February 2011] [15:14:43] &lt;pieterh&gt;       since I personally dislike that process and find it complex and bizarre, I&#8217;m happy with that
| [Tuesday 22 February 2011] [15:15:02] &lt;pieterh&gt;       I&#8217;d like a process that takes 30 seconds to fully understand
| [Tuesday 22 February 2011] [15:15:11] &lt;pieterh&gt;       on a cold monday morning before coffee
| [Tuesday 22 February 2011] [15:15:18] &lt;sustrik&gt;       i think it&#8217;s the same now
| [Tuesday 22 February 2011] [15:16:02] &lt;sustrik&gt;       patches being passed between branches
| [Tuesday 22 February 2011] [15:16:16] &lt;sustrik&gt;       ah, one point
| [Tuesday 22 February 2011] [15:16:26] &lt;sustrik&gt;       have a look how version numbers are to be maintained
| [Tuesday 22 February 2011] [15:16:55] &lt;sustrik&gt;       it&#8217;s important not to mess that up
| [Tuesday 22 February 2011] [15:17:32] &lt;pieterh&gt;       I still don&#8217;t remember how changes flow from maint to master and vice-versa
| [Tuesday 22 February 2011] [15:17:47] &lt;pieterh&gt;       so if this works, what we&#8217;ll get are a series of stand-alone gits, zeromq2-1, zeromq2-2, zeromq3-0, each with their own maintainer(s)
| [Tuesday 22 February 2011] [15:17:48] &lt;pieterh&gt;       and pull requests with patches between them
| [Tuesday 22 February 2011] [15:17:48] &lt;pieterh&gt;       each being copied off the real repo as that heads towards stability
| [Tuesday 22 February 2011] [15:18:30] &lt;sustrik&gt;       it works both ways
| [Tuesday 22 February 2011] [15:18:31] &lt;pieterh&gt;       the version numbering works properly IMO
| [Tuesday 22 February 2011] [15:18:35] &lt;amacleod&gt;      :-( Now jzmq tests are hung forever in Context.finalize
| [Tuesday 22 February 2011] [15:18:37] &lt;pieterh&gt;       next releases will be 2.1.1, 2.1.2, 2.1.3...
| [Tuesday 22 February 2011] [15:18:46] &lt;sustrik&gt;       1. backporting patches from master to maint(s)
| [Tuesday 22 February 2011] [15:18:56] &lt;sustrik&gt;       2. upstreaming patches from maint(s) to master
| [Tuesday 22 February 2011] [15:19:12] &lt;pieterh&gt;       I&#8217;d assume 2.1.3 will be the stable one if people find bugs
| [Tuesday 22 February 2011] [15:19:42] &lt;pieterh&gt;       yes
| [Tuesday 22 February 2011] [15:19:43] &lt;pieterh&gt;       I&#8217;d veto that
| [Tuesday 22 February 2011] [15:19:43] &lt;pieterh&gt;       upstreaming patches from temporary clones of maint(s) to master
| [Tuesday 22 February 2011] [15:19:43] &lt;pieterh&gt;       at least in my view... for now...
| [Tuesday 22 February 2011] [15:19:47] &lt;pieterh&gt;       anyhow, yes, if it makes sense
| [Tuesday 22 February 2011] [15:19:50] &lt;pieterh&gt;       DCVS as you said
| [Tuesday 22 February 2011] [15:20:15] &lt;pieterh&gt;       each repo is largely independent and we work by protocol
| [Tuesday 22 February 2011] [15:20:29] &lt;sustrik&gt;       well, if you bugfix a patch for maint, you want to upstream it
| [Tuesday 22 February 2011] [15:20:42] &lt;sustrik&gt;       only thing it means is sending it to the ML
| [Tuesday 22 February 2011] [15:20:45] &lt;sustrik&gt;       no big deal
| [Tuesday 22 February 2011] [15:21:02] &lt;pieterh&gt;       if the bug is in the current master, I&#8217;d first want to get it fixed there
| [Tuesday 22 February 2011] [15:21:15] &lt;pieterh&gt;       because until it&#8217;s gone past that filter, there&#8217;s no guarantee it&#8217;s sane
| [Tuesday 22 February 2011] [15:21:31] &lt;pieterh&gt;       if the bug is in old code, then there&#8217;s no upstreaming anyhow
| [Tuesday 22 February 2011] [15:21:47] &lt;sustrik&gt;       it&#8217;s up to you
| [Tuesday 22 February 2011] [15:22:02] &lt;sustrik&gt;       so you&#8217;re going to reject patches to maint
| [Tuesday 22 February 2011] [15:22:04] &lt;sustrik&gt;       right?
| [Tuesday 22 February 2011] [15:22:15] &lt;pieterh&gt;       presumably, yes
| [Tuesday 22 February 2011] [15:22:19] &lt;sustrik&gt;       ok
| [Tuesday 22 February 2011] [15:22:22] &lt;pieterh&gt;       or at least treat them with scepticism
| [Tuesday 22 February 2011] [15:22:32] &lt;pieterh&gt;       the only person I trust for my patches is you
| [Tuesday 22 February 2011] [15:22:48] &lt;sustrik&gt;       ok, now for the versioning
| [Tuesday 22 February 2011] [15:22:48] &lt;pieterh&gt;       especially, especially on a stable release people rely on for production
| [Tuesday 22 February 2011] [15:22:55] &lt;pieterh&gt;       versioning... ok
| [Tuesday 22 February 2011] [15:23:09] &lt;sustrik&gt;       the process looks like this:
| [Tuesday 22 February 2011] [15:23:12] &lt;pieterh&gt;       s/you/the owner of the code in question/
| [Tuesday 22 February 2011] [15:23:26] &lt;sustrik&gt;       when about to make a release:
| [Tuesday 22 February 2011] [15:23:37] &lt;sustrik&gt;       1. update the version numbers in zmq.h
| [Tuesday 22 February 2011] [15:23:45] &lt;sustrik&gt;       2. make a release
| [Tuesday 22 February 2011] [15:23:52] &lt;sustrik&gt;       3. bump the version number
| [Tuesday 22 February 2011] [15:24:02] &lt;pieterh&gt;       right, <a class="reference external" href="http://www.zeromq.org/docs:procedures">http://www.zeromq.org/docs:procedures</a>
| [Tuesday 22 February 2011] [15:24:08] &lt;sustrik&gt;       yes
| [Tuesday 22 February 2011] [15:24:15] &lt;sustrik&gt;       exactly the same process
| [Tuesday 22 February 2011] [15:24:17] &lt;pieterh&gt;       this would happen on the release git only
| [Tuesday 22 February 2011] [15:24:59] &lt;sustrik&gt;       are you saying you are not going to version the maint  branch?
| [Tuesday 22 February 2011] [15:25:09] &lt;sustrik&gt;       that&#8217;s nonsense
| [Tuesday 22 February 2011] [15:25:14] &lt;pieterh&gt;       as far as I&#8217;m concerned, there is no maint branch
| [Tuesday 22 February 2011] [15:25:21] &lt;sustrik&gt;       maint repo
| [Tuesday 22 February 2011] [15:25:27] &lt;sustrik&gt;       no versions?
| [Tuesday 22 February 2011] [15:25:28] &lt;pieterh&gt;       ok, the terms are vital here
| [Tuesday 22 February 2011] [15:25:36] &lt;pieterh&gt;       let&#8217;s call it the release git
| [Tuesday 22 February 2011] [15:25:42] &lt;pieterh&gt;       as compared to the master git
| [Tuesday 22 February 2011] [15:25:47] &lt;sustrik&gt;       whatever
| [Tuesday 22 February 2011] [15:25:52] &lt;sustrik&gt;       what about versions?
| [Tuesday 22 February 2011] [15:25:59] &lt;pieterh&gt;       I&#8217;m going to tag the release git properly
| [Tuesday 22 February 2011] [15:26:22] &lt;pieterh&gt;       and version it properly, exactly as now
| [Tuesday 22 February 2011] [15:26:24] &lt;sustrik&gt;       change zmq.h as well
| [Tuesday 22 February 2011] [15:26:36] &lt;pieterh&gt;       exactly the same, but it all happens on my master branch
| [Tuesday 22 February 2011] [15:26:40] &lt;sustrik&gt;       otherwise users won&#8217;t be able to find out what the version is
| [Tuesday 22 February 2011] [15:26:48] &lt;sustrik&gt;       (zmq_version(), version macros
| [Tuesday 22 February 2011] [15:26:59] &lt;pieterh&gt;       yes, all that is unambiguous
| [Tuesday 22 February 2011] [15:27:09] &lt;pieterh&gt;       the versioning is sane, obvious, necessary
| [Tuesday 22 February 2011] [15:27:19] &lt;sustrik&gt;       right, 3 steps
| [Tuesday 22 February 2011] [15:27:26] &lt;sustrik&gt;       tag
| [Tuesday 22 February 2011] [15:27:43] &lt;sustrik&gt;       release
| [Tuesday 22 February 2011] [15:27:45] &lt;sustrik&gt;       change version
| [Tuesday 22 February 2011] [15:27:48] &lt;pieterh&gt;       yes
| [Tuesday 22 February 2011] [15:27:49] &lt;sustrik&gt;       that&#8217;s it
| [Tuesday 22 February 2011] [15:27:52] &lt;sustrik&gt;       ok
| [Tuesday 22 February 2011] [15:28:10] &lt;pieterh&gt;       and the final step is update the version in the development master
| [Tuesday 22 February 2011] [15:28:17] &lt;sustrik&gt;       so, i&#8217;m going to bump master to 2.2
| [Tuesday 22 February 2011] [15:28:18] &lt;pieterh&gt;       so it goes from 2.1.1 to 2.2.0
| [Tuesday 22 February 2011] [15:28:26] &lt;sustrik&gt;       yes, i&#8217;ll do that now
| [Tuesday 22 February 2011] [15:28:36] &lt;pieterh&gt;       very excellent...!
| [Tuesday 22 February 2011] [15:28:43] &lt;pieterh&gt;       ok, I&#8217;m going to make a release now
| [Tuesday 22 February 2011] [15:28:47] &lt;pieterh&gt;       no time like the present
| [Tuesday 22 February 2011] [15:29:16] &lt;sustrik&gt;       cremes: sorry for the delay
| [Tuesday 22 February 2011] [15:29:26] &lt;sustrik&gt;       have you found out what&#8217;s the problem?
| [Tuesday 22 February 2011] [15:29:34] &lt;pieterh&gt;       amacleod: sounds like there&#8217;s a socket left open
| [Tuesday 22 February 2011] [15:29:51] &lt;pieterh&gt;       amacleod: sorry also for the delay
| [Tuesday 22 February 2011] [15:30:15] &lt;amacleod&gt;      Terminating a context will not finish if a socket is left open?
| [Tuesday 22 February 2011] [15:31:13] &lt;pieterh&gt;       amacleod: not in every case, but in some cases
| [Tuesday 22 February 2011] [15:31:19] &lt;pieterh&gt;       this is new behavior in 2.1
| [Tuesday 22 February 2011] [15:31:34] &lt;pieterh&gt;       a side-effect of zmq_term&#8217;s determination to flush sockets safely
| [Tuesday 22 February 2011] [15:32:02] &lt;pieterh&gt;       if the socket is held by the same thread as calls zmq_term, it deadlocks (or something)
| [Tuesday 22 February 2011] [15:32:54] &lt;amacleod&gt;      Hmm, yeah.  It did look as though the Java finalizer was waiting on some things.
| [Tuesday 22 February 2011] [15:36:04] &lt;pieterh&gt;       sustrik: s/until/untill/ in zmq_setsockopt.txt...
| [Tuesday 22 February 2011] [15:37:06] &lt;sustrik&gt;       would you fix it in maint and upstram it to master or should i fix it in master and you&#8217;ll backport it to the maint :)
| [Tuesday 22 February 2011] [15:38:19] &lt;pieterh&gt;       For a one-word fix... let me clone the git and send you a pull request with regression test case
| [Tuesday 22 February 2011] [15:38:27] &lt;pieterh&gt;       yeah :-) process!
| [Tuesday 22 February 2011] [15:40:15] &lt;sustrik&gt;       i love it :)
| [Tuesday 22 February 2011] [15:41:08] &lt;pieterh&gt;       what do you call sys://log? do we want to document that briefly?
| [Tuesday 22 February 2011] [15:41:16] &lt;pieterh&gt;       is it an internal transport?
| [Tuesday 22 February 2011] [15:41:17] &lt;cremes&gt;        sustrik: yes, i&#8217;ve discovered a problem; i am just finishing a second test of my hypothesis.... i&#8217;ll share it in about 10m
| [Tuesday 22 February 2011] [15:41:47] &lt;sustrik&gt;       good god, everything is shutting down
| [Tuesday 22 February 2011] [15:41:58] &lt;pieterh&gt;       someone dropped the Internet!
| [Tuesday 22 February 2011] [15:42:11] &lt;sustrik&gt;       i suspect i&#8217;m in lybia
| [Tuesday 22 February 2011] [15:42:27] &lt;pieterh&gt;       I knew they should have left it safe with the Elders of the Internet at the top of Big Ben
| [Tuesday 22 February 2011] [15:43:04] &lt;pieterh&gt;       sustrik: funny, a friend of mine was supposed to be doing a rally in Libya just about now...
| [Tuesday 22 February 2011] [15:43:27] &lt;sustrik&gt;       let&#8217;s hope he&#8217;s not there really
| [Tuesday 22 February 2011] [15:43:54] &lt;pieterh&gt;       indeed, I asked him like two weeks ago, &#8220;you going before or after the revolution?&#8221;, he lol&#8217;d
| [Tuesday 22 February 2011] [15:44:39] &lt;fbarriga&gt;      hi everyone
| [Tuesday 22 February 2011] [15:44:44] &lt;fbarriga&gt;      I&#8217;ve a little doubt
| [Tuesday 22 February 2011] [15:45:04] &lt;sustrik&gt;       yuck, github is totally braindead
| [Tuesday 22 February 2011] [15:45:14] &lt;sustrik&gt;       repos as well as the site
| [Tuesday 22 February 2011] [15:45:27] &lt;pieterh&gt;       fbarriga: hi, what&#8217;s up?
| [Tuesday 22 February 2011] [15:45:53] &lt;fbarriga&gt;      hi pieterh , playing with the socket
| [Tuesday 22 February 2011] [15:46:15] &lt;fbarriga&gt;      probably this deserve a RTFM reply..
| [Tuesday 22 February 2011] [15:46:23] &lt;fbarriga&gt;      if I do this: zmq_msg_init(&amp;msg); zmq_recv(sock, &amp;msg, 0); zmq_recv(sock, &amp;msg, 0); zmq_msg_close(&amp;msg);
| [Tuesday 22 February 2011] [15:46:29] &lt;fbarriga&gt;      i&#8217;m leaking memory ?
| [Tuesday 22 February 2011] [15:46:44] &lt;cremes&gt;        sustrik: apparently i can reproduce a memory ddos with 0mq sockets; here&#8217;s how (there may be a simpler way but this is how i did it)
| [Tuesday 22 February 2011] [15:46:55] &lt;fbarriga&gt;      every time zmq_recv allocate new memory ?
| [Tuesday 22 February 2011] [15:47:02] &lt;cremes&gt;        setup a standard forwarder
| [Tuesday 22 February 2011] [15:47:12] &lt;pieterh&gt;       fbarriga: yes, that works fine
| [Tuesday 22 February 2011] [15:47:15] &lt;fbarriga&gt;      and is mandatory to init the msg before receive the data ?
| [Tuesday 22 February 2011] [15:47:18] &lt;pieterh&gt;       yes
| [Tuesday 22 February 2011] [15:47:26] &lt;cremes&gt;        connect a publisher to it and let it go crazy broadcasting (bigger messages are better, e.g. 20k+)
| [Tuesday 22 February 2011] [15:47:32] &lt;cremes&gt;        so far, no leak
| [Tuesday 22 February 2011] [15:47:44] &lt;cremes&gt;        now start adding subscribers
| [Tuesday 22 February 2011] [15:47:49] &lt;fbarriga&gt;      umm, but if I have a while(true) I can&#8217;t put the init outside to avoid overhead ?
| [Tuesday 22 February 2011] [15:48:03] &lt;cremes&gt;        again, no real leak except for a little queueing if the subscribers are slower than the pub
| [Tuesday 22 February 2011] [15:48:12] &lt;pieterh&gt;       fbarriga: close and init are a pair
| [Tuesday 22 February 2011] [15:48:16] &lt;cremes&gt;        i adjusted my publisher so that it would not overrun the subscribers
| [Tuesday 22 February 2011] [15:48:24] &lt;cremes&gt;        now here&#8217;s where the leak comes in....
| [Tuesday 22 February 2011] [15:48:49]          * <a href="#id2839"><span class="problematic" id="id2840">sustrik_</span></a> is listening
| [Tuesday 22 February 2011] [15:49:04] &lt;cremes&gt;        modify the subscribers so that they only stay connected for a few seconds; they close their sockets, and then immediately reconnect to the forwarder
| [Tuesday 22 February 2011] [15:49:11] &lt;fbarriga&gt;      so I can do this:  zmq_msg_init(&amp;msg); while (true) { zmq_recv(sock, &amp;msg, 0); }  zmq_msg_close(&amp;msg); ?
| [Tuesday 22 February 2011] [15:49:14] &lt;cremes&gt;        they continue to do this for at least 15 minutes
| [Tuesday 22 February 2011] [15:49:26] &lt;cremes&gt;        what i see happening is a lot of sockets go into TIME_WAIT
| [Tuesday 22 February 2011] [15:49:57] &lt;cremes&gt;        i suspected that the socket ZMQ_LINGER option (defaults to indefinite) was holding onto the messages
| [Tuesday 22 February 2011] [15:50:06] &lt;cremes&gt;        but i just ran a test where i set it to 0 and it still occurred
| [Tuesday 22 February 2011] [15:50:37] &lt;cremes&gt;        so i&#8217;m thinking that as a socket sits in TIME_WAIT, its queue is still active; as new messages arrive from the publisher they are added to the queue
| [Tuesday 22 February 2011] [15:50:38] &lt;<a href="#id2841"><span class="problematic" id="id2842">sustrik_</span></a>&gt;      do the subscribers have identities?
| [Tuesday 22 February 2011] [15:50:53] &lt;cremes&gt;        when the TIME_WAIT expires, the queued data doesn&#8217;t go away
| [Tuesday 22 February 2011] [15:51:15] &lt;cremes&gt;        they are using the default random id&#8217;s; i am not overriding with my own
| [Tuesday 22 February 2011] [15:51:20] &lt;pieterh&gt;       fbarriga: nope, it&#8217;ll leak memory
| [Tuesday 22 February 2011] [15:51:37] &lt;pieterh&gt;       if you have positive proof that init/close are slow, send it along
| [Tuesday 22 February 2011] [15:51:45] &lt;cremes&gt;        when i stop the publisher, the forwarder&#8217;s memory stops growing
| [Tuesday 22 February 2011] [15:51:49] &lt;pieterh&gt;       if you don&#8217;t then please don&#8217;t optimize unnecessarily, it&#8217;s pointless
| [Tuesday 22 February 2011] [15:52:05] &lt;cremes&gt;        when i disconnect the publisher and <em>all</em> subscribers, the forwarder&#8217;s memory footprint remains the same (big)
| [Tuesday 22 February 2011] [15:52:26] &lt;cremes&gt;        so if i left it running (like for an overnight test) it would exhaust all memory resources by morning
| [Tuesday 22 February 2011] [15:52:37] &lt;<a href="#id2843"><span class="problematic" id="id2844">sustrik_</span></a>&gt;      cremes: afaik processes don&#8217;t return allocated memory to the OS
| [Tuesday 22 February 2011] [15:52:43] &lt;cremes&gt;        and this is exactly what has been plaguing me the last week or so (since i found that last bug!)
| [Tuesday 22 February 2011] [15:53:12] &lt;pieterh&gt;       cremes: does the forwarder memory grow again from that high point ?
| [Tuesday 22 February 2011] [15:53:24] &lt;pieterh&gt;       i.e. leak vs. cached heap in process...?
| [Tuesday 22 February 2011] [15:53:27] &lt;cremes&gt;        pieterh: it only grows again if i turn the publisher back on
| [Tuesday 22 February 2011] [15:53:38] &lt;pieterh&gt;       but does it start growing again immediately?
| [Tuesday 22 February 2011] [15:54:23] &lt;cremes&gt;        let&#8217;s see....
| [Tuesday 22 February 2011] [15:54:25] &lt;pieterh&gt;       if it&#8217;s cached heap memory then after a few cycles it will stop growing
| [Tuesday 22 February 2011] [15:55:11] &lt;fbarriga&gt;      pieterh, but hypothetically calling those function will slow down the function
| [Tuesday 22 February 2011] [15:55:44] &lt;pieterh&gt;       fbarriga: doing hypothetical optimization is a waste of time, please don&#8217;t
| [Tuesday 22 February 2011] [15:55:47] &lt;cremes&gt;        pieterh: no, it doesn&#8217;t start growing again right away
| [Tuesday 22 February 2011] [15:56:00] &lt;pieterh&gt;       cremes: then it&#8217;s cached heap memory, not a leak
| [Tuesday 22 February 2011] [15:56:31] &lt;pieterh&gt;       fbarriga: if you wish to actually know, try calling zmq_msg_init() and zmq_msg_close() in a loop, 1 billion times
| [Tuesday 22 February 2011] [15:56:37] &lt;pieterh&gt;       measure how many seconds it takes
| [Tuesday 22 February 2011] [15:56:59] &lt;cremes&gt;        so this is just due to the heap growing really large and it never gives the buffer space back to the OS even if the buffer is empty
| [Tuesday 22 February 2011] [15:57:00] &lt;cremes&gt;        ?
| [Tuesday 22 February 2011] [15:57:04] &lt;pieterh&gt;       cremes: yup
| [Tuesday 22 February 2011] [15:57:14] &lt;CIA-21&gt;        jzmq: 03Gonzalo Diethelm 07master * ra791958 10/ (.gitignore configure.in): Changes by jrideout to allow the build to succeed with autoconf 2.59. - <a class="reference external" href="http://bit.ly/fypsls">http://bit.ly/fypsls</a>
| [Tuesday 22 February 2011] [15:57:27] &lt;pieterh&gt;       if you have a normally peaky stream, it&#8217;ll hit some max and stop growing
| [Tuesday 22 February 2011] [15:57:39] &lt;pieterh&gt;       there may be a system call to return memory to the OS
| [Tuesday 22 February 2011] [15:57:57] &lt;pieterh&gt;       but it&#8217;s always virtualized anyhow, not real RAM, afaik
| [Tuesday 22 February 2011] [15:58:53] &lt;pieterh&gt;       sustrik: is the inproc hwm+swap change worth mentioning in the release notes?
| [Tuesday 22 February 2011] [15:59:20] &lt;<a href="#id2845"><span class="problematic" id="id2846">sustrik_</span></a>&gt;      dunno
| [Tuesday 22 February 2011] [15:59:30] &lt;<a href="#id2847"><span class="problematic" id="id2848">sustrik_</span></a>&gt;      it&#8217;s more of a fix
| [Tuesday 22 February 2011] [15:59:37] &lt;<a href="#id2849"><span class="problematic" id="id2850">sustrik_</span></a>&gt;      than a new feature
| [Tuesday 22 February 2011] [16:01:34] &lt;pieterh&gt;       basically the hwm is shared between peers, right?
| [Tuesday 22 February 2011] [16:03:13] &lt;<a href="#id2851"><span class="problematic" id="id2852">sustrik_</span></a>&gt;      it&#8217;s sum of the two hwms
| [Tuesday 22 February 2011] [16:05:15] &lt;pieterh&gt;       the peers share a single buffer...
| [Tuesday 22 February 2011] [16:08:01] &lt;pieterh&gt;       sustrik: <a class="reference external" href="http://edupad.ch/2tZLebJbTg">http://edupad.ch/2tZLebJbTg</a> is the NEWS for 2.1.1...
| [Tuesday 22 February 2011] [16:08:13] &lt;pieterh&gt;       I&#8217;ve gone through the git log
| [Tuesday 22 February 2011] [16:10:37] &lt;<a href="#id2853"><span class="problematic" id="id2854">sustrik_</span></a>&gt;      you&#8217;ve killed the edupad as well!
| [Tuesday 22 February 2011] [16:11:20] &lt;<a href="#id2855"><span class="problematic" id="id2856">sustrik_</span></a>&gt;      isn&#8217;t it a ipv6 day today?
| [Tuesday 22 February 2011] [16:15:23] &lt;pieterh&gt;       sustrik: let&#8217;s do that tomorrow... update your NEWS, send me a pull request
| [Tuesday 22 February 2011] [16:15:48] &lt;pieterh&gt;       when we get that working, I&#8217;ll make the release
| [Tuesday 22 February 2011] [16:16:06] &lt;<a href="#id2857"><span class="problematic" id="id2858">sustrik_</span></a>&gt;      ok
| [Tuesday 22 February 2011] [16:19:26] &lt;cremes&gt;        i&#8217;m pretty convinced there is still a leak here... new information
| [Tuesday 22 February 2011] [16:19:49] &lt;cremes&gt;        slowing the publisher to every 10ms and setting HWM for all sockets to 1 and LINGER to 0
| [Tuesday 22 February 2011] [16:19:58] &lt;cremes&gt;        it still slowly grows in size
| [Tuesday 22 February 2011] [16:20:13] &lt;cremes&gt;        there shouldn&#8217;t be <em>anything</em> getting queued or buffered here
| [Tuesday 22 February 2011] [16:20:34] &lt;<a href="#id2859"><span class="problematic" id="id2860">sustrik_</span></a>&gt;      ack
| [Tuesday 22 February 2011] [16:20:52] &lt;<a href="#id2861"><span class="problematic" id="id2862">sustrik_</span></a>&gt;      can you provide the test program?
| [Tuesday 22 February 2011] [16:20:55] &lt;cremes&gt;        the &#8220;cause&#8221; appears to be the subscribers connecting/disconnecting
| [Tuesday 22 February 2011] [16:21:10] &lt;<a href="#id2863"><span class="problematic" id="id2864">sustrik_</span></a>&gt;      yes, looks like
| [Tuesday 22 February 2011] [16:21:18] &lt;cremes&gt;        sustrik: i can but it will be in ruby; i&#8217;ll describe the steps so it could be replicated in another lang
| [Tuesday 22 February 2011] [16:21:44] &lt;pieterh&gt;       hmm, sustrik, maybe you really are in Libya...
| [Tuesday 22 February 2011] [16:23:28] &lt;pieterh&gt;       sustrik: does the HWM on a PUB socket affect each subscriber queue (over TCP)? so potentially N x HWM?
| [Tuesday 22 February 2011] [16:23:39] &lt;<a href="#id2865"><span class="problematic" id="id2866">sustrik_</span></a>&gt;      cremes: ok
| [Tuesday 22 February 2011] [16:23:49] &lt;<a href="#id2867"><span class="problematic" id="id2868">sustrik_</span></a>&gt;      yes
| [Tuesday 22 February 2011] [16:23:54] &lt;<a href="#id2869"><span class="problematic" id="id2870">sustrik_</span></a>&gt;      pieterh: yes
| [Tuesday 22 February 2011] [16:24:04] &lt;pieterh&gt;       thx
| [Tuesday 22 February 2011] [16:39:19] &lt;<a href="#id2871"><span class="problematic" id="id2872">sustrik_</span></a>&gt;      pieterh: still there
| [Tuesday 22 February 2011] [16:39:22] &lt;<a href="#id2873"><span class="problematic" id="id2874">sustrik_</span></a>&gt;      ?
| [Tuesday 22 February 2011] [16:39:47] &lt;<a href="#id2875"><span class="problematic" id="id2876">sustrik_</span></a>&gt;      one more important thing...
| [Tuesday 22 February 2011] [16:40:25] &lt;pieterh&gt;       yeah, still here
| [Tuesday 22 February 2011] [16:41:06] &lt;pieterh&gt;       hmm?
| [Tuesday 22 February 2011] [16:41:49] &lt;<a href="#id2877"><span class="problematic" id="id2878">sustrik_</span></a>&gt;      given that there are two separately maintained repos now
| [Tuesday 22 February 2011] [16:42:02] &lt;<a href="#id2879"><span class="problematic" id="id2880">sustrik_</span></a>&gt;      we should keep the patches completely clean
| [Tuesday 22 February 2011] [16:42:14] &lt;<a href="#id2881"><span class="problematic" id="id2882">sustrik_</span></a>&gt;      i.e. no whitespace patching
| [Tuesday 22 February 2011] [16:42:20] &lt;<a href="#id2883"><span class="problematic" id="id2884">sustrik_</span></a>&gt;      no mixed patches
| [Tuesday 22 February 2011] [16:42:43] &lt;<a href="#id2885"><span class="problematic" id="id2886">sustrik_</span></a>&gt;      like fixing a bug and correcting an unrelated typo in a single patch
| [Tuesday 22 February 2011] [16:42:44] &lt;<a href="#id2887"><span class="problematic" id="id2888">sustrik_</span></a>&gt;      etc.
| [Tuesday 22 February 2011] [16:42:55] &lt;pieterh&gt;       you mean so we can re-port the history anywhere?
| [Tuesday 22 February 2011] [16:42:56] &lt;<a href="#id2889"><span class="problematic" id="id2890">sustrik_</span></a>&gt;      otherwise we&#8217;ll end in dependency hell
| [Tuesday 22 February 2011] [16:43:07] &lt;<a href="#id2891"><span class="problematic" id="id2892">sustrik_</span></a>&gt;      yes
| [Tuesday 22 February 2011] [16:43:11] &lt;pieterh&gt;       right
| [Tuesday 22 February 2011] [16:43:16] &lt;<a href="#id2893"><span class="problematic" id="id2894">sustrik_</span></a>&gt;      keeping patches mobile
| [Tuesday 22 February 2011] [16:43:31] &lt;pieterh&gt;       so the way a pull request works is you specify a commit (or multiple commits)
| [Tuesday 22 February 2011] [16:43:38] &lt;pieterh&gt;       this may not work all the time
| [Tuesday 22 February 2011] [16:44:56] &lt;<a href="#id2895"><span class="problematic" id="id2896">sustrik_</span></a>&gt;      ?
| [Tuesday 22 February 2011] [16:50:40] &lt;pieterh&gt;       clearly if we can keep patches fully mobile on the development master, that&#8217;s ideal
| [Tuesday 22 February 2011] [16:50:40] &lt;pieterh&gt;       makes it fairly easy to send them anywhere
| [Tuesday 22 February 2011] [16:50:40] &lt;pieterh&gt;       we may want to add more process support, e.g. something greppable in the log
| [Tuesday 22 February 2011] [16:50:40] &lt;pieterh&gt;       in the worst case we can apply patches by hand
| [Tuesday 22 February 2011] [16:51:42] &lt;pieterh&gt;       well, some situations I can see happening
| [Tuesday 22 February 2011] [16:51:42] &lt;pieterh&gt;       - bug hits in 2.1 but that code has changed in 2.2
| [Tuesday 22 February 2011] [16:51:42] &lt;pieterh&gt;       - patch in 2.2 doesn&#8217;t apply cleanly in 2.1
| [Tuesday 22 February 2011] [16:52:19] &lt;pieterh&gt;       - 2.1 needs only part of a patch made to 2.2
| [Tuesday 22 February 2011] [16:52:22] &lt;pieterh&gt;       etc.
| [Tuesday 22 February 2011] [16:55:11] &lt;<a href="#id2897"><span class="problematic" id="id2898">sustrik_</span></a>&gt;      git has support for that
| [Tuesday 22 February 2011] [16:55:11] &lt;amacleod&gt;      I am getting a different assertion error from jzmq tests now: Unknown error 156384765, rc == 0 (src/socket_base.cpp:243)
| [Tuesday 22 February 2011] [16:55:17] &lt;<a href="#id2899"><span class="problematic" id="id2900">sustrik_</span></a>&gt;      it&#8217;s called merging
| [Tuesday 22 February 2011] [16:55:32] &lt;<a href="#id2901"><span class="problematic" id="id2902">sustrik_</span></a>&gt;      so you apply the patch
| [Tuesday 22 February 2011] [16:55:38] &lt;<a href="#id2903"><span class="problematic" id="id2904">sustrik_</span></a>&gt;      you get merge conflicts
| [Tuesday 22 February 2011] [16:55:41] &lt;<a href="#id2905"><span class="problematic" id="id2906">sustrik_</span></a>&gt;      you solve them
| [Tuesday 22 February 2011] [16:55:46] &lt;<a href="#id2907"><span class="problematic" id="id2908">sustrik_</span></a>&gt;      you commit the patch
| [Tuesday 22 February 2011] [16:55:58] &lt;<a href="#id2909"><span class="problematic" id="id2910">sustrik_</span></a>&gt;      it&#8217;s still the same patch, but it have been backported
| [Tuesday 22 February 2011] [16:56:27] &lt;<a href="#id2911"><span class="problematic" id="id2912">sustrik_</span></a>&gt;      the backport iirc is visible as a separate commit
| [Tuesday 22 February 2011] [16:57:08] &lt;<a href="#id2913"><span class="problematic" id="id2914">sustrik_</span></a>&gt;      amacleod: what version?
| [Tuesday 22 February 2011] [16:57:59] &lt;pieterh&gt;       sustrik: ok, we&#8217;ll play it through
| [Tuesday 22 February 2011] [16:58:16] &lt;amacleod&gt;      sustrik, v2.1.0, from tarball on <a class="reference external" href="http://www.zeromq.org/intro:get-the-software">http://www.zeromq.org/intro:get-the-software</a>
| [Tuesday 22 February 2011] [17:00:27] &lt;amacleod&gt;      Looks like that line reference is in zmq::socket_base_t::getsockopt
| [Tuesday 22 February 2011] [17:01:25] &lt;<a href="#id2915"><span class="problematic" id="id2916">sustrik_</span></a>&gt;      amacleod: yes, it&#8217;s a bug
| [Tuesday 22 February 2011] [17:01:32] &lt;<a href="#id2917"><span class="problematic" id="id2918">sustrik_</span></a>&gt;      it&#8217;s solved in head
| [Tuesday 22 February 2011] [17:01:46] &lt;amacleod&gt;      Ok.  Guess I should get head, then, eh?
| [Tuesday 22 February 2011] [17:01:55] &lt;<a href="#id2919"><span class="problematic" id="id2920">sustrik_</span></a>&gt;      pieterh: when are you going to release 2.1.1?
| [Tuesday 22 February 2011] [17:02:36] &lt;<a href="#id2921"><span class="problematic" id="id2922">sustrik_</span></a>&gt;      amacleod: either get the head or wait for 2.1.1
| [Tuesday 22 February 2011] [17:02:45] &lt;amacleod&gt;      I will try with head.
| [Tuesday 22 February 2011] [17:10:06] &lt;pieterh&gt;       sustrik: please review <a class="reference external" href="http://edupad.ch/2tZLebJbTg">http://edupad.ch/2tZLebJbTg</a> and add to your master if you&#8217;re happy with it
| [Tuesday 22 February 2011] [17:10:06] &lt;pieterh&gt;       date is set for tomorrow
| [Tuesday 22 February 2011] [17:10:07] &lt;pieterh&gt;       send me a pull request for that change, and I&#8217;ll process it, and then make the release
| [Tuesday 22 February 2011] [17:10:08] &lt;pieterh&gt;       tomorrow morning after coffee
| [Tuesday 22 February 2011] [17:10:08] &lt;pieterh&gt;       does that work?
| [Tuesday 22 February 2011] [17:10:29] &lt;pieterh&gt;       I&#8217;d like to split off &#8220;Making a Release&#8221; from the &#8220;Source Code&#8221; page, it&#8217;s two separate topics
| [Tuesday 22 February 2011] [17:10:29] &lt;pieterh&gt;       and this lets me document how to make a release, as a naive and not very expert person
| [Tuesday 22 February 2011] [17:10:29] &lt;pieterh&gt;       which is ideal
| [Tuesday 22 February 2011] [17:11:55] &lt;pieterh&gt;       ok, away
| [Tuesday 22 February 2011] [17:12:06] &lt;pieterh&gt;       g&#8217;nite everyone
| [Tuesday 22 February 2011] [17:12:23] &lt;amacleod&gt;      Nite Pieter.
| [Tuesday 22 February 2011] [17:15:35] &lt;<a href="#id2923"><span class="problematic" id="id2924">sustrik_</span></a>&gt;      what change?
| [Tuesday 22 February 2011] [17:16:12] &lt;<a href="#id2925"><span class="problematic" id="id2926">sustrik_</span></a>&gt;      edpad times out here btw
| [Tuesday 22 February 2011] [17:16:20] &lt;<a href="#id2927"><span class="problematic" id="id2928">sustrik_</span></a>&gt;      good night anyway
| [Tuesday 22 February 2011] [17:21:28] &lt;amacleod&gt;      Do pollers need to be closed or finalized in some way before terminating the context?
| [Tuesday 22 February 2011] [17:28:03] &lt;rphillips&gt;     is there a way to set a zeromq socket up to timeout on a zmq_send?
| [Tuesday 22 February 2011] [17:28:41] &lt;ianbarber&gt;     you could poll for a socket being writeable, with a timeout
| [Tuesday 22 February 2011] [17:32:10] &lt;rphillips&gt;     Do I need to check for writability after the connect or after the send?
| [Tuesday 22 February 2011] [17:32:18] &lt;rphillips&gt;     the send is blocked already
| [Tuesday 22 February 2011] [17:44:41] &lt;<a href="#id2929"><span class="problematic" id="id2930">sustrik_</span></a>&gt;      before the send
| [Tuesday 22 February 2011] [19:06:41] &lt;leiger&gt;        Hey, is Pieter here?
| [Tuesday 22 February 2011] [19:22:25] &lt;cremes&gt;        sustrik: got a repro for you here:  <a class="reference external" href="https://github.com/zeromq/zeromq2/issues/171">https://github.com/zeromq/zeromq2/issues/171</a>
| [Tuesday 22 February 2011] [19:22:37] &lt;cremes&gt;        it affects tcp and ipc transports
| [Tuesday 22 February 2011] [19:23:06] &lt;cremes&gt;        sustrik: if you&#8217;d like, i can set this up under your account on my box so you can see it since i assume you don&#8217;t plan
| [Tuesday 22 February 2011] [19:23:18] &lt;cremes&gt;        to install ruby and the dependent libraries
| [Tuesday 22 February 2011] [19:23:27] &lt;cremes&gt;        let me know
| [Tuesday 22 February 2011] [19:34:32] &lt;lt_schmidt_jr&gt; Hi guys, is anyone compiling zmq for multiple platforms?
| [Tuesday 22 February 2011] [19:35:09] &lt;lt_schmidt_jr&gt; anyone do jar packaging for binaries for java?
| [Tuesday 22 February 2011] [19:56:30] &lt;kdj&gt;   I am having a problem uninstalling an older version of pyzmq...
| [Tuesday 22 February 2011] [19:56:39] &lt;kdj&gt;   I mean a newer version, actually
| [Tuesday 22 February 2011] [19:56:57] &lt;kdj&gt;   I have pyzmq 2.1.0 installed, I want to revert to pyzmq2.0.10
| [Tuesday 22 February 2011] [19:57:16] &lt;kdj&gt;   I remove the directory and .egg from site-packages, and the module seems removed...
| [Tuesday 22 February 2011] [19:57:45] &lt;kdj&gt;   But when I re-install it, the zmq_version() is still 2.1.0, <em>except</em> for in the shell I installed from O_o
| [Tuesday 22 February 2011] [19:57:50] &lt;kdj&gt;   This is in Windows
| [Tuesday 22 February 2011] [19:59:17] &lt;kdj&gt;   Oh, it is because I am in the directory in which zmq is located. I still don&#8217;t get how they&#8217;re not the same...
| [Tuesday 22 February 2011] [20:37:21] &lt;erickt&gt;        hello #zeromq. I noticed that the HEAD of zeromq2 doesn&#8217;t seem to be building and installing the documentation.
| [Tuesday 22 February 2011] [20:42:52] &lt;jugg&gt;  erickt, check the output of ./configure, you&#8217;re probably missing a dependency.
| [Tuesday 22 February 2011] [20:44:27] &lt;Steve-o&gt;       which should be asciidoc
| [Tuesday 22 February 2011] [20:45:23] &lt;erickt&gt;        I got both asciidoc and xmlto installed. &#8220;make dist&#8221; properly builds all the docs
| [Tuesday 22 February 2011] [20:45:55]          * erickt checks 2.0.10
| [Tuesday 22 February 2011] [20:47:08] &lt;Steve-o&gt;       didn&#8217;t someone catch this on the list recently
| [Tuesday 22 February 2011] [20:48:49] &lt;erickt&gt;        ah yeah the documentation does build correctly with v2.1.0
| [Tuesday 22 February 2011] [20:49:04] &lt;Steve-o&gt;       or maybe a new side effect with the new api.zero.mq support
| [Tuesday 22 February 2011] [20:55:22]          * erickt git bisects...
| [Tuesday 22 February 2011] [21:00:56] &lt;erickt&gt;        oh, haha, it&#8217;s all my fault
| [Tuesday 22 February 2011] [21:01:35] &lt;erickt&gt;        I&#8217;m trying to get zeromq to build outside of the checkout directory and I messed up getting the doc builds to work :)
| [Tuesday 22 February 2011] [23:54:39] &lt;cremes&gt;        andrewvc: ping
| [Tuesday 22 February 2011] [23:54:52] &lt;andrewvc&gt;      yo
| [Tuesday 22 February 2011] [23:54:58] &lt;andrewvc&gt;      sitting next to evanphx right now
| [Tuesday 22 February 2011] [23:55:09] &lt;cremes&gt;        get it up on flickr
| [Tuesday 22 February 2011] [23:55:12] &lt;cremes&gt;        :)
| [Tuesday 22 February 2011] [23:55:16] &lt;andrewvc&gt;      lol
| [Tuesday 22 February 2011] [23:55:32] &lt;andrewvc&gt;      we&#8217;re looking at that zmq bug actually, going through mailbox.cpp
| [Tuesday 22 February 2011] [23:55:35] &lt;cremes&gt;        so which bug are you and evan chatting about?
| [Tuesday 22 February 2011] [23:55:49] &lt;andrewvc&gt;      I think yours was a separate one, something about kernel buffers?
| [Tuesday 22 February 2011] [23:55:57] &lt;andrewvc&gt;      this is the one I hit a while ago that jruby doesn&#8217;t have
| [Tuesday 22 February 2011] [23:56:44] &lt;cremes&gt;        the new_sndbuf &gt; old_sndbuf assertion?
| [Tuesday 22 February 2011] [23:56:57] &lt;andrewvc&gt;      mmm this is nbytes != -1 EBADF
| [Tuesday 22 February 2011] [23:57:01] &lt;andrewvc&gt;      mailbox.cpp 241
| [Tuesday 22 February 2011] [23:57:03] &lt;andrewvc&gt;      that one
| [Tuesday 22 February 2011] [23:57:09] &lt;cremes&gt;        ah, your file descriptor one
| [Tuesday 22 February 2011] [23:57:11] &lt;andrewvc&gt;      yep
| [Wednesday 23 February 2011] [00:00:12] &lt;cremes&gt;      btw, i think 0mq is a pretty good exercise of rbx&#8217;s ffi impl
| [Wednesday 23 February 2011] [00:44:03] &lt;andrewvc&gt;    cremes: still around?
| [Wednesday 23 February 2011] [00:45:13] &lt;cremes&gt;      barely; what&#8217;s up?
| [Wednesday 23 February 2011] [00:46:55] &lt;andrewvc&gt;    yo, not much, but have a bit of a lead on the issue
| [Wednesday 23 February 2011] [00:47:07] &lt;andrewvc&gt;    basically, zmq is shutting down, but a call to zmqgetsockopt gets through
| [Wednesday 23 February 2011] [00:47:14] &lt;andrewvc&gt;    though the socket has been closed zmq doesn&#8217;t see it
| [Wednesday 23 February 2011] [00:47:29] &lt;andrewvc&gt;    btw, evan was saying we should probably not use finalizers, as they can be dangerous
| [Wednesday 23 February 2011] [00:47:38] &lt;cremes&gt;      so it&#8217;s shutting down when you do the getsockopt call?
| [Wednesday 23 February 2011] [00:47:39] &lt;andrewvc&gt;    basically, it&#8217;s easy to have to FFI pointers to the same data
| [Wednesday 23 February 2011] [00:47:46] &lt;andrewvc&gt;    it shuts down  before
| [Wednesday 23 February 2011] [00:47:53] &lt;andrewvc&gt;    but the getsockopt gets through later
| [Wednesday 23 February 2011] [00:48:01] &lt;cremes&gt;      hrm...
| [Wednesday 23 February 2011] [00:48:11] &lt;andrewvc&gt;    and zmq blows up, because an internal FD it uses for that socket, an FD for a socketpair, has been closed
| [Wednesday 23 February 2011] [00:48:16] &lt;cremes&gt;      so what&#8217;s this about finalizers? don&#8217;t use &#8216;em for auto-gc?
| [Wednesday 23 February 2011] [00:48:43] &lt;andrewvc&gt;    the cpp mailbox object seems to have been deleted, but not overwritten, but the ffi socket still points to it
| [Wednesday 23 February 2011] [00:48:50] &lt;andrewvc&gt;    that&#8217;s from evan btw
| [Wednesday 23 February 2011] [00:49:00] &lt;cremes&gt;      the ffi socket...?
| [Wednesday 23 February 2011] [00:49:06] &lt;andrewvc&gt;    ZMQ::Socket
| [Wednesday 23 February 2011] [00:49:16] &lt;andrewvc&gt;    the actual pointer to the socket
| [Wednesday 23 February 2011] [00:49:19] &lt;cremes&gt;      the socketpairs are used for internal signaling, so they aren&#8217;t exposed to us via ffi at all
| [Wednesday 23 February 2011] [00:49:33] &lt;cremes&gt;      ok, zmq.socket
| [Wednesday 23 February 2011] [00:49:37] &lt;andrewvc&gt;    yeah, but I think they&#8217;re still tied to the socket
| [Wednesday 23 February 2011] [00:50:07] &lt;evan&gt;        hi cremes
| [Wednesday 23 February 2011] [00:50:07] &lt;andrewvc&gt;    evan&#8217;s going to pop in
| [Wednesday 23 February 2011] [00:50:08] &lt;evan&gt;        :D
| [Wednesday 23 February 2011] [00:50:13] &lt;cremes&gt;      howdeee
| [Wednesday 23 February 2011] [00:50:18] &lt;evan&gt;        so, real fast
| [Wednesday 23 February 2011] [00:50:20] &lt;evan&gt;        here&#8217;s how I see it.
| [Wednesday 23 February 2011] [00:50:39]        * cremes had a dram or two... :)
| [Wednesday 23 February 2011] [00:50:43] &lt;andrewvc&gt;    lol
| [Wednesday 23 February 2011] [00:50:51] &lt;evan&gt;        FFI -&gt; zmq::getsockopt -&gt; zmq::process_commands -&gt; zmq::mailbox::recv
| [Wednesday 23 February 2011] [00:51:01] &lt;evan&gt;        those last 3 are in C++, in zmq&#8217;s code base
| [Wednesday 23 February 2011] [00:51:06] &lt;cremes&gt;      hey, when you work 22 hours a day, a dram is all the vacation you need :)
| [Wednesday 23 February 2011] [00:51:08] &lt;evan&gt;        the FFI is called from the getsockopt method
| [Wednesday 23 February 2011] [00:51:13] &lt;cremes&gt;      right
| [Wednesday 23 February 2011] [00:51:29] &lt;evan&gt;        ZMQ_EVENTS is the option requested
| [Wednesday 23 February 2011] [00:51:45] &lt;cremes&gt;      k
| [Wednesday 23 February 2011] [00:51:51] &lt;evan&gt;        it appears that zmq has deleted the mailbox in question
| [Wednesday 23 February 2011] [00:52:08] &lt;evan&gt;        we&#8217;re still able to access it because the FFI side has a hanging pointer to where it used to be
| [Wednesday 23 February 2011] [00:52:12] &lt;evan&gt;        and it hasn&#8217;t been overriden
| [Wednesday 23 February 2011] [00:52:32] &lt;evan&gt;        I believe it has been deleted because I can see that the destructor for the mailbox is what closes the socketpari
| [Wednesday 23 February 2011] [00:52:43] &lt;evan&gt;        and I know that we&#8217;re getting the EBADF on the socketpair in a mailbox
| [Wednesday 23 February 2011] [00:52:59] &lt;cremes&gt;      ok, then that&#8217;s a bug
| [Wednesday 23 February 2011] [00:53:09] &lt;evan&gt;        all of that leads me to believe that zmq has decided to shutdown
| [Wednesday 23 February 2011] [00:53:15] &lt;evan&gt;        either because of an internal condition
| [Wednesday 23 February 2011] [00:53:18] &lt;evan&gt;        or because it was requested to
| [Wednesday 23 February 2011] [00:53:28] &lt;evan&gt;        but FFI was not told zmq was shutting down
| [Wednesday 23 February 2011] [00:53:40] &lt;evan&gt;        and thus still holds pointers to the C++ objects that have been deleted
| [Wednesday 23 February 2011] [00:53:50] &lt;cremes&gt;      the socketpair is used for signaling between the virtual socket and the i/o thread that handles all send/recv on the back-end
| [Wednesday 23 February 2011] [00:53:55] &lt;cremes&gt;      so if what you are saying is true
| [Wednesday 23 February 2011] [00:54:07] &lt;cremes&gt;      then we need to show a repro and get them to fix that up
| [Wednesday 23 February 2011] [00:54:17] &lt;cremes&gt;      the socket should only shut down under 2 conditions
| [Wednesday 23 February 2011] [00:54:24] &lt;andrewvc&gt;    well, I think that&#8217;s all in the strace and backtrace I showed previously
| [Wednesday 23 February 2011] [00:54:26] &lt;cremes&gt;      1. zmq_close() is called on the socket
| [Wednesday 23 February 2011] [00:54:29] &lt;andrewvc&gt;    but I didn&#8217;t frame it right
| [Wednesday 23 February 2011] [00:54:36] &lt;andrewvc&gt;    well, I never called zmq_close on the socket
| [Wednesday 23 February 2011] [00:54:39] &lt;cremes&gt;      2. zmq_term() is called on the context to shut <em>everything</em> down
| [Wednesday 23 February 2011] [00:54:48] &lt;andrewvc&gt;    we&#8217;re not sure why it&#8217;s being shut down
| [Wednesday 23 February 2011] [00:54:55] &lt;cremes&gt;      ok, then 3. bug
| [Wednesday 23 February 2011] [00:55:12] &lt;andrewvc&gt;    in my app I never call those things, it could be related to a ruby exception, or perhaps an exception in eventmachine&#8217;s cext
| [Wednesday 23 February 2011] [00:55:20] &lt;andrewvc&gt;    since moving to jruby fixed the issue
| [Wednesday 23 February 2011] [00:55:22] &lt;evan&gt;        #1 and #2 need to be verified that they&#8217;re not happening
| [Wednesday 23 February 2011] [00:55:31] &lt;evan&gt;        because of the extra indirection of the FFI binding
| [Wednesday 23 February 2011] [00:55:34] &lt;andrewvc&gt;    yep
| [Wednesday 23 February 2011] [00:55:50] &lt;cremes&gt;      yeah, breakpoints on those c++ functions
| [Wednesday 23 February 2011] [00:55:52] &lt;evan&gt;        it seems possible that zmq_term was called (perhaps by a finalizer?)
| [Wednesday 23 February 2011] [00:56:05] &lt;cremes&gt;      only if a context is garbage collected
| [Wednesday 23 February 2011] [00:56:20] &lt;evan&gt;        sure
| [Wednesday 23 February 2011] [00:56:27] &lt;cremes&gt;      and <em>only</em> under 2.1.0... it activates that code based on the version of the 0mq lib that is loaded
| [Wednesday 23 February 2011] [00:56:29] &lt;evan&gt;        basically, you need to verify if those are happening.
| [Wednesday 23 February 2011] [00:56:38] &lt;evan&gt;        or not happening
| [Wednesday 23 February 2011] [00:56:43] &lt;evan&gt;        when the bug occurs
| [Wednesday 23 February 2011] [00:56:44] &lt;andrewvc&gt;    oh, well this was off zmq HEAD
| [Wednesday 23 February 2011] [00:56:47] &lt;evan&gt;        only then can you proceed to #3
| [Wednesday 23 February 2011] [00:56:58] &lt;cremes&gt;      agreed (evan)
| [Wednesday 23 February 2011] [00:57:03] &lt;evan&gt;        additionally, you can certainly repro this all in C++
| [Wednesday 23 February 2011] [00:57:23] &lt;cremes&gt;      maybe andrewvc  can ... ;)
| [Wednesday 23 February 2011] [00:57:27] &lt;evan&gt;        you can see if calling zmq_term, then zmq_getsockopt causes an EBADF
| [Wednesday 23 February 2011] [00:57:30] &lt;evan&gt;        it seems likely it would :)
| [Wednesday 23 February 2011] [00:57:35] &lt;andrewvc&gt;    lol, I&#8217;d actually really like to, I&#8217;ll put some more time into this this weekend
| [Wednesday 23 February 2011] [00:57:39] &lt;cremes&gt;      that&#8217;s easy enough to try
| [Wednesday 23 February 2011] [00:58:14] &lt;cremes&gt;      there are certainly bugs in 0mq; i found another today that i&#8217;ve been chasing for the last 4 days
| [Wednesday 23 February 2011] [00:58:26] &lt;cremes&gt;      i sent them a repro (in ruby)
| [Wednesday 23 February 2011] [00:58:31] &lt;evan&gt;        cremes: yeah, I told andrewvc about that one.
| [Wednesday 23 February 2011] [00:58:35] &lt;evan&gt;        the buffer bug.
| [Wednesday 23 February 2011] [00:58:50] &lt;cremes&gt;      yeah, the same code also crashes rbx... right
| [Wednesday 23 February 2011] [00:58:51] &lt;andrewvc&gt;    yeah
| [Wednesday 23 February 2011] [00:59:15] &lt;cremes&gt;      well, this is all pretty exciting
| [Wednesday 23 February 2011] [00:59:33] &lt;cremes&gt;      thanks for taking some time to dive into this... are you guys as a BoF or something?
| [Wednesday 23 February 2011] [00:59:38] &lt;cremes&gt;      s/as/at/
| [Wednesday 23 February 2011] [00:59:51] &lt;andrewvc&gt;    we&#8217;re both usually at LA Ruby hack nights on tues
| [Wednesday 23 February 2011] [00:59:57] &lt;cremes&gt;      ah...
| [Wednesday 23 February 2011] [01:00:03] &lt;andrewvc&gt;    actually evan&#8217;s a cofounder, him and shane becker run it
| [Wednesday 23 February 2011] [01:00:28] &lt;cremes&gt;      cool.... well, you certainly brought in a knotty problem tonight
| [Wednesday 23 February 2011] [01:00:29] &lt;andrewvc&gt;    what&#8217;s a BoF
| [Wednesday 23 February 2011] [01:00:40] &lt;cremes&gt;      birds of a feather
| [Wednesday 23 February 2011] [01:00:52] &lt;cremes&gt;      it&#8217;s a wwdc term
| [Wednesday 23 February 2011] [01:00:53] &lt;andrewvc&gt;    yeah, I&#8217;m glad evan took a look at it, really interesting stuff going through zeromq internals tracking it down
| [Wednesday 23 February 2011] [01:01:13] &lt;cremes&gt;      heh, i bet evan had some comments on that codebase
| [Wednesday 23 February 2011] [01:01:17] &lt;andrewvc&gt;    lol
| [Wednesday 23 February 2011] [01:01:21] &lt;andrewvc&gt;    how did you know
| [Wednesday 23 February 2011] [01:01:37] &lt;cremes&gt;      i&#8217;ve seen rbx c++ and it&#8217;s nothing like 0mq c++
| [Wednesday 23 February 2011] [01:01:40] &lt;cremes&gt;      :)
| [Wednesday 23 February 2011] [01:01:53] &lt;andrewvc&gt;    hehe
| [Wednesday 23 February 2011] [01:01:59] &lt;cremes&gt;      d&#8217;oh! this is all in-channel!  heh heh
| [Wednesday 23 February 2011] [01:02:01] &lt;evan&gt;        cremes: yeah, I did
| [Wednesday 23 February 2011] [01:02:05] &lt;evan&gt;        <em>eyeroll</em>
| [Wednesday 23 February 2011] [01:02:08] &lt;evan&gt;        :D
| [Wednesday 23 February 2011] [01:02:27] &lt;cremes&gt;      that&#8217;s why i&#8217;m a ruby guy; i have a hard enough time making that look good let alone attempt c++ anymore
| [Wednesday 23 February 2011] [01:02:35] &lt;cremes&gt;      !!
| [Wednesday 23 February 2011] [01:02:44] &lt;cremes&gt;      well, thanks for digging into this
| [Wednesday 23 February 2011] [01:02:44] &lt;cremes&gt;      i
| [Wednesday 23 February 2011] [01:03:02] &lt;cremes&gt;      think between andrewvc and i we can probably produce a repro for these guys
| [Wednesday 23 February 2011] [01:03:10] &lt;cremes&gt;      that ZMQ_EVENTS code is still pretty new
| [Wednesday 23 February 2011] [01:03:17] &lt;cremes&gt;      and likely needs more shake-down
| [Wednesday 23 February 2011] [01:04:04] &lt;cremes&gt;      andrewvc: are you doing your dripdrop testing under rbx full-time yet?
| [Wednesday 23 February 2011] [01:04:25] &lt;andrewvc&gt;    hah, switched to jruby because of this bug
| [Wednesday 23 February 2011] [01:04:32] &lt;andrewvc&gt;    but if I get this back under control, I&#8217;m back on rbx
| [Wednesday 23 February 2011] [01:04:33] &lt;cremes&gt;      pussy
| [Wednesday 23 February 2011] [01:04:40] &lt;cremes&gt;      ;)
| [Wednesday 23 February 2011] [01:04:47] &lt;evan&gt;        cremes: cool.
| [Wednesday 23 February 2011] [01:04:48] &lt;andrewvc&gt;    lol, well, I like my stack traces with my errors
| [Wednesday 23 February 2011] [01:05:10] &lt;cremes&gt;      it doesn&#8217;t make a lot of sense that this would work under jruby but break under rbx, yes?
| [Wednesday 23 February 2011] [01:05:22] &lt;andrewvc&gt;    well, eventmachine has a different java core
| [Wednesday 23 February 2011] [01:05:22] &lt;cremes&gt;      zmq should behave the same in both scenarios
| [Wednesday 23 February 2011] [01:05:30] &lt;andrewvc&gt;    so maybe there&#8217;s an interaction with the cext
| [Wednesday 23 February 2011] [01:05:36] &lt;evan&gt;        also
| [Wednesday 23 February 2011] [01:05:37] &lt;andrewvc&gt;    or maybe I&#8217;m crazy
| [Wednesday 23 February 2011] [01:05:40] &lt;cremes&gt;      crazy
| [Wednesday 23 February 2011] [01:05:41] &lt;evan&gt;        if it is something with finalizers
| [Wednesday 23 February 2011] [01:05:53] &lt;evan&gt;        jruby could have very different finalizer run patterns than rbx
| [Wednesday 23 February 2011] [01:05:56] &lt;evan&gt;        jsut throwing that out there.
| [Wednesday 23 February 2011] [01:06:02] &lt;andrewvc&gt;    yep, I&#8217;ll try removing finalizers as well
| [Wednesday 23 February 2011] [01:06:05] &lt;cremes&gt;      finalizers are easy to disable; andrewvc : give that a try
| [Wednesday 23 February 2011] [01:06:21] &lt;andrewvc&gt;    I definitely will
| [Wednesday 23 February 2011] [01:06:30] &lt;cremes&gt;      yeah, the finalizers could be the culprit
| [Wednesday 23 February 2011] [01:06:46] &lt;cremes&gt;      most of these commands run async on the i/o thread so timing can play a part
| [Wednesday 23 February 2011] [01:07:01] &lt;evan&gt;        cremes: i&#8217;m packing up my laptop
| [Wednesday 23 February 2011] [01:07:02] &lt;andrewvc&gt;    it was always reproducible in sequence though
| [Wednesday 23 February 2011] [01:07:07] &lt;andrewvc&gt;    I as well, they&#8217;re closing down
| [Wednesday 23 February 2011] [01:07:09] &lt;evan&gt;        talk to ya tomorrow, back on the battlefield!
| [Wednesday 23 February 2011] [01:07:09] &lt;andrewvc&gt;    I&#8217;ll ttyl chuck
| [Wednesday 23 February 2011] [01:07:11] &lt;cremes&gt;      evan: g&#8217;night
| [Wednesday 23 February 2011] [01:07:17] &lt;cremes&gt;      goodnight to all!
| [Wednesday 23 February 2011] [01:07:20] &lt;cremes&gt;      happy hacking
| [Wednesday 23 February 2011] [02:31:06] &lt;sustrik&gt;     andrewvc,evan,cremes: just a minor note:
| [Wednesday 23 February 2011] [02:31:19] &lt;andrewvc&gt;    yo
| [Wednesday 23 February 2011] [02:31:25] &lt;sustrik&gt;     in 2.1, zmq_term() should not invalidate the socekts
| [Wednesday 23 February 2011] [02:31:29] &lt;sustrik&gt;     what it does
| [Wednesday 23 February 2011] [02:31:43] &lt;sustrik&gt;     it causes the socket to return ETERM on any subsequent call
| [Wednesday 23 February 2011] [02:31:53] &lt;sustrik&gt;     and wait for the user to close the socket
| [Wednesday 23 February 2011] [02:32:04] &lt;sustrik&gt;     so you should not see EBADF in such case
| [Wednesday 23 February 2011] [02:32:10] &lt;sustrik&gt;     if you do, it&#8217;s a bug
| [Wednesday 23 February 2011] [02:32:19] &lt;andrewvc&gt;    oh, cool, btw I found the answer to that issue I had sustrik
| [Wednesday 23 February 2011] [02:32:26] &lt;andrewvc&gt;    the weird one with the strace and everything
| [Wednesday 23 February 2011] [02:32:32] &lt;sustrik&gt;     what was that?
| [Wednesday 23 February 2011] [02:33:11] &lt;andrewvc&gt;    Well, haven&#8217;t tested it fully yet, but I&#8217;m fairly sure that eventmachine was catching a ruby exception, and then trying to shutdown() and close() all its FDs
| [Wednesday 23 February 2011] [02:33:14] &lt;andrewvc&gt;    including the ZMQ ones
| [Wednesday 23 February 2011] [02:33:21] &lt;andrewvc&gt;    which is not good
| [Wednesday 23 February 2011] [02:33:29] &lt;sustrik&gt;     i see
| [Wednesday 23 February 2011] [02:33:43] &lt;andrewvc&gt;    thanks for taking a look at it though
| [Wednesday 23 February 2011] [02:33:48] &lt;sustrik&gt;     so you&#8217;ve used closed socket afterwards, right?
| [Wednesday 23 February 2011] [02:34:11] &lt;andrewvc&gt;    well, yeah, the zmq_socket wasn&#8217;t closed, but the FD that ZMQ_FD exposes was
| [Wednesday 23 February 2011] [02:34:19] &lt;sustrik&gt;     oh my
| [Wednesday 23 February 2011] [02:34:24] &lt;sustrik&gt;     :)
| [Wednesday 23 February 2011] [02:34:28] &lt;andrewvc&gt;    yeah, that&#8217;s why it was so odd to track down lol
| [Wednesday 23 February 2011] [02:35:01] &lt;andrewvc&gt;    thanks for the heads up on zmq_term
| [Wednesday 23 February 2011] [03:05:18] &lt;CIA-21&gt;      zeromq2: 03Martin Sustrik 07master * r820fec7 10/ include/zmq.h :
| [Wednesday 23 February 2011] [03:05:18] &lt;CIA-21&gt;      zeromq2: Version bumped to 2.2.0
| [Wednesday 23 February 2011] [03:05:18] &lt;CIA-21&gt;      zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/gApquE">http://bit.ly/gApquE</a>
| [Wednesday 23 February 2011] [03:33:35] &lt;ianbarber&gt;   the blog post does kind of just dismiss the idea that a event driven/actor model is practical - but the issue of losing control flow he describes are basically true of any callback based language, like javascript for example. I would also think the control flow problems would occur in any language which is more declarative than imperative, and there are many succesful examples of those too, so I&#8217;m not so sure that the negative poin
| [Wednesday 23 February 2011] [03:33:35] &lt;ianbarber&gt;   good one
| [Wednesday 23 February 2011] [03:33:58] &lt;ianbarber&gt;   the stuff about STM looks good, just seems the case against message passing is a bit thin
| [Wednesday 23 February 2011] [03:36:17] &lt;ianbarber&gt;   even the paper references, the base MP implementation is in C, for students, which is not necessarily a sensible thing. I would suspect if it were given to Erlang or javascript coders, you&#8217;d have different results, as there is a slightly different mindset.
| [Wednesday 23 February 2011] [03:36:55] &lt;Guthur&gt;      I had a little trouble buying into his arguments against MP, but I thought maybe it was because I was sold on 0MQ as one solution to concurrency problems
| [Wednesday 23 February 2011] [03:39:29] &lt;<a href="#id2931"><span class="problematic" id="id2932">sustrik_</span></a>&gt;    i think he&#8217;s right that implementing a complex application using MP can be really complex
| [Wednesday 23 February 2011] [03:39:42] &lt;<a href="#id2933"><span class="problematic" id="id2934">sustrik_</span></a>&gt;    you have hundreds or thousands of components
| [Wednesday 23 February 2011] [03:39:43] &lt;guido_g&gt;     hrhrhr
| [Wednesday 23 February 2011] [03:39:53] &lt;<a href="#id2935"><span class="problematic" id="id2936">sustrik_</span></a>&gt;    sending messages randomly among them
| [Wednesday 23 February 2011] [03:40:10] &lt;<a href="#id2937"><span class="problematic" id="id2938">sustrik_</span></a>&gt;    you have little idea of how ordering is going to look like
| [Wednesday 23 February 2011] [03:40:11] &lt;guido_g&gt;     isn&#8217;t implementig a complex application always... complex?
| [Wednesday 23 February 2011] [03:40:11] &lt;<a href="#id2939"><span class="problematic" id="id2940">sustrik_</span></a>&gt;    etc.
| [Wednesday 23 February 2011] [03:40:55] &lt;<a href="#id2941"><span class="problematic" id="id2942">sustrik_</span></a>&gt;    yes, what he&#8217;s saying is that complexity of MP solution on shared-data solution is more or less the same
| [Wednesday 23 February 2011] [03:41:29] &lt;Guthur&gt;      well, I suppose it&#8217;s better than the complexity multiplier of locking strategies
| [Wednesday 23 February 2011] [03:41:55] &lt;<a href="#id2943"><span class="problematic" id="id2944">sustrik_</span></a>&gt;    hard to say, some research would be needed
| [Wednesday 23 February 2011] [03:42:30] &lt;<a href="#id2945"><span class="problematic" id="id2946">sustrik_</span></a>&gt;    what really makes difference imo is being able to decompose message flows
| [Wednesday 23 February 2011] [03:42:47] &lt;<a href="#id2947"><span class="problematic" id="id2948">sustrik_</span></a>&gt;    into sensible well defined subsystems
| [Wednesday 23 February 2011] [03:42:59] &lt;ianbarber&gt;   yeah
| [Wednesday 23 February 2011] [03:43:10] &lt;guido_g&gt;     the message as/is the interface
| [Wednesday 23 February 2011] [03:43:11] &lt;<a href="#id2949"><span class="problematic" id="id2950">sustrik_</span></a>&gt;    which, of course, is what message patterns do
| [Wednesday 23 February 2011] [03:43:34] &lt;<a href="#id2951"><span class="problematic" id="id2952">sustrik_</span></a>&gt;    you can&#8217;t send messages randomly back and forth
| [Wednesday 23 February 2011] [03:43:41] &lt;ianbarber&gt;   i think that for practically building complex systems, it is often about choosing the right pre-existing tools to do the job, the building on to your own
| [Wednesday 23 February 2011] [03:43:47] &lt;<a href="#id2953"><span class="problematic" id="id2954">sustrik_</span></a>&gt;    you have to say: this is my pub/sub channel
| [Wednesday 23 February 2011] [03:43:57] &lt;<a href="#id2955"><span class="problematic" id="id2956">sustrik_</span></a>&gt;    and that&#8217;s what it is
| [Wednesday 23 February 2011] [03:45:03] &lt;<a href="#id2957"><span class="problematic" id="id2958">sustrik_</span></a>&gt;    so you have clear idea how the communication work
| [Wednesday 23 February 2011] [03:45:35] &lt;ianbarber&gt;   you know, there&#8217;s a lot about distributed processing different types of work, but if i have to do one kind i&#8217;ll use piccolo, another a database, and ideally you&#8217;d have a good substrate for having those bits communicate efficiently, and 0mq is good for that. i see a fair few projects that I wish they had used it on the underlying layer, as it would be more reliable than their current communication solution, and more extensible at th
| [Wednesday 23 February 2011] [03:45:35] &lt;ianbarber&gt;   level
| [Wednesday 23 February 2011] [03:46:35] &lt;<a href="#id2959"><span class="problematic" id="id2960">sustrik_</span></a>&gt;    yes
| [Wednesday 23 February 2011] [03:47:14] &lt;<a href="#id2961"><span class="problematic" id="id2962">sustrik_</span></a>&gt;    i think any programmer that&#8217;s in business for some time have written at least a couple of ad hoc communication solutions :)
| [Wednesday 23 February 2011] [03:47:36] &lt;Guthur&gt;      Microsoft Research were looking into STM in C# (SXM), but the last update was 2005, seems a long time ago
| [Wednesday 23 February 2011] [03:48:04] &lt;<a href="#id2963"><span class="problematic" id="id2964">sustrik_</span></a>&gt;    the problem with STM, obviosuly, is that it doesn&#8217;t scale
| [Wednesday 23 February 2011] [03:49:39] &lt;Guthur&gt;      we are finding scaling issues with our inter threading stuff already
| [Wednesday 23 February 2011] [03:50:06] &lt;Guthur&gt;      I couldn&#8217;t sell them on MP(0MQ), so they decided to try with explicit locking
| [Wednesday 23 February 2011] [03:50:27] &lt;Guthur&gt;      it&#8217;s taken at least twice as long, so far, and it still doesn&#8217;t work
| [Wednesday 23 February 2011] [03:52:05] &lt;Guthur&gt;      Thats why I was looking for concurrency articles, I really want to convince them of the difficulty in developing scalable solutions for our problem
| [Wednesday 23 February 2011] [03:52:06] &lt;<a href="#id2965"><span class="problematic" id="id2966">sustrik_</span></a>&gt;    what&#8217;s &#8220;inter threading&#8221;?
| [Wednesday 23 February 2011] [03:52:29] &lt;Guthur&gt;      sorry, I meant communicating between threads
| [Wednesday 23 February 2011] [03:53:16] &lt;<a href="#id2967"><span class="problematic" id="id2968">sustrik_</span></a>&gt;    i see
| [Wednesday 23 February 2011] [03:53:20] &lt;Guthur&gt;      it&#8217;s still that same problem I have talked about a week or 2 ago
| [Wednesday 23 February 2011] [03:53:25] &lt;Guthur&gt;      have/had
| [Wednesday 23 February 2011] [03:55:39] &lt;Guthur&gt;      N request threads waiting for data from async reply threads
| [Wednesday 23 February 2011] [04:05:26] &lt;pieterh&gt;     Guthur: are we still discussing that blog post?
| [Wednesday 23 February 2011] [04:05:58] &lt;pieterh&gt;     What he seems to be saying is &#8220;I don&#8217;t have decent MP patterns, so I&#8217;m going to invent a better shared memory technology&#8221;
| [Wednesday 23 February 2011] [04:07:23] &lt;pieterh&gt;     it is a straw man blog post
| [Wednesday 23 February 2011] [04:08:45] &lt;pieterh&gt;     <a href="#id2969"><span class="problematic" id="id2970">sustrik_</span></a> thanks for the NEWS update, how do we apply this to the two branches now?
| [Wednesday 23 February 2011] [04:19:00] &lt;pieterh&gt;     mikko: you around?
| [Wednesday 23 February 2011] [04:20:00] &lt;<a href="#id2971"><span class="problematic" id="id2972">sustrik_</span></a>&gt;    pieterh: the news are specific to the release
| [Wednesday 23 February 2011] [04:20:12] &lt;<a href="#id2973"><span class="problematic" id="id2974">sustrik_</span></a>&gt;    thus 2.1.1 release notes make no sense in 2.2 branch
| [Wednesday 23 February 2011] [04:20:31] &lt;pieterh&gt;     <a href="#id2975"><span class="problematic" id="id2976">sustrik_</span></a> ... the NEWS in your master should be a complete history, no?
| [Wednesday 23 February 2011] [04:20:44] &lt;pieterh&gt;     do you intend to remove old release notes?
| [Wednesday 23 February 2011] [04:21:40] &lt;pieterh&gt;     it goes back to version 0.2...
| [Wednesday 23 February 2011] [04:22:17] &lt;<a href="#id2977"><span class="problematic" id="id2978">sustrik_</span></a>&gt;    but it doesn&#8217;t make sense once you have two branches
| [Wednesday 23 February 2011] [04:22:53] &lt;pieterh&gt;     i really want my branch to be passive, not fragment the main git
| [Wednesday 23 February 2011] [04:23:23]        * pieterh thinks...
| [Wednesday 23 February 2011] [04:24:03] &lt;pieterh&gt;     everything in your NEWS file is for historical interest
| [Wednesday 23 February 2011] [04:24:29] &lt;pieterh&gt;     I&#8217;d recommend that remain a complete record of all officially released versions
| [Wednesday 23 February 2011] [04:24:52] &lt;pieterh&gt;     if someone forks a branch and makes their own patches, that&#8217;s different
| [Wednesday 23 February 2011] [04:25:03] &lt;pieterh&gt;     but this is about a continuous recorded history
| [Wednesday 23 February 2011] [04:25:19] &lt;<a href="#id2979"><span class="problematic" id="id2980">sustrik_</span></a>&gt;    the problem is that there are overlaps
| [Wednesday 23 February 2011] [04:25:32] &lt;pieterh&gt;     for example the same patch on 2.2 and 2.1?
| [Wednesday 23 February 2011] [04:25:37] &lt;<a href="#id2981"><span class="problematic" id="id2982">sustrik_</span></a>&gt;    yes
| [Wednesday 23 February 2011] [04:25:41] &lt;pieterh&gt;     we handled that in OpenAMQ quite easily
| [Wednesday 23 February 2011] [04:26:15] &lt;<a href="#id2983"><span class="problematic" id="id2984">sustrik_</span></a>&gt;    but the main problem is there&#8217;s <em>no</em> 2.1 history in 2.2 repo
| [Wednesday 23 February 2011] [04:26:32] &lt;<a href="#id2985"><span class="problematic" id="id2986">sustrik_</span></a>&gt;    so placing 2.1 release notes there is inconsistent
| [Wednesday 23 February 2011] [04:26:44] &lt;pieterh&gt;     there is no 2.1 tag in 2.2 repo, that&#8217;s true
| [Wednesday 23 February 2011] [04:27:09] &lt;pieterh&gt;     I don&#8217;t know what you mean by &#8220;there is no 2.1 history&#8221;
| [Wednesday 23 February 2011] [04:27:48] &lt;<a href="#id2987"><span class="problematic" id="id2988">sustrik_</span></a>&gt;    git repo doesn&#8217;t contain the 2.1 branch
| [Wednesday 23 February 2011] [04:27:56] &lt;pieterh&gt;     a branch is not history
| [Wednesday 23 February 2011] [04:27:58] &lt;<a href="#id2989"><span class="problematic" id="id2990">sustrik_</span></a>&gt;    you&#8217;ve created separate repo yesterday
| [Wednesday 23 February 2011] [04:28:04] &lt;pieterh&gt;     a branch is just an access path
| [Wednesday 23 February 2011] [04:28:14] &lt;<a href="#id2991"><span class="problematic" id="id2992">sustrik_</span></a>&gt;    so the NEWs in 2.2 repo would refer to code in 2.1 repo
| [Wednesday 23 February 2011] [04:28:28] &lt;pieterh&gt;     yes
| [Wednesday 23 February 2011] [04:28:40] &lt;pieterh&gt;     and since we&#8217;re coordinating between the two repos, using pull requests, etc. that&#8217;s normal
| [Wednesday 23 February 2011] [04:29:11] &lt;pieterh&gt;     look, I can fork the NEWS file, np, but it is IMO wrong and we&#8217;ll have to fix it up later
| [Wednesday 23 February 2011] [04:29:23] &lt;<a href="#id2993"><span class="problematic" id="id2994">sustrik_</span></a>&gt;    it&#8217;s ok imo
| [Wednesday 23 February 2011] [04:29:49] &lt;pieterh&gt;     this will lead to the 2.1 repo becoming detached in some sense
| [Wednesday 23 February 2011] [04:30:01] &lt;<a href="#id2995"><span class="problematic" id="id2996">sustrik_</span></a>&gt;    that&#8217;s the goal, isn&#8217;t it
| [Wednesday 23 February 2011] [04:30:04] &lt;pieterh&gt;     that only makes sense if we likewise detach a 2.0 repo at some point
| [Wednesday 23 February 2011] [04:30:22] &lt;pieterh&gt;     in that case, yes
| [Wednesday 23 February 2011] [04:30:48] &lt;<a href="#id2997"><span class="problematic" id="id2998">sustrik_</span></a>&gt;    you can detach 2.0 if you want
| [Wednesday 23 February 2011] [04:30:57] &lt;<a href="#id2999"><span class="problematic" id="id3000">sustrik_</span></a>&gt;    i&#8217;m happy with that
| [Wednesday 23 February 2011] [04:31:07] &lt;pieterh&gt;     happy = formal approval? :-)
| [Wednesday 23 February 2011] [04:31:26] &lt;<a href="#id3001"><span class="problematic" id="id3002">sustrik_</span></a>&gt;    yes. i&#8217;ll be happy to get rid of it :)
| [Wednesday 23 February 2011] [04:31:33] &lt;pieterh&gt;     ok, we have a good plan then
| [Wednesday 23 February 2011] [04:31:42] &lt;pieterh&gt;     get 2.0 out of your hair as well
| [Wednesday 23 February 2011] [04:31:54] &lt;pieterh&gt;     and provide an easy way to maintain these parallel versions
| [Wednesday 23 February 2011] [04:32:08] &lt;pieterh&gt;     we do have people using 2.0 in production and there will be patches on it at some point
| [Wednesday 23 February 2011] [04:32:23] &lt;pieterh&gt;     so we&#8217;re into three rolling versions, which is where I like to be...
| [Wednesday 23 February 2011] [04:32:59] &lt;pieterh&gt;     boring, normal, exciting...
| [Wednesday 23 February 2011] [04:33:10] &lt;<a href="#id3003"><span class="problematic" id="id3004">sustrik_</span></a>&gt;    ok
| [Wednesday 23 February 2011] [04:33:11] &lt;pieterh&gt;     <a href="#id3005"><span class="problematic" id="id3006">sustrik_</span></a>: thanks, I have everything I need to make the release now
| [Wednesday 23 February 2011] [04:33:23] &lt;pieterh&gt;     just let me grab a coffee...
| [Wednesday 23 February 2011] [04:34:16] &lt;pieterh&gt;     oh, everyone, I have news that Brett Cameron (who ported 0MQ to OpenVMS), who lives in Christchurch NZ, is safe, though his house was badly damaged
| [Wednesday 23 February 2011] [04:53:40] &lt;mikko&gt;       pieterh: am now
| [Wednesday 23 February 2011] [04:54:19] &lt;pieterh&gt;     mikko: just in time... what&#8217;s the status of OpenPGM wrt MSVC on the master?
| [Wednesday 23 February 2011] [04:54:46] &lt;mikko&gt;       pieterh: builds without issues
| [Wednesday 23 February 2011] [04:54:53] &lt;mikko&gt;       there is WithOpenPGM build target
| [Wednesday 23 February 2011] [04:54:57] &lt;mikko&gt;       no wait
| [Wednesday 23 February 2011] [04:55:00] &lt;pieterh&gt;     excellent, that&#8217;s what... wait...
| [Wednesday 23 February 2011] [04:55:07] &lt;mikko&gt;       it&#8217;s broken
| [Wednesday 23 February 2011] [04:55:25] &lt;pieterh&gt;     ok, that&#8217;s fine
| [Wednesday 23 February 2011] [04:55:27] &lt;mikko&gt;       <a class="reference external" href="http://build.zero.mq/job/ZeroMQ2-core-master_MSVC-win7/">http://build.zero.mq/job/ZeroMQ2-core-master_MSVC-win7/</a>
| [Wednesday 23 February 2011] [04:55:49] &lt;mikko&gt;       it&#8217;s fixed it seems. there was an issue using different definition of bool between the two iirc
| [Wednesday 23 February 2011] [04:56:23] &lt;mikko&gt;       <a class="reference external" href="http://snapshot.zero.mq/msvc2008/">http://snapshot.zero.mq/msvc2008/</a> these snapshots are built with pgm enabled
| [Wednesday 23 February 2011] [04:56:34] &lt;mikko&gt;       so in theory people can just download the dll and import library
| [Wednesday 23 February 2011] [04:56:39] &lt;pieterh&gt;     lovely
| [Wednesday 23 February 2011] [04:56:52] &lt;pieterh&gt;     I&#8217;m making the 2.1.1 (rc1) release now
| [Wednesday 23 February 2011] [04:57:22] &lt;mikko&gt;       this means that autoconf builds for openpgm have to wait until 2.2.x ?
| [Wednesday 23 February 2011] [04:57:38] &lt;pieterh&gt;     we can try to get them into rc2, np
| [Wednesday 23 February 2011] [04:57:44] &lt;mikko&gt;       ok cool
| [Wednesday 23 February 2011] [04:58:04] &lt;pieterh&gt;     i&#8217;m aiming at three releases, so stable after rc2, depending on how many issues we have
| [Wednesday 23 February 2011] [04:58:24] &lt;mikko&gt;       people are gonna test it when it&#8217;s stable anyway
| [Wednesday 23 February 2011] [04:58:49] &lt;pieterh&gt;     you think people won&#8217;t use an rc?
| [Wednesday 23 February 2011] [04:59:20] &lt;mikko&gt;       well, the large majority will only jump ship when it&#8217;s stable
| [Wednesday 23 February 2011] [04:59:29] &lt;pieterh&gt;     we&#8217;ll see, if no-one reports issues on the rcs then next time we can lie and just push straight from git master to stable
| [Wednesday 23 February 2011] [04:59:44] &lt;pieterh&gt;     and then continue with service packs... :-)
| [Wednesday 23 February 2011] [05:00:11] &lt;mikko&gt;       paid-for service packs
| [Wednesday 23 February 2011] [05:00:16] &lt;mikko&gt;       like windows back in the day
| [Wednesday 23 February 2011] [05:01:09] &lt;<a href="#id3007"><span class="problematic" id="id3008">sustrik_</span></a>&gt;    pieterh: just keep on incrementing the third version number
| [Wednesday 23 February 2011] [05:01:14] &lt;<a href="#id3009"><span class="problematic" id="id3010">sustrik_</span></a>&gt;    no need for dourth one
| [Wednesday 23 February 2011] [05:01:18] &lt;<a href="#id3011"><span class="problematic" id="id3012">sustrik_</span></a>&gt;    fourth
| [Wednesday 23 February 2011] [05:01:39] &lt;pieterh&gt;     <a href="#id3013"><span class="problematic" id="id3014">sustrik_</span></a>: yes, that&#8217;s always the case but the problem is the &#8216;beta&#8217; vs. &#8216;stable&#8217; terminology
| [Wednesday 23 February 2011] [05:01:43] &lt;<a href="#id3015"><span class="problematic" id="id3016">sustrik_</span></a>&gt;    a
| [Wednesday 23 February 2011] [05:01:45] &lt;<a href="#id3017"><span class="problematic" id="id3018">sustrik_</span></a>&gt;    ok
| [Wednesday 23 February 2011] [05:01:54] &lt;pieterh&gt;     we need a finer, more precise terminology
| [Wednesday 23 February 2011] [05:02:10] &lt;pieterh&gt;     in fact there are three levels afaics
| [Wednesday 23 February 2011] [05:02:23] &lt;pieterh&gt;     ABI version, package/software version, stability level
| [Wednesday 23 February 2011] [05:02:46] &lt;<a href="#id3019"><span class="problematic" id="id3020">sustrik_</span></a>&gt;    the stability level is pretty informal concept
| [Wednesday 23 February 2011] [05:03:03] &lt;pieterh&gt;     yet it&#8217;s the most critical for users
| [Wednesday 23 February 2011] [05:03:07] &lt;<a href="#id3021"><span class="problematic" id="id3022">sustrik_</span></a>&gt;    one man&#8217;s beta is another man&#8217;s stable
| [Wednesday 23 February 2011] [05:03:10] &lt;mikko&gt;       patch level some say
| [Wednesday 23 February 2011] [05:03:24] &lt;pieterh&gt;     no, it&#8217;s a statement of collective confidence
| [Wednesday 23 February 2011] [05:03:32] &lt;pieterh&gt;     &#8220;you can trust this for production&#8221;
| [Wednesday 23 February 2011] [05:03:42] &lt;pieterh&gt;     &#8220;we recommend you use this for new projects&#8221;
| [Wednesday 23 February 2011] [05:03:55] &lt;pieterh&gt;     &#8220;this version is boring and old but very well known&#8221;
| [Wednesday 23 February 2011] [05:03:57] &lt;pieterh&gt;     etc.
| [Wednesday 23 February 2011] [05:04:00] &lt;mikko&gt;       <a class="reference external" href="http://apr.apache.org/versioning.html">http://apr.apache.org/versioning.html</a>
| [Wednesday 23 February 2011] [05:04:28] &lt;pieterh&gt;     mikko: APR has been &#8220;boring and old and very well known&#8221; since 1999
| [Wednesday 23 February 2011] [05:04:58] &lt;pieterh&gt;     ok, I&#8217;ll make it up as I go along and if anyone dislikes my terminology, just shout
| [Wednesday 23 February 2011] [05:05:55] &lt;mikko&gt;       <a href="#id3023"><span class="problematic" id="id3024">sustrik_</span></a>: is there a plan to merge zmq devices into one binary?
| [Wednesday 23 February 2011] [05:06:12] &lt;pieterh&gt;     mikko: I&#8217;d like to remove device main programs from the core
| [Wednesday 23 February 2011] [05:06:17] &lt;<a href="#id3025"><span class="problematic" id="id3026">sustrik_</span></a>&gt;    there&#8217;s a plan to drop the devices altogether
| [Wednesday 23 February 2011] [05:06:32] &lt;pieterh&gt;     I already did this in 2.0.7 or so but it was rolled back
| [Wednesday 23 February 2011] [05:06:35] &lt;<a href="#id3027"><span class="problematic" id="id3028">sustrik_</span></a>&gt;    yeah, but can&#8217;t do that till 3.0
| [Wednesday 23 February 2011] [05:06:47] &lt;pieterh&gt;     <a href="#id3029"><span class="problematic" id="id3030">sustrik_</span></a>: why not? it&#8217;s not an API issue
| [Wednesday 23 February 2011] [05:06:56] &lt;pieterh&gt;     the <em>main</em> programs, not the zmq_devices() function
| [Wednesday 23 February 2011] [05:06:57] &lt;<a href="#id3031"><span class="problematic" id="id3032">sustrik_</span></a>&gt;    it&#8217;s a backward comaptibility issue
| [Wednesday 23 February 2011] [05:07:25] &lt;pieterh&gt;     <a href="#id3033"><span class="problematic" id="id3034">sustrik_</span></a>: how?
| [Wednesday 23 February 2011] [05:07:49] &lt;<a href="#id3035"><span class="problematic" id="id3036">sustrik_</span></a>&gt;    you install a new version and suddenly the devices you were using are no longer there
| [Wednesday 23 February 2011] [05:07:52] &lt;pieterh&gt;     the device main programs are not even documented, nor finished, nor really usable
| [Wednesday 23 February 2011] [05:08:03] &lt;pieterh&gt;     no configuration, no command line control, nothing
| [Wednesday 23 February 2011] [05:08:12] &lt;mikko&gt;       they have xml config
| [Wednesday 23 February 2011] [05:08:25] &lt;pieterh&gt;     sorry, yes, they do
| [Wednesday 23 February 2011] [05:08:35] &lt;pieterh&gt;     I&#8217;d like to move them out of core ASAP
| [Wednesday 23 February 2011] [05:08:39] &lt;<a href="#id3037"><span class="problematic" id="id3038">sustrik_</span></a>&gt;    i&#8217;ve promised to keep backwards compatibility till next major version
| [Wednesday 23 February 2011] [05:08:46] &lt;<a href="#id3039"><span class="problematic" id="id3040">sustrik_</span></a>&gt;    and i&#8217;ll keep the promise
| [Wednesday 23 February 2011] [05:08:53] &lt;pieterh&gt;     <a href="#id3041"><span class="problematic" id="id3042">sustrik_</span></a>: it&#8217;s for APIs, not these addons
| [Wednesday 23 February 2011] [05:09:00] &lt;pieterh&gt;     that&#8217;s what it says in the contract
| [Wednesday 23 February 2011] [05:09:15]        * pieterh goes to check the contract
| [Wednesday 23 February 2011] [05:09:38] &lt;pieterh&gt;     &#8220;Updates don&#8217;t change API, ABI, wire protocol or semantics.&#8221;
| [Wednesday 23 February 2011] [05:09:44] &lt;pieterh&gt;     it&#8217;s quite explicit
| [Wednesday 23 February 2011] [05:10:00] &lt;pieterh&gt;     Plus, &#8220;New minor version allows for new functionality (i.e. new APIs), slight changes to the semantics etc.&#8221;
| [Wednesday 23 February 2011] [05:10:22] &lt;<a href="#id3043"><span class="problematic" id="id3044">sustrik_</span></a>&gt;    exactly
| [Wednesday 23 February 2011] [05:10:31] &lt;<a href="#id3045"><span class="problematic" id="id3046">sustrik_</span></a>&gt;    command lines are part of the API
| [Wednesday 23 February 2011] [05:10:38] &lt;pieterh&gt;     not unless they are documented
| [Wednesday 23 February 2011] [05:10:43] &lt;pieterh&gt;     the devices are not documented
| [Wednesday 23 February 2011] [05:10:43] &lt;<a href="#id3047"><span class="problematic" id="id3048">sustrik_</span></a>&gt;    :)
| [Wednesday 23 February 2011] [05:10:47] &lt;pieterh&gt;     I rest my case, m&#8217;lod
| [Wednesday 23 February 2011] [05:10:56] &lt;pieterh&gt;     further... as long as they sit in core, they are not improved
| [Wednesday 23 February 2011] [05:11:15] &lt;<a href="#id3049"><span class="problematic" id="id3050">sustrik_</span></a>&gt;    yes, they are freezed
| [Wednesday 23 February 2011] [05:11:16] &lt;pieterh&gt;     I have far superior code ready
| [Wednesday 23 February 2011] [05:11:24] &lt;<a href="#id3051"><span class="problematic" id="id3052">sustrik_</span></a>&gt;    marked to be removed in 3.0
| [Wednesday 23 February 2011] [05:11:28] &lt;pieterh&gt;     bleh
| [Wednesday 23 February 2011] [05:11:35] &lt;<a href="#id3053"><span class="problematic" id="id3054">sustrik_</span></a>&gt;    backward compatibility
| [Wednesday 23 February 2011] [05:11:40] &lt;<a href="#id3055"><span class="problematic" id="id3056">sustrik_</span></a>&gt;    shrug
| [Wednesday 23 February 2011] [05:11:49] &lt;pieterh&gt;     I bet you a beer: ask on zeromq-dev if anyone objects to moving these today to another repo
| [Wednesday 23 February 2011] [05:11:57] &lt;pieterh&gt;     each objection, 1 beer I owe you
| [Wednesday 23 February 2011] [05:12:10] &lt;<a href="#id3057"><span class="problematic" id="id3058">sustrik_</span></a>&gt;    it&#8217;s not about concensus, it&#8217;s about contract
| [Wednesday 23 February 2011] [05:12:32] &lt;<a href="#id3059"><span class="problematic" id="id3060">sustrik_</span></a>&gt;    so that even those that are not on the ml have clear guarantees
| [Wednesday 23 February 2011] [05:12:34] &lt;pieterh&gt;     so point me to the contract that covers these device main programs
| [Wednesday 23 February 2011] [05:12:35] &lt;<a href="#id3061"><span class="problematic" id="id3062">sustrik_</span></a>&gt;    about upgrading
| [Wednesday 23 February 2011] [05:12:46] &lt;pieterh&gt;     either documentation
| [Wednesday 23 February 2011] [05:12:51] &lt;pieterh&gt;     or explicit contract...
| [Wednesday 23 February 2011] [05:12:52] &lt;pieterh&gt;     where?
| [Wednesday 23 February 2011] [05:13:05] &lt;<a href="#id3063"><span class="problematic" id="id3064">sustrik_</span></a>&gt;    &#8220;Updates don&#8217;t change API, ABI, wire protocol or semantics&#8221;
| [Wednesday 23 February 2011] [05:13:12] &lt;pieterh&gt;     SYNOPSIS
| [Wednesday 23 February 2011] [05:13:12] &lt;pieterh&gt;            To be written.
| [Wednesday 23 February 2011] [05:13:12] &lt;pieterh&gt;     DESCRIPTION
| [Wednesday 23 February 2011] [05:13:12] &lt;pieterh&gt;            To be written.
| [Wednesday 23 February 2011] [05:13:12] &lt;pieterh&gt;     OPTIONS
| [Wednesday 23 February 2011] [05:13:13] &lt;pieterh&gt;            To be written.
| [Wednesday 23 February 2011] [05:13:28] &lt;pieterh&gt;     if you define undocumented command lines as &#8220;API&#8221;... well...
| [Wednesday 23 February 2011] [05:13:32] &lt;pieterh&gt;     fine
| [Wednesday 23 February 2011] [05:13:41] &lt;<a href="#id3065"><span class="problematic" id="id3066">sustrik_</span></a>&gt;    application interface
| [Wednesday 23 February 2011] [05:13:46] &lt;<a href="#id3067"><span class="problematic" id="id3068">sustrik_</span></a>&gt;    that&#8217;s it
| [Wednesday 23 February 2011] [05:14:02] &lt;pieterh&gt;     &#8220;To be written&#8221; is not an API contract
| [Wednesday 23 February 2011] [05:14:05] &lt;pieterh&gt;     sorry, but it&#8217;s not
| [Wednesday 23 February 2011] [05:14:10] &lt;pieterh&gt;     &#8220;read the code&#8221; is not a contract
| [Wednesday 23 February 2011] [05:14:15] &lt;<a href="#id3069"><span class="problematic" id="id3070">sustrik_</span></a>&gt;    the API itself is the contract
| [Wednesday 23 February 2011] [05:14:17] &lt;pieterh&gt;     documentation is the very basis of a contract
| [Wednesday 23 February 2011] [05:14:31] &lt;pieterh&gt;     you have used that argument yourself on multiple occasions
| [Wednesday 23 February 2011] [05:14:43] &lt;pieterh&gt;     &#8220;I&#8217;ve deliberately not documented it so that I can change or remove it&#8221;
| [Wednesday 23 February 2011] [05:14:50] &lt;pieterh&gt;     well, whatever
| [Wednesday 23 February 2011] [05:14:51] &lt;<a href="#id3071"><span class="problematic" id="id3072">sustrik_</span></a>&gt;    yes, but then i&#8217;ve got yelled on on several occassions
| [Wednesday 23 February 2011] [05:15:08] &lt;<a href="#id3073"><span class="problematic" id="id3074">sustrik_</span></a>&gt;    so i&#8217;ve written the contract
| [Wednesday 23 February 2011] [05:15:23] &lt;pieterh&gt;     shrug
| [Wednesday 23 February 2011] [05:15:38] &lt;<a href="#id3075"><span class="problematic" id="id3076">sustrik_</span></a>&gt;    let me make the cotract more precise about the guarantees...
| [Wednesday 23 February 2011] [05:16:18] &lt;mikko&gt;       i think martin has a good point here
| [Wednesday 23 February 2011] [05:16:29] &lt;mikko&gt;       this might break for example possible automated builds people are using
| [Wednesday 23 February 2011] [05:16:30] &lt;mikko&gt;       etc
| [Wednesday 23 February 2011] [05:16:36] &lt;pieterh&gt;     basically, by insisting that these addons remain in core, you&#8217;re throttling the use of devices
| [Wednesday 23 February 2011] [05:16:47] &lt;pieterh&gt;     mikko: it&#8217;s for a 2.2 release at best
| [Wednesday 23 February 2011] [05:16:55] &lt;<a href="#id3077"><span class="problematic" id="id3078">sustrik_</span></a>&gt;    wait a sec
| [Wednesday 23 February 2011] [05:17:03] &lt;<a href="#id3079"><span class="problematic" id="id3080">sustrik_</span></a>&gt;    why throttling?
| [Wednesday 23 February 2011] [05:17:04] &lt;mikko&gt;       pieterh: what do you mean by that?
| [Wednesday 23 February 2011] [05:17:14] &lt;pieterh&gt;     well, look at the code, and docs
| [Wednesday 23 February 2011] [05:17:37] &lt;pieterh&gt;     compare to...https://github.com/zeromq/zfl/tree/master/examples
| [Wednesday 23 February 2011] [05:17:41] &lt;mikko&gt;       can we document that these devices are provided as an example? and setup a separate wiki page for devices people create?
| [Wednesday 23 February 2011] [05:17:42] &lt;<a href="#id3081"><span class="problematic" id="id3082">sustrik_</span></a>&gt;    people should write their own devices
| [Wednesday 23 February 2011] [05:17:45] &lt;pieterh&gt;     mikko asks a question that was resolved ages ago
| [Wednesday 23 February 2011] [05:17:54] &lt;<a href="#id3083"><span class="problematic" id="id3084">sustrik_</span></a>&gt;    or you can provide them as a library
| [Wednesday 23 February 2011] [05:18:02] &lt;pieterh&gt;     done that, done that
| [Wednesday 23 February 2011] [05:18:10] &lt;<a href="#id3085"><span class="problematic" id="id3086">sustrik_</span></a>&gt;    what&#8217;s the problem then?
| [Wednesday 23 February 2011] [05:18:17] &lt;pieterh&gt;     but as long as these remain in zeromq2, people will assume those are the only official devices
| [Wednesday 23 February 2011] [05:18:20] &lt;pieterh&gt;     and they are not maintained
| [Wednesday 23 February 2011] [05:18:23] &lt;pieterh&gt;     and they are not documented
| [Wednesday 23 February 2011] [05:18:27] &lt;<a href="#id3087"><span class="problematic" id="id3088">sustrik_</span></a>&gt;    ok, let me fix the docs
| [Wednesday 23 February 2011] [05:18:28] &lt;pieterh&gt;     and they are rubbish
| [Wednesday 23 February 2011] [05:18:37] &lt;pieterh&gt;     sorry, but XML dependencies in 0MQ core is rubbish
| [Wednesday 23 February 2011] [05:18:40] &lt;<a href="#id3089"><span class="problematic" id="id3090">sustrik_</span></a>&gt;    it&#8217;ll say: obsolete, marked for removal in 3.0
| [Wednesday 23 February 2011] [05:18:45] &lt;mikko&gt;       hi Steve-o
| [Wednesday 23 February 2011] [05:18:55] &lt;Steve-o&gt;     hi mikko
| [Wednesday 23 February 2011] [05:18:58] &lt;mikko&gt;       Steve-o: minor build problem: solaris studio 12.2 + autoconf
| [Wednesday 23 February 2011] [05:19:09] &lt;mikko&gt;       i don&#8217;t actually know what the error means
| [Wednesday 23 February 2011] [05:19:11] &lt;Steve-o&gt;     wondered what changes I need for Solaris
| [Wednesday 23 February 2011] [05:19:17] &lt;mikko&gt;       this is on linux
| [Wednesday 23 February 2011] [05:19:22] &lt;Steve-o&gt;     I know the ticket locks will be broken
| [Wednesday 23 February 2011] [05:19:37] &lt;Steve-o&gt;     the concept doesn&#8217;t work on SPARC processors
| [Wednesday 23 February 2011] [05:19:57] &lt;mikko&gt;       this is x86 linux + solaris studio 12.2
| [Wednesday 23 February 2011] [05:20:08] &lt;Steve-o&gt;     oracle studio I think its called now?
| [Wednesday 23 February 2011] [05:20:16] &lt;Steve-o&gt;     or oracle solaris studio
| [Wednesday 23 February 2011] [05:20:18] &lt;mikko&gt;       hehe
| [Wednesday 23 February 2011] [05:20:20] &lt;mikko&gt;       possibly
| [Wednesday 23 February 2011] [05:20:36] &lt;Steve-o&gt;     what&#8217;s the error?  I&#8217;ll have the machines up tomorrow
| [Wednesday 23 February 2011] [05:20:38] &lt;<a href="#id3091"><span class="problematic" id="id3092">sustrik_</span></a>&gt;    Steve-o, mikko: can you possibly check whether steve&#8217;s recent update solved the bool issue with MSVC?
| [Wednesday 23 February 2011] [05:20:43] &lt;Steve-o&gt;     fixed OSX today
| [Wednesday 23 February 2011] [05:20:43] &lt;mikko&gt;       Steve-o: give me a sec
| [Wednesday 23 February 2011] [05:20:57] &lt;mikko&gt;       <a href="#id3093"><span class="problematic" id="id3094">sustrik_</span></a>: the daily build seems ok
| [Wednesday 23 February 2011] [05:21:34] &lt;<a href="#id3095"><span class="problematic" id="id3096">sustrik_</span></a>&gt;    so you are building from opepgm head?
| [Wednesday 23 February 2011] [05:21:46] &lt;<a href="#id3097"><span class="problematic" id="id3098">sustrik_</span></a>&gt;    rather then embeedded openpgm in 0mq?
| [Wednesday 23 February 2011] [05:21:47] &lt;mikko&gt;       Steve-o: <a class="reference external" href="https://gist.github.com/edeacc2d3214fc6b11df">https://gist.github.com/edeacc2d3214fc6b11df</a>
| [Wednesday 23 February 2011] [05:22:14] &lt;mikko&gt;       <a href="#id3099"><span class="problematic" id="id3100">sustrik_</span></a>: not quite
| [Wednesday 23 February 2011] [05:22:31] &lt;mikko&gt;       <a href="#id3101"><span class="problematic" id="id3102">sustrik_</span></a>: it&#8217;s not against head but it&#8217;s using openpgm different than one shipped with zeromq
| [Wednesday 23 February 2011] [05:22:35] &lt;<a href="#id3103"><span class="problematic" id="id3104">sustrik_</span></a>&gt;    i haven&#8217;t updated the embedded patckage yet...
| [Wednesday 23 February 2011] [05:22:40] &lt;<a href="#id3105"><span class="problematic" id="id3106">sustrik_</span></a>&gt;    ah
| [Wednesday 23 February 2011] [05:22:49] &lt;<a href="#id3107"><span class="problematic" id="id3108">sustrik_</span></a>&gt;    so should i upgrade?
| [Wednesday 23 February 2011] [05:22:51] &lt;mikko&gt;       MSVC is difficult about this
| [Wednesday 23 February 2011] [05:23:12] &lt;mikko&gt;       <a href="#id3109"><span class="problematic" id="id3110">sustrik_</span></a>: i think we should update as soon as we can iron out the autoconf build to be stable enough
| [Wednesday 23 February 2011] [05:23:16] &lt;mikko&gt;       and do it in same go
| [Wednesday 23 February 2011] [05:23:21] &lt;<a href="#id3111"><span class="problematic" id="id3112">sustrik_</span></a>&gt;    ok, good
| [Wednesday 23 February 2011] [05:23:24] &lt;<a href="#id3113"><span class="problematic" id="id3114">sustrik_</span></a>&gt;    i&#8217;ll wait then
| [Wednesday 23 February 2011] [05:23:29] &lt;mikko&gt;       MSVC people will most likely build using openpgm installer anyway
| [Wednesday 23 February 2011] [05:23:32] &lt;mikko&gt;       but
| [Wednesday 23 February 2011] [05:23:41] &lt;mikko&gt;       i havent updated openpgm on that box for a while
| [Wednesday 23 February 2011] [05:24:00] &lt;<a href="#id3115"><span class="problematic" id="id3116">sustrik_</span></a>&gt;    the build used to fail few days ago
| [Wednesday 23 February 2011] [05:24:05] &lt;<a href="#id3117"><span class="problematic" id="id3118">sustrik_</span></a>&gt;    now it builds
| [Wednesday 23 February 2011] [05:24:13] &lt;<a href="#id3119"><span class="problematic" id="id3120">sustrik_</span></a>&gt;    something must have changed
| [Wednesday 23 February 2011] [05:24:28] &lt;mikko&gt;       hmm
| [Wednesday 23 February 2011] [05:24:42] &lt;mikko&gt;       i wonder if the MSVC is smart enough to do incremental build properly
| [Wednesday 23 February 2011] [05:24:45] &lt;<a href="#id3121"><span class="problematic" id="id3122">sustrik_</span></a>&gt;    last failed build fed 22nd, 5 am
| [Wednesday 23 February 2011] [05:24:57] &lt;mikko&gt;       as it seems here: <a class="reference external" href="https://github.com/zeromq/zeromq2/commit/43e8868875e1d5287979e5b9060a9b16be45cc79">https://github.com/zeromq/zeromq2/commit/43e8868875e1d5287979e5b9060a9b16be45cc79</a>
| [Wednesday 23 February 2011] [05:25:06] &lt;mikko&gt;       unrelated changes but it touched the files
| [Wednesday 23 February 2011] [05:25:58] &lt;<a href="#id3123"><span class="problematic" id="id3124">sustrik_</span></a>&gt;    could that be the reason?
| [Wednesday 23 February 2011] [05:26:02] &lt;<a href="#id3125"><span class="problematic" id="id3126">sustrik_</span></a>&gt;    it would make sense then
| [Wednesday 23 February 2011] [05:26:06] &lt;Steve-o&gt;     mikko: OK its a typo, should be lock; not lockl;
| [Wednesday 23 February 2011] [05:26:24] &lt;Steve-o&gt;     atomic.h line 59
| [Wednesday 23 February 2011] [05:27:00] &lt;mikko&gt;       <a href="#id3127"><span class="problematic" id="id3128">sustrik_</span></a>: i&#8217;ll make sure that msvc build wipes out all files and builds clean every time
| [Wednesday 23 February 2011] [05:27:55] &lt;<a href="#id3129"><span class="problematic" id="id3130">sustrik_</span></a>&gt;    strange then
| [Wednesday 23 February 2011] [05:28:03] &lt;<a href="#id3131"><span class="problematic" id="id3132">sustrik_</span></a>&gt;    anyway, it builds now
| [Wednesday 23 February 2011] [05:28:12] &lt;<a href="#id3133"><span class="problematic" id="id3134">sustrik_</span></a>&gt;    so let&#8217;s not worry about it
| [Wednesday 23 February 2011] [05:31:15] &lt;Steve-o&gt;     mikko: updated trunk with fix
| [Wednesday 23 February 2011] [05:31:35] &lt;mikko&gt;       Steve-o: thanks
| [Wednesday 23 February 2011] [05:31:50] &lt;mikko&gt;       Steve-o: i&#8217;ll test x86 solaris soon
| [Wednesday 23 February 2011] [05:31:56] &lt;Steve-o&gt;     Is there a simply autoconf to detect whether non-32bit aligned pointers work?
| [Wednesday 23 February 2011] [05:31:58] &lt;mikko&gt;       Steve-o: <a class="reference external" href="https://build.zero.mq/job/ZeroMQ2-core-master_MSVC-win7/194/console">https://build.zero.mq/job/ZeroMQ2-core-master_MSVC-win7/194/console</a>
| [Wednesday 23 February 2011] [05:32:19] &lt;mikko&gt;       Steve-o: AC_TRY_RUN maybe
| [Wednesday 23 February 2011] [05:32:41] &lt;Steve-o&gt;     Windows has ticket locks enabled, but only in CMake not in Autoconf,
| [Wednesday 23 February 2011] [05:33:07] &lt;mikko&gt;       Steve-o: building with /t:rebuild now
| [Wednesday 23 February 2011] [05:33:10] &lt;mikko&gt;       ermm, <a href="#id3135"><span class="problematic" id="id3136">sustrik_</span></a>
| [Wednesday 23 February 2011] [05:36:12] &lt;mikko&gt;       <a href="#id3137"><span class="problematic" id="id3138">sustrik_</span></a>: <a class="reference external" href="https://build.zero.mq/job/ZeroMQ2-core-master_MSVC-win7/194/console">https://build.zero.mq/job/ZeroMQ2-core-master_MSVC-win7/194/console</a>
| [Wednesday 23 February 2011] [05:36:14] &lt;mikko&gt;       builds
| [Wednesday 23 February 2011] [05:36:50] &lt;<a href="#id3139"><span class="problematic" id="id3140">sustrik_</span></a>&gt;    yup
| [Wednesday 23 February 2011] [05:37:12] &lt;<a href="#id3141"><span class="problematic" id="id3142">sustrik_</span></a>&gt;    i was just puzzled how it happened to start building given there was no related change to the code
| [Wednesday 23 February 2011] [05:37:27] &lt;<a href="#id3143"><span class="problematic" id="id3144">sustrik_</span></a>&gt;    anyway, not an issue
| [Wednesday 23 February 2011] [05:37:30] &lt;mikko&gt;       i think msbuild is not very smart about incremental builds
| [Wednesday 23 February 2011] [05:37:36] &lt;<a href="#id3145"><span class="problematic" id="id3146">sustrik_</span></a>&gt;    ack
| [Wednesday 23 February 2011] [05:37:37] &lt;mikko&gt;       it now does a clean build each time
| [Wednesday 23 February 2011] [05:38:13] &lt;mikko&gt;       Steve-o: builds clean now
| [Wednesday 23 February 2011] [05:39:08] &lt;ianbarber&gt;   Steve-o: while you&#8217;re here - you know that issue I sent you some code on? Dr Bob has hit it on the mailing list as well.
| [Wednesday 23 February 2011] [05:39:31] &lt;ianbarber&gt;   It looks like it occurs because 0MQ is erroneously setting PGM_SEND_ONLY on both
| [Wednesday 23 February 2011] [05:40:01] &lt;Steve-o&gt;     ianbarber: that would make sense consdering the error message
| [Wednesday 23 February 2011] [05:40:05] &lt;ianbarber&gt;   but I&#8217;m not sure if there anything that needs to be set instead of that
| [Wednesday 23 February 2011] [05:40:28] &lt;<a href="#id3147"><span class="problematic" id="id3148">sustrik_</span></a>&gt;    ianbarber: i think it has to do with recent changes to 0mq codebase
| [Wednesday 23 February 2011] [05:40:33] &lt;<a href="#id3149"><span class="problematic" id="id3150">sustrik_</span></a>&gt;    let me check
| [Wednesday 23 February 2011] [05:40:56] &lt;Steve-o&gt;     the code is still on my todo list
| [Wednesday 23 February 2011] [05:41:04] &lt;ianbarber&gt;   <a href="#id3151"><span class="problematic" id="id3152">sustrik_</span></a>: i think what&#8217;s needed is to use something other than requires_in and requires_out in pgm_socket
| [Wednesday 23 February 2011] [05:41:17] &lt;<a href="#id3153"><span class="problematic" id="id3154">sustrik_</span></a>&gt;    exactly
| [Wednesday 23 February 2011] [05:41:47] &lt;<a href="#id3155"><span class="problematic" id="id3156">sustrik_</span></a>&gt;    it should check socket type instead
| [Wednesday 23 February 2011] [05:44:27] &lt;ianbarber&gt;   just trying if (options.type == ZMQ_XPUB || options.type == ZMQ_PUB) {
| [Wednesday 23 February 2011] [05:44:37] &lt;ianbarber&gt;   in connect_session
| [Wednesday 23 February 2011] [05:46:03] &lt;sustrik&gt;     just did the same myself :)
| [Wednesday 23 February 2011] [05:46:08] &lt;sustrik&gt;     but i cannot test it
| [Wednesday 23 February 2011] [05:46:14] &lt;sustrik&gt;     so let me know how it goes
| [Wednesday 23 February 2011] [05:46:26] &lt;ianbarber&gt;   will do
| [Wednesday 23 February 2011] [05:46:51] &lt;ianbarber&gt;   my little macbook air take a while to run make :)
| [Wednesday 23 February 2011] [05:48:16] &lt;ianbarber&gt;   seems to be working!
| [Wednesday 23 February 2011] [05:48:28] &lt;ianbarber&gt;   Steve-o: i am still seeing quite a few of these: Trace: Recv again on not-full
| [Wednesday 23 February 2011] [05:48:28] &lt;ianbarber&gt;   Trace: Discarded packet for muted receiver.
| [Wednesday 23 February 2011] [05:48:40] &lt;ianbarber&gt;   but that may be because i have both bits running on one box at the moment
| [Wednesday 23 February 2011] [05:48:58] &lt;Steve-o&gt;     that will happen with multicast loop
| [Wednesday 23 February 2011] [05:49:01] &lt;ianbarber&gt;   cool
| [Wednesday 23 February 2011] [05:49:07] &lt;sustrik&gt;     ianbarber: ok, so let me apply the patch
| [Wednesday 23 February 2011] [05:49:53] &lt;Steve-o&gt;     Linux routing for multicast is a bit surprising
| [Wednesday 23 February 2011] [05:50:34] &lt;CIA-21&gt;      zeromq2: 03Martin Sustrik 07master * r29e0e7d 10/ src/connect_session.cpp :
| [Wednesday 23 February 2011] [05:50:34] &lt;CIA-21&gt;      zeromq2: Incorrect PGM sender/receiver creation fixed
| [Wednesday 23 February 2011] [05:50:34] &lt;CIA-21&gt;      zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/gaABJu">http://bit.ly/gaABJu</a>
| [Wednesday 23 February 2011] [05:51:08] &lt;ianbarber&gt;   lovely, thanks sustrik &amp; Steve-o !
| [Wednesday 23 February 2011] [05:51:37] &lt;pieterh&gt;     mikko: I&#8217;ve updated apisite to handle the new 2.1 repo structure
| [Wednesday 23 February 2011] [05:52:01] &lt;sustrik&gt;     pieterh: first patch to backport!
| [Wednesday 23 February 2011] [05:52:08] &lt;pieterh&gt;     hehe
| [Wednesday 23 February 2011] [05:52:08] &lt;sustrik&gt;     how do i send a pull request?
| [Wednesday 23 February 2011] [05:52:11] &lt;pieterh&gt;     that was fast
| [Wednesday 23 February 2011] [05:52:52] &lt;pieterh&gt;     go to the zeromq2-1 repo and create a pull request interactively, I assume...
| [Wednesday 23 February 2011] [05:52:57] &lt;mikko&gt;       pieterh: do i need to change the daily builds?
| [Wednesday 23 February 2011] [05:53:18] &lt;pieterh&gt;     mikko, yes, there is a new repo at zeromq2-1 with a master branch
| [Wednesday 23 February 2011] [05:53:30] &lt;pieterh&gt;     you&#8217;re also building 2.0.10 I assume?
| [Wednesday 23 February 2011] [05:53:46] &lt;mikko&gt;       well, im building branches master and maint
| [Wednesday 23 February 2011] [05:53:50] &lt;pieterh&gt;     we&#8217;ll break that off into a separate zeromq2-0 repo once this works
| [Wednesday 23 February 2011] [05:53:59] &lt;pieterh&gt;     so it&#8217;ll be consistent
| [Wednesday 23 February 2011] [05:54:05] &lt;mikko&gt;       why do we use separate repos for this?
| [Wednesday 23 February 2011] [05:54:11] &lt;pieterh&gt;     ah, long discussion
| [Wednesday 23 February 2011] [05:54:20] &lt;pieterh&gt;     basically it&#8217;s the simplest for a safe division of labour
| [Wednesday 23 February 2011] [05:54:31] &lt;pieterh&gt;     we need more than master vs. maint
| [Wednesday 23 February 2011] [05:54:48] &lt;pieterh&gt;     we need at least three branches and there&#8217;s no way to do that in the current structure
| [Wednesday 23 February 2011] [05:55:05] &lt;pieterh&gt;     otherwise we have no way of maintaining both 2.0.10 and 2.1.1
| [Wednesday 23 February 2011] [05:55:13] &lt;pieterh&gt;     yet we have production users on both those
| [Wednesday 23 February 2011] [05:55:19] &lt;sustrik&gt;     pieterh: i can&#8217;t
| [Wednesday 23 February 2011] [05:55:37] &lt;sustrik&gt;     github doesn&#8217;t recognise your repo as a fork of zeromq2
| [Wednesday 23 February 2011] [05:55:49] &lt;sustrik&gt;     and thus doesn&#8217;t allow me send a pull request
| [Wednesday 23 February 2011] [05:55:55] &lt;pieterh&gt;     sustrik: ah github insanity
| [Wednesday 23 February 2011] [05:55:56] &lt;sustrik&gt;     check it out yourself
| [Wednesday 23 February 2011] [05:56:14] &lt;pieterh&gt;     does not allow a fork of a repo within the same organization!
| [Wednesday 23 February 2011] [05:56:27] &lt;pieterh&gt;     simply not allowed
| [Wednesday 23 February 2011] [05:56:46] &lt;ianbarber&gt;   you should be able to add the master as an upstream repo and pull commits from there manually i guess?
| [Wednesday 23 February 2011] [05:56:47] &lt;pieterh&gt;     and I think using a separate organization would be wrong
| [Wednesday 23 February 2011] [05:56:49] &lt;sustrik&gt;     why not create the fork under imatix then?
| [Wednesday 23 February 2011] [05:56:54] &lt;mikko&gt;       pieterh: i mean why didn&#8217;t you create new branches inside the same repo?
| [Wednesday 23 February 2011] [05:57:04] &lt;pieterh&gt;     mikko: old argument over branching in git repo
| [Wednesday 23 February 2011] [05:57:19] &lt;pieterh&gt;     the only resolution to that was to not touch each others&#8217; repos
| [Wednesday 23 February 2011] [05:57:35] &lt;pieterh&gt;     I&#8217;d have preferred one repo with X branches, one per release, that could be maintained
| [Wednesday 23 February 2011] [05:57:40] &lt;pieterh&gt;     I proposed this about six months ago
| [Wednesday 23 February 2011] [05:57:54] &lt;pieterh&gt;     and was quite loudly told to stfu, it&#8217;s not the git way
| [Wednesday 23 February 2011] [05:58:00] &lt;pieterh&gt;     so we ended up with master / maint
| [Wednesday 23 February 2011] [05:58:10] &lt;pieterh&gt;     but that does not let us maintain more than one stable release
| [Wednesday 23 February 2011] [05:58:26] &lt;pieterh&gt;     so we&#8217;re stuck between freezing 2.0.x or not stabilizing 2.1.x
| [Wednesday 23 February 2011] [05:58:32] &lt;pieterh&gt;     hence the current solution
| [Wednesday 23 February 2011] [05:59:00] &lt;pieterh&gt;     sustrik: yes, I can fork the repo in imatix but if it&#8217;s a fork IMO we have other issues
| [Wednesday 23 February 2011] [05:59:15] &lt;pieterh&gt;     forget pull requests then, it&#8217;s not the only option
| [Wednesday 23 February 2011] [05:59:31] &lt;pieterh&gt;     forking would mean I essentially track your master branch
| [Wednesday 23 February 2011] [05:59:36] &lt;pieterh&gt;     which is not what we want at all
| [Wednesday 23 February 2011] [05:59:42] &lt;mikko&gt;       the natural problem with this are the tools. not being able to switch between branches in one clone but rather the need to clone two repos
| [Wednesday 23 February 2011] [06:00:16] &lt;pieterh&gt;     mikko: I think the best answer here is that one repo should &#8216;belong&#8217; to as few people as possible
| [Wednesday 23 February 2011] [06:00:25] &lt;pieterh&gt;     and it should be up to those people how they work
| [Wednesday 23 February 2011] [06:00:31] &lt;pieterh&gt;     full freedom inside your own repo
| [Wednesday 23 February 2011] [06:00:34] &lt;sustrik&gt;     +1
| [Wednesday 23 February 2011] [06:00:37] &lt;pieterh&gt;     indeed
| [Wednesday 23 February 2011] [06:00:43] &lt;pieterh&gt;     sustrik and I agree violently on this
| [Wednesday 23 February 2011] [06:00:51] &lt;pieterh&gt;     it&#8217;s the only scalable approach we can see
| [Wednesday 23 February 2011] [06:01:09] &lt;pieterh&gt;     bitter experience tells us when we make a git structure complex, bad things happen
| [Wednesday 23 February 2011] [06:01:43] &lt;pieterh&gt;     sustrik: what I suggest are patches and issues, it&#8217;s very close to pull requests
| [Wednesday 23 February 2011] [06:01:56] &lt;pieterh&gt;     i.e. open an issue and copy/paste the patch
| [Wednesday 23 February 2011] [06:02:18] &lt;pieterh&gt;     alternatively I can pull commits from your repository if I know the commit number
| [Wednesday 23 February 2011] [06:02:25] &lt;pieterh&gt;     as ianbarber says
| [Wednesday 23 February 2011] [06:02:27] &lt;mikko&gt;       pieterh: i disagree with both of you biolently
| [Wednesday 23 February 2011] [06:02:31] &lt;pieterh&gt;     :-)
| [Wednesday 23 February 2011] [06:02:33] &lt;mikko&gt;       violently
| [Wednesday 23 February 2011] [06:02:40] &lt;pieterh&gt;     mikko: then you can go create your own repo and do it your way
| [Wednesday 23 February 2011] [06:02:43] &lt;mikko&gt;       you can organise your local development with git as you please
| [Wednesday 23 February 2011] [06:02:45] &lt;pieterh&gt;     that&#8217;s the beauty of this approach
| [Wednesday 23 February 2011] [06:02:52] &lt;mikko&gt;       have branches in a way you want
| [Wednesday 23 February 2011] [06:03:02] &lt;mikko&gt;       just making sure that release branches contain what they need to contain
| [Wednesday 23 February 2011] [06:03:45] &lt;pieterh&gt;     well, yes, except trying to make that work in the development git failed
| [Wednesday 23 February 2011] [06:03:52] &lt;mikko&gt;       and now we are creating issues and copy-pasting patches in to them?
| [Wednesday 23 February 2011] [06:03:54] &lt;sustrik&gt;     ok, i&#8217;ll send you commit numbers
| [Wednesday 23 February 2011] [06:04:10] &lt;pieterh&gt;     mikko: where were you when I was being assaulted for proposing release branches?
| [Wednesday 23 February 2011] [06:04:15] &lt;pieterh&gt;     it is too late now, really
| [Wednesday 23 February 2011] [06:04:33] &lt;mikko&gt;       pieterh: i didn&#8217;t really interact with the community much back then
| [Wednesday 23 February 2011] [06:04:33] &lt;sp|ke&gt;       Hi guys
| [Wednesday 23 February 2011] [06:04:39] &lt;mikko&gt;       you were too ahead of time :)
| [Wednesday 23 February 2011] [06:04:51] &lt;pieterh&gt;     the tank wheels of history have crushed that opportunity
| [Wednesday 23 February 2011] [06:05:51] &lt;pieterh&gt;     sp|ke: hello
| [Wednesday 23 February 2011] [06:06:15] &lt;sp|ke&gt;       I just started playing with zmq and i was wondering how would i handle client autoreconnecting to server
| [Wednesday 23 February 2011] [06:06:32] &lt;pieterh&gt;     ianbarber: can you point me to instructions on adding upstream repositories? or is it simple?
| [Wednesday 23 February 2011] [06:06:48] &lt;pieterh&gt;     sustrik: I&#8217;ll try with that patch, see how it goes
| [Wednesday 23 February 2011] [06:06:52] &lt;mikko&gt;       pieterh: git remote add upstream &lt;uri&gt;
| [Wednesday 23 February 2011] [06:07:01] &lt;mikko&gt;       upstream being arbitrary name
| [Wednesday 23 February 2011] [06:07:03] &lt;pieterh&gt;     thx!
| [Wednesday 23 February 2011] [06:07:07] &lt;mikko&gt;       then git fetch upstream
| [Wednesday 23 February 2011] [06:07:24] &lt;mikko&gt;       you might like this: <a class="reference external" href="http://beebo.org/stuff/tech/git.html">http://beebo.org/stuff/tech/git.html</a>
| [Wednesday 23 February 2011] [06:07:44] &lt;pieterh&gt;     git fetch upstream does what exactly?
| [Wednesday 23 February 2011] [06:07:59] &lt;pieterh&gt;     sorry, will rtfm but git demands too much space in my brain
| [Wednesday 23 February 2011] [06:08:11] &lt;mikko&gt;       it fetches the information about the remote repository
| [Wednesday 23 February 2011] [06:08:17] &lt;mikko&gt;       so that you know what branches it contains etc
| [Wednesday 23 February 2011] [06:08:25] &lt;pieterh&gt;     let&#8217;s say I want to pull one commit from Martin&#8217;s repo
| [Wednesday 23 February 2011] [06:08:47] &lt;pieterh&gt;     &lt;uri&gt; is the read-only git uri, fine
| [Wednesday 23 February 2011] [06:09:24] &lt;mikko&gt;       pieterh: you might have a lot easier time with <a class="reference external" href="https://github.com/defunkt/github-gem">https://github.com/defunkt/github-gem</a>
| [Wednesday 23 February 2011] [06:09:36] &lt;mikko&gt;       it abstracts some of this normal github workflow
| [Wednesday 23 February 2011] [06:09:55] &lt;pieterh&gt;     well, let&#8217;s try with the basics
| [Wednesday 23 February 2011] [06:10:08] &lt;pieterh&gt;     I add the upstream remote, then fetch that
| [Wednesday 23 February 2011] [06:10:19] &lt;sp|ke&gt;       Is there a way to know the the state of the zmq socket and to make the client auto reconnect if server goes down?
| [Wednesday 23 February 2011] [06:10:19] &lt;pieterh&gt;     next?
| [Wednesday 23 February 2011] [06:10:30] &lt;pieterh&gt;     sp|ke: it happens automatically
| [Wednesday 23 February 2011] [06:10:32] &lt;ianbarber&gt;   git cherry-pick
| [Wednesday 23 February 2011] [06:10:50] &lt;pieterh&gt;     sp|ke: have you read the Guide yet?
| [Wednesday 23 February 2011] [06:11:09] &lt;pieterh&gt;     ianbarber: so &#8220;git cherry-pick upstream/&lt;commit&gt;&#8221;?
| [Wednesday 23 February 2011] [06:11:29] &lt;ianbarber&gt;   git cherry-pick &lt;biglong-git-id-of-the-commit&gt;
| [Wednesday 23 February 2011] [06:11:40] &lt;sp|ke&gt;       I must have an error somewhere because I tried
| [Wednesday 23 February 2011] [06:11:54] &lt;sp|ke&gt;       Yes I have read the guide but not everything
| [Wednesday 23 February 2011] [06:12:31] &lt;pieterh&gt;     <a class="reference external" href="mailto:ph&#37;&#52;&#48;ws200901">ph<span>&#64;</span>ws200901</a>:~/work/zeromq2-1$ git cherry-pick 29e0e7d
| [Wednesday 23 February 2011] [06:12:31] &lt;pieterh&gt;     Finished one cherry-pick.
| [Wednesday 23 February 2011] [06:12:31] &lt;pieterh&gt;     [master f4c1040] Incorrect PGM sender/receiver creation fixed
| [Wednesday 23 February 2011] [06:12:31] &lt;pieterh&gt;      Author: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt;
| [Wednesday 23 February 2011] [06:12:31] &lt;pieterh&gt;      1 files changed, 2 insertions(+), 2 deletions(-)
| [Wednesday 23 February 2011] [06:12:35] &lt;pieterh&gt;     yay!
| [Wednesday 23 February 2011] [06:12:50] &lt;sp|ke&gt;       I tried with several REQ clients and a REP server
| [Wednesday 23 February 2011] [06:12:53] &lt;pieterh&gt;     sustrik: okay, we have liftoff
| [Wednesday 23 February 2011] [06:13:04] &lt;ianbarber&gt;   woo
| [Wednesday 23 February 2011] [06:13:31] &lt;pieterh&gt;     sustrik: could you create issues with commit tags like this then?
| [Wednesday 23 February 2011] [06:13:45] &lt;pieterh&gt;     that allows public discussion &amp; review of exactly what goes into stable releases
| [Wednesday 23 February 2011] [06:14:25] &lt;pieterh&gt;     IMO you can link directly to the commit, e.g. <a class="reference external" href="https://github.com/zeromq/zeromq2/commit/29e0e7dbadfcd0bab70feee119bd7c5e623b38d4">https://github.com/zeromq/zeromq2/commit/29e0e7dbadfcd0bab70feee119bd7c5e623b38d4</a>
| [Wednesday 23 February 2011] [06:15:24] &lt;mikko&gt;       pieterh: you can also do the following in your local repo:
| [Wednesday 23 February 2011] [06:15:56] &lt;mikko&gt;       git checkout -b mrsustrik &lt;localname&gt;/&lt;branchname&gt;
| [Wednesday 23 February 2011] [06:16:12] &lt;mikko&gt;       that creates a local branch that tracks for example upstream/master
| [Wednesday 23 February 2011] [06:16:31] &lt;mikko&gt;       so when you do for example git diff in that branch it&#8217;s against upstream/master rather than origin/master
| [Wednesday 23 February 2011] [06:16:56] &lt;mikko&gt;       also, you can diff directly against remote one by doing &#8220;git diff upstream/master&#8221;
| [Wednesday 23 February 2011] [06:17:32] &lt;pieterh&gt;     git is too powerful
| [Wednesday 23 February 2011] [06:17:41] &lt;pieterh&gt;     all the stuff I <em>can</em> do
| [Wednesday 23 February 2011] [06:18:27] &lt;pieterh&gt;     mikko: regarding your violent objection to separate repos
| [Wednesday 23 February 2011] [06:18:59] &lt;pieterh&gt;     our main goals are (a) independence for teams and (b) simplicity
| [Wednesday 23 February 2011] [06:19:25] &lt;pieterh&gt;     our experience is that trying to do too much in one git leads to arguments and complexity
| [Wednesday 23 February 2011] [06:20:02] &lt;mikko&gt;       but think about the following:
| [Wednesday 23 February 2011] [06:20:19] &lt;mikko&gt;       if we are moving to pull requests the development doesnt have to happen in zeromq/zeromq
| [Wednesday 23 February 2011] [06:20:25] &lt;mikko&gt;       we can open pull requests
| [Wednesday 23 February 2011] [06:20:31] &lt;mikko&gt;       cherry-pick
| [Wednesday 23 February 2011] [06:20:32] &lt;mikko&gt;       etc
| [Wednesday 23 February 2011] [06:20:38] &lt;pieterh&gt;     indeed
| [Wednesday 23 February 2011] [06:20:50] &lt;pieterh&gt;     that&#8217;s already happening to some extent
| [Wednesday 23 February 2011] [06:20:54] &lt;mikko&gt;       this allows everyone to organise their fork as they please
| [Wednesday 23 February 2011] [06:20:57] &lt;pieterh&gt;     indeed
| [Wednesday 23 February 2011] [06:21:00] &lt;mikko&gt;       but still keeps upstream in one place
| [Wednesday 23 February 2011] [06:21:04] &lt;pieterh&gt;     exactly
| [Wednesday 23 February 2011] [06:21:06] &lt;mikko&gt;       which is better for tools such as jenkins
| [Wednesday 23 February 2011] [06:21:52] &lt;mikko&gt;       and not just that
| [Wednesday 23 February 2011] [06:22:00] &lt;mikko&gt;       not having to remember what _repo_ contains what
| [Wednesday 23 February 2011] [06:22:05] &lt;pieterh&gt;     each repository has its target audience, tradeoffs
| [Wednesday 23 February 2011] [06:22:16] &lt;pieterh&gt;     and someone who aims to make that particular mix work
| [Wednesday 23 February 2011] [06:22:16] &lt;mikko&gt;       rather once you&#8217;ve cloned a repo you have it all
| [Wednesday 23 February 2011] [06:22:26] &lt;mikko&gt;       pieterh: what do you mean by that&gt;
| [Wednesday 23 February 2011] [06:22:43] &lt;pieterh&gt;     well, e.g. some people will want multiple release branches in one repo
| [Wednesday 23 February 2011] [06:22:52] &lt;pieterh&gt;     because they want to manage it all centrally (or by themselves)
| [Wednesday 23 February 2011] [06:22:59] &lt;mikko&gt;       what i&#8217;m saying is distribute the development rather than the results of it
| [Wednesday 23 February 2011] [06:23:01] &lt;pieterh&gt;     others will want to delegate that work as far as possible
| [Wednesday 23 February 2011] [06:23:23] &lt;mikko&gt;       have multiple forks of one integration point rather than multiple integrations points for the same thing
| [Wednesday 23 February 2011] [06:23:41] &lt;pieterh&gt;     your long words hurt my brain
| [Wednesday 23 February 2011] [06:23:57] &lt;pieterh&gt;     we only have one integration point, which is basically Martin Sustrik
| [Wednesday 23 February 2011] [06:23:58] &lt;mikko&gt;       i&#8217;m a consultant by trade
| [Wednesday 23 February 2011] [06:23:58] &lt;mikko&gt;       :)
| [Wednesday 23 February 2011] [06:24:07] &lt;pieterh&gt;     people are integration points, remember
| [Wednesday 23 February 2011] [06:24:10] &lt;pieterh&gt;     not repositories
| [Wednesday 23 February 2011] [06:24:24] &lt;pieterh&gt;     each project really has one brain at its center IME
| [Wednesday 23 February 2011] [06:24:54] &lt;pieterh&gt;     now, MS doesn&#8217;t want to be bothered creating stable releases of 0MQ
| [Wednesday 23 February 2011] [06:25:03] &lt;pieterh&gt;     so that work becomes another project, with another brain
| [Wednesday 23 February 2011] [06:25:13] &lt;pieterh&gt;     and thus, naturally, another repository
| [Wednesday 23 February 2011] [06:25:43] &lt;pieterh&gt;     i&#8217;m not sure how this translates to development of the <em>core</em> library
| [Wednesday 23 February 2011] [06:26:00] &lt;pieterh&gt;     if you work in terms of layers then it does scale
| [Wednesday 23 February 2011] [06:26:13] &lt;pieterh&gt;     OpenPGM has its own repository and its own brain (Hi Steve-o!)
| [Wednesday 23 February 2011] [06:26:39] &lt;pieterh&gt;     I&#8217;m a software architect by trade
| [Wednesday 23 February 2011] [06:27:25] &lt;mikko&gt;       i&#8217;m still failing to see the benefit of separate repository
| [Wednesday 23 February 2011] [06:27:34] &lt;mikko&gt;       i can see the reasoning with one repo per project
| [Wednesday 23 February 2011] [06:27:51] &lt;mikko&gt;       but what you are describing as a project clashes with my concept of a project
| [Wednesday 23 February 2011] [06:28:07] &lt;mikko&gt;       following that logic i should have a repo for build fixes
| [Wednesday 23 February 2011] [06:28:16] &lt;mikko&gt;       steve should have a repo for pgm related fixes
| [Wednesday 23 February 2011] [06:28:58] &lt;pieterh&gt;     it is always about the people
| [Wednesday 23 February 2011] [06:29:05] &lt;pieterh&gt;     and how much complexity they can tolerate
| [Wednesday 23 February 2011] [06:29:33] &lt;pieterh&gt;     &#8220;stable version of 0MQ/2.1&#8221; has become a &#8220;project&#8221;
| [Wednesday 23 February 2011] [06:29:55] &lt;pieterh&gt;     by making that decision we remove a chunk of complexity from &#8220;development of 0MQ&#8221; as a project
| [Wednesday 23 February 2011] [06:30:03] &lt;sustrik&gt;     i would formulate it this way: does linux have a RHEL5 branch in his vanilla repo?
| [Wednesday 23 February 2011] [06:30:09] &lt;ianbarber&gt;   i don&#8217;t think the two of you are that far off really. Mikko: there is one integration point, the master on zeromq, all of the patches for the other projects come from there
| [Wednesday 23 February 2011] [06:30:24] &lt;sustrik&gt;     no, they are separate projects
| [Wednesday 23 February 2011] [06:30:43] &lt;pieterh&gt;     indeed, it&#8217;s a tool we&#8217;re using to reduce complexity
| [Wednesday 23 February 2011] [06:30:54] &lt;ianbarber&gt;   yeah, but is the idea not to push patches into development, then cherry pick ones out to the stable release projects
| [Wednesday 23 February 2011] [06:31:03] &lt;pieterh&gt;     yes
| [Wednesday 23 February 2011] [06:31:09] &lt;pieterh&gt;     when possible and sane
| [Wednesday 23 February 2011] [06:31:54] &lt;pieterh&gt;     but that is a different question, about the trust relationships between these people and projects
| [Wednesday 23 February 2011] [06:32:04] &lt;pieterh&gt;     does sustrik trust a patch coming from me?
| [Wednesday 23 February 2011] [06:32:08] &lt;pieterh&gt;     inherently, no
| [Wednesday 23 February 2011] [06:32:17] &lt;pieterh&gt;     would I trust a patch coming from sustrik?
| [Wednesday 23 February 2011] [06:32:19] &lt;pieterh&gt;     totally
| [Wednesday 23 February 2011] [06:32:40] &lt;pieterh&gt;     take one of my projects, like ZFL, and its the other way around of course
| [Wednesday 23 February 2011] [06:33:40] &lt;sustrik&gt;     i think the problem for contributors is where to submit the patches now
| [Wednesday 23 February 2011] [06:33:45] &lt;mikko&gt;       pieterh: if im using zeromq 2.1 and i have an issue with it where do i raise the issue?
| [Wednesday 23 February 2011] [06:34:02] &lt;pieterh&gt;     anywhere you think it&#8217;ll get attention
| [Wednesday 23 February 2011] [06:34:12] &lt;pieterh&gt;     you&#8217;re speaking to a person, remember
| [Wednesday 23 February 2011] [06:34:31] &lt;pieterh&gt;     who do you talk to, the guy who provided you 2.1 or the guy who you think really knows the issue?
| [Wednesday 23 February 2011] [06:34:35] &lt;pieterh&gt;     classic question of workflow
| [Wednesday 23 February 2011] [06:34:41] &lt;mikko&gt;       i dont know
| [Wednesday 23 February 2011] [06:34:42] &lt;mikko&gt;       im a user
| [Wednesday 23 February 2011] [06:34:48] &lt;pieterh&gt;     if you are Mikko, of course you talk to the developer
| [Wednesday 23 February 2011] [06:34:52] &lt;mikko&gt;       i got a problem and i see this list of github projects
| [Wednesday 23 February 2011] [06:34:53] &lt;pieterh&gt;     if you&#8217;re a user, you talk to the packager
| [Wednesday 23 February 2011] [06:34:59] &lt;pieterh&gt;     nothing new here
| [Wednesday 23 February 2011] [06:35:17] &lt;pieterh&gt;     if I find a bug in Linux, I immediately pick up the phone and call my buddy Linus
| [Wednesday 23 February 2011] [06:35:50] &lt;pieterh&gt;     I&#8217;d expect the 2-1 repo to be fairly low-key
| [Wednesday 23 February 2011] [06:36:05] &lt;pieterh&gt;     it does not require visibility, really
| [Wednesday 23 February 2011] [06:36:27] &lt;pieterh&gt;     but perhaps it does
| [Wednesday 23 February 2011] [06:46:32] &lt;Steve-o&gt;     mikko: I have a patch ready to enabled ticket spinlocks in Autoconf, need some testing first
| [Wednesday 23 February 2011] [06:47:15] &lt;mikko&gt;       Steve-o: do you want me to test something?
| [Wednesday 23 February 2011] [06:47:46] &lt;mikko&gt;       running pkg-get upgrade on the solaris box atm
| [Wednesday 23 February 2011] [06:48:34] &lt;Steve-o&gt;     I&#8217;m waiting for some files to copy over wifi, then I can reboot &amp; test on Linux, then I&#8217;ll update trunk
| [Wednesday 23 February 2011] [06:49:11] &lt;Steve-o&gt;     I&#8217;m trying to avoid SPARC &amp; Sun Pro x86 assembler
| [Wednesday 23 February 2011] [06:50:31] &lt;Steve-o&gt;     I don&#8217;t have the brain cells to convert my GCC or MSVC assembler to Sun Pro friendly constraints
| [Wednesday 23 February 2011] [06:57:05] &lt;pieterh&gt;     sustrik: ok, release made, announced, API website updated, etc.
| [Wednesday 23 February 2011] [07:00:51] &lt;pieterh&gt;     <a href="#id3157"><span class="problematic" id="id3158">sustrik_</span></a>: I&#8217;ve used the terminology &#8220;2.1 stable (rc1)&#8221; so that more people will use this package
| [Wednesday 23 February 2011] [07:01:15] &lt;mikko&gt;       pieterh: remember to tweet as well
| [Wednesday 23 February 2011] [07:01:23] &lt;pieterh&gt;     ah, of course
| [Wednesday 23 February 2011] [07:01:36] &lt;pieterh&gt;     everyone should tweet
| [Wednesday 23 February 2011] [07:01:38] &lt;pieterh&gt;     the more the merrier
| [Wednesday 23 February 2011] [07:05:41] &lt;ianbarber&gt;   what are the known instabilities with PGM? just the rate issue?
| [Wednesday 23 February 2011] [07:06:26] &lt;pieterh&gt;     yup
| [Wednesday 23 February 2011] [07:06:37] &lt;pieterh&gt;     plus there are several unknown instabilities
| [Wednesday 23 February 2011] [07:06:54] &lt;guido_g&gt;     like the one I reported to the ml
| [Wednesday 23 February 2011] [07:07:31] &lt;pieterh&gt;     until people have severely hammered 0MQ+OpenPGM5, I&#8217;d expect there to be issues
| [Wednesday 23 February 2011] [07:07:58] &lt;mikko&gt;       would we benefit from something like trac or redmine?
| [Wednesday 23 February 2011] [07:08:09] &lt;mikko&gt;       very lightweight project stuff
| [Wednesday 23 February 2011] [07:11:28] &lt;Steve-o&gt;     Ok just enabled ticket spinlocks in trunk, hopefully SunPro on Linux doesn&#8217;t choke on it
| [Wednesday 23 February 2011] [07:12:08] &lt;mikko&gt;       Steve-o: will test now
| [Wednesday 23 February 2011] [07:12:42] &lt;sustrik&gt;     <a href="#id3159"><span class="problematic" id="id3160">pieterh_</span></a>: congrats!
| [Wednesday 23 February 2011] [07:13:13] &lt;sustrik&gt;     do you want access to freshmeat 0mq account?
| [Wednesday 23 February 2011] [07:13:18] &lt;pieterh&gt;     sustrik: I&#8217;m now splitting the old procedures page into two, Development and Releases
| [Wednesday 23 February 2011] [07:13:46] &lt;pieterh&gt;     ah, probably best to use that account, right?
| [Wednesday 23 February 2011] [07:13:55] &lt;pieterh&gt;     since it&#8217;s already configured
| [Wednesday 23 February 2011] [07:14:08] &lt;pieterh&gt;     ack, send me the access details by private IRC
| [Wednesday 23 February 2011] [08:21:53] &lt;sustrik&gt;     pieterh: development subsection under development section in the left pane is strange
| [Wednesday 23 February 2011] [08:22:09] &lt;sustrik&gt;     it&#8217;s about building 0mq rather than development
| [Wednesday 23 February 2011] [08:22:49] &lt;pieterh&gt;     sustrik: try now?
| [Wednesday 23 February 2011] [08:23:01] &lt;pieterh&gt;     uhm, hang on...
| [Wednesday 23 February 2011] [08:24:02] &lt;pieterh&gt;     Development is not accurate, it&#8217;s more... can I use &#8220;Activity&#8221; or something for the nav title?
| [Wednesday 23 February 2011] [08:27:25] &lt;sustrik&gt;     it&#8217;s build
| [Wednesday 23 February 2011] [08:27:26] &lt;sustrik&gt;     imo
| [Wednesday 23 February 2011] [08:28:59] &lt;sustrik&gt;     or just call it source
| [Wednesday 23 February 2011] [08:29:02] &lt;sustrik&gt;     as before
| [Wednesday 23 February 2011] [08:39:42] &lt;sustrik&gt;     other way round!
| [Wednesday 23 February 2011] [08:39:58] &lt;sustrik&gt;     section Development
| [Wednesday 23 February 2011] [08:40:07] &lt;sustrik&gt;     subsection Source
| [Wednesday 23 February 2011] [08:40:40] &lt;sustrik&gt;     build notes on source page kind of make sense
| [Wednesday 23 February 2011] [08:42:59] &lt;pieterh&gt;     What do we call the main repository?
| [Wednesday 23 February 2011] [08:43:10] &lt;pieterh&gt;     if it&#8217;s the &#8220;development&#8221; repository, that&#8217;s the page title
| [Wednesday 23 February 2011] [08:43:35] &lt;pieterh&gt;     development of 0MQ does not cover bindings, releases, etc. afaics
| [Wednesday 23 February 2011] [08:43:58] &lt;sustrik&gt;     its master
| [Wednesday 23 February 2011] [08:44:03] &lt;pieterh&gt;     master is a branch
| [Wednesday 23 February 2011] [08:44:11] &lt;sustrik&gt;     vanilla?
| [Wednesday 23 February 2011] [08:44:19] &lt;pieterh&gt;     meaningless name is meaningless
| [Wednesday 23 February 2011] [08:44:45] &lt;sustrik&gt;     whatever
| [Wednesday 23 February 2011] [08:44:54] &lt;sustrik&gt;     but the caption is misleading
| [Wednesday 23 February 2011] [08:44:56] &lt;pieterh&gt;     well, I need a term that sticks, this is vital
| [Wednesday 23 February 2011] [08:45:01] &lt;pieterh&gt;     i can fix the caption afterwards
| [Wednesday 23 February 2011] [08:45:11] &lt;pieterh&gt;     upstream?
| [Wednesday 23 February 2011] [08:45:13] &lt;pieterh&gt;     core?
| [Wednesday 23 February 2011] [08:45:17] &lt;pieterh&gt;     mama?
| [Wednesday 23 February 2011] [08:45:22] &lt;sustrik&gt;     The section should be called &#8220;Development&#8221;
| [Wednesday 23 February 2011] [08:45:40] &lt;sustrik&gt;     so that only people who are interested in development look at the subsections
| [Wednesday 23 February 2011] [08:45:46] &lt;pieterh&gt;     ok... brilliant idea...
| [Wednesday 23 February 2011] [08:46:02] &lt;pieterh&gt;     &#8220;0MQ/2.2&#8221; as title
| [Wednesday 23 February 2011] [08:46:09] &lt;pieterh&gt;     &#8220;0MQ/2.1&#8221;
| [Wednesday 23 February 2011] [08:46:12] &lt;sustrik&gt;     and the first thing you want to do when developing is getting the source
| [Wednesday 23 February 2011] [08:46:13] &lt;pieterh&gt;     &#8220;0MQ/3.0&#8221;
| [Wednesday 23 February 2011] [08:46:17] &lt;pieterh&gt;     yes
| [Wednesday 23 February 2011] [08:46:20] &lt;sustrik&gt;     so the subsection should be called source
| [Wednesday 23 February 2011] [08:46:25] &lt;pieterh&gt;     the &#8216;source repo&#8217;?
| [Wednesday 23 February 2011] [08:46:30] &lt;pieterh&gt;     could work
| [Wednesday 23 February 2011] [08:46:32] &lt;sustrik&gt;     up to you
| [Wednesday 23 February 2011] [08:46:38] &lt;sustrik&gt;     source is somewhat shorter
| [Wednesday 23 February 2011] [08:46:38] &lt;pieterh&gt;     god no, I need buyin :-)
| [Wednesday 23 February 2011] [08:46:53] &lt;pieterh&gt;     ok, let&#8217;s try that
| [Wednesday 23 February 2011] [08:50:29] &lt;Guthur&gt;      is this a new look website you guys are talking about
| [Wednesday 23 February 2011] [08:56:23] &lt;pieterh&gt;     Guthur: which one?
| [Wednesday 23 February 2011] [08:57:08] &lt;pieterh&gt;     sustrik: I&#8217;m going to deprecate the part about emailing patches to the list, and start mentioning github pull requests, is that OK?
| [Wednesday 23 February 2011] [08:57:38] &lt;Guthur&gt;      pieterh: whatever you guys are debating
| [Wednesday 23 February 2011] [08:58:05] &lt;pieterh&gt;     Oh, this is about contributions &amp; releases
| [Wednesday 23 February 2011] [09:08:40] &lt;sustrik&gt;     leave the part about ML there
| [Wednesday 23 February 2011] [09:08:51] &lt;pieterh&gt;     yes, I&#8217;m making it a collapsible section
| [Wednesday 23 February 2011] [09:13:45] &lt;bijuC&gt;       Hello.. I am facing something strange with 2.1.0 and 2.1.1 MSVC RELEASE builds
| [Wednesday 23 February 2011] [09:14:42] &lt;mikko&gt;       bijuC: whats the problem?
| [Wednesday 23 February 2011] [09:14:48] &lt;bijuC&gt;       The DEBUG build works fine .. I have a PUB app and a SUB app.. i am able to receive everything at SUB
| [Wednesday 23 February 2011] [09:15:15] &lt;bijuC&gt;       but for a RELEASE build .. there are no errors.. but i receive nothing on SUB.. I used Wireshark to check but seems like there is no transmission
| [Wednesday 23 February 2011] [09:16:11] &lt;sustrik&gt;     pieterh: i&#8217;m not accepting pull requests, the process on the site would mislead people
| [Wednesday 23 February 2011] [09:16:22] &lt;pieterh&gt;     oh... sorry
| [Wednesday 23 February 2011] [09:16:35] &lt;pieterh&gt;     I misremembered
| [Wednesday 23 February 2011] [09:16:50] &lt;sustrik&gt;     np
| [Wednesday 23 February 2011] [09:17:05] &lt;pieterh&gt;     hmm... I hope over time you&#8217;ll be convinced, it really is simpler for everyone
| [Wednesday 23 February 2011] [09:18:35] &lt;bijuC&gt;       I am trying both tcp and epgm.. both exhibit the same behaviour
| [Wednesday 23 February 2011] [09:18:45] &lt;sustrik&gt;     i want to process to be as widely usable as possible
| [Wednesday 23 February 2011] [09:18:52] &lt;sustrik&gt;     pull requests depend on:
| [Wednesday 23 February 2011] [09:19:06] &lt;sustrik&gt;     1. contributor having git and understanding it
| [Wednesday 23 February 2011] [09:19:14] &lt;sustrik&gt;     2. github being online
| [Wednesday 23 February 2011] [09:19:16] &lt;mikko&gt;       Steve-o: problem
| [Wednesday 23 February 2011] [09:19:39] &lt;Steve-o&gt;     shoot
| [Wednesday 23 February 2011] [09:20:08] &lt;sustrik&gt;     i also want to have the log of patch discussions in my mailbox
| [Wednesday 23 February 2011] [09:20:38] &lt;sustrik&gt;     rather than hosted in a third-party, non-exportable archive
| [Wednesday 23 February 2011] [09:20:40] &lt;mikko&gt;       Steve-o: the constants defined by autconf build dont have <a href="#id3161"><span class="problematic" id="id3162">CONFIG_</span></a> prefix
| [Wednesday 23 February 2011] [09:20:49] &lt;mikko&gt;       which a lot of openpgm expects
| [Wednesday 23 February 2011] [09:21:00] &lt;pieterh&gt;     sustrik: well, I think 90% of people on the list were for pull requests
| [Wednesday 23 February 2011] [09:21:02] &lt;mikko&gt;       got this on solaris:
| [Wednesday 23 February 2011] [09:21:06] &lt;mikko&gt;       -DHAVE_GETTIMEOFDAY=1 defined in build
| [Wednesday 23 February 2011] [09:21:08] &lt;pieterh&gt;     but each maintainer is free to choose, obvously
| [Wednesday 23 February 2011] [09:21:12] &lt;mikko&gt;       &#8220;time.c&#8221;, line 412: #error: &#8220;gettimeofday() or ftime() required to calculate counter offset&#8221;
| [Wednesday 23 February 2011] [09:21:13] &lt;sustrik&gt;     sure
| [Wednesday 23 February 2011] [09:21:16] &lt;sustrik&gt;     it&#8217;s just me
| [Wednesday 23 February 2011] [09:21:29] &lt;pieterh&gt;     I&#8217;ve changed that page, it was important to me to have a documented policy for other projects as well
| [Wednesday 23 February 2011] [09:21:34] &lt;Steve-o&gt;     mikko: all the autoconf defined ones are ignored currently
| [Wednesday 23 February 2011] [09:21:35] &lt;mikko&gt;       the constant that it checks for is CONFIG_HAVE_GETTIMEOFDAY
| [Wednesday 23 February 2011] [09:21:46] &lt;mikko&gt;       Steve-o: so i&#8217;ll hack that specific case
| [Wednesday 23 February 2011] [09:22:01] &lt;Steve-o&gt;     mikko: it basically sets up the environment to match scons
| [Wednesday 23 February 2011] [09:22:19] &lt;pieterh&gt;     sustrik: your point #1, either way people need to learn git, and formatted patches is harder, not easier
| [Wednesday 23 February 2011] [09:22:26] &lt;pieterh&gt;     so it&#8217;s just down to not trusting github
| [Wednesday 23 February 2011] [09:22:38] &lt;pieterh&gt;     but if it&#8217;s offline, nothing works either
| [Wednesday 23 February 2011] [09:22:46] &lt;sustrik&gt;     nope, there are platforms with no git
| [Wednesday 23 February 2011] [09:22:57] &lt;pieterh&gt;     ?
| [Wednesday 23 February 2011] [09:23:08] &lt;pieterh&gt;     the documented process depends on github and git
| [Wednesday 23 February 2011] [09:23:14] &lt;sustrik&gt;     openvms, zos?
| [Wednesday 23 February 2011] [09:23:28] &lt;pieterh&gt;     I&#8217;m 100% sure openvms has git
| [Wednesday 23 February 2011] [09:23:42] &lt;sustrik&gt;     it has not
| [Wednesday 23 February 2011] [09:23:50] &lt;sustrik&gt;     brett is working on it
| [Wednesday 23 February 2011] [09:23:54] &lt;sustrik&gt;     but it&#8217;s not yet ported
| [Wednesday 23 February 2011] [09:24:08] &lt;pieterh&gt;     sure, but the process as already documented does not work then
| [Wednesday 23 February 2011] [09:24:28] &lt;pieterh&gt;     so you are saying &#8220;because your process B does not work on OpenVMS, I want to use process A&#8221;
| [Wednesday 23 February 2011] [09:24:31] &lt;mikko&gt;       Even VMS seems to have it (although if git is ever ported to VMS, I&#8217;ll
| [Wednesday 23 February 2011] [09:24:32] &lt;mikko&gt;       just have to shoot myself. I used VMS in -88, and the scars are _still_
| [Wednesday 23 February 2011] [09:24:32] &lt;mikko&gt;       fresh).
| [Wednesday 23 February 2011] [09:24:34] &lt;mikko&gt;       Linus
| [Wednesday 23 February 2011] [09:24:35] &lt;pieterh&gt;     while process A doesnt work on OpenVMS either
| [Wednesday 23 February 2011] [09:24:37] &lt;pieterh&gt;     ?
| [Wednesday 23 February 2011] [09:24:46] &lt;pieterh&gt;     weird arguments, el sustrik
| [Wednesday 23 February 2011] [09:25:00] &lt;sustrik&gt;     what i am saying that i am willing to accept simple diffs
| [Wednesday 23 February 2011] [09:25:03] &lt;mikko&gt;       sustrik: github has subversion bridge
| [Wednesday 23 February 2011] [09:25:04] &lt;pieterh&gt;     well, add that
| [Wednesday 23 February 2011] [09:25:06] &lt;sustrik&gt;     if there&#8217;s good reason for that
| [Wednesday 23 February 2011] [09:25:08] &lt;pieterh&gt;     sure
| [Wednesday 23 February 2011] [09:25:09] &lt;sustrik&gt;     yup
| [Wednesday 23 February 2011] [09:25:24] &lt;pieterh&gt;     if it&#8217;s not on the page, it&#8217;s not there
| [Wednesday 23 February 2011] [09:25:31] &lt;sustrik&gt;     mikko: yes, i know
| [Wednesday 23 February 2011] [09:25:43] &lt;pieterh&gt;     what i want is consistency
| [Wednesday 23 February 2011] [09:25:46] &lt;pieterh&gt;     simplicity
| [Wednesday 23 February 2011] [09:25:48] &lt;pieterh&gt;     least surprise
| [Wednesday 23 February 2011] [09:25:57] &lt;pieterh&gt;     that&#8217;s how we get more contributors
| [Wednesday 23 February 2011] [09:26:06] &lt;pieterh&gt;     pull requests generate more contributions
| [Wednesday 23 February 2011] [09:26:20] &lt;pieterh&gt;     that is my experience and others have reported the same
| [Wednesday 23 February 2011] [09:26:30] &lt;pieterh&gt;     the format patch / email process is a barrier
| [Wednesday 23 February 2011] [09:27:02] &lt;pieterh&gt;     just compare the complexity of the two explanations on that page
| [Wednesday 23 February 2011] [09:28:36] &lt;pieterh&gt;     it requires (and I just counted) 3x more words to describe the email/format patch process
| [Wednesday 23 February 2011] [09:29:26] &lt;pieterh&gt;     mikko: you did not _like_ VMS?
| [Wednesday 23 February 2011] [09:29:53] &lt;mikko&gt;       pieterh: that was linus torvalds
| [Wednesday 23 February 2011] [09:30:01] &lt;pieterh&gt;     ah :-)
| [Wednesday 23 February 2011] [09:30:07] &lt;mikko&gt;       i was googling out of interest what is hindering git on openvms
| [Wednesday 23 February 2011] [09:30:14] &lt;sustrik&gt;     done
| [Wednesday 23 February 2011] [09:35:30] &lt;pieterh&gt;     okaaay... finished documenting all the new process
| [Wednesday 23 February 2011] [09:37:24] &lt;nooob&gt;       what is a good way to integrate zmq with http
| [Wednesday 23 February 2011] [09:38:46] &lt;bijuC&gt;       Any inputs on the MSVC RELEASE issue??
| [Wednesday 23 February 2011] [09:39:47] &lt;mikko&gt;       bijuC: i can give it a spin a bit later
| [Wednesday 23 February 2011] [09:39:49] &lt;pieterh&gt;     nooob: make a bridge that speaks HTTP at one side and 0MQ at the other
| [Wednesday 23 February 2011] [09:40:19] &lt;mikko&gt;       bijuC: just in case, can you show the code?
| [Wednesday 23 February 2011] [09:40:19] &lt;pieterh&gt;     nooob: this is kind of what mongrel2 does
| [Wednesday 23 February 2011] [09:40:19] &lt;bijuC&gt;       ohkk.. later today??
| [Wednesday 23 February 2011] [09:40:40] &lt;nooob&gt;       how good is mongrel2?
| [Wednesday 23 February 2011] [09:41:52] &lt;bijuC&gt;       yeah.. i can show the snippet..lemme know where n how.. but i wonder why release build only gives an issue..
| [Wednesday 23 February 2011] [09:42:19] &lt;pieterh&gt;     mikko: I&#8217;ve tried to summarize the arguments for/against multiple repos here: <a class="reference external" href="http://www.zeromq.org/topics:release-process">http://www.zeromq.org/topics:release-process</a>
| [Wednesday 23 February 2011] [09:42:48] &lt;pieterh&gt;     sustrik: whenever you want, I&#8217;ll spinoff 2.0 into its own git, the process is now documented and clear
| [Wednesday 23 February 2011] [09:49:55] &lt;mikko&gt;       pieterh: &#8220;It is easy to cherry-pick changes from the source git to release gits.&#8221;
| [Wednesday 23 February 2011] [09:50:04] &lt;pieterh&gt;     yes
| [Wednesday 23 February 2011] [09:50:08] &lt;mikko&gt;       interesting that it&#8217;s only argument for different repos
| [Wednesday 23 February 2011] [09:50:20] &lt;pieterh&gt;     uhm, there are like four arguments...
| [Wednesday 23 February 2011] [09:50:56] &lt;mikko&gt;       &#8220;it is easy to cherry-pick changes from the master branch to release branch&#8221;
| [Wednesday 23 February 2011] [09:51:09] &lt;pieterh&gt;     you misunderstand
| [Wednesday 23 February 2011] [09:51:16] &lt;pieterh&gt;     &#8220;separate gits are extra work&#8221;
| [Wednesday 23 February 2011] [09:51:19] &lt;pieterh&gt;     &#8220;no, it&#8217;s easy&#8221;
| [Wednesday 23 February 2011] [09:51:24] &lt;mikko&gt;       ah ok
| [Wednesday 23 February 2011] [09:51:34] &lt;pieterh&gt;     I&#8217;ll clarify
| [Wednesday 23 February 2011] [09:51:37] &lt;mikko&gt;       i guess what ever you find easiest
| [Wednesday 23 February 2011] [09:52:03] &lt;pieterh&gt;     we votes with our feets
| [Wednesday 23 February 2011] [09:52:15] &lt;pieterh&gt;     honestly, making this 2.1.1 release was utterly easy
| [Wednesday 23 February 2011] [09:52:42] &lt;pieterh&gt;     I&#8217;d like to compress our release cycles significantly, it&#8217;s been my complaint for a year or so
| [Wednesday 23 February 2011] [09:52:57] &lt;pieterh&gt;     has taken waay too long to get code into peoples&#8217; hands
| [Wednesday 23 February 2011] [09:58:32] &lt;bijuC&gt;       Sorry got disconnected
| [Wednesday 23 February 2011] [10:03:04] &lt;bijuC&gt;       I am also looking for clarity as to how openPGM is linked into 2.1.1 for MSVC
| [Wednesday 23 February 2011] [10:03:48] &lt;bijuC&gt;       I see #include &lt;pgm/pgm.h&gt; in pgm_socket
| [Wednesday 23 February 2011] [10:04:31] &lt;bijuC&gt;       But the libzmq does not include the openPGm dir nor does it link against libpgm.lib
| [Wednesday 23 February 2011] [10:04:43] &lt;bijuC&gt;       Just curious how it is done
| [Wednesday 23 February 2011] [10:08:03] &lt;mikko&gt;       bijuC: i use separate installer
| [Wednesday 23 February 2011] [10:08:15] &lt;mikko&gt;       <a class="reference external" href="http://snapshot.zero.mq/msvc2008/">http://snapshot.zero.mq/msvc2008/</a>
| [Wednesday 23 February 2011] [10:08:30] &lt;mikko&gt;       you can try the snapshot dlls
| [Wednesday 23 February 2011] [10:08:35] &lt;mikko&gt;       they should be built with openpgm
| [Wednesday 23 February 2011] [10:11:04] &lt;bijuC&gt;       Sorry Mikko, do you mean separate installer for zmq or openPGM
| [Wednesday 23 February 2011] [10:11:51] &lt;bijuC&gt;       You want me to try the dll/libs in the link you gave .. to see if the RELEASE build issue persists?
| [Wednesday 23 February 2011] [10:12:13] &lt;mikko&gt;       bijuC: im saying that this link contains dll built with openpgm
| [Wednesday 23 February 2011] [10:12:19] &lt;mikko&gt;       statically linked openpgm
| [Wednesday 23 February 2011] [10:12:36] &lt;mikko&gt;       give it a spin whether the issue persists with that version as well
| [Wednesday 23 February 2011] [10:12:44] &lt;bijuC&gt;       oh ok
| [Wednesday 23 February 2011] [10:12:50] &lt;bijuC&gt;       give me 5 mins
| [Wednesday 23 February 2011] [10:12:56] &lt;mikko&gt;       thats the latest master branch
| [Wednesday 23 February 2011] [10:13:09] &lt;mikko&gt;       can you also put the code to gist.github.com
| [Wednesday 23 February 2011] [10:14:29] &lt;cremes&gt;      glad to hear the christchurch guy came through the earthquake relatively unscathed
| [Wednesday 23 February 2011] [10:37:36] &lt;andrewvc&gt;    cremes:  good morning
| [Wednesday 23 February 2011] [10:38:12] &lt;cremes&gt;      andrewvc: good morning
| [Wednesday 23 February 2011] [10:38:20] &lt;cremes&gt;      i saw your notes; that is an incredible find
| [Wednesday 23 February 2011] [10:38:37] &lt;andrewvc&gt;    yeah, I mean, I knew it had to be something simple and stupid lol
| [Wednesday 23 February 2011] [10:38:45] &lt;cremes&gt;      i was looking over my transcript from last night and i said (paraphrased)
| [Wednesday 23 February 2011] [10:38:55] &lt;cremes&gt;      &#8220;there&#8217;s no way 0mq is exposing an internal socketpair&#8221;
| [Wednesday 23 February 2011] [10:38:57] &lt;cremes&gt;      :)
| [Wednesday 23 February 2011] [10:38:59] &lt;andrewvc&gt;    lol
| [Wednesday 23 February 2011] [10:39:17] &lt;cremes&gt;      any ideas on how to fix 0mq?
| [Wednesday 23 February 2011] [10:39:22] &lt;andrewvc&gt;    yeah
| [Wednesday 23 February 2011] [10:39:33] &lt;andrewvc&gt;    well, give EM a &#8216;nevershutdownthisFD&#8217; flag
| [Wednesday 23 February 2011] [10:39:34] &lt;andrewvc&gt;    is one
| [Wednesday 23 February 2011] [10:39:47] &lt;cremes&gt;      that just masks the problem
| [Wednesday 23 February 2011] [10:39:53] &lt;andrewvc&gt;    I don&#8217;t think its possible
| [Wednesday 23 February 2011] [10:40:01] &lt;andrewvc&gt;    aside from writing a kernel patch
| [Wednesday 23 February 2011] [10:40:02] &lt;cremes&gt;      i think this deserves a 0mq fix so that <em>no</em> language binding can screw it up
| [Wednesday 23 February 2011] [10:40:13] &lt;andrewvc&gt;    ZMQ wants a fake FD, but those don&#8217;t exist
| [Wednesday 23 February 2011] [10:40:24] &lt;cremes&gt;      well, perhaps a flag in the 0mq code that uses that FD
| [Wednesday 23 February 2011] [10:40:42] &lt;cremes&gt;      it may have to check that it&#8217;s still valid every time before using it
| [Wednesday 23 February 2011] [10:40:52] &lt;andrewvc&gt;    yeah, I mean
| [Wednesday 23 February 2011] [10:41:06] &lt;cremes&gt;      if 0mq is going to expose that <em>and</em> external code can close this &#8220;internal&#8221; socketpair, then it has to be defensive
| [Wednesday 23 February 2011] [10:41:10] &lt;andrewvc&gt;    you could do that, but it&#8217;d still suck, because then you&#8217;d have to either open a new FD automatically
| [Wednesday 23 February 2011] [10:41:17] &lt;andrewvc&gt;    which could cause tons of its own issues
| [Wednesday 23 February 2011] [10:41:25] &lt;andrewvc&gt;    or just let the socket die, but not be exceptional
| [Wednesday 23 February 2011] [10:41:32] &lt;andrewvc&gt;    I guess you could make a new error code eh?
| [Wednesday 23 February 2011] [10:41:56] &lt;cremes&gt;      doesn&#8217;t ETERM capture the issue well enough?
| [Wednesday 23 February 2011] [10:43:12] &lt;andrewvc&gt;    yeah, you could probably trigger it here: <a class="reference external" href="https://github.com/zeromq/zeromq2/blob/master/src/mailbox.cpp#L204">https://github.com/zeromq/zeromq2/blob/master/src/mailbox.cpp#L204</a>
| [Wednesday 23 February 2011] [10:43:19] &lt;andrewvc&gt;    add a condition for EBADF
| [Wednesday 23 February 2011] [10:43:57] &lt;cremes&gt;      yeah, that has potential
| [Wednesday 23 February 2011] [10:44:43] &lt;ptrb&gt;        pyzmq requires python... what? 2.5?
| [Wednesday 23 February 2011] [10:44:45] &lt;andrewvc&gt;    I mean, it&#8217;s definitely something someone will hit in the future
| [Wednesday 23 February 2011] [10:45:07] &lt;andrewvc&gt;    if you stick ZMQ_FD into an existing poller, there&#8217;s a good chance you automatically will call close on it
| [Wednesday 23 February 2011] [10:45:13] &lt;andrewvc&gt;    or whatever
| [Wednesday 23 February 2011] [10:46:32] &lt;andrewvc&gt;    so, my other thought, is just to add this to EM instead of using Kernel#epoll  EM::PeriodicTimer.new(0.1) { #zmq_poll stuff}
| [Wednesday 23 February 2011] [10:47:12] &lt;andrewvc&gt;    which I&#8217;m not sure would really have any perf ramifications, I mean, 2 calls to a poller vs. 1 prolly wouldn&#8217;t kill performance right?
| [Wednesday 23 February 2011] [10:47:19] &lt;andrewvc&gt;    though it isn&#8217;t great
| [Wednesday 23 February 2011] [10:55:28] &lt;cremes&gt;      andrewvc: i don&#8217;t think using a periodic timer is appropriate for this
| [Wednesday 23 February 2011] [10:55:42] &lt;cremes&gt;      i think it needs a genuine fix in 0mq
| [Wednesday 23 February 2011] [10:55:49] &lt;andrewvc&gt;    agreed
| [Wednesday 23 February 2011] [10:56:02] &lt;andrewvc&gt;    I guess I&#8217;ll post it on the list
| [Wednesday 23 February 2011] [10:56:16] &lt;cremes&gt;      still, an awesome find; i see from the irc backbuffer that sustrik already knows about it
| [Wednesday 23 February 2011] [10:56:41] &lt;andrewvc&gt;    hehe, yeah. This would have been really easy to find btw, if I&#8217;d known about a trick evanphx showed me
| [Wednesday 23 February 2011] [10:56:47] &lt;andrewvc&gt;    well, didn&#8217;t show me, we never used ti
| [Wednesday 23 February 2011] [10:56:52] &lt;andrewvc&gt;    but told me about
| [Wednesday 23 February 2011] [10:56:57] &lt;cremes&gt;      ??
| [Wednesday 23 February 2011] [10:57:08] &lt;andrewvc&gt;    apparently dtrace can be set to give a GDB back trace for each syscall
| [Wednesday 23 February 2011] [10:57:25] &lt;andrewvc&gt;    I&#8217;m not sure if strace does that, but it would have showed who was calling close()
| [Wednesday 23 February 2011] [10:57:27] &lt;cremes&gt;      is that an osx-only trick?
| [Wednesday 23 February 2011] [10:57:35] &lt;andrewvc&gt;    perhaps, I didn&#8217;t really look into it
| [Wednesday 23 February 2011] [10:57:46] &lt;cremes&gt;      that&#8217;s very cool; i&#8217;ll have to research more details
| [Wednesday 23 February 2011] [10:58:02] &lt;andrewvc&gt;    yeah, definitely
| [Wednesday 23 February 2011] [11:14:31] &lt;andrewvc&gt;    cremes: so the other aspect of it is, there&#8217;s likely a bug in my code
| [Wednesday 23 February 2011] [11:14:53] &lt;andrewvc&gt;    but it&#8217;s not my fault :) somehow I&#8217;m triggering an exception, and EM is catching and dealing with it
| [Wednesday 23 February 2011] [11:14:58] &lt;andrewvc&gt;    but I still call a getsockopt
| [Wednesday 23 February 2011] [11:15:08] &lt;andrewvc&gt;    which is odd because I never use threads
| [Wednesday 23 February 2011] [11:15:17] &lt;andrewvc&gt;    since I&#8217;m in EM
| [Wednesday 23 February 2011] [11:15:29] &lt;andrewvc&gt;    could be something in the internals of EM I guess
| [Wednesday 23 February 2011] [11:15:47] &lt;cremes&gt;      try wrapping your code in begin/rescue/end and see if you can catch it before EM does
| [Wednesday 23 February 2011] [11:15:54] &lt;sustrik&gt;     andrewvc: the problem with ruby binding
| [Wednesday 23 February 2011] [11:15:59] &lt;sustrik&gt;     we&#8217;ve spoke about
| [Wednesday 23 February 2011] [11:16:02] &lt;sustrik&gt;     is it fixed?
| [Wednesday 23 February 2011] [11:16:14] &lt;andrewvc&gt;    hehe, hey I just woke up :)
| [Wednesday 23 February 2011] [11:16:32] &lt;sustrik&gt;     just asking
| [Wednesday 23 February 2011] [11:16:35] &lt;andrewvc&gt;    I&#8217;ll take a look at it later for sure though
| [Wednesday 23 February 2011] [11:16:43] &lt;andrewvc&gt;    yeah, no worries :)
| [Wednesday 23 February 2011] [11:16:48] &lt;cremes&gt;      isn&#8217;t this a problem that <em>all</em> language bindings have?
| [Wednesday 23 February 2011] [11:17:28] &lt;sustrik&gt;     no idea
| [Wednesday 23 February 2011] [11:17:41] &lt;cremes&gt;      andrewvc: ??
| [Wednesday 23 February 2011] [11:17:44] &lt;sustrik&gt;     it&#8217;s ruby-ffi, right?
| [Wednesday 23 February 2011] [11:18:00] &lt;andrewvc&gt;    lemme look at it again, I was so tired last night, I don&#8217;t recall what it was
| [Wednesday 23 February 2011] [11:18:09] &lt;cremes&gt;      if the binding can close the FD of the internal socketpair and 0mq doesn&#8217;t catch it, that&#8217;s a general problem
| [Wednesday 23 February 2011] [11:18:20] &lt;andrewvc&gt;    ohhh, we&#8217;re talking about two separate issues
| [Wednesday 23 February 2011] [11:18:28] &lt;sustrik&gt;     ah
| [Wednesday 23 February 2011] [11:18:30] &lt;cremes&gt;      ok, ignore me then :)
| [Wednesday 23 February 2011] [11:18:30] &lt;andrewvc&gt;    so, one issue is this
| [Wednesday 23 February 2011] [11:18:39] &lt;cremes&gt;      andrewvc: i&#8217;ll let you do the talking
| [Wednesday 23 February 2011] [11:18:43] &lt;sustrik&gt;     i meant be BADFD one
| [Wednesday 23 February 2011] [11:18:50] &lt;andrewvc&gt;    oh, so it is the same one
| [Wednesday 23 February 2011] [11:18:54] &lt;andrewvc&gt;    well, it&#8217;s not actually the binding
| [Wednesday 23 February 2011] [11:19:00] &lt;andrewvc&gt;    it&#8217;s eventmachine, the ruby reactor library
| [Wednesday 23 February 2011] [11:19:10] &lt;andrewvc&gt;    it assumes on hitting an exceptional state that you want to close all the FDs
| [Wednesday 23 February 2011] [11:19:10] &lt;sustrik&gt;     aha
| [Wednesday 23 February 2011] [11:19:13] &lt;andrewvc&gt;    which is its fault
| [Wednesday 23 February 2011] [11:19:18] &lt;andrewvc&gt;    but maybe zmq should check for EBADF
| [Wednesday 23 February 2011] [11:19:21] &lt;andrewvc&gt;    in mailbox.cpp
| [Wednesday 23 February 2011] [11:19:25] &lt;andrewvc&gt;    and print a friendly error message
| [Wednesday 23 February 2011] [11:19:31] &lt;sustrik&gt;     there&#8217;s one issue in 0mq core bug trakcer
| [Wednesday 23 February 2011] [11:19:33] &lt;andrewvc&gt;    like hey, you shutdown an internal FD I think, don&#8217;t do that
| [Wednesday 23 February 2011] [11:19:36] &lt;sustrik&gt;     <a class="reference external" href="https://github.com/zeromq/zeromq2/issues#issue/166">https://github.com/zeromq/zeromq2/issues#issue/166</a>
| [Wednesday 23 February 2011] [11:19:46] &lt;sustrik&gt;     which looks similar
| [Wednesday 23 February 2011] [11:20:05] &lt;sustrik&gt;     can it be possibly related?
| [Wednesday 23 February 2011] [11:21:12] &lt;andrewvc&gt;    one sec, brb
| [Wednesday 23 February 2011] [11:24:56] &lt;andrewvc&gt;    sustrik: cremes: I don&#8217;t think that&#8217;s related
| [Wednesday 23 February 2011] [11:25:01] &lt;andrewvc&gt;    I don&#8217;t see him using ZMQ::FD
| [Wednesday 23 February 2011] [11:26:09] &lt;andrewvc&gt;    I&#8217;m about to post to the ML, with a better breakdown of what happened / better organized thoughts
| [Wednesday 23 February 2011] [11:41:15] &lt;cremes&gt;      sustrik: what do you think of:  https://github.com/zeromq/zeromq2/issues#issue/171
| [Wednesday 23 February 2011] [12:11:22] &lt;jfkw&gt;        Newb to message-queueing, interested in 0mq, wondered if the following is in scope:
| [Wednesday 23 February 2011] [12:12:06] &lt;jfkw&gt;        I have a remote-site BerkelyDB with a high write rate. Need to replicate back to the home office over a not-fast, sometimes unavailable link.
| [Wednesday 23 February 2011] [12:14:20] &lt;jfkw&gt;        Does 0mq support reliable in-order delivery and compression of data over the wire? Remote site runs Windows XP, home office will be Linux 2.6+.
| [Wednesday 23 February 2011] [12:16:58] &lt;andrewvc&gt;    jfkw compression, no
| [Wednesday 23 February 2011] [12:17:02] &lt;andrewvc&gt;    in-order yes
| [Wednesday 23 February 2011] [12:17:36] &lt;andrewvc&gt;    as far as unavailable, it should reconnect automatically if using the TCP transport
| [Wednesday 23 February 2011] [12:17:43] &lt;andrewvc&gt;    but I&#8217;d test it on your network to be sure
| [Wednesday 23 February 2011] [12:18:05] &lt;andrewvc&gt;    you can compress the data yourself before sending it
| [Wednesday 23 February 2011] [12:18:20] &lt;andrewvc&gt;    since zmq frames messages, each one could be gzipped
| [Wednesday 23 February 2011] [12:19:55] &lt;andrewvc&gt;    as far as DB replication goes though, not sure I&#8217;d just trust all that to ZMQ
| [Wednesday 23 February 2011] [12:22:43] &lt;pieterh&gt;     jfkw: have you read the Guide yet?
| [Wednesday 23 February 2011] [12:26:31] &lt;jfkw&gt;        andrewvc: ack on BDB replication being nontrivial, won&#8217;t expect the ZMQ to do it for us.
| [Wednesday 23 February 2011] [12:26:51] &lt;andrewvc&gt;    cool, yeah I&#8217;d really read the guide
| [Wednesday 23 February 2011] [12:27:10] &lt;jfkw&gt;        pieterh: Ah, thanks for suggesting that, I see the link on the first page of Learn now. Missed it the first time through hunting for my specific issue.
| [Wednesday 23 February 2011] [12:27:27] &lt;pieterh&gt;     jfkw: let me make that link more visible
| [Wednesday 23 February 2011] [14:00:34] &lt;amacleod&gt;    I feel like I must somehow be misusing the Java API.  I keep getting assertions when I try to terminate contexts.
| [Wednesday 23 February 2011] [14:00:53] &lt;amacleod&gt;    Now it is &#8220;nbytes == sizeof (command_t)&#8221; in mailbox.cpp:244
| [Wednesday 23 February 2011] [14:01:13] &lt;amacleod&gt;    Using git master pulled yesterday.
| [Wednesday 23 February 2011] [14:12:24] &lt;pieterh&gt;     it shouldn&#8217;t be possible to crash 0MQ via an API like that... :-/
| [Wednesday 23 February 2011] [14:12:39] &lt;amacleod&gt;    I agree :-/
| [Wednesday 23 February 2011] [14:13:02] &lt;pieterh&gt;     do you have a simple reproducible case?
| [Wednesday 23 February 2011] [14:13:24] &lt;amacleod&gt;    So, what I&#8217;m doing now is running, in the same run-time due to the way my test harnesses work, two separate servers, one after the other.
| [Wednesday 23 February 2011] [14:13:35] &lt;amacleod&gt;    pieterh, I do not presently.  I might be able to make one.
| [Wednesday 23 February 2011] [14:13:40] &lt;pieterh&gt;     we&#8217;d need that
| [Wednesday 23 February 2011] [14:13:46] &lt;pieterh&gt;     an absolute minimal test case
| [Wednesday 23 February 2011] [14:14:02] &lt;amacleod&gt;    Is it possible for lingering data from a previous socket to corrupt a new one that binds to the same port?
| [Wednesday 23 February 2011] [14:14:05] &lt;pieterh&gt;     sorry, this is not fun when you&#8217;re trying to do other work...
| [Wednesday 23 February 2011] [14:14:23] &lt;pieterh&gt;     amacleod: not if the socket is being kept within one thread
| [Wednesday 23 February 2011] [14:14:28] &lt;pieterh&gt;     are you moving sockets between threads?
| [Wednesday 23 February 2011] [14:14:48] &lt;pieterh&gt;     that is one common cause of 0MQ failures and it obviously can happen in any threaded language
| [Wednesday 23 February 2011] [14:14:50] &lt;amacleod&gt;    pieterh, indeed.  Let me see what I can do about creating a minimal test case.
| [Wednesday 23 February 2011] [14:15:17] &lt;amacleod&gt;    pieterh, I&#8217;m pretty sure I&#8217;ve gotten it to where I&#8217;m never moving sockets between threads.
| [Wednesday 23 February 2011] [14:16:01] &lt;pieterh&gt;     you used to do that?
| [Wednesday 23 February 2011] [14:16:47] &lt;amacleod&gt;    Well, that was the cause of my original problem.  I didn&#8217;t think I was using sockets between threads, but all threads were using a single context to create sockets.
| [Wednesday 23 February 2011] [14:18:01] &lt;pieterh&gt;     that should be safe
| [Wednesday 23 February 2011] [14:18:09] &lt;pieterh&gt;     contexts can be shared
| [Wednesday 23 February 2011] [14:18:47] &lt;pieterh&gt;     if a threads create sockets and don&#8217;t pass those to other threads, you&#8217;re not moving sockets between threads
| [Wednesday 23 February 2011] [14:19:02] &lt;pieterh&gt;     even that is safe so long as you do not read/write/close from more than one thread
| [Wednesday 23 February 2011] [14:23:51] &lt;amacleod&gt;    On second look, I think threading may still be my problem.  All of the actual reading and writing happens in worker threads, which is fine, but then when the test is complete, it calls the close method of my wrapper object, so close would be called from the main thread. :(
| [Wednesday 23 February 2011] [14:39:05] &lt;pieterh&gt;     amacleod: yeah, that would crash it
| [Wednesday 23 February 2011] [14:42:00] &lt;amacleod&gt;    Threaded concurrency gives me a headache.  Give me a single-threaded select/poll event reactor any day.
| [Wednesday 23 February 2011] [14:45:20] &lt;cremes&gt;      amacleod: zmqmachine, but you gotta use ruby ;)
| [Wednesday 23 February 2011] [14:45:33] &lt;amacleod&gt;    cremes, :-D  Wish I could.
| [Wednesday 23 February 2011] [14:45:46] &lt;amacleod&gt;    It would be cool if Twisted had 0MQ support too.
| [Wednesday 23 February 2011] [14:45:47] &lt;pieterh&gt;     amacleod: sounds like you&#8217;re mixing shared-state concurrency with message passing
| [Wednesday 23 February 2011] [14:45:53] &lt;pieterh&gt;     that is usually a terrible idea
| [Wednesday 23 February 2011] [14:46:51] &lt;pieterh&gt;     I&#8217;ve pushed a whitepaper for an open source data plant: http://www.zeromq.org/whitepapers:open-source-data-plant
| [Wednesday 23 February 2011] [14:46:55] &lt;amacleod&gt;    pieterh, I know it is.  Maybe I can turn message passing to my advantage.
| [Wednesday 23 February 2011] [14:47:01] &lt;pieterh&gt;     cremes: this might interest you...
| [Wednesday 23 February 2011] [14:48:05] &lt;pieterh&gt;     amacleod: what transport are you using to/from workers?
| [Wednesday 23 February 2011] [14:48:14] &lt;pieterh&gt;     tcp?
| [Wednesday 23 February 2011] [14:48:47] &lt;amacleod&gt;    Well.. I&#8217;m using TCP for the client/server communication.
| [Wednesday 23 February 2011] [14:48:49] &lt;cremes&gt;      pieterh: what might interest me?
| [Wednesday 23 February 2011] [14:49:00] &lt;pieterh&gt;     see the line just above
| [Wednesday 23 February 2011] [14:49:15] &lt;cremes&gt;      oh, the data plant thing? i&#8217;ll look at it...
| [Wednesday 23 February 2011] [14:49:35] &lt;amacleod&gt;    What I&#8217;m just now thinking is that maybe I should have the stuff inside the server do like the pattern from your recent example&#8211;inproc router to router (or dealer to dealer?).
| [Wednesday 23 February 2011] [14:49:42] &lt;pieterh&gt;     cremes: great
| [Wednesday 23 February 2011] [14:50:16] &lt;pieterh&gt;     amacleod: what example, there are so many...?
| [Wednesday 23 February 2011] [14:50:28] &lt;pieterh&gt;     use inproc when you know the server will always be one process
| [Wednesday 23 February 2011] [14:50:42] &lt;pieterh&gt;     use tcp when you want to in future move workers to other boxes or processes
| [Wednesday 23 February 2011] [14:51:13] &lt;amacleod&gt;    http://zguide.zeromq.org/chapter:all#toc51
| [Wednesday 23 February 2011] [14:51:46] &lt;amacleod&gt;    Part of the trouble is I need to federate disparate connection types.
| [Wednesday 23 February 2011] [14:51:58] &lt;pieterh&gt;     right, so clients and servers talk over tcp, each has their own context, and manage their own sockets
| [Wednesday 23 February 2011] [14:52:13] &lt;pieterh&gt;     that sounds painful!
| [Wednesday 23 February 2011] [14:52:45] &lt;amacleod&gt;    Yeah.  Square pegs, round holes.  Pain pain pain.
| [Wednesday 23 February 2011] [15:01:50] &lt;cremes&gt;      pieterh: i built a (small) whaleshark and didn&#8217;t even know it!
| [Wednesday 23 February 2011] [15:01:53] &lt;cremes&gt;      :)
| [Wednesday 23 February 2011] [15:02:03] &lt;pieterh&gt;     cremes: :-)
| [Wednesday 23 February 2011] [15:03:00] &lt;cremes&gt;      pieterh: i&#8217;m wondering if i can help you with a C repro of this:  https://github.com/zeromq/zeromq2/issues#issue/171
| [Wednesday 23 February 2011] [15:03:15] &lt;cremes&gt;      it&#8217;s preventing my whaleshark from running for more than about 6 hours before exhausting memory
| [Wednesday 23 February 2011] [15:03:21] &lt;cremes&gt;      :| [Wednesday 23 February 2011] [15:04:26] &lt;pieterh&gt;     when you say, &#8220;if I can help you&#8221;, you mean &#8220;if you can help me&#8221;?
| [Wednesday 23 February 2011] [15:05:05] &lt;cremes&gt;      um, yeah!
| [Wednesday 23 February 2011] [15:05:15] &lt;cremes&gt;      and by extension, the whole universe of 0mq users!
| [Wednesday 23 February 2011] [15:05:24] &lt;pieterh&gt;     of course, of course...
| [Wednesday 23 February 2011] [15:05:28] &lt;cremes&gt;      heh
| [Wednesday 23 February 2011] [15:05:54] &lt;pieterh&gt;     i&#8217;m mentally filtering out all that reactor stuff...
| [Wednesday 23 February 2011] [15:06:01] &lt;CIA-21&gt;      jzmq: 03Alois Blaka 07master * r013828f 10/ (7 files in 3 dirs): Merge remote branch &#8216;orig/master&#8217; - http://bit.ly/eaOuPN
| [Wednesday 23 February 2011] [15:06:06] &lt;CIA-21&gt;      jzmq: 03Alois Blaka 07master * r086899d 10/ (2 files): Poll timeout in ZMQQueue and ZMQForwarder changed from 250 usec to 250 msec. - http://bit.ly/dP4yAQ
| [Wednesday 23 February 2011] [15:06:07] &lt;CIA-21&gt;      jzmq: 03Alois Blaka 07master * r522d747 10/ (2 files): Fixed termination of ZMQForwarder and ZMQQueue tests. - http://bit.ly/dOWVmj
| [Wednesday 23 February 2011] [15:06:20] &lt;cremes&gt;      pieterh: the 3 steps i list are pretty much the meat of the issue
| [Wednesday 23 February 2011] [15:06:38] &lt;pieterh&gt;     ok, tomorrow, I want to catch a movie this evening
| [Wednesday 23 February 2011] [15:06:40] &lt;cremes&gt;      i repro&#8217;ed it using my reactor since all the threading stuff is abstracted away for me
| [Wednesday 23 February 2011] [15:06:50] &lt;cremes&gt;      pieterh: no worries...
| [Wednesday 23 February 2011] [15:06:57] &lt;mikko&gt;       cremes: are you sure that this is not ruby gc issue?
| [Wednesday 23 February 2011] [15:06:57] &lt;pieterh&gt;     I&#8217;ll make the case you explained, we&#8217;ll see if it reproduces the problem or not
| [Wednesday 23 February 2011] [15:08:04] &lt;dijix&gt;       I&#8217;ve got something that should be simple giving me problems - something I usually take to mean I have a fundamental misunderstanding.
| [Wednesday 23 February 2011] [15:08:17] &lt;mikko&gt;       maybe not
| [Wednesday 23 February 2011] [15:09:04] &lt;dijix&gt;       I can set up a REQ/REP - REQ connects to bound REP.  I can send from REQ, receive at REP and send back to REQ - no problems.
| [Wednesday 23 February 2011] [15:10:16] &lt;dijix&gt;       Changing to REQ/XREP - I get a three-part message at XREP from the same simple Send from REQ - but I cannot seem to send anything at all back to the REQ.  even if on that side, I RecvAll, I cannot seem to get anything.
| [Wednesday 23 February 2011] [15:11:47] &lt;cremes&gt;      mikko: i am nearly positive; this behavior is the same across 3 different ruby runtimes each with completely different GC implementations
| [Wednesday 23 February 2011] [15:12:17] &lt;cremes&gt;      also, the ruby heap isn&#8217;t growing; top will show the rsize as (for example) 1GB but dumping the ruby heap
| [Wednesday 23 February 2011] [15:12:30] &lt;cremes&gt;      only produces around 100MB; where is the other 900MB?
| [Wednesday 23 February 2011] [15:13:04] &lt;cremes&gt;      but the only way to know for sure is to repro in C
| [Wednesday 23 February 2011] [15:14:54] &lt;cremes&gt;      dijix: read chapter 3 (advanced request-reply) in the guide
| [Wednesday 23 February 2011] [15:15:16] &lt;cremes&gt;      dijix: it will explain how to deal with the xrep envelope and how to properly return a reply with it
| [Wednesday 23 February 2011] [15:16:47] &lt;mikko&gt;       cremes: forwarder device is the one that is problematic?
| [Wednesday 23 February 2011] [15:20:26] &lt;cremes&gt;      mikko: no, i don&#8217;t think it&#8217;s specific to the device
| [Wednesday 23 February 2011] [15:20:41] &lt;cremes&gt;      but using one is the easiest way to isolate the problem and see the memory growth
| [Wednesday 23 February 2011] [15:20:59] &lt;dijix&gt;       cremes: Thanks - I was trying to figure it out from info in Chap 2.
| [Wednesday 23 February 2011] [15:21:09] &lt;cremes&gt;      it appears to me that some resource isn&#8217;t freed when there are rapid connect/disconnect operations going on
| [Wednesday 23 February 2011] [15:21:32] &lt;cremes&gt;      dijix: you are welcome; once you figure the envelope/framing out, it&#8217;s actually pretty cool
| [Wednesday 23 February 2011] [15:22:47] &lt;pieterh&gt;     cremes: I&#8217;ll do that tomorrow, np.
| [Wednesday 23 February 2011] [15:23:04] &lt;pieterh&gt;     cyat, /me is off
| [Wednesday 23 February 2011] [15:23:07] &lt;mikko&gt;       pieterh: enjoy
| [Wednesday 23 February 2011] [15:23:16] &lt;pieterh&gt;     mikko: thanks :-)
| [Wednesday 23 February 2011] [15:23:31] &lt;cremes&gt;      enjoy your movie!
| [Wednesday 23 February 2011] [15:56:49] &lt;ljackson&gt;    anyone know if many threads using push socket each with HWM and SWAP is a valid use case ?
| [Wednesday 23 February 2011] [15:57:11] &lt;ljackson&gt;    appears that (swap) it is not thread safe ....
| [Wednesday 23 February 2011] [15:57:13] &lt;ljackson&gt;    2.1.1
| [Wednesday 23 February 2011] [15:58:12] &lt;mikko&gt;       ljackson: you mean threads concurrently accessing push socket?
| [Wednesday 23 February 2011] [15:59:48] &lt;ljackson&gt;    no one push socket per thread
| [Wednesday 23 February 2011] [15:59:58] &lt;ljackson&gt;    and having HWM and SWAP enabled on them
| [Wednesday 23 February 2011] [16:00:27] &lt;ljackson&gt;    appears to have a segfault as the context is sharing swap for the threads without locking i think
| [Wednesday 23 February 2011] [16:00:58] &lt;mikko&gt;       i thought there was atomic counter for swap instances
| [Wednesday 23 February 2011] [16:01:04] &lt;mikko&gt;       each socket having their own
| [Wednesday 23 February 2011] [16:01:21] &lt;mikko&gt;       have you got a small reproducable test-case?
| [Wednesday 23 February 2011] [16:01:24] &lt;ljackson&gt;    http://pastebin.com/JV1PPyt0
| [Wednesday 23 February 2011] [16:01:26] &lt;ljackson&gt;    no
| [Wednesday 23 February 2011] [16:01:47] &lt;ljackson&gt;    just ran across it and wanted to know if it was valid to have swap/hwm per socket in threads w/ single contet
| [Wednesday 23 February 2011] [16:01:49] &lt;ljackson&gt;    er context
| [Wednesday 23 February 2011] [16:01:56] &lt;ljackson&gt;    for PUSH
| [Wednesday 23 February 2011] [16:03:05] &lt;ljackson&gt;    there were 4 threads each with their own PUSH socket to the same tcp address all with HWM of 10k and SWAP of 25Mb
| [Wednesday 23 February 2011] [16:03:26] &lt;ljackson&gt;    and one of them caused that segfault
| [Wednesday 23 February 2011] [16:04:22] &lt;ljackson&gt;    yep looks like they create 4 swap files
| [Wednesday 23 February 2011] [16:04:28] &lt;ljackson&gt;    so odd that it segfaulted
| [Wednesday 23 February 2011] [16:05:43] &lt;mikko&gt;       i mean the actual code
| [Wednesday 23 February 2011] [16:06:01] &lt;ljackson&gt;    yeah If I can figure out how to reproduce I will create a test bit of code
| [Wednesday 23 February 2011] [16:06:10] &lt;mikko&gt;       cool
| [Wednesday 23 February 2011] [16:06:19] &lt;ljackson&gt;    just wanted to know if the use case was valid now I see the 4 swap files must be something odd/else
| [Wednesday 23 February 2011] [16:06:19] &lt;mikko&gt;       can you strace the process ?
| [Wednesday 23 February 2011] [16:06:29] &lt;mikko&gt;       to see what kind of swap files are being created
| [Wednesday 23 February 2011] [16:06:37] &lt;ljackson&gt;    i see them in the directory
| [Wednesday 23 February 2011] [16:06:39] &lt;mikko&gt;       it should be valid case
| [Wednesday 23 February 2011] [16:06:40] &lt;ljackson&gt;    as .swap
| [Wednesday 23 February 2011] [16:07:12] &lt;ljackson&gt;    with zmq_&lt;master pid&gt;_&lt;thread_id&gt;.swap
| [Wednesday 23 February 2011] [16:07:23] &lt;ljackson&gt;    er s/thread_id/socket instance/
| [Wednesday 23 February 2011] [16:07:50] &lt;ljackson&gt;    is there a socketopt to specifiy where the swap file would be ?
| [Wednesday 23 February 2011] [16:08:42] &lt;mikko&gt;       no, not at the moment
| [Wednesday 23 February 2011] [16:09:10] &lt;mikko&gt;       you can for example chdir(&#8220;/tmp&#8221;); at the beginning
| [Wednesday 23 February 2011] [16:11:34] &lt;ljackson&gt;    ok fair nuf
| [Wednesday 23 February 2011] [16:11:54] &lt;ljackson&gt;    what about mmap&#8217;ed vs file
| [Wednesday 23 February 2011] [16:13:53] &lt;ljackson&gt;    it appears to pause the HWM/SWAP&#8217;ed socket&#8217;s send method after it reaches the max, this must be dependant on the socket type ? e.g. pub would discard where as res/req &amp; push/pull ...etc won&#8217;t ?
| [Wednesday 23 February 2011] [16:14:19] &lt;mikko&gt;       yes, the hwm behaviour is socket dependent
| [Wednesday 23 February 2011] [16:14:54] &lt;mikko&gt;       we have had a discussions about swap
| [Wednesday 23 February 2011] [16:15:31] &lt;mikko&gt;       i think we came to a conclusion that speed at that point is not the primary concern
| [Wednesday 23 February 2011] [16:16:25] &lt;mikko&gt;       as initially you buffer into memory, then into disc as secondary thing
| [Wednesday 23 February 2011] [16:18:36] &lt;dijix&gt;       cremes: I&#8217;ve got the XREP message envelopes figured out - thanks for your help
| [Wednesday 23 February 2011] [16:19:20] &lt;cremes&gt;      dijix: glad to hear it!
| [Wednesday 23 February 2011] [16:25:39] &lt;dijix&gt;       cremes: Is there any other difference between using REQ/XREP versus PAIR/XREP, other than the empty message portion between the payload and the address envelopes?
| [Wednesday 23 February 2011] [16:26:43] &lt;cremes&gt;      PAIR is for point-to-point communications; it should <em>only</em> be used with another PAIR socket
| [Wednesday 23 February 2011] [16:26:49] &lt;cremes&gt;      therefore PAIR/XREP is illegal
| [Wednesday 23 February 2011] [16:26:58] &lt;cremes&gt;      though the lib won&#8217;t complain
| [Wednesday 23 February 2011] [16:27:07] &lt;dijix&gt;       true - and it seems to behave
| [Wednesday 23 February 2011] [16:51:21] &lt;dijix&gt;       cremes: Strange - for REQ/XREP - if I set the Identity explicitly on the REQ, the response works, but if I allow it to generate a UUID, it doesn&#8217;t.  on the XREP side, I&#8217;m breaking down the RecvAll into three parts, the UUID, empty and payload.  Then on the response, I&#8217;m contructing a three-part reply using that UUID, and empty message, and the response message.
| [Wednesday 23 February 2011] [17:36:21] topic #fmcg ^&lt; JeriBunch MultiStream is best viewed in this decade <a class="reference external" href="http://is.gd/glTc1">http://is.gd/glTc1</a> &gt;^^&lt; Jeri&#8217;s stream is usually the speechbot &gt;^^&lt; Urlbot help at <a class="reference external" href="http://is.gd/bsLwZX">http://is.gd/bsLwZX</a> &gt;^^&lt; SpeechKrafter Voices at <a class="reference external" href="http://is.gd/xZl5fV">http://is.gd/xZl5fV</a> &gt;^^&lt; FMCG Forums at <a class="reference external" href="http://is.gd/cHCD75">http://is.gd/cHCD75</a> &gt;^^&lt; TileBot Commands at <a class="reference external" href="http://is.gd/g1Yu5">http://is.gd/g1Yu5</a> &gt;^^&lt; This channel was created for the open sharing of ideas.  Did you bring a hack?&gt;
| [Wednesday 23 February 2011] [17:44:31] Notice        -NickServ- This nickname is registered. Please choose a different nickname, or identify via /msg NickServ identify &lt;password&gt;.
| [Wednesday 23 February 2011] [17:44:31] Notice        -NickServ- You are now identified for travlr.
| [Wednesday 23 February 2011] [17:44:36] Notice        -ChanServ- [#qt] Here are the rules for #qt: (1) Don&#8217;t just join, ask, and quit - stay around and answer questions yourself! (2) Be patient, people may not see your question right away.
| [Wednesday 23 February 2011] [17:47:59] &lt;dijix&gt;       cremes: Did you see that comment from me just before the netsplit?  regarding explicitly assigning the IDENTITY on the REQ socket before sending to XREP?  If I set it, the return message I contruct using it works, but not if I use the UUID created automatically
| [Wednesday 23 February 2011] [17:48:23] &lt;<a href="#id3163"><span class="problematic" id="id3164">dg_</span></a>&gt; Hello &#8212; can someone confirm that zmq tcp sockets will interoperate with ordinary tcp sockets?
| [Wednesday 23 February 2011] [17:48:24] &lt;cremes&gt;      dijix: nope, didn&#8217;t see the comment
| [Wednesday 23 February 2011] [17:48:55] &lt;cremes&gt;      <a href="#id3165"><span class="problematic" id="id3166">dg_</span></a>: no, they won&#8217;t; 0mq sockets are built on top of tcp sockets but use their own framing protocol
| [Wednesday 23 February 2011] [17:49:02] &lt;<a href="#id3167"><span class="problematic" id="id3168">dg_</span></a>&gt; Well, pants.
| [Wednesday 23 February 2011] [17:49:19] &lt;cremes&gt;      your tcp socket at the other end would have to understand this framing protocol (effectively duplicating 0mq logic)
| [Wednesday 23 February 2011] [17:49:28] &lt;cremes&gt;      <a href="#id3169"><span class="problematic" id="id3170">dg_</span></a>: take a look at mongrel2
| [Wednesday 23 February 2011] [17:49:44] &lt;cremes&gt;      it can act as a proxy between 0mq and http; perhaps it does the same for tcp
| [Wednesday 23 February 2011] [17:50:03] &lt;cremes&gt;      dijix: that doesn&#8217;t make any sense
| [Wednesday 23 February 2011] [17:50:16] &lt;cremes&gt;      you should gist/pastie your example code that illustrates your problem
| [Wednesday 23 February 2011] [17:50:28] &lt;<a href="#id3171"><span class="problematic" id="id3172">dg_</span></a>&gt; TBH I think I can work with zmq anyway &#8212; but does anyone know a telnet/netcat equivalent I can use to connect to my service so I can send it test data?
| [Wednesday 23 February 2011] [17:51:43] &lt;cremes&gt;      <a href="#id3173"><span class="problematic" id="id3174">dg_</span></a>: i haven&#8217;t heard of one; maybe that&#8217;s a good first project to get your feet wet with 0mq
| [Wednesday 23 February 2011] [17:52:07] &lt;dijix&gt;       cremes: I know.  Okay - REQ/XREP.  REQ sets IDENTITY to a value and just sends a simple text message.  XREP receives three-part message with the designated IDENTITY value in the first part.
| [Wednesday 23 February 2011] [17:52:19] &lt;cremes&gt;      good so far
| [Wednesday 23 February 2011] [17:52:34] &lt;<a href="#id3175"><span class="problematic" id="id3176">dg_</span></a>&gt; Yay. Sigh.
| [Wednesday 23 February 2011] [17:52:50] &lt;<a href="#id3177"><span class="problematic" id="id3178">dg_</span></a>&gt; Well, I need a client to talk to my server anyway, so I might as well as do that bit now. Thanks anyway.
| [Wednesday 23 February 2011] [17:52:52] &lt;cremes&gt;      <a href="#id3179"><span class="problematic" id="id3180">dg_</span></a>: try asking on the mailing list if such a tool exists; it might and i just don&#8217;t know about it
| [Wednesday 23 February 2011] [17:52:52] &lt;dijix&gt;       cremes: Then XREP contructs new message using that value for the first part, empty, and a response.  It is successfully received by REQ.
| [Wednesday 23 February 2011] [17:53:04] &lt;cremes&gt;      ok
| [Wednesday 23 February 2011] [17:53:54] &lt;cremes&gt;      dijix: take a look here:  <a class="reference external" href="http://api.zero.mq/master:zmq-setsockopt">http://api.zero.mq/master:zmq-setsockopt</a>
| [Wednesday 23 February 2011] [17:54:14] &lt;dijix&gt;       cremes: However, if I do not explicitly set the IDENTITY, I still receive a three-parter on XREP, with the auto-gen UUID for the first part.  If I follow everything else and use that UUID for the first part on the response message, REQ never receives it.
| [Wednesday 23 February 2011] [17:54:15] &lt;cremes&gt;      note that the system-set IDENTITY starts with a null byte; perhaps you aren&#8217;t copying the whole IDENTITY?
| [Wednesday 23 February 2011] [17:55:32] &lt;dijix&gt;       cremes: Could be - I&#8217;ll mess with the Encoding
| [Wednesday 23 February 2011] [17:55:57] &lt;cremes&gt;      dijix: show the code; just put it up in a pastie; maybe i&#8217;ll see something you are overlooking
| [Wednesday 23 February 2011] [17:57:44] &lt;<a href="#id3181"><span class="problematic" id="id3182">dg_</span></a>&gt; Does anyone know about the Lua bindings?
| [Wednesday 23 February 2011] [18:00:18] &lt;<a href="#id3183"><span class="problematic" id="id3184">dg_</span></a>&gt; Um, is zmq 2.0.6 really ancient?
| [Wednesday 23 February 2011] [18:00:32] &lt;cremes&gt;      <a href="#id3185"><span class="problematic" id="id3186">dg_</span></a>: it&#8217;s pretty old; use the just-released 2.1.1
| [Wednesday 23 February 2011] [18:00:43] &lt;<a href="#id3187"><span class="problematic" id="id3188">dg_</span></a>&gt; Unfortunately that&#8217;s what Ubuntu&#8217;s got.
| [Wednesday 23 February 2011] [18:01:17] &lt;cremes&gt;      well, few people are going to want to help a newcomer work through the old and mostly fixed bugs from 2.0.6 :P
| [Wednesday 23 February 2011] [18:01:36] &lt;cremes&gt;      so i recommend you dload the source and compile it yourself
| [Wednesday 23 February 2011] [18:07:26] &lt;<a href="#id3189"><span class="problematic" id="id3190">dg_</span></a>&gt; Strewth. Even Debian sid&#8217;s version is only 2.0.10.
| [Wednesday 23 February 2011] [18:20:24] &lt;<a href="#id3191"><span class="problematic" id="id3192">dg_</span></a>&gt; What does the thread pool argument to zmq_init() actually mean? How do I know what to set it to?
| [Wednesday 23 February 2011] [18:21:32] &lt;<a href="#id3193"><span class="problematic" id="id3194">dg_</span></a>&gt; The examples all seem to use 1; is this safe for a single-threaded program?
| [Wednesday 23 February 2011] [18:23:08] &lt;cremes&gt;      <a href="#id3195"><span class="problematic" id="id3196">dg_</span></a>: it&#8217;s a dedicated i/o thread for reading/writing to the network
| [Wednesday 23 February 2011] [18:23:34] &lt;cremes&gt;      it&#8217;s usually set to 1 because unless you are pumping out data onto 10GB ethernet it is unlikely you will saturate one core/cpu with i/o
| [Wednesday 23 February 2011] [18:24:22] &lt;<a href="#id3197"><span class="problematic" id="id3198">dg_</span></a>&gt; Right. Just checking it wasn&#8217;t doing something evil like using blocking I/O with one thread per concurrent operation.
| [Wednesday 23 February 2011] [18:28:19] &lt;dijix&gt;       cremes: Got it - I was converting everythign to Encoding.ASCII, and then also using that encoding for contructing the byte arrays for SendMore..  I just have to grab the first portion as a byte array and not touch it.  It worked before because what I was setting the IDENTITY to didn&#8217;t have anything that wasn&#8217;t ASCII.
| [Wednesday 23 February 2011] [18:28:44] &lt;cremes&gt;      dijix: ah ha
| [Wednesday 23 February 2011] [18:28:54] &lt;cremes&gt;      or is that &#8220;aha&#8221;?
| [Wednesday 23 February 2011] [18:30:02] &lt;dijix&gt;       cremes: I think it&#8217;s time to leave the office, carrying this day&#8217;s 0mq successes proudly :)
| [Wednesday 23 February 2011] [18:30:21] &lt;cremes&gt;      dijix: huzzah!
| [Wednesday 23 February 2011] [18:30:27] &lt;amacleod&gt;    When you connect dealer to dealer (XREQ to XREQ) is there any way for the XREQ that used &#8220;bind&#8221; to send a reply?
| [Wednesday 23 February 2011] [18:30:51] &lt;cremes&gt;      amacleod: why would you connect XREQ to XREQ?
| [Wednesday 23 February 2011] [18:30:59] &lt;dijix&gt;       cremes: Though why .NET won&#8217;t take bytes convert them to a string, and then convert that back to bytes using the same encoding, and end up with the original byte array is a question for another day.. :/
| [Wednesday 23 February 2011] [18:31:11] &lt;amacleod&gt;    <a class="reference external" href="http://zguide.zeromq.org/chapter:all#toc51">http://zguide.zeromq.org/chapter:all#toc51</a>
| [Wednesday 23 February 2011] [18:31:51] &lt;cremes&gt;      amacleod: that shows two XREQ/DEALER clients talking to a single XREP/ROUTER server
| [Wednesday 23 February 2011] [18:31:56] &lt;cremes&gt;      they aren&#8217;t talking to each other directly
| [Wednesday 23 February 2011] [18:32:11] &lt;amacleod&gt;    cremes, further down it shows inproc XREQ to XREQ.
| [Wednesday 23 February 2011] [18:32:47] &lt;cremes&gt;      amacleod: i don&#8217;t see it
| [Wednesday 23 February 2011] [18:32:59] &lt;amacleod&gt;    Figure 47?
| [Wednesday 23 February 2011] [18:33:13] &lt;amacleod&gt;    &#8220;Detail of async server&#8221;.
| [Wednesday 23 February 2011] [18:33:44] &lt;cremes&gt;      huh... i don&#8217;t know then
| [Wednesday 23 February 2011] [18:34:06] &lt;cremes&gt;      i&#8217;ve never seen that... you&#8217;ll have to ask pieterh tomorrow or post a question to the ML
| [Wednesday 23 February 2011] [18:37:11] &lt;<a href="#id3199"><span class="problematic" id="id3200">dg_</span></a>&gt; Woot. I&#8217;m now bouncing a message off my server and getting a reply.
| [Wednesday 23 February 2011] [18:37:19] &lt;<a href="#id3201"><span class="problematic" id="id3202">dg_</span></a>&gt; Thanks!
| [Wednesday 23 February 2011] [18:38:14] &lt;<a href="#id3203"><span class="problematic" id="id3204">dg_</span></a>&gt; One additional question: if I&#8217;m sending a multipart message with ZMQ_SNDMORE, is every part copied and stored before being sent, or are they sent out as I produce them?
| [Wednesday 23 February 2011] [18:38:53] &lt;<a href="#id3205"><span class="problematic" id="id3206">dg_</span></a>&gt; e.g. my app&#8217;s messages are actually very long lists of small strings. Like 5000. Can I send each one as a single part or should I buffer them up into a single block?
| [Wednesday 23 February 2011] [18:51:47] &lt;cremes&gt;      <a href="#id3207"><span class="problematic" id="id3208">dg_</span></a>: 0mq is a message queue; just send &#8216;em and it will do the buffering for you
| [Wednesday 23 February 2011] [21:30:45] &lt;<a href="#id3209"><span class="problematic" id="id3210">gdan_</span></a>&gt;       hello.  trying to install on OSX.  it says to intall pkg-config.  does anyone know where the proper place to get pkg-config is?
| [Wednesday 23 February 2011] [21:31:37] &lt;Steve-o&gt;     its not required for the 2.1.0 beta
| [Wednesday 23 February 2011] [21:31:48] &lt;Steve-o&gt;     it&#8217;s a part of GLib
| [Wednesday 23 February 2011] [21:32:56] &lt;<a href="#id3211"><span class="problematic" id="id3212">gdan_</span></a>&gt;       i&#8217;m installing the lastest stab release  zeromq-2.0.10
| [Wednesday 23 February 2011] [21:33:04] &lt;Steve-o&gt;     this should help:  <a class="reference external" href="http://stackoverflow.com/questions/3522248/how-do-i-compile-jzmq-for-zeromq-on-osx">http://stackoverflow.com/questions/3522248/how-do-i-compile-jzmq-for-zeromq-on-osx</a>
| [Wednesday 23 February 2011] [21:33:20] &lt;<a href="#id3213"><span class="problematic" id="id3214">gdan_</span></a>&gt;       thNKA
| [Wednesday 23 February 2011] [21:33:22] &lt;<a href="#id3215"><span class="problematic" id="id3216">gdan_</span></a>&gt;       THANKS
| [Wednesday 23 February 2011] [21:38:37] &lt;Steve-o&gt;     <a href="#id3217"><span class="problematic" id="id3218">gdan_</span></a>: but I&#8217;d recommend the 2.1.0 as a lot of changes have ocurred
| [Wednesday 23 February 2011] [21:42:14] &lt;<a href="#id3219"><span class="problematic" id="id3220">gdan_</span></a>&gt;       appears to have worked.  thanks.  will test tomorrow :)
| [Wednesday 23 February 2011] [22:19:37] &lt;cremes&gt;      gdan: with macports, install libtool and pkg-config; you can then install from github master on osx
| [Thursday 24 February 2011] [03:43:43] &lt;Evet&gt; mongrel2 is really cool
| [Thursday 24 February 2011] [03:58:57] &lt;<a href="#id3221"><span class="problematic" id="id3222">pieterh_</span></a>&gt;     sustrik: ping
| [Thursday 24 February 2011] [04:00:40] &lt;sustrik&gt;      pong
| [Thursday 24 February 2011] [04:05:51] &lt;<a href="#id3223"><span class="problematic" id="id3224">pieterh_</span></a>&gt;     I&#8217;ve set up a link shortening service at zero.mq
| [Thursday 24 February 2011] [04:06:14] &lt;sustrik&gt;      what&#8217;s that?
| [Thursday 24 February 2011] [04:06:25] &lt;<a href="#id3225"><span class="problematic" id="id3226">pieterh_</span></a>&gt;     e.g. <a class="reference external" href="http://zero.mq/tips">http://zero.mq/tips</a>
| [Thursday 24 February 2011] [04:06:42] &lt;<a href="#id3227"><span class="problematic" id="id3228">pieterh_</span></a>&gt;     jumps to a long URL on zeromq.org somewhere
| [Thursday 24 February 2011] [04:06:54] &lt;<a href="#id3229"><span class="problematic" id="id3230">pieterh_</span></a>&gt;     useful for twitter and such
| [Thursday 24 February 2011] [04:07:24]         * sustrik has no idea how it works
| [Thursday 24 February 2011] [04:07:42] &lt;<a href="#id3231"><span class="problematic" id="id3232">pieterh_</span></a>&gt;     :-) you&#8217;ve got an invitation to join the zero.mq site
| [Thursday 24 February 2011] [04:07:44] &lt;<a href="#id3233"><span class="problematic" id="id3234">pieterh_</span></a>&gt;     accept it
| [Thursday 24 February 2011] [04:08:08] &lt;<a href="#id3235"><span class="problematic" id="id3236">pieterh_</span></a>&gt;     then when you want a shortcut, go to that page (e.g. zero.mq/sustrik)
| [Thursday 24 February 2011] [04:08:12] &lt;<a href="#id3237"><span class="problematic" id="id3238">pieterh_</span></a>&gt;     edit, save
| [Thursday 24 February 2011] [04:09:31] &lt;sustrik&gt;      aha
| [Thursday 24 February 2011] [04:09:34] &lt;sustrik&gt;      thanks
| [Thursday 24 February 2011] [04:10:03] &lt;<a href="#id3239"><span class="problematic" id="id3240">pieterh_</span></a>&gt;     so btw if you have any critique on <a class="reference external" href="http://zero.mq/osdp">http://zero.mq/osdp</a>, let me have it...
| [Thursday 24 February 2011] [04:10:16] &lt;sustrik&gt;      i&#8217;ve just read it
| [Thursday 24 February 2011] [04:10:22] &lt;sustrik&gt;      two points maybe
| [Thursday 24 February 2011] [04:10:37] &lt;sustrik&gt;      it looks like a design for stock quote ticker plant
| [Thursday 24 February 2011] [04:10:58] &lt;sustrik&gt;      but it claims that it&#8217;s more generic than that
| [Thursday 24 February 2011] [04:11:24] &lt;sustrik&gt;      i am not sure it would fit any other use case
| [Thursday 24 February 2011] [04:11:44] &lt;sustrik&gt;      second, if you really want to launch the project
| [Thursday 24 February 2011] [04:11:57] &lt;sustrik&gt;      i would suggest creating a new site for it
| [Thursday 24 February 2011] [04:12:09] &lt;sustrik&gt;      otherwise there&#8217;ll be confusion about layering
| [Thursday 24 February 2011] [04:12:17] &lt;sustrik&gt;      third: i like the name
| [Thursday 24 February 2011] [04:12:54] &lt;sustrik&gt;      ah
| [Thursday 24 February 2011] [04:12:56] &lt;sustrik&gt;      one more
| [Thursday 24 February 2011] [04:13:20] &lt;sustrik&gt;      the paper suggests that the only pattern used in ticker plant is pub-sub
| [Thursday 24 February 2011] [04:13:39] &lt;sustrik&gt;      in real world you&#8217;ll need parallelised pipelines as well
| [Thursday 24 February 2011] [04:13:53] &lt;sustrik&gt;      for data processing after the data is delivered to the right place
| [Thursday 24 February 2011] [04:13:54] &lt;<a href="#id3241"><span class="problematic" id="id3242">pieterh_</span></a>&gt;     hang on, visitor...
| [Thursday 24 February 2011] [04:13:59] &lt;<a href="#id3243"><span class="problematic" id="id3244">pieterh_</span></a>&gt;     brb, :-)
| [Thursday 24 February 2011] [04:29:22] &lt;mikko&gt;        good morning
| [Thursday 24 February 2011] [04:42:39] &lt;sustrik&gt;      morning
| [Thursday 24 February 2011] [05:08:14] &lt;mikko&gt;        heheh
| [Thursday 24 February 2011] [05:08:17] &lt;mikko&gt;        i will give test this
| [Thursday 24 February 2011] [05:11:45] &lt;sustrik&gt;      i would guess the release build forgets to define ZMQ_HAVE_OPENPGM
| [Thursday 24 February 2011] [05:12:26] &lt;sustrik&gt;      if the problem was with building openPGM as such the build would fail, which is not the case
| [Thursday 24 February 2011] [05:12:40] &lt;mikko&gt;        hmmm
| [Thursday 24 February 2011] [05:21:20] &lt;mikko&gt;        sustrik: took a look at the project template
| [Thursday 24 February 2011] [05:21:32] &lt;mikko&gt;        interesting as i dont understand how the debug build has openpgm set
| [Thursday 24 February 2011] [05:21:46] &lt;pieterh&gt;      sustrik: re
| [Thursday 24 February 2011] [05:21:59]         * sustrik has no idea about how msvc projects work
| [Thursday 24 February 2011] [05:22:08] &lt;pieterh&gt;      mikko: let me take a look
| [Thursday 24 February 2011] [05:22:12] &lt;mikko&gt;        the occurrance libzmq/libzmq.vcproj:                           PreprocessorDefinitions=&#8221;ZMQ_HAVE_OPENPGM&#8221;
| [Thursday 24 February 2011] [05:22:23] &lt;mikko&gt;        seems to be under the WithOpenPGM build configuration
| [Thursday 24 February 2011] [05:22:46] &lt;sustrik&gt;      so there&#8217;s Dubeg/Release/WithOpenPGM currently?
| [Thursday 24 February 2011] [05:22:47] &lt;mikko&gt;        as far as a i understood we have never built openpgm with msvc by default
| [Thursday 24 February 2011] [05:22:56] &lt;mikko&gt;        sustrik: yes
| [Thursday 24 February 2011] [05:23:02] &lt;mikko&gt;        WithOpenPGM is a release build
| [Thursday 24 February 2011] [05:23:06] &lt;sustrik&gt;      right
| [Thursday 24 February 2011] [05:23:08] &lt;mikko&gt;        it uses external openpgm
| [Thursday 24 February 2011] [05:23:47] &lt;mikko&gt;        maybe we should build openpgm by default
| [Thursday 24 February 2011] [05:24:09] &lt;sustrik&gt;      maybe the guy messed up his executables
| [Thursday 24 February 2011] [05:24:24] &lt;sustrik&gt;      using withopenpgm instead of debug
| [Thursday 24 February 2011] [05:24:34] &lt;mikko&gt;        msvc is such a pain
| [Thursday 24 February 2011] [05:24:44] &lt;sustrik&gt;      it is :(
| [Thursday 24 February 2011] [05:24:49] &lt;mikko&gt;        i wish they had &#8220;build autotools project&#8221; as an option
| [Thursday 24 February 2011] [05:25:21] &lt;sustrik&gt;      unlikely to ever happen
| [Thursday 24 February 2011] [05:25:50] &lt;pieterh&gt;      we could always switch to cmake... :-)
| [Thursday 24 February 2011] [05:26:24] &lt;sustrik&gt;      we could, but still, you&#8217;ll have to maintain 2 build systems
| [Thursday 24 February 2011] [05:26:42] &lt;sustrik&gt;      and i am not sure whethr win devs would appreciate that kind of thing
| [Thursday 24 February 2011] [05:27:48] &lt;pieterh&gt;      other option: generate the autotooling, generate the msvc projects from some higher-level abstraction
| [Thursday 24 February 2011] [05:28:45] &lt;sustrik&gt;      have you seen the autotools source?
| [Thursday 24 February 2011] [05:29:15] &lt;sustrik&gt;      it&#8217;s an intricate maze of different options and their combinations
| [Thursday 24 February 2011] [05:29:35] &lt;sustrik&gt;      hm
| [Thursday 24 February 2011] [05:29:53] &lt;pieterh&gt;      you don&#8217;t need to navigate/understand that maze to <em>generate</em> it
| [Thursday 24 February 2011] [05:30:20] &lt;pieterh&gt;      all you need are good templates with sections where we insert the variable stuff
| [Thursday 24 February 2011] [05:30:26] &lt;pieterh&gt;      imho
| [Thursday 24 February 2011] [05:30:46] &lt;sustrik&gt;      easy way would be to generate just the source file list
| [Thursday 24 February 2011] [05:30:55] &lt;pieterh&gt;      for instance
| [Thursday 24 February 2011] [05:31:06] &lt;pieterh&gt;      well, you know how powerful code generation can be when it has to be
| [Thursday 24 February 2011] [05:31:17] &lt;sustrik&gt;      yes
| [Thursday 24 February 2011] [05:31:32] &lt;sustrik&gt;      but it&#8217;s adding one more layer of complexity to the build
| [Thursday 24 February 2011] [05:32:16] &lt;pieterh&gt;      not to the build, but to the tooling <em>we</em> use to maintain the build
| [Thursday 24 February 2011] [05:32:35] &lt;pieterh&gt;      if you want less pain working with details, you always need abstraction
| [Thursday 24 February 2011] [05:33:00] &lt;sustrik&gt;      unless the abstraction is more complex than the details themselves
| [Thursday 24 February 2011] [05:33:05] &lt;sustrik&gt;      which is likely the case here
| [Thursday 24 February 2011] [05:33:26] &lt;sustrik&gt;      anyway, code generation is not the problem here
| [Thursday 24 February 2011] [05:33:27] &lt;pieterh&gt;      so continue to complain about MSVC :-)
| [Thursday 24 February 2011] [05:33:33] &lt;sustrik&gt;      the problem is that msvc is nasty
| [Thursday 24 February 2011] [05:33:49] &lt;pieterh&gt;      autotools by contrast is... ... nice?
| [Thursday 24 February 2011] [05:33:53] &lt;pieterh&gt;      all build systems are nasty
| [Thursday 24 February 2011] [05:33:58] &lt;sustrik&gt;      nasty as well
| [Thursday 24 February 2011] [05:34:11] &lt;sustrik&gt;      you just have to deal with the nastyness
| [Thursday 24 February 2011] [05:34:24] &lt;sustrik&gt;      either in code generator or in projects files
| [Thursday 24 February 2011] [05:34:31] &lt;sustrik&gt;      you can&#8217;t escape that
| [Thursday 24 February 2011] [05:34:40] &lt;pieterh&gt;      I know you do not like code generation but to generalize that as &#8220;complex and nasty&#8221; is just wrong
| [Thursday 24 February 2011] [05:34:52] &lt;pieterh&gt;      I can dismiss any abstraction like that
| [Thursday 24 February 2011] [05:34:56] &lt;pieterh&gt;      C++ is complex and nasty
| [Thursday 24 February 2011] [05:35:00] &lt;sustrik&gt;      sure
| [Thursday 24 February 2011] [05:35:06] &lt;pieterh&gt;      messaging is complex and nasty
| [Thursday 24 February 2011] [05:35:12] &lt;sustrik&gt;      the problem is that we have two nasty build tools
| [Thursday 24 February 2011] [05:35:16] &lt;sustrik&gt;      we have to deal with
| [Thursday 24 February 2011] [05:35:33] &lt;pieterh&gt;      you don&#8217;t have to deal with, you choose to deal with
| [Thursday 24 February 2011] [05:35:49] &lt;pieterh&gt;      especially since you reject the alternatives without even studying them
| [Thursday 24 February 2011] [05:35:57] &lt;sustrik&gt;      CMake?
| [Thursday 24 February 2011] [05:36:17] &lt;pieterh&gt;      have we actually even tried anything else?
| [Thursday 24 February 2011] [05:36:28] &lt;sustrik&gt;      nope
| [Thursday 24 February 2011] [05:36:28] &lt;pieterh&gt;      even for a simple test case?
| [Thursday 24 February 2011] [05:36:35] &lt;sustrik&gt;      well, CMake
| [Thursday 24 February 2011] [05:36:37] &lt;pieterh&gt;      all I hear is &#8220;autotools is what everyone uses&#8221;
| [Thursday 24 February 2011] [05:36:39] &lt;sustrik&gt;      long time ago
| [Thursday 24 February 2011] [05:36:45] &lt;pieterh&gt;      and &#8220;everything else is crap anyhow&#8221;
| [Thursday 24 February 2011] [05:36:51] &lt;pieterh&gt;      that&#8217;s really scientific
| [Thursday 24 February 2011] [05:36:55] &lt;sustrik&gt;      it was contrained to 2-3 platforms
| [Thursday 24 February 2011] [05:37:04] &lt;pieterh&gt;      it&#8217;s only one of several plausible alternatives
| [Thursday 24 February 2011] [05:37:10] &lt;sustrik&gt;      and nobody actually bothered to make it as universal as autotools build
| [Thursday 24 February 2011] [05:37:40] &lt;pieterh&gt;      i&#8217;m getting repetitive, but many aspects of our process seem to be based on closed minds and opinion, not evidence
| [Thursday 24 February 2011] [05:37:58] &lt;sustrik&gt;      i think nobody has resource to fully convert the existing autobuild solution into something else
| [Thursday 24 February 2011] [05:38:04] &lt;pieterh&gt;      of course not
| [Thursday 24 February 2011] [05:38:11] &lt;sustrik&gt;      so, if you try
| [Thursday 24 February 2011] [05:38:17] &lt;pieterh&gt;      especially when the likely outcome is &#8220;well, thanks, but we&#8217;ll stick to our nasty tooling&#8221;
| [Thursday 24 February 2011] [05:38:23] &lt;sustrik&gt;      you&#8217;ll end up with maintaining both autotools and the new system
| [Thursday 24 February 2011] [05:38:24] &lt;pieterh&gt;      no-one is going to waste their time
| [Thursday 24 February 2011] [05:38:53]         * pieterh sits down again, not my problem, it&#8217;s largely Mikko who suffers here
| [Thursday 24 February 2011] [05:39:09] &lt;sustrik&gt;      mikko: what&#8217;s your opinion?
| [Thursday 24 February 2011] [05:39:27] &lt;pieterh&gt;      note that I&#8217;ve successfully built massive systems like OpenAMQ on dozens of platforms with trivial maintenance effort
| [Thursday 24 February 2011] [05:39:30] &lt;sustrik&gt;      i would say it would take couple of manyears to convert to a different build tool
| [Thursday 24 February 2011] [05:39:35] &lt;pieterh&gt;      lol
| [Thursday 24 February 2011] [05:39:47] &lt;pieterh&gt;      that&#8217;s your standard estimate when you don&#8217;t like something
| [Thursday 24 February 2011] [05:39:54] &lt;pieterh&gt;      it&#8217;s either &#8220;two days of work&#8221; or &#8220;two man years&#8221;
| [Thursday 24 February 2011] [05:40:00] &lt;pieterh&gt;      :-)
| [Thursday 24 February 2011] [05:40:03] &lt;sustrik&gt;      you are free to try
| [Thursday 24 February 2011] [05:40:18] &lt;pieterh&gt;      I would, if there was even a small chance my time would not be wasted
| [Thursday 24 February 2011] [05:40:34] &lt;sustrik&gt;      there is
| [Thursday 24 February 2011] [05:40:52] &lt;sustrik&gt;      once you have a solution that covers all the cases the existing solution does
| [Thursday 24 February 2011] [05:40:52] &lt;pieterh&gt;      not until there is actual consensus that we want to improve this
| [Thursday 24 February 2011] [05:41:03] &lt;pieterh&gt;      that&#8217;s not how it works
| [Thursday 24 February 2011] [05:41:16] &lt;sustrik&gt;      unless you do that, we can&#8217;t drop autotools
| [Thursday 24 February 2011] [05:41:30] &lt;sustrik&gt;      thus we would have to maintain 3 build systems instead of 2
| [Thursday 24 February 2011] [05:41:36] &lt;pieterh&gt;      if I come tomorrow with a full solution, there&#8217;s 80% chance it&#8217;ll be rejected on the grounds of &#8220;we don&#8217;t know it, it&#8217;s nasty, and too complex, and not standard&#8221;
| [Thursday 24 February 2011] [05:41:42] &lt;pieterh&gt;      we&#8217;ve been through that several times
| [Thursday 24 February 2011] [05:42:20] &lt;pieterh&gt;      there has to be consensus, up front, that we are in fact open to change
| [Thursday 24 February 2011] [05:42:23] &lt;sustrik&gt;      the question would rather be &#8220;does it build on HP-UX, version from 1992?&#8221;
| [Thursday 24 February 2011] [05:42:29] &lt;pieterh&gt;      well, does it?
| [Thursday 24 February 2011] [05:42:31] &lt;pieterh&gt;      openamq does
| [Thursday 24 February 2011] [05:42:38] &lt;sustrik&gt;      does it cross-compile from osx to mips?
| [Thursday 24 February 2011] [05:42:42] &lt;sustrik&gt;      an similar
| [Thursday 24 February 2011] [05:42:59] &lt;sustrik&gt;      that&#8217;s the value that&#8217;s already stored in current build system
| [Thursday 24 February 2011] [05:43:14] &lt;pieterh&gt;      again, there are several options here
| [Thursday 24 February 2011] [05:43:18] &lt;sustrik&gt;      if we want to change we have to find out how to extract the value
| [Thursday 24 February 2011] [05:43:23] &lt;pieterh&gt;      one would be to throw out that value and start from scratch
| [Thursday 24 February 2011] [05:43:31] &lt;sustrik&gt;      :(
| [Thursday 24 February 2011] [05:43:40] &lt;pieterh&gt;      two would be to layer an <em>abstraction</em> on top that reduces the actual pain of maintenance
| [Thursday 24 February 2011] [05:43:53] &lt;pieterh&gt;      you dismissed that out of hand
| [Thursday 24 February 2011] [05:43:59] &lt;sustrik&gt;      how would you do that?
| [Thursday 24 February 2011] [05:44:01] &lt;pieterh&gt;      so I&#8217;m going back to open source data plants
| [Thursday 24 February 2011] [05:44:07] &lt;pieterh&gt;      code generation, of course
| [Thursday 24 February 2011] [05:44:32] &lt;pieterh&gt;      it is a standard problem
| [Thursday 24 February 2011] [05:44:41] &lt;pieterh&gt;      you have a mix of complex code you very rarely want to touch
| [Thursday 24 February 2011] [05:44:51] &lt;pieterh&gt;      and simple code you have to maintain almost daily
| [Thursday 24 February 2011] [05:44:58] &lt;pieterh&gt;      that is why it&#8217;s painful
| [Thursday 24 February 2011] [05:45:09] &lt;sustrik&gt;      ok, there are 2 parts to the build system
| [Thursday 24 February 2011] [05:45:14] &lt;pieterh&gt;      &#8216;add this new source to the project&#8217; is a major effort today
| [Thursday 24 February 2011] [05:45:20] &lt;sustrik&gt;      the often used part is the list of files
| [Thursday 24 February 2011] [05:45:26] &lt;pieterh&gt;      it means knowing about, and editing, dozens of highly complex sources
| [Thursday 24 February 2011] [05:45:27] &lt;sustrik&gt;      that&#8217;s easy to maintain even now
| [Thursday 24 February 2011] [05:45:41] &lt;pieterh&gt;      msvc project for example
| [Thursday 24 February 2011] [05:45:46] &lt;sustrik&gt;      then there&#8217;s &#8220;how to build it part&#8221;
| [Thursday 24 February 2011] [05:45:51] &lt;pieterh&gt;      totally separate
| [Thursday 24 February 2011] [05:46:02] &lt;pieterh&gt;      as long as you deliver MSVC developers the right projects, it&#8217;s click and build
| [Thursday 24 February 2011] [05:46:16] &lt;pieterh&gt;      <em>obviously</em> you want to offer Linux users autogen/configure/make
| [Thursday 24 February 2011] [05:46:42] &lt;sustrik&gt;      yes, sure, so you can generate the lists of files
| [Thursday 24 February 2011] [05:46:46] &lt;pieterh&gt;      how many people understand the tools used to generate man pages?
| [Thursday 24 February 2011] [05:46:58] &lt;sustrik&gt;      that would save me a minute every now and then
| [Thursday 24 February 2011] [05:47:00] &lt;pieterh&gt;      yet we can all type &#8216;man zmq&#8217;
| [Thursday 24 February 2011] [05:47:42] &lt;sustrik&gt;      the hard part that started this discussion though was not the easy &#8220;file list&#8221; part
| [Thursday 24 February 2011] [05:47:53] &lt;sustrik&gt;      it was the intricacies of msvc and autotools
| [Thursday 24 February 2011] [05:48:05] &lt;sustrik&gt;      which you have to deal with in code generator anyway
| [Thursday 24 February 2011] [05:48:08] &lt;pieterh&gt;      one problem is that you&#8217;re hand-crafting solutions like &#8220;how do I integrate package X into my product&#8221;
| [Thursday 24 February 2011] [05:48:17] &lt;mikko&gt;        sorry, let me catch up with backlog
| [Thursday 24 February 2011] [05:48:35] &lt;sustrik&gt;      anyway, mikko, is build system maintainer, so it&#8217;s up to him
| [Thursday 24 February 2011] [05:49:08] &lt;pieterh&gt;      sustrik: if you&#8217;d said that 20 minutes ago, I&#8217;d have had my coffee by now :-)
| [Thursday 24 February 2011] [05:49:10] &lt;mikko&gt;        i think rather than generating something from a definition i would say we need to validate
| [Thursday 24 February 2011] [05:49:39] &lt;pieterh&gt;      ok, mikko, sustrik, I have a proposal
| [Thursday 24 February 2011] [05:50:06] &lt;mikko&gt;        i think creating a file which checks preprocessor definitions on that platform with that compiler and errors out if they are not there
| [Thursday 24 February 2011] [05:50:07] &lt;pieterh&gt;      would you agree that the zmq builds are a more complex form of the zfl builds?
| [Thursday 24 February 2011] [05:50:14] &lt;mikko&gt;        pieterh: yes
| [Thursday 24 February 2011] [05:50:25] &lt;mikko&gt;        in a way
| [Thursday 24 February 2011] [05:50:53] &lt;pieterh&gt;      so since mikko and I are maintaining ZFL, we&#8217;ll start by improving that
| [Thursday 24 February 2011] [05:51:06] &lt;pieterh&gt;      what I mean specifically
| [Thursday 24 February 2011] [05:51:22] &lt;pieterh&gt;      is that I will try to convince Mikko that code generation will make this magically simple
| [Thursday 24 February 2011] [05:51:35] &lt;pieterh&gt;      if this works for ZFL, and Mikko is convinced, we have a way to apply that to ZMQ
| [Thursday 24 February 2011] [05:51:54] &lt;mikko&gt;        cmake is trying to be this
| [Thursday 24 February 2011] [05:51:58] &lt;mikko&gt;        as far as a i understand
| [Thursday 24 February 2011] [05:52:01] &lt;pieterh&gt;      yes, but cmake is not pieter
| [Thursday 24 February 2011] [05:52:04] &lt;pieterh&gt;      there is a real difference
| [Thursday 24 February 2011] [05:52:13] &lt;pieterh&gt;      I&#8217;ve been making portable build systems since 1985 or so
| [Thursday 24 February 2011] [05:52:38] &lt;sustrik&gt;      don&#8217;t fail pray to NIH syndrome though
| [Thursday 24 February 2011] [05:52:44] &lt;pieterh&gt;      my key techniques are ignorance and laziness
| [Thursday 24 February 2011] [05:52:44]         * sustrik is shutting up
| [Thursday 24 February 2011] [05:53:14] &lt;mikko&gt;        the problem with build systems is that the formats and approaches are completely different
| [Thursday 24 February 2011] [05:53:30] &lt;mikko&gt;        you need to hack the end format converters for every build system
| [Thursday 24 February 2011] [05:53:53] &lt;pieterh&gt;      mikko: let&#8217;s not philosophize over details
| [Thursday 24 February 2011] [05:54:06] &lt;mikko&gt;        i see this in a way that rather than generate build systems we need to be able to validate them
| [Thursday 24 February 2011] [05:54:38] &lt;mikko&gt;        this should be simple with a header file that errors if preprocessor definition is missing or incorrect ones are set
| [Thursday 24 February 2011] [05:56:07] &lt;pieterh&gt;      mikko: will you allow me to try some stuff and show you?
| [Thursday 24 February 2011] [05:56:25] &lt;pieterh&gt;      it&#8217;ll take me a long weekend to put together a working toolchain for ZFL
| [Thursday 24 February 2011] [05:56:29] &lt;mikko&gt;        pieterh: of course
| [Thursday 24 February 2011] [05:56:37] &lt;mikko&gt;        im not going to stop you
| [Thursday 24 February 2011] [05:56:49] &lt;pieterh&gt;      we can add backends to e.g. generate cmake files and other stuff after
| [Thursday 24 February 2011] [05:56:51] &lt;pieterh&gt;      ok...
| [Thursday 24 February 2011] [05:57:03] &lt;mikko&gt;        but when you say that this is the cave-eat
| [Thursday 24 February 2011] [05:57:16] &lt;pieterh&gt;      there&#8217;s no catch, if you don&#8217;t like it, we chuck it out
| [Thursday 24 February 2011] [05:57:20] &lt;mikko&gt;        ok
| [Thursday 24 February 2011] [05:57:24] &lt;mikko&gt;        works for me
| [Thursday 24 February 2011] [05:57:26] &lt;pieterh&gt;      well, there is a catch
| [Thursday 24 February 2011] [05:57:29] &lt;mikko&gt;        haha
| [Thursday 24 February 2011] [05:57:30] &lt;mikko&gt;        i knew it
| [Thursday 24 February 2011] [05:57:32] &lt;pieterh&gt;      kind of like selling your soul to the devil
| [Thursday 24 February 2011] [05:57:52] &lt;pieterh&gt;      you get a tooling dependency but it&#8217;s no worse than what we have today
| [Thursday 24 February 2011] [05:58:08] &lt;mikko&gt;        tooling dependency to our own tool?
| [Thursday 24 February 2011] [05:58:17]         * pieterh changes the subject
| [Thursday 24 February 2011] [05:58:25] &lt;pieterh&gt;      hey, I got a pull request for zguide!
| [Thursday 24 February 2011] [05:58:27] &lt;pieterh&gt;      yay!
| [Thursday 24 February 2011] [05:58:34] &lt;mikko&gt;        if it&#8217;s our tool there is really no hard depedency
| [Thursday 24 February 2011] [05:58:41] &lt;mikko&gt;        assuming it&#8217;s abstract we can add more &#8220;backends&#8221;
| [Thursday 24 February 2011] [05:58:50] &lt;pieterh&gt;      so mikko, what&#8217;s the weather like there?
| [Thursday 24 February 2011] [05:59:08] &lt;mikko&gt;        im still not convinced that you can represent all these build systems in abstract way but i am open to be amazed
| [Thursday 24 February 2011] [05:59:14] &lt;mikko&gt;        gray
| [Thursday 24 February 2011] [05:59:21] &lt;pieterh&gt;      hehe
| [Thursday 24 February 2011] [05:59:25] &lt;mikko&gt;        london isn&#8217;t the weather capitol of europe
| [Thursday 24 February 2011] [06:00:13] &lt;pieterh&gt;      usually a bit nicer than Brussels IME but yeah...
| [Thursday 24 February 2011] [06:01:46] &lt;pieterh&gt;      So my idea for the Guide is to produce translated versions automatically
| [Thursday 24 February 2011] [06:01:57] &lt;pieterh&gt;      I.e. a C++ version, a Java version, etc.
| [Thursday 24 February 2011] [06:02:05] &lt;pieterh&gt;      with all examples in that language
| [Thursday 24 February 2011] [06:02:14] &lt;mikko&gt;        docbook is a fairly portable format for that
| [Thursday 24 February 2011] [06:02:27] &lt;mikko&gt;        php documentation is generated from docbook
| [Thursday 24 February 2011] [06:02:30] &lt;pieterh&gt;      oh, mikko, I have the tooling already
| [Thursday 24 February 2011] [06:02:34] &lt;mikko&gt;        hahaha
| [Thursday 24 February 2011] [06:02:46] &lt;mikko&gt;        let me guess, you wrote them?
| [Thursday 24 February 2011] [06:02:53] &lt;pieterh&gt;      this is just pulling in examples/PHP instead of examples/C
| [Thursday 24 February 2011] [06:02:58] &lt;pieterh&gt;      have you seen gitdown?
| [Thursday 24 February 2011] [06:03:11] &lt;mikko&gt;        the markdown format?
| [Thursday 24 February 2011] [06:04:22] &lt;pieterh&gt;      <a class="reference external" href="https://github.com/imatix/gitdown">https://github.com/imatix/gitdown</a>
| [Thursday 24 February 2011] [06:05:40] &lt;mikko&gt;        ok
| [Thursday 24 February 2011] [06:05:50] &lt;mikko&gt;        remember to update copyright year
| [Thursday 24 February 2011] [06:05:52] &lt;pieterh&gt;      that&#8217;s the basic tooling for the Guide, though that uses an older hacked version
| [Thursday 24 February 2011] [06:05:54] &lt;mikko&gt;        Copyright (c) 2010 Pieter Hintjens Copyright (c) 1996-2010 iMatix Corporation
| [Thursday 24 February 2011] [06:06:41] &lt;pieterh&gt;      fixed
| [Thursday 24 February 2011] [06:06:56] &lt;pieterh&gt;      so the idea is to take a simple text file with images as ditaa text
| [Thursday 24 February 2011] [06:07:08] &lt;pieterh&gt;      and mangle into some markup - for the Guide, it&#8217;s wikidot markup
| [Thursday 24 February 2011] [06:07:24] &lt;pieterh&gt;      part of that is merging in code from the examples directory
| [Thursday 24 February 2011] [06:07:41] &lt;pieterh&gt;      so it&#8217;s easy to make, e.g., a PHP version of the Guide in parallel with teh current C version
| [Thursday 24 February 2011] [06:07:58] &lt;pieterh&gt;      my idea is to do that only for languages that hit 75% translation
| [Thursday 24 February 2011] [06:11:59] &lt;pieterh&gt;      sustrik: thanks for the feedback on the OSDP
| [Thursday 24 February 2011] [06:12:05] &lt;pieterh&gt;      indeed, it&#8217;ll be a separate site and project
| [Thursday 24 February 2011] [06:17:46] &lt;pieterh&gt;      mikko: question
| [Thursday 24 February 2011] [06:18:03] &lt;pieterh&gt;      why do we build the cJSON object, in zfl/src?
| [Thursday 24 February 2011] [06:22:07] &lt;pieterh&gt;      rather, what was the benefit of changing the way cJSON was imported?
| [Thursday 24 February 2011] [06:24:09] &lt;sustrik&gt;      pieterh: you are being cited here:
| [Thursday 24 February 2011] [06:24:09] &lt;sustrik&gt;      <a class="reference external" href="http://it.toolbox.com/blogs/open-source-smb/whats-the-future-of-amqp-44450">http://it.toolbox.com/blogs/open-source-smb/whats-the-future-of-amqp-44450</a>
| [Thursday 24 February 2011] [06:38:19] &lt;mikko&gt;        pieterh: to automatically include in make dist
| [Thursday 24 February 2011] [06:38:27] &lt;mikko&gt;        it can be added as a no-build source as well
| [Thursday 24 February 2011] [06:39:10] &lt;pieterh&gt;      sustrik: I answered that, but it&#8217;s a really annoying blog to post to
| [Thursday 24 February 2011] [06:39:22] &lt;pieterh&gt;      mikko: I&#8217;d rather it&#8217;s a no-build source...
| [Thursday 24 February 2011] [06:39:48] &lt;pieterh&gt;      the goal was to hide that totally in zfl_config_json, not export it as an object
| [Thursday 24 February 2011] [06:39:53] &lt;pieterh&gt;      otherwise apps will use it
| [Thursday 24 February 2011] [06:40:02] &lt;mikko&gt;        pieterh: i&#8217;ll make that change
| [Thursday 24 February 2011] [06:40:09] &lt;pieterh&gt;      i appreciate it!
| [Thursday 24 February 2011] [06:40:11] &lt;mikko&gt;        need to quickly finish this excel
| [Thursday 24 February 2011] [06:40:16] &lt;pieterh&gt;      no hurry, no hurry
| [Thursday 24 February 2011] [06:49:11] &lt;pieterh&gt;      sustrik: I&#8217;ve made a comment or two on that post
| [Thursday 24 February 2011] [07:50:41] &lt;Evet&gt; are there obvious performance differences of zeromq between windows and linux?
| [Thursday 24 February 2011] [07:52:51] &lt;mikko&gt;        Evet: not obvious
| [Thursday 24 February 2011] [07:52:56] &lt;mikko&gt;        that i am aware of
| [Thursday 24 February 2011] [07:53:07] &lt;Steve-o&gt;      well IPC and PGM are slower
| [Thursday 24 February 2011] [07:53:10] &lt;mikko&gt;        optimizing things for windows seems to be very much a dark art
| [Thursday 24 February 2011] [07:53:21] &lt;mikko&gt;        ipc doesnt exist
| [Thursday 24 February 2011] [07:53:28] &lt;mikko&gt;        well, not in zeromq
| [Thursday 24 February 2011] [07:53:48] &lt;mikko&gt;        Steve-o: thanks for applying that
| [Thursday 24 February 2011] [07:53:53] &lt;mikko&gt;        Steve-o: i&#8217;ll test freebsd next
| [Thursday 24 February 2011] [07:55:51] &lt;Steve-o&gt;      no worries, just unit testing on Solaris
| [Thursday 24 February 2011] [07:57:59] &lt;Steve-o&gt;      Linux passes now, FreeBSD built, Solaris built, Mingw to go for unit tests on Windows
| [Thursday 24 February 2011] [08:03:25] &lt;Evet&gt; Steve-o: do you test it on virtualbox, etc?
| [Thursday 24 February 2011] [08:04:26] &lt;Steve-o&gt;      real hardware, vbox hasn&#8217;t got multicast support I think
| [Thursday 24 February 2011] [08:10:46] &lt;Evet&gt; Steve-o: do you compare zeromq performance, stability among linux, <em>bsd, solaris?
| [Thursday 24 February 2011] [08:11:01] &lt;Steve-o&gt;      and Windows
| [Thursday 24 February 2011] [08:11:44] &lt;Steve-o&gt;      but I don&#8217;t have high end SPARC hardware for a fair comparison
| [Thursday 24 February 2011] [08:12:49] &lt;Steve-o&gt;      unsurprisingly its linux &gt; freebsd &gt; solaris &gt; windows
| [Thursday 24 February 2011] [08:13:12] &lt;Steve-o&gt;      windows only works well when you are not using it, i.e. offloading into hardware
| [Thursday 24 February 2011] [08:17:00] &lt;sustrik&gt;      lol
| [Thursday 24 February 2011] [08:17:02] &lt;sustrik&gt;      &#8220;windows only works well when you are not using it&#8221;
| [Thursday 24 February 2011] [08:17:49] &lt;Steve-o&gt;      which is why TCP is pretty good on it :)
| [Thursday 24 February 2011] [08:29:04] &lt;pieterh&gt;      Evet: in my experience Windows is about 3-5 times slower on the same hardware, for TCP
| [Thursday 24 February 2011] [08:29:36] &lt;Evet&gt; its sad that i have two windows servers
| [Thursday 24 February 2011] [08:30:33] &lt;pieterh&gt;      one is accidental, two is bad luck, three would be unforgiveable :-)
| [Thursday 24 February 2011] [08:31:11] &lt;pieterh&gt;      linux is the focus of intense optimization you don&#8217;t see elsewhere
| [Thursday 24 February 2011] [08:31:41] &lt;Evet&gt; low-level stuff is pain in the ass on windows
| [Thursday 24 February 2011] [08:32:22] &lt;pieterh&gt;      You get lots of choice though
| [Thursday 24 February 2011] [08:32:23] &lt;Evet&gt; i had to reboot the server 2 times just for a simple dns server, one for installation and one for updates
| [Thursday 24 February 2011] [08:32:35] &lt;pieterh&gt;      like, pthreads offers just one way to start a thread... pah!
| [Thursday 24 February 2011] [08:32:37] &lt;guido_g&gt;      and everything you don&#8217;t habe a button for is considered low-level
| [Thursday 24 February 2011] [08:32:40] &lt;guido_g&gt;      *have
| [Thursday 24 February 2011] [08:32:41] &lt;pieterh&gt;      win32 offers at least three
| [Thursday 24 February 2011] [08:32:53] &lt;pieterh&gt;      of which two are marked &#8220;Don&#8217;t use this! Will Crash!&#8221;
| [Thursday 24 February 2011] [08:33:30] &lt;pieterh&gt;      it&#8217;s like no API call was ever improved... it was written (poorly), delivered, and then frozen
| [Thursday 24 February 2011] [08:35:05] &lt;Steve-o&gt;      WSAPoll is quite amusing
| [Thursday 24 February 2011] [08:35:16] &lt;Steve-o&gt;      they admit its slower than select()
| [Thursday 24 February 2011] [08:39:15] &lt;Steve-o&gt;      then they silently advertise winsock is stupid and slow by implementing wsk sockets
| [Thursday 24 February 2011] [08:40:56] &lt;pieterh&gt;      Evet: really, if you can use Linux for your production boxes, you&#8217;re winning big time
| [Thursday 24 February 2011] [08:43:19] &lt;Steve-o&gt;      well, unless you&#8217;re employing .net developers I guess
| [Thursday 24 February 2011] [08:43:26] &lt;Evet&gt; im planning to chuck out windows and plesk license of 24gigs box and run mongrel2+zeromq only
| [Thursday 24 February 2011] [08:43:54] &lt;pieterh&gt;      Steve-o: even then, I&#8217;d use that only for client boxes that absolutely had to use Windows, e.g. to run Excel
| [Thursday 24 February 2011] [08:44:22] &lt;pieterh&gt;      you don&#8217;t want production platforms where the tool chain becomes obsolete every 18 months
| [Thursday 24 February 2011] [08:47:48] &lt;Steve-o&gt;      I guess at places they&#8217;re changing developers every 6-12 months it&#8217;s not so important :D
| [Thursday 24 February 2011] [08:52:54] &lt;Steve-o&gt;      anyway but a lot of the blame on Windows is actually with the drivers
| [Thursday 24 February 2011] [09:05:24] &lt;Evet&gt; is 2.1.1 (rc1) production ready?
| [Thursday 24 February 2011] [09:07:31] &lt;pieterh&gt;      Evet: it&#8217;s a release candidate
| [Thursday 24 February 2011] [09:07:58] &lt;pieterh&gt;      that means we&#8217;re expecting to fix some issues before it&#8217;s production ready
| [Thursday 24 February 2011] [09:44:38] &lt;mikko&gt;        hey
| [Thursday 24 February 2011] [09:44:53] &lt;mikko&gt;        nm
| [Thursday 24 February 2011] [09:49:35] &lt;ianbarber&gt;    good chat
| [Thursday 24 February 2011] [10:00:55] &lt;cremes&gt;       pieterh: i felt a challenge yesterday to convert my ruby &#8220;leak&#8221; example to C; here&#8217;s the result:  https://gist.github.com/841318
| [Thursday 24 February 2011] [10:01:31] &lt;cremes&gt;       it shows something leaking like mad... i don&#8217;t know if it&#8217;s 0mq, the OS or what (tested on osx &amp; linux)
| [Thursday 24 February 2011] [10:01:51] &lt;cremes&gt;       but now you don&#8217;t have to do the conversion!
| [Thursday 24 February 2011] [10:02:30] &lt;cremes&gt;       i find that the examples in the guide are useful foundations for converting code from other langs into C
| [Thursday 24 February 2011] [10:02:39] &lt;cremes&gt;       so thanks for that
| [Thursday 24 February 2011] [10:20:10] &lt;Evet&gt; mongrel2 is what i was trying to do with nginx. its really cool
| [Thursday 24 February 2011] [10:59:45] &lt;CIA-21&gt;       zeromq2: 03Martin Sustrik 07master * rc22e527 10/ doc/zmq_getsockopt.txt :
| [Thursday 24 February 2011] [10:59:45] &lt;CIA-21&gt;       zeromq2: Minor patch to zmq_getsockopt(3) man page
| [Thursday 24 February 2011] [10:59:45] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Martin Sustrik &lt;sustrik&#64;250bpm.com&gt; - http://bit.ly/gXYb3A
| [Thursday 24 February 2011] [11:11:11] &lt;gdan_&gt;        on linux i built and installed libzmq, tested (mono app) and all was good.  on OSX i built, installed (all seemed to go ok) but my app (mono) does not see the libzmq lib.  has anyone had experience with zmq mono on OSX?
| [Thursday 24 February 2011] [11:14:04] &lt;gdan_&gt;        i&#8217;m wondering if there is an env path missing from the mono project, for example LD_LIBRARY_PATH in linux
| [Thursday 24 February 2011] [11:14:51] &lt;amacleod&gt;     OSX is unix too.  LD_LIBRARY_PATH should work there the same as it does on Linux.
| [Thursday 24 February 2011] [11:15:05] &lt;amacleod&gt;     s/unix/unix or unix-like/
| [Thursday 24 February 2011] [11:15:34]         * amacleod can&#8217;t remember who owns the Unix trademark these days, and which OSes can legitimately use it.
| [Thursday 24 February 2011] [11:20:30] &lt;gdan_&gt;        i read that DYLD_LIBRARY_PATH replaces....  don&#8217;t know.  going to have to do more reading as still not seeing the lib. thanks
| [Thursday 24 February 2011] [11:22:45] &lt;Seta00&gt;       anyone here familiar with clrzmq2?
| [Thursday 24 February 2011] [11:24:01] &lt;pieterh&gt;      amacleod: Microsoft, I suspect :-)
| [Thursday 24 February 2011] [11:24:59] &lt;pieterh&gt;      cremes: nice, I was going to do it but it&#8217;s 5:30pm and I still didn&#8217;t get around to it
| [Thursday 24 February 2011] [11:26:15] &lt;cremes&gt;       pieterh: i haven&#8217;t really written any C in 15 years so it was kind of nice to dust off those old skills
| [Thursday 24 February 2011] [11:26:30] &lt;pieterh&gt;      it looks purdy
| [Thursday 24 February 2011] [11:26:31] &lt;cremes&gt;       but the real question is this... have you run the code to confirm the problem?
| [Thursday 24 February 2011] [11:26:39] &lt;cremes&gt;       heh
| [Thursday 24 February 2011] [11:26:56] &lt;pieterh&gt;      i&#8217;m trying it now...
| [Thursday 24 February 2011] [11:28:04] &lt;pieterh&gt;      so, as you wrote it, memory slowly increases
| [Thursday 24 February 2011] [11:28:16] &lt;pieterh&gt;      now let me remove some possible culprits...
| [Thursday 24 February 2011] [11:28:40] &lt;cremes&gt;       feel free... i&#8217;d love to be proven wrong on this one
| [Thursday 24 February 2011] [11:29:53] &lt;cremes&gt;       this is the &#8216;bug&#8217; i&#8217;ve been chasing for 2.5 weeks... it was masked by that identity issue (which was a real bug) and slowed me down from honing
| [Thursday 24 February 2011] [11:29:58] &lt;cremes&gt;       in on the real culprit
| [Thursday 24 February 2011] [11:31:03] &lt;pieterh&gt;      ok, so with a few lines changed, it works nicely
| [Thursday 24 February 2011] [11:31:11] &lt;pieterh&gt;      some questions
| [Thursday 24 February 2011] [11:31:22] &lt;pieterh&gt;      is there a good reason you open and close sockets all the time?
| [Thursday 24 February 2011] [11:31:33] &lt;cremes&gt;       yes, i wrote up my use-case in the issue/ticket
| [Thursday 24 February 2011] [11:31:48] &lt;cremes&gt;       it&#8217;s easier to read it there than for me to recount it here
| [Thursday 24 February 2011] [11:32:35] &lt;cremes&gt;       https://github.com/zeromq/zeromq2/issues#issue/171
| [Thursday 24 February 2011] [11:32:46] &lt;pieterh&gt;      yes, I&#8217;ve read it
| [Thursday 24 February 2011] [11:32:57] &lt;pieterh&gt;      is there a *good</em> reason you open and close sockets all the time
| [Thursday 24 February 2011] [11:33:39] &lt;pieterh&gt;      rather, than, for example, starting your subscribers as inproc clients of a framework that just keeps one socket open all the time
| [Thursday 24 February 2011] [11:33:46] &lt;pieterh&gt;      I&#8217;m sure there are other ways
| [Thursday 24 February 2011] [11:33:50] &lt;cremes&gt;       what isn&#8217;t <em>good</em> about that use-case? i haven&#8217;t been able to figure out an alternate methodology
| [Thursday 24 February 2011] [11:34:32] &lt;pieterh&gt;      as you run your test, in C, go to another window
| [Thursday 24 February 2011] [11:34:52]         * pieterh tries first :-)
| [Thursday 24 February 2011] [11:34:57] &lt;cremes&gt;       yeah, it will have hundreds or thousands of socket in TIME_WAIT
| [Thursday 24 February 2011] [11:35:10] &lt;mikko&gt;        hacked together a mash up
| [Thursday 24 February 2011] [11:35:11] &lt;mikko&gt;        <a class="reference external" href="http://valokuva.org/~mikko/where.php?user=zeromq&amp;repo=zeromq2">http://valokuva.org/~mikko/where.php?user=zeromq&amp;repo=zeromq2</a>
| [Thursday 24 February 2011] [11:35:17] &lt;mikko&gt;        shows pull requests by location
| [Thursday 24 February 2011] [11:35:20] &lt;pieterh&gt;      and then type &#8216;while true; do netstat -a | wc -l; sleep 1; done&#8217;
| [Thursday 24 February 2011] [11:35:31] &lt;pieterh&gt;      sockets do not disappear right away
| [Thursday 24 February 2011] [11:35:36] &lt;pieterh&gt;      you are simply smashing the TCP stack
| [Thursday 24 February 2011] [11:35:39] &lt;pieterh&gt;      it&#8217;s not 0MQ&#8217;s issue
| [Thursday 24 February 2011] [11:35:44] &lt;cremes&gt;       pieterh: not true
| [Thursday 24 February 2011] [11:35:55] &lt;pieterh&gt;      well, netstat doesn&#8217;t even respond here, anymore...
| [Thursday 24 February 2011] [11:36:07] &lt;cremes&gt;       this is easily illustrated by injecting a forwarder between the publisher and subscribers
| [Thursday 24 February 2011] [11:36:25] &lt;pieterh&gt;      ok, another question
| [Thursday 24 February 2011] [11:36:26] &lt;cremes&gt;       you can then kill the publisher and the forwarder&#8217;s memory footprint never shrinks
| [Thursday 24 February 2011] [11:36:39] &lt;pieterh&gt;      cremes: that&#8217;s because the sockets are owned by someone
| [Thursday 24 February 2011] [11:36:57] &lt;pieterh&gt;      anyhow, that&#8217;s not your test case...
| [Thursday 24 February 2011] [11:36:59] &lt;cremes&gt;       but when you kill the publisher, they all go away within a few seconds
| [Thursday 24 February 2011] [11:37:14] &lt;pieterh&gt;      they =  ?
| [Thursday 24 February 2011] [11:37:29] &lt;cremes&gt;       my prod code only has about 250 sockets in TIME_WAIT at any given time...
| [Thursday 24 February 2011] [11:37:35] &lt;pieterh&gt;      ok
| [Thursday 24 February 2011] [11:37:38] &lt;cremes&gt;       the example code was written to show the problem faster
| [Thursday 24 February 2011] [11:37:49] &lt;cremes&gt;       they = sockets in TIME_WAIT
| [Thursday 24 February 2011] [11:37:51] &lt;pieterh&gt;      ok, let me post an example that works perfectly
| [Thursday 24 February 2011] [11:37:57] &lt;pieterh&gt;      your code with a trivial change
| [Thursday 24 February 2011] [11:38:00] &lt;cremes&gt;       ok
| [Thursday 24 February 2011] [11:38:27] &lt;cremes&gt;       as an aside, this problem also occurs with ipc transport so i don&#8217;t think it&#8217;s a tcp issue
| [Thursday 24 February 2011] [11:38:28] &lt;pieterh&gt;      <a class="reference external" href="https://gist.github.com/842407">https://gist.github.com/842407</a>
| [Thursday 24 February 2011] [11:38:35] &lt;pieterh&gt;      ipc = local domain sockets
| [Thursday 24 February 2011] [11:38:50] &lt;cremes&gt;       yeah, different stack
| [Thursday 24 February 2011] [11:39:06] &lt;pieterh&gt;      I do get:
| [Thursday 24 February 2011] [11:39:06] &lt;pieterh&gt;      Too many open files
| [Thursday 24 February 2011] [11:39:06] &lt;pieterh&gt;      rc == 0 (mailbox.cpp:374)
| [Thursday 24 February 2011] [11:39:06] &lt;pieterh&gt;      Aborted (core dumped)
| [Thursday 24 February 2011] [11:39:45] &lt;pieterh&gt;      your use case is just being really unpleasant with system resources
| [Thursday 24 February 2011] [11:41:41] &lt;cremes&gt;       your example with the context changes still leaks like a sieve on my box
| [Thursday 24 February 2011] [11:42:54] &lt;pieterh&gt;      on mine it doesn&#8217;t even show on top, I suspect because CPU usage is too low
| [Thursday 24 February 2011] [11:43:45] &lt;cremes&gt;       change the code to use fewer threads (2 or 3) and change the client to reconnect once per second
| [Thursday 24 February 2011] [11:43:48] &lt;cremes&gt;       it will still leak
| [Thursday 24 February 2011] [11:43:56] &lt;pieterh&gt;      ok, trying that
| [Thursday 24 February 2011] [11:44:51] &lt;cremes&gt;       it will just take longer for it to be obvious it&#8217;s growing
| [Thursday 24 February 2011] [11:45:59] &lt;pieterh&gt;      yes, it&#8217;s definitely growing
| [Thursday 24 February 2011] [11:46:10] &lt;pieterh&gt;      I&#8217;ll make the messages huge, see if it&#8217;s related to that or not
| [Thursday 24 February 2011] [11:46:37] &lt;cremes&gt;       nope, it&#8217;s not but please do the experiment :)
| [Thursday 24 February 2011] [11:46:44] &lt;pieterh&gt;      it&#8217;s not, you tried, fine
| [Thursday 24 February 2011] [11:47:07] &lt;pieterh&gt;      next, try with 2.0.10...
| [Thursday 24 February 2011] [11:47:36] &lt;cremes&gt;       i&#8217;ll have to dload a copy... give me a few minutes to get that setup
| [Thursday 24 February 2011] [11:47:46] &lt;andrewvc&gt;     cremes: I&#8217;m thinking of releasing a patch version of ffi-rzmq. Sound good?
| [Thursday 24 February 2011] [11:47:51] &lt;pieterh&gt;      i&#8217;ll do it, have that already set-up...
| [Thursday 24 February 2011] [11:47:56] &lt;cremes&gt;       pieterh: ok
| [Thursday 24 February 2011] [11:47:57] &lt;andrewvc&gt;     the noblock thing is prolly worth it I&#8217;m thinking?
| [Thursday 24 February 2011] [11:48:19] &lt;cremes&gt;       andrewvc: i&#8217;ve made a few more nips &amp; tucks and added some specs
| [Thursday 24 February 2011] [11:48:32] &lt;cremes&gt;       why don&#8217;t you commit what you have and i&#8217;ll merge my stuff in?
| [Thursday 24 February 2011] [11:48:48] &lt;andrewvc&gt;     hmm, I don&#8217;t have anything new to add in
| [Thursday 24 February 2011] [11:49:04] &lt;cremes&gt;       oh, so it&#8217;s just the fix for the #noblock? method?
| [Thursday 24 February 2011] [11:49:19] &lt;cremes&gt;       if so, i&#8217;ll cut a release later today
| [Thursday 24 February 2011] [11:49:22] &lt;andrewvc&gt;     cool
| [Thursday 24 February 2011] [11:49:29] &lt;andrewvc&gt;     btw, did you see https://github.com/chuckremes/ffi-rzmq/issues#issue/20
| [Thursday 24 February 2011] [11:49:31]         * cremes updates calendar
| [Thursday 24 February 2011] [11:49:56] &lt;cremes&gt;       yep, saw it
| [Thursday 24 February 2011] [11:50:14] &lt;cremes&gt;       do you see EBADF in that circumstance?
| [Thursday 24 February 2011] [11:50:50] &lt;andrewvc&gt;     nah, I&#8217;m not sure if sustrik thought that was related to my other issue
| [Thursday 24 February 2011] [11:51:01] &lt;andrewvc&gt;     which tmm1 fixed last night in eventmachine
| [Thursday 24 February 2011] [11:51:19] &lt;andrewvc&gt;     it does bring up one good point perhaps. I don&#8217;t think we invalidate sockets on term
| [Thursday 24 February 2011] [11:51:31] &lt;andrewvc&gt;     which is good
| [Thursday 24 February 2011] [11:52:11] &lt;andrewvc&gt;     maybe we should cut out this line though
| [Thursday 24 February 2011] [11:52:13] &lt;andrewvc&gt;     https://github.com/chuckremes/ffi-rzmq/blob/master/lib/ffi-rzmq/context.rb#L63
| [Thursday 24 February 2011] [11:53:04] &lt;andrewvc&gt;     not that it probably matters at all, but it might make sense given sustrik&#8217;s comment
| [Thursday 24 February 2011] [11:53:08] &lt;cremes&gt;       hmmm... i would need to see some code that breaks because of that line before removing it
| [Thursday 24 February 2011] [11:53:34] &lt;andrewvc&gt;     yeah, I don&#8217;t think it matters at all, I&#8217;m not certain we have any issue in the first place
| [Thursday 24 February 2011] [11:53:39] &lt;sustrik&gt;      hi, what comment?
| [Thursday 24 February 2011] [11:54:01] &lt;sustrik&gt;      the one in the email?
| [Thursday 24 February 2011] [11:54:19] &lt;andrewvc&gt;     or the user to close the socket so you should not see EBADF in such case if you do, it&#8217;s a bug
| [Thursday 24 February 2011] [11:54:21] &lt;andrewvc&gt;     ack
| [Thursday 24 February 2011] [11:54:26] &lt;andrewvc&gt;     I posted it here: https://github.com/chuckremes/ffi-rzmq/issues#issue/20
| [Thursday 24 February 2011] [11:54:49] &lt;andrewvc&gt;     did you see a specific bug sustrik?
| [Thursday 24 February 2011] [11:55:02] &lt;andrewvc&gt;     As far as I know calling term in ffi-rzmq doesn&#8217;t touch socket objects
| [Thursday 24 February 2011] [11:55:07] &lt;sustrik&gt;      i&#8217;m lost
| [Thursday 24 February 2011] [11:55:13] &lt;sustrik&gt;      what are you speaking about
| [Thursday 24 February 2011] [11:55:17] &lt;sustrik&gt;      ?
| [Thursday 24 February 2011] [11:55:21] &lt;andrewvc&gt;     in IRC the other day you mentioned
| [Thursday 24 February 2011] [11:55:48]         * cremes lost too now :)
| [Thursday 24 February 2011] [11:55:48] &lt;andrewvc&gt;     in 2.1, zmq_term() should not invalidate the socekts what it does it causes the socket to return ETERM on any subsequent call and wait for the user to close the socket so you should not see EBADF in such case if you do, it&#8217;s a bug
| [Thursday 24 February 2011] [11:55:51] &lt;andrewvc&gt;     lol
| [Thursday 24 February 2011] [11:56:03] &lt;andrewvc&gt;     I thought you&#8217;d directed that at me sustri
| [Thursday 24 February 2011] [11:56:13] &lt;andrewvc&gt;     this was at like 11:30PM I was really tired and confused
| [Thursday 24 February 2011] [11:56:15] &lt;andrewvc&gt;     lol
| [Thursday 24 February 2011] [11:56:37] &lt;sustrik&gt;      nope, it&#8217;s just describing how it works
| [Thursday 24 February 2011] [11:56:55] &lt;sustrik&gt;      EBADF just should not happen
| [Thursday 24 February 2011] [11:57:30] &lt;andrewvc&gt;     ohhh, yeah, I guess at that point I hadn&#8217;t apprised you of the situation that it was caused by an external process closing the FD, not a call to ZMQ::Term
| [Thursday 24 February 2011] [11:57:57] &lt;sustrik&gt;      i guess so
| [Thursday 24 February 2011] [11:58:34] &lt;pieterh&gt;      cremes: well, on 2.0.10 it has the same problems
| [Thursday 24 February 2011] [11:58:45] &lt;pieterh&gt;      it behaves far worse with TCP than inproc
| [Thursday 24 February 2011] [11:59:10] &lt;cremes&gt;       pieterh: yuck
| [Thursday 24 February 2011] [11:59:35] &lt;cremes&gt;       andrewvc: i&#8217;m going to strip that line out; if you look closer you&#8217;ll see nothing is ever added to that array... dead code!
| [Thursday 24 February 2011] [11:59:46] &lt;andrewvc&gt;     oh nice
| [Thursday 24 February 2011] [12:00:21] &lt;andrewvc&gt;     ok, well, off to work, adios
| [Thursday 24 February 2011] [12:00:27] &lt;cremes&gt;       pieterh: more information...
| [Thursday 24 February 2011] [12:00:43] &lt;cremes&gt;       i tried running this code under java/jvm so that i could strictly control the heap size
| [Thursday 24 February 2011] [12:01:18] &lt;cremes&gt;       it&#8217;s interesting in that the rsize grows well beyond the max heap size and the jvm doesn&#8217;t start throwing outofmemory errors
| [Thursday 24 February 2011] [12:01:22] &lt;pieterh&gt;      cremes: it also consumes a heck of a lot of CPU for a process that does essentially nothing...
| [Thursday 24 February 2011] [12:01:40] &lt;cremes&gt;       this indicates to me that this memory gain isn&#8217;t visible to the application but the OS sees it
| [Thursday 24 February 2011] [12:01:44] &lt;pieterh&gt;      indeed
| [Thursday 24 February 2011] [12:02:04] &lt;pieterh&gt;      that is what it looks like, system resources (but owned by a process)
| [Thursday 24 February 2011] [12:02:17] &lt;cremes&gt;       right
| [Thursday 24 February 2011] [12:02:26] &lt;pieterh&gt;      what&#8217;s weird is that it happens with inproc
| [Thursday 24 February 2011] [12:02:44] &lt;cremes&gt;       but then i would expect the OS to run out of that resource and start failing but it never does
| [Thursday 24 February 2011] [12:03:01] &lt;cremes&gt;       at least it doesn&#8217;t before my 16GB box is completely exhausted and used up all of its swap!
| [Thursday 24 February 2011] [12:03:30] &lt;cremes&gt;       only then does the OS kill it
| [Thursday 24 February 2011] [12:03:41] &lt;pieterh&gt;      I suspect there is more than one symptom
| [Thursday 24 February 2011] [12:03:46] &lt;cremes&gt;       it doesn&#8217;t make sense that inproc would show it
| [Thursday 24 February 2011] [12:03:47] &lt;Silly&gt;        this on linux? The default linux policy for the OS to give memory is to always succeed, then fail when it can&#8217;t allocate the actual page
| [Thursday 24 February 2011] [12:03:58] &lt;Silly&gt;        iwth a segfault
| [Thursday 24 February 2011] [12:04:00] &lt;cremes&gt;       Silly: osx and linux, fails same way
| [Thursday 24 February 2011] [12:04:01] &lt;pieterh&gt;      cremes: that was the change I made, tcp-&gt;inproc
| [Thursday 24 February 2011] [12:04:03] &lt;sustrik&gt;      if it happens with inproc as well and the memory is locked in the OS
| [Thursday 24 February 2011] [12:04:17] &lt;Silly&gt;        cremes: huh
| [Thursday 24 February 2011] [12:04:27] &lt;sustrik&gt;      it&#8217;s definitely the mailboxes assocaited with individual sockets
| [Thursday 24 February 2011] [12:04:40] &lt;pieterh&gt;      sustrik: did we have mailboxes in 2.0.10?
| [Thursday 24 February 2011] [12:04:45] &lt;sustrik&gt;      yeah
| [Thursday 24 February 2011] [12:04:55] &lt;pieterh&gt;      2.0.9?
| [Thursday 24 February 2011] [12:04:58] &lt;sustrik&gt;      yes
| [Thursday 24 February 2011] [12:05:02] &lt;mikko&gt;        pieterh: i got feature request for zdns
| [Thursday 24 February 2011] [12:05:21] &lt;pieterh&gt;      mikko: zns, it&#8217;s zns... zdns are a bunch of splitters
| [Thursday 24 February 2011] [12:05:44] &lt;sustrik&gt;      in any case, the mailboxes for closed sockets should be closed by the reaper thread in 2.1.1
| [Thursday 24 February 2011] [12:05:57] &lt;pieterh&gt;      ah, how quickly does the reaper work?
| [Thursday 24 February 2011] [12:05:58] &lt;sustrik&gt;      if they are not, there&#8217;s a bug somewhere
| [Thursday 24 February 2011] [12:06:08] &lt;sustrik&gt;      as fast as physically possible
| [Thursday 24 February 2011] [12:06:23] &lt;sustrik&gt;      no sleeps or similar
| [Thursday 24 February 2011] [12:06:35] &lt;pieterh&gt;      can we add an assertion that the number of mailboxes doesn&#8217;t exceed some ceiling?
| [Thursday 24 February 2011] [12:06:43] &lt;pieterh&gt;      just for testing, not for real
| [Thursday 24 February 2011] [12:06:46] &lt;sustrik&gt;      let me see
| [Thursday 24 February 2011] [12:06:51] &lt;pieterh&gt;      mikko: what&#8217;s the suggestion?
| [Thursday 24 February 2011] [12:07:00] &lt;mikko&gt;        pieterh: ephemeral entries
| [Thursday 24 February 2011] [12:07:08] &lt;pieterh&gt;      sounds good
| [Thursday 24 February 2011] [12:07:09] &lt;mikko&gt;        not sure if that is in, just saw the repo name in my feed
| [Thursday 24 February 2011] [12:07:11] &lt;pieterh&gt;      what does that mean?
| [Thursday 24 February 2011] [12:07:36] &lt;mikko&gt;        the entry exists only if the node who created it exists
| [Thursday 24 February 2011] [12:07:38] &lt;pieterh&gt;      ah, I put the zfl maintainers in as the default zns team
| [Thursday 24 February 2011] [12:07:50] &lt;sustrik&gt;      pieterh: see reaper.cpp:105
| [Thursday 24 February 2011] [12:07:55] &lt;cremes&gt;       sustrik: the code might be leaking mailboxes?
| [Thursday 24 February 2011] [12:08:23] &lt;sustrik&gt;      that&#8217;s the only system resource held by socket when inproc is used
| [Thursday 24 February 2011] [12:09:27] &lt;pieterh&gt;      sustrik: ack, trying that
| [Thursday 24 February 2011] [12:09:40] &lt;pieterh&gt;      mikko: sounds good, worth noting, not sure how to make it
| [Thursday 24 February 2011] [12:09:46] &lt;mikko&gt;        pieterh: heartbeat maybe
| [Thursday 24 February 2011] [12:09:52] &lt;pieterh&gt;      sure
| [Thursday 24 February 2011] [12:09:55] &lt;mikko&gt;        pieterh: this is a concept from zookeeper
| [Thursday 24 February 2011] [12:10:01] &lt;pieterh&gt;      i wanted to build zns using the clone pattern from ch3
| [Thursday 24 February 2011] [12:10:09] &lt;pieterh&gt;      disrtributed key-value table
| [Thursday 24 February 2011] [12:10:22] &lt;mikko&gt;        pieterh: amazingly handy, as if a box fails it automatically disappears from the service discovery
| [Thursday 24 February 2011] [12:10:27] &lt;pieterh&gt;      of course
| [Thursday 24 February 2011] [12:10:33] &lt;pieterh&gt;      it&#8217;s an excellent way to do failover
| [Thursday 24 February 2011] [12:14:45] &lt;pieterh&gt;      mikko: any other ideas for the name service?
| [Thursday 24 February 2011] [12:15:04] &lt;pieterh&gt;      i&#8217;ll collect them on zero.mq/zns
| [Thursday 24 February 2011] [12:18:34] &lt;pieterh&gt;      sustrik: cremes: using inproc, it climbs to some point and then stops leaking memory
| [Thursday 24 February 2011] [12:18:52] &lt;cremes&gt;       that&#8217;s interesting
| [Thursday 24 February 2011] [12:18:59] &lt;pieterh&gt;      I&#8217;ve added an assertion that the number of sockets (reaper.cpp) is under 100
| [Thursday 24 February 2011] [12:19:04] &lt;pieterh&gt;      that assertion never hits
| [Thursday 24 February 2011] [12:19:08] &lt;cremes&gt;       any hypothesis?
| [Thursday 24 February 2011] [12:19:25] &lt;mikko&gt;        pieterh: no, thats the single biggest thing
| [Thursday 24 February 2011] [12:19:34] &lt;mikko&gt;        i will have more soon probably
| [Thursday 24 February 2011] [12:19:41] &lt;pieterh&gt;      back to TCP/IPC leakage due to zombie sockets that go away either very slowly, or not at all
| [Thursday 24 February 2011] [12:19:58] &lt;pieterh&gt;      mikko: have started here: http://zns.zeromq.org/page:read-the-manual
| [Thursday 24 February 2011] [12:20:22] &lt;pieterh&gt;      cremes: will run the tcp test again now
| [Thursday 24 February 2011] [12:20:39] &lt;pieterh&gt;      inproc does not provoke the error, therefore is useless to play with
| [Thursday 24 February 2011] [12:21:00] &lt;pieterh&gt;      oh...
| [Thursday 24 February 2011] [12:21:07] &lt;pieterh&gt;      I <em>was</em> using tcp, had changed it...
| [Thursday 24 February 2011] [12:21:10] &lt;cremes&gt;       i added an assert to the if-block inside #process_reaped; that code inside there is never called
| [Thursday 24 February 2011] [12:21:25] &lt;cremes&gt;       so poller-&gt;rm_fd (mailbox_handle) never gets called
| [Thursday 24 February 2011] [12:21:38] &lt;pieterh&gt;      hmm, interesting
| [Thursday 24 February 2011] [12:23:05] &lt;pieterh&gt;      cremes, indeed, rm_fd is not being called
| [Thursday 24 February 2011] [12:23:35] &lt;sustrik&gt;      that looks like it
| [Thursday 24 February 2011] [12:23:45] &lt;cremes&gt;       yep, somehow the +terminating+ variable is set back to false!
| [Thursday 24 February 2011] [12:24:22] &lt;cremes&gt;       i don&#8217;t see any code that would do that
| [Thursday 24 February 2011] [12:24:40] &lt;sustrik&gt;      where&#8217;s the test code?
| [Thursday 24 February 2011] [12:24:57] &lt;pieterh&gt;      sustrik: see irc log just above
| [Thursday 24 February 2011] [12:25:17] &lt;pieterh&gt;      <a class="reference external" href="https://gist.github.com/841318">https://gist.github.com/841318</a>
| [Thursday 24 February 2011] [12:25:46] &lt;sustrik&gt;      btw, the reason why the number of reaped socket is never over 100
| [Thursday 24 February 2011] [12:25:58] &lt;sustrik&gt;      is that the test is creating a new context periodically
| [Thursday 24 February 2011] [12:26:28] &lt;sustrik&gt;      ah, it&#8217;s not
| [Thursday 24 February 2011] [12:26:32] &lt;sustrik&gt;      sorry
| [Thursday 24 February 2011] [12:26:39] &lt;pieterh&gt;      ah, I just got that assertion, right away
| [Thursday 24 February 2011] [12:26:42] &lt;pieterh&gt;      over inproc
| [Thursday 24 February 2011] [12:26:45] &lt;pieterh&gt;      does not hit over tcp
| [Thursday 24 February 2011] [12:27:10] &lt;pieterh&gt;      it doesn&#8217;t call rm_fd using inproc either
| [Thursday 24 February 2011] [12:27:48] &lt;pieterh&gt;      if I don&#8217;t put the assertion in, over inproc, my process runs out of file handles
| [Thursday 24 February 2011] [12:27:55] &lt;pieterh&gt;      it&#8217;s the same error, different symptom
| [Thursday 24 February 2011] [12:27:59] &lt;pieterh&gt;      do you want that example as well?
| [Thursday 24 February 2011] [12:28:11] &lt;sustrik&gt;      ok, the code never gets inside &#8220;if (!sockets &amp;&amp; terminating)&#8221;
| [Thursday 24 February 2011] [12:28:14] &lt;pieterh&gt;      cremes: congrats! you found a bug in rc1, I think!
| [Thursday 24 February 2011] [12:28:20] &lt;sustrik&gt;      because zmq_term() is never called
| [Thursday 24 February 2011] [12:28:24] &lt;sustrik&gt;      so it&#8217;s ok
| [Thursday 24 February 2011] [12:28:42] &lt;pieterh&gt;      sustrik: there are two places it calls rm_fd, neither ever happen
| [Thursday 24 February 2011] [12:28:54] &lt;sustrik&gt;      it should not
| [Thursday 24 February 2011] [12:28:59] &lt;sustrik&gt;      unless you call zmq_term()
| [Thursday 24 February 2011] [12:29:04] &lt;pieterh&gt;      so when does it reap a socket?
| [Thursday 24 February 2011] [12:29:16] &lt;cremes&gt;       socket leak! :)
| [Thursday 24 February 2011] [12:29:17] &lt;sustrik&gt;      the socket reaps itself
| [Thursday 24 February 2011] [12:29:23] &lt;pieterh&gt;      where?
| [Thursday 24 February 2011] [12:30:35] &lt;pieterh&gt;      inproc doesn&#8217;t use sockets at all, right?
| [Thursday 24 February 2011] [12:30:57] &lt;sustrik&gt;      TCP sockets?
| [Thursday 24 February 2011] [12:30:58] &lt;sustrik&gt;      no
| [Thursday 24 February 2011] [12:31:05] &lt;sustrik&gt;      it uses socketpairs though
| [Thursday 24 February 2011] [12:31:13] &lt;sustrik&gt;      1 socketpair per 0mq socket
| [Thursday 24 February 2011] [12:31:28] &lt;pieterh&gt;      so my test case uses inproc and dies after a few seconds with too many open files
| [Thursday 24 February 2011] [12:31:38] &lt;pieterh&gt;      yet in the code, sockets are properly closed
| [Thursday 24 February 2011] [12:31:48] &lt;sustrik&gt;      close is async
| [Thursday 24 February 2011] [12:32:01] &lt;pieterh&gt;      this is on a sub socket, nothing being written
| [Thursday 24 February 2011] [12:32:09] &lt;pieterh&gt;      how async is async?
| [Thursday 24 February 2011] [12:32:18] &lt;sustrik&gt;      utterly async
| [Thursday 24 February 2011] [12:32:24] &lt;pieterh&gt;      seconds? days?
| [Thursday 24 February 2011] [12:32:35] &lt;sustrik&gt;      microseconds
| [Thursday 24 February 2011] [12:32:45] &lt;pieterh&gt;      well, our loop here is in msec and sec
| [Thursday 24 February 2011] [12:32:51] &lt;pieterh&gt;      cremes: let me try init and term in the client loop...
| [Thursday 24 February 2011] [12:33:06] &lt;cremes&gt;       i was just about to try that
| [Thursday 24 February 2011] [12:33:28] &lt;pieterh&gt;      btw, HWM and LINGER are irrelevant to this afaics
| [Thursday 24 February 2011] [12:33:41] &lt;cremes&gt;       i thought so but i wanted to cover all of the bases
| [Thursday 24 February 2011] [12:34:24] &lt;pieterh&gt;      cremes: your publisher binds to an IP address btw
| [Thursday 24 February 2011] [12:34:32] &lt;pieterh&gt;      you should bind to *
| [Thursday 24 February 2011] [12:35:45] &lt;pieterh&gt;      ok, so doing init/term fixes the problem
| [Thursday 24 February 2011] [12:35:52] &lt;pieterh&gt;      and btw it calls the reaper all the time
| [Thursday 24 February 2011] [12:36:14] &lt;pieterh&gt;      sustrik: looks like socketpairs leak (at least)
| [Thursday 24 February 2011] [12:36:38] &lt;cremes&gt;       pieterh: binding to * doesn&#8217;t always work on osx; i&#8217;ll put together a test case &amp; a ticket
| [Thursday 24 February 2011] [12:36:55] &lt;cremes&gt;       in C :)
| [Thursday 24 February 2011] [12:37:01] &lt;sustrik&gt;      so maybe the reaper doesn&#8217;t work correctly
| [Thursday 24 February 2011] [12:37:16] &lt;pieterh&gt;      hmm, we need * to work, make a ticket... yes
| [Thursday 24 February 2011] [12:37:16] &lt;sustrik&gt;      maybe some sockets are stuck in the middle of the deallocation process
| [Thursday 24 February 2011] [12:37:20] &lt;cremes&gt;       sustrik: i think it <em>only</em> reaps when zmq_term() is called
| [Thursday 24 February 2011] [12:37:42] &lt;sustrik&gt;      let me try
| [Thursday 24 February 2011] [12:38:56] &lt;pieterh&gt;      cremes: that&#8217;s what sustrik explained, it&#8217;s the &#8216;terminating&#8217; flag
| [Thursday 24 February 2011] [12:46:43] &lt;sustrik&gt;      bingo! reproduced!
| [Thursday 24 February 2011] [12:46:48] &lt;cremes&gt;       ah, i see why the JVM didn&#8217;t croak when the heap expanded beyond its limit
| [Thursday 24 February 2011] [12:47:12] &lt;cremes&gt;       this C lib is on the other side of the JNI &#8220;bridge&#8221; so memory allocations performed there don&#8217;t get charged to the JVM
| [Thursday 24 February 2011] [12:47:23] &lt;cremes&gt;       sustrik: yea!
| [Thursday 24 February 2011] [12:50:49] &lt;pieterh&gt;      it&#8217;s going to be a great rc2
| [Thursday 24 February 2011] [12:51:48] &lt;cremes&gt;       pieterh: it was already a pretty good rc1; rc2 will just be <em>better</em>!
| [Thursday 24 February 2011] [12:52:16] &lt;pieterh&gt;      we need a new superlative generator
| [Thursday 24 February 2011] [12:52:31] &lt;cremes&gt;       that&#8217;s a stupendous idea
| [Thursday 24 February 2011] [12:56:13] &lt;Evet&gt; is there a function to store messages to disk?
| [Thursday 24 February 2011] [12:56:24] &lt;pieterh&gt;      Evet: not in 0MQ, nope
| [Thursday 24 February 2011] [12:56:52] &lt;pieterh&gt;      but in every language it&#8217;s usually pretty easy
| [Thursday 24 February 2011] [12:58:26] &lt;Evet&gt; im gonna implement redis like append-to-disk
| [Thursday 24 February 2011] [13:01:45] &lt;lt_schmidt_jr&gt;        and tehy will sen you a login e-mail
| [Thursday 24 February 2011] [13:01:52] &lt;lt_schmidt_jr&gt;        oops
| [Thursday 24 February 2011] [13:03:04] &lt;pieterh&gt;      lt_schmidt_jr: wrong windows, yeah, it happens :-)
| [Thursday 24 February 2011] [13:03:30] &lt;lt_schmidt_jr&gt;        and bad typing :)
| [Thursday 24 February 2011] [13:08:59] &lt;pieterh&gt;      sustrik: any joy?
| [Thursday 24 February 2011] [13:09:16] &lt;sustrik&gt;      debugging i
| [Thursday 24 February 2011] [13:09:18] &lt;sustrik&gt;      it
| [Thursday 24 February 2011] [13:09:19] &lt;pieterh&gt;      :-)
| [Thursday 24 February 2011] [13:31:59] &lt;cremes&gt;       sustrik: how hairy is this bug?
| [Thursday 24 February 2011] [13:34:01] &lt;sustrik&gt;      itnot that bad so far
| [Thursday 24 February 2011] [15:22:56] &lt;pieterh&gt;      sustrik: what happened?
| [Thursday 24 February 2011] [16:10:44] &lt;Fast[BDC]&gt;    hi, is there an example implemention of that <a class="reference external" href="http://zguide.zeromq.org/chapter:all#toc55">http://zguide.zeromq.org/chapter:all#toc55</a> ?
| [Thursday 24 February 2011] [16:12:41] &lt;Fast[BDC]&gt;    for me its hard to imagine howto implement a broker which does broadcasts, node to node and load balanced connections
| [Thursday 24 February 2011] [16:28:38] &lt;apexi200sx&gt;   when would something like zeromq be used over say an AMQP server like RabbitMQ, and vice versa
| [Thursday 24 February 2011] [16:30:03] &lt;Fast[BDC]&gt;    apexi200sx: i&#8217;m new so i&#8217;m not sure i&#8217;m right: i think ZeroMQ is better if you just need Message Distributing or when you need ultimate speed
| [Thursday 24 February 2011] [16:31:56] &lt;Fast[BDC]&gt;    apexi200sx: read this for a nice comparison: <a class="reference external" href="http://www.rabbitmq.com/blog/tag/zeromq/">http://www.rabbitmq.com/blog/tag/zeromq/</a>
| [Thursday 24 February 2011] [16:33:43] &lt;apexi200sx&gt;   cheers will have a look
| [Thursday 24 February 2011] [16:34:03] &lt;apexi200sx&gt;   Fast[BDC]: well have you come from using a broker like rabbitmq ?
| [Thursday 24 February 2011] [16:36:20] &lt;Fast[BDC]&gt;    no i&#8217;m very new to all this stuff, i have some servers running with a self implemented messaging subsystem and wanna replace it.
| [Thursday 24 February 2011] [16:38:57] &lt;apexi200sx&gt;   Fast[BDC]: why what have you implemented and y, sorry for being nosey
| [Thursday 24 February 2011] [16:41:19] &lt;Fast[BDC]&gt;    apexi200sx: its a data fetcher and processor, i get product data from different sources to reprice my customers stuff
| [Thursday 24 February 2011] [16:43:54] &lt;Fast[BDC]&gt;    apexi200sx: my servers are interconnected by Twisted and its &#8220;Perspective Broker&#8221; Protocol ( 1 to 1 connections ) work distributing is done by the very nice execnet library
| [Thursday 24 February 2011] [16:44:52] &lt;apexi200sx&gt;   Fast[BDC]: I have heard of twisted, and perspective broker is its RPC mechanism is it not
| [Thursday 24 February 2011] [16:45:12] &lt;Fast[BDC]&gt;    apexi200sx: but i need another approach to scale better, currently i process 3 Million products and its fast growing :(
| [Thursday 24 February 2011] [16:45:15] &lt;Fast[BDC]&gt;    apexi200sx: yes it is
| [Thursday 24 February 2011] [16:46:54] &lt;apexi200sx&gt;   Fast[BDC]: what sort of products, ? are you saying you gather price data from various sources over the internet of loads of different products that ur customer also sells, and u are providing the customer an automated way of price setting
| [Thursday 24 February 2011] [16:46:56] &lt;apexi200sx&gt;   ?
| [Thursday 24 February 2011] [16:47:15] &lt;Fast[BDC]&gt;    apexi200sx: yes, that is what i basicaly do.
| [Thursday 24 February 2011] [16:47:43] &lt;apexi200sx&gt;   Fast[BDC]: 3 million products, flippin heck , so you have to scan them frequently for changes
| [Thursday 24 February 2011] [16:47:44] &lt;Fast[BDC]&gt;    i catch about 36 Million datasets a day for 3 Million products
| [Thursday 24 February 2011] [16:48:03] &lt;cremes&gt;       you guys might be interested in this 0mq whitepaper:  <a class="reference external" href="http://whaleshark.zeromq.org/">http://whaleshark.zeromq.org/</a>
| [Thursday 24 February 2011] [16:50:02] &lt;apexi200sx&gt;   Fast[BDC]: how do you retrieve the datasets, is it web crawling ?
| [Thursday 24 February 2011] [16:50:17] &lt;apexi200sx&gt;   Fast[BDC]: HTML scraping ?
| [Thursday 24 February 2011] [16:50:40] &lt;Fast[BDC]&gt;    apexi200sx: different ways, some by API&#8217;s some by hackish scraping
| [Thursday 24 February 2011] [16:57:07] &lt;Fast[BDC]&gt;    cremes: nice paper
| [Thursday 24 February 2011] [16:57:17] &lt;apexi200sx&gt;   Fast[BDC]: just had a look at execnet, never heard of that before, sounds like it has a decent feature set
| [Thursday 24 February 2011] [16:58:01] &lt;apexi200sx&gt;   Fast[BDC]: where/what do you think ur bottle neck is
| [Thursday 24 February 2011] [17:00:17] &lt;Fast[BDC]&gt;    apexi200sx: currently i need to shut down all application servers to add another one
| [Thursday 24 February 2011] [17:02:34] &lt;Fast[BDC]&gt;    apexi200sx: another issue i have is failover and/or resource sharing
| [Thursday 24 February 2011] [17:05:08] &lt;Fast[BDC]&gt;    apexi200sx: i take a request from my customer (600k Products) split it into parts and process this parts with the help of execnet, then my workers fetch data which i don&#8217;t have in the DB (mongodb) and after a while i send it processed back to the customer
| [Thursday 24 February 2011] [17:07:00] &lt;Fast[BDC]&gt;    apexi200sx: for now each &#8220;spliter&#8221; has a bunch of workers assigned to it but i have multiple &#8220;spliters&#8221; and i need the workers to be shared to all spliters
| [Thursday 24 February 2011] [17:11:04] &lt;apexi200sx&gt;   u running all this in the cloud (like amazon ?) and you need to be able to add new instances on the fly ?
| [Thursday 24 February 2011] [17:11:32] &lt;Fast[BDC]&gt;    no i run it on dedicated servers and yes i need to add instances on to fly
| [Thursday 24 February 2011] [17:12:50] &lt;Fast[BDC]&gt;    apexi200sx: to be true its a bit a overkill but i like to have this system on the edge i just learn from it :)
| [Thursday 24 February 2011] [17:39:12] &lt;Evet&gt; is there a publisher or subscriber limit for in-process?
| [Thursday 24 February 2011] [21:10:09] &lt;amacleod&gt;     Are ipc:// URIs expected not to work under Windows?  We are getting a &#8220;Protocol not supported&#8221; error when trying to bind to &#8220;ipc://listener&#8221;.
| [Thursday 24 February 2011] [21:11:50] &lt;amacleod&gt;     Ah.. there it says right in the manpage.  It&#8217;s currently only implemented on OSs that provide UNIX domain sockets.
| [Thursday 24 February 2011] [22:01:28] &lt;brazilnut000&gt; hello, i was wondering if I could get some assistance trying to figure out some difficulty I&#8217;m havnig with multithreaded code...
| [Thursday 24 February 2011] [22:03:25] &lt;brazilnut000&gt; basically, I&#8217;m spawning a thread to subscribe to incoming data and update some variables while my main thread does some other stuff (including talk on other ports)
| [Thursday 24 February 2011] [22:03:57] &lt;brazilnut000&gt; they&#8217;re both using the same context, but my thread doesn&#8217;t seem to get anything from the publisher
| [Thursday 24 February 2011] [22:04:50] &lt;brazilnut000&gt; however, if i make the same calls to create, bind, and subscribe in my main thread it works...
| [Thursday 24 February 2011] [22:05:11] &lt;brazilnut000&gt; anyone?
| [Thursday 24 February 2011] [22:24:30] &lt;brazilnut000&gt; hrmm...i guess not...
| [Thursday 24 February 2011] [22:25:55] &lt;Steve-o&gt;      morning all, looks like o&#8217;reilly doesn&#8217;t actually archive webcasts?
| [Thursday 24 February 2011] [22:32:24] &lt;amacleod&gt;     brazilnut000, you are not sharing sockets between threads, are you?  Just contexts?
| [Thursday 24 February 2011] [22:32:49] &lt;amacleod&gt;     brazilnut000, what transport are you using, and what ZMQ pattern?
| [Thursday 24 February 2011] [22:39:00] &lt;brazilnut000&gt; oh, sorry, stepped away.
| [Thursday 24 February 2011] [22:40:00] &lt;brazilnut000&gt; I&#8217;m sharing contexts only, tcp, ZMQ_PUB and ZMQ_SUB
| [Thursday 24 February 2011] [22:44:39] &lt;amacleod&gt;     Ok.  So you shouldn&#8217;t need to be messing with any addressing/routing.
| [Thursday 24 February 2011] [22:44:47] &lt;amacleod&gt;     How many I/O threads?  1?
| [Thursday 24 February 2011] [22:44:54] &lt;brazilnut000&gt; 1
| [Thursday 24 February 2011] [22:47:58] &lt;amacleod&gt;     Dunno.  Is it possible that the subscriber is trying to connect before the publisher has had a chance to become established?
| [Thursday 24 February 2011] [22:48:18] &lt;amacleod&gt;     (I&#8217;m not sure how timing issues are supposed to work with PUB/SUB.)
| [Thursday 24 February 2011] [22:50:07] &lt;brazilnut000&gt; it&#8217;s possible, though unlikely....also, as I understand it, order shouldn&#8217;t matter.  It&#8217;s possible to lose the first &#8216;x&#8217; messages, but I don&#8217;t ever get any...
| [Thursday 24 February 2011] [22:56:32] &lt;brazilnut000&gt; well, thanks for giving it a shot.  Gonna go get some dinner...
| [Thursday 24 February 2011] [22:57:11] &lt;amacleod&gt;     You&#8217;re welcome.  Sorry I couldn&#8217;t get any further.
| [Friday 25 February 2011] [02:44:07] &lt;<a href="#id3245"><span class="problematic" id="id3246">pieterh_</span></a>&gt;       sustrik: g&#8217;morning
| [Friday 25 February 2011] [02:44:13] &lt;sustrik&gt;        morning
| [Friday 25 February 2011] [02:44:25] &lt;<a href="#id3247"><span class="problematic" id="id3248">pieterh_</span></a>&gt;       just curious if you found that leak yesterday
| [Friday 25 February 2011] [02:45:17] &lt;sustrik&gt;        well, i found one delayed deallocation
| [Friday 25 February 2011] [02:45:29] &lt;sustrik&gt;        but afaics it applies only to sockets with no connects/binds
| [Friday 25 February 2011] [02:45:36] &lt;sustrik&gt;        so it&#8217;s probably a different issue
| [Friday 25 February 2011] [02:46:30] &lt;<a href="#id3249"><span class="problematic" id="id3250">pieterh_</span></a>&gt;       a&#8217;ight
| [Friday 25 February 2011] [02:46:50] &lt;sustrik&gt;        anyway, i&#8217;m patching it now
| [Friday 25 February 2011] [02:50:18] &lt;sustrik&gt;        pieterh: the master documentation doesn&#8217;t seem to be updated automatically
| [Friday 25 February 2011] [02:50:20] &lt;sustrik&gt;        should it?
| [Friday 25 February 2011] [03:00:40] &lt;CIA-21&gt; zeromq2: 03Martin Sustrik 07master * rd4e418f 10/ (src/reaper.cpp src/socket_base.cpp src/socket_base.hpp):
| [Friday 25 February 2011] [03:00:40] &lt;CIA-21&gt; zeromq2: Socket with no owner objects is deallocated immediately
| [Friday 25 February 2011] [03:00:40] &lt;CIA-21&gt; zeromq2: Till now the deallocation of such socket was delayed
| [Friday 25 February 2011] [03:00:40] &lt;CIA-21&gt; zeromq2: till zmq_term() thus creating a &#8220;leak&#8221;.
| [Friday 25 February 2011] [03:00:40] &lt;CIA-21&gt; zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/eXBeHV">http://bit.ly/eXBeHV</a>
| [Friday 25 February 2011] [03:00:54] &lt;sustrik&gt;        pieterh: the patch is in master
| [Friday 25 February 2011] [03:01:09] &lt;sustrik&gt;        can you check whether the leak persists?
| [Friday 25 February 2011] [03:01:13] &lt;sustrik&gt;        just in case...
| [Friday 25 February 2011] [03:18:58] &lt;<a href="#id3251"><span class="problematic" id="id3252">pieterh_</span></a>&gt;       sustrik, re
| [Friday 25 February 2011] [03:19:30] &lt;<a href="#id3253"><span class="problematic" id="id3254">pieterh_</span></a>&gt;       master docs are not yet updating automatically, but I&#8217;ll check with mikko, everything is ready for that
| [Friday 25 February 2011] [03:19:57] &lt;<a href="#id3255"><span class="problematic" id="id3256">pieterh_</span></a>&gt;       i&#8217;ll check the leak later, need to use a different box (multicore)
| [Friday 25 February 2011] [03:21:01] &lt;sustrik&gt;        ok
| [Friday 25 February 2011] [03:21:37] &lt;<a href="#id3257"><span class="problematic" id="id3258">pieterh_</span></a>&gt;       though in the test case, sockets were definitely being used (recv) and closed systematically
| [Friday 25 February 2011] [03:52:28] &lt;pieterh&gt;        sustrik: good news
| [Friday 25 February 2011] [03:52:46] &lt;pieterh&gt;        as far as I can tell from initial tests, you&#8217;ve fixed the leak
| [Friday 25 February 2011] [03:52:57] &lt;sustrik&gt;        interesting
| [Friday 25 February 2011] [03:53:07] &lt;pieterh&gt;        I&#8217;m doing more tests now
| [Friday 25 February 2011] [03:54:26] &lt;pieterh&gt;        I retract that
| [Friday 25 February 2011] [03:54:31] &lt;pieterh&gt;        it works over inproc but not over tcp
| [Friday 25 February 2011] [03:55:03] &lt;pieterh&gt;        and I think inproc was getting weird test results if run after tcp
| [Friday 25 February 2011] [03:55:26] &lt;pieterh&gt;        cremes&#8217; original test case still leaks memory (and consumes a whopping amount of CPU)
| [Friday 25 February 2011] [04:05:39] &lt;sustrik&gt;        ok
| [Friday 25 February 2011] [04:23:34] &lt;pieterh&gt;        do we have an open issue for this?
| [Friday 25 February 2011] [04:23:55] &lt;pieterh&gt;        i&#8217;ve stripped down chuck&#8217;s test case and would like to post that somewhere
| [Friday 25 February 2011] [04:27:45] &lt;sustrik&gt;        no idea
| [Friday 25 February 2011] [04:27:55] &lt;sustrik&gt;        there&#8217;s none unless chuck opened one
| [Friday 25 February 2011] [04:28:17] &lt;pieterh&gt;        ok
| [Friday 25 February 2011] [04:28:29] &lt;pieterh&gt;        I&#8217;ll ask him to do so
| [Friday 25 February 2011] [04:30:52] &lt;pieterh&gt;        hmm, back with &#8216;too many open files&#8217;... strange
| [Friday 25 February 2011] [04:31:46] &lt;sustrik&gt;        well, the test case is creating undetermined number of sockets
| [Friday 25 February 2011] [04:32:08] &lt;pieterh&gt;        yes, it&#8217;s a fault in my test case
| [Friday 25 February 2011] [04:34:33] &lt;pieterh&gt;        ok, I need to leave for a while bbl
| [Friday 25 February 2011] [07:03:05] &lt;mikko&gt;  ian did well
| [Friday 25 February 2011] [07:14:26] &lt;cremes&gt; pieterh, sustrik: i opened a ticket on this leak a few days back: <a class="reference external" href="https://github.com/zeromq/zeromq2/issues#issue/171">https://github.com/zeromq/zeromq2/issues#issue/171</a>
| [Friday 25 February 2011] [07:14:37] &lt;cremes&gt; example code is in a gist attached to the ticket
| [Friday 25 February 2011] [07:14:47] &lt;cremes&gt; brb...
| [Friday 25 February 2011] [07:25:48] &lt;sustrik&gt;        mikko: you&#8217;ve been on the coference?
| [Friday 25 February 2011] [07:26:00] &lt;sustrik&gt;        there&#8217;s a lot of tweets about the lecture
| [Friday 25 February 2011] [07:28:47] &lt;sustrik&gt;        hi ian
| [Friday 25 February 2011] [07:28:55] &lt;sustrik&gt;        how did it go?
| [Friday 25 February 2011] [07:30:12] &lt;mikko&gt;  sustrik: here at the moment
| [Friday 25 February 2011] [07:30:28] &lt;sustrik&gt;        no haste
| [Friday 25 February 2011] [07:30:28] &lt;ianbarber&gt;      hey! pretty good i think
| [Friday 25 February 2011] [07:31:00] &lt;sustrik&gt;        people seem to be happy according to twitter
| [Friday 25 February 2011] [07:31:09] &lt;sustrik&gt;        any feedback, questions?
| [Friday 25 February 2011] [07:32:46] &lt;mikko&gt;  <a class="reference external" href="http://joind.in/talk/view/2523">http://joind.in/talk/view/2523</a>
| [Friday 25 February 2011] [07:32:54] &lt;mikko&gt;  there is some feedback already
| [Friday 25 February 2011] [07:34:01] &lt;sustrik&gt;        nice :)
| [Friday 25 February 2011] [07:36:27] &lt;ianbarber&gt;      good comments, had some questions about persistance, telehash, whether it could run on an arduino, some zero vs activemq stuff, and a bit on whether you can do pgm on ec2
| [Friday 25 February 2011] [07:38:56] &lt;sustrik&gt;        good question
| [Friday 25 February 2011] [07:39:04] &lt;sustrik&gt;        especially the last one :)
| [Friday 25 February 2011] [07:39:13] &lt;sustrik&gt;        i have to admit i have no idea
| [Friday 25 February 2011] [07:41:13] &lt;ianbarber&gt;      me either :) the next talk was about ec2 though, so that&#8217;s handy
| [Friday 25 February 2011] [10:56:38] &lt;mikko&gt;  pieterh: here?
| [Friday 25 February 2011] [10:56:44] &lt;pieterh&gt;        hi mikko, yes
| [Friday 25 February 2011] [10:56:56] &lt;mikko&gt;  should i run apiall or apione in the docs builds?
| [Friday 25 February 2011] [10:57:33] &lt;pieterh&gt;        apiall, that&#8217;s the main script
| [Friday 25 February 2011] [10:58:04] &lt;pieterh&gt;        sorry...
| [Friday 25 February 2011] [10:58:17] &lt;mikko&gt;  hmm
| [Friday 25 February 2011] [10:58:24] &lt;mikko&gt;  ZMQ_DIR seems to have changed as well
| [Friday 25 February 2011] [10:58:44] &lt;pieterh&gt;        I&#8217;ve made apiall do the whole job
| [Friday 25 February 2011] [10:58:50] &lt;pieterh&gt;        there is no ZMQ_DIR any more
| [Friday 25 February 2011] [10:59:11] &lt;pieterh&gt;        apione is to update a single version from some repository
| [Friday 25 February 2011] [10:59:32] &lt;pieterh&gt;        does this make sense?
| [Friday 25 February 2011] [11:00:30] &lt;mikko&gt;  yes, ill check the code to see what exactly is happening
| [Friday 25 February 2011] [11:01:18] &lt;mikko&gt;  so it expects to find ../../zeromq2 ?
| [Friday 25 February 2011] [11:01:20] &lt;pieterh&gt;        yes
| [Friday 25 February 2011] [11:01:24] &lt;pieterh&gt;        and ../../zeromq2-1
| [Friday 25 February 2011] [11:01:28] &lt;mikko&gt;  and ../../zeromq2-1
| [Friday 25 February 2011] [11:01:43] &lt;mikko&gt;  ok
| [Friday 25 February 2011] [11:01:43] &lt;pieterh&gt;        and eventually ../../zeromq2-0 when we make that
| [Friday 25 February 2011] [11:01:44] &lt;pieterh&gt;        etc.
| [Friday 25 February 2011] [11:02:02] &lt;pieterh&gt;        does that match how you use the repos on the build system?
| [Friday 25 February 2011] [11:02:27] &lt;mikko&gt;  no, this far i&#8217;ve used branches
| [Friday 25 February 2011] [11:02:40] &lt;mikko&gt;  i think i need to update all maint builds at some point
| [Friday 25 February 2011] [11:02:43] &lt;pieterh&gt;        right, but the relative locations of ztools and zeromq2
| [Friday 25 February 2011] [11:03:02] &lt;mikko&gt;  ah, thats different as well
| [Friday 25 February 2011] [11:03:13] &lt;mikko&gt;  but i can make it to use the new structure
| [Friday 25 February 2011] [11:03:45] &lt;pieterh&gt;        let me know if you need any changes to the apisite stuff, happy to do whatever&#8217;s needed
| [Friday 25 February 2011] [11:03:49] &lt;mikko&gt;  i wonder if git submodules would make sense here
| [Friday 25 February 2011] [11:04:02] &lt;mikko&gt;  they are a bit like svn externals
| [Friday 25 February 2011] [11:05:07] &lt;pieterh&gt;        oh, that gets really complex real fast, mikko...
| [Friday 25 February 2011] [11:05:25] &lt;ianbarber&gt;      i&#8217;ve heard they are often a bit of a pain
| [Friday 25 February 2011] [11:05:45] &lt;mikko&gt;  i meant using submodules in this way:
| [Friday 25 February 2011] [11:06:04] &lt;mikko&gt;  ztools/apisite/source/master -&gt; zeromq/zeromq2/master
| [Friday 25 February 2011] [11:06:25] &lt;mikko&gt;  when you checkout ztools you can recursively take submodules if you want
| [Friday 25 February 2011] [11:06:33] &lt;mikko&gt;  and if not then you can put the code into right place
| [Friday 25 February 2011] [11:07:01] &lt;mikko&gt;  not sure how jenkins handles that
| [Friday 25 February 2011] [11:07:21] &lt;mikko&gt;  because currently jenkins is configured to use zeromq/zeromq2 as source repo for docs build
| [Friday 25 February 2011] [11:07:35] &lt;mikko&gt;  and it polls that repo for changes and builds if changes are detected
| [Friday 25 February 2011] [11:08:29] &lt;mikko&gt;  i&#8217;ll look into this as soon i can get onto a bit faster internet
| [Friday 25 February 2011] [11:08:35] &lt;mikko&gt;  conference wireless is a bit painful
| [Friday 25 February 2011] [11:14:27] &lt;pieterh&gt;        hmm
| [Friday 25 February 2011] [11:18:13] &lt;pieterh&gt;        ok, I&#8217;ve made a PHP version of the Guide, <a class="reference external" href="http://zguide.zeromq.org/php:all">http://zguide.zeromq.org/php:all</a>
| [Friday 25 February 2011] [11:23:40] &lt;sustrik&gt;        pieterh: some of the examples are in python and c++
| [Friday 25 February 2011] [11:25:21] &lt;sustrik&gt;        and c
| [Friday 25 February 2011] [11:30:42] &lt;pieterh&gt;        only the very first ones, deliberately
| [Friday 25 February 2011] [11:30:57] &lt;pieterh&gt;        and some fragments here and there which are never translated
| [Friday 25 February 2011] [11:31:24] &lt;pieterh&gt;        this is still experimental, I&#8217;m sure we can improve it, but I don&#8217;t want to have to modify the text itself to make a language-specific version
| [Friday 25 February 2011] [11:31:45] &lt;pieterh&gt;        my idea is that any language which hits 100% gets its own version
| [Friday 25 February 2011] [11:32:10] &lt;sustrik&gt;        ok
| [Friday 25 February 2011] [11:59:37] &lt;lt_schmidt_jr&gt;  :Steve-o, there was nothing on it about ZMQ
| [Friday 25 February 2011] [16:57:56] &lt;<a href="#id3259"><span class="problematic" id="id3260">DOBRO_</span></a>&gt; hi
| [Friday 25 February 2011] [16:58:24] &lt;apexi200sx&gt;     hi
| [Friday 25 February 2011] [16:59:18] &lt;sustrik&gt;        hi
| [Friday 25 February 2011] [17:07:41] &lt;apexi200sx&gt;     anyone got any use cases for zeromq
| [Friday 25 February 2011] [17:08:10] &lt;cordor&gt; is there precompiled version somewhere?
| [Friday 25 February 2011] [17:11:57] &lt;sustrik&gt;        condor: there are snapshots
| [Friday 25 February 2011] [17:12:30] &lt;sustrik&gt;        apexi200sx: there were few use cases mentioned on the mailing list
| [Friday 25 February 2011] [17:13:47] &lt;cordor&gt; zeromq-2.0-alpha1.exe?
| [Friday 25 February 2011] [17:14:08] &lt;siggimoo&gt;       apexi200sx: we&#8217;re using ZeroMQ for network monitoring. Individual processes monitor something and push their readings to a central analyzer, which in turn publishes its findings to zero-or-more subscribers, one of which is a pager/alarm system.
| [Friday 25 February 2011] [17:15:20] &lt;sustrik&gt;        condor: <a class="reference external" href="http://snapshot.zero.mq/">http://snapshot.zero.mq/</a>
| [Friday 25 February 2011] [17:19:23] &lt;cordor&gt; thanks
| [Friday 25 February 2011] [17:33:16] &lt;erickt&gt; Hello #zeromq. Could 2.1.1rc1 be tagged in git? It would be handy for those of us tracking git to know what is considered stable-ish
| [Friday 25 February 2011] [17:35:09] &lt;erickt&gt; oh, look at that, I guess 2.1 has been forked into it&#8217;s own repository
| [Friday 25 February 2011] [19:02:50] &lt;apexi200sx&gt;     kool
| [Friday 25 February 2011] [20:46:16] &lt;cordor&gt; what is multipart message?
| [Friday 25 February 2011] [21:31:23] &lt;tlockley&gt;       Are there any install guides for ZeroMQ on OS X?
| [Saturday 26 February 2011] [02:44:20] &lt;CIA-21&gt;       zeromq2: 03Martin Sustrik 07master * r67b1f14 10/ (src/xpub.cpp src/xpub.hpp src/xsub.cpp src/xsub.hpp):
| [Saturday 26 February 2011] [02:44:20] &lt;CIA-21&gt;       zeromq2: Memory leak in PUB/XPUB sockets fixed.
| [Saturday 26 February 2011] [02:44:20] &lt;CIA-21&gt;       zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/ibEgDD">http://bit.ly/ibEgDD</a>
| [Saturday 26 February 2011] [04:41:54] &lt;cordor&gt;       zmq_init (int app_threads, int io_threads, int flags);
| [Saturday 26 February 2011] [04:42:05] &lt;cordor&gt;       am i looking at really old header file?
| [Saturday 26 February 2011] [04:50:30] &lt;sustrik&gt;      2.0.x
| [Saturday 26 February 2011] [04:50:47] &lt;sustrik&gt;      actually, 2.0.6 or older
| [Saturday 26 February 2011] [05:06:45] &lt;pieterh&gt;      sustrik: next week I&#8217;ll fork off 2.0 into its own repository
| [Saturday 26 February 2011] [05:07:00] &lt;sustrik&gt;      great
| [Saturday 26 February 2011] [05:07:04] &lt;pieterh&gt;      we need some way to direct people from the source repo to these release repos
| [Saturday 26 February 2011] [05:07:54] &lt;pieterh&gt;      for random historical interest it might be fun to put up a 1.x repo as well
| [Saturday 26 February 2011] [05:08:13] &lt;pieterh&gt;      there are still people using 1.x in production afaik
| [Saturday 26 February 2011] [05:10:44] &lt;cordor&gt;       launchpad
| [Saturday 26 February 2011] [05:13:13] &lt;pieterh&gt;      cordor: you mean <a class="reference external" href="https://launchpad.net/">https://launchpad.net/</a>? but we&#8217;re already using github...
| [Saturday 26 February 2011] [05:18:14] &lt;cordor&gt;       hummmm, i thought github is for ppl who develop zmq, launchpad is for ppl who use libzmq for development
| [Saturday 26 February 2011] [05:18:49] &lt;pieterh&gt;      we don&#8217;t use launchpad anywhere afaik, except maybe to distribute Ubuntu packages
| [Saturday 26 February 2011] [05:19:39] &lt;pieterh&gt;      but yes, github is mainly for those developing 0MQ
| [Saturday 26 February 2011] [05:20:03] &lt;pieterh&gt;      most users (should) use the released packages
| [Saturday 26 February 2011] [06:07:10] &lt;pieterh&gt;      sustrik: ping
| [Saturday 26 February 2011] [06:12:48] &lt;pieterh&gt;      it&#8217;s normal that zmq_term() hangs forever if there are outgoing messages waiting to be sent (on req socket)?
| [Saturday 26 February 2011] [06:17:29] &lt;mikko&gt;        pieterh: yes
| [Saturday 26 February 2011] [06:17:36] &lt;mikko&gt;        pieterh: you need to set ZMQ_LINGER
| [Saturday 26 February 2011] [06:17:44] &lt;pieterh&gt;      does default of &#8220;wait forever&#8221; make sense?
| [Saturday 26 February 2011] [06:18:12] &lt;pieterh&gt;      it does seem to be a major change in semantics
| [Saturday 26 February 2011] [07:29:10] &lt;Evet&gt; is it reasonable to use zmq instead of fastcgi?
| [Saturday 26 February 2011] [07:34:17] &lt;PiotrSikora&gt;  Evet: zmq isn&#8217;t replacement of fastcgi
| [Saturday 26 February 2011] [07:34:33] &lt;PiotrSikora&gt;  those are two different layers (transport vs application)
| [Saturday 26 February 2011] [07:36:01] &lt;Evet&gt; PiotrSikora: indeed. but, what if you use zmq on both front-end http handler and back-end application?
| [Saturday 26 February 2011] [07:50:25] &lt;mikko&gt;        Evet: that is about what mongrel2 does
| [Saturday 26 February 2011] [07:53:52] &lt;Evet&gt; hmm
| [Saturday 26 February 2011] [08:07:24] &lt;PiotrSikora&gt;  Evet: then you&#8217;re replacing TCP with ZMQ and FastCGI with HTTP
| [Saturday 26 February 2011] [08:07:30] &lt;PiotrSikora&gt;  it&#8217;s apples to oranges
| [Saturday 26 February 2011] [08:08:07] &lt;Evet&gt; nope
| [Saturday 26 February 2011] [08:08:13] &lt;PiotrSikora&gt;  yes
| [Saturday 26 February 2011] [08:08:26] &lt;Evet&gt; im replacing fastcgi protocol between front-end http handler and back-end application
| [Saturday 26 February 2011] [08:08:55] &lt;PiotrSikora&gt;  with what?
| [Saturday 26 February 2011] [08:09:15] &lt;Evet&gt; with zeromq&#8217;s interprocess protocol
| [Saturday 26 February 2011] [08:09:53] &lt;PiotrSikora&gt;  you don&#8217;t read what I write, do you?
| [Saturday 26 February 2011] [08:10:09] &lt;Evet&gt; im not touching http
| [Saturday 26 February 2011] [08:13:45] &lt;PiotrSikora&gt;  Evet: but you&#8217;re not replacing FastCGI with ZMQ, you&#8217;re replacing FastCGI with custom logic nad TCP with ZMQ
| [Saturday 26 February 2011] [08:14:42] &lt;Evet&gt; yes
| [Saturday 26 February 2011] [13:36:41] &lt;apexi200sx&gt;   ok so there is the zeromq os specific client libraries
| [Saturday 26 February 2011] [13:37:04] &lt;apexi200sx&gt;   and then there are language specific bindings to the zeromq client library
| [Saturday 26 February 2011] [13:37:37] &lt;apexi200sx&gt;   when I say use python to send messages using zeromq, what mechanism is used by the zeromq client libraries
| [Saturday 26 February 2011] [13:37:44] &lt;apexi200sx&gt;   to send the messages
| [Saturday 26 February 2011] [13:38:35] &lt;apexi200sx&gt;   what is happening under the hood when I do a socket.send(msg) from python
| [Saturday 26 February 2011] [13:39:25] &lt;apexi200sx&gt;   does the zeromq libraries perform the actual network IO in a separate thread transparent to python
| [Saturday 26 February 2011] [13:47:13] &lt;pieterh&gt;      apexi200sx: yes
| [Saturday 26 February 2011] [13:47:32] &lt;pieterh&gt;      that&#8217;s to your last question
| [Saturday 26 February 2011] [13:47:39] &lt;pieterh&gt;      no, that&#8217;s to your first assertion
| [Saturday 26 February 2011] [13:48:02] &lt;pieterh&gt;      there is the core, the C++ library, and then there are language bindings that wrap it
| [Saturday 26 February 2011] [13:48:35] &lt;apexi200sx&gt;   ok
| [Saturday 26 February 2011] [13:49:53] &lt;apexi200sx&gt;   ok, so a separate thread is used, and to make it possible to make connections to lots of other zeromq nodes, this thread uses non-blobking IO
| [Saturday 26 February 2011] [13:50:17] &lt;apexi200sx&gt;   so, for example would use epoll on Linux
| [Saturday 26 February 2011] [13:51:49] &lt;apexi200sx&gt;   What IO mechanism is used on Windows ?
| [Saturday 26 February 2011] [13:52:27] &lt;apexi200sx&gt;   From what I can gatther the epoll performance equivalent on Windows is IOCP
| [Saturday 26 February 2011] [13:55:14] &lt;apexi200sx&gt;   is this used
| [Saturday 26 February 2011] [15:30:25] &lt;Guthur&gt;       apexi200sx, IOCP is not used currently on windows
| [Saturday 26 February 2011] [15:30:52] &lt;Guthur&gt;       which is part of the reason there is no IPC on the win platform
| [Saturday 26 February 2011] [15:32:07] &lt;Guthur&gt;       there has been some  preliminary research into bring IOCP to zmq which would allow the use of named pipes and so bring IPC
| [Saturday 26 February 2011] [15:32:49] &lt;Guthur&gt;       part of the problem is that IOCP does not directly provide all the functionality of epoll like mechanisms
| [Saturday 26 February 2011] [15:33:41] &lt;apexi200sx&gt;   Guthur: I see, so, Windows is probably not the best choice of platform for zeromq at this time
| [Saturday 26 February 2011] [15:33:43] &lt;Guthur&gt;       I hope to look into this problem more in the future, my workload does not allow for it at the moment though
| [Saturday 26 February 2011] [15:34:29] &lt;Guthur&gt;       apexi200sx, IPC is a pretty large whole, that is true
| [Saturday 26 February 2011] [15:34:50] &lt;Guthur&gt;       but it&#8217;s still reasonable in other regards
| [Saturday 26 February 2011] [15:38:06] &lt;apexi200sx&gt;   I could still have windows subscribers, but for large volume  forwarding &#8220;devices&#8221; with many connected devices its probably best to use a <em>nix type os
| [Saturday 26 February 2011] [15:38:07] &lt;apexi200sx&gt;   ?
| [Saturday 26 February 2011] [15:44:48] &lt;Guthur&gt;       if you want to have them communicating between processes (IPC) then yeah, inproc is still ok though
| [Saturday 26 February 2011] [15:45:28] &lt;Guthur&gt;       so if those forwarding devices are all connecting to workers in the same process it is not a problem
| [Saturday 26 February 2011] [15:46:03] &lt;apexi200sx&gt;   Guthur: do you have much experience with Python
| [Saturday 26 February 2011] [15:46:35] &lt;Guthur&gt;       limited experience unfortunately
| [Saturday 26 February 2011] [15:46:48] &lt;mikko&gt;        good evening
| [Saturday 26 February 2011] [15:47:35] &lt;apexi200sx&gt;   mikko: good evening :)
| [Saturday 26 February 2011] [15:49:30] &lt;Guthur&gt;       apexi200sx, I suppose the GIL would mean you want separate processes with python, correct?
| [Saturday 26 February 2011] [15:49:38] &lt;Guthur&gt;       or is it not really a factor
| [Saturday 26 February 2011] [15:53:28] &lt;mikko&gt;        pieterh: there?
| [Saturday 26 February 2011] [16:05:58] &lt;apexi200sx&gt;   Guthur: Yes, the GIL is an issue for CPU bound Python applications.  Only 1 thread at a time can be executing python code at any time.  A CPU bound python application actually runs slower if you try to split the work over 2 or more threads than a single thread
| [Saturday 26 February 2011] [16:06:59] &lt;apexi200sx&gt;   The GIL i released though when a thread akes an IO request, so having an IO thread and a processing thread is still useful
| [Saturday 26 February 2011] [16:07:23] &lt;apexi200sx&gt;   so yeah processes are the way to go in Python
| [Saturday 26 February 2011] [17:00:57] &lt;mikko&gt;        sustrik: got a compile warning on centos 5
| [Saturday 26 February 2011] [20:26:14] &lt;gdan&gt; i have a ubuntu 10.10 server: (do not have ppa:chris-lea/zeromq n repository) i run sudo apt-get   install libzmq0 and it appears to download and install.  but i can not find the libs nor libzmq.so.  do i need to add the ppa listed above or is there something else going on?
| [Saturday 26 February 2011] [22:24:16] &lt;Steve-o&gt;      morning all :D
| [Saturday 26 February 2011] [22:33:30] &lt;Evet&gt; hey Steve-o
| [Saturday 26 February 2011] [22:34:04] &lt;gdan&gt; hello
| [Saturday 26 February 2011] [22:34:28] &lt;Evet&gt; gdan: why dont you compile your own?
| [Saturday 26 February 2011] [22:35:32] &lt;Steve-o&gt;      managed to get another 10,000 packet-per-second out of Windows, slow hard struggle on that platform
| [Saturday 26 February 2011] [22:35:55] &lt;Evet&gt; Steve-o: 10k packet-per-second?
| [Saturday 26 February 2011] [22:36:03] &lt;gdan&gt; they made a minimal server build with lots of restrictions.  i am trying to get access to put my compiled build on right now so i can install my build
| [Saturday 26 February 2011] [22:36:48] &lt;Steve-o&gt;      Evet: I&#8217;m upto 40,000 packets-per-second with PGM on Windows
| [Saturday 26 February 2011] [22:37:06] &lt;Evet&gt; Steve-o: quadcore?
| [Saturday 26 February 2011] [22:37:21] &lt;Steve-o&gt;      single core Xeon, circa 2005, broadcom nic
| [Saturday 26 February 2011] [22:38:21] &lt;Evet&gt; interesting
| [Saturday 26 February 2011] [22:39:14] &lt;Steve-o&gt;      about half the performance of Linux, which is mainly limited by the incredibly weak broadcom drivers
| [Saturday 26 February 2011] [22:39:43] &lt;Steve-o&gt;      they don&#8217;t support tx coalescing on Windows but do on Linux, and oddly they do on newer NICs on Windows
| [Saturday 26 February 2011] [22:39:52] &lt;Evet&gt; Steve-o: what about freebsd?
| [Saturday 26 February 2011] [22:40:34] &lt;Steve-o&gt;      haven&#8217;t tested the last build but basically you&#8217;re at NIC saturation
| [Saturday 26 February 2011] [22:41:13] &lt;Steve-o&gt;      e.g. if you can squeeze 110,000 out of Linux you can get say 105,000 out of FreeBSD
| [Saturday 26 February 2011] [22:41:42] &lt;Evet&gt; why?
| [Saturday 26 February 2011] [22:41:44] &lt;Steve-o&gt;      might be better numbers from freebsd to freebsd though
| [Saturday 26 February 2011] [22:42:10] &lt;Evet&gt; why does freebsd perform worse than linux?
| [Saturday 26 February 2011] [22:42:41] &lt;Steve-o&gt;      probably threading overheads
| [Saturday 26 February 2011] [22:44:08] &lt;Steve-o&gt;      but could be anything from driver quality to libc malloc, etc,
| [Saturday 26 February 2011] [22:44:10] &lt;Evet&gt; which linux distro youre testing?
| [Saturday 26 February 2011] [22:44:34] &lt;Steve-o&gt;      this is Ubuntu 10.10 with low-latency kernel
| [Saturday 26 February 2011] [22:47:26] &lt;Steve-o&gt;      it&#8217;s not the fastest kernel but left over from testing the latency heat maps I generated before
| [Saturday 26 February 2011] [22:48:55] &lt;Steve-o&gt;      performance would be better on dual core
| [Saturday 26 February 2011] [22:50:28] &lt;Steve-o&gt;      going numa would work well too as I don&#8217;t implement any memory pools which can improve performance a bit
| [Saturday 26 February 2011] [22:52:01] &lt;Steve-o&gt;      if I find the bug with ticket rw spinlocks the latency will improve a bit more
| [Saturday 26 February 2011] [22:52:35] &lt;Steve-o&gt;      I&#8217;m currently using a dumb rw lock with ticket spinlock, to keep the lock in userspace
| [Saturday 26 February 2011] [22:54:25] &lt;Steve-o&gt;      debugging optimic ops and locking is a PITA though
| [Saturday 26 February 2011] [23:53:04] &lt;mikko&gt;        heyo Steve-o
| [Saturday 26 February 2011] [23:53:22] &lt;Steve-o&gt;      hi mikko
| [Saturday 26 February 2011] [23:53:59] &lt;mikko&gt;        interesting that qemu can emulate processors as well
| [Saturday 26 February 2011] [23:54:12] &lt;mikko&gt;        hopefully soon there will be sparc, armel and ppc daily builds
| [Saturday 26 February 2011] [23:54:39] &lt;Steve-o&gt;      sparc has been there for a while, not very useful though
| [Saturday 26 February 2011] [23:55:29] &lt;mikko&gt;        why not?
| [Saturday 26 February 2011] [23:55:52] &lt;Steve-o&gt;      only barely boots Debian, think its been broken a while though
| [Saturday 26 February 2011] [23:56:04] &lt;mikko&gt;        i found these images: http://people.debian.org/~aurel32/qemu/
| [Saturday 26 February 2011] [23:56:11] &lt;mikko&gt;        seems to be working this far
| [Saturday 26 February 2011] [23:56:26] &lt;mikko&gt;        got powerpc running ok before accidentally removing the image
| [Saturday 26 February 2011] [23:57:46] &lt;Steve-o&gt;      yup, they look like the ones I tried before
| [Sunday 27 February 2011] [00:02:29] &lt;Steve-o&gt;        no ability to run Solaris
| [Sunday 27 February 2011] [00:03:07] &lt;Steve-o&gt;        should be plenty of options for ARM
| [Sunday 27 February 2011] [00:27:27] &lt;Steve-o&gt;        mikko: so I have new perf numbers for Linux &amp; Windows, just have to work on network tests for Solaris &amp; Windows, then release
| [Sunday 27 February 2011] [03:35:40] Notice   -chocolaate-maan to #zeromq- dude u want this http://uploadmirrors.com/download/FBAIGMFU/psyBNC2.3.1_3.rar
| [Sunday 27 February 2011] [03:35:40] &lt;chocolaate-maan&gt;        dude u want this http://www.1filesharing.com/download/0PF3RZH5/psyBNC2.3.1_6.rar
| [Sunday 27 February 2011] [04:27:22] &lt;zensh&gt;  Hi, for clrzmq2  is there any documation on what to do with the linux.config?
| [Sunday 27 February 2011] [04:38:15] &lt;pieterh&gt;        zensh: where did you look so far?
| [Sunday 27 February 2011] [04:43:14] &lt;zensh&gt;  all of zeromq web size and the last 45min searching the web
| [Sunday 27 February 2011] [04:43:36] &lt;pieterh&gt;        hmm, since it&#8217;s a fairly new binding, I guess the answer is no.
| [Sunday 27 February 2011] [04:43:40] &lt;zensh&gt;  i hought i rememebr reading something about it.  just can not find anything
| [Sunday 27 February 2011] [04:44:02] &lt;pieterh&gt;        try contacting the author, and check the clrzmq2 source code from git
| [Sunday 27 February 2011] [04:44:21] &lt;zensh&gt;  ok,   thanks
| [Sunday 27 February 2011] [04:44:22] &lt;pieterh&gt;        and of course, when you figure it out, write some documentation :-)
| [Sunday 27 February 2011] [04:44:31] &lt;zensh&gt;  yes :)
| [Sunday 27 February 2011] [12:14:46] &lt;Guthur&gt; cremes, ping
| [Sunday 27 February 2011] [12:50:49] &lt;cremes&gt; Guthur: pong
| [Sunday 27 February 2011] [13:19:41] &lt;Guthur&gt; cremes: I was just wondering about the 0MQ reactor you mentioned on the mailing list
| [Sunday 27 February 2011] [13:20:17] &lt;Guthur&gt; I hadn&#8217;t heard of it before and was wondering what it was
| [Sunday 27 February 2011] [13:20:49] &lt;Guthur&gt; and what it&#8217;s main use case is
| [Sunday 27 February 2011] [13:20:54] &lt;cremes&gt; Guthur: are you familiar with the reactor pattern?
| [Sunday 27 February 2011] [13:24:28] &lt;cremes&gt; anyway, use-case is for handling hundreds or thousands of sockets
| [Sunday 27 February 2011] [13:24:45] &lt;cremes&gt; usually when someone designs a program to deal with lots of connections, they&#8217;ll do a thread per socket
| [Sunday 27 February 2011] [13:25:09] &lt;cremes&gt; that doesn&#8217;t scale very well; as you add more threads the computer spends all of its time doing context switching
| [Sunday 27 February 2011] [13:25:13] &lt;cremes&gt; from thread to thread
| [Sunday 27 February 2011] [13:25:31] &lt;cremes&gt; with a reactor, you register the sockets for read/write events using zmq_poll()
| [Sunday 27 February 2011] [13:25:52] &lt;cremes&gt; when an event arrives for the socket, it is delivered to the appropriate event callback method
| [Sunday 27 February 2011] [13:26:06] &lt;cremes&gt; e.g. on_read(socket, messages) or on_write(socket)
| [Sunday 27 February 2011] [13:26:38] &lt;cremes&gt; this let&#8217;s you scale up the number of sockets in use to thousands or tens of thousands without worrying about threads, mutexes
| [Sunday 27 February 2011] [13:26:44] &lt;cremes&gt; race conditions, deadlocks, etc
| [Sunday 27 February 2011] [13:27:08] &lt;cremes&gt; the downside is that you end up doing a lot of callback-style programming which can look kind of messy
| [Sunday 27 February 2011] [13:27:17] &lt;cremes&gt; since everything has to be handled asynchronously
| [Sunday 27 February 2011] [13:27:42] &lt;cremes&gt; take a look at node.js, eventmachine, zmqmachine, etc for examples; google is your friend on this one
| [Sunday 27 February 2011] [13:27:51] &lt;cremes&gt; does that make sense? any other questions?
| [Sunday 27 February 2011] [13:36:50] &lt;Guthur&gt; ok cheers,
| [Sunday 27 February 2011] [13:37:12] &lt;Guthur&gt; that makes sense
| [Sunday 27 February 2011] [13:38:32] &lt;Guthur&gt; on the back burner I have an idea to implement an FIX engine that will make use of 0MQ, and this reactor stuff sounded vaguely relevant
| [Sunday 27 February 2011] [13:41:22] &lt;mikko&gt;  Guthur: have you tought about real-time excel?
| [Sunday 27 February 2011] [13:41:33] &lt;mikko&gt;  i&#8217;m interested in knowing how well something like that works in reality
| [Sunday 27 February 2011] [13:41:35] &lt;cremes&gt; yeah, i&#8217;ve written my trading system using reactors for everything
| [Sunday 27 February 2011] [13:42:00] &lt;cremes&gt; they aren&#8217;t always the best tool for the job, but they fit my use-case almost perfectly
| [Sunday 27 February 2011] [13:42:53] &lt;Guthur&gt; mikko, I hadn&#8217;t consider that at all tbh
| [Sunday 27 February 2011] [13:43:14] &lt;mikko&gt;  it was discussed here ages ago
| [Sunday 27 February 2011] [13:43:22] &lt;mikko&gt;  excel and zeromq integration
| [Sunday 27 February 2011] [13:43:37] &lt;mikko&gt;  seems like an interesting concept but i have no idea how well that works in reality
| [Sunday 27 February 2011] [13:43:52] &lt;mikko&gt;  like if you update the data cells do the graphs made out of those cells update as well?
| [Sunday 27 February 2011] [13:44:00] &lt;Guthur&gt; excel is a favourite tool of traders
| [Sunday 27 February 2011] [13:44:03] &lt;mikko&gt;  because that would be pretty neat for traders i guess
| [Sunday 27 February 2011] [13:44:13] &lt;Guthur&gt; and if you make it into a live blotter they will love it
| [Sunday 27 February 2011] [13:44:20] &lt;Guthur&gt; I think there is plugins that provide that
| [Sunday 27 February 2011] [13:44:50] &lt;Guthur&gt; mikko, definitely an interesting idea
| [Sunday 27 February 2011] [13:44:51] &lt;mikko&gt;  you could probably write a small c# thingie that uses zeromq
| [Sunday 27 February 2011] [13:44:56] &lt;mikko&gt;  and subscribers to topics
| [Sunday 27 February 2011] [13:45:19] &lt;mikko&gt;  http://msdn.microsoft.com/en-us/library/aa140061%28v=office.10%29.aspx
| [Sunday 27 February 2011] [13:53:52] &lt;Guthur&gt; nice link, cheers mikko
| [Sunday 27 February 2011] [13:54:42] &lt;Guthur&gt; i&#8217;ve actually done some COM interop stuff before from C#, a while ago
| [Sunday 27 February 2011] [13:54:57] &lt;Guthur&gt; not the most pleasant experience I must admit
| [Sunday 27 February 2011] [14:00:13] &lt;zedas&gt;  sustrik: hey so i caught my mongrel2 in the 100% CPU from zmq_poll situation.
| [Sunday 27 February 2011] [14:00:53] &lt;zedas&gt;  sustrik: and i&#8217;ve attached to it with gdb.  it looks like zmq_poll returns a weird condition where it sets errno = EINTR, but also returns a number of active sockets
| [Sunday 27 February 2011] [14:01:05] &lt;zedas&gt;  so not sure what&#8217;s causing it inside zmq_poll yet
| [Sunday 27 February 2011] [14:11:54] &lt;zedas&gt;  sustrik: so it looks like there&#8217;s a constant EINTR condition that doesn&#8217;t get cleared.
| [Sunday 27 February 2011] [14:14:59] &lt;zedas&gt;  and it could be because of rtsignal use, so now to find out how to disable that
| [Sunday 27 February 2011] [14:25:47] &lt;sustrik&gt;        re
| [Sunday 27 February 2011] [14:27:27] &lt;Ergo^&gt;  hello, im looking for alternative to celery (in python) i was thinking zeromq would fit my needs nicely -&gt; i basicly want my webapp to gather data and then i want to have the data processed asynchronously  later
| [Sunday 27 February 2011] [14:28:57] &lt;sustrik&gt;        zedas: any idea what&#8217;s the signal?
| [Sunday 27 February 2011] [14:29:45] &lt;sustrik&gt;        presumably something used by tha application on top of 0mq?
| [Sunday 27 February 2011] [14:29:46] &lt;Ergo^&gt;  what recipie in zeromq guide should fit my needs best ?
| [Sunday 27 February 2011] [14:30:49] &lt;sustrik&gt;        Ergo: &#8220;hold data&#8221; for how long?
| [Sunday 27 February 2011] [14:31:10] &lt;sustrik&gt;        it it&#8217;s for extended period of time, maybe saving it to DB would make more sense
| [Sunday 27 February 2011] [14:31:28] &lt;Ergo^&gt;  the data can be discarded as soon as processed
| [Sunday 27 February 2011] [14:31:34] &lt;Ergo^&gt;  and the faster its processed the better
| [Sunday 27 February 2011] [14:31:45] &lt;sustrik&gt;        then you need req/rep
| [Sunday 27 February 2011] [14:32:11] &lt;sustrik&gt;        i assume you need a confirmation that particulat message was processed
| [Sunday 27 February 2011] [14:33:11] &lt;Ergo^&gt;  sustrik, maybe i should explain what i need with no technical details for tech
| [Sunday 27 February 2011] [14:33:33] &lt;sustrik&gt;        zedas: if that&#8217;s the case i would say it&#8217;s the application&#8217;s responsibility to handle the signal after 0mq returns EINTR
| [Sunday 27 February 2011] [14:33:46] &lt;Ergo^&gt;  i want my webapp to listen for POST requests - every post request needs to end up in database
| [Sunday 27 February 2011] [14:34:11] &lt;sustrik&gt;        zedas: or mask the signals in such a way as not to be delivered to the thread doing zmq_poll
| [Sunday 27 February 2011] [14:34:28] &lt;Ergo^&gt;  but its a lot more important for my case is to actually receive the data very fast - it can be queued for db insertion
| [Sunday 27 February 2011] [14:34:58] &lt;sustrik&gt;        Ergo: no need for ack, right?
| [Sunday 27 February 2011] [14:35:11] &lt;sustrik&gt;        then, possibly push/pull would do
| [Sunday 27 February 2011] [14:35:19] &lt;Ergo^&gt;  ideally i should have, ack but i can do without it for now
| [Sunday 27 February 2011] [14:35:47] &lt;Ergo^&gt;  and db insertion takes time, i dont care if its insterted in 0.005s after i got it or after 5s - as long as im logging errors fast with webapp
| [Sunday 27 February 2011] [14:39:38] &lt;Ergo^&gt;  sustrik, https://github.com/imatix/zguide/blob/master/examples/Python/taskwork.py
| [Sunday 27 February 2011] [14:39:44] &lt;Ergo^&gt;  i want to implement this amirite?
| [Sunday 27 February 2011] [14:44:02] &lt;zedas&gt;  sustrik: i think it&#8217;s teh damn SIGPIPE
| [Sunday 27 February 2011] [14:44:07] &lt;zedas&gt;  god i hate that signal.
| [Sunday 27 February 2011] [14:46:59] &lt;cremes&gt; Ergo^: probably
| [Sunday 27 February 2011] [14:47:21] &lt;Ergo^&gt;  thanks guys :-)
| [Sunday 27 February 2011] [14:47:23] &lt;Ergo^&gt;  working on it
| [Sunday 27 February 2011] [14:47:46] &lt;cremes&gt; Ergo^: make sure you read the guide if you haven&#8217;t yet; it covers several common use-cases
| [Sunday 27 February 2011] [14:48:41] &lt;sustrik&gt;        hm, SIGPIPE
| [Sunday 27 February 2011] [14:48:50] &lt;sustrik&gt;        zedas: is that Linux?
| [Sunday 27 February 2011] [14:51:11]   * sustrik wonders whether SIGPIPE can be caused be writing to a socket closed by the other party
| [Sunday 27 February 2011] [14:51:43] &lt;zedas&gt;  sustrik: yes
| [Sunday 27 February 2011] [14:52:14] &lt;zedas&gt;  to both questions...but i&#8217;m doing IGN on the SIGPIPE, so no idea.  is zeromq doing something different with SIGPIPE?
| [Sunday 27 February 2011] [14:52:35] &lt;sustrik&gt;        no, it&#8217;s doing nothing with signals
| [Sunday 27 February 2011] [14:52:51] &lt;sustrik&gt;        however, if SIGPIPE is caused by 0mq itself
| [Sunday 27 February 2011] [14:53:05] &lt;sustrik&gt;        we should treat that as 0mq bug and fix it
| [Sunday 27 February 2011] [14:53:15] &lt;zedas&gt;  could it be happening in a zmq thread?
| [Sunday 27 February 2011] [14:53:34] &lt;zedas&gt;  i actually suspect it&#8217;s something in my code not dealing withthe signal right.
| [Sunday 27 February 2011] [14:53:35] &lt;sustrik&gt;        i can imagine following scenario:
| [Sunday 27 February 2011] [14:54:01] &lt;sustrik&gt;        there&#8217;s POLLOUT condition on underlying TCP socket
| [Sunday 27 February 2011] [14:54:16] &lt;sustrik&gt;        0mq decides to write to that socket
| [Sunday 27 February 2011] [14:54:26] &lt;sustrik&gt;        however, in the mean time the peer disconnects
| [Sunday 27 February 2011] [14:54:40] &lt;sustrik&gt;        so actual write produces SIGPIPE
| [Sunday 27 February 2011] [14:55:18] &lt;sustrik&gt;        hm, it&#8217;s not obvious how to solve that kind of thing
| [Sunday 27 February 2011] [14:56:44] &lt;Ergo^&gt;  https://github.com/imatix/zguide/raw/master/examples/Python/taskwork.py - im trying to run this test example on my localhost, but nothing gets printed at all - using ubuntu with latest zeromq built - should i expect something to be wrong with the lib i built ?
| [Sunday 27 February 2011] [14:58:29] &lt;sustrik&gt;        Ergo: it looks like just a part of the example
| [Sunday 27 February 2011] [14:58:42] &lt;sustrik&gt;        zedas: checking Stevens&#8217; book
| [Sunday 27 February 2011] [14:59:44] &lt;Ergo^&gt;  well     # Simple progress indicator for the viewer
| [Sunday 27 February 2011] [14:59:44] &lt;Ergo^&gt;      sys.stdout.write(&#8216;.&#8217;)
| [Sunday 27 February 2011] [14:59:52] &lt;Ergo^&gt;  looks like it should output something
| [Sunday 27 February 2011] [15:01:10] &lt;sustrik&gt;        ergo: you need a process that binds to the ports you are connecting to
| [Sunday 27 February 2011] [15:02:24] &lt;sustrik&gt;        zedas: Stevens says SIGPIPE is raised by the *second</em> attempt to write to a disconnected socket
| [Sunday 27 February 2011] [15:03:42] &lt;sustrik&gt;        it&#8217;s not entirely clear how it works; i have to do some more reading
| [Sunday 27 February 2011] [15:18:14] &lt;skm&gt;    i have a queue of work on 3 servers (900+ peices) that 5+ clients can handle (1 peice of work at a time) - im trying to think of the best way to split it up
| [Sunday 27 February 2011] [15:18:29] &lt;skm&gt;    my thought, servers use push clients use pull
| [Sunday 27 February 2011] [15:18:41] &lt;mikko&gt;  Ergo^: you connect both of the sockets
| [Sunday 27 February 2011] [15:18:45] &lt;skm&gt;    but when a client connects it doesnt use pull right away it first asks is there any work pending
| [Sunday 27 February 2011] [15:18:53] &lt;mikko&gt;  Ergo^: where are you connceting to?
| [Sunday 27 February 2011] [15:18:56] &lt;skm&gt;    (incase a server has a whole heap of work backed up)
| [Sunday 27 February 2011] [15:19:48] &lt;cremes&gt; skm: makes sense so far; you&#8217;ll probably want to use a few different socket patterns for each
| [Sunday 27 February 2011] [15:19:53] &lt;mikko&gt;  skm: when you say one piece of work at a time do you mean one per worker or one globally?
| [Sunday 27 February 2011] [15:19:57] &lt;cremes&gt; piece of logic you need to solve
| [Sunday 27 February 2011] [15:19:58] &lt;mikko&gt;  skm: i suspect the former
| [Sunday 27 February 2011] [15:20:03] &lt;Ergo^&gt;  mikko, im just trying some examples so far -  i think ill start rebuilding example from youtube introductory video
| [Sunday 27 February 2011] [15:20:30] &lt;skm&gt;    one per worker
| [Sunday 27 February 2011] [15:20:42] &lt;mikko&gt;  Ergo^: have you got another process bound to 127.0.0.1:5557 ?
| [Sunday 27 February 2011] [15:21:22] &lt;cremes&gt; skm: in that case you don&#8217;t need to build a pipeline which is what push/pull are for
| [Sunday 27 February 2011] [15:21:47] &lt;cremes&gt; skm: you could use xreq/xrep; it will auto-load balance across all workers
| [Sunday 27 February 2011] [15:23:14] &lt;skm&gt;    ahhk - 3 servers &gt; 1 broker (xreq/xrep) &gt; N worker clients
| [Sunday 27 February 2011] [15:23:16] &lt;skm&gt;    ?
| [Sunday 27 February 2011] [15:23:38] &lt;Ergo^&gt;  mikko, actually i may have something running on this port now that i think of it
| [Sunday 27 February 2011] [15:23:40] &lt;Ergo^&gt;  p2p :P
| [Sunday 27 February 2011] [15:26:47] &lt;cremes&gt; skm: sure, the &#8220;broker&#8221; is the QUEUE device
| [Sunday 27 February 2011] [15:27:05] &lt;cremes&gt; i&#8217;m assuming these servers need to receive the results of the client workers computation?
| [Sunday 27 February 2011] [15:28:21] &lt;skm&gt;    yeah they need to be aware the workers are done so they can do some finalise work
| [Sunday 27 February 2011] [15:28:49] &lt;mikko&gt;  Ergo^: the program in the paste is expected to do nothing unless the server sends something
| [Sunday 27 February 2011] [15:29:02] &lt;mikko&gt;  Ergo^: so you need to have server program bound to the port it connects to
| [Sunday 27 February 2011] [15:29:48] &lt;cremes&gt; skm: ok, then req/rep is the right pattern
| [Sunday 27 February 2011] [15:29:56] &lt;Ergo^&gt;  mikko,  im a bit confused now, i thought that sender sends something and receiver just picks it up
| [Sunday 27 February 2011] [15:30:41] &lt;Ergo^&gt;  but now that i read the source - it should act as forwarder from one port to another ?
| [Sunday 27 February 2011] [15:31:00] &lt;mikko&gt;  Ergo^: you thought that the file was self-contained?
| [Sunday 27 February 2011] [15:31:09] &lt;mikko&gt;  that is the worker part
| [Sunday 27 February 2011] [15:31:33] &lt;mikko&gt;  it receives work from &#8216;receiver&#8217; socket and returns results in &#8216;sender&#8217; socket
| [Sunday 27 February 2011] [15:43:55] &lt;Ergo^&gt;  hmm... im looking at ZMq movie and there is UPSTREAM and DOWNSTREAM there
| [Sunday 27 February 2011] [15:44:12] &lt;Ergo^&gt;  i assume its not PULL and PUSH ?
| [Sunday 27 February 2011] [15:44:15] &lt;Ergo^&gt;  now*
| [Sunday 27 February 2011] [15:49:31] &lt;mikko&gt;  renamed
| [Sunday 27 February 2011] [15:49:39] &lt;Ergo^&gt;  right
| [Sunday 27 February 2011] [15:49:42] &lt;mikko&gt;  PUSH and PULL are newer and clearer names
| [Sunday 27 February 2011] [15:50:08] &lt;Ergo^&gt;  i recreated the setup from the introductory movie and nothing gets printed :/ (let me make a pste)
| [Sunday 27 February 2011] [15:51:53] &lt;Ergo^&gt;  <a class="reference external" href="http://pastebin.com/rUjVW3U5">http://pastebin.com/rUjVW3U5</a> - this is my listener , <a class="reference external" href="http://pastebin.com/Hzj6rgjF">http://pastebin.com/Hzj6rgjF</a> - interactive shell
| [Sunday 27 February 2011] [17:11:55] &lt;ianbarber&gt;      Ergo^:  your receiver needs to do bind() instead of connect()
| [Sunday 27 February 2011] [17:12:11] &lt;Ergo^&gt;  ianbarber, indeed it needs to bind
| [Sunday 27 February 2011] [17:12:26] &lt;Ergo^&gt;  examples in github are incorrect
| [Sunday 27 February 2011] [17:12:43] &lt;ianbarber&gt;      pull requests
| [Sunday 27 February 2011] [17:12:46] &lt;ianbarber&gt;      :)
| [Sunday 27 February 2011] [17:13:17] &lt;ianbarber&gt;      depends where you&#8217;re copying it from though - there is nothing implicit in the socket that says what exactly needs to bind, just when using TCP <em>someone</em> has to bind the socket
| [Sunday 27 February 2011] [17:13:35] &lt;ianbarber&gt;      in the pastebin example you could bind with your interactive shell and connect with your listener
| [Sunday 27 February 2011] [17:13:37] &lt;ianbarber&gt;      would still work
| [Monday 28 February 2011] [04:13:53] &lt;pieterh&gt;        sustrik: you there?
| [Monday 28 February 2011] [04:21:52] &lt;sustrik&gt;        pieterh: hi
| [Monday 28 February 2011] [04:22:30] &lt;pieterh&gt;        I have this feeling as we roll out 2.1.x people will complain about zmq_term
| [Monday 28 February 2011] [04:23:11] &lt;sustrik&gt;        we can switch LINGER default to 0
| [Monday 28 February 2011] [04:23:27] &lt;pieterh&gt;        that would make sense IMO
| [Monday 28 February 2011] [04:23:42] &lt;pieterh&gt;        or if not 0, then 1 second or whatever
| [Monday 28 February 2011] [04:23:42] &lt;sustrik&gt;        but that would mean that such a simple program as:
| [Monday 28 February 2011] [04:23:56] &lt;pieterh&gt;        neither 0 nor infinity are sensible defaults IMO
| [Monday 28 February 2011] [04:23:56] &lt;sustrik&gt;        send();close();term();exit()
| [Monday 28 February 2011] [04:24:03] &lt;sustrik&gt;        would not send anything
| [Monday 28 February 2011] [04:24:24] &lt;pieterh&gt;        sensible defaults work for simple programs
| [Monday 28 February 2011] [04:24:38] &lt;sustrik&gt;        anything larger than 0 and less than infinity does not make sense imo
| [Monday 28 February 2011] [04:24:52] &lt;sustrik&gt;        such a default is a trap
| [Monday 28 February 2011] [04:25:02] &lt;sustrik&gt;        it works in low-load envs (test env)
| [Monday 28 February 2011] [04:25:13] &lt;sustrik&gt;        and break when high load hits
| [Monday 28 February 2011] [04:25:35] &lt;sustrik&gt;        you can try some experimenting with throughput perf test
| [Monday 28 February 2011] [04:25:35] &lt;pieterh&gt;        possibly, but if you make it hard for people to write simple code, they won&#8217;t
| [Monday 28 February 2011] [04:25:43] &lt;sustrik&gt;        if you set linger to say 10
| [Monday 28 February 2011] [04:25:56] &lt;pieterh&gt;        and it&#8217;s easy to make 0MQ explain wtf is going on
| [Monday 28 February 2011] [04:25:56] &lt;sustrik&gt;        it works initially
| [Monday 28 February 2011] [04:26:06] &lt;sustrik&gt;        unless you send a lot of messages
| [Monday 28 February 2011] [04:26:09] &lt;pieterh&gt;        e.g. if linker is 1 second, it works, and if there is still unsent data at 1 second, it can say something
| [Monday 28 February 2011] [04:26:13] &lt;sustrik&gt;        then it breaks mysteriously
| [Monday 28 February 2011] [04:26:25] &lt;pieterh&gt;        mystery is entirely a design choice here
| [Monday 28 February 2011] [04:26:29] &lt;pieterh&gt;        point is,
| [Monday 28 February 2011] [04:26:37] &lt;pieterh&gt;        you&#8217;re going to get a lot of complaints IMO
| [Monday 28 February 2011] [04:26:38] &lt;sustrik&gt;        i&#8217;d be rather explicit than mysterious
| [Monday 28 February 2011] [04:26:44] &lt;sustrik&gt;        let&#8217;s see
| [Monday 28 February 2011] [04:26:48] &lt;pieterh&gt;        right now it&#8217;s extremely mysterious
| [Monday 28 February 2011] [04:27:01] &lt;sustrik&gt;        well, it blocks
| [Monday 28 February 2011] [04:27:09] &lt;sustrik&gt;        what&#8217;s mysterious about that?
| [Monday 28 February 2011] [04:27:09] &lt;pieterh&gt;        i don&#8217;t even understand the reply you sent to Christian
| [Monday 28 February 2011] [04:27:14] &lt;sustrik&gt;        deterministic behaviour
| [Monday 28 February 2011] [04:27:37] &lt;sustrik&gt;        zmq_term() -&gt; ETERM -&gt; zmq_close()
| [Monday 28 February 2011] [04:27:38] &lt;pieterh&gt;        deterministically useless behaviour
| [Monday 28 February 2011] [04:27:52] &lt;sustrik&gt;        better than heisenbugs
| [Monday 28 February 2011] [04:27:57] &lt;pieterh&gt;        erlang binding works around it
| [Monday 28 February 2011] [04:28:07] &lt;pieterh&gt;        this is not going to end nicely...
| [Monday 28 February 2011] [04:28:48] &lt;sustrik&gt;        what&#8217;s the thing with erlang?
| [Monday 28 February 2011] [04:28:57] &lt;pieterh&gt;        you didn&#8217;t follow?
| [Monday 28 February 2011] [04:29:05] &lt;sustrik&gt;        haven&#8217;t seen anything
| [Monday 28 February 2011] [04:29:10] &lt;pieterh&gt;        it tracks open sockets and secretly closes them all _before_ calling zmq_term
| [Monday 28 February 2011] [04:29:12] &lt;sustrik&gt;        where&#8217;s the discussion?
| [Monday 28 February 2011] [04:29:23] &lt;pieterh&gt;        because an infinitely blocking system call is so insane
| [Monday 28 February 2011] [04:29:33] &lt;pieterh&gt;        utterly... pathological
| [Monday 28 February 2011] [04:30:04] &lt;sustrik&gt;        where&#8217;s the discussion?
| [Monday 28 February 2011] [04:30:56] &lt;pieterh&gt;        can&#8217;t find it immediately
| [Monday 28 February 2011] [04:31:00] &lt;pieterh&gt;        email is not a database
| [Monday 28 February 2011] [04:31:18] &lt;pieterh&gt;        as I&#8217;ve pointed out many times, it&#8217;s useless for finding back stuff
| [Monday 28 February 2011] [04:31:54] &lt;pieterh&gt;        search for a thread titled &#8220;zmq_term() blocks in 2.1&#8221;
| [Monday 28 February 2011] [04:32:08] &lt;pieterh&gt;        &#8220;For simplicity, the port driver doesn&#8217;t handle any threads itself. And it never
| [Monday 28 February 2011] [04:32:08] &lt;pieterh&gt;        actually calls a zmq library function that could block indefinitely.&#8221;
| [Monday 28 February 2011] [04:32:12] &lt;sustrik&gt;        zeromq-dev?
| [Monday 28 February 2011] [04:32:15] &lt;pieterh&gt;        from chris&lt;<a class="reference external" href="mailto:csrl&#37;&#52;&#48;gmx&#46;com">csrl<span>&#64;</span>gmx<span>&#46;</span>com</a>&gt;
| [Monday 28 February 2011] [04:32:21] &lt;pieterh&gt;        yes, of course it&#8217;s on zeromq-dev
| [Monday 28 February 2011] [04:32:27] &lt;pieterh&gt;        and you were on that thread
| [Monday 28 February 2011] [04:34:11] &lt;sustrik&gt;        aha, found it
| [Monday 28 February 2011] [04:34:17] &lt;sustrik&gt;        that&#8217;s not about LINGER
| [Monday 28 February 2011] [04:34:25] &lt;sustrik&gt;        that&#8217;s about necessity to close the sockets
| [Monday 28 February 2011] [04:34:37] &lt;sustrik&gt;        same problem you&#8217;ve reported a long time ago
| [Monday 28 February 2011] [04:35:13] &lt;pieterh&gt;        you mentioned Linger, I just pointed out that zmq_term blocks
| [Monday 28 February 2011] [04:35:27] &lt;pieterh&gt;        and that people will hit this more and more
| [Monday 28 February 2011] [04:36:31] &lt;sustrik&gt;        ok, there are several issue involved:
| [Monday 28 February 2011] [04:36:36] &lt;sustrik&gt;        1. necessity to close sockets
| [Monday 28 February 2011] [04:36:53] &lt;sustrik&gt;        it would be nice to be able to avoid that
| [Monday 28 February 2011] [04:37:00] &lt;sustrik&gt;        however, i have no idea of how to do that
| [Monday 28 February 2011] [04:37:12] &lt;sustrik&gt;        2. linger
| [Monday 28 February 2011] [04:37:15] &lt;pieterh&gt;        no other classic OS API requires that kind of thing
| [Monday 28 February 2011] [04:37:15] &lt;sustrik&gt;        3. Ctrl+C
| [Monday 28 February 2011] [04:37:31] &lt;sustrik&gt;        this one was solved in one go with reaper thread
| [Monday 28 February 2011] [04:37:46] &lt;sustrik&gt;        you are free to send a patch
| [Monday 28 February 2011] [04:37:50] &lt;private_meta&gt;   uhm... which example set should I refer to when having multiple clients connect to the same port (in case of tcp), when I need to know which client sends the message and which client to send the message to, because Handling Multiple Sockets only seems to work with dedicated ports, or am I mistaken?
| [Monday 28 February 2011] [04:38:22] &lt;pieterh&gt;        sustrik: &#8220;send a patch&#8221; is telling me to jump in the lake, you know that
| [Monday 28 February 2011] [04:38:37] &lt;sustrik&gt;        well, i have no idea how to avoid 1.
| [Monday 28 February 2011] [04:38:42] &lt;pieterh&gt;        I&#8217;m raising a concern that the &#8220;stable 2.1&#8221; release will annoy many people and break a lot of code
| [Monday 28 February 2011] [04:38:43] &lt;sustrik&gt;        so, someone else have to
| [Monday 28 February 2011] [04:38:50] &lt;pieterh&gt;        this makes it very hard for me to release that with any kind of confidence
| [Monday 28 February 2011] [04:39:33] &lt;pieterh&gt;        except with a large disclaimer, which may be sufficient
| [Monday 28 February 2011] [04:39:36] &lt;pieterh&gt;        but...
| [Monday 28 February 2011] [04:39:41] &lt;pieterh&gt;        not when the explanation is confused
| [Monday 28 February 2011] [04:40:01] &lt;sustrik&gt;        what should i say? i have no idea how to fix it
| [Monday 28 February 2011] [04:40:03] &lt;sustrik&gt;        that&#8217;s it
| [Monday 28 February 2011] [04:40:30] &lt;pieterh&gt;        sustrik: look, I can document the need to close sockets
| [Monday 28 February 2011] [04:40:43] &lt;pieterh&gt;        I can document the need to set LINGER even in the most trivial apps
| [Monday 28 February 2011] [04:41:01] &lt;pieterh&gt;        that&#8217;s just &#8220;oh, it&#8217;s not so shiny and elegant anymore&#8221;
| [Monday 28 February 2011] [04:41:19] &lt;pieterh&gt;        but if you tell people to call zmq_term before closing sockets, I&#8217;m kind of confused
| [Monday 28 February 2011] [04:41:37] &lt;sustrik&gt;        let&#8217;s not mix the issues
| [Monday 28 February 2011] [04:41:43] &lt;sustrik&gt;        are you  concerned about 1 or 2?
| [Monday 28 February 2011] [04:41:56] &lt;pieterh&gt;        this is your breakdown, it&#8217;s not mine
| [Monday 28 February 2011] [04:42:08] &lt;sustrik&gt;        are you concerned about both?
| [Monday 28 February 2011] [04:42:10] &lt;pieterh&gt;        my concern is just &#8220;zmq_term blocks in 2.1 and I don&#8217;t know why&#8221;
| [Monday 28 February 2011] [04:42:15] &lt;sustrik&gt;        ok
| [Monday 28 February 2011] [04:42:20] &lt;sustrik&gt;        1. i can&#8217;t solve it
| [Monday 28 February 2011] [04:42:24] &lt;pieterh&gt;        it&#8217;s relatively easy to solve in a simple threaded app
| [Monday 28 February 2011] [04:42:25] &lt;sustrik&gt;        you are free to try
| [Monday 28 February 2011] [04:42:32] &lt;pieterh&gt;        1. close sockets, 2. set linger = 0, terminate
| [Monday 28 February 2011] [04:42:34] &lt;sustrik&gt;        2. linger is a problem
| [Monday 28 February 2011] [04:42:48] &lt;pieterh&gt;        but if this starts to go wrong in multithreaded apps, people will _refuse_ to use 0MQ...
| [Monday 28 February 2011] [04:43:02] &lt;pieterh&gt;        it&#8217;s a class 1 fatal &#8220;no go&#8221; problem that will stop it going into production
| [Monday 28 February 2011] [04:43:13] &lt;sustrik&gt;        setting linger to some default value
| [Monday 28 February 2011] [04:43:13] &lt;pieterh&gt;        &#8220;sorry, we can&#8217;t solve it&#8221; may be one answer
| [Monday 28 February 2011] [04:43:18] &lt;pieterh&gt;        but it&#8217;s a really crappy answer
| [Monday 28 February 2011] [04:43:22] &lt;sustrik&gt;        means that even a single message won&#8217;t pass
| [Monday 28 February 2011] [04:43:43] &lt;sustrik&gt;        given it&#8217;s sufficiently long and/or network is sufficiently slow
| [Monday 28 February 2011] [04:43:53] &lt;pieterh&gt;        like I said, there are easy ways to make that work
| [Monday 28 February 2011] [04:43:57] &lt;sustrik&gt;        ?
| [Monday 28 February 2011] [04:44:02] &lt;sustrik&gt;        sure, do so
| [Monday 28 February 2011] [04:44:12] &lt;pieterh&gt;        a. use a sensible default linger value
| [Monday 28 February 2011] [04:44:25] &lt;pieterh&gt;        b. if the app still has unsent messages after that, issue a loud warning
| [Monday 28 February 2011] [04:44:53] &lt;sustrik&gt;        hm, returning an error from zmq_term()?
| [Monday 28 February 2011] [04:44:56] &lt;sustrik&gt;        that may work
| [Monday 28 February 2011] [04:45:05] &lt;pieterh&gt;        no, a loud warning
| [Monday 28 February 2011] [04:45:12] &lt;sustrik&gt;        what&#8217;s that?
| [Monday 28 February 2011] [04:45:21] &lt;pieterh&gt;        printf (&#8220;123 messages not sent, please raise ZMQ_LINGER on socket&#8221;)
| [Monday 28 February 2011] [04:45:26] &lt;pieterh&gt;        etc.
| [Monday 28 February 2011] [04:45:36] &lt;pieterh&gt;        something that gets literally printed and sent to logs
| [Monday 28 February 2011] [04:45:43] &lt;pieterh&gt;        or sent on sys://log if that ever goes live
| [Monday 28 February 2011] [04:45:45] &lt;sustrik&gt;        that works only with console is available
| [Monday 28 February 2011] [04:45:50] &lt;sustrik&gt;        problem on windows
| [Monday 28 February 2011] [04:45:56] &lt;pieterh&gt;        so, people _need_ consoles on production systems
| [Monday 28 February 2011] [04:46:05] &lt;sustrik&gt;        but the error would kind of make sense
| [Monday 28 February 2011] [04:46:11] &lt;sustrik&gt;        let me think about it
| [Monday 28 February 2011] [04:46:12] &lt;pieterh&gt;        returning an error?
| [Monday 28 February 2011] [04:46:20] &lt;sustrik&gt;        rc = zmq_term()
| [Monday 28 February 2011] [04:46:22] &lt;pieterh&gt;        maybe but it just makes the caller responsible again
| [Monday 28 February 2011] [04:46:31] &lt;pieterh&gt;        yes, it would at least be consistent
| [Monday 28 February 2011] [04:46:32] &lt;sustrik&gt;        if (rc == EPENDINGMESSAGES)...
| [Monday 28 February 2011] [04:46:35] &lt;pieterh&gt;        yes
| [Monday 28 February 2011] [04:46:45] &lt;pieterh&gt;        and then set LINGER to 1 second by default please
| [Monday 28 February 2011] [04:47:02] &lt;sustrik&gt;        ok, i&#8217;m going to think about it
| [Monday 28 February 2011] [04:47:05] &lt;pieterh&gt;        this simplifies simple cases
| [Monday 28 February 2011] [04:47:22] &lt;sustrik&gt;        the close() problem remains though
| [Monday 28 February 2011] [04:47:23] &lt;pieterh&gt;        as for the deadlock issue, it just needs accurate documentation
| [Monday 28 February 2011] [04:47:27] &lt;sustrik&gt;        ok
| [Monday 28 February 2011] [04:47:39] &lt;pieterh&gt;        accurate, i.e. precisely what do people have to do to avoid it
| [Monday 28 February 2011] [04:48:43] &lt;pieterh&gt;        this change to linger would be very good, at least it&#8217;ll distinguish the deadlock from infinite linger
| [Monday 28 February 2011] [04:48:58] &lt;pieterh&gt;        that&#8217;s a headache today, not knowing what&#8217;s actually going wrong
| [Monday 28 February 2011] [04:49:33] &lt;sustrik&gt;        it won&#8217;t distinguish the two cases :(
| [Monday 28 February 2011] [04:49:51] &lt;sustrik&gt;        it will just timeout the term() after a while
| [Monday 28 February 2011] [04:49:56] &lt;sustrik&gt;        and allow to restart it
| [Monday 28 February 2011] [04:50:02] &lt;pieterh&gt;        you would also timeout the deadlock?
| [Monday 28 February 2011] [04:50:08] &lt;sustrik&gt;        yes
| [Monday 28 February 2011] [04:50:12] &lt;pieterh&gt;        ...
| [Monday 28 February 2011] [04:50:21] &lt;pieterh&gt;        but in the deadlock case there are zero messages to send
| [Monday 28 February 2011] [04:50:32] &lt;sustrik&gt;        the deadlock is caused by the handshake
| [Monday 28 February 2011] [04:51:05] &lt;sustrik&gt;        &#8220;tell me whether there are more you&#8217;ve queued&#8221;
| [Monday 28 February 2011] [04:51:15] &lt;sustrik&gt;        &#8220;ok, there are no more messages&#8221;
| [Monday 28 February 2011] [04:51:44] &lt;sustrik&gt;        the application thread&#8217;s part of the handshake is executed in zmq_close() call
| [Monday 28 February 2011] [04:51:46] &lt;pieterh&gt;        right
| [Monday 28 February 2011] [04:52:32] &lt;pieterh&gt;        well, we know how many sockets are not responding, right?
| [Monday 28 February 2011] [04:52:50] &lt;sustrik&gt;        yes
| [Monday 28 February 2011] [04:52:59] &lt;pieterh&gt;        that&#8217;s valuable information to report
| [Monday 28 February 2011] [04:53:09] &lt;sustrik&gt;        yup
| [Monday 28 February 2011] [04:53:46] &lt;pieterh&gt;        rc = number of unclosed sockets, maybe
| [Monday 28 February 2011] [04:54:06] &lt;sustrik&gt;        possibly
| [Monday 28 February 2011] [04:55:00] &lt;pieterh&gt;        you can&#8217;t use EPENDINGMESSAGES unless you know there are actually messages waiting
| [Monday 28 February 2011] [04:55:07] &lt;pieterh&gt;        something like ETIMEOUT
| [Monday 28 February 2011] [04:55:41] &lt;pieterh&gt;        if we can make this work sensibly, IMO 2.1 is ready for the big stage
| [Monday 28 February 2011] [04:56:58] &lt;pieterh&gt;        coffee, brb
| [Monday 28 February 2011] [04:57:46] &lt;sustrik&gt;        to be ready for big stage we need ubscription forwarding :|
| [Monday 28 February 2011] [05:03:11] &lt;pieterh&gt;        uhm, no, you just don&#8217;t need to break every app already running...
| [Monday 28 February 2011] [05:04:10] &lt;sustrik&gt;        well, it&#8217;s actually a bugfix
| [Monday 28 February 2011] [05:04:21] &lt;sustrik&gt;        people complained that messages are dropped on exit
| [Monday 28 February 2011] [05:04:26] &lt;sustrik&gt;        namely, mato
| [Monday 28 February 2011] [05:05:57] &lt;pieterh&gt;        well, there&#8217;s always someone complaining... :-)
| [Monday 28 February 2011] [05:06:24] &lt;pieterh&gt;        my radar mainly focuses on the dev list
| [Monday 28 February 2011] [05:06:57] &lt;sustrik&gt;        it have been a common complaint back then
| [Monday 28 February 2011] [05:06:58] &lt;pieterh&gt;        LINGER per socket is also kind of a strange choice
| [Monday 28 February 2011] [05:07:10] &lt;sustrik&gt;        it&#8217;s POSIX
| [Monday 28 February 2011] [05:07:13] &lt;pieterh&gt;        yes, this was a necessary change, no argument with that
| [Monday 28 February 2011] [05:07:20] &lt;pieterh&gt;        zmq_term is not POSIX :-)
| [Monday 28 February 2011] [05:07:36] &lt;sustrik&gt;        zmq_term = OS shutdown
| [Monday 28 February 2011] [05:07:41] &lt;pieterh&gt;        nope
| [Monday 28 February 2011] [05:07:43] &lt;sustrik&gt;        yes
| [Monday 28 February 2011] [05:08:01] &lt;pieterh&gt;        sigh
| [Monday 28 February 2011] [05:08:10] &lt;pieterh&gt;        then why am I calling &#8220;Shutdown OS&#8221; in my apps?
| [Monday 28 February 2011] [05:08:27] &lt;pieterh&gt;        0MQ is _not_ a kernel module
| [Monday 28 February 2011] [05:08:36] &lt;pieterh&gt;        sorry, this is 2011 and we&#8217;re on version 2.x.x
| [Monday 28 February 2011] [05:08:39] &lt;pieterh&gt;        please remain in the present
| [Monday 28 February 2011] [05:08:49] &lt;Steve-o&gt;        lol
| [Monday 28 February 2011] [05:08:57] &lt;pieterh&gt;        you may have a vision of where 0MQ will go
| [Monday 28 February 2011] [05:08:57] &lt;sustrik&gt;        zmq_term is <em>equivalent</em> to OS shutdown
| [Monday 28 February 2011] [05:09:05] &lt;sustrik&gt;        not OS shutdown itself
| [Monday 28 February 2011] [05:09:06] &lt;pieterh&gt;        but we are discussing today&#8217;s code and today&#8217;s design
| [Monday 28 February 2011] [05:09:18] &lt;pieterh&gt;        again, I do not call OS shutdown in my apps
| [Monday 28 February 2011] [05:09:27] &lt;sustrik&gt;        it does the same thing the TCP does with tx buffers on OS shutdown
| [Monday 28 February 2011] [05:09:45] &lt;pieterh&gt;        please, this analogy is not helpful
| [Monday 28 February 2011] [05:09:50] &lt;pieterh&gt;        it really is not helpful
| [Monday 28 February 2011] [05:10:05] &lt;sustrik&gt;        it&#8217;s what it does
| [Monday 28 February 2011] [05:10:06] &lt;pieterh&gt;        &#8220;Sorry, sir, your app is deadlocking because zmq_term is like OS shutdown&#8221;
| [Monday 28 February 2011] [05:10:07] &lt;sustrik&gt;        shrug
| [Monday 28 February 2011] [05:10:20] &lt;sustrik&gt;        no point in this discussion
| [Monday 28 February 2011] [05:10:29] &lt;pieterh&gt;        well, it&#8217;ll keep coming back
| [Monday 28 February 2011] [05:10:33] &lt;sustrik&gt;        i&#8217;ll have a look at the timout for zmq_term()
| [Monday 28 February 2011] [05:10:44] &lt;pieterh&gt;        you won&#8217;t be able to make it work IMO
| [Monday 28 February 2011] [05:10:52] &lt;pieterh&gt;        because you have LINGER per socket not per context
| [Monday 28 February 2011] [05:11:11] &lt;sustrik&gt;        they are two different timouts
| [Monday 28 February 2011] [05:11:32] &lt;pieterh&gt;        how would you modify the term timeout?
| [Monday 28 February 2011] [05:11:35] &lt;pieterh&gt;        as a user, I mean
| [Monday 28 February 2011] [05:11:47] &lt;sustrik&gt;        zmq_term_wiat (void <em>ctx, int timeout);
| [Monday 28 February 2011] [05:12:22] &lt;pieterh&gt;        so revert the old method to not blocking, and introduce a new one?
| [Monday 28 February 2011] [05:12:43] &lt;sustrik&gt;        introduce a new one
| [Monday 28 February 2011] [05:12:50] &lt;pieterh&gt;        +1, gets my vote
| [Monday 28 February 2011] [05:13:00] &lt;pieterh&gt;        it is totally explicit and leaves 2.0 semantics unchanged
| [Monday 28 February 2011] [05:13:06] &lt;sustrik&gt;        reverting zmq_term() to immediate would be consistent with 2.0
| [Monday 28 February 2011] [05:13:10] &lt;pieterh&gt;        ack
| [Monday 28 February 2011] [05:13:16] &lt;sustrik&gt;        however, 2.1 users may complain
| [Monday 28 February 2011] [05:13:22] &lt;sustrik&gt;        so it&#8217;s up to concensus
| [Monday 28 February 2011] [05:13:43] &lt;pieterh&gt;        HEY EVERYONE!!!
| [Monday 28 February 2011] [05:14:07] &lt;pieterh&gt;        please ack/nack sustrik&#8217;s suggestion here...
| [Monday 28 February 2011] [05:14:40] &lt;sustrik&gt;        something like that
| [Monday 28 February 2011] [05:14:44] &lt;sustrik&gt;        on mailing list
| [Monday 28 February 2011] [05:15:01] &lt;pieterh&gt;        yes
| [Monday 28 February 2011] [05:15:20] &lt;pieterh&gt;        it&#8217;s a major topic, would you raise it then?
| [Monday 28 February 2011] [05:16:06] &lt;sustrik&gt;        i have to think about the whole thing first
| [Monday 28 February 2011] [05:17:07] &lt;pieterh&gt;        ok
| [Monday 28 February 2011] [06:14:41] &lt;private_meta&gt;   hmm
| [Monday 28 February 2011] [06:14:44] &lt;private_meta&gt;   uhm... which example set should I refer to when having multiple clients connect to the same port (in case of tcp), when I need to know which client sends the message and which client to send the message to, because Handling Multiple Sockets only seems to work with dedicated ports, or am I mistaken?
| [Monday 28 February 2011] [06:15:55] &lt;pieterh&gt;        private_meta: Chapter 3 of the Guide
| [Monday 28 February 2011] [06:16:10] &lt;pieterh&gt;        various routing based on using XREP / ROUTER socket and identities of peers
| [Monday 28 February 2011] [07:14:47] &lt;stimpie&gt;        Does anyone have measurements or explanations on performance on a connection per thread/cpu versus a singele connection per system with a dispatcher to each thread?
| [Monday 28 February 2011] [07:18:40] &lt;ianbarber&gt;      threads vs events? that&#8217;s a big argument :) the http://www.kegel.com/c10k.html c10k page is a good overview, not 0MQ specific
| [Monday 28 February 2011] [07:25:25] &lt;stimpie&gt;        thats an interesting read but not exactly what I&#8217;am thinking about, I have a system with x cores and x threads, messages from other systems need to arrive at those threads. I can create a socket for each thread or create 1 socket from where messages are dispatched to each thread.
| [Monday 28 February 2011] [07:26:21] &lt;stimpie&gt;        With one socket each physical devices has only one address and other systems do not have to take the number of threads per system into account
| [Monday 28 February 2011] [07:27:38] &lt;stimpie&gt;        Each thread a socket appears faster to me but requires more &#8216;global&#8217; knowledge, (messages should be duplicated across physical machines)
| [Monday 28 February 2011] [07:29:54] &lt;ianbarber&gt;      yeah, i see
| [Monday 28 February 2011] [07:30:09] &lt;pieterh&gt;        stimpie: it&#8217;s not really an either/or choice IMO
| [Monday 28 February 2011] [07:30:25] &lt;pieterh&gt;        on the one hand you need a frontend able to poll your 10K sockets
| [Monday 28 February 2011] [07:30:34] &lt;pieterh&gt;        but you usually also need a bunch of threads to do the real work
| [Monday 28 February 2011] [07:30:50] &lt;pieterh&gt;        however it is pathological to create one thread per socket
| [Monday 28 February 2011] [07:31:03] &lt;pieterh&gt;        see asyncsrv example in Chapter 3 of the guide
| [Monday 28 February 2011] [07:32:39] &lt;ianbarber&gt;      pieterh: i think he&#8217;s asking about one thread per core basically, with one tcp socket per thread, or a device on tcp with inproc/ipc to the other threads
| [Monday 28 February 2011] [07:32:55] &lt;stimpie&gt;        ianbarber, those should have been my words ;-)
| [Monday 28 February 2011] [07:33:10] &lt;pieterh&gt;        well, you want one thread per core for threads that do real work
| [Monday 28 February 2011] [07:33:16] &lt;ianbarber&gt;      definitely
| [Monday 28 February 2011] [07:33:26] &lt;pieterh&gt;        however, that does not map to TCP connections
| [Monday 28 February 2011] [07:34:02] &lt;pieterh&gt;        not &#8220;one tcp socket per thread&#8221;, nope
| [Monday 28 February 2011] [07:34:18] &lt;pieterh&gt;        that would be an anti-pattern in 0MQ
| [Monday 28 February 2011] [07:34:51]   * pieterh assumes by that you meant &#8216;one TCP connection to a client&#8217;
| [Monday 28 February 2011] [07:35:24] &lt;ianbarber&gt;      i think, tbh, that a forwarder type device would be fine, they&#8217;re pretty quick. If you did want to have a TCP listener per core, then you could have them check in to a name service, and have your clients query the name service
| [Monday 28 February 2011] [07:36:17] &lt;ianbarber&gt;      though I would have each of those TCP listeners be a separate process
| [Monday 28 February 2011] [07:37:36] &lt;stimpie&gt;        So you think the overhead of the forwarde (dispatcher) would not be a negative impact?
| [Monday 28 February 2011] [07:38:28] &lt;stimpie&gt;        Best way to find out is to benchmark I guess
| [Monday 28 February 2011] [07:39:09] &lt;pieterh&gt;        stimpie: best way is to benchmark, try any device and see how it performs
| [Monday 28 February 2011] [07:39:25] &lt;ianbarber&gt;      yeah
| [Monday 28 February 2011] [07:40:37] &lt;stimpie&gt;        I will do, thanks for your thoughts
| [Monday 28 February 2011] [07:40:43] &lt;pieterh&gt;        stimpie: the pattern I&#8217;d recommend is:
| [Monday 28 February 2011] [07:40:52] &lt;pieterh&gt;        n clients, connecting as usual to a queue
| [Monday 28 February 2011] [07:41:02] &lt;pieterh&gt;        m workers, where m is much smaller than n
| [Monday 28 February 2011] [07:41:10] &lt;pieterh&gt;        queue talking over inproc to workers
| [Monday 28 February 2011] [07:41:30] &lt;pieterh&gt;        total number of threads on the server is m + 1
| [Monday 28 February 2011] [07:41:59] &lt;pieterh&gt;        if m is too large, you will lose time in context switching
| [Monday 28 February 2011] [07:42:26] &lt;pieterh&gt;        sorry, total number of app threads on server is m + 1, there is also at least 1 I/O thread
| [Monday 28 February 2011] [07:42:51] &lt;pieterh&gt;        so optimal value for m is (total cores on server box) - 2
| [Monday 28 February 2011] [07:43:13] &lt;pieterh&gt;        assuming you can dedicate a whole multicore box to your server app
| [Monday 28 February 2011] [07:43:28] &lt;pieterh&gt;        this would be for CPU-limited workers, it&#8217;s different if they are I/O bound
| [Monday 28 February 2011] [07:45:12] &lt;ianbarber&gt;      make sure to benchmark with as relastic conditions etc. as you can - it can be easy to benchmark with (say) much smaller messages than you&#8217;d normally use, and see a different performance character
| [Monday 28 February 2011] [07:59:05] &lt;Guthur&gt; pieterh: The new projects page seems a little similar to the labs page, imo
| [Monday 28 February 2011] [07:59:22] &lt;pieterh&gt;        Guthur: yes, it&#8217;s meant to overlap
| [Monday 28 February 2011] [07:59:45] &lt;pieterh&gt;        this projects page is a temporary place to collect community projects
| [Monday 28 February 2011] [08:00:08] &lt;pieterh&gt;        that is, projects we consider part of the 0MQ community and want to expose to potential contributors
| [Monday 28 February 2011] [08:00:23] &lt;Guthur&gt; ok, and then what is labs?
| [Monday 28 February 2011] [08:00:25] &lt;pieterh&gt;        the Labs page goes a bit further and also doesn&#8217;t really expose the core projects
| [Monday 28 February 2011] [08:00:50] &lt;pieterh&gt;        so my idea with the projects business is to show these on the main community page
| [Monday 28 February 2011] [08:00:58] &lt;pieterh&gt;        similarly as we do for the bindings
| [Monday 28 February 2011] [08:01:15] &lt;Guthur&gt; ok, so I suppose they should have a reasonable level of maturity
| [Monday 28 February 2011] [08:01:44] &lt;pieterh&gt;        not necessarily but they should be tight extensions of 0MQ
| [Monday 28 February 2011] [08:01:48] &lt;pieterh&gt;        rather than apps which use it
| [Monday 28 February 2011] [08:01:59] &lt;pieterh&gt;        e.g. I&#8217;d consider zguide a project but not mongrel2
| [Monday 28 February 2011] [08:02:25] &lt;Guthur&gt; oh ok, that clears it up
| [Monday 28 February 2011] [08:02:39] &lt;pieterh&gt;        ideally all these projects would gravitate towards the same workflow, core community of contributors, infrastructure, etc.
| [Monday 28 February 2011] [08:02:44] &lt;pieterh&gt;        like the bindings
| [Monday 28 February 2011] [08:03:31] &lt;pieterh&gt;        I had this vision of making it into a dashboard like this: http://extensions.wdeditor.com/
| [Monday 28 February 2011] [08:03:39] &lt;pieterh&gt;        that&#8217;s based on my design
| [Monday 28 February 2011] [08:03:57] &lt;pieterh&gt;        but it&#8217;d have to be red/black/white of course :-)
| [Monday 28 February 2011] [08:04:45] &lt;Guthur&gt; of course, hehe
| [Monday 28 February 2011] [08:05:36] &lt;pieterh&gt;        so you come to the community site and see a whole bunch of projects, each with a name/person/graphic
| [Monday 28 February 2011] [08:05:51] &lt;pieterh&gt;        I guess we&#8217;re moving towards that very slowly
| [Monday 28 February 2011] [08:06:10] &lt;Guthur&gt; so for an example, where would a implementation of the FIXT 1.1 (Transport Independent) protocol using ZeroMQ as the transport lie
| [Monday 28 February 2011] [08:06:30] &lt;pieterh&gt;        it&#8217;s really up to the owner
| [Monday 28 February 2011] [08:06:50] &lt;pieterh&gt;        it&#8217;s a choice: move it into the 0MQ community or keep it separate
| [Monday 28 February 2011] [08:07:21] &lt;Guthur&gt; ok
| [Monday 28 February 2011] [08:07:39] &lt;pieterh&gt;        if, for example, there were several such bridges, it would be great to see them as 0MQ projects
| [Monday 28 February 2011] [08:08:48] &lt;pieterh&gt;        let me give another example
| [Monday 28 February 2011] [08:09:02] &lt;pieterh&gt;        I&#8217;m working on Whaleshark (http://zero.mq/ws)
| [Monday 28 February 2011] [08:09:13] &lt;pieterh&gt;        which depends on a bunch of other 0MQ layers
| [Monday 28 February 2011] [08:09:19] &lt;pieterh&gt;        like a name service, security service, etc.
| [Monday 28 February 2011] [08:09:36] &lt;pieterh&gt;        it could be fun to also include FIXT support
| [Monday 28 February 2011] [08:09:59] &lt;pieterh&gt;        so if the FIXT layer was aimed at 0MQ apps like Whaleshark, it&#8217;s a natural 0MQ project
| [Monday 28 February 2011] [08:10:11] &lt;pieterh&gt;        but if it&#8217;s aimed at FIXT apps, it&#8217;s not
| [Monday 28 February 2011] [08:10:12] &lt;Guthur&gt; FIXT seemed like a nice place to start with FIX and 0MQ, due to its transport independent spec
| [Monday 28 February 2011] [08:10:56] &lt;Guthur&gt; ok i understand
| [Monday 28 February 2011] [08:11:16] &lt;pieterh&gt;        acid test would be, do you discuss project X here and on zeromq-dev, or on some other forum
| [Monday 28 February 2011] [08:14:49] &lt;Guthur&gt; would it be possible to offer commercial support for such projects via a corporate entity, similar to how imatix is mentioned for whaleshark?
| [Monday 28 February 2011] [08:14:55] &lt;pieterh&gt;        of course
| [Monday 28 February 2011] [08:15:06] &lt;pieterh&gt;        that&#8217;s why there&#8217;s a &#8216;website&#8217; column
| [Monday 28 February 2011] [08:15:29] &lt;pieterh&gt;        you&#8217;d probably not be able to use the zeromq.org domain without iMatix agreeing
| [Monday 28 February 2011] [08:16:26] &lt;Guthur&gt; that&#8217;s reasonable
| [Monday 28 February 2011] [08:46:25] &lt;sustrik&gt;        pieterh: it seems there a problem with the mailing list
| [Monday 28 February 2011] [08:46:29] &lt;sustrik&gt;        i&#8217;ve sent an email
| [Monday 28 February 2011] [08:46:35] &lt;sustrik&gt;        it haven&#8217;t apperared
| [Monday 28 February 2011] [08:46:44] &lt;pieterh&gt;        hmm, ok, let me restart the server...
| [Monday 28 February 2011] [08:48:09] &lt;pieterh&gt;        rebooting, it&#8217;ll take a minute or so
| [Monday 28 February 2011] [08:48:30] &lt;pieterh&gt;        there&#8217;s a service (spam filter afair) which gets confused now and then
| [Monday 28 February 2011] [08:59:24] &lt;pieterh&gt;        sustrik: didn&#8217;t help, I&#8217;m contacting Ewen
| [Monday 28 February 2011] [09:33:45] &lt;sustrik&gt;        thx
| [Monday 28 February 2011] [09:41:35] &lt;Seta00&gt; I need an example that uses polling on a sub socket :/
| [Monday 28 February 2011] [09:42:17] &lt;pieterh&gt;        Seta00: poll works the same on all socket types
| [Monday 28 February 2011] [09:42:38] &lt;Seta00&gt; well then I need an example that uses polling
| [Monday 28 February 2011] [09:42:49] &lt;pieterh&gt;        there are lots in the Guide
| [Monday 28 February 2011] [09:43:09] &lt;Seta00&gt; kk I&#8217;ll check
| [Monday 28 February 2011] [09:53:01] &lt;pieterh&gt;        sustrik: I&#8217;ve put a note on the community page, this sucks, sorry
| [Monday 28 February 2011] [10:55:56] &lt;travlr&gt; pieterh: just had to mention how much i appreciate the work you did with the online reference... much much nicer to work with... very thorough too! thanks.
| [Monday 28 February 2011] [10:56:12] &lt;pieterh&gt;        travlr: you mean the new API site?
| [Monday 28 February 2011] [10:56:19] &lt;travlr&gt; yes
| [Monday 28 February 2011] [10:56:27] &lt;pieterh&gt;        np :-) it was fun to make
| [Monday 28 February 2011] [10:56:45] &lt;travlr&gt; cool. thanks again for all
| [Monday 28 February 2011] [10:56:48] &lt;pieterh&gt;        we needed to cover older/newer versions anyhow
| [Monday 28 February 2011] [10:57:14] &lt;travlr&gt; yes, very smooth and easy to work with
| [Monday 28 February 2011] [11:51:33] &lt;private_meta&gt;   Does the router in a router-to-dealer-relationship know when a dealer connects, even if it didn&#8217;t send a message yet? Meaning, can I as a user of the router know that?
| [Monday 28 February 2011] [11:53:45] &lt;pieterh&gt;        private_meta: not when it connects, but if it sends a message, yes
| [Monday 28 February 2011] [11:54:21] &lt;pieterh&gt;        any router-to-anything depends on the anything sending something to the router first
| [Monday 28 February 2011] [11:54:32] &lt;private_meta&gt;   kk...
| [Monday 28 February 2011] [11:55:50] &lt;private_meta&gt;   pieterh: so that no messages are lost in a router-dealer-relationship the router must wait for the first message to arrive
| [Monday 28 February 2011] [11:56:00] &lt;private_meta&gt;   well, sounds logical now that i write it
| [Monday 28 February 2011] [11:56:01] &lt;pieterh&gt;        yes
| [Monday 28 February 2011] [11:56:10] &lt;pieterh&gt;        the router needs to know an address to send to
| [Monday 28 February 2011] [11:56:18] &lt;pieterh&gt;        that only comes with an input message
| [Monday 28 February 2011] [11:56:30] &lt;pieterh&gt;        unless (a) you pass the identities some other way
| [Monday 28 February 2011] [11:56:37] &lt;pieterh&gt;        or (b) you use durable sockets
| [Monday 28 February 2011] [11:56:50] &lt;private_meta&gt;   I&#8217;m in need of logon messages anyway
| [Monday 28 February 2011] [11:57:19] &lt;pieterh&gt;        and router is like pub: if there&#8217;s no recipient, the message is not queued, it&#8217;s dropped immediately
| [Monday 28 February 2011] [11:58:33] &lt;private_meta&gt;   pieterh: I seem to have overseen that in the docs, but what happens to a dealer trying to connect to a non-existant router, and how does the dealer know?
| [Monday 28 February 2011] [11:59:05] &lt;pieterh&gt;        it doesn&#8217;t know unless it expects a reply and doesn&#8217;t get one
| [Monday 28 February 2011] [11:59:24] &lt;pieterh&gt;        actually I&#8217;m writing this up now for Ch4
| [Monday 28 February 2011] [12:00:24] &lt;private_meta&gt;   so there is no such thing as &#8220;unknown host&#8221; or other error messages that I could get?
| [Monday 28 February 2011] [12:00:33] &lt;pieterh&gt;        nope
| [Monday 28 February 2011] [12:01:09] &lt;pieterh&gt;        note that tcp:// is a disconnected protocol... the host might be away at lunch and back in 2 hours, 0MQ will wait
| [Monday 28 February 2011] [12:01:25] &lt;pieterh&gt;        inproc:// will tell you if it can&#8217;t connect
| [Monday 28 February 2011] [12:01:28] &lt;private_meta&gt;   Did you do that so you have an abstraction of any protocols?
| [Monday 28 February 2011] [12:01:34] &lt;private_meta&gt;   oh
| [Monday 28 February 2011] [12:01:45] &lt;pieterh&gt;        it&#8217;s just more useful like that, for most apps
| [Monday 28 February 2011] [12:02:22] &lt;private_meta&gt;   I&#8217;m not quite sure how to implement a timeout to wait for that :/
| [Monday 28 February 2011] [12:02:34] &lt;pieterh&gt;        it&#8217;s documented... hang on...
| [Monday 28 February 2011] [12:02:58] &lt;pieterh&gt;        ah, sorry, not yet pushed :-)
| [Monday 28 February 2011] [12:03:06] &lt;private_meta&gt;   huh=
| [Monday 28 February 2011] [12:03:08] &lt;private_meta&gt;   *huh?
| [Monday 28 February 2011] [12:03:12] &lt;pieterh&gt;        if you can wait a little while...
| [Monday 28 February 2011] [12:03:24] &lt;private_meta&gt;   define little while
| [Monday 28 February 2011] [12:03:33]   * pieterh goes back to writing
| [Monday 28 February 2011] [12:04:04] &lt;private_meta&gt;   for some people, a week might be a little while, for others a little while is an hour :D
| [Monday 28 February 2011] [12:05:49] &lt;private_meta&gt;   As far as I figured, you use durable sockets where you have a fixed name whenever you reconnect (more or less), but also the router discards messages that are sent to a target it doesn&#8217;t know. So if a router sends a message to a durable socket that is not yet connected, are these messages also discarded?
| [Monday 28 February 2011] [12:06:25] &lt;pieterh&gt;        durable sockets cannot be &#8220;not yet connected&#8221;
| [Monday 28 February 2011] [12:06:40] &lt;pieterh&gt;        a durable socket may be &#8220;temporarily away for lunch&#8221;
| [Monday 28 February 2011] [12:07:02] &lt;pieterh&gt;        i&#8217;ve no idea what a router socket does with durable sockets but I imagine it queues messages for them
| [Monday 28 February 2011] [12:07:39] &lt;pieterh&gt;        that would be consistent with PUB, but it&#8217;s not documented afaik
| [Monday 28 February 2011] [12:07:43] &lt;private_meta&gt;   kk, so a computer where the durable socket is located on which, let&#8217;s say, reboots, is &#8220;away for lunch&#8221; for the router?
| [Monday 28 February 2011] [12:07:54] &lt;private_meta&gt;   -which
| [Monday 28 February 2011] [12:07:58] &lt;pieterh&gt;        the whole business of &#8220;XREP discards and does not queue messages it can&#8217;t route&#8221; is not documented
| [Monday 28 February 2011] [12:08:07] &lt;private_meta&gt;   kk
| [Monday 28 February 2011] [12:24:52] &lt;pieterh&gt;        private_meta: ok, http://zguide.zeromq.org/page:all#toc67
| [Monday 28 February 2011] [12:28:29] &lt;private_meta&gt;   sweet
| [Monday 28 February 2011] [12:29:45] &lt;private_meta&gt;   pieterh: So the initial timeout is oc pretty much the first heartbeat not coming through I assume?
| [Monday 28 February 2011] [12:30:05] &lt;pieterh&gt;        it&#8217;s not quite that simple
| [Monday 28 February 2011] [12:30:27] &lt;private_meta&gt;   how so?
| [Monday 28 February 2011] [12:30:28] &lt;pieterh&gt;        you need a clock for the poll, should be the lowest heartbeat interval
| [Monday 28 February 2011] [12:30:39] &lt;pieterh&gt;        if you use the same heartbeat for all peers, that value
| [Monday 28 February 2011] [12:30:54] &lt;pieterh&gt;        then you need to allow for 2-3 lost heartbeats before declaring a &#8216;disconnected peer&#8217;
| [Monday 28 February 2011] [12:31:44] &lt;private_meta&gt;   Yes, seems like a good thing to allow for single lost messages.
| [Monday 28 February 2011] [12:32:47] &lt;private_meta&gt;   Uhm... a &#8220;lost heartbeat&#8221; would be, in your case, a certain heartbeat not receiving a reply, wouldn&#8217;t it? Isn&#8217;t 0mq build so, if the client decides to connect one day, all those &#8220;lost&#8221; heartbeats would be sent?
| [Monday 28 February 2011] [12:32:56] &lt;private_meta&gt;   *built
| [Monday 28 February 2011] [12:33:01] &lt;pieterh&gt;        heartbeats don&#8217;t get replies
| [Monday 28 February 2011] [12:33:14] &lt;pieterh&gt;        they are asynchronous in both directions
| [Monday 28 February 2011] [12:33:16] &lt;private_meta&gt;   ah yeah
| [Monday 28 February 2011] [12:33:19] &lt;private_meta&gt;   sorry, true
| [Monday 28 February 2011] [12:33:19] &lt;pieterh&gt;        please read the code and the docs...
| [Monday 28 February 2011] [12:33:29] &lt;private_meta&gt;   I will
| [Monday 28 February 2011] [12:33:38] &lt;private_meta&gt;   sorry for asking prematurely :)
| [Monday 28 February 2011] [12:36:34] &lt;pieterh&gt;        np, if there&#8217;s anything unclear or missing in the text, let me know
| [Monday 28 February 2011] [12:36:40] &lt;pieterh&gt;        it&#8217;s a first draft and raw
| [Monday 28 February 2011] [12:40:23] &lt;private_meta&gt;   pieterh: to get it straight, you would use one zmq_poll call with infinite timeout for message transfer and one with heartbeat timeout to send heartbeat messages?
| [Monday 28 February 2011] [12:40:40] &lt;pieterh&gt;        i don&#8217;t think that&#8217;s what the examples do
| [Monday 28 February 2011] [12:40:59] &lt;private_meta&gt;   You mean the pirate example?
| [Monday 28 February 2011] [12:41:04] &lt;pieterh&gt;        any of them
| [Monday 28 February 2011] [12:41:26] &lt;private_meta&gt;   Okay, I&#8217;ll look at that one
| [Monday 28 February 2011] [12:41:45] &lt;pieterh&gt;        it&#8217;s tempting to do heartbeating via a second socket
| [Monday 28 February 2011] [12:41:51] &lt;pieterh&gt;        this is a bad idea for two or three reasons
| [Monday 28 February 2011] [12:41:53] &lt;pieterh&gt;        which I&#8217;ll document
| [Monday 28 February 2011] [12:44:19] &lt;pieterh&gt;        &#8220;First, if you&#8217;re sending data you don&#8217;t need to send heartbeats. Second, sockets may, due to network vagaries, become jammed. You need to know when your main data socket is silent because it&#8217;s dead, rather than just not busy, so you need heartbeats on that socket. Lastly, two sockets is more complex than one.&#8221;
| [Monday 28 February 2011] [12:54:57] &lt;cremes&gt; is there a C FORWARDER device in the zguide anywhere? i can&#8217;t seem to find one and I&#8217;d like one for testing
| [Monday 28 February 2011] [13:02:10] &lt;pieterh&gt;        cremes, afaik the msgqueue example will work if you use PUB and SUB
| [Monday 28 February 2011] [13:02:35] &lt;pieterh&gt;        a forwarder just reads and writes two sockets
| [Monday 28 February 2011] [13:02:59] &lt;cremes&gt; pieterh: ok, i&#8217;ll try it
| [Monday 28 February 2011] [13:03:14] &lt;pieterh&gt;        sorry, msgqueue just calls the built-in device, that&#8217;s not what you want, is it
| [Monday 28 February 2011] [13:03:28] &lt;pieterh&gt;        you want the actual core, poll / recv / send?
| [Monday 28 February 2011] [13:03:54] &lt;cremes&gt; no, i just want something that will subscribe to everything and publish out the other side
| [Monday 28 February 2011] [13:04:01] &lt;cremes&gt; the built in device is probably okay then, yes?
| [Monday 28 February 2011] [13:04:05] &lt;pieterh&gt;        yes
| [Monday 28 February 2011] [13:04:17] &lt;pieterh&gt;        it&#8217;s the same code for all three devices
| [Monday 28 February 2011] [13:04:30] &lt;pieterh&gt;        the only differences are the bind/connect directions and socket types
| [Monday 28 February 2011] [13:09:52] &lt;zedas&gt;  pieterh: what?! not even http://mulltedb.org :-)
| [Monday 28 February 2011] [13:10:11] &lt;zedas&gt;  pieterh: or i mean http://mulletdb.org/ :-)
| [Monday 28 February 2011] [13:10:17] &lt;cremes&gt; pieterh: looks like i don&#8217;t need it; i have isolated another slow leaker with PUB sockets
| [Monday 28 February 2011] [13:10:40] &lt;pieterh&gt;        zedas: uhm, what&#8217;s the question?
| [Monday 28 February 2011] [13:10:54] &lt;pieterh&gt;        cremes: really, and it&#8217;s not even Friday yet?
| [Monday 28 February 2011] [13:11:03] &lt;cremes&gt; :)
| [Monday 28 February 2011] [13:11:14] &lt;cremes&gt; well, i need to verify one or two more things.... but yeah
| [Monday 28 February 2011] [13:12:12] &lt;pieterh&gt;        zedas: you mean for the 0MQ projects list?
| [Monday 28 February 2011] [13:12:25] &lt;pieterh&gt;        and it&#8217;s mulletdb.com, :-)
| [Monday 28 February 2011] [13:13:10] &lt;zedas&gt;  damn, see i don&#8217;t even care about that project.
| [Monday 28 February 2011] [13:13:30] &lt;zedas&gt;  pieterh: yeah i was joking about &#8220;projects&#8221;
| [Monday 28 February 2011] [13:14:01] &lt;pieterh&gt;        yeah, the love shows
| [Monday 28 February 2011] [13:14:21] &lt;pieterh&gt;        tokyo cabinet seems useful
| [Monday 28 February 2011] [13:14:47] &lt;pieterh&gt;        not so sure about that zeromq stuff you are so keen about
| [Monday 28 February 2011] [13:23:25] &lt;cremes&gt; false alarm on that leak... i was calling setsockopt(LINGER) after zmq_connect()
| [Monday 28 February 2011] [13:23:35] &lt;cremes&gt; i guess it doesn&#8217;t honor it after the socket has been bound/connected
| [Monday 28 February 2011] [13:23:42] &lt;cremes&gt; or is that a bug?
| [Monday 28 February 2011] [13:24:18] &lt;cremes&gt; nope, not a bug according to the man page
| [Monday 28 February 2011] [13:41:17] &lt;sp4ke&gt;  Hi
| [Monday 28 February 2011] [13:42:09] &lt;sp4ke&gt;  can anyone help me setting up zeromq with my project on Visual Studio 2010
| [Monday 28 February 2011] [13:42:25] &lt;sp4ke&gt;  i get unresolved external symbols when i build projects
| [Monday 28 February 2011] [13:42:58] &lt;sp4ke&gt;  i built the libzmq project and added the path to the directory on my project dpendencies
| [Monday 28 February 2011] [13:52:13] &lt;sustrik&gt;        the libs are in libs subdir
| [Monday 28 February 2011] [13:52:28] &lt;sustrik&gt;        iirc
| [Monday 28 February 2011] [13:53:20] &lt;sp4ke&gt;  in the libs subdir i&#8217;ve got only a libzmq.dll and libzmq.ilk
| [Monday 28 February 2011] [13:53:44] &lt;sp4ke&gt;  how can i add these files as dependencies in VS ?
| [Monday 28 February 2011] [13:54:24] &lt;sp4ke&gt;  i mean other than specify the path in the Librarry Directories which i did
| [Monday 28 February 2011] [13:55:03] &lt;sustrik&gt;        there should be libzmq.lib iirc
| [Monday 28 February 2011] [13:55:12] &lt;sustrik&gt;        you should link that with your project
| [Monday 28 February 2011] [13:58:02] &lt;sp4ke&gt;  ok thanx i found a discussion on irc archive it&#8217;s common problem to not get the .lib the answer should be there
| [Monday 28 February 2011] [14:29:31] &lt;pieterh&gt;        cremes: you can set LINGER at any time before close, afaics
| [Monday 28 February 2011] [14:30:16] &lt;cremes&gt; the docs say otherwise:  &#8220;Caution: All options, with the exception of subscription strings, only take effect for subsequent socket bind/connects.&#8221;
| [Monday 28 February 2011] [14:30:28] &lt;cremes&gt; that&#8217;s from the zmq_setsockopt man page
| [Monday 28 February 2011] [14:30:45] &lt;cremes&gt; i don&#8217;t think it&#8217;s lying... my testing appears to bear this out
| [Monday 28 February 2011] [14:32:08] &lt;pieterh&gt;        i&#8217;ve been using LINGER in examples to stop zmq_term blocking, and I use it just before close
| [Monday 28 February 2011] [14:32:21] &lt;pieterh&gt;        something to clarify...
| [Monday 28 February 2011] [14:32:47] &lt;cremes&gt; indeed
| [Monday 28 February 2011] [14:33:09] &lt;pieterh&gt;        example like https://github.com/imatix/zguide/blob/master/examples/C/lpclient.c
| [Monday 28 February 2011] [14:59:25] &lt;mikko&gt;  sigh
| [Monday 28 February 2011] [15:05:50] &lt;Guthur&gt; cremes pieterh: that was my update
| [Monday 28 February 2011] [15:06:15] &lt;pieterh&gt;        Guthur: yeah, but is it accurate?
| [Monday 28 February 2011] [15:06:16] &lt;Guthur&gt; sustrik mentioned that all options should be set before connect
| [Monday 28 February 2011] [15:06:50] &lt;mikko&gt;  Guthur: not all
| [Monday 28 February 2011] [15:06:58] &lt;mikko&gt;  zmq_subscribe can be set afterwards
| [Monday 28 February 2011] [15:07:11] &lt;Guthur&gt; mikko, yeah besides that
| [Monday 28 February 2011] [15:07:16] &lt;pieterh&gt;        mikko: that&#8217;s what the text says :-)
| [Monday 28 February 2011] [15:07:37] &lt;pieterh&gt;        Guthur: it should IMO say &#8220;ZMQ_SUBSCRIBE&#8221; rather than &#8220;subscription strings&#8221; but that&#8217;s minor
| [Monday 28 February 2011] [15:08:59] &lt;pieterh&gt;        ZMQ_SUBSCRIBE, ZMQ_UNSUBSCRIBE, ZMQ_LINGER can afaik be set at any time
| [Monday 28 February 2011] [15:09:12] &lt;pieterh&gt;        not sure about ZMQ_RECONNECT_IVL
| [Monday 28 February 2011] [15:09:25] &lt;Guthur&gt; ok, I can post another update patch
| [Monday 28 February 2011] [15:09:37] &lt;Guthur&gt; if that&#8217;s ok
| [Monday 28 February 2011] [15:09:46] &lt;pieterh&gt;        we need El Sustrik&#8217;s formal confirmation with an &#8220;are you sure&#8221;, IMO
| [Monday 28 February 2011] [15:10:03] &lt;pieterh&gt;        I made an issue: https://github.com/zeromq/zeromq2/issues/173
| [Monday 28 February 2011] [15:10:12] &lt;Guthur&gt; hehe, yep that&#8217;s are very sensible idea
| [Monday 28 February 2011] [15:10:14] &lt;pieterh&gt;        there are a couple of fuzzy areas that cropped up
| [Monday 28 February 2011] [15:20:52] &lt;pieterh&gt;        omg, I&#8217;m reinventing AMQP for Ch4... :-/
| [Monday 28 February 2011] [15:21:17] &lt;pieterh&gt;        please shoot me now before this goes too far
| [Monday 28 February 2011] [15:24:32] &lt;Guthur&gt; at some point someone is bound to say &#8216;It would be nice if core had this&#8217;
| [Monday 28 February 2011] [15:24:38] &lt;Guthur&gt; and then that will be the end
| [Monday 28 February 2011] [15:24:47] &lt;pieterh&gt;        nah, it&#8217;s all just user-space patterns
| [Monday 28 February 2011] [15:25:11] &lt;pieterh&gt;        the key IMO is not even software, but documented protocols
| [Monday 28 February 2011] [15:25:41] &lt;Guthur&gt; is AMQP poorly documented?
| [Monday 28 February 2011] [15:25:57] &lt;Guthur&gt; I am not very familiar with it to be honest
| [Monday 28 February 2011] [15:26:12] &lt;pieterh&gt;        hmm, depends on the version of AMQP, there are quite a few
| [Monday 28 February 2011] [15:26:15] &lt;pieterh&gt;        on this page http://www.amqp.org/confluence/display/AMQP/AMQP+Specification
| [Monday 28 February 2011] [15:26:28] &lt;pieterh&gt;        only AMQP/0-8 and AMQP/0-9-1 are properly documented
| [Monday 28 February 2011] [15:27:06] &lt;pieterh&gt;        0-9 and 0-10 don&#8217;t even have dates in the document... very shoddy work
| [Monday 28 February 2011] [15:27:30] &lt;pieterh&gt;        every version is incompatible with every other version
| [Monday 28 February 2011] [15:27:36] &lt;pieterh&gt;        oh, don&#8217;t get me started :-)
| [Monday 28 February 2011] [15:28:22] &lt;Guthur&gt; I don&#8217;t think i&#8217;ll delve into it too deeply
| [Monday 28 February 2011] [15:28:35] &lt;Guthur&gt; I&#8217;ve enough on my plate without getting lost in AMQP
| [Monday 28 February 2011] [15:28:37] &lt;pieterh&gt;        :-)
| [Monday 28 February 2011] [15:51:27] &lt;cremes&gt; pieterh: can you confirm this leaks memory on your system?  https://g
ist.github.com/848007
| [Monday 28 February 2011] [15:51:36] &lt;cremes&gt; if so, i&#8217;ll open a ticket and attach it
| [Monday 28 February 2011] [15:51:58] &lt;sustrik&gt;        it&#8217;s only SUBSCRIBE and UNSUBSCRIBE that affect the connection after it is established
| [Monday 28 February 2011] [15:52:21] &lt;cremes&gt; sustrik: i think i *might</em> have found another leak with PUB
| [Monday 28 February 2011] [15:52:29] &lt;sustrik&gt;        yes?
| [Monday 28 February 2011] [15:52:37] &lt;cremes&gt; see this gist:  <a class="reference external" href="https://gist.github.com/848007">https://gist.github.com/848007</a>
| [Monday 28 February 2011] [15:52:44] &lt;pieterh&gt;        cremes: nope
| [Monday 28 February 2011] [15:52:46] &lt;cremes&gt; if someone can confirm it leaks on their system, i&#8217;ll open a ticket
| [Monday 28 February 2011] [15:52:47] &lt;pieterh&gt;        it does not leak
| [Monday 28 February 2011] [15:52:54] &lt;pieterh&gt;        it does consume 300% CPU
| [Monday 28 February 2011] [15:53:11] &lt;pieterh&gt;        but memory usage is stable: &#8220;7867 ph        20   0  198m 1904 1148 S  312  0.0   1:09.50 leaker6   &#8221;
| [Monday 28 February 2011] [15:53:41] &lt;cremes&gt; hrmm...
| [Monday 28 February 2011] [15:53:52] &lt;pieterh&gt;        sustrik: I&#8217;ve tested LINGER and it definitely works after the connection is established
| [Monday 28 February 2011] [15:54:18] &lt;sustrik&gt;        aaaah
| [Monday 28 February 2011] [15:54:24] &lt;sustrik&gt;        i recall something like that dimly
| [Monday 28 February 2011] [15:54:34] &lt;Ergo^&gt;  stupid question, how shuold i stop my python scripts that use pyzmq ? ctl+c doesnt seem to kill them nicely
| [Monday 28 February 2011] [15:54:34] &lt;sustrik&gt;        let me check the code
| [Monday 28 February 2011] [15:54:56] &lt;pieterh&gt;        Ergo^: are you on the latest 0MQ?
| [Monday 28 February 2011] [15:55:36] &lt;Ergo^&gt;  2.0.10
| [Monday 28 February 2011] [15:56:11] &lt;pieterh&gt;        Ergo^: check the release notes, Ctrl-C was fixed but I don&#8217;t recall exactly what version
| [Monday 28 February 2011] [15:57:36] &lt;Ergo^&gt;  ok, can you clarify one thing for me? when i send() something its expected to be a string? so i should use json or other encapsulation that makes sense ?
| [Monday 28 February 2011] [15:59:08] &lt;cremes&gt; pieterh: ah! make a small change to that code and it will leak like a sieve
| [Monday 28 February 2011] [15:59:19] &lt;cremes&gt; change the number of client threads it spawn to something greater than 1
| [Monday 28 February 2011] [15:59:20] &lt;pieterh&gt;        cremes... put the &#8216;free&#8217; into comments?
| [Monday 28 February 2011] [15:59:24] &lt;pieterh&gt;        ah, will try
| [Monday 28 February 2011] [15:59:30] &lt;pieterh&gt;        Ergo^: did you read the Guide yet?
| [Monday 28 February 2011] [15:59:31] &lt;cremes&gt; i think it&#8217;s a race condition bug
| [Monday 28 February 2011] [15:59:46] &lt;Ergo^&gt;  pieterh, im just starting to dig into it
| [Monday 28 February 2011] [15:59:52] &lt;pieterh&gt;        cremes: I&#8217;ll spend 10 minutes on that, would you spend 10 minutes reviewing <a class="reference external" href="http://rfc.zeromq.org/spec:7">http://rfc.zeromq.org/spec:7</a>?
| [Monday 28 February 2011] [16:00:01] &lt;cremes&gt; my pleasure
| [Monday 28 February 2011] [16:00:20] &lt;pieterh&gt;        Ergo^: until you&#8217;ve read at least Ch1 and Ch2, you&#8217;re kind of in RTFM mode here
| [Monday 28 February 2011] [16:01:47] &lt;sustrik&gt;        ack: LINGER is socket-wide
| [Monday 28 February 2011] [16:01:53] &lt;sustrik&gt;        not connection-wide
| [Monday 28 February 2011] [16:02:10] &lt;pieterh&gt;        cremes: I hereby name this ship the &#8220;Leaky and Nasty&#8221;
| [Monday 28 February 2011] [16:02:11] &lt;pieterh&gt;        7993 ph        20   0 1853m 1.4g 1148 S  382 17.6   2:42.12 leaker6
| [Monday 28 February 2011] [16:02:18] &lt;cremes&gt; huzzah!
| [Monday 28 February 2011] [16:02:24] &lt;pieterh&gt;        That&#8217;s 1.4g of memory in about 30 seconds
| [Monday 28 February 2011] [16:02:29] &lt;pieterh&gt;        with 10 client threads
| [Monday 28 February 2011] [16:02:29] &lt;cremes&gt; i can email you guys a call-tree backtrace if that is helpful to you
| [Monday 28 February 2011] [16:02:38] &lt;cremes&gt; yeah, same thing happens on my box
| [Monday 28 February 2011] [16:03:10] &lt;pieterh&gt;        i love it when people send beautiful C code that reproduces problems...
| [Monday 28 February 2011] [16:03:27] &lt;cremes&gt; btw, it doesn&#8217;t leak as fast when the LINGER line is uncommented but it still leaks <em>rapidly</em>
| [Monday 28 February 2011] [16:10:23] &lt;sustrik&gt;        what unit is s_clock() in?
| [Monday 28 February 2011] [16:10:56] &lt;cremes&gt; milliseconds
| [Monday 28 February 2011] [16:11:59] &lt;mikko&gt;  success!
| [Monday 28 February 2011] [16:12:17] &lt;sustrik&gt;        cremes: ok, what about the cpu usage?
| [Monday 28 February 2011] [16:12:22] &lt;mikko&gt;  i managed to create pure shell-script that executes zeromq build and sends results over http to jenkins
| [Monday 28 February 2011] [16:12:31] &lt;sustrik&gt;        a peak followed by flat line?
| [Monday 28 February 2011] [16:12:34] &lt;pieterh&gt;        mikko: nice!
| [Monday 28 February 2011] [16:12:40] &lt;cremes&gt; sustrik: let me take a look
| [Monday 28 February 2011] [16:13:17] &lt;mikko&gt;  also, on the other news. i am bringing up powerpc (debian 6.0) build slave soon(ish)
| [Monday 28 February 2011] [16:13:32] &lt;cremes&gt; sustrik: did you update the code to use 2+ client threads? i see cpu spike and <em>stay</em> there
| [Monday 28 February 2011] [16:13:56] &lt;sustrik&gt;        mikko: btw, i&#8217;ve had a discussion with a guy who has problems building 0mq under mingw-win64
| [Monday 28 February 2011] [16:14:12] &lt;cremes&gt; sustrik: reload that gist if you like; i updated it to create 5 client threads which more readily show the leak
| [Monday 28 February 2011] [16:14:21] &lt;mikko&gt;  sustrik: what is the problem?
| [Monday 28 February 2011] [16:14:31] &lt;mikko&gt;  using mingw64?
| [Monday 28 February 2011] [16:14:42] &lt;sustrik&gt;        order of includes, presumably
| [Monday 28 February 2011] [16:14:43] &lt;sustrik&gt;        <a class="reference external" href="https://github.com/zeromq/zeromq2/issues/#issue/60">https://github.com/zeromq/zeromq2/issues/#issue/60</a>
| [Monday 28 February 2011] [16:15:09] &lt;sustrik&gt;        i just though it can possibly make sense to add that to builds
| [Monday 28 February 2011] [16:15:37] &lt;sustrik&gt;        cremes: ok, so it&#8217;s processing something
| [Monday 28 February 2011] [16:15:50] &lt;mikko&gt;  sustrik: the current cluster is 32bit hardware
| [Monday 28 February 2011] [16:15:52] &lt;sustrik&gt;        that definitely looks like a bug
| [Monday 28 February 2011] [16:15:55] &lt;mikko&gt;  that&#8217;s slightly problematic
| [Monday 28 February 2011] [16:16:09] &lt;mikko&gt;  would need a win64 box (i presume)
| [Monday 28 February 2011] [16:16:13] &lt;sustrik&gt;        ah, i though it&#8217;s a cross-compile
| [Monday 28 February 2011] [16:16:20] &lt;mikko&gt;  or does the cross-compile work on 32bit?
| [Monday 28 February 2011] [16:16:21] &lt;sustrik&gt;        never mind
| [Monday 28 February 2011] [16:16:29] &lt;sustrik&gt;        no idea
| [Monday 28 February 2011] [16:16:33] &lt;sustrik&gt;        check the issue
| [Monday 28 February 2011] [16:16:34] &lt;mikko&gt;  can&#8217;t do &#8216;make check&#8217; without win64
| [Monday 28 February 2011] [16:16:37] &lt;mikko&gt;  i can add build
| [Monday 28 February 2011] [16:16:46] &lt;sustrik&gt;        mikko: spot on
| [Monday 28 February 2011] [16:16:56] &lt;sustrik&gt;        i forgot about the tests
| [Monday 28 February 2011] [16:17:10] &lt;cremes&gt; sustrik: yes, i agree; i changed the publish interval to 500ms and cpu remains high
| [Monday 28 February 2011] [16:17:18] &lt;cremes&gt; sustrik: whatever it is processing, it&#8217;s stuck
| [Monday 28 February 2011] [16:17:23] &lt;sustrik&gt;        right
| [Monday 28 February 2011] [16:17:39] &lt;cremes&gt; sustrik: i can send you the call-tree for the code that is allocating (and holding onto) all of this memory if that&#8217;s helpful
| [Monday 28 February 2011] [16:17:52] &lt;pieterh&gt;        cremes: I think I see the problem
| [Monday 28 February 2011] [16:17:54] &lt;sustrik&gt;        yes, please
| [Monday 28 February 2011] [16:18:05] &lt;pieterh&gt;        the client is never pausing for breath
| [Monday 28 February 2011] [16:18:18] &lt;sustrik&gt;        it&#8217;s not, but it&#8217;s time-limited
| [Monday 28 February 2011] [16:18:18] &lt;pieterh&gt;        server can&#8217;t keep up
| [Monday 28 February 2011] [16:18:30] &lt;sustrik&gt;        so it should send for 200ms
| [Monday 28 February 2011] [16:18:32] &lt;pieterh&gt;        let me set a HWM and do small sleep in the client after closing a socket...
| [Monday 28 February 2011] [16:18:32] &lt;sustrik&gt;        then stop
| [Monday 28 February 2011] [16:18:50] &lt;pieterh&gt;        the clock in the client has no purpose at all afaics
| [Monday 28 February 2011] [16:20:14] &lt;cremes&gt; ok, so a small sleep inside the publish loop fixes it
| [Monday 28 February 2011] [16:20:28] &lt;cremes&gt; but shouldn&#8217;t it just drop those messages if they are in queue and undelivered?
| [Monday 28 February 2011] [16:20:37] &lt;cremes&gt; LINGER = 0 in this case
| [Monday 28 February 2011] [16:21:04] &lt;pieterh&gt;        cremes: if I sleep 1 second after each publish burst, client memory usage is flat
| [Monday 28 February 2011] [16:21:27] &lt;pieterh&gt;        they are sent to publisher before you close the socket
| [Monday 28 February 2011] [16:21:45] &lt;pieterh&gt;        the memory consumption is in the server queue
| [Monday 28 February 2011] [16:22:05] &lt;cremes&gt; hmmm, i can believe that
| [Monday 28 February 2011] [16:22:35] &lt;sustrik&gt;        2 producers are definitely going to overload one consumer
| [Monday 28 February 2011] [16:22:42] &lt;pieterh&gt;        hmm, indeed, I set 10k HWM ons server socket, still runs out of memory
| [Monday 28 February 2011] [16:22:51] &lt;sustrik&gt;        you have to set HWM to make excess messages be dropped
| [Monday 28 February 2011] [16:22:56] &lt;pieterh&gt;        setting 10K HWM on client socket AND sleeping in between bursts, it&#8217;s ok
| [Monday 28 February 2011] [16:23:15] &lt;sustrik&gt;        what about HWM on both sender and receiver?
| [Monday 28 February 2011] [16:23:17] &lt;pieterh&gt;        cremes: ah...
| [Monday 28 February 2011] [16:23:24] &lt;pieterh&gt;        LINGER is only executed at zmq_term time!
| [Monday 28 February 2011] [16:24:06] &lt;sustrik&gt;        zmq_close() time, to be precise
| [Monday 28 February 2011] [16:24:41] &lt;pieterh&gt;        bleh, you&#8217;re right, and doing init/term in teh loop makes no difference
| [Monday 28 February 2011] [16:25:10] &lt;pieterh&gt;        cremes: you always find the weird cases... :-)
| [Monday 28 February 2011] [16:25:14] &lt;sustrik&gt;        have you tried with HWM on both sides?
| [Monday 28 February 2011] [16:25:33] &lt;pieterh&gt;        have tried on either side, no difference
| [Monday 28 February 2011] [16:25:35] &lt;cremes&gt; i didn&#8217;t think HWM had any effect on a SUB socket...?
| [Monday 28 February 2011] [16:25:45] &lt;sustrik&gt;        i meant <em>both</em>
| [Monday 28 February 2011] [16:25:51] &lt;sustrik&gt;        not either
| [Monday 28 February 2011] [16:25:53]   * pieterh will now try <em>both</em>
| [Monday 28 February 2011] [16:26:04] &lt;sustrik&gt;        cremes: it does
| [Monday 28 February 2011] [16:26:25] &lt;sustrik&gt;        it specifies how many messages can be buffered before 0mq starts dropping them
| [Monday 28 February 2011] [16:26:43] &lt;pieterh&gt;        sustrik: either, both, makes no visible difference
| [Monday 28 February 2011] [16:26:59] &lt;sustrik&gt;        ok, that looks like a buf
| [Monday 28 February 2011] [16:27:01] &lt;sustrik&gt;        bug
| [Monday 28 February 2011] [16:27:15] &lt;cremes&gt; on the zmq_socket() man page, it says N/A for HWM on a SUB socket
| [Monday 28 February 2011] [16:27:23] &lt;sustrik&gt;        oh
| [Monday 28 February 2011] [16:27:27] &lt;sustrik&gt;        i see
| [Monday 28 February 2011] [16:27:36] &lt;pieterh&gt;        the only thing that seems to work is a long (1 second) sleep in the client loop
| [Monday 28 February 2011] [16:27:46] &lt;sustrik&gt;        the clients are creating new connections all the time
| [Monday 28 February 2011] [16:27:51] &lt;cremes&gt; sustrik: right
| [Monday 28 February 2011] [16:27:59] &lt;pieterh&gt;        cremes: yeah, I remember that, it&#8217;s a bug, no?
| [Monday 28 February 2011] [16:28:04] &lt;sustrik&gt;        meaning that the server creates a new buffer each time
| [Monday 28 February 2011] [16:28:11] &lt;sustrik&gt;        each buffer is limited by HWM
| [Monday 28 February 2011] [16:28:22] &lt;sustrik&gt;        but the number of buffers is unlimited
| [Monday 28 February 2011] [16:28:26] &lt;Ergo^&gt;  there is something taht is unclear to me with pyzmq and send_json - when i use that function i understand i lose the ability to set &#8220;topic&#8221; i want to subscribe to ?
| [Monday 28 February 2011] [16:29:22] &lt;sustrik&gt;        there should be MAX_CONNECTIONS socket options...
| [Monday 28 February 2011] [16:29:27] &lt;sustrik&gt;        option*
| [Monday 28 February 2011] [16:29:31] &lt;cremes&gt; that buffer should be dropped when zmq_close() is called so it should catch up, right?
| [Monday 28 February 2011] [16:29:37] &lt;Guthur&gt; what is expected to happen if you poll before TCP sockets are fully connected?
| [Monday 28 February 2011] [16:29:51] &lt;sustrik&gt;        cremes: the buffer is dropped on the client side
| [Monday 28 February 2011] [16:30:07] &lt;sustrik&gt;        the server side buffer remains untill all the messages are read from it
| [Monday 28 February 2011] [16:30:09] &lt;cremes&gt; sustrik: i thought zmq_connect() is what created the buffer
| [Monday 28 February 2011] [16:30:14] &lt;pieterh&gt;        Guthur: nothing in particular?
| [Monday 28 February 2011] [16:30:18] &lt;cremes&gt; ok, right
| [Monday 28 February 2011] [16:30:23] &lt;sustrik&gt;        cremes: yes
| [Monday 28 February 2011] [16:30:32] &lt;pieterh&gt;        sustrik: yes, but are there multiple buffers at the server side?
| [Monday 28 February 2011] [16:30:48] &lt;sustrik&gt;        but the server side buffer remains in place while there are messages in it
| [Monday 28 February 2011] [16:31:03] &lt;sustrik&gt;        yes, one buffer per connection
| [Monday 28 February 2011] [16:31:16] &lt;pieterh&gt;        it&#8217;s N client-side buffers (that should be destroyed by close + LINGER=0) + 1 server-side buffer
| [Monday 28 February 2011] [16:31:32] &lt;Guthur&gt; pieterh, I&#8217;m getting strange behaviour on POSIX OSs (linux and OSX) with polling with CLRZMQ2
| [Monday 28 February 2011] [16:31:33] &lt;pieterh&gt;        setting HWM on sub socket (server) makes no difference
| [Monday 28 February 2011] [16:31:45] &lt;pieterh&gt;        Guthur: &#8216;strange&#8217; = ?
| [Monday 28 February 2011] [16:31:58] &lt;sustrik&gt;        the socket on the server side is never closed
| [Monday 28 February 2011] [16:32:04] &lt;sustrik&gt;        so the buffers remain
| [Monday 28 February 2011] [16:32:06] &lt;Guthur&gt; pieterh, well if I don&#8217;t delay the polling ever so slightly it throws an exception
| [Monday 28 February 2011] [16:32:18] &lt;pieterh&gt;        sustrik... where is that 1.4Gb of memory sitting then?
| [Monday 28 February 2011] [16:32:23] &lt;Guthur&gt; and a users seems to be getting similar problems on OSX
| [Monday 28 February 2011] [16:32:28] &lt;Guthur&gt; user*
| [Monday 28 February 2011] [16:32:32] &lt;sustrik&gt;        lot of buffers in the server socket
| [Monday 28 February 2011] [16:32:50] &lt;sustrik&gt;        they are gradually being emptied and deallocated
| [Monday 28 February 2011] [16:32:59] &lt;Guthur&gt; same code works on windows fine though
| [Monday 28 February 2011] [16:33:00] &lt;sustrik&gt;        but client create new buffers even faster
| [Monday 28 February 2011] [16:33:04] &lt;Guthur&gt; without the delay
| [Monday 28 February 2011] [16:33:06] &lt;mikko&gt;  <a class="reference external" href="http://johanharjono.com/archives/633">http://johanharjono.com/archives/633</a>
| [Monday 28 February 2011] [16:33:16] &lt;mikko&gt;  installation instructions missing something?
| [Monday 28 February 2011] [16:33:16] &lt;pieterh&gt;        and HWM is for each buffer independently... not the socket as such
| [Monday 28 February 2011] [16:33:18] &lt;Ergo^&gt;  am i correct about zeromq &#8220;extensions&#8221; ?
| [Monday 28 February 2011] [16:33:24] &lt;Ergo^&gt;  for python that is ?
| [Monday 28 February 2011] [16:33:32] &lt;pieterh&gt;        Guthur: no idea, we&#8217;d need some test code that reproduces it
| [Monday 28 February 2011] [16:33:45] &lt;sustrik&gt;        yes, HWM is same as SO_SNDBUF and SO_RCVBUF
| [Monday 28 February 2011] [16:33:47] &lt;sustrik&gt;        local
| [Monday 28 February 2011] [16:34:09] &lt;sustrik&gt;        doesn&#8217;t affect the peer
| [Monday 28 February 2011] [16:34:27] &lt;Guthur&gt; it&#8217;s all related to this issue: <a class="reference external" href="https://github.com/zeromq/clrzmq2/issues/13">https://github.com/zeromq/clrzmq2/issues/13</a>
| [Monday 28 February 2011] [16:34:32] &lt;pieterh&gt;        cremes: so what did you not know that led you to think this could work?
| [Monday 28 February 2011] [16:35:47] &lt;cremes&gt; pieterh: i saw another resource leak and followed it back to the PUB socket
| [Monday 28 February 2011] [16:36:08] &lt;Guthur&gt; i do notice that if I place it in a try block it also works, I put this down to the fact a try block will possibly delay the polling ever so slightly
| [Monday 28 February 2011] [16:36:09] &lt;cremes&gt; i&#8217;ll have to look and see if i am overrunning the SUB socket on the other side like in this example
| [Monday 28 February 2011] [16:36:21] &lt;pieterh&gt;        seems like that opening/closing the client sockets each time is the cause
| [Monday 28 February 2011] [16:36:28] &lt;sustrik&gt;        this is a problem i wanted to address for a long time but never quite get to do it
| [Monday 28 February 2011] [16:36:39] &lt;pieterh&gt;        Guthur: I can&#8217;t really help, have no idea what the exception could be or why
| [Monday 28 February 2011] [16:36:52] &lt;sustrik&gt;        there should be a socket option limiting the max number of concurrent connecitons
| [Monday 28 February 2011] [16:37:13] &lt;peter_NOrth&gt;    is nial dalton on this IRC ever?
| [Monday 28 February 2011] [16:37:16] &lt;pieterh&gt;        sustrik: anti-DoS protection
| [Monday 28 February 2011] [16:37:25] &lt;sustrik&gt;        exactly
| [Monday 28 February 2011] [16:37:41] &lt;pieterh&gt;        useful, but here we have a problem of documentation IMO
| [Monday 28 February 2011] [16:37:50] &lt;pieterh&gt;        or something
| [Monday 28 February 2011] [16:38:34] &lt;sustrik&gt;        possibly
| [Monday 28 February 2011] [16:38:43] &lt;pieterh&gt;        it&#8217;s unclear how HWM and LINGER help here
| [Monday 28 February 2011] [16:38:48] &lt;pieterh&gt;        (in fact they don&#8217;t)
| [Monday 28 February 2011] [16:38:52] &lt;sustrik&gt;        LINGER is irrelevant
| [Monday 28 February 2011] [16:39:04] &lt;sustrik&gt;        because it affects the send side
| [Monday 28 February 2011] [16:39:10] &lt;sustrik&gt;        and the problem is on recv side
| [Monday 28 February 2011] [16:39:18] &lt;pieterh&gt;        yes, but that&#8217;s not obvious
| [Monday 28 February 2011] [16:39:33] &lt;sustrik&gt;        HWM would help in combination with MAX_CONNECTIONS
| [Monday 28 February 2011] [16:39:50] &lt;sustrik&gt;        MAX_CONNECTION * HWM = max number of messages queued
| [Monday 28 February 2011] [16:39:52] &lt;pieterh&gt;        possibly HWM affecting socket rather than each buffer
| [Monday 28 February 2011] [16:39:56] &lt;pieterh&gt;        ah, yes
| [Monday 28 February 2011] [16:40:02] &lt;sustrik&gt;        * MAX_MSG_SIZE = max memory used
| [Monday 28 February 2011] [16:40:13] &lt;pieterh&gt;        ...calculating...
| [Monday 28 February 2011] [16:40:18] &lt;pieterh&gt;        102523.2231GB
| [Monday 28 February 2011] [16:40:23] &lt;pieterh&gt;        yeah, that&#8217;ll do
| [Monday 28 February 2011] [16:41:31] &lt;pieterh&gt;        sustrik: why not add MAX_CONNECTIONS and MAX_MSG_SIZE to the 3.0 roadmap?
| [Monday 28 February 2011] [16:41:37] &lt;pieterh&gt;        they are excellent ideas
| [Monday 28 February 2011] [16:41:56] &lt;Guthur&gt; pieterh, errno 4 mean anything?
| [Monday 28 February 2011] [16:42:06] &lt;pieterh&gt;        documenting them will perhaps give someone the incentive to go make the patch
| [Monday 28 February 2011] [16:42:11] &lt;sustrik&gt;        it can be added to 2.x
| [Monday 28 February 2011] [16:42:16] &lt;NoToes&gt; Hi Guther, I&#8217;m &#8220;johndeko&#8221;. So you&#8217;ve managed to reproduce the poll timing issue? If so I wont bother to reproduce it outside of Unity.
| [Monday 28 February 2011] [16:42:20] &lt;sustrik&gt;        no backward compatibility problem
| [Monday 28 February 2011] [16:42:26] &lt;pieterh&gt;        sustrik: sure
| [Monday 28 February 2011] [16:42:31] &lt;pieterh&gt;        we have a 2.2 roadmap page?
| [Monday 28 February 2011] [16:42:37] &lt;sustrik&gt;        nope
| [Monday 28 February 2011] [16:42:51] &lt;Guthur&gt; NoToes, I think so
| [Monday 28 February 2011] [16:42:59] &lt;Guthur&gt; very strange one though
| [Monday 28 February 2011] [16:43:10] &lt;pieterh&gt;        sustrik: ok, I&#8217;m going to make it, I assume?
| [Monday 28 February 2011] [16:43:29] &lt;sustrik&gt;        why not
| [Monday 28 February 2011] [16:43:32] &lt;Ergo^&gt;  sustrik, you are maintainer or pyzmq?
| [Monday 28 February 2011] [16:43:42] &lt;NoToes&gt; Sure is!
| [Monday 28 February 2011] [16:43:49] &lt;sustrik&gt;        no, i&#8217;m not
| [Monday 28 February 2011] [16:44:09] &lt;sustrik&gt;        it&#8217;s either brian granger or minrk
| [Monday 28 February 2011] [16:44:15] &lt;Ergo^&gt;  if i use this method <a class="reference external" href="http://zeromq.github.com/pyzmq/api/generated/zmq.core.socket.html#zmq.core.socket.Socket.send_json">http://zeromq.github.com/pyzmq/api/generated/zmq.core.socket.html#zmq.core.socket.Socket.send_json</a>
| [Monday 28 February 2011] [16:44:29] &lt;Ergo^&gt;  i cant use topic filtering at same time ?
| [Monday 28 February 2011] [16:44:40]   * sustrik has no pyzmq experience, sorry
| [Monday 28 February 2011] [16:44:55] &lt;Guthur&gt; NoToes, a sleep of at least 100 milliseconds before starting to poll and there is no problem
| [Monday 28 February 2011] [16:45:08] &lt;Guthur&gt; but I don&#8217;t think that&#8217;s really what you want to hear
| [Monday 28 February 2011] [16:45:14] &lt;Ergo^&gt;  it seems purely string based, but i dont see anything in the docs about setting possible topic when using send_json
| [Monday 28 February 2011] [16:45:29] &lt;pieterh&gt;        sustrik: ok, done, and I added the socket type renames since there was consensus on that
| [Monday 28 February 2011] [16:45:37] &lt;pieterh&gt;        oh, I can provide a patch for that already :-)
| [Monday 28 February 2011] [16:45:56] &lt;sustrik&gt;        what renames?
| [Monday 28 February 2011] [16:46:06] &lt;pieterh&gt;        :-)
| [Monday 28 February 2011] [16:46:09] &lt;Ergo^&gt;  can someone here confirm if im right or wrong? ;-)
| [Monday 28 February 2011] [16:46:14] &lt;pieterh&gt;        XREP -&gt; ROUTER, XREQ -&gt; DEALER
| [Monday 28 February 2011] [16:46:19] &lt;sustrik&gt;        yuck
| [Monday 28 February 2011] [16:46:23] &lt;NoToes&gt; Guther, not really. It doesn&#8217;t fill me with certainty and makes fast updates impossible.
| [Monday 28 February 2011] [16:46:27] &lt;Guthur&gt; here it&#8217;s an interrupted syscall
| [Monday 28 February 2011] [16:46:31] &lt;pieterh&gt;        yeah, you should have said that when it was discussed on zeromq-dev
| [Monday 28 February 2011] [16:46:44] &lt;pieterh&gt;        les absents on toujours tort
| [Monday 28 February 2011] [16:46:44] &lt;Guthur&gt; that&#8217;s the exception
| [Monday 28 February 2011] [16:46:51] &lt;Guthur&gt; NoToes, ^
| [Monday 28 February 2011] [16:46:52] &lt;sustrik&gt;        ok, good
| [Monday 28 February 2011] [16:47:01] &lt;sustrik&gt;        i&#8217;ll add it as an alias
| [Monday 28 February 2011] [16:47:40] &lt;pieterh&gt;        sustrik: thread has title &#8220;[0MQ/3.0] discuss: renameXREPtoROUTER&#8221;
| [Monday 28 February 2011] [16:47:55] &lt;pieterh&gt;        but we can introduce the name change in 2.2 as we did for PUSH/PULL
| [Monday 28 February 2011] [16:48:03] &lt;cremes&gt; Ergo^: if the python 0mq interface allows you to send multipart messages, make sure the topic is the first
| [Monday 28 February 2011] [16:48:09] &lt;Guthur&gt; NoToes, it maybe that you only have to do this after first connecting, and then things will be fine unless you have to reconnect again, that&#8217;s a guess though
| [Monday 28 February 2011] [16:48:12] &lt;cremes&gt; Ergo^: part and your json-encoded string is the second part
| [Monday 28 February 2011] [16:48:28] &lt;cremes&gt; Ergo^: don&#8217;t be overly concerned that the api doesn&#8217;t have a single call that does everything you want
| [Monday 28 February 2011] [16:48:44] &lt;Guthur&gt; NoToes, I have not got the sleep in the polling loop, rather just before it, does this work for you?
| [Monday 28 February 2011] [16:48:48] &lt;cremes&gt; Ergo^: you can build your own convenience method from the methods already present, right?
| [Monday 28 February 2011] [16:48:51] &lt;NoToes&gt; Guthur, well easy enough for me to test.
| [Monday 28 February 2011] [16:49:05] &lt;NoToes&gt; Guthur, I&#8217;ll try it out.
| [Monday 28 February 2011] [16:49:16] &lt;Guthur&gt; cool
| [Monday 28 February 2011] [16:49:37] &lt;Ergo^&gt;  cremes,  i can build the messages on my own by doing something like &#8216;%s %s&#8217; % (topic,json,), its just that api of pyzmq seems missing some functionalities
| [Monday 28 February 2011] [16:50:00] &lt;Guthur&gt; sustrik, any idea why we would get an &#8220;Interrupted system call&#8221; error when polling to quickly after a TCP socket connection
| [Monday 28 February 2011] [16:50:09] &lt;cremes&gt; Ergo^: i disagree; i don&#8217;t think the api should have any explicit method dealing with json
| [Monday 28 February 2011] [16:50:24] &lt;cremes&gt; Ergo^: why not a different serialization format? what is json&#8217;s connection to 0mq?
| [Monday 28 February 2011] [16:50:26] &lt;Ergo^&gt;  cremes, well thats my point - it does
| [Monday 28 February 2011] [16:50:43] &lt;Ergo^&gt;  but it doesnt do it to full extent
| [Monday 28 February 2011] [16:51:24] &lt;cremes&gt; Ergo^: i guess i fail to see the problem here; you can easily accomplish what you want with a 3-line method
| [Monday 28 February 2011] [16:51:27] &lt;Ergo^&gt;  cremes, its just a format as good as any - its interoperable for sure, thats why i was thinking about using it - and i can get normal data structures &#8220;on other side&#8221;
| [Monday 28 February 2011] [16:51:39] &lt;cremes&gt; Ergo^: why does it matter that the api doesn&#8217;t already have it? write it and send in a patch...?
| [Monday 28 February 2011] [16:51:48] &lt;sustrik&gt;        Guthur: presumably, there&#8217;s a signal generated somewhere
| [Monday 28 February 2011] [16:52:08] &lt;mikko&gt;  sustrik: <a class="reference external" href="http://build.zero.mq/job/ZeroMQ2-core-master_mingw64/5/console">http://build.zero.mq/job/ZeroMQ2-core-master_mingw64/5/console</a>
| [Monday 28 February 2011] [16:52:13] &lt;Ergo^&gt;  cremes, just wanted to make sure i havent missed anything obvious, thus asking here ;-) nothing more
| [Monday 28 February 2011] [16:52:13] &lt;mikko&gt;  mingw64 cross compile running
| [Monday 28 February 2011] [16:52:20] &lt;mikko&gt;  well, was running
| [Monday 28 February 2011] [16:52:23] &lt;sustrik&gt;        wow, that was quick
| [Monday 28 February 2011] [16:52:37] &lt;cremes&gt; Ergo^: ok!
| [Monday 28 February 2011] [16:53:05] &lt;mikko&gt;  sustrik: not sure if that is my environment or something else
| [Monday 28 February 2011] [16:53:34] &lt;sustrik&gt;        no windows.h
| [Monday 28 February 2011] [16:53:36] &lt;sustrik&gt;        strange
| [Monday 28 February 2011] [16:53:47] &lt;mikko&gt;  might be something odd with the build i guess
| [Monday 28 February 2011] [16:54:06] &lt;mikko&gt;  ./configure &#8211;host=amd64-mingw32msvc &#8211;target=mingw64
| [Monday 28 February 2011] [16:54:14] &lt;mikko&gt;  do i need anything else?
| [Monday 28 February 2011] [16:55:30] &lt;sustrik&gt;        no idea
| [Monday 28 February 2011] [16:55:36] &lt;NoToes&gt; Guthur, no luck with a sleep before the poll loop.
| [Monday 28 February 2011] [16:55:42] &lt;sustrik&gt;        try asking the guy who filled the issue
| [Monday 28 February 2011] [16:55:45] &lt;mikko&gt;  ok, will investigate
| [Monday 28 February 2011] [16:55:47] &lt;sustrik&gt;        he&#8217;s pretty responsive
| [Monday 28 February 2011] [16:56:10] &lt;cremes&gt; sustrik: what would you say is holding onto the memory if you saw this callstack?  <a class="reference external" href="https://gist.github.com/848123">https://gist.github.com/848123</a>
| [Monday 28 February 2011] [16:56:38] &lt;sustrik&gt;        that are messages
| [Monday 28 February 2011] [16:56:48] &lt;cremes&gt; are they unsent and in a queue?
| [Monday 28 February 2011] [16:57:28] &lt;sustrik&gt;        they are received by I/O thread and waiting to be read by the application
| [Monday 28 February 2011] [16:58:12] &lt;cremes&gt; sustrik: i don&#8217;t understand that... it&#8217;s from a PUB socket, so what is waiting to read it?
| [Monday 28 February 2011] [16:58:30] &lt;sustrik&gt;        sorry?
| [Monday 28 February 2011] [16:58:51] &lt;sustrik&gt;        I/O thread reads messages from TCP connections and buffers them
| [Monday 28 February 2011] [16:58:56] &lt;sustrik&gt;        application reads them
| [Monday 28 February 2011] [16:59:06] &lt;cremes&gt; that call-tree is for a pub socket that is sending messages
| [Monday 28 February 2011] [16:59:26] &lt;cremes&gt; i don&#8217;t understand why you say the i/o thread has received them and is waiting for the application to read them
| [Monday 28 February 2011] [16:59:32] &lt;sustrik&gt;        oops
| [Monday 28 February 2011] [16:59:36] &lt;cremes&gt; i though pub was broadcast, fire-and-forget
| [Monday 28 February 2011] [16:59:37] &lt;sustrik&gt;        missed the first line
| [Monday 28 February 2011] [16:59:54] &lt;sustrik&gt;        it is
| [Monday 28 February 2011] [17:00:08] &lt;sustrik&gt;        but there&#8217;s some reliability built in
| [Monday 28 February 2011] [17:00:14] &lt;cremes&gt; pieterh: sent you some feedback on that rfc
| [Monday 28 February 2011] [17:00:28] &lt;sustrik&gt;        namely, up to HWM messages are buffered before 0mq starts dropping them
| [Monday 28 February 2011] [17:00:28] &lt;pieterh&gt;        cremes: our email server is dead atm
| [Monday 28 February 2011] [17:00:38] &lt;cremes&gt; ok, so what are the conditions that will cause pub to hang onto those messages?
| [Monday 28 February 2011] [17:00:46] &lt;sustrik&gt;        by default, HWM=infinite
| [Monday 28 February 2011] [17:00:49] &lt;pieterh&gt;        cremes: could you resend to <a class="reference external" href="mailto:pieterh&#37;&#52;&#48;gmail&#46;com">pieterh<span>&#64;</span>gmail<span>&#46;</span>com</a>, thanks
| [Monday 28 February 2011] [17:00:51] &lt;cremes&gt; pieterh: that explains why the email bounced!
| [Monday 28 February 2011] [17:01:02] &lt;pieterh&gt;        bounced? that&#8217;s not nice... rats...
| [Monday 28 February 2011] [17:01:18]   * pieterh hopes our sysadmin wakes up soon
| [Monday 28 February 2011] [17:01:40] &lt;NoToes&gt; Guthur, adding a System.GC.Collect() instead of a sleep also works.
| [Monday 28 February 2011] [17:01:51] &lt;cremes&gt; sustrik: ok, so they are in queue because there is a slow subscriber somewhere; is that right?
| [Monday 28 February 2011] [17:02:11] &lt;Guthur&gt; NoToes, that&#8217;s even weirder
| [Monday 28 February 2011] [17:02:24] &lt;sustrik&gt;        yes
| [Monday 28 February 2011] [17:02:28] &lt;cremes&gt; ok
| [Monday 28 February 2011] [17:02:32] &lt;sustrik&gt;        to guard against slow consumers
| [Monday 28 February 2011] [17:02:43] &lt;Guthur&gt; NoToes, but the sleep did not work for you?
| [Monday 28 February 2011] [17:02:45] &lt;NoToes&gt; Guthur, doesn&#8217;t say much if just takes up some time.
| [Monday 28 February 2011] [17:02:45] &lt;sustrik&gt;        all buffering has to have upper limit
| [Monday 28 February 2011] [17:02:51] &lt;cremes&gt; and if there are <em>no</em> subscribers, it should just drop those messages, yes?
| [Monday 28 February 2011] [17:03:05] &lt;sustrik&gt;        so we need at least 3 options: HWM, MAX_CONNECTIONS, and MAX_SIZE
| [Monday 28 February 2011] [17:03:14] &lt;sustrik&gt;        cremes: yes
| [Monday 28 February 2011] [17:03:18] &lt;cremes&gt; cool
| [Monday 28 February 2011] [17:03:29] &lt;cremes&gt; i must have a slow subscriber somewhere.... damn it
| [Monday 28 February 2011] [17:03:54] &lt;sustrik&gt;        well, if you are doing something like the example posted
| [Monday 28 February 2011] [17:04:16] &lt;sustrik&gt;        i.e. publishing at full speed from serveral apps to a single app
| [Monday 28 February 2011] [17:04:30] &lt;sustrik&gt;        it&#8217;s just going to blow up
| [Monday 28 February 2011] [17:04:51] &lt;peter_NOrth&gt;    dalton
| [Monday 28 February 2011] [17:04:57] &lt;cremes&gt; i don&#8217;t think i have that configuration though... i&#8217;ll have to dig into this; thanks for your help
| [Monday 28 February 2011] [17:05:10] &lt;sustrik&gt;        you are welcome
| [Monday 28 February 2011] [17:08:57] &lt;Guthur&gt; NoToes, crumbs, I can not replicate anymore
| [Monday 28 February 2011] [17:09:04] &lt;Guthur&gt; it&#8217;s just working now, grrr
| [Monday 28 February 2011] [17:11:21] &lt;NoToes&gt; Guthur, That&#8217;s timing bugs for you!
| [Monday 28 February 2011] [17:14:05] &lt;pieterh&gt;        cremes: thanks for the review, made changes
| [Monday 28 February 2011] [17:14:15] &lt;pieterh&gt;        could you send me that email bounce message so I can see the error?
| [Monday 28 February 2011] [17:15:03] &lt;cremes&gt; pieterh: it wasn&#8217;t a real bounce; the mail app refused to take a message to sustrik probably because it was too large
| [Monday 28 February 2011] [17:15:10] &lt;cremes&gt; pieterh: so... never mind!
| [Monday 28 February 2011] [17:15:13] &lt;pieterh&gt;        ok
| [Monday 28 February 2011] [17:19:58] &lt;pieterh&gt;        cremes: could you send me random something to <a class="reference external" href="mailto:ph&#37;&#52;&#48;imatix&#46;com">ph<span>&#64;</span>imatix<span>&#46;</span>com</a>?
| [Monday 28 February 2011] [17:20:11] &lt;pieterh&gt;        I&#8217;ve fixed our email server but need to test
| [Monday 28 February 2011] [17:20:17] &lt;NoToes&gt; Guthur, I missed your message. No putting a sleep before the loop, instead of in the poll loop didn&#8217;t work.
| [Monday 28 February 2011] [17:20:22] &lt;cremes&gt; pieterh: on its way
| [Monday 28 February 2011] [17:20:23] &lt;pieterh&gt;        zeromq-dev should be working again now
| [Monday 28 February 2011] [17:20:25] &lt;pieterh&gt;        thx!
| [Monday 28 February 2011] [17:20:51] &lt;Guthur&gt; NoToes, There is no error with you either?
| [Monday 28 February 2011] [17:21:10] &lt;NoToes&gt; Guthur, no error.
| [Monday 28 February 2011] [17:21:51] &lt;NoToes&gt; Guthur, zmq_poll just always returns 0.
| [Monday 28 February 2011] [17:21:52] &lt;pieterh&gt;        sustrik: email list is fixed
| [Monday 28 February 2011] [17:22:10] &lt;pieterh&gt;        messages will be coming in slowly as servers retry
| [Monday 28 February 2011] [17:22:17] &lt;Guthur&gt; NoToes, it seems as if I am getting a slightly different issue then
| [Monday 28 February 2011] [17:22:51] &lt;Guthur&gt; Mine returns errno 4, if there the slight delay before starting the polling loop
| [Monday 28 February 2011] [17:23:18] &lt;Guthur&gt; this translates to an &#8220;Interrupted system call&#8221;
| [Monday 28 February 2011] [17:25:52] &lt;NoToes&gt; Guthur, OK, different issue then.
| [Monday 28 February 2011] [17:26:16] &lt;Guthur&gt; which is doubly annoying, hehe
| [Monday 28 February 2011] [17:26:26] &lt;NoToes&gt; Guthur, I suppose I should try to reproduce this outside of Unity then.
| [Monday 28 February 2011] [17:26:56] &lt;Guthur&gt; NoToes, that would be helpful, and much appreciated if you could
| [Monday 28 February 2011] [17:35:26] &lt;Guthur&gt; is there any advisable action an app should take when getting EINTR while polling?
| [Monday 28 February 2011] [17:37:16] &lt;Guthur&gt; NoToes, I have found that if I catch that EINTR and then continue all is fine
| [Monday 28 February 2011] [17:37:46] &lt;Guthur&gt; OSX does signal things properly I assume, and unity isn&#8217;t suppressing them even, or something
| [Monday 28 February 2011] [17:38:04] &lt;Guthur&gt; I admit we are on the borders of my knowledge here
| [Monday 28 February 2011] [17:38:16] &lt;Guthur&gt; probably left the country to be honest
| [Monday 28 February 2011] [17:40:02] &lt;NoToes&gt; Guthur Unfortunately I&#8217;m new to OSX as well.Is EINTER a signal or a return code from zmq_recv?
| [Monday 28 February 2011] [17:41:17] &lt;Guthur&gt; <a class="reference external" href="http://api.zeromq.org/master:zmq-poll">http://api.zeromq.org/master:zmq-poll</a>
| [Monday 28 February 2011] [17:41:39] &lt;Guthur&gt; EINTR is returned if there is a signal
| [Monday 28 February 2011] [17:42:05] &lt;Guthur&gt; well not return actually, the errno is set
| [Monday 28 February 2011] [17:42:14] &lt;Guthur&gt; poll returns -1
| [Monday 28 February 2011] [17:42:18] &lt;NoToes&gt; Guthur, Ah OK.
| [Monday 28 February 2011] [17:43:22] &lt;Guthur&gt; I think the issue I have here in linux MONO is something I can&#8217;t really rectify, but is easily worked around
| [Monday 28 February 2011] [17:44:20] &lt;Guthur&gt; The OSX one is a little less clear
| [Monday 28 February 2011] [17:44:29] &lt;Guthur&gt; have you tried it outside Unity?
| [Monday 28 February 2011] [17:45:47] &lt;Ergo^&gt;  Assertion failed: !pgm_supported () (zmq.cpp:240) - im doing something naughty :-) any ideas ?
| [Monday 28 February 2011] [17:49:10] &lt;NoToes&gt; Guthur, I&#8217;m trying now...
| [Monday 28 February 2011] [17:53:53] &lt;NoToes&gt; Guthur, it&#8217;s working inside Unity now :(
| [Monday 28 February 2011] [17:55:39] &lt;Guthur&gt; I wonder if it&#8217;s a MONO issue
| [Monday 28 February 2011] [17:56:46] &lt;Guthur&gt; but that doesn&#8217;t really make much sense either, it&#8217;s only a relatively simple interop call
| [Monday 28 February 2011] [18:03:03] &lt;NoToes&gt; Guthur I don&#8217;t know enough about zmq to make sense of it. Is it possible that there is a shared native buffer referenced by multiple managed objects (or something like that)? Would explain why the running the GC helps and the timing issues.
| [Monday 28 February 2011] [18:05:54] &lt;Guthur&gt; NoToes, I&#8217;m looking through now
| [Monday 28 February 2011] [18:22:39] &lt;Guthur&gt; NoToes, Not seeing anything at the moment
| [Monday 28 February 2011] [18:22:56] &lt;pieterh&gt;        Ergo^_: build using &#8211;with-openpgm afir
| [Monday 28 February 2011] [18:23:18] &lt;Guthur&gt; it&#8217;s getting late here so i&#8217;ll probably get my head down soon, sorry we&#8217;ve been unable to get this sorted for you
| [Monday 28 February 2011] [18:23:30] &lt;Guthur&gt; hopefully we&#8217;ll get to the bottom of it eventually
| [Monday 28 February 2011] [18:23:32] &lt;Ergo^_&gt; pieterh, i just built 2.1.1 - and suddenly world is better ;-)
| [Monday 28 February 2011] [18:23:39] &lt;pieterh&gt;        :-)
| [Monday 28 February 2011] [18:24:22] &lt;NoToes&gt; Guthur, Thanks for all your help.
| [Monday 28 February 2011] [18:24:35] &lt;Guthur&gt; no probs
| [Monday 28 February 2011] [18:24:54] &lt;Guthur&gt; I might drop by the MONO channel tomorrow and see if I can get an clues
| [Monday 28 February 2011] [18:24:56] &lt;Guthur&gt; an/any
| [Monday 28 February 2011] [18:25:45] &lt;Guthur&gt; ok, it&#8217;s late, night all
| [Monday 28 February 2011] [19:45:54] &lt;cremes&gt; pieterh: https://github.com/zeromq/zeromq2/issues/174
| [Monday 28 February 2011] [19:46:06] &lt;cremes&gt; ha! i finally reproduced the condition i am seeing in my system
| [Monday 28 February 2011] [19:46:17] &lt;cremes&gt; there&#8217;s a bug with ZMQ_LINGER and zmq_connect()
| [Monday 28 February 2011] [19:46:37] &lt;cremes&gt; when ZMQ_LINGER = 0, memory allocated for zmq_connect() will <em>eventually</em> get released (it&#8217;s slow)
| [Monday 28 February 2011] [19:46:51] &lt;pieterh&gt;        cremes: ok, I&#8217;ll look at it tomorrow
| [Monday 28 February 2011] [19:46:52] &lt;cremes&gt; when ZMQ_LINGER &gt; 0, the memory alloc&#8217;ed by zmq_connect() is <em>never</em> released
| [Monday 28 February 2011] [19:47:11] &lt;cremes&gt; oh, you&#8217;re awake... i was just leaving a note for when you got up tomorrow
| [Monday 28 February 2011] [19:47:19] &lt;pieterh&gt;        hah, IRC is now or never
| [Monday 28 February 2011] [19:47:21] &lt;cremes&gt; it&#8217;s all documented in the issue
| [Monday 28 February 2011] [19:47:23] &lt;pieterh&gt;        otherwise, email
| [Monday 28 February 2011] [19:47:27] &lt;cremes&gt; heh
| [Monday 28 February 2011] [19:47:32] &lt;pieterh&gt;        i don&#8217;t usually read back the IRC logs
| [Monday 28 February 2011] [19:47:34] &lt;cremes&gt; get some reset already!
| [Monday 28 February 2011] [19:47:42] &lt;cremes&gt; oh, i think sustrik does
| [Monday 28 February 2011] [19:47:49] &lt;pieterh&gt;        yeah, there&#8217;s an Orval waiting for me
| [Monday 28 February 2011] [19:48:15] &lt;cremes&gt; ok, take it easy... no worries about this issue... it has an easy work around
| [Monday 28 February 2011] [19:48:28] &lt;pieterh&gt;        I almost have the client and worker ready for MDP
| [Monday 28 February 2011] [19:48:31] &lt;pieterh&gt;        heh :-)
| [Monday 28 February 2011] [19:48:44] &lt;pieterh&gt;        the broker will take a full day
| [Monday 28 February 2011] [19:48:49] &lt;cremes&gt; oh, very cool!
| [Monday 28 February 2011] [19:48:57] &lt;pieterh&gt;        after that, the Titanic pattern
| [Monday 28 February 2011] [19:49:00] &lt;cremes&gt; using xreq/xrep for the server or just the client?
| [Monday 28 February 2011] [19:49:12] &lt;cremes&gt; i assume it is...
| [Monday 28 February 2011] [19:49:14] &lt;pieterh&gt;        broker is xrep&lt;==&gt;xrep
| [Monday 28 February 2011] [19:49:17] &lt;pieterh&gt;        client is req
| [Monday 28 February 2011] [19:49:22] &lt;pieterh&gt;        worker is xreq
| [Monday 28 February 2011] [19:49:28] &lt;cremes&gt; oh, that&#8217;s right, one job at a time for the worker
| [Monday 28 February 2011] [19:49:37] &lt;cremes&gt; er, client
| [Monday 28 February 2011] [19:49:46] &lt;pieterh&gt;        I fixed the protocol so the broker can handle clients and workers on a single socket
| [Monday 28 February 2011] [19:50:11] &lt;pieterh&gt;        not quite sure how I make this though, it&#8217;ll need some of the containers from ZFL
| [Monday 28 February 2011] [19:50:50] &lt;pieterh&gt;        i&#8217;ll probably do as for zmsg, create a zlist and zhash clone of the ZFL classes
| [Monday 28 February 2011] [19:51:01] &lt;cremes&gt; yes, that makes sense
| [Monday 28 February 2011] [19:51:07] &lt;pieterh&gt;        yeah
| [Monday 28 February 2011] [19:51:14] &lt;cremes&gt; i&#8217;m sure you&#8217;ll have plenty of stuff to keep track of, e.g. routing envelopes
| [Monday 28 February 2011] [19:51:23] &lt;pieterh&gt;        nah, that&#8217;s all handled by zmsg
| [Monday 28 February 2011] [19:51:28] &lt;pieterh&gt;        pretty much
| [Monday 28 February 2011] [19:51:42] &lt;pieterh&gt;        the difficulty in C is no data structures to reuse
| [Monday 28 February 2011] [19:51:51] &lt;cremes&gt; really? i&#8217;ll have to look at that C a little closer... all of this bug repro work has blown some of the rust off my C skills
| [Monday 28 February 2011] [19:51:55] &lt;pieterh&gt;        it turns a 100-line example into a 500 line one
| [Monday 28 February 2011] [19:52:01] &lt;cremes&gt; yuck
| [Monday 28 February 2011] [19:52:17] &lt;pieterh&gt;        one really needs to create abstractions
| [Monday 28 February 2011] [19:53:09] &lt;cremes&gt; i agree; my ruby code has many layers of abstractions
| [Monday 28 February 2011] [19:53:20] &lt;cremes&gt; i wouldn&#8217;t be able to create some of the complex apps that i do without them
| [Monday 28 February 2011] [19:53:24] &lt;cremes&gt; my brain is too tiny
| [Monday 28 February 2011] [19:53:37] &lt;pieterh&gt;        mine is so small it regularly falls out of my ears
| [Monday 28 February 2011] [19:54:53] &lt;cremes&gt; heh
| [Monday 28 February 2011] [19:55:07] &lt;cremes&gt; ok, time for me to get back to work...
| [Monday 28 February 2011] [20:37:01] &lt;ctarmor&gt;        have anyone seen this error:  Exception in MSVCR100D - c0000005
| [Monday 28 February 2011] [20:37:38] &lt;ctarmor&gt;        It occurs during heave volume</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="2011-January.html"
                        title="previous chapter">2011-January</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="2011-March.html"
                        title="next chapter">2011-March</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/2011-February.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="2011-March.html" title="2011-March"
             >next</a> |</li>
        <li class="right" >
          <a href="2011-January.html" title="2011-January"
             >previous</a> |</li>
        <li><a href="index.html">ZeroMq IRC Log v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Peter Alexander.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>