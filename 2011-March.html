

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2011-March &mdash; ZeroMq IRC Log v0.1 documentation</title>
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="ZeroMq IRC Log v0.1 documentation" href="index.html" />
    <link rel="prev" title="2011-December" href="2011-December.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="2011-December.html" title="2011-December"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">ZeroMq IRC Log v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="march">
<h1>2011-March<a class="headerlink" href="#march" title="Permalink to this headline">Â¶</a></h1>
<div class="line-block">
<div class="line">[Friday 18 March 2011] [06:51:12] &lt;sustrik&gt;   oh well</div>
<div class="line">[Friday 18 March 2011] [06:51:41] &lt;sustrik&gt;   so it&#8217;s up to the rest of erlzmq community to drive the project forward</div>
<div class="line">[Friday 18 March 2011] [06:51:51] &lt;yrashk&gt;    yup</div>
<div class="line">[Friday 18 March 2011] [06:52:01] &lt;yrashk&gt;    but again</div>
<div class="line">[Friday 18 March 2011] [06:52:10] &lt;yrashk&gt;    erlzmq and erlzq2 can&#8217;t be merged by any means</div>
<div class="line">[Friday 18 March 2011] [06:52:15] &lt;yrashk&gt;    they are way too different</div>
<div class="line">[Friday 18 March 2011] [06:52:17] &lt;sustrik&gt;   yes, the codebase itself cannot be merged</div>
<div class="line">[Friday 18 March 2011] [06:52:25] &lt;yrashk&gt;    erlzmq2 won&#8217;t work with older Erlang VMs</div>
<div class="line">[Friday 18 March 2011] [06:52:30] &lt;yrashk&gt;    as it uses a new binding technique</div>
<div class="line">[Friday 18 March 2011] [06:52:30] &lt;sustrik&gt;   what could be merged is functionality</div>
<div class="line">[Friday 18 March 2011] [06:52:39] &lt;yrashk&gt;    I thiknk they are very close functionally</div>
<div class="line">[Friday 18 March 2011] [06:53:00] &lt;sustrik&gt;   close = equivalent?</div>
<div class="line">[Friday 18 March 2011] [06:53:00] &lt;yrashk&gt;    we don&#8217;t have an active mode (like saleyn had for the main erlzmq)</div>
<div class="line">[Friday 18 March 2011] [06:53:11] &lt;yrashk&gt;    APIs is not absolutely equivalent, no</div>
<div class="line">[Friday 18 March 2011] [06:53:22] &lt;yrashk&gt;    module names are different, app name is different</div>
<div class="line">[Friday 18 March 2011] [06:53:24] &lt;sustrik&gt;   the problem is that as long as there&#8217;s functionality missing, those using one binding</div>
<div class="line">[Friday 18 March 2011] [06:53:28] &lt;yrashk&gt;    some calls might look a little bit different</div>
<div class="line">[Friday 18 March 2011] [06:53:29] &lt;sustrik&gt;   cannot switch to anotherone</div>
<div class="line">[Friday 18 March 2011] [06:53:39] &lt;yrashk&gt;    I don&#8217;t think we have any functionality missing, really</div>
<div class="line">[Friday 18 March 2011] [06:53:52] &lt;yrashk&gt;    active mode was controversial anyway</div>
<div class="line">[Friday 18 March 2011] [06:54:01] &lt;yrashk&gt;    I think jugg opposed it a lot</div>
<div class="line">[Friday 18 March 2011] [06:54:14] &lt;sustrik&gt;   doesn&#8217;t it have to do with pushback?</div>
<div class="line">[Friday 18 March 2011] [06:54:27] &lt;sustrik&gt;   won&#8217;t passive mode just exhaust all the memory</div>
<div class="line">[Friday 18 March 2011] [06:54:34] &lt;sustrik&gt;   if sender is faster than receiver?</div>
<div class="line">[Friday 18 March 2011] [06:54:50] &lt;yrashk&gt;    well</div>
<div class="line">[Friday 18 March 2011] [06:55:00] &lt;yrashk&gt;    passive mode is pretty much reliant on the way 0mq works</div>
<div class="line">[Friday 18 March 2011] [06:55:34] &lt;yrashk&gt;    recv/poll</div>
<div class="line">[Friday 18 March 2011] [06:55:50] &lt;yrashk&gt;    there are certain issues why we haven&#8217;t implemented active mode yet</div>
<div class="line">[Friday 18 March 2011] [06:56:07] &lt;yrashk&gt;    we could have done a workaround.. but still not sure if it is worth it</div>
<div class="line">[Friday 18 March 2011] [06:56:22] &lt;yrashk&gt;    it probably is worth a try</div>
<div class="line">[Friday 18 March 2011] [06:56:23] &lt;sustrik&gt;   is there any other way to implement pushback?</div>
<div class="line">[Friday 18 March 2011] [06:56:34] &lt;yrashk&gt;    what od you mean by a pushback?</div>
<div class="line">[Friday 18 March 2011] [06:56:59] &lt;sustrik&gt;   meaning that when the receiving end is not able to keep up with the sender</div>
<div class="line">[Friday 18 March 2011] [06:57:05] &lt;sustrik&gt;   the sender gets blocked</div>
<div class="line">[Friday 18 March 2011] [06:57:19] &lt;sustrik&gt;   until the receiver catches up</div>
<div class="line">[Friday 18 March 2011] [06:57:23] &lt;yrashk&gt;    not sure how to do anything about this</div>
<div class="line">[Friday 18 March 2011] [06:57:36] &lt;sustrik&gt;   i think that was what active mode was for</div>
<div class="line">[Friday 18 March 2011] [06:57:37] &lt;yrashk&gt;    basically what we do is we just pass messages back to erlang</div>
<div class="line">[Friday 18 March 2011] [06:57:42] &lt;yrashk&gt;    either directly or as actual essages</div>
<div class="line">[Friday 18 March 2011] [06:58:03] &lt;yrashk&gt;    active mode is just something that does recv for you, basically</div>
<div class="line">[Friday 18 March 2011] [06:58:25] &lt;yrashk&gt;    so I am not sure</div>
<div class="line">[Friday 18 March 2011] [06:58:45] &lt;sustrik&gt;   the problem is that erlang stores the messages in erlang mailbox</div>
<div class="line">[Friday 18 March 2011] [06:58:50] &lt;yrashk&gt;    yep</div>
<div class="line">[Friday 18 March 2011] [06:58:51] &lt;sustrik&gt;   which grows indefinitely</div>
<div class="line">[Friday 18 March 2011] [06:58:57] &lt;yrashk&gt;    but we don&#8217;t send them unless you request</div>
<div class="line">[Friday 18 March 2011] [06:59:10] &lt;yrashk&gt;    active is what sends them regardless of whether you can keep up</div>
<div class="line">[Friday 18 March 2011] [06:59:16] &lt;yrashk&gt;    our recv() algo is simple</div>
<div class="line">[Friday 18 March 2011] [06:59:27] &lt;yrashk&gt;    1. recv noblock</div>
<div class="line">[Friday 18 March 2011] [06:59:31] &lt;yrashk&gt;    2. if there was something, return</div>
<div class="line">[Friday 18 March 2011] [06:59:40] &lt;yrashk&gt;    3. if not, let the reader thread poll it</div>
<div class="line">[Friday 18 March 2011] [06:59:51] &lt;sustrik&gt;   yes, that&#8217;s ok</div>
<div class="line">[Friday 18 March 2011] [06:59:52] &lt;yrashk&gt;    4. when something appears there, send a message to the original requesting process</div>
<div class="line">[Friday 18 March 2011] [06:59:58] &lt;sustrik&gt;   what about the sender side?</div>
<div class="line">[Friday 18 March 2011] [07:00:16] &lt;yrashk&gt;    sender just does send() and that&#8217;s it</div>
<div class="line">[Friday 18 March 2011] [07:00:27] &lt;sustrik&gt;   it blocks the thread?</div>
<div class="line">[Friday 18 March 2011] [07:00:38] &lt;yrashk&gt;    you mean the scheduler?</div>
<div class="line">[Friday 18 March 2011] [07:00:42] &lt;sustrik&gt;   then you can end up with deadlocked erlang VM</div>
<div class="line">[Friday 18 March 2011] [07:00:51] &lt;sustrik&gt;   i mean physicall thread</div>
<div class="line">[Friday 18 March 2011] [07:00:57] &lt;sustrik&gt;   from erlang&#8217;s thread pool</div>
<div class="line">[Friday 18 March 2011] [07:01:02] &lt;yrashk&gt;    if you don&#8217;t pass noblock, yes it will block the scheduler</div>
<div class="line">[Friday 18 March 2011] [07:01:08] &lt;yrashk&gt;    we don&#8217;t use erlang&#8217;s thead pool</div>
<div class="line">[Friday 18 March 2011] [07:01:20] &lt;yrashk&gt;    NIF calls block the scheduler</div>
<div class="line">[Friday 18 March 2011] [07:01:35] &lt;sustrik&gt;   i mean, erlang VM has to execute in an OS thread(s)</div>
<div class="line">[Friday 18 March 2011] [07:01:46] &lt;yrashk&gt;    so if zmq_send blocks, the VM is blocked (well, one cpu core is blocked, to be precise)</div>
<div class="line">[Friday 18 March 2011] [07:01:59] &lt;sustrik&gt;   exactly</div>
<div class="line">[Friday 18 March 2011] [07:02:00] &lt;yrashk&gt;    yes, erlang vm usually has # of schedulers equal to number of cores</div>
<div class="line">[Friday 18 March 2011] [07:02:08] &lt;sustrik&gt;   so, if there&#8217;s 1 CPU</div>
<div class="line">[Friday 18 March 2011] [07:02:20] &lt;yrashk&gt;    and 1 core?</div>
<div class="line">[Friday 18 March 2011] [07:02:27] &lt;sustrik&gt;   and you call invoke 0mq in a blocking way</div>
<div class="line">[Friday 18 March 2011] [07:02:41] &lt;sustrik&gt;   the whole OS process gets bloecked</div>
<div class="line">[Friday 18 March 2011] [07:02:43] &lt;yrashk&gt;    it will fuck up, yes</div>
<div class="line">[Friday 18 March 2011] [07:02:52] &lt;yrashk&gt;    we were thinking about non-blocking send()</div>
<div class="line">[Friday 18 March 2011] [07:02:58] &lt;yrashk&gt;    just haven&#8217;t done it yet</div>
<div class="line">[Friday 18 March 2011] [07:03:08] &lt;yrashk&gt;    there&#8217;s nothing that prevents us from doing it</div>
<div class="line">[Friday 18 March 2011] [07:03:30] &lt;sustrik&gt;   that would mean busy-looping and 100% CPU usage, no?</div>
<div class="line">[Friday 18 March 2011] [07:03:54] &lt;yrashk&gt;    nah</div>
<div class="line">[Friday 18 March 2011] [07:04:02] &lt;yrashk&gt;    we poll on internal inproc sockets</div>
<div class="line">[Friday 18 March 2011] [07:04:06] &lt;yrashk&gt;    for commands</div>
<div class="line">[Friday 18 March 2011] [07:04:13] &lt;yrashk&gt;    in the receiver thread</div>
<div class="line">[Friday 18 March 2011] [07:04:17] &lt;yrashk&gt;    which does async recv</div>
<div class="line">[Friday 18 March 2011] [07:04:37] &lt;yrashk&gt;    so we can do the same thing for send, pretty much</div>
<div class="line">[Friday 18 March 2011] [07:04:41] &lt;yrashk&gt;    may be even in the same thread</div>
<div class="line">[Friday 18 March 2011] [07:04:43] &lt;sustrik&gt;   aha</div>
<div class="line">[Friday 18 March 2011] [07:04:55] &lt;yrashk&gt;    no biggie</div>
<div class="line">[Friday 18 March 2011] [07:05:00] &lt;sustrik&gt;   that way the polling doesn&#8217;t block the erlang scheduler, right?</div>
<div class="line">[Friday 18 March 2011] [07:05:02] &lt;yrashk&gt;    will take probabyl an hour or two to implement</div>
<div class="line">[Friday 18 March 2011] [07:05:07] &lt;yrashk&gt;    it does not</div>
<div class="line">[Friday 18 March 2011] [07:05:10] &lt;yrashk&gt;    it never does</div>
<div class="line">[Friday 18 March 2011] [07:05:14] &lt;sustrik&gt;   nice</div>
<div class="line">[Friday 18 March 2011] [07:05:21] &lt;yrashk&gt;    it&#8217;s always in that second thread</div>
<div class="line">[Friday 18 March 2011] [07:05:27] &lt;yrashk&gt;    we have one thread per context</div>
<div class="line">[Friday 18 March 2011] [07:05:38] &lt;yrashk&gt;    which I guess is good enough</div>
<div class="line">[Friday 18 March 2011] [07:05:43] &lt;yrashk&gt;    originally I had a thread per socket</div>
<div class="line">[Friday 18 March 2011] [07:05:47] &lt;yrashk&gt;    and that was a tad nasty</div>
<div class="line">[Friday 18 March 2011] [07:05:56] &lt;yrashk&gt;    but evax refactored this nicely</div>
<div class="line">[Friday 18 March 2011] [07:06:05] &lt;sustrik&gt;   so erlang allows you to say &#8220;please invoke this code when this file descriptor becomes active&#8221;?</div>
<div class="line">[Friday 18 March 2011] [07:06:23] &lt;sustrik&gt;   and erlang scheduler will do that for you</div>
<div class="line">[Friday 18 March 2011] [07:06:28] &lt;yrashk&gt;    no, it&#8217;s all manual</div>
<div class="line">[Friday 18 March 2011] [07:06:41] &lt;yrashk&gt;    there&#8217;s some FD stuff in there, but not for NIFs afaik</div>
<div class="line">[Friday 18 March 2011] [07:06:59] &lt;yrashk&gt;    basically, when we poll in that thread</div>
<div class="line">[Friday 18 March 2011] [07:07:01] &lt;sustrik&gt;   the question is whether waiting for FD blocks the OS thread or not</div>
<div class="line">[Friday 18 March 2011] [07:07:16] &lt;yrashk&gt;    you mean zmq_poll?</div>
<div class="line">[Friday 18 March 2011] [07:07:22] &lt;sustrik&gt;   are you using zmq_poll?</div>
<div class="line">[Friday 18 March 2011] [07:07:24] &lt;yrashk&gt;    yes</div>
<div class="line">[Friday 18 March 2011] [07:07:33] &lt;sustrik&gt;   zmq_poll is blocking</div>
<div class="line">[Friday 18 March 2011] [07:07:38] &lt;yrashk&gt;    yes, and that&#8217;s fine</div>
<div class="line">[Friday 18 March 2011] [07:07:43] &lt;yrashk&gt;    because we&#8217;re in a separate thread</div>
<div class="line">[Friday 18 March 2011] [07:07:54] &lt;yrashk&gt;    which erlang has no idea about</div>
<div class="line">[Friday 18 March 2011] [07:07:55] &lt;sustrik&gt;   outside of erlang VM?</div>
<div class="line">[Friday 18 March 2011] [07:07:59] &lt;sustrik&gt;   i see</div>
<div class="line">[Friday 18 March 2011] [07:08:01] &lt;yrashk&gt;    well, it&#8217;s in the same process</div>
<div class="line">[Friday 18 March 2011] [07:08:11] &lt;yrashk&gt;    but it&#8217;s separate from the scheduler</div>
<div class="line">[Friday 18 March 2011] [07:08:24] &lt;yrashk&gt;    so all NIF calls are generally very short</div>
<div class="line">[Friday 18 March 2011] [07:08:35] &lt;sustrik&gt;   yep, that could work</div>
<div class="line">[Friday 18 March 2011] [07:08:35] &lt;yrashk&gt;    except for send() which might theoretically block</div>
<div class="line">[Friday 18 March 2011] [07:08:43] &lt;yrashk&gt;    but that&#8217;s something we can definitely fix</div>
<div class="line">[Friday 18 March 2011] [07:08:51] &lt;yrashk&gt;    I just never saw zmq_send() blocking</div>
<div class="line">[Friday 18 March 2011] [07:08:51] &lt;sustrik&gt;   but can be done in same way as recv()</div>
<div class="line">[Friday 18 March 2011] [07:08:54] &lt;yrashk&gt;    yes</div>
<div class="line">[Friday 18 March 2011] [07:08:55] &lt;yrashk&gt;    absolutely</div>
<div class="line">[Friday 18 March 2011] [07:09:01] &lt;sustrik&gt;   you get that for high loads</div>
<div class="line">[Friday 18 March 2011] [07:09:06] &lt;yrashk&gt;    like I said, it&#8217;s an easy change</div>
<div class="line">[Friday 18 March 2011] [07:09:13] &lt;yrashk&gt;    since we have worked out the approach</div>
<div class="line">[Friday 18 March 2011] [07:09:20] &lt;sustrik&gt;   would be good to get that in</div>
<div class="line">[Friday 18 March 2011] [07:09:27] &lt;sustrik&gt;   it&#8217;s essential for some applications</div>
<div class="line">[Friday 18 March 2011] [07:09:31] &lt;yrashk&gt;    I see</div>
<div class="line">[Friday 18 March 2011] [07:09:35] &lt;sustrik&gt;   such as rabbitmq/0mq bridge</div>
<div class="line">[Friday 18 March 2011] [07:09:37] &lt;yrashk&gt;    I am adding a github issue right now</div>
<div class="line">[Friday 18 March 2011] [07:10:17] &lt;yrashk&gt;    <a class="reference external" href="https://github.com/zeromq/erlzmq2/issues/1">https://github.com/zeromq/erlzmq2/issues/1</a></div>
<div class="line">[Friday 18 March 2011] [07:10:21] &lt;sustrik&gt;   :)</div>
<div class="line">[Friday 18 March 2011] [07:10:41] &lt;sustrik&gt;   what about the third erlzmq binding?</div>
<div class="line">[Friday 18 March 2011] [07:10:48] &lt;sustrik&gt;   any additional functionality there?</div>
<div class="line">[Friday 18 March 2011] [07:11:16] &lt;yrashk&gt;    cstar/jugg&#8217;s?</div>
<div class="line">[Friday 18 March 2011] [07:11:21] &lt;sustrik&gt;   i guess</div>
<div class="line">[Friday 18 March 2011] [07:11:30] &lt;yrashk&gt;    I don&#8217;t remember any special functionality there</div>
<div class="line">[Friday 18 March 2011] [07:11:37] &lt;yrashk&gt;    it looked more polished than the official one</div>
<div class="line">[Friday 18 March 2011] [07:11:41] &lt;yrashk&gt;    to my eye</div>
<div class="line">[Friday 18 March 2011] [07:11:55] &lt;yrashk&gt;    so I guess it&#8217;s good for older erlangs</div>
<div class="line">[Friday 18 March 2011] [07:12:11] &lt;sustrik&gt;   aha, that&#8217;s the catch, right?</div>
<div class="line">[Friday 18 March 2011] [07:12:11] &lt;yrashk&gt;    or if you have any reasons to use port driver instead of NIF</div>
<div class="line">[Friday 18 March 2011] [07:12:16] &lt;sustrik&gt;   old arlangs don&#8217;t have NIF</div>
<div class="line">[Friday 18 March 2011] [07:12:19] &lt;yrashk&gt;    yeah they don&#8217;t</div>
<div class="line">[Friday 18 March 2011] [07:12:42] &lt;sustrik&gt;   well, if you believe there&#8217;s all the functionality in erlzmq2</div>
<div class="line">[Friday 18 March 2011] [07:12:44] &lt;yrashk&gt;    and some of those have (like last R13Bs and early R14As) but the API was changing a lot</div>
<div class="line">[Friday 18 March 2011] [07:12:58] &lt;yrashk&gt;    so we&#8217;re pretty much &gt;=R14B01 or so</div>
<div class="line">[Friday 18 March 2011] [07:13:12] &lt;sustrik&gt;   let&#8217;s discuss making it a primary erlang binding on the mailing list</div>
<div class="line">[Friday 18 March 2011] [07:13:22] &lt;yrashk&gt;    also, jugg was never able to clock performance comparable to erlzmq2</div>
<div class="line">[Friday 18 March 2011] [07:13:29] &lt;sustrik&gt;   yes, i recall that</div>
<div class="line">[Friday 18 March 2011] [07:13:30] &lt;yrashk&gt;    lets do that</div>
<div class="line">[Friday 18 March 2011] [07:13:37] &lt;yrashk&gt;    we have like 1.3mln/sec for 1bytes</div>
<div class="line">[Friday 18 March 2011] [07:13:41] &lt;yrashk&gt;    which is not bad</div>
<div class="line">[Friday 18 March 2011] [07:13:46] &lt;yrashk&gt;    not great, but decent</div>
<div class="line">[Friday 18 March 2011] [07:13:51] &lt;sustrik&gt;   it&#8217;s very nice</div>
<div class="line">[Friday 18 March 2011] [07:13:55] &lt;yrashk&gt;    (on my mac pro)</div>
<div class="line">[Friday 18 March 2011] [07:13:58] &lt;sustrik&gt;   comparable to other non-C languages</div>
<div class="line">[Friday 18 March 2011] [07:14:02] &lt;yrashk&gt;    c-to-c on my mac pro is like twice as fast</div>
<div class="line">[Friday 18 March 2011] [07:14:23] &lt;yrashk&gt;    2.5+mln/sec</div>
<div class="line">[Friday 18 March 2011] [07:14:31] &lt;yrashk&gt;    but we weren&#8217;t able to squeeze out more yet</div>
<div class="line">[Friday 18 March 2011] [07:14:36] &lt;yrashk&gt;    and I am not sure we can</div>
<div class="line">[Friday 18 March 2011] [07:14:56] &lt;sustrik&gt;   you have to keep in mind that erlang runtime does a lot of stuff</div>
<div class="line">[Friday 18 March 2011] [07:15:00] &lt;sustrik&gt;   scheduling etc.</div>
<div class="line">[Friday 18 March 2011] [07:15:08] &lt;sustrik&gt;   which takes some time itself</div>
<div class="line">[Friday 18 March 2011] [07:15:17] &lt;yrashk&gt;    of course</div>
<div class="line">[Friday 18 March 2011] [07:15:28] &lt;yrashk&gt;    I know erlang fairly well</div>
<div class="line">[Friday 18 March 2011] [07:15:31] &lt;yrashk&gt;    or so I think</div>
<div class="line">[Friday 18 March 2011] [07:15:37] &lt;sustrik&gt;   with throughput over 1M/sec</div>
<div class="line">[Friday 18 March 2011] [07:15:46] &lt;sustrik&gt;   you are getting to nanosecond ranges</div>
<div class="line">[Friday 18 March 2011] [07:15:53] &lt;yrashk&gt;    well that&#8217;s for 1bytes</div>
<div class="line">[Friday 18 March 2011] [07:15:59] &lt;yrashk&gt;    1Kb is like 300K/sec</div>
<div class="line">[Friday 18 March 2011] [07:16:13] &lt;yrashk&gt;    which is still okay I guess</div>
<div class="line">[Friday 18 March 2011] [07:16:22] &lt;sustrik&gt;   100% bandwidth utilisation i would guess</div>
<div class="line">[Friday 18 March 2011] [07:16:28] &lt;sustrik&gt;   1GbE?</div>
<div class="line">[Friday 18 March 2011] [07:16:36] &lt;yrashk&gt;    it&#8217;s all localhost tests :)</div>
<div class="line">[Friday 18 March 2011] [07:16:57] &lt;yrashk&gt;    both for c-to-c and erlang-to-erlang</div>
<div class="line">[Friday 18 March 2011] [07:17:04] &lt;sustrik&gt;   ack</div>
<div class="line">[Friday 18 March 2011] [07:17:07] &lt;yrashk&gt;    for comparison</div>
<div class="line">[Friday 18 March 2011] [07:17:11] &lt;yrashk&gt;    tcp transport</div>
<div class="line">[Friday 18 March 2011] [07:17:14] &lt;sustrik&gt;   the larger the message, the less the erlang overhead</div>
<div class="line">[Friday 18 March 2011] [07:17:16] &lt;yrashk&gt;    ipc was about the same</div>
<div class="line">[Friday 18 March 2011] [07:17:41] &lt;sustrik&gt;   anyway, 1.3M is great</div>
<div class="line">[Friday 18 March 2011] [07:18:30]      * yrashk performs a happy dance</div>
<div class="line">[Friday 18 March 2011] [07:19:11] &lt;yrashk&gt;    anyway</div>
<div class="line">[Friday 18 March 2011] [07:19:18] &lt;yrashk&gt;    lets discuss binding issue on the mailing list?</div>
<div class="line">[Friday 18 March 2011] [07:19:28] &lt;yrashk&gt;    I am subscribed (digest mode)</div>
<div class="line">[Friday 18 March 2011] [07:19:59] &lt;yrashk&gt;    will be back in about 30 mins</div>
<div class="line">[Friday 18 March 2011] [07:21:22] &lt;sustrik&gt;   yrashk: yes, send the proposal to the mailing listr</div>
<div class="line">[Friday 18 March 2011] [07:27:32] &lt;Guthur&gt;    talking of bindings, sustrik do you think it would be wise to discuss marking clrzmq as deprecated and that users should consider either the interop binding or clrzmq2</div>
<div class="line">[Friday 18 March 2011] [07:27:52] &lt;Guthur&gt;    the rational being that the original binding isn&#8217;t really actively developed</div>
<div class="line">[Friday 18 March 2011] [07:28:10] &lt;sustrik&gt;   it&#8217;s a community project, discuss it on the mailing list</div>
<div class="line">[Friday 18 March 2011] [07:28:14] &lt;Guthur&gt;    sure</div>
<div class="line">[Friday 18 March 2011] [07:28:19] &lt;sustrik&gt;   and if there&#8217;s no opposition, let&#8217;s do it</div>
<div class="line">[Friday 18 March 2011] [07:28:22] &lt;Guthur&gt;    just interested in what you think</div>
<div class="line">[Friday 18 March 2011] [07:28:45] &lt;sustrik&gt;   i would rather have actively maintained bindings as &#8220;official&#8221; :)</div>
<div class="line">[Friday 18 March 2011] [07:28:49] &lt;Guthur&gt;    ok, I&#8217;m raise it on the list later today</div>
<div class="line">[Friday 18 March 2011] [07:48:26] &lt;<a href="#id27"><span class="problematic" id="id28">pieterh_</span></a>&gt;  sustrik: ping</div>
<div class="line">[Friday 18 March 2011] [07:48:32] &lt;sustrik&gt;   pong</div>
<div class="line">[Friday 18 March 2011] [07:48:41] &lt;<a href="#id29"><span class="problematic" id="id30">pieterh_</span></a>&gt;  random question about pub/sub...</div>
<div class="line">[Friday 18 March 2011] [07:48:54] &lt;<a href="#id31"><span class="problematic" id="id32">pieterh_</span></a>&gt;  if I send a two-frame message, first key then value, I expect to receive two frames, right?</div>
<div class="line">[Friday 18 March 2011] [07:49:09] &lt;sustrik&gt;   yes</div>
<div class="line">[Friday 18 March 2011] [07:49:26] &lt;<a href="#id33"><span class="problematic" id="id34">pieterh_</span></a>&gt;  ok, I have a test case where it appears to sometimes fail at connection startup</div>
<div class="line">[Friday 18 March 2011] [07:49:39] &lt;<a href="#id35"><span class="problematic" id="id36">pieterh_</span></a>&gt;  loses first frame, sometimes</div>
<div class="line">[Friday 18 March 2011] [07:49:40] &lt;<a href="#id37"><span class="problematic" id="id38">pieterh_</span></a>&gt;  i</div>
<div class="line">[Friday 18 March 2011] [07:49:43] &lt;sustrik&gt;   ok</div>
<div class="line">[Friday 18 March 2011] [07:49:50] &lt;<a href="#id39"><span class="problematic" id="id40">pieterh_</span></a>&gt;  I&#8217;ll post the server and client, hang on...</div>
<div class="line">[Friday 18 March 2011] [07:50:45] &lt;Guthur&gt;    <a href="#id41"><span class="problematic" id="id42">pieterh_</span></a>: with your lazy pirate patterns did you notice that reconnecting after CPU overload rarely happened?</div>
<div class="line">[Friday 18 March 2011] [07:51:20] &lt;Guthur&gt;    I&#8217;ve noticed this behaviour, even with the C examples</div>
<div class="line">[Friday 18 March 2011] [07:51:24] &lt;<a href="#id43"><span class="problematic" id="id44">pieterh_</span></a>&gt;  Guthur: what do you mean?</div>
<div class="line">[Friday 18 March 2011] [07:51:29] &lt;<a href="#id45"><span class="problematic" id="id46">pieterh_</span></a>&gt;  the client doesn&#8217;t reconnect?</div>
<div class="line">[Friday 18 March 2011] [07:51:46] &lt;Guthur&gt;    yeah, it tries and thinks the server is not there</div>
<div class="line">[Friday 18 March 2011] [07:51:50] &lt;<a href="#id47"><span class="problematic" id="id48">pieterh_</span></a>&gt;  normal, because its timeouts are quite aggressive, and simulation of CPU overload is quite a long pause afair</div>
<div class="line">[Friday 18 March 2011] [07:51:54] &lt;Guthur&gt;    if I remove the 1sec sleep it connects</div>
<div class="line">[Friday 18 March 2011] [07:52:05] &lt;<a href="#id49"><span class="problematic" id="id50">pieterh_</span></a>&gt;  try making the client more patient...</div>
<div class="line">[Friday 18 March 2011] [07:52:11] &lt;Guthur&gt;    1sec (heavy work)</div>
<div class="line">[Friday 18 March 2011] [07:52:15] &lt;<a href="#id51"><span class="problematic" id="id52">pieterh_</span></a>&gt;  i&#8217;ll retest, hang on a sec...</div>
<div class="line">[Friday 18 March 2011] [07:53:10] &lt;<a href="#id53"><span class="problematic" id="id54">pieterh_</span></a>&gt;  sustrik: so, <a class="reference external" href="https://gist.github.com/875932">https://gist.github.com/875932</a></div>
<div class="line">[Friday 18 March 2011] [07:53:16] &lt;<a href="#id55"><span class="problematic" id="id56">pieterh_</span></a>&gt;  start the server, then the client</div>
<div class="line">[Friday 18 March 2011] [07:53:25] &lt;sustrik&gt;   ok, will give it a look</div>
<div class="line">[Friday 18 March 2011] [07:53:44] &lt;<a href="#id57"><span class="problematic" id="id58">pieterh_</span></a>&gt;  thanks, this is hitting one of my examples and I can&#8217;t see my fault</div>
<div class="line">[Friday 18 March 2011] [07:53:53] &lt;<a href="#id59"><span class="problematic" id="id60">pieterh_</span></a>&gt;  so made a simplistic case, it still hits...</div>
<div class="line">[Friday 18 March 2011] [07:58:07] &lt;<a href="#id61"><span class="problematic" id="id62">pieterh_</span></a>&gt;  Guthur: it&#8217;s just because the client is too impatient</div>
<div class="line">[Friday 18 March 2011] [07:59:03] &lt;Guthur&gt;    <a href="#id63"><span class="problematic" id="id64">pieterh_</span></a>: ok, cheers for testing</div>
<div class="line">[Friday 18 March 2011] [07:59:50] &lt;<a href="#id65"><span class="problematic" id="id66">pieterh_</span></a>&gt;  Guthur: I&#8217;ll change the &#8216;CPU overload&#8217; delay to 2 seconds instead of 5</div>
<div class="line">[Friday 18 March 2011] [07:59:57] &lt;<a href="#id67"><span class="problematic" id="id68">pieterh_</span></a>&gt;  this lets the client recover</div>
<div class="line">[Friday 18 March 2011] [08:00:09] &lt;Guthur&gt;    sounds good</div>
<div class="line">[Friday 18 March 2011] [08:01:02] &lt;yrashk&gt;    sustrik: what exactly should be in that proposal?</div>
<div class="line">[Friday 18 March 2011] [08:01:08] &lt;Guthur&gt;    it had me scratching my head for a while yesterday, for a moment I thought the Mono runtime was just insanely slow</div>
<div class="line">[Friday 18 March 2011] [08:01:18] &lt;Guthur&gt;    but then seen the same in C</div>
<div class="line">[Friday 18 March 2011] [08:02:18] &lt;<a href="#id69"><span class="problematic" id="id70">pieterh_</span></a>&gt;  yeah, it&#8217;s good to be able to compare the different languages</div>
<div class="line">[Friday 18 March 2011] [08:02:19] &lt;sustrik&gt;   yrashk: &#8220;i propose making erlzmq2 an official erlang binding while keeping erlzmq as a binding for old versions of erlang&#8221;</div>
<div class="line">[Friday 18 March 2011] [08:02:25] &lt;sustrik&gt;   then list your arguments</div>
<div class="line">[Friday 18 March 2011] [08:02:28] &lt;yrashk&gt;    ok</div>
<div class="line">[Friday 18 March 2011] [08:02:29] &lt;sustrik&gt;   and ask people to comment</div>
<div class="line">[Friday 18 March 2011] [08:02:36] &lt;<a href="#id71"><span class="problematic" id="id72">pieterh_</span></a>&gt;  sustrik: I think that was already agreed...</div>
<div class="line">[Friday 18 March 2011] [08:02:46] &lt;yrashk&gt;    can I refer to you as it was your idea?</div>
<div class="line">[Friday 18 March 2011] [08:02:51] &lt;<a href="#id73"><span class="problematic" id="id74">pieterh_</span></a>&gt;  so erlzmq kind of became v1</div>
<div class="line">[Friday 18 March 2011] [08:03:01] &lt;sustrik&gt;   did it?</div>
<div class="line">[Friday 18 March 2011] [08:03:04] &lt;yrashk&gt;    wel</div>
<div class="line">[Friday 18 March 2011] [08:03:05] &lt;yrashk&gt;    well</div>
<div class="line">[Friday 18 March 2011] [08:03:05] &lt;<a href="#id75"><span class="problematic" id="id76">pieterh_</span></a>&gt;  yrashk: I missed something, why are you asking for people to comment on this?</div>
<div class="line">[Friday 18 March 2011] [08:03:09] &lt;yrashk&gt;    ont the wiki, eys</div>
<div class="line">[Friday 18 March 2011] [08:03:16] &lt;yrashk&gt;    <a href="#id77"><span class="problematic" id="id78">pieterh_</span></a>: I am not, sustrik does</div>
<div class="line">[Friday 18 March 2011] [08:03:41] &lt;<a href="#id79"><span class="problematic" id="id80">pieterh_</span></a>&gt;  sustrik: we already afaik got agreement from the erlzmq authors to make v2</div>
<div class="line">[Friday 18 March 2011] [08:03:52] &lt;yrashk&gt;    <a href="#id81"><span class="problematic" id="id82">pieterh_</span></a>: just one of them</div>
<div class="line">[Friday 18 March 2011] [08:04:01] &lt;<a href="#id83"><span class="problematic" id="id84">pieterh_</span></a>&gt;  yrashk: ah... did you ask the others?</div>
<div class="line">[Friday 18 March 2011] [08:04:03] &lt;yrashk&gt;    <a href="#id85"><span class="problematic" id="id86">pieterh_</span></a>: saleyn is unable to answer for some sad reasons</div>
<div class="line">[Friday 18 March 2011] [08:04:10] &lt;<a href="#id87"><span class="problematic" id="id88">pieterh_</span></a>&gt;  ok</div>
<div class="line">[Friday 18 March 2011] [08:04:26] &lt;sustrik&gt;   if it was discussed already, then there&#8217;s no point in discussing it anew</div>
<div class="line">[Friday 18 March 2011] [08:04:31] &lt;<a href="#id89"><span class="problematic" id="id90">pieterh_</span></a>&gt;  indeed</div>
<div class="line">[Friday 18 March 2011] [08:04:34] &lt;yrashk&gt;    ok</div>
<div class="line">[Friday 18 March 2011] [08:04:35] &lt;sustrik&gt;   i just missed the original discussion</div>
<div class="line">[Friday 18 March 2011] [08:04:39] &lt;yrashk&gt;    ya it was discussed here</div>
<div class="line">[Friday 18 March 2011] [08:04:51] &lt;<a href="#id91"><span class="problematic" id="id92">pieterh_</span></a>&gt;  it&#8217;s already an official repository, and the name was made coherent, the wiki correct, etc.</div>
<div class="line">[Friday 18 March 2011] [08:05:08] &lt;sustrik&gt;   then there&#8217;s no problem</div>
<div class="line">[Friday 18 March 2011] [08:05:14] &lt;yrashk&gt;    sweet</div>
<div class="line">[Friday 18 March 2011] [08:05:17] &lt;yrashk&gt;    less work for me then</div>
<div class="line">[Friday 18 March 2011] [08:05:23] &lt;yrashk&gt;    we&#8217;ll then improve send() some time later</div>
<div class="line">[Friday 18 March 2011] [08:05:26] &lt;<a href="#id93"><span class="problematic" id="id94">pieterh_</span></a>&gt;  given that it&#8217;s much faster and sticks to the same API, there was no real argument...</div>
<div class="line">[Friday 18 March 2011] [08:05:35] &lt;sustrik&gt;   i see</div>
<div class="line">[Friday 18 March 2011] [08:05:38] &lt;yrashk&gt;    to make it behave better on blocking sends</div>
<div class="line">[Friday 18 March 2011] [08:05:38] &lt;evax&gt;      yrashk, sustrik: doing it now</div>
<div class="line">[Friday 18 March 2011] [08:05:45] &lt;yrashk&gt;    evax: oh the issue #1?</div>
<div class="line">[Friday 18 March 2011] [08:05:50] &lt;evax&gt;      yes</div>
<div class="line">[Friday 18 March 2011] [08:06:01] &lt;yrashk&gt;    evax: I bet it should be easy to replicate the same method as we do with recv</div>
<div class="line">[Friday 18 March 2011] [08:06:05] &lt;yrashk&gt;    may be even the same thread</div>
<div class="line">[Friday 18 March 2011] [08:06:28] &lt;evax&gt;      same thread, yes</div>
<div class="line">[Friday 18 March 2011] [08:06:32] &lt;yrashk&gt;    sweet</div>
<div class="line">[Friday 18 March 2011] [08:06:47] &lt;yrashk&gt;    should be fairly trivial then</div>
<div class="line">[Friday 18 March 2011] [08:06:56] &lt;yrashk&gt;    just adding an enum flag to recv structure</div>
<div class="line">[Friday 18 March 2011] [08:07:07] &lt;yrashk&gt;    and renaming recv structure to something like command or someting</div>
<div class="line">[Friday 18 March 2011] [08:07:16] &lt;yrashk&gt;    also, evax</div>
<div class="line">[Friday 18 March 2011] [08:07:22] &lt;evax&gt;      yes, along those lines</div>
<div class="line">[Friday 18 March 2011] [08:07:24] &lt;yrashk&gt;    do you plan to do exactly the same scheme?</div>
<div class="line">[Friday 18 March 2011] [08:07:26] &lt;yrashk&gt;    i.e.</div>
<div class="line">[Friday 18 March 2011] [08:07:30] &lt;yrashk&gt;    recv noblock first</div>
<div class="line">[Friday 18 March 2011] [08:07:33] &lt;evax&gt;      sure</div>
<div class="line">[Friday 18 March 2011] [08:07:35] &lt;yrashk&gt;    err</div>
<div class="line">[Friday 18 March 2011] [08:07:37] &lt;yrashk&gt;    send*</div>
<div class="line">[Friday 18 March 2011] [08:07:41] &lt;yrashk&gt;    if it says EAGAIN</div>
<div class="line">[Friday 18 March 2011] [08:07:43] &lt;yrashk&gt;    then pool it</div>
<div class="line">[Friday 18 March 2011] [08:07:56] &lt;evax&gt;      shouldn&#8217;t I ?</div>
<div class="line">[Friday 18 March 2011] [08:08:04] &lt;yrashk&gt;    so that we don&#8217;t pool when it is unnecessary</div>
<div class="line">[Friday 18 March 2011] [08:08:10] &lt;yrashk&gt;    I think it&#8217;s a good approach</div>
<div class="line">[Friday 18 March 2011] [08:08:22] &lt;yrashk&gt;    zmq_send(.., ZMQ_NOBLOCK) -&gt; if EGAGAIN, pool</div>
<div class="line">[Friday 18 March 2011] [08:08:27] &lt;yrashk&gt;    otherwise, be done with it</div>
<div class="line">[Friday 18 March 2011] [08:08:30] &lt;yrashk&gt;    EAGAIN*</div>
<div class="line">[Friday 18 March 2011] [08:08:49] &lt;yrashk&gt;    that looks really very much the same way recv does</div>
<div class="line">[Friday 18 March 2011] [08:11:21] &lt;evax&gt;      except we have to store the msg somewhere</div>
<div class="line">[Friday 18 March 2011] [08:12:17] &lt;yrashk&gt;    in the same struct</div>
<div class="line">[Friday 18 March 2011] [08:12:25] &lt;yrashk&gt;    recv, but renamed</div>
<div class="line">[Friday 18 March 2011] [08:12:35] &lt;yrashk&gt;    and extended accordingly</div>
<div class="line">[Friday 18 March 2011] [08:12:57] &lt;evax&gt;      this goes over the ipc socket, so for big messages its ugly</div>
<div class="line">[Friday 18 March 2011] [08:13:01] &lt;yrashk&gt;    just copy the zms_msg</div>
<div class="line">[Friday 18 March 2011] [08:13:07] &lt;yrashk&gt;    it is</div>
<div class="line">[Friday 18 March 2011] [08:13:13] &lt;yrashk&gt;    but its not ipc</div>
<div class="line">[Friday 18 March 2011] [08:13:16] &lt;yrashk&gt;    inproc</div>
<div class="line">[Friday 18 March 2011] [08:13:21] &lt;evax&gt;      yeah</div>
<div class="line">[Friday 18 March 2011] [08:13:24] &lt;yrashk&gt;    we just pass a pointer</div>
<div class="line">[Friday 18 March 2011] [08:13:31] &lt;yrashk&gt;    how about that?</div>
<div class="line">[Friday 18 March 2011] [08:13:59] &lt;yrashk&gt;    and then zmq_msg_close it when done sending it in a loop</div>
<div class="line">[Friday 18 March 2011] [08:14:23] &lt;yrashk&gt;    theres more important problem</div>
<div class="line">[Friday 18 March 2011] [08:14:33] &lt;yrashk&gt;    in that thread we poll</div>
<div class="line">[Friday 18 March 2011] [08:14:47] &lt;yrashk&gt;    but if we do the blocking send there</div>
<div class="line">[Friday 18 March 2011] [08:15:09] &lt;yrashk&gt;    then receivers will get blocked untill the send is over</div>
<div class="line">[Friday 18 March 2011] [08:15:12] &lt;yrashk&gt;    mhm</div>
<div class="line">[Friday 18 March 2011] [08:15:18] &lt;evax&gt;      reading zmq.h shouldn&#8217;t be a problem to pass the msg in, ideed</div>
<div class="line">[Friday 18 March 2011] [08:15:39] &lt;yrashk&gt;    yeah, so pointer in that struct for msg is cool</div>
<div class="line">[Friday 18 March 2011] [08:15:50] &lt;yrashk&gt;    but this problem above bothers me</div>
<div class="line">[Friday 18 March 2011] [08:15:53] &lt;yrashk&gt;    not nice</div>
<div class="line">[Friday 18 March 2011] [08:16:50] &lt;yrashk&gt;    also separate sending thread isnt solving this completely</div>
<div class="line">[Friday 18 March 2011] [08:17:02] &lt;yrashk&gt;    it will help us from blocking poller</div>
<div class="line">[Friday 18 March 2011] [08:17:23] &lt;yrashk&gt;    but it will not b able to send more than one thing at a time</div>
<div class="line">[Friday 18 March 2011] [08:17:33] &lt;yrashk&gt;    since sending is blocked</div>
<div class="line">[Friday 18 March 2011] [08:17:44] &lt;yrashk&gt;    if only we had a reverse poll</div>
<div class="line">[Friday 18 March 2011] [08:17:47] &lt;yrashk&gt;    wait</div>
<div class="line">[Friday 18 March 2011] [08:18:00] &lt;yrashk&gt;    dont we have that kind of event in poll?</div>
<div class="line">[Friday 18 March 2011] [08:18:08] &lt;evax&gt;      it has to be in the same thread</div>
<div class="line">[Friday 18 March 2011] [08:18:14] &lt;yrashk&gt;    not sure how it will help tho</div>
<div class="line">[Friday 18 March 2011] [08:18:43] &lt;evax&gt;      and I&#8217;m not sure sending and recving are allowed at the same time</div>
<div class="line">[Friday 18 March 2011] [08:19:05] &lt;evax&gt;      if one must not use a socket in multiple threads</div>
<div class="line">[Friday 18 March 2011] [08:19:37] &lt;yrashk&gt;    hey</div>
<div class="line">[Friday 18 March 2011] [08:19:52] &lt;yrashk&gt;    how about using zmq_pollout event?</div>
<div class="line">[Friday 18 March 2011] [08:20:03] &lt;evax&gt;      sure</div>
<div class="line">[Friday 18 March 2011] [08:20:09] &lt;yrashk&gt;    it guarantees you can send without blocking</div>
<div class="line">[Friday 18 March 2011] [08:20:27] &lt;yrashk&gt;    so we can embed this into our poller</div>
<div class="line">[Friday 18 March 2011] [08:21:03] &lt;yrashk&gt;    this way we wont be blocking the poller ever</div>
<div class="line">[Friday 18 March 2011] [08:21:11] &lt;yrashk&gt;    i think it is a sound idea</div>
<div class="line">[Friday 18 March 2011] [08:21:56] &lt;yrashk&gt;    sustrik, wdyt? will it work fine? any precautions?</div>
<div class="line">[Friday 18 March 2011] [08:23:28] &lt;yrashk&gt;    i really like it</div>
<div class="line">[Friday 18 March 2011] [08:42:40] &lt;sustrik&gt;   yes, that&#8217;s what POLLOUT is for</div>
<div class="line">[Friday 18 March 2011] [08:43:08] &lt;yrashk&gt;    sweet</div>
<div class="line">[Friday 18 March 2011] [08:43:22] &lt;yrashk&gt;    so hopefully we&#8217;ll have this non-blocking very soon then</div>
<div class="line">[Friday 18 March 2011] [08:43:32] &lt;yrashk&gt;    as it will not change our poller much</div>
<div class="line">[Friday 18 March 2011] [08:45:51] &lt;Steve-o&gt;   mikko: looks like all the platforms are good now</div>
<div class="line">[Friday 18 March 2011] [09:06:34] &lt;<a href="#id95"><span class="problematic" id="id96">pieterh_</span></a>&gt;   sustrik: I think your email is inaccurate in some key ways</div>
<div class="line">[Friday 18 March 2011] [09:06:53] &lt;<a href="#id97"><span class="problematic" id="id98">pieterh_</span></a>&gt;  most critically, you are claiming a purpose for XREP that was never documented before</div>
<div class="line">[Friday 18 March 2011] [09:06:56] &lt;sustrik&gt;   feel free to discuss</div>
<div class="line">[Friday 18 March 2011] [09:07:09] &lt;sustrik&gt;   that&#8217;s why i sent the email out</div>
<div class="line">[Friday 18 March 2011] [09:07:11] &lt;<a href="#id99"><span class="problematic" id="id100">pieterh_</span></a>&gt;  as a user, and the developer of many devices, the notion that you would break this, is... shocking</div>
<div class="line">[Friday 18 March 2011] [09:07:40] &lt;sustrik&gt;   that&#8217;s why it has to be solved</div>
<div class="line">[Friday 18 March 2011] [09:07:41] &lt;<a href="#id101"><span class="problematic" id="id102">pieterh_</span></a>&gt;  it suggests (a) you don&#8217;t know wtf you were doing, (b) you don&#8217;t care about your users, (c) you don&#8217;t understand what they are doing</div>
<div class="line">[Friday 18 March 2011] [09:07:48] &lt;<a href="#id103"><span class="problematic" id="id104">pieterh_</span></a>&gt;  none of this is true, but it&#8217;s what your email suggests</div>
<div class="line">[Friday 18 March 2011] [09:07:50] &lt;sustrik&gt;   i would start with ZMQ)ROUTER socket type</div>
<div class="line">[Friday 18 March 2011] [09:08:19] &lt;sustrik&gt;   shrug, it has to be solved somehow</div>
<div class="line">[Friday 18 March 2011] [09:08:20] &lt;<a href="#id105"><span class="problematic" id="id106">pieterh_</span></a>&gt;  it&#8217;s unavoidable that people use this as a ROUTER</div>
<div class="line">[Friday 18 March 2011] [09:08:27] &lt;<a href="#id107"><span class="problematic" id="id108">pieterh_</span></a>&gt;  so, embrace that and make it work nicely</div>
<div class="line">[Friday 18 March 2011] [09:08:28] &lt;sustrik&gt;   feel free to propose a solution</div>
<div class="line">[Friday 18 March 2011] [09:08:32] &lt;<a href="#id109"><span class="problematic" id="id110">pieterh_</span></a>&gt;  I&#8217;ve done that many times</div>
<div class="line">[Friday 18 March 2011] [09:08:39] &lt;sustrik&gt;   ZMQ_ROUTER, right?</div>
<div class="line">[Friday 18 March 2011] [09:08:40] &lt;<a href="#id111"><span class="problematic" id="id112">pieterh_</span></a>&gt;  call it by the right name, make it work a little better</div>
<div class="line">[Friday 18 March 2011] [09:08:42] &lt;<a href="#id113"><span class="problematic" id="id114">pieterh_</span></a>&gt;  yes</div>
<div class="line">[Friday 18 March 2011] [09:08:43] &lt;<a href="#id115"><span class="problematic" id="id116">pieterh_</span></a>&gt;  of course</div>
<div class="line">[Friday 18 March 2011] [09:08:49] &lt;sustrik&gt;   that&#8217;s option 2 i think</div>
<div class="line">[Friday 18 March 2011] [09:08:51] &lt;<a href="#id117"><span class="problematic" id="id118">pieterh_</span></a>&gt;  you will see the overwhelming consensus on the list</div>
<div class="line">[Friday 18 March 2011] [09:09:02] &lt;sustrik&gt;   sure</div>
<div class="line">[Friday 18 March 2011] [09:09:03] &lt;<a href="#id119"><span class="problematic" id="id120">pieterh_</span></a>&gt;  you did read that thread, right?</div>
<div class="line">[Friday 18 March 2011] [09:09:04] &lt;sustrik&gt;   np</div>
<div class="line">[Friday 18 March 2011] [09:09:17] &lt;sustrik&gt;   yes</div>
<div class="line">[Friday 18 March 2011] [09:09:21] &lt;<a href="#id121"><span class="problematic" id="id122">pieterh_</span></a>&gt;  I like your solution of a verbose compile option</div>
<div class="line">[Friday 18 March 2011] [09:09:29] &lt;sustrik&gt;   i am just explaining the internals</div>
<div class="line">[Friday 18 March 2011] [09:09:40] &lt;sustrik&gt;   opt.2 is probably the best</div>
<div class="line">[Friday 18 March 2011] [09:09:53] &lt;<a href="#id123"><span class="problematic" id="id124">pieterh_</span></a>&gt;  well, you&#8217;re saying you might make a different implementation of &#8220;return to sender&#8221;</div>
<div class="line">[Friday 18 March 2011] [09:10:03] &lt;sustrik&gt;   definitely</div>
<div class="line">[Friday 18 March 2011] [09:10:10] &lt;<a href="#id125"><span class="problematic" id="id126">pieterh_</span></a>&gt;  which (and I give you the raw emotion) is ... shokcing</div>
<div class="line">[Friday 18 March 2011] [09:10:11] &lt;<a href="#id127"><span class="problematic" id="id128">pieterh_</span></a>&gt;  shocking</div>
<div class="line">[Friday 18 March 2011] [09:10:14] &lt;sustrik&gt;   that&#8217;s the XREP should be separated from REOUTER</div>
<div class="line">[Friday 18 March 2011] [09:10:17] &lt;sustrik&gt;   ROUTER*</div>
<div class="line">[Friday 18 March 2011] [09:10:29] &lt;sustrik&gt;   they are two distinct things</div>
<div class="line">[Friday 18 March 2011] [09:10:32] &lt;<a href="#id129"><span class="problematic" id="id130">pieterh_</span></a>&gt;  you have a better idea for the REP-REQ chain?</div>
<div class="line">[Friday 18 March 2011] [09:10:40] &lt;sustrik&gt;   not at the moment</div>
<div class="line">[Friday 18 March 2011] [09:10:51] &lt;sustrik&gt;   but it&#8217;s conceptually different from router</div>
<div class="line">[Friday 18 March 2011] [09:10:56] &lt;<a href="#id131"><span class="problematic" id="id132">pieterh_</span></a>&gt;  precisely, and afaics it&#8217;s impossible without creating stateful fabric</div>
<div class="line">[Friday 18 March 2011] [09:11:02] &lt;sustrik&gt;   say the dropping of unroutable messages -&gt;</div>
<div class="line">[Friday 18 March 2011] [09:11:03] &lt;<a href="#id133"><span class="problematic" id="id134">pieterh_</span></a>&gt;  conceptually it&#8217;s the same</div>
<div class="line">[Friday 18 March 2011] [09:11:05] &lt;<a href="#id135"><span class="problematic" id="id136">pieterh_</span></a>&gt;  it&#8217;s a use case</div>
<div class="line">[Friday 18 March 2011] [09:11:08] &lt;sustrik&gt;   ROUTER should not drop</div>
<div class="line">[Friday 18 March 2011] [09:11:10] &lt;sustrik&gt;   XREP should</div>
<div class="line">[Friday 18 March 2011] [09:11:14] &lt;<a href="#id137"><span class="problematic" id="id138">pieterh_</span></a>&gt;  yes it should</div>
<div class="line">[Friday 18 March 2011] [09:11:24] &lt;<a href="#id139"><span class="problematic" id="id140">pieterh_</span></a>&gt;  ROUTER should drop BUT it should be able to warn you</div>
<div class="line">[Friday 18 March 2011] [09:11:45] &lt;<a href="#id141"><span class="problematic" id="id142">pieterh_</span></a>&gt;  there is nothing useful you can do with an unroutable message but since it often suggests a programming error, you need visibility</div>
<div class="line">[Friday 18 March 2011] [09:11:47] &lt;<a href="#id143"><span class="problematic" id="id144">pieterh_</span></a>&gt;  that&#8217;s all</div>
<div class="line">[Friday 18 March 2011] [09:11:52] &lt;sustrik&gt;   sure</div>
<div class="line">[Friday 18 March 2011] [09:12:08] &lt;<a href="#id145"><span class="problematic" id="id146">pieterh_</span></a>&gt;  I literally go into src/xrep.cpp and add a printf</div>
<div class="line">[Friday 18 March 2011] [09:12:15] &lt;<a href="#id147"><span class="problematic" id="id148">pieterh_</span></a>&gt;  so I can debug a complex router</div>
<div class="line">[Friday 18 March 2011] [09:12:41] &lt;<a href="#id149"><span class="problematic" id="id150">pieterh_</span></a>&gt;  doing a req-rep chain is just one use case for routing</div>
<div class="line">[Friday 18 March 2011] [09:12:44] &lt;<a href="#id151"><span class="problematic" id="id152">pieterh_</span></a>&gt;  it&#8217;s not a core pattern</div>
<div class="line">[Friday 18 March 2011] [09:12:50] &lt;sustrik&gt;   it is</div>
<div class="line">[Friday 18 March 2011] [09:13:00] &lt;<a href="#id153"><span class="problematic" id="id154">pieterh_</span></a>&gt;  not a <em>separate</em> core pattern</div>
<div class="line">[Friday 18 March 2011] [09:13:02] &lt;<a href="#id155"><span class="problematic" id="id156">pieterh_</span></a>&gt;  afaics</div>
<div class="line">[Friday 18 March 2011] [09:14:18] &lt;<a href="#id157"><span class="problematic" id="id158">pieterh_</span></a>&gt;  tbh the envelope concept is ugly as heck but I can&#8217;t see anything simpler or better</div>
<div class="line">[Friday 18 March 2011] [09:14:38] &lt;sustrik&gt;   the one described in the email is nice</div>
<div class="line">[Friday 18 March 2011] [09:14:46] &lt;sustrik&gt;   but works on only for req/rep</div>
<div class="line">[Friday 18 March 2011] [09:14:49] &lt;sustrik&gt;   not for router</div>
<div class="line">[Friday 18 March 2011] [09:15:02] &lt;sustrik&gt;   and it has some scaling issues</div>
<div class="line">[Friday 18 March 2011] [09:15:12] &lt;sustrik&gt;   so it&#8217;s not a real alternative, i think</div>
<div class="line">[Friday 18 March 2011] [09:16:29]      * <a href="#id159"><span class="problematic" id="id160">pieterh_</span></a> is re-reading the email</div>
<div class="line">[Friday 18 March 2011] [09:16:36] &lt;<a href="#id161"><span class="problematic" id="id162">pieterh_</span></a>&gt;  XPUB/XSUB are hop-by-hop?</div>
<div class="line">[Friday 18 March 2011] [09:16:53] &lt;sustrik&gt;   yes</div>
<div class="line">[Friday 18 March 2011] [09:16:59] &lt;<a href="#id163"><span class="problematic" id="id164">pieterh_</span></a>&gt;  the fact you implement PUB on XPUB, REQ on XREQ, is irrelevant to the user</div>
<div class="line">[Friday 18 March 2011] [09:17:04] &lt;<a href="#id165"><span class="problematic" id="id166">pieterh_</span></a>&gt;  it&#8217;s vital to you, irrelevant to me</div>
<div class="line">[Friday 18 March 2011] [09:17:15] &lt;<a href="#id167"><span class="problematic" id="id168">pieterh_</span></a>&gt;  in fact, worse than irrelevant, it&#8217;s negative data</div>
<div class="line">[Friday 18 March 2011] [09:17:53] &lt;<a href="#id169"><span class="problematic" id="id170">pieterh_</span></a>&gt;  you basically ask me as user to think about your implementation design, which breaks my brain</div>
<div class="line">[Friday 18 March 2011] [09:18:05] &lt;<a href="#id171"><span class="problematic" id="id172">pieterh_</span></a>&gt;  &#8220;The end-to-end type is always layered on top of the corresponding X socket&#8221;</div>
<div class="line">[Friday 18 March 2011] [09:18:06] &lt;sustrik&gt;   it works like IP and TCP</div>
<div class="line">[Friday 18 March 2011] [09:18:10] &lt;<a href="#id173"><span class="problematic" id="id174">pieterh_</span></a>&gt;  that&#8217;s rubbish, sorry</div>
<div class="line">[Friday 18 March 2011] [09:18:14] &lt;<a href="#id175"><span class="problematic" id="id176">pieterh_</span></a>&gt;  I don&#8217;t know IP</div>
<div class="line">[Friday 18 March 2011] [09:18:16] &lt;sustrik&gt;   a TCP user doesn&#8217;t have to be aware of IP</div>
<div class="line">[Friday 18 March 2011] [09:18:19] &lt;sustrik&gt;   but it&#8217;s there</div>
<div class="line">[Friday 18 March 2011] [09:18:32] &lt;<a href="#id177"><span class="problematic" id="id178">pieterh_</span></a>&gt;  sorry, it does not work for me, not at all</div>
<div class="line">[Friday 18 March 2011] [09:18:42] &lt;<a href="#id179"><span class="problematic" id="id180">pieterh_</span></a>&gt;  what I want are a set of socket types with clear names and clear semantics</div>
<div class="line">[Friday 18 March 2011] [09:18:50] &lt;Steve-o&gt;   +1</div>
<div class="line">[Friday 18 March 2011] [09:18:51] &lt;<a href="#id181"><span class="problematic" id="id182">pieterh_</span></a>&gt;  I don&#8217;t want some layering and abstraction I need to learn first</div>
<div class="line">[Friday 18 March 2011] [09:18:52] &lt;sustrik&gt;   that&#8217;s the option 2</div>
<div class="line">[Friday 18 March 2011] [09:18:59] &lt;sustrik&gt;   ZMQ_ROUTER</div>
<div class="line">[Friday 18 March 2011] [09:19:06] &lt;<a href="#id183"><span class="problematic" id="id184">pieterh_</span></a>&gt;  do not try to sell me your abstractions, it&#8217;s what AMQP does and it&#8217;s bogus</div>
<div class="line">[Friday 18 March 2011] [09:19:22] &lt;sustrik&gt;   what do you want exactly then?</div>
<div class="line">[Friday 18 March 2011] [09:19:25] &lt;sustrik&gt;   i am not following</div>
<div class="line">[Friday 18 March 2011] [09:19:28] &lt;<a href="#id185"><span class="problematic" id="id186">pieterh_</span></a>&gt;  I want clear socket names</div>
<div class="line">[Friday 18 March 2011] [09:19:33] &lt;sustrik&gt;   ZMQ_ROUTER</div>
<div class="line">[Friday 18 March 2011] [09:19:35] &lt;<a href="#id187"><span class="problematic" id="id188">pieterh_</span></a>&gt;  clear semantics that are documented up-front</div>
<div class="line">[Friday 18 March 2011] [09:19:36] &lt;<a href="#id189"><span class="problematic" id="id190">pieterh_</span></a>&gt;  yes</div>
<div class="line">[Friday 18 March 2011] [09:19:46] &lt;<a href="#id191"><span class="problematic" id="id192">pieterh_</span></a>&gt;  this is, sadly, reverse engineering</div>
<div class="line">[Friday 18 March 2011] [09:19:47] &lt;sustrik&gt;   what&#8217;s the problem then?</div>
<div class="line">[Friday 18 March 2011] [09:19:55] &lt;<a href="#id193"><span class="problematic" id="id194">pieterh_</span></a>&gt;  it&#8217;s me trying to make names that fit your semantics</div>
<div class="line">[Friday 18 March 2011] [09:20:12] &lt;<a href="#id195"><span class="problematic" id="id196">pieterh_</span></a>&gt;  there&#8217;s no problem so long as you don&#8217;t come back with abstractions that hurt my brain</div>
<div class="line">[Friday 18 March 2011] [09:20:13] &lt;<a href="#id197"><span class="problematic" id="id198">pieterh_</span></a>&gt;  :-)</div>
<div class="line">[Friday 18 March 2011] [09:20:23] &lt;<a href="#id199"><span class="problematic" id="id200">pieterh_</span></a>&gt;  it is already hard enough</div>
<div class="line">[Friday 18 March 2011] [09:20:35] &lt;sustrik&gt;   that&#8217;s an abstraction on which 0mq is working from very beginning</div>
<div class="line">[Friday 18 March 2011] [09:20:38] &lt;sustrik&gt;   just ignore it</div>
<div class="line">[Friday 18 March 2011] [09:20:55] &lt;sustrik&gt;   as a user you don&#8217;t have to care</div>
<div class="line">[Friday 18 March 2011] [09:20:58] &lt;<a href="#id201"><span class="problematic" id="id202">pieterh_</span></a>&gt;  do you understand that your semantics are counter-productive for mine?</div>
<div class="line">[Friday 18 March 2011] [09:21:08] &lt;<a href="#id203"><span class="problematic" id="id204">pieterh_</span></a>&gt;  we have a conflict, as user vs. designer?</div>
<div class="line">[Friday 18 March 2011] [09:21:27] &lt;sustrik&gt;   i don&#8217;t think so</div>
<div class="line">[Friday 18 March 2011] [09:21:37] &lt;<a href="#id205"><span class="problematic" id="id206">pieterh_</span></a>&gt;  it&#8217;s been that way so far</div>
<div class="line">[Friday 18 March 2011] [09:21:43] &lt;<a href="#id207"><span class="problematic" id="id208">pieterh_</span></a>&gt;  e.g. The end-to-end type is always layered on top of the corresponding X socket</div>
<div class="line">[Friday 18 March 2011] [09:21:49] &lt;sustrik&gt;   yes</div>
<div class="line">[Friday 18 March 2011] [09:22:03] &lt;<a href="#id209"><span class="problematic" id="id210">pieterh_</span></a>&gt;  that is toxic for me as user</div>
<div class="line">[Friday 18 March 2011] [09:22:12] &lt;sustrik&gt;   you don&#8217;t have to care</div>
<div class="line">[Friday 18 March 2011] [09:22:20] &lt;sustrik&gt;   use just the non-X types</div>
<div class="line">[Friday 18 March 2011] [09:22:26] &lt;sustrik&gt;   that&#8217;s what proposition 2 is about</div>
<div class="line">[Friday 18 March 2011] [09:22:34] &lt;sustrik&gt;   people want to use routing</div>
<div class="line">[Friday 18 March 2011] [09:22:43] &lt;sustrik&gt;   so let&#8217;s make routing a first-class non-X socket</div>
<div class="line">[Friday 18 March 2011] [09:22:46] &lt;sustrik&gt;   ZMQ_ROUTER</div>
<div class="line">[Friday 18 March 2011] [09:22:53] &lt;<a href="#id211"><span class="problematic" id="id212">pieterh_</span></a>&gt;  well, you can make internal socket types that are undocumented</div>
<div class="line">[Friday 18 March 2011] [09:23:05] &lt;<a href="#id213"><span class="problematic" id="id214">pieterh_</span></a>&gt;  but ZMQ_ROUTER and ZMQ_DEALER cannot be internal and undocumented</div>
<div class="line">[Friday 18 March 2011] [09:23:15] &lt;<a href="#id215"><span class="problematic" id="id216">pieterh_</span></a>&gt;  since they cover 40%, as I said, of real application use cases</div>
<div class="line">[Friday 18 March 2011] [09:23:24] &lt;sustrik&gt;   X-sockets must be documented because they are used to make devices</div>
<div class="line">[Friday 18 March 2011] [09:23:32] &lt;<a href="#id217"><span class="problematic" id="id218">pieterh_</span></a>&gt;  devices are apps</div>
<div class="line">[Friday 18 March 2011] [09:23:43] &lt;sustrik&gt;   i.e. intermdiate nodes with no end-to-end functionalitty</div>
<div class="line">[Friday 18 March 2011] [09:23:46] &lt;<a href="#id219"><span class="problematic" id="id220">pieterh_</span></a>&gt;  X-sockets are your terminology</div>
<div class="line">[Friday 18 March 2011] [09:23:55] &lt;<a href="#id221"><span class="problematic" id="id222">pieterh_</span></a>&gt;  I&#8217;m against that terminology</div>
<div class="line">[Friday 18 March 2011] [09:24:02] &lt;sustrik&gt;   what would you want instead?</div>
<div class="line">[Friday 18 March 2011] [09:24:09] &lt;<a href="#id223"><span class="problematic" id="id224">pieterh_</span></a>&gt;  especially when you explain it</div>
<div class="line">[Friday 18 March 2011] [09:24:16] &lt;sustrik&gt;   i admitt the X- thing is stupid</div>
<div class="line">[Friday 18 March 2011] [09:24:18] &lt;<a href="#id225"><span class="problematic" id="id226">pieterh_</span></a>&gt;  just a clear set of sockets that are properly documented and match real requirements</div>
<div class="line">[Friday 18 March 2011] [09:24:23] &lt;<a href="#id227"><span class="problematic" id="id228">pieterh_</span></a>&gt;  it&#8217;s not hard</div>
<div class="line">[Friday 18 March 2011] [09:24:24] &lt;<a href="#id229"><span class="problematic" id="id230">pieterh_</span></a>&gt;  design from the use case backwards</div>
<div class="line">[Friday 18 March 2011] [09:24:29] &lt;sustrik&gt;   haven&#8217;t though of anything better though</div>
<div class="line">[Friday 18 March 2011] [09:24:30] &lt;<a href="#id231"><span class="problematic" id="id232">pieterh_</span></a>&gt;  not from the implementation forwards</div>
<div class="line">[Friday 18 March 2011] [09:24:36] &lt;<a href="#id233"><span class="problematic" id="id234">pieterh_</span></a>&gt;  I don&#8217;t <em>care</em> how you implement stuff</div>
<div class="line">[Friday 18 March 2011] [09:24:58] &lt;<a href="#id235"><span class="problematic" id="id236">pieterh_</span></a>&gt;  what I do care about is the clarity of documentation as a contract</div>
<div class="line">[Friday 18 March 2011] [09:25:00] &lt;<a href="#id237"><span class="problematic" id="id238">pieterh_</span></a>&gt;  clear names</div>
<div class="line">[Friday 18 March 2011] [09:25:09] &lt;sustrik&gt;   the problem is that X- sockets have to be exposed because of device implementers</div>
<div class="line">[Friday 18 March 2011] [09:25:12] &lt;<a href="#id239"><span class="problematic" id="id240">pieterh_</span></a>&gt;  clear semantics that directly speak to user requirements</div>
<div class="line">[Friday 18 March 2011] [09:25:16] &lt;<a href="#id241"><span class="problematic" id="id242">pieterh_</span></a>&gt;  ?</div>
<div class="line">[Friday 18 March 2011] [09:25:21] &lt;sustrik&gt;   so they can&#8217;t be hidden</div>
<div class="line">[Friday 18 March 2011] [09:25:22] &lt;<a href="#id243"><span class="problematic" id="id244">pieterh_</span></a>&gt;  ZMQ_ROUTER is not a problem</div>
<div class="line">[Friday 18 March 2011] [09:25:28] &lt;<a href="#id245"><span class="problematic" id="id246">pieterh_</span></a>&gt;  sigh</div>
<div class="line">[Friday 18 March 2011] [09:25:32] &lt;<a href="#id247"><span class="problematic" id="id248">pieterh_</span></a>&gt;  devices are apps</div>
<div class="line">[Friday 18 March 2011] [09:25:34] &lt;sustrik&gt;   no, the problem is layering</div>
<div class="line">[Friday 18 March 2011] [09:25:40] &lt;<a href="#id249"><span class="problematic" id="id250">pieterh_</span></a>&gt;  that&#8217;s your problem, not mine</div>
<div class="line">[Friday 18 March 2011] [09:25:55] &lt;<a href="#id251"><span class="problematic" id="id252">pieterh_</span></a>&gt;  that&#8217;s an implementation detail</div>
<div class="line">[Friday 18 March 2011] [09:25:58] &lt;<a href="#id253"><span class="problematic" id="id254">pieterh_</span></a>&gt;  look... just make small steps here</div>
<div class="line">[Friday 18 March 2011] [09:26:06] &lt;sustrik&gt;   ok, so just ignore the X types</div>
<div class="line">[Friday 18 March 2011] [09:26:09] &lt;<a href="#id255"><span class="problematic" id="id256">pieterh_</span></a>&gt;  rename XREP and XREQ to ROUTER and DEALER</div>
<div class="line">[Friday 18 March 2011] [09:26:17] &lt;<a href="#id257"><span class="problematic" id="id258">pieterh_</span></a>&gt;  and stop using weird names that make no sense</div>
<div class="line">[Friday 18 March 2011] [09:26:17] &lt;sustrik&gt;   it&#8217;s mine problem, not yours</div>
<div class="line">[Friday 18 March 2011] [09:26:33] &lt;<a href="#id259"><span class="problematic" id="id260">pieterh_</span></a>&gt;  if you want to use undocumented internal socket types, fine</div>
<div class="line">[Friday 18 March 2011] [09:26:38] &lt;<a href="#id261"><span class="problematic" id="id262">pieterh_</span></a>&gt;  but they don&#8217;t exist for me</div>
<div class="line">[Friday 18 March 2011] [09:26:45] &lt;sustrik&gt;   they must be documented because of devices</div>
<div class="line">[Friday 18 March 2011] [09:26:57] &lt;sustrik&gt;   there&#8217;s no way to create a device with REQ/REP</div>
<div class="line">[Friday 18 March 2011] [09:27:01] &lt;sustrik&gt;   it would blockl</div>
<div class="line">[Friday 18 March 2011] [09:27:01] &lt;<a href="#id263"><span class="problematic" id="id264">pieterh_</span></a>&gt;  then they are not internal</div>
<div class="line">[Friday 18 March 2011] [09:27:07] &lt;<a href="#id265"><span class="problematic" id="id266">pieterh_</span></a>&gt;  well, I do know that</div>
<div class="line">[Friday 18 March 2011] [09:27:25] &lt;<a href="#id267"><span class="problematic" id="id268">pieterh_</span></a>&gt;  when I say &#8220;undocumented internal socket types&#8221; I do not mean ROUTER/DEALER</div>
<div class="line">[Friday 18 March 2011] [09:27:25] &lt;<a href="#id269"><span class="problematic" id="id270">pieterh_</span></a>&gt;  obviously</div>
<div class="line">[Friday 18 March 2011] [09:27:41] &lt;<a href="#id271"><span class="problematic" id="id272">pieterh_</span></a>&gt;  I mean e.g. XPUB/XSUB</div>
<div class="line">[Friday 18 March 2011] [09:27:51] &lt;sustrik&gt;   so my proposition is let distiquish XREP/XREQ</div>
<div class="line">[Friday 18 March 2011] [09:27:55] &lt;sustrik&gt;   from ROUTER/DEALER</div>
<div class="line">[Friday 18 March 2011] [09:28:03] &lt;sustrik&gt;   you can then use ROUTER/DEALER</div>
<div class="line">[Friday 18 March 2011] [09:28:04] &lt;<a href="#id273"><span class="problematic" id="id274">pieterh_</span></a>&gt;  why?</div>
<div class="line">[Friday 18 March 2011] [09:28:12] &lt;<a href="#id275"><span class="problematic" id="id276">pieterh_</span></a>&gt;  why keep the old names at all?</div>
<div class="line">[Friday 18 March 2011] [09:28:15] &lt;sustrik&gt;   because it&#8217;s a different messaging pattern</div>
<div class="line">[Friday 18 March 2011] [09:28:21] &lt;<a href="#id277"><span class="problematic" id="id278">pieterh_</span></a>&gt;  sigh</div>
<div class="line">[Friday 18 March 2011] [09:28:23] &lt;<a href="#id279"><span class="problematic" id="id280">pieterh_</span></a>&gt;  this is just bogus</div>
<div class="line">[Friday 18 March 2011] [09:28:25] &lt;sustrik&gt;   it SMTP-like messaging</div>
<div class="line">[Friday 18 March 2011] [09:28:27] &lt;<a href="#id281"><span class="problematic" id="id282">pieterh_</span></a>&gt;  it&#8217;s not a different pattern</div>
<div class="line">[Friday 18 March 2011] [09:28:34] &lt;<a href="#id283"><span class="problematic" id="id284">pieterh_</span></a>&gt;  it&#8217;s just one use case</div>
<div class="line">[Friday 18 March 2011] [09:28:38] &lt;sustrik&gt;   specify an address, the message will get there</div>
<div class="line">[Friday 18 March 2011] [09:28:41] &lt;<a href="#id285"><span class="problematic" id="id286">pieterh_</span></a>&gt;  you have said it, there&#8217;s no better way to implement it</div>
<div class="line">[Friday 18 March 2011] [09:28:48] &lt;sustrik&gt;   while req/rep is:</div>
<div class="line">[Friday 18 March 2011] [09:28:52] &lt;<a href="#id287"><span class="problematic" id="id288">pieterh_</span></a>&gt;  &#8220;message will get there&#8221; is not a socket semantic</div>
<div class="line">[Friday 18 March 2011] [09:29:01] &lt;sustrik&gt;   specify the name of the service, you task will be executed</div>
<div class="line">[Friday 18 March 2011] [09:29:18] &lt;<a href="#id289"><span class="problematic" id="id290">pieterh_</span></a>&gt;  that is Majordomo</div>
<div class="line">[Friday 18 March 2011] [09:29:21] &lt;<a href="#id291"><span class="problematic" id="id292">pieterh_</span></a>&gt;  have you actually read the Guide?</div>
<div class="line">[Friday 18 March 2011] [09:29:28] &lt;sustrik&gt;   most of it</div>
<div class="line">[Friday 18 March 2011] [09:29:38] &lt;<a href="#id293"><span class="problematic" id="id294">pieterh_</span></a>&gt;  you should perhaps see what people do with your work</div>
<div class="line">[Friday 18 March 2011] [09:29:39] &lt;sustrik&gt;   anyway, let&#8217;s move this discussion on the mailing list</div>
<div class="line">[Friday 18 March 2011] [09:29:43] &lt;<a href="#id295"><span class="problematic" id="id296">pieterh_</span></a>&gt;  it&#8217;s all based on real questions on the list</div>
<div class="line">[Friday 18 March 2011] [09:29:49] &lt;<a href="#id297"><span class="problematic" id="id298">pieterh_</span></a>&gt;  SOA is not a socket semantic</div>
<div class="line">[Friday 18 March 2011] [09:30:16] &lt;<a href="#id299"><span class="problematic" id="id300">pieterh_</span></a>&gt;  my advice, honestly, is to make small, careful evolutionary steps</div>
<div class="line">[Friday 18 March 2011] [09:30:26] &lt;<a href="#id301"><span class="problematic" id="id302">pieterh_</span></a>&gt;  do not make radical changes to things that took years to learn</div>
<div class="line">[Friday 18 March 2011] [09:30:28] &lt;sustrik&gt;   #define ZMQ_ROUTER ZMQ_XREP</div>
<div class="line">[Friday 18 March 2011] [09:30:31] &lt;<a href="#id303"><span class="problematic" id="id304">pieterh_</span></a>&gt;  people will not like you for it</div>
<div class="line">[Friday 18 March 2011] [09:30:32] &lt;<a href="#id305"><span class="problematic" id="id306">pieterh_</span></a>&gt;  sure</div>
<div class="line">[Friday 18 March 2011] [09:30:33] &lt;sustrik&gt;   that&#8217;s as small as it gets</div>
<div class="line">[Friday 18 March 2011] [09:30:36] &lt;<a href="#id307"><span class="problematic" id="id308">pieterh_</span></a>&gt;  I&#8217;ve done that in 2.1</div>
<div class="line">[Friday 18 March 2011] [09:30:40] &lt;<a href="#id309"><span class="problematic" id="id310">pieterh_</span></a>&gt;  precisely that</div>
<div class="line">[Friday 18 March 2011] [09:30:45] &lt;sustrik&gt;   i&#8217;ll do that in trunk</div>
<div class="line">[Friday 18 March 2011] [09:30:48] &lt;<a href="#id311"><span class="problematic" id="id312">pieterh_</span></a>&gt;  it&#8217;s sufficient for me</div>
<div class="line">[Friday 18 March 2011] [09:30:54] &lt;sustrik&gt;   but i would like it to be discussed first</div>
<div class="line">[Friday 18 March 2011] [09:31:03] &lt;<a href="#id313"><span class="problematic" id="id314">pieterh_</span></a>&gt;  the naming has been discussed several times</div>
<div class="line">[Friday 18 March 2011] [09:31:05] &lt;sustrik&gt;   i assume that would be the preferred option</div>
<div class="line">[Friday 18 March 2011] [09:31:09] &lt;<a href="#id315"><span class="problematic" id="id316">pieterh_</span></a>&gt;  it&#8217;s not the same issue as semantic changes</div>
<div class="line">[Friday 18 March 2011] [09:31:16] &lt;sustrik&gt;   but i don&#8217;t want to do it without discussion on the list</div>
<div class="line">[Friday 18 March 2011] [09:31:21] &lt;<a href="#id317"><span class="problematic" id="id318">pieterh_</span></a>&gt;  you are mixing two issues and making the discussion harder</div>
<div class="line">[Friday 18 March 2011] [09:31:35] &lt;<a href="#id319"><span class="problematic" id="id320">pieterh_</span></a>&gt;  the naming <em>has</em> been discussed several times, with clear consensus</div>
<div class="line">[Friday 18 March 2011] [09:31:40] &lt;<a href="#id321"><span class="problematic" id="id322">pieterh_</span></a>&gt;  shall I point you to the thread?</div>
<div class="line">[Friday 18 March 2011] [09:31:44] &lt;sustrik&gt;   explain your point of view on the list then</div>
<div class="line">[Friday 18 March 2011] [09:31:54] &lt;sustrik&gt;   we are a community</div>
<div class="line">[Friday 18 March 2011] [09:31:56] &lt;<a href="#id323"><span class="problematic" id="id324">pieterh_</span></a>&gt;  I&#8217;ve done that, of course</div>
<div class="line">[Friday 18 March 2011] [09:31:59] &lt;<a href="#id325"><span class="problematic" id="id326">pieterh_</span></a>&gt;  we&#8217;re also on IRC</div>
<div class="line">[Friday 18 March 2011] [09:32:03] &lt;<a href="#id327"><span class="problematic" id="id328">pieterh_</span></a>&gt;  this is logged</div>
<div class="line">[Friday 18 March 2011] [09:32:18] &lt;sustrik&gt;   yep, but lot of people are not here at the moment</div>
<div class="line">[Friday 18 March 2011] [09:32:25] &lt;<a href="#id329"><span class="problematic" id="id330">pieterh_</span></a>&gt;  the list is also fairly passive</div>
<div class="line">[Friday 18 March 2011] [09:32:39] &lt;<a href="#id331"><span class="problematic" id="id332">pieterh_</span></a>&gt;  nonetheless, I have asked about renaming the sockets and there was <em>clear</em> consensus</div>
<div class="line">[Friday 18 March 2011] [09:32:43] &lt;<a href="#id333"><span class="problematic" id="id334">pieterh_</span></a>&gt;  please do respect that</div>
<div class="line">[Friday 18 March 2011] [09:32:47] &lt;<a href="#id335"><span class="problematic" id="id336">pieterh_</span></a>&gt;  we are a community, as you say</div>
<div class="line">[Friday 18 March 2011] [09:32:48] &lt;sustrik&gt;   it&#8217;s polite to allow even those in other timezones to discuss</div>
<div class="line">[Friday 18 March 2011] [09:33:10] &lt;<a href="#id337"><span class="problematic" id="id338">pieterh_</span></a>&gt;  also, reopening a discussion because you weren&#8217;t there, or don&#8217;t like the outcome is unpolite</div>
<div class="line">[Friday 18 March 2011] [09:33:17] &lt;sustrik&gt;   yep, i am for ZMQ_ROUTER options as well</div>
<div class="line">[Friday 18 March 2011] [09:33:22] &lt;<a href="#id339"><span class="problematic" id="id340">pieterh_</span></a>&gt;  so, we make that</div>
<div class="line">[Friday 18 March 2011] [09:33:29] &lt;<a href="#id341"><span class="problematic" id="id342">pieterh_</span></a>&gt;  and we consider the semantics as a separate issue</div>
<div class="line">[Friday 18 March 2011] [09:33:32] &lt;sustrik&gt;   it&#8217;s supplying the missing pieces of information</div>
<div class="line">[Friday 18 March 2011] [09:33:44] &lt;<a href="#id343"><span class="problematic" id="id344">pieterh_</span></a>&gt;  i&#8217;m always in favor of better semantics but they must be carefully worked out of use cases</div>
<div class="line">[Friday 18 March 2011] [09:33:53] &lt;sustrik&gt;   yup</div>
<div class="line">[Friday 18 March 2011] [09:33:55] &lt;<a href="#id345"><span class="problematic" id="id346">pieterh_</span></a>&gt;  abstract &#8220;it&#8217;s like XYZ&#8221; discussions are pointless IMO</div>
<div class="line">[Friday 18 March 2011] [09:33:59] &lt;<a href="#id347"><span class="problematic" id="id348">pieterh_</span></a>&gt;  we are not like XYZ</div>
<div class="line">[Friday 18 March 2011] [09:34:04] &lt;sustrik&gt;   sure, say so</div>
<div class="line">[Friday 18 March 2011] [09:34:07] &lt;<a href="#id349"><span class="problematic" id="id350">pieterh_</span></a>&gt;  XYZ is like us, done badly</div>
<div class="line">[Friday 18 March 2011] [09:34:07] &lt;<a href="#id351"><span class="problematic" id="id352">pieterh_</span></a>&gt;  period</div>
<div class="line">[Friday 18 March 2011] [09:34:18] &lt;<a href="#id353"><span class="problematic" id="id354">pieterh_</span></a>&gt;  what, again?</div>
<div class="line">[Friday 18 March 2011] [09:34:18] &lt;<a href="#id355"><span class="problematic" id="id356">pieterh_</span></a>&gt;  :-)</div>
<div class="line">[Friday 18 March 2011] [09:34:40] &lt;sustrik&gt;   :)</div>
<div class="line">[Friday 18 March 2011] [09:34:55] &lt;<a href="#id357"><span class="problematic" id="id358">pieterh_</span></a>&gt;  btw, for IPC, what do you think about making a shared memory transport?</div>
<div class="line">[Friday 18 March 2011] [09:35:11] &lt;<a href="#id359"><span class="problematic" id="id360">pieterh_</span></a>&gt;  one can make a portable shmem layer, then use that</div>
<div class="line">[Friday 18 March 2011] [09:35:29] &lt;sustrik&gt;   there&#8217;s an API problem with that</div>
<div class="line">[Friday 18 March 2011] [09:35:32] &lt;<a href="#id361"><span class="problematic" id="id362">pieterh_</span></a>&gt;  all we need is a portable shmem api people can implement</div>
<div class="line">[Friday 18 March 2011] [09:35:39] &lt;sustrik&gt;   when you allocate a message</div>
<div class="line">[Friday 18 March 2011] [09:35:48] &lt;sustrik&gt;   (zmq_msg_init_size)</div>
<div class="line">[Friday 18 March 2011] [09:35:54] &lt;sustrik&gt;   it&#8217;s allocated in process heap</div>
<div class="line">[Friday 18 March 2011] [09:36:01] &lt;<a href="#id363"><span class="problematic" id="id364">pieterh_</span></a>&gt;  right, that&#8217;s fine, we copy data</div>
<div class="line">[Friday 18 March 2011] [09:36:20] &lt;sustrik&gt;   if you copy data then there&#8217;s not much point in using shmem</div>
<div class="line">[Friday 18 March 2011] [09:36:32] &lt;<a href="#id365"><span class="problematic" id="id366">pieterh_</span></a>&gt;  much, much faster than IPC</div>
<div class="line">[Friday 18 March 2011] [09:36:45] &lt;<a href="#id367"><span class="problematic" id="id368">pieterh_</span></a>&gt;  also, am I wrong, but with ZMQ you <em>always</em> have to copy data on recv?</div>
<div class="line">[Friday 18 March 2011] [09:36:49] &lt;sustrik&gt;   if that&#8217;s the case, then sure</div>
<div class="line">[Friday 18 March 2011] [09:36:57] &lt;sustrik&gt;   it have been discussed serveral times</div>
<div class="line">[Friday 18 March 2011] [09:37:03] &lt;<a href="#id369"><span class="problematic" id="id370">pieterh_</span></a>&gt;  shmem?</div>
<div class="line">[Friday 18 March 2011] [09:37:07] &lt;sustrik&gt;   yep</div>
<div class="line">[Friday 18 March 2011] [09:37:18] &lt;sustrik&gt;   but nobody really tried to implement it</div>
<div class="line">[Friday 18 March 2011] [09:37:21] &lt;<a href="#id371"><span class="problematic" id="id372">pieterh_</span></a>&gt;  I&#8217;ve not seen any attempt to slice it into two</div>
<div class="line">[Friday 18 March 2011] [09:37:21] &lt;sustrik&gt;   at least afaik</div>
<div class="line">[Friday 18 March 2011] [09:37:37] &lt;sustrik&gt;   two what?</div>
<div class="line">[Friday 18 March 2011] [09:37:40] &lt;<a href="#id373"><span class="problematic" id="id374">pieterh_</span></a>&gt;  two layers</div>
<div class="line">[Friday 18 March 2011] [09:37:57] &lt;<a href="#id375"><span class="problematic" id="id376">pieterh_</span></a>&gt;  so, abstract shmem api, and implementations thereof, and use thereof</div>
<div class="line">[Friday 18 March 2011] [09:38:12] &lt;<a href="#id377"><span class="problematic" id="id378">pieterh_</span></a>&gt;  the problem is today, you&#8217;d have to know both sides of the cake to make it</div>
<div class="line">[Friday 18 March 2011] [09:38:21] &lt;<a href="#id379"><span class="problematic" id="id380">pieterh_</span></a>&gt;  both how to make a transport in 0MQ, and how to do shmem on system X</div>
<div class="line">[Friday 18 March 2011] [09:38:28] &lt;<a href="#id381"><span class="problematic" id="id382">pieterh_</span></a>&gt;  I&#8217;d like to slice this into two problems</div>
<div class="line">[Friday 18 March 2011] [09:38:46] &lt;sustrik&gt;   how would you do that?</div>
<div class="line">[Friday 18 March 2011] [09:38:54] &lt;Steve-o&gt;   re: shmem I got as far as this and haven&#8217;t looked at it again:  <a class="reference external" href="https://gist.github.com/876073">https://gist.github.com/876073</a></div>
<div class="line">[Friday 18 March 2011] [09:38:55] &lt;<a href="#id383"><span class="problematic" id="id384">pieterh_</span></a>&gt;  well, classic portable API solution</div>
<div class="line">[Friday 18 March 2011] [09:39:06] &lt;<a href="#id385"><span class="problematic" id="id386">pieterh_</span></a>&gt;  like how I made portable threading in ZFL</div>
<div class="line">[Friday 18 March 2011] [09:39:42] &lt;sustrik&gt;   currently 0MQ uses <a href="#id387"><span class="problematic" id="id388">ZMQ_HAVE_</span></a>... macros to provide OS-specific functionality</div>
<div class="line">[Friday 18 March 2011] [09:39:45] &lt;<a href="#id389"><span class="problematic" id="id390">pieterh_</span></a>&gt;  first step is to agree on what constitutes the necessary shmem api for a portable shmem transport in 0MQ</div>
<div class="line">[Friday 18 March 2011] [09:39:58] &lt;<a href="#id391"><span class="problematic" id="id392">pieterh_</span></a>&gt;  sure, but that&#8217;s not helpful here, forget it</div>
<div class="line">[Friday 18 March 2011] [09:40:07] &lt;<a href="#id393"><span class="problematic" id="id394">pieterh_</span></a>&gt;  you do that in some module, shmem.cpp or whatever</div>
<div class="line">[Friday 18 March 2011] [09:40:11] &lt;sustrik&gt;   ah, you are speaking of internal apis, right?</div>
<div class="line">[Friday 18 March 2011] [09:40:14] &lt;<a href="#id395"><span class="problematic" id="id396">pieterh_</span></a>&gt;  yes</div>
<div class="line">[Friday 18 March 2011] [09:40:20] &lt;sustrik&gt;   abstraction for transports</div>
<div class="line">[Friday 18 March 2011] [09:40:23] &lt;<a href="#id397"><span class="problematic" id="id398">pieterh_</span></a>&gt;  a portability API for shmem</div>
<div class="line">[Friday 18 March 2011] [09:40:24] &lt;<a href="#id399"><span class="problematic" id="id400">pieterh_</span></a>&gt;  yes</div>
<div class="line">[Friday 18 March 2011] [09:40:30] &lt;sustrik&gt;   that would be great</div>
<div class="line">[Friday 18 March 2011] [09:40:38] &lt;<a href="#id401"><span class="problematic" id="id402">pieterh_</span></a>&gt;  it means one person writes the transport, another group makes it work on random boxes</div>
<div class="line">[Friday 18 March 2011] [09:40:38] &lt;sustrik&gt;   i was thinking about it for a long time</div>
<div class="line">[Friday 18 March 2011] [09:40:43] &lt;sustrik&gt;   but it&#8217;s rather complex</div>
<div class="line">[Friday 18 March 2011] [09:40:48] &lt;<a href="#id403"><span class="problematic" id="id404">pieterh_</span></a>&gt;  all we need is a simple abstract API</div>
<div class="line">[Friday 18 March 2011] [09:40:52] &lt;<a href="#id405"><span class="problematic" id="id406">pieterh_</span></a>&gt;  shmem_get_block ()</div>
<div class="line">[Friday 18 March 2011] [09:40:56] &lt;<a href="#id407"><span class="problematic" id="id408">pieterh_</span></a>&gt;  shmem_write ()</div>
<div class="line">[Friday 18 March 2011] [09:41:00] &lt;<a href="#id409"><span class="problematic" id="id410">pieterh_</span></a>&gt;  etc. I have no idea...</div>
<div class="line">[Friday 18 March 2011] [09:41:05] &lt;sustrik&gt;   ah, at that level</div>
<div class="line">[Friday 18 March 2011] [09:41:21] &lt;sustrik&gt;   so not generic API for transports</div>
<div class="line">[Friday 18 March 2011] [09:41:30] &lt;mato&gt;      guys, re ROUTER, if we are going to formalize this then rather than just renaming XREP shouldn&#8217;t we think about what the real semantics are for people who wish to do routing by design?</div>
<div class="line">[Friday 18 March 2011] [09:41:30] &lt;<a href="#id411"><span class="problematic" id="id412">pieterh_</span></a>&gt;  no, only for shmem</div>
<div class="line">[Friday 18 March 2011] [09:41:31] &lt;sustrik&gt;   rather generic API for shmem</div>
<div class="line">[Friday 18 March 2011] [09:41:44] &lt;mato&gt;      since the current use of router has simply evolved out of what XREP provides.</div>
<div class="line">[Friday 18 March 2011] [09:41:46] &lt;<a href="#id413"><span class="problematic" id="id414">pieterh_</span></a>&gt;  sustrik: yes, just to solve this case</div>
<div class="line">[Friday 18 March 2011] [09:41:48] &lt;sustrik&gt;   spieterh: sure, feel free to implement</div>
<div class="line">[Friday 18 March 2011] [09:41:53] &lt;<a href="#id415"><span class="problematic" id="id416">pieterh_</span></a>&gt;  mato: yes, but it seems there&#8217;s no better way</div>
<div class="line">[Friday 18 March 2011] [09:42:12] &lt;<a href="#id417"><span class="problematic" id="id418">pieterh_</span></a>&gt;  sustrik: my problem is I have zero idea what a transport would need</div>
<div class="line">[Friday 18 March 2011] [09:42:14] &lt;mato&gt;      <a href="#id419"><span class="problematic" id="id420">pieterh_</span></a>: why so? there&#8217;s no hurry, 3.0 is a way away yet</div>
<div class="line">[Friday 18 March 2011] [09:42:17] &lt;sustrik&gt;   mato: ack</div>
<div class="line">[Friday 18 March 2011] [09:42:26] &lt;<a href="#id421"><span class="problematic" id="id422">pieterh_</span></a>&gt;  I&#8217;m happy to make shmem implementations of some defined API</div>
<div class="line">[Friday 18 March 2011] [09:42:37] &lt;mato&gt;      <a href="#id423"><span class="problematic" id="id424">pieterh_</span></a>: aren&#8217;t we supposed to be master programmers doing this well, rather than making rash decisions?</div>
<div class="line">[Friday 18 March 2011] [09:42:39] &lt;sustrik&gt;   pieterh: great</div>
<div class="line">[Friday 18 March 2011] [09:42:42] &lt;<a href="#id425"><span class="problematic" id="id426">pieterh_</span></a>&gt;  mato: there&#8217;s no hurry except the current names are painful</div>
<div class="line">[Friday 18 March 2011] [09:42:42] &lt;sustrik&gt;   mato: my feeling is people want SMTP like-semantivc</div>
<div class="line">[Friday 18 March 2011] [09:42:44] &lt;<a href="#id427"><span class="problematic" id="id428">pieterh_</span></a>&gt;  mato: lol</div>
<div class="line">[Friday 18 March 2011] [09:42:48] &lt;<a href="#id429"><span class="problematic" id="id430">pieterh_</span></a>&gt;  double lol</div>
<div class="line">[Friday 18 March 2011] [09:42:58] &lt;<a href="#id431"><span class="problematic" id="id432">pieterh_</span></a>&gt;  the man pages document code rather than code implementing man pages</div>
<div class="line">[Friday 18 March 2011] [09:43:10] &lt;mato&gt;      huh?</div>
<div class="line">[Friday 18 March 2011] [09:43:18] &lt;<a href="#id433"><span class="problematic" id="id434">pieterh_</span></a>&gt;  shrug</div>
<div class="line">[Friday 18 March 2011] [09:43:23] &lt;<a href="#id435"><span class="problematic" id="id436">pieterh_</span></a>&gt;  if you don&#8217;t know what I mean, forget it</div>
<div class="line">[Friday 18 March 2011] [09:43:42] &lt;<a href="#id437"><span class="problematic" id="id438">pieterh_</span></a>&gt;  anyhow, where is the rash decision?</div>
<div class="line">[Friday 18 March 2011] [09:43:51] &lt;<a href="#id439"><span class="problematic" id="id440">pieterh_</span></a>&gt;  there has been extensive discussion about the names of sockets</div>
<div class="line">[Friday 18 March 2011] [09:43:52] &lt;sustrik&gt;   mato: there&#8217;s one issue in the bugtracker to do with man pages</div>
<div class="line">[Friday 18 March 2011] [09:44:10] &lt;mato&gt;      but the names don&#8217;t fit with the big picture</div>
<div class="line">[Friday 18 March 2011] [09:44:10] &lt;sustrik&gt;   could you have a look at it?</div>
<div class="line">[Friday 18 March 2011] [09:44:12] &lt;<a href="#id441"><span class="problematic" id="id442">pieterh_</span></a>&gt;  and renaming XREP and XREQ has been agreed by the list, with total consensus</div>
<div class="line">[Friday 18 March 2011] [09:44:24] &lt;mato&gt;      i love your dogmatism</div>
<div class="line">[Friday 18 March 2011] [09:44:25] &lt;<a href="#id443"><span class="problematic" id="id444">pieterh_</span></a>&gt;  mato: what big picture? show me the design docs...</div>
<div class="line">[Friday 18 March 2011] [09:44:29] &lt;mato&gt;      4 people replied</div>
<div class="line">[Friday 18 March 2011] [09:44:31] &lt;<a href="#id445"><span class="problematic" id="id446">pieterh_</span></a>&gt;  if it&#8217;s just in someone&#8217;s head, it&#8217;s not on paper</div>
<div class="line">[Friday 18 March 2011] [09:44:34] &lt;mato&gt;      total consensus</div>
<div class="line">[Friday 18 March 2011] [09:44:41] &lt;<a href="#id447"><span class="problematic" id="id448">pieterh_</span></a>&gt;  4 people replied, no-one said no, that&#8217;s total consensus, yes</div>
<div class="line">[Friday 18 March 2011] [09:44:52] &lt;<a href="#id449"><span class="problematic" id="id450">pieterh_</span></a>&gt;  it&#8217;s not exactly a hypertalkative list</div>
<div class="line">[Friday 18 March 2011] [09:44:58] &lt;mato&gt;      right.</div>
<div class="line">[Friday 18 March 2011] [09:45:03] &lt;<a href="#id451"><span class="problematic" id="id452">pieterh_</span></a>&gt;  but if you want to veto it, go for it</div>
<div class="line">[Friday 18 March 2011] [09:45:28] &lt;<a href="#id453"><span class="problematic" id="id454">pieterh_</span></a>&gt;  I&#8217;m going to switch to the new names ASAP in any case</div>
<div class="line">[Friday 18 March 2011] [09:45:37] &lt;mato&gt;      right, so you&#8217;re going to fork the api</div>
<div class="line">[Friday 18 March 2011] [09:45:46] &lt;<a href="#id455"><span class="problematic" id="id456">pieterh_</span></a>&gt;  no, I&#8217;m implementing the consensus</div>
<div class="line">[Friday 18 March 2011] [09:45:47] &lt;mato&gt;      thanks for that.</div>
<div class="line">[Friday 18 March 2011] [09:45:54] &lt;<a href="#id457"><span class="problematic" id="id458">pieterh_</span></a>&gt;  if you don&#8217;t want to follow, fork the API</div>
<div class="line">[Friday 18 March 2011] [09:45:59] &lt;<a href="#id459"><span class="problematic" id="id460">pieterh_</span></a>&gt;  please don&#8217;t be silly, mato</div>
<div class="line">[Friday 18 March 2011] [09:46:05] &lt;<a href="#id461"><span class="problematic" id="id462">pieterh_</span></a>&gt;  this was discussed ad nauseam</div>
<div class="line">[Friday 18 March 2011] [09:46:28] &lt;<a href="#id463"><span class="problematic" id="id464">pieterh_</span></a>&gt;  Just like a 3.0 version will &#8216;fork the api&#8217;?</div>
<div class="line">[Friday 18 March 2011] [09:46:33] &lt;<a href="#id465"><span class="problematic" id="id466">pieterh_</span></a>&gt;  improvements that solve real problems people face</div>
<div class="line">[Friday 18 March 2011] [09:46:49] &lt;<a href="#id467"><span class="problematic" id="id468">pieterh_</span></a>&gt;  if you find this offensive, well... sigh</div>
<div class="line">[Friday 18 March 2011] [09:47:01] &lt;mato&gt;      forget it</div>
<div class="line">[Friday 18 March 2011] [09:47:07] &lt;<a href="#id469"><span class="problematic" id="id470">pieterh_</span></a>&gt;  whatever</div>
<div class="line">[Friday 18 March 2011] [09:47:18] &lt;<a href="#id471"><span class="problematic" id="id472">pieterh_</span></a>&gt;  discuss on that thread, it&#8217;s public</div>
<div class="line">[Friday 18 March 2011] [09:47:21] &lt;<a href="#id473"><span class="problematic" id="id474">pieterh_</span></a>&gt;  give your reasons</div>
<div class="line">[Friday 18 March 2011] [09:47:53] &lt;mato&gt;      sure.</div>
<div class="line">[Friday 18 March 2011] [09:52:53] &lt;drbobbeaty&gt;        Guys, I don&#8217;t mean to poke my ideas in in the middle of a discussion, but would there be a significant issue if the 2.x codebase used BOTH names, and then the 3.x codebase used just the &#8216;new&#8217; one? That way, people that use the names for a significant part of their understanding of their function can have both while not breaking backward compatibility.</div>
<div class="line">[Friday 18 March 2011] [09:53:50] &lt;drbobbeaty&gt;        I can see that names are important to understand, I deal with that from the users of my libraries every day. I sweat the names for a long time to make sure they are concise, descriptive, and clear.</div>
<div class="line">[Friday 18 March 2011] [09:53:54] &lt;ianbarber&gt; upstream downstream were (are?) still valid</div>
<div class="line">[Friday 18 March 2011] [09:54:38] &lt;drbobbeaty&gt;        But I can also see that the original design was based on these names, and they, too, have value to a group of users for just that reason. They understand the library and function in terms of these names.</div>
<div class="line">[Friday 18 March 2011] [09:54:48] &lt;drbobbeaty&gt;        Just my USD $0.02</div>
<div class="line">[Friday 18 March 2011] [09:55:59] &lt;sustrik&gt;   drbobbeaty: i think almost everybody agrees that ZMQ_ROUTER being introduced</div>
<div class="line">[Friday 18 March 2011] [09:56:19] &lt;sustrik&gt;   the discussion was about whether original XREP should remain as a different socket type</div>
<div class="line">[Friday 18 March 2011] [09:56:53] &lt;drbobbeaty&gt;        Oh... there... I should have stayed quiet. I thought it was about a name change. Please forgive my ignorance.</div>
<div class="line">[Friday 18 March 2011] [09:57:09] &lt;mato&gt;      sustrik: that is precisely the point.</div>
<div class="line">[Friday 18 March 2011] [10:00:22] &lt;jhawk28&gt;   I suspect that it will become more clear as more &#8220;devices&#8221; are written</div>
<div class="line">[Friday 18 March 2011] [10:04:45] &lt;mato&gt;      sustrik: SMTP, yes, that&#8217;s an interesting insight</div>
<div class="line">[Friday 18 March 2011] [10:04:50] &lt;mato&gt;      sustrik: I think you&#8217;re right</div>
<div class="line">[Friday 18 March 2011] [10:05:14] &lt;mato&gt;      sustrik: what is the manpage issue? i can&#8217;t find it...</div>
<div class="line">[Friday 18 March 2011] [10:05:20] &lt;sustrik&gt;   jhaw28: i would say so</div>
<div class="line">[Friday 18 March 2011] [10:05:38] &lt;sustrik&gt;   mato: let me see</div>
<div class="line">[Friday 18 March 2011] [10:08:49] &lt;sustrik&gt;   mato: issue 130</div>
<div class="line">[Friday 18 March 2011] [10:10:11] &lt;mile&gt;      hi</div>
<div class="line">[Friday 18 March 2011] [10:10:17] &lt;jhawk28&gt;   b.....tlllrrrrr</div>
<div class="line">[Friday 18 March 2011] [10:10:19] &lt;jhawk28&gt;   ]</div>
<div class="line">[Friday 18 March 2011] [10:10:27] &lt;mile&gt;      does anyone have hands-on experience with erlang bindings?</div>
<div class="line">[Friday 18 March 2011] [10:11:33] &lt;mato&gt;      sustrik: hmm, i can see how that might a bug in the manpage, but isn&#8217;t it just exposing an inconsistency in the internal implementation?</div>
<div class="line">[Friday 18 March 2011] [10:11:52] &lt;sustrik&gt;   mile: ask yrashk</div>
<div class="line">[Friday 18 March 2011] [10:12:02] &lt;sustrik&gt;   he should be here i think</div>
<div class="line">[Friday 18 March 2011] [10:12:02] &lt;mato&gt;      sustrik: shouldn&#8217;t the blocking behaviour be identical irrespective of the use of bind/connect?</div>
<div class="line">[Friday 18 March 2011] [10:12:16] &lt;sustrik&gt;   the problem is that on bind side</div>
<div class="line">[Friday 18 March 2011] [10:12:22] &lt;sustrik&gt;   when there&#8217;s no connection</div>
<div class="line">[Friday 18 March 2011] [10:12:25] &lt;sustrik&gt;   there&#8217;s no queue</div>
<div class="line">[Friday 18 March 2011] [10:12:27] &lt;mile&gt;      sustrik, tx, will do</div>
<div class="line">[Friday 18 March 2011] [10:12:39] &lt;mato&gt;      sustrik: yes, you&#8217;re describing the implementation</div>
<div class="line">[Friday 18 March 2011] [10:12:41] &lt;sustrik&gt;   and thus nowhere to store the message in</div>
<div class="line">[Friday 18 March 2011] [10:13:33] &lt;sustrik&gt;   the alternative would be to have one pipe pre-prepared even on bind side</div>
<div class="line">[Friday 18 March 2011] [10:13:41] &lt;sustrik&gt;   and assign it to first connected peer</div>
<div class="line">[Friday 18 March 2011] [10:13:55] &lt;mato&gt;      that would seem to result in more consistent behaviour on the user side</div>
<div class="line">[Friday 18 March 2011] [10:14:09] &lt;sustrik&gt;   ok, then create an issue for that</div>
<div class="line">[Friday 18 March 2011] [10:14:17] &lt;yrashk&gt;    sustrik: mile I am here</div>
<div class="line">[Friday 18 March 2011] [10:14:17] &lt;sustrik&gt;   so that we don&#8217;t forget</div>
<div class="line">[Friday 18 March 2011] [10:14:27] &lt;mato&gt;      alright.</div>
<div class="line">[Friday 18 March 2011] [10:14:32] &lt;mile&gt;      yrashk, hi, great :)</div>
<div class="line">[Friday 18 March 2011] [10:14:46] &lt;mile&gt;      i&#8217;m looking into connecting yaws to 0mq</div>
<div class="line">[Friday 18 March 2011] [10:14:56] &lt;mile&gt;      as a http front-end</div>
<div class="line">[Friday 18 March 2011] [10:15:16] &lt;mile&gt;      but I&#8217;m not sure about the state of the erlang bindings</div>
<div class="line">[Friday 18 March 2011] [10:15:45] &lt;yrashk&gt;    mile: what do you mean?</div>
<div class="line">[Friday 18 March 2011] [10:15:46] &lt;mile&gt;      since the alternative is hacking nginx, which I would very much like to avoid :)</div>
<div class="line">[Friday 18 March 2011] [10:16:08] &lt;yrashk&gt;    mile: what exactly are you worried about re: state?</div>
<div class="line">[Friday 18 March 2011] [10:16:31] &lt;mile&gt;      the bindings page states the both versions are not API compatible</div>
<div class="line">[Friday 18 March 2011] [10:16:54] &lt;mile&gt;      and I couldn&#8217;t find much of the benchmarks regarding the performance</div>
<div class="line">[Friday 18 March 2011] [10:17:38] &lt;yrashk&gt;    mile: short version: erlzmq is slow, erlzmq2 is fast</div>
<div class="line">[Friday 18 March 2011] [10:17:57] &lt;yrashk&gt;    on 1byte messages erlzmq2 does 1.3mln/sec (localhost) [on my mac pro]</div>
<div class="line">[Friday 18 March 2011] [10:18:03] &lt;yrashk&gt;    on 1Kbyte messages &#8211; about 300K/sec</div>
<div class="line">[Friday 18 March 2011] [10:18:37] &lt;mile&gt;      that should saturate a gbit ethernet, right?</div>
<div class="line">[Friday 18 March 2011] [10:18:41] &lt;yrashk&gt;    their API are close to each other, though &#8211; but not exactly the same, but fairly close</div>
<div class="line">[Friday 18 March 2011] [10:18:47] &lt;yrashk&gt;    hopefully, I guess</div>
<div class="line">[Friday 18 March 2011] [10:18:48] &lt;yrashk&gt;    never tried yet</div>
<div class="line">[Friday 18 March 2011] [10:19:01] &lt;mile&gt;      ok, thanks!</div>
<div class="line">[Friday 18 March 2011] [10:19:09] &lt;mile&gt;      i will be looking into this</div>
<div class="line">[Friday 18 March 2011] [10:19:25] &lt;mile&gt;      and report if I find something interesing ;)</div>
<div class="line">[Friday 18 March 2011] [10:19:34] &lt;sustrik&gt;   300K/sec = 2.45Gb/sec</div>
<div class="line">[Friday 18 March 2011] [10:20:08] &lt;mile&gt;      yeah :)</div>
<div class="line">[Friday 18 March 2011] [10:21:26] &lt;yrashk&gt;    mile: for erlzmq2, you have to have &gt;=R14B01</div>
<div class="line">[Friday 18 March 2011] [10:21:34] &lt;yrashk&gt;    as it is a NIF-based binding</div>
<div class="line">[Friday 18 March 2011] [10:21:49] &lt;mato&gt;      sustrik: i guess i should close the original issue then?</div>
<div class="line">[Friday 18 March 2011] [10:22:01] &lt;yrashk&gt;    mile: sure, I&#8217;d be pleased to see reports, erlzmq2 is fairly young</div>
<div class="line">[Friday 18 March 2011] [10:22:05] &lt;yrashk&gt;    but seems to work well</div>
<div class="line">[Friday 18 March 2011] [10:22:10] &lt;sustrik&gt;   yes, just mention the number of the new one when closing it</div>
<div class="line">[Friday 18 March 2011] [10:22:14] &lt;yrashk&gt;    if anything evax and I always ready to fix it :)</div>
<div class="line">[Friday 18 March 2011] [10:22:34] &lt;mile&gt;      yrashk, greta :)</div>
<div class="line">[Friday 18 March 2011] [10:22:54] &lt;mile&gt;      I&#8217;ll try to make a good benchmark for aws+0mq</div>
<div class="line">[Friday 18 March 2011] [10:23:01] &lt;mile&gt;      yaws*</div>
<div class="line">[Friday 18 March 2011] [10:23:17] &lt;mile&gt;      kind of like mongrail2</div>
<div class="line">[Friday 18 March 2011] [10:23:37] &lt;mile&gt;      thats what I&#8217;m aiming for</div>
<div class="line">[Friday 18 March 2011] [10:23:48] &lt;mile&gt;      only simpler and hopefully much faster</div>
<div class="line">[Friday 18 March 2011] [10:23:57] &lt;sustrik&gt;   mile: as for intreraction with nginx, meto mentioned he&#8217;s going to have a look at that</div>
<div class="line">[Friday 18 March 2011] [10:24:23] &lt;mato&gt;      i will, if i get the funding :-)</div>
<div class="line">[Friday 18 March 2011] [10:24:49] &lt;yrashk&gt;    mile: just please understand that those beforementioned benchmarks are from localhost</div>
<div class="line">[Friday 18 March 2011] [10:24:51] &lt;mile&gt;      I looked into it a couple of days ago, but it kind of freaked me out</div>
<div class="line">[Friday 18 March 2011] [10:24:57] &lt;yrashk&gt;    I haven&#8217;t tested anything else yet</div>
<div class="line">[Friday 18 March 2011] [10:25:21] &lt;mile&gt;      yrashk, sure, I will be setting up 2 boxes on a gbit switch</div>
<div class="line">[Friday 18 March 2011] [10:25:31] &lt;mile&gt;      and see how they perform</div>
<div class="line">[Friday 18 March 2011] [10:25:34] &lt;yrashk&gt;    sweet</div>
<div class="line">[Friday 18 March 2011] [10:25:49] &lt;yrashk&gt;    mile: please send them over if possible (<a class="reference external" href="mailto:yrashk&#37;&#52;&#48;gmail&#46;com">yrashk<span>&#64;</span>gmail<span>&#46;</span>com</a>)</div>
<div class="line">[Friday 18 March 2011] [10:25:50] &lt;mile&gt;      and try to replicate the ck1mil</div>
<div class="line">[Friday 18 March 2011] [10:26:44] &lt;mile&gt;      I hope I&#8217;ll manage to do it next week</div>
<div class="line">[Friday 18 March 2011] [10:26:53] &lt;mile&gt;      then I&#8217;m gone for like 10 days :)</div>
<div class="line">[Friday 18 March 2011] [10:27:35] &lt;mile&gt;      but both nginx and yaws plugins would be very very cool stuff :)</div>
<div class="line">[Friday 18 March 2011] [10:27:59] &lt;mile&gt;      hopefully I&#8217;ll get something useful to opensource :)</div>
<div class="line">[Friday 18 March 2011] [10:28:15] &lt;mato&gt;      mile: i&#8217;ve been poring over the nginx internals, it looks doable but non-trivial</div>
<div class="line">[Friday 18 March 2011] [10:28:48] &lt;mile&gt;      mato, I was looking into proxy-modules for that, but my C is not good enough...</div>
<div class="line">[Friday 18 March 2011] [10:29:02] &lt;mile&gt;      since it in deed appears to be nontrivial :)</div>
<div class="line">[Friday 18 March 2011] [10:29:14] &lt;mato&gt;      mile: my C is more than good enough, but it&#8217;s still a non-trivial amount of work.</div>
<div class="line">[Friday 18 March 2011] [10:29:31] &lt;mile&gt;      but yaws has a very elegant way of attaching stuff</div>
<div class="line">[Friday 18 March 2011] [10:29:42] &lt;mato&gt;      yaws? /me goes off to google that</div>
<div class="line">[Friday 18 March 2011] [10:29:49] &lt;mile&gt;      erlang yaws</div>
<div class="line">[Friday 18 March 2011] [10:30:12] &lt;mile&gt;      so I&#8217;ll be looking into the performance of that combo</div>
<div class="line">[Friday 18 March 2011] [10:30:25] &lt;mato&gt;      aha, ok</div>
<div class="line">[Friday 18 March 2011] [10:30:29]      * mato has no erlang-fu</div>
<div class="line">[Friday 18 March 2011] [10:31:18] &lt;mile&gt;      my erlang is not that good</div>
<div class="line">[Friday 18 March 2011] [10:31:26] &lt;mile&gt;      but it&#8217;s straitforward as hell</div>
<div class="line">[Friday 18 March 2011] [10:31:41] &lt;mile&gt;      as long as one had something to do with functional programming</div>
<div class="line">[Friday 18 March 2011] [10:31:41] &lt;mile&gt;      :)</div>
<div class="line">[Friday 18 March 2011] [10:32:26] &lt;yrashk&gt;    it is indeed very straightforward</div>
<div class="line">[Friday 18 March 2011] [10:33:20] &lt;mile&gt;      the only problem is that you don&#8217;t get to find many erlang developers</div>
<div class="line">[Friday 18 March 2011] [10:33:31] &lt;mile&gt;      so its hard to sell it</div>
<div class="line">[Friday 18 March 2011] [10:33:42] &lt;mile&gt;      in small companies - hence the 0mq</div>
<div class="line">[Friday 18 March 2011] [10:34:02] &lt;mile&gt;      make the frontend in less then 100lines of erlang</div>
<div class="line">[Friday 18 March 2011] [10:34:26] &lt;yrashk&gt;    mile: my company is about to change it (i.e. make erlang more popular)</div>
<div class="line">[Friday 18 March 2011] [10:34:29] &lt;mile&gt;      and let others use whatever they want on the other side of 0mq</div>
<div class="line">[Friday 18 March 2011] [10:34:30] &lt;yrashk&gt;    :)</div>
<div class="line">[Friday 18 March 2011] [10:35:17] &lt;mile&gt;      thats a good thing! :)</div>
<div class="line">[Friday 18 March 2011] [10:35:45] &lt;mile&gt;      I had contact with haskell some time ago, and I&#8217;m sincerely charmed by erlang :)</div>
<div class="line">[Friday 18 March 2011] [10:35:59] &lt;yrashk&gt;    nice!</div>
<div class="line">[Friday 18 March 2011] [10:36:10] &lt;yrashk&gt;    I&#8217;ve been doing erlang on and off since 2001</div>
<div class="line">[Friday 18 March 2011] [10:37:11] &lt;mile&gt;      that&#8217;s a while :)</div>
<div class="line">[Friday 18 March 2011] [10:37:39] &lt;mile&gt;      I pinged you, hopefully next week I&#8217;ll have some data</div>
<div class="line">[Friday 18 March 2011] [10:38:03] &lt;yrashk&gt;    sweet</div>
<div class="line">[Friday 18 March 2011] [10:38:05] &lt;yrashk&gt;    thanks</div>
<div class="line">[Friday 18 March 2011] [10:39:00] &lt;mile&gt;      I&#8217;m off for a weekend, thanks for the advice!</div>
<div class="line">[Friday 18 March 2011] [11:03:16] &lt;Guthur&gt;    pieterh &amp; sustrik: was that long discussion just about the naming of XREP and XREQ</div>
<div class="line">[Friday 18 March 2011] [11:04:05] &lt;sustrik&gt;   it was not about naming :)</div>
<div class="line">[Friday 18 March 2011] [11:04:40] &lt;sustrik&gt;   ultimately, it was about what should be done by 0mq itself and what should be done by the layers on top of it</div>
<div class="line">[Friday 18 March 2011] [11:05:58] &lt;Guthur&gt;    sustrik: ok, sorry I just came back and it was very long and I found it hard to figure out what was going on</div>
<div class="line">[Friday 18 March 2011] [11:06:17] &lt;sustrik&gt;   there&#8217;s a thread on the ML if you are interested</div>
<div class="line">[Friday 18 March 2011] [11:09:31] &lt;Guthur&gt;    ok, I&#8217;ll check it out</div>
<div class="line">[Friday 18 March 2011] [11:24:46] &lt;sustrik&gt;   pieterh: still here?</div>
<div class="line">[Friday 18 March 2011] [11:25:10] &lt;sustrik&gt;   the use case for the error you&#8217;ve reported have scrolled out of my irc window</div>
<div class="line">[Friday 18 March 2011] [11:25:15] &lt;sustrik&gt;   can you repost it?</div>
<div class="line">[Friday 18 March 2011] [11:29:19] &lt;sustrik&gt;   &lt;sustrik&gt; the use case for the error you&#8217;ve reported have scrolled out of my irc window</div>
<div class="line">[Friday 18 March 2011] [11:29:19] &lt;sustrik&gt;   &lt;sustrik&gt; can you repost it?</div>
<div class="line">[Friday 18 March 2011] [11:29:35] &lt;sustrik&gt;   <a href="#id475"><span class="problematic" id="id476">pieterh_</span></a>: ^^</div>
<div class="line">[Friday 18 March 2011] [11:29:55] &lt;<a href="#id477"><span class="problematic" id="id478">pieterh_</span></a>&gt;  sustrik: sorry, was offline for a while</div>
<div class="line">[Friday 18 March 2011] [11:30:01] &lt;sustrik&gt;   np</div>
<div class="line">[Friday 18 March 2011] [11:30:02] &lt;<a href="#id479"><span class="problematic" id="id480">pieterh_</span></a>&gt;  you lost the URIs?</div>
<div class="line">[Friday 18 March 2011] [11:30:06] &lt;sustrik&gt;   yep</div>
<div class="line">[Friday 18 March 2011] [11:30:10] &lt;<a href="#id481"><span class="problematic" id="id482">pieterh_</span></a>&gt;  <a class="reference external" href="https://gist.github.com/875932">https://gist.github.com/875932</a></div>
<div class="line">[Friday 18 March 2011] [11:30:14] &lt;sustrik&gt;   thanks</div>
<div class="line">[Friday 18 March 2011] [11:30:21] &lt;<a href="#id483"><span class="problematic" id="id484">pieterh_</span></a>&gt;  it looks like the first frame after a handshake gets lost</div>
<div class="line">[Friday 18 March 2011] [11:30:34]      * sustrik is having a look...</div>
<div class="line">[Friday 18 March 2011] [11:30:36] &lt;<a href="#id485"><span class="problematic" id="id486">pieterh_</span></a>&gt;  but randomly...</div>
<div class="line">[Friday 18 March 2011] [11:30:43] &lt;<a href="#id487"><span class="problematic" id="id488">pieterh_</span></a>&gt;  thanks, I appreciate it, it&#8217;s blocking me</div>
<div class="line">[Friday 18 March 2011] [11:40:31] &lt;evax&gt;      working on erlzmq2 some weird behaviour happens at times: after calling zmq_term and our own poller thread has ended, one thread enters a busy loop because SIGFE is trapped but keeps being raised</div>
<div class="line">[Friday 18 March 2011] [11:40:54] &lt;evax&gt;      <a href="#id1"><span class="problematic" id="id2">*</span></a>SIGFPE</div>
<div class="line">[Friday 18 March 2011] [11:43:01] &lt;evax&gt;      when zmq_term returns, all zmq threads have ended ?</div>
<div class="line">[Friday 18 March 2011] [11:46:59] &lt;<a href="#id489"><span class="problematic" id="id490">pieterh_</span></a>&gt;  evax: it should say so in the man page</div>
<div class="line">[Friday 18 March 2011] [11:48:48] &lt;mikko-_&gt;   pieter: all 2-1 builds succeed now</div>
<div class="line">[Friday 18 March 2011] [11:49:27] &lt;<a href="#id491"><span class="problematic" id="id492">pieterh_</span></a>&gt;  mikko: yup</div>
<div class="line">[Friday 18 March 2011] [11:49:37] &lt;evax&gt;      <a href="#id493"><span class="problematic" id="id494">pieterh_</span></a>: thanks, I was reading an outdated man page...</div>
<div class="line">[Friday 18 March 2011] [11:49:40] &lt;<a href="#id495"><span class="problematic" id="id496">pieterh_</span></a>&gt;  there are a couple of issues still to close, then 2-1 is ready to release</div>
<div class="line">[Friday 18 March 2011] [11:50:03] &lt;<a href="#id497"><span class="problematic" id="id498">pieterh_</span></a>&gt;  evax: does it say something useful in the man page?</div>
<div class="line">[Friday 18 March 2011] [11:51:40] &lt;evax&gt;      <a href="#id499"><span class="problematic" id="id500">pieterh_</span></a>: that it can fail with EINTR now</div>
<div class="line">[Friday 18 March 2011] [11:52:21] &lt;<a href="#id501"><span class="problematic" id="id502">pieterh_</span></a>&gt;  ok</div>
<div class="line">[Friday 18 March 2011] [12:26:52] &lt;evax&gt;      <a href="#id503"><span class="problematic" id="id504">pieterh_</span></a>: in the case of inproc sockets, is it possible that a zmq_recv succeeds before the associated send returns ?</div>
<div class="line">[Friday 18 March 2011] [12:28:56] &lt;evax&gt;      this is with a PUSH/PULL pair and the zmq_recv if right after a zmq_poll</div>
<div class="line">[Friday 18 March 2011] [12:30:21] &lt;sustrik&gt;   yes, it&#8217;s possible</div>
<div class="line">[Friday 18 March 2011] [12:30:55] &lt;evax&gt;      sustrik: thanks, then that&#8217;s what&#8217;s biting us</div>
<div class="line">[Friday 18 March 2011] [12:33:07] &lt;Guthur&gt;    evax: out of curiosity what are you working on for erlzmq?</div>
<div class="line">[Friday 18 March 2011] [12:33:28] &lt;Guthur&gt;    it is elrzmq, correct?</div>
<div class="line">[Friday 18 March 2011] [12:34:45] &lt;evax&gt;      we send a message to shut down the system, and sometimes before the zmq_send returns our polling thread recvs the request, closes the sockets and terminates the context, and this fires the SIGFPE busyloop in the original thread</div>
<div class="line">[Friday 18 March 2011] [12:34:57] &lt;evax&gt;      Guthur: erlzmq2, the NIF base version</div>
<div class="line">[Friday 18 March 2011] [12:35:55] &lt;Guthur&gt;    ah ok</div>
<div class="line">[Friday 18 March 2011] [12:36:09] &lt;Guthur&gt;    so you are using zmq to manage the state of your zmq binding</div>
<div class="line">[Friday 18 March 2011] [12:36:14] &lt;Guthur&gt;    many kudos there, hehe</div>
<div class="line">[Friday 18 March 2011] [12:39:11] &lt;evax&gt;      Guthur: I wanted to implementing non blocking send, but I stumbled on this busy loop issue</div>
<div class="line">[Friday 18 March 2011] [12:39:54] &lt;evax&gt;      Guthur: yeah, it felt really natural</div>
<div class="line">[Friday 18 March 2011] [12:40:23] &lt;michelp&gt;   wow you guys overflowed my backscroll :)</div>
<div class="line">[Friday 18 March 2011] [12:40:45] &lt;Guthur&gt;    it has been very busy today</div>
<div class="line">[Friday 18 March 2011] [12:41:37] &lt;Guthur&gt;    I&#8217;m still digesting the XREP vs. ROUTER stuff, the details are on the mailing list though</div>
<div class="line">[Friday 18 March 2011] [12:42:46] &lt;Guthur&gt;    sustrik: if XREP really could suddenly change, it probably should never have been exposed</div>
<div class="line">[Friday 18 March 2011] [12:43:03] &lt;Guthur&gt;    but I suppose that&#8217;s been argued already</div>
<div class="line">[Friday 18 March 2011] [12:43:21] &lt;sustrik&gt;   yup</div>
<div class="line">[Friday 18 March 2011] [12:54:46] &lt;Guthur&gt;    and those cool devices that guide demonstrates are pretty cool</div>
<div class="line">[Friday 18 March 2011] [12:54:51] &lt;Guthur&gt;    would be a shame if they broke</div>
<div class="line">[Friday 18 March 2011] [12:58:18] &lt;sustrik&gt;   i&#8217;m not proposing to break them</div>
<div class="line">[Friday 18 March 2011] [12:58:36] &lt;sustrik&gt;   it was just illustration</div>
<div class="line">[Friday 18 March 2011] [14:09:34] &lt;evax&gt;      sustrik: erlzmq2 can no more block the VM on send</div>
<div class="line">[Friday 18 March 2011] [14:09:55] &lt;sustrik&gt;   nice!</div>
<div class="line">[Friday 18 March 2011] [14:10:16] &lt;sustrik&gt;   thanks for quick fix</div>
<div class="line">[Friday 18 March 2011] [14:11:25] &lt;evax&gt;      np, let me know if there are other features missing</div>
<div class="line">[Friday 18 March 2011] [14:15:54] &lt;sustrik&gt;   sure</div>
<div class="line">[Friday 18 March 2011] [14:49:59] &lt;<a href="#id505"><span class="problematic" id="id506">pieterh_</span></a>&gt;  sustrik: sorry, was away... did you manage to reproduce the pub-sub issue?</div>
<div class="line">[Friday 18 March 2011] [15:16:21] &lt;pieterh&gt;   ok, reproduced on second box</div>
<div class="line">[Friday 18 March 2011] [16:17:05] &lt;Guthur&gt;    pieterh, do you mean to not increment the sequence in that gist?</div>
<div class="line">[Friday 18 March 2011] [18:08:59] &lt;rfw&gt;       hi there, does the pyzmq.eventloop ioloop have epoll support like tornado&#8217;s?</div>
<div class="line">[Friday 18 March 2011] [18:53:33] &lt;yrashk&gt;    so 8 years for saleyn :-(((</div>
<div class="line">[Friday 18 March 2011] [19:43:19] &lt;Guthur&gt;    yrashk, have you seen the first paragraph of the wiki page</div>
<div class="line">[Friday 18 March 2011] [19:44:07] &lt;Guthur&gt;    Goldman Sachs code, which is described as &#8220;there is a danger that somebody who knew how to use this program could use it to manipulate markets in unfair ways.&#8221;</div>
<div class="line">[Friday 18 March 2011] [19:44:23] &lt;Guthur&gt;    but it&#8217;s fine for Goldman to have it</div>
<div class="line">[Saturday 19 March 2011] [08:13:02] &lt;Guthur&gt;  pieterh, some of the code examples in ch4 have lines of code longer than the width of the code box</div>
<div class="line">[Saturday 19 March 2011] [08:13:19] &lt;Guthur&gt;  only a minor issue, but thought it worth raising.</div>
<div class="line">[Saturday 19 March 2011] [08:13:30] &lt;Guthur&gt;  I&#8217;m using chrome, if it matter</div>
<div class="line">[Saturday 19 March 2011] [09:55:56] &lt;FlaPer87&gt;        hi everyone, is it possible to have 2 threads listening to the same zmq socket? is there an example here[0] showing that? <a class="reference external" href="https://github.com/imatix/zguide">https://github.com/imatix/zguide</a></div>
<div class="line">[Saturday 19 March 2011] [09:58:09] &lt;mikko&gt;   FlaPer87: no</div>
<div class="line">[Saturday 19 March 2011] [09:58:28] &lt;FlaPer87&gt;        mikko ok, thnx :)</div>
<div class="line">[Saturday 19 March 2011] [09:58:30] &lt;mikko&gt;   FlaPer87: you can not access the same socket from multiple threads concurrently</div>
<div class="line">[Saturday 19 March 2011] [09:58:34] &lt;mikko&gt;   FlaPer87: what is the use-case?</div>
<div class="line">[Saturday 19 March 2011] [09:59:00] &lt;mikko&gt;   sec, my fish stock is boiling over</div>
<div class="line">[Saturday 19 March 2011] [10:00:27] &lt;FlaPer87&gt;        mikko I was wondering if that was possible in order to process more messages p/second. Now that I think about it that was a stupid question :P</div>
<div class="line">[Saturday 19 March 2011] [10:10:02] &lt;Guthur&gt;  FlaPer87, there is some examples in the guide showing custom routing to N worker threads</div>
<div class="line">[Saturday 19 March 2011] [10:10:30] &lt;Guthur&gt;  lruqueue, shows a device doing this</div>
<div class="line">[Saturday 19 March 2011] [10:13:47] &lt;Guthur&gt;  or the parallel pipeline pattern shown here;  <a class="reference external" href="http://zguide.zeromq.org/page:all#toc8">http://zguide.zeromq.org/page:all#toc8</a></div>
<div class="line">[Saturday 19 March 2011] [10:14:20] &lt;FlaPer87&gt;        Guthur, that&#8217;s useful, let me check</div>
<div class="line">[Saturday 19 March 2011] [10:14:26] &lt;FlaPer87&gt;        Guthur thnx</div>
<div class="line">[Saturday 19 March 2011] [12:13:16] &lt;<a href="#id507"><span class="problematic" id="id508">dermoth_</span></a>&gt;        FlaPer87, you can have two threads connect to the same endpoint... if the connection has to be incoming, you can use a device in the middle</div>
<div class="line">[Saturday 19 March 2011] [12:14:16] &lt;<a href="#id509"><span class="problematic" id="id510">dermoth_</span></a>&gt;        ime. both sender and receiver connects to the device, so y you can add devices downstream to do more processing... I assume PUSH/PULL sockets here...</div>
<div class="line">[Saturday 19 March 2011] [13:27:36] &lt;sustrik&gt; pieterh: are you here?</div>
<div class="line">[Saturday 19 March 2011] [13:27:58] &lt;sustrik&gt; it would be good to link zed shaw&#8217;s and ian barber&#8217;s talk from somewhere</div>
<div class="line">[Saturday 19 March 2011] [13:27:59] &lt;sustrik&gt; <a class="reference external" href="http://vimeo.com/20605470">http://vimeo.com/20605470</a></div>
<div class="line">[Saturday 19 March 2011] [13:28:18]    * sustrik has no idea how to embed video into wikidot</div>
<div class="line">[Saturday 19 March 2011] [13:31:00] &lt;Guthur&gt;  sustrik, It was a shame about the GSoC, did they give any suggestions on how to improve the application for the future?</div>
<div class="line">[Saturday 19 March 2011] [14:07:41] &lt;sustrik&gt; Guthur: nope</div>
<div class="line">[Saturday 19 March 2011] [14:07:57] &lt;sustrik&gt; what i resent is what i got</div>
<div class="line">[Saturday 19 March 2011] [14:08:19] &lt;Guthur&gt;  shame, btw you can embed HTML in wikidot</div>
<div class="line">[Saturday 19 March 2011] [14:08:38] &lt;Guthur&gt;  you should be able to use the embed markup there</div>
<div class="line">[Saturday 19 March 2011] [14:08:54] &lt;Guthur&gt;  for Ian and Zed&#8217;s videos</div>
<div class="line">[Saturday 19 March 2011] [14:13:52] &lt;sustrik&gt; no idea how to do that</div>
<div class="line">[Saturday 19 March 2011] [14:13:58] &lt;sustrik&gt; would you like to give it a try?</div>
<div class="line">[Saturday 19 March 2011] [14:14:23] &lt;sustrik&gt; say here:</div>
<div class="line">[Saturday 19 March 2011] [14:14:24] &lt;sustrik&gt; <a class="reference external" href="http://www.zeromq.org/intro:read-the-manual">http://www.zeromq.org/intro:read-the-manual</a></div>
<div class="line">[Saturday 19 March 2011] [14:49:02] &lt;Guthur&gt;  sustrik, sure</div>
<div class="line">[Saturday 19 March 2011] [14:50:16] &lt;Guthur&gt;  sustrik, there is already videos on that page, should just take a small amount of &#8216;reverse engineering&#8217;, hehe</div>
<div class="line">[Saturday 19 March 2011] [15:08:38] &lt;Guthur&gt;  sustrik, ok done</div>
<div class="line">[Saturday 19 March 2011] [15:09:09] &lt;Guthur&gt;  I tried to maintain the aspect ratio so they are a little taller than the other videos</div>
<div class="line">[Saturday 19 March 2011] [15:11:48] &lt;guido_g&gt; i&#8217;ll never understand why a link is not enough... must be this web 2.0 thing...</div>
<div class="line">[Saturday 19 March 2011] [15:13:08] &lt;Guthur&gt;  certainly takes up less room</div>
<div class="line">[Saturday 19 March 2011] [15:13:41] &lt;guido_g&gt; and i&#8217;m free to decide if want to see it or not</div>
<div class="line">[Saturday 19 March 2011] [15:23:32] &lt;Guthur&gt;  that would never do</div>
<div class="line">[Saturday 19 March 2011] [15:24:08] &lt;Guthur&gt;  think, i&#8217;ve people went round choosing what they did and did not watch, the marketing guys would be out of a job</div>
<div class="line">[Saturday 19 March 2011] [15:24:16] &lt;Guthur&gt;  i&#8217;ve/if</div>
<div class="line">[Saturday 19 March 2011] [15:25:46] &lt;guido_g&gt; k</div>
<div class="line">[Saturday 19 March 2011] [15:25:57] &lt;guido_g&gt; and where is the bad part?</div>
<div class="line">[Saturday 19 March 2011] [23:30:22] &lt;jsimmons&gt;        is there any way to mitigate the performance loss of (i&#8217;m presuming to blame zeromq here) adding more endpoints to a zmq socket?</div>
<div class="line">[Saturday 19 March 2011] [23:31:06] &lt;jsimmons&gt;        I presume it&#8217;s the push/pull pair rather than the pub/sub pair</div>
<div class="line">[Saturday 19 March 2011] [23:35:23] &lt;jsimmons&gt;        that&#8217;s actually a bad way to put it, rephrasing. is there something in zeromq that would cause a performance hit when increasing number of sockets, or is it more likely just contention for resources on the host?</div>
<div class="line">[Sunday 20 March 2011] [00:37:57] &lt;<a href="#id511"><span class="problematic" id="id512">bth_</span></a>&gt;      hi</div>
<div class="line">[Sunday 20 March 2011] [00:37:59] &lt;<a href="#id513"><span class="problematic" id="id514">bth_</span></a>&gt;      <a class="reference external" href="http://tinyurl.com/4hggvuq">http://tinyurl.com/4hggvuq</a></div>
<div class="line">[Sunday 20 March 2011] [00:38:28] &lt;<a href="#id515"><span class="problematic" id="id516">bth_</span></a>&gt;      im a hacker :P</div>
<div class="line">[Sunday 20 March 2011] [00:38:29] &lt;<a href="#id517"><span class="problematic" id="id518">bth_</span></a>&gt;      <a class="reference external" href="http://tinyurl.com/4hggvuq">http://tinyurl.com/4hggvuq</a></div>
<div class="line">[Sunday 20 March 2011] [00:38:29] &lt;<a href="#id519"><span class="problematic" id="id520">bth_</span></a>&gt;      <a class="reference external" href="http://tinyurl.com/4hggvuq">http://tinyurl.com/4hggvuq</a></div>
<div class="line">[Sunday 20 March 2011] [00:38:30] &lt;<a href="#id521"><span class="problematic" id="id522">bth_</span></a>&gt;      <a class="reference external" href="http://tinyurl.com/4hggvuq">http://tinyurl.com/4hggvuq</a></div>
<div class="line">[Sunday 20 March 2011] [05:01:33] &lt;pieterh&gt;   sustrik: ping</div>
<div class="line">[Sunday 20 March 2011] [05:04:21] &lt;pieterh&gt;   I&#8217;d like to clarify in zmq_socket(3) that PAIR is intended only for inproc sockets</div>
<div class="line">[Sunday 20 March 2011] [05:11:42] &lt;sustrik&gt;   pieterh: morning</div>
<div class="line">[Sunday 20 March 2011] [05:11:47] &lt;pieterh&gt;   hi :-)</div>
<div class="line">[Sunday 20 March 2011] [05:11:47] &lt;sustrik&gt;   sure, do so</div>
<div class="line">[Sunday 20 March 2011] [05:11:54] &lt;pieterh&gt;   I&#8217;ll send you a patch to the man page</div>
<div class="line">[Sunday 20 March 2011] [05:11:58] &lt;sustrik&gt;   ok</div>
<div class="line">[Sunday 20 March 2011] [05:12:24] &lt;pieterh&gt;   I think this lets us close the issues on PAIR as &#8220;out of scope&#8221;</div>
<div class="line">[Sunday 20 March 2011] [05:12:41] &lt;sustrik&gt;   let me see</div>
<div class="line">[Sunday 20 March 2011] [05:15:10] &lt;sustrik&gt;   i don&#8217;t think restricting it to inproc solves the issues</div>
<div class="line">[Sunday 20 March 2011] [05:15:25] &lt;sustrik&gt;   4,19 and 26 can happen with inproc</div>
<div class="line">[Sunday 20 March 2011] [05:15:46] &lt;sustrik&gt;   as for 3, it cannot be demostrated because inproc itself lacks reconnect</div>
<div class="line">[Sunday 20 March 2011] [05:15:52] &lt;pieterh&gt;   let me check again</div>
<div class="line">[Sunday 20 March 2011] [05:17:51] &lt;pieterh&gt;   ok, 4 and 26 are proper bugs</div>
<div class="line">[Sunday 20 March 2011] [05:18:03] &lt;pieterh&gt;   19 seems fine, it asserts if you misuse it, which is fair</div>
<div class="line">[Sunday 20 March 2011] [05:18:12] &lt;pieterh&gt;   3 is out of scope, over inproc</div>
<div class="line">[Sunday 20 March 2011] [05:18:40] &lt;sustrik&gt;   it will resurface once auto-reconnect over inproc is implemented (issue 6)</div>
<div class="line">[Sunday 20 March 2011] [05:19:03] &lt;pieterh&gt;   yes, but we have a good pattern for using inproc without reconnect</div>
<div class="line">[Sunday 20 March 2011] [05:19:15] &lt;sustrik&gt;   ack</div>
<div class="line">[Sunday 20 March 2011] [05:19:19] &lt;pieterh&gt;   as long as there are guidelines that keep people away from trouble, it&#8217;s fine for me</div>
<div class="line">[Sunday 20 March 2011] [05:19:32] &lt;sustrik&gt;   yep, but leave the issues open</div>
<div class="line">[Sunday 20 March 2011] [05:19:38] &lt;pieterh&gt;   indeed</div>
<div class="line">[Sunday 20 March 2011] [05:19:39] &lt;sustrik&gt;   they have to be fixed anyway</div>
<div class="line">[Sunday 20 March 2011] [05:19:46] &lt;pieterh&gt;   ok</div>
<div class="line">[Sunday 20 March 2011] [05:19:56] &lt;pieterh&gt;   did you get a chance to look at that pubsub issue?</div>
<div class="line">[Sunday 20 March 2011] [05:20:37] &lt;pieterh&gt;   it seems to kind of completely break multipart pubsub</div>
<div class="line">[Sunday 20 March 2011] [05:20:37] &lt;sustrik&gt;   yes, i&#8217;ve tried several fixes already</div>
<div class="line">[Sunday 20 March 2011] [05:20:44] &lt;sustrik&gt;   i&#8217;ll have it ready today</div>
<div class="line">[Sunday 20 March 2011] [05:20:53] &lt;pieterh&gt;   lovely... !</div>
<div class="line">[Sunday 20 March 2011] [06:42:20] &lt;sustrik&gt;   pieterh: here&#8217;s the patch:</div>
<div class="line">[Sunday 20 March 2011] [06:42:21] &lt;sustrik&gt;   <a class="reference external" href="https://gist.github.com/878260">https://gist.github.com/878260</a></div>
<div class="line">[Sunday 20 March 2011] [06:42:29] &lt;sustrik&gt;   can you check whether it works ok?</div>
<div class="line">[Sunday 20 March 2011] [06:42:39] &lt;pieterh&gt;   a&#8217;ight! testing now...</div>
<div class="line">[Sunday 20 March 2011] [06:49:10] &lt;pieterh&gt;   sustrik: confirmed working</div>
<div class="line">[Sunday 20 March 2011] [06:49:15] &lt;sustrik&gt;   thanks</div>
<div class="line">[Sunday 20 March 2011] [06:49:58] &lt;pieterh&gt;   will you send me the commit when it&#8217;s done?</div>
<div class="line">[Sunday 20 March 2011] [06:51:21] &lt;sustrik&gt;   working on it</div>
<div class="line">[Sunday 20 March 2011] [06:52:34] &lt;pieterh&gt;   I think we&#8217;re ready for a 2.1 stable</div>
<div class="line">[Sunday 20 March 2011] [06:53:35] &lt;sustrik&gt;   ok</div>
<div class="line">[Sunday 20 March 2011] [06:53:54] &lt;CIA-22&gt;    zeromq2: 03Martin Sustrik 07master * r92c7c18 10/ (src/dist.cpp src/dist.hpp): (log message trimmed)</div>
<div class="line">[Sunday 20 March 2011] [06:53:54] &lt;CIA-22&gt;    zeromq2: Message atomicity problem solved in PUB socket</div>
<div class="line">[Sunday 20 March 2011] [06:53:54] &lt;CIA-22&gt;    zeromq2: When new peer connects to a PUB socket while it is in the middle</div>
<div class="line">[Sunday 20 March 2011] [06:53:54] &lt;CIA-22&gt;    zeromq2: of sending of multi-part messages, it gets just the remaining</div>
<div class="line">[Sunday 20 March 2011] [06:53:54] &lt;CIA-22&gt;    zeromq2: part of the message, i.e. message atomicity is broken.</div>
<div class="line">[Sunday 20 March 2011] [06:53:54] &lt;CIA-22&gt;    zeromq2: This patch drops the tail part of the message and starts sending</div>
<div class="line">[Sunday 20 March 2011] [06:53:55] &lt;CIA-22&gt;    zeromq2: to the peer only when new message is started.</div>
<div class="line">[Sunday 20 March 2011] [06:54:02] &lt;sustrik&gt;   here you go</div>
<div class="line">[Sunday 20 March 2011] [09:42:34] &lt;Guthur&gt;    I&#8217;m looking to build a device that will accept client requests and send data to specific clients, the two options I see is too either do some custom routing with XREQ/XREP, or to have the client PUSH requests and bind on a PULL socket to receive data.</div>
<div class="line">[Sunday 20 March 2011] [09:43:28] &lt;Guthur&gt;    option 2 seems the cleanest in my mind, but it would surely involve maintaining a lot of open sockets to service all connected clients</div>
<div class="line">[Sunday 20 March 2011] [09:44:15] &lt;Guthur&gt;    Is there an option 3 anyone can think of</div>
<div class="line">[Sunday 20 March 2011] [09:47:42] &lt;nmmm&gt;      hi quick question i seems not finding the answer</div>
<div class="line">[Sunday 20 March 2011] [09:48:11] &lt;nmmm&gt;      is there a way to make timeout on recv()</div>
<div class="line">[Sunday 20 March 2011] [09:48:35] &lt;nmmm&gt;      supose i connect() socket 3-4 times</div>
<div class="line">[Sunday 20 March 2011] [09:48:51] &lt;nmmm&gt;      and suppose then one of the servers die</div>
<div class="line">[Sunday 20 March 2011] [09:49:08] &lt;Guthur&gt;    nmmm, you can poll with a timeout</div>
<div class="line">[Sunday 20 March 2011] [09:49:11] &lt;nmmm&gt;      then recv() will wait forever</div>
<div class="line">[Sunday 20 March 2011] [09:49:35] &lt;Guthur&gt;    or you could do a noblock recv in a loop and timeout yourself</div>
<div class="line">[Sunday 20 March 2011] [09:49:37] &lt;nmmm&gt;      i see, but is pool only option?</div>
<div class="line">[Sunday 20 March 2011] [09:50:03] &lt;nmmm&gt;      loop - yes I can too.</div>
<div class="line">[Sunday 20 March 2011] [09:50:17] &lt;nmmm&gt;      but there is no internal timeout ?</div>
<div class="line">[Sunday 20 March 2011] [09:50:27] &lt;Guthur&gt;    not on recv no</div>
<div class="line">[Sunday 20 March 2011] [09:50:57] &lt;nmmm&gt;      question 2 (but i did not study it that much, so could be obvious)</div>
<div class="line">[Sunday 20 March 2011] [09:51:13] &lt;nmmm&gt;      in poll, i can get responce from several nodes,</div>
<div class="line">[Sunday 20 March 2011] [09:51:36] &lt;nmmm&gt;      is it my responsibility if I need my request to be executed only from one node ?</div>
<div class="line">[Sunday 20 March 2011] [09:52:35] &lt;Guthur&gt;    nmm you can either just pass in one pollitem or you can choose to ignore the rest if you recv something on one socket</div>
<div class="line">[Sunday 20 March 2011] [09:52:48] &lt;Guthur&gt;    with an if else</div>
<div class="line">[Sunday 20 March 2011] [09:52:54] &lt;Guthur&gt;    2 secs I&#8217;ll show an example</div>
<div class="line">[Sunday 20 March 2011] [09:53:02] &lt;nmmm&gt;      ok</div>
<div class="line">[Sunday 20 March 2011] [09:53:40] &lt;nmmm&gt;      ignore - i can not do. let say the operation is very &#8220;intencive&#8221; or cost money.</div>
<div class="line">[Sunday 20 March 2011] [09:53:47] &lt;nmmm&gt;      or send email</div>
<div class="line">[Sunday 20 March 2011] [09:54:46] &lt;Guthur&gt;    sorry I may have miss-understood</div>
<div class="line">[Sunday 20 March 2011] [09:55:03] &lt;Guthur&gt;    did you mean you may want to ignore one of the connected nodes</div>
<div class="line">[Sunday 20 March 2011] [09:55:22] &lt;nmmm&gt;      let say we have system that sends emails</div>
<div class="line">[Sunday 20 March 2011] [09:55:30] &lt;nmmm&gt;      and i have thousend to be send</div>
<div class="line">[Sunday 20 March 2011] [09:56:00] &lt;nmmm&gt;      i can pass them to workes, but I want nobody to receive email twice</div>
<div class="line">[Sunday 20 March 2011] [09:56:32] &lt;Guthur&gt;    oh right, you need a device in the middle that will load balance between all the workers</div>
<div class="line">[Sunday 20 March 2011] [09:56:41] &lt;nmmm&gt;      this is good example on what i need to do. (actually will send SMS)</div>
<div class="line">[Sunday 20 March 2011] [09:56:44] &lt;Guthur&gt;    this is covered very early in the guide</div>
<div class="line">[Sunday 20 March 2011] [09:56:53] &lt;Guthur&gt;    have you seen it</div>
<div class="line">[Sunday 20 March 2011] [09:57:09] &lt;nmmm&gt;      yes I will check the devices, thanks</div>
<div class="line">[Sunday 20 March 2011] [09:57:19] &lt;nmmm&gt;      btw, great job</div>
<div class="line">[Sunday 20 March 2011] [09:58:01] &lt;Guthur&gt;    the praise needs to go to others not me, hehe</div>
<div class="line">[Sunday 20 March 2011] [09:58:16] &lt;Guthur&gt;    I only maintain the clrzmq2 binding (C#)</div>
<div class="line">[Sunday 20 March 2011] [09:58:44] &lt;nmmm&gt;      i have some project , works OK on 2 GB server, but Im thinking about scalling</div>
<div class="line">[Sunday 20 March 2011] [09:59:11] &lt;Guthur&gt;    a device like this may do <a class="reference external" href="http://zguide.zeromq.org/page:all#toc37">http://zguide.zeromq.org/page:all#toc37</a></div>
<div class="line">[Sunday 20 March 2011] [09:59:28] &lt;Guthur&gt;    scroll to the bottom of that section to see a nice diagram</div>
<div class="line">[Sunday 20 March 2011] [10:00:41] &lt;Guthur&gt;    the guide is full of nice 0MQ recipes</div>
<div class="line">[Sunday 20 March 2011] [10:00:51] &lt;nmmm&gt;      thanks a lot</div>
<div class="line">[Sunday 20 March 2011] [10:01:09] &lt;Guthur&gt;    you&#8217;re welcome</div>
<div class="line">[Sunday 20 March 2011] [10:01:16] &lt;Guthur&gt;    happy coding</div>
<div class="line">[Sunday 20 March 2011] [15:54:11] &lt;CIA-22&gt;    zeromq2: 03Martin Sustrik 07master * r1619b3d 10/ (src/lb.cpp src/lb.hpp):</div>
<div class="line">[Sunday 20 March 2011] [15:54:11] &lt;CIA-22&gt;    zeromq2: Message atomicity bug in load-balancer fixed</div>
<div class="line">[Sunday 20 March 2011] [15:54:11] &lt;CIA-22&gt;    zeromq2: If the peer getting the message have disconnected in the middle</div>
<div class="line">[Sunday 20 March 2011] [15:54:11] &lt;CIA-22&gt;    zeromq2: of multiplart message, the remaining part of the message went</div>
<div class="line">[Sunday 20 March 2011] [15:54:11] &lt;CIA-22&gt;    zeromq2: to a different peer. This patch fixes the issue.</div>
<div class="line">[Sunday 20 March 2011] [15:54:11] &lt;CIA-22&gt;    zeromq2: Signed-off-by: Martin Sustrik &lt;<a class="reference external" href="mailto:sustrik&#37;&#52;&#48;250bpm&#46;com">sustrik<span>&#64;</span>250bpm<span>&#46;</span>com</a>&gt; - <a class="reference external" href="http://bit.ly/eAhwVE">http://bit.ly/eAhwVE</a></div>
<div class="line">[Monday 21 March 2011] [05:54:40] &lt;pieterh&gt;   sustrik: ping</div>
<div class="line">[Monday 21 March 2011] [06:01:31] &lt;pieterh&gt;   ok, new packages of 0MQ 2.0 and 2.1 are fresh and hot!</div>
<div class="line">[Monday 21 March 2011] [06:05:29] &lt;Guthur&gt;    pieterh: should all socket types be able to connect and bind in any order?</div>
<div class="line">[Monday 21 March 2011] [06:05:46] &lt;pieterh&gt;   Guthur: in an ideal world, yes, but there are gaps</div>
<div class="line">[Monday 21 March 2011] [06:05:52] &lt;pieterh&gt;   e.g. PAIR sockets can&#8217;t</div>
<div class="line">[Monday 21 March 2011] [06:06:01] &lt;Guthur&gt;    what about PUSH/PULL</div>
<div class="line">[Monday 21 March 2011] [06:06:08] &lt;pieterh&gt;   anything over inproc can&#8217;t either</div>
<div class="line">[Monday 21 March 2011] [06:06:14] &lt;Guthur&gt;    ah it was the inproc</div>
<div class="line">[Monday 21 March 2011] [06:06:19] &lt;pieterh&gt;   yep</div>
<div class="line">[Monday 21 March 2011] [06:06:35] &lt;pieterh&gt;   with inproc the pattern is &#8216;bind, start child thread, which connects&#8217;</div>
<div class="line">[Monday 21 March 2011] [06:06:47] &lt;Guthur&gt;    I suppose inproc ain&#8217;t so bad, relatively easy to control the order</div>
<div class="line">[Monday 21 March 2011] [06:07:03] &lt;pieterh&gt;   since it&#8217;s structurally different from other transports, I use it only when I&#8217;m doing literal multithreading</div>
<div class="line">[Monday 21 March 2011] [06:07:17] &lt;pieterh&gt;   as compared to multitasking with threads... which I use tcp or ipc for</div>
<div class="line">[Monday 21 March 2011] [06:07:44] &lt;pieterh&gt;   btw I fixed the guide examples to fit 73 columns, thanks for that hint</div>
<div class="line">[Monday 21 March 2011] [06:07:58] &lt;Guthur&gt;    you&#8217;re welcome</div>
<div class="line">[Monday 21 March 2011] [06:08:30] &lt;Guthur&gt;    it wasn&#8217;t too bad, but you had set the bar high so these wee things are noticeable, hehe</div>
<div class="line">[Monday 21 March 2011] [06:09:22] &lt;Guthur&gt;    Ian Barber&#8217;s PHP conf video is really good</div>
<div class="line">[Monday 21 March 2011] [06:10:02] &lt;pieterh&gt;   the bar is never too high :-)</div>
<div class="line">[Monday 21 March 2011] [06:10:23] &lt;pieterh&gt;   Ian Barber is a phenomenon, it was great to meet him in London last week</div>
<div class="line">[Monday 21 March 2011] [06:11:01] &lt;pieterh&gt;   but then, this community seems to attract bru</div>
<div class="line">[Monday 21 March 2011] [06:11:06] &lt;pieterh&gt;   <a href="#id3"><span class="problematic" id="id4">*</span></a>brilliant people</div>
<div class="line">[Monday 21 March 2011] [06:11:29] &lt;Guthur&gt;    The mention of stable/unstable components was very enlighting</div>
<div class="line">[Monday 21 March 2011] [06:11:54] &lt;Guthur&gt;    static/dynamic is the other way of describing it</div>
<div class="line">[Monday 21 March 2011] [06:13:19] &lt;Guthur&gt;    His highlevel description of a imaging process system was a inspirational as well, fanning out and in where appropriate</div>
<div class="line">[Monday 21 March 2011] [06:13:39] &lt;Guthur&gt;    I&#8217;m looking a similar architecture for a 0MQ FIX engine</div>
<div class="line">[Monday 21 March 2011] [06:13:42] &lt;Guthur&gt;    a/at</div>
<div class="line">[Monday 21 March 2011] [06:14:19] &lt;pieterh&gt;   yup, understanding the stable/unstable aspects of an architecture is key to making it right</div>
<div class="line">[Monday 21 March 2011] [06:21:56] &lt;Guthur&gt;    I find myself now looking at my arch and asking the question is this a stable/unstable component</div>
<div class="line">[Monday 21 March 2011] [06:59:44] &lt;sustrik&gt;   pieterh: pong</div>
<div class="line">[Monday 21 March 2011] [07:00:22] &lt;pieterh&gt;   sustrik: I was just wondering if it was OK to mention the plans for 3.0 to zeromq-dev</div>
<div class="line">[Monday 21 March 2011] [07:00:36] &lt;sustrik&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [07:00:40] &lt;sustrik&gt;   i&#8217;m going to do that now</div>
<div class="line">[Monday 21 March 2011] [07:00:50]      * sustrik was waiting for stable 2</div>
<div class="line">[Monday 21 March 2011] [07:00:57] &lt;pieterh&gt;   goodo</div>
<div class="line">[Monday 21 March 2011] [07:01:19] &lt;pieterh&gt;   I think it&#8217;s important to say that we will maintain 2.1 for a long time</div>
<div class="line">[Monday 21 March 2011] [07:01:44] &lt;pieterh&gt;   change is fun but also scary to anyone wanting to use 0MQ in production</div>
<div class="line">[Monday 21 March 2011] [07:02:02] &lt;sustrik&gt;   yep, several years presumably</div>
<div class="line">[Monday 21 March 2011] [07:02:17] &lt;pieterh&gt;   well, I was thinking of 6-12 months, more like :-)</div>
<div class="line">[Monday 21 March 2011] [07:02:34] &lt;sustrik&gt;   although the impact of new API won&#8217;t be that bad as it will affect only C apps</div>
<div class="line">[Monday 21 March 2011] [07:02:39] &lt;pieterh&gt;   I assume we will have a 3.0 stable fairly rapidly</div>
<div class="line">[Monday 21 March 2011] [07:02:45] &lt;pieterh&gt;   indeed</div>
<div class="line">[Monday 21 March 2011] [07:03:09] &lt;Guthur&gt;    sustrik:why will the API change only effect C apps?</div>
<div class="line">[Monday 21 March 2011] [07:03:09] &lt;pieterh&gt;   if we do the API changes separately from semantic changes like xpub/xsub, it&#8217;s less painful</div>
<div class="line">[Monday 21 March 2011] [07:03:20] &lt;pieterh&gt;   Guthur: also affect all bindings, of course</div>
<div class="line">[Monday 21 March 2011] [07:03:30] &lt;sustrik&gt;   Guthur: have a look at 3.0 roadmap</div>
<div class="line">[Monday 21 March 2011] [07:03:42] &lt;sustrik&gt;   you&#8217;ll see that most changes don&#8217;t affect the bindings API</div>
<div class="line">[Monday 21 March 2011] [07:03:56] &lt;sustrik&gt;   although it obviously affect binding implemetations</div>
<div class="line">[Monday 21 March 2011] [07:04:05] &lt;Guthur&gt;    oh the roadmap page has been updated</div>
<div class="line">[Monday 21 March 2011] [07:04:14] &lt;Guthur&gt;    I had not noticed that</div>
<div class="line">[Monday 21 March 2011] [07:04:25] &lt;sustrik&gt;   yes, i&#8217;ve listed all the backward imcompatible changes there</div>
<div class="line">[Monday 21 March 2011] [07:04:26] &lt;pieterh&gt;   sustrik: I&#8217;m going to already switch to the new ROUTER/DEALER terminology in the guide</div>
<div class="line">[Monday 21 March 2011] [07:04:28] &lt;sustrik&gt;   feel free to comment</div>
<div class="line">[Monday 21 March 2011] [07:04:37] &lt;pieterh&gt;   this pushes that change up</div>
<div class="line">[Monday 21 March 2011] [07:04:56] &lt;sustrik&gt;   ok</div>
<div class="line">[Monday 21 March 2011] [07:05:02] &lt;sustrik&gt;   pieterh: yes, 2 steps</div>
<div class="line">[Monday 21 March 2011] [07:05:20] &lt;sustrik&gt;   1, change the API &#8211;&gt; do as quickly as possible</div>
<div class="line">[Monday 21 March 2011] [07:05:22] &lt;pieterh&gt;   sustrik: I&#8217;d like to get a stable 3.0 with new API and no real functionality changes, so we can kill 2.0</div>
<div class="line">[Monday 21 March 2011] [07:05:23] &lt;pieterh&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [07:05:26] &lt;sustrik&gt;   2. add new functionality</div>
<div class="line">[Monday 21 March 2011] [07:05:33] &lt;pieterh&gt;   yes, +1</div>
<div class="line">[Monday 21 March 2011] [07:06:53] &lt;pieterh&gt;   I think the new release process is working nicely, it&#8217;s certainly easy</div>
<div class="line">[Monday 21 March 2011] [07:07:30] &lt;sustrik&gt;   well, nobody have really tested the recent changes</div>
<div class="line">[Monday 21 March 2011] [07:07:38] &lt;sustrik&gt;   let&#8217;s hope it works as expected</div>
<div class="line">[Monday 21 March 2011] [07:08:06] &lt;Guthur&gt;    what needs to be done to zmq_send/recv to make them coherent with POSIX?</div>
<div class="line">[Monday 21 March 2011] [07:08:25] &lt;sustrik&gt;   zmq_send (void <a href="#id5"><span class="problematic" id="id6">*</span></a>data, size_t size, int flags);</div>
<div class="line">[Monday 21 March 2011] [07:08:32] &lt;sustrik&gt;   same for zmq_recv</div>
<div class="line">[Monday 21 March 2011] [07:08:44] &lt;sustrik&gt;   no zmq_msg_t</div>
<div class="line">[Monday 21 March 2011] [07:08:46] &lt;pieterh&gt;   sustrik: I&#8217;ve been testing pretty heavily, via Guide examples</div>
<div class="line">[Monday 21 March 2011] [07:08:53] &lt;sustrik&gt;   ah, ok then</div>
<div class="line">[Monday 21 March 2011] [07:09:02] &lt;Guthur&gt;    and then they would wrap it as a zmq_msg internally?</div>
<div class="line">[Monday 21 March 2011] [07:09:07] &lt;sustrik&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [07:09:22] &lt;Guthur&gt;    umm, that&#8217;s pretty nice</div>
<div class="line">[Monday 21 March 2011] [07:09:24] &lt;sustrik&gt;   the original signature will still be available as zmq_sendmsg and zmq_recvmsg</div>
<div class="line">[Monday 21 March 2011] [07:09:24] &lt;pieterh&gt;   sustrik: one thing I noticed is missing is zero-copy on recv</div>
<div class="line">[Monday 21 March 2011] [07:09:34] &lt;sustrik&gt;   yes?</div>
<div class="line">[Monday 21 March 2011] [07:09:44] &lt;Guthur&gt;    that could actually simplify bindings</div>
<div class="line">[Monday 21 March 2011] [07:09:46] &lt;pieterh&gt;   I assume this is what we can do with 3.0</div>
<div class="line">[Monday 21 March 2011] [07:10:08] &lt;pieterh&gt;   size = zmq_recv (socket, void <a href="#id7"><span class="problematic" id="id8">**</span></a>data)</div>
<div class="line">[Monday 21 March 2011] [07:10:27] &lt;Guthur&gt;    <a href="#id9"><span class="problematic" id="id10">*</span></a>authoring bindings</div>
<div class="line">[Monday 21 March 2011] [07:10:27] &lt;pieterh&gt;   where I get a malloc&#8217;d blob I can then pass around</div>
<div class="line">[Monday 21 March 2011] [07:10:48] &lt;sustrik&gt;   can&#8217;t be done</div>
<div class="line">[Monday 21 March 2011] [07:11:03] &lt;sustrik&gt;   because you don&#8217;t know what allocation mechanism was used to allocate the buffer</div>
<div class="line">[Monday 21 March 2011] [07:11:14] &lt;sustrik&gt;   thus, you don&#8217;t know whether to free it or what</div>
<div class="line">[Monday 21 March 2011] [07:11:21] &lt;pieterh&gt;   ah, I mean recv() would always allocate on the heap</div>
<div class="line">[Monday 21 March 2011] [07:11:31] &lt;sustrik&gt;   copying the data?</div>
<div class="line">[Monday 21 March 2011] [07:11:50] &lt;pieterh&gt;   no copying, allocate a block, read into that block, and provide the caller with the block address</div>
<div class="line">[Monday 21 March 2011] [07:11:58] &lt;pieterh&gt;   the caller then uses the block with no copying</div>
<div class="line">[Monday 21 March 2011] [07:12:05] &lt;pieterh&gt;   today, you have to always copy the data received</div>
<div class="line">[Monday 21 March 2011] [07:12:06] &lt;sustrik&gt;   the socket is not in control of the allocation process</div>
<div class="line">[Monday 21 March 2011] [07:12:18] &lt;sustrik&gt;   it can be say another socket allocating buffer</div>
<div class="line">[Monday 21 March 2011] [07:12:25] &lt;sustrik&gt;   and sending it via inproc</div>
<div class="line">[Monday 21 March 2011] [07:12:34] &lt;pieterh&gt;   inproc is special...</div>
<div class="line">[Monday 21 March 2011] [07:12:41] &lt;sustrik&gt;   it is</div>
<div class="line">[Monday 21 March 2011] [07:12:49] &lt;pieterh&gt;   forgetting inproc for a second...</div>
<div class="line">[Monday 21 March 2011] [07:13:07] &lt;sustrik&gt;   you still have the VSM problem</div>
<div class="line">[Monday 21 March 2011] [07:13:16] &lt;sustrik&gt;   very small messages are allocated on the stack</div>
<div class="line">[Monday 21 March 2011] [07:13:24] &lt;sustrik&gt;   to speed the processing</div>
<div class="line">[Monday 21 March 2011] [07:13:25] &lt;pieterh&gt;   in C?</div>
<div class="line">[Monday 21 March 2011] [07:13:32] &lt;sustrik&gt;   inside libzmq</div>
<div class="line">[Monday 21 March 2011] [07:13:42] &lt;pieterh&gt;   how do you return a zmq_msg_t referring to a VSM on the stack?</div>
<div class="line">[Monday 21 March 2011] [07:13:53] &lt;sustrik&gt;   it&#8217;s embedded</div>
<div class="line">[Monday 21 March 2011] [07:14:04] &lt;sustrik&gt;   see the definition in zmq.h</div>
<div class="line">[Monday 21 March 2011] [07:14:28] &lt;pieterh&gt;   ok, sure</div>
<div class="line">[Monday 21 March 2011] [07:14:30] &lt;sustrik&gt;   in short, there are different alloc/dealloc mechanisms</div>
<div class="line">[Monday 21 March 2011] [07:14:43] &lt;sustrik&gt;   zmq_msg_t cleanly wraps the buffer and the deallocation function</div>
<div class="line">[Monday 21 March 2011] [07:14:44] &lt;pieterh&gt;   ok, at the risk of being glib, forget VSMs for a second too, they&#8217;re special</div>
<div class="line">[Monday 21 March 2011] [07:14:51] &lt;sustrik&gt;   ok</div>
<div class="line">[Monday 21 March 2011] [07:15:00] &lt;pieterh&gt;   the bulk case is large messages, where copying is a cost</div>
<div class="line">[Monday 21 March 2011] [07:15:01] &lt;Guthur&gt;    so inproc is special and VSM is special</div>
<div class="line">[Monday 21 March 2011] [07:15:09] &lt;pieterh&gt;   yes, this is accurate, they&#8217;re both optimizations</div>
<div class="line">[Monday 21 March 2011] [07:15:20] &lt;pieterh&gt;   which means they can depend on a more complex API, that&#8217;s fine</div>
<div class="line">[Monday 21 March 2011] [07:16:16] &lt;pieterh&gt;   sustrik: the semantic which I used in the zmsg class, and which works really neatly</div>
<div class="line">[Monday 21 March 2011] [07:16:21] &lt;sustrik&gt;   if you don&#8217;t care about allocation and copying cost in inproc and small message scenarios</div>
<div class="line">[Monday 21 March 2011] [07:16:24] &lt;Guthur&gt;    at the moment though this specialness is too apparent the user, the inproc issue earlier withstanding</div>
<div class="line">[Monday 21 March 2011] [07:16:33] &lt;pieterh&gt;   is that recv() returns a freshly allocated block, and send() always frees a block when it&#8217;s done</div>
<div class="line">[Monday 21 March 2011] [07:16:38] &lt;Guthur&gt;    iis/isn&#8217;t</div>
<div class="line">[Monday 21 March 2011] [07:16:55] &lt;sustrik&gt;   you can wrap zmq_sendmsg to do the transformation of zmq_msg_t into alloc&#8217;d buffer</div>
<div class="line">[Monday 21 March 2011] [07:17:36] &lt;pieterh&gt;   sustrik: I do care, but we can (will) make multiple levels of API</div>
<div class="line">[Monday 21 March 2011] [07:17:55] &lt;sustrik&gt;   and what&#8217;s the point of the proposal?</div>
<div class="line">[Monday 21 March 2011] [07:18:00]      * sustrik doesn&#8217;t get it</div>
<div class="line">[Monday 21 March 2011] [07:18:06] &lt;pieterh&gt;   hmm, well,.. :-)</div>
<div class="line">[Monday 21 March 2011] [07:18:12] &lt;pieterh&gt;   zero-copy on read</div>
<div class="line">[Monday 21 March 2011] [07:18:19] &lt;pieterh&gt;   in the simplest possible fashion</div>
<div class="line">[Monday 21 March 2011] [07:18:37] &lt;pieterh&gt;   ok, forget it, POSIX socket API doesn&#8217;t offer this</div>
<div class="line">[Monday 21 March 2011] [07:18:43] &lt;sustrik&gt;   while at the same time sacrificing zero copy in some scenarios</div>
<div class="line">[Monday 21 March 2011] [07:18:50] &lt;sustrik&gt;   zero-copy is a beast</div>
<div class="line">[Monday 21 March 2011] [07:18:54] &lt;pieterh&gt;   as long as you can recv() directly into a user-allocated buffer, you get zero copy</div>
<div class="line">[Monday 21 March 2011] [07:18:55] &lt;sustrik&gt;   no support in POSIX</div>
<div class="line">[Monday 21 March 2011] [07:19:23] &lt;pieterh&gt;   I just want to be able to store message contents without copying them</div>
<div class="line">[Monday 21 March 2011] [07:19:28] &lt;sustrik&gt;   yes, but that makes the messaging lock-step</div>
<div class="line">[Monday 21 March 2011] [07:19:37] &lt;pieterh&gt;   indeed</div>
<div class="line">[Monday 21 March 2011] [07:19:44] &lt;pieterh&gt;   only the recv knows how much memory to allocate</div>
<div class="line">[Monday 21 March 2011] [07:19:54] &lt;sustrik&gt;   exactly</div>
<div class="line">[Monday 21 March 2011] [07:20:05] &lt;sustrik&gt;   so think of zmq_msg_t as a buffer</div>
<div class="line">[Monday 21 March 2011] [07:20:06] &lt;pieterh&gt;   or else, as has been discussed, a user-pluggable allocator</div>
<div class="line">[Monday 21 March 2011] [07:20:10] &lt;pieterh&gt;   which is horrid IMO</div>
<div class="line">[Monday 21 March 2011] [07:20:38] &lt;sustrik&gt;   yuck</div>
<div class="line">[Monday 21 March 2011] [07:20:53] &lt;sustrik&gt;   you can use tcmalloc and similar though</div>
<div class="line">[Monday 21 March 2011] [07:21:00] &lt;sustrik&gt;   as they expose alloc/free API</div>
<div class="line">[Monday 21 March 2011] [07:21:07] &lt;pieterh&gt;   they look like malloc/free</div>
<div class="line">[Monday 21 March 2011] [07:21:16] &lt;sustrik&gt;   you just link the library</div>
<div class="line">[Monday 21 March 2011] [07:21:19] &lt;pieterh&gt;   yup</div>
<div class="line">[Monday 21 March 2011] [07:21:22] &lt;sustrik&gt;   and all allocations are redirected</div>
<div class="line">[Monday 21 March 2011] [07:21:33] &lt;pieterh&gt;   anyhow, think about it, if there&#8217;s a way to return a fresh buffer on recv</div>
<div class="line">[Monday 21 March 2011] [07:21:39] &lt;pieterh&gt;   it would be elegant IMO</div>
<div class="line">[Monday 21 March 2011] [07:21:45] &lt;sustrik&gt;   well, zmq_msg_t is a buffer</div>
<div class="line">[Monday 21 March 2011] [07:21:51] &lt;sustrik&gt;   it looks something like this:</div>
<div class="line">[Monday 21 March 2011] [07:21:52] &lt;pieterh&gt;   yeah, but it&#8217;s not a buffer</div>
<div class="line">[Monday 21 March 2011] [07:22:00] &lt;sustrik&gt;   struct zmq_msg_t</div>
<div class="line">[Monday 21 March 2011] [07:22:01] &lt;sustrik&gt;   {</div>
<div class="line">[Monday 21 March 2011] [07:22:03] &lt;sustrik&gt;      void <a href="#id11"><span class="problematic" id="id12">*</span></a>data</div>
<div class="line">[Monday 21 March 2011] [07:22:05] &lt;pieterh&gt;   it&#8217;s a structure that contains a buffer</div>
<div class="line">[Monday 21 March 2011] [07:22:06] &lt;sustrik&gt;      size_t size;</div>
<div class="line">[Monday 21 March 2011] [07:22:15] &lt;sustrik&gt;      free_fn_t free_fn;</div>
<div class="line">[Monday 21 March 2011] [07:22:16] &lt;sustrik&gt;   }</div>
<div class="line">[Monday 21 March 2011] [07:22:16] &lt;sustrik&gt;   ;</div>
<div class="line">[Monday 21 March 2011] [07:22:18] &lt;pieterh&gt;   well...</div>
<div class="line">[Monday 21 March 2011] [07:22:24] &lt;pieterh&gt;   ok, point taken, it does work</div>
<div class="line">[Monday 21 March 2011] [07:22:28] &lt;pieterh&gt;   it&#8217;s a blob descriptor</div>
<div class="line">[Monday 21 March 2011] [07:22:33] &lt;sustrik&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [07:23:05] &lt;pieterh&gt;   (a) it should be called &#8216;blob_t&#8217; and (b) recv() should return a freshly created blob</div>
<div class="line">[Monday 21 March 2011] [07:23:18] &lt;pieterh&gt;   blob_t <a href="#id13"><span class="problematic" id="id14">*</span></a>blob = zmq_recv (socket)</div>
<div class="line">[Monday 21 March 2011] [07:23:28] &lt;sustrik&gt;   recv has to return int</div>
<div class="line">[Monday 21 March 2011] [07:23:34] &lt;sustrik&gt;   to be POSIX compliant</div>
<div class="line">[Monday 21 March 2011] [07:23:40] &lt;sustrik&gt;   int + errno</div>
<div class="line">[Monday 21 March 2011] [07:23:45] &lt;pieterh&gt;   int rc = zmq_recv (socket, &amp;blob)</div>
<div class="line">[Monday 21 March 2011] [07:23:49] &lt;sustrik&gt;   yes</div>
<div class="line">[Monday 21 March 2011] [07:23:59] &lt;sustrik&gt;   that&#8217;s how it works now</div>
<div class="line">[Monday 21 March 2011] [07:23:59] &lt;pieterh&gt;   point being, recv creates the buffer</div>
<div class="line">[Monday 21 March 2011] [07:24:02] &lt;sustrik&gt;   except for the name</div>
<div class="line">[Monday 21 March 2011] [07:24:09] &lt;pieterh&gt;   no, now you need this extra init</div>
<div class="line">[Monday 21 March 2011] [07:24:17] &lt;sustrik&gt;   ah</div>
<div class="line">[Monday 21 March 2011] [07:24:17] &lt;pieterh&gt;   rather annoying</div>
<div class="line">[Monday 21 March 2011] [07:24:28] &lt;sustrik&gt;   that&#8217;s to avoid additional malloc</div>
<div class="line">[Monday 21 March 2011] [07:24:38] &lt;pieterh&gt;   optimization</div>
<div class="line">[Monday 21 March 2011] [07:24:39] &lt;sustrik&gt;   so you create blob_t on the stack</div>
<div class="line">[Monday 21 March 2011] [07:24:51] &lt;sustrik&gt;   which is really fast</div>
<div class="line">[Monday 21 March 2011] [07:24:55] &lt;pieterh&gt;   I know you want that but it shouldn&#8217;t be in the simple API</div>
<div class="line">[Monday 21 March 2011] [07:24:58] &lt;sustrik&gt;   instead of putting it on the heap</div>
<div class="line">[Monday 21 March 2011] [07:25:21] &lt;pieterh&gt;   simple API should be just fast enough, and as simple as it can be, and POSIX like</div>
<div class="line">[Monday 21 March 2011] [07:25:23] &lt;pieterh&gt;   IMO</div>
<div class="line">[Monday 21 March 2011] [07:25:24] &lt;sustrik&gt;   in 3.0 the simple API will be POSIX like</div>
<div class="line">[Monday 21 March 2011] [07:25:35] &lt;sustrik&gt;   zmq_send (void*, size_t)</div>
<div class="line">[Monday 21 March 2011] [07:25:45] &lt;sustrik&gt;   zero-copy is never neat</div>
<div class="line">[Monday 21 March 2011] [07:25:53] &lt;sustrik&gt;   it&#8217;s optimisation in itself</div>
<div class="line">[Monday 21 March 2011] [07:26:00] &lt;pieterh&gt;   what&#8217;s the zmq_recv syntax for 3.0...?</div>
<div class="line">[Monday 21 March 2011] [07:26:03] &lt;sustrik&gt;   and one that crosses all levels of stack</div>
<div class="line">[Monday 21 March 2011] [07:26:08] &lt;sustrik&gt;   and makes mess of layering</div>
<div class="line">[Monday 21 March 2011] [07:26:27] &lt;pieterh&gt;   int size = zmq_recv (socket, void <a href="#id15"><span class="problematic" id="id16">*</span></a>)...?</div>
<div class="line">[Monday 21 March 2011] [07:26:28] &lt;sustrik&gt;   zmq_recv (void <a href="#id17"><span class="problematic" id="id18">*</span></a>buf, size_t <a href="#id19"><span class="problematic" id="id20">*</span></a>size, int flags);</div>
<div class="line">[Monday 21 March 2011] [07:26:39] &lt;sustrik&gt;   forgor socket</div>
<div class="line">[Monday 21 March 2011] [07:26:41] &lt;sustrik&gt;   forgot</div>
<div class="line">[Monday 21 March 2011] [07:26:52] &lt;sustrik&gt;   same as POSIX recv()</div>
<div class="line">[Monday 21 March 2011] [07:27:32] &lt;pieterh&gt;   ok, should be &#8216;ssize_t zmq_recv(void <a href="#id21"><span class="problematic" id="id22">*</span></a>socket, void <a href="#id23"><span class="problematic" id="id24">*</span></a>buf, size_t len, int flags);</div>
<div class="line">[Monday 21 March 2011] [07:27:41] &lt;sustrik&gt;   size_t <a href="#id25"><span class="problematic" id="id26">*</span></a>len</div>
<div class="line">[Monday 21 March 2011] [07:27:45] &lt;pieterh&gt;   nope</div>
<div class="line">[Monday 21 March 2011] [07:27:51] &lt;pieterh&gt;   size_t len, maximum size of buffer</div>
<div class="line">[Monday 21 March 2011] [07:27:58] &lt;sustrik&gt;   ah</div>
<div class="line">[Monday 21 March 2011] [07:27:59] &lt;pieterh&gt;   return code is actual size read</div>
<div class="line">[Monday 21 March 2011] [07:28:00] &lt;sustrik&gt;   you are right</div>
<div class="line">[Monday 21 March 2011] [07:28:11] &lt;pieterh&gt;   it&#8217;s hugely annoying because you have to allocate randomly huge buffers</div>
<div class="line">[Monday 21 March 2011] [07:28:25] &lt;pieterh&gt;   and there&#8217;s no way to recover if the buffer was too small</div>
<div class="line">[Monday 21 March 2011] [07:28:37] &lt;pieterh&gt;   conclusion: you <em>cannot</em> use the POSIX socket API 100% for recv</div>
<div class="line">[Monday 21 March 2011] [07:28:38] &lt;sustrik&gt;   EMSGSIZE</div>
<div class="line">[Monday 21 March 2011] [07:28:43] &lt;pieterh&gt;   no way to recover</div>
<div class="line">[Monday 21 March 2011] [07:28:48] &lt;sustrik&gt;   then you can increase the buffer</div>
<div class="line">[Monday 21 March 2011] [07:28:50] &lt;sustrik&gt;   and recv() anew</div>
<div class="line">[Monday 21 March 2011] [07:28:53] &lt;pieterh&gt;   &#8216;please go back and re-read&#8217;?</div>
<div class="line">[Monday 21 March 2011] [07:28:53] &lt;sustrik&gt;   however</div>
<div class="line">[Monday 21 March 2011] [07:28:57] &lt;pieterh&gt;   ugh</div>
<div class="line">[Monday 21 March 2011] [07:29:05] &lt;pieterh&gt;   ugh and ugh</div>
<div class="line">[Monday 21 March 2011] [07:29:15] &lt;sustrik&gt;   in most scenarios you want to put the limit on message size anyway</div>
<div class="line">[Monday 21 March 2011] [07:29:17] &lt;pieterh&gt;   it means putting message lengths into separate frames</div>
<div class="line">[Monday 21 March 2011] [07:29:27] &lt;sustrik&gt;   setsockopt (MAXMSGSIZE, 1000);</div>
<div class="line">[Monday 21 March 2011] [07:29:35] &lt;pieterh&gt;   that&#8217;s orthogonal to this</div>
<div class="line">[Monday 21 March 2011] [07:29:39] &lt;sustrik&gt;   char buff [1000];</div>
<div class="line">[Monday 21 March 2011] [07:29:46] &lt;sustrik&gt;   zmq_recv (buff, 1000);</div>
<div class="line">[Monday 21 March 2011] [07:29:50] &lt;pieterh&gt;   ugh and ugh again</div>
<div class="line">[Monday 21 March 2011] [07:30:03] &lt;pieterh&gt;   I have frames of 8 bytes and frames of 2MB</div>
<div class="line">[Monday 21 March 2011] [07:30:42] &lt;pieterh&gt;   seriously unsatisfactory to not be able to properly allocate the right buffer size for each frame</div>
<div class="line">[Monday 21 March 2011] [07:30:50] &lt;sustrik&gt;   then you need to use more complex API</div>
<div class="line">[Monday 21 March 2011] [07:31:16] &lt;pieterh&gt;   this makes the simple API almost useless IMO</div>
<div class="line">[Monday 21 March 2011] [07:31:21] &lt;pieterh&gt;   nice for send, useless for recv</div>
<div class="line">[Monday 21 March 2011] [07:32:25] &lt;sustrik&gt;   what&#8217;s the alternative then?</div>
<div class="line">[Monday 21 March 2011] [07:32:40] &lt;sustrik&gt;   tha&#8217;ts how UDP works, irrc</div>
<div class="line">[Monday 21 March 2011] [07:32:42] &lt;pieterh&gt;   I don&#8217;t know, but reading into a pre-allocated buffer is inacceptable IMO</div>
<div class="line">[Monday 21 March 2011] [07:32:47] &lt;pieterh&gt;   UDP has maximum frame sizes</div>
<div class="line">[Monday 21 March 2011] [07:32:51] &lt;pieterh&gt;   TCP is a stream</div>
<div class="line">[Monday 21 March 2011] [07:32:54] &lt;sustrik&gt;   ZMQ_MAXMSGSIZE</div>
<div class="line">[Monday 21 March 2011] [07:33:04] &lt;sustrik&gt;   same as MTU</div>
<div class="line">[Monday 21 March 2011] [07:33:07] &lt;pieterh&gt;   0MQ is message-oriented, that means different read/write semantics</div>
<div class="line">[Monday 21 March 2011] [07:33:09] &lt;sustrik&gt;   but on messaging level</div>
<div class="line">[Monday 21 March 2011] [07:33:15] &lt;pieterh&gt;   it&#8217;s not the same thing</div>
<div class="line">[Monday 21 March 2011] [07:33:24] &lt;pieterh&gt;   you have a 64-bit message size</div>
<div class="line">[Monday 21 March 2011] [07:33:48] &lt;sustrik&gt;   well, i think there are 2 distinct use cases here</div>
<div class="line">[Monday 21 March 2011] [07:33:54] &lt;sustrik&gt;   1. something like market data</div>
<div class="line">[Monday 21 March 2011] [07:34:02] &lt;pieterh&gt;   I think it&#8217;s necessary to define semantics that fit messaging</div>
<div class="line">[Monday 21 March 2011] [07:34:03] &lt;sustrik&gt;   you want to limit max size of message</div>
<div class="line">[Monday 21 March 2011] [07:34:10] &lt;pieterh&gt;   not try to make 0MQ look like TCP, it&#8217;s not</div>
<div class="line">[Monday 21 March 2011] [07:34:22] &lt;sustrik&gt;   to prevent someone killing the transmission by pushing 4GB blob</div>
<div class="line">[Monday 21 March 2011] [07:34:30] &lt;pieterh&gt;   this is orthogonal</div>
<div class="line">[Monday 21 March 2011] [07:34:33] &lt;pieterh&gt;   it&#8217;s not the issue</div>
<div class="line">[Monday 21 March 2011] [07:34:37] &lt;sustrik&gt;   in such case zmq_recv() is sufficient</div>
<div class="line">[Monday 21 March 2011] [07:34:46] &lt;pieterh&gt;   I can&#8217;t agree...</div>
<div class="line">[Monday 21 March 2011] [07:34:46] &lt;sustrik&gt;   2. something like FTP</div>
<div class="line">[Monday 21 March 2011] [07:34:52] &lt;pieterh&gt;   let&#8217;s say I want to hold a queue of messages</div>
<div class="line">[Monday 21 March 2011] [07:34:59] &lt;sustrik&gt;   in that case you don&#8217;t know the size in advance</div>
<div class="line">[Monday 21 March 2011] [07:35:00] &lt;pieterh&gt;   might be 1M messages, held for 1 second</div>
<div class="line">[Monday 21 March 2011] [07:35:09] &lt;pieterh&gt;   I have to allocate the maximum frame size for each one</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="2011-December.html"
                        title="previous chapter">2011-December</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/2011-March.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="2011-December.html" title="2011-December"
             >previous</a> |</li>
        <li><a href="index.html">ZeroMq IRC Log v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Peter Alexander.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>